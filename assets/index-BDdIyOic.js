var l4=Object.defineProperty;var c4=(e,t,s)=>t in e?l4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Re=(e,t,s)=>c4(e,typeof t!="symbol"?t+"":t,s);function u4(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();function o0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var F1={exports:{}},_m={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d4=Symbol.for("react.transitional.element"),f4=Symbol.for("react.fragment");function H1(e,t,s){var n=null;if(s!==void 0&&(n=""+s),t.key!==void 0&&(n=""+t.key),"key"in t){s={};for(var a in t)a!=="key"&&(s[a]=t[a])}else s=t;return t=s.ref,{$$typeof:d4,type:e,key:n,ref:t!==void 0?t:null,props:s}}_m.Fragment=f4;_m.jsx=H1;_m.jsxs=H1;F1.exports=_m;var r=F1.exports;const _t={CONTENT:1,DROPDOWN:100,AUTOCOMPLETE:120,TOOLTIP:1e3,MODAL:200,DRAWER:202,HEADER:50,SIDEBAR:60,STICKY:40};var U1={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0=Symbol.for("react.transitional.element"),m4=Symbol.for("react.portal"),h4=Symbol.for("react.fragment"),g4=Symbol.for("react.strict_mode"),p4=Symbol.for("react.profiler"),x4=Symbol.for("react.consumer"),y4=Symbol.for("react.context"),v4=Symbol.for("react.forward_ref"),b4=Symbol.for("react.suspense"),w4=Symbol.for("react.memo"),G1=Symbol.for("react.lazy"),ib=Symbol.iterator;function N4(e){return e===null||typeof e!="object"?null:(e=ib&&e[ib]||e["@@iterator"],typeof e=="function"?e:null)}var V1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q1=Object.assign,Q1={};function Cl(e,t,s){this.props=e,this.context=t,this.refs=Q1,this.updater=s||V1}Cl.prototype.isReactComponent={};Cl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Cl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Z1(){}Z1.prototype=Cl.prototype;function c0(e,t,s){this.props=e,this.context=t,this.refs=Q1,this.updater=s||V1}var u0=c0.prototype=new Z1;u0.constructor=c0;q1(u0,Cl.prototype);u0.isPureReactComponent=!0;var ob=Array.isArray,it={H:null,A:null,T:null,S:null,V:null},W1=Object.prototype.hasOwnProperty;function d0(e,t,s,n,a,i){return s=i.ref,{$$typeof:l0,type:e,key:t,ref:s!==void 0?s:null,props:i}}function j4(e,t){return d0(e.type,t,void 0,void 0,void 0,e.props)}function f0(e){return typeof e=="object"&&e!==null&&e.$$typeof===l0}function k4(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var lb=/\/+/g;function Ih(e,t){return typeof e=="object"&&e!==null&&e.key!=null?k4(""+e.key):t.toString(36)}function cb(){}function S4(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(cb,cb):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function po(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case l0:case m4:o=!0;break;case G1:return o=e._init,po(o(e._payload),t,s,n,a)}}if(o)return a=a(e),o=n===""?"."+Ih(e,0):n,ob(a)?(s="",o!=null&&(s=o.replace(lb,"$&/")+"/"),po(a,t,s,"",function(u){return u})):a!=null&&(f0(a)&&(a=j4(a,s+(a.key==null||e&&e.key===a.key?"":(""+a.key).replace(lb,"$&/")+"/")+o)),t.push(a)),1;o=0;var l=n===""?".":n+":";if(ob(e))for(var c=0;c<e.length;c++)n=e[c],i=l+Ih(n,c),o+=po(n,t,s,i,a);else if(c=N4(e),typeof c=="function")for(e=c.call(e),c=0;!(n=e.next()).done;)n=n.value,i=l+Ih(n,c++),o+=po(n,t,s,i,a);else if(i==="object"){if(typeof e.then=="function")return po(S4(e),t,s,n,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function ad(e,t,s){if(e==null)return e;var n=[],a=0;return po(e,n,"","",function(i){return t.call(s,i,a++)}),n}function _4(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ub=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function C4(){}ke.Children={map:ad,forEach:function(e,t,s){ad(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return ad(e,function(){t++}),t},toArray:function(e){return ad(e,function(t){return t})||[]},only:function(e){if(!f0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=Cl;ke.Fragment=h4;ke.Profiler=p4;ke.PureComponent=c0;ke.StrictMode=g4;ke.Suspense=b4;ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=it;ke.__COMPILER_RUNTIME={__proto__:null,c:function(e){return it.H.useMemoCache(e)}};ke.cache=function(e){return function(){return e.apply(null,arguments)}};ke.cloneElement=function(e,t,s){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var n=q1({},e.props),a=e.key,i=void 0;if(t!=null)for(o in t.ref!==void 0&&(i=void 0),t.key!==void 0&&(a=""+t.key),t)!W1.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(n[o]=t[o]);var o=arguments.length-2;if(o===1)n.children=s;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];n.children=l}return d0(e.type,a,void 0,void 0,i,n)};ke.createContext=function(e){return e={$$typeof:y4,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:x4,_context:e},e};ke.createElement=function(e,t,s){var n,a={},i=null;if(t!=null)for(n in t.key!==void 0&&(i=""+t.key),t)W1.call(t,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=s;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return d0(e,i,void 0,void 0,null,a)};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:v4,render:e}};ke.isValidElement=f0;ke.lazy=function(e){return{$$typeof:G1,_payload:{_status:-1,_result:e},_init:_4}};ke.memo=function(e,t){return{$$typeof:w4,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=it.T,s={};it.T=s;try{var n=e(),a=it.S;a!==null&&a(s,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(C4,ub)}catch(i){ub(i)}finally{it.T=t}};ke.unstable_useCacheRefresh=function(){return it.H.useCacheRefresh()};ke.use=function(e){return it.H.use(e)};ke.useActionState=function(e,t,s){return it.H.useActionState(e,t,s)};ke.useCallback=function(e,t){return it.H.useCallback(e,t)};ke.useContext=function(e){return it.H.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e,t){return it.H.useDeferredValue(e,t)};ke.useEffect=function(e,t,s){var n=it.H;if(typeof s=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)};ke.useId=function(){return it.H.useId()};ke.useImperativeHandle=function(e,t,s){return it.H.useImperativeHandle(e,t,s)};ke.useInsertionEffect=function(e,t){return it.H.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return it.H.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return it.H.useMemo(e,t)};ke.useOptimistic=function(e,t){return it.H.useOptimistic(e,t)};ke.useReducer=function(e,t,s){return it.H.useReducer(e,t,s)};ke.useRef=function(e){return it.H.useRef(e)};ke.useState=function(e){return it.H.useState(e)};ke.useSyncExternalStore=function(e,t,s){return it.H.useSyncExternalStore(e,t,s)};ke.useTransition=function(){return it.H.useTransition()};ke.version="19.1.0";U1.exports=ke;var h=U1.exports;const z=o0(h),Y1=u4({__proto__:null,default:z},[h]);class E4 extends h.Component{constructor(s){super(s);Re(this,"copyErrorToClipboard",async()=>{var n;if(!this.state.error)return;const s=`Error: ${this.state.error.message}
Stack: ${this.state.error.stack}
Component Stack: ${((n=this.state.errorInfo)==null?void 0:n.componentStack)||"N/A"}
URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Timestamp: ${new Date().toISOString()}`;try{await navigator.clipboard.writeText(s),alert("Error details copied to clipboard! Please share this with the developer.")}catch{const i=document.createElement("textarea");i.value=s,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),alert("Error details copied to clipboard! Please share this with the developer.")}});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,n){console.error("ErrorBoundary caught an error:",s,n),this.setState({error:s,errorInfo:n})}render(){var s;return this.state.hasError?this.props.fallback?this.props.fallback:r.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg p-6 border border-red-200",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-8 w-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Something went wrong"}),r.jsx("p",{className:"text-sm text-red-600",children:"An unexpected error occurred. Please help us fix this by sharing the error details."})]})]}),r.jsx("div",{className:"mt-4",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Error Details"}),r.jsx("div",{className:"mt-2 text-sm text-red-700",children:r.jsx("p",{className:"font-mono break-all",children:(s=this.state.error)==null?void 0:s.message})})]})]})})}),r.jsxs("div",{className:"mt-6 flex gap-3",children:[r.jsxs("button",{onClick:this.copyErrorToClipboard,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[r.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Error Details"]}),r.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reload Page"]})]}),r.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[r.jsx("p",{children:"If this error persists, please share the copied error details with me:"}),r.jsxs("p",{className:"mt-1",children:["ðŸ“§ ",r.jsx("strong",{children:"Email:"})," bardic.noel@gmail.com"]}),r.jsxs("p",{className:"mt-1",children:["ðŸ’¬ ",r.jsx("strong",{children:"Discord:"})," gingerbeardbard"]})]})]})}):this.props.children}}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),R4=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,n)=>n?n.toUpperCase():s.toLowerCase()),db=e=>{const t=R4(e);return t.charAt(0).toUpperCase()+t.slice(1)},X1=(...e)=>e.filter((t,s,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===s).join(" ").trim(),T4=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var M4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...M4,width:t,height:t,stroke:e,strokeWidth:n?Number(s)*24/Number(t):s,className:X1("lucide",a),...!i&&!T4(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>h.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(e,t)=>{const s=h.forwardRef(({className:n,...a},i)=>h.createElement(D4,{ref:i,iconNode:t,className:X1(`lucide-${A4(db(e))}`,`lucide-${e}`,n),...a}));return s.displayName=db(e),s};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],L4=ee("arrow-down",P4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],fb=ee("arrow-left",z4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],B4=ee("arrow-right",O4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],$4=ee("arrow-up-down",I4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],H4=ee("arrow-up",F4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Qn=ee("book-open",U4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Yo=ee("brain",G4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],q4=ee("chart-column",V4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Bc=ee("check",Q4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],W4=ee("chef-hat",Z4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vt=ee("chevron-down",Y4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Cm=ee("chevron-left",X4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],El=ee("chevron-right",K4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ic=ee("chevron-up",J4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xo=ee("circle-alert",e3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$c=ee("circle-check-big",t3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],n3=ee("circle-x",s3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],m0=ee("circle",a3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$n=ee("clock",r3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],mb=ee("coins",i3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],l3=ee("copy",o3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]],u3=ee("dna",c3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$h=ee("download",d3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],h0=ee("droplets",f3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],h3=ee("ellipsis-vertical",m3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],$r=ee("external-link",g3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Al=ee("eye",p3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],K1=ee("file-text",x3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Rl=ee("flame",y3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],wc=ee("flask-conical",v3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],w3=ee("funnel",b3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],g0=ee("ghost",N3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],$i=ee("grid-3x3",j3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Ko=ee("hand",k3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Yn=ee("heart",S3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],J1=ee("house",_3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Jo=ee("info",C3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],A3=ee("layout-grid",E3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Fr=ee("list",R3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hb=ee("loader-circle",T3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],ek=ee("map",M3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],P3=ee("menu",D3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],z3=ee("message-square",L3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M5 12h14",key:"1ays0h"}]],Po=ee("minus",O3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],I3=ee("monitor",B3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],F3=ee("moon",$3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],p0=ee("package",H3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],G3=ee("pen-line",U3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],br=ee("plus",V3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ma=ee("rotate-ccw",q3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Z3=ee("search-x",Q3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Mr=ee("search",W3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xf=ee("settings",Y3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],K3=ee("share-2",X3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],rt=ee("shield",J3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],yn=ee("sparkles",e5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Oe=ee("star",t5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],gb=ee("sun",s5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],ki=ee("sword",n5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],tk=ee("tag",a5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],tn=ee("target",r5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],o5=ee("trash-2",i5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],c5=ee("trees",l5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Fc=ee("trending-down",u5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Dr=ee("trending-up",d5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Si=ee("triangle-alert",f5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],h5=ee("user-check",m5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],yf=ee("user",g5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],sk=ee("users",p5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],y5=ee("utensils",x5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],pb=ee("weight",v5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],w5=ee("wine",b5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ze=ee("x",N5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],St=ee("zap",j5);var x0={};Object.defineProperty(x0,"__esModule",{value:!0});x0.parse=R5;x0.serialize=T5;const k5=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,S5=/^[\u0021-\u003A\u003C-\u007E]*$/,_5=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,C5=/^[\u0020-\u003A\u003D-\u007E]*$/,E5=Object.prototype.toString,A5=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function R5(e,t){const s=new A5,n=e.length;if(n<2)return s;const a=(t==null?void 0:t.decode)||M5;let i=0;do{const o=e.indexOf("=",i);if(o===-1)break;const l=e.indexOf(";",i),c=l===-1?n:l;if(o>c){i=e.lastIndexOf(";",o-1)+1;continue}const u=xb(e,i,o),d=yb(e,o,u),f=e.slice(u,d);if(s[f]===void 0){let m=xb(e,o+1,c),g=yb(e,c,m);const b=a(e.slice(m,g));s[f]=b}i=c+1}while(i<n);return s}function xb(e,t,s){do{const n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<s);return s}function yb(e,t,s){for(;t>s;){const n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return s}function T5(e,t,s){const n=(s==null?void 0:s.encode)||encodeURIComponent;if(!k5.test(e))throw new TypeError(`argument name is invalid: ${e}`);const a=n(t);if(!S5.test(a))throw new TypeError(`argument val is invalid: ${t}`);let i=e+"="+a;if(!s)return i;if(s.maxAge!==void 0){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);i+="; Max-Age="+s.maxAge}if(s.domain){if(!_5.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);i+="; Domain="+s.domain}if(s.path){if(!C5.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);i+="; Path="+s.path}if(s.expires){if(!D5(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);i+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.partitioned&&(i+="; Partitioned"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return i}function M5(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function D5(e){return E5.call(e)==="[object Date]"}var vb="popstate";function P5(e={}){function t(a,i){let{pathname:o="/",search:l="",hash:c=""}=Fi(a.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),fp("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(a,i){let o=a.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=a.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:Hc(i))}function n(a,i){nn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return z5(t,s,n,e)}function ft(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function L5(){return Math.random().toString(36).substring(2,10)}function bb(e,t){return{usr:e.state,key:e.key,idx:t}}function fp(e,t,s=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Fi(t):t,state:s,key:t&&t.key||n||L5()}}function Hc({pathname:e="/",search:t="",hash:s=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Fi(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function z5(e,t,s,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let v=d(),p=v==null?null:v-u;u=v,c&&c({action:l,location:y.location,delta:p})}function m(v,p){l="PUSH";let x=fp(y.location,v,p);s&&s(x,v),u=d()+1;let w=bb(x,u),N=y.createHref(x);try{o.pushState(w,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(N)}i&&c&&c({action:l,location:y.location,delta:1})}function g(v,p){l="REPLACE";let x=fp(y.location,v,p);s&&s(x,v),u=d();let w=bb(x,u),N=y.createHref(x);o.replaceState(w,"",N),i&&c&&c({action:l,location:y.location,delta:0})}function b(v){return O5(v)}let y={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(vb,f),c=v,()=>{a.removeEventListener(vb,f),c=null}},createHref(v){return t(a,v)},createURL:b,encodeLocation(v){let p=b(v);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:g,go(v){return o.go(v)}};return y}function O5(e,t=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ft(s,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Hc(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function nk(e,t,s="/"){return B5(e,t,s,!1)}function B5(e,t,s,n){let a=typeof t=="string"?Fi(t):t,i=Da(a.pathname||"/",s);if(i==null)return null;let o=ak(e);I5(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Y5(i);l=Z5(o[c],u,n)}return l}function ak(e,t=[],s=[],n=""){let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ft(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let u=Ca([n,c.relativePath]),d=s.concat(c);i.children&&i.children.length>0&&(ft(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),ak(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:q5(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of rk(i.path))a(i,o,c)}),t}function rk(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=rk(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function I5(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Q5(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var $5=/^:[\w-]+$/,F5=3,H5=2,U5=1,G5=10,V5=-2,wb=e=>e==="*";function q5(e,t){let s=e.split("/"),n=s.length;return s.some(wb)&&(n+=V5),t&&(n+=H5),s.filter(a=>!wb(a)).reduce((a,i)=>a+($5.test(i)?F5:i===""?U5:G5),n)}function Q5(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Z5(e,t,s=!1){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=vf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&s&&!n[n.length-1].route.index&&(f=vf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Ca([i,f.pathname]),pathnameBase:eP(Ca([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ca([i,f.pathnameBase]))}return o}function vf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=W5(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let b=l[m]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const g=l[m];return f&&!g?u[d]=void 0:u[d]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function W5(e,t=!1,s=!0){nn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Y5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return nn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Da(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function X5(e,t="/"){let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?Fi(e):e;return{pathname:s?s.startsWith("/")?s:K5(s,t):t,search:tP(n),hash:sP(a)}}function K5(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Fh(e,t,s,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function J5(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function ik(e){let t=J5(e);return t.map((s,n)=>n===t.length-1?s.pathname:s.pathnameBase)}function ok(e,t,s,n=!1){let a;typeof e=="string"?a=Fi(e):(a={...e},ft(!a.pathname||!a.pathname.includes("?"),Fh("?","pathname","search",a)),ft(!a.pathname||!a.pathname.includes("#"),Fh("#","pathname","hash",a)),ft(!a.search||!a.search.includes("#"),Fh("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=s;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;a.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=X5(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Ca=e=>e.join("/").replace(/\/\/+/g,"/"),eP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function nP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var lk=["POST","PUT","PATCH","DELETE"];new Set(lk);var aP=["GET",...lk];new Set(aP);var Tl=h.createContext(null);Tl.displayName="DataRouter";var Em=h.createContext(null);Em.displayName="DataRouterState";var ck=h.createContext({isTransitioning:!1});ck.displayName="ViewTransition";var rP=h.createContext(new Map);rP.displayName="Fetchers";var iP=h.createContext(null);iP.displayName="Await";var Xn=h.createContext(null);Xn.displayName="Navigation";var yu=h.createContext(null);yu.displayName="Location";var Kn=h.createContext({outlet:null,matches:[],isDataRoute:!1});Kn.displayName="Route";var y0=h.createContext(null);y0.displayName="RouteError";function oP(e,{relative:t}={}){ft(vu(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=h.useContext(Xn),{hash:a,pathname:i,search:o}=bu(e,{relative:t}),l=i;return s!=="/"&&(l=i==="/"?s:Ca([s,i])),n.createHref({pathname:l,search:o,hash:a})}function vu(){return h.useContext(yu)!=null}function Ga(){return ft(vu(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(yu).location}var uk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dk(e){h.useContext(Xn).static||h.useLayoutEffect(e)}function lt(){let{isDataRoute:e}=h.useContext(Kn);return e?NP():lP()}function lP(){ft(vu(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(Tl),{basename:t,navigator:s}=h.useContext(Xn),{matches:n}=h.useContext(Kn),{pathname:a}=Ga(),i=JSON.stringify(ik(n)),o=h.useRef(!1);return dk(()=>{o.current=!0}),h.useCallback((c,u={})=>{if(nn(o.current,uk),!o.current)return;if(typeof c=="number"){s.go(c);return}let d=ok(c,JSON.parse(i),a,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Ca([t,d.pathname])),(u.replace?s.replace:s.push)(d,u.state,u)},[t,s,i,a,e])}var cP=h.createContext(null);function uP(e){let t=h.useContext(Kn).outlet;return t&&h.createElement(cP.Provider,{value:e},t)}function bu(e,{relative:t}={}){let{matches:s}=h.useContext(Kn),{pathname:n}=Ga(),a=JSON.stringify(ik(s));return h.useMemo(()=>ok(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function dP(e,t){return fk(e,t)}function fk(e,t,s,n){var p;ft(vu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=h.useContext(Xn),{matches:i}=h.useContext(Kn),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let x=d&&d.path||"";mk(c,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let f=Ga(),m;if(t){let x=typeof t=="string"?Fi(t):t;ft(u==="/"||((p=x.pathname)==null?void 0:p.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),m=x}else m=f;let g=m.pathname||"/",b=g;if(u!=="/"){let x=u.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=nk(e,{pathname:b});nn(d||y!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),nn(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=pP(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Ca([u,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Ca([u,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,s,n);return t&&v?h.createElement(yu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},v):v}function fP(){let e=wP(),t=nP(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=h.createElement(h.Fragment,null,h.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:i},"ErrorBoundary")," or"," ",h.createElement("code",{style:i},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),s?h.createElement("pre",{style:a},s):null,o)}var mP=h.createElement(fP,null),hP=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?h.createElement(Kn.Provider,{value:this.props.routeContext},h.createElement(y0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gP({routeContext:e,match:t,children:s}){let n=h.useContext(Tl);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(Kn.Provider,{value:e},s)}function pP(e,t=[],s=null,n=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let a=e,i=s==null?void 0:s.errors;if(i!=null){let c=a.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);ft(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(s)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=s,m=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||m){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let f,m=!1,g=null,b=null;s&&(f=i&&u.route.id?i[u.route.id]:void 0,g=u.route.errorElement||mP,o&&(l<0&&d===0?(mk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,b=null):l===d&&(m=!0,b=u.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,d+1)),v=()=>{let p;return f?p=g:m?p=b:u.route.Component?p=h.createElement(u.route.Component,null):u.route.element?p=u.route.element:p=c,h.createElement(gP,{match:u,routeContext:{outlet:c,matches:y,isDataRoute:s!=null},children:p})};return s&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?h.createElement(hP,{location:s.location,revalidation:s.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}function v0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xP(e){let t=h.useContext(Tl);return ft(t,v0(e)),t}function yP(e){let t=h.useContext(Em);return ft(t,v0(e)),t}function vP(e){let t=h.useContext(Kn);return ft(t,v0(e)),t}function b0(e){let t=vP(e),s=t.matches[t.matches.length-1];return ft(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function bP(){return b0("useRouteId")}function wP(){var n;let e=h.useContext(y0),t=yP("useRouteError"),s=b0("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function NP(){let{router:e}=xP("useNavigate"),t=b0("useNavigate"),s=h.useRef(!1);return dk(()=>{s.current=!0}),h.useCallback(async(a,i={})=>{nn(s.current,uk),s.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var Nb={};function mk(e,t,s){!t&&!Nb[e]&&(Nb[e]=!0,nn(!1,s))}h.memo(jP);function jP({routes:e,future:t,state:s}){return fk(e,void 0,s,t)}function kP(e){return uP(e.context)}function gt(e){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function SP({basename:e="/",children:t=null,location:s,navigationType:n="POP",navigator:a,static:i=!1}){ft(!vu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=h.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof s=="string"&&(s=Fi(s));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:m="default"}=s,g=h.useMemo(()=>{let b=Da(c,o);return b==null?null:{location:{pathname:b,search:u,hash:d,state:f,key:m},navigationType:n}},[o,c,u,d,f,m,n]);return nn(g!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:h.createElement(Xn.Provider,{value:l},h.createElement(yu.Provider,{children:t,value:g}))}function _P({children:e,location:t}){return dP(mp(e),t)}function mp(e,t=[]){let s=[];return h.Children.forEach(e,(n,a)=>{if(!h.isValidElement(n))return;let i=[...t,a];if(n.type===h.Fragment){s.push.apply(s,mp(n.props.children,i));return}ft(n.type===gt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=mp(n.props.children,i)),s.push(o)}),s}var Vd="get",qd="application/x-www-form-urlencoded";function Am(e){return e!=null&&typeof e.tagName=="string"}function CP(e){return Am(e)&&e.tagName.toLowerCase()==="button"}function EP(e){return Am(e)&&e.tagName.toLowerCase()==="form"}function AP(e){return Am(e)&&e.tagName.toLowerCase()==="input"}function RP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function TP(e,t){return e.button===0&&(!t||t==="_self")&&!RP(e)}function hp(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let n=e[s];return t.concat(Array.isArray(n)?n.map(a=>[s,a]):[[s,n]])},[]))}function MP(e,t){let s=hp(e);return t&&t.forEach((n,a)=>{s.has(a)||t.getAll(a).forEach(i=>{s.append(a,i)})}),s}var rd=null;function DP(){if(rd===null)try{new FormData(document.createElement("form"),0),rd=!1}catch{rd=!0}return rd}var PP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hh(e){return e!=null&&!PP.has(e)?(nn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qd}"`),null):e}function LP(e,t){let s,n,a,i,o;if(EP(e)){let l=e.getAttribute("action");n=l?Da(l,t):null,s=e.getAttribute("method")||Vd,a=Hh(e.getAttribute("enctype"))||qd,i=new FormData(e)}else if(CP(e)||AP(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?Da(c,t):null,s=e.getAttribute("formmethod")||l.getAttribute("method")||Vd,a=Hh(e.getAttribute("formenctype"))||Hh(l.getAttribute("enctype"))||qd,i=new FormData(l,e),!DP()){let{name:u,type:d,value:f}=e;if(d==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,f)}}else{if(Am(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Vd,n=null,a=qd,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:s.toLowerCase(),encType:a,formData:i,body:o}}function w0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function zP(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OP(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function BP(e,t,s){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await zP(i,s);return o.links?o.links():[]}return[]}));return HP(n.flat(1).filter(OP).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function jb(e,t,s,n,a,i){let o=(c,u)=>s[u]?c.route.id!==s[u].route.id:!0,l=(c,u)=>{var d;return s[u].pathname!==c.pathname||((d=s[u].route.path)==null?void 0:d.endsWith("*"))&&s[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=s[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function IP(e,t,{includeHydrateFallback:s}={}){return $P(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function $P(e){return[...new Set(e)]}function FP(e){let t={},s=Object.keys(e).sort();for(let n of s)t[n]=e[n];return t}function HP(e,t){let s=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(FP(a));return s.has(i)||(s.add(i),n.push({key:i,link:a})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var UP=new Set([100,101,204,205]);function GP(e,t){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname="_root.data":t&&Da(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function hk(){let e=h.useContext(Tl);return w0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function VP(){let e=h.useContext(Em);return w0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var N0=h.createContext(void 0);N0.displayName="FrameworkContext";function gk(){let e=h.useContext(N0);return w0(e,"You must render this element inside a <HydratedRouter> element"),e}function qP(e,t){let s=h.useContext(N0),[n,a]=h.useState(!1),[i,o]=h.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,m=h.useRef(null);h.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let y=p=>{p.forEach(x=>{o(x.isIntersecting)})},v=new IntersectionObserver(y,{threshold:.5});return m.current&&v.observe(m.current),()=>{v.disconnect()}}},[e]),h.useEffect(()=>{if(n){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[n]);let g=()=>{a(!0)},b=()=>{a(!1),o(!1)};return s?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Zl(l,g),onBlur:Zl(c,b),onMouseEnter:Zl(u,g),onMouseLeave:Zl(d,b),onTouchStart:Zl(f,g)}]:[!1,m,{}]}function Zl(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function QP({page:e,...t}){let{router:s}=hk(),n=h.useMemo(()=>nk(s.routes,e,s.basename),[s.routes,e,s.basename]);return n?h.createElement(WP,{page:e,matches:n,...t}):null}function ZP(e){let{manifest:t,routeModules:s}=gk(),[n,a]=h.useState([]);return h.useEffect(()=>{let i=!1;return BP(e,t,s).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,s]),n}function WP({page:e,matches:t,...s}){let n=Ga(),{manifest:a,routeModules:i}=gk(),{basename:o}=hk(),{loaderData:l,matches:c}=VP(),u=h.useMemo(()=>jb(e,t,c,a,n,"data"),[e,t,c,a,n]),d=h.useMemo(()=>jb(e,t,c,a,n,"assets"),[e,t,c,a,n]),f=h.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let b=new Set,y=!1;if(t.forEach(p=>{var w;let x=a.routes[p.route.id];!x||!x.hasLoader||(!u.some(N=>N.route.id===p.route.id)&&p.route.id in l&&((w=i[p.route.id])!=null&&w.shouldRevalidate)||x.hasClientLoader?y=!0:b.add(p.route.id))}),b.size===0)return[];let v=GP(e,o);return y&&b.size>0&&v.searchParams.set("_routes",t.filter(p=>b.has(p.route.id)).map(p=>p.route.id).join(",")),[v.pathname+v.search]},[o,l,n,a,u,t,e,i]),m=h.useMemo(()=>IP(d,a),[d,a]),g=ZP(d);return h.createElement(h.Fragment,null,f.map(b=>h.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...s})),m.map(b=>h.createElement("link",{key:b,rel:"modulepreload",href:b,...s})),g.map(({key:b,link:y})=>h.createElement("link",{key:b,...y})))}function YP(...e){return t=>{e.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var pk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pk&&(window.__reactRouterVersion="7.6.3")}catch{}function XP({basename:e,children:t,window:s}){let n=h.useRef();n.current==null&&(n.current=P5({window:s,v5Compat:!0}));let a=n.current,[i,o]=h.useState({action:a.action,location:a.location}),l=h.useCallback(c=>{h.startTransition(()=>o(c))},[o]);return h.useLayoutEffect(()=>a.listen(l),[a,l]),h.createElement(SP,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var xk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yk=h.forwardRef(function({onClick:t,discover:s="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...m},g){let{basename:b}=h.useContext(Xn),y=typeof u=="string"&&xk.test(u),v,p=!1;if(typeof u=="string"&&y&&(v=u,pk))try{let S=new URL(window.location.href),C=u.startsWith("//")?new URL(S.protocol+u):new URL(u),M=Da(C.pathname,b);C.origin===S.origin&&M!=null?u=M+C.search+C.hash:p=!0}catch{nn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=oP(u,{relative:a}),[w,N,j]=qP(n,m),_=tL(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function k(S){t&&t(S),S.defaultPrevented||_(S)}let A=h.createElement("a",{...m,...j,href:v||x,onClick:p||i?t:k,ref:YP(g,N),target:c,"data-discover":!y&&s==="render"?"true":void 0});return w&&!y?h.createElement(h.Fragment,null,A,h.createElement(QP,{page:x})):A});yk.displayName="Link";var KP=h.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let f=bu(o,{relative:u.relative}),m=Ga(),g=h.useContext(Em),{navigator:b,basename:y}=h.useContext(Xn),v=g!=null&&iL(f)&&l===!0,p=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,x=m.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(x=x.toLowerCase(),w=w?w.toLowerCase():null,p=p.toLowerCase()),w&&y&&(w=Da(w,y)||w);const N=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let j=x===p||!a&&x.startsWith(p)&&x.charAt(N)==="/",_=w!=null&&(w===p||!a&&w.startsWith(p)&&w.charAt(p.length)==="/"),k={isActive:j,isPending:_,isTransitioning:v},A=j?t:void 0,S;typeof n=="function"?S=n(k):S=[n,j?"active":null,_?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let C=typeof i=="function"?i(k):i;return h.createElement(yk,{...u,"aria-current":A,className:S,ref:d,style:C,to:o,viewTransition:l},typeof c=="function"?c(k):c)});KP.displayName="NavLink";var JP=h.forwardRef(({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:n,replace:a,state:i,method:o=Vd,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...m},g)=>{let b=aL(),y=rL(l,{relative:u}),v=o.toLowerCase()==="get"?"get":"post",p=typeof l=="string"&&xk.test(l),x=w=>{if(c&&c(w),w.defaultPrevented)return;w.preventDefault();let N=w.nativeEvent.submitter,j=(N==null?void 0:N.getAttribute("formmethod"))||o;b(N||w.currentTarget,{fetcherKey:t,method:j,navigate:s,replace:a,state:i,relative:u,preventScrollReset:d,viewTransition:f})};return h.createElement("form",{ref:g,method:v,action:y,onSubmit:n?c:x,...m,"data-discover":!p&&e==="render"?"true":void 0})});JP.displayName="Form";function eL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vk(e){let t=h.useContext(Tl);return ft(t,eL(e)),t}function tL(e,{target:t,replace:s,state:n,preventScrollReset:a,relative:i,viewTransition:o}={}){let l=lt(),c=Ga(),u=bu(e,{relative:i});return h.useCallback(d=>{if(TP(d,t)){d.preventDefault();let f=s!==void 0?s:Hc(c)===Hc(u);l(e,{replace:f,state:n,preventScrollReset:a,relative:i,viewTransition:o})}},[c,l,u,s,n,t,e,a,i,o])}function bk(e){nn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=h.useRef(hp(e)),s=h.useRef(!1),n=Ga(),a=h.useMemo(()=>MP(n.search,s.current?null:t.current),[n.search]),i=lt(),o=h.useCallback((l,c)=>{const u=hp(typeof l=="function"?l(a):l);s.current=!0,i("?"+u,c)},[i,a]);return[a,o]}var sL=0,nL=()=>`__${String(++sL)}__`;function aL(){let{router:e}=vk("useSubmit"),{basename:t}=h.useContext(Xn),s=bP();return h.useCallback(async(n,a={})=>{let{action:i,method:o,encType:l,formData:c,body:u}=LP(n,t);if(a.navigate===!1){let d=a.fetcherKey||nL();await e.fetch(d,s,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,s])}function rL(e,{relative:t}={}){let{basename:s}=h.useContext(Xn),n=h.useContext(Kn);ft(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...bu(e||".",{relative:t})},o=Ga();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:Ca([s,i.pathname])),Hc(i)}function iL(e,t={}){let s=h.useContext(ck);ft(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=vk("useViewTransitionState"),a=bu(e,{relative:t.relative});if(!s.isTransitioning)return!1;let i=Da(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=Da(s.nextLocation.pathname,n)||s.nextLocation.pathname;return vf(a.pathname,o)!=null||vf(a.pathname,i)!=null}[...UP];var wk={exports:{}},ds={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oL=h;function Nk(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ka(){}var is={d:{f:Ka,r:function(){throw Error(Nk(522))},D:Ka,C:Ka,L:Ka,m:Ka,X:Ka,S:Ka,M:Ka},p:0,findDOMNode:null},lL=Symbol.for("react.portal");function cL(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lL,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}var Nc=oL.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Rm(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ds.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=is;ds.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Nk(299));return cL(e,t,null,s)};ds.flushSync=function(e){var t=Nc.T,s=is.p;try{if(Nc.T=null,is.p=2,e)return e()}finally{Nc.T=t,is.p=s,is.d.f()}};ds.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,is.d.C(e,t))};ds.prefetchDNS=function(e){typeof e=="string"&&is.d.D(e)};ds.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var s=t.as,n=Rm(s,t.crossOrigin),a=typeof t.integrity=="string"?t.integrity:void 0,i=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;s==="style"?is.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:i}):s==="script"&&is.d.X(e,{crossOrigin:n,integrity:a,fetchPriority:i,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ds.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var s=Rm(t.as,t.crossOrigin);is.d.M(e,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&is.d.M(e)};ds.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var s=t.as,n=Rm(s,t.crossOrigin);is.d.L(e,s,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ds.preloadModule=function(e,t){if(typeof e=="string")if(t){var s=Rm(t.as,t.crossOrigin);is.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else is.d.m(e)};ds.requestFormReset=function(e){is.d.r(e)};ds.unstable_batchedUpdates=function(e,t){return e(t)};ds.useFormState=function(e,t,s){return Nc.H.useFormState(e,t,s)};ds.useFormStatus=function(){return Nc.H.useHostTransitionStatus()};ds.version="19.1.0";function jk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jk)}catch(e){console.error(e)}}jk(),wk.exports=ds;var Tm=wk.exports;const uL=o0(Tm);function dL(){return"/lorerim-arcaneum/"}function Vt(e){return`${dL()}${e}`}const kb=e=>{let t;const s=new Set,n=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const m=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),s.forEach(g=>g(t,m))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>c,subscribe:u=>(s.add(u),()=>s.delete(u))},c=t=e(n,a,l);return l},fL=e=>e?kb(e):kb,mL=e=>e;function hL(e,t=mL){const s=z.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return z.useDebugValue(s),s}const Sb=e=>{const t=fL(e),s=n=>hL(t,n);return Object.assign(s,t),s},fs=e=>e?Sb(e):Sb,Hi=fs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const n=await fetch(Vt("data/perk-trees.json"));if(!n.ok)throw new Error(`Failed to fetch perk trees data: ${n.status}`);const i=await n.json();e({data:i,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load perk trees",loading:!1})}}},getById:s=>t().data.find(a=>a.id===s),search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(a)||((o=i.description)==null?void 0:o.toLowerCase().includes(a))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(a)))})}})),gL=Object.freeze(Object.defineProperty({__proto__:null,usePerkTreesStore:Hi},Symbol.toStringTag,{value:"Module"})),wn=fs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const n=await fetch(Vt("data/playable-races.json"));if(!n.ok)throw new Error(`Failed to fetch races data: ${n.status}`);const i=(await n.json()).races.map(o=>({...o,id:o.id||o.edid||o.name.toLowerCase().replace(/\s+/g,"-"),tags:[o.category,...o.keywords||[]].filter(l=>!!l),name:o.name,edid:o.edid,description:o.description,category:o.category,source:o.source,startingStats:o.startingStats,physicalAttributes:o.physicalAttributes,skillBonuses:o.skillBonuses,racialSpells:o.racialSpells,keywords:o.keywords,flags:o.flags,regeneration:o.regeneration,combat:o.combat}));e({data:i,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load races",loading:!1})}}},getById:s=>t().data.find(a=>a.id===s),search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(a)||((o=i.description)==null?void 0:o.toLowerCase().includes(a))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(a)))})}})),pL=Object.freeze(Object.defineProperty({__proto__:null,useRacesStore:wn},Symbol.toStringTag,{value:"Module"})),Hr=fs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const n=await fetch(Vt("data/skills.json"));if(!n.ok)throw new Error(`Failed to fetch skills data: ${n.status}`);const i=(await n.json()).skills.map(o=>({...o,id:o.id||o.edid||o.name.toLowerCase().replace(/\s+/g,"-"),tags:[...o.metaTags||[],o.category].filter(l=>!!l)}));e({data:i,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load skills",loading:!1})}}},getById:s=>t().data.find(a=>a.id===s),search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(a)||((o=i.description)==null?void 0:o.toLowerCase().includes(a))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(a)))})}})),xL=Object.freeze(Object.defineProperty({__proto__:null,useSkillsStore:Hr},Symbol.toStringTag,{value:"Module"}));function yL(){return Hi.getState().data}function vL(){return wn.getState().data}function bL(e){const s=Hr.getState().data.find(n=>n.edid===e);return(s==null?void 0:s.name)||e}function Mm(e,t){let s=0;if(t.race){const a=vL().find(i=>i.edid===t.race);if(a!=null&&a.skillBonuses){const i=bL(e),o=a.skillBonuses.find(l=>l.skill===i);o&&(s+=o.bonus)}}return t.skills.major.includes(e)?s+=10:t.skills.minor.includes(e)&&(s+=5),s}function wL(e,t){var o,l,c;const s=Mm(e,t),n=((l=(o=t.perks)==null?void 0:o.selected)==null?void 0:l[e])||[],a=((c=t.perks)==null?void 0:c.ranks)||{},i=Dm(e,n,a);return s+i}function Dm(e,t,s){var o;if(t.length===0)return 0;const a=yL().find(l=>l.treeId===e);if(!a)return 0;let i=0;for(const l of t){const c=a.perks.find(f=>f.edid===l);if(!c)continue;const u=s[l]||1,d=c.ranks.find(f=>f.rank===u);if(d&&(o=d.prerequisites)!=null&&o.skillLevel){const f=d.prerequisites.skillLevel.level;i=Math.max(i,f)}}return i}function fc(e){const t={};for(const[s,n]of Object.entries(e.selected))if(n.length>0){const a=Dm(s,n,e.ranks);a>0&&(t[s]=a)}return t}const _b={v:2,name:"",notes:"",race:null,stone:null,religion:null,favoriteBlessing:null,traits:{regular:[],bonus:[]},traitLimits:{regular:2,bonus:1},skills:{major:[],minor:[]},perks:{selected:{},ranks:{}},skillLevels:{},equipment:[],userProgress:{unlocks:[]},destinyPath:[],attributeAssignments:{health:0,stamina:0,magicka:0,level:1}};function NL(e){return"perks"in e&&!("p"in e)}function jL(e){return"p"in e&&!("n"in e)&&!("k"in e)}function j0(e){return"n"in e&&"k"in e&&"a"in e}const kL=[{name:"Warrior",group:"Warrior",description:"Those under the sign of the Warrior have increased strength and endurance. Health increases by <50>, all weapons deal <10>% more damage, armor penetration with all weapons is increased by <5> (doubling when the corresponding weapon skill is mastered), unarmed strikes do <10> additional damage.",powers:[],edid:"REQ_Ability_Birthsign_Warrior",formid:"0x000E5F4C",stat_modifications:[{stat:"health",type:"bonus",value:50,value_type:"flat"},{stat:"weapon_damage",type:"bonus",value:10,value_type:"percentage"},{stat:"armor_penetration",type:"bonus",value:5,value_type:"flat"},{stat:"unarmed_damage",type:"bonus",value:10,value_type:"flat"}],skill_bonuses:[],conditional_effects:[{stat:"weapon_damage",type:"conditional",value:2,value_type:"multiplier",condition:"when weapon skill is mastered",description:"Effect doubles when weapon skill is mastered"}],mastery_effects:[]},{name:"Lady",group:"Warrior",description:"Those under the sign of the Lady have increased vitality. Health and stamina increase by <25>, health and stamina regenerate <40>% faster (doubling when a warrior skill is mastered), you can run or swim without exertion.",powers:[],edid:"REQ_Ability_Birthsign_Lady",formid:"0x000E5F54",stat_modifications:[{stat:"health",type:"bonus",value:25,value_type:"flat"},{stat:"stamina",type:"bonus",value:25,value_type:"flat"},{stat:"stamina_regeneration",type:"bonus",value:40,value_type:"percentage"},{stat:"health_regeneration",type:"bonus",value:25,value_type:"percentage"}],skill_bonuses:[],conditional_effects:[{stat:"health_regeneration",type:"conditional",value:2,value_type:"multiplier",condition:"when warrior skill is mastered",description:"Effect doubles when warrior skill is mastered"}],mastery_effects:[]},{name:"Lord",group:"Warrior",description:"The Stone of the Lord grants natural regeneration and weakened hostile spells, but also afflicts them with the Trollkin curse. <10>% Magic Resist, <150> Armor Rating, <25>% Weakness to Fire if you have not mastered a warrior skill.",powers:[],edid:"REQ_Ability_Birthsign_Lord",formid:"0x000E5F58",stat_modifications:[{stat:"fire_resistance",type:"penalty",value:-25,value_type:"percentage"}],skill_bonuses:[],conditional_effects:[],mastery_effects:[]},{name:"Steed",group:"Warrior",description:"Those under the sign of the Steed have increased speed. Movement is <10>% faster, sprinting is <10>% faster, carry weight increases by <25>, stamina increased by <50>, most slow effects don't affect you. Restore <1> stamina per second if you have mastered a warrior skill.",powers:[],edid:"REQ_Ability_Birthsign_Steed",formid:"0x000E5F5E",stat_modifications:[{stat:"stamina",type:"bonus",value:50,value_type:"flat"},{stat:"movement_speed",type:"bonus",value:10,value_type:"percentage"},{stat:"sprint_speed",type:"bonus",value:10,value_type:"percentage"},{stat:"carry_weight",type:"bonus",value:25,value_type:"flat"}],skill_bonuses:[],conditional_effects:[],mastery_effects:[{stat:"mastery_bonus",type:"bonus",value:1,value_type:"flat",condition:"if you have mastered a warrior skill.",description:"restore stamina per second if you have mastered a warrior skill."}]},{name:"Mage",group:"Mage",description:"Those under the sign of the Mage have increased magicka reserves and cast more potent spells. Magicka increases by <150>. Spells are 10% stronger, doubling up to 20% when you master the relevant magic skill.",powers:[],edid:"REQ_Ability_Birthsign_Mage",formid:"0x000E5F47",stat_modifications:[{stat:"magicka",type:"bonus",value:150,value_type:"flat"},{stat:"spell_strength",type:"bonus",value:10,value_type:"percentage"}],skill_bonuses:[],conditional_effects:[{stat:"magicka",type:"conditional",value:2,value_type:"multiplier",condition:"when the relevant magic skill is mastered",description:"Effect doubles when the relevant magic skill is mastered"}],mastery_effects:[]},{name:"Apprentice",group:"Mage",description:"Those under the sign of the Apprentice have increased magicka and faster regeneration, but also have a weakness to magic. Magicka increases by <100>, magicka regenerates an extra 5 per second, magic deals <25>% more damage to you if you have not mastered any magical skills.",powers:[],edid:"REQ_Ability_Birthsign_Apprentice",formid:"0x000E5F4E",stat_modifications:[{stat:"magicka",type:"bonus",value:100,value_type:"flat"},{stat:"magicka_regeneration",type:"bonus",value:5,value_type:"flat"}],skill_bonuses:[],conditional_effects:[],mastery_effects:[]},{name:"Atronach",group:"Mage",description:"Those under the sign of the Atronach have deep reserves of magicka and can absorb harmful magic, but cannot generate magicka on their own. Magicka increases by <200> increasing up to <300> when you master a magic skill, you do not lose magicka when hit, increases chance to absorb the magicka from hostile spells by <30>%, you cannot regenerate magicka by yourself or non-magical sources.",powers:[],edid:"REQ_Ability_Birthsign_Atronach",formid:"0x000E5F51",stat_modifications:[{stat:"magicka",type:"bonus",value:200,value_type:"flat"}],skill_bonuses:[],conditional_effects:[],mastery_effects:[]},{name:"Ritual",group:"Mage",description:"Those under the sign of the Ritual have various abilities depending on the aspects of the moons and the Divines. You receive <Blessed Fire>, <Dead Horde>, and <Salvation> powers. Enchanting is <10>% stronger when you master enchanting.",powers:[{name:"Blessed Fire",description:"Causes all nearby undead up to level <50> to flee for <60> seconds.",magnitude:50,duration:60},{name:"Dead Horde",description:"Reanimate all nearby dead bodies up to level <50> for <600> seconds.",magnitude:50,duration:600}],edid:"REQ_Ability_Birthsign_Ritual",formid:"0x000E7329",stat_modifications:[],skill_bonuses:[{stat:"enchanting_strength",type:"bonus",value:10,value_type:"percentage"}],conditional_effects:[],mastery_effects:[]},{name:"Thief",group:"Thief",description:"Those under the sign of the Thief have increased dexterity. Lockpicks are <30>% more durable, lockpicking expertise is increased by <2>, pickpocketing is <30>% more likely to succeed, you are <30>% harder to detect, you can sneak without proficiency, gain <10>% chance to avoid physical damage. After mastering alchemy, able to apply <1> extra poison dose.",powers:[],edid:"REQ_Ability_Birthsign_Thief",formid:"0x000E5F45",stat_modifications:[],skill_bonuses:[{stat:"lockpicking_durability",type:"bonus",value:30,value_type:"percentage"},{stat:"lockpicking_expertise",type:"bonus",value:2,value_type:"flat"},{stat:"pickpocketing_success",type:"bonus",value:30,value_type:"percentage"},{stat:"stealth_detection",type:"bonus",value:30,value_type:"percentage"}],conditional_effects:[],mastery_effects:[{stat:"special_ability",type:"bonus",value:1,value_type:"flat",condition:"after mastering alchemy",description:"Able to apply <1> extra poison dose. after mastering alchemy"}]},{name:"Lover",group:"Thief",description:"Those under the sign of the Lover have increased agility and natural charm. Stamina regeneration increases by <40>%, increases chance to avoid physical damage by <25>%, speech skill is <25> higher, shout cooldown reduced by <5>% and an additional <5>% after mastering speechcraft.",powers:[],edid:"REQ_Ability_Birthsign_Lover",formid:"0x000E5F5A",stat_modifications:[{stat:"shout_cooldown",type:"bonus",value:-5,value_type:"percentage"}],skill_bonuses:[{stat:"speech",type:"bonus",value:25,value_type:"flat"}],conditional_effects:[],mastery_effects:[]},{name:"Shadow",group:"Thief",description:"Those under the sign of the Shadow are natually skilled at stealth, and can hide in the shadows once a day. You are <50>% harder to detect, you can sneak without proficiency, movement noise is <30>% quieter, you receive <Moonshadow> power. Gain <5>% armor penetration upon mastering sneak, wayfarer or finesse.",powers:[{name:"Moonshadow",description:"You are invisible. Activating an object or attacking will break the spell."}],edid:"REQ_Ability_Birthsign_Shadow",formid:"0x000E732A",stat_modifications:[],skill_bonuses:[{stat:"stealth_detection",type:"bonus",value:50,value_type:"percentage"}],conditional_effects:[],mastery_effects:[{stat:"armor_penetration",type:"bonus",value:5,value_type:"percentage",condition:"upon mastering sneak, wayfarer, finesse",description:"Gain 5% armor penetration upon mastering sneak, wayfarer, finesse"}]},{name:"Tower",group:"Thief",description:"Those under the sign of the Tower have nimble hands and a knack for finding fortune. Prices are <20>% more favorable, <50> more carryweight, lockpicks are <40>% more durable, lockpicking expertise is increased by <4>, you can pick effortless locks in plain sight without being noticed. Reflect <10>% damage when you've mastered a defensive skill.",powers:[],edid:"REQ_Ability_Birthsign_Tower",formid:"0x000E7328",stat_modifications:[{stat:"price_modification",type:"bonus",value:20,value_type:"percentage"},{stat:"damage_reflection",type:"bonus",value:10,value_type:"percentage"}],skill_bonuses:[{stat:"lockpicking_durability",type:"bonus",value:40,value_type:"percentage"},{stat:"lockpicking_expertise",type:"bonus",value:4,value_type:"flat"}],conditional_effects:[],mastery_effects:[]},{name:"Serpent",group:"Serpent",description:"Those under the sign of the serpent have improved precision, resistance to poison and paralysis, and can cast Serpent's Curse once a day. Armor penetration with all weapons is increased by <15>, poison deals <50>% less damage to you, doubling at level <40>, most paralysis effects don't adversely affect you, you receive <Serpent's Curse> power.",powers:[{name:"Serpent's Curse",description:"Dispels all magical effects and paralyzes the target for <5> seconds. Deals <5> poison damage and <5> magical damage per second for <30> seconds. Damage is doubled when you reach level 40."}],edid:"REQ_Ability_Birthsign_Serpent",formid:"0x000E5F61",stat_modifications:[{stat:"armor_penetration",type:"bonus",value:15,value_type:"flat"},{stat:"poison_resistance",type:"bonus",value:50,value_type:"percentage"}],skill_bonuses:[],conditional_effects:[],mastery_effects:[]}],gp=kL.map(e=>e.edid),kk=e=>{const t=gp.indexOf(e);return t===-1?(console.warn(`Birthsign EDID not found in catalog: ${e}`),-1):t},SL=e=>e<0||e>=gp.length?(console.warn(`Birthsign index out of bounds: ${e}`),""):gp[e],Sk={DAR_Perk01Destiny:0,DAR_Perk02Focus:1,DAR_Perk03Constitution:2,DAR_Perk04Endurance:3,DAR_Perk05Mage:4,DAR_Perk06Warrior:5,DAR_Perk07Thief:6,DAR_Perk08Fortification:7,DAR_Perk09MagickaSurge:8,DAR_Perk10MagicShell:9,DAR_Perk11IronSkin:10,DAR_Perk12BattleSpirit:11,DAR_Perk13Adrenaline:12,DAR_Perk14Swiftness:13,DAR_Perk15Agent:14,DAR_Perk16Sorcerer:15,DAR_Perk17Spellsword:16,DAR_Perk18Knight:17,DAR_Perk19Acrobat:18,DAR_Perk20Scout:19,DAR_Perk21Spellblade:20,DAR_Perk22Leadership:21,DAR_Perk23HardSkin:22,DAR_Perk24HealingPresence:23,DAR_Perk25Absorbtion:24,DAR_Perk26ConjuringPresence:25,DAR_Perk27CorrosiveWeapon:26,DAR_Perk28LeechingSpikes:27,DAR_Perk29Deflection:28,DAR_Perk30OverwhelmingPresence:29,DAR_Perk31Smash:30,DAR_Perk32Trickster:31,DAR_Perk33SwiftShadow:32,DAR_Perk34VipersBlade:33,DAR_Perk35Evasion:34,DAR_Perk36SilentBlade:35,DAR_Perk37Bard:36,DAR_Perk38Shaman:37,DAR_Perk39Templar:38,DAR_Perk40Archmage:39,DAR_Perk41Summoner:40,DAR_Perk42Battlemage:41,DAR_Perk43BloodKnight:42,DAR_Perk44General:43,DAR_Perk45Monk:44,DAR_Perk46Berserker:45,DAR_Perk47Saboteur:46,DAR_Perk48Assassin:47,DAR_Perk49Rogue:48,DAR_Perk50Stalker:49,DAR_Perk51Nightblade:50},_L=Object.fromEntries(Object.entries(Sk).map(([e,t])=>[t,e]));function CL(e){return Sk[e]}function EL(e){return _L[e]}function _k(e){return e.map(t=>CL(t)).filter(t=>t!==void 0)}function AL(e){return e.map(t=>EL(t)).filter(t=>t!==void 0)}const RL=[{name:"Altmer",edid:"HighElfRace",category:"Elven",source:"Synthesis - NPC.esp",description:'The Altmer of Summerset Isle are called "High" Elves in the Empire, describing both their physical appearance and their snobbish personality. The arcane ability of High Elves surpasses all other races in Tamriel. Their Highborn ability grants them increased magicka and spell power. They are weak in physical combat, however, and their magic affinity makes them more susceptible to elemental damage.',startingStats:{health:100,magicka:160,stamina:100,carryWeight:200},physicalAttributes:{heightMale:1.159999966621399,heightFemale:1.1200000047683716,weightMale:.5,weightFemale:.5,size:"Medium"},skillBonuses:[{skill:"Alteration",bonus:15},{skill:"Conjuration",bonus:10},{skill:"Destruction",bonus:10},{skill:"Illusion",bonus:10},{skill:"Restoration",bonus:10},{skill:"Enchanting",bonus:10}],racialSpells:[{edid:"REQ_Ability_Race_Altmer_WeaknessElements",name:"Weakness to Elements",description:"High elves are more vulnerable to elements compared to other races. Fire, frost, and shock deal <10>% more damage to you.",globalFormId:"0x000E40C8"},{edid:"REQ_Ability_Race_Altmer_Highborn",name:"Highborn",description:"High elf blood grants great affinity to magicka as well as resistance to diseases. Magicka regenerates <50>% faster, spells are <5>% more powerful and last longer, you are <50>% less likely to contract diseases.",globalFormId:"0x00105F16"}],keywords:[{edid:"REQ_RacialSkills_RechargeWeaponsUnperked",globalFormId:"0x8FAD3A3C"}],regeneration:{health:{base:0},magicka:{base:1.2000000476837158},stamina:{base:1.5499999523162842}},combat:{unarmedDamage:7,unarmedReach:73}},{name:"Argonian",edid:"ArgonianRace",category:"Beast",source:"Synthesis - NPC.esp",description:"Argonians are the reptilian denizens of Black Marsh. Years of defending their borders have made them experts in stealth and evasion, and their natural abilities make them equally at home in water and on land. They are resistant to diseases and poisons and enjoy raw meat. Their Histskin allows them to quickly heal their wounds.",startingStats:{health:140,magicka:120,stamina:100,carryWeight:200},physicalAttributes:{heightMale:1.059999942779541,heightFemale:1.0449999570846558,weightMale:.5,weightFemale:1,size:"Medium"},skillBonuses:[{skill:"OneHanded",bonus:10},{skill:"LightArmor",bonus:10},{skill:"Lockpicking",bonus:10},{skill:"Sneak",bonus:10},{skill:"Alchemy",bonus:15},{skill:"Restoration",bonus:10}],racialSpells:[{edid:"REQ_Ability_Race_Argonian_Waterbreathing",name:"Waterbreathing",description:"Your Argonian lungs can breathe underwater, while you also find it much easier to swim than members of other races. You can breathe underwater, swimming is <20>% faster, swimming is <75>% less exhausting.",globalFormId:"0x000AA01B"},{edid:"REQ_Ability_Race_Argonian_Histskin",name:"Histskin",description:"Argonians can nautrally regenerate health faster than others, and their metabolism increases the effect of alchemical substances. Regenerate <1.5> health per second, potions are <10>% more effective and last longer.",globalFormId:"0x000E40D5"},{edid:"REQ_Ability_Race_Argonian_ResistPoisonDisease",name:"Resist Poison and Disease",description:"Your Argonian blood greatly reduces the effect of poison and disease. Poison deals <75>% less damage to you, you are <75>% less likely to contract diseases.",globalFormId:"0x00104ACF"},{edid:"REQ_Ability_Race_All_StrongStomach",name:"Strong Stomach",description:"Your metabolism can digest raw food without food poisoning.",globalFormId:"0xFE67B808"}],keywords:[{edid:"IsBeastRace",globalFormId:"0x000D61D1"},{edid:"REQ_StrongStomach",globalFormId:"0x8F4CF31E"},{edid:"REQ_RacialSkills_SneakUnperked",globalFormId:"0x8FAD3A3A"},{edid:"REQ_RacialSkills_CreatePotionsUnperked",globalFormId:"0x8FAD3A3B"},{edid:"REQ_RacialSkills_LockpickUnperked",globalFormId:"0x8FAD3A3E"}],regeneration:{health:{base:0},magicka:{base:1.100000023841858},stamina:{base:1.600000023841858}},combat:{unarmedDamage:9,unarmedReach:73}},{name:"Bosmer",edid:"WoodElfRace",category:"Elven",source:"Synthesis - NPC.esp",description:"The Bosmer, or Wood Elves, originate from the sacred forest of Valenwood. Their culture is highly carnivorous and even cannibalistic, derived from the Green Pact with the forest, in which they harm no plant. Their dexterity makes them excellent scouts and thieves, and there are no finer archers in all of Tamriel. They have a natural resistance to poison, disease and shock.",startingStats:{health:100,magicka:120,stamina:140,carryWeight:200},physicalAttributes:{heightMale:.9200000166893005,heightFemale:.9399999976158142,weightMale:1,weightFemale:1,size:"Medium"},skillBonuses:[{skill:"Marksman",bonus:15},{skill:"LightArmor",bonus:10},{skill:"Pickpocket",bonus:10},{skill:"Sneak",bonus:10},{skill:"Alchemy",bonus:10},{skill:"Alteration",bonus:10}],racialSpells:[{edid:"REQ_Ability_Race_Bosmer_ResistPoisonDisease",name:"Resist Poison and Disease",description:"Your Bosmer blood grants you resistance to poison and diseases. Poison deals <25>% less damage to you, you are <50>% less likely to contract diseases.",globalFormId:"0x000AA025"},{edid:"REQ_Power_Race_Bosmer_ShockResist",name:"Grounded",description:"In harmony with nature and the earth, the Bosmer have honed their bodies to be conduits of elemental potential. +25% shock resist",globalFormId:"0x000E40CF"},{edid:"REQ_Ability_Race_Bosmer_EyeOfTheHunt",name:"Eye of the Hunt",description:"The Bosmer are naturally skilled in marksmanship, and can aim their bows more precisely. Armor penetration with ranged weapons is increased by <5>.",globalFormId:"0xFE67B801"},{edid:"REQ_Ability_Race_All_StrongStomach",name:"Strong Stomach",description:"Your metabolism can digest raw food without food poisoning.",globalFormId:"0xFE67B808"}],keywords:[{edid:"REQ_StrongStomach",globalFormId:"0x8F4CF31E"},{edid:"REQ_RacialSkills_SneakUnperked",globalFormId:"0x8FAD3A3A"},{edid:"REQ_RacialSkills_CreatePotionsUnperked",globalFormId:"0x8FAD3A3B"},{edid:"REQ_RacialSkills_PickpocketUnperked",globalFormId:"0x8FAD3A3D"}],regeneration:{health:{base:0},magicka:{base:1.100000023841858},stamina:{base:1.649999976158142}},combat:{unarmedDamage:9,unarmedReach:73}},{name:"Breton",edid:"BretonRace",category:"Human",source:"Synthesis - NPC.esp",description:"Bretons, the inhabitants of the province of High Rock, are the human descendants of the Elves and the ancient race of the Nedes. While Bretons are physically weak, they can tap on magicka more than any other human race and they are particularly capable in the school of Conjuration. Their magic resistance blocks one fifth of incoming spell damage and their Dragonskin ability can fully absorb harmful magic by chance.",startingStats:{health:120,magicka:140,stamina:100,carryWeight:200},physicalAttributes:{heightMale:.9850000143051147,heightFemale:.949999988079071,weightMale:1,weightFemale:1,size:"Medium"},skillBonuses:[{skill:"Alchemy",bonus:10},{skill:"Speechcraft",bonus:10},{skill:"Conjuration",bonus:15},{skill:"Illusion",bonus:10},{skill:"Restoration",bonus:10},{skill:"Enchanting",bonus:10}],racialSpells:[{edid:"REQ_Ability_Race_Breton_MagicResistance",name:"Magic Resistance",description:"Your Breton blood reduces damage taken from all magical sources. Magic deals <15>% less damage to you.",globalFormId:"0x000AA01F"},{edid:"REQ_Ability_Race_Breton_Dragonskin",name:"Dragonskin",description:"Bretons can naturally absorb harmful magic by chance. Increases chance to absorb the magicka from hostile spells by <10>%.",globalFormId:"0x000AA022"}],keywords:[{edid:"REQ_RaceHuman",globalFormId:"0x8F316340"},{edid:"REQ_RacialSkills_CreatePotionsUnperked",globalFormId:"0x8FAD3A3B"},{edid:"REQ_RacialSkills_RechargeWeaponsUnperked",globalFormId:"0x8FAD3A3C"}],regeneration:{health:{base:0},magicka:{base:1.149999976158142},stamina:{base:1.600000023841858}},combat:{unarmedDamage:8,unarmedReach:73}},{name:"Dunmer",edid:"DarkElfRace",category:"Elven",source:"Synthesis - NPC.esp",description:"The Dunmer, or Dark Elves, are the ash-skinned, red-eyed, Elven people of Vvardenfell. They combine powerful intellects with strong and agile physiques, producing excellent warriors and evokers. They are extremely resistant to fire, blocking half of incoming fire damage. They're particularly skilled in Destruction and Conjuration magic, and can imbue more power into associated spells.",startingStats:{health:100,magicka:140,stamina:120,carryWeight:200},physicalAttributes:{heightMale:1.0299999713897705,heightFemale:1.0149999856948853,weightMale:1,weightFemale:1,size:"Medium"},skillBonuses:[{skill:"OneHanded",bonus:10},{skill:"LightArmor",bonus:10},{skill:"Sneak",bonus:10},{skill:"Conjuration",bonus:10},{skill:"Destruction",bonus:15},{skill:"Illusion",bonus:10}],racialSpells:[{edid:"REQ_Ability_Race_Dunmer_ResistFire",name:"Resist Fire",description:"Tempered in the flames of the Red Mountain and the heat of the Ashlands, your Dunmer blood greatly reduces all fire damage dealt to you. Fire deals <50>% less damage to you.",globalFormId:"0x000AA021"},{edid:"REQ_Ability_Race_Dunmer_Ashlander",name:"Ashlander",description:"Dunmer are naturally talented evokers and conjurers. Destruction and Conjuration spells are <10>% more powerful and last longer.",globalFormId:"0x000E40D4"}],keywords:[{edid:"REQ_RacialSkills_SneakUnperked",globalFormId:"0x8FAD3A3A"}],regeneration:{health:{base:0},magicka:{base:1.100000023841858},stamina:{base:1.600000023841858}},combat:{unarmedDamage:8,unarmedReach:73}},{name:"Imperial",edid:"ImperialRace",category:"Human",source:"Synthesis - NPC.esp",description:"The cosmopolitan citizens of Cyrodiil are descended from the founders of the glorious Empire that has influenced Tamriel's history throughout the eras. Imperials are talented leaders and traders among society, skilled in both magic and combat thanks to martial and academic education of the schools of Cyrodiil. Their leadership can encourage their followers to fight well in combat.",startingStats:{health:120,magicka:120,stamina:120,carryWeight:200},physicalAttributes:{heightMale:1.0149999856948853,heightFemale:.9850000143051147,weightMale:1,weightFemale:1,size:"Medium"},skillBonuses:[{skill:"OneHanded",bonus:10},{skill:"Block",bonus:10},{skill:"HeavyArmor",bonus:10},{skill:"Speechcraft",bonus:15},{skill:"Destruction",bonus:10},{skill:"Restoration",bonus:10}],racialSpells:[{edid:"REQ_Ability_Race_Imperial_VoiceOfTheEmperor",name:"Voice of the Emperor",description:"Imperials are talented leaders and traders among society. Speech skill is <15> higher, prices are <15>% more favorable, magicka and stamina of nearby allies increase by <25>.",globalFormId:"0x000E40CA"},{edid:"REQ_Ability_Race_Imperial_ImperialDiversity",name:"Imperial Diversity",description:"Imperial education involves various martial and academical trainings, producing citizens with variety of skills. Health, magicka, and stamina regenerate <25>% faster.",globalFormId:"0x000EB7EB"}],keywords:[{edid:"REQ_RaceHuman",globalFormId:"0x8F316340"}],regeneration:{health:{base:0},magicka:{base:1.100000023841858},stamina:{base:1.600000023841858}},combat:{unarmedDamage:9,unarmedReach:73}},{name:"Khajiit",edid:"KhajiitRace",category:"Beast",source:"Synthesis - NPC.esp",description:"The Khajiit are a race of feline humanoids hailing from the province of Elsweyr, well-known as great merchants but also as smugglers and thieves. They are very fast and outrun all other races which, combined with a high stamina reserve, makes them fearsome skirmishers. However, they are seldom gifted with the skill to harness magical forces. All Khajiit can see in the dark at will, eat raw meat, resist the harmful effects of Skooma and their sharp claws are as lethal as knives.",startingStats:{health:100,magicka:100,stamina:160,carryWeight:200},physicalAttributes:{heightMale:.9800000190734863,heightFemale:.9449999928474426,weightMale:.5,weightFemale:1,size:"Medium"},skillBonuses:[{skill:"OneHanded",bonus:10},{skill:"LightArmor",bonus:10},{skill:"Pickpocket",bonus:10},{skill:"Lockpicking",bonus:10},{skill:"Sneak",bonus:15},{skill:"Alchemy",bonus:10}],racialSpells:[{edid:"REQ_Power_Race_Khajiit_NightEye",name:"Night Eye",description:"Your eyes are exceptionally versatile and can become extremely sensitive to light, allowing a much better sight in dark areas.",globalFormId:"0x000AA01D"},{edid:"REQ_Ability_Race_Khajiit_FelineAgility",name:"Feline Agility",description:"Khajiits are very agile and can fall long heights without taking critical damage. Movement is <10>% faster, sneaking is <20>% faster, fall damage is reduced by <75>%.",globalFormId:"0x8F1AD1B0"},{edid:"REQ_Ability_Race_All_StrongStomach",name:"Strong Stomach",description:"Your metabolism can digest raw food without food poisoning.",globalFormId:"0xFE67B808"},{edid:"REQ_Ability_Race_Khajiit_Fingersmith",name:"Fingersmith",description:"Khajiits have keen senses and dexterity, making them much more proficient in thievery. Lockpicking expertise is increased by <2>, lockpicks are <20>% more durable, pickpocketing is <20>% more likely to succeed, you are <20>% harder to detect.",globalFormId:"0xFE67B816"}],keywords:[{edid:"IsBeastRace",globalFormId:"0x000D61D1"},{edid:"REQ_StrongStomach",globalFormId:"0x8F4CF31E"},{edid:"REQ_RacialSkills_SneakUnperked",globalFormId:"0x8FAD3A3A"},{edid:"REQ_RacialSkills_CreatePotionsUnperked",globalFormId:"0x8FAD3A3B"},{edid:"REQ_RacialSkills_PickpocketUnperked",globalFormId:"0x8FAD3A3D"},{edid:"REQ_RacialSkills_LockpickUnperked",globalFormId:"0x8FAD3A3E"}],regeneration:{health:{base:0},magicka:{base:1.0499999523162842},stamina:{base:1.7000000476837158}},combat:{unarmedDamage:10,unarmedReach:73}},{name:"Nord",edid:"NordRace",category:"Human",source:"Synthesis - NPC.esp",description:"Skyrim's Nords are tall and fair, with a culture which values honor, glory, and loyalty to family and community. Nords have come to distrust magic, but excel in physical warfare. They are greatly resistant to frost. Nords also have innate ability to use Shouts, and can unleash immense power through the words of power when mastered.",startingStats:{health:140,magicka:100,stamina:120,carryWeight:200},physicalAttributes:{heightMale:1.0800000429153442,heightFemale:1.059999942779541,weightMale:1,weightFemale:1,size:"Medium"},skillBonuses:[{skill:"OneHanded",bonus:10},{skill:"TwoHanded",bonus:15},{skill:"Block",bonus:10},{skill:"Smithing",bonus:10},{skill:"HeavyArmor",bonus:10},{skill:"LightArmor",bonus:10}],racialSpells:[{edid:"REQ_Ability_Race_Nord_ResistFrostShock",name:"Resist Frost and Shock",description:"Your Nord blood halves all taken frost damage. Frost deals <50>% less damage.",globalFormId:"0x000AA020"},{edid:"REQ_Ability_Race_Nord_AncientTongues",name:"Ancient Tongues",description:"Nords have inherent ability to Shout, and can unleash immense power through the Voice. Shouts are <10>% more powerful and last longer, Shouts can be used <10>% more often.",globalFormId:"0xFE67B809"},{edid:"REQ_Ability_Race_Nord_BarbaricStrength",name:"Barbaric Strength",description:"Nords are fierce and strong, skilled with all melee weapons. Melee weapons deal <5>% more damage.",globalFormId:"0xFE67B80B"}],keywords:[{edid:"REQ_RaceHuman",globalFormId:"0x8F316340"}],regeneration:{health:{base:0},magicka:{base:1},stamina:{base:1.649999976158142}},combat:{unarmedDamage:10,unarmedReach:73}},{name:"Orsimer",edid:"OrcRace",category:"Elven",source:"Synthesis - NPC.esp",description:`The Orsimer or "Pariah Folk", commonly called Orcs, come from Orsinium in the west. Their savage appearance and customs sometimes cause fear, but they have won acceptance for their distinguished service in the Legion. Orcs' superior strength makes them formidable warriors, though use of magic requires extensive training. Their incredible endurance grants them resistance to both magical and physical harm.`,startingStats:{health:160,magicka:100,stamina:100,carryWeight:200},physicalAttributes:{heightMale:1.100000023841858,heightFemale:1.0800000429153442,weightMale:1,weightFemale:1,size:"Medium"},skillBonuses:[{skill:"OneHanded",bonus:10},{skill:"TwoHanded",bonus:10},{skill:"Block",bonus:10},{skill:"Smithing",bonus:10},{skill:"HeavyArmor",bonus:15},{skill:"Destruction",bonus:10}],racialSpells:[{edid:"REQ_Ability_Race_Orsimer_Bulwark",name:"Bulwark",description:"Orcs have incredible strength and endurance, resistant to all types of damage. Armor rating increases by <150>, magic deals <10>% less damage to you.",globalFormId:"0x000AA026"},{edid:"REQ_Ability_Race_All_StrongStomach",name:"Strong Stomach",description:"Your metabolism can digest raw food without food poisoning.",globalFormId:"0xFE67B808"}],keywords:[{edid:"REQ_StrongStomach",globalFormId:"0x8F4CF31E"}],regeneration:{health:{base:0},magicka:{base:1},stamina:{base:1.649999976158142}},combat:{unarmedDamage:10,unarmedReach:73}},{name:"Redguard",edid:"RedguardRace",category:"Human",source:"Synthesis - NPC.esp",description:"The dark-skinned, wiry-haired Redguards of Hammerfell seem born for battle, though their proud and independent spirits suit free-ranging heroism more. They have a hardy constitution and natural resistance to poison and disease, but tend to shun their magic. They are full of stamina and naturally skilled in melee combat, making them one of the strongest warriors in Tamriel.",startingStats:{health:120,magicka:100,stamina:140,carryWeight:200},physicalAttributes:{heightMale:1.0449999570846558,heightFemale:1.0299999713897705,weightMale:1,weightFemale:1,size:"Medium"},skillBonuses:[{skill:"OneHanded",bonus:15},{skill:"TwoHanded",bonus:10},{skill:"Marksman",bonus:10},{skill:"Block",bonus:10},{skill:"Smithing",bonus:10},{skill:"LightArmor",bonus:10}],racialSpells:[{edid:"REQ_Ability_Race_Redguard_ResistPoisonDisease",name:"Resist Poison and Disease",description:"Your Redguard blood, tempered in the deserts of Hammerfell, grants you a very strong resistance to poisons and diseases. Poison deals <50>% less damage to you, you are <50>% less likely to contract diseases.",globalFormId:"0x000AA023"},{edid:"REQ_Ability_Race_Redguard_AdrenalineRush",name:"Adrenaline Rush",description:"Redguards are granted increased stamina, and can sprint much longer without being exhausted. Stamina regenerations is increased, sprinting costs <1> less stamina per second.",globalFormId:"0x000E40CE"},{edid:"REQ_Ability_Race_Redguard_MartialProwess",name:"Martial Prowess",description:"Redguards are naturally skilled in martial arts, and can wield their weapons with great precision. Armor penetration with melee weapons is increased by <5>.",globalFormId:"0xFE67B80E"}],keywords:[{edid:"REQ_RaceHuman",globalFormId:"0x8F316340"}],regeneration:{health:{base:0},magicka:{base:1},stamina:{base:1.7000000476837158}},combat:{unarmedDamage:10,unarmedReach:73}}],TL={races:RL},pp=TL.races.map(e=>e.edid),Ck=e=>{const t=pp.indexOf(e);return t===-1?(console.warn(`Race EDID not found in catalog: ${e}`),-1):t},ML=e=>e<0||e>=pp.length?(console.warn(`Race index out of bounds: ${e}`),""):pp[e],DL=[{name:"Julianos",domain:"Divine",boons:{boon1:{spellName:"Follower of Julianos",spellDescription:"No description available",effects:[{effectName:"Divine Scholar",effectDescription:"Spells cost <Global=WSN_Favor_Global_Fractional>% less to cast (based on favor with Julianos).",magnitude:2,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Julianos",spellDescription:"No description available",effects:[{effectName:"Temple of Logic",effectDescription:"Spells and scrolls are <Global=WSN_Favor_Global_Fractional>% more effective (based on favor with Julianos).",magnitude:2,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Julianos",description:"Master the skills of the Mage. Strive to raise your Magicka. Never openly break the laws of Skyrim.",effects:[{effectName:"Tenets of Julianos",effectDescription:"Master the skills of the Mage. Strive to raise your Magicka. Never openly break the laws of Skyrim.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Syrabane",domain:"Ancestor",boons:{boon1:{spellName:"Follower of Syrabane",spellDescription:"No description available",effects:[{effectName:"Knowledge Seeker",effectDescription:"You are more likely to find spell tomes and scrolls on enemies you kill.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Syrabane",spellDescription:"No description available",effects:[{effectName:"Reach for the Stars",effectDescription:"Spells cost <Global=WSN_Favor_Global_Fractional>% less to cast (based on favor with Syrabane).",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Syrabane",description:"Read books that teach new skills. Study a wide variety of spells. High Elves are most deserving of my favor.",effects:[{effectName:"Tenets of Syrabane",effectDescription:"Read books that teach new skills. Study a wide variety of spells. High Elves are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Altmer"]},{name:"Magnus",domain:"Ancestor",boons:{boon1:{spellName:"Follower of Magnus",spellDescription:"No description available",effects:[{effectName:"Sight, Light and Insight",effectDescription:"Magicka does not regenerate, but praying rapidly replenishes Magicka. Spells cost <50>% less to cast.",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Damage Magicka Regen",effectDescription:"No description available",magnitude:1e3,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Magnus",spellDescription:"No description available",effects:[{effectName:"Architect's Gift",effectDescription:"Praying automatically casts the (beneficial self targeted) spells in your hands for no Magicka and they last <Global=WSN_Favor_Global>% longer (based on favor with Magnus).",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Magnus",description:"Practice magic successfully while praying. Safeguard the Eye of Magnus. Create enchanted items.",effects:[{effectName:"Tenets of Magnus",effectDescription:"Practice magic successfully while praying. Safeguard the Eye of Magnus. Create enchanted items.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Jephre",domain:"Ancestor",boons:{boon1:{spellName:"Follower of Jephre",spellDescription:"No description available",effects:[{effectName:"Forest Stride",effectDescription:"The unbounded spirit of Jephre increases movement speed by <mag>% when out of combat.",magnitude:10,duration:0,area:0,keywords:[]},{effectName:"Fortify Speed",effectDescription:"No description available",magnitude:10,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Jephre",spellDescription:"No description available",effects:[{effectName:"The Eternal Song",effectDescription:"Stamina regenerates <25>% faster in combat and <50>% faster out of combat. Praying to Jephre brings clear weather.",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Regenerate Stamina",effectDescription:"No description available",magnitude:100,duration:0,area:0,keywords:[]},{effectName:"Regenerate Stamina",effectDescription:"No description available",magnitude:100,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Jephre",description:"Explore new locations. Read the stories of others. Hunt animals. Wood Elves are most deserving of my favor.",effects:[{effectName:"Tenets of Jephre",effectDescription:"Explore new locations. Read the stories of others. Hunt animals. Wood Elves are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Bosmer"]},{name:"Mara",domain:"Divine",boons:{boon1:{spellName:"Follower of Mara",spellDescription:"No description available",effects:[{effectName:"Cleansing",effectDescription:"Increases your health regeneration by <1>. Pray to Mara to cure all diseases affecting you or allies within <40> feet.",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Restore Health",effectDescription:"No description available",magnitude:1,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Mara",spellDescription:"No description available",effects:[{effectName:"Aura of Peace",effectDescription:"Living allies within <mag> feet are healed <Global=WSN_Favor_Global_Fractional> points per second (based on favor with Mara).",magnitude:40,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Mara",description:"Be married. Own one or more houses. Be generous to beggars and children. Receive the blessing of Lover's Comfort. Never openly break the laws of Skyrim.",effects:[{effectName:"Tenets of Mara",effectDescription:"Be married. Own one or more houses. Be generous to beggars and children. Receive the blessing of Lover's Comfort. Never openly break the laws of Skyrim.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Meridia",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Meridia",spellDescription:"No description available",effects:[{effectName:"Purification",effectDescription:"Attacks, spells, scrolls, shouts and enchantments are <Global=WSN_Favor_Global_Fractional3>% better against undead (based on favor with Meridia).",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Summon Undead",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Becoming Undead",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Meridia",spellDescription:"No description available",effects:[{effectName:"Supreme Light",effectDescription:"Activate an undead opponent in combat to call down a solar strike to deal <Global=WSN_Favor_Global_Fractional2> damage (based on favor with Meridia) and half to nearby undead. Costs <10>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Meridia",description:"Slay the undead. Never summon the undead or become one of them. High Elves and those skilled in Restoration are most deserving of my favor.",effects:[{effectName:"Tenets of Meridia",effectDescription:"Slay the undead. Never summon the undead or become one of them. High Elves and those skilled in Restoration are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Altmer"]},{name:"Azura",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Azura",spellDescription:"No description available",effects:[{effectName:"Twilight Shroud",effectDescription:"Foes within <mag> feet suffer <Global=WSN_Favor_Global_Fractional>% reduced magic resistance (based on favor with Azura) and can't absorb spells.",magnitude:40,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Azura",spellDescription:"No description available",effects:[{effectName:"Perfume of Moonshadow",effectDescription:"Activate a person in combat below <Global=WSN_Favor_Global_Fractional2>% Health (based on favor with Azura) to paralyze them with <1> Health. Costs <5>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Azura",description:"Trap souls in my name. Explore new locations. Pray only at twilight, preferably outside. Dark Elves and those skilled in Illusion are most deserving of my favor.",effects:[{effectName:"Tenets of Azura",effectDescription:"Trap souls in my name. Explore new locations. Pray only at twilight, preferably outside. Dark Elves and those skilled in Illusion are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Dunmer"]},{name:"Talos",domain:"Divine",boons:{boon1:{spellName:"Follower of Talos",spellDescription:"No description available",effects:[{effectName:"Stormlord",effectDescription:"Attacks and shouts against elves are increased by <Global=WSN_Favor_Global_Fractional3>%, while attacks against all other enemies are increased by half as much (based on favor with Talos).",magnitude:150,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Talos",spellDescription:"No description available",effects:[{effectName:"Dragon of the North",effectDescription:"Your remaining shout cooldown is halved whenever an enemy dies within <mag> feet.",magnitude:50,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Talos",description:"Bring the Civil War to a conclusion. Learn the dragon tongue. Absorb dragon souls. Slay elves and the Thalmor. Never openly break the laws of Skyrim.",effects:[{effectName:"Tenets of Talos",effectDescription:"Bring the Civil War to a conclusion. Learn the dragon tongue. Absorb dragon souls. Slay elves and the Thalmor. Never openly break the laws of Skyrim.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Akatosh",domain:"Divine",boons:{boon1:{spellName:"Follower of Akatosh",spellDescription:"No description available",effects:[{effectName:"Father of Dragons",effectDescription:"Attacks, spells, scrolls, shouts and enchantments are <Global=WSN_Favor_Global_Fractional2>% better against dragons (based on favor with Akatosh).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Akatosh",spellDescription:"No description available",effects:[{effectName:"Turn the Hourglass",effectDescription:"Praying to Akatosh resets the cooldown of your most recently used shout and power.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Akatosh",description:"Fulfill your destiny by saving Tamriel. Raise your character level. Absorb dragon souls. Never openly break the laws of Skyrim.",effects:[{effectName:"Tenets of Akatosh",effectDescription:"Fulfill your destiny by saving Tamriel. Raise your character level. Absorb dragon souls. Never openly break the laws of Skyrim.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Dibella",domain:"Divine",boons:{boon1:{spellName:"Follower of Dibella",spellDescription:"No description available",effects:[{effectName:"Afterglow",effectDescription:"<Lover's> <Comfort> (gained by sleeping with one's spouse) also improves all skills by <5>%.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Dibella",spellDescription:"No description available",effects:[{effectName:"Dibellan Arts",effectDescription:"Activate a person in combat to make them unequip their items and follow you for <90> seconds. Costs <5>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Dibella",description:"Persuade others. Receive the blessing of Lover's Comfort. Find a new Sybil for my Temple. Pray only in the nude. Never openly break the laws of Skyrim.",effects:[{effectName:"Tenets of Dibella",effectDescription:"Persuade others. Receive the blessing of Lover's Comfort. Find a new Sybil for my Temple. Pray only in the nude. Never openly break the laws of Skyrim.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Phynaster",domain:"Ancestor",boons:{boon1:{spellName:"Follower of Phynaster",spellDescription:"No description available",effects:[{effectName:"Shorter Strides",effectDescription:"Health, Magicka and Stamina regenerate <200>% faster when standing still but <100>% slower when moving.",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Shorter Strides - Buff HP Regen",effectDescription:"No description available",magnitude:200,duration:0,area:0,keywords:[]},{effectName:"Shorter Strides - Buff MS Regen",effectDescription:"No description available",magnitude:200,duration:0,area:0,keywords:[]},{effectName:"Shorter Strides - Nerf HP Regen",effectDescription:"No description available",magnitude:300,duration:0,area:0,keywords:[]},{effectName:"Shorter Strides - Nerf MS Regen",effectDescription:"No description available",magnitude:300,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Phynaster",spellDescription:"No description available",effects:[{effectName:"Elvenpath",effectDescription:"During prayer, you may teleport back to the last location where you prayed. Costs <2>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Phynaster",description:"Explore new locations. Find the standing stones of Skyrim. Harvest the fruits of nature. Bretons are most deserving of my favor.",effects:[{effectName:"Tenets of Phynaster",effectDescription:"Explore new locations. Find the standing stones of Skyrim. Harvest the fruits of nature. Bretons are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Breton"]},{name:"Mehrunes Dagon",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Mehrunes Dagon",spellDescription:"No description available",effects:[{effectName:"Self-Immolation",effectDescription:"Daedric fire burns your spirit as you pray, draining Magicka. Stop praying at <20>% or less to gain more favor and <Burning Path> activations.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Mehrunes Dagon",spellDescription:"No description available",effects:[{effectName:"Burning Path",effectDescription:"Nearby foes burn for <Global=WSN_Favor_Global_Fractional3> damage and explode on death for <Global=WSN_Favor_Global> damage (based on favor with Mehrunes Dagon). Pray to recharge. (Activations: <Global=WSN_Effect_Global_MehrunesExplodes>/<Global=WSN_Effect_Global_MehrunesExplodesMax>)",magnitude:20,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Mehrunes Dagon",description:"Slay people who stand in your way. Defile the shrines of my enemies. Those skilled in Destruction are most deserving of my favor.",effects:[{effectName:"Tenets of Mehrunes Dagon",effectDescription:"Slay people who stand in your way. Defile the shrines of my enemies. Those skilled in Destruction are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Vaermina",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Vaermina",spellDescription:"No description available",effects:[{effectName:"Night Terrors",effectDescription:"Mind affecting illusion spells work on targets <Global=WSN_Favor_Global_Fractional> levels higher and cost <50>% less magicka while out of combat (based on favor with Vaermina).",magnitude:40,duration:0,area:0,keywords:[]},{effectName:"Vaermina Sleep Detector",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Vaermina",spellDescription:"No description available",effects:[{effectName:"Phantasmagoria",effectDescription:"Activate a sleeping person to summon an illusion to accompany you for an hour. Costs <5>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Vaermina",description:"Witness the death of those under your mind affecting spells. Kill people in their sleep. Sleep to pray. Those skilled in Illusion are most deserving of my favor.",effects:[{effectName:"Tenets of Vaermina",effectDescription:"Witness the death of those under your mind affecting spells. Kill people in their sleep. Sleep to pray. Those skilled in Illusion are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Zenithar",domain:"Divine",boons:{boon1:{spellName:"Follower of Zenithar",spellDescription:"No description available",effects:[{effectName:"Work Ethic",effectDescription:"Smithing, Alchemy and Enchanting are <Global=WSN_Favor_Global_Fractional>% better (based on favor with Zenithar).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Zenithar",spellDescription:"No description available",effects:[{effectName:"Invisible Hand",effectDescription:"Pray to Zenithar to buy and sell items directly.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Zenithar",description:"Invest in stores and merchants. Seek out skill training. Make weapons and armor. Never openly break the laws of Skyrim.",effects:[{effectName:"Tenets of Zenithar",effectDescription:"Invest in stores and merchants. Seek out skill training. Make weapons and armor. Never openly break the laws of Skyrim.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Boethiah",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Boethiah",spellDescription:"No description available",effects:[{effectName:"Blood Throne",effectDescription:"Your attacks deal <Global=WSN_Favor_Global_Fractional3>% more damage when fighting only one opponent (based on favor with Boethiah).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Boethiah",spellDescription:"No description available",effects:[{effectName:"Assassinate",effectDescription:"During prayer, you may invoke superior Daedric Invisibility for <90> seconds. If broken by a sneak attack, it deals <25>% more damage. Costs <10>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Boethiah",description:"Murder the innocent. Slay people who stand in your way. Strike unseen with sneak attacks. Dark Elves are most deserving of my favor.",effects:[{effectName:"Tenets of Boethiah",effectDescription:"Murder the innocent. Slay people who stand in your way. Strike unseen with sneak attacks. Dark Elves are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Dunmer"]},{name:"Nocturnal",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Nocturnal",spellDescription:"No description available",effects:[{effectName:"Vanish in the Night",effectDescription:"Praying clears non-violent crime bounties up to <Global=WSN_Favor_Global> gold (based on favor with Nocturnal).",magnitude:20,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Nocturnal",spellDescription:"No description available",effects:[{effectName:"Raven's Watch",effectDescription:"During the night, you are less likely to be detected and are more proficient with picking pockets. During prayer, you may astrally observe the nearest person within <300> feet.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Nocturnal",description:"Pickpocket <Mysterious> <Coinpurses>. Pick locks successfully. Pray only at night, preferably in darkness. Those skilled in Sneak are most deserving of my favor.",effects:[{effectName:"Tenets of Nocturnal",effectDescription:"Pickpocket <Mysterious> <Coinpurses>. Pick locks successfully. Pray only at night, preferably in darkness. Those skilled in Sneak are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Molag Bal",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Molag Bal",spellDescription:"No description available",effects:[{effectName:"Eye of the Storm",effectDescription:"Absorbs <Global=WSN_Favor_Global_Fractional> Magicka and Stamina per second (based on favor with Molag Bal) from nearby enemies in combat.",magnitude:12,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Stop Being Vampire",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Molag Bal",spellDescription:"No description available",effects:[{effectName:"Dragged to Oblivion",effectDescription:"Activate a hostile below level 50 in combat to banish them to Coldharbour. Pray to request the items. Costs <25>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Molag Bal",description:"Slay people who stand in your way. Trap souls in my name. Live as a vampire and never seek a cure. Those skilled in Destruction are most deserving of my favor.",effects:[{effectName:"Tenets of Molag Bal",effectDescription:"Slay people who stand in your way. Trap souls in my name. Live as a vampire and never seek a cure. Those skilled in Destruction are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Kynareth",domain:"Divine",boons:{boon1:{spellName:"Follower of Kynareth",spellDescription:"No description available",effects:[{effectName:"Windspeaker",effectDescription:"The fierce spirit of Kyne increases movement speed by <mag>% in combat.",magnitude:15,duration:0,area:0,keywords:[]},{effectName:"Fortify Speed",effectDescription:"No description available",magnitude:15,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Kynareth",spellDescription:"No description available",effects:[{effectName:"Kynareth's Emissary",effectDescription:"Pray to Kynareth to summon a sacred Sabre Cat mount.",magnitude:40,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Kynareth",description:"Explore new locations. Strive to raise your Stamina. Receive the Voice of the Sky. Pray only outdoors. Never openly break the laws of Skyrim.",effects:[{effectName:"Tenets of Kynareth",effectDescription:"Explore new locations. Strive to raise your Stamina. Receive the Voice of the Sky. Pray only outdoors. Never openly break the laws of Skyrim.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Mephala",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Mephala",spellDescription:"No description available",effects:[{effectName:"Secret Murder",effectDescription:"Sneak attacks deal <Global=WSN_Favor_Global_Fractional3>% more damage from behind (based on favor with Mephala).",magnitude:50,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Mephala",spellDescription:"No description available",effects:[{effectName:"Whispers of Betrayal",effectDescription:"During prayer, seize control of the nearest person within <75> feet to fight for you. Costs <5>% favor.",magnitude:50,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Mephala",description:"Poison your weapons. Strike unseen with sneak attacks. Intimidate the weak. Dark Elves are most deserving of my favor.",effects:[{effectName:"Tenets of Mephala",effectDescription:"Poison your weapons. Strike unseen with sneak attacks. Intimidate the weak. Dark Elves are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Dunmer"]},{name:"Arkay",domain:"Divine",boons:{boon1:{spellName:"Follower of Arkay",spellDescription:"No description available",effects:[{effectName:"Chalice of Life",effectDescription:"Regenerate up to <5>% of your maximum Health per second based on missing Health. Can perform <Arkay's> <Rites>.",magnitude:100,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Summon Undead",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Becoming Undead",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Arkay",spellDescription:"No description available",effects:[{effectName:"Arkayn Cycle",effectDescription:"Revive with full Health upon taking fatal damage. Must pray to use this ability again. Costs <15>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Arkay",description:"Slay the undead and their summoners. Perform <Arkay's> <Rites>. Never openly break the laws of Skyrim. Never summon the undead or become one of them.",effects:[{effectName:"Tenets of Arkay",effectDescription:"Slay the undead and their summoners. Perform <Arkay's> <Rites>. Never openly break the laws of Skyrim. Never summon the undead or become one of them.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Sanguine",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Sanguine",spellDescription:"No description available",effects:[{effectName:"Be Merry",effectDescription:"Health, Magicka and Stamina regenerate <mag>% faster while a potion, food item or ingredient is active.",magnitude:50,duration:0,area:0,keywords:[]},{effectName:"Be Merry - HP Bonus",effectDescription:"No description available",magnitude:50,duration:0,area:0,keywords:[]},{effectName:"Be Merry - MS Bonus",effectDescription:"No description available",magnitude:50,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Sanguine",spellDescription:"No description available",effects:[{effectName:"Pandemonium",effectDescription:"Can pray in combat, forcing the <5> nearest hostile people to dance for <20> seconds. Costs <10>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Sanguine",description:"Make mischief and commit misdemeanors and crimes worthy of a bounty. Indulge in mead, wine and ale. Find your own way out of jail.",effects:[{effectName:"Tenets of Sanguine",effectDescription:"Make mischief and commit misdemeanors and crimes worthy of a bounty. Indulge in mead, wine and ale. Find your own way out of jail.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Malacath",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Malacath",spellDescription:"No description available",effects:[{effectName:"Deathbringer",effectDescription:"Your power attacks deal <Global=WSN_Favor_Global_Fractional3>% more damage (based on favor with Malacath).",magnitude:150,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Malacath",spellDescription:"No description available",effects:[{effectName:"Bloodsoaked Triumph",effectDescription:"When an enemy dies within <mag> feet, their killer is healed by <Global=WSN_Favor_Global>% of the amount of overkill damage dealt (based on favor with Malacath).",magnitude:40,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Malacath",description:"Defeat epic foes. Improve weapons and armor. Never commit a crime against the strongholds. Orcs and those skilled in Smithing are most deserving of my favor.",effects:[{effectName:"Tenets of Malacath",effectDescription:"Defeat epic foes. Improve weapons and armor. Never commit a crime against the strongholds. Orcs and those skilled in Smithing are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Orsimer"]},{name:"Stendarr",domain:"Divine",boons:{boon1:{spellName:"Follower of Stendarr",spellDescription:"No description available",effects:[{effectName:"Sacred Resolve",effectDescription:"Take <Global=WSN_Favor_Global_Fractional3>% less attack damage from daedra and undead (based on favor with Stendarr).",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Summon Undead or Daedra",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Stendarr",spellDescription:"No description available",effects:[{effectName:"Channel Divinity",effectDescription:"During prayer, you may spend <10>% favor to gain <Global=WSN_Favor_Global_Fractional2>% improved attack, defense and healing (based on favor with Stendarr) for <60> minutes or <5> battles.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Stendarr",description:"Clear dungeons of evil. Slay daedra and the undead. Complete side quests. Never openly break the laws of Skyrim. Never practice the foul summoning arts.",effects:[{effectName:"Tenets of Stendarr",effectDescription:"Clear dungeons of evil. Slay daedra and the undead. Complete side quests. Never openly break the laws of Skyrim. Never practice the foul summoning arts.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Auriel",domain:"Ancestor",boons:{boon1:{spellName:"Follower of Auriel",spellDescription:"No description available",effects:[{effectName:"Father of Mer",effectDescription:"All skills are <Global=WSN_Favor_Global_Fractional>% more efficient (based on favor with Auriel).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Auriel",spellDescription:"No description available",effects:[{effectName:"Path to Alaxon",effectDescription:"Attaining level <100> in a skill improves that skill by <Global=WSN_Favor_Global_Fractional>% (based on favor with Auriel).",magnitude:10,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Auriel",description:"Fulfill your destiny by saving Tamriel. Master all skills. Become my Champion at my sacred Chantry. High Elves are most deserving of my favor.",effects:[{effectName:"Tenets of Auriel",effectDescription:"Fulfill your destiny by saving Tamriel. Master all skills. Become my Champion at my sacred Chantry. High Elves are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Altmer"]},{name:"Peryite",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Peryite",spellDescription:"No description available",effects:[{effectName:"Taskmaster",effectDescription:"All skills are <Global=WSN_Favor_Global_Fractional>% more efficient (based on favor with Peryite). Pray for <Peryite's> <Gifts> to gain favor.",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on End Diseased",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Peryite",spellDescription:"No description available",effects:[{effectName:"Green Dragon's Breath",effectDescription:"Activate a living opponent in combat to inflict all of <Peryite's> <Gifts> you have on the target, plus <5> disease damage per second for each gift. Pray to recharge.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Peryite",description:"Catch as many diseases as you can. Accept my Gifts of pestilence. Pray only while diseased. Never accept a cure for your afflictions.",effects:[{effectName:"Tenets of Peryite",effectDescription:"Catch as many diseases as you can. Accept my Gifts of pestilence. Pray only while diseased. Never accept a cure for your afflictions.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Hircine",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Hircine",spellDescription:"No description available",effects:[{effectName:"Bitter Mercy",effectDescription:"Hircine's gift doubles attack damage to living targets with <Global=WSN_Favor_Global_Fractional3>% or less Health (based on favor with Hircine).",magnitude:150,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Hircine",spellDescription:"No description available",effects:[{effectName:"Posting of the Hunt",effectDescription:"During prayer, invoke a <Hunt> against the living within <500> feet, revealing them and exposing them to <Bitter> <Mercy>. Costs <10>% favor.",magnitude:150,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Hircine",description:"Slay the living in open combat, especially those stronger than you. Live as a werewolf. Pray in the wild. Those skilled in Light Armor are most deserving of my favor.",effects:[{effectName:"Tenets of Hircine",effectDescription:"Slay the living in open combat, especially those stronger than you. Live as a werewolf. Pray in the wild. Those skilled in Light Armor are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Xarxes",domain:"Ancestor",boons:{boon1:{spellName:"Follower of Xarxes",spellDescription:"No description available",effects:[{effectName:"Scribe's Insight",effectDescription:"If you read a Skill Book while praying, Xarxes grants you an extra Skill Point in that skill.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Xarxes",spellDescription:"No description available",effects:[{effectName:"Panopticon",effectDescription:"During prayer, you may ascend in a trance, revealing all characters in a very large radius.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Xarxes",description:"Explore new locations. Read the stories of others. Study a wide variety of spells. Bretons are most deserving of my favor.",effects:[{effectName:"Tenets of Xarxes",effectDescription:"Explore new locations. Read the stories of others. Study a wide variety of spells. Bretons are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Breton"]},{name:"Shor",domain:"Deity",boons:{boon1:{spellName:"Follower of Shor",spellDescription:"No description available",effects:[{effectName:"Another Name for Freedom",effectDescription:"Take <Global=WSN_Favor_Global_Fractional3>% less attack damage and stagger from elves (based on favor with Shor).",magnitude:150,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Shor",spellDescription:"No description available",effects:[{effectName:"Destiny",effectDescription:"When entering combat with a mighty foe, Shor sends a Shield-Thane to assist you. Pray to recharge.",magnitude:150,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Shor",description:"Fulfill your destiny by saving Tamriel. Master the skills of the Warrior. Slay elves. Defeat epic foes.",effects:[{effectName:"Tenets of Shor",effectDescription:"Fulfill your destiny by saving Tamriel. Master the skills of the Warrior. Slay elves. Defeat epic foes.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Hermaeus Mora",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Hermaeus Mora",spellDescription:"No description available",effects:[{effectName:"Demon of Knowledge",effectDescription:"Find <Eldritch> <Pages> on corpses. Similar <Eldritch> <Pages> can be bound at a tanning rack to create <Eldritch> <Tomes> that improve magic and shouts.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Hermaeus Mora",spellDescription:"No description available",effects:[{effectName:"Omniscience",effectDescription:"Pray to permanently raise a skill of your choice by one level. Costs <10>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Hermaeus Mora",description:"Read <Eldritch> <Pages> and bind them into <Eldritch> <Tomes>. Read books that teach new skills. Become my Champion at the Summit of Apocrypha.",effects:[{effectName:"Tenets of Hermaeus Mora",effectDescription:"Read <Eldritch> <Pages> and bind them into <Eldritch> <Tomes>. Read books that teach new skills. Become my Champion at the Summit of Apocrypha.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Clavicus Vile",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Clavicus Vile",spellDescription:"No description available",effects:[{effectName:"Pactmaker",effectDescription:"Conjuration spells and effects last <10>% longer. Pray to make a <Pact> to gain favor with Clavicus Vile.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Clavicus Vile",spellDescription:"No description available",effects:[{effectName:"Wishmaster",effectDescription:"Pray to make a <Wish>, permanently gaining an additional perk point. Costs <30>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Clavicus Vile",description:"Pray to accept a Pact and complete it as written within the allotted time. Never break or ignore my Pacts.",effects:[{effectName:"Tenets of Clavicus Vile",effectDescription:"Pray to accept a Pact and complete it as written within the allotted time. Never break or ignore my Pacts.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Namira",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Namira",spellDescription:"No description available",effects:[{effectName:"Creeping Decay",effectDescription:"Reduces Poison Resist of all within <mag> feet by <Global=WSN_Favor_Global_Fractional2>% (based on favor with Namira).",magnitude:40,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Namira",spellDescription:"No description available",effects:[{effectName:"Necrophages",effectDescription:"Poisoning a person or putting a Human Heart or Flesh into their inventory attracts insects, reducing armor by <Global=WSN_Favor_Global> and dealing <Global=WSN_Favor_Global_Fractional3> disease damage (based on favor with Namira).",magnitude:150,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Namira",description:"Murder the innocent. Poison your weapons. Eat the corpses of the dead with my Ring. Be generous to beggars.",effects:[{effectName:"Tenets of Namira",effectDescription:"Murder the innocent. Poison your weapons. Eat the corpses of the dead with my Ring. Be generous to beggars.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Jyggalag",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Jyggalag",spellDescription:"No description available",effects:[{effectName:"Obelisks of Order",effectDescription:"Generates <8> <Obelisks> <of> <Order> in Skyrim. Activating one grants <15> points of Health, Magicka and Stamina.",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Have Sheogorath",effectDescription:"No description available",magnitude:10,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Summon Daedra",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Jyggalag",spellDescription:"No description available",effects:[{effectName:"Stasis",effectDescription:"Activate an opponent in combat to trap them in an inert but invulnerable state for <15> seconds. Costs <5>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Jyggalag",description:"Activate my Obelisks of Order. Clear dungeons of evil. Slay daedra. Never serve Sheogorath. Those skilled in Heavy Armor are most deserving of my favor.",effects:[{effectName:"Tenets of Jyggalag",effectDescription:"Activate my Obelisks of Order. Clear dungeons of evil. Slay daedra. Never serve Sheogorath. Those skilled in Heavy Armor are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Trinimac",domain:"Ancestor",boons:{boon1:{spellName:"Follower of Trinimac",spellDescription:"No description available",effects:[{effectName:"Tears of Man",effectDescription:"Attacks deal <Global=WSN_Favor_Global_Fractional3>% more damage and critical damage to humans (based on favor with Trinimac).",magnitude:150,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Have Boethiah",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Trinimac",spellDescription:"No description available",effects:[{effectName:"Manifest Divinity",effectDescription:"When praying, you may become ethereal and invulnerable until your next attack. Costs <5>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Trinimac",description:"Slay humans. Defeat epic foes. Never accept Boethiah's blessing or serve her. Those skilled in Two-Handed are most deserving of my favor.",effects:[{effectName:"Tenets of Trinimac",effectDescription:"Slay humans. Defeat epic foes. Never accept Boethiah's blessing or serve her. Those skilled in Two-Handed are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Sheogorath",domain:"Daedric Prince",boons:{boon1:{spellName:"Follower of Sheogorath",spellDescription:"No description available",effects:[{effectName:"Touch of Madness",effectDescription:"Praying grants a random <Touch> <of> <Madness>. High favor with Sheogorath yields more beneficial effects.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Sheogorath",spellDescription:"No description available",effects:[{effectName:"Lost to Madness",effectDescription:"Receive a <Touch> <of> <Madness> whenever you enter combat.",magnitude:10,duration:0,area:0,keywords:[]},{effectName:"Lost to Madness - Active",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Sheogorath",description:"Pray often and receive Sheogorath's <Touch> <of> <Madness>. Never disrespect cheese.",effects:[{effectName:"Tenets of Sheogorath",effectDescription:"Pray often and receive Sheogorath's <Touch> <of> <Madness>. Never disrespect cheese.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Sithis",domain:"Deity",boons:{boon1:{spellName:"Follower of Sithis",spellDescription:"No description available",effects:[{effectName:"Primal Darkness",effectDescription:"Up to <25>% harder to detect by those within <30> feet. Chance to find Human Hearts on people you kill.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Sithis",spellDescription:"No description available",effects:[{effectName:"Call of the Void",effectDescription:"While sneaking, activate a door to briefly turn it into a Void portal. Targets within <60> feet who are not detecting you are pulled in and killed. Costs <5>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Sithis",description:"Murder the innocent. Pray while sacrificing a Human Heart or Human Flesh. Send your victims to the Void. Argonians are most deserving of my favor.",effects:[{effectName:"Tenets of Sithis",effectDescription:"Murder the innocent. Pray while sacrificing a Human Heart or Human Flesh. Send your victims to the Void. Argonians are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Argonian"]},{name:"Z'en",domain:"Ancestor",boons:{boon1:{spellName:"Follower of Z'en",spellDescription:"No description available",effects:[{effectName:"Traveler's Break",effectDescription:"Beneficial potions, food and ingredients last <50>% longer and are <Global=WSN_Favor_Global_Fractional3>% better (based on favor with Z'en).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Z'en",spellDescription:"No description available",effects:[{effectName:"Merchant's Knapsack",effectDescription:"Pray to open an unlimited extradimensional storage space.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Zen",description:"Bribe people as needed. Harvest the fruits of nature. Eat as much food as you want. Those skilled in Speech are most deserving of my favor.",effects:[{effectName:"Tenets of Z'en",effectDescription:"Bribe people as needed. Harvest the fruits of nature. Eat as much food as you want. Those skilled in Speech are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Satakal",domain:"Yokudan Deity",boons:{boon1:{spellName:"Follower of Satakal",spellDescription:"No description available",effects:[{effectName:"World Egg",effectDescription:"Shrine blessings from other gods are more effective and last longer (based on favor with Satakal).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Satakal",spellDescription:"No description available",effects:[{effectName:"Ouroboros",effectDescription:"Pray to become reborn as a different person, moving points between your attributes. Costs <15>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Satakal",description:"Fulfill your destiny by saving Tamriel. Strive to raise your Health. Absorb dragon souls.",effects:[{effectName:"Tenets of Satakal",effectDescription:"Fulfill your destiny by saving Tamriel. Strive to raise your Health. Absorb dragon souls.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Tall Papa",domain:"Yokudan Deity",boons:{boon1:{spellName:"Follower of Tall Papa",spellDescription:"No description available",effects:[{effectName:"Metaphysical Insight",effectDescription:"Weapon enchantments drain <Global=WSN_Favor_Global_Fractional3>% less charge (based on favor with Tall Papa).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Tall Papa",spellDescription:"No description available",effects:[{effectName:"Glimpse the Shores",effectDescription:"On death, enter an ethereal ascended state. If combat ends within <Global=WSN_Favor_Global_Fractional3> seconds, brings you back to life (based on favor with Tall Papa) for <5>% favor. Pray to reset.",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Tall Papa death effect",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Protected by Tall Papa",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Tall Papa",description:"Touch the <Fractures> scattered around Skyrim. Create enchanted items. Those skilled in Enchanting are most deserving of my favor.",effects:[{effectName:"Tenets of Tall Papa",effectDescription:"Touch the <Fractures> scattered around Skyrim. Create enchanted items. Those skilled in Enchanting are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"the HoonDing",domain:"Yokudan Deity",boons:{boon1:{spellName:"Follower of the HoonDing",spellDescription:"No description available",effects:[{effectName:"Make Way",effectDescription:"Staggering an opponent reduces armor by <Global=WSN_Favor_Global_Fractional2> points for <30> seconds (based on favor with the HoonDing).",magnitude:60,duration:0,area:0,keywords:[]},{effectName:"Worthy Killer",effectDescription:"No description available",magnitude:150,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of the HoonDing",spellDescription:"No description available",effects:[{effectName:"Perseverance",effectDescription:"Grants immunity to stagger from attacks and bashes.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of the HoonDing",description:"Slay your foes in open combat, especially those stronger than you. Those skilled in One-Handed are most deserving of my favor.",effects:[{effectName:"Tenets of the HoonDing",effectDescription:"Slay your foes in open combat, especially those stronger than you. Those skilled in One-Handed are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Sai",domain:"Deity",boons:{boon1:{spellName:"Follower of Sai",spellDescription:"No description available",effects:[{effectName:"Gamble",effectDescription:"When meditating, able to bet some of your gold on a game of dice.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Sai",spellDescription:"No description available",effects:[{effectName:"High Stakes",effectDescription:"Staking <1000> gold or more on a game of dice also adds <1> point of Health, Magicka or Stamina to your wager.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Sai",description:"Gamble while meditating and win.",effects:[{effectName:"Tenets of Sai",effectDescription:"Gamble while meditating and win.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"the Animal Gods",domain:"Nordic Deity",boons:{boon1:{spellName:"Follower of the Old Ways",spellDescription:"No description available",effects:[{effectName:"Totem Worship",effectDescription:"Pray while sacrificing <100> gold worth of gemstones to assume the powers of an <animal> <god>.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of the Old Ways",spellDescription:"No description available",effects:[{effectName:"Dragon Cult",effectDescription:"Able to assume the powers of the <Dragon>. Costs <2>% favor per hour.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of the Old Ways",description:"Slay people who stand in your way. Absorb dragon souls. Assume our powers through prayer. Nords are most deserving of our favor.",effects:[{effectName:"Tenets of the Old Ways",effectDescription:"Slay people who stand in your way. Absorb dragon souls. Assume our powers through prayer. Nords are most deserving of our favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Nord"]},{name:"Baan Dar",domain:"Deity",boons:{boon1:{spellName:"Follower of Baan Dar",spellDescription:"No description available",effects:[{effectName:"Pariah",effectDescription:"Selling to fences is <Global=WSN_Favor_Global>% more lucrative. Pickpocketing is <Global=WSN_Favor_Global_Fractional2>% easier (based on favor with Baan Dar).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Baan Dar",spellDescription:"No description available",effects:[{effectName:"Skooma Trick",effectDescription:"Put skooma bottles in people's inventory, then pray to Baan Dar to ignite them within <200> feet for <Global=WSN_Favor_Global_Fractional4> damage (based on favor with Baan Dar). Costs <5>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Baan Dar",description:"Pick locks and pockets successfully. Khajiit and those skilled in Archery are most deserving of my favor.",effects:[{effectName:"Tenets of Baan Dar",effectDescription:"Pick locks and pockets successfully. Khajiit and those skilled in Archery are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Khajiit"]},{name:"Ebonarm",domain:"Deity",boons:{boon1:{spellName:"Follower of Ebonarm",spellDescription:"No description available",effects:[{effectName:"Enemy of the Daedra",effectDescription:"Attacks and critical strikes are <Global=WSN_Favor_Global_Fractional2>% more effective against daedra and those who summon them (based on favor with Ebonarm).",magnitude:150,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Ebonarm",spellDescription:"No description available",effects:[{effectName:"Raven's Harvest",effectDescription:"Reduces the armor of enemies within <mag> feet by <Global=WSN_Favor_Global_Fractional2> points (based on favor with Ebonarm) and you gain the total amount. Doubled against daedra.",magnitude:40,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Ebonarm",description:"Slay daedra. Defeat epic foes. Complete miscellaneous quests for the people of Skyrim. Those skilled in Block are most deserving of my favor.",effects:[{effectName:"Tenets of Ebonarm",effectDescription:"Slay daedra. Defeat epic foes. Complete miscellaneous quests for the people of Skyrim. Those skilled in Block are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Rajhin",domain:"Khajiiti Deity",boons:{boon1:{spellName:"Follower of Rajhin",spellDescription:"No description available",effects:[{effectName:"Rajhin's Tales",effectDescription:"Find additional gold in many containers, with a chance to find a large amount of additional gold.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Rajhin",spellDescription:"No description available",effects:[{effectName:"Prayer of Unlocking",effectDescription:"Pray to Rajhin to break a lock within <20> feet. Costs <5>% favor. No effect on locks that can't be picked.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Rajhin",description:"Explore new locations. Bribe people as needed. Pick locks successfully. Those skilled in Lockpicking are most deserving of my favor.",effects:[{effectName:"Tenets of Rajhin",effectDescription:"Explore new locations. Bribe people as needed. Pick locks successfully. Those skilled in Lockpicking are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Riddle'Thar",domain:"Khajiiti Deity",boons:{boon1:{spellName:"Follower of the Riddle'Thar",spellDescription:"No description available",effects:[{effectName:"Path to Llesw'er",effectDescription:"All skills are <Global=WSN_Favor_Global_Fractional>% more efficient (based on favor with the Riddle'Thar).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of the Riddle'Thar",spellDescription:"No description available",effects:[{effectName:"Beseech the Manes",effectDescription:"During prayer, an ancient Mane will grant a blessing they believe to be appropriate for the challenges you are about to face.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of the Riddle'Thar",description:"Master the skills of the Warrior, Thief and Mage. Strive to raise your Health, Magicka and Stamina. Each is as important as the others. Pray only at night.",effects:[{effectName:"Tenets of Riddle'Thar",effectDescription:"Master the skills of the Warrior, Thief and Mage. Strive to raise your Health, Magicka and Stamina. Each is as important as the others. Pray only at night.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Morwha",domain:"Yokudan Deity",boons:{boon1:{spellName:"Follower of Morwha",spellDescription:"No description available",effects:[{effectName:"Healer of the Sands",effectDescription:"Meditation restores <Global=WSN_Favor_Global> Health per second for you and nearby allies (based on favor with Morwha).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Morwha",spellDescription:"No description available",effects:[{effectName:"Fertile Growth",effectDescription:"Praying to Morwha blesses you with enchanted fruit that restores or fortifies an attribute.",magnitude:40,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Morwha",description:"Be married. Receive the blessing of Lover's Comfort. Harvest the fruits of nature. Eat as much food as you want.",effects:[{effectName:"Tenets of Morwha",effectDescription:"Be married. Receive the blessing of Lover's Comfort. Harvest the fruits of nature. Eat as much food as you want.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Leki",domain:"Yokudan Deity",boons:{boon1:{spellName:"Follower of Leki",spellDescription:"No description available",effects:[{effectName:"Spirit Sword",effectDescription:"Power attacks ignore <Global=WSN_Favor_Global_Fractional3>% of an opponent's armor (based on favor with Leki).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Leki",spellDescription:"No description available",effects:[{effectName:"Battle Meditation",effectDescription:"During prayer, you may spend <5>% favor to gain <Global=WSN_Favor_Global_Fractional>% melee damage (based on favor with Leki) for <60> minutes or <10> battles. Costs <5>% favor.",magnitude:60,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Leki",description:"Bring the Civil War to a conclusion. Make and improve weapons. Master the skills of the Warrior.",effects:[{effectName:"Tenets of Leki",effectDescription:"Bring the Civil War to a conclusion. Make and improve weapons. Master the skills of the Warrior.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"the Hist",domain:"Deity",boons:{boon1:{spellName:"Follower of the Hist",spellDescription:"No description available",effects:[{effectName:"Symbiosis",effectDescription:"Pray to gain a <Global=WSN_Favor_Global_Fractional2> point bonus to Stamina and Magicka for <Global=WSN_Favor_Global_Fractional4> seconds (based on favor with the Hist).",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Summon Daedra",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of the Hist",spellDescription:"No description available",effects:[{effectName:"Deep Roots",effectDescription:"Absorb <Global=WSN_Favor_Global_Fractional3>% of the Magicka and Stamina of dead creatures and people within <mag> feet (based on favor with the Hist).",magnitude:60,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of the Hist",description:"Explore new locations. Slay daedra. Pray only outdoors. Never summon a daedra.",effects:[{effectName:"Tenets of the Hist",effectDescription:"Explore new locations. Slay daedra. Pray only outdoors. Never summon a daedra.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"St. Alessia",domain:"Deity",boons:{boon1:{spellName:"Follower of St. Alessia",spellDescription:"No description available",effects:[{effectName:"Covenant of Man",effectDescription:"Pray for a Divine blessing of your choice. Divine blessings are <Global=WSN_Favor_Global_Fractional2>% better (based on favor with St. Alessia).",magnitude:150,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of St. Alessia",spellDescription:"No description available",effects:[{effectName:"Dragonblood Empress",effectDescription:"While under the effects of a Divine blessing, can talk to most non-hostile humans to make them a friend and potential follower. Costs <10>% favor.",magnitude:60,duration:0,area:0,keywords:["WSN_Misc_StAlessia_Boon2_Keyword"]}]}},tenets:{spellName:"Follower of St. Alessia",description:"Have a follower at your side. Slay elves. Receive the blessing of a Divine.",effects:[{effectName:"Tenets of St. Alessia",effectDescription:"Have a follower at your side. Slay elves. Receive the blessing of a Divine.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"Mannimarco",domain:"Deity",boons:{boon1:{spellName:"Follower of Mannimarco",spellDescription:"No description available",effects:[{effectName:"Dark Moon",effectDescription:"Undead conjured at night last <Global=WSN_Favor_Global>% longer (based on favor with Mannimarco).",magnitude:0,duration:0,area:0,keywords:[]},{effectName:"Drain Favor on Arkay Blessing",effectDescription:"No description available",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Mannimarco",spellDescription:"No description available",effects:[{effectName:"Nocturne",effectDescription:"Allied conjured undead deal <Global=WSN_Favor_Global_Fractional2>% more attack damage and regenerate Health (based on favor with Mannimarco).",magnitude:100,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Mannimarco",description:"Trap souls in my name. Pray only at night. Never accept Arkay's blessing. Those skilled in Conjuration are most deserving of my favor.",effects:[{effectName:"Tenets of Mannimarco",effectDescription:"Trap souls in my name. Pray only at night. Never accept Arkay's blessing. Those skilled in Conjuration are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:[]},{name:"the All-Maker",domain:"Deity",boons:{boon1:{spellName:"Follower of the All-Maker",spellDescription:"No description available",effects:[{effectName:"Wellspring of Life",effectDescription:"Healing spells restore <Global=WSN_Favor_Global_Fractional3>% more Health (based on favor with the All-Maker).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of the All-Maker",spellDescription:"No description available",effects:[{effectName:"World Shaman",effectDescription:"After using an All-Maker Stone power, pray to the All-Maker to have it restored to you.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of the All-Maker",description:"Cleanse the All-Maker Stones. Hunt animals. Explore new locations. Pray only outdoors. Nords are most deserving of my favor.",effects:[{effectName:"Tenets of the All-Maker",effectDescription:"Cleanse the All-Maker Stones. Hunt animals. Explore new locations. Pray only outdoors. Nords are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Nord"]},{name:"the Magna-Ge",domain:"Deity",boons:{boon1:{spellName:"Follower of the Magna-Ge",spellDescription:"No description available",effects:[{effectName:"Shimmering Light",effectDescription:"Gain <mag> points of weapon charge per second, up to their charge level when last equipped or recharged.",magnitude:5,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of the Magna-Ge",spellDescription:"No description available",effects:[{effectName:"Starlit Path",effectDescription:"During prayer, you may let the Magna-Ge carry you to a location within line of sight. Costs <4>% favor.",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of the Magna-Ge",description:"Create enchanted items. Explore new locations. Pray only outdoors at night. High Elves and those skilled in Alteration are most deserving of our favor.",effects:[{effectName:"Tenets of the Magna-Ge",effectDescription:"Create enchanted items. Explore new locations. Pray only outdoors at night. High Elves and those skilled in Alteration are most deserving of our favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Altmer"]},{name:"Sotha Sil",domain:"Tribunal",boons:{boon1:{spellName:"Follower of Sotha Sil",spellDescription:"No description available",effects:[{effectName:"Seht's Guidance",effectDescription:"Items are enchanted <Global=WSN_Favor_Global_Fractional3>% stronger (based on favor with Sotha Sil).",magnitude:10,duration:0,area:0,keywords:[]},{effectName:"Visit Dwemer Ruins",effectDescription:"Visit Dwemer ruins while worshipping Sotha Sil to gain favor.",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Sotha Sil",spellDescription:"No description available",effects:[{effectName:"Seht's Brilliance",effectDescription:"Using a filled soul gem or dynamo core, permanently summon a Dwarven automaton to fight for you.  You may only have one active at a time",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Sotha Sil",description:"Uncover the secrets of Dwemer ruins. Create enchanted items. Master the skills of the Mage. Dark Elves and those skilled in Enchanting are most deserving of my favor.",effects:[{effectName:"Tenets of Sotha Sil",effectDescription:"Uncover the secrets of Dwemer ruins. Create enchanted items. Master the skills of the Mage. Dark Elves and those skilled in Enchanting are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Dunmer"]},{name:"Almalexia",domain:"Tribunal",boons:{boon1:{spellName:"Follower of Almalexia",spellDescription:"No description available",effects:[{effectName:"Face-Snaked Queen",effectDescription:"Attacks deal <Global=WSN_Favor_Global_Fractional3>% more damage to Nords and Argonians (based on favor with Almalexia).",magnitude:0,duration:0,area:0,keywords:[]}]},boon2:{spellName:"Devotee of Almalexia",spellDescription:"No description available",effects:[{effectName:"Ayem's Mercy",effectDescription:"Healing from all sources is <Global=WSN_Favor_Global_Fractional3>% more effective (based on favor with Almalexia).",magnitude:0,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Almalexia",description:"Vanquish the threats facing Solstheim. Be generous to beggars and children. Receive the blessing of Lover's Comfort. Dark Elves are most deserving of my favor.",effects:[{effectName:"Tenets of Almalexia",effectDescription:"Vanquish the threats facing Solstheim. Be generous to beggars and children. Receive the blessing of Lover's Comfort. Dark Elves are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Dunmer"]},{name:"Vivec",domain:"Tribunal",boons:{boon1:{spellName:"Follower of Vivec",spellDescription:"No description available",effects:[{effectName:"Vehk's Guile",effectDescription:"Speech and intimidate checks are <Global=WSN_Favor_Global_Fractional3>% easier (per favor with Vivec)",magnitude:50,duration:0,area:0,keywords:["MagicEnchFortifySneak"]}]},boon2:{spellName:"Devotee of Vivec",spellDescription:"No description available",effects:[{effectName:"Might of the Armiger",effectDescription:"Your power attacks deal <Global=WSN_Favor_Global_Fractional3>% more damage (based on favor with Vivec).",magnitude:45,duration:0,area:0,keywords:[]}]}},tenets:{spellName:"Follower of Vivec",description:"Fulfill your destiny by saving Tamriel. Read the stories of others. Defeat epic foes. Dark Elves and those skilled in Speechcraft are most deserving of my favor.",effects:[{effectName:"Tenets of Vivec",effectDescription:"Fulfill your destiny by saving Tamriel. Read the stories of others. Defeat epic foes. Dark Elves and those skilled in Speechcraft are most deserving of my favor.",magnitude:0,duration:0,area:0,keywords:[]}]},favoredRaces:["Dunmer"]}],xp=DL.map(e=>e.name.toLowerCase()),bf=e=>{const t=xp.indexOf(e.toLowerCase());return t===-1?(console.warn(`Religion name not found in catalog: ${e}`),-1):t},Cb=e=>e<0||e>=xp.length?(console.warn(`Religion index out of bounds: ${e}`),""):xp[e],PL={SMG:["REQ_Smithing_Craftsmanship","REQ_Smithing_DwarvenSmithing","REQ_Smithing_OrcishSmithing","REQ_Smithing_EbonySmithing","REQ_Smithing_DaedricSmithing","REQ_Smithing_DraconicBlacksmithing","REQ_Smithing_AdvancedBlacksmithing","REQ_Smithing_LegendaryBlacksmithing","REQ_Smithing_ArcaneCraftsmanship","REQ_Smithing_AdvancedLightArmors","REQ_Smithing_ElvenSmithing","REQ_Smithing_GlassSmithing","Trad_Smithing_ShiveringIlsesSmithing","REQ_Smithing_Tailoring","ORD_Smh60_SmithingSpecialization_Perk_60_OrdASISExclude","ORD_Smh80_IronLore_Perk_80_OrdASISExclude"],DST:["REQ_Destruction_Mastery_000_NoviceDestruction","REQ_Destruction_Mastery_025_ApprenticeDestruction","REQ_Destruction_Mastery_050_AdeptDestruction","REQ_Destruction_Mastery_075_ExpertDestruction","REQ_Destruction_Mastery_100_MasterDestruction","REQ_Destruction_RuneMastery","REQ_Destruction_Pyromancy_025_Pyromancy1","REQ_Destruction_Pyromancy_075_Cremation","REQ_Destruction_Pyromancy_100_FireMastery","REQ_Destruction_Cryomancy_025_Cyromancy1","REQ_Destruction_Cryomancy_075_DeepFreeze","REQ_Destruction_Cryomancy_100_FrostMastery","REQ_Destruction_Electromancy_025_Electromancy1","REQ_Destruction_Electromancy_075_ElectrostaticDischarge","REQ_Destruction_Electromancy_100_LightningMastery","REQ_Destruction_Empower_025_EmpoweredDestruction","REQ_Destruction_Empower_050_Impact","REQ_Destruction_Arcane_025_ArcaneFocus1","REQ_Destruction_Arcane_075_ArcaneDisruption","REQ_Destruction_Entropic_025_EntropicFocus1","REQ_Destruction_Entropic_075_EntropicDisarray","REQ_Destruction_Battlemage_050_DestructiveBlow","REQ_Destruction_Battlemage_075_ImprovedCloaks","REQ_Destruction_BloodMagic_025_BloodMagic1","REQ_Destruction_BloodMagic_075_ConsumeLife"],ENC:["REQ_Enchanting_Enchantment_000_EnchantersInsight1","REQ_Enchanting_Enchantment_025_ElementalLore","REQ_Enchanting_Enchantment_050_CorpusLore","REQ_Enchanting_Enchantment_075_SkillLore","REQ_Enchanting_Enchantment_100_EnchantmentMastery","REQ_Enchanting_Artificer_025_SoulGemMastery","REQ_Enchanting_Artificer_050_ArcaneExperimentation","REQ_Enchanting_Artificer_075_ArtificersInsight","REQ_Enchanting_Artifact_100_ArtifactEnchanter","Feat_Perk_Skill_Enchanting_ArcaneArtificery1","Feat_Perk_Char_Enchanting_StaffChanneling1","REQ_Enchanting_50_WandMastery","ORD_Enc70_ChargeTap_Perk_70_OrdASISExclude","ORD_Enc90_YouShallNotPass_Perk_90_OrdASISExclude"],RES:["REQ_Restoration_Mastery_000_NoviceRestoration","REQ_Restoration_Mastery_025_ApprenticeRestoration","REQ_Restoration_Mastery_050_AdeptRestoration","REQ_Restoration_Mastery_075_ExpertRestoration","REQ_Restoration_Mastery_100_MasterRestoration","REQ_Restoration_Healing_025_ImprovedHealing","REQ_Restoration_Turning_075_MysticTurning","REQ_Restoration_Healing_075_Respite","REQ_Restoration_Protection_075_ImprovedWards","REQ_Restoration_Empower_025_EmpoweredRestoration","REQ_Restoration_Recovery_025_FocusedMind","REQ_Restoration_Recovery_050_PowerOfLife","REQ_Restoration_Recovery_075_EssenceOfLife","REQ_Restoration_PainfulRegrets_000_PainfulRegrets","REQ_Restoration_Venomancy_025_Venomancy","REQ_Restoration_Venomancy_075_ParalyzingPoison","REQ_Restoration_Heliomancy_025_Heliomancy","REQ_Restoration_Heliomancy_075_ScorchingLight","REQ_Restoration_Turning_025_ImprovedTurning","REQ_Restoration_Protection_025_ImprovedProtection","Feat_Perk_Skill_Restoration_WardMastery1"],MYS:["REQ_Illusion_Mastery_000_NovicelIllusion","REQ_Illusion_Perceptual_025_PerceptualIllusions","REQ_Illusion_Perceptual_050_EnvironmentalManipulation","REQ_Illusion_Shadow_050_ShadowShaping","REQ_Illusion_Delusive_075_ObliterateTheMind","REQ_Illusion_Emotional_025_EmotionalIllusions","REQ_Illusion_Emotional_050_Domination","REQ_Illusion_Delusive_050_DelusiveIllusions","REQ_Illusion_Mastery_025_ApprenticeIllusion","REQ_Illusion_Mastery_050_AdeptIllusion","REQ_Illusion_Mastery_075_ExpertIllusion","REQ_Illusion_Mastery_100_MasterIllusion","REQ_Illusion_Empower_025_EmpoweredIllusion","REQ_Illusion_Shadow_075_MasterOfShadows","REQ_Illusion_Emotional_050_Mesmerize","REQ_Illusion_Perceptual_050_DeceptiveImage","REQ_Illusion_Delusive_075_Curse","REQ_Illusion_Shadow_075_ShadowsOfConflict"],CNJ:["REQ_Conjuration_Mastery_000_NoviceConjuration","REQ_Conjuration_Mastery_025_ApprenticeConjuration","REQ_Conjuration_Mastery_050_AdeptConjuration","REQ_Conjuration_Mastery_075_ExpertConjuration","REQ_Conjuration_Mastery_100_MasterConjuration","REQ_Conjuration_Empower_025_EmpoweredConjuration","REQ_Conjuration_Empower_050_CognitiveFlexibility1","REQ_Conjuration_Necromancy_025_Necromancy","REQ_Conjuration_Necromancy_050_Ritualism","REQ_Conjuration_Necromancy_075_DarkInfusion","REQ_Conjuration_Bound_025_MysticBinding","REQ_Conjuration_Bound_050_MysticInfusion","REQ_Conjuration_Bound_075_MysticEmpowerment","REQ_Conjuration_Bound_100_MysticDisruption","REQ_Conjuration_Daedric_025_DaedricBinding","REQ_Conjuration_Daedric_050_GatesOfOblivion","REQ_Conjuration_Daedric_075_WatersOfOblivion","REQ_Conjuration_Spirit_075_AncientSpirits","REQ_Conjuration_Spirit_025_SpiritCalling","REQ_Conjuration_Spirit_050_SpiritualBond","REQ_Conjuration_Spirit_050_SpiritGuardian","REQ_Conjuration_Necromancy_050_SiphonCorpse","REQ_Conjuration_Daedric_050_DarkChanneling","REQ_Conjuration_SoulMagic_025_SoulMagic","REQ_Conjuration_SoulMagic_075_Necropotence"],ALT:["REQ_Alteration_Mastery_000_NoviceAlteration","REQ_Alteration_Mastery_025_ApprenticeAlteration","REQ_Alteration_Mastery_050_AdeptAlteration","REQ_Alteration_Mastery_075_ExpertAlteration","REQ_Alteration_Mastery_100_MasterAlteration","REQ_Alteration_MagicalAbsorption_100_MagicalAbsorption","REQ_Alteration_MageArmor_050_VersatileArmor","REQ_Alteration_Metamagic_050_Stability","REQ_Alteration_Metamagic_075_MetamagicalThesis","REQ_Alteration_Metamagic_100_MetamagicalEmpowerment","REQ_Alteration_MageArmor_025_ImprovedMageArmor","REQ_Alteration_Empower_025_EmpoweredAlteration","REQ_Alteration_MagicResistance_025_MagicResistance1","REQ_Alteration_Transmutation_025_Transmutation","REQ_Alteration_Transmutation_075_TransmutationalMending","REQ_Alteration_Kinetomancy_025_Kinetomancy","REQ_Alteration_Kinetomancy_075_PowerOfTheForce","REQ_Alteration_WeatherMagic_050_WeatherMagic","REQ_Alteration_WeatherMagic_075_MasterOfStorms","Feat_Perk_Char_Alteration_UnskilledSpellcasting1","Feat_Perk_Char_Alteration_Metamagic1","Feat_Perk_Char_Alteration_Willpower1"],SPC:["REQ_Speech_Haggling","REQ_Speech_Merchant","REQ_Speech_Fencing","REQ_Speech_SilverTongue","REQ_Speech_Masquerade1","REQ_Speech_Leadership","REQ_Speech_LoreOfTheThuum","REQ_Speech_TonguesInsight","REQ_Speech_SpritiualEquilibirum","REQ_Speech_IndomitableForce","REQ_Speech_DestructiveUrge","REQ_Speech_TheWayOfTheVoice","Feat_Perk_Skill_Speechcraft_Commander1","Feat_Perk_Char_Speechcraft_ShoutFocus1","Feat_Perk_Skill_Speechcraft_WarCry","BOOB_BoozyBardPerk","BOOB_SkaldPerk","BOOB_BattleMusePerk","BOOB_StandingOvationPerk","BOOB_WindborneMelodyPerk","BOOB_SymphonyofStormsPerk","BOOB_SongOfPowerPerk","BOOB_EtherealEchoPerk"],ALC:["REQ_Alchemy_AlchemicalLore1","REQ_Alchemy_ImprovedElixirs","REQ_Alchemy_Catalysis1","REQ_Alchemy_Immunization","REQ_Alchemy_PurificationProcess","REQ_Alchemy_FortifiedMuscles","REQ_Alchemy_AlchemicalIntellect","REQ_Alchemy_NightVision","REQ_Alchemy_Regeneration","REQ_Alchemy_ConcentratedPoisons","REQ_Alchemy_ImprovedPoisons","Feat_Perk_Char_Alchemy_DrunkenCombat1","Feat_Perk_Char_Alchemy_Gourmet1","Feat_Perk_Char_Alchemy_Herbalist1","ORD_Alc60_Alkahest_Perk_60","ORD_Alc90_WorldSerpent_Perk_90_OrdASISExclude"],SNK:["REQ_Sneak_Mastery_000_Stealth1","REQ_Sneak_Assassin_025_DeftStrike","REQ_Sneak_Assassin_050_AnatomicalLore","REQ_Sneak_Assassin_075_AdvancedAnatomicalLore","REQ_Sneak_Mastery_025_MuffledMovement","REQ_Sneak_Mastery_050_LightSteps","REQ_Sneak_Mastery_075_Acrobatics","REQ_Sneak_Mastery_100_Shadowrunner","Feat_Perk_Skill_Sneak_ArcaneAssassin1","ORD_Sne80_ProblemSolver_Perk_80","ORD_Sne30_FogOfWar_Perk_30_OrdASISExclude","ORD_Sne20_Tripwire_Perk_20_OrdASISExclude","ORD_Sne40_Whiplash_Perk_40_OrdASISExclude","ORD_Sne90_CloakAndDagger_Perk_90"],LCK:["REQ_Lockpicking_00_Looter","REQ_Lockpicking_30_LoneWolf","REQ_Lockpicking_50_Solo","REQ_Lockpicking_70_Maverick","REQ_Lockpicking_100_OneManLegion","REQ_Lockpicking_25_Locksmith","REQ_Lockpicking_40_TreasureHunter","REQ_Lockpicking_60_ExtraPocketsReplacer","REQ_Lockpicking_90_VeteranDelver","REQ_Lockpicking_30_Leader","REQ_Lockpicking_50_Captain","REQ_Lockpicking_70_Commander","REQ_Lockpicking_100_Legion","BBWayfarerTaming","BBWayfarerFood","BBWayfarer1","ORD_Loc30_Lockdown_Perk_30_OrdASISExclude","ORD_Loc50_Hotwire_Perk_50_OrdASISExclude","ORD_Loc90_PercussiveMaintenance_Perk_90_OrdASISExclude"],PKP:["REQ_Pickpocket_Mastery_000_NimbleFingers1","REQ_Pickpocket_20_Outlaw1","REQ_Pickpocket_50_Thief","REQ_Pickpocket_77_Lucky","REQ_Pickpocket_30_Cutpurse","REQ_Pickpocket_50_NightThief","REQ_Pickpocket_70_Misdirection","REQ_Pickpocket_100_PerfectTouch","REQ_Pickpocket_30_Sound_Body","Req_Pickpocket_60_Sound_Mind","REQ_Pickpocket_80_Sound_Spirit","LoreRimTrapper_Rank1","LoreRimTrapper_Rank2","LoreRimTrapper_Rank3","REQ_Pickpocket_25_Pocket_sand","REQ_Pickpocket_50_quick_sand","ORD_Pic90_Mutiny_Perk_90_OrdASISExclude","ORD_Pic40_DeathsEmperor_Perk_40_OrdASISExclude","ORD_Pic50_LawlessWorld_Perk_50_OrdASISExclude"],LAR:["REQ_Evasion_Agility","REQ_Evasion_Finesse","REQ_Evasion_CombatReflexes","REQ_Evasion_MeteoricReflexes","REQ_Evasion_Dexterity","REQ_Evasion_WindWalker","REQ_Evasion_VexingFlanker","REQ_Evasion_Dodge","REQ_Evasion_AgileSpellcasting","Feat_Perk_Skill_Evasion_Unarmored1","Feat_Perk_Skill_Evasion_Athletics1","ORD_Lia20_AnnoyingMosquitoes_Perk_20","ORD_Lia60_EvasiveLeap_Perk_60_OrdASISExclude","ORD_Lia30_AsALeaf_Perk_30"],HAR:["REQ_HeavyArmor_Conditioning","REQ_HeavyArmor_CombatCasting","REQ_HeavyArmor_CombatTrance","REQ_HeavyArmor_CombatMeditation","REQ_HeavyArmor_BattleMage","REQ_HeavyArmor_CombatTraining","REQ_HeavyArmor_Fortitude","REQ_HeavyArmor_PowerOfTheCombatant","REQ_HeavyArmor_Juggernaut","REQ_HeavyArmor_RelentlessOnslaught","Feat_Perk_Skill_HeavyArmor_DevastatingTackle1","Feat_Perk_Skill_HeavyArmor_Immovable1","Feat_Perk_Char_HeavyArmor_MountedCombat1","ORD_Hea20_Cushioned_Perk_50","ORD_Hea40_Defiance_Perk_40","ORD_Hea60_NeverKneel_Perk_60","ORD_Hea70_ReapTheWhirlwind_Perk_70_OrdASISExclude"],BLK:["REQ_Block_ImprovedBlocking","REQ_Block_StrongGrip","REQ_Block_ElementalProtection","REQ_Block_DefensiveStance","REQ_Block_UnstoppableCharge","REQ_Block_PowerfulBashes","REQ_Block_OverpoweringBashes","REQ_Block_DisarmingBash","REQ_Block_ExperiencedBlocking","Feat_Perk_Skill_Block_ShieldStrike1","Feat_Perk_Skill_Block_TorchCombat1","REQ_WeaponsMaster1","REQ_PenetratingStrikes_Master","REQ_Block_Shortsword"],MRK:["REQ_Marksmanship_RangedCombatTraining","REQ_Marksmanship_EagleEye","REQ_Marksmanship_MarksmansFocus","REQ_Marksmanship_QuickShot","REQ_Marksmanship_RapidReload","REQ_Marksmanship_PowerShot","REQ_Marksmanship_StunningPrecision","REQ_Marksmanship_PreciseAim","REQ_Marksmanship_PiercingShot","REQ_Marksmanship_PenetratingShot","REQ_Marksmanship_Ranger","REQ_Marksmanship_Sniper","REQ_Marksmanship_HiddenBlade","REQ_Marksmanship_SharpThrow","Feat_Perk_Char_Markmanship_Hunter1","Feat_Perk_Skill_Marksmanship_BowStrike1","ORD_Arc30_FocusOnThePrey_Perk_30_OrdASISExclude","ORD_Arc75_ThreeCrows_Perk_75_OrdASISExclude","ORD_Arc90_LionsArrow_Perk_90_OrdASISExclude"],TWH:["REQ_TwoHanded_GreatWeaponMastery1","REQ_TwoHanded_BarbaricMight","REQ_TwoHanded_DevastatingStrike","REQ_TwoHanded_Cleave","REQ_TwoHanded_DevastatingCleave","REQ_TwoHanded_MightyStrike","REQ_TwoHanded_DevastatingCharge","REQ_TwoHanded_BattleAxeFocus1","REQ_TwoHanded_GreatswordFocus1","REQ_TwoHanded_WarhammerFocus1","REQ_TwoHanded_QuarterstaffFocus1","REQ_TwoHanded_Greatsword_ReverseSlash","REQ_TwoHanded_Warhammer_Onslaught","REQ_TwoHanded_Battleaxe_ShieldBreaker","ORD_Two90_BearHide_Perk_90","ORD_Two50_Execute_Perk_50_OrdASISExclude","REQ_TwoHanded_Quarterstaff_DefensiveStrike","ORD_Two70_GrandSlam_Perk_70_OrdASISExclude","ORD_Two60_DeathOrGlory_Perk_60"],OHD:["REQ_OneHanded_WeaponMastery1","REQ_OneHanded_PenetratingStrikes","REQ_OneHanded_PowerfulStrike","REQ_OneHanded_StunningCharge","REQ_OneHanded_PowerfulCharge","REQ_OneHanded_WarAxeFocus1","REQ_OneHanded_MaceFocus1","REQ_OneHanded_SwordFocus1","REQ_OneHanded_Flurry1","REQ_OneHanded_StormOfSteel","REQ_OneHanded_HandToHand","REQ_OneHanded_DaggerFocus1","REQ_OneHanded_Sword_DisarmingBlade","REQ_OneHanded_Mace_StunningBlow","REQ_OneHanded_WarAxe_Armsbreaker","REQ_OneHanded_Dagger_Puncture","REQ_OneHanded_Grapple_Grappling","REQ_OneHanded_Grapple_Takedown","REQ_OneHanded_Unarmed_UnarmedDefense","REQ_OneHanded_Unarmed_UnarmedStance","Feat_Perk_Skill_Onehanded_BalancedWielding1","Feat_Perk_Skill_OneHanded_ArmedSpellcasting1","SWORDORD_One60_DeathOrGlory_Perk_60","MACEORD_One70_GrandSlam_Perk_70_OrdASISExclude","AXEORD_One50_Execute_Perk_50_OrdASISExclude","DAGGERORD_One70_DeathAdder_Perk_70_OrdASISExclude"]},Pm={AVSmithing:"SMG",AVDestruction:"DST",AVEnchanting:"ENC",AVRestoration:"RES",AVMysticism:"MYS",AVConjuration:"CNJ",AVAlteration:"ALT",AVSpeechcraft:"SPC",AVAlchemy:"ALC",AVSneak:"SNK",AVLockpicking:"LCK",AVPickpocket:"PKP",AVLightArmor:"LAR",AVHeavyArmor:"HAR",AVBlock:"BLK",AVMarksman:"MRK",AVTwoHanded:"TWH",AVOneHanded:"OHD"},Ek=Object.fromEntries(Object.entries(Pm).map(([e,t])=>[t,e])),k0=PL;function LL(){const e=Object.values(Pm).filter(t=>!(t in k0));if(e.length>0)throw new Error(`Missing perk catalogs for: ${e.join(", ")}`)}LL();const Ak=["AVSmithing","AVDestruction","AVEnchanting","AVRestoration","AVMysticism","AVConjuration","AVAlteration","AVSpeechcraft","AVAlchemy","AVSneak","AVLockpicking","AVPickpocket","AVLightArmor","AVHeavyArmor","AVBlock","AVMarksman","AVTwoHanded","AVOneHanded"],zL=Object.fromEntries(Ak.map((e,t)=>[e,t]));function S0(e){return zL[e]??null}function _0(e){return Ak[e]??null}function wf(e){return e.map(S0).filter(t=>t!==null)}function Eb(e){return e.map(_0).filter(t=>t!==null)}function OL(e){const t={};for(const[s,n]of Object.entries(e)){const a=S0(s);a!==null&&(t[a]=n)}return t}function BL(e){const t={};for(const[s,n]of Object.entries(e)){const a=parseInt(s,10),i=_0(a);i!==null&&(t[i]=n)}return t}function Rk(e){return OL(e)}function IL(e){return BL(e)}function Tk(e){const t={};for(const[s,n]of Object.entries(e)){const a=Ek[s];if(a){const i=S0(a);i!==null&&(t[i]=n)}}return t}function $L(e){const t={};for(const[s,n]of Object.entries(e)){const a=parseInt(s,10),i=_0(a);if(i){const o=Pm[i];o&&(t[o]=n)}}return t}const Mk={LoreTraits_AcousticArcanistAb:0,LoreTraits_ArcaneScholarAb:1,LoreTraits_ArcaneTheurgeAb:2,LoreTraits_ArcanistAb:3,LoreTraits_ArtificerAb:4,LoreTraits_BloodMageAb:5,LoreTraits_ChronomancerAb:6,LoreTraits_ConjurerAb:7,LoreTraits_DivinerAb:8,LoreTraits_ElementalistAb:9,LoreTraits_EnchanterAb:10,LoreTraits_GeomancerAb:11,LoreTraits_HydromancerAb:12,LoreTraits_IllusionistAb:13,LoreTraits_MageAb:14,LoreTraits_MysticAb:15,LoreTraits_NecromancerAb:16,LoreTraits_PyromancerAb:17,LoreTraits_RitualistAb:18,LoreTraits_RuneMasterAb:19,LoreTraits_ShamanAb:20,LoreTraits_SpellswordAb:21,LoreTraits_SummonerAb:22,LoreTraits_ThaumaturgeAb:23,LoreTraits_WarlockAb:24,LoreTraits_WitchAb:25,LoreTraits_WizardAb:26,Traits_AdrenalineRushAb:27,Traits_AnglerAb:28,Traits_ArcherAb:29,Traits_BarbarianAb:30,Traits_BerserkerAb:31,Traits_BlademasterAb:32,Traits_BrawlerAb:33,Traits_ChampionAb:34,Traits_DefenderAb:35,Traits_DuelistAb:36,Traits_ExecutionerAb:37,Traits_FighterAb:38,Traits_GladiatorAb:39,Traits_GuardianAb:40,Traits_HunterAb:41,Traits_KnightAb:42,Traits_MarksmanAb:43,Traits_MercenaryAb:44,Traits_PaladinAb:45,Traits_RangerAb:46,Traits_SoldierAb:47,Traits_SwordsmanAb:48,Traits_TacticianAb:49,Traits_VanguardAb:50,Traits_WarriorAb:51,Traits_WeaponmasterAb:52,Traits_AssassinAb:53,Traits_BanditAb:54,Traits_BurglarAb:55,Traits_CatBurglarAb:56,Traits_CutpurseAb:57,Traits_InfiltratorAb:58,Traits_NinjaAb:59,Traits_PickpocketAb:60,Traits_PoisonerAb:61,Traits_RogueAb:62,Traits_ScoutAb:63,Traits_ShadowAb:64,Traits_SneakAb:65,Traits_SpyAb:66,Traits_ThiefAb:67,Traits_TricksterAb:68,Traits_MasterofDestinyAb:69,Traits_SkilledAb:70,Traits_SoulEmbedAb:71,Traits_NosferatuAb:72,Traits_VampireAb:73,Traits_WerewolfAb:74,Traits_DragonbornAb:75,Traits_ChosenAb:76,Traits_ProphetAb:77,Traits_SaintAb:78,Traits_HeroAb:79,Traits_LegendAb:80},FL=Object.fromEntries(Object.entries(Mk).map(([e,t])=>[t,e]));function HL(e){return Mk[e]}function UL(e){return FL[e]}function Nf(e){return e.map(t=>HL(t)).filter(t=>t!==void 0)}function Ab(e){return e.map(t=>UL(t)).filter(t=>t!==void 0)}function GL(e){if(!(e!=null&&e.selected))return{};const t={};for(const[s,n]of Object.entries(e.selected)){const a=Pm[s];if(!a){console.warn(`Unknown skill tree ID: ${s}`);continue}const i=k0[a];if(!i){console.warn(`No catalog found for skill code: ${a}`);continue}const o=[];for(const l of n){const c=i.indexOf(l);c!==-1?o.push(c):console.warn(`Perk EDID not found in catalog: ${l} for skill ${a}`)}o.length>0&&(t[a]=o.sort((l,c)=>l-c))}return t}function Dk(e){const t={},s={};for(const[n,a]of Object.entries(e)){const i=Ek[n];if(!i){console.warn(`Unknown skill code: ${n}`);continue}const o=k0[n];if(!o){console.warn(`No catalog found for skill code: ${n}`);continue}const l=[];for(const c of a)if(c>=0&&c<o.length){const u=o[c];l.push(u),s[u]=1}else console.warn(`Invalid perk index: ${c} for skill ${n}`);l.length>0&&(t[i]=l)}return{selected:t,ranks:s}}function VL(e){return"p"in e&&!("perks"in e)}function qL(e){return{v:2,n:e.name,o:e.notes,r:e.race?Ck(e.race):null,s:e.stone?kk(e.stone):null,g:e.religion?bf(e.religion):null,f:e.favoriteBlessing?bf(e.favoriteBlessing):null,t:{r:Nf(e.traits.regular),b:Nf(e.traits.bonus)},...e.traitLimits.regular!==2||e.traitLimits.bonus!==1?{l:[e.traitLimits.regular,e.traitLimits.bonus]}:{},k:{ma:wf(e.skills.major),mi:wf(e.skills.minor)},sl:Rk(e.skillLevels),e:e.equipment,d:_k(e.destinyPath),a:{h:e.attributeAssignments.health,st:e.attributeAssignments.stamina,m:e.attributeAssignments.magicka,l:e.attributeAssignments.level},p:Tk(GL(e.perks))}}function QL(e){return{v:2,n:e.name,o:e.notes,r:e.race?Ck(e.race):null,s:e.stone?kk(e.stone):null,g:e.religion?bf(e.religion):null,f:e.favoriteBlessing?bf(e.favoriteBlessing):null,t:{r:Nf(e.traits.regular),b:Nf(e.traits.bonus)},...e.traitLimits.regular!==2||e.traitLimits.bonus!==1?{l:[e.traitLimits.regular,e.traitLimits.bonus]}:{},k:{ma:wf(e.skills.major),mi:wf(e.skills.minor)},sl:Rk(e.skillLevels),e:e.equipment,d:_k(e.destinyPath),a:{h:e.attributeAssignments.health,st:e.attributeAssignments.stamina,m:e.attributeAssignments.magicka,l:e.attributeAssignments.level},p:Tk(e.p)}}function ZL(e){var t,s;return{v:2,name:e.n,notes:e.o,race:e.r!==null?ML(e.r):null,stone:e.s!==null?SL(e.s):null,religion:e.g!==null?Cb(e.g):null,favoriteBlessing:e.f!==null?Cb(e.f):null,traits:{regular:Ab(e.t.r),bonus:Ab(e.t.b)},traitLimits:{regular:((t=e.l)==null?void 0:t[0])??2,bonus:((s=e.l)==null?void 0:s[1])??1},skills:{major:Eb(e.k.ma),minor:Eb(e.k.mi)},skillLevels:IL(e.sl),equipment:e.e,userProgress:{unlocks:[]},destinyPath:AL(e.d),attributeAssignments:{health:e.a.h,stamina:e.a.st,magicka:e.a.m,level:e.a.l},perks:Dk($L(e.p))}}function WL(e){return j0(e)?e:jL(e)?QL(e):qL(e)}function C0(e){return NL(e)?e:j0(e)?ZL(e):{...e,perks:Dk(e.p)}}function ii(e){var s,n,a,i,o,l,c,u,d,f,m,g,b;return e?j0(e)?C0(e):{v:e.v||1,name:e.name||"",notes:e.notes||"",race:id(e.race),stone:id(e.stone),religion:id(e.religion),favoriteBlessing:id(e.favoriteBlessing),skills:{major:sr((s=e.skills)==null?void 0:s.major),minor:sr((n=e.skills)==null?void 0:n.minor)},traits:{regular:sr((a=e.traits)==null?void 0:a.regular),bonus:sr((i=e.traits)==null?void 0:i.bonus)},traitLimits:{regular:ao((o=e.traitLimits)==null?void 0:o.regular,2),bonus:ao((l=e.traitLimits)==null?void 0:l.bonus,1)},...VL(e)?{p:KL(e.p)}:{perks:{selected:XL((c=e.perks)==null?void 0:c.selected),ranks:Rb((u=e.perks)==null?void 0:u.ranks)}},skillLevels:Rb(e.skillLevels),equipment:sr(e.equipment),userProgress:{unlocks:sr((d=e.userProgress)==null?void 0:d.unlocks)},destinyPath:sr(e.destinyPath),attributeAssignments:{health:ao((f=e.attributeAssignments)==null?void 0:f.health,0),stamina:ao((m=e.attributeAssignments)==null?void 0:m.stamina,0),magicka:ao((g=e.attributeAssignments)==null?void 0:g.magicka,0),level:ao((b=e.attributeAssignments)==null?void 0:b.level,1)}}:YL()}function YL(){return{v:1,name:"",notes:"",race:null,stone:null,religion:null,favoriteBlessing:null,traits:{regular:[],bonus:[]},traitLimits:{regular:2,bonus:1},skills:{major:[],minor:[]},perks:{selected:{},ranks:{}},skillLevels:{},equipment:[],userProgress:{unlocks:[]},destinyPath:[],attributeAssignments:{health:0,stamina:0,magicka:0,level:1}}}function id(e){return typeof e=="string"&&e.trim()!==""?e.trim():null}function sr(e){return Array.isArray(e)?e.filter(t=>typeof t=="string"&&t.trim()!==""):[]}function ao(e,t){return typeof e=="number"&&!isNaN(e)&&isFinite(e)?e:t}function XL(e){if(e&&typeof e=="object"&&!Array.isArray(e)){const t={};for(const[s,n]of Object.entries(e))typeof s=="string"&&Array.isArray(n)&&(t[s]=sr(n));return t}return{}}function Rb(e){if(e&&typeof e=="object"&&!Array.isArray(e)){const t={};for(const[s,n]of Object.entries(e))typeof s=="string"&&typeof n=="number"&&!isNaN(n)&&isFinite(n)&&(t[s]=n);return t}return{}}function KL(e){if(e&&typeof e=="object"&&!Array.isArray(e)){const t={};for(const[s,n]of Object.entries(e))if(typeof s=="string"&&Array.isArray(n)){const a=n.filter(i=>typeof i=="number"&&i>=0&&Number.isInteger(i));a.length>0&&(t[s]=a)}return t}return{}}const va=fs((e,t)=>({build:_b,updateBuild:s=>{console.log("ðŸª updateBuild called with updates:",s),e(n=>{const a={...n.build,...s};console.log("ðŸª New build state:",a);const o=s.race!==void 0||s.stone!==void 0||s.religion!==void 0||s.favoriteBlessing!==void 0||s.traits!==void 0||s.skills!==void 0||s.destinyPath!==void 0||s.perks!==void 0||s.attributeAssignments!==void 0?ii(a):a;return console.log("ðŸª Final build state:",o),{build:o}})},setBuild:s=>e({build:ii(s)}),resetBuild:()=>e({build:_b}),setAttributePoints:(s,n)=>{e(a=>{const i={...a.build,attributeAssignments:{...a.build.attributeAssignments,[s]:Math.max(0,n)}};return{build:ii(i)}})},clearAllAttributeAssignments:()=>{e(s=>{const n={...s.build,attributeAssignments:{health:0,stamina:0,magicka:0,level:s.build.attributeAssignments.level}};return{build:ii(n)}})},updateAttributeLevel:s=>{e(n=>{const a={...n.build,attributeAssignments:{...n.build.attributeAssignments,level:Math.max(1,s)}};return{build:ii(a)}})}}));function Ye(){const e=va(V=>V.build.skills.major),t=va(V=>V.build.skills.minor),s=va(V=>V.build),n=va(V=>V.updateBuild),a=va(V=>V.resetBuild),i=V=>(e==null?void 0:e.includes(V))??!1,o=V=>(t==null?void 0:t.includes(V))??!1;return{build:s,majorSkills:e,minorSkills:t,hasMajorSkill:i,hasMinorSkill:o,addMajorSkill:V=>{const q=e??[],X=t??[];if(!i(V)&&(q==null?void 0:q.length)<3){const le=X==null?void 0:X.filter(J=>J!==V),se={major:[...q,V],minor:le};n({skills:se})}},removeMajorSkill:V=>{const q=e??[],X=t??[],le=q==null?void 0:q.filter(se=>se!==V);n({skills:{major:le,minor:X}})},addMinorSkill:V=>{const q=e??[],X=t??[];if(!o(V)&&(X==null?void 0:X.length)<6){const le=q==null?void 0:q.filter(se=>se!==V);n({skills:{major:le,minor:[...X,V]}})}},removeMinorSkill:V=>{const q=e??[],le=(t??[]).filter(se=>se!==V);n({skills:{major:q,minor:le}})},addPerk:(V,q)=>{var se;console.log("âž• addPerk called:",{skillId:V,perkId:q});const X=((se=s==null?void 0:s.perks)==null?void 0:se.selected)??{},le=X[V]??[];if(console.log("ðŸ“‹ Current skill perks:",le),le.includes(q))console.log("âš ï¸ Perk already in skill perks, skipping");else{console.log("âœ… Adding perk to skill perks");const J={...s==null?void 0:s.perks,selected:{...X,[V]:[...le,q]}},Se=fc(J);n({perks:J,skillLevels:Se}),console.log("ðŸ”„ Build updated with new perk")}},removePerk:(V,q)=>{var et;const X=((et=s==null?void 0:s.perks)==null?void 0:et.selected)??{},se=(X[V]??[]).filter(Mt=>Mt!==q),J={...s==null?void 0:s.perks,selected:{...X,[V]:se}},Se=fc(J);n({perks:J,skillLevels:Se})},setPerkRank:(V,q)=>{var J;console.log("ðŸ“ˆ setPerkRank called:",{perkId:V,rank:q});const X=((J=s==null?void 0:s.perks)==null?void 0:J.ranks)??{};console.log("ðŸ“Š Current ranks:",X);const le={...s==null?void 0:s.perks,ranks:{...X,[V]:q}},se=fc(le);n({perks:le,skillLevels:se}),console.log("ðŸ”„ Build updated with new rank")},clearSkillPerks:V=>{var Mt,gs;const q=((Mt=s==null?void 0:s.perks)==null?void 0:Mt.selected)??{},X=((gs=s==null?void 0:s.perks)==null?void 0:gs.ranks)??{},{[V]:le,...se}=q,J={...X};le&&le.forEach(ps=>{delete J[ps]});const Se={...s==null?void 0:s.perks,selected:se,ranks:J},et=fc(Se);n({perks:Se,skillLevels:et})},getSkillPerks:V=>{var q,X;return((X=(q=s==null?void 0:s.perks)==null?void 0:q.selected)==null?void 0:X[V])??[]},getPerkRank:V=>{var q,X;return((X=(q=s==null?void 0:s.perks)==null?void 0:q.ranks)==null?void 0:X[V])??0},getSkillLevel:V=>s?wL(V,s):0,getStartingSkillLevel:V=>s?Mm(V,s):0,addTrait:V=>{const{regular:q=[],bonus:X=[]}=(s==null?void 0:s.traits)??{regular:[],bonus:[]},{regular:le=2,bonus:se=1}=(s==null?void 0:s.traitLimits)??{regular:2,bonus:1};q.length<le?n({traits:{...s==null?void 0:s.traits,regular:[...q,V]}}):X.length<se&&n({traits:{...s==null?void 0:s.traits,bonus:[...X,V]}})},addRegularTrait:V=>{const{regular:q=[]}=(s==null?void 0:s.traits)??{regular:[]},{regular:X=2}=(s==null?void 0:s.traitLimits)??{regular:2};q.length<X&&n({traits:{...s==null?void 0:s.traits,regular:[...q,V]}})},addBonusTrait:V=>{const{bonus:q=[]}=(s==null?void 0:s.traits)??{bonus:[]},{bonus:X=1}=(s==null?void 0:s.traitLimits)??{bonus:1};q.length<X&&n({traits:{...s==null?void 0:s.traits,bonus:[...q,V]}})},removeTrait:V=>{const{regular:q=[],bonus:X=[]}=(s==null?void 0:s.traits)??{regular:[],bonus:[]};n({traits:{regular:q.filter(le=>le!==V),bonus:X.filter(le=>le!==V)}})},hasTrait:V=>{var q,X,le,se;return(((X=(q=s==null?void 0:s.traits)==null?void 0:q.regular)==null?void 0:X.includes(V))??!1)||(((se=(le=s==null?void 0:s.traits)==null?void 0:le.bonus)==null?void 0:se.includes(V))??!1)},hasRegularTrait:V=>{var q,X;return((X=(q=s==null?void 0:s.traits)==null?void 0:q.regular)==null?void 0:X.includes(V))??!1},hasBonusTrait:V=>{var q,X;return((X=(q=s==null?void 0:s.traits)==null?void 0:q.bonus)==null?void 0:X.includes(V))??!1},setRace:V=>{n({race:V})},setBirthsign:V=>{n({stone:V})},setStone:V=>{n({stone:V})},setReligion:V=>{n({religion:V})},setFavoriteBlessing:V=>{n({favoriteBlessing:V})},addEquipment:V=>{const q=(s==null?void 0:s.equipment)??[];q.includes(V)||n({equipment:[...q,V]})},removeEquipment:V=>{const q=(s==null?void 0:s.equipment)??[];n({equipment:q.filter(X=>X!==V)})},setBuildName:V=>{n({name:V})},setBuildNotes:V=>{n({notes:V})},getDestinyPath:()=>(s==null?void 0:s.destinyPath)??[],setDestinyPath:V=>{n({destinyPath:V})},updateBuild:n,clearBuild:()=>{n(ii({name:"",notes:"",race:null,stone:null,religion:null,skills:{major:[],minor:[]},traits:{regular:[],bonus:[]},perks:{selected:{},ranks:{}},skillLevels:{},destinyPath:[]}))},resetBuild:a,getSummary:()=>{var V,q,X,le,se,J,Se,et,Mt;return{name:(s==null?void 0:s.name)||"Unnamed Character",race:(s==null?void 0:s.race)||"Not selected",stone:(s==null?void 0:s.stone)||"Not selected",religion:(s==null?void 0:s.religion)||"Not selected",traitCount:(((q=(V=s==null?void 0:s.traits)==null?void 0:V.regular)==null?void 0:q.length)??0)+(((le=(X=s==null?void 0:s.traits)==null?void 0:X.bonus)==null?void 0:le.length)??0),majorSkillCount:((J=(se=s==null?void 0:s.skills)==null?void 0:se.major)==null?void 0:J.length)??0,minorSkillCount:((et=(Se=s==null?void 0:s.skills)==null?void 0:Se.minor)==null?void 0:et.length)??0,equipmentCount:((Mt=s==null?void 0:s.equipment)==null?void 0:Mt.length)??0}},getRegularTraitLimit:()=>{var V;return((V=s==null?void 0:s.traitLimits)==null?void 0:V.regular)??2},getBonusTraitLimit:()=>{var V;return((V=s==null?void 0:s.traitLimits)==null?void 0:V.bonus)??1},getRegularTraitCount:()=>{var V,q;return((q=(V=s==null?void 0:s.traits)==null?void 0:V.regular)==null?void 0:q.length)??0},getBonusTraitCount:()=>{var V,q;return((q=(V=s==null?void 0:s.traits)==null?void 0:V.bonus)==null?void 0:q.length)??0},canAddRegularTrait:()=>{var V,q,X;return(((q=(V=s==null?void 0:s.traits)==null?void 0:V.regular)==null?void 0:q.length)??0)<(((X=s==null?void 0:s.traitLimits)==null?void 0:X.regular)??2)},canAddBonusTrait:()=>{var V,q,X;return(((q=(V=s==null?void 0:s.traits)==null?void 0:V.bonus)==null?void 0:q.length)??0)<(((X=s==null?void 0:s.traitLimits)==null?void 0:X.bonus)??1)},getTraitType:V=>{var q,X,le,se;return(X=(q=s==null?void 0:s.traits)==null?void 0:q.regular)!=null&&X.includes(V)?"regular":(se=(le=s==null?void 0:s.traits)==null?void 0:le.bonus)!=null&&se.includes(V)?"bonus":null},isAllTraitsFull:()=>{var se,J,Se,et,Mt,gs;const V=((J=(se=s==null?void 0:s.traits)==null?void 0:se.regular)==null?void 0:J.length)??0,q=((et=(Se=s==null?void 0:s.traits)==null?void 0:Se.bonus)==null?void 0:et.length)??0,X=((Mt=s==null?void 0:s.traitLimits)==null?void 0:Mt.regular)??2,le=((gs=s==null?void 0:s.traitLimits)==null?void 0:gs.bonus)??1;return V>=X&&q>=le},addTraitToSlot:(V,q)=>{if(q==="regular"){const{regular:X=[]}=(s==null?void 0:s.traits)??{regular:[]},{regular:le=2}=(s==null?void 0:s.traitLimits)??{regular:2};if(X.length<le){const{bonus:se=[]}=(s==null?void 0:s.traits)??{bonus:[]},J=se.filter(Se=>Se!==V);n({traits:{regular:[...X,V],bonus:J}})}}else{const{bonus:X=[]}=(s==null?void 0:s.traits)??{bonus:[]},{bonus:le=1}=(s==null?void 0:s.traitLimits)??{bonus:1};if(X.length<le){const{regular:se=[]}=(s==null?void 0:s.traits)??{regular:[]},J=se.filter(Se=>Se!==V);n({traits:{regular:J,bonus:[...X,V]}})}}},isSlotAvailable:(V,q=0)=>{var X,le,se,J;return V==="regular"?(((le=(X=s==null?void 0:s.traits)==null?void 0:X.regular)==null?void 0:le.length)??0)<=q:(((J=(se=s==null?void 0:s.traits)==null?void 0:se.bonus)==null?void 0:J.length)??0)<=q}}}function Tb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Lm(...e){return t=>{let s=!1;const n=e.map(a=>{const i=Tb(a,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Tb(e[a],null)}}}}function He(...e){return h.useCallback(Lm(...e),e)}function el(e){const t=ez(e),s=h.forwardRef((n,a)=>{const{children:i,...o}=n,l=h.Children.toArray(i),c=l.find(sz);if(c){const u=c.props.children,d=l.map(f=>f===c?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:f);return r.jsx(t,{...o,ref:a,children:h.isValidElement(u)?h.cloneElement(u,void 0,d):null})}return r.jsx(t,{...o,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}var JL=el("Slot");function ez(e){const t=h.forwardRef((s,n)=>{const{children:a,...i}=s;if(h.isValidElement(a)){const o=az(a),l=nz(i,a.props);return a.type!==h.Fragment&&(l.ref=n?Lm(n,o):o),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Pk=Symbol("radix.slottable");function tz(e){const t=({children:s})=>r.jsx(r.Fragment,{children:s});return t.displayName=`${e}.Slottable`,t.__radixId=Pk,t}function sz(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Pk}function nz(e,t){const s={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function az(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function Lk(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=Lk(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function zk(){for(var e,t,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=Lk(e))&&(n&&(n+=" "),n+=t);return n}const Mb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Db=zk,Ml=(e,t)=>s=>{var n;if((t==null?void 0:t.variants)==null)return Db(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=s==null?void 0:s[u],f=i==null?void 0:i[u];if(d===null)return null;const m=Mb(d)||Mb(f);return a[u][m]}),l=s&&Object.entries(s).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:m,...g}=d;return Object.entries(g).every(b=>{let[y,v]=b;return Array.isArray(v)?v.includes({...i,...l}[y]):{...i,...l}[y]===v})?[...u,f,m]:u},[]);return Db(e,o,c,s==null?void 0:s.class,s==null?void 0:s.className)},E0="-",rz=e=>{const t=oz(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(E0);return l[0]===""&&l.length!==1&&l.shift(),Ok(l,t)||iz(o)},getConflictingClassGroupIds:(o,l)=>{const c=s[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},Ok=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const s=e[0],n=t.nextPart.get(s),a=n?Ok(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(E0);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Pb=/^\[(.+)\]$/,iz=e=>{if(Pb.test(e)){const t=Pb.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},oz=e=>{const{theme:t,classGroups:s}=e,n={nextPart:new Map,validators:[]};for(const a in s)yp(s[a],n,a,t);return n},yp=(e,t,s,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:Lb(t,a);i.classGroupId=s;return}if(typeof a=="function"){if(lz(a)){yp(a(n),t,s,n);return}t.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([i,o])=>{yp(o,Lb(t,i),s,n)})})},Lb=(e,t)=>{let s=e;return t.split(E0).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},lz=e=>e.isThemeGetter,cz=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,n=new Map;const a=(i,o)=>{s.set(i,o),t++,t>e&&(t=0,n=s,s=new Map)};return{get(i){let o=s.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){s.has(i)?s.set(i,o):a(i,o)}}},vp="!",bp=":",uz=bp.length,dz=e=>{const{prefix:t,experimentalParseClassName:s}=e;let n=a=>{const i=[];let o=0,l=0,c=0,u;for(let b=0;b<a.length;b++){let y=a[b];if(o===0&&l===0){if(y===bp){i.push(a.slice(c,b)),c=b+uz;continue}if(y==="/"){u=b;continue}}y==="["?o++:y==="]"?o--:y==="("?l++:y===")"&&l--}const d=i.length===0?a:a.substring(c),f=fz(d),m=f!==d,g=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:g}};if(t){const a=t+bp,i=n;n=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(s){const a=n;n=i=>s({className:i,parseClassName:a})}return n},fz=e=>e.endsWith(vp)?e.substring(0,e.length-1):e.startsWith(vp)?e.substring(1):e,mz=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const a=[];let i=[];return n.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},hz=e=>({cache:cz(e.cacheSize),parseClassName:dz(e),sortModifiers:mz(e),...rz(e)}),gz=/\s+/,pz=(e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],l=e.trim().split(gz);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:f,modifiers:m,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:y}=s(d);if(f){c=d+(c.length>0?" "+c:c);continue}let v=!!y,p=n(v?b.substring(0,y):b);if(!p){if(!v){c=d+(c.length>0?" "+c:c);continue}if(p=n(b),!p){c=d+(c.length>0?" "+c:c);continue}v=!1}const x=i(m).join(":"),w=g?x+vp:x,N=w+p;if(o.includes(N))continue;o.push(N);const j=a(p,v);for(let _=0;_<j.length;++_){const k=j[_];o.push(w+k)}c=d+(c.length>0?" "+c:c)}return c};function xz(){let e=0,t,s,n="";for(;e<arguments.length;)(t=arguments[e++])&&(s=Bk(t))&&(n&&(n+=" "),n+=s);return n}const Bk=e=>{if(typeof e=="string")return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=Bk(e[n]))&&(s&&(s+=" "),s+=t);return s};function yz(e,...t){let s,n,a,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return s=hz(u),n=s.cache.get,a=s.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=pz(c,s);return a(c,d),d}return function(){return i(xz.apply(null,arguments))}}const Dt=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},Ik=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,$k=/^\((?:(\w[\w-]*):)?(.+)\)$/i,vz=/^\d+\/\d+$/,bz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Nz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,jz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ro=e=>vz.test(e),_e=e=>!!e&&!Number.isNaN(Number(e)),Ja=e=>!!e&&Number.isInteger(Number(e)),Uh=e=>e.endsWith("%")&&_e(e.slice(0,-1)),fa=e=>bz.test(e),Sz=()=>!0,_z=e=>wz.test(e)&&!Nz.test(e),Fk=()=>!1,Cz=e=>jz.test(e),Ez=e=>kz.test(e),Az=e=>!re(e)&&!ie(e),Rz=e=>Dl(e,Gk,Fk),re=e=>Ik.test(e),Xr=e=>Dl(e,Vk,_z),Gh=e=>Dl(e,Lz,_e),zb=e=>Dl(e,Hk,Fk),Tz=e=>Dl(e,Uk,Ez),od=e=>Dl(e,qk,Cz),ie=e=>$k.test(e),Wl=e=>Pl(e,Vk),Mz=e=>Pl(e,zz),Ob=e=>Pl(e,Hk),Dz=e=>Pl(e,Gk),Pz=e=>Pl(e,Uk),ld=e=>Pl(e,qk,!0),Dl=(e,t,s)=>{const n=Ik.exec(e);return n?n[1]?t(n[1]):s(n[2]):!1},Pl=(e,t,s=!1)=>{const n=$k.exec(e);return n?n[1]?t(n[1]):s:!1},Hk=e=>e==="position"||e==="percentage",Uk=e=>e==="image"||e==="url",Gk=e=>e==="length"||e==="size"||e==="bg-size",Vk=e=>e==="length",Lz=e=>e==="number",zz=e=>e==="family-name",qk=e=>e==="shadow",Oz=()=>{const e=Dt("color"),t=Dt("font"),s=Dt("text"),n=Dt("font-weight"),a=Dt("tracking"),i=Dt("leading"),o=Dt("breakpoint"),l=Dt("container"),c=Dt("spacing"),u=Dt("radius"),d=Dt("shadow"),f=Dt("inset-shadow"),m=Dt("text-shadow"),g=Dt("drop-shadow"),b=Dt("blur"),y=Dt("perspective"),v=Dt("aspect"),p=Dt("ease"),x=Dt("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...N(),ie,re],_=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],A=()=>[ie,re,c],S=()=>[ro,"full","auto",...A()],C=()=>[Ja,"none","subgrid",ie,re],M=()=>["auto",{span:["full",Ja,ie,re]},Ja,ie,re],E=()=>[Ja,"auto",ie,re],R=()=>["auto","min","max","fr",ie,re],T=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],O=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...A()],B=()=>[ro,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],L=()=>[e,ie,re],D=()=>[...N(),Ob,zb,{position:[ie,re]}],I=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",Dz,Rz,{size:[ie,re]}],U=()=>[Uh,Wl,Xr],H=()=>["","none","full",u,ie,re],Z=()=>["",_e,Wl,Xr],K=()=>["solid","dashed","dotted","double"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>[_e,Uh,Ob,zb],ye=()=>["","none",b,ie,re],be=()=>["none",_e,ie,re],Ne=()=>["none",_e,ie,re],Xe=()=>[_e,ie,re],nt=()=>[ro,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fa],breakpoint:[fa],color:[Sz],container:[fa],"drop-shadow":[fa],ease:["in","out","in-out"],font:[Az],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fa],shadow:[fa],spacing:["px",_e],text:[fa],"text-shadow":[fa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ro,re,ie,v]}],container:["container"],columns:[{columns:[_e,re,ie,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:S()}],"inset-x":[{"inset-x":S()}],"inset-y":[{"inset-y":S()}],start:[{start:S()}],end:[{end:S()}],top:[{top:S()}],right:[{right:S()}],bottom:[{bottom:S()}],left:[{left:S()}],visibility:["visible","invisible","collapse"],z:[{z:[Ja,"auto",ie,re]}],basis:[{basis:[ro,"full","auto",l,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_e,ro,"auto","initial","none",re]}],grow:[{grow:["",_e,ie,re]}],shrink:[{shrink:["",_e,ie,re]}],order:[{order:[Ja,"first","last","none",ie,re]}],"grid-cols":[{"grid-cols":C()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":C()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...T(),"normal"]}],"justify-items":[{"justify-items":[...O(),"normal"]}],"justify-self":[{"justify-self":["auto",...O()]}],"align-content":[{content:["normal",...T()]}],"align-items":[{items:[...O(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...O(),{baseline:["","last"]}]}],"place-content":[{"place-content":T()}],"place-items":[{"place-items":[...O(),"baseline"]}],"place-self":[{"place-self":["auto",...O()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[l,"screen",...B()]}],"min-w":[{"min-w":[l,"screen","none",...B()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",s,Wl,Xr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,ie,Gh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Uh,re]}],"font-family":[{font:[Mz,re,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ie,re]}],"line-clamp":[{"line-clamp":[_e,"none",ie,Gh]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",ie,re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ie,re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:[_e,"from-font","auto",ie,Xr]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[_e,"auto",ie,re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ie,re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ie,re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:D()}],"bg-repeat":[{bg:I()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ja,ie,re],radial:["",ie,re],conic:[Ja,ie,re]},Pz,Tz]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:U()}],"gradient-via-pos":[{via:U()}],"gradient-to-pos":[{to:U()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:Z()}],"border-w-x":[{"border-x":Z()}],"border-w-y":[{"border-y":Z()}],"border-w-s":[{"border-s":Z()}],"border-w-e":[{"border-e":Z()}],"border-w-t":[{"border-t":Z()}],"border-w-r":[{"border-r":Z()}],"border-w-b":[{"border-b":Z()}],"border-w-l":[{"border-l":Z()}],"divide-x":[{"divide-x":Z()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Z()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...K(),"hidden","none"]}],"divide-style":[{divide:[...K(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...K(),"none","hidden"]}],"outline-offset":[{"outline-offset":[_e,ie,re]}],"outline-w":[{outline:["",_e,Wl,Xr]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",d,ld,od]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",f,ld,od]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[_e,Xr]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":Z()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",m,ld,od]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[_e,ie,re]}],"mix-blend":[{"mix-blend":[...ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[_e]}],"mask-image-linear-from-pos":[{"mask-linear-from":te()}],"mask-image-linear-to-pos":[{"mask-linear-to":te()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":te()}],"mask-image-t-to-pos":[{"mask-t-to":te()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":te()}],"mask-image-r-to-pos":[{"mask-r-to":te()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":te()}],"mask-image-b-to-pos":[{"mask-b-to":te()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":te()}],"mask-image-l-to-pos":[{"mask-l-to":te()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":te()}],"mask-image-x-to-pos":[{"mask-x-to":te()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":te()}],"mask-image-y-to-pos":[{"mask-y-to":te()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[ie,re]}],"mask-image-radial-from-pos":[{"mask-radial-from":te()}],"mask-image-radial-to-pos":[{"mask-radial-to":te()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[_e]}],"mask-image-conic-from-pos":[{"mask-conic-from":te()}],"mask-image-conic-to-pos":[{"mask-conic-to":te()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:D()}],"mask-repeat":[{mask:I()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ie,re]}],filter:[{filter:["","none",ie,re]}],blur:[{blur:ye()}],brightness:[{brightness:[_e,ie,re]}],contrast:[{contrast:[_e,ie,re]}],"drop-shadow":[{"drop-shadow":["","none",g,ld,od]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",_e,ie,re]}],"hue-rotate":[{"hue-rotate":[_e,ie,re]}],invert:[{invert:["",_e,ie,re]}],saturate:[{saturate:[_e,ie,re]}],sepia:[{sepia:["",_e,ie,re]}],"backdrop-filter":[{"backdrop-filter":["","none",ie,re]}],"backdrop-blur":[{"backdrop-blur":ye()}],"backdrop-brightness":[{"backdrop-brightness":[_e,ie,re]}],"backdrop-contrast":[{"backdrop-contrast":[_e,ie,re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_e,ie,re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_e,ie,re]}],"backdrop-invert":[{"backdrop-invert":["",_e,ie,re]}],"backdrop-opacity":[{"backdrop-opacity":[_e,ie,re]}],"backdrop-saturate":[{"backdrop-saturate":[_e,ie,re]}],"backdrop-sepia":[{"backdrop-sepia":["",_e,ie,re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ie,re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_e,"initial",ie,re]}],ease:[{ease:["linear","initial",p,ie,re]}],delay:[{delay:[_e,ie,re]}],animate:[{animate:["none",x,ie,re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,ie,re]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:be()}],"rotate-x":[{"rotate-x":be()}],"rotate-y":[{"rotate-y":be()}],"rotate-z":[{"rotate-z":be()}],scale:[{scale:Ne()}],"scale-x":[{"scale-x":Ne()}],"scale-y":[{"scale-y":Ne()}],"scale-z":[{"scale-z":Ne()}],"scale-3d":["scale-3d"],skew:[{skew:Xe()}],"skew-x":[{"skew-x":Xe()}],"skew-y":[{"skew-y":Xe()}],transform:[{transform:[ie,re,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:nt()}],"translate-x":[{"translate-x":nt()}],"translate-y":[{"translate-y":nt()}],"translate-z":[{"translate-z":nt()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ie,re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ie,re]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[_e,Wl,Xr,Gh]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Bz=yz(Oz);function $(...e){return Bz(zk(e))}const Iz=Ml("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-base font-semibold transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-5 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-3 has-[>svg]:px-4",sm:"h-9 rounded-md gap-1.5 px-4 has-[>svg]:px-3.5 text-sm",lg:"h-12 rounded-md px-8 has-[>svg]:px-6 text-lg",icon:"size-11"}},defaultVariants:{variant:"default",size:"default"}});function G({className:e,variant:t,size:s,asChild:n=!1,...a}){const i=n?JL:"button";return r.jsx(i,{"data-slot":"button",className:$(Iz({variant:t,size:s,className:e})),...a})}function ne(e,t,{checkForDefaultPrevented:s=!0}={}){return function(a){if(e==null||e(a),s===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function $z(e,t){const s=h.createContext(t),n=i=>{const{children:o,...l}=i,c=h.useMemo(()=>l,Object.values(l));return r.jsx(s.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=h.useContext(s);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function Us(e,t=[]){let s=[];function n(i,o){const l=h.createContext(o),c=s.length;s=[...s,o];const u=f=>{var p;const{scope:m,children:g,...b}=f,y=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,v=h.useMemo(()=>b,Object.values(b));return r.jsx(y.Provider,{value:v,children:g})};u.displayName=i+"Provider";function d(f,m){var y;const g=((y=m==null?void 0:m[e])==null?void 0:y[c])||l,b=h.useContext(g);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=s.map(o=>h.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Fz(a,...t)]}function Fz(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}var Zn=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},Hz=Y1[" useId ".trim().toString()]||(()=>{}),Uz=0;function Ea(e){const[t,s]=h.useState(Hz());return Zn(()=>{s(n=>n??String(Uz++))},[e]),t?`radix-${t}`:""}var Gz=Y1[" useInsertionEffect ".trim().toString()]||Zn;function Va({prop:e,defaultProp:t,onChange:s=()=>{},caller:n}){const[a,i,o]=Vz({defaultProp:t,onChange:s}),l=e!==void 0,c=l?e:a;{const d=h.useRef(e!==void 0);h.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=h.useCallback(d=>{var f;if(l){const m=qz(d)?d(e):d;m!==e&&((f=o.current)==null||f.call(o,m))}else i(d)},[l,e,i,o]);return[c,u]}function Vz({defaultProp:e,onChange:t}){const[s,n]=h.useState(e),a=h.useRef(s),i=h.useRef(t);return Gz(()=>{i.current=t},[t]),h.useEffect(()=>{var o;a.current!==s&&((o=i.current)==null||o.call(i,s),a.current=s)},[s,a]),[s,n,i]}function qz(e){return typeof e=="function"}var Qz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=Qz.reduce((e,t)=>{const s=el(`Primitive.${t}`),n=h.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Qk(e,t){e&&Tm.flushSync(()=>e.dispatchEvent(t))}function es(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...s)=>{var n;return(n=t.current)==null?void 0:n.call(t,...s)},[])}function Zz(e,t=globalThis==null?void 0:globalThis.document){const s=es(e);h.useEffect(()=>{const n=a=>{a.key==="Escape"&&s(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[s,t])}var Wz="DismissableLayer",wp="dismissableLayer.update",Yz="dismissableLayer.pointerDownOutside",Xz="dismissableLayer.focusOutside",Bb,Zk=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wu=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=h.useContext(Zk),[d,f]=h.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=h.useState({}),b=He(t,k=>f(k)),y=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),p=y.indexOf(v),x=d?y.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,N=x>=p,j=eO(k=>{const A=k.target,S=[...u.branches].some(C=>C.contains(A));!N||S||(a==null||a(k),o==null||o(k),k.defaultPrevented||l==null||l())},m),_=tO(k=>{const A=k.target;[...u.branches].some(C=>C.contains(A))||(i==null||i(k),o==null||o(k),k.defaultPrevented||l==null||l())},m);return Zz(k=>{x===u.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),h.useEffect(()=>{if(d)return s&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Bb=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Ib(),()=>{s&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Bb)}},[d,m,s,u]),h.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Ib())},[d,u]),h.useEffect(()=>{const k=()=>g({});return document.addEventListener(wp,k),()=>document.removeEventListener(wp,k)},[]),r.jsx(je.div,{...c,ref:b,style:{pointerEvents:w?N?"auto":"none":void 0,...e.style},onFocusCapture:ne(e.onFocusCapture,_.onFocusCapture),onBlurCapture:ne(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:ne(e.onPointerDownCapture,j.onPointerDownCapture)})});wu.displayName=Wz;var Kz="DismissableLayerBranch",Jz=h.forwardRef((e,t)=>{const s=h.useContext(Zk),n=h.useRef(null),a=He(t,n);return h.useEffect(()=>{const i=n.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),r.jsx(je.div,{...e,ref:a})});Jz.displayName=Kz;function eO(e,t=globalThis==null?void 0:globalThis.document){const s=es(e),n=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){Wk(Yz,s,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}function tO(e,t=globalThis==null?void 0:globalThis.document){const s=es(e),n=h.useRef(!1);return h.useEffect(()=>{const a=i=>{i.target&&!n.current&&Wk(Xz,s,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Ib(){const e=new CustomEvent(wp);document.dispatchEvent(e)}function Wk(e,t,s,{discrete:n}){const a=s.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&a.addEventListener(e,t,{once:!0}),n?Qk(a,i):a.dispatchEvent(i)}var Vh="focusScope.autoFocusOnMount",qh="focusScope.autoFocusOnUnmount",$b={bubbles:!1,cancelable:!0},sO="FocusScope",A0=h.forwardRef((e,t)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=h.useState(null),u=es(a),d=es(i),f=h.useRef(null),m=He(t,y=>c(y)),g=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(n){let y=function(w){if(g.paused||!l)return;const N=w.target;l.contains(N)?f.current=N:nr(f.current,{select:!0})},v=function(w){if(g.paused||!l)return;const N=w.relatedTarget;N!==null&&(l.contains(N)||nr(f.current,{select:!0}))},p=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&nr(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const x=new MutationObserver(p);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),x.disconnect()}}},[n,l,g.paused]),h.useEffect(()=>{if(l){Hb.add(g);const y=document.activeElement;if(!l.contains(y)){const p=new CustomEvent(Vh,$b);l.addEventListener(Vh,u),l.dispatchEvent(p),p.defaultPrevented||(nO(lO(Yk(l)),{select:!0}),document.activeElement===y&&nr(l))}return()=>{l.removeEventListener(Vh,u),setTimeout(()=>{const p=new CustomEvent(qh,$b);l.addEventListener(qh,d),l.dispatchEvent(p),p.defaultPrevented||nr(y??document.body,{select:!0}),l.removeEventListener(qh,d),Hb.remove(g)},0)}}},[l,u,d,g]);const b=h.useCallback(y=>{if(!s&&!n||g.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,p=document.activeElement;if(v&&p){const x=y.currentTarget,[w,N]=aO(x);w&&N?!y.shiftKey&&p===N?(y.preventDefault(),s&&nr(w,{select:!0})):y.shiftKey&&p===w&&(y.preventDefault(),s&&nr(N,{select:!0})):p===x&&y.preventDefault()}},[s,n,g.paused]);return r.jsx(je.div,{tabIndex:-1,...o,ref:m,onKeyDown:b})});A0.displayName=sO;function nO(e,{select:t=!1}={}){const s=document.activeElement;for(const n of e)if(nr(n,{select:t}),document.activeElement!==s)return}function aO(e){const t=Yk(e),s=Fb(t,e),n=Fb(t.reverse(),e);return[s,n]}function Yk(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Fb(e,t){for(const s of e)if(!rO(s,{upTo:t}))return s}function rO(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function iO(e){return e instanceof HTMLInputElement&&"select"in e}function nr(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&iO(e)&&t&&e.select()}}var Hb=oO();function oO(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=Ub(e,t),e.unshift(t)},remove(t){var s;e=Ub(e,t),(s=e[0])==null||s.resume()}}}function Ub(e,t){const s=[...e],n=s.indexOf(t);return n!==-1&&s.splice(n,1),s}function lO(e){return e.filter(t=>t.tagName!=="A")}var cO="Portal",zm=h.forwardRef((e,t)=>{var l;const{container:s,...n}=e,[a,i]=h.useState(!1);Zn(()=>i(!0),[]);const o=s||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?uL.createPortal(r.jsx(je.div,{...n,ref:t}),o):null});zm.displayName=cO;function uO(e,t){return h.useReducer((s,n)=>t[s][n]??s,e)}var Kt=e=>{const{present:t,children:s}=e,n=dO(t),a=typeof s=="function"?s({present:n.isPresent}):h.Children.only(s),i=He(n.ref,fO(a));return typeof s=="function"||n.isPresent?h.cloneElement(a,{ref:i}):null};Kt.displayName="Presence";function dO(e){const[t,s]=h.useState(),n=h.useRef(null),a=h.useRef(e),i=h.useRef("none"),o=e?"mounted":"unmounted",[l,c]=uO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const u=cd(n.current);i.current=l==="mounted"?u:"none"},[l]),Zn(()=>{const u=n.current,d=a.current;if(d!==e){const m=i.current,g=cd(u);e?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Zn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=g=>{const y=cd(n.current).includes(g.animationName);if(g.target===t&&y&&(c("ANIMATION_END"),!a.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},m=g=>{g.target===t&&(i.current=cd(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(u=>{n.current=u?getComputedStyle(u):null,s(u)},[])}}function cd(e){return(e==null?void 0:e.animationName)||"none"}function fO(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Qh=0;function Xk(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Gb()),document.body.insertAdjacentElement("beforeend",e[1]??Gb()),Qh++,()=>{Qh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Qh--}},[])}function Gb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ln=function(){return Ln=Object.assign||function(t){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},Ln.apply(this,arguments)};function Kk(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s}function mO(e,t,s){if(s||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Qd="right-scroll-bar-position",Zd="width-before-scroll-bar",hO="with-scroll-bars-hidden",gO="--removed-body-scroll-bar-size";function Zh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function pO(e,t){var s=h.useState(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(n){var a=s.value;a!==n&&(s.value=n,s.callback(n,a))}}}})[0];return s.callback=t,s.facade}var xO=typeof window<"u"?h.useLayoutEffect:h.useEffect,Vb=new WeakMap;function yO(e,t){var s=pO(null,function(n){return e.forEach(function(a){return Zh(a,n)})});return xO(function(){var n=Vb.get(s);if(n){var a=new Set(n),i=new Set(e),o=s.current;a.forEach(function(l){i.has(l)||Zh(l,null)}),i.forEach(function(l){a.has(l)||Zh(l,o)})}Vb.set(s,e)},[e]),s}function vO(e){return e}function bO(e,t){t===void 0&&(t=vO);var s=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(i){var o=t(i,n);return s.push(o),function(){s=s.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;s.length;){var o=s;s=[],o.forEach(i)}s={push:function(l){return i(l)},filter:function(){return s}}},assignMedium:function(i){n=!0;var o=[];if(s.length){var l=s;s=[],l.forEach(i),o=s}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),s={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),s}}}};return a}function wO(e){e===void 0&&(e={});var t=bO(null);return t.options=Ln({async:!0,ssr:!1},e),t}var Jk=function(e){var t=e.sideCar,s=Kk(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return h.createElement(n,Ln({},s))};Jk.isSideCarExport=!0;function NO(e,t){return e.useMedium(t),Jk}var eS=wO(),Wh=function(){},Om=h.forwardRef(function(e,t){var s=h.useRef(null),n=h.useState({onScrollCapture:Wh,onWheelCapture:Wh,onTouchMoveCapture:Wh}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,m=e.sideCar,g=e.noRelative,b=e.noIsolation,y=e.inert,v=e.allowPinchZoom,p=e.as,x=p===void 0?"div":p,w=e.gapMode,N=Kk(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,_=yO([s,t]),k=Ln(Ln({},N),a);return h.createElement(h.Fragment,null,d&&h.createElement(j,{sideCar:eS,removeScrollBar:u,shards:f,noRelative:g,noIsolation:b,inert:y,setCallbacks:i,allowPinchZoom:!!v,lockRef:s,gapMode:w}),o?h.cloneElement(h.Children.only(l),Ln(Ln({},k),{ref:_})):h.createElement(x,Ln({},k,{className:c,ref:_}),l))});Om.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Om.classNames={fullWidth:Zd,zeroRight:Qd};var jO=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kO(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=jO();return t&&e.setAttribute("nonce",t),e}function SO(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function _O(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var CO=function(){var e=0,t=null;return{add:function(s){e==0&&(t=kO())&&(SO(t,s),_O(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},EO=function(){var e=CO();return function(t,s){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},tS=function(){var e=EO(),t=function(s){var n=s.styles,a=s.dynamic;return e(n,a),null};return t},AO={left:0,top:0,right:0,gap:0},Yh=function(e){return parseInt(e||"",10)||0},RO=function(e){var t=window.getComputedStyle(document.body),s=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Yh(s),Yh(n),Yh(a)]},TO=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return AO;var t=RO(e),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-s+t[2]-t[0])}},MO=tS(),Lo="data-scroll-locked",DO=function(e,t,s,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(hO,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Lo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qd,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Zd,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Qd," .").concat(Qd,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Zd," .").concat(Zd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Lo,`] {
    `).concat(gO,": ").concat(l,`px;
  }
`)},qb=function(){var e=parseInt(document.body.getAttribute(Lo)||"0",10);return isFinite(e)?e:0},PO=function(){h.useEffect(function(){return document.body.setAttribute(Lo,(qb()+1).toString()),function(){var e=qb()-1;e<=0?document.body.removeAttribute(Lo):document.body.setAttribute(Lo,e.toString())}},[])},LO=function(e){var t=e.noRelative,s=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;PO();var i=h.useMemo(function(){return TO(a)},[a]);return h.createElement(MO,{styles:DO(i,!t,a,s?"":"!important")})},Np=!1;if(typeof window<"u")try{var ud=Object.defineProperty({},"passive",{get:function(){return Np=!0,!0}});window.addEventListener("test",ud,ud),window.removeEventListener("test",ud,ud)}catch{Np=!1}var io=Np?{passive:!1}:!1,zO=function(e){return e.tagName==="TEXTAREA"},sS=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!zO(e)&&s[t]==="visible")},OO=function(e){return sS(e,"overflowY")},BO=function(e){return sS(e,"overflowX")},Qb=function(e,t){var s=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=nS(e,n);if(a){var i=aS(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},IO=function(e){var t=e.scrollTop,s=e.scrollHeight,n=e.clientHeight;return[t,s,n]},$O=function(e){var t=e.scrollLeft,s=e.scrollWidth,n=e.clientWidth;return[t,s,n]},nS=function(e,t){return e==="v"?OO(t):BO(t)},aS=function(e,t){return e==="v"?IO(t):$O(t)},FO=function(e,t){return e==="h"&&t==="rtl"?-1:1},HO=function(e,t,s,n,a){var i=FO(e,window.getComputedStyle(t).direction),o=i*n,l=s.target,c=t.contains(l),u=!1,d=o>0,f=0,m=0;do{if(!l)break;var g=aS(e,l),b=g[0],y=g[1],v=g[2],p=y-v-i*b;(b||p)&&nS(e,l)&&(f+=p,m+=b);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(f)<1||!d&&Math.abs(m)<1)&&(u=!0),u},dd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Zb=function(e){return[e.deltaX,e.deltaY]},Wb=function(e){return e&&"current"in e?e.current:e},UO=function(e,t){return e[0]===t[0]&&e[1]===t[1]},GO=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},VO=0,oo=[];function qO(e){var t=h.useRef([]),s=h.useRef([0,0]),n=h.useRef(),a=h.useState(VO++)[0],i=h.useState(tS)[0],o=h.useRef(e);h.useEffect(function(){o.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var y=mO([e.lockRef.current],(e.shards||[]).map(Wb),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var p=dd(y),x=s.current,w="deltaX"in y?y.deltaX:x[0]-p[0],N="deltaY"in y?y.deltaY:x[1]-p[1],j,_=y.target,k=Math.abs(w)>Math.abs(N)?"h":"v";if("touches"in y&&k==="h"&&_.type==="range")return!1;var A=Qb(k,_);if(!A)return!0;if(A?j=k:(j=k==="v"?"h":"v",A=Qb(k,_)),!A)return!1;if(!n.current&&"changedTouches"in y&&(w||N)&&(n.current=j),!j)return!0;var S=n.current||j;return HO(S,v,y,S==="h"?w:N)},[]),c=h.useCallback(function(y){var v=y;if(!(!oo.length||oo[oo.length-1]!==i)){var p="deltaY"in v?Zb(v):dd(v),x=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&UO(j.delta,p)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var w=(o.current.shards||[]).map(Wb).filter(Boolean).filter(function(j){return j.contains(v.target)}),N=w.length>0?l(v,w[0]):!o.current.noIsolation;N&&v.cancelable&&v.preventDefault()}}},[]),u=h.useCallback(function(y,v,p,x){var w={name:y,delta:v,target:p,should:x,shadowParent:QO(p)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(N){return N!==w})},1)},[]),d=h.useCallback(function(y){s.current=dd(y),n.current=void 0},[]),f=h.useCallback(function(y){u(y.type,Zb(y),y.target,l(y,e.lockRef.current))},[]),m=h.useCallback(function(y){u(y.type,dd(y),y.target,l(y,e.lockRef.current))},[]);h.useEffect(function(){return oo.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,io),document.addEventListener("touchmove",c,io),document.addEventListener("touchstart",d,io),function(){oo=oo.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,io),document.removeEventListener("touchmove",c,io),document.removeEventListener("touchstart",d,io)}},[]);var g=e.removeScrollBar,b=e.inert;return h.createElement(h.Fragment,null,b?h.createElement(i,{styles:GO(a)}):null,g?h.createElement(LO,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function QO(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ZO=NO(eS,qO);var R0=h.forwardRef(function(e,t){return h.createElement(Om,Ln({},e,{ref:t,sideCar:ZO}))});R0.classNames=Om.classNames;var WO=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},lo=new WeakMap,fd=new WeakMap,md={},Xh=0,rS=function(e){return e&&(e.host||rS(e.parentNode))},YO=function(e,t){return t.map(function(s){if(e.contains(s))return s;var n=rS(s);return n&&e.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},XO=function(e,t,s,n){var a=YO(t,Array.isArray(e)?e:[e]);md[s]||(md[s]=new WeakMap);var i=md[s],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var g=m.getAttribute(n),b=g!==null&&g!=="false",y=(lo.get(m)||0)+1,v=(i.get(m)||0)+1;lo.set(m,y),i.set(m,v),o.push(m),y===1&&b&&fd.set(m,!0),v===1&&m.setAttribute(s,"true"),b||m.setAttribute(n,"true")}catch(p){console.error("aria-hidden: cannot operate on ",m,p)}})};return d(t),l.clear(),Xh++,function(){o.forEach(function(f){var m=lo.get(f)-1,g=i.get(f)-1;lo.set(f,m),i.set(f,g),m||(fd.has(f)||f.removeAttribute(n),fd.delete(f)),g||f.removeAttribute(s)}),Xh--,Xh||(lo=new WeakMap,lo=new WeakMap,fd=new WeakMap,md={})}},iS=function(e,t,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=WO(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),XO(n,a,s,"aria-hidden")):function(){return null}},Bm="Dialog",[oS,zae]=Us(Bm),[KO,kn]=oS(Bm),lS=e=>{const{__scopeDialog:t,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=h.useRef(null),c=h.useRef(null),[u,d]=Va({prop:n,defaultProp:a??!1,onChange:i,caller:Bm});return r.jsx(KO,{scope:t,triggerRef:l,contentRef:c,contentId:Ea(),titleId:Ea(),descriptionId:Ea(),open:u,onOpenChange:d,onOpenToggle:h.useCallback(()=>d(f=>!f),[d]),modal:o,children:s})};lS.displayName=Bm;var cS="DialogTrigger",uS=h.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=kn(cS,s),i=He(t,a.triggerRef);return r.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":D0(a.open),...n,ref:i,onClick:ne(e.onClick,a.onOpenToggle)})});uS.displayName=cS;var T0="DialogPortal",[JO,dS]=oS(T0,{forceMount:void 0}),fS=e=>{const{__scopeDialog:t,forceMount:s,children:n,container:a}=e,i=kn(T0,t);return r.jsx(JO,{scope:t,forceMount:s,children:h.Children.map(n,o=>r.jsx(Kt,{present:s||i.open,children:r.jsx(zm,{asChild:!0,container:a,children:o})}))})};fS.displayName=T0;var jf="DialogOverlay",mS=h.forwardRef((e,t)=>{const s=dS(jf,e.__scopeDialog),{forceMount:n=s.forceMount,...a}=e,i=kn(jf,e.__scopeDialog);return i.modal?r.jsx(Kt,{present:n||i.open,children:r.jsx(tB,{...a,ref:t})}):null});mS.displayName=jf;var eB=el("DialogOverlay.RemoveScroll"),tB=h.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=kn(jf,s);return r.jsx(R0,{as:eB,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(je.div,{"data-state":D0(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),_i="DialogContent",hS=h.forwardRef((e,t)=>{const s=dS(_i,e.__scopeDialog),{forceMount:n=s.forceMount,...a}=e,i=kn(_i,e.__scopeDialog);return r.jsx(Kt,{present:n||i.open,children:i.modal?r.jsx(sB,{...a,ref:t}):r.jsx(nB,{...a,ref:t})})});hS.displayName=_i;var sB=h.forwardRef((e,t)=>{const s=kn(_i,e.__scopeDialog),n=h.useRef(null),a=He(t,s.contentRef,n);return h.useEffect(()=>{const i=n.current;if(i)return iS(i)},[]),r.jsx(gS,{...e,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ne(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ne(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ne(e.onFocusOutside,i=>i.preventDefault())})}),nB=h.forwardRef((e,t)=>{const s=kn(_i,e.__scopeDialog),n=h.useRef(!1),a=h.useRef(!1);return r.jsx(gS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=s.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=s.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),gS=h.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=kn(_i,s),c=h.useRef(null),u=He(t,c);return Xk(),r.jsxs(r.Fragment,{children:[r.jsx(A0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(wu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":D0(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(aB,{titleId:l.titleId}),r.jsx(iB,{contentRef:c,descriptionId:l.descriptionId})]})]})}),M0="DialogTitle",pS=h.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=kn(M0,s);return r.jsx(je.h2,{id:a.titleId,...n,ref:t})});pS.displayName=M0;var xS="DialogDescription",yS=h.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=kn(xS,s);return r.jsx(je.p,{id:a.descriptionId,...n,ref:t})});yS.displayName=xS;var vS="DialogClose",bS=h.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=kn(vS,s);return r.jsx(je.button,{type:"button",...n,ref:t,onClick:ne(e.onClick,()=>a.onOpenChange(!1))})});bS.displayName=vS;function D0(e){return e?"open":"closed"}var wS="DialogTitleWarning",[Oae,NS]=$z(wS,{contentName:_i,titleName:M0,docsSlug:"dialog"}),aB=({titleId:e})=>{const t=NS(wS),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},rB="DialogDescriptionWarning",iB=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${NS(rB).contentName}}.`;return h.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},P0=lS,jS=uS,L0=fS,Nu=mS,ju=hS,ku=pS,Su=yS,kS=bS;const tl=P0,SS=jS,oB=L0,_S=h.forwardRef(({className:e,...t},s)=>r.jsx(Nu,{className:$("fixed inset-0 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{zIndex:_t.MODAL},...t,ref:s}));_S.displayName=Nu.displayName;const lB=Ml("fixed gap-4 border shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ci=h.forwardRef(({side:e="right",className:t,children:s,...n},a)=>r.jsxs(oB,{children:[r.jsx(_S,{}),r.jsxs(ju,{ref:a,className:$(lB({side:e}),t),style:{zIndex:_t.MODAL+1,backgroundColor:"hsl(var(--background))"},...n,children:[s,r.jsxs(kS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary p-3 sm:p-2 z-50 min-w-[44px] min-h-[44px] flex items-center justify-center",children:[r.jsx(ze,{className:"h-6 w-6 sm:h-4 sm:w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ci.displayName=ju.displayName;const sl=({className:e,...t})=>r.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",e),...t});sl.displayName="SheetHeader";const nl=h.forwardRef(({className:e,...t},s)=>r.jsx(ku,{ref:s,className:$("text-lg font-semibold text-foreground",e),...t}));nl.displayName=ku.displayName;const z0=h.forwardRef(({className:e,...t},s)=>r.jsx(Su,{ref:s,className:$("text-sm text-muted-foreground",e),...t}));z0.displayName=Su.displayName;function ae({className:e,...t}){return r.jsx("div",{"data-slot":"card",className:$("bg-card text-card-foreground flex flex-col gap-8 rounded-xl border py-8 px-6 shadow-sm",e),...t})}function de({className:e,action:t,children:s,...n}){return r.jsxs("div",{"data-slot":"card-header",className:$("flex flex-row items-start justify-between space-y-0",e),...n,children:[r.jsx("div",{className:"flex-1 flex flex-col space-y-3",children:s}),t&&r.jsx("div",{className:"ml-4 flex-shrink-0",children:t})]})}function ve({className:e,...t}){return r.jsx("div",{"data-slot":"card-title",className:$("text-xl font-bold leading-none",e),...t})}function pn({className:e,...t}){return r.jsx("div",{"data-slot":"card-description",className:$("text-base text-muted-foreground",e),...t})}function oe({className:e,...t}){return r.jsx("div",{"data-slot":"card-content",className:$("pt-0",e),...t})}const os=h.forwardRef(({className:e,type:t,...s},n)=>r.jsx("input",{type:t,className:$("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));os.displayName="Input";var cB="Label",CS=h.forwardRef((e,t)=>r.jsx(je.label,{...e,ref:t,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));CS.displayName=cB;const uB=Ml("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),It=h.forwardRef(({className:e,children:t,...s},n)=>r.jsx(CS,{ref:n,className:$(uB(),e),...s,children:t}));It.displayName="Label";function ES({name:e,notes:t,onNameChange:s,onNotesChange:n,className:a}){const[i,o]=h.useState(e),[l,c]=h.useState(t),u=h.useRef(null),d=h.useRef(null),f=h.useCallback(y=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{s(y),u.current=null},1e3)},[s]),m=h.useCallback(y=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{n(y),d.current=null},1e3)},[n]);h.useEffect(()=>{o(e)},[e]),h.useEffect(()=>{c(t)},[t]),h.useEffect(()=>()=>{u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current)},[]);const g=y=>{const v=y.target.value;o(v),f(v)},b=y=>{const v=y.target.value;c(v),m(v)};return r.jsxs(ae,{className:`mb-6 ${a||""}`,children:[r.jsx(de,{children:r.jsx(ve,{children:"Basic Information"})}),r.jsxs(oe,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(It,{htmlFor:"name",children:"Character Name"}),r.jsx(os,{id:"name",value:i,onChange:g,placeholder:"Enter character name..."})]}),r.jsxs("div",{children:[r.jsx(It,{htmlFor:"notes",children:"Notes"}),r.jsx("textarea",{id:"notes",value:l,onChange:b,placeholder:"Add character notes, roleplay details, or build explanations...",rows:4,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]})]})}function dB({onClick:e,className:t}){return r.jsxs(G,{variant:"outline",size:"sm",onClick:e,className:t,title:"GigaPlanner Tools - Import character builds","aria-label":"Open GigaPlanner tools",children:[r.jsx(xf,{className:"w-4 h-4 mr-2"}),"GigaPlanner Tools"]})}const Ui=fs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const n=await fetch(Vt("data/birthsigns.json"));if(!n.ok)throw new Error(`Failed to fetch birthsigns data: ${n.status}`);const i=(await n.json()).map(o=>{var l,c;return{...o,id:o.edid||o.name.toLowerCase().replace(/\s+/g,"-"),tags:[o.group,...((l=o.powers)==null?void 0:l.map(u=>u.name))||[],...((c=o.stat_modifications)==null?void 0:c.map(u=>u.stat))||[]].filter(u=>!!u)}});e({data:i,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load birthsigns",loading:!1})}}},getById:s=>t().data.find(a=>a.id===s),search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(a)||((o=i.description)==null?void 0:o.toLowerCase().includes(a))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(a)))})}})),fB=Object.freeze(Object.defineProperty({__proto__:null,useBirthsignsStore:Ui},Symbol.toStringTag,{value:"Module"})),mB={SHOW_FAVORED_RACES:!0,ENABLE_RACE_AUTOCOMPLETE:!1,SHOW_RACE_FILTERS:!1};function hB(e){return mB[e]}function Fn(){return hB("SHOW_FAVORED_RACES")}function AS(e){return{effectName:e.effectName,effectDescription:e.effectDescription,magnitude:e.magnitude,duration:e.duration,area:e.area,effectType:"0",targetAttribute:null,keywords:e.keywords||[]}}function jp(e,t){return{spellId:t,spellName:e.spellName,effects:e.effects.map(AS)}}function gB(e){return{spellId:e.spellName,spellName:e.spellName,header:e.spellName,description:e.description,effects:e.effects.map(AS)}}function pB(e){const t=e.name.toLowerCase().replace(/\s+/g,"-");return{id:t,name:e.name,type:e.domain,pantheon:e.domain,blessing:void 0,boon1:jp(e.boons.boon1,`${t}-boon1`),boon2:jp(e.boons.boon2,`${t}-boon2`),tenet:gB(e.tenets),favoredRaces:e.favoredRaces||[],worshipRestrictions:[],tags:[e.domain,...e.favoredRaces||[]].filter(Boolean)}}function xB(e){const t=e.name.toLowerCase().replace(/\s+/g,"-");return{id:t,name:e.name,type:e.domain,pantheon:e.domain,blessing:jp(e.blessing,`${t}-blessing`),favoredRaces:[],tags:[e.domain]}}function yB(e){return e.map(pB)}function RS(e){return e.map(xB)}const O0=fs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const n=await fetch(Vt("data/blessing-data.json"));if(!n.ok)throw new Error(`Failed to fetch blessings data: ${n.status}`);const a=await n.json(),o=RS(a).filter(l=>{var c;return((c=l.blessing)==null?void 0:c.effects)&&l.blessing.effects.length>0}).map(l=>({id:l.id,name:l.name,type:l.type,pantheon:l.pantheon,blessingName:l.blessing.spellName,blessingDescription:l.blessing.effects.map(c=>c.effectDescription).join(" "),effects:l.blessing.effects.map(c=>({name:c.effectName,description:c.effectDescription,magnitude:c.magnitude,duration:c.duration,area:c.area,effectType:c.effectType,targetAttribute:c.targetAttribute,keywords:c.keywords})),tags:l.tags||[],originalReligion:l}));e({data:o,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load blessings",loading:!1})}}},getById:s=>t().data.find(a=>a.id===s),search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>{var o;return i.name.toLowerCase().includes(a)||i.blessingName.toLowerCase().includes(a)||i.blessingDescription.toLowerCase().includes(a)||((o=i.tags)==null?void 0:o.some(l=>l.toLowerCase().includes(a)))})},getByType:s=>t().data.filter(a=>a.type===s)}));function vB(e){var n;const t=[],s=((n=e.description)==null?void 0:n.toLowerCase())||"";return(s.includes("damage")||s.includes("weapon"))&&t.push("Combat"),(s.includes("armor")||s.includes("defense"))&&t.push("Defensive"),(s.includes("magicka")||s.includes("spell")||s.includes("magic"))&&t.push("Magic"),(s.includes("regeneration")||s.includes("health")||s.includes("stamina"))&&t.push("Utility"),(s.includes("detect")||s.includes("stealth"))&&t.push("Stealth"),(s.includes("cost")||s.includes("less"))&&t.push("Cost Reduction"),(s.includes("increase")||s.includes("more"))&&t.push("Enhancement"),s.includes("resistance")&&t.push("Resistance"),[...new Set(t)]}const Ll=fs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const n=await fetch(Vt("data/subclasses.json"));if(!n.ok)throw new Error(`Failed to fetch destiny nodes data: ${n.status}`);const i=(await n.json()).map((o,l)=>({...o,id:o.globalFormId||o.edid||`destiny-${l}`,nextBranches:o.nextBranches||[],levelRequirement:o.levelRequirement,lore:o.lore,tags:vB(o),prerequisites:Array.isArray(o.prerequisites)?o.prerequisites:[]}));e({data:i,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load destiny nodes",loading:!1})}}},getById:s=>t().data.find(a=>a.id===s),search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(a)||((o=i.description)==null?void 0:o.toLowerCase().includes(a))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(a)))})}})),bB=Object.freeze(Object.defineProperty({__proto__:null,useDestinyNodesStore:Ll},Symbol.toStringTag,{value:"Module"})),zl=fs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const n=await fetch(Vt("data/religion-data.json"));if(!n.ok)throw new Error(`Failed to fetch religions data: ${n.status}`);const a=await fetch(Vt("data/blessing-data.json"));if(!a.ok)throw new Error(`Failed to fetch blessings data: ${a.status}`);const i=await n.json(),o=await a.json(),l=yB(i),c=RS(o),u=l.map(d=>{const f=c.find(m=>m.name===d.name);return{...d,blessing:f==null?void 0:f.blessing}});e({data:u,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load religions",loading:!1})}}},getById:s=>t().data.find(a=>a.id===s||a.name===s||a.name.toLowerCase().replace(/\s+/g,"-")===s),search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(a)||((o=i.description)==null?void 0:o.toLowerCase().includes(a))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(a)))})}})),wB=Object.freeze(Object.defineProperty({__proto__:null,useReligionsStore:zl},Symbol.toStringTag,{value:"Module"})),Gi=fs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const n=await fetch(Vt("data/traits.json"));if(!n.ok)throw new Error(`Failed to fetch traits data: ${n.status}`);const i=(await n.json()).traits.map(o=>{var l;return{...o,id:o.id||o.edid||o.name,tags:[o.category,...o.tags||[],...((l=o.effects)==null?void 0:l.map(c=>c.type))||[]].filter(c=>!!c)}});e({data:i,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load traits",loading:!1})}}},getById:s=>t().data.find(a=>a.id===s),search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(a)||((o=i.description)==null?void 0:o.toLowerCase().includes(a))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(a)))})}})),NB=Object.freeze(Object.defineProperty({__proto__:null,useTraitsStore:Gi},Symbol.toStringTag,{value:"Module"}));function Ks(e){return e?e.replace(/\*\*\*(.*?)\*\*\*/g,"**$1**").replace(/<(\d+)>/g,"Level $1").replace(/<Global=([^>]+)>/g,"X%").replace(/<[^>]+>/g,"X%").replace(/\n+/g," ").trim():""}function Ur(e,t,s){try{return e()}catch(n){return console.warn(`Failed to resolve ${s}:`,n),t}}function jB(e){return e?Ur(()=>{const t=wn.getState().data;if(t.length===0)throw new Error("Races data not loaded yet. Please wait a moment and try again.");let s=t.find(n=>n.edid===e);return s||(s=t.find(n=>n.name.toLowerCase()===e.toLowerCase())),s||(s=t.find(n=>n.id===e)),s?{name:s.name,effects:s.description?Ks(s.description):void 0}:(console.warn(`Race not found for ID: ${e}. Available races: ${t.map(n=>n.edid).join(", ")}`),{name:"Unknown Race"})},{name:"Unknown Race"},"race"):{name:"Not selected"}}function kB(e){return e?Ur(()=>{const t=Ui.getState().data;if(t.length===0)throw new Error("Birthsigns data not loaded yet. Please wait a moment and try again.");const s=t.find(n=>n.edid===e);return s?{name:s.name,effects:Ks(s.description||"No effects")}:{name:"Unknown Birth Sign",effects:"No effects"}},{name:"Unknown Birth Sign",effects:"No effects"},"birth sign"):{name:"Not selected",effects:"No effects"}}function SB(e,t){return Ur(()=>{const s=Gi.getState().data;if(s.length===0)throw new Error("Traits data not loaded yet. Please wait a moment and try again.");const n=[];return e.forEach(a=>{const i=s.find(o=>o.edid===a);i&&n.push({name:i.name,effects:Ks(i.description||"No effects"),type:"regular"})}),t.forEach(a=>{const i=s.find(o=>o.edid===a);i&&n.push({name:i.name,effects:Ks(i.description||"No effects"),type:"bonus"})}),n},[],"traits")}function _B(e){return e?Ur(()=>{var o,l,c,u,d,f,m,g,b,y,v,p;const t=zl.getState().data;if(t.length===0)throw new Error("Religions data not loaded yet. Please wait a moment and try again.");const s=t.find(x=>x.id===e||x.name===e||x.name.toLowerCase().replace(/\s+/g,"-")===e);if(!s)return{name:"Unknown Religion",effects:"No effects"};const n=((c=(l=(o=s.tenet)==null?void 0:o.effects)==null?void 0:l[0])==null?void 0:c.effectDescription)||((u=s.tenet)==null?void 0:u.description)||void 0,a=((m=(f=(d=s.boon1)==null?void 0:d.effects)==null?void 0:f[0])==null?void 0:m.effectDescription)||((g=s.boon1)==null?void 0:g.spellName)||void 0,i=((v=(y=(b=s.boon2)==null?void 0:b.effects)==null?void 0:y[0])==null?void 0:v.effectDescription)||((p=s.boon2)==null?void 0:p.spellName)||void 0;return{name:s.name,effects:Ks(s.type||"No effects"),tenets:n?Ks(n):void 0,followerBoon:a?Ks(a):void 0,devoteeBoon:i?Ks(i):void 0}},{name:"Unknown Religion",effects:"No effects"},"religion"):{name:"Not selected",effects:"No effects"}}function CB(e){return e?Ur(()=>{const t=O0.getState().data;if(t.length===0)throw new Error("Blessings data not loaded yet. Please wait a moment and try again.");const s=t.find(a=>a.id===e);if(!s)return{name:"Unknown Blessing",effects:"No effects",source:"Unknown"};const n=s.effects.slice(0,2).map(a=>a.name).join(", ");return{name:s.blessingName,effects:Ks(n||"No effects"),source:s.name}},{name:"Unknown Blessing",effects:"No effects",source:"Unknown"},"favorite blessing"):{name:"Not selected",effects:"No effects",source:"None"}}function EB(e,t,s){return Ur(()=>{const n=Hr.getState().data;if(n.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");const a=i=>i.map(o=>{const l=n.find(u=>u.edid===o),c=s[o];return{name:(l==null?void 0:l.name)||"Unknown Skill",level:c||void 0}});return{major:a(e),minor:a(t),other:[]}},{major:[],minor:[],other:[]},"skills")}function AB(e,t){return Ur(()=>{const s=Hr.getState().data,n=Hi.getState().data;if(s.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");if(n.length===0)throw new Error("Perk trees data not loaded yet. Please wait a moment and try again.");return Object.entries(e).map(([a,i])=>{const o=s.find(u=>u.edid===a),l=n.find(u=>u.treeId===a),c=new Map;return i.forEach(u=>{var y,v,p,x;let d=l==null?void 0:l.perks.find(w=>w.edid===u);d||(d=l==null?void 0:l.perks.find(w=>w.name.toLowerCase()===u.toLowerCase())),d||console.warn(`Perk lookup fallback for ID: ${u}`);const f=t[u];d||console.warn(`Perk not found for ID: ${u} in skill: ${a}. Available perks: ${l==null?void 0:l.perks.map(w=>w.edid).join(", ")}`);const m=((p=(v=(y=d==null?void 0:d.ranks)==null?void 0:y[0])==null?void 0:v.description)==null?void 0:p.base)||"No effects",g=(d==null?void 0:d.edid)||u,b=((x=c.get(g))==null?void 0:x.rank)||0;f&&f>b?c.set(g,{name:(d==null?void 0:d.name)||"Unknown Perk",effects:Ks(m),rank:f}):c.has(g)||c.set(g,{name:(d==null?void 0:d.name)||"Unknown Perk",effects:Ks(m),rank:f||void 0})}),{skillName:(o==null?void 0:o.name)||"Unknown Skill",perks:Array.from(c.values())}}).filter(a=>a.perks.length>0)},[],"perks")}function RB(e){return e.length===0?[]:Ur(()=>{const t=Ll.getState().data;if(t.length===0)throw new Error("Destiny nodes data not loaded yet. Please wait a moment and try again.");return e.map(s=>{let n=t.find(a=>a.edid===s);return n||(n=t.find(a=>a.id===s)),n||(n=t.find(a=>a.name===s)),{name:(n==null?void 0:n.name)||"Unknown Destiny",effects:n!=null&&n.description?Ks(n.description):void 0}})},[],"destiny path")}function TB(e){const t=[],s=e.map(n=>n.name.toLowerCase());return s.some(n=>n.includes("one-handed")||n.includes("two-handed"))&&t.push("melee"),s.some(n=>n.includes("archery"))&&t.push("archery"),s.some(n=>n.includes("magic")||n.includes("destruction"))&&t.push("magic"),s.some(n=>n.includes("stealth")||n.includes("sneak"))&&t.push("stealth"),s.some(n=>n.includes("smithing")||n.includes("enchanting"))&&t.push("crafting"),t}function MB(e){const t=[],s=e.map(n=>n.name.toLowerCase());return s.some(n=>n.includes("warrior")||n.includes("combat"))&&t.push("warrior"),s.some(n=>n.includes("mage")||n.includes("magic"))&&t.push("mage"),s.some(n=>n.includes("thief")||n.includes("stealth"))&&t.push("thief"),s.some(n=>n.includes("archer")||n.includes("ranged"))&&t.push("archer"),t}function DB(e,t,s){const n=["lorerim"];if(e.name!=="Not selected"){const l=e.name.toLowerCase().replace(/\s+/g,"");n.push(l)}const a=[...t.major,...t.minor],i=TB(a);n.push(...i);const o=MB(s);return n.push(...o),n.slice(0,5)}function PB(e){const t=jB(e.race),s=kB(e.stone),n=_B(e.religion),a=CB(e.favoriteBlessing),i=SB(e.traits.regular,e.traits.bonus),o=EB(e.skills.major,e.skills.minor,e.skillLevels),l=AB(e.perks.selected,e.perks.ranks),c=RB(e.destinyPath),u=DB(t,o,i),d=e.attributeAssignments.assignments||{},f=Object.values(d).filter(_=>_==="health").length,m=Object.values(d).filter(_=>_==="stamina").length,g=Object.values(d).filter(_=>_==="magicka").length,y=wn.getState().data.find(_=>_.edid===e.race),v=(y==null?void 0:y.startingStats)||{health:100,stamina:100,magicka:100},p=v.health+(e.attributeAssignments.health||0)*5,x=v.stamina+(e.attributeAssignments.stamina||0)*5,w=v.magicka+(e.attributeAssignments.magicka||0)*5,j={level:1+(e.attributeAssignments.health||0)+(e.attributeAssignments.stamina||0)+(e.attributeAssignments.magicka||0),health:p,stamina:x,magicka:w,healthLevels:f,staminaLevels:m,magickaLevels:g,totalPoints:(e.attributeAssignments.health||0)+(e.attributeAssignments.stamina||0)+(e.attributeAssignments.magicka||0)};return{name:e.name||"Unnamed Character",notes:e.notes||"",race:t,birthSign:s,traits:i,religion:n,favoriteBlessing:a,skills:o,perks:l,destinyPath:c,tags:u,attributes:j}}function LB(e,t){const s=[];s.push(`**ðŸ›¡ï¸ Build: ${e.name||"Unnamed Character"}**`),e.notes&&s.push(`*${e.notes}*`),s.push(""),t&&(s.push(`[Arcaneum Build Link](${t})`),s.push("")),s.push("__ðŸ§¬ Race__"),s.push(`${e.race.name}`),s.push(""),s.push("__ðŸŒŒ Birth Sign__"),s.push(`${e.birthSign.name}`),s.push(""),e.traits.length>0&&(s.push("__ðŸ§  Traits__"),e.traits.forEach(a=>{const i=a.type==="bonus"?" (Late Game)":"";s.push(`**${a.name}${i}**`)}),s.push("")),s.push("__âœï¸ Religion__"),s.push(`${e.religion.name}`),e.religion.tenets&&s.push(`â€¢ **Tenets:** ${e.religion.tenets}`),e.religion.followerBoon&&s.push(`â€¢ **Follower:** ${e.religion.followerBoon}`),e.religion.devoteeBoon&&s.push(`â€¢ **Devotee:** ${e.religion.devoteeBoon}`),s.push(""),s.push("__âœ¨ Favorite Blessing__"),s.push(`${e.favoriteBlessing.name}`),e.favoriteBlessing.effects!=="No effects"&&s.push(`â€¢ **Effects:** ${e.favoriteBlessing.effects}`),s.push(""),s.push(`__âš”ï¸ Attributes (Level ${e.attributes.level})__`);const n=[];if(e.attributes.healthLevels>0){const a=`Health: ${e.attributes.health} (${e.attributes.healthLevels} lvl)`;n.push(a)}if(e.attributes.staminaLevels>0){const a=`Stamina: ${e.attributes.stamina} (${e.attributes.staminaLevels} lvl)`;n.push(a)}if(e.attributes.magickaLevels>0){const a=`Magicka: ${e.attributes.magicka} (${e.attributes.magickaLevels} lvl)`;n.push(a)}if(n.length>0?s.push(n.join(", ")):s.push("No attribute points assigned"),s.push(""),s.push("__ðŸ“š Skills__"),e.skills.major.length>0){const a=e.skills.major.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");s.push(`**Major:** ${a}`)}if(e.skills.minor.length>0){const a=e.skills.minor.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");s.push(`**Minor:** ${a}`)}if(e.skills.other.length>0){const a=e.skills.other.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");s.push(`**Other:** ${a}`)}return s.push(""),e.perks.length>0&&(s.push("__ðŸŽ¯ Perks__"),e.perks.forEach(a=>{s.push(`**${a.skillName}:**`),a.perks.forEach(i=>{const o=i.rank&&i.rank>1?` (Rank ${i.rank})`:"";s.push(`â€¢ ${i.name}${o}`)}),s.push("")})),e.destinyPath.length>0&&(s.push("__ðŸŒŸ Destiny Path__"),e.destinyPath.forEach(a=>{s.push(`**${a.name}**`),a.effects&&s.push(`${a.effects}`),s.push("")})),s.join(`
`)}function zB(e,t){const s=[];s.push(`**ðŸ›¡ï¸ Build: ${e.name||"Unnamed Character"}**`),e.notes&&s.push(`*${e.notes}*`),s.push(""),t&&(s.push(`[Arcaneum Build Link](${t})`),s.push("")),s.push("__ðŸ§¬ Race__"),s.push(`${e.race.name}`),s.push(""),s.push("__ðŸŒŒ Birth Sign__"),s.push(`${e.birthSign.name}`),s.push(""),e.traits.length>0&&(s.push("__ðŸ§  Traits__"),e.traits.forEach(a=>{const i=a.type==="bonus"?" (Late Game)":"";s.push(`**${a.name}${i}**`)}),s.push("")),s.push("__âœï¸ Religion__"),s.push(`${e.religion.name}`),e.religion.tenets&&s.push(`â€¢ **Tenets:** ${e.religion.tenets}`),e.religion.followerBoon&&s.push(`â€¢ **Follower:** ${e.religion.followerBoon}`),e.religion.devoteeBoon&&s.push(`â€¢ **Devotee:** ${e.religion.devoteeBoon}`),s.push(""),s.push("__âœ¨ Favorite Blessing__"),s.push(`${e.favoriteBlessing.name}`),e.favoriteBlessing.effects!=="No effects"&&s.push(`â€¢ **Effects:** ${e.favoriteBlessing.effects}`),s.push(""),s.push(`__âš”ï¸ Attributes (Level ${e.attributes.level})__`);const n=[];if(e.attributes.healthLevels>0){const a=`Health: ${e.attributes.health} (${e.attributes.healthLevels} lvl)`;n.push(a)}if(e.attributes.staminaLevels>0){const a=`Stamina: ${e.attributes.stamina} (${e.attributes.staminaLevels} lvl)`;n.push(a)}if(e.attributes.magickaLevels>0){const a=`Magicka: ${e.attributes.magicka} (${e.attributes.magickaLevels} lvl)`;n.push(a)}if(n.length>0?s.push(n.join(", ")):s.push("No attribute points assigned"),s.push(""),s.push("__ðŸ“š Skills__"),e.skills.major.length>0){const a=e.skills.major.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");s.push(`**Major:** ${a}`)}if(e.skills.minor.length>0){const a=e.skills.minor.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");s.push(`**Minor:** ${a}`)}if(e.skills.other.length>0){const a=e.skills.other.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");s.push(`**Other:** ${a}`)}return s.push(""),e.perks.length>0&&(s.push("__ðŸŽ¯ Perks__"),e.perks.forEach(a=>{s.push(`**${a.skillName}:**`),a.perks.forEach(i=>{const o=i.rank&&i.rank>1?` (Rank ${i.rank})`:"";s.push(`â€¢ ${i.name}${o}`)}),s.push("")})),e.destinyPath.length>0&&(s.push("__ðŸŒŸ Destiny Path__"),e.destinyPath.forEach(a=>{s.push(`**${a.name}**`),a.effects&&s.push(`${a.effects}`),s.push("")})),s.join(`
`)}async function OB(e){try{await navigator.clipboard.writeText(e)}catch{const s=document.createElement("textarea");s.value=e,s.style.position="fixed",s.style.left="-999999px",s.style.top="-999999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy")}catch{throw new Error("Failed to copy to clipboard")}finally{document.body.removeChild(s)}}}function BB({build:e,className:t}){const[s,n]=h.useState(!1),[a,i]=h.useState(null),[o,l]=h.useState(""),[c,u]=h.useState("names"),d=h.useCallback(async f=>{n(!0),i(null),l(""),u(f);try{const m=PB(e),g=window.location.href,b=f==="full"?zB(m,g):LB(m,g);await OB(b),i(f),setTimeout(()=>i(null),2e3)}catch(m){console.error("Discord export failed:",m),l(m instanceof Error?m.message:"Export failed"),setTimeout(()=>l(""),3e3)}finally{n(!1)}},[e]);return r.jsxs("div",{className:$("relative",t),children:[r.jsxs("div",{className:"flex rounded-md border border-input bg-background",children:[r.jsx(G,{variant:s?"ghost":c==="names"?"default":"ghost",size:"sm",onClick:()=>d("names"),disabled:s,className:$("rounded-r-none border-r",c==="names"&&!s&&"bg-primary text-primary-foreground",a==="names"&&"bg-green-600 hover:bg-green-700 text-white",o&&"bg-red-600 hover:bg-red-700 text-white"),title:o||"Export build to Discord format (short form)","aria-label":"Export build to Discord format (short form)",children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),r.jsx("span",{className:"ml-2",children:"Exporting..."})]}):a==="names"?r.jsxs(r.Fragment,{children:[r.jsx(Bc,{className:"w-4 h-4"}),r.jsx("span",{className:"ml-2",children:"Copied!"})]}):o?r.jsxs(r.Fragment,{children:[r.jsx(Xo,{className:"w-4 h-4"}),r.jsx("span",{className:"ml-2",children:"Error"})]}):r.jsxs(r.Fragment,{children:[r.jsx(z3,{className:"w-4 h-4"}),r.jsx("span",{className:"ml-2",children:"Export (short form)"})]})}),r.jsx(G,{variant:s?"ghost":c==="full"?"default":"ghost",size:"sm",onClick:()=>d("full"),disabled:s,className:$("rounded-l-none",c==="full"&&!s&&"bg-primary text-primary-foreground",a==="full"&&"bg-green-600 hover:bg-green-700 text-white",o&&"bg-red-600 hover:bg-red-700 text-white"),title:o||"Export build to Discord format (long form)","aria-label":"Export build to Discord format (long form)",children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),r.jsx("span",{className:"ml-2",children:"Exporting..."})]}):a==="full"?r.jsxs(r.Fragment,{children:[r.jsx(Bc,{className:"w-4 h-4"}),r.jsx("span",{className:"ml-2",children:"Copied!"})]}):o?r.jsxs(r.Fragment,{children:[r.jsx(Xo,{className:"w-4 h-4"}),r.jsx("span",{className:"ml-2",children:"Error"})]}):r.jsxs(r.Fragment,{children:[r.jsx(K1,{className:"w-4 h-4"}),r.jsx("span",{className:"ml-2",children:"Export (long form)"})]})})]}),o&&r.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-red-100 border border-red-300 rounded text-xs text-red-800 max-w-xs z-50",role:"alert","aria-live":"polite",children:o})]})}function IB({onReset:e,build:t,onOpenGigaPlannerTools:s,className:n}){return r.jsxs("div",{className:`flex flex-wrap gap-2 mb-6 ${n||""}`,children:[r.jsxs(G,{variant:"destructive",size:"sm",className:"text-destructive-foreground cursor-pointer hover:opacity-90",onClick:e,children:[r.jsx(Ma,{className:"w-4 h-4 mr-2"}),"Reset Build"]}),r.jsx(BB,{build:t}),s&&r.jsx(dB,{onClick:s})]})}function $B({cards:e,className:t="",gap:s=16}){const[n,a]=h.useState(0),i=h.useRef(null);h.useCallback(()=>n<768?1:n<1024?2:n<1280?3:4,[n]),h.useEffect(()=>{const c=()=>{i.current&&a(i.current.offsetWidth)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const o=h.useCallback(()=>{const c=n<768?1:2,u=[];let d=[];return e.forEach((f,m)=>{f.size==="full"?(d.length>0&&(u.push(l(d,c)),d=[]),u.push(r.jsx("div",{id:f.id,style:{width:"100%",marginBottom:`${s}px`},children:f.component},f.id))):d.push(f)}),d.length>0&&u.push(l(d,c)),r.jsx(r.Fragment,{children:u})},[e,n,s]),l=h.useCallback((c,u)=>{var m;const d=Array.from({length:u},()=>[]),f=new Array(u).fill(0);return c.forEach(g=>{let b=0,y=1/0;for(let v=0;v<u;v++)f[v]<y&&(y=f[v],b=v);d[b].push(r.jsx("div",{id:g.id,style:{width:"100%",marginBottom:`${s}px`},children:g.component},g.id)),f[b]+=1}),r.jsx("div",{style:{display:"flex",width:"100%",marginBottom:`${s}px`},children:d.map((g,b)=>r.jsx("div",{style:{width:`calc(${100/u}% - ${s/2}px)`,marginRight:b<u-1?`${s}px`:0},children:g},b))},`group-${(m=c[0])==null?void 0:m.id}`)},[s]);return e.length===0?r.jsx("div",{className:`text-center py-12 ${t}`,children:r.jsx("p",{className:"text-muted-foreground",children:"No build cards to display"})}):r.jsx("div",{ref:i,className:t,children:r.jsx("div",{style:{width:"100%"},children:o()})})}const FB=Ml("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Q({className:e,variant:t,...s}){return r.jsx("div",{className:$(FB({variant:t}),e),...s})}const Im={traitLimit:{regular:"text-blue-600",bonus:"text-purple-600",warning:"text-yellow-600",error:"text-red-600"},summaryCard:{primary:"text-primary",secondary:"text-muted-foreground",accent:"text-accent"},backgrounds:{warning:"bg-yellow-50 dark:bg-yellow-950",info:"bg-blue-50 dark:bg-blue-950",error:"bg-red-50 dark:bg-red-950",success:"bg-green-50 dark:bg-green-950"},borders:{warning:"border-yellow-200 dark:border-yellow-800",info:"border-blue-200 dark:border-blue-800",error:"border-red-200 dark:border-red-800",success:"border-green-200 dark:border-green-800"}},zo={card:"p-6 space-y-4",section:"space-y-3",item:"space-y-2"};function HB(e){return Im.traitLimit[e]}function Yb(e){return Im.summaryCard[e]}function UB(e){return Im.backgrounds[e]}function TS(e){return Im.borders[e]}function GB({title:e,items:t,layout:s="grid",className:n}){const a=o=>{switch(o){case"race":return r.jsx(yf,{className:"h-4 w-4"});case"birthsign":return r.jsx(Oe,{className:"h-4 w-4"});case"religion":return r.jsx(Yn,{className:"h-4 w-4"});case"traits":return r.jsx(tk,{className:"h-4 w-4"});default:return null}},i=()=>{switch(s){case"grid":return"grid grid-cols-2 md:grid-cols-4 gap-4";case"list":return"space-y-3";default:return"grid grid-cols-2 md:grid-cols-4 gap-4"}};return r.jsxs(ae,{className:$(zo.card,n),children:[r.jsx(de,{children:r.jsx(ve,{children:e})}),r.jsx(oe,{className:$(zo.section),children:r.jsx("div",{className:i(),children:t.map((o,l)=>r.jsxs("div",{className:$(zo.item,o.className),children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.icon||a(o.type),r.jsxs("span",{className:$("font-medium text-sm",Yb("primary")),children:[o.label,":"]})]}),r.jsx("div",{className:$("text-sm",Yb("secondary")),children:o.value||"Not selected"})]},l))})})]})}function VB(e){return[{label:"Race",value:e.race||"Not selected",type:"race"},{label:"Birth Sign",value:e.stone||"Not selected",type:"birthsign"},{label:"Religion",value:e.religion||"Not selected",type:"religion"},{label:"Traits",value:`${e.traits.regular.length}/${e.traitLimits.regular} starting, ${e.traits.bonus.length}/${e.traitLimits.bonus} late game`,type:"traits"}]}function qB({build:e,title:t="Build Summary",layout:s="grid",className:n}){const a=VB(e);return r.jsx(GB,{title:t,items:a,layout:s,className:n})}function QB({open:e,title:t,message:s,variant:n="warning",confirmText:a="Confirm",cancelText:i="Cancel",onConfirm:o,onCancel:l,className:c}){if(!e)return null;const u=()=>{switch(n){case"warning":return r.jsx(Si,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"});case"info":return r.jsx(Jo,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"});case"error":return r.jsx(n3,{className:"h-5 w-5 text-red-600 dark:text-red-400"});case"success":return r.jsx($c,{className:"h-5 w-5 text-green-600 dark:text-green-400"});default:return r.jsx(Si,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}},d=()=>{switch(n){case"error":return"destructive";case"success":return"default";default:return"default"}};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:r.jsxs("div",{className:$("bg-white dark:bg-zinc-900 rounded-lg shadow-lg p-6 w-full max-w-xs space-y-4 border",TS(n),c),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[u(),r.jsx("span",{className:"font-semibold",children:t})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(G,{variant:"outline",size:"sm",onClick:l,children:i}),r.jsx(G,{variant:d(),size:"sm",onClick:o,children:a})]})]})})}function ZB({open:e,title:t,message:s,variant:n="warning",confirmText:a,cancelText:i,onConfirm:o,onCancel:l,className:c}){return r.jsx(QB,{open:e,title:t,message:s,variant:n,confirmText:a,cancelText:i,onConfirm:o,onCancel:l,className:c})}function WB({open:e,onConfirm:t,onCancel:s}){return r.jsx(ZB,{open:e,title:"Reset Build?",message:"This will clear all selections and start a new build. This action cannot be undone.",variant:"warning",confirmText:"Confirm Reset",cancelText:"Cancel",onConfirm:t,onCancel:s})}function YB({title:e,description:t,icon:s,variant:n="default",children:a,className:i}){const o=()=>{if(s)return s;switch(n){case"warning":return r.jsx(Si,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return r.jsx(Jo,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});default:return null}};return r.jsxs(ae,{className:$(zo.card,i),children:[r.jsxs(de,{children:[r.jsxs(ve,{className:"flex items-center gap-2",children:[o(),e]}),t&&r.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),r.jsx(oe,{className:$(zo.section),children:a})]})}function Xb({label:e,value:t,onChange:s,min:n=0,max:a=10,currentCount:i,type:o="regular",className:l}){const c=()=>{switch(o){case"regular":return r.jsx(m0,{className:"h-4 w-4"});case"bonus":return r.jsx(Oe,{className:"h-4 w-4"});default:return null}},u=()=>HB(o);return r.jsxs("div",{className:$(zo.item,l),children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c(),r.jsx(It,{htmlFor:`${o}-limit`,className:u(),children:e})]}),r.jsx(os,{id:`${o}-limit`,type:"number",min:n,max:a,value:t,onChange:d=>s(parseInt(d.target.value)||0),className:"mt-1"}),i!==void 0&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Currently selected: ",i]})]})}function Kb({type:e,title:t,message:s,className:n}){const a=()=>{switch(e){case"warning":return r.jsx(Si,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return r.jsx(Jo,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});case"error":return r.jsx(Si,{className:"h-4 w-4 text-red-600 dark:text-red-400"});case"success":return r.jsx(Jo,{className:"h-4 w-4 text-green-600 dark:text-green-400"});default:return null}};return r.jsxs("div",{className:$("flex items-start gap-2 p-4 rounded-lg border",UB(e),TS(e),n),children:[a(),r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:t}),r.jsx("p",{className:"mt-1",children:s})]})]})}function XB({regularLimit:e,bonusLimit:t,onRegularLimitChange:s,onBonusLimitChange:n,currentRegularCount:a,currentBonusCount:i,className:o}){const l=e!==2||t!==1;return r.jsxs(YB,{title:"Trait Limits Configuration",description:"Configure the number of traits your character can have",icon:r.jsx(Jo,{className:"h-4 w-4 text-muted-foreground"}),className:o,children:[r.jsx(Kb,{type:"warning",title:"Default configuration is 2 starting + 1 late game traits.",message:"Increasing these limits requires corresponding MCM (Mod Configuration Menu) changes in-game. Make sure your MCM settings match these limits to avoid conflicts."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(Xb,{label:"Starting Traits Limit",value:e,onChange:s,min:0,max:10,currentCount:a,type:"regular"}),r.jsx(Xb,{label:"Late Game Traits Limit",value:t,onChange:n,min:0,max:5,currentCount:i,type:"bonus"})]}),l&&r.jsx(Kb,{type:"info",title:`Custom limits detected: ${e} starting + ${t} late game traits.`,message:"Remember to update your MCM settings accordingly."})]})}const KB={magicResist:{name:"Magic Resist",isPercentage:!0,prefactor:1,threshold:150,weights:{health:0,magicka:1,stamina:0},description:"Reduces incoming magical damage",category:"survival"},magickaRegen:{name:"Magicka Regen",isPercentage:!0,prefactor:8,threshold:100,weights:{health:0,magicka:1,stamina:0},description:"Increases magicka regeneration rate",category:"magic"},diseaseResist:{name:"Disease Resist",isPercentage:!0,prefactor:4,threshold:100,weights:{health:.4,magicka:0,stamina:.6},description:"Reduces chance of contracting diseases",category:"survival"},poisonResist:{name:"Poison Resist",isPercentage:!0,prefactor:4,threshold:140,weights:{health:.6,magicka:0,stamina:.4},description:"Reduces poison damage and effects",category:"survival"},staminaRegen:{name:"Stamina Regen",isPercentage:!0,prefactor:8,threshold:100,weights:{health:0,magicka:0,stamina:1},description:"Increases stamina regeneration rate",category:"movement"},moveSpeed:{name:"Move Speed",isPercentage:!0,prefactor:.75,threshold:125,weights:{health:.2,magicka:0,stamina:.8},description:"Increases movement speed",category:"movement"},carryWeight:{name:"Carry Weight",isPercentage:!1,prefactor:4,threshold:110,weights:{health:.8,magicka:0,stamina:.2},description:"Increases maximum carry capacity",category:"survival"},rangedDamage:{name:"Ranged Damage",isPercentage:!0,prefactor:4,threshold:150,weights:{health:.2,magicka:0,stamina:.8},description:"Increases ranged weapon damage",category:"combat"},oneHandDamage:{name:"One-Hand Damage",isPercentage:!0,prefactor:4,threshold:150,weights:{health:.5,magicka:0,stamina:.5},description:"Increases one-handed weapon damage",category:"combat"},twoHandDamage:{name:"Two-Hand Damage",isPercentage:!0,prefactor:4,threshold:150,weights:{health:.8,magicka:0,stamina:.2},description:"Increases two-handed weapon damage",category:"combat"},unarmedDamage:{name:"Unarmed Damage",isPercentage:!1,prefactor:4.5,threshold:125,weights:{health:.5,magicka:0,stamina:.5},description:"Increases unarmed combat damage",category:"combat"}};class Jb{static calculateBaseAttributes(t,s){let n={health:100,stamina:100,magicka:100};if(t.race&&s.races){const a=s.races.find(i=>i.edid===t.race);a!=null&&a.startingStats&&(n={health:a.startingStats.health||100,stamina:a.startingStats.stamina||100,magicka:a.startingStats.magicka||100})}return n.health+=(t.attributeAssignments.health||0)*5,n.stamina+=(t.attributeAssignments.stamina||0)*5,n.magicka+=(t.attributeAssignments.magicka||0)*5,n}static calculateDerivedStat(t,s){const n=t.health*s.weights.health+t.magicka*s.weights.magicka+t.stamina*s.weights.stamina;if(n>s.threshold){const a=s.prefactor*Math.sqrt(n-s.threshold);return Math.floor(a)}return 0}static calculateAllDerivedStats(t,s){return Object.entries(s).map(([n,a])=>({name:a.name,value:this.calculateDerivedStat(t,a),isPercentage:a.isPercentage,formula:`${a.prefactor} * sqrt(weightedSum - ${a.threshold})`,description:a.description,category:a.category}))}static validateBaseAttributes(t){return t.health>=0&&t.stamina>=0&&t.magicka>=0&&t.health<=1e3&&t.stamina<=1e3&&t.magicka<=1e3}static getCalculationBreakdown(t,s){const n=t.health*s.weights.health+t.magicka*s.weights.magicka+t.stamina*s.weights.stamina,a=n-s.threshold,i=a>0?Math.floor(s.prefactor*Math.sqrt(a)):0;return{weightedSum:n,threshold:s.threshold,difference:a,prefactor:s.prefactor,result:i}}}function JB(){const{build:e}=Ye(),{data:t}=wn();return h.useMemo(()=>{var o,l,c;const n={races:t},a=Jb.calculateBaseAttributes(e,n),i=Jb.calculateAllDerivedStats(a,KB);return{baseAttributes:a,derivedStats:i,sources:{race:e.race||"None",birthsign:e.stone||"None",traits:[...((o=e.traits)==null?void 0:o.regular)||[],...((l=e.traits)==null?void 0:l.bonus)||[]],equipment:e.equipment||[],religion:e.religion||"None",destinyPath:e.destinyPath||[],attributeAssignments:((c=e.attributeAssignments)==null?void 0:c.level)||0}}},[e,t])}function eI(){const{build:e,setAttributePoints:t,clearAllAttributeAssignments:s,updateAttributeLevel:n}=va(),{data:a}=wn(),i=e.attributeAssignments,o=h.useMemo(()=>!e.race||a.length===0?null:a.find(m=>m.edid===e.race)||null,[e.race,a]),l=h.useMemo(()=>o!=null&&o.startingStats?{health:o.startingStats.health,stamina:o.startingStats.stamina,magicka:o.startingStats.magicka}:{health:100,stamina:100,magicka:100},[o]),c=h.useMemo(()=>{i.level;const m=i.health+i.stamina+i.magicka;return{health:{base:l.health,assigned:i.health,total:l.health+i.health*5,ratio:m>0?i.health/m*100:0},stamina:{base:l.stamina,assigned:i.stamina,total:l.stamina+i.stamina*5,ratio:m>0?i.stamina/m*100:0},magicka:{base:l.magicka,assigned:i.magicka,total:l.magicka+i.magicka*5,ratio:m>0?i.magicka/m*100:0}}},[i,l]),u=()=>i.health+i.stamina+i.magicka,d=()=>1/0,f=()=>d()-u();return{assignments:i,displayData:c,level:i.level,selectedRace:o,baseStats:l,setAttributePoints:t,clearAllAttributeAssignments:s,updateAttributeLevel:n,getTotalAssignments:u,getMaxPossibleAssignments:d,getRemainingAssignments:f}}const MS=h.createContext(void 0);function tI({children:e}){const[t,s]=h.useState("system"),[n,a]=h.useState("dark"),[i,o]=h.useState(!1);return h.useEffect(()=>{const l=localStorage.getItem("theme");l&&["light","dark","system"].includes(l)&&s(l),o(!0)},[]),h.useEffect(()=>{i&&localStorage.setItem("theme",t);let l;t==="system"?l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":l=t,a(l);const c=document.documentElement;l==="dark"?c.classList.add("dark"):c.classList.remove("dark")},[t,i]),h.useEffect(()=>{const l=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>{if(t==="system"){const u=l.matches?"dark":"light";a(u);const d=document.documentElement;u==="dark"?d.classList.add("dark"):d.classList.remove("dark")}};return l.addEventListener("change",c),()=>l.removeEventListener("change",c)},[t]),r.jsx(MS.Provider,{value:{theme:t,setTheme:s,resolvedTheme:n},children:e})}function DS(){const e=h.useContext(MS);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const sI=Ml("",{variants:{variant:{h1:"scroll-m-20 text-5xl font-black tracking-tight text-balance lg:text-6xl",h2:"scroll-m-20 border-b pb-3 text-4xl font-bold tracking-tight first:mt-0 lg:text-5xl",h3:"scroll-m-20 text-3xl font-bold tracking-tight lg:text-4xl",h4:"scroll-m-20 text-2xl font-bold tracking-tight lg:text-3xl",h5:"scroll-m-20 text-xl font-bold tracking-tight lg:text-2xl",h6:"scroll-m-20 text-lg font-bold tracking-tight lg:text-xl",p:"text-lg leading-8 [&:not(:first-child)]:mt-6",blockquote:"mt-6 border-l-4 pl-6 italic text-lg",code:"bg-muted relative rounded px-[0.4rem] py-[0.3rem] font-mono text-base font-bold",lead:"text-muted-foreground text-2xl leading-8",large:"text-xl font-bold",small:"text-base font-semibold leading-none",muted:"text-muted-foreground text-base"}},defaultVariants:{variant:"p"}}),ks=h.forwardRef(({className:e,variant:t,as:s,...n},a)=>{const i=s||nI(t);return r.jsx(i,{className:$(sI({variant:t,className:e})),ref:a,...n})});ks.displayName="Typography";function nI(e){switch(e){case"h1":return"h1";case"h2":return"h2";case"h3":return"h3";case"h4":return"h4";case"h5":return"h5";case"h6":return"h6";case"blockquote":return"blockquote";case"code":return"code";case"lead":case"large":case"small":case"muted":case"p":default:return"p"}}const Vi=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"h1",as:"h1",className:e,ref:s,...t}));Vi.displayName="H1";const hr=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"h2",as:"h2",className:e,ref:s,...t}));hr.displayName="H2";const Ce=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"h3",as:"h3",className:e,ref:s,...t}));Ce.displayName="H3";const wr=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"h4",as:"h4",className:e,ref:s,...t}));wr.displayName="H4";const as=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"h5",as:"h5",className:e,ref:s,...t}));as.displayName="H5";const aI=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"h6",as:"h6",className:e,ref:s,...t}));aI.displayName="H6";const pe=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"p",as:"p",className:e,ref:s,...t}));pe.displayName="P";const rI=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"blockquote",as:"blockquote",className:e,ref:s,...t}));rI.displayName="Blockquote";const iI=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"code",as:"code",className:e,ref:s,...t}));iI.displayName="Code";const PS=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"lead",as:"p",className:e,ref:s,...t}));PS.displayName="Lead";const oI=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"large",as:"div",className:e,ref:s,...t}));oI.displayName="Large";const Aa=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"small",as:"small",className:e,ref:s,...t}));Aa.displayName="Small";const Uc=h.forwardRef(({className:e,...t},s)=>r.jsx(ks,{variant:"muted",as:"p",className:e,ref:s,...t}));Uc.displayName="Muted";function lI({level:e,assignments:t,onAttributeChange:s,onClearAll:n,onUpdateAttributeLevel:a,getTotalAssignments:i,getMaxPossibleAssignments:o,getRemainingAssignments:l,className:c}){const{resolvedTheme:u}=DS(),d=u==="dark",f=i(),m=o(),g=l(),b=v=>{const p=t[v];s(v,p+1)},y=v=>{const p=t[v];p>0&&s(v,Math.max(0,p-1))};return r.jsxs("div",{className:$("space-y-4",c),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(as,{className:"text-lg font-medium text-foreground",children:"Attribute Points"}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(G,{variant:"outline",size:"sm",onClick:n,className:"text-xs",children:[r.jsx(Ma,{className:"h-3 w-3 mr-1"}),"Clear All"]})})]}),r.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Character Level: ",e," â€¢ ",f," points assigned (",f*5," total attribute points)",m===1/0?"":` â€¢ ${g} remaining`]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Level:"}),r.jsx(os,{type:"number",value:e,onChange:v=>{const p=parseInt(v.target.value)||1;p>=1&&p<=100&&a(p)},className:"w-16 text-center text-sm",min:1,max:100})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border border-red-200 dark:border-red-800",style:{backgroundColor:"hsl(var(--muted) / 0.3)"},children:[r.jsx("div",{className:$("font-medium mb-3",d?"text-red-200":"text-red-500"),children:"Health"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(G,{variant:"outline",size:"sm",onClick:()=>y("health"),disabled:t.health<=0,className:"h-8 w-8 p-0",children:r.jsx(Po,{className:"h-4 w-4"})}),r.jsx(os,{type:"number",value:t.health,onChange:v=>{const p=parseInt(v.target.value)||0;p>=0&&s("health",p)},className:$("w-16 text-center text-lg font-bold border-red-300 focus:border-red-500 focus:ring-red-500",d?"text-red-300 border-red-600":"text-red-700"),min:0}),r.jsx(G,{variant:"outline",size:"sm",onClick:()=>b("health"),className:"h-8 w-8 p-0",children:r.jsx(br,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border border-green-200 dark:border-green-800",style:{backgroundColor:"hsl(var(--muted) / 0.3)"},children:[r.jsx("div",{className:$("font-medium mb-3",d?"text-green-200":"text-green-500"),children:"Stamina"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(G,{variant:"outline",size:"sm",onClick:()=>y("stamina"),disabled:t.stamina<=0,className:"h-8 w-8 p-0",children:r.jsx(Po,{className:"h-4 w-4"})}),r.jsx(os,{type:"number",value:t.stamina,onChange:v=>{const p=parseInt(v.target.value)||0;p>=0&&s("stamina",p)},className:$("w-16 text-center text-lg font-bold border-green-300 focus:border-green-500 focus:ring-green-500",d?"text-green-300 border-green-600":"text-green-700"),min:0}),r.jsx(G,{variant:"outline",size:"sm",onClick:()=>b("stamina"),className:"h-8 w-8 p-0",children:r.jsx(br,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border border-blue-200 dark:border-blue-800",style:{backgroundColor:"hsl(var(--muted) / 0.3)"},children:[r.jsx("div",{className:$("font-medium mb-3",d?"text-blue-200":"text-blue-500"),children:"Magicka"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(G,{variant:"outline",size:"sm",onClick:()=>y("magicka"),disabled:t.magicka<=0,className:"h-8 w-8 p-0",children:r.jsx(Po,{className:"h-4 w-4"})}),r.jsx(os,{type:"number",value:t.magicka,onChange:v=>{const p=parseInt(v.target.value)||0;p>=0&&s("magicka",p)},className:$("w-16 text-center text-lg font-bold border-blue-300 focus:border-blue-500 focus:ring-blue-500",d?"text-blue-300 border-blue-600":"text-blue-700"),min:0}),r.jsx(G,{variant:"outline",size:"sm",onClick:()=>b("magicka"),className:"h-8 w-8 p-0",children:r.jsx(br,{className:"h-4 w-4"})})]})]})]})]})]})}const cI={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500"},uI={sm:"h-1.5",md:"h-2",lg:"h-3"};function Kh({value:e,label:t,color:s="blue",size:n="md",showValue:a=!0,className:i,maxValue:o}){const l=o?Math.min(e/o*100,100):100;return r.jsxs("div",{className:$("space-y-1",i),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:t}),a&&r.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),r.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:$("transition-all duration-300 ease-out",cI[s],uI[n]),style:{width:`${l}%`}})})]})}function dI({displayData:e,level:t,className:s,showRatios:n=!0,compact:a=!1,selectedRace:i}){return a?r.jsxs("div",{className:$("space-y-3",s),children:[r.jsx(as,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),i&&r.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Base stats from ",i.name]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Health"}),r.jsx("div",{className:"font-medium text-lg",children:e.health.total}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.health.assigned]})]}),r.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Stamina"}),r.jsx("div",{className:"font-medium text-lg",children:e.stamina.total}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.stamina.assigned]})]}),r.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Magicka"}),r.jsx("div",{className:"font-medium text-lg",children:e.magicka.total}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.magicka.assigned]})]})]}),n&&r.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Level ",t," â€¢"," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments"]})]}):r.jsxs("div",{className:$("space-y-4",s),children:[r.jsx(as,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Kh,{value:e.health.total,label:"Health",color:"red",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),r.jsx(Kh,{value:e.stamina.total,label:"Stamina",color:"green",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),r.jsx(Kh,{value:e.magicka.total,label:"Magicka",color:"blue",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)})]}),n&&r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[r.jsx("div",{className:"font-medium",children:"Health"}),r.jsxs("div",{className:"text-muted-foreground",children:[e.health.ratio.toFixed(1),"%"]})]}),r.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[r.jsx("div",{className:"font-medium",children:"Stamina"}),r.jsxs("div",{className:"text-muted-foreground",children:[e.stamina.ratio.toFixed(1),"%"]})]}),r.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[r.jsx("div",{className:"font-medium",children:"Magicka"}),r.jsxs("div",{className:"text-muted-foreground",children:[e.magicka.ratio.toFixed(1),"%"]})]})]}),r.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:["Level ",t," â€¢"," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments made"]})]})}function LS({className:e,showControls:t=!0,showSummary:s=!0,compact:n=!1}){const[a,i]=h.useState(!0),{assignments:o,displayData:l,level:c,selectedRace:u,setAttributePoints:d,clearAllAttributeAssignments:f,updateAttributeLevel:m,getTotalAssignments:g,getMaxPossibleAssignments:b,getRemainingAssignments:y}=eI(),v=JB(),p=(j,_)=>{d(j,_)},x=()=>{f()},w=v.derivedStats.reduce((j,_)=>(j[_.category]||(j[_.category]=[]),j[_.category].push(_),j),{}),N=["combat","survival","movement","magic"];return r.jsxs(ae,{className:$("w-full",e),children:[r.jsx(de,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx(xf,{className:"h-5 w-5"}),"Attributes & Derived Stats"]}),t&&r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>i(!a),children:a?r.jsx(Ic,{className:"h-4 w-4"}):r.jsx(vt,{className:"h-4 w-4"})})]})}),r.jsxs(oe,{className:"space-y-6",children:[t&&a&&r.jsx(lI,{level:c,assignments:o,onAttributeChange:p,onClearAll:x,onUpdateAttributeLevel:m,getTotalAssignments:g,getMaxPossibleAssignments:b,getRemainingAssignments:y}),s&&r.jsx(dI,{displayData:l,level:c,compact:n,selectedRace:u}),s&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-lg font-medium text-foreground",children:"Derived Stats"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(j=>{const _=w[j];return!_||_.length===0?null:r.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"text-sm font-medium mb-3 capitalize",children:[j," Stats"]}),r.jsx("div",{className:"space-y-2",children:_.map(k=>r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:k.name}),r.jsx("span",{className:"font-medium",children:k.isPercentage?`${k.value}%`:k.value})]},k.name))})]},j)})})]})]})]})}const Wd=new Map;function fI(){Wd.clear()}fI();function mI(e,t={}){if(!e)return[];const s=JSON.stringify({text:e,options:t});if(Wd.has(s))return Wd.get(s);let n=[{text:e,key:"0"}];return t.customPatterns&&t.customPatterns.length>0&&t.customPatterns.forEach((a,i)=>{const o=[];n.forEach(l=>{if(l.className)o.push(l);else{let c=0,u;const d=new RegExp(a.pattern,a.pattern.flags.includes("g")?a.pattern.flags:a.pattern.flags+"g");d.lastIndex=0;let f=0;for(;(u=d.exec(l.text))!==null;){u.index>c&&o.push({text:l.text.slice(c,u.index),key:`${l.key}-${f++}`});let m=u[0];const g=typeof a.className=="function"?a.className(u[0]):a.className;a.transform&&(m=a.transform(m)),o.push({text:m,className:g,key:`${l.key}-${f++}`}),c=d.lastIndex}c<l.text.length&&o.push({text:l.text.slice(c),key:`${l.key}-${f++}`})}}),n=o}),n=n.map((a,i)=>({...a,key:a.key||String(i)})),Wd.set(s,n),n}const hI=["health","magicka","stamina","health regeneration","magicka regeneration","stamina regeneration"],gI=["one-handed","two-handed","archery","block","heavy armor","light armor","smithing","alchemy"];function B0(){return{highlightBrackets:!0,highlightAttributes:!0,highlightSkills:!0,highlightNumbers:!0,customPatterns:[{pattern:/\*\*\*([^*]+)\*\*\*/g,className:e=>{const s=e.slice(3,-3).match(/[+-]?\d+(?:\.\d+)?%?/);if(s){const n=parseFloat(s[0]),a=s[0].startsWith("+")||n>0,i=s[0].startsWith("-")||n<0;if(a)return"font-bold text-green-600 bg-skyrim-gold/10 px-1 py-0.5 rounded";if(i)return"font-bold text-red-600 bg-skyrim-gold/10 px-1 py-0.5 rounded"}return"font-bold text-skyrim-gold bg-skyrim-gold/10 px-1 py-0.5 rounded"},transform:e=>e.slice(3,-3)},{pattern:/<([^>]+)>/g,className:e=>{const t=e.slice(1,-1);if(!/^\d+$/.test(t))return"text-foreground"},transform:e=>{const t=e.match(/<([^>]+)>/);return t?t[1]:e.slice(1,-1)}},{pattern:/[+-]?\d+(?:\.\d+)?%?/g,className:e=>{const t=parseFloat(e),s=e.startsWith("+")||t>0,n=e.startsWith("-")||t<0,a=t===0;return s?"font-bold text-green-600":n?"font-bold text-red-600":a?"font-bold text-skyrim-gold":"font-bold text-green-600"}},{pattern:new RegExp(`\\b(${hI.join("|")})\\b`,"gi"),className:"font-semibold text-primary"},{pattern:new RegExp(`\\b(${gI.join("|")})\\b`,"gi"),className:"font-semibold text-primary"}]}}function we({text:e,options:t,className:s="text-sm text-muted-foreground",as:n="div"}){const a=h.useMemo(()=>B0(),[]),i=h.useMemo(()=>e?mI(e,t||a):[],[e,t,a]);if(!e)return null;if(s.includes("line-clamp")){const l=s.match(/line-clamp-\d+/g)||[],c=s.replace(/line-clamp-\d+/g,"").trim(),u=n==="p"?"span":"div";return r.jsx(n,{className:c,children:r.jsx(u,{className:`${l.join(" ")} overflow-hidden`,children:i.map(d=>r.jsx("span",{className:d.className,children:d.text},d.key))})})}return r.jsx(n,{className:s,children:i.map(l=>r.jsx("span",{className:l.className,children:l.text},l.key))})}const Ut=({children:e,title:t,description:s,className:n=""})=>r.jsxs("div",{className:`container mx-auto p-6 space-y-6 ${n}`,children:[t&&r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:t}),s&&r.jsx(we,{text:s,className:"text-muted-foreground mt-2 max-w-4xl",as:"p"})]})}),e]});function I0(e){const t=e+"CollectionProvider",[s,n]=Us(t),[a,i]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:v,children:p}=y,x=z.useRef(null),w=z.useRef(new Map).current;return r.jsx(a,{scope:v,itemMap:w,collectionRef:x,children:p})};o.displayName=t;const l=e+"CollectionSlot",c=el(l),u=z.forwardRef((y,v)=>{const{scope:p,children:x}=y,w=i(l,p),N=He(v,w.collectionRef);return r.jsx(c,{ref:N,children:x})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",m=el(d),g=z.forwardRef((y,v)=>{const{scope:p,children:x,...w}=y,N=z.useRef(null),j=He(v,N),_=i(d,p);return z.useEffect(()=>(_.itemMap.set(N,{ref:N,...w}),()=>void _.itemMap.delete(N))),r.jsx(m,{[f]:"",ref:j,children:x})});g.displayName=d;function b(y){const v=i(e+"CollectionConsumer",y);return z.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((_,k)=>w.indexOf(_.ref.current)-w.indexOf(k.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},b,n]}var pI=h.createContext(void 0);function _u(e){const t=h.useContext(pI);return e||t||"ltr"}var Jh="rovingFocusGroup.onEntryFocus",xI={bubbles:!1,cancelable:!0},Cu="RovingFocusGroup",[kp,zS,yI]=I0(Cu),[vI,$m]=Us(Cu,[yI]),[bI,wI]=vI(Cu),OS=h.forwardRef((e,t)=>r.jsx(kp.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(kp.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(NI,{...e,ref:t})})}));OS.displayName=Cu;var NI=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,m=h.useRef(null),g=He(t,m),b=_u(i),[y,v]=Va({prop:o,defaultProp:l??null,onChange:c,caller:Cu}),[p,x]=h.useState(!1),w=es(u),N=zS(s),j=h.useRef(!1),[_,k]=h.useState(0);return h.useEffect(()=>{const A=m.current;if(A)return A.addEventListener(Jh,w),()=>A.removeEventListener(Jh,w)},[w]),r.jsx(bI,{scope:s,orientation:n,dir:b,loop:a,currentTabStopId:y,onItemFocus:h.useCallback(A=>v(A),[v]),onItemShiftTab:h.useCallback(()=>x(!0),[]),onFocusableItemAdd:h.useCallback(()=>k(A=>A+1),[]),onFocusableItemRemove:h.useCallback(()=>k(A=>A-1),[]),children:r.jsx(je.div,{tabIndex:p||_===0?-1:0,"data-orientation":n,...f,ref:g,style:{outline:"none",...e.style},onMouseDown:ne(e.onMouseDown,()=>{j.current=!0}),onFocus:ne(e.onFocus,A=>{const S=!j.current;if(A.target===A.currentTarget&&S&&!p){const C=new CustomEvent(Jh,xI);if(A.currentTarget.dispatchEvent(C),!C.defaultPrevented){const M=N().filter(P=>P.focusable),E=M.find(P=>P.active),R=M.find(P=>P.id===y),O=[E,R,...M].filter(Boolean).map(P=>P.ref.current);$S(O,d)}}j.current=!1}),onBlur:ne(e.onBlur,()=>x(!1))})})}),BS="RovingFocusGroupItem",IS=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Ea(),u=i||c,d=wI(BS,s),f=d.currentTabStopId===u,m=zS(s),{onFocusableItemAdd:g,onFocusableItemRemove:b,currentTabStopId:y}=d;return h.useEffect(()=>{if(n)return g(),()=>b()},[n,g,b]),r.jsx(kp.ItemSlot,{scope:s,id:u,focusable:n,active:a,children:r.jsx(je.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:ne(e.onMouseDown,v=>{n?d.onItemFocus(u):v.preventDefault()}),onFocus:ne(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:ne(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const p=SI(v,d.orientation,d.dir);if(p!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=m().filter(N=>N.focusable).map(N=>N.ref.current);if(p==="last")w.reverse();else if(p==="prev"||p==="next"){p==="prev"&&w.reverse();const N=w.indexOf(v.currentTarget);w=d.loop?_I(w,N+1):w.slice(N+1)}setTimeout(()=>$S(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:y!=null}):o})})});IS.displayName=BS;var jI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function SI(e,t,s){const n=kI(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return jI[n]}function $S(e,t=!1){const s=document.activeElement;for(const n of e)if(n===s||(n.focus({preventScroll:t}),document.activeElement!==s))return}function _I(e,t){return e.map((s,n)=>e[(t+n)%e.length])}var FS=OS,HS=IS,Fm="Tabs",[CI,Bae]=Us(Fm,[$m]),US=$m(),[EI,$0]=CI(Fm),GS=h.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=_u(l),[f,m]=Va({prop:n,onChange:a,defaultProp:i??"",caller:Fm});return r.jsx(EI,{scope:s,baseId:Ea(),value:f,onValueChange:m,orientation:o,dir:d,activationMode:c,children:r.jsx(je.div,{dir:d,"data-orientation":o,...u,ref:t})})});GS.displayName=Fm;var VS="TabsList",qS=h.forwardRef((e,t)=>{const{__scopeTabs:s,loop:n=!0,...a}=e,i=$0(VS,s),o=US(s);return r.jsx(FS,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:r.jsx(je.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});qS.displayName=VS;var QS="TabsTrigger",ZS=h.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,disabled:a=!1,...i}=e,o=$0(QS,s),l=US(s),c=XS(o.baseId,n),u=KS(o.baseId,n),d=n===o.value;return r.jsx(HS,{asChild:!0,...l,focusable:!a,active:d,children:r.jsx(je.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:ne(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:ne(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:ne(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});ZS.displayName=QS;var WS="TabsContent",YS=h.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,forceMount:a,children:i,...o}=e,l=$0(WS,s),c=XS(l.baseId,n),u=KS(l.baseId,n),d=n===l.value,f=h.useRef(d);return h.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),r.jsx(Kt,{present:a||d,children:({present:m})=>r.jsx(je.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});YS.displayName=WS;function XS(e,t){return`${e}-trigger-${t}`}function KS(e,t){return`${e}-content-${t}`}var AI=GS,RI=qS,TI=ZS,MI=YS;function qa({className:e,...t}){return r.jsx(AI,{"data-slot":"tabs",className:$("flex flex-col gap-2",e),...t})}function Qa({className:e,...t}){return r.jsx(RI,{"data-slot":"tabs-list",className:$("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function kt({className:e,...t}){return r.jsx(TI,{"data-slot":"tabs-trigger",className:$("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function At({className:e,...t}){return r.jsx(MI,{"data-slot":"tabs-content",className:$("flex-1 outline-none",e),...t})}const xs=[{label:"Build",value:"build",to:"/build"},{label:"Race",value:"race",to:"/build/race"},{label:"Birth Signs",value:"birth-signs",to:"/build/birth-signs"},{label:"Traits",value:"traits",to:"/build/traits"},{label:"Religion",value:"religions",to:"/build/religions"},{label:"Destiny",value:"destiny",to:"/build/destiny"},{label:"Perks",value:"perks",to:"/build/perks"}],DI=({currentPath:e})=>{var f;const t=lt(),s=m=>{const g=window.location.hash,[b,y]=g.split("?"),p=new URLSearchParams(y||"").get("b");p?window.location.hash=`${m}?b=${p}`:t(m)},n=xs.findIndex(m=>m.to===e),a=n>=0?n:0,i=m=>{const g=xs.find(b=>b.value===m);g&&s(g.to)},o=m=>{s(m.to)},l=()=>{a>0&&s(xs[a-1].to)},c=()=>{a<xs.length-1&&s(xs[a+1].to)},u=m=>{switch(m.key){case"ArrowLeft":m.preventDefault(),l();break;case"ArrowRight":m.preventDefault(),c();break;case"Home":m.preventDefault(),s(xs[0].to);break;case"End":m.preventDefault(),s(xs[xs.length-1].to);break}},d=((f=xs[a])==null?void 0:f.value)||"build";return r.jsx("div",{className:"bg-background border-b border-border shadow-sm sticky top-12 backdrop-blur-sm",style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},role:"navigation","aria-label":"Character build progress",onKeyDown:u,tabIndex:0,children:r.jsx("div",{style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:r.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r.jsx(G,{onClick:l,disabled:a===0,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to previous step: ${a>0?xs[a-1].label:"none"}`,children:r.jsx(Cm,{className:"h-4 w-4"})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx(qa,{value:d,onValueChange:i,children:r.jsx(Qa,{className:"flex w-full h-auto p-1 bg-muted relative",style:{backgroundColor:"hsl(var(--muted))",backgroundImage:"none"},role:"tablist","aria-label":"Character build steps",children:xs.map((m,g)=>r.jsxs(kt,{value:m.value,onClick:()=>o(m),className:$("inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-xs font-medium whitespace-nowrap transition-[color,box-shadow] relative","data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm","dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30","text-foreground dark:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","cursor-pointer select-none"),style:{backgroundColor:d===m.value?"hsl(var(--background))":"transparent",backgroundImage:"none"},title:`Step ${g+1}: ${m.label}`,role:"tab","aria-selected":d===m.value,"aria-label":`Step ${g+1}: ${m.label}`,children:[r.jsx("span",{className:"hidden sm:inline",children:m.label}),r.jsx("span",{className:"sm:hidden",children:m.label.split(" ")[0]}),d===m.value&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-skyrim-gold rounded-b-md transition-all duration-200"})]},m.value))})})}),r.jsx(G,{onClick:c,disabled:a===xs.length-1,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to next step: ${a<xs.length-1?xs[a+1].label:"none"}`,children:r.jsx(El,{className:"h-4 w-4"})})]})})})},PI=()=>{const e=Ga();return r.jsxs("div",{className:"flex flex-col min-h-full",children:[r.jsx(DI,{currentPath:e.pathname}),r.jsx("div",{className:"flex-grow",children:r.jsx(kP,{})})]})};function LI(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function JS(e){const[t,s]=h.useState(void 0);return Zn(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;s({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else s(void 0)},[e]),t}var Hm="Switch",[zI,Iae]=Us(Hm),[OI,BI]=zI(Hm),e_=h.forwardRef((e,t)=>{const{__scopeSwitch:s,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[m,g]=h.useState(null),b=He(t,w=>g(w)),y=h.useRef(!1),v=m?d||!!m.closest("form"):!0,[p,x]=Va({prop:a,defaultProp:i??!1,onChange:u,caller:Hm});return r.jsxs(OI,{scope:s,checked:p,disabled:l,children:[r.jsx(je.button,{type:"button",role:"switch","aria-checked":p,"aria-required":o,"data-state":a_(p),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onClick:ne(e.onClick,w=>{x(N=>!N),v&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),v&&r.jsx(n_,{control:m,bubbles:!y.current,name:n,value:c,checked:p,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});e_.displayName=Hm;var t_="SwitchThumb",s_=h.forwardRef((e,t)=>{const{__scopeSwitch:s,...n}=e,a=BI(t_,s);return r.jsx(je.span,{"data-state":a_(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});s_.displayName=t_;var II="SwitchBubbleInput",n_=h.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:n=!0,...a},i)=>{const o=h.useRef(null),l=He(o,i),c=LI(s),u=JS(t);return h.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==s&&g){const b=new Event("click",{bubbles:n});g.call(d,s),d.dispatchEvent(b)}},[c,s,n]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});n_.displayName=II;function a_(e){return e?"checked":"unchecked"}var r_=e_,$I=s_;const i_=h.forwardRef(({className:e,...t},s)=>r.jsx(r_,{className:$("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-black data-[state=unchecked]:bg-gray-300",e),...t,ref:s,children:r.jsx($I,{className:$("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-sm ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));i_.displayName=r_.displayName;function on({itemId:e,itemType:t,itemName:s,isInBuild:n=!1,className:a,onCheckedChange:i}){const{setRace:o,setStone:l,setReligion:c,setFavoriteBlessing:u,addRegularTrait:d,addBonusTrait:f,removeTrait:m,addMajorSkill:g,removeMajorSkill:b,removeMinorSkill:y,addEquipment:v,removeEquipment:p,build:x}=Ye(),N=n||(()=>{switch(t){case"race":return x.race===e;case"stone":return x.stone===e;case"religion":return x.religion===e;case"blessing":return x.favoriteBlessing===e;case"trait":return x.traits.regular.includes(e)||x.traits.bonus.includes(e);case"skill":return x.skills.major.includes(e)||x.skills.minor.includes(e);case"equipment":return x.equipment.includes(e);default:return!1}})(),j=k=>{if(i){i(k);return}switch(t){case"race":o(k?e:null);break;case"stone":l(k?e:null);break;case"religion":c(k?e:null);break;case"blessing":u(k?e:null);break;case"trait":k?x.traits.regular.length<2?d(e):x.traits.bonus.length<1&&f(e):m(e);break;case"skill":k?g(e):(b(e),y(e));break;case"equipment":k?v(e):p(e);break}},_=()=>N?`This ${t} is currently in your build`:`Add this ${t} to your character build`;return r.jsx("div",{className:$("flex items-center justify-center p-2 rounded-lg border transition-all duration-200 cursor-pointer hover:bg-muted/50",N?"border-[#d4af37] bg-[#d4af37]/20 shadow-md":"border-border",a),onClick:k=>{k.stopPropagation(),j(!N)},title:_(),children:r.jsx(i_,{checked:N,onCheckedChange:j,className:$("transition-all duration-200",N?"data-[state=checked]:bg-[#d4af37]":"")})})}function fi({categories:e,onSelect:t,placeholder:s="Search categories...",className:n=""}){const[a,i]=h.useState(!1),[o,l]=h.useState(null),[c,u]=h.useState(""),[d,f]=h.useState(-1),m=h.useRef(null),g=h.useRef(null),b=e.length===1?e[0]:null;h.useEffect(()=>{const k=A=>{m.current&&!m.current.contains(A.target)&&(i(!1),l(null),f(-1))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const y=o||b?(o||b).options.filter(k=>String(k.label||"").toLowerCase().includes(c.toLowerCase())||String(k.description||"").toLowerCase().includes(c.toLowerCase())):e.flatMap(k=>k.options.filter(A=>String(A.label||"").toLowerCase().includes(c.toLowerCase())||String(A.description||"").toLowerCase().includes(c.toLowerCase()))),v=k=>{u(k),i(!0),f(-1)},p=k=>{var A;l(k),u(""),(A=g.current)==null||A.focus()},x=k=>{t(k),u(""),l(null),i(!1),f(-1)},w=k=>{k.key==="ArrowDown"?(k.preventDefault(),f(A=>Math.min(A+1,y.length-1))):k.key==="ArrowUp"?(k.preventDefault(),f(A=>Math.max(A-1,-1))):k.key==="Enter"?(k.preventDefault(),d>=0&&y[d]&&x(y[d])):k.key==="Escape"&&(i(!1),l(null),f(-1))},N=()=>{i(!0)},j=o||b,_=!b&&!o;return r.jsxs("div",{ref:m,className:`relative ${n}`,children:[r.jsxs("div",{className:"relative",children:[r.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(os,{ref:g,type:"text",placeholder:j?j.placeholder:s,value:c,onChange:k=>v(k.target.value),onFocus:N,onKeyDown:w,className:"pl-10 pr-10"}),r.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>i(!a),children:r.jsx(vt,{className:`h-4 w-4 transition-transform ${a?"rotate-180":""}`})})]}),a&&r.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",style:{zIndex:_t.AUTOCOMPLETE+10},children:[_&&r.jsxs("div",{className:"p-2 border-b border-border",children:[r.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(k=>r.jsxs("button",{onClick:()=>p(k),className:"w-full text-left px-2 py-2 hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98] rounded text-sm flex items-center justify-between transition-all duration-200 cursor-pointer",children:[r.jsx("span",{children:k.name}),r.jsx(vt,{className:"h-4 w-4"})]},k.id))]}),r.jsx("div",{className:"p-2",children:y.length===0?r.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):y.map((k,A)=>r.jsxs("button",{onClick:()=>x(k),className:`w-full text-left px-2 py-2 rounded text-sm transition-all duration-200 cursor-pointer ${A===d?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"}`,children:[r.jsx("div",{className:"font-medium",children:k.label||"Unnamed Option"}),k.description&&r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:k.description})]},k.id))})]})]})}const FI=["top","right","bottom","left"],Pr=Math.min,Ts=Math.max,kf=Math.round,hd=Math.floor,Hn=e=>({x:e,y:e}),HI={left:"right",right:"left",bottom:"top",top:"bottom"},UI={start:"end",end:"start"};function Sp(e,t,s){return Ts(e,Pr(t,s))}function Pa(e,t){return typeof e=="function"?e(t):e}function La(e){return e.split("-")[0]}function Ol(e){return e.split("-")[1]}function F0(e){return e==="x"?"y":"x"}function H0(e){return e==="y"?"height":"width"}const GI=new Set(["top","bottom"]);function On(e){return GI.has(La(e))?"y":"x"}function U0(e){return F0(On(e))}function VI(e,t,s){s===void 0&&(s=!1);const n=Ol(e),a=U0(e),i=H0(a);let o=a==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Sf(o)),[o,Sf(o)]}function qI(e){const t=Sf(e);return[_p(e),t,_p(t)]}function _p(e){return e.replace(/start|end/g,t=>UI[t])}const ew=["left","right"],tw=["right","left"],QI=["top","bottom"],ZI=["bottom","top"];function WI(e,t,s){switch(e){case"top":case"bottom":return s?t?tw:ew:t?ew:tw;case"left":case"right":return t?QI:ZI;default:return[]}}function YI(e,t,s,n){const a=Ol(e);let i=WI(La(e),s==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(_p)))),i}function Sf(e){return e.replace(/left|right|bottom|top/g,t=>HI[t])}function XI(e){return{top:0,right:0,bottom:0,left:0,...e}}function o_(e){return typeof e!="number"?XI(e):{top:e,right:e,bottom:e,left:e}}function _f(e){const{x:t,y:s,width:n,height:a}=e;return{width:n,height:a,top:s,left:t,right:t+n,bottom:s+a,x:t,y:s}}function sw(e,t,s){let{reference:n,floating:a}=e;const i=On(t),o=U0(t),l=H0(o),c=La(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,m=n[l]/2-a[l]/2;let g;switch(c){case"top":g={x:d,y:n.y-a.height};break;case"bottom":g={x:d,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:f};break;case"left":g={x:n.x-a.width,y:f};break;default:g={x:n.x,y:n.y}}switch(Ol(t)){case"start":g[o]-=m*(s&&u?-1:1);break;case"end":g[o]+=m*(s&&u?-1:1);break}return g}const KI=async(e,t,s)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=s,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=sw(u,n,c),m=n,g={},b=0;for(let y=0;y<l.length;y++){const{name:v,fn:p}=l[y],{x,y:w,data:N,reset:j}=await p({x:d,y:f,initialPlacement:n,placement:m,strategy:a,middlewareData:g,rects:u,platform:o,elements:{reference:e,floating:t}});d=x??d,f=w??f,g={...g,[v]:{...g[v],...N}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:f}=sw(u,m,c)),y=-1)}return{x:d,y:f,placement:m,strategy:a,middlewareData:g}};async function Gc(e,t){var s;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=Pa(t,e),b=o_(g),v=l[m?f==="floating"?"reference":"floating":f],p=_f(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(v)))==null||s?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=_f(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:w,strategy:c}):x);return{top:(p.top-j.top+b.top)/N.y,bottom:(j.bottom-p.bottom+b.bottom)/N.y,left:(p.left-j.left+b.left)/N.x,right:(j.right-p.right+b.right)/N.x}}const JI=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Pa(e,t)||{};if(u==null)return{};const f=o_(d),m={x:s,y:n},g=U0(a),b=H0(g),y=await o.getDimensions(u),v=g==="y",p=v?"top":"left",x=v?"bottom":"right",w=v?"clientHeight":"clientWidth",N=i.reference[b]+i.reference[g]-m[g]-i.floating[b],j=m[g]-i.reference[g],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=_?_[w]:0;(!k||!await(o.isElement==null?void 0:o.isElement(_)))&&(k=l.floating[w]||i.floating[b]);const A=N/2-j/2,S=k/2-y[b]/2-1,C=Pr(f[p],S),M=Pr(f[x],S),E=C,R=k-y[b]-M,T=k/2-y[b]/2+A,O=Sp(E,T,R),P=!c.arrow&&Ol(a)!=null&&T!==O&&i.reference[b]/2-(T<E?C:M)-y[b]/2<0,B=P?T<E?T-E:T-R:0;return{[g]:m[g]+B,data:{[g]:O,centerOffset:T-O-B,...P&&{alignmentOffset:B}},reset:P}}}),e$=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:y=!0,...v}=Pa(e,t);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const p=La(a),x=On(l),w=La(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(w||!y?[Sf(l)]:qI(l)),_=b!=="none";!m&&_&&j.push(...YI(l,y,b,N));const k=[l,...j],A=await Gc(t,v),S=[];let C=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&S.push(A[p]),f){const T=VI(a,o,N);S.push(A[T[0]],A[T[1]])}if(C=[...C,{placement:a,overflows:S}],!S.every(T=>T<=0)){var M,E;const T=(((M=i.flip)==null?void 0:M.index)||0)+1,O=k[T];if(O&&(!(f==="alignment"?x!==On(O):!1)||C.every(L=>L.overflows[0]>0&&On(L.placement)===x)))return{data:{index:T,overflows:C},reset:{placement:O}};let P=(E=C.filter(B=>B.overflows[0]<=0).sort((B,L)=>B.overflows[1]-L.overflows[1])[0])==null?void 0:E.placement;if(!P)switch(g){case"bestFit":{var R;const B=(R=C.filter(L=>{if(_){const D=On(L.placement);return D===x||D==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(D=>D>0).reduce((D,I)=>D+I,0)]).sort((L,D)=>L[1]-D[1])[0])==null?void 0:R[0];B&&(P=B);break}case"initialPlacement":P=l;break}if(a!==P)return{reset:{placement:P}}}return{}}}};function nw(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function aw(e){return FI.some(t=>e[t]>=0)}const t$=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:n="referenceHidden",...a}=Pa(e,t);switch(n){case"referenceHidden":{const i=await Gc(t,{...a,elementContext:"reference"}),o=nw(i,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:aw(o)}}}case"escaped":{const i=await Gc(t,{...a,altBoundary:!0}),o=nw(i,s.floating);return{data:{escapedOffsets:o,escaped:aw(o)}}}default:return{}}}}},l_=new Set(["left","top"]);async function s$(e,t){const{placement:s,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=La(s),l=Ol(s),c=On(s)==="y",u=l_.has(o)?-1:1,d=i&&c?-1:1,f=Pa(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(g=l==="end"?b*-1:b),c?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const n$=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await s$(t,e);return o===((s=l.offset)==null?void 0:s.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},a$=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:p,y:x}=v;return{x:p,y:x}}},...c}=Pa(e,t),u={x:s,y:n},d=await Gc(t,c),f=On(La(a)),m=F0(f);let g=u[m],b=u[f];if(i){const v=m==="y"?"top":"left",p=m==="y"?"bottom":"right",x=g+d[v],w=g-d[p];g=Sp(x,g,w)}if(o){const v=f==="y"?"top":"left",p=f==="y"?"bottom":"right",x=b+d[v],w=b-d[p];b=Sp(x,b,w)}const y=l.fn({...t,[m]:g,[f]:b});return{...y,data:{x:y.x-s,y:y.y-n,enabled:{[m]:i,[f]:o}}}}}},r$=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Pa(e,t),d={x:s,y:n},f=On(a),m=F0(f);let g=d[m],b=d[f];const y=Pa(l,t),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const w=m==="y"?"height":"width",N=i.reference[m]-i.floating[w]+v.mainAxis,j=i.reference[m]+i.reference[w]-v.mainAxis;g<N?g=N:g>j&&(g=j)}if(u){var p,x;const w=m==="y"?"width":"height",N=l_.has(La(a)),j=i.reference[f]-i.floating[w]+(N&&((p=o.offset)==null?void 0:p[f])||0)+(N?0:v.crossAxis),_=i.reference[f]+i.reference[w]+(N?0:((x=o.offset)==null?void 0:x[f])||0)-(N?v.crossAxis:0);b<j?b=j:b>_&&(b=_)}return{[m]:g,[f]:b}}}},i$=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=Pa(e,t),d=await Gc(t,u),f=La(a),m=Ol(a),g=On(a)==="y",{width:b,height:y}=i.floating;let v,p;f==="top"||f==="bottom"?(v=f,p=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(p=f,v=m==="end"?"top":"bottom");const x=y-d.top-d.bottom,w=b-d.left-d.right,N=Pr(y-d[v],x),j=Pr(b-d[p],w),_=!t.middlewareData.shift;let k=N,A=j;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(A=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(k=x),_&&!m){const C=Ts(d.left,0),M=Ts(d.right,0),E=Ts(d.top,0),R=Ts(d.bottom,0);g?A=b-2*(C!==0||M!==0?C+M:Ts(d.left,d.right)):k=y-2*(E!==0||R!==0?E+R:Ts(d.top,d.bottom))}await c({...t,availableWidth:A,availableHeight:k});const S=await o.getDimensions(l.floating);return b!==S.width||y!==S.height?{reset:{rects:!0}}:{}}}};function Um(){return typeof window<"u"}function Bl(e){return c_(e)?(e.nodeName||"").toLowerCase():"#document"}function zs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Jn(e){var t;return(t=(c_(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function c_(e){return Um()?e instanceof Node||e instanceof zs(e).Node:!1}function Nn(e){return Um()?e instanceof Element||e instanceof zs(e).Element:!1}function Wn(e){return Um()?e instanceof HTMLElement||e instanceof zs(e).HTMLElement:!1}function rw(e){return!Um()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof zs(e).ShadowRoot}const o$=new Set(["inline","contents"]);function Eu(e){const{overflow:t,overflowX:s,overflowY:n,display:a}=jn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!o$.has(a)}const l$=new Set(["table","td","th"]);function c$(e){return l$.has(Bl(e))}const u$=[":popover-open",":modal"];function Gm(e){return u$.some(t=>{try{return e.matches(t)}catch{return!1}})}const d$=["transform","translate","scale","rotate","perspective"],f$=["transform","translate","scale","rotate","perspective","filter"],m$=["paint","layout","strict","content"];function G0(e){const t=V0(),s=Nn(e)?jn(e):e;return d$.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||f$.some(n=>(s.willChange||"").includes(n))||m$.some(n=>(s.contain||"").includes(n))}function h$(e){let t=Lr(e);for(;Wn(t)&&!al(t);){if(G0(t))return t;if(Gm(t))return null;t=Lr(t)}return null}function V0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const g$=new Set(["html","body","#document"]);function al(e){return g$.has(Bl(e))}function jn(e){return zs(e).getComputedStyle(e)}function Vm(e){return Nn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Lr(e){if(Bl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rw(e)&&e.host||Jn(e);return rw(t)?t.host:t}function u_(e){const t=Lr(e);return al(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wn(t)&&Eu(t)?t:u_(t)}function Vc(e,t,s){var n;t===void 0&&(t=[]),s===void 0&&(s=!0);const a=u_(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=zs(a);if(i){const l=Cp(o);return t.concat(o,o.visualViewport||[],Eu(a)?a:[],l&&s?Vc(l):[])}return t.concat(a,Vc(a,[],s))}function Cp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function d_(e){const t=jn(e);let s=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Wn(e),i=a?e.offsetWidth:s,o=a?e.offsetHeight:n,l=kf(s)!==i||kf(n)!==o;return l&&(s=i,n=o),{width:s,height:n,$:l}}function q0(e){return Nn(e)?e:e.contextElement}function Oo(e){const t=q0(e);if(!Wn(t))return Hn(1);const s=t.getBoundingClientRect(),{width:n,height:a,$:i}=d_(t);let o=(i?kf(s.width):s.width)/n,l=(i?kf(s.height):s.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const p$=Hn(0);function f_(e){const t=zs(e);return!V0()||!t.visualViewport?p$:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function x$(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==zs(e)?!1:t}function Ei(e,t,s,n){t===void 0&&(t=!1),s===void 0&&(s=!1);const a=e.getBoundingClientRect(),i=q0(e);let o=Hn(1);t&&(n?Nn(n)&&(o=Oo(n)):o=Oo(e));const l=x$(i,s,n)?f_(i):Hn(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const m=zs(i),g=n&&Nn(n)?zs(n):n;let b=m,y=Cp(b);for(;y&&n&&g!==b;){const v=Oo(y),p=y.getBoundingClientRect(),x=jn(y),w=p.left+(y.clientLeft+parseFloat(x.paddingLeft))*v.x,N=p.top+(y.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,f*=v.y,c+=w,u+=N,b=zs(y),y=Cp(b)}}return _f({width:d,height:f,x:c,y:u})}function Q0(e,t){const s=Vm(e).scrollLeft;return t?t.left+s:Ei(Jn(e)).left+s}function m_(e,t,s){s===void 0&&(s=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(s?0:Q0(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function y$(e){let{elements:t,rect:s,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Jn(n),l=t?Gm(t.floating):!1;if(n===o||l&&i)return s;let c={scrollLeft:0,scrollTop:0},u=Hn(1);const d=Hn(0),f=Wn(n);if((f||!f&&!i)&&((Bl(n)!=="body"||Eu(o))&&(c=Vm(n)),Wn(n))){const g=Ei(n);u=Oo(n),d.x=g.x+n.clientLeft,d.y=g.y+n.clientTop}const m=o&&!f&&!i?m_(o,c,!0):Hn(0);return{width:s.width*u.x,height:s.height*u.y,x:s.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:s.y*u.y-c.scrollTop*u.y+d.y+m.y}}function v$(e){return Array.from(e.getClientRects())}function b$(e){const t=Jn(e),s=Vm(e),n=e.ownerDocument.body,a=Ts(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Ts(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-s.scrollLeft+Q0(e);const l=-s.scrollTop;return jn(n).direction==="rtl"&&(o+=Ts(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function w$(e,t){const s=zs(e),n=Jn(e),a=s.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=V0();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const N$=new Set(["absolute","fixed"]);function j$(e,t){const s=Ei(e,!0,t==="fixed"),n=s.top+e.clientTop,a=s.left+e.clientLeft,i=Wn(e)?Oo(e):Hn(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function iw(e,t,s){let n;if(t==="viewport")n=w$(e,s);else if(t==="document")n=b$(Jn(e));else if(Nn(t))n=j$(t,s);else{const a=f_(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return _f(n)}function h_(e,t){const s=Lr(e);return s===t||!Nn(s)||al(s)?!1:jn(s).position==="fixed"||h_(s,t)}function k$(e,t){const s=t.get(e);if(s)return s;let n=Vc(e,[],!1).filter(l=>Nn(l)&&Bl(l)!=="body"),a=null;const i=jn(e).position==="fixed";let o=i?Lr(e):e;for(;Nn(o)&&!al(o);){const l=jn(o),c=G0(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&N$.has(a.position)||Eu(o)&&!c&&h_(e,o))?n=n.filter(d=>d!==o):a=l,o=Lr(o)}return t.set(e,n),n}function S$(e){let{element:t,boundary:s,rootBoundary:n,strategy:a}=e;const o=[...s==="clippingAncestors"?Gm(t)?[]:k$(t,this._c):[].concat(s),n],l=o[0],c=o.reduce((u,d)=>{const f=iw(t,d,a);return u.top=Ts(f.top,u.top),u.right=Pr(f.right,u.right),u.bottom=Pr(f.bottom,u.bottom),u.left=Ts(f.left,u.left),u},iw(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function _$(e){const{width:t,height:s}=d_(e);return{width:t,height:s}}function C$(e,t,s){const n=Wn(t),a=Jn(t),i=s==="fixed",o=Ei(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Hn(0);function u(){c.x=Q0(a)}if(n||!n&&!i)if((Bl(t)!=="body"||Eu(a))&&(l=Vm(t)),n){const g=Ei(t,!0,i,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?m_(a,l):Hn(0),f=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:f,y:m,width:o.width,height:o.height}}function eg(e){return jn(e).position==="static"}function ow(e,t){if(!Wn(e)||jn(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return Jn(e)===s&&(s=s.ownerDocument.body),s}function g_(e,t){const s=zs(e);if(Gm(e))return s;if(!Wn(e)){let a=Lr(e);for(;a&&!al(a);){if(Nn(a)&&!eg(a))return a;a=Lr(a)}return s}let n=ow(e,t);for(;n&&c$(n)&&eg(n);)n=ow(n,t);return n&&al(n)&&eg(n)&&!G0(n)?s:n||h$(e)||s}const E$=async function(e){const t=this.getOffsetParent||g_,s=this.getDimensions,n=await s(e.floating);return{reference:C$(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function A$(e){return jn(e).direction==="rtl"}const R$={convertOffsetParentRelativeRectToViewportRelativeRect:y$,getDocumentElement:Jn,getClippingRect:S$,getOffsetParent:g_,getElementRects:E$,getClientRects:v$,getDimensions:_$,getScale:Oo,isElement:Nn,isRTL:A$};function p_(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function T$(e,t){let s=null,n;const a=Jn(e);function i(){var l;clearTimeout(n),(l=s)==null||l.disconnect(),s=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:m,height:g}=u;if(l||t(),!m||!g)return;const b=hd(f),y=hd(a.clientWidth-(d+m)),v=hd(a.clientHeight-(f+g)),p=hd(d),w={rootMargin:-b+"px "+-y+"px "+-v+"px "+-p+"px",threshold:Ts(0,Pr(1,c))||1};let N=!0;function j(_){const k=_[0].intersectionRatio;if(k!==c){if(!N)return o();k?o(!1,k):n=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!p_(u,e.getBoundingClientRect())&&o(),N=!1}try{s=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{s=new IntersectionObserver(j,w)}s.observe(e)}return o(!0),i}function M$(e,t,s,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=q0(e),d=a||i?[...u?Vc(u):[],...Vc(t)]:[];d.forEach(p=>{a&&p.addEventListener("scroll",s,{passive:!0}),i&&p.addEventListener("resize",s)});const f=u&&l?T$(u,s):null;let m=-1,g=null;o&&(g=new ResizeObserver(p=>{let[x]=p;x&&x.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(t)})),s()}),u&&!c&&g.observe(u),g.observe(t));let b,y=c?Ei(e):null;c&&v();function v(){const p=Ei(e);y&&!p_(y,p)&&s(),y=p,b=requestAnimationFrame(v)}return s(),()=>{var p;d.forEach(x=>{a&&x.removeEventListener("scroll",s),i&&x.removeEventListener("resize",s)}),f==null||f(),(p=g)==null||p.disconnect(),g=null,c&&cancelAnimationFrame(b)}}const D$=n$,P$=a$,L$=e$,z$=i$,O$=t$,lw=JI,B$=r$,I$=(e,t,s)=>{const n=new Map,a={platform:R$,...s},i={...a.platform,_c:n};return KI(e,t,{...a,platform:i})};var $$=typeof document<"u",F$=function(){},Yd=$$?h.useLayoutEffect:F$;function Cf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(n=s;n--!==0;)if(!Cf(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=s;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!Cf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function x_(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function cw(e,t){const s=x_(e);return Math.round(t*s)/s}function tg(e){const t=h.useRef(e);return Yd(()=>{t.current=e}),t}function H$(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=h.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=h.useState(n);Cf(m,n)||g(n);const[b,y]=h.useState(null),[v,p]=h.useState(null),x=h.useCallback(L=>{L!==_.current&&(_.current=L,y(L))},[]),w=h.useCallback(L=>{L!==k.current&&(k.current=L,p(L))},[]),N=i||b,j=o||v,_=h.useRef(null),k=h.useRef(null),A=h.useRef(d),S=c!=null,C=tg(c),M=tg(a),E=tg(u),R=h.useCallback(()=>{if(!_.current||!k.current)return;const L={placement:t,strategy:s,middleware:m};M.current&&(L.platform=M.current),I$(_.current,k.current,L).then(D=>{const I={...D,isPositioned:E.current!==!1};T.current&&!Cf(A.current,I)&&(A.current=I,Tm.flushSync(()=>{f(I)}))})},[m,t,s,M,E]);Yd(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(L=>({...L,isPositioned:!1})))},[u]);const T=h.useRef(!1);Yd(()=>(T.current=!0,()=>{T.current=!1}),[]),Yd(()=>{if(N&&(_.current=N),j&&(k.current=j),N&&j){if(C.current)return C.current(N,j,R);R()}},[N,j,R,C,S]);const O=h.useMemo(()=>({reference:_,floating:k,setReference:x,setFloating:w}),[x,w]),P=h.useMemo(()=>({reference:N,floating:j}),[N,j]),B=h.useMemo(()=>{const L={position:s,left:0,top:0};if(!P.floating)return L;const D=cw(P.floating,d.x),I=cw(P.floating,d.y);return l?{...L,transform:"translate("+D+"px, "+I+"px)",...x_(P.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:D,top:I}},[s,l,P.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:R,refs:O,elements:P,floatingStyles:B}),[d,R,O,P,B])}const U$=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:n,padding:a}=typeof e=="function"?e(s):e;return n&&t(n)?n.current!=null?lw({element:n.current,padding:a}).fn(s):{}:n?lw({element:n,padding:a}).fn(s):{}}}},G$=(e,t)=>({...D$(e),options:[e,t]}),V$=(e,t)=>({...P$(e),options:[e,t]}),q$=(e,t)=>({...B$(e),options:[e,t]}),Q$=(e,t)=>({...L$(e),options:[e,t]}),Z$=(e,t)=>({...z$(e),options:[e,t]}),W$=(e,t)=>({...O$(e),options:[e,t]}),Y$=(e,t)=>({...U$(e),options:[e,t]});var X$="Arrow",y_=h.forwardRef((e,t)=>{const{children:s,width:n=10,height:a=5,...i}=e;return r.jsx(je.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});y_.displayName=X$;var K$=y_,Z0="Popper",[v_,Il]=Us(Z0),[J$,b_]=v_(Z0),w_=e=>{const{__scopePopper:t,children:s}=e,[n,a]=h.useState(null);return r.jsx(J$,{scope:t,anchor:n,onAnchorChange:a,children:s})};w_.displayName=Z0;var N_="PopperAnchor",j_=h.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:n,...a}=e,i=b_(N_,s),o=h.useRef(null),l=He(t,o);return h.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:r.jsx(je.div,{...a,ref:l})});j_.displayName=N_;var W0="PopperContent",[e6,t6]=v_(W0),k_=h.forwardRef((e,t)=>{var te,ye,be,Ne,Xe,nt;const{__scopePopper:s,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:b,...y}=e,v=b_(W0,s),[p,x]=h.useState(null),w=He(t,V=>x(V)),[N,j]=h.useState(null),_=JS(N),k=(_==null?void 0:_.width)??0,A=(_==null?void 0:_.height)??0,S=n+(i!=="center"?"-"+i:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},M=Array.isArray(u)?u:[u],E=M.length>0,R={padding:C,boundary:M.filter(n6),altBoundary:E},{refs:T,floatingStyles:O,placement:P,isPositioned:B,middlewareData:L}=H$({strategy:"fixed",placement:S,whileElementsMounted:(...V)=>M$(...V,{animationFrame:g==="always"}),elements:{reference:v.anchor},middleware:[G$({mainAxis:a+A,alignmentAxis:o}),c&&V$({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?q$():void 0,...R}),c&&Q$({...R}),Z$({...R,apply:({elements:V,rects:q,availableWidth:X,availableHeight:le})=>{const{width:se,height:J}=q.reference,Se=V.floating.style;Se.setProperty("--radix-popper-available-width",`${X}px`),Se.setProperty("--radix-popper-available-height",`${le}px`),Se.setProperty("--radix-popper-anchor-width",`${se}px`),Se.setProperty("--radix-popper-anchor-height",`${J}px`)}}),N&&Y$({element:N,padding:l}),a6({arrowWidth:k,arrowHeight:A}),m&&W$({strategy:"referenceHidden",...R})]}),[D,I]=C_(P),F=es(b);Zn(()=>{B&&(F==null||F())},[B,F]);const U=(te=L.arrow)==null?void 0:te.x,H=(ye=L.arrow)==null?void 0:ye.y,Z=((be=L.arrow)==null?void 0:be.centerOffset)!==0,[K,ue]=h.useState();return Zn(()=>{p&&ue(window.getComputedStyle(p).zIndex)},[p]),r.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:B?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(Ne=L.transformOrigin)==null?void 0:Ne.x,(Xe=L.transformOrigin)==null?void 0:Xe.y].join(" "),...((nt=L.hide)==null?void 0:nt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(e6,{scope:s,placedSide:D,onArrowChange:j,arrowX:U,arrowY:H,shouldHideArrow:Z,children:r.jsx(je.div,{"data-side":D,"data-align":I,...y,ref:w,style:{...y.style,animation:B?void 0:"none"}})})})});k_.displayName=W0;var S_="PopperArrow",s6={top:"bottom",right:"left",bottom:"top",left:"right"},__=h.forwardRef(function(t,s){const{__scopePopper:n,...a}=t,i=t6(S_,n),o=s6[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(K$,{...a,ref:s,style:{...a.style,display:"block"}})})});__.displayName=S_;function n6(e){return e!==null}var a6=e=>({name:"transformOrigin",options:e,fn(t){var v,p,x;const{placement:s,rects:n,middlewareData:a}=t,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=C_(s),f={start:"0%",center:"50%",end:"100%"}[d],m=(((p=a.arrow)==null?void 0:p.x)??0)+l/2,g=(((x=a.arrow)==null?void 0:x.y)??0)+c/2;let b="",y="";return u==="bottom"?(b=o?f:`${m}px`,y=`${-c}px`):u==="top"?(b=o?f:`${m}px`,y=`${n.floating.height+c}px`):u==="right"?(b=`${-c}px`,y=o?f:`${g}px`):u==="left"&&(b=`${n.floating.width+c}px`,y=o?f:`${g}px`),{data:{x:b,y}}}});function C_(e){const[t,s="center"]=e.split("-");return[t,s]}var E_=w_,Y0=j_,X0=k_,K0=__,Ep=["Enter"," "],r6=["ArrowDown","PageUp","Home"],A_=["ArrowUp","PageDown","End"],i6=[...r6,...A_],o6={ltr:[...Ep,"ArrowRight"],rtl:[...Ep,"ArrowLeft"]},l6={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Au="Menu",[qc,c6,u6]=I0(Au),[qi,R_]=Us(Au,[u6,Il,$m]),qm=Il(),T_=$m(),[d6,Qi]=qi(Au),[f6,Ru]=qi(Au),M_=e=>{const{__scopeMenu:t,open:s=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=qm(t),[c,u]=h.useState(null),d=h.useRef(!1),f=es(i),m=_u(a);return h.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),r.jsx(E_,{...l,children:r.jsx(d6,{scope:t,open:s,onOpenChange:f,content:c,onContentChange:u,children:r.jsx(f6,{scope:t,onClose:h.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:o,children:n})})})};M_.displayName=Au;var m6="MenuAnchor",J0=h.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e,a=qm(s);return r.jsx(Y0,{...a,...n,ref:t})});J0.displayName=m6;var ey="MenuPortal",[h6,D_]=qi(ey,{forceMount:void 0}),P_=e=>{const{__scopeMenu:t,forceMount:s,children:n,container:a}=e,i=Qi(ey,t);return r.jsx(h6,{scope:t,forceMount:s,children:r.jsx(Kt,{present:s||i.open,children:r.jsx(zm,{asChild:!0,container:a,children:n})})})};P_.displayName=ey;var sn="MenuContent",[g6,ty]=qi(sn),L_=h.forwardRef((e,t)=>{const s=D_(sn,e.__scopeMenu),{forceMount:n=s.forceMount,...a}=e,i=Qi(sn,e.__scopeMenu),o=Ru(sn,e.__scopeMenu);return r.jsx(qc.Provider,{scope:e.__scopeMenu,children:r.jsx(Kt,{present:n||i.open,children:r.jsx(qc.Slot,{scope:e.__scopeMenu,children:o.modal?r.jsx(p6,{...a,ref:t}):r.jsx(x6,{...a,ref:t})})})})}),p6=h.forwardRef((e,t)=>{const s=Qi(sn,e.__scopeMenu),n=h.useRef(null),a=He(t,n);return h.useEffect(()=>{const i=n.current;if(i)return iS(i)},[]),r.jsx(sy,{...e,ref:a,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:ne(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),x6=h.forwardRef((e,t)=>{const s=Qi(sn,e.__scopeMenu);return r.jsx(sy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),y6=el("MenuContent.ScrollLock"),sy=h.forwardRef((e,t)=>{const{__scopeMenu:s,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:b,...y}=e,v=Qi(sn,s),p=Ru(sn,s),x=qm(s),w=T_(s),N=c6(s),[j,_]=h.useState(null),k=h.useRef(null),A=He(t,k,v.onContentChange),S=h.useRef(0),C=h.useRef(""),M=h.useRef(0),E=h.useRef(null),R=h.useRef("right"),T=h.useRef(0),O=b?R0:h.Fragment,P=b?{as:y6,allowPinchZoom:!0}:void 0,B=D=>{var te,ye;const I=C.current+D,F=N().filter(be=>!be.disabled),U=document.activeElement,H=(te=F.find(be=>be.ref.current===U))==null?void 0:te.textValue,Z=F.map(be=>be.textValue),K=R6(Z,I,H),ue=(ye=F.find(be=>be.textValue===K))==null?void 0:ye.ref.current;(function be(Ne){C.current=Ne,window.clearTimeout(S.current),Ne!==""&&(S.current=window.setTimeout(()=>be(""),1e3))})(I),ue&&setTimeout(()=>ue.focus())};h.useEffect(()=>()=>window.clearTimeout(S.current),[]),Xk();const L=h.useCallback(D=>{var F,U;return R.current===((F=E.current)==null?void 0:F.side)&&M6(D,(U=E.current)==null?void 0:U.area)},[]);return r.jsx(g6,{scope:s,searchRef:C,onItemEnter:h.useCallback(D=>{L(D)&&D.preventDefault()},[L]),onItemLeave:h.useCallback(D=>{var I;L(D)||((I=k.current)==null||I.focus(),_(null))},[L]),onTriggerLeave:h.useCallback(D=>{L(D)&&D.preventDefault()},[L]),pointerGraceTimerRef:M,onPointerGraceIntentChange:h.useCallback(D=>{E.current=D},[]),children:r.jsx(O,{...P,children:r.jsx(A0,{asChild:!0,trapped:a,onMountAutoFocus:ne(i,D=>{var I;D.preventDefault(),(I=k.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(wu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:r.jsx(FS,{asChild:!0,...w,dir:p.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:_,onEntryFocus:ne(c,D=>{p.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(X0,{role:"menu","aria-orientation":"vertical","data-state":X_(v.open),"data-radix-menu-content":"",dir:p.dir,...x,...y,ref:A,style:{outline:"none",...y.style},onKeyDown:ne(y.onKeyDown,D=>{const F=D.target.closest("[data-radix-menu-content]")===D.currentTarget,U=D.ctrlKey||D.altKey||D.metaKey,H=D.key.length===1;F&&(D.key==="Tab"&&D.preventDefault(),!U&&H&&B(D.key));const Z=k.current;if(D.target!==Z||!i6.includes(D.key))return;D.preventDefault();const ue=N().filter(te=>!te.disabled).map(te=>te.ref.current);A_.includes(D.key)&&ue.reverse(),E6(ue)}),onBlur:ne(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(S.current),C.current="")}),onPointerMove:ne(e.onPointerMove,Qc(D=>{const I=D.target,F=T.current!==D.clientX;if(D.currentTarget.contains(I)&&F){const U=D.clientX>T.current?"right":"left";R.current=U,T.current=D.clientX}}))})})})})})})});L_.displayName=sn;var v6="MenuGroup",ny=h.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e;return r.jsx(je.div,{role:"group",...n,ref:t})});ny.displayName=v6;var b6="MenuLabel",z_=h.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e;return r.jsx(je.div,{...n,ref:t})});z_.displayName=b6;var Ef="MenuItem",uw="menu.itemSelect",Qm=h.forwardRef((e,t)=>{const{disabled:s=!1,onSelect:n,...a}=e,i=h.useRef(null),o=Ru(Ef,e.__scopeMenu),l=ty(Ef,e.__scopeMenu),c=He(t,i),u=h.useRef(!1),d=()=>{const f=i.current;if(!s&&f){const m=new CustomEvent(uw,{bubbles:!0,cancelable:!0});f.addEventListener(uw,g=>n==null?void 0:n(g),{once:!0}),Qk(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return r.jsx(O_,{...a,ref:c,disabled:s,onClick:ne(e.onClick,d),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),u.current=!0},onPointerUp:ne(e.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:ne(e.onKeyDown,f=>{const m=l.searchRef.current!=="";s||m&&f.key===" "||Ep.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Qm.displayName=Ef;var O_=h.forwardRef((e,t)=>{const{__scopeMenu:s,disabled:n=!1,textValue:a,...i}=e,o=ty(Ef,s),l=T_(s),c=h.useRef(null),u=He(t,c),[d,f]=h.useState(!1),[m,g]=h.useState("");return h.useEffect(()=>{const b=c.current;b&&g((b.textContent??"").trim())},[i.children]),r.jsx(qc.ItemSlot,{scope:s,disabled:n,textValue:a??m,children:r.jsx(HS,{asChild:!0,...l,focusable:!n,children:r.jsx(je.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:ne(e.onPointerMove,Qc(b=>{n?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ne(e.onPointerLeave,Qc(b=>o.onItemLeave(b))),onFocus:ne(e.onFocus,()=>f(!0)),onBlur:ne(e.onBlur,()=>f(!1))})})})}),w6="MenuCheckboxItem",B_=h.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:n,...a}=e;return r.jsx(U_,{scope:e.__scopeMenu,checked:s,children:r.jsx(Qm,{role:"menuitemcheckbox","aria-checked":Af(s)?"mixed":s,...a,ref:t,"data-state":ry(s),onSelect:ne(a.onSelect,()=>n==null?void 0:n(Af(s)?!0:!s),{checkForDefaultPrevented:!1})})})});B_.displayName=w6;var I_="MenuRadioGroup",[N6,j6]=qi(I_,{value:void 0,onValueChange:()=>{}}),$_=h.forwardRef((e,t)=>{const{value:s,onValueChange:n,...a}=e,i=es(n);return r.jsx(N6,{scope:e.__scopeMenu,value:s,onValueChange:i,children:r.jsx(ny,{...a,ref:t})})});$_.displayName=I_;var F_="MenuRadioItem",H_=h.forwardRef((e,t)=>{const{value:s,...n}=e,a=j6(F_,e.__scopeMenu),i=s===a.value;return r.jsx(U_,{scope:e.__scopeMenu,checked:i,children:r.jsx(Qm,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":ry(i),onSelect:ne(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,s)},{checkForDefaultPrevented:!1})})})});H_.displayName=F_;var ay="MenuItemIndicator",[U_,k6]=qi(ay,{checked:!1}),G_=h.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:n,...a}=e,i=k6(ay,s);return r.jsx(Kt,{present:n||Af(i.checked)||i.checked===!0,children:r.jsx(je.span,{...a,ref:t,"data-state":ry(i.checked)})})});G_.displayName=ay;var S6="MenuSeparator",V_=h.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e;return r.jsx(je.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});V_.displayName=S6;var _6="MenuArrow",q_=h.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e,a=qm(s);return r.jsx(K0,{...a,...n,ref:t})});q_.displayName=_6;var C6="MenuSub",[$ae,Q_]=qi(C6),mc="MenuSubTrigger",Z_=h.forwardRef((e,t)=>{const s=Qi(mc,e.__scopeMenu),n=Ru(mc,e.__scopeMenu),a=Q_(mc,e.__scopeMenu),i=ty(mc,e.__scopeMenu),o=h.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=h.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return h.useEffect(()=>d,[d]),h.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),r.jsx(J0,{asChild:!0,...u,children:r.jsx(O_,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":a.contentId,"data-state":X_(s.open),...e,ref:Lm(t,a.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:ne(e.onPointerMove,Qc(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!s.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),d()},100))})),onPointerLeave:ne(e.onPointerLeave,Qc(f=>{var g,b;d();const m=(g=s.content)==null?void 0:g.getBoundingClientRect();if(m){const y=(b=s.content)==null?void 0:b.dataset.side,v=y==="right",p=v?-5:5,x=m[v?"left":"right"],w=m[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+p,y:f.clientY},{x,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x,y:m.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ne(e.onKeyDown,f=>{var g;const m=i.searchRef.current!=="";e.disabled||m&&f.key===" "||o6[n.dir].includes(f.key)&&(s.onOpenChange(!0),(g=s.content)==null||g.focus(),f.preventDefault())})})})});Z_.displayName=mc;var W_="MenuSubContent",Y_=h.forwardRef((e,t)=>{const s=D_(sn,e.__scopeMenu),{forceMount:n=s.forceMount,...a}=e,i=Qi(sn,e.__scopeMenu),o=Ru(sn,e.__scopeMenu),l=Q_(W_,e.__scopeMenu),c=h.useRef(null),u=He(t,c);return r.jsx(qc.Provider,{scope:e.__scopeMenu,children:r.jsx(Kt,{present:n||i.open,children:r.jsx(qc.Slot,{scope:e.__scopeMenu,children:r.jsx(sy,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ne(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ne(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ne(e.onKeyDown,d=>{var g;const f=d.currentTarget.contains(d.target),m=l6[o.dir].includes(d.key);f&&m&&(i.onOpenChange(!1),(g=l.trigger)==null||g.focus(),d.preventDefault())})})})})})});Y_.displayName=W_;function X_(e){return e?"open":"closed"}function Af(e){return e==="indeterminate"}function ry(e){return Af(e)?"indeterminate":e?"checked":"unchecked"}function E6(e){const t=document.activeElement;for(const s of e)if(s===t||(s.focus(),document.activeElement!==t))return}function A6(e,t){return e.map((s,n)=>e[(t+n)%e.length])}function R6(e,t,s){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=s?e.indexOf(s):-1;let o=A6(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==s));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}function T6(e,t){const{x:s,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,m=c.y;d>n!=m>n&&s<(f-u)*(n-d)/(m-d)+u&&(a=!a)}return a}function M6(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return T6(s,t)}function Qc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var D6=M_,P6=J0,L6=P_,z6=L_,O6=ny,B6=z_,I6=Qm,$6=B_,F6=$_,H6=H_,U6=G_,G6=V_,V6=q_,q6=Z_,Q6=Y_,Zm="DropdownMenu",[Z6,Fae]=Us(Zm,[R_]),ms=R_(),[W6,K_]=Z6(Zm),J_=e=>{const{__scopeDropdownMenu:t,children:s,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=ms(t),u=h.useRef(null),[d,f]=Va({prop:a,defaultProp:i??!1,onChange:o,caller:Zm});return r.jsx(W6,{scope:t,triggerId:Ea(),triggerRef:u,contentId:Ea(),open:d,onOpenChange:f,onOpenToggle:h.useCallback(()=>f(m=>!m),[f]),modal:l,children:r.jsx(D6,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:s})})};J_.displayName=Zm;var e2="DropdownMenuTrigger",t2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:n=!1,...a}=e,i=K_(e2,s),o=ms(s);return r.jsx(P6,{asChild:!0,...o,children:r.jsx(je.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Lm(t,i.triggerRef),onPointerDown:ne(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ne(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});t2.displayName=e2;var Y6="DropdownMenuPortal",s2=e=>{const{__scopeDropdownMenu:t,...s}=e,n=ms(t);return r.jsx(L6,{...n,...s})};s2.displayName=Y6;var n2="DropdownMenuContent",a2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=K_(n2,s),i=ms(s),o=h.useRef(!1);return r.jsx(z6,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:ne(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ne(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a2.displayName=n2;var X6="DropdownMenuGroup",K6=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx(O6,{...a,...n,ref:t})});K6.displayName=X6;var J6="DropdownMenuLabel",r2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx(B6,{...a,...n,ref:t})});r2.displayName=J6;var eF="DropdownMenuItem",i2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx(I6,{...a,...n,ref:t})});i2.displayName=eF;var tF="DropdownMenuCheckboxItem",o2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx($6,{...a,...n,ref:t})});o2.displayName=tF;var sF="DropdownMenuRadioGroup",nF=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx(F6,{...a,...n,ref:t})});nF.displayName=sF;var aF="DropdownMenuRadioItem",l2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx(H6,{...a,...n,ref:t})});l2.displayName=aF;var rF="DropdownMenuItemIndicator",c2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx(U6,{...a,...n,ref:t})});c2.displayName=rF;var iF="DropdownMenuSeparator",u2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx(G6,{...a,...n,ref:t})});u2.displayName=iF;var oF="DropdownMenuArrow",lF=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx(V6,{...a,...n,ref:t})});lF.displayName=oF;var cF="DropdownMenuSubTrigger",d2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx(q6,{...a,...n,ref:t})});d2.displayName=cF;var uF="DropdownMenuSubContent",f2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=ms(s);return r.jsx(Q6,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});f2.displayName=uF;var dF=J_,fF=t2,mF=s2,m2=a2,h2=r2,g2=i2,p2=o2,x2=l2,y2=c2,v2=u2,b2=d2,w2=f2;const Zi=dF,Wi=fF,hF=h.forwardRef(({className:e,inset:t,children:s,...n},a)=>r.jsxs(b2,{ref:a,className:$("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[s,r.jsx(El,{className:"ml-auto h-4 w-4"})]}));hF.displayName=b2.displayName;const gF=h.forwardRef(({className:e,...t},s)=>r.jsx(w2,{ref:s,className:$("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:_t.DROPDOWN},...t}));gF.displayName=w2.displayName;const Gr=h.forwardRef(({className:e,sideOffset:t=4,...s},n)=>r.jsx(mF,{children:r.jsx(m2,{ref:n,sideOffset:t,className:$("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:_t.DROPDOWN},...s})}));Gr.displayName=m2.displayName;const us=h.forwardRef(({className:e,inset:t,...s},n)=>r.jsx(g2,{ref:n,className:$("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));us.displayName=g2.displayName;const pF=h.forwardRef(({className:e,children:t,checked:s,...n},a)=>r.jsxs(p2,{ref:a,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(y2,{children:r.jsx(Bc,{className:"h-4 w-4"})})}),t]}));pF.displayName=p2.displayName;const xF=h.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(x2,{ref:n,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(y2,{children:r.jsx(m0,{className:"h-2 w-2 fill-current"})})}),t]}));xF.displayName=x2.displayName;const yF=h.forwardRef(({className:e,inset:t,...s},n)=>r.jsx(h2,{ref:n,className:$("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));yF.displayName=h2.displayName;const vF=h.forwardRef(({className:e,...t},s)=>r.jsx(v2,{ref:s,className:$("-mx-1 my-1 h-px bg-muted",e),...t}));vF.displayName=v2.displayName;function bF(e,[t,s]){return Math.min(s,Math.max(t,e))}function wF(e,t){return h.useReducer((s,n)=>t[s][n]??s,e)}var iy="ScrollArea",[N2,Hae]=Us(iy),[NF,ln]=N2(iy),j2=h.forwardRef((e,t)=>{const{__scopeScrollArea:s,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=h.useState(null),[u,d]=h.useState(null),[f,m]=h.useState(null),[g,b]=h.useState(null),[y,v]=h.useState(null),[p,x]=h.useState(0),[w,N]=h.useState(0),[j,_]=h.useState(!1),[k,A]=h.useState(!1),S=He(t,M=>c(M)),C=_u(a);return r.jsx(NF,{scope:s,type:n,dir:C,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:g,onScrollbarXChange:b,scrollbarXEnabled:j,onScrollbarXEnabledChange:_,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:k,onScrollbarYEnabledChange:A,onCornerWidthChange:x,onCornerHeightChange:N,children:r.jsx(je.div,{dir:C,...o,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":p+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});j2.displayName=iy;var k2="ScrollAreaViewport",S2=h.forwardRef((e,t)=>{const{__scopeScrollArea:s,children:n,nonce:a,...i}=e,o=ln(k2,s),l=h.useRef(null),c=He(t,l,o.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),r.jsx(je.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});S2.displayName=k2;var ea="ScrollAreaScrollbar",oy=h.forwardRef((e,t)=>{const{forceMount:s,...n}=e,a=ln(ea,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return h.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?r.jsx(jF,{...n,ref:t,forceMount:s}):a.type==="scroll"?r.jsx(kF,{...n,ref:t,forceMount:s}):a.type==="auto"?r.jsx(_2,{...n,ref:t,forceMount:s}):a.type==="always"?r.jsx(ly,{...n,ref:t}):null});oy.displayName=ea;var jF=h.forwardRef((e,t)=>{const{forceMount:s,...n}=e,a=ln(ea,e.__scopeScrollArea),[i,o]=h.useState(!1);return h.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),r.jsx(Kt,{present:s||i,children:r.jsx(_2,{"data-state":i?"visible":"hidden",...n,ref:t})})}),kF=h.forwardRef((e,t)=>{const{forceMount:s,...n}=e,a=ln(ea,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Ym(()=>c("SCROLL_END"),100),[l,c]=wF("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),h.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const g=u[d];f!==g&&(c("SCROLL"),o()),f=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,i,c,o]),r.jsx(Kt,{present:s||l!=="hidden",children:r.jsx(ly,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:ne(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ne(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),_2=h.forwardRef((e,t)=>{const s=ln(ea,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=h.useState(!1),l=e.orientation==="horizontal",c=Ym(()=>{if(s.viewport){const u=s.viewport.offsetWidth<s.viewport.scrollWidth,d=s.viewport.offsetHeight<s.viewport.scrollHeight;o(l?u:d)}},10);return rl(s.viewport,c),rl(s.content,c),r.jsx(Kt,{present:n||i,children:r.jsx(ly,{"data-state":i?"visible":"hidden",...a,ref:t})})}),ly=h.forwardRef((e,t)=>{const{orientation:s="vertical",...n}=e,a=ln(ea,e.__scopeScrollArea),i=h.useRef(null),o=h.useRef(0),[l,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=T2(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,g){return RF(m,o.current,l,g)}return s==="horizontal"?r.jsx(SF,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=dw(m,l,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=f(m,a.dir))}}):s==="vertical"?r.jsx(_F,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=dw(m,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=f(m))}}):null}),SF=h.forwardRef((e,t)=>{const{sizes:s,onSizesChange:n,...a}=e,i=ln(ea,e.__scopeScrollArea),[o,l]=h.useState(),c=h.useRef(null),u=He(t,c,i.onScrollbarXChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(E2,{"data-orientation":"horizontal",...a,ref:u,sizes:s,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Wm(s)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),D2(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Tf(o.paddingLeft),paddingEnd:Tf(o.paddingRight)}})}})}),_F=h.forwardRef((e,t)=>{const{sizes:s,onSizesChange:n,...a}=e,i=ln(ea,e.__scopeScrollArea),[o,l]=h.useState(),c=h.useRef(null),u=He(t,c,i.onScrollbarYChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(E2,{"data-orientation":"vertical",...a,ref:u,sizes:s,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Wm(s)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),D2(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Tf(o.paddingTop),paddingEnd:Tf(o.paddingBottom)}})}})}),[CF,C2]=N2(ea),E2=h.forwardRef((e,t)=>{const{__scopeScrollArea:s,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=e,g=ln(ea,s),[b,y]=h.useState(null),v=He(t,S=>y(S)),p=h.useRef(null),x=h.useRef(""),w=g.viewport,N=n.content-n.viewport,j=es(d),_=es(c),k=Ym(f,10);function A(S){if(p.current){const C=S.clientX-p.current.left,M=S.clientY-p.current.top;u({x:C,y:M})}}return h.useEffect(()=>{const S=C=>{const M=C.target;(b==null?void 0:b.contains(M))&&j(C,N)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[w,b,N,j]),h.useEffect(_,[n,_]),rl(b,k),rl(g.content,k),r.jsx(CF,{scope:s,scrollbar:b,hasThumb:a,onThumbChange:es(i),onThumbPointerUp:es(o),onThumbPositionChange:_,onThumbPointerDown:es(l),children:r.jsx(je.div,{...m,ref:v,style:{position:"absolute",...m.style},onPointerDown:ne(e.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),p.current=b.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),A(S))}),onPointerMove:ne(e.onPointerMove,A),onPointerUp:ne(e.onPointerUp,S=>{const C=S.target;C.hasPointerCapture(S.pointerId)&&C.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=x.current,g.viewport&&(g.viewport.style.scrollBehavior=""),p.current=null})})})}),Rf="ScrollAreaThumb",A2=h.forwardRef((e,t)=>{const{forceMount:s,...n}=e,a=C2(Rf,e.__scopeScrollArea);return r.jsx(Kt,{present:s||a.hasThumb,children:r.jsx(EF,{ref:t,...n})})}),EF=h.forwardRef((e,t)=>{const{__scopeScrollArea:s,style:n,...a}=e,i=ln(Rf,s),o=C2(Rf,s),{onThumbPositionChange:l}=o,c=He(t,f=>o.onThumbChange(f)),u=h.useRef(void 0),d=Ym(()=>{u.current&&(u.current(),u.current=void 0)},100);return h.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(d(),!u.current){const g=TF(f,l);u.current=g,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,d,l]),r.jsx(je.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ne(e.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),b=f.clientX-g.left,y=f.clientY-g.top;o.onThumbPointerDown({x:b,y})}),onPointerUp:ne(e.onPointerUp,o.onThumbPointerUp)})});A2.displayName=Rf;var cy="ScrollAreaCorner",R2=h.forwardRef((e,t)=>{const s=ln(cy,e.__scopeScrollArea),n=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&n?r.jsx(AF,{...e,ref:t}):null});R2.displayName=cy;var AF=h.forwardRef((e,t)=>{const{__scopeScrollArea:s,...n}=e,a=ln(cy,s),[i,o]=h.useState(0),[l,c]=h.useState(0),u=!!(i&&l);return rl(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),rl(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?r.jsx(je.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Tf(e){return e?parseInt(e,10):0}function T2(e,t){const s=e/t;return isNaN(s)?0:s}function Wm(e){const t=T2(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-s)*t;return Math.max(n,18)}function RF(e,t,s,n="ltr"){const a=Wm(s),i=a/2,o=t||i,l=a-o,c=s.scrollbar.paddingStart+o,u=s.scrollbar.size-s.scrollbar.paddingEnd-l,d=s.content-s.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return M2([c,u],f)(e)}function dw(e,t,s="ltr"){const n=Wm(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=s==="ltr"?[0,o]:[o*-1,0],u=bF(e,c);return M2([0,o],[0,l])(u)}function M2(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(s-e[0])}}function D2(e,t){return e>0&&e<t}var TF=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=s.left!==i.left,l=s.top!==i.top;(o||l)&&t(),s=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function Ym(e,t){const s=es(e),n=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),h.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(s,t)},[s,t])}function rl(e,t){const s=es(t);Zn(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(s)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,s])}var P2=j2,MF=S2,DF=R2;const Ai=h.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(P2,{ref:n,className:$("relative overflow-hidden",e),...s,children:[r.jsx(MF,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(L2,{}),r.jsx(DF,{})]}));Ai.displayName=P2.displayName;const L2=h.forwardRef(({className:e,orientation:t="vertical",...s},n)=>r.jsx(oy,{ref:n,orientation:t,className:$("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:r.jsx(A2,{className:"relative flex-1 rounded-full bg-border"})}));L2.displayName=oy.displayName;function PF({items:e,viewMode:t,onItemSelect:s,selectedItem:n,renderItemCard:a,className:i}){return r.jsxs("div",{className:`space-y-4 ${i}`,children:[t==="grid"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(o=>r.jsx("div",{onClick:()=>s(o),className:"cursor-pointer transition-transform hover:scale-[1.02] relative",children:a(o,(n==null?void 0:n.id)===o.id)},o.id))}):r.jsx(Ai,{className:"h-[calc(100vh-300px)]",children:r.jsx("div",{className:"space-y-1 pr-4",children:e.map(o=>r.jsx("div",{onClick:()=>s(o),className:"cursor-pointer transition-colors hover:bg-muted/50 rounded-lg",children:a(o,(n==null?void 0:n.id)===o.id)},o.id))})}),e.length===0&&r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-muted-foreground",children:"No items found matching your criteria."})})]})}function LF({categories:e,onSelect:t,className:s=""}){return r.jsx("div",{className:`flex flex-wrap gap-4 justify-start ${s}`,children:e.map(n=>r.jsx("div",{className:"flex-1 min-w-[180px]",children:r.jsx(fi,{categories:[n],onSelect:t,placeholder:n.placeholder,className:"w-full"})},n.id))})}function zF({tags:e,onRemove:t,className:s=""}){return e.length===0?null:r.jsx("div",{className:`flex flex-wrap gap-2 ${s}`,children:e.map(n=>r.jsxs(Q,{variant:"secondary",className:"flex items-center gap-1 px-3 py-1 text-sm",children:[r.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.category,":"]}),r.jsx("span",{children:n.label}),r.jsx("button",{onClick:()=>t(n.id),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:r.jsx(ze,{className:"h-3 w-3"})})]},n.id))})}function z2({categories:e,onSelect:t,onCustomSearch:s,placeholder:n="Search by name, description, or abilities...",className:a=""}){const[i,o]=h.useState(!1),[l,c]=h.useState(null),[u,d]=h.useState(""),[f,m]=h.useState(-1),g=h.useRef(null),b=h.useRef(null),y=e.length===1?e[0]:null;h.useEffect(()=>{const C=M=>{g.current&&!g.current.contains(M.target)&&(o(!1),c(null),m(-1))};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const v=l||y?(l||y).options.filter(C=>C.label&&typeof C.label=="string"&&C.label.toLowerCase().includes(u.toLowerCase())||C.description&&typeof C.description=="string"&&C.description.toLowerCase().includes(u.toLowerCase())):e.flatMap(C=>C.options.filter(M=>M.label&&typeof M.label=="string"&&M.label.toLowerCase().includes(u.toLowerCase())||M.description&&typeof M.description=="string"&&M.description.toLowerCase().includes(u.toLowerCase()))),p=C=>{d(C),o(!0),m(-1)},x=C=>{var M;c(C),d(""),(M=b.current)==null||M.focus()},w=C=>{t(C),d(""),c(null),o(!1),m(-1)},N=()=>{u.trim()&&(s(u.trim()),d(""),c(null),o(!1),m(-1))},j=C=>{C.key==="ArrowDown"?(C.preventDefault(),m(M=>Math.min(M+1,v.length-1))):C.key==="ArrowUp"?(C.preventDefault(),m(M=>Math.max(M-1,-1))):C.key==="Enter"?(C.preventDefault(),f>=0&&v[f]?w(v[f]):u.trim()&&N()):C.key==="Escape"&&(o(!1),c(null),m(-1))},_=()=>{o(!0)},k=l||y,A=!y&&!l,S=u.trim()&&!v.some(C=>C.label&&typeof C.label=="string"&&C.label.toLowerCase()===u.toLowerCase());return r.jsxs("div",{ref:g,className:`relative ${a}`,children:[r.jsxs("div",{className:"relative",children:[r.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(os,{ref:b,type:"text",placeholder:k?k.placeholder:n,value:u,onChange:C=>p(C.target.value),onFocus:_,onKeyDown:j,className:"pl-10 pr-20"}),S&&r.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:N,title:"Add custom search term",children:r.jsx(br,{className:"h-4 w-4"})}),r.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>o(!i),children:r.jsx(vt,{className:`h-4 w-4 transition-transform ${i?"rotate-180":""}`})})]}),i&&r.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto",style:{zIndex:_t.AUTOCOMPLETE+10},children:[A&&r.jsxs("div",{className:"p-2 border-b border-border",children:[r.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(C=>r.jsxs("button",{onClick:()=>x(C),className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center justify-between",children:[r.jsx("span",{children:C.name}),r.jsx(vt,{className:"h-4 w-4"})]},C.id))]}),S&&r.jsx("div",{className:"p-2 border-b border-border",children:r.jsxs("button",{onClick:N,className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center gap-2",children:[r.jsx(br,{className:"h-4 w-4 text-primary"}),r.jsxs("span",{className:"font-medium",children:['Search for "',u,'"']}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"(Custom search)"})]})}),r.jsx("div",{className:"p-2",children:v.length===0&&!S?r.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):v.map((C,M)=>r.jsxs("button",{onClick:()=>w(C),className:`w-full text-left px-2 py-2 rounded text-sm ${M===f?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx("div",{className:"font-medium",children:C.label}),C.description&&r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:C.description})]},C.id))})]})]})}function ta({categories:e,onSelect:t,onCustomSearch:s,className:n=""}){const a=e.find(o=>o.id==="fuzzy-search"||o.id==="keywords"),i=e.filter(o=>o.id!=="fuzzy-search"&&o.id!=="keywords");return r.jsxs("div",{className:`flex flex-wrap gap-4 justify-start ${n}`,children:[a&&r.jsx("div",{className:"flex-1 min-w-[300px]",children:r.jsx(z2,{categories:[a],onSelect:t,onCustomSearch:s,placeholder:a.placeholder,className:"w-full"})}),i.map(o=>r.jsx("div",{className:"flex-shrink-0 min-w-[200px] max-w-[300px]",children:r.jsx(fi,{categories:[o],onSelect:t,placeholder:o.placeholder,className:"w-full"})},o.id))]})}function OF({children:e,className:t=""}){return r.jsx("div",{className:`grid grid-cols-1 lg:grid-cols-6 gap-6 ${t}`,children:e})}function BF({children:e,className:t=""}){return r.jsx("div",{className:`lg:col-span-5 ${t}`,children:e})}function IF({children:e,className:t=""}){return r.jsx("div",{className:`lg:col-span-1 ${t}`,children:r.jsx("div",{className:"sticky top-6",style:{zIndex:_t.STICKY},children:e})})}function $F({title:e="Select an Item",description:t="Choose an item from the list to view its details"}){return r.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 text-center",children:[r.jsx(hr,{className:"text-lg font-semibold mb-2",children:e}),r.jsx(pe,{className:"text-muted-foreground",children:t})]})}function FF({searchCategories:e,selectedTags:t,viewMode:s="grid",onTagSelect:n,onTagRemove:a,onViewModeChange:i,children:o,className:l=""}){return r.jsxs("div",{className:`mb-8 space-y-4 ${l}`,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx(LF,{categories:e,onSelect:n,className:"w-full"})}),i&&r.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[r.jsx(G,{variant:s==="grid"?"default":"ghost",size:"sm",onClick:()=>i("grid"),className:"h-8 px-3",children:r.jsx($i,{className:"h-4 w-4"})}),r.jsx(G,{variant:s==="list"?"default":"ghost",size:"sm",onClick:()=>i("list"),className:"h-8 px-3",children:r.jsx(Fr,{className:"h-4 w-4"})})]})]}),r.jsx(zF,{tags:t,onRemove:a,className:"justify-start"}),o&&r.jsx("div",{className:"pt-4",children:o})]})}const HF=(e,t)=>{const s=e.effects.length>0,n=e.effects.length,a=e.targetType==="touch",i=e.targetType==="self",o=e.foundOnItems.length,l=[e.targetType,...e.effects.map(u=>u.name.toLowerCase()),...e.foundOnItems.map(u=>u.type),...e.plugin.toLowerCase().split(" "),t.toLowerCase().split(" ")].filter(Boolean),c=[e.name,...e.effects.map(u=>`${u.name} ${u.description}`),...e.foundOnItems.map(u=>`${u.name} ${u.type}`),e.plugin,t].join(" ").toLowerCase();return{...e,hasEffects:s,effectCount:n,isWeaponEnchantment:a,isArmorEnchantment:i,itemCount:o,tags:[...new Set(l)],searchableText:c,category:t}},za=fs((e,t)=>({categories:[],data:[],loading:!1,error:null,viewState:{viewMode:"grid",sortBy:"name",sortOrder:"asc",selectedEnchantment:null,expandedEnchantments:[]},filters:{categories:[],targetTypes:[],itemTypes:[],plugins:[],searchTerm:"",hasEffects:null,hasWornRestrictions:null,minItemCount:null,maxItemCount:null},searchResults:[],searchLoading:!1,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const n=await fetch(Vt("data/enchantment-primer.json"));if(!n.ok)throw new Error(`Failed to load enchantments: ${n.statusText}`);const a=await n.json(),i=[];a.categories.forEach(o=>{o.enchantments.forEach(l=>{i.push(HF(l,o.name))})}),e({categories:a.categories,data:i,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load enchantments",loading:!1})}}},setViewState:s=>{e(n=>({viewState:{...n.viewState,...s}}),!1,"setViewState")},setFilters:s=>{e(n=>({filters:{...n.filters,...s}}),!1,"setFilters")},search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>i.name.toLowerCase().includes(a)||i.searchableText.includes(a)||i.tags.some(o=>o.toLowerCase().includes(a))||i.effects.some(o=>o.name.toLowerCase().includes(a)||o.description.toLowerCase().includes(a))||i.foundOnItems.some(o=>o.name.toLowerCase().includes(a)||o.type.toLowerCase().includes(a)))},selectEnchantment:s=>{e(n=>({viewState:{...n.viewState,selectedEnchantment:s}}),!1,"selectEnchantment")},clearSelection:()=>{e(s=>({viewState:{...s.viewState,selectedEnchantment:null}}),!1,"clearSelection")},clearSearch:()=>{e({searchResults:[],searchLoading:!1},!1,"clearSearch")},get selectedEnchantment(){const s=t();return s.viewState.selectedEnchantment?s.data.find(n=>n.baseEnchantmentId===s.viewState.selectedEnchantment):void 0},getById:s=>t().data.find(a=>a.baseEnchantmentId===s),getByBaseEnchantmentId:s=>t().data.find(a=>a.baseEnchantmentId===s),getByCategory:s=>t().data.filter(a=>a.category===s),getByTargetType:s=>t().data.filter(a=>a.targetType===s),getByPlugin:s=>t().data.filter(a=>a.plugin===s)}));class Ke{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.output=="string"&&Array.isArray(t.ingredients)&&Array.isArray(t.effects)}static equals(t,s){return t.name===s.name}static addComputedProperties(t){const s=t.effects.length>0,n=t.effects.length,a=t.ingredients.length,i=a>3||n>2,o=a<=2&&n<=1,l=t.effects.reduce((m,g)=>m+g.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=this.determineDifficulty(t,{ingredientCount:a,effectCount:n,isComplex:i,isSimple:o}),d=this.generateTags(t,{hasEffects:s,effectCount:n,ingredientCount:a,isComplex:i,isSimple:o,difficulty:u}),f=this.createSearchableText(t,d);return{...t,hasEffects:s,effectCount:n,ingredientCount:a,isComplex:i,isSimple:o,totalMagnitude:l,maxDuration:c,tags:d,searchableText:f,difficulty:u}}static determineDifficulty(t,s){return s.isSimple?"Simple":s.isComplex?"Complex":"Moderate"}static generateTags(t,s){const n=[];return t.category&&n.push(t.category),n.push(s.difficulty),s.hasEffects&&n.push("Has Effects"),s.ingredientCount===1?n.push("Single Ingredient"):s.ingredientCount<=3?n.push("Few Ingredients"):n.push("Many Ingredients"),s.effectCount===1?n.push("Single Effect"):s.effectCount<=2?n.push("Few Effects"):n.push("Many Effects"),t.effects.forEach(a=>{n.push(a.name)}),t.ingredients.forEach(a=>{n.push(a)}),[...new Set(n)]}static createSearchableText(t,s){const n=t.ingredients.map(i=>typeof i=="string"?i:i&&typeof i=="object"&&(i.item||i.name||i.label||i.id)||String(i));return[t.name,t.output,t.description||"",...n,...t.effects.map(i=>i.name),...t.effects.map(i=>i.description),...s].join(" ").toLowerCase()}static filterByCategory(t,s){return t.filter(n=>n.category===s)}static filterByCategories(t,s){return s.length===0?t:t.filter(n=>n.category&&s.includes(n.category))}static filterByDifficulty(t,s){return t.filter(n=>n.difficulty===s)}static filterByDifficulties(t,s){return s.length===0?t:t.filter(n=>s.includes(n.difficulty))}static filterByIngredientCount(t,s,n){return t.filter(a=>{const i=a.ingredientCount;return!(s!==null&&i<s||n!==null&&i>n)})}static filterByMagnitude(t,s,n){return t.filter(a=>{const i=a.totalMagnitude;return!(s!==null&&i<s||n!==null&&i>n)})}static filterByEffectProperties(t,s,n){return t.filter(a=>!(s!==null&&a.hasEffects!==s||n!==null&&a.isComplex!==n))}static filterByIngredients(t,s){return s.length===0?t:t.filter(n=>s.some(a=>n.ingredients.some(i=>(typeof i=="string"?i:i.item||i.name||i.label||i.id||String(i)).toLowerCase().includes(a.toLowerCase()))))}static filterByEffects(t,s){return s.length===0?t:t.filter(n=>s.some(a=>n.effects.some(i=>i.name.toLowerCase().includes(a.toLowerCase()))))}static search(t,s){if(!s.trim())return[];const n=s.toLowerCase().trim(),a=[];for(const i of t){const o=this.calculateSearchScore(i,n);if(o>0){const l=this.getMatchedFields(i,n);a.push({recipe:i,score:o,matchedFields:l})}}return a.sort((i,o)=>o.score-i.score)}static calculateSearchScore(t,s){var i;let n=0;const a=s.toLowerCase();return t.name.toLowerCase()===a&&(n+=100),t.output.toLowerCase()===a&&(n+=100),t.name.toLowerCase().includes(a)&&(n+=50),t.output.toLowerCase().includes(a)&&(n+=50),(i=t.description)!=null&&i.toLowerCase().includes(a)&&(n+=30),t.ingredients.forEach(o=>{const l=typeof o=="string"?o:o.item||o.name||o.label||o.id||String(o);l.toLowerCase()===a&&(n+=40),l.toLowerCase().includes(a)&&(n+=20)}),t.effects.forEach(o=>{o.name.toLowerCase()===a&&(n+=40),o.name.toLowerCase().includes(a)&&(n+=20),o.description.toLowerCase().includes(a)&&(n+=15)}),t.tags.forEach(o=>{o.toLowerCase()===a&&(n+=25),o.toLowerCase().includes(a)&&(n+=10)}),n}static getMatchedFields(t,s){var i;const n=[],a=s.toLowerCase();return t.name.toLowerCase().includes(a)&&n.push("name"),t.output.toLowerCase().includes(a)&&n.push("output"),(i=t.description)!=null&&i.toLowerCase().includes(a)&&n.push("description"),t.ingredients.forEach(o=>{(typeof o=="string"?o:o.item||o.name||o.label||o.id||String(o)).toLowerCase().includes(a)&&n.push("ingredients")}),t.effects.forEach(o=>{(o.name.toLowerCase().includes(a)||o.description.toLowerCase().includes(a))&&n.push("effects")}),[...new Set(n)]}static sort(t,s,n="asc"){return[...t].sort((i,o)=>{let l=0;switch(s){case"name":l=i.name.localeCompare(o.name);break;case"category":l=(i.category||"").localeCompare(o.category||"");break;case"difficulty":l=this.compareDifficulties(i.difficulty,o.difficulty);break;case"ingredientCount":l=i.ingredientCount-o.ingredientCount;break;case"effectCount":l=i.effectCount-o.effectCount;break;case"magnitude":l=i.totalMagnitude-o.totalMagnitude;break;case"duration":l=i.maxDuration-o.maxDuration;break}return n==="asc"?l:-l})}static compareDifficulties(t,s){const n={Simple:1,Moderate:2,Complex:3};return(n[t]||0)-(n[s]||0)}static getUniqueCategories(t){const s=t.map(n=>n.category).filter(n=>!!n);return[...new Set(s)].sort()}static getUniqueDifficulties(t){const s=t.map(n=>n.difficulty);return[...new Set(s)].sort((n,a)=>this.compareDifficulties(n,a))}static getUniqueEffects(t){const s=t.flatMap(n=>n.effects.map(a=>a.name));return[...new Set(s)].sort()}static getUniqueIngredients(t){const s=t.flatMap(n=>n.ingredients.map(a=>typeof a=="string"?a:a&&typeof a=="object"&&(a.item||a.name||a.label||a.id)||String(a)));return[...new Set(s)].filter(n=>n&&n!=="[object Object]").sort()}static getUniqueTags(t){const s=t.flatMap(n=>n.tags);return[...new Set(s)].sort()}static applyFilters(t,s){let n=[...t];return s.searchTerm.trim()&&(n=this.search(n,s.searchTerm).map(i=>i.recipe)),s.categories.length>0&&(n=this.filterByCategories(n,s.categories)),s.difficulties.length>0&&(n=this.filterByDifficulties(n,s.difficulties)),s.ingredients.length>0&&(n=this.filterByIngredients(n,s.ingredients)),s.effects.length>0&&(n=this.filterByEffects(n,s.effects)),n=this.filterByEffectProperties(n,s.hasEffects,s.isComplex),n=this.filterByIngredientCount(n,s.minIngredientCount,s.maxIngredientCount),n=this.filterByMagnitude(n,s.minMagnitude,s.maxMagnitude),n}static getStatistics(t){const s=t.length,n=t.filter(N=>N.type==="food").length,a=t.filter(N=>N.type==="alcohol").length,i={};t.forEach(N=>{N.category&&(i[N.category]=(i[N.category]||0)+1)});const o={};t.forEach(N=>{o[N.difficulty]=(o[N.difficulty]||0)+1});const l={};t.forEach(N=>{N.effects.forEach(j=>{l[j.name]=(l[j.name]||0)+1})});const c=t.reduce((N,j)=>N+j.ingredientCount,0),u=t.reduce((N,j)=>N+j.effectCount,0),d=s>0?c/s:0,f=s>0?u/s:0,m=t.reduce((N,j)=>N+j.totalMagnitude,0),g=t.reduce((N,j)=>N+j.maxDuration,0),b=s>0?m/s:0,y=s>0?g/s:0,v={};t.forEach(N=>{N.ingredients.forEach(j=>{v[j]=(v[j]||0)+1})});const p=Object.entries(v).map(([N,j])=>({name:N,count:j})).sort((N,j)=>j.count-N.count).slice(0,10),x={};t.forEach(N=>{N.effects.forEach(j=>{x[j.name]=(x[j.name]||0)+1})});const w=Object.entries(x).map(([N,j])=>({name:N,count:j})).sort((N,j)=>j.count-N.count).slice(0,10);return{totalRecipes:s,foodRecipes:n,alcoholRecipes:a,recipesByCategory:i,recipesByDifficulty:o,recipesByEffect:l,averageIngredientCount:d,averageEffectCount:f,averageMagnitude:b,averageDuration:y,topEffects:w,topIngredients:p}}static getEffectComparisons(t,s){const n={};return s.forEach(a=>{a.effects.forEach(i=>{n[i.name]||(n[i.name]={magnitudeSum:0,durationSum:0,count:0}),n[i.name].magnitudeSum+=i.magnitude,n[i.name].durationSum+=i.duration,n[i.name].count+=1})}),t.effects.map(a=>{const i=n[a.name],o=i.count>0?i.magnitudeSum/i.count:0,l=i.count>0?i.durationSum/i.count:0,c=a.magnitude-o,u=a.duration-l;return{name:a.name,magnitude:{value:a.magnitude,mean:o,difference:c,percentage:o>0?c/o*100:0},duration:{value:a.duration,mean:l,difference:u,percentage:l>0?u/l*100:0}}})}}const ci=class ci{constructor(){Re(this,"cache",null);Re(this,"lastFetch",0);Re(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return ci.instance||(ci.instance=new ci),ci.instance}async loadRecipes(){var t;if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const s=Vt("data/cookbook-wiki.json"),n=await fetch(s);if(!n.ok)throw new Error(`Failed to fetch recipes: ${n.status} ${n.statusText}`);const a=await n.json(),i=[];if(a.food&&Array.isArray(a.food)?i.push(...a.food):a.food&&typeof a.food=="object"&&a.food.recipes&&Array.isArray(a.food.recipes)&&i.push(...a.food.recipes),a.alcohol&&Array.isArray(a.alcohol)?i.push(...a.alcohol):a.alcohol&&typeof a.alcohol=="object"&&a.alcohol.recipes&&Array.isArray(a.alcohol.recipes)&&i.push(...a.alcohol.recipes),i.length===0){const u=((t=a.food)==null?void 0:t.recipes)||a.recipes||a;Array.isArray(u)&&i.push(...u)}if(!Array.isArray(i)||i.length===0)throw new Error("RecipeDataProvider: No valid recipes found in data structure");const o=[];let l=0,c=0;for(const u of i)if(Ke.isValid(u)){const d=Ke.addComputedProperties(u);o.push(d),l++}else console.warn("RecipeDataProvider: Invalid recipe data:",u),c++;return this.cache=o,this.lastFetch=Date.now(),o}catch(s){throw s}}async getRecipeData(){const t=await this.loadRecipes(),s=Ke.getStatistics(t);return{recipes:t,totalCount:s.totalRecipes,categories:Ke.getUniqueCategories(t),effects:Ke.getUniqueEffects(t),ingredients:Ke.getUniqueIngredients(t),lastUpdated:new Date().toISOString()}}async getRecipeByName(t){return(await this.loadRecipes()).find(n=>n.name===t)||null}async getRecipesByCategory(t){const s=await this.loadRecipes();return Ke.filterByCategory(s,t)}async getRecipesByDifficulty(t){const s=await this.loadRecipes();return Ke.filterByDifficulty(s,t)}async getRecipesByIngredient(t){const s=await this.loadRecipes();return Ke.filterByIngredients(s,[t])}async getRecipesByEffect(t){const s=await this.loadRecipes();return Ke.filterByEffects(s,[t])}async searchRecipes(t){const s=await this.loadRecipes();return Ke.search(s,t).map(a=>a.recipe)}async getStatistics(){const t=await this.loadRecipes();return Ke.getStatistics(t)}clearCache(){this.cache=null,this.lastFetch=0}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isExpired:this.cache!==null&&Date.now()-this.lastFetch>=this.CACHE_DURATION,timeUntilExpiry:this.cache?Math.max(0,this.CACHE_DURATION-(Date.now()-this.lastFetch)):0}}};Re(ci,"instance");let Ap=ci;const xa=fs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const a=await Ap.getInstance().loadRecipes();e({data:a,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load recipes",loading:!1})}}},getById:s=>t().data.find(a=>a.name===s),getByName:s=>t().data.find(a=>a.name===s),search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>{var o,l,c,u,d,f;return i.name.toLowerCase().includes(a)||i.output.toLowerCase().includes(a)||((o=i.description)==null?void 0:o.toLowerCase().includes(a))||((l=i.category)==null?void 0:l.toLowerCase().includes(a))||((c=i.difficulty)==null?void 0:c.toLowerCase().includes(a))||((u=i.tags)==null?void 0:u.some(m=>m.toLowerCase().includes(a)))||((d=i.ingredients)==null?void 0:d.some(m=>m.toLowerCase().includes(a)))||((f=i.effects)==null?void 0:f.some(m=>{var g;return m.name.toLowerCase().includes(a)||((g=m.description)==null?void 0:g.toLowerCase().includes(a))}))})},getByCategory:s=>t().data.filter(a=>a.category===s),getByDifficulty:s=>t().data.filter(a=>a.difficulty===s),getByIngredient:s=>t().data.filter(a=>a.ingredients.some(i=>i.toLowerCase().includes(s.toLowerCase()))),getByEffect:s=>t().data.filter(a=>a.effects.some(i=>i.name.toLowerCase().includes(s.toLowerCase())))})),UF=Object.freeze(Object.defineProperty({__proto__:null,useRecipesStore:xa},Symbol.toStringTag,{value:"Module"}));class Kr{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.editorId=="string"&&typeof t.school=="string"&&typeof t.level=="string"&&typeof t.magickaCost=="number"&&Array.isArray(t.effects)}static equals(t,s){return t.editorId===s.editorId}static addComputedProperties(t){const s=t.effects.length>0,n=t.effects.length,a=t.effects.some(m=>m.area>0),i=t.effects.some(m=>m.duration>0),o=t.effects.every(m=>m.duration===0),l=t.effects.reduce((m,g)=>m+g.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=Math.max(...t.effects.map(m=>m.area),0),d=this.generateTags(t,{hasEffects:s,isAreaSpell:a,isDurationSpell:i,isInstantSpell:o}),f=this.createSearchableText(t,d);return{...t,hasEffects:s,effectCount:n,isAreaSpell:a,isDurationSpell:i,isInstantSpell:o,totalMagnitude:l,maxDuration:c,maxArea:u,tags:d,searchableText:f}}static generateTags(t,s){const n=[];return n.push(t.school),n.push(t.level),s.hasEffects&&n.push("Has Effects"),s.isAreaSpell&&n.push("Area Effect"),s.isDurationSpell&&n.push("Duration"),s.isInstantSpell&&n.push("Instant"),t.magickaCost===0?n.push("Free"):t.magickaCost<=50?n.push("Low Cost"):t.magickaCost<=150?n.push("Medium Cost"):n.push("High Cost"),t.effects.forEach(a=>{a.name.toLowerCase().includes("fire")&&n.push("Fire"),(a.name.toLowerCase().includes("frost")||a.name.toLowerCase().includes("ice"))&&n.push("Frost"),(a.name.toLowerCase().includes("shock")||a.name.toLowerCase().includes("lightning"))&&n.push("Shock"),(a.name.toLowerCase().includes("heal")||a.name.toLowerCase().includes("restore"))&&n.push("Healing"),(a.name.toLowerCase().includes("conjure")||a.name.toLowerCase().includes("summon"))&&n.push("Conjuration"),(a.name.toLowerCase().includes("fear")||a.name.toLowerCase().includes("calm"))&&n.push("Illusion"),(a.name.toLowerCase().includes("paralyze")||a.name.toLowerCase().includes("slow"))&&n.push("Control")}),[...new Set(n)]}static createSearchableText(t,s){return[t.name,t.school,t.level,t.description,...s,...t.effects.map(a=>a.name),...t.effects.map(a=>a.description)].join(" ").toLowerCase()}static filterBySchool(t,s){return t.filter(n=>n.school===s)}static filterByLevel(t,s){return t.filter(n=>n.level===s)}static filterBySchools(t,s){return s.length===0?t:t.filter(n=>s.includes(n.school))}static filterByLevels(t,s){return s.length===0?t:t.filter(n=>s.includes(n.level))}static filterByMagickaCost(t,s,n){return t.filter(a=>!(s!==null&&a.magickaCost<s||n!==null&&a.magickaCost>n))}static filterByMagnitude(t,s,n){return t.filter(a=>!(s!==null&&a.totalMagnitude<s||n!==null&&a.totalMagnitude>n))}static filterByEffectProperties(t,s,n,a){return t.filter(i=>!(s!==null&&i.hasEffects!==s||n!==null&&i.isAreaSpell!==n||a!==null&&i.isDurationSpell!==a))}static search(t,s){if(!s.trim())return t.map(i=>({spell:i,score:1,matchedFields:[]}));const n=s.toLowerCase(),a=[];return t.forEach(i=>{let o=0;const l=[];i.name.toLowerCase()===n?(o+=100,l.push("name")):i.name.toLowerCase().includes(n)&&(o+=50,l.push("name")),i.school.toLowerCase()===n?(o+=30,l.push("school")):i.school.toLowerCase().includes(n)&&(o+=15,l.push("school")),i.level.toLowerCase()===n?(o+=25,l.push("level")):i.level.toLowerCase().includes(n)&&(o+=10,l.push("level")),i.description.toLowerCase().includes(n)&&(o+=5,l.push("description")),(i.tags||[]).forEach(u=>{u.toLowerCase().includes(n)&&(o+=3,l.push("tags"))}),i.effects.forEach(u=>{u.name.toLowerCase().includes(n)&&(o+=8,l.push("effects")),u.description.toLowerCase().includes(n)&&(o+=4,l.push("effects"))}),o>0&&a.push({spell:i,score:o,matchedFields:[...new Set(l)]})}),a.sort((i,o)=>o.score-i.score)}static sort(t,s,n="asc"){return[...t].sort((i,o)=>{let l=0;switch(s){case"name":l=i.name.localeCompare(o.name);break;case"school":l=i.school.localeCompare(o.school);break;case"level":l=this.compareLevels(i.level,o.level);break;case"magickaCost":l=i.magickaCost-o.magickaCost;break;case"magnitude":l=i.totalMagnitude-o.totalMagnitude;break;case"duration":l=i.maxDuration-o.maxDuration;break}return n==="desc"?-l:l})}static compareLevels(t,s){const n=["Novice","Apprentice","Adept","Expert","Master"],a=n.indexOf(t),i=n.indexOf(s);return a===-1&&i===-1?0:a===-1?1:i===-1?-1:a-i}static getUniqueSchools(t){return[...new Set(t.map(s=>s.school))].sort()}static getUniqueLevels(t){const s=[...new Set(t.map(n=>n.level))];return this.sortLevels(s)}static sortLevels(t){const s=["Novice","Apprentice","Adept","Expert","Master"];return t.sort((n,a)=>{const i=s.indexOf(n),o=s.indexOf(a);return i===-1&&o===-1?0:i===-1?1:o===-1?-1:i-o})}static getUniqueTags(t){const s=t.flatMap(n=>n.tags||[]);return[...new Set(s)].sort()}static applyFilters(t,s){let n=[...t];return s.schools.length>0&&(n=this.filterBySchools(n,s.schools)),s.levels.length>0&&(n=this.filterByLevels(n,s.levels)),n=this.filterByEffectProperties(n,s.hasEffects,s.isAreaSpell,s.isDurationSpell),n=this.filterByMagickaCost(n,s.minMagickaCost,s.maxMagickaCost),n=this.filterByMagnitude(n,s.minMagnitude,s.maxMagnitude),s.searchTerm&&(n=this.search(n,s.searchTerm).map(i=>i.spell)),n}static getStatistics(t){const s=this.getUniqueSchools(t),n=this.getUniqueLevels(t),a=this.getUniqueTags(t),i=t.length,o=t.filter(m=>m.hasEffects).length,l=t.filter(m=>m.isAreaSpell).length,c=t.filter(m=>m.isDurationSpell).length,u=t.filter(m=>m.magickaCost===0).length,d=t.length>0?t.reduce((m,g)=>m+g.magickaCost,0)/t.length:0,f=t.length>0?t.reduce((m,g)=>m+g.totalMagnitude,0)/t.length:0;return{totalSpells:i,spellsWithEffects:o,areaSpells:l,durationSpells:c,freeSpells:u,avgMagickaCost:Math.round(d),avgMagnitude:Math.round(f),schools:s,levels:n,tags:a}}}const ui=class ui{constructor(){Re(this,"cache",null);Re(this,"lastFetch",0);Re(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return ui.instance||(ui.instance=new ui),ui.instance}async loadSpells(){if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const t=Vt("data/player_spells.json"),s=await fetch(t);if(!s.ok)throw new Error(`Failed to fetch spells: ${s.status} ${s.statusText}`);const n=await s.json(),a=[];let i=0,o=0;for(const l of n)if(Kr.isValid(l)){const c=Kr.addComputedProperties(l);a.push(c),i++}else console.warn("SpellDataProvider: Invalid spell data:",l),o++;return this.cache=a,this.lastFetch=Date.now(),a}catch(t){throw console.error("SpellDataProvider: Error loading spells:",t),t}}async getSpellData(){const t=await this.loadSpells(),s=Kr.getStatistics(t);return{spells:t,totalCount:s.totalSpells,schools:s.schools,levels:s.levels,lastUpdated:new Date().toISOString()}}async getSpellByEditorId(t){return(await this.loadSpells()).find(n=>n.editorId===t)||null}async getSpellsBySchool(t){const s=await this.loadSpells();return Kr.filterBySchool(s,t)}async getSpellsByLevel(t){const s=await this.loadSpells();return Kr.filterByLevel(s,t)}async searchSpells(t){const s=await this.loadSpells();return Kr.search(s,t).map(a=>a.spell)}async getStatistics(){const t=await this.loadSpells();return Kr.getStatistics(t)}clearCache(){this.cache=null,this.lastFetch=0}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isValid:this.isCacheValid()}}};Re(ui,"instance");let Mf=ui;const GF=Object.freeze(Object.defineProperty({__proto__:null,SpellDataProvider:Mf},Symbol.toStringTag,{value:"Module"})),bo=fs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const a=await Mf.getInstance().loadSpells();e({data:a,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to load spells",loading:!1})}}},getById:s=>t().data.find(a=>a.id===s),getByEditorId:s=>t().data.find(a=>a.editorId===s),search:s=>{const n=t(),a=s.toLowerCase();return n.data.filter(i=>{var o,l,c,u,d;return i.name.toLowerCase().includes(a)||((o=i.description)==null?void 0:o.toLowerCase().includes(a))||((l=i.school)==null?void 0:l.toLowerCase().includes(a))||((c=i.level)==null?void 0:c.toLowerCase().includes(a))||((u=i.tags)==null?void 0:u.some(f=>f.toLowerCase().includes(a)))||((d=i.effects)==null?void 0:d.some(f=>{var m;return f.name.toLowerCase().includes(a)||((m=f.description)==null?void 0:m.toLowerCase().includes(a))}))})},getBySchool:s=>t().data.filter(a=>a.school===s),getByLevel:s=>t().data.filter(a=>a.level===s)}));function VF(e,t){let s;try{s=e()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=s.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>s.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>s.removeItem(a)}}const Rp=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then(n){return Rp(n)(s)},catch(n){return this}}}catch(s){return{then(n){return this},catch(n){return Rp(n)(s)}}}},qF=(e,t)=>(s,n,a)=>{let i={storage:VF(()=>localStorage),partialize:y=>y,version:0,merge:(y,v)=>({...v,...y}),...t},o=!1;const l=new Set,c=new Set;let u=i.storage;if(!u)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...y)},n,a);const d=()=>{const y=i.partialize({...n()});return u.setItem(i.name,{state:y,version:i.version})},f=a.setState;a.setState=(y,v)=>{f(y,v),d()};const m=e((...y)=>{s(...y),d()},n,a);a.getInitialState=()=>m;let g;const b=()=>{var y,v;if(!u)return;o=!1,l.forEach(x=>{var w;return x((w=n())!=null?w:m)});const p=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(y=n())!=null?y:m))||void 0;return Rp(u.getItem.bind(u))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate){const w=i.migrate(x.state,x.version);return w instanceof Promise?w.then(N=>[!0,N]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var w;const[N,j]=x;if(g=i.merge(j,(w=n())!=null?w:m),s(g,!0),N)return d()}).then(()=>{p==null||p(g,void 0),g=n(),o=!0,c.forEach(x=>x(g))}).catch(x=>{p==null||p(void 0,x)})};return a.persist={setOptions:y=>{i={...i,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},i.skipHydration||b(),g||m},QF=qF,Ze={FUZZY_SEARCH:"Fuzzy Search",SEARCH_ALL:"Search All",CATEGORIES:"Categories",TYPES:"Types"},O2=fs()(QF((e,t)=>({activeFilters:{types:[],categories:[],tags:[]},selectedTags:[],viewMode:"grid",lastSearchQuery:"",setActiveFilters:s=>{e({activeFilters:s})},updateActiveFilters:s=>{e(n=>({activeFilters:{...n.activeFilters,...s}}))},addTag:s=>{e(n=>{if(n.selectedTags.some(l=>l.value===s.value&&l.category===s.category))return n;const i=[...n.selectedTags,s];let o={...n.activeFilters};return s.category===Ze.TYPES?o.types=[...o.types,s.value]:s.category===Ze.CATEGORIES?o.categories=[...o.categories,s.value]:(s.category===Ze.FUZZY_SEARCH||s.category===Ze.SEARCH_ALL)&&(o.tags=[...o.tags,s.value]),{selectedTags:i,activeFilters:o}})},removeTag:s=>{e(n=>{const a=n.selectedTags.find(l=>l.id===s);if(!a)return n;const i=n.selectedTags.filter(l=>l.id!==s);let o={...n.activeFilters};return a.category===Ze.TYPES?o.types=o.types.filter(l=>l!==a.value):a.category===Ze.CATEGORIES?o.categories=o.categories.filter(l=>l!==a.value):(a.category===Ze.FUZZY_SEARCH||a.category===Ze.SEARCH_ALL)&&(o.tags=o.tags.filter(l=>l!==a.value)),{selectedTags:i,activeFilters:o}})},removeTagByValue:(s,n)=>{e(a=>{const i=a.selectedTags.filter(l=>!(l.value===s&&(!n||l.category===n)));let o={...a.activeFilters};return n===Ze.TYPES?o.types=o.types.filter(l=>l!==s):n===Ze.CATEGORIES?o.categories=o.categories.filter(l=>l!==s):(n===Ze.FUZZY_SEARCH||n===Ze.SEARCH_ALL)&&(o.tags=o.tags.filter(l=>l!==s)),{selectedTags:i,activeFilters:o}})},clearAllTags:()=>{e({selectedTags:[],activeFilters:{types:[],categories:[],tags:[]}})},setTags:s=>{e(n=>{let a={types:[],categories:[],tags:[]};return s.forEach(i=>{i.category===Ze.TYPES?a.types.push(i.value):i.category===Ze.CATEGORIES?a.categories.push(i.value):(i.category===Ze.FUZZY_SEARCH||i.category===Ze.SEARCH_ALL)&&a.tags.push(i.value)}),{selectedTags:s,activeFilters:a}})},addTags:s=>{e(n=>{const a=new Set(n.selectedTags.map(c=>`${c.value}-${c.category}`)),i=s.filter(c=>!a.has(`${c.value}-${c.category}`));if(i.length===0)return n;const o=[...n.selectedTags,...i];let l={...n.activeFilters};return i.forEach(c=>{c.category===Ze.TYPES?l.types.push(c.value):c.category===Ze.CATEGORIES?l.categories.push(c.value):(c.category===Ze.FUZZY_SEARCH||c.category===Ze.SEARCH_ALL)&&l.tags.push(c.value)}),{selectedTags:o,activeFilters:l}})},setViewMode:s=>{e({viewMode:s})},setLastSearchQuery:s=>{e({lastSearchQuery:s})},clearLastSearchQuery:()=>{e({lastSearchQuery:""})},hasTag:(s,n)=>t().selectedTags.some(i=>i.value===s&&(!n||i.category===n)),getTagsByCategory:s=>t().selectedTags.filter(a=>a.category===s),getFuzzySearchTags:()=>t().selectedTags.filter(n=>n.category===Ze.FUZZY_SEARCH||n.category===Ze.SEARCH_ALL),getFilterTags:()=>t().selectedTags.filter(n=>n.category!==Ze.FUZZY_SEARCH&&n.category!==Ze.SEARCH_ALL),clearAllSearchState:()=>{e({activeFilters:{types:[],categories:[],tags:[]},selectedTags:[],viewMode:"grid",lastSearchQuery:""})}}),{name:"global-search-storage",partialize:e=>({activeFilters:e.activeFilters,selectedTags:e.selectedTags,viewMode:e.viewMode,lastSearchQuery:e.lastSearchQuery})}));function ZF(){const{data:e,loading:t,error:s}=Hr();return{data:e.length>0?e:null,loading:t,error:s}}function WF(){const{data:e,loading:t,error:s}=Gi();return{data:e.length>0?e:null,loading:t,error:s}}function B2(){const{data:e,loading:t,error:s}=zl();return{data:e,loading:t,error:s}}function YF(){const{data:e,loading:t,error:s}=O0();return{data:e,loading:t,error:s}}function XF(){const{data:e,loading:t,error:s}=Ui();return{data:e.length>0?e:null,loading:t,error:s}}function KF(){const{data:e,loading:t,error:s}=Ll();return{data:e.length>0?e:null,loading:t,error:s}}function uy(){const{data:e,loading:t,error:s}=Hi();return{data:e.length>0?e:null,loading:t,error:s}}function JF({children:e,showLoadingIndicator:t=!1}){const[s,n]=h.useState(!0),[a,i]=h.useState(null),o=h.useRef(!1),l=Ui(x=>x.load),c=O0(x=>x.load),u=Ll(x=>x.load),d=Hi(x=>x.load),f=wn(x=>x.load),m=xa(x=>x.load),g=zl(x=>x.load),b=Hr(x=>x.load),y=bo(x=>x.load),v=Gi(x=>x.load),p=h.useCallback(async()=>{if(!o.current)try{n(!0),i(null),await Promise.all([l(),c(),u(),d(),f(),m(),g(),b(),y(),v()]),o.current=!0,n(!1)}catch(x){console.error("Failed to initialize data:",x),i(x instanceof Error?x.message:"Failed to initialize data"),n(!1)}},[l,c,u,d,f,m,g,b,y,v]);return h.useEffect(()=>{p()},[p]),s&&t?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading data..."})]})}):a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-red-600 mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Failed to Load Data"}),r.jsx("p",{className:"text-sm",children:a})]}),r.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})}):r.jsx(r.Fragment,{children:e})}function xe({children:e,className:t,expanded:s,onToggle:n,disableHover:a=!1,hideChevron:i=!1}){let o,l,c,u;z.Children.forEach(e,y=>{z.isValidElement(y)&&(y.type===xe.Header&&(o=y),y.type===xe.Summary&&(l=y),y.type===xe.Footer&&(c=y),y.type===xe.Details&&(u=y))});const[d,f]=h.useState(!1),m=s!==void 0?s:d,g=n||(()=>f(y=>!y)),b=a?"":"hover:shadow-md hover:scale-[1.02]";return r.jsxs("div",{className:$("rounded-lg border bg-background shadow-sm transition-all duration-200 flex flex-col",b,t),children:[o&&z.cloneElement(o,{onClick:g,expanded:m,hideChevron:i}),r.jsxs("div",{className:"flex-1",children:[l,m&&u]}),c]})}xe.Header=function({children:t,className:s,onClick:n,expanded:a,hideChevron:i=!1}){const o=()=>{n==null||n()};return r.jsxs("div",{className:$("flex items-center gap-3 px-4 py-3 bg-muted/30 cursor-pointer select-none hover:bg-muted/50 transition-colors duration-200 rounded-t-lg",a&&"bg-muted/50",s),onClick:o,tabIndex:0,role:"button","aria-expanded":a,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),o())},children:[t,!i&&r.jsx("span",{className:$("ml-auto transition-transform duration-200 text-muted-foreground",a?"rotate-180":""),children:r.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:r.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})})]})};xe.Summary=function({children:t,className:s}){return r.jsx("div",{className:$("px-4 py-2 space-y-3",s),children:t})};xe.Footer=function({children:t,className:s}){return r.jsx("div",{className:$("px-4 py-2",s),children:t})};xe.Details=function({children:t,className:s}){return r.jsx("div",{className:$("px-4 py-4 space-y-4 bg-background rounded-b-lg",s),children:t})};const fw={Warrior:{background:"bg-red-200",text:"text-red-800",border:"border-red-300",hover:"hover:bg-red-300"},Mage:{background:"bg-blue-200",text:"text-blue-800",border:"border-blue-300",hover:"hover:bg-blue-300"},Thief:{background:"bg-green-200",text:"text-green-800",border:"border-green-300",hover:"hover:bg-green-300"},Serpent:{background:"bg-purple-200",text:"text-purple-800",border:"border-purple-300",hover:"hover:bg-purple-300"},Other:{background:"bg-yellow-200",text:"text-yellow-800",border:"border-yellow-300",hover:"hover:bg-yellow-300"}};function e8(e){return fw[e]||fw.Other}function Tu({className:e="",threshold:t=300}){const[s,n]=h.useState(!1);h.useEffect(()=>{const i=()=>{window.pageYOffset>t?n(!0):n(!1)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[t]);const a=i=>{i.preventDefault(),i.stopPropagation(),window.scrollTo({top:0,behavior:"smooth"})};return s?r.jsx("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 cursor-pointer ${e}`,onClick:i=>i.stopPropagation(),onMouseEnter:i=>i.stopPropagation(),onMouseLeave:i=>i.stopPropagation(),children:r.jsxs(G,{onClick:a,size:"default",variant:"outline",className:"flex items-center gap-2 shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out transform hover:scale-110 bg-skyrim-gold/90 hover:bg-skyrim-gold text-skyrim-dark border-skyrim-gold hover:border-skyrim-gold backdrop-blur supports-[backdrop-filter]:bg-skyrim-gold/80 hover:supports-[backdrop-filter]:bg-skyrim-gold/95 cursor-pointer",children:[r.jsx(Ic,{className:"h-5 w-5 transition-transform duration-300 ease-in-out group-hover:translate-y-[-2px]"}),"Back to top"]})}):null}const t8={race:{Human:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Elf:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Beast:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},religion:{Divine:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Daedric:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Tribunal:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Ancestor:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},trait:{},destiny:{}},s8={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},n8="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function I2({category:e,categoryType:t,size:s="md",className:n}){const i=t8[t][e]||n8;return r.jsx(Q,{variant:"outline",className:$(i,s8[s],"font-medium transition-colors",n),children:e})}const mw={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-16 h-16","2xl":"w-16 h-16","3xl":"w-24 h-24","4xl":"w-32 h-32"},a8={sm:"text-sm",md:"text-lg",lg:"text-xl",xl:"text-2xl","2xl":"text-3xl","3xl":"text-3xl","4xl":"text-4xl"};function Xm({imgSrc:e,alt:t,size:s="md",className:n,imageClassName:a,showBorder:i=!1}){const[o,l]=z.useState(!1);return!e||o?r.jsx("div",{className:$("bg-white dark:bg-white text-black dark:text-black rounded-full flex items-center justify-center font-bold",mw[s],n),children:r.jsx("span",{className:$(a8[s]),children:t.charAt(0)})}):r.jsxs("div",{className:$("rounded-full flex items-center justify-center relative","bg-white dark:bg-white",mw[s],n),children:[i&&r.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-black dark:border-white pointer-events-none"}),r.jsx("img",{src:e,alt:t,className:$(i?"w-3/4 h-3/4 object-contain":"w-full h-full object-contain",a),onError:()=>l(!0),loading:"lazy"})]})}function r8({isExpanded:e,onToggle:t,className:s,leftControls:n,header:a,collapsedContent:i,expandedContent:o,actionArea:l,children:c}){return c?r.jsx("div",{className:$("rounded-lg border bg-background shadow-sm transition-all",s),children:c}):r.jsxs("div",{className:$("rounded-lg border bg-background shadow-sm transition-all group",e?"ring-2 ring-skyrim-gold/60":"",s),children:[r.jsxs("div",{className:"flex items-start",children:[n&&r.jsx("div",{className:"mr-2 flex-shrink-0",children:n}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a&&r.jsx("div",{className:"flex-1 min-w-0",children:a}),r.jsxs("button",{type:"button",onClick:t,"aria-expanded":e,className:"ml-2 p-1 rounded hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-skyrim-gold",tabIndex:0,children:[r.jsx("span",{className:"sr-only",children:e?"Collapse":"Expand"}),r.jsx("svg",{className:$("h-4 w-4 transition-transform",e?"rotate-90":""),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:r.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})}),l&&r.jsx("div",{className:"ml-2 flex-shrink-0",children:l})]}),i&&r.jsx("div",{className:"mt-2",children:i}),e&&o&&r.jsx("div",{className:"mt-4",children:o})]})}function Mu({options:e,onSelect:t,placeholder:s="Search...",className:n="",disabled:a=!1,searchQuery:i,onSearchQueryChange:o,renderOption:l,emptyMessage:c="No options found",maxHeight:u="max-h-96",showClearButton:d=!0,showToggleButton:f=!0}){const[m,g]=h.useState(!1),[b,y]=h.useState(""),[v,p]=h.useState(-1),x=h.useRef(null),w=h.useRef(null),N=i??b,j=o??y;h.useEffect(()=>{const R=T=>{x.current&&!x.current.contains(T.target)&&(g(!1),p(-1))};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const _=R=>{j(R),g(!0),p(-1)},k=R=>{t(R),g(!1),p(-1)},A=R=>{R.key==="ArrowDown"?(R.preventDefault(),p(T=>Math.min(T+1,e.length-1))):R.key==="ArrowUp"?(R.preventDefault(),p(T=>Math.max(T-1,-1))):R.key==="Enter"?(R.preventDefault(),v>=0&&e[v]&&k(e[v])):R.key==="Escape"&&(g(!1),p(-1))},S=()=>{g(!0)},C=()=>{var R;j(""),(R=w.current)==null||R.focus()},M=()=>{var R;g(!m),m||(R=w.current)==null||R.focus()},E=(R,T)=>r.jsxs("div",{className:"flex items-center gap-3",children:[R.icon&&r.jsx("div",{className:"flex-shrink-0",children:R.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium truncate",children:R.label}),R.badge&&r.jsx("div",{className:"flex-shrink-0",children:R.badge})]}),R.description&&r.jsx(we,{text:R.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return r.jsxs("div",{ref:x,className:$("relative",n),children:[r.jsxs("div",{className:"relative",children:[r.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(os,{ref:w,type:"text",placeholder:s,value:N,onChange:R=>_(R.target.value),onFocus:S,onKeyDown:A,className:"pl-10 pr-20",disabled:a}),d&&N&&r.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted",onClick:C,disabled:a,children:r.jsx(ze,{className:"h-4 w-4"})}),f&&r.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:M,disabled:a,children:r.jsx(vt,{className:$("h-4 w-4 transition-transform",m&&"rotate-180")})})]}),m&&r.jsx("div",{className:$("absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",u),style:{zIndex:_t.AUTOCOMPLETE+10},children:r.jsx("div",{className:"p-2",children:e.length===0?r.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:c}):e.map((R,T)=>r.jsx("button",{onClick:()=>k(R),className:$("w-full text-left px-3 py-3 rounded-lg text-sm transition-all duration-200 cursor-pointer",T===v?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"),disabled:a,children:l?l(R,T===v):E(R)},R.id))})})]})}function i8(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const $2=z.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Du=()=>{const e=z.useContext($2);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};i8(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function o8(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function l8(){return dy(/^Mac/)}function c8(){return dy(/^iPhone/)}function hw(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function u8(){return dy(/^iPad/)||l8()&&navigator.maxTouchPoints>1}function F2(){return c8()||u8()}function dy(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const d8=24,f8=typeof window<"u"?h.useLayoutEffect:h.useEffect;function gw(...e){return(...t)=>{for(let s of e)typeof s=="function"&&s(...t)}}const sg=typeof document<"u"&&window.visualViewport;function pw(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function H2(e){for(pw(e)&&(e=e.parentElement);e&&!pw(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const m8=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let gd=0,ng;function h8(e={}){let{isDisabled:t}=e;f8(()=>{if(!t)return gd++,gd===1&&F2()&&(ng=g8()),()=>{gd--,gd===0&&(ng==null||ng())}},[t])}function g8(){let e,t=0,s=f=>{e=H2(f.target),!(e===document.documentElement&&e===document.body)&&(t=f.changedTouches[0].pageY)},n=f=>{if(!e||e===document.documentElement||e===document.body){f.preventDefault();return}let m=f.changedTouches[0].pageY,g=e.scrollTop,b=e.scrollHeight-e.clientHeight;b!==0&&((g<=0&&m>t||g>=b&&m<t)&&f.preventDefault(),t=m)},a=f=>{let m=f.target;Tp(m)&&m!==document.activeElement&&(f.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},i=f=>{let m=f.target;Tp(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",sg&&(sg.height<window.innerHeight?requestAnimationFrame(()=>{xw(m)}):sg.addEventListener("resize",()=>xw(m),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=gw(p8(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=gw(Yl(document,"touchstart",s,{passive:!1,capture:!0}),Yl(document,"touchmove",n,{passive:!1,capture:!0}),Yl(document,"touchend",a,{passive:!1,capture:!0}),Yl(document,"focus",i,!0),Yl(window,"scroll",o));return()=>{u(),d(),window.scrollTo(l,c)}}function p8(e,t,s){let n=e.style[t];return e.style[t]=s,()=>{e.style[t]=n}}function Yl(e,t,s,n){return e.addEventListener(t,s,n),()=>{e.removeEventListener(t,s,n)}}function xw(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let s=H2(e);if(s!==document.documentElement&&s!==document.body&&s!==e){let n=s.getBoundingClientRect().top,a=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom;const o=s.getBoundingClientRect().bottom+d8;i>o&&(s.scrollTop+=a-n)}e=s.parentElement}}function Tp(e){return e instanceof HTMLInputElement&&!m8.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function x8(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function y8(...e){return t=>e.forEach(s=>x8(s,t))}function U2(...e){return h.useCallback(y8(...e),e)}const G2=new WeakMap;function Pt(e,t,s=!1){if(!e||!(e instanceof HTMLElement))return;let n={};Object.entries(t).forEach(([a,i])=>{if(a.startsWith("--")){e.style.setProperty(a,i);return}n[a]=e.style[a],e.style[a]=i}),!s&&G2.set(e,n)}function v8(e,t){if(!e||!(e instanceof HTMLElement))return;let s=G2.get(e);s&&(e.style[t]=s[t])}const Ct=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function pd(e,t){if(!e)return null;const s=window.getComputedStyle(e),n=s.transform||s.webkitTransform||s.mozTransform;let a=n.match(/^matrix3d\((.+)\)$/);return a?parseFloat(a[1].split(", ")[Ct(t)?13:12]):(a=n.match(/^matrix\((.+)\)$/),a?parseFloat(a[1].split(", ")[Ct(t)?5:4]):null)}function b8(e){return 8*(Math.log(e+1)-2)}function ag(e,t){if(!e)return()=>{};const s=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=s}}function w8(...e){return(...t)=>{for(const s of e)typeof s=="function"&&s(...t)}}const dt={DURATION:.5,EASE:[.32,.72,0,1]},V2=.4,N8=.25,j8=100,q2=8,Jr=16,Mp=26,rg="vaul-dragging";function Q2(e){const t=z.useRef(e);return z.useEffect(()=>{t.current=e}),z.useMemo(()=>(...s)=>t.current==null?void 0:t.current.call(t,...s),[])}function k8({defaultProp:e,onChange:t}){const s=z.useState(e),[n]=s,a=z.useRef(n),i=Q2(t);return z.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),s}function Z2({prop:e,defaultProp:t,onChange:s=()=>{}}){const[n,a]=k8({defaultProp:t,onChange:s}),i=e!==void 0,o=i?e:n,l=Q2(s),c=z.useCallback(u=>{if(i){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else a(u)},[i,e,a,l]);return[o,c]}function S8({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:s,drawerRef:n,overlayRef:a,fadeFromIndex:i,onSnapPointChange:o,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[d,f]=Z2({prop:e,defaultProp:s==null?void 0:s[0],onChange:t}),[m,g]=z.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);z.useEffect(()=>{function k(){g({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const b=z.useMemo(()=>d===(s==null?void 0:s[s.length-1])||null,[s,d]),y=z.useMemo(()=>{var k;return(k=s==null?void 0:s.findIndex(A=>A===d))!=null?k:null},[s,d]),v=s&&s.length>0&&(i||i===0)&&!Number.isNaN(i)&&s[i]===d||!s,p=z.useMemo(()=>{const k=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var A;return(A=s==null?void 0:s.map(S=>{const C=typeof S=="string";let M=0;if(C&&(M=parseInt(S,10)),Ct(l)){const R=C?M:m?S*k.height:0;return m?l==="bottom"?k.height-R:-k.height+R:R}const E=C?M:m?S*k.width:0;return m?l==="right"?k.width-E:-k.width+E:E}))!=null?A:[]},[s,m,c]),x=z.useMemo(()=>y!==null?p==null?void 0:p[y]:null,[p,y]),w=z.useCallback(k=>{var A;const S=(A=p==null?void 0:p.findIndex(C=>C===k))!=null?A:null;o(S),Pt(n.current,{transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,transform:Ct(l)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`}),p&&S!==p.length-1&&i!==void 0&&S!==i&&S<i?Pt(a.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,opacity:"0"}):Pt(a.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,opacity:"1"}),f(s==null?void 0:s[Math.max(S,0)])},[n.current,s,p,i,a,f]);z.useEffect(()=>{if(d||e){var k;const A=(k=s==null?void 0:s.findIndex(S=>S===e||S===d))!=null?k:-1;p&&A!==-1&&typeof p[A]=="number"&&w(p[A])}},[d,e,s,p,w]);function N({draggedDistance:k,closeDrawer:A,velocity:S,dismissible:C}){if(i===void 0)return;const M=l==="bottom"||l==="right"?(x??0)-k:(x??0)+k,E=y===i-1,R=y===0,T=k>0;if(E&&Pt(a.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`}),!u&&S>2&&!T){C?A():w(p[0]);return}if(!u&&S>2&&T&&p&&s){w(p[s.length-1]);return}const O=p==null?void 0:p.reduce((B,L)=>typeof B!="number"||typeof L!="number"?B:Math.abs(L-M)<Math.abs(B-M)?L:B),P=Ct(l)?window.innerHeight:window.innerWidth;if(S>V2&&Math.abs(k)<P*.4){const B=T?1:-1;if(B>0&&b&&s){w(p[s.length-1]);return}if(R&&B<0&&C&&A(),y===null)return;w(p[y+B]);return}w(O)}function j({draggedDistance:k}){if(x===null)return;const A=l==="bottom"||l==="right"?x-k:x+k;(l==="bottom"||l==="right")&&A<p[p.length-1]||(l==="top"||l==="left")&&A>p[p.length-1]||Pt(n.current,{transform:Ct(l)?`translate3d(0, ${A}px, 0)`:`translate3d(${A}px, 0, 0)`})}function _(k,A){if(!s||typeof y!="number"||!p||i===void 0)return null;const S=y===i-1;if(y>=i&&A)return 0;if(S&&!A)return 1;if(!v&&!S)return null;const M=S?y+1:y-1,E=S?p[M]-p[M-1]:p[M+1]-p[M],R=k/Math.abs(E);return S?1-R:R}return{isLastSnapPoint:b,activeSnapPoint:d,shouldFade:v,getPercentageDragged:_,setActiveSnapPoint:f,activeSnapPointIndex:y,onRelease:N,onDrag:j,snapPointsOffset:p}}const _8=()=>()=>{};function C8(){const{direction:e,isOpen:t,shouldScaleBackground:s,setBackgroundColorOnScale:n,noBodyStyles:a}=Du(),i=z.useRef(null),o=h.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-Mp)/window.innerWidth}z.useEffect(()=>{if(t&&s){i.current&&clearTimeout(i.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;w8(n&&!a?ag(document.body,{background:"black"}):_8,ag(c,{transformOrigin:Ct(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${dt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${dt.EASE.join(",")})`}));const u=ag(c,{borderRadius:`${q2}px`,overflow:"hidden",...Ct(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),i.current=window.setTimeout(()=>{o?document.body.style.background=o:document.body.style.removeProperty("background")},dt.DURATION*1e3)}}},[t,s,o])}let Xl=null;function E8({isOpen:e,modal:t,nested:s,hasBeenOpened:n,preventScrollRestoration:a,noBodyStyles:i}){const[o,l]=z.useState(()=>typeof window<"u"?window.location.href:""),c=z.useRef(0),u=z.useCallback(()=>{if(hw()&&Xl===null&&e&&!i){Xl={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const g=m-window.innerHeight;g&&c.current>=m&&(document.body.style.top=`${-(c.current+g)}px`)}),300)}},[e]),d=z.useCallback(()=>{if(hw()&&Xl!==null&&!i){const f=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Xl),window.requestAnimationFrame(()=>{if(a&&o!==window.location.href){l(window.location.href);return}window.scrollTo(m,f)}),Xl=null}},[o]);return z.useEffect(()=>{function f(){c.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),z.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||d()}},[t,d]),z.useEffect(()=>{s||!n||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{d()},500)):d())},[e,n,o,t,s,u,d]),{restorePositionSetting:d}}function A8({open:e,onOpenChange:t,children:s,onDrag:n,onRelease:a,snapPoints:i,shouldScaleBackground:o=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=N8,scrollLockTimeout:u=j8,dismissible:d=!0,handleOnly:f=!1,fadeFromIndex:m=i&&i.length-1,activeSnapPoint:g,setActiveSnapPoint:b,fixed:y,modal:v=!0,onClose:p,nested:x,noBodyStyles:w=!1,direction:N="bottom",defaultOpen:j=!1,disablePreventScroll:_=!0,snapToSequentialPoint:k=!1,preventScrollRestoration:A=!1,repositionInputs:S=!0,onAnimationEnd:C,container:M,autoFocus:E=!1}){var R,T;const[O=!1,P]=Z2({defaultProp:j,prop:e,onChange:me=>{t==null||t(me),!me&&!x&&la(),setTimeout(()=>{C==null||C(me)},dt.DURATION*1e3),me&&!v&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),me||(document.body.style.pointerEvents="auto")}}),[B,L]=z.useState(!1),[D,I]=z.useState(!1),[F,U]=z.useState(!1),H=z.useRef(null),Z=z.useRef(null),K=z.useRef(null),ue=z.useRef(null),te=z.useRef(null),ye=z.useRef(!1),be=z.useRef(null),Ne=z.useRef(0),Xe=z.useRef(!1),nt=z.useRef(!j),V=z.useRef(0),q=z.useRef(null),X=z.useRef(((R=q.current)==null?void 0:R.getBoundingClientRect().height)||0),le=z.useRef(((T=q.current)==null?void 0:T.getBoundingClientRect().width)||0),se=z.useRef(0),J=z.useCallback(me=>{i&&me===ps.length-1&&(Z.current=new Date)},[]),{activeSnapPoint:Se,activeSnapPointIndex:et,setActiveSnapPoint:Mt,onRelease:gs,snapPointsOffset:ps,onDrag:cn,shouldFade:ia,getPercentageDragged:oa}=S8({snapPoints:i,activeSnapPointProp:g,setActiveSnapPointProp:b,drawerRef:q,fadeFromIndex:m,overlayRef:H,onSnapPointChange:J,direction:N,container:M,snapToSequentialPoint:k});h8({isDisabled:!O||D||!v||F||!B||!S||!_});const{restorePositionSetting:la}=E8({isOpen:O,modal:v,nested:x??!1,hasBeenOpened:B,preventScrollRestoration:A,noBodyStyles:w});function un(){return(window.innerWidth-Mp)/window.innerWidth}function Ya(me){var De,$e;!d&&!i||q.current&&!q.current.contains(me.target)||(X.current=((De=q.current)==null?void 0:De.getBoundingClientRect().height)||0,le.current=(($e=q.current)==null?void 0:$e.getBoundingClientRect().width)||0,I(!0),K.current=new Date,F2()&&window.addEventListener("touchend",()=>ye.current=!1,{once:!0}),me.target.setPointerCapture(me.pointerId),Ne.current=Ct(N)?me.pageY:me.pageX)}function Xa(me,De){var $e;let Pe=me;const Ue=($e=window.getSelection())==null?void 0:$e.toString(),Jt=q.current?pd(q.current,N):null,Zt=new Date;if(Pe.tagName==="SELECT"||Pe.hasAttribute("data-vaul-no-drag")||Pe.closest("[data-vaul-no-drag]"))return!1;if(N==="right"||N==="left")return!0;if(Z.current&&Zt.getTime()-Z.current.getTime()<500)return!1;if(Jt!==null&&(N==="bottom"?Jt>0:Jt<0))return!0;if(Ue&&Ue.length>0)return!1;if(te.current&&Zt.getTime()-te.current.getTime()<u&&Jt===0||De)return te.current=Zt,!1;for(;Pe;){if(Pe.scrollHeight>Pe.clientHeight){if(Pe.scrollTop!==0)return te.current=new Date,!1;if(Pe.getAttribute("role")==="dialog")return!0}Pe=Pe.parentNode}return!0}function Bt(me){if(q.current&&D){const De=N==="bottom"||N==="right"?1:-1,$e=(Ne.current-(Ct(N)?me.pageY:me.pageX))*De,Pe=$e>0,Ue=i&&!d&&!Pe;if(Ue&&et===0)return;const Jt=Math.abs($e),Zt=document.querySelector("[data-vaul-drawer-wrapper]"),An=N==="bottom"||N==="top"?X.current:le.current;let Cs=Jt/An;const da=oa(Jt,Pe);if(da!==null&&(Cs=da),Ue&&Cs>=1||!ye.current&&!Xa(me.target,Pe))return;if(q.current.classList.add(rg),ye.current=!0,Pt(q.current,{transition:"none"}),Pt(H.current,{transition:"none"}),i&&cn({draggedDistance:$e}),Pe&&!i){const Vs=b8($e),no=Math.min(Vs*-1,0)*De;Pt(q.current,{transform:Ct(N)?`translate3d(0, ${no}px, 0)`:`translate3d(${no}px, 0, 0)`});return}const Rn=1-Cs;if((ia||m&&et===m-1)&&(n==null||n(me,Cs),Pt(H.current,{opacity:`${Rn}`,transition:"none"},!0)),Zt&&H.current&&o){const Vs=Math.min(un()+Cs*(1-un()),1),no=8-Cs*8,nd=Math.max(0,14-Cs*14);Pt(Zt,{borderRadius:`${no}px`,transform:Ct(N)?`scale(${Vs}) translate3d(0, ${nd}px, 0)`:`scale(${Vs}) translate3d(${nd}px, 0, 0)`,transition:"none"},!0)}if(!i){const Vs=Jt*De;Pt(q.current,{transform:Ct(N)?`translate3d(0, ${Vs}px, 0)`:`translate3d(${Vs}px, 0, 0)`})}}}z.useEffect(()=>{window.requestAnimationFrame(()=>{nt.current=!0})},[]),z.useEffect(()=>{var me;function De(){if(!q.current||!S)return;const $e=document.activeElement;if(Tp($e)||Xe.current){var Pe;const Ue=((Pe=window.visualViewport)==null?void 0:Pe.height)||0,Jt=window.innerHeight;let Zt=Jt-Ue;const An=q.current.getBoundingClientRect().height||0,Cs=An>Jt*.8;se.current||(se.current=An);const da=q.current.getBoundingClientRect().top;if(Math.abs(V.current-Zt)>60&&(Xe.current=!Xe.current),i&&i.length>0&&ps&&et){const Rn=ps[et]||0;Zt+=Rn}if(V.current=Zt,An>Ue||Xe.current){const Rn=q.current.getBoundingClientRect().height;let Vs=Rn;Rn>Ue&&(Vs=Ue-(Cs?da:Mp)),y?q.current.style.height=`${Rn-Math.max(Zt,0)}px`:q.current.style.height=`${Math.max(Vs,Ue-da)}px`}else o8()||(q.current.style.height=`${se.current}px`);i&&i.length>0&&!Xe.current?q.current.style.bottom="0px":q.current.style.bottom=`${Math.max(Zt,0)}px`}}return(me=window.visualViewport)==null||me.addEventListener("resize",De),()=>{var $e;return($e=window.visualViewport)==null?void 0:$e.removeEventListener("resize",De)}},[et,i,ps]);function Qt(me){ca(),p==null||p(),me||P(!1),setTimeout(()=>{i&&Mt(i[0])},dt.DURATION*1e3)}function En(){if(!q.current)return;const me=document.querySelector("[data-vaul-drawer-wrapper]"),De=pd(q.current,N);Pt(q.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`}),Pt(H.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,opacity:"1"}),o&&De&&De>0&&O&&Pt(me,{borderRadius:`${q2}px`,overflow:"hidden",...Ct(N)?{transform:`scale(${un()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${un()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${dt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${dt.EASE.join(",")})`},!0)}function ca(){!D||!q.current||(q.current.classList.remove(rg),ye.current=!1,I(!1),ue.current=new Date)}function ua(me){if(!D||!q.current)return;q.current.classList.remove(rg),ye.current=!1,I(!1),ue.current=new Date;const De=pd(q.current,N);if(!me||!Xa(me.target,!1)||!De||Number.isNaN(De)||K.current===null)return;const $e=ue.current.getTime()-K.current.getTime(),Pe=Ne.current-(Ct(N)?me.pageY:me.pageX),Ue=Math.abs(Pe)/$e;if(Ue>.05&&(U(!0),setTimeout(()=>{U(!1)},200)),i){gs({draggedDistance:Pe*(N==="bottom"||N==="right"?1:-1),closeDrawer:Qt,velocity:Ue,dismissible:d}),a==null||a(me,!0);return}if(N==="bottom"||N==="right"?Pe>0:Pe<0){En(),a==null||a(me,!0);return}if(Ue>V2){Qt(),a==null||a(me,!1);return}var Jt;const Zt=Math.min((Jt=q.current.getBoundingClientRect().height)!=null?Jt:0,window.innerHeight);var An;const Cs=Math.min((An=q.current.getBoundingClientRect().width)!=null?An:0,window.innerWidth),da=N==="left"||N==="right";if(Math.abs(De)>=(da?Cs:Zt)*c){Qt(),a==null||a(me,!1);return}a==null||a(me,!0),En()}z.useEffect(()=>(O&&(Pt(document.documentElement,{scrollBehavior:"auto"}),Z.current=new Date),()=>{v8(document.documentElement,"scrollBehavior")}),[O]);function dn(me){const De=me?(window.innerWidth-Jr)/window.innerWidth:1,$e=me?-Jr:0;be.current&&window.clearTimeout(be.current),Pt(q.current,{transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,transform:Ct(N)?`scale(${De}) translate3d(0, ${$e}px, 0)`:`scale(${De}) translate3d(${$e}px, 0, 0)`}),!me&&q.current&&(be.current=setTimeout(()=>{const Pe=pd(q.current,N);Pt(q.current,{transition:"none",transform:Ct(N)?`translate3d(0, ${Pe}px, 0)`:`translate3d(${Pe}px, 0, 0)`})},500))}function Gs(me,De){if(De<0)return;const $e=(window.innerWidth-Jr)/window.innerWidth,Pe=$e+De*(1-$e),Ue=-Jr+De*Jr;Pt(q.current,{transform:Ct(N)?`scale(${Pe}) translate3d(0, ${Ue}px, 0)`:`scale(${Pe}) translate3d(${Ue}px, 0, 0)`,transition:"none"})}function Yr(me,De){const $e=Ct(N)?window.innerHeight:window.innerWidth,Pe=De?($e-Jr)/$e:1,Ue=De?-Jr:0;De&&Pt(q.current,{transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,transform:Ct(N)?`scale(${Pe}) translate3d(0, ${Ue}px, 0)`:`scale(${Pe}) translate3d(${Ue}px, 0, 0)`})}return z.useEffect(()=>{v||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[v]),z.createElement(P0,{defaultOpen:j,onOpenChange:me=>{!d&&!me||(me?L(!0):Qt(!0),P(me))},open:O},z.createElement($2.Provider,{value:{activeSnapPoint:Se,snapPoints:i,setActiveSnapPoint:Mt,drawerRef:q,overlayRef:H,onOpenChange:t,onPress:Ya,onRelease:ua,onDrag:Bt,dismissible:d,shouldAnimate:nt,handleOnly:f,isOpen:O,isDragging:D,shouldFade:ia,closeDrawer:Qt,onNestedDrag:Gs,onNestedOpenChange:dn,onNestedRelease:Yr,keyboardIsOpen:Xe,modal:v,snapPointsOffset:ps,activeSnapPointIndex:et,direction:N,shouldScaleBackground:o,setBackgroundColorOnScale:l,noBodyStyles:w,container:M,autoFocus:E}},s))}const W2=z.forwardRef(function({...e},t){const{overlayRef:s,snapPoints:n,onRelease:a,shouldFade:i,isOpen:o,modal:l,shouldAnimate:c}=Du(),u=U2(t,s),d=n&&n.length>0;if(!l)return null;const f=z.useCallback(m=>a(m),[a]);return z.createElement(Nu,{onMouseUp:f,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":o&&d?"true":"false","data-vaul-snap-points-overlay":o&&i?"true":"false","data-vaul-animate":c!=null&&c.current?"true":"false",...e})});W2.displayName="Drawer.Overlay";const fy=z.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:s,...n},a){const{drawerRef:i,onPress:o,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:d,activeSnapPointIndex:f,modal:m,isOpen:g,direction:b,snapPoints:y,container:v,handleOnly:p,shouldAnimate:x,autoFocus:w}=Du(),[N,j]=z.useState(!1),_=U2(a,i),k=z.useRef(null),A=z.useRef(null),S=z.useRef(!1),C=y&&y.length>0;C8();const M=(R,T,O=0)=>{if(S.current)return!0;const P=Math.abs(R.y),B=Math.abs(R.x),L=B>P,D=["bottom","right"].includes(T)?1:-1;if(T==="left"||T==="right"){if(!(R.x*D<0)&&B>=0&&B<=O)return L}else if(!(R.y*D<0)&&P>=0&&P<=O)return!L;return S.current=!0,!0};z.useEffect(()=>{C&&window.requestAnimationFrame(()=>{j(!0)})},[]);function E(R){k.current=null,S.current=!1,l(R)}return z.createElement(ju,{"data-vaul-drawer-direction":b,"data-vaul-drawer":"","data-vaul-delayed-snap-points":N?"true":"false","data-vaul-snap-points":g&&C?"true":"false","data-vaul-custom-container":v?"true":"false","data-vaul-animate":x!=null&&x.current?"true":"false",...n,ref:_,style:d&&d.length>0?{"--snap-point-height":`${d[f??0]}px`,...t}:t,onPointerDown:R=>{p||(n.onPointerDown==null||n.onPointerDown.call(n,R),k.current={x:R.pageX,y:R.pageY},o(R))},onOpenAutoFocus:R=>{s==null||s(R),w||R.preventDefault()},onPointerDownOutside:R=>{if(e==null||e(R),!m||R.defaultPrevented){R.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:R=>{if(!m){R.preventDefault();return}},onPointerMove:R=>{if(A.current=R,p||(n.onPointerMove==null||n.onPointerMove.call(n,R),!k.current))return;const T=R.pageY-k.current.y,O=R.pageX-k.current.x,P=R.pointerType==="touch"?10:2;M({x:O,y:T},b,P)?c(R):(Math.abs(O)>P||Math.abs(T)>P)&&(k.current=null)},onPointerUp:R=>{n.onPointerUp==null||n.onPointerUp.call(n,R),k.current=null,S.current=!1,l(R)},onPointerOut:R=>{n.onPointerOut==null||n.onPointerOut.call(n,R),E(A.current)},onContextMenu:R=>{n.onContextMenu==null||n.onContextMenu.call(n,R),A.current&&E(A.current)}})});fy.displayName="Drawer.Content";const R8=250,T8=120,M8=z.forwardRef(function({preventCycle:e=!1,children:t,...s},n){const{closeDrawer:a,isDragging:i,snapPoints:o,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:d,isOpen:f,onPress:m,onDrag:g}=Du(),b=z.useRef(null),y=z.useRef(!1);function v(){if(y.current){w();return}window.setTimeout(()=>{p()},T8)}function p(){if(i||e||y.current){w();return}if(w(),!o||o.length===0){u||a();return}if(l===o[o.length-1]&&u){a();return}const j=o.findIndex(k=>k===l);if(j===-1)return;const _=o[j+1];c(_)}function x(){b.current=window.setTimeout(()=>{y.current=!0},R8)}function w(){b.current&&window.clearTimeout(b.current),y.current=!1}return z.createElement("div",{onClick:v,onPointerCancel:w,onPointerDown:N=>{d&&m(N),x()},onPointerMove:N=>{d&&g(N)},ref:n,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...s},z.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});M8.displayName="Drawer.Handle";function D8(e){const t=Du(),{container:s=t.container,...n}=e;return z.createElement(L0,{container:s,...n})}const sa={Root:A8,Content:fy,Overlay:W2,Trigger:jS,Portal:D8,Title:ku,Description:Su},my=({shouldScaleBackground:e=!0,...t})=>r.jsx(sa.Root,{shouldScaleBackground:e,...t});my.displayName="Drawer";const P8=sa.Trigger,Y2=sa.Portal,hy=h.forwardRef(({className:e,...t},s)=>r.jsx(sa.Overlay,{ref:s,className:$("fixed inset-0 bg-background/80 backdrop-blur-sm",e),style:{zIndex:_t.MODAL},...t}));hy.displayName=sa.Overlay.displayName;const X2=h.forwardRef(({className:e,children:t,fullHeight:s=!1,...n},a)=>r.jsxs(Y2,{children:[r.jsx(hy,{}),r.jsxs(sa.Content,{ref:a,className:$(s?"fixed inset-x-0 bottom-0 z-50 flex h-[100dvh] max-h-[100dvh] w-full bg-background":"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),style:{zIndex:_t.MODAL+1,backgroundColor:"hsl(var(--background))"},...n,children:[!s&&r.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));X2.displayName="DrawerContent";const gy=({className:e,...t})=>r.jsx("div",{className:$("grid gap-1.5 p-4 text-center sm:text-left",e),...t});gy.displayName="DrawerHeader";const K2=({className:e,...t})=>r.jsx("div",{className:$("mt-auto flex flex-col gap-2 p-4",e),...t});K2.displayName="DrawerFooter";const py=h.forwardRef(({className:e,...t},s)=>r.jsx(sa.Title,{ref:s,className:$("text-lg font-semibold leading-none tracking-tight",e),...t}));py.displayName=sa.Title.displayName;const xy=h.forwardRef(({className:e,...t},s)=>r.jsx(sa.Description,{ref:s,className:$("text-sm text-muted-foreground",e),...t}));xy.displayName=sa.Description.displayName;const J2=({isOpen:e,onOpenChange:t,onSelect:s,searchPlaceholder:n,title:a,description:i,triggerText:o,triggerPlaceholder:l,store:c,renderListItem:u,renderItem:d,emptyMessage:f,emptySubMessage:m="Try adjusting your search",className:g="",disabled:b=!1})=>{const[y,v]=h.useState(""),p=h.useMemo(()=>c!=null&&c.data?y.trim()?c.search(y):c.data:[],[c,y]),x=h.useCallback(j=>{v(j.target.value)},[]),w=h.useCallback(()=>{v("")},[]),N=h.useCallback(j=>{s(j),t(!1)},[s,t]);return z.useEffect(()=>{e||v("")},[e]),r.jsxs(my,{open:e,onOpenChange:t,children:[r.jsx(P8,{asChild:!0,children:r.jsxs(G,{variant:"outline",className:$("w-full justify-between text-left font-normal",!o&&"text-muted-foreground",g),disabled:b,children:[r.jsx("span",{children:o||l}),r.jsx(vt,{className:"h-4 w-4 opacity-50"})]})}),r.jsxs(X2,{className:"h-screen max-h-screen p-0 flex flex-col",children:[r.jsx(gy,{className:"p-4 border-b flex-shrink-0",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"text-left flex-1",children:[r.jsx(py,{children:a}),r.jsx(xy,{children:i})]}),r.jsx(G,{variant:"ghost",onClick:()=>t(!1),className:"h-11 w-11 p-0 hover:bg-muted/60 -mr-2 -mt-1 min-w-[44px] min-h-[44px] flex items-center justify-center",children:r.jsx(ze,{className:"h-6 w-6"})})]})}),r.jsx("div",{className:"p-4 border-b flex-shrink-0",children:r.jsxs("div",{className:"relative",children:[r.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(os,{placeholder:n,value:y,onChange:x,className:"pl-10",autoFocus:!0}),y&&r.jsx(G,{variant:"ghost",size:"sm",onClick:w,className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",children:r.jsx(ze,{className:"h-3 w-3"})})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:p.length===0?r.jsxs("div",{className:"text-center py-8 px-4",children:[r.jsx("p",{className:"text-muted-foreground",children:f}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:m})]}):r.jsx("div",{className:"p-4 space-y-3",children:p.map((j,_)=>u?r.jsx("div",{children:u(j,!1,()=>N(j))},_):d?r.jsx(G,{variant:"ghost",onClick:()=>N(j),className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",children:r.jsx("div",{className:"w-full",children:d(j,!1)})},_):r.jsx(G,{variant:"ghost",onClick:()=>N(j),className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",children:r.jsx("div",{className:"w-full",children:String(j)})},_))})})]})]})};J2.displayName="MobileAutocompleteDrawer";const $l=z.memo(J2);function Vr(e="(max-width: 640px)"){const t=()=>typeof window>"u"||typeof window.matchMedia>"u"?!1:window.matchMedia(e).matches,[s,n]=h.useState(t);return h.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia>"u")return;const a=window.matchMedia(e),i=()=>n(a.matches);return n(a.matches),a.addEventListener("change",i),()=>{a.removeEventListener("change",i)}},[e]),s}function Yi({open:e,onOpenChange:t,title:s,description:n,side:a="right",className:i,mobileQuery:o="(max-width: 640px)",resetKey:l,children:c}){const u=Vr(o),d=h.useRef(null);h.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[e,u]),h.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[l]);const f=$("flex flex-col",u?"inset-0 top-0 left-0 right-0 bottom-0 h-[100dvh] max-h-[100dvh] w-[100vw] p-0 rounded-none border-0 overflow-y-auto":"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0 overflow-y-auto bg-background",i);return r.jsx(tl,{open:e,onOpenChange:t,children:r.jsxs(Ci,{side:u?"bottom":a,className:f,children:[(s||n)&&r.jsx("div",{className:$("sticky top-0 z-10 bg-background border-b",u?"p-4 pr-16":"p-4"),children:r.jsxs(sl,{className:"p-0",children:[s&&r.jsx(nl,{children:s}),n&&r.jsx(z0,{children:n})]})}),r.jsx("div",{ref:d,className:$("flex-1 overflow-y-auto overscroll-contain",u?"p-4":"p-6"),children:c})]})})}function Km({viewMode:e,onViewModeChange:t,className:s=""}){return r.jsxs("div",{className:`flex items-center gap-2 ${s}`,children:[r.jsxs(G,{variant:e==="grid"?"default":"outline",size:"sm",onClick:()=>t("grid"),className:"flex items-center gap-2",children:[r.jsx($i,{className:"h-4 w-4"}),"Grid"]}),r.jsxs(G,{variant:e==="list"?"default":"outline",size:"sm",onClick:()=>t("list"),className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-4 w-4"}),"List"]})]})}const L8={Warrior:"Warrior.svg",Lady:"Lady.svg",Lord:"Lord.svg",Steed:"Steed.svg",Mage:"Mage.svg",Apprentice:"Apprentice.svg",Atronach:"Atronach.svg",Ritual:"Ritual.svg",Thief:"Thief.svg",Lover:"Lover.svg",Shadow:"Shadow.svg",Tower:"Tower.svg",Serpent:"Serpent.svg"};function Df({birthsignName:e,size:t="md",className:s}){const n=L8[e],a=n?Vt(`assets/sign-avatar/${n}`):void 0;return r.jsxs("div",{className:"relative",children:[r.jsx(Xm,{imgSrc:a,alt:e,size:t,className:s,imageClassName:"scale-[160%]",showBorder:!1}),r.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-black dark:border-white pointer-events-none z-10"})]})}function eC(e){return e&&e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function tC(e){return e?eC(e):""}function sC(e){return e?eC(e):""}function Oa(e){return Array.isArray?Array.isArray(e):rC(e)==="[object Array]"}function z8(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function O8(e){return e==null?"":z8(e)}function Bn(e){return typeof e=="string"}function nC(e){return typeof e=="number"}function B8(e){return e===!0||e===!1||I8(e)&&rC(e)=="[object Boolean]"}function aC(e){return typeof e=="object"}function I8(e){return aC(e)&&e!==null}function Ms(e){return e!=null}function ig(e){return!e.trim().length}function rC(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const $8="Incorrect 'index' type",F8=e=>`Invalid value for key ${e}`,H8=e=>`Pattern length exceeds max of ${e}.`,U8=e=>`Missing ${e} property in key`,G8=e=>`Property 'weight' in key '${e}' must be a positive integer`,yw=Object.prototype.hasOwnProperty;class V8{constructor(t){this._keys=[],this._keyMap={};let s=0;t.forEach(n=>{let a=iC(n);this._keys.push(a),this._keyMap[a.id]=a,s+=a.weight}),this._keys.forEach(n=>{n.weight/=s})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function iC(e){let t=null,s=null,n=null,a=1,i=null;if(Bn(e)||Oa(e))n=e,t=vw(e),s=Dp(e);else{if(!yw.call(e,"name"))throw new Error(U8("name"));const o=e.name;if(n=o,yw.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(G8(o));t=vw(o),s=Dp(o),i=e.getFn}return{path:t,id:s,weight:a,src:n,getFn:i}}function vw(e){return Oa(e)?e:e.split(".")}function Dp(e){return Oa(e)?e.join("."):e}function q8(e,t){let s=[],n=!1;const a=(i,o,l)=>{if(Ms(i))if(!o[l])s.push(i);else{let c=o[l];const u=i[c];if(!Ms(u))return;if(l===o.length-1&&(Bn(u)||nC(u)||B8(u)))s.push(O8(u));else if(Oa(u)){n=!0;for(let d=0,f=u.length;d<f;d+=1)a(u[d],o,l+1)}else o.length&&a(u,o,l+1)}};return a(e,Bn(t)?t.split("."):t,0),n?s:s[0]}const Q8={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Z8={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},W8={location:0,threshold:.6,distance:100},Y8={useExtendedSearch:!1,getFn:q8,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var he={...Z8,...Q8,...W8,...Y8};const X8=/[^ ]+/g;function K8(e=1,t=3){const s=new Map,n=Math.pow(10,t);return{get(a){const i=a.match(X8).length;if(s.has(i))return s.get(i);const o=1/Math.pow(i,.5*e),l=parseFloat(Math.round(o*n)/n);return s.set(i,l),l},clear(){s.clear()}}}class yy{constructor({getFn:t=he.getFn,fieldNormWeight:s=he.fieldNormWeight}={}){this.norm=K8(s,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Bn(this.docs[0])?this.docs.forEach((t,s)=>{this._addString(t,s)}):this.docs.forEach((t,s)=>{this._addObject(t,s)}),this.norm.clear())}add(t){const s=this.size();Bn(t)?this._addString(t,s):this._addObject(t,s)}removeAt(t){this.records.splice(t,1);for(let s=t,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(t,s){return t[this._keysMap[s]]}size(){return this.records.length}_addString(t,s){if(!Ms(t)||ig(t))return;let n={v:t,i:s,n:this.norm.get(t)};this.records.push(n)}_addObject(t,s){let n={i:s,$:{}};this.keys.forEach((a,i)=>{let o=a.getFn?a.getFn(t):this.getFn(t,a.path);if(Ms(o)){if(Oa(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(Ms(d))if(Bn(d)&&!ig(d)){let f={v:d,i:u,n:this.norm.get(d)};l.push(f)}else Oa(d)&&d.forEach((f,m)=>{c.push({nestedArrIndex:m,value:f})})}n.$[i]=l}else if(Bn(o)&&!ig(o)){let l={v:o,n:this.norm.get(o)};n.$[i]=l}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function oC(e,t,{getFn:s=he.getFn,fieldNormWeight:n=he.fieldNormWeight}={}){const a=new yy({getFn:s,fieldNormWeight:n});return a.setKeys(e.map(iC)),a.setSources(t),a.create(),a}function J8(e,{getFn:t=he.getFn,fieldNormWeight:s=he.fieldNormWeight}={}){const{keys:n,records:a}=e,i=new yy({getFn:t,fieldNormWeight:s});return i.setKeys(n),i.setIndexRecords(a),i}function xd(e,{errors:t=0,currentLocation:s=0,expectedLocation:n=0,distance:a=he.distance,ignoreLocation:i=he.ignoreLocation}={}){const o=t/e.length;if(i)return o;const l=Math.abs(n-s);return a?o+l/a:l?1:o}function eH(e=[],t=he.minMatchCharLength){let s=[],n=-1,a=-1,i=0;for(let o=e.length;i<o;i+=1){let l=e[i];l&&n===-1?n=i:!l&&n!==-1&&(a=i-1,a-n+1>=t&&s.push([n,a]),n=-1)}return e[i-1]&&i-n>=t&&s.push([n,i-1]),s}const oi=32;function tH(e,t,s,{location:n=he.location,distance:a=he.distance,threshold:i=he.threshold,findAllMatches:o=he.findAllMatches,minMatchCharLength:l=he.minMatchCharLength,includeMatches:c=he.includeMatches,ignoreLocation:u=he.ignoreLocation}={}){if(t.length>oi)throw new Error(H8(oi));const d=t.length,f=e.length,m=Math.max(0,Math.min(n,f));let g=i,b=m;const y=l>1||c,v=y?Array(f):[];let p;for(;(p=e.indexOf(t,b))>-1;){let k=xd(t,{currentLocation:p,expectedLocation:m,distance:a,ignoreLocation:u});if(g=Math.min(k,g),b=p+d,y){let A=0;for(;A<d;)v[p+A]=1,A+=1}}b=-1;let x=[],w=1,N=d+f;const j=1<<d-1;for(let k=0;k<d;k+=1){let A=0,S=N;for(;A<S;)xd(t,{errors:k,currentLocation:m+S,expectedLocation:m,distance:a,ignoreLocation:u})<=g?A=S:N=S,S=Math.floor((N-A)/2+A);N=S;let C=Math.max(1,m-S+1),M=o?f:Math.min(m+S,f)+d,E=Array(M+2);E[M+1]=(1<<k)-1;for(let T=M;T>=C;T-=1){let O=T-1,P=s[e.charAt(O)];if(y&&(v[O]=+!!P),E[T]=(E[T+1]<<1|1)&P,k&&(E[T]|=(x[T+1]|x[T])<<1|1|x[T+1]),E[T]&j&&(w=xd(t,{errors:k,currentLocation:O,expectedLocation:m,distance:a,ignoreLocation:u}),w<=g)){if(g=w,b=O,b<=m)break;C=Math.max(1,2*m-b)}}if(xd(t,{errors:k+1,currentLocation:m,expectedLocation:m,distance:a,ignoreLocation:u})>g)break;x=E}const _={isMatch:b>=0,score:Math.max(.001,w)};if(y){const k=eH(v,l);k.length?c&&(_.indices=k):_.isMatch=!1}return _}function sH(e){let t={};for(let s=0,n=e.length;s<n;s+=1){const a=e.charAt(s);t[a]=(t[a]||0)|1<<n-s-1}return t}const Pf=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class lC{constructor(t,{location:s=he.location,threshold:n=he.threshold,distance:a=he.distance,includeMatches:i=he.includeMatches,findAllMatches:o=he.findAllMatches,minMatchCharLength:l=he.minMatchCharLength,isCaseSensitive:c=he.isCaseSensitive,ignoreDiacritics:u=he.ignoreDiacritics,ignoreLocation:d=he.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:a,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d},t=c?t:t.toLowerCase(),t=u?Pf(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(g,b)=>{this.chunks.push({pattern:g,alphabet:sH(g),startIndex:b})},m=this.pattern.length;if(m>oi){let g=0;const b=m%oi,y=m-b;for(;g<y;)f(this.pattern.substr(g,oi),g),g+=oi;if(b){const v=m-oi;f(this.pattern.substr(v),v)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:s,ignoreDiacritics:n,includeMatches:a}=this.options;if(t=s?t:t.toLowerCase(),t=n?Pf(t):t,this.pattern===t){let y={isMatch:!0,score:0};return a&&(y.indices=[[0,t.length-1]]),y}const{location:i,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:d}=this.options;let f=[],m=0,g=!1;this.chunks.forEach(({pattern:y,alphabet:v,startIndex:p})=>{const{isMatch:x,score:w,indices:N}=tH(t,y,v,{location:i+p,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:a,ignoreLocation:d});x&&(g=!0),m+=w,x&&N&&(f=[...f,...N])});let b={isMatch:g,score:g?m/this.chunks.length:1};return g&&a&&(b.indices=f),b}}class qr{constructor(t){this.pattern=t}static isMultiMatch(t){return bw(t,this.multiRegex)}static isSingleMatch(t){return bw(t,this.singleRegex)}search(){}}function bw(e,t){const s=e.match(t);return s?s[1]:null}class nH extends qr{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const s=t===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class aH extends qr{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class rH extends qr{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const s=t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class iH extends qr{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const s=!t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class oH extends qr{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const s=t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class lH extends qr{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const s=!t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class cC extends qr{constructor(t,{location:s=he.location,threshold:n=he.threshold,distance:a=he.distance,includeMatches:i=he.includeMatches,findAllMatches:o=he.findAllMatches,minMatchCharLength:l=he.minMatchCharLength,isCaseSensitive:c=he.isCaseSensitive,ignoreDiacritics:u=he.ignoreDiacritics,ignoreLocation:d=he.ignoreLocation}={}){super(t),this._bitapSearch=new lC(t,{location:s,threshold:n,distance:a,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class uC extends qr{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let s=0,n;const a=[],i=this.pattern.length;for(;(n=t.indexOf(this.pattern,s))>-1;)s=n+i,a.push([n,s-1]);const o=!!a.length;return{isMatch:o,score:o?0:1,indices:a}}}const Pp=[nH,uC,rH,iH,lH,oH,aH,cC],ww=Pp.length,cH=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,uH="|";function dH(e,t={}){return e.split(uH).map(s=>{let n=s.trim().split(cH).filter(i=>i&&!!i.trim()),a=[];for(let i=0,o=n.length;i<o;i+=1){const l=n[i];let c=!1,u=-1;for(;!c&&++u<ww;){const d=Pp[u];let f=d.isMultiMatch(l);f&&(a.push(new d(f,t)),c=!0)}if(!c)for(u=-1;++u<ww;){const d=Pp[u];let f=d.isSingleMatch(l);if(f){a.push(new d(f,t));break}}}return a})}const fH=new Set([cC.type,uC.type]);class mH{constructor(t,{isCaseSensitive:s=he.isCaseSensitive,ignoreDiacritics:n=he.ignoreDiacritics,includeMatches:a=he.includeMatches,minMatchCharLength:i=he.minMatchCharLength,ignoreLocation:o=he.ignoreLocation,findAllMatches:l=he.findAllMatches,location:c=he.location,threshold:u=he.threshold,distance:d=he.distance}={}){this.query=null,this.options={isCaseSensitive:s,ignoreDiacritics:n,includeMatches:a,minMatchCharLength:i,findAllMatches:l,ignoreLocation:o,location:c,threshold:u,distance:d},t=s?t:t.toLowerCase(),t=n?Pf(t):t,this.pattern=t,this.query=dH(this.pattern,this.options)}static condition(t,s){return s.useExtendedSearch}searchIn(t){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:a,ignoreDiacritics:i}=this.options;t=a?t:t.toLowerCase(),t=i?Pf(t):t;let o=0,l=[],c=0;for(let u=0,d=s.length;u<d;u+=1){const f=s[u];l.length=0,o=0;for(let m=0,g=f.length;m<g;m+=1){const b=f[m],{isMatch:y,indices:v,score:p}=b.search(t);if(y){if(o+=1,c+=p,n){const x=b.constructor.type;fH.has(x)?l=[...l,...v]:l.push(v)}}else{c=0,o=0,l.length=0;break}}if(o){let m={isMatch:!0,score:c/o};return n&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const Lp=[];function hH(...e){Lp.push(...e)}function zp(e,t){for(let s=0,n=Lp.length;s<n;s+=1){let a=Lp[s];if(a.condition(e,t))return new a(e,t)}return new lC(e,t)}const Lf={AND:"$and",OR:"$or"},Op={PATH:"$path",PATTERN:"$val"},Bp=e=>!!(e[Lf.AND]||e[Lf.OR]),gH=e=>!!e[Op.PATH],pH=e=>!Oa(e)&&aC(e)&&!Bp(e),Nw=e=>({[Lf.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function dC(e,t,{auto:s=!0}={}){const n=a=>{let i=Object.keys(a);const o=gH(a);if(!o&&i.length>1&&!Bp(a))return n(Nw(a));if(pH(a)){const c=o?a[Op.PATH]:i[0],u=o?a[Op.PATTERN]:a[c];if(!Bn(u))throw new Error(F8(c));const d={keyId:Dp(c),pattern:u};return s&&(d.searcher=zp(u,t)),d}let l={children:[],operator:i[0]};return i.forEach(c=>{const u=a[c];Oa(u)&&u.forEach(d=>{l.children.push(n(d))})}),l};return Bp(e)||(e=Nw(e)),n(e)}function xH(e,{ignoreFieldNorm:t=he.ignoreFieldNorm}){e.forEach(s=>{let n=1;s.matches.forEach(({key:a,norm:i,score:o})=>{const l=a?a.weight:null;n*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:i))}),s.score=n})}function yH(e,t){const s=e.matches;t.matches=[],Ms(s)&&s.forEach(n=>{if(!Ms(n.indices)||!n.indices.length)return;const{indices:a,value:i}=n;let o={indices:a,value:i};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),t.matches.push(o)})}function vH(e,t){t.score=e.score}function bH(e,t,{includeMatches:s=he.includeMatches,includeScore:n=he.includeScore}={}){const a=[];return s&&a.push(yH),n&&a.push(vH),e.map(i=>{const{idx:o}=i,l={item:t[o],refIndex:o};return a.length&&a.forEach(c=>{c(i,l)}),l})}class ls{constructor(t,s={},n){this.options={...he,...s},this.options.useExtendedSearch,this._keyStore=new V8(this.options.keys),this.setCollection(t,n)}setCollection(t,s){if(this._docs=t,s&&!(s instanceof yy))throw new Error($8);this._myIndex=s||oC(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Ms(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const s=[];for(let n=0,a=this._docs.length;n<a;n+=1){const i=this._docs[n];t(i,n)&&(this.removeAt(n),n-=1,a-=1,s.push(i))}return s}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:s=-1}={}){const{includeMatches:n,includeScore:a,shouldSort:i,sortFn:o,ignoreFieldNorm:l}=this.options;let c=Bn(t)?Bn(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return xH(c,{ignoreFieldNorm:l}),i&&c.sort(o),nC(s)&&s>-1&&(c=c.slice(0,s)),bH(c,this._docs,{includeMatches:n,includeScore:a})}_searchStringList(t){const s=zp(t,this.options),{records:n}=this._myIndex,a=[];return n.forEach(({v:i,i:o,n:l})=>{if(!Ms(i))return;const{isMatch:c,score:u,indices:d}=s.searchIn(i);c&&a.push({item:i,idx:o,matches:[{score:u,value:i,norm:l,indices:d}]})}),a}_searchLogical(t){const s=dC(t,this.options),n=(l,c,u)=>{if(!l.children){const{keyId:f,searcher:m}=l,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:m});return g&&g.length?[{idx:u,item:c,matches:g}]:[]}const d=[];for(let f=0,m=l.children.length;f<m;f+=1){const g=l.children[f],b=n(g,c,u);if(b.length)d.push(...b);else if(l.operator===Lf.AND)return[]}return d},a=this._myIndex.records,i={},o=[];return a.forEach(({$:l,i:c})=>{if(Ms(l)){let u=n(s,l,c);u.length&&(i[c]||(i[c]={idx:c,item:l,matches:[]},o.push(i[c])),u.forEach(({matches:d})=>{i[c].matches.push(...d)}))}}),o}_searchObjectList(t){const s=zp(t,this.options),{keys:n,records:a}=this._myIndex,i=[];return a.forEach(({$:o,i:l})=>{if(!Ms(o))return;let c=[];n.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:o[d],searcher:s}))}),c.length&&i.push({idx:l,item:o,matches:c})}),i}_findMatches({key:t,value:s,searcher:n}){if(!Ms(s))return[];let a=[];if(Oa(s))s.forEach(({v:i,i:o,n:l})=>{if(!Ms(i))return;const{isMatch:c,score:u,indices:d}=n.searchIn(i);c&&a.push({score:u,key:t,value:i,idx:o,norm:l,indices:d})});else{const{v:i,n:o}=s,{isMatch:l,score:c,indices:u}=n.searchIn(i);l&&a.push({score:c,key:t,value:i,norm:o,indices:u})}return a}}ls.version="7.1.0";ls.createIndex=oC;ls.parseIndex=J8;ls.config=he;ls.parseQuery=dC;hH(mH);function fC(e,t){const s=h.useMemo(()=>e.map(l=>{var c,u;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:l.description,group:l.group,statModifications:l.stat_modifications.map(d=>`${d.stat} ${d.type} ${d.value}${d.value_type==="percentage"?"%":""}`),skillBonuses:l.skill_bonuses.map(d=>`${d.stat} +${d.value}${d.value_type==="percentage"?"%":""}`),powers:l.powers.map(d=>`${d.name} ${d.description}`),conditionalEffects:((c=l.conditional_effects)==null?void 0:c.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],masteryEffects:((u=l.mastery_effects)==null?void 0:u.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],originalBirthsign:l}}),[e]),n=h.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"powers",weight:.2},{name:"statModifications",weight:.15},{name:"skillBonuses",weight:.15},{name:"conditionalEffects",weight:.1},{name:"masteryEffects",weight:.1},{name:"group",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),a=h.useMemo(()=>new ls(s,n),[s,n]),i=h.useMemo(()=>t.trim()?a.search(t):s.map(l=>({item:l,score:0,matches:[]})),[a,t]);return{filteredBirthsigns:h.useMemo(()=>i.map(l=>l.item.originalBirthsign),[i]),searchResults:i,searchableBirthsigns:s}}function jw({birthsigns:e,onSelect:t,placeholder:s="Search birthsigns...",className:n=""}){const[a,i]=h.useState(""),[o,l]=h.useState(!1),c=Vr("(max-width: 640px)");h.useRef(null);const{filteredBirthsigns:u}=fC(e,a),d=h.useMemo(()=>u.map(v=>({id:v.edid,label:v.name,description:v.description,category:v.group,icon:r.jsx(Df,{birthsignName:v.name,size:"md"}),badge:v.group&&r.jsx(Q,{variant:"outline",className:$("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:v.group}),metadata:{originalBirthsign:v}})),[u]),f=h.useCallback(v=>{t(v),i(v.name)},[t]),m=h.useCallback(v=>{const p=e.find(x=>x.edid===v.id);p&&(t(p),i(p.name))},[e,t]),g=h.useMemo(()=>(v,p)=>r.jsxs("div",{className:"flex items-center gap-3",children:[v.icon&&r.jsx("div",{className:"flex-shrink-0",children:v.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:v.label}),v.badge&&r.jsx("div",{className:"flex-shrink-0",children:v.badge})]}),v.description&&r.jsx(we,{text:v.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]}),[]),b=h.useMemo(()=>({data:e,search:v=>{const p=v.toLowerCase();return e.filter(x=>{var w,N;return x.name.toLowerCase().includes(p)||((w=x.description)==null?void 0:w.toLowerCase().includes(p))||((N=x.group)==null?void 0:N.toLowerCase().includes(p))})}}),[e]),y=h.useCallback((v,p,x)=>r.jsx(G,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:x,children:r.jsxs("div",{className:"flex items-center gap-3 w-full",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Df,{birthsignName:v.name,size:"md"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:v.name}),v.group&&r.jsx(Q,{variant:"outline",className:$("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:v.group})]}),v.description&&r.jsx(we,{text:v.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]})}),[]);return c?r.jsx($l,{isOpen:o,onOpenChange:l,onSelect:f,searchPlaceholder:"Search birthsigns...",title:"Select Birth Sign",description:"Choose your character's birth sign from the options below",triggerText:a,triggerPlaceholder:s,store:b,renderListItem:y,emptyMessage:"No birthsigns found",className:n}):r.jsx(Mu,{options:d,onSelect:m,placeholder:s,className:n,renderOption:g,emptyMessage:"No birthsigns found",searchQuery:a,onSearchQueryChange:i})}function zf({item:e,originalBirthsign:t,isExpanded:s=!1,onToggle:n,onClick:a,className:i,showViewAllButton:o=!1,showToggle:l=!0,viewAllButtonText:c="View All",viewAllButtonRoute:u="/birthsigns"}){var _,k,A;const d=lt(),f=()=>{d(u)},m=S=>{S.target.closest("[data-no-click]")||a==null||a()},g=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Birthsign";e!=null&&e.description||t!=null&&t.description;const b=(e==null?void 0:e.category)||(t==null?void 0:t.group)||"";e!=null&&e.effects;const y=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"",v=()=>{if(!(t!=null&&t.stat_modifications))return{health:0,magicka:0,stamina:0};const S={health:0,magicka:0,stamina:0};return t.stat_modifications.forEach(C=>{const M=C.type==="bonus"?C.value:-C.value;C.stat.toLowerCase().includes("health")?S.health+=M:C.stat.toLowerCase().includes("magicka")?S.magicka+=M:C.stat.toLowerCase().includes("stamina")&&(S.stamina+=M)}),S},p=()=>{if(!t)return[];const S=[];return t.powers&&S.push(...t.powers.map(C=>({name:C.name,type:"power"}))),t.conditional_effects&&S.push(...t.conditional_effects.map(C=>({name:C.stat,type:"conditional"}))),t.mastery_effects&&S.push(...t.mastery_effects.map(C=>({name:C.stat,type:"mastery"}))),S},x=S=>{const C=e8(S);return`${C.background} ${C.text} ${C.border}`},w=S=>{switch(S){case"health":return"bg-red-200 text-red-800 border-red-300";case"magicka":return"bg-blue-200 text-blue-800 border-blue-300";case"stamina":return"bg-green-200 text-green-800 border-green-300";default:return"bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30"}},N=v(),j=p();return r.jsxs("div",{className:$("rounded-lg border bg-background shadow-sm transition-all h-full flex flex-col",a&&"cursor-pointer hover:shadow-md hover:bg-accent/50 hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",i),onClick:a?m:void 0,children:[r.jsxs("div",{className:"flex items-start justify-between p-4 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Df,{birthsignName:g,size:"2xl"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(Ce,{className:"text-primary font-semibold",children:g}),r.jsxs("div",{className:"flex items-center gap-2",children:[b&&r.jsx("div",{className:`inline-flex items-center justify-center px-2 py-1 border rounded-full text-xs font-medium w-16 ${x(b)}`,children:b}),(N.health!==0||N.magicka!==0||N.stamina!==0)&&r.jsxs("div",{className:"flex gap-1",children:[N.health!==0&&r.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 border rounded-full text-xs font-medium ${w("health")}`,children:[r.jsx(Yn,{className:"h-3 w-3"}),r.jsxs("span",{children:[N.health>0?"+":"",N.health]})]}),N.magicka!==0&&r.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 border rounded-full text-xs font-medium ${w("magicka")}`,children:[r.jsx(St,{className:"h-3 w-3"}),r.jsxs("span",{children:[N.magicka>0?"+":"",N.magicka]})]}),N.stamina!==0&&r.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 border rounded-full text-xs font-medium ${w("stamina")}`,children:[r.jsx(rt,{className:"h-3 w-3"}),r.jsxs("span",{children:[N.stamina>0?"+":"",N.stamina]})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[j.length>0&&r.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Oe,{className:"h-3 w-3 text-yellow-500"}),r.jsxs("span",{children:[j.length," effects"]})]})}),o&&r.jsxs(G,{variant:"outline",size:"sm",onClick:f,className:"text-xs","data-no-click":!0,children:[r.jsx($r,{className:"h-3 w-3 mr-1"}),c]}),l&&r.jsx("div",{"data-no-click":!0,children:r.jsx(on,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"stone",itemName:g})})]})]}),r.jsxs("div",{className:"flex-1 px-4 pb-4 min-h-0",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{children:r.jsx(we,{text:y})}),t&&r.jsxs("div",{className:"flex flex-wrap gap-2",children:[(_=t.powers)==null?void 0:_.slice(0,3).map((S,C)=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[r.jsx(Oe,{className:"h-3 w-3"}),S.name]},C)),(k=t.conditional_effects)==null?void 0:k.slice(0,3).map((S,C)=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-200 text-purple-800 border border-purple-300 rounded-full text-xs font-medium",children:[r.jsx(rt,{className:"h-3 w-3"}),S.stat]},`conditional-${C}`)),(A=t.mastery_effects)==null?void 0:A.slice(0,3).map((S,C)=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-200 text-blue-800 border border-blue-300 rounded-full text-xs font-medium",children:[r.jsx(Oe,{className:"h-3 w-3"}),S.stat]},`mastery-${C}`))]})]}),s&&t&&r.jsxs("div",{className:"space-y-4 mt-4",children:[t.stat_modifications&&t.stat_modifications.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx(as,{className:"text-lg font-medium text-foreground",children:"Stat Modifications"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.stat_modifications.map((S,C)=>r.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[r.jsx("span",{className:"text-sm font-medium capitalize",children:tC(S.stat)}),r.jsxs("span",{className:$("font-bold",S.type==="bonus"?"text-green-600":"text-red-600"),children:[S.type==="bonus"?"+":"-",S.value,S.value_type==="percentage"?"%":""]})]},C))})]}),t.skill_bonuses&&t.skill_bonuses.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx(as,{className:"text-lg font-medium text-foreground",children:"Skill Bonuses"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.skill_bonuses.map((S,C)=>r.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[r.jsx("span",{className:"text-sm font-medium capitalize",children:sC(S.stat)}),r.jsxs("span",{className:"font-bold text-green-600",children:["+",S.value,S.value_type==="percentage"?"%":""]})]},C))})]}),t.powers&&t.powers.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs(as,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[r.jsx(St,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),r.jsx("div",{className:"space-y-2",children:t.powers.map((S,C)=>r.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Oe,{className:"h-4 w-4 text-yellow-500"}),r.jsx("span",{className:"font-medium text-sm",children:S.name})]}),r.jsx(we,{text:S.description}),(S.magnitude||S.duration)&&r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-2",children:[S.magnitude&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Magnitude:"})," ",S.magnitude]}),S.duration&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Duration:"})," ",S.duration,"s"]})]})]},C))})]}),t.conditional_effects&&t.conditional_effects.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs(as,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[r.jsx(rt,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),r.jsx("div",{className:"space-y-2",children:t.conditional_effects.map((S,C)=>r.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:r.jsx("span",{className:"font-medium text-sm capitalize",children:S.stat})}),r.jsx(we,{text:S.description}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.jsx("strong",{children:"Condition:"})," ",S.condition]})]},C))})]}),t.mastery_effects&&t.mastery_effects.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs(as,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[r.jsx(Oe,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),r.jsx("div",{className:"space-y-2",children:t.mastery_effects.map((S,C)=>r.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Oe,{className:"h-4 w-4 text-yellow-500"}),r.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),r.jsx("div",{className:"text-sm font-medium capitalize",children:S.stat}),r.jsx(we,{text:S.description}),S.condition&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.jsx("strong",{children:"Requirement:"})," ",S.condition]})]},C))})]})]})]})]})}function wH(e){const t=e.map(s=>s.group);return[...new Set(t)].sort()}function NH(e){const t=e.flatMap(s=>[...s.stat_modifications.map(n=>n.stat),...s.skill_bonuses.map(n=>n.stat)]);return[...new Set(t)].sort()}var jH="Separator",kw="horizontal",kH=["horizontal","vertical"],mC=h.forwardRef((e,t)=>{const{decorative:s,orientation:n=kw,...a}=e,i=SH(n)?n:kw,l=s?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return r.jsx(je.div,{"data-orientation":i,...l,...a,ref:t})});mC.displayName=jH;function SH(e){return kH.includes(e)}var _H=mC;function li({className:e,orientation:t="horizontal",decorative:s=!0,...n}){return r.jsx(_H,{"data-slot":"separator",decorative:s,orientation:t,className:$("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...n})}function CH({birthsign:e,title:t,maxDisplay:s,compact:n=!1,className:a}){var c,u,d,f;if(!e)return null;const i=e.powers.length>0,o=((c=e.conditional_effects)==null?void 0:c.length)>0,l=((u=e.mastery_effects)==null?void 0:u.length)>0;if(!i&&!o&&!l)return null;if(n){const m=[...e.powers.map(b=>({type:"power",data:b})),...((d=e.conditional_effects)==null?void 0:d.map(b=>({type:"conditional",data:b})))||[],...((f=e.mastery_effects)==null?void 0:f.map(b=>({type:"mastery",data:b})))||[]],g=s?m.slice(0,s):m;return r.jsxs("div",{className:$("flex flex-wrap gap-2",a),children:[g.map((b,y)=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[r.jsx(Oe,{className:"h-3 w-3"}),b.data.name||b.data.stat]},y)),s&&m.length>s&&r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted text-muted-foreground border rounded-full text-xs font-medium",children:["+",m.length-s," more"]})]})}return r.jsxs(ae,{className:$("border-muted/50",a),children:[t&&r.jsx(de,{className:"pb-3",children:r.jsx(ve,{className:"text-base",children:t})}),r.jsxs(oe,{className:"space-y-4",children:[i&&r.jsxs("div",{children:[r.jsxs(wr,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[r.jsx(St,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),r.jsx("div",{className:"space-y-2",children:e.powers.map((m,g)=>r.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Oe,{className:"h-4 w-4 text-yellow-500"}),r.jsx("span",{className:"font-medium text-sm",children:m.name})]}),r.jsx("div",{className:"border-t border-border my-2"}),r.jsx(we,{text:m.description}),(m.magnitude||m.duration)&&r.jsxs("div",{className:"space-y-2 text-sm mt-2",children:[m.magnitude&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium min-w-[80px]",children:"Magnitude:"}),r.jsx("span",{children:m.magnitude})]}),m.duration&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium min-w-[80px]",children:"Duration:"}),r.jsxs("span",{children:[m.duration,"s"]})]})]})]},g))})]}),o&&r.jsxs("div",{children:[r.jsxs(wr,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[r.jsx(rt,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),r.jsx("div",{className:"space-y-2",children:e.conditional_effects.map((m,g)=>r.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Q,{variant:"outline",className:"text-xs bg-purple-200 text-purple-800 border-purple-300",children:"Conditional"}),r.jsx("span",{className:"font-medium text-sm capitalize",children:m.stat})]}),r.jsx(we,{text:m.description}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.jsx("strong",{children:"Condition:"})," ",m.condition]})]},g))})]}),l&&r.jsxs("div",{children:[r.jsxs(wr,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[r.jsx(Oe,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),r.jsx("div",{className:"space-y-2",children:e.mastery_effects.map((m,g)=>r.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Oe,{className:"h-4 w-4 text-yellow-500"}),r.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),r.jsx("div",{className:"border-t border-border my-2"}),r.jsx("div",{className:"text-sm font-medium capitalize",children:m.stat}),r.jsx(we,{text:m.description}),m.condition&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.jsx("strong",{children:"Requirement:"})," ",m.condition]})]},g))})]})]})]})}function EH({birthsign:e,title:t="Stat Modifications",className:s}){const n=e.stat_modifications.length>0,a=e.skill_bonuses.length>0;return!n&&!a?null:r.jsxs(ae,{className:$("border-muted/50",s),children:[r.jsx(de,{className:"pb-3",children:r.jsx(ve,{className:"text-base",children:t})}),r.jsxs(oe,{className:"space-y-4",children:[n&&r.jsxs("div",{children:[r.jsx(wr,{className:"text-sm font-medium mb-2",children:"Attributes"}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.stat_modifications.map((i,o)=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[r.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:tC(i.stat)}),r.jsxs(Q,{variant:"outline",className:$("text-xs flex-shrink-0",i.type==="bonus"?"bg-green-200 text-green-800 border-green-300":"bg-red-200 text-red-800 border-red-300"),children:[i.type==="bonus"?"+":"-",i.value,i.value_type==="percentage"?"%":""]})]},o))})]}),a&&r.jsxs("div",{children:[r.jsx(wr,{className:"text-sm font-medium mb-2",children:"Skill Bonuses"}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.skill_bonuses.map((i,o)=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[r.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:sC(i.stat)}),r.jsxs(Q,{variant:"outline",className:"bg-blue-200 text-blue-800 border-blue-300 text-xs flex-shrink-0",children:["+",i.value,i.value_type==="percentage"?"%":""]})]},o))})]})]})]})}function AH({birthsign:e,isOpen:t,onOpenChange:s}){return e?r.jsx(Yi,{open:t,onOpenChange:s,side:"right",children:r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(Df,{birthsignName:e.name,size:"4xl"}),r.jsxs("div",{className:"flex-1",children:[r.jsx(hr,{className:"text-2xl font-bold mb-2",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"inline-flex items-center px-2 py-1 bg-skyrim-gold/10 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:e.group}),r.jsx(on,{itemId:e.edid,itemType:"stone",itemName:e.name})]}),r.jsx(we,{text:e.description})]})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(EH,{birthsign:e}),r.jsx(li,{}),r.jsx(CH,{birthsign:e,title:"Special Effects"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ce,{className:"text-lg font-semibold",children:"Game Information"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[r.jsx("span",{className:"font-medium min-w-[60px]",children:"EDID:"}),r.jsx("span",{className:"break-all",children:e.edid})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[r.jsx("span",{className:"font-medium min-w-[60px]",children:"Form ID:"}),r.jsx("span",{className:"break-all",children:e.formid})]})]})]})]})]})}):null}var Jm="Collapsible",[RH,hC]=Us(Jm),[TH,vy]=RH(Jm),gC=h.forwardRef((e,t)=>{const{__scopeCollapsible:s,open:n,defaultOpen:a,disabled:i,onOpenChange:o,...l}=e,[c,u]=Va({prop:n,defaultProp:a??!1,onChange:o,caller:Jm});return r.jsx(TH,{scope:s,disabled:i,contentId:Ea(),open:c,onOpenToggle:h.useCallback(()=>u(d=>!d),[u]),children:r.jsx(je.div,{"data-state":wy(c),"data-disabled":i?"":void 0,...l,ref:t})})});gC.displayName=Jm;var pC="CollapsibleTrigger",xC=h.forwardRef((e,t)=>{const{__scopeCollapsible:s,...n}=e,a=vy(pC,s);return r.jsx(je.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":wy(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:t,onClick:ne(e.onClick,a.onOpenToggle)})});xC.displayName=pC;var by="CollapsibleContent",yC=h.forwardRef((e,t)=>{const{forceMount:s,...n}=e,a=vy(by,e.__scopeCollapsible);return r.jsx(Kt,{present:s||a.open,children:({present:i})=>r.jsx(MH,{...n,ref:t,present:i})})});yC.displayName=by;var MH=h.forwardRef((e,t)=>{const{__scopeCollapsible:s,present:n,children:a,...i}=e,o=vy(by,s),[l,c]=h.useState(n),u=h.useRef(null),d=He(t,u),f=h.useRef(0),m=f.current,g=h.useRef(0),b=g.current,y=o.open||l,v=h.useRef(y),p=h.useRef(void 0);return h.useEffect(()=>{const x=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(x)},[]),Zn(()=>{const x=u.current;if(x){p.current=p.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const w=x.getBoundingClientRect();f.current=w.height,g.current=w.width,v.current||(x.style.transitionDuration=p.current.transitionDuration,x.style.animationName=p.current.animationName),c(n)}},[o.open,n]),r.jsx(je.div,{"data-state":wy(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...i,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:y&&a})});function wy(e){return e?"open":"closed"}var DH=gC,PH=xC,LH=yC,Sn="Accordion",zH=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Ny,OH,BH]=I0(Sn),[eh,Uae]=Us(Sn,[BH,hC]),jy=hC(),vC=z.forwardRef((e,t)=>{const{type:s,...n}=e,a=n,i=n;return r.jsx(Ny.Provider,{scope:e.__scopeAccordion,children:s==="multiple"?r.jsx(HH,{...i,ref:t}):r.jsx(FH,{...a,ref:t})})});vC.displayName=Sn;var[bC,IH]=eh(Sn),[wC,$H]=eh(Sn,{collapsible:!1}),FH=z.forwardRef((e,t)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...o}=e,[l,c]=Va({prop:s,defaultProp:n??"",onChange:a,caller:Sn});return r.jsx(bC,{scope:e.__scopeAccordion,value:z.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:z.useCallback(()=>i&&c(""),[i,c]),children:r.jsx(wC,{scope:e.__scopeAccordion,collapsible:i,children:r.jsx(NC,{...o,ref:t})})})}),HH=z.forwardRef((e,t)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=Va({prop:s,defaultProp:n??[],onChange:a,caller:Sn}),c=z.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=z.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return r.jsx(bC,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:r.jsx(wC,{scope:e.__scopeAccordion,collapsible:!0,children:r.jsx(NC,{...i,ref:t})})})}),[UH,th]=eh(Sn),NC=z.forwardRef((e,t)=>{const{__scopeAccordion:s,disabled:n,dir:a,orientation:i="vertical",...o}=e,l=z.useRef(null),c=He(l,t),u=OH(s),f=_u(a)==="ltr",m=ne(e.onKeyDown,g=>{var A;if(!zH.includes(g.key))return;const b=g.target,y=u().filter(S=>{var C;return!((C=S.ref.current)!=null&&C.disabled)}),v=y.findIndex(S=>S.ref.current===b),p=y.length;if(v===-1)return;g.preventDefault();let x=v;const w=0,N=p-1,j=()=>{x=v+1,x>N&&(x=w)},_=()=>{x=v-1,x<w&&(x=N)};switch(g.key){case"Home":x=w;break;case"End":x=N;break;case"ArrowRight":i==="horizontal"&&(f?j():_());break;case"ArrowDown":i==="vertical"&&j();break;case"ArrowLeft":i==="horizontal"&&(f?_():j());break;case"ArrowUp":i==="vertical"&&_();break}const k=x%p;(A=y[k].ref.current)==null||A.focus()});return r.jsx(UH,{scope:s,disabled:n,direction:a,orientation:i,children:r.jsx(Ny.Slot,{scope:s,children:r.jsx(je.div,{...o,"data-orientation":i,ref:c,onKeyDown:n?void 0:m})})})}),Of="AccordionItem",[GH,ky]=eh(Of),jC=z.forwardRef((e,t)=>{const{__scopeAccordion:s,value:n,...a}=e,i=th(Of,s),o=IH(Of,s),l=jy(s),c=Ea(),u=n&&o.value.includes(n)||!1,d=i.disabled||e.disabled;return r.jsx(GH,{scope:s,open:u,disabled:d,triggerId:c,children:r.jsx(DH,{"data-orientation":i.orientation,"data-state":AC(u),...l,...a,ref:t,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(n):o.onItemClose(n)}})})});jC.displayName=Of;var kC="AccordionHeader",SC=z.forwardRef((e,t)=>{const{__scopeAccordion:s,...n}=e,a=th(Sn,s),i=ky(kC,s);return r.jsx(je.h3,{"data-orientation":a.orientation,"data-state":AC(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:t})});SC.displayName=kC;var Ip="AccordionTrigger",_C=z.forwardRef((e,t)=>{const{__scopeAccordion:s,...n}=e,a=th(Sn,s),i=ky(Ip,s),o=$H(Ip,s),l=jy(s);return r.jsx(Ny.ItemSlot,{scope:s,children:r.jsx(PH,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...l,...n,ref:t})})});_C.displayName=Ip;var CC="AccordionContent",EC=z.forwardRef((e,t)=>{const{__scopeAccordion:s,...n}=e,a=th(Sn,s),i=ky(CC,s),o=jy(s);return r.jsx(LH,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...o,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});EC.displayName=CC;function AC(e){return e?"open":"closed"}var VH=vC,qH=jC,QH=SC,RC=_C,TC=EC;const ZH=VH,MC=h.forwardRef(({className:e,...t},s)=>r.jsx(qH,{ref:s,className:$("border-b",e),...t}));MC.displayName="AccordionItem";const DC=h.forwardRef(({className:e,children:t,...s},n)=>r.jsx(QH,{className:"flex",children:r.jsxs(RC,{ref:n,className:$("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...s,children:[t,r.jsx(vt,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));DC.displayName=RC.displayName;const PC=h.forwardRef(({className:e,children:t,...s},n)=>r.jsx(TC,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:r.jsx("div",{className:$("pb-4 pt-0",e),children:t})}));PC.displayName=TC.displayName;var WH=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),YH="VisuallyHidden",LC=h.forwardRef((e,t)=>r.jsx(je.span,{...e,ref:t,style:{...WH,...e.style}}));LC.displayName=YH;var XH=LC,[sh,Gae]=Us("Tooltip",[Il]),Sy=Il(),KH="TooltipProvider",Sw="tooltip.open",[Vae,zC]=sh(KH),OC="Tooltip",[qae,nh]=sh(OC),$p="TooltipTrigger",JH=h.forwardRef((e,t)=>{const{__scopeTooltip:s,...n}=e,a=nh($p,s),i=zC($p,s),o=Sy(s),l=h.useRef(null),c=He(t,l,a.onTriggerChange),u=h.useRef(!1),d=h.useRef(!1),f=h.useCallback(()=>u.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),r.jsx(Y0,{asChild:!0,...o,children:r.jsx(je.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:ne(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:ne(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:ne(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ne(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:ne(e.onBlur,a.onClose),onClick:ne(e.onClick,a.onClose)})})});JH.displayName=$p;var e9="TooltipPortal",[Qae,t9]=sh(e9,{forceMount:void 0}),il="TooltipContent",BC=h.forwardRef((e,t)=>{const s=t9(il,e.__scopeTooltip),{forceMount:n=s.forceMount,side:a="top",...i}=e,o=nh(il,e.__scopeTooltip);return r.jsx(Kt,{present:n||o.open,children:o.disableHoverableContent?r.jsx(IC,{side:a,...i,ref:t}):r.jsx(s9,{side:a,...i,ref:t})})}),s9=h.forwardRef((e,t)=>{const s=nh(il,e.__scopeTooltip),n=zC(il,e.__scopeTooltip),a=h.useRef(null),i=He(t,a),[o,l]=h.useState(null),{trigger:c,onClose:u}=s,d=a.current,{onPointerInTransitChange:f}=n,m=h.useCallback(()=>{l(null),f(!1)},[f]),g=h.useCallback((b,y)=>{const v=b.currentTarget,p={x:b.clientX,y:b.clientY},x=o9(p,v.getBoundingClientRect()),w=l9(p,x),N=c9(y.getBoundingClientRect()),j=d9([...w,...N]);l(j),f(!0)},[f]);return h.useEffect(()=>()=>m(),[m]),h.useEffect(()=>{if(c&&d){const b=v=>g(v,d),y=v=>g(v,c);return c.addEventListener("pointerleave",b),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",y)}}},[c,d,g,m]),h.useEffect(()=>{if(o){const b=y=>{const v=y.target,p={x:y.clientX,y:y.clientY},x=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),w=!u9(p,o);x?m():w&&(m(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,d,o,u,m]),r.jsx(IC,{...e,ref:i})}),[n9,a9]=sh(OC,{isInside:!1}),r9=tz("TooltipContent"),IC=h.forwardRef((e,t)=>{const{__scopeTooltip:s,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=nh(il,s),u=Sy(s),{onClose:d}=c;return h.useEffect(()=>(document.addEventListener(Sw,d),()=>document.removeEventListener(Sw,d)),[d]),h.useEffect(()=>{if(c.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),r.jsx(wu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:r.jsxs(X0,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(r9,{children:n}),r.jsx(n9,{scope:s,isInside:!0,children:r.jsx(XH,{id:c.contentId,role:"tooltip",children:a||n})})]})})});BC.displayName=il;var $C="TooltipArrow",i9=h.forwardRef((e,t)=>{const{__scopeTooltip:s,...n}=e,a=Sy(s);return a9($C,s).isInside?null:r.jsx(K0,{...a,...n,ref:t})});i9.displayName=$C;function o9(e,t){const s=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(s,n,a,i)){case i:return"left";case a:return"right";case s:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function l9(e,t,s=5){const n=[];switch(t){case"top":n.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":n.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":n.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":n.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return n}function c9(e){const{top:t,right:s,bottom:n,left:a}=e;return[{x:a,y:t},{x:s,y:t},{x:s,y:n},{x:a,y:n}]}function u9(e,t){const{x:s,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,m=c.y;d>n!=m>n&&s<(f-u)*(n-d)/(m-d)+u&&(a=!a)}return a}function d9(e){const t=e.slice();return t.sort((s,n)=>s.x<n.x?-1:s.x>n.x?1:s.y<n.y?-1:s.y>n.y?1:0),f9(t)}function f9(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const s=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;s.length>=2;){const i=s[s.length-1],o=s[s.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))s.pop();else break}s.push(a)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}var FC=BC;const m9=h.forwardRef(({className:e,sideOffset:t=4,...s},n)=>r.jsx(FC,{ref:n,sideOffset:t,className:$("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));m9.displayName=FC.displayName;function ts({title:e,navigateTo:t,onNavigate:s,children:n,className:a,showHeaderButton:i=!0}){return r.jsxs(ae,{className:a,children:[r.jsx(de,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ve,{className:"text-lg",children:e}),i&&r.jsxs(G,{variant:"outline",size:"sm",onClick:s,className:"text-sm whitespace-nowrap cursor-pointer",children:["View all ",t," â†’"]})]})}),r.jsx(oe,{className:"space-y-4",children:n})]})}function HC(e){var t,s,n,a,i,o;return{id:`religion-${e.name.toLowerCase().replace(/\s+/g,"-")}`,name:e.name,description:((t=e.tenet)==null?void 0:t.description)||"",tags:Fn()?e.favoredRaces||[]:[],summary:((s=e.tenet)==null?void 0:s.description)||"",effects:[...((a=(n=e.tenet)==null?void 0:n.effects)==null?void 0:a.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[],...((o=(i=e.blessing)==null?void 0:i.effects)==null?void 0:o.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[]],associatedItems:[],imageUrl:void 0,category:e.type}}function _w(e){var t;return{...e,id:e.edid||e.name,name:e.name,description:e.description||"",tags:e.tags||[],summary:e.description||"",effects:[...((t=e.effects)==null?void 0:t.map(s=>({type:"positive",name:s.type,description:s.condition||s.type,value:s.value})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalTrait:e}}function UC(e){var n,a,i,o,l,c,u,d;const t=[...((n=e.stat_modifications)==null?void 0:n.map(f=>({type:f.type==="bonus"?"positive":"negative",name:`${f.stat} ${f.type==="bonus"?"+":"-"}${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} ${f.type==="bonus"?"increased":"decreased"} by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((a=e.skill_bonuses)==null?void 0:a.map(f=>({type:"positive",name:`${f.stat} +${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} skill increased by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((i=e.powers)==null?void 0:i.map(f=>({type:"positive",name:f.name,description:f.description,value:f.magnitude||0,target:"power"})))||[],...((o=e.conditional_effects)==null?void 0:o.map(f=>({type:"neutral",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[],...((l=e.mastery_effects)==null?void 0:l.map(f=>({type:"positive",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[]],s=[e.group,...((c=e.stat_modifications)==null?void 0:c.map(f=>f.stat))||[],...((u=e.skill_bonuses)==null?void 0:u.map(f=>f.stat))||[],...((d=e.powers)==null?void 0:d.map(f=>f.name))||[]].filter((f,m,g)=>g.indexOf(f)===m);return{...e,id:e.id||e.edid,name:e.name,description:e.description,tags:s,summary:e.description,effects:t,associatedItems:[],imageUrl:void 0,category:e.group,originalBirthsign:e}}function h9(e){var n;const t=[{type:"positive",name:e.name,description:e.description||"",value:0,target:"destiny"}],s=[...e.tags||[],...((n=e.prerequisites)==null?void 0:n.map(a=>`Requires: ${a}`))||[]].filter((a,i,o)=>o.indexOf(a)===i);return{...e,id:e.id||e.edid,name:e.name,description:e.description||"",tags:s,summary:e.description||"",effects:t,associatedItems:[],imageUrl:e.icon,category:"Destiny",originalDestinyNode:e}}function g9(){const{data:e,loading:t,error:s,load:n}=Ui();return{birthsigns:e,loading:t,error:s,refetch:n}}function GC({className:e}){const{birthsigns:t}=g9(),{build:s,setStone:n}=Ye(),a=lt(),i=s.stone?t.find(u=>u.edid===s.stone):null,o=u=>{n(u.edid)},l=()=>{a("/build/birth-signs")};if(!i)return r.jsxs(ts,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's birthsign"}),r.jsx(jw,{birthsigns:t,onSelect:o,placeholder:"Search for a birthsign...",className:"w-full"})]});const c=UC(i);return r.jsxs(ts,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[r.jsx(jw,{birthsigns:t,onSelect:o,placeholder:`Birth Sign: Select a birthsign (${i.name})`,className:"w-full"}),r.jsx(zf,{item:c,originalBirthsign:i,isExpanded:!0,className:"border-0 shadow-none",showToggle:!1})]})}const p9={selectedTags:[],sortBy:"alphabetical",viewMode:"grid",expandedBirthsigns:new Set};function x9(e,t){switch(t.type){case"ADD_TAG":return e.selectedTags.some(s=>s.value===t.payload.value&&s.category===t.payload.category)?e:{...e,selectedTags:[...e.selectedTags,t.payload]};case"REMOVE_TAG":return{...e,selectedTags:e.selectedTags.filter(s=>s.id!==t.payload)};case"SET_SORT":return{...e,sortBy:t.payload};case"SET_VIEW_MODE":return{...e,viewMode:t.payload};case"TOGGLE_EXPANDED":{const s=new Set(e.expandedBirthsigns);return s.has(t.payload)?s.delete(t.payload):s.add(t.payload),{...e,expandedBirthsigns:s}}case"EXPAND_ALL":return{...e,expandedBirthsigns:new Set(t.payload)};case"COLLAPSE_ALL":return{...e,expandedBirthsigns:new Set};default:return e}}function y9(e){const[t,s]=h.useReducer(x9,p9),n=h.useMemo(()=>{const v=wH(e),p=NH(e);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"groups",name:"Birthsign Groups",placeholder:"Search by birthsign group...",options:v.map(x=>({id:`group-${x}`,label:x,value:x,category:"Birthsign Groups",description:`Birthsigns from ${x} group`}))},{id:"stats",name:"Stats & Skills",placeholder:"Search by stats and skills...",options:p.map(x=>({id:`stat-${x}`,label:x.replace(/_/g," ").replace(/\b\w/g,w=>w.toUpperCase()),value:x,category:"Stats & Skills",description:`Birthsigns that affect ${x}`}))}]},[e]),a=h.useMemo(()=>t.selectedTags.length===0?e:e.filter(v=>t.selectedTags.every(p=>{switch(p.category){case"Fuzzy Search":return!0;case"Birthsign Groups":return v.group===p.value;case"Stats & Skills":return[...v.stat_modifications.map(w=>w.stat),...v.skill_bonuses.map(w=>w.stat)].some(w=>w===p.value);default:return!0}})),[e,t.selectedTags]),i=h.useMemo(()=>t.selectedTags.filter(v=>v.category==="Fuzzy Search").map(v=>v.value).join(" "),[t.selectedTags]),{filteredBirthsigns:o}=fC(a,i),l=h.useMemo(()=>o.map(UC),[o]),c=h.useMemo(()=>[...l].sort((v,p)=>{var x,w;switch(t.sortBy){case"alphabetical":return v.name.localeCompare(p.name);case"group":{const N=k=>{switch(k){case"Warrior":return 1;case"Mage":return 2;case"Thief":return 3;case"Serpent":return 4;case"Other":return 5;default:return 6}},j=N(v.category),_=N(p.category);return j!==_?j-_:v.name.localeCompare(p.name)}case"power-count":{const N=((x=v.effects)==null?void 0:x.filter(_=>_.target==="power").length)||0,j=((w=p.effects)==null?void 0:w.filter(_=>_.target==="power").length)||0;return N!==j?j-N:v.name.localeCompare(p.name)}default:return 0}}),[l,t.sortBy]),u=h.useCallback(v=>{s({type:"ADD_TAG",payload:v})},[]),d=h.useCallback(v=>{s({type:"REMOVE_TAG",payload:v})},[]),f=h.useCallback(v=>{s({type:"SET_SORT",payload:v})},[]),m=h.useCallback(v=>{s({type:"SET_VIEW_MODE",payload:v})},[]),g=h.useCallback(v=>{s({type:"TOGGLE_EXPANDED",payload:v})},[]),b=h.useCallback(v=>{s({type:"EXPAND_ALL",payload:v})},[]),y=h.useCallback(()=>{s({type:"COLLAPSE_ALL"})},[]);return{...t,addTag:u,removeTag:d,setSort:f,setViewMode:m,toggleExpanded:g,expandAll:b,collapseAll:y,searchCategories:n,fuzzySearchQuery:i,filteredBirthsigns:a,displayItems:l,sortedDisplayItems:c}}function v9(){const{data:e,loading:t,error:s}=XF(),n=e||[],{selectedTags:a,sortBy:i,viewMode:o,addTag:l,removeTag:c,setSort:u,setViewMode:d,searchCategories:f,sortedDisplayItems:m}=y9(n),[g,b]=h.useState(null),[y,v]=h.useState(!1),p=x=>{b(x),v(!0)};return t?r.jsx(Ut,{title:"Birthsigns",description:"Choose your birthsign",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("p",{children:"Loading birthsigns..."})})}):s?r.jsx(Ut,{title:"Birthsigns",description:"Choose your birthsign",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("p",{className:"text-red-500",children:["Error loading birthsigns: ",s]})})}):r.jsxs(Ut,{title:"Birth Signs",description:"Choose your character's birthsign to gain unique abilities and bonuses based on the celestial constellations.",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx("div",{className:"flex-1",children:r.jsx(ta,{categories:f,onSelect:x=>{let w;typeof x=="string"?w={id:`custom-${x}`,label:x,value:x,category:"Fuzzy Search"}:w={id:`${x.category}-${x.id}`,label:x.label,value:x.value,category:x.category},a.some(N=>N.value===w.value&&N.category===w.category)||l(w)},onCustomSearch:x=>{let w;typeof x=="string"?w={id:`custom-${x}`,label:x,value:x,category:"Fuzzy Search"}:w={id:`${x.category}-${x.id}`,label:x.label,value:x.value,category:x.category},a.some(N=>N.value===w.value&&N.category===w.category)||l(w)}})})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(G,{variant:o==="grid"?"default":"outline",size:"sm",onClick:()=>d("grid"),className:"flex items-center gap-2",children:[r.jsx($i,{className:"h-4 w-4"}),"Grid"]}),r.jsxs(G,{variant:o==="list"?"default":"outline",size:"sm",onClick:()=>d("list"),className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-4 w-4"}),"List"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(Zi,{children:[r.jsx(Wi,{asChild:!0,children:r.jsxs(G,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort:"," ",i==="alphabetical"?"A-Z":i==="group"?"Group":"Power Count",r.jsx(vt,{className:"h-4 w-4"})]})}),r.jsxs(Gr,{align:"end",children:[r.jsx(us,{onClick:()=>u("alphabetical"),children:"Alphabetical"}),r.jsx(us,{onClick:()=>u("group"),children:"By Group"}),r.jsx(us,{onClick:()=>u("power-count"),children:"By Power Count"})]})]})})]}),r.jsx("div",{className:"my-4",children:a.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("button",{onClick:()=>a.forEach(x=>c(x.id)),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[r.jsx(ze,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),a.map(x=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>c(x.id),title:"Click to remove",children:[x.label,r.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},x.id))]})}),o==="grid"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:m.map(x=>{const w=n.find(N=>N.id===x.id||N.edid===x.id);return w?r.jsx(zf,{originalBirthsign:w,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>p(w)},x.id):null})}):r.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:m.map(x=>{const w=n.find(N=>N.id===x.id||N.edid===x.id);return w?r.jsx(zf,{originalBirthsign:w,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>p(w)},x.id):null})}),m.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground",children:"No birthsigns found matching your criteria."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),r.jsx(AH,{birthsign:g,isOpen:y,onOpenChange:v})]})}class Tn{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.id=="string"&&typeof t.name=="string"&&typeof t.description=="string"&&Array.isArray(t.tags)&&Array.isArray(t.prerequisites)}static equals(t,s){return t.id===s.id}static hasTag(t,s){return t.tags.includes(s)}static hasAnyTag(t,s){return s.some(n=>this.hasTag(t,n))}static hasAllTags(t,s){return s.every(n=>this.hasTag(t,n))}static filterByTag(t,s){return t.filter(n=>this.hasTag(n,s))}static filterByAnyTag(t,s){return t.filter(n=>this.hasAnyTag(n,s))}static filterByAllTags(t,s){return t.filter(n=>this.hasAllTags(n,s))}static isRootNode(t){return t.prerequisites.length===0}static getRootNodes(t){return t.filter(s=>this.isRootNode(s))}static isLeafNode(t,s){return!s.some(n=>n.prerequisites.includes(t.edid))}static getLeafNodes(t){return t.filter(s=>this.isLeafNode(s,t))}static getNextNodes(t,s){return s.filter(n=>n.prerequisites.includes(t.edid))}static getPrerequisiteNodes(t,s){return s.filter(n=>t.prerequisites.includes(n.edid))}static search(t,s){const n=s.toLowerCase();return t.filter(a=>a.name.toLowerCase().includes(n)||a.description.toLowerCase().includes(n)||a.tags.some(i=>typeof i=="string"&&i.toLowerCase().includes(n)))}static sortByName(t){return[...t].sort((s,n)=>s.name.localeCompare(n.name))}static sortByPrerequisites(t){return[...t].sort((s,n)=>s.prerequisites.length-n.prerequisites.length)}static getUniqueTags(t){const s=t.flatMap(n=>n.tags);return[...new Set(s)].sort()}static getUniquePrerequisites(t){const s=t.flatMap(n=>n.prerequisites);return[...new Set(s)].sort()}}function Qr(e={}){const{includePrerequisites:t=!1,includeNextNodes:s=!1,filterByTags:n=[],searchTerm:a="",sortBy:i="name"}=e,{data:o,loading:l,error:c,reload:u}=KF(),d=o||[],f=c,m=h.useMemo(()=>Tn.getRootNodes(d),[d]),g=h.useMemo(()=>[],[d]),b=h.useMemo(()=>Tn.getUniqueTags(d),[d]),y=h.useMemo(()=>{let S=[...d];return n.length>0&&(S=Tn.filterByAnyTag(S,n)),a&&(S=Tn.search(S,a)),i==="name"?S=Tn.sortByName(S):i==="prerequisites"&&(S=Tn.sortByPrerequisites(S)),S},[d,n,a,i]),v=S=>d.find(C=>C.id===S),p=S=>d.find(C=>C.edid===S);return{nodes:d,rootNodes:m,filteredNodes:y,isLoading:l,error:f,categories:g,tags:b,refresh:()=>{u()},getNodeById:v,getNodeByName:S=>d.find(C=>C.name===S),getNodeByEdid:p,getNextNodes:S=>{const C=p(S);return C?Tn.getNextNodes(C,d):[]},getPrerequisiteNodes:S=>{const C=p(S);return C?Tn.getPrerequisiteNodes(C,d):[]},filterByCategory:S=>[],filterByTag:S=>Tn.filterByTag(d,S),searchNodes:S=>Tn.search(d,S)}}function _y(e={}){const{initialPath:t=[],validatePath:s=!0}=e,[n,a]=h.useState(t),{nodes:i,rootNodes:o}=Qr(),l=h.useRef(t);h.useEffect(()=>{const N=l.current,j=t;JSON.stringify(N)!==JSON.stringify(j)&&(a(j),l.current=j)},[t]);const c=h.useMemo(()=>n.length>0?n[n.length-1]:null,[n]),u=h.useMemo(()=>n.length===0?o:i.filter(N=>N.prerequisites.length===0?!1:N.prerequisites.some(j=>n.some(_=>_.edid===j))),[n,i,o]),d=h.useMemo(()=>c?i.filter(N=>N.prerequisites.includes(c.edid)):o,[c,i,o]),f=h.useMemo(()=>c?i.filter(N=>c.prerequisites.includes(N.edid)):[],[c,i]),{isValidPath:m,pathErrors:g}=h.useMemo(()=>{if(!s||n.length===0)return{isValidPath:!0,pathErrors:[]};const N=[];for(let j=1;j<n.length;j++){const _=n[j],k=n.slice(0,j);!_.prerequisites.some(S=>k.some(C=>C.edid===S))&&_.prerequisites.length>0&&N.push(`${_.name} requires one of: ${_.prerequisites.join(", ")}`)}return{isValidPath:N.length===0,pathErrors:N}},[n,s]),b=h.useCallback(N=>{if(n.length>0){if(n[n.length-1],!N.prerequisites.some(_=>n.some(k=>k.edid===_))&&N.prerequisites.length>0)return!1}else if(N.prerequisites.length>0)return!1;return a(j=>[...j,N]),!0},[n]),y=h.useCallback(N=>{a(j=>j.slice(0,N+1))},[]),v=h.useCallback(N=>{a(N)},[]),p=h.useCallback(()=>{a([])},[]),x=h.useCallback(N=>{a(j=>j.slice(0,N+1))},[]),w=h.useCallback(()=>({startNode:n[0]||null,endNode:n[n.length-1]||null,totalNodes:n.length,pathString:n.map(N=>N.name).join(" â†’ ")}),[n]);return{currentPath:n,currentNode:c,availableNodes:u,rootNodes:o,isValidPath:m,pathErrors:g,addNodeToPath:b,removeNodeFromPath:y,setPath:v,clearPath:p,goToPathIndex:x,pathLength:n.length,isPathComplete:d.length===0,nextPossibleNodes:d,prerequisiteNodes:f,getPathSummary:w}}function ah(e={}){const{fromNode:t,maxDepth:s=10}=e,{nodes:n,rootNodes:a,isLoading:i,error:o}=Qr();return{possiblePaths:h.useMemo(()=>{if(i||o||!n.length)return[];const c=[],u=new Set,d=m=>n.filter(g=>g.prerequisites.includes(m)),f=(m,g=0)=>{if(g>=s)return;const b=m[m.length-1],y=d(b.edid);if(y.length===0){c.push({path:[...m],isComplete:!0,endNode:b});return}y.forEach(v=>{const p=m.map(x=>x.id).join("->")+"->"+v.id;u.has(p)||(u.add(p),f([...m,v],g+1))})};if(t){if(d(t.edid).length===0)return[];f([t])}else a.forEach(m=>{f([m])});return c},[n,a,t,s,i,o]),isLoading:i,error:o}}var og,rh="HoverCard",[VC,Zae]=Us(rh,[Il]),ih=Il(),[b9,oh]=VC(rh),qC=e=>{const{__scopeHoverCard:t,children:s,open:n,defaultOpen:a,onOpenChange:i,openDelay:o=700,closeDelay:l=300}=e,c=ih(t),u=h.useRef(0),d=h.useRef(0),f=h.useRef(!1),m=h.useRef(!1),[g,b]=Va({prop:n,defaultProp:a??!1,onChange:i,caller:rh}),y=h.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>b(!0),o)},[o,b]),v=h.useCallback(()=>{clearTimeout(u.current),!f.current&&!m.current&&(d.current=window.setTimeout(()=>b(!1),l))},[l,b]),p=h.useCallback(()=>b(!1),[b]);return h.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),r.jsx(b9,{scope:t,open:g,onOpenChange:b,onOpen:y,onClose:v,onDismiss:p,hasSelectionRef:f,isPointerDownOnContentRef:m,children:r.jsx(E_,{...c,children:s})})};qC.displayName=rh;var QC="HoverCardTrigger",ZC=h.forwardRef((e,t)=>{const{__scopeHoverCard:s,...n}=e,a=oh(QC,s),i=ih(s);return r.jsx(Y0,{asChild:!0,...i,children:r.jsx(je.a,{"data-state":a.open?"open":"closed",...n,ref:t,onPointerEnter:ne(e.onPointerEnter,If(a.onOpen)),onPointerLeave:ne(e.onPointerLeave,If(a.onClose)),onFocus:ne(e.onFocus,a.onOpen),onBlur:ne(e.onBlur,a.onClose),onTouchStart:ne(e.onTouchStart,o=>o.preventDefault())})})});ZC.displayName=QC;var Cy="HoverCardPortal",[w9,N9]=VC(Cy,{forceMount:void 0}),WC=e=>{const{__scopeHoverCard:t,forceMount:s,children:n,container:a}=e,i=oh(Cy,t);return r.jsx(w9,{scope:t,forceMount:s,children:r.jsx(Kt,{present:s||i.open,children:r.jsx(zm,{asChild:!0,container:a,children:n})})})};WC.displayName=Cy;var Bf="HoverCardContent",YC=h.forwardRef((e,t)=>{const s=N9(Bf,e.__scopeHoverCard),{forceMount:n=s.forceMount,...a}=e,i=oh(Bf,e.__scopeHoverCard);return r.jsx(Kt,{present:n||i.open,children:r.jsx(j9,{"data-state":i.open?"open":"closed",...a,onPointerEnter:ne(e.onPointerEnter,If(i.onOpen)),onPointerLeave:ne(e.onPointerLeave,If(i.onClose)),ref:t})})});YC.displayName=Bf;var j9=h.forwardRef((e,t)=>{const{__scopeHoverCard:s,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,...l}=e,c=oh(Bf,s),u=ih(s),d=h.useRef(null),f=He(t,d),[m,g]=h.useState(!1);return h.useEffect(()=>{if(m){const b=document.body;return og=b.style.userSelect||b.style.webkitUserSelect,b.style.userSelect="none",b.style.webkitUserSelect="none",()=>{b.style.userSelect=og,b.style.webkitUserSelect=og}}},[m]),h.useEffect(()=>{if(d.current){const b=()=>{g(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var v;((v=document.getSelection())==null?void 0:v.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",b),()=>{document.removeEventListener("pointerup",b),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),h.useEffect(()=>{d.current&&_9(d.current).forEach(y=>y.setAttribute("tabindex","-1"))}),r.jsx(wu,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:o,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:ne(i,b=>{b.preventDefault()}),onDismiss:c.onDismiss,children:r.jsx(X0,{...u,...l,onPointerDown:ne(l.onPointerDown,b=>{b.currentTarget.contains(b.target)&&g(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:{...l.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),k9="HoverCardArrow",S9=h.forwardRef((e,t)=>{const{__scopeHoverCard:s,...n}=e,a=ih(s);return r.jsx(K0,{...a,...n,ref:t})});S9.displayName=k9;function If(e){return t=>t.pointerType==="touch"?void 0:e()}function _9(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;s.nextNode();)t.push(s.currentNode);return t}var C9=qC,E9=ZC,A9=WC,XC=YC;const KC=C9,JC=E9,R9=A9,Ey=h.forwardRef(({className:e,align:t="center",sideOffset:s=4,...n},a)=>r.jsx(XC,{ref:a,align:t,sideOffset:s,className:$("w-64 rounded-md p-4 text-popover-foreground outline-none animate-in zoom-in-90 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-90 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:_t.TOOLTIP,backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},...n}));Ey.displayName=XC.displayName;function T9({node:e,allNodes:t,children:s,showPrerequisites:n=!0,showNextNodes:a=!0,showTags:i=!0,className:o=""}){const l=u=>t.filter(d=>d.prerequisites.includes(u)),c=u=>t.filter(d=>e.prerequisites.includes(d.name));return r.jsxs(KC,{children:[r.jsx(JC,{asChild:!0,children:s}),r.jsx(Ey,{className:`w-80 p-0 ${o}`,children:r.jsxs(ae,{className:"border-0 shadow-none",children:[r.jsx(de,{className:"pb-2",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"flex-1",children:r.jsx("h3",{className:"font-semibold text-lg text-foreground mb-1",children:e.name})}),e.icon&&r.jsx("div",{className:"w-8 h-8 ml-2",children:r.jsx("img",{src:e.icon,alt:e.name,className:"w-full h-full object-contain"})})]})}),r.jsxs(oe,{className:"pt-0 space-y-3",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),n&&e.prerequisites.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Prerequisites:"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[c(e.name).map(u=>r.jsx(Q,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:u.name},u.id)),e.prerequisites.filter(u=>!t.some(d=>d.name===u)).map((u,d)=>r.jsx(Q,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500 border-gray-200",children:u},`missing-${d}`))]})]}),a&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Leads to:"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[l(e.name).map(u=>r.jsx(Q,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:u.name},u.id)),l(e.name).length===0&&r.jsx("span",{className:"text-xs text-muted-foreground",children:"No further progression"})]})]}),i&&e.tags.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Tags:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((u,d)=>r.jsx(Q,{variant:"secondary",className:"text-xs",children:u},d))})]}),r.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[r.jsxs("p",{children:["ID: ",e.id]}),e.globalFormId&&r.jsxs("p",{children:["Form ID: ",e.globalFormId]})]})]})]})})]})}function eE({node:e,allNodes:t,variant:s="default",size:n="md",showHoverCard:a=!0,onClick:i,className:o=""}){const l={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},c=r.jsx(Q,{variant:s,className:`
        ${l[n]} 
        ${i?"cursor-pointer hover:bg-muted/50":""} 
        ${o}
        rounded-full
      `,onClick:i,children:e.name});return a?r.jsx(T9,{node:e,allNodes:t,children:c}):c}function tE({path:e,allNodes:t,onBreadcrumbClick:s,variant:n="default",className:a=""}){if(e.length===0)return r.jsx("div",{className:`flex items-center gap-2 ${a}`,children:r.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})});const i=n==="compact"?"sm":"md";return r.jsx("div",{className:`flex items-center gap-2 ${a}`,children:e.map((o,l)=>r.jsxs(z.Fragment,{children:[r.jsx(eE,{node:o,allNodes:t,variant:l===e.length-1?"default":"outline",size:i,showHoverCard:!0,onClick:s?()=>s(l):void 0}),l<e.length-1&&r.jsx(El,{className:"w-4 h-4 text-muted-foreground"})]},o.id))})}function M9({path:e,allNodes:t,selectedPathLength:s,isComplete:n,endNode:a,onPathClick:i,variant:o="default",className:l=""}){const c=o==="compact"?"sm":"md";return r.jsxs("div",{className:`p-3 border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer ${l}`,onClick:()=>i(e,s),children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsx("div",{className:"flex flex-wrap items-center gap-1",children:e.map((u,d)=>r.jsxs(z.Fragment,{children:[r.jsx(eE,{node:u,allNodes:t,variant:"outline",size:c,showHoverCard:!0,onClick:f=>{f==null||f.stopPropagation(),i(e,d)},className:`
                   ${d===0&&s===0?"cursor-pointer":""}
                   ${n&&d===e.length-1?"bg-yellow-600 text-yellow-50 border-yellow-700":""}
                 `}),d<e.length-1&&r.jsx(El,{className:"w-3 h-3 text-muted-foreground"})]},u.id))})}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Length: ",e.length," steps"]}),n&&r.jsxs("span",{children:["â€¢ Ends at: ",a.name]}),e.length>s&&r.jsxs("span",{children:["â€¢ ",e.length-s," more choices"]})]})]})}function Fp({possiblePaths:e,selectedPathLength:t,onPathClick:s,variant:n="default",className:a=""}){const{nodes:i}=Qr();return e.length===0?r.jsxs("div",{className:`text-center py-8 ${a}`,children:[r.jsx("p",{className:"text-muted-foreground",children:"No possible paths available."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You may have reached the end of available destiny paths."})]}):r.jsx("div",{className:`space-y-3 ${a}`,children:e.map((o,l)=>r.jsx(M9,{path:o.path,allNodes:i,selectedPathLength:t,isComplete:o.isComplete,endNode:o.endNode,onPathClick:s,variant:n},l))})}const sE=()=>{const{build:e,setDestinyPath:t}=Ye(),s=lt(),n=w=>{const N=window.location.hash,[j,_]=N.split("?"),A=new URLSearchParams(_||"").get("b");A?window.location.hash=`${w}?b=${A}`:s(w)},{nodes:a,isLoading:i,error:o}=Qr(),l=z.useMemo(()=>e.destinyPath.map(w=>a.find(N=>N.edid===w)).filter(w=>!!w),[e.destinyPath,a]),{isValidPath:c,pathErrors:u,setPath:d,clearPath:f,currentPath:m,currentNode:g}=_y({initialPath:l,validatePath:!0}),{possiblePaths:b}=ah({fromNode:g||void 0}),y=w=>{const N=w.map(j=>j.edid);t(N)},v=(w,N)=>{let j;if(m.length===0)j=w.slice(0,N+1);else{if(N===0)return;const _=w.slice(1,N+1);j=[...m,..._]}d(j),y(j)},p=()=>{f(),t([])},x=w=>{const N=m.slice(0,w+1);d(N),y(N)};return r.jsxs(ae,{className:"mb-6",children:[r.jsx(de,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx(ve,{className:"text-lg",children:"Destiny"}),r.jsxs(G,{variant:"outline",size:"sm",onClick:()=>n("/build/destiny"),className:"text-sm whitespace-nowrap cursor-pointer",children:[r.jsx($r,{className:"w-4 h-4 mr-1"}),"View All"]})]})}),r.jsx(oe,{children:i?r.jsx("div",{className:"text-muted-foreground",children:"Loading destiny data..."}):o?r.jsx("div",{className:"text-destructive",children:o}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Selected Path"}),r.jsx(tE,{path:m,allNodes:a,variant:"compact",onBreadcrumbClick:x})]}),m.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Path Details (",m.length," nodes)"]}),r.jsxs(G,{variant:"outline",size:"sm",onClick:p,className:"text-xs",children:[r.jsx(Ma,{className:"w-3 h-3 mr-1"}),"Clear Path"]})]}),r.jsx("div",{className:"space-y-2",children:m.map((w,N)=>r.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium flex-shrink-0",children:N+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h5",{className:"font-medium text-sm text-foreground",children:w.name}),w.description&&r.jsx(we,{text:w.description,className:"text-xs text-muted-foreground mt-1",as:"p"})]})]})},w.id))})]}),b.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:m.length===0?"Choose Your Starting Point":"Continue Your Path"}),r.jsx(Ai,{className:"h-[400px]",children:r.jsx("div",{className:"p-2",children:r.jsx(Fp,{possiblePaths:b,selectedPathLength:m.length,onPathClick:v,variant:"compact"})})})]}),!c&&u.length>0&&r.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(Xo,{className:"w-3 h-3"}),r.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),r.jsx("ul",{className:"space-y-0.5",children:u.map((w,N)=>r.jsxs("li",{children:["â€¢ ",w]},N))})]}),m.length===0&&b.length===0&&r.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[r.jsx("p",{className:"text-sm",children:"No destiny paths available"}),r.jsx(G,{variant:"outline",size:"sm",onClick:()=>n("/build/destiny"),className:"mt-2",children:"Browse All Destinies"})]})]})})]})};class Nt{static getRaceById(t,s){return t.find(n=>n.edid===s)}static getRacesByCategory(t,s){return t.filter(n=>n.category===s)}static getUniqueCategories(t){return[...new Set(t.map(s=>s.category))]}static getUniqueTags(t){const s=t.flatMap(n=>[...n.keywords||[],...n.flags||[]]);return[...new Set(s)]}static filterByCategory(t,s){return s?t.filter(n=>n.category===s):t}static filterByTags(t,s){return s.length===0?t:t.filter(n=>s.some(a=>(n.keywords||[]).includes(a)||(n.flags||[]).includes(a)))}static filterByAnyTag(t,s){return s.length===0?t:t.filter(n=>s.some(a=>(n.keywords||[]).includes(a)||(n.flags||[]).includes(a)))}static search(t,s){if(!s.trim())return t;const n=s.toLowerCase();return t.filter(a=>a.name.toLowerCase().includes(n)||(a.description||"").toLowerCase().includes(n)||(a.keywords||[]).some(i=>i.toLowerCase().includes(n))||(a.flags||[]).some(i=>i.toLowerCase().includes(n)))}static sortByName(t){return[...t].sort((s,n)=>s.name.localeCompare(n.name))}static sortByCategory(t){return[...t].sort((s,n)=>{const a=s.category.localeCompare(n.category);return a!==0?a:s.name.localeCompare(n.name)})}static transformToPlayerCreationItem(t){const s=[...t.keywords||[],...t.flags||[],t.category],n=[...(t.skillBonuses||[]).map(a=>({name:`${a.skill} +${a.bonus}`,type:"positive",description:`Provides ${a.bonus} bonus to ${a.skill}`,value:a.bonus,target:a.skill})),...(t.racialSpells||[]).map(a=>({name:a.name,type:"positive",description:a.description,target:"racial ability"}))];return{id:t.edid,name:t.name,description:t.description||"",tags:s,effects:n,associatedItems:[],imageUrl:void 0,category:t.category||""}}static getRelatedRaces(t,s){return s.filter(n=>n.edid!==t.edid&&n.category===t.category)}static calculateRaceStats(t){var s,n,a,i,o,l;return{totalHealth:((s=t.startingStats)==null?void 0:s.health)||0,totalMagicka:((n=t.startingStats)==null?void 0:n.magicka)||0,totalStamina:((a=t.startingStats)==null?void 0:a.stamina)||0,totalCarryWeight:((i=t.startingStats)==null?void 0:i.carryWeight)||0,skillBonusCount:((o=t.skillBonuses)==null?void 0:o.length)||0,racialSpellCount:((l=t.racialSpells)==null?void 0:l.length)||0}}static applyFilters(t,s){let n=[...t];return s.search&&(n=this.search(n,s.search)),s.type&&(n=this.filterByCategory(n,s.type)),s.tags.length>0&&(n=this.filterByTags(n,s.tags)),n}}class D9{static enrichRacesWithTags(t){t.forEach(s=>{})}static generateSearchCategories(t){const s=[...new Set(t.map(i=>i.category))],n=[...new Set(t.flatMap(i=>i.keywords.map(o=>o.edid)))],a=[...new Set(t.flatMap(i=>i.flags))];return[{id:"category",name:"Race Type",options:s},{id:"keywords",name:"Keywords",options:n},{id:"flags",name:"Flags",options:a}]}static validateRaceData(t){try{return!(!t.name||!t.edid||!t.category||!t.startingStats||typeof t.startingStats.health!="number"||typeof t.startingStats.magicka!="number"||typeof t.startingStats.stamina!="number"||typeof t.startingStats.carryWeight!="number"||!Array.isArray(t.skillBonuses)||!Array.isArray(t.racialSpells)||!Array.isArray(t.keywords)||!Array.isArray(t.flags))}catch{return!1}}static calculateRaceStats(t){const s=t.startingStats.health,n=t.startingStats.magicka,a=t.startingStats.stamina,i=t.startingStats.carryWeight,o=t.skillBonuses.length,l=t.racialSpells.length;return{totalHealth:s,totalMagicka:n,totalStamina:a,totalCarryWeight:i,skillBonusCount:o,racialSpellCount:l}}static calculatePowerLevel(t){const s=this.calculateRaceStats(t),n=(s.totalHealth+s.totalMagicka+s.totalStamina)/3,a=s.skillBonusCount*5+s.racialSpellCount*10;return Math.round(n+a)}static getDifficultyRating(t){const s=this.calculatePowerLevel(t);return s<50?1:s<70?2:s<90?3:s<110?4:5}static getPlaystyleSuggestions(t){const s=[],n=t.startingStats;return n.health>120&&(s.push("Tank"),s.push("Melee Fighter")),n.magicka>120&&(s.push("Mage"),s.push("Spellcaster")),n.stamina>120&&(s.push("Archer"),s.push("Rogue")),t.skillBonuses.some(a=>a.skill.toLowerCase().includes("onehanded"))&&s.push("One-Handed Warrior"),t.skillBonuses.some(a=>a.skill.toLowerCase().includes("destruction"))&&s.push("Destruction Mage"),t.skillBonuses.some(a=>a.skill.toLowerCase().includes("sneak"))&&s.push("Stealth"),[...new Set(s)]}static formatRaceDescription(t){const s=this.calculateRaceStats(t),n=this.getPlaystyleSuggestions(t);let a=t.description;return n.length>0&&(a+=`

Recommended playstyles: ${n.join(", ")}`),a+=`

Starting Stats: Health ${s.totalHealth}, Magicka ${s.totalMagicka}, Stamina ${s.totalStamina}`,a+=`
Abilities: ${s.skillBonusCount} skill bonuses, ${s.racialSpellCount} racial spells`,a}}function Fl(e={}){const{includeRelated:t=!1,categoryFilter:s="",searchTerm:n="",sortBy:a="name"}=e,{data:i,loading:o,error:l}=wn(),c=h.useMemo(()=>Nt.getUniqueCategories(i),[i]),u=h.useMemo(()=>Nt.getUniqueTags(i),[i]),d=h.useMemo(()=>i.filter(x=>!(s&&x.category!==s||n&&Nt.search([x],n).length===0)),[i,s,n]),f=h.useMemo(()=>a==="name"?Nt.sortByName(d):Nt.sortByCategory(d),[d,a]);return{races:i,filteredRaces:f,isLoading:o,error:l,categories:c,tags:u,refresh:async()=>{await wn.getState().load()},getRaceById:x=>Nt.getRaceById(i,x),getRacesByCategory:x=>Nt.getRacesByCategory(i,x),filterByCategory:x=>Nt.filterByCategory(i,x),filterByTag:x=>Nt.filterByTags(i,[x]),searchRaces:x=>Nt.search(i,x)}}const P9={Altmer:"altmer.svg",Argonian:"argonian.svg",Bosmer:"woodelf.svg",Breton:"breton.svg",Dunmer:"dunmer.svg",Imperial:"imperial.svg",Khajiit:"khajit.svg",Nord:"nord.svg",Orsimer:"orc.svg",Redguard:"redguard.svg"};function Ps({raceName:e,size:t="md",className:s}){const n=P9[e],a=n?Vt(`assets/race-avatar/${n}`):void 0;return r.jsx(Xm,{imgSrc:a,alt:e,size:t,className:s})}function gr({category:e,size:t="md",className:s}){return r.jsx(I2,{category:e,categoryType:"race",size:t,className:s})}const L9={ability:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"},trait:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},flag:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"},skill:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"}},z9={sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1"};function O9(e){const t=e.toLowerCase();return["destruction","restoration","alteration","illusion","conjuration","light armor","heavy armor","one-handed","two-handed","archery","block","smithing","enchanting","alchemy","speechcraft","sneak","lockpicking","pickpocket"].some(s=>t.includes(s))?"skill":["waterbreathing","night eye","claws","histskin","dragonskin","magic resistance","voice of the emperor","battle cry"].some(s=>t.includes(s))?"ability":["strong stomach","beast race","bleeds","natural"].some(s=>t.includes(s))?"trait":"flag"}function Dn({keyword:e,type:t,size:s="sm",className:n}){const a=t||O9(e),i=L9[a];return r.jsx(Q,{variant:"outline",className:$(i.bg,i.text,i.border,z9[s],"font-medium",n),children:e})}const B9={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",purple:"bg-purple-500",orange:"bg-orange-500"},I9={sm:"h-1.5",md:"h-2",lg:"h-3"};function ya({value:e,maxValue:t,label:s,color:n="blue",size:a="md",showValue:i=!0,className:o}){const l=Math.min(e/t*100,100);return r.jsxs("div",{className:$("space-y-1",o),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:s}),i&&r.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),r.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:$("transition-all duration-300 ease-out",B9[n],I9[a]),style:{width:`${l}%`}})})]})}function ol({effects:e,title:t="Effects",className:s,maxDisplay:n,compact:a=!1,showDescriptions:i=!0}){if(!e||e.length===0)return null;const o=n?e.slice(0,n):e,l=n&&e.length>n;return r.jsxs("div",{className:$("space-y-3",s),children:[t&&r.jsx(as,{className:"text-lg font-medium text-foreground",children:t}),a?r.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.map((c,u)=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:c.description,children:[r.jsx(Oe,{className:"h-3 w-3 text-yellow-500"}),r.jsx("span",{className:"font-medium",children:c.name})]},u)),l&&r.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded text-xs text-muted-foreground",children:["+",e.length-n," more"]})]}):r.jsxs("div",{className:"space-y-3",children:[o.map((c,u)=>r.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-muted",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Oe,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h6",{className:"font-medium text-sm",children:c.name}),i&&c.description&&r.jsx(we,{text:c.description,className:"text-xs text-muted-foreground mt-1 leading-relaxed"})]})]})},u)),l&&r.jsxs("div",{className:"text-center text-xs text-muted-foreground py-2",children:["+",e.length-n," more effects"]})]})]})}function Pu({stats:e,regeneration:t,title:s="Stats",className:n,showRegeneration:a=!0,compact:i=!1}){return r.jsxs("div",{className:$("space-y-3",n),children:[r.jsx(as,{className:"text-lg font-medium text-foreground",children:s}),i&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Health"}),r.jsx("span",{className:"font-medium",children:e.health})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka"}),r.jsx("span",{className:"font-medium",children:e.magicka})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina"}),r.jsx("span",{className:"font-medium",children:e.stamina})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight"}),r.jsx("span",{className:"font-medium",children:e.carryWeight})]})]}),a&&t&&r.jsxs("div",{className:"space-y-2 mt-3",children:[r.jsx(as,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[r.jsx("div",{className:"font-medium",children:"Health"}),r.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),r.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[r.jsx("div",{className:"font-medium",children:"Magicka"}),r.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),r.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[r.jsx("div",{className:"font-medium",children:"Stamina"}),r.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]}),!i&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx(ya,{value:e.health,maxValue:200,label:"Health",color:"red",size:"sm"}),r.jsx(ya,{value:e.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),r.jsx(ya,{value:e.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),a&&t&&r.jsxs("div",{className:"space-y-2 mt-3",children:[r.jsx(as,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[r.jsx("div",{className:"font-medium",children:"Health"}),r.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),r.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[r.jsx("div",{className:"font-medium",children:"Magicka"}),r.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),r.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[r.jsx("div",{className:"font-medium",children:"Stamina"}),r.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]})]})}function Lu({item:e,className:t,showToggle:s=!0,isExpanded:n=!1,onToggle:a,disableHover:i=!1}){const o=e.originalRace;return r.jsxs(xe,{className:t,expanded:n,onToggle:a,disableHover:i,children:[r.jsx(xe.Header,{children:r.jsxs("div",{className:"flex items-start justify-between w-full",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ps,{raceName:e.name,size:"2xl"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(Ce,{className:"text-primary font-semibold",children:e.name}),e.category&&r.jsx(Q,{variant:"outline",className:$("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:e.category})]})]}),r.jsx("div",{className:"flex items-center gap-3",children:s&&r.jsx(on,{itemId:(o==null?void 0:o.edid)||e.id,itemType:"race",itemName:e.name})})]})}),r.jsxs(xe.Details,{children:[r.jsx("div",{children:r.jsx(we,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),(o==null?void 0:o.startingStats)&&r.jsx(Pu,{stats:o.startingStats,regeneration:o.regeneration,title:"Starting Attributes",showRegeneration:!1,compact:!1}),(o==null?void 0:o.skillBonuses)&&o.skillBonuses.length>0&&r.jsxs("div",{children:[r.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Starting Skills"}),r.jsx("div",{className:"space-y-2",children:o.skillBonuses.map((l,c)=>r.jsxs("div",{className:"p-2 rounded bg-muted border text-sm flex items-center justify-between",children:[r.jsxs("span",{className:"font-medium",children:[l.skill," +",l.bonus]}),r.jsx(Q,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},c))})]}),(o==null?void 0:o.racialSpells)&&o.racialSpells.length>0&&r.jsx(ol,{effects:o.racialSpells.map(l=>({name:l.name,description:l.description})),title:"Quirks",showDescriptions:!0})]})]})}function nE(e,t){const s=h.useMemo(()=>e.map(l=>({id:l.edid.toLowerCase().replace("race",""),name:l.name,description:l.description,category:l.category,abilities:l.racialSpells.map(c=>c.name),skills:l.skillBonuses.map(c=>c.skill),keywords:l.keywords.map(c=>c.edid),originalRace:l})),[e]),n=h.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"abilities",weight:.2},{name:"skills",weight:.1},{name:"keywords",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),a=h.useMemo(()=>new ls(s,n),[s,n]),i=h.useMemo(()=>t.trim()?a.search(t):s.map(l=>({item:l,score:0,matches:[]})),[a,t]);return{filteredRaces:h.useMemo(()=>i.map(l=>l.item.originalRace),[i]),searchResults:i,searchableRaces:s}}function ll({races:e,onSelect:t,placeholder:s="Search races...",className:n=""}){const[a,i]=h.useState(""),[o,l]=h.useState(!1),c=Vr("(max-width: 640px)");h.useRef(null);const{filteredRaces:u}=nE(e,a),d=h.useMemo(()=>u.map(v=>({id:v.edid,label:v.name,description:v.description,category:v.category,icon:r.jsx(Ps,{raceName:v.name,size:"sm"}),badge:v.category&&r.jsx(Q,{variant:"outline",className:$("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:v.category}),metadata:{originalRace:v}})),[u]),f=h.useCallback(v=>{t(v),i(v.name)},[t]),m=h.useCallback(v=>{const p=e.find(x=>x.edid===v.id);p&&(t(p),i(p.name))},[e,t]),g=h.useMemo(()=>(v,p)=>r.jsxs("div",{className:"flex items-center gap-3",children:[v.icon&&r.jsx("div",{className:"flex-shrink-0",children:v.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:v.label}),v.badge&&r.jsx("div",{className:"flex-shrink-0",children:v.badge})]}),v.description&&r.jsx(we,{text:v.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]}),[]),b=h.useMemo(()=>({data:e,search:v=>{const p=v.toLowerCase();return e.filter(x=>{var w,N;return x.name.toLowerCase().includes(p)||((w=x.description)==null?void 0:w.toLowerCase().includes(p))||((N=x.tags)==null?void 0:N.some(j=>typeof j=="string"&&j.toLowerCase().includes(p)))})}}),[e]),y=h.useCallback((v,p,x)=>r.jsx(G,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:x,children:r.jsxs("div",{className:"flex items-center gap-3 w-full",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Ps,{raceName:v.name,size:"md"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:v.name}),v.category&&r.jsx(Q,{variant:"outline",className:$("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:v.category})]}),v.description&&r.jsx(we,{text:v.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]})}),[]);return c?r.jsx($l,{isOpen:o,onOpenChange:l,onSelect:f,searchPlaceholder:"Search races...",title:"Select Race",description:"Choose your character's race from the options below",triggerText:a,triggerPlaceholder:s,store:b,renderListItem:y,emptyMessage:"No races found",className:n}):r.jsx(Mu,{options:d,onSelect:m,placeholder:s,className:n,renderOption:g,emptyMessage:"No races found",searchQuery:a,onSearchQueryChange:i})}function lh({keywords:e,title:t="Keywords",className:s,maxDisplay:n,showCount:a=!0}){if(!e||e.length===0)return null;const i=n?e.slice(0,n):e,o=n&&e.length>n;return r.jsxs("div",{className:$("space-y-3",s),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[t&&r.jsx(as,{className:"text-lg font-medium text-foreground",children:t}),a&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.length," keyword",e.length!==1?"s":""]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.map((l,c)=>r.jsx(Dn,{keyword:l,size:"sm"},c)),o&&r.jsxs("span",{className:"text-xs text-muted-foreground px-2 py-1",children:["+",e.length-n," more"]})]})]})}function aE(e){return!e.keywords||e.keywords.length===0?[]:e.keywords.filter(t=>t.edid.toLowerCase().includes("unperked")).map(t=>{const s=t.edid.match(/REQ_RacialSkills_(\w+)Unperked/);return s?s[1].replace(/([A-Z])/g," $1").trim():t.edid.replace(/REQ_RacialSkills_/,"").replace(/Unperked$/,"").replace(/([A-Z])/g," $1").trim()}).filter(Boolean)}function ch(e){var t,s;return{...e,id:e.edid,name:e.name,description:e.description,tags:[e.category,...Array.isArray(e.flags)?e.flags:[]],summary:e.description.length>100?`${e.description.substring(0,100)}...`:e.description,effects:[...((t=e.skillBonuses)==null?void 0:t.map(n=>({type:"positive",name:n.skill,description:`+${n.bonus} to ${n.skill}`,value:n.bonus,target:n.skill})))||[],...((s=e.racialSpells)==null?void 0:s.map(n=>({type:"positive",name:n.name,description:n.description})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalRace:e}}function rE({race:e,title:t="Unperked Abilities",className:s,showCount:n=!0}){const a=aE(e);return!a||a.length===0?null:r.jsxs("div",{className:$("space-y-3",s),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[t&&r.jsx(as,{className:"text-lg font-medium text-foreground",children:t}),n&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.length," ",a.length===1?"ability":"abilities"]})]}),r.jsx("div",{className:"space-y-2",children:a.map((i,o)=>r.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:i}),r.jsx(Q,{variant:"secondary",className:"text-xs",children:"Unperked"})]},o))})]})}function iE({item:e,originalRace:t,isExpanded:s=!1,onToggle:n,className:a,showViewAllButton:i=!1,showToggle:o=!0,viewAllButtonText:l="View All",viewAllButtonRoute:c="/race"}){const u=lt(),d=()=>{u(c)},f=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race",m=(e==null?void 0:e.description)||(t==null?void 0:t.description)||"",g=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"",b=(e==null?void 0:e.effects)||[],y=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"";return r.jsxs(r8,{isExpanded:s,onToggle:n||(()=>{}),className:a,children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ps,{raceName:f,size:"2xl"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(Ce,{className:"text-primary font-semibold",children:f}),g&&r.jsx(gr,{category:g,size:"sm"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[b&&b.length>0&&r.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Oe,{className:"h-3 w-3 text-yellow-500"}),r.jsxs("span",{children:[b.length," effects"]})]})}),i&&r.jsxs(G,{variant:"outline",size:"sm",onClick:d,className:"text-xs",children:[r.jsx($r,{className:"h-3 w-3 mr-1"}),l]}),o&&r.jsx(on,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:f})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"line-clamp-2",children:r.jsx(pe,{className:"text-sm text-muted-foreground",children:y})}),r.jsx(ol,{effects:b,maxDisplay:2,compact:!0})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{children:r.jsx(pe,{className:"text-sm text-muted-foreground leading-relaxed",children:m})}),(t==null?void 0:t.startingStats)&&r.jsx(Pu,{stats:t.startingStats,regeneration:t.regeneration,title:"Starting Stats"}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&r.jsx(ol,{effects:t.racialSpells.map(v=>({name:v.name,description:v.description})),title:"Racial Abilities"}),t&&r.jsx(rE,{race:t,title:"Unperked Abilities"}),(t==null?void 0:t.keywords)&&t.keywords.length>0&&r.jsx(lh,{keywords:t.keywords.map(v=>v.edid),title:"Keywords"})]})]})}function Cw({item:e,originalRace:t,className:s,onClick:n,showViewAllButton:a=!1,showToggle:i=!0,viewAllButtonText:o="View All",viewAllButtonRoute:l="/race"}){const c=lt(),u=g=>{g.stopPropagation(),c(l)},d=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race";e!=null&&e.description||t!=null&&t.description;const f=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"";e!=null&&e.effects,e!=null&&e.summary||t!=null&&t.description;const m=t?aE(t):[];return r.jsxs("div",{className:$("p-4 border rounded-lg bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",s),onClick:n,children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(Ps,{raceName:d,size:"2xl"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx(Ce,{className:"text-primary font-semibold truncate",children:d}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f&&r.jsx(gr,{category:f,size:"sm"}),(t==null?void 0:t.startingStats)&&r.jsxs("div",{className:"flex gap-1",children:[r.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-red-500/20 text-red-700 dark:text-red-400 rounded-full text-xs font-medium whitespace-nowrap",children:["â¤ï¸ ",t.startingStats.health]}),r.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-blue-500/20 text-blue-700 dark:text-blue-400 rounded-full text-xs font-medium whitespace-nowrap",children:["ðŸ”· ",t.startingStats.magicka]}),r.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-green-500/20 text-green-700 dark:text-green-400 rounded-full text-xs font-medium whitespace-nowrap",children:["ðŸ’š ",t.startingStats.stamina]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Oe,{className:"h-3 w-3 text-yellow-500"}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.racialSpells.length," effects"]})]}),i&&r.jsx("div",{onClick:g=>g.stopPropagation(),children:r.jsx(on,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:d})})]})]}),r.jsxs("div",{className:"space-y-2",children:[(t==null?void 0:t.skillBonuses)&&t.skillBonuses.length>0&&r.jsx("div",{className:"grid grid-cols-3 gap-1 justify-items-center",children:t.skillBonuses.map((g,b)=>r.jsxs("div",{className:"px-2 py-1 bg-muted/50 text-muted-foreground rounded text-xs font-medium text-left w-full",children:[g.skill," +",g.bonus]},b))}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:t.racialSpells.map((g,b)=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[r.jsx(Oe,{className:"h-3 w-3"}),g.name]},b))}),m.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:m.map((g,b)=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 text-muted-foreground border rounded-full text-xs font-medium",children:["âš¡ ",g]},b))})]})]})]}),a&&r.jsxs(G,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:u,children:[r.jsx($r,{className:"h-4 w-4 mr-2"}),o]})]})}function $9({race:e,isOpen:t,onOpenChange:s}){return e?r.jsx(Yi,{open:t,onOpenChange:s,side:"right",children:r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(Ps,{raceName:e.name,size:"4xl"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(gr,{category:e.category,size:"sm"}),r.jsx(on,{itemId:e.edid,itemType:"race",itemName:e.name})]}),r.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description})]})]})}),r.jsxs("div",{className:"space-y-6",children:[e.startingStats&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Starting Stats"}),r.jsx(Pu,{stats:e.startingStats,regeneration:e.regeneration,title:"",compact:!1})]}),e.skillBonuses&&e.skillBonuses.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Starting Skills"}),r.jsx("div",{className:"space-y-2",children:e.skillBonuses.map((n,a)=>r.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border flex items-center justify-between",children:[r.jsxs("span",{className:"font-medium",children:[n.skill," +",n.bonus]}),r.jsx(Q,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},a))})]}),e.racialSpells&&e.racialSpells.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Racial Abilities"}),r.jsx(ol,{effects:e.racialSpells.map(n=>({name:n.name,description:n.description})),title:"",showDescriptions:!0})]}),r.jsx(rE,{race:e,title:"Unperked Abilities"}),e.keywords&&e.keywords.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Keywords"}),r.jsx(lh,{keywords:e.keywords.map(n=>n.edid),title:"",maxDisplay:10})]})]})]})}):null}function F9({className:e,allRaces:t}){const{build:s,setRace:n}=Ye(),a=lt(),[i,o]=h.useState(!0),l=s.race?t.find(m=>m.edid===s.race):null,c=m=>{n(m.edid)},u=()=>{a("/race")},d=()=>{o(!i)};if(!l)return r.jsxs(ts,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),r.jsx(ll,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=ch(l);return r.jsxs(ts,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[r.jsx(ll,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),r.jsx(Lu,{item:f,isExpanded:i,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}function oE(){const[e,t]=h.useState(null),[s,n]=h.useState("grid"),[a,i]=h.useState([]),o=h.useCallback(f=>{t(f)},[]),l=h.useCallback(f=>{n(f)},[]),c=h.useCallback(f=>{i(m=>m.includes(f)?m.filter(g=>g!==f):[...m,f])},[]),u=h.useCallback(()=>{i([])},[]),d=h.useCallback(f=>{i(f)},[]);return{selectedRace:e,viewMode:s,expandedSections:a,setSelectedRace:o,setViewMode:l,toggleExpandedSection:c,clearExpandedSections:u,expandAllSections:d}}function uh({races:e}){const[t,s]=h.useState(""),[n,a]=h.useState({search:"",type:"",tags:[]}),i=h.useMemo(()=>Nt.getUniqueCategories(e),[e]),o=h.useMemo(()=>Nt.getUniqueTags(e),[e]),l=h.useMemo(()=>{let b=e;return t.trim()&&(b=Nt.search(b,t)),n.type&&(b=Nt.filterByCategory(b,n.type)),n.tags.length>0&&(b=Nt.filterByTags(b,n.tags)),Nt.sortByName(b)},[e,t,n]),c=h.useCallback(b=>{s(b),a(y=>({...y,search:b}))},[]),u=h.useCallback(b=>{a(b),s(b.search)},[]),d=h.useCallback(()=>{s(""),a({search:"",type:"",tags:[]})},[]),f=h.useCallback(b=>{a(y=>({...y,tags:y.tags.includes(b)?y.tags:[...y.tags,b]}))},[]),m=h.useCallback(b=>{a(y=>({...y,tags:y.tags.filter(v=>v!==b)}))},[]),g=h.useCallback(b=>{a(y=>({...y,type:b}))},[]);return{searchQuery:t,activeFilters:n,filteredRaces:l,categories:i,tags:o,setSearchQuery:c,setFilters:u,clearFilters:d,addTagFilter:f,removeTagFilter:m,setCategoryFilter:g}}function lE({races:e,selectedRaceId:t}){const s=h.useMemo(()=>e.map(u=>Nt.transformToPlayerCreationItem(u)),[e]),n=h.useMemo(()=>D9.generateSearchCategories(e),[e]),a=h.useMemo(()=>t&&Nt.getRaceById(e,t)||null,[e,t]),i=h.useMemo(()=>a?Nt.calculateRaceStats(a):null,[a]),o=h.useMemo(()=>e.length,[e]),l=h.useMemo(()=>{const u=e.reduce((d,f)=>(d[f.category]=(d[f.category]||0)+1,d),{});return Object.entries(u).map(([d,f])=>({category:d,count:f}))},[e]),c=h.useMemo(()=>{const u=e.reduce((d,f)=>{var m;return f.keywords.forEach(g=>{d[g.edid]=(d[g.edid]||0)+1}),(m=f.flags)==null||m.forEach(g=>{d[g]=(d[g]||0)+1}),d},{});return Object.entries(u).map(([d,f])=>({tag:d,count:f})).sort((d,f)=>f.count-d.count)},[e]);return{transformedRaces:s,searchCategories:n,raceStats:i,selectedRaceDetails:a,totalRaces:o,categoriesWithCounts:l,tagsWithCounts:c}}function cE({raceId:e,allRaces:t}){const s=h.useMemo(()=>Nt.getRaceById(t,e)||null,[t,e]),n=h.useMemo(()=>s?Nt.getRelatedRaces(s,t):[],[s,t]),a=h.useMemo(()=>{if(!s||n.length===0)return null;const u=n[0];return{selectedRace:s,comparedRace:u,differences:{stats:{health:{selected:s.startingStats.health,compared:u.startingStats.health,difference:s.startingStats.health-u.startingStats.health},magicka:{selected:s.startingStats.magicka,compared:u.startingStats.magicka,difference:s.startingStats.magicka-u.startingStats.magicka},stamina:{selected:s.startingStats.stamina,compared:u.startingStats.stamina,difference:s.startingStats.stamina-u.startingStats.stamina},carryWeight:{selected:s.startingStats.carryWeight,compared:u.startingStats.carryWeight,difference:s.startingStats.carryWeight-u.startingStats.carryWeight}},skills:s.skillBonuses.map(d=>{const f=u.skillBonuses.find(m=>m.skill===d.skill);return{skill:d.skill,selected:d.bonus,compared:(f==null?void 0:f.bonus)||0,difference:d.bonus-((f==null?void 0:f.bonus)||0)}}),spells:{selected:s.racialSpells.map(d=>d.name),compared:u.racialSpells.map(d=>d.name),unique:s.racialSpells.filter(d=>!u.racialSpells.some(f=>f.name===d.name)).map(d=>d.name)}}}},[s,n]),i=h.useMemo(()=>n.length>0,[n]),o=h.useMemo(()=>n.length,[n]);return{race:s,relatedRaces:n,raceComparison:a,isLoading:!1,error:null,hasRelatedRaces:i,relatedRacesCount:o}}function uE({className:e}){const{races:t}=Fl(),{build:s,setRace:n}=Ye(),a=lt(),[i,o]=h.useState(!0),l=s.race?t.find(m=>m.edid===s.race):null,c=m=>{n(m.edid)},u=()=>{a("/build/race")},d=()=>{o(!i)};if(!l)return r.jsxs(ts,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),r.jsx(ll,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"},"race-autocomplete-no-selection")]});const f=ch(l);return r.jsxs(ts,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[r.jsx(ll,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"},"race-autocomplete-with-selection"),r.jsx(Lu,{item:f,isExpanded:i,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}const dE=[{value:"name",label:"Name"},{value:"category",label:"Category"},{value:"health",label:"Health"},{value:"magicka",label:"Magicka"},{value:"stamina",label:"Stamina"}],H9=e=>{var t;return((t=dE.find(s=>s.value===e))==null?void 0:t.label)||"Name"};function fE(){const{build:e}=Ye(),{races:t,isLoading:s,error:n}=Fl(),{viewMode:a,setViewMode:i}=oE(),{filteredRaces:o}=uh({races:t}),[l,c]=h.useState("name"),d=(()=>{const S=[...new Set(t.flatMap(E=>E.keywords.map(R=>R.edid)))],C=[...new Set(t.flatMap(E=>E.skillBonuses.map(R=>R.skill)))],M=[...new Set(t.map(E=>E.category))];return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:S.map(E=>({id:`keyword-${E}`,label:E,value:E,category:"Fuzzy Search",description:`Races with ${E} keyword`}))},{id:"skill-bonuses",name:"Skill Bonuses",placeholder:"Search by skill...",options:C.map(E=>({id:`skill-${E}`,label:E,value:E,category:"Skill Bonuses",description:`Races with ${E} bonus`}))},{id:"categories",name:"Race Categories",placeholder:"Filter by category...",options:M.map(E=>({id:`category-${E}`,label:E,value:E,category:"Race Categories",description:`${E} races`}))}]})(),[f,m]=h.useState([]),g=S=>{let C;typeof S=="string"?C={id:`custom-${S}`,label:S,value:S,category:"Fuzzy Search"}:C={id:`${S.category}-${S.id}`,label:S.label,value:S.value,category:S.category},f.some(M=>M.value===C.value&&M.category===C.category)||m(M=>[...M,C])},b=S=>{m(C=>C.filter(M=>M.id!==S))},y=o.filter(S=>f.length===0?!0:f.every(C=>{switch(C.category){case"Fuzzy Search":return!0;case"Race Categories":return S.category===C.value;case"Skill Bonuses":return S.skillBonuses.some(M=>M.skill===C.value);case"Keywords":return S.keywords.some(M=>M.edid===C.value);default:return!0}})),v=f.filter(S=>S.category==="Fuzzy Search").map(S=>S.value).join(" "),{filteredRaces:p}=nE(y,v),w=p.sort((S,C)=>{switch(l){case"name":return S.name.localeCompare(C.name);case"category":return S.category.localeCompare(C.category);case"health":return C.startingStats.health-S.startingStats.health;case"magicka":return C.startingStats.magicka-S.startingStats.magicka;case"stamina":return C.startingStats.stamina-S.startingStats.stamina;default:return 0}}).map(S=>({...ch(S),originalRace:S})),[N,j]=h.useState(null),[_,k]=h.useState(!1),A=S=>{j(S),k(!0)};return s?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading races..."})]})}):n?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-destructive mb-4",children:n}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):r.jsxs(Ut,{title:"Races",description:"Choose your character's race. Each race has unique abilities, starting attributes, and racial traits that will shape your journey through Tamriel.",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx("div",{className:"flex-1",children:r.jsx(ta,{categories:d,onSelect:g,onCustomSearch:g})})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(G,{variant:a==="grid"?"default":"outline",size:"sm",onClick:()=>i("grid"),className:"flex items-center gap-2",children:[r.jsx($i,{className:"h-4 w-4"}),"Grid"]}),r.jsxs(G,{variant:a==="list"?"default":"outline",size:"sm",onClick:()=>i("list"),className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-4 w-4"}),"List"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(Zi,{children:[r.jsx(Wi,{asChild:!0,children:r.jsxs(G,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort: ",H9(l),r.jsx(vt,{className:"h-4 w-4"})]})}),r.jsx(Gr,{align:"end",children:dE.map(S=>r.jsx(us,{onClick:()=>c(S.value),children:S.label},S.value))})]})})]}),r.jsx("div",{className:"my-4",children:f.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("button",{onClick:()=>m([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[r.jsx(ze,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),f.map(S=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>b(S.id),title:"Click to remove",children:[S.label,r.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},S.id))]})}),a==="grid"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:w.map(S=>{var M;const C=e.race===((M=S.originalRace)==null?void 0:M.edid);return r.jsx(Cw,{item:S,originalRace:S.originalRace,onClick:()=>A(S.originalRace),className:$(C&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}):r.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:w.map(S=>{var M;const C=e.race===((M=S.originalRace)==null?void 0:M.edid);return r.jsx(Cw,{item:S,originalRace:S.originalRace,onClick:()=>A(S.originalRace),className:$(C&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}),w.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground",children:"No races found matching your criteria."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),r.jsx($9,{race:N,isOpen:_,onOpenChange:k})]})}function U9({initialFilters:e,onFiltersChange:t,onSearch:s,onTagSelect:n,onTagRemove:a}={}){const[i,o]=h.useState(e||{search:"",selectedFilters:{},selectedTags:[]});return h.useEffect(()=>{e&&o(e)},[e]),{filters:i,handleSearch:f=>{const m={...i,search:f};o(m),s==null||s(f)},handleTagSelect:f=>{const m={id:`${f.category}-${f.id}`,label:f.label,value:f.value,category:f.category};if(!i.selectedTags.some(b=>b.id===m.id)){const b={...i,selectedTags:[...i.selectedTags,m]};o(b),n==null||n(m),t==null||t(b)}},handleTagRemove:f=>{const m={...i,selectedTags:i.selectedTags.filter(g=>g.id!==f)};o(m),a==null||a(f),t==null||t(m)},updateFilters:f=>{o(f),t==null||t(f)}}}function G9({className:e}){const{races:t,isLoading:s,error:n,categories:a,tags:i}=Fl(),{searchQuery:o,setSearchQuery:l,filteredRaces:c}=uh({races:t}),u=z.useMemo(()=>c.map(w=>ch(w)),[c]),d=z.useMemo(()=>[{id:"categories",name:"Categories",placeholder:"Search by category...",options:(a||[]).map(w=>({id:w,label:w,value:w,category:"categories",description:`Race category: ${w}`}))},{id:"tags",name:"Tags",placeholder:"Search by tags...",options:(i||[]).map(w=>({id:w,label:w,value:w,category:"tags",description:`Race tag: ${w}`}))}],[a,i]),{filters:f,handleSearch:m,handleTagSelect:g,handleTagRemove:b}=U9({onSearch:l,onFiltersChange:w=>{}});z.useEffect(()=>{o!==f.search&&m(o)},[o,m,f.search]);const[y,v]=z.useState(null),p=w=>{const N=t.find(j=>j.edid===w.id);return N?r.jsx(iE,{item:w,originalRace:N,isExpanded:!1,showToggle:!0,className:"h-full"},N.edid):null},x=w=>{const N=t.find(j=>j.edid===w.id);return N?r.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:N.name}),r.jsx("p",{className:"text-muted-foreground mb-4",children:N.description}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Category:"})," ",N.category]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Health:"})," ",N.startingStats.health]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Magicka:"})," ",N.startingStats.magicka]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Stamina:"})," ",N.startingStats.stamina]})]})]}):null};return s?r.jsx("div",{className:$("container mx-auto p-6",e),children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((w,N)=>r.jsx("div",{className:"h-64 bg-gray-200 rounded"},N))})]})}):n?r.jsx("div",{className:$("container mx-auto p-6",e),children:r.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[r.jsx("strong",{children:"Error:"})," ",n]})}):r.jsxs("div",{className:$("container mx-auto p-6",e),children:[r.jsx(FF,{searchCategories:d,selectedTags:f.selectedTags,viewMode:"grid",onTagSelect:g,onTagRemove:b,className:"mb-6"}),r.jsxs(OF,{children:[r.jsx(BF,{children:r.jsx(PF,{items:u,viewMode:"grid",onItemSelect:v,selectedItem:y,renderItemCard:p})}),r.jsx(IF,{children:y?x(y):r.jsx($F,{title:"Select a Race",description:"Choose a race from the list to view its details"})})]})]})}function V9({className:e,selectedRace:t,onRaceSelect:s,onRaceClear:n,showSearch:a=!0,showComparison:i=!1,maxDisplayRaces:o=3}){const{races:l,isLoading:c,error:u}=Fl(),{filteredRaces:d}=uh({races:l});lE({races:l,selectedRaceId:(t==null?void 0:t.edid)||null});const[f,m]=z.useState(!1);return c?r.jsx("div",{className:$("p-4 border rounded-lg",e),children:r.jsxs("div",{className:"animate-pulse space-y-3",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})}):u?r.jsx("div",{className:$("p-4 border rounded-lg",e),children:r.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-3 py-2 rounded text-sm",children:[r.jsx("strong",{children:"Error:"})," ",u]})}):r.jsxs("div",{className:$("border rounded-lg overflow-hidden",e),children:[r.jsxs("div",{className:"p-4 bg-muted/50 border-b",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ce,{className:"text-lg font-semibold",children:"Race Selection"}),t&&r.jsx(G,{variant:"ghost",size:"sm",onClick:n,className:"text-muted-foreground hover:text-foreground",children:r.jsx(ze,{className:"h-4 w-4"})})]}),t&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx(Q,{variant:"secondary",children:t.category}),r.jsxs(pe,{className:"text-sm text-muted-foreground",children:[t.startingStats.health," HP, ",t.startingStats.magicka," MP, ",t.startingStats.stamina," SP"]})]})]}),r.jsx("div",{className:"p-4",children:t?r.jsxs("div",{className:"space-y-4",children:[r.jsx(Lu,{item:{id:t.edid,name:t.name,description:t.description,summary:t.description,category:t.category,effects:[],tags:[],originalRace:t},isExpanded:!0,showToggle:!1,className:"border-0 shadow-none"}),i&&r.jsxs("div",{className:"pt-4 border-t",children:[r.jsx(pe,{className:"text-sm font-medium mb-2",children:"Compare with:"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.filter(g=>g.edid!==t.edid).slice(0,4).map(g=>r.jsx(G,{variant:"outline",size:"sm",onClick:()=>s==null?void 0:s(g),className:"justify-start text-left h-auto p-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:g.name.charAt(0)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-xs",children:g.name}),r.jsx("div",{className:"text-xs text-muted-foreground",children:g.category})]})]})},g.edid))})]})]}):r.jsxs("div",{className:"space-y-4",children:[a&&r.jsxs("div",{children:[r.jsx(pe,{className:"text-sm font-medium mb-2",children:"Search for a race:"}),r.jsx(ll,{races:d,onSelect:s,placeholder:"Type to search races...",className:"w-full"})]}),r.jsxs("div",{children:[r.jsx(pe,{className:"text-sm font-medium mb-2",children:"Quick select:"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.slice(0,o).map(g=>r.jsx(G,{variant:"outline",size:"sm",onClick:()=>s==null?void 0:s(g),className:"justify-start text-left h-auto p-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:g.name.charAt(0)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-xs",children:g.name}),r.jsx("div",{className:"text-xs text-muted-foreground",children:g.category})]})]})},g.edid))}),l.length>o&&r.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>m(!f),className:"mt-2 w-full",children:[r.jsx(vt,{className:$("h-4 w-4 transition-transform",f&&"rotate-180")}),"Show ",l.length-o," more races"]})]}),f&&r.jsx("div",{className:"space-y-2",children:l.slice(o).map(g=>r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>s==null?void 0:s(g),className:"w-full justify-start text-left h-auto p-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:g.name.charAt(0)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-xs",children:g.name}),r.jsx("div",{className:"text-xs text-muted-foreground",children:g.category})]})]})},g.edid))})]})})]})}function q9({raceId:e,className:t}){const s=lt(),{races:n}=Fl(),{race:a,relatedRaces:i}=cE({raceId:e,allRaces:n});return a?r.jsxs("div",{className:$("container mx-auto p-6",t),children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs(G,{variant:"ghost",onClick:()=>s("/races"),className:"mb-4",children:[r.jsx(fb,{className:"h-4 w-4 mr-2"}),"Back to Races"]}),r.jsxs("div",{className:"flex items-start gap-6",children:[r.jsx(Ps,{raceName:a.name,size:"xl"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Vi,{className:"text-3xl font-bold",children:a.name}),r.jsx(gr,{category:a.category,size:"lg"})]}),r.jsx(pe,{className:"text-lg text-muted-foreground mb-4",children:a.description}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(sk,{className:"h-4 w-4"}),r.jsx("span",{children:"Playable Race"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Oe,{className:"h-4 w-4"}),r.jsxs("span",{children:[a.keywords.length," Keywords"]})]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[r.jsx(hr,{className:"text-xl font-semibold mb-4",children:"Statistics"}),r.jsx(Pu,{stats:a.startingStats,regeneration:a.regeneration,title:"Starting Stats",compact:!1,showRegeneration:!0})]}),a.racialSpells.length>0&&r.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[r.jsx(hr,{className:"text-xl font-semibold mb-4",children:"Racial Abilities"}),r.jsx(ol,{effects:a.racialSpells.map(o=>({name:o.name,description:o.description})),title:"Racial Spells",showDescriptions:!0,compact:!1})]}),a.keywords.length>0&&r.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[r.jsx(hr,{className:"text-xl font-semibold mb-4",children:"Keywords"}),r.jsx(lh,{keywords:a.keywords.map(o=>o.edid),title:"Race Keywords",showCount:!0})]}),r.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[r.jsx(hr,{className:"text-xl font-semibold mb-4",children:"Additional Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-medium mb-2",children:"Description"}),r.jsx(pe,{className:"text-muted-foreground",children:a.description})]}),a.racialSpells.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-medium mb-2",children:"Racial Spells"}),r.jsx("div",{className:"space-y-2",children:a.racialSpells.map((o,l)=>r.jsxs("div",{className:"p-3 bg-muted/50 rounded",children:[r.jsx("div",{className:"font-medium",children:o.name}),r.jsx("div",{className:"text-sm text-muted-foreground",children:o.description})]},l))})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Quick Actions"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{className:"w-full",size:"sm",children:"Add to Character Build"}),r.jsx(G,{variant:"outline",className:"w-full",size:"sm",children:"Compare with Other Races"}),r.jsxs(G,{variant:"outline",className:"w-full",size:"sm",children:[r.jsx($r,{className:"h-4 w-4 mr-2"}),"View in Wiki"]})]})]}),r.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Race Summary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Category:"}),r.jsx(Q,{variant:"secondary",children:a.category})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Health:"}),r.jsx("span",{className:"font-medium",children:a.startingStats.health})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka:"}),r.jsx("span",{className:"font-medium",children:a.startingStats.magicka})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina:"}),r.jsx("span",{className:"font-medium",children:a.startingStats.stamina})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight:"}),r.jsx("span",{className:"font-medium",children:a.startingStats.carryWeight})]})]})]}),i.length>0&&r.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Related Races"}),r.jsx("div",{className:"space-y-2",children:i.slice(0,3).map(o=>r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>s(`/races/${o.edid}`),className:"w-full justify-start text-left h-auto p-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ps,{raceName:o.name,size:"sm"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:o.name}),r.jsx("div",{className:"text-xs text-muted-foreground",children:o.category})]})]})},o.edid))})]})]})]})]}):r.jsxs("div",{className:$("container mx-auto p-6",t),children:[r.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[r.jsx("strong",{children:"Error:"})," ","Race not found"]}),r.jsxs(G,{variant:"outline",onClick:()=>s("/races"),className:"mt-4",children:[r.jsx(fb,{className:"h-4 w-4 mr-2"}),"Back to Races"]})]})}function Q9(){const{races:e,isLoading:t,error:s,categories:n,tags:a}=Fl(),{selectedRace:i,setSelectedRace:o,viewMode:l,setViewMode:c,expandedSections:u}=oE(),{searchQuery:d,setSearchQuery:f,activeFilters:m,clearFilters:g,filteredRaces:b}=uh({races:e}),{transformedRaces:y,searchCategories:v,categoriesWithCounts:p}=lE({races:e,selectedRaceId:i}),{race:x,relatedRaces:w,raceComparison:N}=cE({raceId:i||"",allRaces:e}),[j,_]=z.useState(!1),[k,A]=z.useState("overview");if(t)return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Loading..."}),r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]});if(s)return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Error"}),r.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[r.jsx("strong",{children:"Error:"})," ",s]})]});const S=e[0];return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Races MVA Demo - Model View Adapter Architecture"}),r.jsxs(qa,{value:k,onValueChange:A,className:"mb-6",children:[r.jsxs(Qa,{children:[r.jsx(kt,{value:"overview",children:"Overview"}),r.jsx(kt,{value:"adapters",children:"Adapters"}),r.jsx(kt,{value:"components",children:"Components"}),r.jsx(kt,{value:"views",children:"Views"})]}),r.jsx(At,{value:"overview",className:"space-y-6",children:r.jsxs(ae,{children:[r.jsxs(de,{children:[r.jsx(ve,{children:"MVA Architecture Overview"}),r.jsx(pn,{children:"This demo showcases the Model-View-Adapter pattern implementation for the Races feature."})]}),r.jsx(oe,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Model Layer"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Data management and business logic"}),r.jsx(Q,{variant:"outline",className:"mt-2",children:"RaceModel"})]}),r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Adapter Layer"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"State management and data transformation"}),r.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[r.jsx(Q,{variant:"outline",children:"useRaceData"}),r.jsx(Q,{variant:"outline",children:"useRaceState"}),r.jsx(Q,{variant:"outline",children:"useRaceFilters"})]})]}),r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"View Layer"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"UI components and presentation"}),r.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[r.jsx(Q,{variant:"outline",children:"RaceCard"}),r.jsx(Q,{variant:"outline",children:"RacePageView"})]})]})]})})]})}),r.jsx(At,{value:"adapters",className:"space-y-6",children:r.jsxs(ae,{children:[r.jsxs(de,{children:[r.jsx(ve,{children:"Adapter State Demo"}),r.jsx(pn,{children:"Interactive demonstration of adapter state management"})]}),r.jsx(oe,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold",children:"State Management (useRaceState)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Selected Race:"}),r.jsx(Q,{variant:i?"default":"secondary",children:i||"None"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"View Mode:"}),r.jsxs("div",{className:"flex border rounded",children:[r.jsx(G,{variant:l==="grid"?"default":"ghost",size:"sm",onClick:()=>c("grid"),children:"Grid"}),r.jsx(G,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),children:"List"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Expanded Sections:"}),r.jsx(Q,{variant:"outline",children:u.length})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold",children:"Filters (useRaceFilters)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Search Query:"}),r.jsx("input",{type:"text",value:d,onChange:C=>f(C.target.value),className:"px-2 py-1 border rounded text-sm",placeholder:"Search races..."})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Active Filters:"}),r.jsx(Q,{variant:"outline",children:m.tags.length+(m.type?1:0)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Filtered Results:"}),r.jsxs(Q,{variant:"outline",children:[b.length," of ",e.length]})]}),r.jsx(G,{size:"sm",onClick:g,children:"Clear Filters"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold",children:"Computed Data (useRaceComputed)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Transformed Races:"}),r.jsx(Q,{variant:"outline",children:y.length})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Search Categories:"}),r.jsx(Q,{variant:"outline",children:v.length})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Categories with Counts:"}),r.jsx(Q,{variant:"outline",children:Object.keys(p).length})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold",children:"Detail View (useRaceDetail)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Selected Race Details:"}),r.jsx(Q,{variant:x?"default":"secondary",children:(x==null?void 0:x.name)||"None"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Related Races:"}),r.jsx(Q,{variant:"outline",children:w.length})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Comparison Available:"}),r.jsx(Q,{variant:N?"default":"secondary",children:N?"Yes":"No"})]})]})]})]})})]})}),r.jsxs(At,{value:"components",className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Atomic & Composition Components"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Data Summary"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Total Races:"})," ",e.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Categories:"})," ",n.join(", ")]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Total Tags:"})," ",a.length]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Sample Race: ",S==null?void 0:S.name]}),S&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:S.description}),r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Category:"})," ",S.category]}),r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Keywords:"})," ",S.keywords.length]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAvatar Component"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),r.jsx(Ps,{raceName:(S==null?void 0:S.name)||"Nord",size:"sm"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),r.jsx(Ps,{raceName:(S==null?void 0:S.name)||"Nord",size:"lg"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),r.jsx(Ps,{raceName:(S==null?void 0:S.name)||"Nord",size:"2xl"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Extra Large"}),r.jsx(Ps,{raceName:(S==null?void 0:S.name)||"Nord",size:"xl"})]})]}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Uses generic EntityAvatar with race-specific configuration"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CategoryBadge Component"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),r.jsx(gr,{category:"Human",size:"sm"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),r.jsx(gr,{category:"Elf",size:"md"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),r.jsx(gr,{category:"Beast",size:"lg"})]})]}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Uses generic CategoryBadge with race-specific styling"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"KeywordTag Component"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Auto-detected types:"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(Dn,{keyword:"destruction"}),r.jsx(Dn,{keyword:"waterbreathing"}),r.jsx(Dn,{keyword:"strong stomach"}),r.jsx(Dn,{keyword:"custom_flag"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Explicit types:"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(Dn,{keyword:"alteration",type:"skill"}),r.jsx(Dn,{keyword:"night eye",type:"ability"}),r.jsx(Dn,{keyword:"beast race",type:"trait"}),r.jsx(Dn,{keyword:"magic",type:"flag"})]})]}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Auto-detects keyword types or accepts explicit type prop"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"StatBar Component"}),r.jsxs("div",{className:"space-y-4",children:[S&&r.jsxs("div",{className:"space-y-3",children:[r.jsx(ya,{value:S.startingStats.health,maxValue:200,label:"Health",color:"red",size:"md"}),r.jsx(ya,{value:S.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"md"}),r.jsx(ya,{value:S.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"md"})]}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Progress bars with configurable colors, sizes, and labels"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceStatsDisplay Component"}),r.jsxs("div",{className:"space-y-4",children:[S&&r.jsx(Pu,{stats:S.startingStats,regeneration:S.regeneration,title:"Sample Stats",compact:!0}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Composition component that displays race statistics"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceEffectsDisplay Component"}),r.jsxs("div",{className:"space-y-4",children:[S&&S.racialSpells.length>0&&r.jsx(ol,{effects:S.racialSpells.map(C=>({name:C.name,description:C.description})),title:"Racial Abilities",maxDisplay:3}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Composition component for displaying race effects/abilities"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceKeywordsDisplay Component"}),r.jsxs("div",{className:"space-y-4",children:[S&&S.keywords.length>0&&r.jsx(lh,{keywords:S.keywords.map(C=>C.edid),title:"Race Keywords",maxDisplay:6}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Composition component that uses KeywordTag atomic components"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceCard Composition Component"}),r.jsxs("div",{className:"space-y-4",children:[S&&r.jsx(iE,{originalRace:S,isExpanded:!0,showToggle:!1,className:"max-w-2xl"}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Main composition component that orchestrates all atomic components"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAutocomplete Component"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(ll,{races:e.slice(0,5),onSelect:C=>{},placeholder:"Search for a race...",className:"w-full"}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Search and selection component for races"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAccordion Component"}),r.jsxs("div",{className:"space-y-4",children:[S&&r.jsx(Lu,{item:{id:S.edid,name:S.name,description:S.description,summary:S.description,category:S.category,effects:[],tags:[],originalRace:S},isExpanded:j,onToggle:()=>_(!j),showToggle:!0,className:"border-0 shadow-none"}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Accordion-style race display for player creation (click to expand/collapse)"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceSelectionCard Component"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(F9,{allRaces:e.slice(0,5),className:"max-w-2xl"}),r.jsx("div",{className:"text-xs text-gray-500",children:r.jsx("p",{children:"Complete race selection interface for player creation"})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sample Races with All Components"}),r.jsx("div",{className:"space-y-4",children:e.slice(0,2).map(C=>r.jsxs("div",{className:"border rounded p-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[r.jsx(Ps,{raceName:C.name,size:"2xl"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-lg",children:C.name}),r.jsx("div",{className:"flex items-center gap-2 mt-1",children:r.jsx(gr,{category:C.category,size:"sm"})})]})]}),r.jsx("p",{className:"text-sm mb-3",children:C.description}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[r.jsx(ya,{value:C.startingStats.health,maxValue:200,label:"Health",color:"red",size:"sm"}),r.jsx(ya,{value:C.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),r.jsx(ya,{value:C.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.keywords.slice(0,5).map((M,E)=>r.jsx(Dn,{keyword:M.edid},E)),C.keywords.length>5&&r.jsxs("span",{className:"text-xs text-gray-500",children:["+",C.keywords.length-5," more"]})]})]},C.edid))})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"View Components Demo"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceQuickSelectorView"}),r.jsx(V9,{selectedRace:i?e.find(C=>C.edid===i):void 0,onRaceSelect:C=>o(C.edid),onRaceClear:()=>o(null),showSearch:!0,showComparison:!0,maxDisplayRaces:3,className:"max-w-md"}),r.jsx("div",{className:"text-xs text-gray-500 mt-2",children:r.jsx("p",{children:"Compact selection interface for embedded contexts"})})]}),i&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceDetailView"}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsx(q9,{raceId:i,className:"p-4"})}),r.jsx("div",{className:"text-xs text-gray-500 mt-2",children:r.jsx("p",{children:"Detailed race view with rich information display"})})]})]})]})]})]}),r.jsxs(At,{value:"views",className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"View Components"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ae,{children:[r.jsxs(de,{children:[r.jsx(ve,{children:"RacePageView"}),r.jsx(pn,{children:"Main page view with full functionality"})]}),r.jsx(oe,{children:r.jsx(fE,{className:"border rounded-lg p-4"})})]}),r.jsxs(ae,{children:[r.jsxs(de,{children:[r.jsx(ve,{children:"RaceReferenceView"}),r.jsx(pn,{children:"Browse/search interface"})]}),r.jsx(oe,{children:r.jsx(G9,{className:"border rounded-lg p-4"})})]})]})]})]})]})}function Ew({blessings:e,selectedBlessingId:t,onBlessingSelect:s,placeholder:n="Search for a blessing source...",className:a,disabled:i=!1}){const[o,l]=h.useState(!1),[c,u]=h.useState(""),[d,f]=h.useState(-1),[m,g]=h.useState(!1),b=Vr("(max-width: 640px)"),y=h.useRef(null),v=h.useRef(null),p=h.useMemo(()=>{if(!e||!c.trim())return e||[];const M=c.toLowerCase();return e.filter(E=>{var R;return E.name.toLowerCase().includes(M)||E.blessingName.toLowerCase().includes(M)||E.blessingDescription.toLowerCase().includes(M)||((R=E.tags)==null?void 0:R.some(T=>typeof T=="string"&&T.toLowerCase().includes(M)))})},[e,c]);h.useEffect(()=>{const M=E=>{y.current&&!y.current.contains(E.target)&&(l(!1),f(-1))};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]);const x=M=>{u(M),l(!0),f(-1)},w=h.useCallback(M=>{s(M.id),u(M.name)},[s]),N=h.useCallback(M=>{s(M),u(""),l(!1),f(-1),g(!1)},[s]),j=M=>{M.key==="ArrowDown"?(M.preventDefault(),f(E=>Math.min(E+1,p.length-1))):M.key==="ArrowUp"?(M.preventDefault(),f(E=>Math.max(E-1,-1))):M.key==="Enter"?(M.preventDefault(),d>=0&&p[d]&&N(p[d].id)):M.key==="Escape"&&(l(!1),f(-1))},_=()=>{l(!0)},k=M=>{const E={Divine:"bg-blue-100 text-blue-800 border-blue-200","Daedric Prince":"bg-red-100 text-red-800 border-red-200",Tribunal:"bg-purple-100 text-purple-800 border-purple-200",Ancestor:"bg-green-100 text-green-800 border-green-200","Nordic Deity":"bg-orange-100 text-orange-800 border-orange-200","Yokudan Deity":"bg-yellow-100 text-yellow-800 border-yellow-200","Khajiiti Deity":"bg-indigo-100 text-indigo-800 border-indigo-200",Deity:"bg-gray-100 text-gray-800 border-gray-200"};return r.jsx(Q,{variant:"outline",className:$("text-xs font-medium",E[M]||E.Deity),children:M})},A=M=>{if(M===0)return"Permanent";const E=Math.floor(M/3600),R=Math.floor(M%3600/60);return E>0?`${E}h${R>0?` ${R}m`:""}`:`${R}m`},S=h.useMemo(()=>({data:p||[],search:M=>{const E=M.toLowerCase();return(p||[]).filter(R=>R.name.toLowerCase().includes(E)||R.blessingName.toLowerCase().includes(E)||R.blessingDescription.toLowerCase().includes(E))}}),[p]),C=h.useCallback((M,E,R)=>r.jsx(G,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:R,children:r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium",children:M.name}),k(M.type)]}),M.blessingName&&r.jsx("p",{className:"text-sm font-medium text-primary mb-1",children:M.blessingName}),M.effects.length>0&&r.jsxs("div",{className:"space-y-1",children:[M.effects.slice(0,2).map((T,O)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(St,{className:"h-3 w-3 text-skyrim-gold"}),r.jsx("span",{className:"font-medium",children:T.name}),T.magnitude>0&&r.jsxs("span",{className:"text-xs",children:["+",T.magnitude]}),T.duration>0&&r.jsxs("span",{className:"text-xs",children:["(",A(T.duration),")"]})]},O)),M.effects.length>2&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",M.effects.length-2," more effects"]})]})]})}),[k,A]);return b?r.jsx($l,{isOpen:m,onOpenChange:g,onSelect:w,searchPlaceholder:"Search blessings...",title:"Select Blessing",description:"Choose your favorite blessing from the options below",triggerText:c,triggerPlaceholder:n,store:S,renderListItem:C,emptyMessage:"No blessings found",className:a,disabled:i}):r.jsxs("div",{ref:y,className:$("relative",a),children:[r.jsxs("div",{className:"relative",children:[r.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(os,{ref:v,type:"text",placeholder:n,value:c,onChange:M=>x(M.target.value),onFocus:_,onKeyDown:j,disabled:i,className:"pl-10 pr-20"}),c&&r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{var M;u(""),(M=v.current)==null||M.focus()},className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted",children:r.jsx(ze,{className:"h-4 w-4"})}),r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>l(!o),className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",children:r.jsx(vt,{className:$("h-4 w-4 transition-transform",o&&"rotate-180")})})]}),o&&r.jsx("div",{className:$("absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30 max-h-60"),style:{zIndex:_t.AUTOCOMPLETE+10},children:r.jsx("div",{className:"p-2",children:p.length===0?r.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No blessing found."}):p.map((M,E)=>r.jsxs("button",{onClick:()=>N(M.id),className:$("w-full text-left px-3 py-3 rounded-lg text-sm transition-all duration-200 cursor-pointer",E===d?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"),children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium",children:M.name}),k(M.type)]}),M.blessingName&&r.jsx("p",{className:"text-sm font-medium text-primary mb-1",children:M.blessingName}),M.effects.length>0&&r.jsxs("div",{className:"space-y-1",children:[M.effects.slice(0,2).map((R,T)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(St,{className:"h-3 w-3 text-skyrim-gold"}),r.jsx("span",{className:"font-medium",children:R.name}),R.magnitude>0&&r.jsxs("span",{className:"text-xs",children:["+",R.magnitude]}),R.duration>0&&r.jsxs("span",{className:"text-xs",children:["(",A(R.duration),")"]})]},T)),M.effects.length>2&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",M.effects.length-2," more effects"]})]})]},M.id))})})]})}const Z9={};function cl({religionName:e,size:t="2xl",className:s}){const n=Z9[e],a=n?Vt(`assets/religion-avatar/${n}`):void 0;return r.jsx(Xm,{imgSrc:a,alt:e,size:t,className:s})}function mE(e){if(!e)return e;let t=e;return t=t.replace(/Global=WSN_Favor_Global_Fractional(\d*)/g,(s,n)=>`favor-based amount${n||""}`).replace(/Global=WSN_Favor_Global/g,"favor-based amount").replace(/WSN_Favor_Global_Fractional(\d*)/g,(s,n)=>`favor-based amount${n||""}`).replace(/WSN_Favor_Global/g,"favor-based amount").replace(/WSN_Effect_Global_[A-Za-z]+/g,"effect amount").replace(/WSN_[A-Za-z_]+/g,"favor-based amount").replace(/([A-Za-z])_([A-Za-z])/g,"$1 $2").replace(/([A-Za-z])_([A-Za-z])/g,"$1 $2").replace(new RegExp("(?<!<)_(?!>)","g")," "),t}function hE(e){return e?mE(e).replace(/\b\w/g,s=>s.toUpperCase()):""}function dh(e){return e?mE(e):""}function W9(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function Y9({description:e,magnitude:t,duration:s,area:n=0}){if(!e)return null;let a=dh(e).replace(/<mag>/g,t.toString()).replace(/<magnitude>/g,t.toString()).replace(/<dur>/g,s.toString()).replace(/<duration>/g,s.toString()).replace(/<area>/g,n.toString());return a=a.replace(/\b(magnitude|mag)\b/gi,t.toString()).replace(/\b(duration|dur)\b/gi,s.toString()).replace(/\b(area)\b/gi,n.toString()),r.jsx(we,{text:a,className:"text-sm text-muted-foreground"})}function X9({religion:e,className:t,onClick:s,showToggle:n=!0}){var o,l;Ye();const a=e.blessing,i=((o=a==null?void 0:a.effects)==null?void 0:o.length)||0;return!a||i===0?null:r.jsxs("div",{className:$("p-4 border rounded-2xl bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",t),onClick:s,children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx(cl,{religionName:e.name,size:"2xl"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx(Ce,{className:"text-lg font-semibold text-primary truncate",children:e.name}),r.jsxs(pe,{className:"text-sm text-muted-foreground mt-1",children:["Blessing â€¢ ",i," effect",i!==1?"s":""]})]}),n&&r.jsx("div",{onClick:c=>c.stopPropagation(),children:r.jsx(on,{itemId:(l=e.name)==null?void 0:l.toLowerCase().replace(/\s+/g,"-"),itemType:"blessing",itemName:`Blessing of ${e.name}`})})]}),r.jsx("div",{className:"space-y-2",children:a.effects.filter(c=>c.effectType!=="1"&&c.effectType!=="3").slice(0,2).map((c,u)=>r.jsx("div",{className:"flex items-start gap-2 p-2 bg-muted/30 rounded-lg",children:r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"font-medium text-sm mb-1",children:hE(c.effectName)}),r.jsx(Y9,{description:c.effectDescription,magnitude:c.magnitude,duration:c.duration,area:c.area}),(c.duration>0||c.area>0)&&r.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[c.duration>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx($n,{className:"h-3 w-3"}),r.jsxs("span",{children:["Lasts for ",W9(c.duration)]})]}),c.area>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(tn,{className:"h-3 w-3"}),r.jsxs("span",{children:["Area: ",c.area]})]})]})]})},u))}),i>2&&r.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:r.jsxs(pe,{className:"text-xs text-muted-foreground",children:["+",i-2," more effect",i-2!==1?"s":""]})})]})}const K9={Restoration:r.jsx(Yn,{className:"h-4 w-4 text-green-500"}),Destruction:r.jsx(Rl,{className:"h-4 w-4 text-red-500"}),Alteration:r.jsx(rt,{className:"h-4 w-4 text-blue-500"}),Illusion:r.jsx(Yo,{className:"h-4 w-4 text-purple-500"}),Conjuration:r.jsx(St,{className:"h-4 w-4 text-purple-500"}),Enchanting:r.jsx(Qn,{className:"h-4 w-4 text-blue-500"}),Alchemy:r.jsx(h0,{className:"h-4 w-4 text-green-500"}),"Light Armor":r.jsx(rt,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":r.jsx(rt,{className:"h-4 w-4 text-gray-500"}),"One-Handed":r.jsx(ki,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":r.jsx(ki,{className:"h-4 w-4 text-red-500"}),Archery:r.jsx(tn,{className:"h-4 w-4 text-green-500"}),Block:r.jsx(rt,{className:"h-4 w-4 text-yellow-500"}),Smithing:r.jsx(rt,{className:"h-4 w-4 text-gray-500"}),Speechcraft:r.jsx(Yo,{className:"h-4 w-4 text-blue-500"}),Sneak:r.jsx(Al,{className:"h-4 w-4 text-purple-500"}),Lockpicking:r.jsx(Ko,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:r.jsx(Ko,{className:"h-4 w-4 text-purple-500"})};function J9(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function e7({description:e,magnitude:t,duration:s,area:n=0}){if(!e)return null;let a=e.replace(/<mag>/g,t.toString()).replace(/<magnitude>/g,t.toString()).replace(/<dur>/g,s.toString()).replace(/<duration>/g,s.toString()).replace(/<area>/g,n.toString());return a=a.replace(/\b(magnitude|mag)\b/gi,t.toString()).replace(/\b(duration|dur)\b/gi,s.toString()).replace(/\b(area)\b/gi,n.toString()),r.jsx(we,{text:a,className:"text-sm text-muted-foreground"})}function t7(e){return K9[e]||r.jsx(Oe,{className:"h-4 w-4 text-gray-500"})}function s7({religion:e,isOpen:t,onOpenChange:s}){var i,o,l;if(Ye(),!e)return null;const n=e.blessing,a=((i=n==null?void 0:n.effects)==null?void 0:i.length)||0;return!n||a===0?null:r.jsx(Yi,{open:t,onOpenChange:s,title:`Blessing of ${e.name}`,description:"Divine blessing granted to worshippers",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(cl,{religionName:e.name,size:"lg"}),r.jsxs("div",{children:[r.jsxs(Ce,{className:"text-xl font-semibold",children:["Blessing of ",e.name]}),r.jsxs(pe,{className:"text-sm text-muted-foreground",children:[a," effect",a!==1?"s":""]})]})]}),r.jsx(on,{itemId:(o=e.name)==null?void 0:o.toLowerCase().replace(/\s+/g,"-"),itemType:"blessing",itemName:`Blessing of ${e.name}`})]}),r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Blessing Effects"}),r.jsx("div",{className:"space-y-3",children:n.effects.filter(c=>c.effectType!=="1"&&c.effectType!=="3").map((c,u)=>r.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cl,{religionName:e.name,size:"sm"}),c.effectType&&t7(c.effectType)]}),r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"font-medium text-sm mb-2",children:c.effectName}),r.jsx(e7,{description:c.effectDescription,magnitude:c.magnitude,duration:c.duration,area:c.area}),c.duration>0&&r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[r.jsx($n,{className:"h-3 w-3"}),r.jsxs("span",{children:["Lasts for ",J9(c.duration)]})]}),r.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:c.area>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(tn,{className:"h-3 w-3"}),r.jsxs("span",{children:["Area: ",c.area]})]})})]})]})},u))})]}),r.jsxs("div",{className:"pt-4 border-t border-border",children:[r.jsxs(Ce,{className:"text-lg font-semibold mb-3",children:["About ",e.name]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(pe,{className:"text-sm font-medium mb-1",children:"Religion Type"}),r.jsx(pe,{className:"text-sm text-muted-foreground",children:e.type})]}),((l=e.tenet)==null?void 0:l.description)&&r.jsxs("div",{children:[r.jsx(pe,{className:"text-sm font-medium mb-1",children:"Tenets"}),r.jsx(pe,{className:"text-sm text-muted-foreground",children:e.tenet.description})]}),e.favoredRaces&&e.favoredRaces.length>0&&r.jsxs("div",{children:[r.jsx(pe,{className:"text-sm font-medium mb-1",children:"Favored Races"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.favoredRaces.map((c,u)=>r.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-md",children:c},u))})]})]})]})]})})}function gE({category:e,size:t="md",className:s}){return r.jsx(I2,{category:e,categoryType:"religion",size:t,className:s})}function pE({item:e,originalReligion:t,className:s,onClick:n,showViewAllButton:a=!1,showToggle:i=!0,viewAllButtonText:o="View All",viewAllButtonRoute:l="/religions",onOpenDetails:c}){var p,x,w,N,j,_,k,A,S,C,M,E;const u=lt(),d=R=>{R.stopPropagation(),u(l),window.scrollTo({top:0,behavior:"smooth"})},f=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Religion",m=(e==null?void 0:e.description)||((p=t==null?void 0:t.tenet)==null?void 0:p.description)||"",g=(e==null?void 0:e.category)||(t==null?void 0:t.type)||"";e!=null&&e.effects,e!=null&&e.summary||(x=t==null?void 0:t.tenet)!=null&&x.description;const b=(((N=(w=t==null?void 0:t.blessing)==null?void 0:w.effects)==null?void 0:N.length)||0)+(((_=(j=t==null?void 0:t.tenet)==null?void 0:j.effects)==null?void 0:_.length)||0)+(((A=(k=t==null?void 0:t.boon1)==null?void 0:k.effects)==null?void 0:A.length)||0)+(((C=(S=t==null?void 0:t.boon2)==null?void 0:S.effects)==null?void 0:C.length)||0),y=h.useMemo(()=>{var R,T,O;return((O=(T=(R=t==null?void 0:t.blessing)==null?void 0:R.effects)==null?void 0:T[0])==null?void 0:O.effectName)||"Blessing"},[t]),v=(M=t==null?void 0:t.tenet)!=null&&M.description?t.tenet.description.split(".").filter(R=>R.trim().length>0).slice(0,4).map(R=>({id:R.trim(),title:R.trim(),short:R.trim(),full:R.trim()})):[];return r.jsxs("div",{className:$("p-4 border rounded-2xl bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",s),onClick:R=>{if(n&&n(),c){const T=(t==null?void 0:t.name)||(e==null?void 0:e.id)||"";c(T)}},children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx(cl,{religionName:f,size:"2xl"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx(Ce,{className:"text-lg font-semibold text-primary truncate",children:f}),g&&r.jsx(gE,{category:g,size:"sm",className:"mt-1"})]}),i&&r.jsx("div",{onClick:R=>R.stopPropagation(),children:r.jsx(on,{itemId:((E=t==null?void 0:t.name)==null?void 0:E.toLowerCase().replace(/\s+/g,"-"))||(e==null?void 0:e.id)||"",itemType:"religion",itemName:f})})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[b>0&&r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded-full text-xs",children:[r.jsx(Oe,{className:"h-3 w-3 text-yellow-500"}),r.jsxs("span",{className:"font-medium",children:[b," effects"]})]}),(t==null?void 0:t.favoredRaces)&&t.favoredRaces.length>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[t.favoredRaces.slice(0,2).map((R,T)=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[r.jsx(Oe,{className:"h-3 w-3"}),R]},T)),t.favoredRaces.length>2&&r.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded-full text-xs font-medium",children:["+",t.favoredRaces.length-2]})]})]}),m&&r.jsx("div",{className:"mb-3",children:r.jsx("div",{className:"text-sm text-muted-foreground leading-relaxed",children:m})}),r.jsx("div",{className:"mb-3",children:r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/30 rounded-lg",children:[r.jsx(Yn,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"text-sm font-medium",children:y})]})}),v.length>0&&r.jsx("div",{className:"mb-3",children:r.jsxs("div",{className:"space-y-1",children:[v.slice(0,4).map((R,T)=>r.jsxs("div",{className:"flex items-start gap-2 p-2 bg-muted/30 rounded-lg text-xs",children:[r.jsx(rt,{className:"h-3 w-3 text-blue-500 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-muted-foreground leading-relaxed",children:R.title})]},T)),v.length>4&&r.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded-full text-xs font-medium text-center",children:["+",v.length-4," more tenets"]})]})}),a&&r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(G,{variant:"outline",size:"sm",onClick:d,children:r.jsx($r,{className:"h-4 w-4"})})})]})}const n7={Restoration:r.jsx(Yn,{className:"h-4 w-4 text-green-500"}),Destruction:r.jsx(Rl,{className:"h-4 w-4 text-red-500"}),Alteration:r.jsx(rt,{className:"h-4 w-4 text-blue-500"}),Illusion:r.jsx(Yo,{className:"h-4 w-4 text-purple-500"}),Conjuration:r.jsx(St,{className:"h-4 w-4 text-purple-500"}),Enchanting:r.jsx(Qn,{className:"h-4 w-4 text-blue-500"}),Alchemy:r.jsx(h0,{className:"h-4 w-4 text-green-500"}),"Light Armor":r.jsx(rt,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":r.jsx(rt,{className:"h-4 w-4 text-gray-500"}),"One-Handed":r.jsx(ki,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":r.jsx(ki,{className:"h-4 w-4 text-red-500"}),Archery:r.jsx(tn,{className:"h-4 w-4 text-green-500"}),Block:r.jsx(rt,{className:"h-4 w-4 text-yellow-500"}),Smithing:r.jsx(rt,{className:"h-4 w-4 text-gray-500"}),Speechcraft:r.jsx(Yo,{className:"h-4 w-4 text-blue-500"}),Sneak:r.jsx(Al,{className:"h-4 w-4 text-purple-500"}),Lockpicking:r.jsx(Ko,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:r.jsx(Ko,{className:"h-4 w-4 text-purple-500"})};function lg(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function cg({description:e,magnitude:t,duration:s,area:n=0}){if(!e)return null;let a=dh(e);a=a.replace(/<[^>]*>/g,""),a=a.replace(/<mag>/g,t.toString()),a=a.replace(/<magnitude>/g,t.toString()),a=a.replace(/<dur>/g,s.toString()),a=a.replace(/<duration>/g,s.toString()),n>0&&(a=a.replace(/<area>/g,n.toString())),a=a.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const i=a.split(/(<[^>]+>)/g);return r.jsx(pe,{className:"text-sm text-muted-foreground",children:i.map((o,l)=>{if(o.startsWith("<")&&o.endsWith(">")){const c=o.slice(1,-1);return r.jsx("span",{className:"font-bold italic text-skyrim-gold",children:c},l)}return o})})}function xE({religion:e,isOpen:t,onOpenChange:s}){var a,i;if(!e)return null;const n=o=>n7[o]||r.jsx(Oe,{className:"h-4 w-4 text-skyrim-gold"});return r.jsx(Yi,{open:t,onOpenChange:s,side:"right",children:r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(cl,{religionName:e.name,size:"4xl"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.type&&r.jsx(gE,{category:e.type,size:"sm"}),r.jsx(on,{itemId:e.name,itemType:"religion",itemName:e.name})]}),r.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:((a=e.tenet)==null?void 0:a.description)||"A divine faith with unique blessings and tenets."})]})]})}),r.jsxs("div",{className:"space-y-6",children:[e.favoredRaces&&e.favoredRaces.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Favored Races"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.favoredRaces.map((o,l)=>r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg border border-border",children:[r.jsx(Oe,{className:"h-4 w-4 text-skyrim-gold"}),r.jsx("span",{className:"text-sm font-medium",children:o})]},l))})]}),e.worshipRestrictions&&e.worshipRestrictions.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Worship Restrictions"}),r.jsx("div",{className:"space-y-2",children:e.worshipRestrictions.map((o,l)=>r.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ze,{className:"h-4 w-4 text-red-500 mt-0.5"}),r.jsx(pe,{className:"text-sm text-muted-foreground",children:o})]})},l))})]}),e.blessing&&e.blessing.effects.length>0&&r.jsxs("div",{children:[r.jsxs(Ce,{className:"text-lg font-semibold mb-3",children:["Blessing of ",e.name]}),r.jsx("div",{className:"space-y-3",children:e.blessing.effects.filter(o=>o.effectType!=="1"&&o.effectType!=="3").map((o,l)=>r.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yn,{className:"h-4 w-4 text-red-500"}),o.effectType&&n(o.effectType)]}),r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"font-medium text-sm mb-2",children:hE(o.effectName)}),r.jsx(cg,{description:o.effectDescription,magnitude:o.magnitude,duration:o.duration,area:o.area}),o.duration>0&&r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[r.jsx($n,{className:"h-3 w-3"}),r.jsxs("span",{children:["Lasts for ",lg(o.duration)]})]}),r.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:o.area>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(tn,{className:"h-3 w-3"}),r.jsxs("span",{children:["Area: ",o.area]})]})})]})]})},l))})]}),((i=e.tenet)==null?void 0:i.effects)&&e.tenet.effects.length>0&&r.jsxs("div",{children:[r.jsxs(Ce,{className:"text-lg font-semibold mb-3",children:["Tenets of ",e.name]}),r.jsx("div",{className:"space-y-3",children:e.tenet.description.split(".").filter(o=>o.trim().length>0).map((o,l)=>r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-muted/50 rounded-lg border border-border",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(rt,{className:"h-4 w-4 text-blue-500"})}),r.jsx("div",{className:"flex-1",children:r.jsx(pe,{className:"text-sm text-muted-foreground",children:o.trim()+"."})})]},l))})]}),(e.boon1||e.boon2)&&r.jsxs("div",{children:[r.jsxs(Ce,{className:"text-lg font-semibold mb-3",children:["Boons of ",e.name]}),r.jsxs("div",{className:"space-y-4",children:[e.boon1&&e.boon1.effects.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-md font-medium mb-2",children:"Follower Boon"}),r.jsx("div",{className:"space-y-3",children:e.boon1.effects.map((o,l)=>r.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(St,{className:"h-4 w-4 text-yellow-500"}),o.effectType&&n(o.effectType)]}),r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"font-medium text-sm mb-2",children:o.effectName}),r.jsx(cg,{description:o.effectDescription,magnitude:o.magnitude,duration:o.duration,area:o.area}),o.duration>0&&r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[r.jsx($n,{className:"h-3 w-3"}),r.jsxs("span",{children:["Lasts for ",lg(o.duration)]})]}),r.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:o.area>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(tn,{className:"h-3 w-3"}),r.jsxs("span",{children:["Area: ",o.area]})]})})]})]})},l))})]}),e.boon2&&e.boon2.effects.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-md font-medium mb-2",children:"Devotee Boon"}),r.jsx("div",{className:"space-y-3",children:e.boon2.effects.map((o,l)=>r.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qn,{className:"h-4 w-4 text-purple-500"}),o.effectType&&n(o.effectType)]}),r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"font-medium text-sm mb-2",children:o.effectName}),r.jsx(cg,{description:o.effectDescription,magnitude:o.magnitude,duration:o.duration,area:o.area}),o.duration>0&&r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[r.jsx($n,{className:"h-3 w-3"}),r.jsxs("span",{children:["Lasts for ",lg(o.duration)]})]}),r.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:o.area>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(tn,{className:"h-3 w-3"}),r.jsxs("span",{children:["Area: ",o.area]})]})})]})]})},l))})]})]})]})]})]})})}function Hp(e,t){const s=h.useMemo(()=>e?e.map(l=>{var c,u,d,f,m,g,b,y,v;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:((c=l.tenet)==null?void 0:c.description)||"",type:l.type,pantheon:l.pantheon||"",favoredRaces:Fn()?l.favoredRaces||[]:[],tenetEffects:((d=(u=l.tenet)==null?void 0:u.effects)==null?void 0:d.map(p=>`${p.effectName} ${p.effectDescription}`))||[],blessingEffects:((m=(f=l.blessing)==null?void 0:f.effects)==null?void 0:m.map(p=>`${p.effectName} ${p.effectDescription}`))||[],followerPowers:((b=(g=l.boon1)==null?void 0:g.effects)==null?void 0:b.map(p=>`${p.effectName} ${p.effectDescription}`))||[],devoteePowers:((v=(y=l.boon2)==null?void 0:y.effects)==null?void 0:v.map(p=>`${p.effectName} ${p.effectDescription}`))||[],originalReligion:l}}):[],[e]),n=h.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"tenetEffects",weight:.2},{name:"blessingEffects",weight:.2},{name:"followerPowers",weight:.15},{name:"devoteePowers",weight:.15},...Fn()?[{name:"favoredRaces",weight:.1}]:[],{name:"type",weight:.1},{name:"pantheon",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),a=h.useMemo(()=>new ls(s,n),[s,n]),i=h.useMemo(()=>t.trim()?a.search(t):s.map(l=>({item:l,score:0,matches:[]})),[a,t]);return{filteredReligions:h.useMemo(()=>i.map(l=>l.item.originalReligion),[i]),searchResults:i,searchableReligions:s}}function yE(e){var t,s,n,a,i,o,l,c,u,d,f,m,g,b;return{name:e.name,type:e.type||e.pantheon||"Unknown",blessing:{spellId:((t=e.blessing)==null?void 0:t.spellId)||"",spellName:((s=e.blessing)==null?void 0:s.spellName)||"",effects:((n=e.blessing)==null?void 0:n.effects)||[]},boon1:{spellId:((a=e.boon1)==null?void 0:a.spellId)||"",spellName:((i=e.boon1)==null?void 0:i.spellName)||"",effects:((o=e.boon1)==null?void 0:o.effects)||[]},boon2:{spellId:((l=e.boon2)==null?void 0:l.spellId)||"",spellName:((c=e.boon2)==null?void 0:c.spellName)||"",effects:((u=e.boon2)==null?void 0:u.effects)||[]},tenet:{spellId:((d=e.tenet)==null?void 0:d.spellId)||"",spellName:((f=e.tenet)==null?void 0:f.spellName)||"",header:((m=e.tenet)==null?void 0:m.header)||"",description:((g=e.tenet)==null?void 0:g.description)||"",effects:((b=e.tenet)==null?void 0:b.effects)||[]},favoredRaces:e.favoredRaces||[],worshipRestrictions:e.worshipRestrictions||[]}}function a7(e){var t,s,n,a;return{id:e.name.toLowerCase().replace(/\s+/g,"-"),name:e.name,type:e.type,description:((t=e.tenet)==null?void 0:t.description)||"",tenetDescription:((s=e.tenet)==null?void 0:s.description)||"",followerPower:((n=e.boon1)==null?void 0:n.spellName)||"",devoteePower:((a=e.boon2)==null?void 0:a.spellName)||"",favoredRaces:e.favoredRaces||[],worshipRestrictions:e.worshipRestrictions||[],originalReligion:e}}function r7(e){return e?e.map(a7):[]}function i7(e,t){if(!(!e||!t))return e.find(s=>s.name.toLowerCase().replace(/\s+/g,"-")===t)}function Aw({religions:e,selectedDeityId:t,onDeitySelect:s,placeholder:n="Search for a deity to follow...",className:a,disabled:i=!1}){const[o,l]=h.useState(""),[c,u]=h.useState(!1),d=Vr("(max-width: 640px)");h.useRef(null);const{filteredReligions:f}=Hp(e,o),m=h.useMemo(()=>r7(f),[f]),g=N=>{const j={Divine:"bg-blue-100 text-blue-800 border-blue-200","Daedric Prince":"bg-red-100 text-red-800 border-red-200",Tribunal:"bg-purple-100 text-purple-800 border-purple-200",Ancestor:"bg-green-100 text-green-800 border-green-200","Nordic Deity":"bg-orange-100 text-orange-800 border-orange-200","Yokudan Deity":"bg-yellow-100 text-yellow-800 border-yellow-200","Khajiiti Deity":"bg-indigo-100 text-indigo-800 border-indigo-200",Deity:"bg-gray-100 text-gray-800 border-gray-200"};return r.jsx(Q,{variant:"outline",className:$("text-xs font-medium",j[N]||j.Deity),children:N})},b=h.useMemo(()=>m.map(N=>({id:N.id,label:N.name,description:N.tenetDescription,category:N.type,badge:g(N.type),metadata:{originalReligion:N.originalReligion,favoredRaces:N.favoredRaces}})),[m]),y=h.useCallback(N=>{s(N.id),l(N.name)},[s]),v=h.useCallback(N=>{s(N.id),l(N.label)},[s]),p=h.useMemo(()=>(N,j)=>{var _;return r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium",children:N.label}),N.badge]}),N.description&&r.jsx(we,{text:N.description,className:"text-sm text-muted-foreground line-clamp-2 mb-1"}),Fn()&&((_=N.metadata)==null?void 0:_.favoredRaces)&&N.metadata.favoredRaces.length>0&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[r.jsx(Oe,{className:"h-3 w-3 fill-current"}),r.jsxs("span",{children:["Favored races:"," ",N.metadata.favoredRaces.map(k=>k.name).join(", ")]})]})]})})},[]),x=h.useMemo(()=>({data:m,search:N=>{const j=N.toLowerCase();return m.filter(_=>{var k;return _.name.toLowerCase().includes(j)||((k=_.description)==null?void 0:k.toLowerCase().includes(j))})}}),[m]),w=h.useCallback((N,j,_)=>r.jsx(G,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:_,children:r.jsx("div",{className:"flex items-center gap-3 w-full",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium",children:N.name}),N.type&&r.jsx(Q,{variant:"outline",className:$("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:N.type})]}),N.description&&r.jsx(we,{text:N.description,className:"text-sm text-muted-foreground line-clamp-2 mb-1"}),Fn()&&N.favoredRaces&&N.favoredRaces.length>0&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[r.jsx(Oe,{className:"h-3 w-3 fill-current"}),r.jsxs("span",{children:["Favored races:"," ",N.favoredRaces.map(k=>k.name).join(", ")]})]})]})})}),[]);return d?r.jsx($l,{isOpen:c,onOpenChange:u,onSelect:y,searchPlaceholder:"Search religions...",title:"Select Religion",description:"Choose your character's religion from the options below",triggerText:o,triggerPlaceholder:n,store:x,renderListItem:w,emptyMessage:"No religions found",className:a,disabled:i}):r.jsx(Mu,{options:b,onSelect:v,placeholder:n,className:a,renderOption:p,emptyMessage:"No religions found",searchQuery:o,onSearchQueryChange:l})}function ug({text:e,className:t="text-sm text-muted-foreground"}){if(!e)return null;let s=e.replace(/<[^>]*>/g,"");s=s.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const n=s.split(/(<[^>]+>)/g);return r.jsx("div",{className:t,children:n.map((a,i)=>{if(a.startsWith("<")&&a.endsWith(">")){const o=a.slice(1,-1);return r.jsx("span",{className:"font-bold italic text-skyrim-gold",children:o},i)}return a})})}function o7({description:e}){if(!e)return null;const s=dh(e).split(/(<[^>]+>)/g);return r.jsx(pe,{className:"text-xs text-muted-foreground",children:s.map((n,a)=>{if(n.startsWith("<")&&n.endsWith(">")){const i=n.slice(1,-1);return r.jsx("span",{className:"font-bold italic text-skyrim-gold",children:i},a)}return n})})}function dg({description:e,magnitude:t,duration:s,area:n=0}){if(!e)return null;let a=dh(e);a=a.replace(/<[^>]*>/g,""),a=a.replace(/<mag>/g,t.toString()),a=a.replace(/<magnitude>/g,t.toString()),a=a.replace(/<dur>/g,s.toString()),a=a.replace(/<duration>/g,s.toString()),n>0&&(a=a.replace(/<area>/g,n.toString())),a=a.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const i=a.split(/(<[^>]+>)/g);return r.jsx(pe,{className:"text-xs text-muted-foreground",children:i.map((o,l)=>{if(o.startsWith("<")&&o.endsWith(">")){const c=o.slice(1,-1);return r.jsx("span",{className:"font-bold italic text-skyrim-gold",children:c},l)}return o})})}function fg(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function mg(e){const t=[/<mag>/g,/<magnitude>/g],s=[/<dur>/g,/<duration>/g],n=t.some(i=>i.test(e)),a=s.some(i=>i.test(e));return{hasMagnitude:n,hasDuration:a}}const l7={Restoration:r.jsx(Yn,{className:"h-4 w-4 text-green-500"}),Destruction:r.jsx(Rl,{className:"h-4 w-4 text-red-500"}),Alteration:r.jsx(rt,{className:"h-4 w-4 text-blue-500"}),Illusion:r.jsx(Yo,{className:"h-4 w-4 text-purple-500"}),Conjuration:r.jsx(St,{className:"h-4 w-4 text-purple-500"}),Enchanting:r.jsx(Qn,{className:"h-4 w-4 text-blue-500"}),Alchemy:r.jsx(h0,{className:"h-4 w-4 text-green-500"}),"Light Armor":r.jsx(rt,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":r.jsx(rt,{className:"h-4 w-4 text-gray-500"}),"One-Handed":r.jsx(ki,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":r.jsx(ki,{className:"h-4 w-4 text-red-500"}),Archery:r.jsx(tn,{className:"h-4 w-4 text-green-500"}),Block:r.jsx(rt,{className:"h-4 w-4 text-yellow-500"}),Smithing:r.jsx(rt,{className:"h-4 w-4 text-gray-500"}),Speechcraft:r.jsx(Yo,{className:"h-4 w-4 text-blue-500"}),Sneak:r.jsx(Al,{className:"h-4 w-4 text-purple-500"}),Lockpicking:r.jsx(Ko,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:r.jsx(Ko,{className:"h-4 w-4 text-purple-500"})},c7={Divine:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Daedric:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Aedric:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Tribal:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Ancestral:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},Rw={sm:"text-xs px-2 py-0.5"};function u7({item:e,originalReligion:t,isExpanded:s=!1,onToggle:n,className:a,showBlessings:i=!0,showTenets:o=!0,showBoons:l=!0,showFavoredRaces:c=!0,disableHover:u,showToggle:d}){var g,b,y,v,p,x,w,N;const f=j=>{switch(j){case"positive":return r.jsx(br,{className:"h-4 w-4 text-green-500"});case"negative":return r.jsx(Po,{className:"h-4 w-4 text-red-500"});case"neutral":return r.jsx(m0,{className:"h-4 w-4 text-blue-500"})}},m=j=>l7[j]||r.jsx(Oe,{className:"h-4 w-4 text-skyrim-gold"});return r.jsxs(xe,{expanded:s,onToggle:n,className:a,disableHover:u,children:[r.jsxs(xe.Header,{children:[d&&r.jsx(on,{itemId:e.id,itemType:"religion",itemName:e.name}),r.jsx("div",{className:"flex-1",children:r.jsx(Ce,{className:"text-primary font-semibold",children:e.name})}),e.category&&r.jsx(Q,{variant:"outline",className:$(c7[e.category]||"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",Rw.sm,"font-medium transition-colors"),children:e.category}),Fn()&&c&&t&&Array.isArray(t.favoredRaces)&&t.favoredRaces.length>0&&r.jsx("div",{className:"flex items-center gap-1",children:t.favoredRaces.map((j,_)=>r.jsxs(Q,{variant:"outline",className:$("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20",Rw.sm,"font-medium transition-colors"),children:[r.jsx(Oe,{className:"h-3 w-3 mr-1"}),"Favors ",j]},_))})]}),r.jsxs(xe.Summary,{children:[r.jsx("div",{className:"line-clamp-2",children:r.jsx(ug,{text:e.summary||e.description,className:"text-sm text-muted-foreground"})}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[(g=e.effects)==null?void 0:g.slice(0,2).map((j,_)=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:j.description,children:[f(j.type),r.jsx("span",{className:"font-medium",children:j.name})]},_)),Fn()&&c&&((b=t==null?void 0:t.favoredRaces)==null?void 0:b.slice(0,2).map((j,_)=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",children:[r.jsx(Oe,{className:"h-3 w-3 text-skyrim-gold"}),r.jsx("span",{className:"font-medium",children:j})]},`race-${_}`)))]})]}),r.jsxs(xe.Details,{children:[e.description&&r.jsx("div",{children:r.jsx(ug,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),Fn()&&c&&Array.isArray(t==null?void 0:t.favoredRaces)&&t.favoredRaces.length>0&&r.jsxs("div",{children:[r.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Favored Races"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.favoredRaces.map((j,_)=>r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg border border-border",children:[r.jsx(Oe,{className:"h-4 w-4 text-skyrim-gold"}),r.jsx("span",{className:"text-sm font-medium",children:j})]},_))})]}),Array.isArray(t==null?void 0:t.worshipRestrictions)&&t.worshipRestrictions.length>0&&r.jsxs("div",{children:[r.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Worship Restrictions"}),r.jsx("div",{className:"space-y-2",children:t.worshipRestrictions.map((j,_)=>r.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Po,{className:"h-4 w-4 text-red-500 mt-0.5"}),r.jsx(ug,{text:j,className:"text-sm text-muted-foreground"})]})},_))})]}),i&&Array.isArray((y=t==null?void 0:t.blessing)==null?void 0:y.effects)&&t.blessing.effects.length>0&&r.jsxs("div",{children:[r.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Blessing of ",e.name]}),r.jsx("div",{className:"space-y-3",children:t.blessing.effects.filter(j=>j.effectType!=="1"&&j.effectType!=="3").map((j,_)=>{const{hasDuration:k}=mg(j.effectDescription);return r.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.effectType&&m(j.effectType)]}),r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"font-medium text-sm mb-1",children:j.effectName}),r.jsx(dg,{description:j.effectDescription,magnitude:j.magnitude,duration:j.duration,area:j.area}),k&&j.duration>0&&r.jsxs(pe,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for ",fg(j.duration),"."]}),r.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:j.area>0&&r.jsxs("span",{children:["Area: ",j.area]})})]})]})},_)})})]}),o&&Array.isArray((v=t==null?void 0:t.tenet)==null?void 0:v.effects)&&t.tenet.effects.length>0&&r.jsxs("div",{children:[r.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Tenets of ",e.name]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.tenet.description.split(".").filter(j=>j.trim().length>0).map((j,_)=>r.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted/50 rounded-lg border border-border",children:[r.jsx("div",{className:"flex items-center gap-2",children:f("positive")}),r.jsx("div",{className:"flex-1",children:r.jsx(o7,{description:j.trim()+"."})})]},_))})]}),l&&(Array.isArray((p=t==null?void 0:t.boon1)==null?void 0:p.effects)&&t.boon1.effects.length>0||Array.isArray((x=t==null?void 0:t.boon2)==null?void 0:x.effects)&&t.boon2.effects.length>0)&&r.jsxs("div",{children:[r.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Boons of ",e.name]}),r.jsxs("div",{className:"space-y-4",children:[Array.isArray((w=t==null?void 0:t.boon1)==null?void 0:w.effects)&&t.boon1.effects.length>0&&r.jsxs("div",{children:[r.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Follower Boon"}),r.jsx("div",{className:"space-y-3",children:t.boon1.effects.map((j,_)=>{const{hasDuration:k}=mg(j.effectDescription);return r.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.effectType&&m(j.effectType)]}),r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"font-medium text-sm mb-1",children:j.effectName}),r.jsx(dg,{description:j.effectDescription,magnitude:j.magnitude,duration:j.duration,area:j.area}),k&&j.duration>0&&r.jsxs(pe,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",fg(j.duration),"."]}),r.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:j.area>0&&r.jsxs("span",{children:["Area: ",j.area]})})]})]})},_)})})]}),Array.isArray((N=t==null?void 0:t.boon2)==null?void 0:N.effects)&&t.boon2.effects.length>0&&r.jsxs("div",{children:[r.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Devotee Boon"}),r.jsx("div",{className:"space-y-3",children:t.boon2.effects.map((j,_)=>{const{hasDuration:k}=mg(j.effectDescription);return r.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.effectType&&m(j.effectType)]}),r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"font-medium text-sm mb-1",children:j.effectName}),r.jsx(dg,{description:j.effectDescription,magnitude:j.magnitude,duration:j.duration,area:j.area}),k&&j.duration>0&&r.jsxs(pe,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",fg(j.duration),"."]}),r.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:j.area>0&&r.jsxs("span",{children:["Area: ",j.area]})})]})]})},_)})})]})]})]})]})]})}function d7(){const{data:e,loading:t,error:s}=B2();return{religions:e||[],loading:t,error:s}}function vE({className:e}){const{religions:t,loading:s,error:n}=d7(),{build:a,setReligion:i}=Ye(),o=lt(),[l,c]=h.useState(!0),u=a.religion?i7(t,a.religion):null,d=()=>{o("/build/religions"),window.scrollTo({top:0,behavior:"smooth"})},f=()=>{c(!l)};if(s)return r.jsx(ts,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:r.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading religions..."})});if(n)return r.jsx(ts,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:r.jsxs("div",{className:"text-sm text-destructive",children:["Error loading religions: ",n]})});if(!u)return r.jsxs(ts,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's religion"}),r.jsx(Aw,{religions:t,selectedDeityId:a.religion,onDeitySelect:i,placeholder:"Search for a religion...",className:"w-full"})]});const m=HC(u);return r.jsxs(ts,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[r.jsx(Aw,{religions:t,selectedDeityId:a.religion,onDeitySelect:i,placeholder:`Religion: Select a religion (${u.name})`,className:"w-full"}),r.jsx(u7,{item:m,originalReligion:u,isExpanded:l,onToggle:f,className:"border-0 shadow-none",disableHover:!0,showToggle:!1,showBlessings:!1,showTenets:!0,showBoons:!0,showFavoredRaces:Fn()})]})}function f7(){const{data:e,loading:t,error:s}=YF();return{blessings:e||[],loading:t,error:s}}function bE({className:e}){const{build:t,setFavoriteBlessing:s}=Ye(),n=lt(),{blessings:a,loading:i,error:o}=f7(),l=t.favoriteBlessing?a.find(u=>u.id===t.favoriteBlessing):null,c=()=>{n("/build/religions?tab=blessings"),window.scrollTo({top:0,behavior:"smooth"})};return i?r.jsx(ts,{title:"Favorite Blessing",navigateTo:"religions",onNavigate:c,className:e,children:r.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading blessings..."})}):o?r.jsx(ts,{title:"Favorite Blessing",navigateTo:"religions",onNavigate:c,className:e,children:r.jsxs("div",{className:"text-sm text-destructive",children:["Error loading blessings: ",o]})}):l?r.jsxs(ts,{title:"Favorite Blessing",navigateTo:"religions",onNavigate:c,className:e,children:[r.jsx(Ew,{blessings:a,selectedBlessingId:t.favoriteBlessing,onBlessingSelect:s,placeholder:`Favorite Blessing: Select a blessing source (${l.name})`,className:"w-full"}),r.jsx("div",{className:"mt-4 p-3 border rounded-lg bg-card",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(cl,{religionName:l.name,size:"md"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-medium text-primary truncate",children:l.blessingName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.effects.length," effect",l.effects.length!==1?"s":""]})]})]})})]}):r.jsxs(ts,{title:"Favorite Blessing",navigateTo:"religions",onNavigate:c,className:e,children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's favorite blessing (the blessing you expect to use most frequently)"}),r.jsx(Ew,{blessings:a,selectedBlessingId:t.favoriteBlessing,onBlessingSelect:s,placeholder:"Search for a blessing source...",className:"w-full"})]})}function wE({level:e,size:t="sm"}){const s={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return e<=0?null:r.jsxs(Q,{variant:"secondary",className:$("bg-blue-100 text-blue-800 border-blue-200",s[t]),children:["Min: Level ",e]})}function m7({name:e,description:t,category:s,assignmentType:n,perkCount:a,minLevel:i,startingLevel:o,onSelect:l,onMajorClick:c,onMinorClick:u,canAssignMajor:d,canAssignMinor:f,className:m}){const g=y=>{y.stopPropagation(),c(y)},b=y=>{y.stopPropagation(),u(y)};return r.jsxs("div",{className:$("p-4 border rounded-lg hover:bg-muted/50 transition-colors",m),onClick:l,children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(zr,{skillName:e,size:"2xl",className:"flex-shrink-0"}),r.jsx("h3",{className:"font-semibold text-lg cursor-pointer",children:e})]}),r.jsx(h7,{type:n})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:t}),r.jsxs("div",{className:"flex gap-2 flex-wrap mb-4",children:[r.jsx(g7,{category:s}),r.jsx(p7,{count:a}),typeof i=="number"&&i>0&&r.jsx(wE,{level:i}),typeof o=="number"&&o>0&&r.jsxs(Q,{variant:"outline",className:"text-xs bg-green-100 text-green-800 border-green-300",children:["Starting: ",o]})]}),r.jsxs("div",{className:"flex gap-2","data-assignment-control":!0,children:[r.jsx(G,{size:"sm",variant:n==="major"?"default":"outline",onClick:g,disabled:!d&&n!=="major",className:$("flex-1 text-xs",n==="major"&&"bg-yellow-600 hover:bg-yellow-700 text-white border-yellow-500"),children:n==="major"?"Remove Major":"Major"}),r.jsx(G,{size:"sm",variant:n==="minor"?"default":"outline",onClick:b,disabled:!f&&n!=="minor",className:$("flex-1 text-xs",n==="minor"&&"bg-gray-500 hover:bg-gray-600 text-white border-gray-400"),children:n==="minor"?"Remove Minor":"Minor"})]})]})}function h7({type:e,size:t="sm"}){const s={major:"bg-yellow-600 text-white hover:bg-yellow-700 border-yellow-500",minor:"bg-gray-500 text-white hover:bg-gray-600 border-gray-400",none:"bg-gray-100 text-gray-800 border border-gray-300"},n={major:"Major",minor:"Minor",none:"Unassigned"},a={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return r.jsx(Q,{className:$(s[e],a[t]),children:n[e]})}function g7({category:e,size:t="sm"}){const s={Combat:"bg-red-100 text-red-800 border-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200"},n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return r.jsx(Q,{variant:"outline",className:$(s[e]||"bg-gray-100 text-gray-800 border-gray-300",n[t]),children:e})}function p7({count:e,size:t="sm"}){const s={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return r.jsxs(Q,{variant:"secondary",className:$("bg-purple-100 text-purple-800 border-purple-200",s[t]),children:[e," Perks"]})}function x7(){return r.jsx("div",{className:"container mx-auto p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Loading Skills..."}),r.jsx("p",{className:"text-muted-foreground",children:"Initializing skill and perk data..."})]})})}function y7({error:e}){return r.jsx("div",{className:"container mx-auto p-6",children:r.jsxs("div",{className:"text-center text-red-600",children:[r.jsx(Xo,{className:"h-12 w-12 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Error Loading Skills"}),r.jsx("p",{className:"text-muted-foreground",children:e})]})})}const v7={Alchemy:"alchemy.svg",Alteration:"alteration.svg",Block:"block.svg",Conjuration:"conjuration.svg",Destruction:"destruction.svg",Enchanting:"enchanting.svg",Evasion:"evasion.svg",Finesse:"finesse.svg","Heavy Armor":"heavyarmor.svg",Illusion:"illusion.svg",Marksman:"marksman.svg","One-handed":"one-handed.svg",Restoration:"restoration.svg",Smithing:"smithing.svg",Sneak:"sneak.svg",Speech:"speech.svg","Two-handed":"two-handed.svg",Wayfarer:"wayfarer.svg"};function zr({skillName:e,size:t="md",className:s}){const n=v7[e],a=n?Vt(`assets/skills/${n}`):void 0;return r.jsx(Xm,{imgSrc:a,alt:e,size:t,className:s,showBorder:!0})}function b7({skills:e,onSkillSelect:t,onAssignMajor:s,onAssignMinor:n,onRemoveAssignment:a,selectedSkillId:i,className:o}){return r.jsx("div",{className:$("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",o),children:e.map(l=>r.jsx(m7,{name:l.name,description:l.description,category:l.category,assignmentType:l.assignmentType,perkCount:l.perkCount,minLevel:l.minLevel,startingLevel:l.startingLevel,canAssignMajor:l.canAssignMajor,canAssignMinor:l.canAssignMinor,onSelect:()=>t(l.id),onMajorClick:c=>{c.preventDefault(),s(l.id)},onMinorClick:c=>{c.preventDefault(),n(l.id)},className:i===l.id?"ring-2 ring-primary bg-primary/5":""},l.id))})}function hs(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let s=0,n;s<e.length;s++)(n=hs(e[s]))!==""&&(t+=(t&&" ")+n);else for(let s in e)e[s]&&(t+=(t&&" ")+s);return t}var NE={exports:{}},jE={},kE={exports:{}},SE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ul=h;function w7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var N7=typeof Object.is=="function"?Object.is:w7,j7=ul.useState,k7=ul.useEffect,S7=ul.useLayoutEffect,_7=ul.useDebugValue;function C7(e,t){var s=t(),n=j7({inst:{value:s,getSnapshot:t}}),a=n[0].inst,i=n[1];return S7(function(){a.value=s,a.getSnapshot=t,hg(a)&&i({inst:a})},[e,s,t]),k7(function(){return hg(a)&&i({inst:a}),e(function(){hg(a)&&i({inst:a})})},[e]),_7(s),s}function hg(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!N7(e,s)}catch{return!0}}function E7(e,t){return t()}var A7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?E7:C7;SE.useSyncExternalStore=ul.useSyncExternalStore!==void 0?ul.useSyncExternalStore:A7;kE.exports=SE;var R7=kE.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh=h,T7=R7;function M7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var D7=typeof Object.is=="function"?Object.is:M7,P7=T7.useSyncExternalStore,L7=fh.useRef,z7=fh.useEffect,O7=fh.useMemo,B7=fh.useDebugValue;jE.useSyncExternalStoreWithSelector=function(e,t,s,n,a){var i=L7(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=O7(function(){function c(g){if(!u){if(u=!0,d=g,g=n(g),a!==void 0&&o.hasValue){var b=o.value;if(a(b,g))return f=b}return f=g}if(b=f,D7(d,g))return b;var y=n(g);return a!==void 0&&a(b,y)?(d=g,b):(d=g,f=y)}var u=!1,d,f,m=s===void 0?null:s;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,s,n,a]);var l=P7(e,i[0],i[1]);return z7(function(){o.hasValue=!0,o.value=l},[l]),B7(l),l};NE.exports=jE;var I7=NE.exports;const $7=o0(I7),F7={},Tw=e=>{let t;const s=new Set,n=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const g=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),s.forEach(b=>b(t,g))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(s.add(d),()=>s.delete(d)),destroy:()=>{(F7?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},u=t=e(n,a,c);return c},H7=e=>e?Tw(e):Tw,{useDebugValue:U7}=z,{useSyncExternalStoreWithSelector:G7}=$7,V7=e=>e;function _E(e,t=V7,s){const n=G7(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return U7(n),n}const Mw=(e,t)=>{const s=H7(e),n=(a,i=t)=>_E(s,a,i);return Object.assign(n,s),n},q7=(e,t)=>e?Mw(e,t):Mw;function Ns(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!1;for(const n of s)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var Q7={value:()=>{}};function mh(){for(var e=0,t=arguments.length,s={},n;e<t;++e){if(!(n=arguments[e]+"")||n in s||/[\s.]/.test(n))throw new Error("illegal type: "+n);s[n]=[]}return new Xd(s)}function Xd(e){this._=e}function Z7(e,t){return e.trim().split(/^|\s+/).map(function(s){var n="",a=s.indexOf(".");if(a>=0&&(n=s.slice(a+1),s=s.slice(0,a)),s&&!t.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:n}})}Xd.prototype=mh.prototype={constructor:Xd,on:function(e,t){var s=this._,n=Z7(e+"",s),a,i=-1,o=n.length;if(arguments.length<2){for(;++i<o;)if((a=(e=n[i]).type)&&(a=W7(s[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(a=(e=n[i]).type)s[a]=Dw(s[a],e.name,t);else if(t==null)for(a in s)s[a]=Dw(s[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var s in t)e[s]=t[s].slice();return new Xd(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var s=new Array(a),n=0,a,i;n<a;++n)s[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,s)},apply:function(e,t,s){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,i=n.length;a<i;++a)n[a].value.apply(t,s)}};function W7(e,t){for(var s=0,n=e.length,a;s<n;++s)if((a=e[s]).name===t)return a.value}function Dw(e,t,s){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Q7,e=e.slice(0,n).concat(e.slice(n+1));break}return s!=null&&e.push({name:t,value:s}),e}var Up="http://www.w3.org/1999/xhtml";const Pw={svg:"http://www.w3.org/2000/svg",xhtml:Up,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hh(e){var t=e+="",s=t.indexOf(":");return s>=0&&(t=e.slice(0,s))!=="xmlns"&&(e=e.slice(s+1)),Pw.hasOwnProperty(t)?{space:Pw[t],local:e}:e}function Y7(e){return function(){var t=this.ownerDocument,s=this.namespaceURI;return s===Up&&t.documentElement.namespaceURI===Up?t.createElement(e):t.createElementNS(s,e)}}function X7(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function CE(e){var t=hh(e);return(t.local?X7:Y7)(t)}function K7(){}function Ay(e){return e==null?K7:function(){return this.querySelector(e)}}function J7(e){typeof e!="function"&&(e=Ay(e));for(var t=this._groups,s=t.length,n=new Array(s),a=0;a<s;++a)for(var i=t[a],o=i.length,l=n[a]=new Array(o),c,u,d=0;d<o;++d)(c=i[d])&&(u=e.call(c,c.__data__,d,i))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new Fs(n,this._parents)}function eU(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function tU(){return[]}function EE(e){return e==null?tU:function(){return this.querySelectorAll(e)}}function sU(e){return function(){return eU(e.apply(this,arguments))}}function nU(e){typeof e=="function"?e=sU(e):e=EE(e);for(var t=this._groups,s=t.length,n=[],a=[],i=0;i<s;++i)for(var o=t[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(n.push(e.call(c,c.__data__,u,o)),a.push(c));return new Fs(n,a)}function AE(e){return function(){return this.matches(e)}}function RE(e){return function(t){return t.matches(e)}}var aU=Array.prototype.find;function rU(e){return function(){return aU.call(this.children,e)}}function iU(){return this.firstElementChild}function oU(e){return this.select(e==null?iU:rU(typeof e=="function"?e:RE(e)))}var lU=Array.prototype.filter;function cU(){return Array.from(this.children)}function uU(e){return function(){return lU.call(this.children,e)}}function dU(e){return this.selectAll(e==null?cU:uU(typeof e=="function"?e:RE(e)))}function fU(e){typeof e!="function"&&(e=AE(e));for(var t=this._groups,s=t.length,n=new Array(s),a=0;a<s;++a)for(var i=t[a],o=i.length,l=n[a]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new Fs(n,this._parents)}function TE(e){return new Array(e.length)}function mU(){return new Fs(this._enter||this._groups.map(TE),this._parents)}function $f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}$f.prototype={constructor:$f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hU(e){return function(){return e}}function gU(e,t,s,n,a,i){for(var o=0,l,c=t.length,u=i.length;o<u;++o)(l=t[o])?(l.__data__=i[o],n[o]=l):s[o]=new $f(e,i[o]);for(;o<c;++o)(l=t[o])&&(a[o]=l)}function pU(e,t,s,n,a,i,o){var l,c,u=new Map,d=t.length,f=i.length,m=new Array(d),g;for(l=0;l<d;++l)(c=t[l])&&(m[l]=g=o.call(c,c.__data__,l,t)+"",u.has(g)?a[l]=c:u.set(g,c));for(l=0;l<f;++l)g=o.call(e,i[l],l,i)+"",(c=u.get(g))?(n[l]=c,c.__data__=i[l],u.delete(g)):s[l]=new $f(e,i[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(m[l])===c&&(a[l]=c)}function xU(e){return e.__data__}function yU(e,t){if(!arguments.length)return Array.from(this,xU);var s=t?pU:gU,n=this._parents,a=this._groups;typeof e!="function"&&(e=hU(e));for(var i=a.length,o=new Array(i),l=new Array(i),c=new Array(i),u=0;u<i;++u){var d=n[u],f=a[u],m=f.length,g=vU(e.call(d,d&&d.__data__,u,n)),b=g.length,y=l[u]=new Array(b),v=o[u]=new Array(b),p=c[u]=new Array(m);s(d,f,y,v,p,g,t);for(var x=0,w=0,N,j;x<b;++x)if(N=y[x]){for(x>=w&&(w=x+1);!(j=v[w])&&++w<b;);N._next=j||null}}return o=new Fs(o,n),o._enter=l,o._exit=c,o}function vU(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bU(){return new Fs(this._exit||this._groups.map(TE),this._parents)}function wU(e,t,s){var n=this.enter(),a=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),s==null?i.remove():s(i),n&&a?n.merge(a).order():a}function NU(e){for(var t=e.selection?e.selection():e,s=this._groups,n=t._groups,a=s.length,i=n.length,o=Math.min(a,i),l=new Array(a),c=0;c<o;++c)for(var u=s[c],d=n[c],f=u.length,m=l[c]=new Array(f),g,b=0;b<f;++b)(g=u[b]||d[b])&&(m[b]=g);for(;c<a;++c)l[c]=s[c];return new Fs(l,this._parents)}function jU(){for(var e=this._groups,t=-1,s=e.length;++t<s;)for(var n=e[t],a=n.length-1,i=n[a],o;--a>=0;)(o=n[a])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function kU(e){e||(e=SU);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var s=this._groups,n=s.length,a=new Array(n),i=0;i<n;++i){for(var o=s[i],l=o.length,c=a[i]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new Fs(a,this._parents).order()}function SU(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _U(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function CU(){return Array.from(this)}function EU(){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var n=e[t],a=0,i=n.length;a<i;++a){var o=n[a];if(o)return o}return null}function AU(){let e=0;for(const t of this)++e;return e}function RU(){return!this.node()}function TU(e){for(var t=this._groups,s=0,n=t.length;s<n;++s)for(var a=t[s],i=0,o=a.length,l;i<o;++i)(l=a[i])&&e.call(l,l.__data__,i,a);return this}function MU(e){return function(){this.removeAttribute(e)}}function DU(e){return function(){this.removeAttributeNS(e.space,e.local)}}function PU(e,t){return function(){this.setAttribute(e,t)}}function LU(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zU(e,t){return function(){var s=t.apply(this,arguments);s==null?this.removeAttribute(e):this.setAttribute(e,s)}}function OU(e,t){return function(){var s=t.apply(this,arguments);s==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,s)}}function BU(e,t){var s=hh(e);if(arguments.length<2){var n=this.node();return s.local?n.getAttributeNS(s.space,s.local):n.getAttribute(s)}return this.each((t==null?s.local?DU:MU:typeof t=="function"?s.local?OU:zU:s.local?LU:PU)(s,t))}function ME(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function IU(e){return function(){this.style.removeProperty(e)}}function $U(e,t,s){return function(){this.style.setProperty(e,t,s)}}function FU(e,t,s){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,s)}}function HU(e,t,s){return arguments.length>1?this.each((t==null?IU:typeof t=="function"?FU:$U)(e,t,s??"")):dl(this.node(),e)}function dl(e,t){return e.style.getPropertyValue(t)||ME(e).getComputedStyle(e,null).getPropertyValue(t)}function UU(e){return function(){delete this[e]}}function GU(e,t){return function(){this[e]=t}}function VU(e,t){return function(){var s=t.apply(this,arguments);s==null?delete this[e]:this[e]=s}}function qU(e,t){return arguments.length>1?this.each((t==null?UU:typeof t=="function"?VU:GU)(e,t)):this.node()[e]}function DE(e){return e.trim().split(/^|\s+/)}function Ry(e){return e.classList||new PE(e)}function PE(e){this._node=e,this._names=DE(e.getAttribute("class")||"")}PE.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function LE(e,t){for(var s=Ry(e),n=-1,a=t.length;++n<a;)s.add(t[n])}function zE(e,t){for(var s=Ry(e),n=-1,a=t.length;++n<a;)s.remove(t[n])}function QU(e){return function(){LE(this,e)}}function ZU(e){return function(){zE(this,e)}}function WU(e,t){return function(){(t.apply(this,arguments)?LE:zE)(this,e)}}function YU(e,t){var s=DE(e+"");if(arguments.length<2){for(var n=Ry(this.node()),a=-1,i=s.length;++a<i;)if(!n.contains(s[a]))return!1;return!0}return this.each((typeof t=="function"?WU:t?QU:ZU)(s,t))}function XU(){this.textContent=""}function KU(e){return function(){this.textContent=e}}function JU(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function eG(e){return arguments.length?this.each(e==null?XU:(typeof e=="function"?JU:KU)(e)):this.node().textContent}function tG(){this.innerHTML=""}function sG(e){return function(){this.innerHTML=e}}function nG(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function aG(e){return arguments.length?this.each(e==null?tG:(typeof e=="function"?nG:sG)(e)):this.node().innerHTML}function rG(){this.nextSibling&&this.parentNode.appendChild(this)}function iG(){return this.each(rG)}function oG(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lG(){return this.each(oG)}function cG(e){var t=typeof e=="function"?e:CE(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function uG(){return null}function dG(e,t){var s=typeof e=="function"?e:CE(e),n=t==null?uG:typeof t=="function"?t:Ay(t);return this.select(function(){return this.insertBefore(s.apply(this,arguments),n.apply(this,arguments)||null)})}function fG(){var e=this.parentNode;e&&e.removeChild(this)}function mG(){return this.each(fG)}function hG(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gG(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pG(e){return this.select(e?gG:hG)}function xG(e){return arguments.length?this.property("__data__",e):this.node().__data__}function yG(e){return function(t){e.call(this,t,this.__data__)}}function vG(e){return e.trim().split(/^|\s+/).map(function(t){var s="",n=t.indexOf(".");return n>=0&&(s=t.slice(n+1),t=t.slice(0,n)),{type:t,name:s}})}function bG(e){return function(){var t=this.__on;if(t){for(var s=0,n=-1,a=t.length,i;s<a;++s)i=t[s],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function wG(e,t,s){return function(){var n=this.__on,a,i=yG(t);if(n){for(var o=0,l=n.length;o<l;++o)if((a=n[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=s),a.value=t;return}}this.addEventListener(e.type,i,s),a={type:e.type,name:e.name,value:t,listener:i,options:s},n?n.push(a):this.__on=[a]}}function NG(e,t,s){var n=vG(e+""),a,i=n.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(a=0,d=l[c];a<i;++a)if((o=n[a]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?wG:bG,a=0;a<i;++a)this.each(l(n[a],t,s));return this}function OE(e,t,s){var n=ME(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,s):(a=n.document.createEvent("Event"),s?(a.initEvent(t,s.bubbles,s.cancelable),a.detail=s.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function jG(e,t){return function(){return OE(this,e,t)}}function kG(e,t){return function(){return OE(this,e,t.apply(this,arguments))}}function SG(e,t){return this.each((typeof t=="function"?kG:jG)(e,t))}function*_G(){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var n=e[t],a=0,i=n.length,o;a<i;++a)(o=n[a])&&(yield o)}var BE=[null];function Fs(e,t){this._groups=e,this._parents=t}function zu(){return new Fs([[document.documentElement]],BE)}function CG(){return this}Fs.prototype=zu.prototype={constructor:Fs,select:J7,selectAll:nU,selectChild:oU,selectChildren:dU,filter:fU,data:yU,enter:mU,exit:bU,join:wU,merge:NU,selection:CG,order:jU,sort:kU,call:_U,nodes:CU,node:EU,size:AU,empty:RU,each:TU,attr:BU,style:HU,property:qU,classed:YU,text:eG,html:aG,raise:iG,lower:lG,append:cG,insert:dG,remove:mG,clone:pG,datum:xG,on:NG,dispatch:SG,[Symbol.iterator]:_G};function hn(e){return typeof e=="string"?new Fs([[document.querySelector(e)]],[document.documentElement]):new Fs([[e]],BE)}function EG(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Pn(e,t){if(e=EG(e),t===void 0&&(t=e.currentTarget),t){var s=t.ownerSVGElement||t;if(s.createSVGPoint){var n=s.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const AG={passive:!1},Zc={capture:!0,passive:!1};function gg(e){e.stopImmediatePropagation()}function Bo(e){e.preventDefault(),e.stopImmediatePropagation()}function IE(e){var t=e.document.documentElement,s=hn(e).on("dragstart.drag",Bo,Zc);"onselectstart"in t?s.on("selectstart.drag",Bo,Zc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $E(e,t){var s=e.document.documentElement,n=hn(e).on("dragstart.drag",null);t&&(n.on("click.drag",Bo,Zc),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in s?n.on("selectstart.drag",null):(s.style.MozUserSelect=s.__noselect,delete s.__noselect)}const yd=e=>()=>e;function Gp(e,{sourceEvent:t,subject:s,target:n,identifier:a,active:i,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:s,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Gp.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function RG(e){return!e.ctrlKey&&!e.button}function TG(){return this.parentNode}function MG(e,t){return t??{x:e.x,y:e.y}}function DG(){return navigator.maxTouchPoints||"ontouchstart"in this}function PG(){var e=RG,t=TG,s=MG,n=DG,a={},i=mh("start","drag","end"),o=0,l,c,u,d,f=0;function m(N){N.on("mousedown.drag",g).filter(n).on("touchstart.drag",v).on("touchmove.drag",p,AG).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(N,j){if(!(d||!e.call(this,N,j))){var _=w(this,t.call(this,N,j),N,j,"mouse");_&&(hn(N.view).on("mousemove.drag",b,Zc).on("mouseup.drag",y,Zc),IE(N.view),gg(N),u=!1,l=N.clientX,c=N.clientY,_("start",N))}}function b(N){if(Bo(N),!u){var j=N.clientX-l,_=N.clientY-c;u=j*j+_*_>f}a.mouse("drag",N)}function y(N){hn(N.view).on("mousemove.drag mouseup.drag",null),$E(N.view,u),Bo(N),a.mouse("end",N)}function v(N,j){if(e.call(this,N,j)){var _=N.changedTouches,k=t.call(this,N,j),A=_.length,S,C;for(S=0;S<A;++S)(C=w(this,k,N,j,_[S].identifier,_[S]))&&(gg(N),C("start",N,_[S]))}}function p(N){var j=N.changedTouches,_=j.length,k,A;for(k=0;k<_;++k)(A=a[j[k].identifier])&&(Bo(N),A("drag",N,j[k]))}function x(N){var j=N.changedTouches,_=j.length,k,A;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),k=0;k<_;++k)(A=a[j[k].identifier])&&(gg(N),A("end",N,j[k]))}function w(N,j,_,k,A,S){var C=i.copy(),M=Pn(S||_,j),E,R,T;if((T=s.call(N,new Gp("beforestart",{sourceEvent:_,target:m,identifier:A,active:o,x:M[0],y:M[1],dx:0,dy:0,dispatch:C}),k))!=null)return E=T.x-M[0]||0,R=T.y-M[1]||0,function O(P,B,L){var D=M,I;switch(P){case"start":a[A]=O,I=o++;break;case"end":delete a[A],--o;case"drag":M=Pn(L||B,j),I=o;break}C.call(P,N,new Gp(P,{sourceEvent:B,subject:T,target:m,identifier:A,active:I,x:M[0]+E,y:M[1]+R,dx:M[0]-D[0],dy:M[1]-D[1],dispatch:C}),k)}}return m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:yd(!!N),m):e},m.container=function(N){return arguments.length?(t=typeof N=="function"?N:yd(N),m):t},m.subject=function(N){return arguments.length?(s=typeof N=="function"?N:yd(N),m):s},m.touchable=function(N){return arguments.length?(n=typeof N=="function"?N:yd(!!N),m):n},m.on=function(){var N=i.on.apply(i,arguments);return N===i?m:N},m.clickDistance=function(N){return arguments.length?(f=(N=+N)*N,m):Math.sqrt(f)},m}function Ty(e,t,s){e.prototype=t.prototype=s,s.constructor=e}function FE(e,t){var s=Object.create(e.prototype);for(var n in t)s[n]=t[n];return s}function Ou(){}var Wc=.7,Ff=1/Wc,Io="\\s*([+-]?\\d+)\\s*",Yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",LG=/^#([0-9a-f]{3,8})$/,zG=new RegExp(`^rgb\\(${Io},${Io},${Io}\\)$`),OG=new RegExp(`^rgb\\(${Un},${Un},${Un}\\)$`),BG=new RegExp(`^rgba\\(${Io},${Io},${Io},${Yc}\\)$`),IG=new RegExp(`^rgba\\(${Un},${Un},${Un},${Yc}\\)$`),$G=new RegExp(`^hsl\\(${Yc},${Un},${Un}\\)$`),FG=new RegExp(`^hsla\\(${Yc},${Un},${Un},${Yc}\\)$`),Lw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ty(Ou,Xc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zw,formatHex:zw,formatHex8:HG,formatHsl:UG,formatRgb:Ow,toString:Ow});function zw(){return this.rgb().formatHex()}function HG(){return this.rgb().formatHex8()}function UG(){return HE(this).formatHsl()}function Ow(){return this.rgb().formatRgb()}function Xc(e){var t,s;return e=(e+"").trim().toLowerCase(),(t=LG.exec(e))?(s=t[1].length,t=parseInt(t[1],16),s===6?Bw(t):s===3?new ws(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):s===8?vd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):s===4?vd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zG.exec(e))?new ws(t[1],t[2],t[3],1):(t=OG.exec(e))?new ws(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=BG.exec(e))?vd(t[1],t[2],t[3],t[4]):(t=IG.exec(e))?vd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$G.exec(e))?Fw(t[1],t[2]/100,t[3]/100,1):(t=FG.exec(e))?Fw(t[1],t[2]/100,t[3]/100,t[4]):Lw.hasOwnProperty(e)?Bw(Lw[e]):e==="transparent"?new ws(NaN,NaN,NaN,0):null}function Bw(e){return new ws(e>>16&255,e>>8&255,e&255,1)}function vd(e,t,s,n){return n<=0&&(e=t=s=NaN),new ws(e,t,s,n)}function GG(e){return e instanceof Ou||(e=Xc(e)),e?(e=e.rgb(),new ws(e.r,e.g,e.b,e.opacity)):new ws}function Vp(e,t,s,n){return arguments.length===1?GG(e):new ws(e,t,s,n??1)}function ws(e,t,s,n){this.r=+e,this.g=+t,this.b=+s,this.opacity=+n}Ty(ws,Vp,FE(Ou,{brighter(e){return e=e==null?Ff:Math.pow(Ff,e),new ws(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Wc:Math.pow(Wc,e),new ws(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ws(pi(this.r),pi(this.g),pi(this.b),Hf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Iw,formatHex:Iw,formatHex8:VG,formatRgb:$w,toString:$w}));function Iw(){return`#${mi(this.r)}${mi(this.g)}${mi(this.b)}`}function VG(){return`#${mi(this.r)}${mi(this.g)}${mi(this.b)}${mi((isNaN(this.opacity)?1:this.opacity)*255)}`}function $w(){const e=Hf(this.opacity);return`${e===1?"rgb(":"rgba("}${pi(this.r)}, ${pi(this.g)}, ${pi(this.b)}${e===1?")":`, ${e})`}`}function Hf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mi(e){return e=pi(e),(e<16?"0":"")+e.toString(16)}function Fw(e,t,s,n){return n<=0?e=t=s=NaN:s<=0||s>=1?e=t=NaN:t<=0&&(e=NaN),new gn(e,t,s,n)}function HE(e){if(e instanceof gn)return new gn(e.h,e.s,e.l,e.opacity);if(e instanceof Ou||(e=Xc(e)),!e)return new gn;if(e instanceof gn)return e;e=e.rgb();var t=e.r/255,s=e.g/255,n=e.b/255,a=Math.min(t,s,n),i=Math.max(t,s,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(s-n)/l+(s<n)*6:s===i?o=(n-t)/l+2:o=(t-s)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new gn(o,l,c,e.opacity)}function qG(e,t,s,n){return arguments.length===1?HE(e):new gn(e,t,s,n??1)}function gn(e,t,s,n){this.h=+e,this.s=+t,this.l=+s,this.opacity=+n}Ty(gn,qG,FE(Ou,{brighter(e){return e=e==null?Ff:Math.pow(Ff,e),new gn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Wc:Math.pow(Wc,e),new gn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*t,a=2*s-n;return new ws(pg(e>=240?e-240:e+120,a,n),pg(e,a,n),pg(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new gn(Hw(this.h),bd(this.s),bd(this.l),Hf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hf(this.opacity);return`${e===1?"hsl(":"hsla("}${Hw(this.h)}, ${bd(this.s)*100}%, ${bd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hw(e){return e=(e||0)%360,e<0?e+360:e}function bd(e){return Math.max(0,Math.min(1,e||0))}function pg(e,t,s){return(e<60?t+(s-t)*e/60:e<180?s:e<240?t+(s-t)*(240-e)/60:t)*255}const UE=e=>()=>e;function QG(e,t){return function(s){return e+s*t}}function ZG(e,t,s){return e=Math.pow(e,s),t=Math.pow(t,s)-e,s=1/s,function(n){return Math.pow(e+n*t,s)}}function WG(e){return(e=+e)==1?GE:function(t,s){return s-t?ZG(t,s,e):UE(isNaN(t)?s:t)}}function GE(e,t){var s=t-e;return s?QG(e,s):UE(isNaN(e)?t:e)}const Uw=function e(t){var s=WG(t);function n(a,i){var o=s((a=Vp(a)).r,(i=Vp(i)).r),l=s(a.g,i.g),c=s(a.b,i.b),u=GE(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function rr(e,t){return e=+e,t=+t,function(s){return e*(1-s)+t*s}}var qp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xg=new RegExp(qp.source,"g");function YG(e){return function(){return e}}function XG(e){return function(t){return e(t)+""}}function KG(e,t){var s=qp.lastIndex=xg.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=qp.exec(e))&&(a=xg.exec(t));)(i=a.index)>s&&(i=t.slice(s,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:rr(n,a)})),s=xg.lastIndex;return s<t.length&&(i=t.slice(s),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?XG(c[0].x):YG(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var Gw=180/Math.PI,Qp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function VE(e,t,s,n,a,i){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*s+t*n)&&(s-=e*c,n-=t*c),(l=Math.sqrt(s*s+n*n))&&(s/=l,n/=l,c/=l),e*n<t*s&&(e=-e,t=-t,c=-c,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*Gw,skewX:Math.atan(c)*Gw,scaleX:o,scaleY:l}}var wd;function JG(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Qp:VE(t.a,t.b,t.c,t.d,t.e,t.f)}function eV(e){return e==null||(wd||(wd=document.createElementNS("http://www.w3.org/2000/svg","g")),wd.setAttribute("transform",e),!(e=wd.transform.baseVal.consolidate()))?Qp:(e=e.matrix,VE(e.a,e.b,e.c,e.d,e.e,e.f))}function qE(e,t,s,n){function a(u){return u.length?u.pop()+" ":""}function i(u,d,f,m,g,b){if(u!==f||d!==m){var y=g.push("translate(",null,t,null,s);b.push({i:y-4,x:rr(u,f)},{i:y-2,x:rr(d,m)})}else(f||m)&&g.push("translate("+f+t+m+s)}function o(u,d,f,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:f.push(a(f)+"rotate(",null,n)-2,x:rr(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function l(u,d,f,m){u!==d?m.push({i:f.push(a(f)+"skewX(",null,n)-2,x:rr(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,m,g,b){if(u!==f||d!==m){var y=g.push(a(g)+"scale(",null,",",null,")");b.push({i:y-4,x:rr(u,f)},{i:y-2,x:rr(d,m)})}else(f!==1||m!==1)&&g.push(a(g)+"scale("+f+","+m+")")}return function(u,d){var f=[],m=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,f,m),o(u.rotate,d.rotate,f,m),l(u.skewX,d.skewX,f,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,m),u=d=null,function(g){for(var b=-1,y=m.length,v;++b<y;)f[(v=m[b]).i]=v.x(g);return f.join("")}}}var tV=qE(JG,"px, ","px)","deg)"),sV=qE(eV,", ",")",")"),nV=1e-12;function Vw(e){return((e=Math.exp(e))+1/e)/2}function aV(e){return((e=Math.exp(e))-1/e)/2}function rV(e){return((e=Math.exp(2*e))-1)/(e+1)}const iV=function e(t,s,n){function a(i,o){var l=i[0],c=i[1],u=i[2],d=o[0],f=o[1],m=o[2],g=d-l,b=f-c,y=g*g+b*b,v,p;if(y<nV)p=Math.log(m/u)/t,v=function(k){return[l+k*g,c+k*b,u*Math.exp(t*k*p)]};else{var x=Math.sqrt(y),w=(m*m-u*u+n*y)/(2*u*s*x),N=(m*m-u*u-n*y)/(2*m*s*x),j=Math.log(Math.sqrt(w*w+1)-w),_=Math.log(Math.sqrt(N*N+1)-N);p=(_-j)/t,v=function(k){var A=k*p,S=Vw(j),C=u/(s*x)*(S*rV(t*A+j)-aV(j));return[l+C*g,c+C*b,u*S/Vw(t*A+j)]}}return v.duration=p*1e3*t/Math.SQRT2,v}return a.rho=function(i){var o=Math.max(.001,+i),l=o*o,c=l*l;return e(o,l,c)},a}(Math.SQRT2,2,4);var fl=0,hc=0,Kl=0,QE=1e3,Uf,gc,Gf=0,Ri=0,gh=0,Kc=typeof performance=="object"&&performance.now?performance:Date,ZE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function My(){return Ri||(ZE(oV),Ri=Kc.now()+gh)}function oV(){Ri=0}function Vf(){this._call=this._time=this._next=null}Vf.prototype=WE.prototype={constructor:Vf,restart:function(e,t,s){if(typeof e!="function")throw new TypeError("callback is not a function");s=(s==null?My():+s)+(t==null?0:+t),!this._next&&gc!==this&&(gc?gc._next=this:Uf=this,gc=this),this._call=e,this._time=s,Zp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zp())}};function WE(e,t,s){var n=new Vf;return n.restart(e,t,s),n}function lV(){My(),++fl;for(var e=Uf,t;e;)(t=Ri-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fl}function qw(){Ri=(Gf=Kc.now())+gh,fl=hc=0;try{lV()}finally{fl=0,uV(),Ri=0}}function cV(){var e=Kc.now(),t=e-Gf;t>QE&&(gh-=t,Gf=e)}function uV(){for(var e,t=Uf,s,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(s=t._next,t._next=null,t=e?e._next=s:Uf=s);gc=e,Zp(n)}function Zp(e){if(!fl){hc&&(hc=clearTimeout(hc));var t=e-Ri;t>24?(e<1/0&&(hc=setTimeout(qw,e-Kc.now()-gh)),Kl&&(Kl=clearInterval(Kl))):(Kl||(Gf=Kc.now(),Kl=setInterval(cV,QE)),fl=1,ZE(qw))}}function Qw(e,t,s){var n=new Vf;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,s),n}var dV=mh("start","end","cancel","interrupt"),fV=[],YE=0,Zw=1,Wp=2,Kd=3,Ww=4,Yp=5,Jd=6;function ph(e,t,s,n,a,i){var o=e.__transition;if(!o)e.__transition={};else if(s in o)return;mV(e,s,{name:t,index:n,group:a,on:dV,tween:fV,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:YE})}function Dy(e,t){var s=_n(e,t);if(s.state>YE)throw new Error("too late; already scheduled");return s}function na(e,t){var s=_n(e,t);if(s.state>Kd)throw new Error("too late; already running");return s}function _n(e,t){var s=e.__transition;if(!s||!(s=s[t]))throw new Error("transition not found");return s}function mV(e,t,s){var n=e.__transition,a;n[t]=s,s.timer=WE(i,0,s.time);function i(u){s.state=Zw,s.timer.restart(o,s.delay,s.time),s.delay<=u&&o(u-s.delay)}function o(u){var d,f,m,g;if(s.state!==Zw)return c();for(d in n)if(g=n[d],g.name===s.name){if(g.state===Kd)return Qw(o);g.state===Ww?(g.state=Jd,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete n[d]):+d<t&&(g.state=Jd,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete n[d])}if(Qw(function(){s.state===Kd&&(s.state=Ww,s.timer.restart(l,s.delay,s.time),l(u))}),s.state=Wp,s.on.call("start",e,e.__data__,s.index,s.group),s.state===Wp){for(s.state=Kd,a=new Array(m=s.tween.length),d=0,f=-1;d<m;++d)(g=s.tween[d].value.call(e,e.__data__,s.index,s.group))&&(a[++f]=g);a.length=f+1}}function l(u){for(var d=u<s.duration?s.ease.call(null,u/s.duration):(s.timer.restart(c),s.state=Yp,1),f=-1,m=a.length;++f<m;)a[f].call(e,d);s.state===Yp&&(s.on.call("end",e,e.__data__,s.index,s.group),c())}function c(){s.state=Jd,s.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function ef(e,t){var s=e.__transition,n,a,i=!0,o;if(s){t=t==null?null:t+"";for(o in s){if((n=s[o]).name!==t){i=!1;continue}a=n.state>Wp&&n.state<Yp,n.state=Jd,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete s[o]}i&&delete e.__transition}}function hV(e){return this.each(function(){ef(this,e)})}function gV(e,t){var s,n;return function(){var a=na(this,e),i=a.tween;if(i!==s){n=s=i;for(var o=0,l=n.length;o<l;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}a.tween=n}}function pV(e,t,s){var n,a;if(typeof s!="function")throw new Error;return function(){var i=na(this,e),o=i.tween;if(o!==n){a=(n=o).slice();for(var l={name:t,value:s},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=l;break}c===u&&a.push(l)}i.tween=a}}function xV(e,t){var s=this._id;if(e+="",arguments.length<2){for(var n=_n(this.node(),s).tween,a=0,i=n.length,o;a<i;++a)if((o=n[a]).name===e)return o.value;return null}return this.each((t==null?gV:pV)(s,e,t))}function Py(e,t,s){var n=e._id;return e.each(function(){var a=na(this,n);(a.value||(a.value={}))[t]=s.apply(this,arguments)}),function(a){return _n(a,n).value[t]}}function XE(e,t){var s;return(typeof t=="number"?rr:t instanceof Xc?Uw:(s=Xc(t))?(t=s,Uw):KG)(e,t)}function yV(e){return function(){this.removeAttribute(e)}}function vV(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bV(e,t,s){var n,a=s+"",i;return function(){var o=this.getAttribute(e);return o===a?null:o===n?i:i=t(n=o,s)}}function wV(e,t,s){var n,a=s+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?i:i=t(n=o,s)}}function NV(e,t,s){var n,a,i;return function(){var o,l=s(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===n&&c===a?i:(a=c,i=t(n=o,l)))}}function jV(e,t,s){var n,a,i;return function(){var o,l=s(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===n&&c===a?i:(a=c,i=t(n=o,l)))}}function kV(e,t){var s=hh(e),n=s==="transform"?sV:XE;return this.attrTween(e,typeof t=="function"?(s.local?jV:NV)(s,n,Py(this,"attr."+e,t)):t==null?(s.local?vV:yV)(s):(s.local?wV:bV)(s,n,t))}function SV(e,t){return function(s){this.setAttribute(e,t.call(this,s))}}function _V(e,t){return function(s){this.setAttributeNS(e.space,e.local,t.call(this,s))}}function CV(e,t){var s,n;function a(){var i=t.apply(this,arguments);return i!==n&&(s=(n=i)&&_V(e,i)),s}return a._value=t,a}function EV(e,t){var s,n;function a(){var i=t.apply(this,arguments);return i!==n&&(s=(n=i)&&SV(e,i)),s}return a._value=t,a}function AV(e,t){var s="attr."+e;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;var n=hh(e);return this.tween(s,(n.local?CV:EV)(n,t))}function RV(e,t){return function(){Dy(this,e).delay=+t.apply(this,arguments)}}function TV(e,t){return t=+t,function(){Dy(this,e).delay=t}}function MV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?RV:TV)(t,e)):_n(this.node(),t).delay}function DV(e,t){return function(){na(this,e).duration=+t.apply(this,arguments)}}function PV(e,t){return t=+t,function(){na(this,e).duration=t}}function LV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?DV:PV)(t,e)):_n(this.node(),t).duration}function zV(e,t){if(typeof t!="function")throw new Error;return function(){na(this,e).ease=t}}function OV(e){var t=this._id;return arguments.length?this.each(zV(t,e)):_n(this.node(),t).ease}function BV(e,t){return function(){var s=t.apply(this,arguments);if(typeof s!="function")throw new Error;na(this,e).ease=s}}function IV(e){if(typeof e!="function")throw new Error;return this.each(BV(this._id,e))}function $V(e){typeof e!="function"&&(e=AE(e));for(var t=this._groups,s=t.length,n=new Array(s),a=0;a<s;++a)for(var i=t[a],o=i.length,l=n[a]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new Ba(n,this._parents,this._name,this._id)}function FV(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,s=e._groups,n=t.length,a=s.length,i=Math.min(n,a),o=new Array(n),l=0;l<i;++l)for(var c=t[l],u=s[l],d=c.length,f=o[l]=new Array(d),m,g=0;g<d;++g)(m=c[g]||u[g])&&(f[g]=m);for(;l<n;++l)o[l]=t[l];return new Ba(o,this._parents,this._name,this._id)}function HV(e){return(e+"").trim().split(/^|\s+/).every(function(t){var s=t.indexOf(".");return s>=0&&(t=t.slice(0,s)),!t||t==="start"})}function UV(e,t,s){var n,a,i=HV(t)?Dy:na;return function(){var o=i(this,e),l=o.on;l!==n&&(a=(n=l).copy()).on(t,s),o.on=a}}function GV(e,t){var s=this._id;return arguments.length<2?_n(this.node(),s).on.on(e):this.each(UV(s,e,t))}function VV(e){return function(){var t=this.parentNode;for(var s in this.__transition)if(+s!==e)return;t&&t.removeChild(this)}}function qV(){return this.on("end.remove",VV(this._id))}function QV(e){var t=this._name,s=this._id;typeof e!="function"&&(e=Ay(e));for(var n=this._groups,a=n.length,i=new Array(a),o=0;o<a;++o)for(var l=n[o],c=l.length,u=i[o]=new Array(c),d,f,m=0;m<c;++m)(d=l[m])&&(f=e.call(d,d.__data__,m,l))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f,ph(u[m],t,s,m,u,_n(d,s)));return new Ba(i,this._parents,t,s)}function ZV(e){var t=this._name,s=this._id;typeof e!="function"&&(e=EE(e));for(var n=this._groups,a=n.length,i=[],o=[],l=0;l<a;++l)for(var c=n[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var m=e.call(d,d.__data__,f,c),g,b=_n(d,s),y=0,v=m.length;y<v;++y)(g=m[y])&&ph(g,t,s,y,m,b);i.push(m),o.push(d)}return new Ba(i,o,t,s)}var WV=zu.prototype.constructor;function YV(){return new WV(this._groups,this._parents)}function XV(e,t){var s,n,a;return function(){var i=dl(this,e),o=(this.style.removeProperty(e),dl(this,e));return i===o?null:i===s&&o===n?a:a=t(s=i,n=o)}}function KE(e){return function(){this.style.removeProperty(e)}}function KV(e,t,s){var n,a=s+"",i;return function(){var o=dl(this,e);return o===a?null:o===n?i:i=t(n=o,s)}}function JV(e,t,s){var n,a,i;return function(){var o=dl(this,e),l=s(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),dl(this,e))),o===c?null:o===n&&c===a?i:(a=c,i=t(n=o,l))}}function eq(e,t){var s,n,a,i="style."+t,o="end."+i,l;return function(){var c=na(this,e),u=c.on,d=c.value[i]==null?l||(l=KE(t)):void 0;(u!==s||a!==d)&&(n=(s=u).copy()).on(o,a=d),c.on=n}}function tq(e,t,s){var n=(e+="")=="transform"?tV:XE;return t==null?this.styleTween(e,XV(e,n)).on("end.style."+e,KE(e)):typeof t=="function"?this.styleTween(e,JV(e,n,Py(this,"style."+e,t))).each(eq(this._id,e)):this.styleTween(e,KV(e,n,t),s).on("end.style."+e,null)}function sq(e,t,s){return function(n){this.style.setProperty(e,t.call(this,n),s)}}function nq(e,t,s){var n,a;function i(){var o=t.apply(this,arguments);return o!==a&&(n=(a=o)&&sq(e,o,s)),n}return i._value=t,i}function aq(e,t,s){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,nq(e,t,s??""))}function rq(e){return function(){this.textContent=e}}function iq(e){return function(){var t=e(this);this.textContent=t??""}}function oq(e){return this.tween("text",typeof e=="function"?iq(Py(this,"text",e)):rq(e==null?"":e+""))}function lq(e){return function(t){this.textContent=e.call(this,t)}}function cq(e){var t,s;function n(){var a=e.apply(this,arguments);return a!==s&&(t=(s=a)&&lq(a)),t}return n._value=e,n}function uq(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,cq(e))}function dq(){for(var e=this._name,t=this._id,s=JE(),n=this._groups,a=n.length,i=0;i<a;++i)for(var o=n[i],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=_n(c,t);ph(c,e,s,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ba(n,this._parents,e,s)}function fq(){var e,t,s=this,n=s._id,a=s.size();return new Promise(function(i,o){var l={value:o},c={value:function(){--a===0&&i()}};s.each(function(){var u=na(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),a===0&&i()})}var mq=0;function Ba(e,t,s,n){this._groups=e,this._parents=t,this._name=s,this._id=n}function JE(){return++mq}var ma=zu.prototype;Ba.prototype={constructor:Ba,select:QV,selectAll:ZV,selectChild:ma.selectChild,selectChildren:ma.selectChildren,filter:$V,merge:FV,selection:YV,transition:dq,call:ma.call,nodes:ma.nodes,node:ma.node,size:ma.size,empty:ma.empty,each:ma.each,on:GV,attr:kV,attrTween:AV,style:tq,styleTween:aq,text:oq,textTween:uq,remove:qV,tween:xV,delay:MV,duration:LV,ease:OV,easeVarying:IV,end:fq,[Symbol.iterator]:ma[Symbol.iterator]};function hq(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var gq={time:null,delay:0,duration:250,ease:hq};function pq(e,t){for(var s;!(s=e.__transition)||!(s=s[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return s}function xq(e){var t,s;e instanceof Ba?(t=e._id,e=e._name):(t=JE(),(s=gq).time=My(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,i=0;i<a;++i)for(var o=n[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&ph(c,e,t,u,o,s||pq(c,t));return new Ba(n,this._parents,e,t)}zu.prototype.interrupt=hV;zu.prototype.transition=xq;const Nd=e=>()=>e;function yq(e,{sourceEvent:t,target:s,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function wa(e,t,s){this.k=e,this.x=t,this.y=s}wa.prototype={constructor:wa,scale:function(e){return e===1?this:new wa(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wa(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Nr=new wa(1,0,0);wa.prototype;function yg(e){e.stopImmediatePropagation()}function Jl(e){e.preventDefault(),e.stopImmediatePropagation()}function vq(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function bq(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Yw(){return this.__zoom||Nr}function wq(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Nq(){return navigator.maxTouchPoints||"ontouchstart"in this}function jq(e,t,s){var n=e.invertX(t[0][0])-s[0][0],a=e.invertX(t[1][0])-s[1][0],i=e.invertY(t[0][1])-s[0][1],o=e.invertY(t[1][1])-s[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function kq(){var e=vq,t=bq,s=jq,n=wq,a=Nq,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=iV,u=mh("start","zoom","end"),d,f,m,g=500,b=150,y=0,v=10;function p(T){T.property("__zoom",Yw).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",C).filter(a).on("touchstart.zoom",M).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(T,O,P,B){var L=T.selection?T.selection():T;L.property("__zoom",Yw),T!==L?j(T,O,P,B):L.interrupt().each(function(){_(this,arguments).event(B).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},p.scaleBy=function(T,O,P,B){p.scaleTo(T,function(){var L=this.__zoom.k,D=typeof O=="function"?O.apply(this,arguments):O;return L*D},P,B)},p.scaleTo=function(T,O,P,B){p.transform(T,function(){var L=t.apply(this,arguments),D=this.__zoom,I=P==null?N(L):typeof P=="function"?P.apply(this,arguments):P,F=D.invert(I),U=typeof O=="function"?O.apply(this,arguments):O;return s(w(x(D,U),I,F),L,o)},P,B)},p.translateBy=function(T,O,P,B){p.transform(T,function(){return s(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),o)},null,B)},p.translateTo=function(T,O,P,B,L){p.transform(T,function(){var D=t.apply(this,arguments),I=this.__zoom,F=B==null?N(D):typeof B=="function"?B.apply(this,arguments):B;return s(Nr.translate(F[0],F[1]).scale(I.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof P=="function"?-P.apply(this,arguments):-P),D,o)},B,L)};function x(T,O){return O=Math.max(i[0],Math.min(i[1],O)),O===T.k?T:new wa(O,T.x,T.y)}function w(T,O,P){var B=O[0]-P[0]*T.k,L=O[1]-P[1]*T.k;return B===T.x&&L===T.y?T:new wa(T.k,B,L)}function N(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function j(T,O,P,B){T.on("start.zoom",function(){_(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(B).end()}).tween("zoom",function(){var L=this,D=arguments,I=_(L,D).event(B),F=t.apply(L,D),U=P==null?N(F):typeof P=="function"?P.apply(L,D):P,H=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),Z=L.__zoom,K=typeof O=="function"?O.apply(L,D):O,ue=c(Z.invert(U).concat(H/Z.k),K.invert(U).concat(H/K.k));return function(te){if(te===1)te=K;else{var ye=ue(te),be=H/ye[2];te=new wa(be,U[0]-ye[0]*be,U[1]-ye[1]*be)}I.zoom(null,te)}})}function _(T,O,P){return!P&&T.__zooming||new k(T,O)}function k(T,O){this.that=T,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,O),this.taps=0}k.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,O){return this.mouse&&T!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var O=hn(this.that).datum();u.call(T,this.that,new yq(T,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:u}),O)}};function A(T,...O){if(!e.apply(this,arguments))return;var P=_(this,O).event(T),B=this.__zoom,L=Math.max(i[0],Math.min(i[1],B.k*Math.pow(2,n.apply(this,arguments)))),D=Pn(T);if(P.wheel)(P.mouse[0][0]!==D[0]||P.mouse[0][1]!==D[1])&&(P.mouse[1]=B.invert(P.mouse[0]=D)),clearTimeout(P.wheel);else{if(B.k===L)return;P.mouse=[D,B.invert(D)],ef(this),P.start()}Jl(T),P.wheel=setTimeout(I,b),P.zoom("mouse",s(w(x(B,L),P.mouse[0],P.mouse[1]),P.extent,o));function I(){P.wheel=null,P.end()}}function S(T,...O){if(m||!e.apply(this,arguments))return;var P=T.currentTarget,B=_(this,O,!0).event(T),L=hn(T.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",H,!0),D=Pn(T,P),I=T.clientX,F=T.clientY;IE(T.view),yg(T),B.mouse=[D,this.__zoom.invert(D)],ef(this),B.start();function U(Z){if(Jl(Z),!B.moved){var K=Z.clientX-I,ue=Z.clientY-F;B.moved=K*K+ue*ue>y}B.event(Z).zoom("mouse",s(w(B.that.__zoom,B.mouse[0]=Pn(Z,P),B.mouse[1]),B.extent,o))}function H(Z){L.on("mousemove.zoom mouseup.zoom",null),$E(Z.view,B.moved),Jl(Z),B.event(Z).end()}}function C(T,...O){if(e.apply(this,arguments)){var P=this.__zoom,B=Pn(T.changedTouches?T.changedTouches[0]:T,this),L=P.invert(B),D=P.k*(T.shiftKey?.5:2),I=s(w(x(P,D),B,L),t.apply(this,O),o);Jl(T),l>0?hn(this).transition().duration(l).call(j,I,B,T):hn(this).call(p.transform,I,B,T)}}function M(T,...O){if(e.apply(this,arguments)){var P=T.touches,B=P.length,L=_(this,O,T.changedTouches.length===B).event(T),D,I,F,U;for(yg(T),I=0;I<B;++I)F=P[I],U=Pn(F,this),U=[U,this.__zoom.invert(U),F.identifier],L.touch0?!L.touch1&&L.touch0[2]!==U[2]&&(L.touch1=U,L.taps=0):(L.touch0=U,D=!0,L.taps=1+!!d);d&&(d=clearTimeout(d)),D&&(L.taps<2&&(f=U[0],d=setTimeout(function(){d=null},g)),ef(this),L.start())}}function E(T,...O){if(this.__zooming){var P=_(this,O).event(T),B=T.changedTouches,L=B.length,D,I,F,U;for(Jl(T),D=0;D<L;++D)I=B[D],F=Pn(I,this),P.touch0&&P.touch0[2]===I.identifier?P.touch0[0]=F:P.touch1&&P.touch1[2]===I.identifier&&(P.touch1[0]=F);if(I=P.that.__zoom,P.touch1){var H=P.touch0[0],Z=P.touch0[1],K=P.touch1[0],ue=P.touch1[1],te=(te=K[0]-H[0])*te+(te=K[1]-H[1])*te,ye=(ye=ue[0]-Z[0])*ye+(ye=ue[1]-Z[1])*ye;I=x(I,Math.sqrt(te/ye)),F=[(H[0]+K[0])/2,(H[1]+K[1])/2],U=[(Z[0]+ue[0])/2,(Z[1]+ue[1])/2]}else if(P.touch0)F=P.touch0[0],U=P.touch0[1];else return;P.zoom("touch",s(w(I,F,U),P.extent,o))}}function R(T,...O){if(this.__zooming){var P=_(this,O).event(T),B=T.changedTouches,L=B.length,D,I;for(yg(T),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),D=0;D<L;++D)I=B[D],P.touch0&&P.touch0[2]===I.identifier?delete P.touch0:P.touch1&&P.touch1[2]===I.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(I=Pn(I,this),Math.hypot(f[0]-I[0],f[1]-I[1])<v)){var F=hn(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return p.wheelDelta=function(T){return arguments.length?(n=typeof T=="function"?T:Nd(+T),p):n},p.filter=function(T){return arguments.length?(e=typeof T=="function"?T:Nd(!!T),p):e},p.touchable=function(T){return arguments.length?(a=typeof T=="function"?T:Nd(!!T),p):a},p.extent=function(T){return arguments.length?(t=typeof T=="function"?T:Nd([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),p):t},p.scaleExtent=function(T){return arguments.length?(i[0]=+T[0],i[1]=+T[1],p):[i[0],i[1]]},p.translateExtent=function(T){return arguments.length?(o[0][0]=+T[0][0],o[1][0]=+T[1][0],o[0][1]=+T[0][1],o[1][1]=+T[1][1],p):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},p.constrain=function(T){return arguments.length?(s=T,p):s},p.duration=function(T){return arguments.length?(l=+T,p):l},p.interpolate=function(T){return arguments.length?(c=T,p):c},p.on=function(){var T=u.on.apply(u,arguments);return T===u?p:T},p.clickDistance=function(T){return arguments.length?(y=(T=+T)*T,p):Math.sqrt(y)},p.tapDistance=function(T){return arguments.length?(v=+T,p):v},p}const xh=h.createContext(null),Sq=xh.Provider,Ia={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},eA=Ia.error001();function mt(e,t){const s=h.useContext(xh);if(s===null)throw new Error(eA);return _E(s,e,t)}const qt=()=>{const e=h.useContext(xh);if(e===null)throw new Error(eA);return h.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},_q=e=>e.userSelectionActive?"none":"all";function tA({position:e,children:t,className:s,style:n,...a}){const i=mt(_q),o=`${e}`.split("-");return z.createElement("div",{className:hs(["react-flow__panel",s,...o]),style:{...n,pointerEvents:i},...a},t)}function Cq({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:z.createElement(tA,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},z.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Eq=({x:e,y:t,label:s,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=h.useRef(null),[m,g]=h.useState({x:0,y:0,width:0,height:0}),b=hs(["react-flow__edge-textwrapper",u]);return h.useEffect(()=>{if(f.current){const y=f.current.getBBox();g({x:y.x,y:y.y,width:y.width,height:y.height})}},[s]),typeof s>"u"||!s?null:z.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...d},a&&z.createElement("rect",{width:m.width+2*o[0],x:-o[0],y:-o[1],height:m.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),z.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:f,style:n},s),c)};var Aq=h.memo(Eq);const Ly=e=>({width:e.offsetWidth,height:e.offsetHeight}),ml=(e,t=0,s=1)=>Math.min(Math.max(e,t),s),zy=(e={x:0,y:0},t)=>({x:ml(e.x,t[0][0],t[1][0]),y:ml(e.y,t[0][1],t[1][1])}),Xw=(e,t,s)=>e<t?ml(Math.abs(e-t),1,50)/50:e>s?-ml(Math.abs(e-s),1,50)/50:0,sA=(e,t)=>{const s=Xw(e.x,35,t.width-35)*20,n=Xw(e.y,35,t.height-35)*20;return[s,n]},nA=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Rq=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Oy=({x:e,y:t,width:s,height:n})=>({x:e,y:t,x2:e+s,y2:t+n}),Tq=({x:e,y:t,x2:s,y2:n})=>({x:e,y:t,width:s-e,height:n-t}),Kw=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Xp=(e,t)=>{const s=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(s*n)},Mq=e=>Js(e.width)&&Js(e.height)&&Js(e.x)&&Js(e.y),Js=e=>!isNaN(e)&&isFinite(e),yt=Symbol.for("internals"),aA=["Enter"," ","Escape"],Dq=(e,t)=>{},Pq=e=>"nativeEvent"in e;function Kp(e){var a,i;const t=Pq(e)?e.nativeEvent:e,s=((i=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(s==null?void 0:s.nodeName)||(s==null?void 0:s.hasAttribute("contenteditable"))||!!(s!=null&&s.closest(".nokey"))}const rA=e=>"clientX"in e,jr=(e,t)=>{var i,o;const s=rA(e),n=s?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,a=s?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},qf=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Bu=({id:e,path:t,labelX:s,labelY:n,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:g=20})=>z.createElement(z.Fragment,null,z.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),g&&z.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),a&&Js(s)&&Js(n)?z.createElement(Aq,{x:s,y:n,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);Bu.displayName="BaseEdge";function ec(e,t,s){return s===void 0?s:n=>{const a=t().edges.find(i=>i.id===e);a&&s(n,{...a})}}function iA({sourceX:e,sourceY:t,targetX:s,targetY:n}){const a=Math.abs(s-e)/2,i=s<e?s+a:s-a,o=Math.abs(n-t)/2,l=n<t?n+o:n-o;return[i,l,a,o]}function oA({sourceX:e,sourceY:t,targetX:s,targetY:n,sourceControlX:a,sourceControlY:i,targetControlX:o,targetControlY:l}){const c=e*.125+a*.375+o*.375+s*.125,u=t*.125+i*.375+l*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Ti;(function(e){e.Strict="strict",e.Loose="loose"})(Ti||(Ti={}));var hi;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(hi||(hi={}));var Jc;(function(e){e.Partial="partial",e.Full="full"})(Jc||(Jc={}));var cr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(cr||(cr={}));var Qf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Qf||(Qf={}));var ce;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ce||(ce={}));function Jw({pos:e,x1:t,y1:s,x2:n,y2:a}){return e===ce.Left||e===ce.Right?[.5*(t+n),s]:[t,.5*(s+a)]}function lA({sourceX:e,sourceY:t,sourcePosition:s=ce.Bottom,targetX:n,targetY:a,targetPosition:i=ce.Top}){const[o,l]=Jw({pos:s,x1:e,y1:t,x2:n,y2:a}),[c,u]=Jw({pos:i,x1:n,y1:a,x2:e,y2:t}),[d,f,m,g]=oA({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${n},${a}`,d,f,m,g]}const By=h.memo(({sourceX:e,sourceY:t,targetX:s,targetY:n,sourcePosition:a=ce.Bottom,targetPosition:i=ce.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:b,interactionWidth:y})=>{const[v,p,x]=lA({sourceX:e,sourceY:t,sourcePosition:a,targetX:s,targetY:n,targetPosition:i});return z.createElement(Bu,{path:v,labelX:p,labelY:x,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:b,interactionWidth:y})});By.displayName="SimpleBezierEdge";const eN={[ce.Left]:{x:-1,y:0},[ce.Right]:{x:1,y:0},[ce.Top]:{x:0,y:-1},[ce.Bottom]:{x:0,y:1}},Lq=({source:e,sourcePosition:t=ce.Bottom,target:s})=>t===ce.Left||t===ce.Right?e.x<s.x?{x:1,y:0}:{x:-1,y:0}:e.y<s.y?{x:0,y:1}:{x:0,y:-1},tN=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function zq({source:e,sourcePosition:t=ce.Bottom,target:s,targetPosition:n=ce.Top,center:a,offset:i}){const o=eN[t],l=eN[n],c={x:e.x+o.x*i,y:e.y+o.y*i},u={x:s.x+l.x*i,y:s.y+l.y*i},d=Lq({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",m=d[f];let g=[],b,y;const v={x:0,y:0},p={x:0,y:0},[x,w,N,j]=iA({sourceX:e.x,sourceY:e.y,targetX:s.x,targetY:s.y});if(o[f]*l[f]===-1){b=a.x??x,y=a.y??w;const k=[{x:b,y:c.y},{x:b,y:u.y}],A=[{x:c.x,y},{x:u.x,y}];o[f]===m?g=f==="x"?k:A:g=f==="x"?A:k}else{const k=[{x:c.x,y:u.y}],A=[{x:u.x,y:c.y}];if(f==="x"?g=o.x===m?A:k:g=o.y===m?k:A,t===n){const R=Math.abs(e[f]-s[f]);if(R<=i){const T=Math.min(i-1,i-R);o[f]===m?v[f]=(c[f]>e[f]?-1:1)*T:p[f]=(u[f]>s[f]?-1:1)*T}}if(t!==n){const R=f==="x"?"y":"x",T=o[f]===l[R],O=c[R]>u[R],P=c[R]<u[R];(o[f]===1&&(!T&&O||T&&P)||o[f]!==1&&(!T&&P||T&&O))&&(g=f==="x"?k:A)}const S={x:c.x+v.x,y:c.y+v.y},C={x:u.x+p.x,y:u.y+p.y},M=Math.max(Math.abs(S.x-g[0].x),Math.abs(C.x-g[0].x)),E=Math.max(Math.abs(S.y-g[0].y),Math.abs(C.y-g[0].y));M>=E?(b=(S.x+C.x)/2,y=g[0].y):(b=g[0].x,y=(S.y+C.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...g,{x:u.x+p.x,y:u.y+p.y},s],b,y,N,j]}function Oq(e,t,s,n){const a=Math.min(tN(e,t)/2,tN(t,s)/2,n),{x:i,y:o}=t;if(e.x===i&&i===s.x||e.y===o&&o===s.y)return`L${i} ${o}`;if(e.y===o){const u=e.x<s.x?-1:1,d=e.y<s.y?1:-1;return`L ${i+a*u},${o}Q ${i},${o} ${i},${o+a*d}`}const l=e.x<s.x?1:-1,c=e.y<s.y?-1:1;return`L ${i},${o+a*c}Q ${i},${o} ${i+a*l},${o}`}function Jp({sourceX:e,sourceY:t,sourcePosition:s=ce.Bottom,targetX:n,targetY:a,targetPosition:i=ce.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,m,g,b]=zq({source:{x:e,y:t},sourcePosition:s,target:{x:n,y:a},targetPosition:i,center:{x:l,y:c},offset:u});return[d.reduce((v,p,x)=>{let w="";return x>0&&x<d.length-1?w=Oq(d[x-1],p,d[x+1],o):w=`${x===0?"M":"L"}${p.x} ${p.y}`,v+=w,v},""),f,m,g,b]}const yh=h.memo(({sourceX:e,sourceY:t,targetX:s,targetY:n,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=ce.Bottom,targetPosition:m=ce.Top,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:v})=>{const[p,x,w]=Jp({sourceX:e,sourceY:t,sourcePosition:f,targetX:s,targetY:n,targetPosition:m,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return z.createElement(Bu,{path:p,labelX:x,labelY:w,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:g,markerStart:b,interactionWidth:v})});yh.displayName="SmoothStepEdge";const Iy=h.memo(e=>{var t;return z.createElement(yh,{...e,pathOptions:h.useMemo(()=>{var s;return{borderRadius:0,offset:(s=e.pathOptions)==null?void 0:s.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Iy.displayName="StepEdge";function Bq({sourceX:e,sourceY:t,targetX:s,targetY:n}){const[a,i,o,l]=iA({sourceX:e,sourceY:t,targetX:s,targetY:n});return[`M ${e},${t}L ${s},${n}`,a,i,o,l]}const $y=h.memo(({sourceX:e,sourceY:t,targetX:s,targetY:n,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:g})=>{const[b,y,v]=Bq({sourceX:e,sourceY:t,targetX:s,targetY:n});return z.createElement(Bu,{path:b,labelX:y,labelY:v,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:g})});$y.displayName="StraightEdge";function jd(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function sN({pos:e,x1:t,y1:s,x2:n,y2:a,c:i}){switch(e){case ce.Left:return[t-jd(t-n,i),s];case ce.Right:return[t+jd(n-t,i),s];case ce.Top:return[t,s-jd(s-a,i)];case ce.Bottom:return[t,s+jd(a-s,i)]}}function cA({sourceX:e,sourceY:t,sourcePosition:s=ce.Bottom,targetX:n,targetY:a,targetPosition:i=ce.Top,curvature:o=.25}){const[l,c]=sN({pos:s,x1:e,y1:t,x2:n,y2:a,c:o}),[u,d]=sN({pos:i,x1:n,y1:a,x2:e,y2:t,c:o}),[f,m,g,b]=oA({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${n},${a}`,f,m,g,b]}const Zf=h.memo(({sourceX:e,sourceY:t,targetX:s,targetY:n,sourcePosition:a=ce.Bottom,targetPosition:i=ce.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:v})=>{const[p,x,w]=cA({sourceX:e,sourceY:t,sourcePosition:a,targetX:s,targetY:n,targetPosition:i,curvature:y==null?void 0:y.curvature});return z.createElement(Bu,{path:p,labelX:x,labelY:w,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:g,markerStart:b,interactionWidth:v})});Zf.displayName="BezierEdge";const Fy=h.createContext(null),Iq=Fy.Provider;Fy.Consumer;const $q=()=>h.useContext(Fy),Fq=e=>"id"in e&&"source"in e&&"target"in e,Hq=({source:e,sourceHandle:t,target:s,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${s}${n||""}`,ex=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,Uq=(e,t)=>t.some(s=>s.source===e.source&&s.target===e.target&&(s.sourceHandle===e.sourceHandle||!s.sourceHandle&&!e.sourceHandle)&&(s.targetHandle===e.targetHandle||!s.targetHandle&&!e.targetHandle)),Hy=(e,t)=>{if(!e.source||!e.target)return t;let s;return Fq(e)?s={...e}:s={...e,id:Hq(e)},Uq(s,t)?t:t.concat(s)},tx=({x:e,y:t},[s,n,a],i,[o,l])=>{const c={x:(e-s)/a,y:(t-n)/a};return i?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},uA=({x:e,y:t},[s,n,a])=>({x:e*a+s,y:t*a+n}),$o=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const s=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-s,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-s,y:e.positionAbsolute.y-n}:a}},Uy=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const s=e.reduce((n,a)=>{const{x:i,y:o}=$o(a,t).positionAbsolute;return Rq(n,Oy({x:i,y:o,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Tq(s)},dA=(e,t,[s,n,a]=[0,0,1],i=!1,o=!1,l=[0,0])=>{const c={x:(t.x-s)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:m,selectable:g=!0,hidden:b=!1}=d;if(o&&!g||b)return!1;const{positionAbsolute:y}=$o(d,l),v={x:y.x,y:y.y,width:f||0,height:m||0},p=Xp(c,v),x=typeof f>"u"||typeof m>"u"||f===null||m===null,w=i&&p>0,N=(f||0)*(m||0);(x||w||p>=N||d.dragging)&&u.push(d)}),u},fA=(e,t)=>{const s=e.map(n=>n.id);return t.filter(n=>s.includes(n.source)||s.includes(n.target))},mA=(e,t,s,n,a,i=.1)=>{const o=t/(e.width*(1+i)),l=s/(e.height*(1+i)),c=Math.min(o,l),u=ml(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,m=t/2-d*u,g=s/2-f*u;return{x:m,y:g,zoom:u}},si=(e,t=0)=>e.transition().duration(t);function nN(e,t,s,n){return(t[s]||[]).reduce((a,i)=>{var o,l;return`${e.id}-${i.id}-${s}`!==n&&a.push({id:i.id||null,type:s,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),a},[])}function Gq(e,t,s,n,a,i){const{x:o,y:l}=jr(e),u=t.elementsFromPoint(o,l).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const y=Gy(void 0,u),v=u.getAttribute("data-handleid"),p=i({nodeId:b,id:v,type:y});if(p){const x=a.find(w=>w.nodeId===b&&w.type===y&&w.id===v);return{handle:{id:v,type:y,nodeId:b,x:(x==null?void 0:x.x)||s.x,y:(x==null?void 0:x.y)||s.y},validHandleResult:p}}}}let d=[],f=1/0;if(a.forEach(b=>{const y=Math.sqrt((b.x-s.x)**2+(b.y-s.y)**2);if(y<=n){const v=i(b);y<=f&&(y<f?d=[{handle:b,validHandleResult:v}]:y===f&&d.push({handle:b,validHandleResult:v}),f=y)}}),!d.length)return{handle:null,validHandleResult:hA()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:b})=>b.isValid),g=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:y})=>g?b.type==="target":m?y.isValid:!0)||d[0]}const Vq={source:null,target:null,sourceHandle:null,targetHandle:null},hA=()=>({handleDomNode:null,isValid:!1,connection:Vq,endHandle:null});function gA(e,t,s,n,a,i,o){const l=a==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...hA(),handleDomNode:c};if(c){const d=Gy(void 0,c),f=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),g=c.classList.contains("connectable"),b=c.classList.contains("connectableend"),y={source:l?f:s,sourceHandle:l?m:n,target:l?s:f,targetHandle:l?n:m};u.connection=y,g&&b&&(t===Ti.Strict?l&&d==="source"||!l&&d==="target":f!==s||m!==n)&&(u.endHandle={nodeId:f,handleId:m,type:d},u.isValid=i(y))}return u}function qq({nodes:e,nodeId:t,handleId:s,handleType:n}){return e.reduce((a,i)=>{if(i[yt]){const{handleBounds:o}=i[yt];let l=[],c=[];o&&(l=nN(i,o,"source",`${t}-${s}-${n}`),c=nN(i,o,"target",`${t}-${s}-${n}`)),a.push(...l,...c)}return a},[])}function Gy(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function vg(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Qq(e,t){let s=null;return t?s="valid":e&&!t&&(s="invalid"),s}function pA({event:e,handleId:t,nodeId:s,onConnect:n,isTarget:a,getState:i,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=nA(e.target),{connectionMode:f,domNode:m,autoPanOnConnect:g,connectionRadius:b,onConnectStart:y,panBy:v,getNodes:p,cancelConnection:x}=i();let w=0,N;const{x:j,y:_}=jr(e),k=d==null?void 0:d.elementFromPoint(j,_),A=Gy(c,k),S=m==null?void 0:m.getBoundingClientRect();if(!S||!A)return;let C,M=jr(e,S),E=!1,R=null,T=!1,O=null;const P=qq({nodes:p(),nodeId:s,handleId:t,handleType:A}),B=()=>{if(!g)return;const[I,F]=sA(M,S);v({x:I,y:F}),w=requestAnimationFrame(B)};o({connectionPosition:M,connectionStatus:null,connectionNodeId:s,connectionHandleId:t,connectionHandleType:A,connectionStartHandle:{nodeId:s,handleId:t,type:A},connectionEndHandle:null}),y==null||y(e,{nodeId:s,handleId:t,handleType:A});function L(I){const{transform:F}=i();M=jr(I,S);const{handle:U,validHandleResult:H}=Gq(I,d,tx(M,F,!1,[1,1]),b,P,Z=>gA(Z,f,s,t,a?"target":"source",l,d));if(N=U,E||(B(),E=!0),O=H.handleDomNode,R=H.connection,T=H.isValid,o({connectionPosition:N&&T?uA({x:N.x,y:N.y},F):M,connectionStatus:Qq(!!N,T),connectionEndHandle:H.endHandle}),!N&&!T&&!O)return vg(C);R.source!==R.target&&O&&(vg(C),C=O,O.classList.add("connecting","react-flow__handle-connecting"),O.classList.toggle("valid",T),O.classList.toggle("react-flow__handle-valid",T))}function D(I){var F,U;(N||O)&&R&&T&&(n==null||n(R)),(U=(F=i()).onConnectEnd)==null||U.call(F,I),c&&(u==null||u(I)),vg(C),x(),cancelAnimationFrame(w),E=!1,T=!1,R=null,O=null,d.removeEventListener("mousemove",L),d.removeEventListener("mouseup",D),d.removeEventListener("touchmove",L),d.removeEventListener("touchend",D)}d.addEventListener("mousemove",L),d.addEventListener("mouseup",D),d.addEventListener("touchmove",L),d.addEventListener("touchend",D)}const aN=()=>!0,Zq=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Wq=(e,t,s)=>n=>{const{connectionStartHandle:a,connectionEndHandle:i,connectionClickStartHandle:o}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===s||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===s,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===s}},xA=h.forwardRef(({type:e="source",position:t=ce.Top,isValidConnection:s,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:i=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...m},g)=>{var S,C;const b=o||null,y=e==="target",v=qt(),p=$q(),{connectOnClick:x,noPanClassName:w}=mt(Zq,Ns),{connecting:N,clickConnecting:j}=mt(Wq(p,b,e),Ns);p||(C=(S=v.getState()).onError)==null||C.call(S,"010",Ia.error010());const _=M=>{const{defaultEdgeOptions:E,onConnect:R,hasDefaultEdges:T}=v.getState(),O={...E,...M};if(T){const{edges:P,setEdges:B}=v.getState();B(Hy(O,P))}R==null||R(O),l==null||l(O)},k=M=>{if(!p)return;const E=rA(M);a&&(E&&M.button===0||!E)&&pA({event:M,handleId:b,nodeId:p,onConnect:_,isTarget:y,getState:v.getState,setState:v.setState,isValidConnection:s||v.getState().isValidConnection||aN}),E?d==null||d(M):f==null||f(M)},A=M=>{const{onClickConnectStart:E,onClickConnectEnd:R,connectionClickStartHandle:T,connectionMode:O,isValidConnection:P}=v.getState();if(!p||!T&&!a)return;if(!T){E==null||E(M,{nodeId:p,handleId:b,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:p,type:e,handleId:b}});return}const B=nA(M.target),L=s||P||aN,{connection:D,isValid:I}=gA({nodeId:p,id:b,type:e},O,T.nodeId,T.handleId||null,T.type,L,B);I&&_(D),R==null||R(M),v.setState({connectionClickStartHandle:null})};return z.createElement("div",{"data-handleid":b,"data-nodeid":p,"data-handlepos":t,"data-id":`${p}-${b}-${e}`,className:hs(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,u,{source:!y,target:y,connectable:n,connectablestart:a,connectableend:i,connecting:j,connectionindicator:n&&(a&&!N||i&&N)}]),onMouseDown:k,onTouchStart:k,onClick:x?A:void 0,ref:g,...m},c)});xA.displayName="Handle";var hl=h.memo(xA);const yA=({data:e,isConnectable:t,targetPosition:s=ce.Top,sourcePosition:n=ce.Bottom})=>z.createElement(z.Fragment,null,z.createElement(hl,{type:"target",position:s,isConnectable:t}),e==null?void 0:e.label,z.createElement(hl,{type:"source",position:n,isConnectable:t}));yA.displayName="DefaultNode";var sx=h.memo(yA);const vA=({data:e,isConnectable:t,sourcePosition:s=ce.Bottom})=>z.createElement(z.Fragment,null,e==null?void 0:e.label,z.createElement(hl,{type:"source",position:s,isConnectable:t}));vA.displayName="InputNode";var bA=h.memo(vA);const wA=({data:e,isConnectable:t,targetPosition:s=ce.Top})=>z.createElement(z.Fragment,null,z.createElement(hl,{type:"target",position:s,isConnectable:t}),e==null?void 0:e.label);wA.displayName="OutputNode";var NA=h.memo(wA);const Vy=()=>null;Vy.displayName="GroupNode";const Yq=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),kd=e=>e.id;function Xq(e,t){return Ns(e.selectedNodes.map(kd),t.selectedNodes.map(kd))&&Ns(e.selectedEdges.map(kd),t.selectedEdges.map(kd))}const jA=h.memo(({onSelectionChange:e})=>{const t=qt(),{selectedNodes:s,selectedEdges:n}=mt(Yq,Xq);return h.useEffect(()=>{const a={nodes:s,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(i=>i(a))},[s,n,e]),null});jA.displayName="SelectionListener";const Kq=e=>!!e.onSelectionChange;function Jq({onSelectionChange:e}){const t=mt(Kq);return e||t?z.createElement(jA,{onSelectionChange:e}):null}const eQ=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function co(e,t){h.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ae(e,t,s){h.useEffect(()=>{typeof t<"u"&&s({[e]:t})},[t])}const tQ=({nodes:e,edges:t,defaultNodes:s,defaultEdges:n,onConnect:a,onConnectStart:i,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:m,edgesUpdatable:g,elevateNodesOnSelect:b,minZoom:y,maxZoom:v,nodeExtent:p,onNodesChange:x,onEdgesChange:w,elementsSelectable:N,connectionMode:j,snapGrid:_,snapToGrid:k,translateExtent:A,connectOnClick:S,defaultEdgeOptions:C,fitView:M,fitViewOptions:E,onNodesDelete:R,onEdgesDelete:T,onNodeDrag:O,onNodeDragStart:P,onNodeDragStop:B,onSelectionDrag:L,onSelectionDragStart:D,onSelectionDragStop:I,noPanClassName:F,nodeOrigin:U,rfId:H,autoPanOnConnect:Z,autoPanOnNodeDrag:K,onError:ue,connectionRadius:te,isValidConnection:ye,nodeDragThreshold:be})=>{const{setNodes:Ne,setEdges:Xe,setDefaultNodesAndEdges:nt,setMinZoom:V,setMaxZoom:q,setTranslateExtent:X,setNodeExtent:le,reset:se}=mt(eQ,Ns),J=qt();return h.useEffect(()=>{const Se=n==null?void 0:n.map(et=>({...et,...C}));return nt(s,Se),()=>{se()}},[]),Ae("defaultEdgeOptions",C,J.setState),Ae("connectionMode",j,J.setState),Ae("onConnect",a,J.setState),Ae("onConnectStart",i,J.setState),Ae("onConnectEnd",o,J.setState),Ae("onClickConnectStart",l,J.setState),Ae("onClickConnectEnd",c,J.setState),Ae("nodesDraggable",u,J.setState),Ae("nodesConnectable",d,J.setState),Ae("nodesFocusable",f,J.setState),Ae("edgesFocusable",m,J.setState),Ae("edgesUpdatable",g,J.setState),Ae("elementsSelectable",N,J.setState),Ae("elevateNodesOnSelect",b,J.setState),Ae("snapToGrid",k,J.setState),Ae("snapGrid",_,J.setState),Ae("onNodesChange",x,J.setState),Ae("onEdgesChange",w,J.setState),Ae("connectOnClick",S,J.setState),Ae("fitViewOnInit",M,J.setState),Ae("fitViewOnInitOptions",E,J.setState),Ae("onNodesDelete",R,J.setState),Ae("onEdgesDelete",T,J.setState),Ae("onNodeDrag",O,J.setState),Ae("onNodeDragStart",P,J.setState),Ae("onNodeDragStop",B,J.setState),Ae("onSelectionDrag",L,J.setState),Ae("onSelectionDragStart",D,J.setState),Ae("onSelectionDragStop",I,J.setState),Ae("noPanClassName",F,J.setState),Ae("nodeOrigin",U,J.setState),Ae("rfId",H,J.setState),Ae("autoPanOnConnect",Z,J.setState),Ae("autoPanOnNodeDrag",K,J.setState),Ae("onError",ue,J.setState),Ae("connectionRadius",te,J.setState),Ae("isValidConnection",ye,J.setState),Ae("nodeDragThreshold",be,J.setState),co(e,Ne),co(t,Xe),co(y,V),co(v,q),co(A,X),co(p,le),null},rN={display:"none"},sQ={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},kA="react-flow__node-desc",SA="react-flow__edge-desc",nQ="react-flow__aria-live",aQ=e=>e.ariaLiveMessage;function rQ({rfId:e}){const t=mt(aQ);return z.createElement("div",{id:`${nQ}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:sQ},t)}function iQ({rfId:e,disableKeyboardA11y:t}){return z.createElement(z.Fragment,null,z.createElement("div",{id:`${kA}-${e}`,style:rN},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),z.createElement("div",{id:`${SA}-${e}`,style:rN},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&z.createElement(rQ,{rfId:e}))}var eu=(e=null,t={actInsideInputWithModifier:!0})=>{const[s,n]=h.useState(!1),a=h.useRef(!1),i=h.useRef(new Set([])),[o,l]=h.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,m)=>f.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return h.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=g=>{if(a.current=g.ctrlKey||g.metaKey||g.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&Kp(g))return!1;const y=oN(g.code,l);i.current.add(g[y]),iN(o,i.current,!1)&&(g.preventDefault(),n(!0))},f=g=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&Kp(g))return!1;const y=oN(g.code,l);iN(o,i.current,!0)?(n(!1),i.current.clear()):i.current.delete(g[y]),g.key==="Meta"&&i.current.clear(),a.current=!1},m=()=>{i.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",m)}}},[e,n]),s};function iN(e,t,s){return e.filter(n=>s||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function oN(e,t){return t.includes(e)?"code":"key"}function _A(e,t,s,n){var l,c;const a=e.parentNode||e.parentId;if(!a)return s;const i=t.get(a),o=$o(i,n);return _A(i,t,{x:(s.x??0)+o.x,y:(s.y??0)+o.y,z:(((l=i[yt])==null?void 0:l.z)??0)>(s.z??0)?((c=i[yt])==null?void 0:c.z)??0:s.z??0},n)}function CA(e,t,s){e.forEach(n=>{var i;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||s!=null&&s[n.id]){const{x:o,y:l,z:c}=_A(n,e,{...n.position,z:((i=n[yt])==null?void 0:i.z)??0},t);n.positionAbsolute={x:o,y:l},n[yt].z=c,s!=null&&s[n.id]&&(n[yt].isParent=!0)}})}function bg(e,t,s,n){const a=new Map,i={},o=n?1e3:0;return e.forEach(l=>{var g;const c=(Js(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(i[f]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,yt,{enumerable:!1,value:{handleBounds:m||(g=u==null?void 0:u[yt])==null?void 0:g.handleBounds,z:c}}),a.set(l.id,d)}),CA(a,s,i),a}function EA(e,t={}){const{getNodes:s,width:n,height:a,minZoom:i,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),m=t.initial&&!u&&d;if(l&&c&&(m||!t.initial)){const b=s().filter(v=>{var x;const p=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(x=t.nodes)!=null&&x.length?p&&t.nodes.some(w=>w.id===v.id):p}),y=b.every(v=>v.width&&v.height);if(b.length>0&&y){const v=Uy(b,f),{x:p,y:x,zoom:w}=mA(v,n,a,t.minZoom??i,t.maxZoom??o,t.padding??.1),N=Nr.translate(p,x).scale(w);return typeof t.duration=="number"&&t.duration>0?l.transform(si(c,t.duration),N):l.transform(c,N),!0}}return!1}function oQ(e,t){return e.forEach(s=>{const n=t.get(s.id);n&&t.set(n.id,{...n,[yt]:n[yt],selected:s.selected})}),new Map(t)}function lQ(e,t){return t.map(s=>{const n=e.find(a=>a.id===s.id);return n&&(s.selected=n.selected),s})}function Sd({changedNodes:e,changedEdges:t,get:s,set:n}){const{nodeInternals:a,edges:i,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=s();e!=null&&e.length&&(c&&n({nodeInternals:oQ(e,a)}),o==null||o(e)),t!=null&&t.length&&(u&&n({edges:lQ(t,i)}),l==null||l(t))}const uo=()=>{},cQ={zoomIn:uo,zoomOut:uo,zoomTo:uo,getZoom:()=>1,setViewport:uo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:uo,fitBounds:uo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},uQ=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),dQ=()=>{const e=qt(),{d3Zoom:t,d3Selection:s}=mt(uQ,Ns);return h.useMemo(()=>s&&t?{zoomIn:a=>t.scaleBy(si(s,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(si(s,a==null?void 0:a.duration),1/1.2),zoomTo:(a,i)=>t.scaleTo(si(s,i==null?void 0:i.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,i)=>{const[o,l,c]=e.getState().transform,u=Nr.translate(a.x??o,a.y??l).scale(a.zoom??c);t.transform(si(s,i==null?void 0:i.duration),u)},getViewport:()=>{const[a,i,o]=e.getState().transform;return{x:a,y:i,zoom:o}},fitView:a=>EA(e.getState,a),setCenter:(a,i,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=l/2-a*d,m=c/2-i*d,g=Nr.translate(f,m).scale(d);t.transform(si(s,o==null?void 0:o.duration),g)},fitBounds:(a,i)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:m}=mA(a,o,l,c,u,(i==null?void 0:i.padding)??.1),g=Nr.translate(d,f).scale(m);t.transform(si(s,i==null?void 0:i.duration),g)},project:a=>{const{transform:i,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),tx(a,i,o,l)},screenToFlowPosition:a=>{const{transform:i,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return tx(f,i,o,l)},flowToScreenPosition:a=>{const{transform:i,domNode:o}=e.getState();if(!o)return a;const{x:l,y:c}=o.getBoundingClientRect(),u=uA(a,i);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:cQ,[t,s])};function qy(){const e=dQ(),t=qt(),s=h.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),n=h.useCallback(y=>t.getState().nodeInternals.get(y),[]),a=h.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(v=>({...v}))},[]),i=h.useCallback(y=>{const{edges:v=[]}=t.getState();return v.find(p=>p.id===y)},[]),o=h.useCallback(y=>{const{getNodes:v,setNodes:p,hasDefaultNodes:x,onNodesChange:w}=t.getState(),N=v(),j=typeof y=="function"?y(N):y;if(x)p(j);else if(w){const _=j.length===0?N.map(k=>({type:"remove",id:k.id})):j.map(k=>({item:k,type:"reset"}));w(_)}},[]),l=h.useCallback(y=>{const{edges:v=[],setEdges:p,hasDefaultEdges:x,onEdgesChange:w}=t.getState(),N=typeof y=="function"?y(v):y;if(x)p(N);else if(w){const j=N.length===0?v.map(_=>({type:"remove",id:_.id})):N.map(_=>({item:_,type:"reset"}));w(j)}},[]),c=h.useCallback(y=>{const v=Array.isArray(y)?y:[y],{getNodes:p,setNodes:x,hasDefaultNodes:w,onNodesChange:N}=t.getState();if(w){const _=[...p(),...v];x(_)}else if(N){const j=v.map(_=>({item:_,type:"add"}));N(j)}},[]),u=h.useCallback(y=>{const v=Array.isArray(y)?y:[y],{edges:p=[],setEdges:x,hasDefaultEdges:w,onEdgesChange:N}=t.getState();if(w)x([...p,...v]);else if(N){const j=v.map(_=>({item:_,type:"add"}));N(j)}},[]),d=h.useCallback(()=>{const{getNodes:y,edges:v=[],transform:p}=t.getState(),[x,w,N]=p;return{nodes:y().map(j=>({...j})),edges:v.map(j=>({...j})),viewport:{x,y:w,zoom:N}}},[]),f=h.useCallback(({nodes:y,edges:v})=>{const{nodeInternals:p,getNodes:x,edges:w,hasDefaultNodes:N,hasDefaultEdges:j,onNodesDelete:_,onEdgesDelete:k,onNodesChange:A,onEdgesChange:S}=t.getState(),C=(y||[]).map(O=>O.id),M=(v||[]).map(O=>O.id),E=x().reduce((O,P)=>{const B=P.parentNode||P.parentId,L=!C.includes(P.id)&&B&&O.find(I=>I.id===B);return(typeof P.deletable=="boolean"?P.deletable:!0)&&(C.includes(P.id)||L)&&O.push(P),O},[]),R=w.filter(O=>typeof O.deletable=="boolean"?O.deletable:!0),T=R.filter(O=>M.includes(O.id));if(E||T){const O=fA(E,R),P=[...T,...O],B=P.reduce((L,D)=>(L.includes(D.id)||L.push(D.id),L),[]);if((j||N)&&(j&&t.setState({edges:w.filter(L=>!B.includes(L.id))}),N&&(E.forEach(L=>{p.delete(L.id)}),t.setState({nodeInternals:new Map(p)}))),B.length>0&&(k==null||k(P),S&&S(B.map(L=>({id:L,type:"remove"})))),E.length>0&&(_==null||_(E),A)){const L=E.map(D=>({id:D.id,type:"remove"}));A(L)}}},[]),m=h.useCallback(y=>{const v=Mq(y),p=v?null:t.getState().nodeInternals.get(y.id);return!v&&!p?[null,null,v]:[v?y:Kw(p),p,v]},[]),g=h.useCallback((y,v=!0,p)=>{const[x,w,N]=m(y);return x?(p||t.getState().getNodes()).filter(j=>{if(!N&&(j.id===w.id||!j.positionAbsolute))return!1;const _=Kw(j),k=Xp(_,x);return v&&k>0||k>=x.width*x.height}):[]},[]),b=h.useCallback((y,v,p=!0)=>{const[x]=m(y);if(!x)return!1;const w=Xp(x,v);return p&&w>0||w>=x.width*x.height},[]);return h.useMemo(()=>({...e,getNodes:s,getNode:n,getEdges:a,getEdge:i,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:g,isNodeIntersecting:b}),[e,s,n,a,i,o,l,c,u,d,f,g,b])}const fQ={actInsideInputWithModifier:!1};var mQ=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const s=qt(),{deleteElements:n}=qy(),a=eu(e,fQ),i=eu(t);h.useEffect(()=>{if(a){const{edges:o,getNodes:l}=s.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);n({nodes:c,edges:u}),s.setState({nodesSelectionActive:!1})}},[a]),h.useEffect(()=>{s.setState({multiSelectionActive:i})},[i])};function hQ(e){const t=qt();h.useEffect(()=>{let s;const n=()=>{var i,o;if(!e.current)return;const a=Ly(e.current);(a.height===0||a.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",Ia.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(s=new ResizeObserver(()=>n()),s.observe(e.current)),()=>{window.removeEventListener("resize",n),s&&e.current&&s.unobserve(e.current)}},[])}const Qy={position:"absolute",width:"100%",height:"100%",top:0,left:0},gQ=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,_d=e=>({x:e.x,y:e.y,zoom:e.k}),fo=(e,t)=>e.target.closest(`.${t}`),lN=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),cN=e=>{const t=e.ctrlKey&&qf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},pQ=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),xQ=({onMove:e,onMoveStart:t,onMoveEnd:s,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=hi.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:m,translateExtent:g,minZoom:b,maxZoom:y,zoomActivationKeyCode:v,preventScrolling:p=!0,children:x,noWheelClassName:w,noPanClassName:N})=>{const j=h.useRef(),_=qt(),k=h.useRef(!1),A=h.useRef(!1),S=h.useRef(null),C=h.useRef({x:0,y:0,zoom:0}),{d3Zoom:M,d3Selection:E,d3ZoomHandler:R,userSelectionActive:T}=mt(pQ,Ns),O=eu(v),P=h.useRef(0),B=h.useRef(!1),L=h.useRef();return hQ(S),h.useEffect(()=>{if(S.current){const D=S.current.getBoundingClientRect(),I=kq().scaleExtent([b,y]).translateExtent(g),F=hn(S.current).call(I),U=Nr.translate(m.x,m.y).scale(ml(m.zoom,b,y)),H=[[0,0],[D.width,D.height]],Z=I.constrain()(U,H,g);I.transform(F,Z),I.wheelDelta(cN),_.setState({d3Zoom:I,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[Z.x,Z.y,Z.k],domNode:S.current.closest(".react-flow")})}},[]),h.useEffect(()=>{E&&M&&(o&&!O&&!T?E.on("wheel.zoom",D=>{if(fo(D,w))return!1;D.preventDefault(),D.stopImmediatePropagation();const I=E.property("__zoom").k||1;if(D.ctrlKey&&i){const ye=Pn(D),be=cN(D),Ne=I*Math.pow(2,be);M.scaleTo(E,Ne,ye,D);return}const F=D.deltaMode===1?20:1;let U=c===hi.Vertical?0:D.deltaX*F,H=c===hi.Horizontal?0:D.deltaY*F;!qf()&&D.shiftKey&&c!==hi.Vertical&&(U=D.deltaY*F,H=0),M.translateBy(E,-(U/I)*l,-(H/I)*l,{internal:!0});const Z=_d(E.property("__zoom")),{onViewportChangeStart:K,onViewportChange:ue,onViewportChangeEnd:te}=_.getState();clearTimeout(L.current),B.current||(B.current=!0,t==null||t(D,Z),K==null||K(Z)),B.current&&(e==null||e(D,Z),ue==null||ue(Z),L.current=setTimeout(()=>{s==null||s(D,Z),te==null||te(Z),B.current=!1},150))},{passive:!1}):typeof R<"u"&&E.on("wheel.zoom",function(D,I){if(!p&&D.type==="wheel"&&!D.ctrlKey||fo(D,w))return null;D.preventDefault(),R.call(this,D,I)},{passive:!1}))},[T,o,c,E,M,R,O,i,p,w,t,e,s]),h.useEffect(()=>{M&&M.on("start",D=>{var U,H;if(!D.sourceEvent||D.sourceEvent.internal)return null;P.current=(U=D.sourceEvent)==null?void 0:U.button;const{onViewportChangeStart:I}=_.getState(),F=_d(D.transform);k.current=!0,C.current=F,((H=D.sourceEvent)==null?void 0:H.type)==="mousedown"&&_.setState({paneDragging:!0}),I==null||I(F),t==null||t(D.sourceEvent,F)})},[M,t]),h.useEffect(()=>{M&&(T&&!k.current?M.on("zoom",null):T||M.on("zoom",D=>{var F;const{onViewportChange:I}=_.getState();if(_.setState({transform:[D.transform.x,D.transform.y,D.transform.k]}),A.current=!!(n&&lN(f,P.current??0)),(e||I)&&!((F=D.sourceEvent)!=null&&F.internal)){const U=_d(D.transform);I==null||I(U),e==null||e(D.sourceEvent,U)}}))},[T,M,e,f,n]),h.useEffect(()=>{M&&M.on("end",D=>{if(!D.sourceEvent||D.sourceEvent.internal)return null;const{onViewportChangeEnd:I}=_.getState();if(k.current=!1,_.setState({paneDragging:!1}),n&&lN(f,P.current??0)&&!A.current&&n(D.sourceEvent),A.current=!1,(s||I)&&gQ(C.current,D.transform)){const F=_d(D.transform);C.current=F,clearTimeout(j.current),j.current=setTimeout(()=>{I==null||I(F),s==null||s(D.sourceEvent,F)},o?150:0)}})},[M,o,f,s,n]),h.useEffect(()=>{M&&M.filter(D=>{const I=O||a,F=i&&D.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&D.button===1&&D.type==="mousedown"&&(fo(D,"react-flow__node")||fo(D,"react-flow__edge")))return!0;if(!f&&!I&&!o&&!u&&!i||T||!u&&D.type==="dblclick"||fo(D,w)&&D.type==="wheel"||fo(D,N)&&(D.type!=="wheel"||o&&D.type==="wheel"&&!O)||!i&&D.ctrlKey&&D.type==="wheel"||!I&&!o&&!F&&D.type==="wheel"||!f&&(D.type==="mousedown"||D.type==="touchstart")||Array.isArray(f)&&!f.includes(D.button)&&D.type==="mousedown")return!1;const U=Array.isArray(f)&&f.includes(D.button)||!D.button||D.button<=1;return(!D.ctrlKey||D.type==="wheel")&&U})},[T,M,a,i,o,u,f,d,O]),z.createElement("div",{className:"react-flow__renderer",ref:S,style:Qy},x)},yQ=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function vQ(){const{userSelectionActive:e,userSelectionRect:t}=mt(yQ,Ns);return e&&t?z.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function uN(e,t){const s=t.parentNode||t.parentId,n=e.find(a=>a.id===s);if(n){const a=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(a>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function AA(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const s=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const i=e.filter(l=>l.id===a.id);if(i.length===0)return n.push(a),n;const o={...a};for(const l of i)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&uN(n,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&uN(n,o);break}case"remove":return n}return n.push(o),n},s)}function RA(e,t){return AA(e,t)}function bQ(e,t){return AA(e,t)}const ir=(e,t)=>({id:e,type:"select",selected:t});function wo(e,t){return e.reduce((s,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,s.push(ir(n.id,!0))):n.selected&&!a&&(n.selected=!1,s.push(ir(n.id,!1))),s},[])}const wg=(e,t)=>s=>{s.target===t.current&&(e==null||e(s))},wQ=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),TA=h.memo(({isSelecting:e,selectionMode:t=Jc.Full,panOnDrag:s,onSelectionStart:n,onSelectionEnd:a,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const m=h.useRef(null),g=qt(),b=h.useRef(0),y=h.useRef(0),v=h.useRef(),{userSelectionActive:p,elementsSelectable:x,dragging:w}=mt(wQ,Ns),N=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,y.current=0},j=R=>{i==null||i(R),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},_=R=>{if(Array.isArray(s)&&(s!=null&&s.includes(2))){R.preventDefault();return}o==null||o(R)},k=l?R=>l(R):void 0,A=R=>{const{resetSelectedElements:T,domNode:O}=g.getState();if(v.current=O==null?void 0:O.getBoundingClientRect(),!x||!e||R.button!==0||R.target!==m.current||!v.current)return;const{x:P,y:B}=jr(R,v.current);T(),g.setState({userSelectionRect:{width:0,height:0,startX:P,startY:B,x:P,y:B}}),n==null||n(R)},S=R=>{const{userSelectionRect:T,nodeInternals:O,edges:P,transform:B,onNodesChange:L,onEdgesChange:D,nodeOrigin:I,getNodes:F}=g.getState();if(!e||!v.current||!T)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const U=jr(R,v.current),H=T.startX??0,Z=T.startY??0,K={...T,x:U.x<H?U.x:H,y:U.y<Z?U.y:Z,width:Math.abs(U.x-H),height:Math.abs(U.y-Z)},ue=F(),te=dA(O,K,B,t===Jc.Partial,!0,I),ye=fA(te,P).map(Ne=>Ne.id),be=te.map(Ne=>Ne.id);if(b.current!==be.length){b.current=be.length;const Ne=wo(ue,be);Ne.length&&(L==null||L(Ne))}if(y.current!==ye.length){y.current=ye.length;const Ne=wo(P,ye);Ne.length&&(D==null||D(Ne))}g.setState({userSelectionRect:K})},C=R=>{if(R.button!==0)return;const{userSelectionRect:T}=g.getState();!p&&T&&R.target===m.current&&(j==null||j(R)),g.setState({nodesSelectionActive:b.current>0}),N(),a==null||a(R)},M=R=>{p&&(g.setState({nodesSelectionActive:b.current>0}),a==null||a(R)),N()},E=x&&(e||p);return z.createElement("div",{className:hs(["react-flow__pane",{dragging:w,selection:e}]),onClick:E?void 0:wg(j,m),onContextMenu:wg(_,m),onWheel:wg(k,m),onMouseEnter:E?void 0:c,onMouseDown:E?A:void 0,onMouseMove:E?S:u,onMouseUp:E?C:void 0,onMouseLeave:E?M:d,ref:m,style:Qy},f,z.createElement(vQ,null))});TA.displayName="Pane";function MA(e,t){const s=e.parentNode||e.parentId;if(!s)return!1;const n=t.get(s);return n?n.selected?!0:MA(n,t):!1}function dN(e,t,s){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===s.current)return!1;n=n.parentElement}while(n);return!1}function NQ(e,t,s,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!MA(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var i,o;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:s.x-(((i=a.positionAbsolute)==null?void 0:i.x)??0),y:s.y-(((o=a.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function jQ(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function DA(e,t,s,n,a=[0,0],i){const o=jQ(e,e.extent||n);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=s.get(c),{x:m,y:g}=$o(f,a).positionAbsolute;l=f&&Js(m)&&Js(g)&&Js(f.width)&&Js(f.height)?[[m+e.width*a[0],g+e.height*a[1]],[m+f.width-e.width+e.width*a[0],g+f.height-e.height+e.height*a[1]]]:l}else i==null||i("005",Ia.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=s.get(c),{x:m,y:g}=$o(f,a).positionAbsolute;l=[[e.extent[0][0]+m,e.extent[0][1]+g],[e.extent[1][0]+m,e.extent[1][1]+g]]}let u={x:0,y:0};if(c){const f=s.get(c);u=$o(f,a).positionAbsolute}const d=l&&l!=="parent"?zy(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function Ng({nodeId:e,dragItems:t,nodeInternals:s}){const n=t.map(a=>({...s.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const fN=(e,t,s,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const i=Array.from(a),o=t.getBoundingClientRect(),l={x:o.width*n[0],y:o.height*n[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/s,y:(u.top-o.top-l.y)/s,...Ly(c)}})};function tc(e,t,s){return s===void 0?s:n=>{const a=t().nodeInternals.get(e);a&&s(n,{...a})}}function nx({id:e,store:t,unselect:s=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",Ia.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(s||u.selected&&o)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function kQ(){const e=qt();return h.useCallback(({sourceEvent:s})=>{const{transform:n,snapGrid:a,snapToGrid:i}=e.getState(),o=s.touches?s.touches[0].clientX:s.clientX,l=s.touches?s.touches[0].clientY:s.clientY,c={x:(o-n[0])/n[2],y:(l-n[1])/n[2]};return{xSnapped:i?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:i?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function jg(e){return(t,s,n)=>e==null?void 0:e(t,n)}function PA({nodeRef:e,disabled:t=!1,noDragClassName:s,handleSelector:n,nodeId:a,isSelectable:i,selectNodesOnDrag:o}){const l=qt(),[c,u]=h.useState(!1),d=h.useRef([]),f=h.useRef({x:null,y:null}),m=h.useRef(0),g=h.useRef(null),b=h.useRef({x:0,y:0}),y=h.useRef(null),v=h.useRef(!1),p=h.useRef(!1),x=h.useRef(!1),w=kQ();return h.useEffect(()=>{if(e!=null&&e.current){const N=hn(e.current),j=({x:A,y:S})=>{const{nodeInternals:C,onNodeDrag:M,onSelectionDrag:E,updateNodePositions:R,nodeExtent:T,snapGrid:O,snapToGrid:P,nodeOrigin:B,onError:L}=l.getState();f.current={x:A,y:S};let D=!1,I={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&T){const U=Uy(d.current,B);I=Oy(U)}if(d.current=d.current.map(U=>{const H={x:A-U.distance.x,y:S-U.distance.y};P&&(H.x=O[0]*Math.round(H.x/O[0]),H.y=O[1]*Math.round(H.y/O[1]));const Z=[[T[0][0],T[0][1]],[T[1][0],T[1][1]]];d.current.length>1&&T&&!U.extent&&(Z[0][0]=U.positionAbsolute.x-I.x+T[0][0],Z[1][0]=U.positionAbsolute.x+(U.width??0)-I.x2+T[1][0],Z[0][1]=U.positionAbsolute.y-I.y+T[0][1],Z[1][1]=U.positionAbsolute.y+(U.height??0)-I.y2+T[1][1]);const K=DA(U,H,C,Z,B,L);return D=D||U.position.x!==K.position.x||U.position.y!==K.position.y,U.position=K.position,U.positionAbsolute=K.positionAbsolute,U}),!D)return;R(d.current,!0,!0),u(!0);const F=a?M:jg(E);if(F&&y.current){const[U,H]=Ng({nodeId:a,dragItems:d.current,nodeInternals:C});F(y.current,U,H)}},_=()=>{if(!g.current)return;const[A,S]=sA(b.current,g.current);if(A!==0||S!==0){const{transform:C,panBy:M}=l.getState();f.current.x=(f.current.x??0)-A/C[2],f.current.y=(f.current.y??0)-S/C[2],M({x:A,y:S})&&j(f.current)}m.current=requestAnimationFrame(_)},k=A=>{var B;const{nodeInternals:S,multiSelectionActive:C,nodesDraggable:M,unselectNodesAndEdges:E,onNodeDragStart:R,onSelectionDragStart:T}=l.getState();p.current=!0;const O=a?R:jg(T);(!o||!i)&&!C&&a&&((B=S.get(a))!=null&&B.selected||E()),a&&i&&o&&nx({id:a,store:l,nodeRef:e});const P=w(A);if(f.current=P,d.current=NQ(S,M,P,a),O&&d.current){const[L,D]=Ng({nodeId:a,dragItems:d.current,nodeInternals:S});O(A.sourceEvent,L,D)}};if(t)N.on(".drag",null);else{const A=PG().on("start",S=>{const{domNode:C,nodeDragThreshold:M}=l.getState();M===0&&k(S),x.current=!1;const E=w(S);f.current=E,g.current=(C==null?void 0:C.getBoundingClientRect())||null,b.current=jr(S.sourceEvent,g.current)}).on("drag",S=>{var R,T;const C=w(S),{autoPanOnNodeDrag:M,nodeDragThreshold:E}=l.getState();if(S.sourceEvent.type==="touchmove"&&S.sourceEvent.touches.length>1&&(x.current=!0),!x.current){if(!v.current&&p.current&&M&&(v.current=!0,_()),!p.current){const O=C.xSnapped-(((R=f==null?void 0:f.current)==null?void 0:R.x)??0),P=C.ySnapped-(((T=f==null?void 0:f.current)==null?void 0:T.y)??0);Math.sqrt(O*O+P*P)>E&&k(S)}(f.current.x!==C.xSnapped||f.current.y!==C.ySnapped)&&d.current&&p.current&&(y.current=S.sourceEvent,b.current=jr(S.sourceEvent,g.current),j(C))}}).on("end",S=>{if(!(!p.current||x.current)&&(u(!1),v.current=!1,p.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:C,nodeInternals:M,onNodeDragStop:E,onSelectionDragStop:R}=l.getState(),T=a?E:jg(R);if(C(d.current,!1,!1),T){const[O,P]=Ng({nodeId:a,dragItems:d.current,nodeInternals:M});T(S.sourceEvent,O,P)}}}).filter(S=>{const C=S.target;return!S.button&&(!s||!dN(C,`.${s}`,e))&&(!n||dN(C,n,e))});return N.call(A),()=>{N.on(".drag",null)}}}},[e,t,s,n,i,l,a,o,w]),c}function LA(){const e=qt();return h.useCallback(s=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:i,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(x=>x.selected&&(x.draggable||d&&typeof x.draggable>"u")),m=l?c[0]:5,g=l?c[1]:5,b=s.isShiftPressed?4:1,y=s.x*m*b,v=s.y*g*b,p=f.map(x=>{if(x.positionAbsolute){const w={x:x.positionAbsolute.x+y,y:x.positionAbsolute.y+v};l&&(w.x=c[0]*Math.round(w.x/c[0]),w.y=c[1]*Math.round(w.y/c[1]));const{positionAbsolute:N,position:j}=DA(x,w,n,a,void 0,u);x.position=j,x.positionAbsolute=N}return x});i(p,!0,!1)},[])}const Fo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var sc=e=>{const t=({id:s,type:n,data:a,xPos:i,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:g,onContextMenu:b,onDoubleClick:y,style:v,className:p,isDraggable:x,isSelectable:w,isConnectable:N,isFocusable:j,selectNodesOnDrag:_,sourcePosition:k,targetPosition:A,hidden:S,resizeObserver:C,dragHandle:M,zIndex:E,isParent:R,noDragClassName:T,noPanClassName:O,initialized:P,disableKeyboardA11y:B,ariaLabel:L,rfId:D,hasHandleBounds:I})=>{const F=qt(),U=h.useRef(null),H=h.useRef(null),Z=h.useRef(k),K=h.useRef(A),ue=h.useRef(n),te=w||x||d||f||m||g,ye=LA(),be=tc(s,F.getState,f),Ne=tc(s,F.getState,m),Xe=tc(s,F.getState,g),nt=tc(s,F.getState,b),V=tc(s,F.getState,y),q=se=>{const{nodeDragThreshold:J}=F.getState();if(w&&(!_||!x||J>0)&&nx({id:s,store:F,nodeRef:U}),d){const Se=F.getState().nodeInternals.get(s);Se&&d(se,{...Se})}},X=se=>{if(!Kp(se)&&!B)if(aA.includes(se.key)&&w){const J=se.key==="Escape";nx({id:s,store:F,unselect:J,nodeRef:U})}else x&&u&&Object.prototype.hasOwnProperty.call(Fo,se.key)&&(F.setState({ariaLiveMessage:`Moved selected node ${se.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),ye({x:Fo[se.key].x,y:Fo[se.key].y,isShiftPressed:se.shiftKey}))};h.useEffect(()=>()=>{H.current&&(C==null||C.unobserve(H.current),H.current=null)},[]),h.useEffect(()=>{if(U.current&&!S){const se=U.current;(!P||!I||H.current!==se)&&(H.current&&(C==null||C.unobserve(H.current)),C==null||C.observe(se),H.current=se)}},[S,P,I]),h.useEffect(()=>{const se=ue.current!==n,J=Z.current!==k,Se=K.current!==A;U.current&&(se||J||Se)&&(se&&(ue.current=n),J&&(Z.current=k),Se&&(K.current=A),F.getState().updateNodeDimensions([{id:s,nodeElement:U.current,forceUpdate:!0}]))},[s,n,k,A]);const le=PA({nodeRef:U,disabled:S||!x,noDragClassName:T,handleSelector:M,nodeId:s,isSelectable:w,selectNodesOnDrag:_});return S?null:z.createElement("div",{className:hs(["react-flow__node",`react-flow__node-${n}`,{[O]:x},p,{selected:u,selectable:w,parent:R,dragging:le}]),ref:U,style:{zIndex:E,transform:`translate(${l}px,${c}px)`,pointerEvents:te?"all":"none",visibility:P?"visible":"hidden",...v},"data-id":s,"data-testid":`rf__node-${s}`,onMouseEnter:be,onMouseMove:Ne,onMouseLeave:Xe,onContextMenu:nt,onClick:q,onDoubleClick:V,onKeyDown:j?X:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":B?void 0:`${kA}-${D}`,"aria-label":L},z.createElement(Iq,{value:s},z.createElement(e,{id:s,data:a,type:n,xPos:i,yPos:o,selected:u,isConnectable:N,sourcePosition:k,targetPosition:A,dragging:le,dragHandle:M,zIndex:E})))};return t.displayName="NodeWrapper",h.memo(t)};const SQ=e=>{const t=e.getNodes().filter(s=>s.selected);return{...Uy(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function _Q({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:s}){const n=qt(),{width:a,height:i,x:o,y:l,transformString:c,userSelectionActive:u}=mt(SQ,Ns),d=LA(),f=h.useRef(null);if(h.useEffect(()=>{var b;s||(b=f.current)==null||b.focus({preventScroll:!0})},[s]),PA({nodeRef:f}),u||!a||!i)return null;const m=e?b=>{const y=n.getState().getNodes().filter(v=>v.selected);e(b,y)}:void 0,g=b=>{Object.prototype.hasOwnProperty.call(Fo,b.key)&&d({x:Fo[b.key].x,y:Fo[b.key].y,isShiftPressed:b.shiftKey})};return z.createElement("div",{className:hs(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},z.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:s?void 0:-1,onKeyDown:s?void 0:g,style:{width:a,height:i,top:l,left:o}}))}var CQ=h.memo(_Q);const EQ=e=>e.nodesSelectionActive,zA=({children:e,onPaneClick:t,onPaneMouseEnter:s,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:g,onSelectionStart:b,onSelectionEnd:y,multiSelectionKeyCode:v,panActivationKeyCode:p,zoomActivationKeyCode:x,elementsSelectable:w,zoomOnScroll:N,zoomOnPinch:j,panOnScroll:_,panOnScrollSpeed:k,panOnScrollMode:A,zoomOnDoubleClick:S,panOnDrag:C,defaultViewport:M,translateExtent:E,minZoom:R,maxZoom:T,preventScrolling:O,onSelectionContextMenu:P,noWheelClassName:B,noPanClassName:L,disableKeyboardA11y:D})=>{const I=mt(EQ),F=eu(f),U=eu(p),H=U||C,Z=U||_,K=F||m&&H!==!0;return mQ({deleteKeyCode:l,multiSelectionKeyCode:v}),z.createElement(xQ,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:i,elementsSelectable:w,zoomOnScroll:N,zoomOnPinch:j,panOnScroll:Z,panOnScrollSpeed:k,panOnScrollMode:A,zoomOnDoubleClick:S,panOnDrag:!F&&H,defaultViewport:M,translateExtent:E,minZoom:R,maxZoom:T,zoomActivationKeyCode:x,preventScrolling:O,noWheelClassName:B,noPanClassName:L},z.createElement(TA,{onSelectionStart:b,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:s,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:H,isSelecting:!!K,selectionMode:g},e,I&&z.createElement(CQ,{onSelectionContextMenu:P,noPanClassName:L,disableKeyboardA11y:D})))};zA.displayName="FlowRenderer";var AQ=h.memo(zA);function RQ(e){return mt(h.useCallback(s=>e?dA(s.nodeInternals,{x:0,y:0,width:s.width,height:s.height},s.transform,!0):s.getNodes(),[e]))}function TQ(e){const t={input:sc(e.input||bA),default:sc(e.default||sx),output:sc(e.output||NA),group:sc(e.group||Vy)},s={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,i)=>(a[i]=sc(e[i]||sx),a),s);return{...t,...n}}const MQ=({x:e,y:t,width:s,height:n,origin:a})=>!s||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-s*a[0],y:t-n*a[1]},DQ=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),OA=e=>{const{nodesDraggable:t,nodesConnectable:s,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:i,onError:o}=mt(DQ,Ns),l=RQ(e.onlyRenderVisibleElements),c=h.useRef(),u=h.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const m=f.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));i(m)});return c.current=d,d},[]);return h.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),z.createElement("div",{className:"react-flow__nodes",style:Qy},l.map(d=>{var j,_,k;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",Ia.error003(f)),f="default");const m=e.nodeTypes[f]||e.nodeTypes.default,g=!!(d.draggable||t&&typeof d.draggable>"u"),b=!!(d.selectable||a&&typeof d.selectable>"u"),y=!!(d.connectable||s&&typeof d.connectable>"u"),v=!!(d.focusable||n&&typeof d.focusable>"u"),p=e.nodeExtent?zy(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,x=(p==null?void 0:p.x)??0,w=(p==null?void 0:p.y)??0,N=MQ({x,y:w,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return z.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||ce.Bottom,targetPosition:d.targetPosition||ce.Top,hidden:d.hidden,xPos:x,yPos:w,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:g,isSelectable:b,isConnectable:y,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((j=d[yt])==null?void 0:j.z)??0,isParent:!!((_=d[yt])!=null&&_.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((k=d[yt])!=null&&k.handleBounds)})}))};OA.displayName="NodeRenderer";var PQ=h.memo(OA);const LQ=(e,t,s)=>s===ce.Left?e-t:s===ce.Right?e+t:e,zQ=(e,t,s)=>s===ce.Top?e-t:s===ce.Bottom?e+t:e,mN="react-flow__edgeupdater",hN=({position:e,centerX:t,centerY:s,radius:n=10,onMouseDown:a,onMouseEnter:i,onMouseOut:o,type:l})=>z.createElement("circle",{onMouseDown:a,onMouseEnter:i,onMouseOut:o,className:hs([mN,`${mN}-${l}`]),cx:LQ(t,n,e),cy:zQ(s,n,e),r:n,stroke:"transparent",fill:"transparent"}),OQ=()=>!0;var mo=e=>{const t=({id:s,className:n,type:a,data:i,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,style:v,source:p,target:x,sourceX:w,sourceY:N,targetX:j,targetY:_,sourcePosition:k,targetPosition:A,elementsSelectable:S,hidden:C,sourceHandleId:M,targetHandleId:E,onContextMenu:R,onMouseEnter:T,onMouseMove:O,onMouseLeave:P,reconnectRadius:B,onReconnect:L,onReconnectStart:D,onReconnectEnd:I,markerEnd:F,markerStart:U,rfId:H,ariaLabel:Z,isFocusable:K,isReconnectable:ue,pathOptions:te,interactionWidth:ye,disableKeyboardA11y:be})=>{const Ne=h.useRef(null),[Xe,nt]=h.useState(!1),[V,q]=h.useState(!1),X=qt(),le=h.useMemo(()=>`url('#${ex(U,H)}')`,[U,H]),se=h.useMemo(()=>`url('#${ex(F,H)}')`,[F,H]);if(C)return null;const J=Bt=>{var Gs;const{edges:Qt,addSelectedEdges:En,unselectNodesAndEdges:ca,multiSelectionActive:ua}=X.getState(),dn=Qt.find(Yr=>Yr.id===s);dn&&(S&&(X.setState({nodesSelectionActive:!1}),dn.selected&&ua?(ca({nodes:[],edges:[dn]}),(Gs=Ne.current)==null||Gs.blur()):En([s])),o&&o(Bt,dn))},Se=ec(s,X.getState,l),et=ec(s,X.getState,R),Mt=ec(s,X.getState,T),gs=ec(s,X.getState,O),ps=ec(s,X.getState,P),cn=(Bt,Qt)=>{if(Bt.button!==0)return;const{edges:En,isValidConnection:ca}=X.getState(),ua=Qt?x:p,dn=(Qt?E:M)||null,Gs=Qt?"target":"source",Yr=ca||OQ,me=Qt,De=En.find(Ue=>Ue.id===s);q(!0),D==null||D(Bt,De,Gs);const $e=Ue=>{q(!1),I==null||I(Ue,De,Gs)};pA({event:Bt,handleId:dn,nodeId:ua,onConnect:Ue=>L==null?void 0:L(De,Ue),isTarget:me,getState:X.getState,setState:X.setState,isValidConnection:Yr,edgeUpdaterType:Gs,onReconnectEnd:$e})},ia=Bt=>cn(Bt,!0),oa=Bt=>cn(Bt,!1),la=()=>nt(!0),un=()=>nt(!1),Ya=!S&&!o,Xa=Bt=>{var Qt;if(!be&&aA.includes(Bt.key)&&S){const{unselectNodesAndEdges:En,addSelectedEdges:ca,edges:ua}=X.getState();Bt.key==="Escape"?((Qt=Ne.current)==null||Qt.blur(),En({edges:[ua.find(Gs=>Gs.id===s)]})):ca([s])}};return z.createElement("g",{className:hs(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Ya,updating:Xe}]),onClick:J,onDoubleClick:Se,onContextMenu:et,onMouseEnter:Mt,onMouseMove:gs,onMouseLeave:ps,onKeyDown:K?Xa:void 0,tabIndex:K?0:void 0,role:K?"button":"img","data-testid":`rf__edge-${s}`,"aria-label":Z===null?void 0:Z||`Edge from ${p} to ${x}`,"aria-describedby":K?`${SA}-${H}`:void 0,ref:Ne},!V&&z.createElement(e,{id:s,source:p,target:x,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,data:i,style:v,sourceX:w,sourceY:N,targetX:j,targetY:_,sourcePosition:k,targetPosition:A,sourceHandleId:M,targetHandleId:E,markerStart:le,markerEnd:se,pathOptions:te,interactionWidth:ye}),ue&&z.createElement(z.Fragment,null,(ue==="source"||ue===!0)&&z.createElement(hN,{position:k,centerX:w,centerY:N,radius:B,onMouseDown:ia,onMouseEnter:la,onMouseOut:un,type:"source"}),(ue==="target"||ue===!0)&&z.createElement(hN,{position:A,centerX:j,centerY:_,radius:B,onMouseDown:oa,onMouseEnter:la,onMouseOut:un,type:"target"})))};return t.displayName="EdgeWrapper",h.memo(t)};function BQ(e){const t={default:mo(e.default||Zf),straight:mo(e.bezier||$y),step:mo(e.step||Iy),smoothstep:mo(e.step||yh),simplebezier:mo(e.simplebezier||By)},s={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,i)=>(a[i]=mo(e[i]||Zf),a),s);return{...t,...n}}function gN(e,t,s=null){const n=((s==null?void 0:s.x)||0)+t.x,a=((s==null?void 0:s.y)||0)+t.y,i=(s==null?void 0:s.width)||t.width,o=(s==null?void 0:s.height)||t.height;switch(e){case ce.Top:return{x:n+i/2,y:a};case ce.Right:return{x:n+i,y:a+o/2};case ce.Bottom:return{x:n+i/2,y:a+o};case ce.Left:return{x:n,y:a+o/2}}}function pN(e,t){return e?e.length===1||!t?e[0]:t&&e.find(s=>s.id===t)||null:null}const IQ=(e,t,s,n,a,i)=>{const o=gN(s,e,t),l=gN(i,n,a);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function $Q({sourcePos:e,targetPos:t,sourceWidth:s,sourceHeight:n,targetWidth:a,targetHeight:i,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+s,t.x+a),y2:Math.max(e.y+n,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=Oy({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*m)>0}function xN(e){var n,a,i,o,l;const t=((n=e==null?void 0:e[yt])==null?void 0:n.handleBounds)||null,s=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!s]}const FQ=[{level:0,isMaxLevel:!0,edges:[]}];function HQ(e,t,s=!1){let n=-1;const a=e.reduce((o,l)=>{var d,f;const c=Js(l.zIndex);let u=c?l.zIndex:0;if(s){const m=t.get(l.target),g=t.get(l.source),b=l.selected||(m==null?void 0:m.selected)||(g==null?void 0:g.selected),y=Math.max(((d=g==null?void 0:g[yt])==null?void 0:d.z)||0,((f=m==null?void 0:m[yt])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(b?y:0)}return o[u]?o[u].push(l):o[u]=[l],n=u>n?u:n,o},{}),i=Object.entries(a).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===n}});return i.length===0?FQ:i}function UQ(e,t,s){const n=mt(h.useCallback(a=>e?a.edges.filter(i=>{const o=t.get(i.source),l=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&$Q({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return HQ(n,t,s)}const GQ=({color:e="none",strokeWidth:t=1})=>z.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),VQ=({color:e="none",strokeWidth:t=1})=>z.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),yN={[Qf.Arrow]:GQ,[Qf.ArrowClosed]:VQ};function qQ(e){const t=qt();return h.useMemo(()=>{var a,i;return Object.prototype.hasOwnProperty.call(yN,e)?yN[e]:((i=(a=t.getState()).onError)==null||i.call(a,"009",Ia.error009(e)),null)},[e])}const QQ=({id:e,type:t,color:s,width:n=12.5,height:a=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=qQ(t);return c?z.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},z.createElement(c,{color:s,strokeWidth:o})):null},ZQ=({defaultColor:e,rfId:t})=>s=>{const n=[];return s.edges.reduce((a,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=ex(o,t);n.includes(l)||(a.push({id:l,color:o.color||e,...o}),n.push(l))}}),a),[]).sort((a,i)=>a.id.localeCompare(i.id))},BA=({defaultColor:e,rfId:t})=>{const s=mt(h.useCallback(ZQ({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((i,o)=>i.id!==a[o].id)));return z.createElement("defs",null,s.map(n=>z.createElement(QQ,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};BA.displayName="MarkerDefinitions";var WQ=h.memo(BA);const YQ=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),IA=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:s,rfId:n,edgeTypes:a,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,children:v,disableKeyboardA11y:p})=>{const{edgesFocusable:x,edgesUpdatable:w,elementsSelectable:N,width:j,height:_,connectionMode:k,nodeInternals:A,onError:S}=mt(YQ,Ns),C=UQ(t,A,s);return j?z.createElement(z.Fragment,null,C.map(({level:M,edges:E,isMaxLevel:R})=>z.createElement("svg",{key:M,style:{zIndex:M},width:j,height:_,className:"react-flow__edges react-flow__container"},R&&z.createElement(WQ,{defaultColor:e,rfId:n}),z.createElement("g",null,E.map(T=>{const[O,P,B]=xN(A.get(T.source)),[L,D,I]=xN(A.get(T.target));if(!B||!I)return null;let F=T.type||"default";a[F]||(S==null||S("011",Ia.error011(F)),F="default");const U=a[F]||a.default,H=k===Ti.Strict?D.target:(D.target??[]).concat(D.source??[]),Z=pN(P.source,T.sourceHandle),K=pN(H,T.targetHandle),ue=(Z==null?void 0:Z.position)||ce.Bottom,te=(K==null?void 0:K.position)||ce.Top,ye=!!(T.focusable||x&&typeof T.focusable>"u"),be=T.reconnectable||T.updatable,Ne=typeof m<"u"&&(be||w&&typeof be>"u");if(!Z||!K)return S==null||S("008",Ia.error008(Z,T)),null;const{sourceX:Xe,sourceY:nt,targetX:V,targetY:q}=IQ(O,Z,ue,L,K,te);return z.createElement(U,{key:T.id,id:T.id,className:hs([T.className,i]),type:F,data:T.data,selected:!!T.selected,animated:!!T.animated,hidden:!!T.hidden,label:T.label,labelStyle:T.labelStyle,labelShowBg:T.labelShowBg,labelBgStyle:T.labelBgStyle,labelBgPadding:T.labelBgPadding,labelBgBorderRadius:T.labelBgBorderRadius,style:T.style,source:T.source,target:T.target,sourceHandleId:T.sourceHandle,targetHandleId:T.targetHandle,markerEnd:T.markerEnd,markerStart:T.markerStart,sourceX:Xe,sourceY:nt,targetX:V,targetY:q,sourcePosition:ue,targetPosition:te,elementsSelectable:N,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,rfId:n,ariaLabel:T.ariaLabel,isFocusable:ye,isReconnectable:Ne,pathOptions:"pathOptions"in T?T.pathOptions:void 0,interactionWidth:T.interactionWidth,disableKeyboardA11y:p})})))),v):null};IA.displayName="EdgeRenderer";var XQ=h.memo(IA);const KQ=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function JQ({children:e}){const t=mt(KQ);return z.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function eZ(e){const t=qy(),s=h.useRef(!1);h.useEffect(()=>{!s.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),s.current=!0)},[e,t.viewportInitialized])}const tZ={[ce.Left]:ce.Right,[ce.Right]:ce.Left,[ce.Top]:ce.Bottom,[ce.Bottom]:ce.Top},$A=({nodeId:e,handleType:t,style:s,type:n=cr.Bezier,CustomComponent:a,connectionStatus:i})=>{var _,k,A;const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=mt(h.useCallback(S=>({fromNode:S.nodeInternals.get(e),handleId:S.connectionHandleId,toX:(S.connectionPosition.x-S.transform[0])/S.transform[2],toY:(S.connectionPosition.y-S.transform[1])/S.transform[2],connectionMode:S.connectionMode}),[e]),Ns),f=(_=o==null?void 0:o[yt])==null?void 0:_.handleBounds;let m=f==null?void 0:f[t];if(d===Ti.Loose&&(m=m||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!m)return null;const g=l?m.find(S=>S.id===l):m[0],b=g?g.x+g.width/2:(o.width??0)/2,y=g?g.y+g.height/2:o.height??0,v=(((k=o.positionAbsolute)==null?void 0:k.x)??0)+b,p=(((A=o.positionAbsolute)==null?void 0:A.y)??0)+y,x=g==null?void 0:g.position,w=x?tZ[x]:null;if(!x||!w)return null;if(a)return z.createElement(a,{connectionLineType:n,connectionLineStyle:s,fromNode:o,fromHandle:g,fromX:v,fromY:p,toX:c,toY:u,fromPosition:x,toPosition:w,connectionStatus:i});let N="";const j={sourceX:v,sourceY:p,sourcePosition:x,targetX:c,targetY:u,targetPosition:w};return n===cr.Bezier?[N]=cA(j):n===cr.Step?[N]=Jp({...j,borderRadius:0}):n===cr.SmoothStep?[N]=Jp(j):n===cr.SimpleBezier?[N]=lA(j):N=`M${v},${p} ${c},${u}`,z.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:s})};$A.displayName="ConnectionLine";const sZ=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function nZ({containerStyle:e,style:t,type:s,component:n}){const{nodeId:a,handleType:i,nodesConnectable:o,width:l,height:c,connectionStatus:u}=mt(sZ,Ns);return!(a&&i&&l&&o)?null:z.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},z.createElement("g",{className:hs(["react-flow__connection",u])},z.createElement($A,{nodeId:a,handleType:i,style:t,type:s,CustomComponent:n,connectionStatus:u})))}function vN(e,t){return h.useRef(null),qt(),h.useMemo(()=>t(e),[e])}const FA=({nodeTypes:e,edgeTypes:t,onMove:s,onMoveStart:n,onMoveEnd:a,onInit:i,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:g,onSelectionContextMenu:b,onSelectionStart:y,onSelectionEnd:v,connectionLineType:p,connectionLineStyle:x,connectionLineComponent:w,connectionLineContainerStyle:N,selectionKeyCode:j,selectionOnDrag:_,selectionMode:k,multiSelectionKeyCode:A,panActivationKeyCode:S,zoomActivationKeyCode:C,deleteKeyCode:M,onlyRenderVisibleElements:E,elementsSelectable:R,selectNodesOnDrag:T,defaultViewport:O,translateExtent:P,minZoom:B,maxZoom:L,preventScrolling:D,defaultMarkerColor:I,zoomOnScroll:F,zoomOnPinch:U,panOnScroll:H,panOnScrollSpeed:Z,panOnScrollMode:K,zoomOnDoubleClick:ue,panOnDrag:te,onPaneClick:ye,onPaneMouseEnter:be,onPaneMouseMove:Ne,onPaneMouseLeave:Xe,onPaneScroll:nt,onPaneContextMenu:V,onEdgeContextMenu:q,onEdgeMouseEnter:X,onEdgeMouseMove:le,onEdgeMouseLeave:se,onReconnect:J,onReconnectStart:Se,onReconnectEnd:et,reconnectRadius:Mt,noDragClassName:gs,noWheelClassName:ps,noPanClassName:cn,elevateEdgesOnSelect:ia,disableKeyboardA11y:oa,nodeOrigin:la,nodeExtent:un,rfId:Ya})=>{const Xa=vN(e,TQ),Bt=vN(t,BQ);return eZ(i),z.createElement(AQ,{onPaneClick:ye,onPaneMouseEnter:be,onPaneMouseMove:Ne,onPaneMouseLeave:Xe,onPaneContextMenu:V,onPaneScroll:nt,deleteKeyCode:M,selectionKeyCode:j,selectionOnDrag:_,selectionMode:k,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:A,panActivationKeyCode:S,zoomActivationKeyCode:C,elementsSelectable:R,onMove:s,onMoveStart:n,onMoveEnd:a,zoomOnScroll:F,zoomOnPinch:U,zoomOnDoubleClick:ue,panOnScroll:H,panOnScrollSpeed:Z,panOnScrollMode:K,panOnDrag:te,defaultViewport:O,translateExtent:P,minZoom:B,maxZoom:L,onSelectionContextMenu:b,preventScrolling:D,noDragClassName:gs,noWheelClassName:ps,noPanClassName:cn,disableKeyboardA11y:oa},z.createElement(JQ,null,z.createElement(XQ,{edgeTypes:Bt,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:E,onEdgeContextMenu:q,onEdgeMouseEnter:X,onEdgeMouseMove:le,onEdgeMouseLeave:se,onReconnect:J,onReconnectStart:Se,onReconnectEnd:et,reconnectRadius:Mt,defaultMarkerColor:I,noPanClassName:cn,elevateEdgesOnSelect:!!ia,disableKeyboardA11y:oa,rfId:Ya},z.createElement(nZ,{style:x,type:p,component:w,containerStyle:N})),z.createElement("div",{className:"react-flow__edgelabel-renderer"}),z.createElement(PQ,{nodeTypes:Xa,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:g,selectNodesOnDrag:T,onlyRenderVisibleElements:E,noPanClassName:cn,noDragClassName:gs,disableKeyboardA11y:oa,nodeOrigin:la,nodeExtent:un,rfId:Ya})))};FA.displayName="GraphView";var aZ=h.memo(FA);const ax=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],er={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ax,nodeExtent:ax,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ti.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Dq,isValidConnection:void 0},rZ=()=>q7((e,t)=>({...er,setNodes:s=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:i}=t();e({nodeInternals:bg(s,n,a,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:s=>{const{defaultEdgeOptions:n={}}=t();e({edges:s.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(s,n)=>{const a=typeof s<"u",i=typeof n<"u",o=a?bg(s,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?n:[],hasDefaultNodes:a,hasDefaultEdges:i})},updateNodeDimensions:s=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(f.transform),g=s.reduce((y,v)=>{const p=a.get(v.id);if(p!=null&&p.hidden)a.set(p.id,{...p,[yt]:{...p[yt],handleBounds:void 0}});else if(p){const x=Ly(v.nodeElement);!!(x.width&&x.height&&(p.width!==x.width||p.height!==x.height||v.forceUpdate))&&(a.set(p.id,{...p,[yt]:{...p[yt],handleBounds:{source:fN(".source",v.nodeElement,m,u),target:fN(".target",v.nodeElement,m,u)}},...x}),y.push({id:p.id,type:"dimensions",dimensions:x}))}return y},[]);CA(a,u);const b=o||i&&!o&&EA(t,{initial:!0,...l});e({nodeInternals:new Map(a),fitViewOnInitDone:b}),(g==null?void 0:g.length)>0&&(n==null||n(g))},updateNodePositions:(s,n=!0,a=!1)=>{const{triggerNodeChanges:i}=t(),o=s.map(l=>{const c={id:l.id,type:"position",dragging:a};return n&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});i(o)},triggerNodeChanges:s=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:i,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(s!=null&&s.length){if(i){const u=RA(s,l()),d=bg(u,a,o,c);e({nodeInternals:d})}n==null||n(s)}},addSelectedNodes:s=>{const{multiSelectionActive:n,edges:a,getNodes:i}=t();let o,l=null;n?o=s.map(c=>ir(c,!0)):(o=wo(i(),s),l=wo(a,[])),Sd({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:s=>{const{multiSelectionActive:n,edges:a,getNodes:i}=t();let o,l=null;n?o=s.map(c=>ir(c,!0)):(o=wo(a,s),l=wo(i(),[])),Sd({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:s,edges:n}={})=>{const{edges:a,getNodes:i}=t(),o=s||i(),l=n||a,c=o.map(d=>(d.selected=!1,ir(d.id,!1))),u=l.map(d=>ir(d.id,!1));Sd({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:s=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([s,a]),e({minZoom:s})},setMaxZoom:s=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,s]),e({maxZoom:s})},setTranslateExtent:s=>{var n;(n=t().d3Zoom)==null||n.translateExtent(s),e({translateExtent:s})},resetSelectedElements:()=>{const{edges:s,getNodes:n}=t(),i=n().filter(l=>l.selected).map(l=>ir(l.id,!1)),o=s.filter(l=>l.selected).map(l=>ir(l.id,!1));Sd({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:s=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=zy(a.position,s)}),e({nodeExtent:s,nodeInternals:new Map(n)})},panBy:s=>{const{transform:n,width:a,height:i,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!s.x&&!s.y)return!1;const u=Nr.translate(n[0]+s.x,n[1]+s.y).scale(n[2]),d=[[0,0],[a,i]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(l,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:er.connectionNodeId,connectionHandleId:er.connectionHandleId,connectionHandleType:er.connectionHandleType,connectionStatus:er.connectionStatus,connectionStartHandle:er.connectionStartHandle,connectionEndHandle:er.connectionEndHandle}),reset:()=>e({...er})}),Object.is),HA=({children:e})=>{const t=h.useRef(null);return t.current||(t.current=rZ()),z.createElement(Sq,{value:t.current},e)};HA.displayName="ReactFlowProvider";const UA=({children:e})=>h.useContext(xh)?z.createElement(z.Fragment,null,e):z.createElement(HA,null,e);UA.displayName="ReactFlowWrapper";const iZ={input:bA,default:sx,output:NA,group:Vy},oZ={default:Zf,straight:$y,step:Iy,smoothstep:yh,simplebezier:By},lZ=[0,0],cZ=[15,15],uZ={x:0,y:0,zoom:1},dZ={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Zy=h.forwardRef(({nodes:e,edges:t,defaultNodes:s,defaultEdges:n,className:a,nodeTypes:i=iZ,edgeTypes:o=oZ,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:p,onNodeMouseEnter:x,onNodeMouseMove:w,onNodeMouseLeave:N,onNodeContextMenu:j,onNodeDoubleClick:_,onNodeDragStart:k,onNodeDrag:A,onNodeDragStop:S,onNodesDelete:C,onEdgesDelete:M,onSelectionChange:E,onSelectionDragStart:R,onSelectionDrag:T,onSelectionDragStop:O,onSelectionContextMenu:P,onSelectionStart:B,onSelectionEnd:L,connectionMode:D=Ti.Strict,connectionLineType:I=cr.Bezier,connectionLineStyle:F,connectionLineComponent:U,connectionLineContainerStyle:H,deleteKeyCode:Z="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:ue=!1,selectionMode:te=Jc.Full,panActivationKeyCode:ye="Space",multiSelectionKeyCode:be=qf()?"Meta":"Control",zoomActivationKeyCode:Ne=qf()?"Meta":"Control",snapToGrid:Xe=!1,snapGrid:nt=cZ,onlyRenderVisibleElements:V=!1,selectNodesOnDrag:q=!0,nodesDraggable:X,nodesConnectable:le,nodesFocusable:se,nodeOrigin:J=lZ,edgesFocusable:Se,edgesUpdatable:et,elementsSelectable:Mt,defaultViewport:gs=uZ,minZoom:ps=.5,maxZoom:cn=2,translateExtent:ia=ax,preventScrolling:oa=!0,nodeExtent:la,defaultMarkerColor:un="#b1b1b7",zoomOnScroll:Ya=!0,zoomOnPinch:Xa=!0,panOnScroll:Bt=!1,panOnScrollSpeed:Qt=.5,panOnScrollMode:En=hi.Free,zoomOnDoubleClick:ca=!0,panOnDrag:ua=!0,onPaneClick:dn,onPaneMouseEnter:Gs,onPaneMouseMove:Yr,onPaneMouseLeave:me,onPaneScroll:De,onPaneContextMenu:$e,children:Pe,onEdgeContextMenu:Ue,onEdgeDoubleClick:Jt,onEdgeMouseEnter:Zt,onEdgeMouseMove:An,onEdgeMouseLeave:Cs,onEdgeUpdate:da,onEdgeUpdateStart:Rn,onEdgeUpdateEnd:Vs,onReconnect:no,onReconnectStart:nd,onReconnectEnd:BD,reconnectRadius:ID=10,edgeUpdaterRadius:$D=10,onNodesChange:FD,onEdgesChange:HD,noDragClassName:UD="nodrag",noWheelClassName:GD="nowheel",noPanClassName:nb="nopan",fitView:VD=!1,fitViewOptions:qD,connectOnClick:QD=!0,attributionPosition:ZD,proOptions:WD,defaultEdgeOptions:YD,elevateNodesOnSelect:XD=!0,elevateEdgesOnSelect:KD=!1,disableKeyboardA11y:ab=!1,autoPanOnConnect:JD=!0,autoPanOnNodeDrag:e4=!0,connectionRadius:t4=20,isValidConnection:s4,onError:n4,style:a4,id:rb,nodeDragThreshold:r4,...i4},o4)=>{const Bh=rb||"1";return z.createElement("div",{...i4,style:{...a4,...dZ},ref:o4,className:hs(["react-flow",a]),"data-testid":"rf__wrapper",id:rb},z.createElement(UA,null,z.createElement(aZ,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:x,onNodeMouseMove:w,onNodeMouseLeave:N,onNodeContextMenu:j,onNodeDoubleClick:_,nodeTypes:i,edgeTypes:o,connectionLineType:I,connectionLineStyle:F,connectionLineComponent:U,connectionLineContainerStyle:H,selectionKeyCode:K,selectionOnDrag:ue,selectionMode:te,deleteKeyCode:Z,multiSelectionKeyCode:be,panActivationKeyCode:ye,zoomActivationKeyCode:Ne,onlyRenderVisibleElements:V,selectNodesOnDrag:q,defaultViewport:gs,translateExtent:ia,minZoom:ps,maxZoom:cn,preventScrolling:oa,zoomOnScroll:Ya,zoomOnPinch:Xa,zoomOnDoubleClick:ca,panOnScroll:Bt,panOnScrollSpeed:Qt,panOnScrollMode:En,panOnDrag:ua,onPaneClick:dn,onPaneMouseEnter:Gs,onPaneMouseMove:Yr,onPaneMouseLeave:me,onPaneScroll:De,onPaneContextMenu:$e,onSelectionContextMenu:P,onSelectionStart:B,onSelectionEnd:L,onEdgeContextMenu:Ue,onEdgeDoubleClick:Jt,onEdgeMouseEnter:Zt,onEdgeMouseMove:An,onEdgeMouseLeave:Cs,onReconnect:no??da,onReconnectStart:nd??Rn,onReconnectEnd:BD??Vs,reconnectRadius:ID??$D,defaultMarkerColor:un,noDragClassName:UD,noWheelClassName:GD,noPanClassName:nb,elevateEdgesOnSelect:KD,rfId:Bh,disableKeyboardA11y:ab,nodeOrigin:J,nodeExtent:la}),z.createElement(tQ,{nodes:e,edges:t,defaultNodes:s,defaultEdges:n,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:p,nodesDraggable:X,nodesConnectable:le,nodesFocusable:se,edgesFocusable:Se,edgesUpdatable:et,elementsSelectable:Mt,elevateNodesOnSelect:XD,minZoom:ps,maxZoom:cn,nodeExtent:la,onNodesChange:FD,onEdgesChange:HD,snapToGrid:Xe,snapGrid:nt,connectionMode:D,translateExtent:ia,connectOnClick:QD,defaultEdgeOptions:YD,fitView:VD,fitViewOptions:qD,onNodesDelete:C,onEdgesDelete:M,onNodeDragStart:k,onNodeDrag:A,onNodeDragStop:S,onSelectionDrag:T,onSelectionDragStart:R,onSelectionDragStop:O,noPanClassName:nb,nodeOrigin:J,rfId:Bh,autoPanOnConnect:JD,autoPanOnNodeDrag:e4,onError:n4,connectionRadius:t4,isValidConnection:s4,nodeDragThreshold:r4}),z.createElement(Jq,{onSelectionChange:E}),Pe,z.createElement(Cq,{proOptions:WD,position:ZD}),z.createElement(iQ,{rfId:Bh,disableKeyboardA11y:ab})))});Zy.displayName="ReactFlow";function GA(e){return t=>{const[s,n]=h.useState(t),a=h.useCallback(i=>n(o=>e(i,o)),[]);return[s,n,a]}}const VA=GA(RA),qA=GA(bQ);function fZ(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!1;for(const n of s)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}function mZ(){return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},z.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function hZ(){return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},z.createElement("path",{d:"M0 0h32v4.2H0z"}))}function gZ(){return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},z.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function pZ(){return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},z.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function xZ(){return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},z.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const pc=({children:e,className:t,...s})=>z.createElement("button",{type:"button",className:hs(["react-flow__controls-button",t]),...s},e);pc.displayName="ControlButton";const yZ=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),QA=({style:e,showZoom:t=!0,showFitView:s=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:i,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const m=qt(),[g,b]=h.useState(!1),{isInteractive:y,minZoomReached:v,maxZoomReached:p}=mt(yZ,fZ),{zoomIn:x,zoomOut:w,fitView:N}=qy();if(h.useEffect(()=>{b(!0)},[]),!g)return null;const j=()=>{x(),i==null||i()},_=()=>{w(),o==null||o()},k=()=>{N(a),l==null||l()},A=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c==null||c(!y)};return z.createElement(tA,{className:hs(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&z.createElement(z.Fragment,null,z.createElement(pc,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:p},z.createElement(mZ,null)),z.createElement(pc,{onClick:_,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},z.createElement(hZ,null))),s&&z.createElement(pc,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},z.createElement(gZ,null)),n&&z.createElement(pc,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},y?z.createElement(xZ,null):z.createElement(pZ,null)),d)};QA.displayName="Controls";var ZA=h.memo(QA);function vZ(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!1;for(const n of s)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var vn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(vn||(vn={}));function bZ({color:e,dimensions:t,lineWidth:s}){return z.createElement("path",{stroke:e,strokeWidth:s,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function wZ({color:e,radius:t}){return z.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const NZ={[vn.Dots]:"#91919a",[vn.Lines]:"#eee",[vn.Cross]:"#e2e2e2"},jZ={[vn.Dots]:1,[vn.Lines]:1,[vn.Cross]:6},kZ=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function WA({id:e,variant:t=vn.Dots,gap:s=20,size:n,lineWidth:a=1,offset:i=2,color:o,style:l,className:c}){const u=h.useRef(null),{transform:d,patternId:f}=mt(kZ,vZ),m=o||NZ[t],g=n||jZ[t],b=t===vn.Dots,y=t===vn.Cross,v=Array.isArray(s)?s:[s,s],p=[v[0]*d[2]||1,v[1]*d[2]||1],x=g*d[2],w=y?[x,x]:p,N=b?[x/i,x/i]:[w[0]/i,w[1]/i];return z.createElement("svg",{className:hs(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},z.createElement("pattern",{id:f+e,x:d[0]%p[0],y:d[1]%p[1],width:p[0],height:p[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},b?z.createElement(wZ,{color:m,radius:x/i}):z.createElement(bZ,{dimensions:w,color:m,lineWidth:a})),z.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}WA.displayName="Background";var YA=h.memo(WA);function SZ(e){if(!e||typeof e!="object")throw new Error("Invalid perk tree data");const t=e;if(!t.treeId||!t.treeName||!t.perks||!Array.isArray(t.perks))throw new Error("Invalid perk tree structure");return t}function XA(e){try{return{success:!0,data:SZ(e)}}catch(t){return{success:!1,error:t}}}const _Z={nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120,fallbackSpacing:100};async function KA(e){try{const t=Vt(`data/perk-positions/${e}-positions.json`),s=await fetch(t);return s.ok?await s.json():null}catch{return null}}function CZ(e,t){const s=new Map;e.forEach(o=>{const l=t==null?void 0:t.positions.find(c=>c.perkId===o.edid);s.set(o.edid,{perk:o,depth:-1,children:o.connections.children,parents:o.connections.parents,savedPosition:l})});const a=e.filter(o=>o.connections.parents.length===0).map(o=>({id:o.edid,depth:0})),i=new Set;for(;a.length>0;){const{id:o,depth:l}=a.shift();if(i.has(o))continue;i.add(o);const c=s.get(o);c&&((c.depth===-1||l<c.depth)&&(c.depth=l),c.children.forEach(u=>{s.has(u)&&!i.has(u)&&a.push({id:u,depth:l+1})}))}return s}function EZ(e,t){const s=new Map,n=new Map;e.forEach(i=>{const o=i.depth;n.has(o)||n.set(o,[]),n.get(o).push(i)});const a=Math.max(...n.keys());return n.forEach((i,o)=>{const l=t.padding+(a-o)*t.verticalSpacing,c=(i.length-1)*t.horizontalSpacing,u=t.padding+(t.gridScaleX-c)/2;i.forEach((d,f)=>{const m=u+f*t.horizontalSpacing;s.set(d.perk.edid,{x:m,y:l})})}),s}function AZ(e,t,s){t.positions.forEach(n=>{const a=e.get(n.perkId);a&&(a.savedPosition=n,a.calculatedPosition={x:n.x,y:n.y})})}function RZ(e,t,s={}){const n={..._Z,...s},a=CZ(e.perks,t);t&&AZ(a,t);const i=EZ(a,n),o=new Map;return a.forEach((l,c)=>{if(l.calculatedPosition)o.set(c,l.calculatedPosition);else{const u=i.get(c);u?o.set(c,u):o.set(c,{x:n.padding,y:n.padding})}}),o}function TZ(e,t){const s=Array.from(t.entries()).map(([n,a])=>({perkId:n,x:a.x,y:a.y,gridX:a.gridX,gridY:a.gridY,horizontal:a.horizontal,vertical:a.vertical}));return{treeId:e.treeId,treeName:e.treeName,positions:s,version:"1.0.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}function bN(e,t){const s=new Map;return t.positions.forEach(n=>{s.set(n.perkId,{x:n.x,y:n.y,gridX:n.gridX,gridY:n.gridY,horizontal:n.horizontal,vertical:n.vertical})}),s}function MZ(e){const t=JSON.stringify(e,null,2),s=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=`${e.treeId}-positions.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}const wN=(e,t)=>{var n;const s=e.ranks.find(a=>a.rank===t);return(n=s==null?void 0:s.prerequisites)!=null&&n.skillLevel?s.prerequisites.skillLevel.level:null},DZ=({data:e,selected:t,onTogglePerk:s,onRankChange:n})=>{var x,w,N,j,_,k,A,S,C,M;const[a,i]=h.useState(!1),o=h.useRef(!1),l=e.totalRanks,c=l>1?(e.currentRank||0)>0:e.selected||t,u=E=>{E.preventDefault(),E.stopPropagation(),o.current=!0,i(!0);const R=e.totalRanks||1;if(R>1){const T=e.currentRank||0,O=e.totalRanks||1,P=T>=O?0:T+1;console.log("ðŸ”„ PerkNode cycling:",{perkId:e.edid,currentRank:T,maxRank:O,nextRank:P,totalRanks:R}),n&&n(e.edid,P)}else s&&s(e.edid);setTimeout(()=>{o.current=!1},200)},d=()=>{i(!0)},f=()=>{o.current||i(!1)},m=E=>{!E&&o.current||i(E)},g=()=>{const E={padding:"8px 12px",borderRadius:"6px",border:"2px solid",fontSize:"12px",fontWeight:"500",minWidth:"140px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"};return e.hasNoPosition?{...E,borderColor:"#ef4444",borderStyle:"dashed",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 1px rgba(239, 68, 68, 0.3)"}:c?{...E,borderColor:"#d4af37",backgroundColor:"rgba(212, 175, 55, 0.15)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 2px rgba(212, 175, 55, 0.4), 0 2px 4px rgba(212, 175, 55, 0.2)",transform:"scale(1.02)"}:e.isRoot?{...E,borderColor:"hsl(var(--border))",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"}:{...E,borderColor:"hsl(var(--border))",backgroundColor:"hsl(var(--background))",color:"hsl(var(--muted-foreground))"}},b=e.currentRank||0,y=b>0?b:1,v=((w=(x=e.ranks.find(E=>E.rank===y))==null?void 0:x.description)==null?void 0:w.base)||((j=(N=e.ranks[0])==null?void 0:N.description)==null?void 0:j.base)||"";let p=null;if(l>1){const E=[];if(b>0){const R=(k=(_=e.ranks.find(T=>T.rank===b))==null?void 0:_.description)==null?void 0:k.subtext;R&&E.push(r.jsxs("div",{className:"mb-2",children:[r.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Current:"})," ",R]},"current"))}if(b<l){const R=b+1,T=(S=(A=e.ranks.find(O=>O.rank===R))==null?void 0:A.description)==null?void 0:S.subtext;T&&E.push(r.jsxs("div",{children:[r.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Next:"})," ",T]},"next"))}p=E.length>0?r.jsx(r.Fragment,{children:E}):null}else{const E=((M=(C=e.ranks[0])==null?void 0:C.description)==null?void 0:M.subtext)||"";p=E?r.jsx("div",{children:E}):null}return r.jsxs(KC,{open:a,onOpenChange:m,children:[r.jsx(JC,{asChild:!0,children:r.jsxs("div",{style:g(),onClick:u,onMouseDown:E=>E.stopPropagation(),onMouseEnter:d,onMouseLeave:f,children:[!e.isRoot&&r.jsx(hl,{type:"target",position:ce.Bottom}),r.jsx("div",{className:"font-medium",children:e.name}),l>1&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.currentRank||0,"/",l," ranks"]}),e.hasChildren&&r.jsx(hl,{type:"source",position:ce.Top})]})}),r.jsx(R9,{children:r.jsx(Ey,{className:"w-80",style:{zIndex:_t.TOOLTIP,backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold text-sm",children:e.name}),r.jsx("div",{className:"text-sm text-muted-foreground",children:v}),p&&r.jsx("div",{className:"text-xs text-muted-foreground/80 italic border-l-2 border-muted pl-2",children:p}),l>1?r.jsxs("div",{className:"text-xs pt-2 border-t",children:[r.jsx("div",{className:"font-medium mb-1",children:"Level Requirements:"}),Array.from({length:l},(E,R)=>R+1).map(E=>{const R=wN(e,E);return e.currentSkillLevel,r.jsxs("div",{className:"flex justify-between items-center py-1",children:[r.jsxs("span",{children:["Rank ",E,":"]}),r.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:R?`Level ${R}`:"No requirement"})]},E)}),r.jsxs("div",{className:"text-muted-foreground mt-2 italic",children:["Current: Level ",e.currentSkillLevel||0]})]}):(()=>{const E=wN(e,1),R=e.currentSkillLevel||0;return E?r.jsxs("div",{className:"text-xs font-medium pt-1 text-blue-600 dark:text-blue-400",children:["Required Level: ",E,r.jsx("br",{}),r.jsxs("span",{className:"text-muted-foreground",children:["Current: Level ",R]})]}):null})(),l>1&&r.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[r.jsx("strong",{children:"Current:"})," ",e.currentRank||0,"/",l," ","ranks",r.jsx("br",{}),r.jsx("em",{children:"Click to cycle through available ranks"})]})]})})})]})},JA=h.memo(DZ);function kg({skills:e,onSelect:t,placeholder:s="Search skills...",className:n="",disabled:a=!1}){const[i,o]=h.useState(""),[l,c]=h.useState(!1),u=Vr("(max-width: 640px)");h.useRef(null);const d=h.useMemo(()=>{if(!i.trim())return e;const p=i.toLowerCase();return e.filter(x=>x.name.toLowerCase().includes(p)||x.description.toLowerCase().includes(p)||x.category.toLowerCase().includes(p)||x.keyAbilities.some(w=>w.toLowerCase().includes(p))||x.metaTags.some(w=>w.toLowerCase().includes(p)))},[e,i]),f=h.useMemo(()=>d.map(p=>{var x;return{id:p.edid,label:p.name,description:p.description,category:p.category,badge:p.category&&r.jsx(Q,{variant:"outline",className:"text-xs",children:p.category}),metadata:{originalSkill:p,keyAbilitiesCount:((x=p.keyAbilities)==null?void 0:x.length)||0,scaling:p.scaling}}}),[d]),m=h.useCallback(p=>{t(p),o(p.name)},[t]),g=h.useCallback(p=>{const x=e.find(w=>w.edid===p.id);x&&(t(x),o(x.name))},[e,t]),b=h.useMemo(()=>(p,x)=>{var w,N;return r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(zr,{skillName:p.label,size:"sm",className:"flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium truncate",children:p.label}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[p.badge&&r.jsx("div",{className:"flex-shrink-0",children:p.badge}),((w=p.metadata)==null?void 0:w.keyAbilitiesCount)&&p.metadata.keyAbilitiesCount>0&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.metadata.keyAbilitiesCount," ability",p.metadata.keyAbilitiesCount!==1?"s":""]})]}),p.description&&r.jsx(we,{text:p.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"}),((N=p.metadata)==null?void 0:N.scaling)&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[r.jsx("strong",{children:"Scaling:"})," ",p.metadata.scaling]})]})]})},[]),y=h.useMemo(()=>({data:e,search:p=>{const x=p.toLowerCase();return e.filter(w=>{var N;return w.name.toLowerCase().includes(x)||((N=w.description)==null?void 0:N.toLowerCase().includes(x))})}}),[e]),v=h.useCallback((p,x,w)=>r.jsx(G,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:w,children:r.jsxs("div",{className:"flex items-start gap-3 w-full",children:[r.jsx(zr,{skillName:p.name,size:"sm",className:"flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium truncate",children:p.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[p.category&&r.jsx(Q,{variant:"outline",className:$("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:p.category}),p.keyAbilities&&p.keyAbilities.length>0&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.keyAbilities.length," ability",p.keyAbilities.length!==1?"s":""]})]}),p.description&&r.jsx(we,{text:p.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"}),p.scaling&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[r.jsx("strong",{children:"Scaling:"})," ",p.scaling]})]})]})}),[]);return u?r.jsx($l,{isOpen:l,onOpenChange:c,onSelect:m,searchPlaceholder:"Search skills...",title:"Select Skill",description:"Choose a skill from the options below",triggerText:i,triggerPlaceholder:s,store:y,renderListItem:v,emptyMessage:"No skills found",className:n,disabled:a}):r.jsx(Mu,{options:f,onSelect:g,placeholder:s,className:n,disabled:a,renderOption:b,emptyMessage:"No skills found",searchQuery:i,onSearchQueryChange:o})}function PZ(e,t){const s=new Map;return t.forEach(n=>{var o;const a=n.treeId,i=((o=n.perks)==null?void 0:o.length)||0;s.set(a,i)}),s}function Wy(){const{data:e,loading:t,error:s,reload:n}=ZF(),{data:a,loading:i,error:o,reload:l}=uy(),c=t||i,u=s||o;return{skills:h.useMemo(()=>{if(!e||!a)return[];const m=PZ(e,a);return e.map(g=>({id:g.edid,name:g.name,category:g.category,description:g.description,keyAbilities:g.keyAbilities||[],metaTags:g.metaTags||[],assignmentType:"none",canAssignMajor:!0,canAssignMinor:!0,level:0,totalPerks:m.get(g.edid)||0,selectedPerksCount:0,selectedPerks:[],isSelected:!1}))},[e,a]),perkTrees:a||[],loading:c,error:u,refreshSkills:async()=>{await Promise.all([n(),l()])}}}function LZ(){const{skills:e,loading:t,error:s}=Wy(),{build:n,addMajorSkill:a,addMinorSkill:i,removeMajorSkill:o,removeMinorSkill:l}=Ye(),c=h.useMemo(()=>{var v,p;return!((v=n==null?void 0:n.skills)!=null&&v.major)||!((p=n==null?void 0:n.skills)!=null&&p.minor)?e.map(x=>({...x,isMajor:!1,isMinor:!1,selectedPerksCount:0,startingLevel:0,minLevel:0,canAssignMajor:!0,canAssignMinor:!0})):e.map(x=>{var M,E,R;const w=n.skills.major.includes(x.id),N=n.skills.minor.includes(x.id),j=((E=(M=n.perks)==null?void 0:M.selected)==null?void 0:E[x.id])||[],_=j.length,k=Mm(x.id,n),A=Dm(x.id,j,((R=n.perks)==null?void 0:R.ranks)||{}),S=!w&&n.skills.major.length<3,C=!N&&n.skills.minor.length<6;return{...x,isMajor:w,isMinor:N,selectedPerksCount:_,startingLevel:k,minLevel:A,canAssignMajor:S,canAssignMinor:C}})},[e,n]),u=h.useMemo(()=>c.filter(v=>v.isMajor),[c]),d=h.useMemo(()=>c.filter(v=>v.isMinor),[c]),f=h.useMemo(()=>c.filter(v=>!v.isMajor&&!v.isMinor),[c]);return{skills:c,selectedMajorSkills:u,selectedMinorSkills:d,availableSkills:f,loading:t,error:s,handleMajorSkillSelect:v=>{a(v.id)},handleMinorSkillSelect:v=>{i(v.id)},handleMajorSkillRemove:v=>{o(v)},handleMinorSkillRemove:v=>{l(v)}}}function zZ(e){const[t,s]=h.useState(""),[n,a]=h.useState(null),i=h.useMemo(()=>e.filter(c=>{const u=c.name.toLowerCase().includes(t.toLowerCase())||c.description.toLowerCase().includes(t.toLowerCase())||c.category.toLowerCase().includes(t.toLowerCase())||c.keyAbilities.some(f=>f.toLowerCase().includes(t.toLowerCase()))||c.metaTags.some(f=>f.toLowerCase().includes(t.toLowerCase())),d=!n||c.category===n;return u&&d}),[e,t,n]),o=h.useMemo(()=>{const c=new Set(e.map(u=>u.category));return Array.from(c).sort()},[e]);return{searchQuery:t,setSearchQuery:s,selectedCategory:n,setSelectedCategory:a,filteredSkills:i,categories:o,clearFilters:()=>{s(""),a(null)}}}function Yy(e){const{data:t,loading:s,error:n}=uy(),{getSkillPerks:a,getPerkRank:i,addPerk:o,removePerk:l,setPerkRank:c,clearSkillPerks:u,build:d,updateBuild:f}=Ye(),m=h.useMemo(()=>!e||!t?null:t.find(N=>N.treeId===e)||null,[e,t]),g=h.useMemo(()=>e?a(e):[],[e,a]),b=h.useMemo(()=>{if(!e||!m)return{};const w={};return m.perks.forEach(N=>{w[N.edid]=i(N.edid)}),w},[e,m,i]),y=h.useMemo(()=>{if(!m)return[];const w=[];return m.perks.forEach(N=>{if(N.isRoot){w.push(N.edid);return}(N.connections.parents||[]).every(k=>g.includes(k))&&w.push(N.edid)}),w},[m,g]);return{perkTrees:t||[],selectedPerkTree:m,selectedPerks:g,perkRanks:b,availablePerks:y,loading:s,error:n,handlePerkSelect:w=>{if(!e)return;g.includes(w)?l(e,w):o(e,w)},handlePerkRankChange:(w,N)=>{var _,k;if(console.log("ðŸ”§ usePerkData handlePerkRankChange called:",{perkId:w,newRank:N,skillId:e}),!e){console.log("âŒ No skillId, returning early");return}const j=i(w)||0;if(console.log("ðŸ“Š Current rank:",j,"Target rank:",N),console.log("ðŸ“‹ Selected perks:",g),console.log("ðŸŽ¯ Perk in selected perks:",g.includes(w)),N===0)console.log("ðŸ”„ Going to rank 0, removing perk"),g.includes(w)?(console.log("ðŸ—‘ï¸ Removing perk from selected perks"),l(e,w)):console.log("âš ï¸ Perk not in selected perks, but trying to set rank to 0"),console.log("ðŸ“‰ Setting rank to 0"),c(w,0);else{const A=((_=d==null?void 0:d.perks)==null?void 0:_.selected)??{},S=((k=d==null?void 0:d.perks)==null?void 0:k.ranks)??{},C=A[e]??[];let M={...A},E={...S};g.includes(w)||(console.log("âž• Adding perk to selected perks (was missing)"),M[e]=[...C,w]),console.log("ðŸ”„ Setting rank to:",N),E[w]=N;const R={...d==null?void 0:d.perks,selected:M,ranks:E},T=fc(R);f({perks:R,skillLevels:T}),console.log("ðŸ”„ Build updated with perk selection and rank")}},handleResetPerks:()=>{e&&u(e)}}}function eR(){const{skills:e,loading:t,error:s,refreshSkills:n}=Wy(),{build:a,majorSkills:i,minorSkills:o,addMajorSkill:l,addMinorSkill:c,removeMajorSkill:u,removeMinorSkill:d,addPerk:f,removePerk:m,setPerkRank:g,getPerkRank:b,getSkillPerks:y}=Ye(),{searchQuery:v,setSearchQuery:p,selectedCategory:x,setSelectedCategory:w,filteredSkills:N,categories:j,clearFilters:_}=zZ(e),k=h.useMemo(()=>N.map(H=>{const Z=y(H.id),K=Z.length,ue=H.totalPerks??0,te=Mm(H.id,a),ye=Dm(H.id,Z,{});return{...H,selectedPerksCount:K,level:te+ye,startingLevel:te,minLevel:ye,assignmentType:i.includes(H.id)?"major":o.includes(H.id)?"minor":"none",canAssignMajor:!i.includes(H.id)&&i.length<3,canAssignMinor:!o.includes(H.id)&&o.length<6,perkCount:`${K}/${ue}`}}),[N,a,i,o,y]),A=h.useMemo(()=>{const H=k.reduce((Z,K)=>Z+(K.selectedPerksCount||0),0);return{majorCount:i.length,minorCount:o.length,majorLimit:3,minorLimit:6,canAssignMajor:i.length<3,canAssignMinor:o.length<6,totalSkills:k.length,totalPerks:H,totalPerkRanks:0}},[k,i,o]),S=h.useCallback(H=>{i.includes(H)?u(H):l(H)},[i,l,u]),C=h.useCallback(H=>{o.includes(H)?d(H):c(H)},[o,c,d]),M=h.useCallback(H=>{u(H),d(H)},[u,d]),[E,R]=h.useState(null),T=h.useCallback(H=>{R(H)},[]),O=h.useMemo(()=>E&&k.find(H=>H.id===E)||null,[E,k]),{selectedPerkTree:P,handleResetPerks:B}=Yy(E),L=h.useMemo(()=>O?y(O.id):[],[O,y]),D=h.useMemo(()=>{if(!O)return{};const H=y(O.id),Z={};return H.forEach(K=>{Z[K]=b(K)}),Z},[O,y,b]),I=h.useMemo(()=>P?P.perks||[]:[],[P]),F=h.useCallback(H=>{if(!O)return;L.includes(H)?m(O.id,H):f(O.id,H)},[O,L,f,m]),U=h.useCallback((H,Z)=>{if(console.log("ðŸ”§ handlePerkRankChange called:",{perkId:H,rank:Z,selectedSkill:O==null?void 0:O.id}),!O){console.log("âŒ No selected skill, returning early");return}const K=b(H)||0;console.log("ðŸ“Š Current rank:",K,"Target rank:",Z),console.log("ðŸ“‹ Selected perks:",L),console.log("ðŸŽ¯ Perk in selected perks:",L.includes(H)),Z===0?(console.log("ðŸ”„ Going to rank 0, removing perk"),L.includes(H)&&(console.log("ðŸ—‘ï¸ Removing perk from selected perks"),m(O.id,H)),console.log("ðŸ“‰ Setting rank to 0"),g(H,0)):(L.includes(H)||(console.log("âž• Adding perk to selected perks (was missing)"),f(O.id,H)),console.log("ðŸ”„ Setting rank to:",Z),g(H,Z))},[O,L,f,m,g,b]);return{skills:k,skillSummary:A,selectedSkill:O,selectedSkillId:E,perkTree:P,selectedPerks:L,perkRanks:D,availablePerks:I,loading:t,error:s,searchQuery:v,setSearchQuery:p,selectedCategory:x,setSelectedCategory:w,categories:j,clearFilters:_,onAssignMajor:S,onAssignMinor:C,onRemoveAssignment:M,onSkillSelect:T,onPerkSelect:F,onPerkRankChange:U,onResetPerks:B,refreshSkills:n}}function OZ(e){const t=new Set,s=[],n=(a,i)=>{if(t.has(a))return;t.add(a),i.push(e.find(l=>l.edid===a));const o=e.find(l=>l.edid===a);o.connection.children.forEach(l=>{e.some(c=>c.edid===l)&&n(l,i)}),o.connection.parents.forEach(l=>{e.some(c=>c.edid===l)&&n(l,i)})};return e.forEach(a=>{if(!t.has(a.edid)){const i=[];n(a.edid,i),s.push(i)}}),s}function BZ(e,t){try{if(e.length===0)return[];const a=OZ(e).map(l=>IZ(l)).map(l=>$Z(l,t)),i=HZ(a,t);return tR(i,t)}catch{return e.map(n=>({id:n.edid,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0}))}}function IZ(e){const t=new Map;e.forEach(l=>{t.set(l.edid,{perk:l,depth:-1,children:l.connection.children,parents:l.connection.parents,x:0,y:0,width:0})});const s=[];t.forEach((l,c)=>{l.parents.length===0&&s.push(c)});const n=s.map(l=>({id:l,depth:0})),a=new Set;for(;n.length>0;){const{id:l,depth:c}=n.shift();if(a.has(l))continue;a.add(l);const u=t.get(l);u&&((u.depth===-1||c<u.depth)&&(u.depth=c),u.children.forEach(d=>{t.has(d)&&!a.has(d)&&n.push({id:d,depth:c+1})}))}let i=!0,o=0;for(;i&&o<10;)i=!1,o++,t.forEach((l,c)=>{if(l.parents.length>1){const u=l.parents.map(d=>{const f=t.get(d);return f?f.depth:-1}).filter(d=>d!==-1);if(u.length>0){const f=Math.min(...u)+1;l.depth!==f&&(l.depth=f,i=!0)}}});return t.forEach((l,c)=>{l.children.forEach(u=>{const d=t.get(u);if(d&&d.depth<=l.depth){const f=l.depth+1;d.depth=f}})}),{nodes:t,roots:s}}function $Z(e,t){const{nodes:s,roots:n}=e,a=[];if(s.forEach((f,m)=>{a.push({id:m,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0,children:f.children})}),a.some(f=>{try{return rx(f.id,s,t,new Set),!1}catch{return!0}}))return a.forEach(f=>{const m=s.get(f.id);if(m&&m.perk){const g=m.perk.position.x*t.gridScaleX,b=-m.perk.position.y*t.gridScaleY;f.x=g,f.y=b,f.originalX=g,f.originalY=b}}),FZ(a,t),a;const o=a.filter(f=>!a.some(g=>{var b;return g.id!==f.id&&((b=g.children)==null?void 0:b.includes(f.id))}));o.forEach(f=>{f.y=0,f.originalY=0});const l=new Set,c=o.map(f=>({node:f,depth:0}));for(;c.length>0;){const{node:f,depth:m}=c.shift();l.has(f.id)||(l.add(f.id),m>0&&(f.y=-m*t.verticalSpacing,f.originalY=f.y),f.children&&f.children.forEach(g=>{const b=a.find(y=>y.id===g);b&&!l.has(g)&&c.push({node:b,depth:m+1})}))}const u=new Map;return a.forEach(f=>{const m=Math.round(f.y/t.verticalSpacing);u.has(m)||u.set(m,[]),u.get(m).push(f)}),Array.from(u.keys()).sort((f,m)=>m-f).forEach(f=>{u.get(f).forEach(g=>{if(g.children){const b=new Map;g.children.forEach(y=>{const v=a.find(p=>p.id===y);if(v){const p=a.filter(x=>{var w;return((w=x.children)==null?void 0:w.includes(y))&&Math.abs(x.y-v.y)===t.verticalSpacing});p.length>0&&p.some(x=>x.id===g.id)&&(b.has(g.id)||b.set(g.id,[]),b.get(g.id).push(v))}}),b.forEach((y,v)=>{if(y.length>0){const p=a.find(x=>x.id===v);if(p){const x=y.map(k=>{const A=rx(k.id,s,t);return{child:k,subtreeWidth:A}}),w=x.reduce((k,{subtreeWidth:A})=>k+A,0),N=(y.length-1)*t.horizontalSpacing,j=w+N;let _=p.x-j/2;x.forEach(({child:k,subtreeWidth:A})=>{k.x=_+A/2,k.originalX=k.x,_+=A+t.horizontalSpacing})}}})}})}),tR(a,t),a}function tR(e,t){const a=t.horizontalSpacing*.4,i=new Map;e.forEach(o=>{i.set(o.id,{x:o.x,y:o.y})});for(let o=0;o<5;o++){let l=0;for(let c=0;c<e.length;c++)for(let u=c+1;u<e.length;u++){const d=e[c],f=e[u],m=d.x+t.nodeWidth*.5,g=d.y+t.nodeHeight*.5,b=f.x+t.nodeWidth*.5,y=f.y+t.nodeHeight*.5,v=b-m,p=y-g,x=Math.sqrt(v*v+p*p);if(x<a&&x>0){const w=v/x*.03,N=p/x*.03;d.x-=w,d.y-=N,f.x+=w,f.y+=N,l++}}if(l===0)break}return e.forEach(o=>{const l=i.get(o.id);if(!l)return;const c=l.x-o.x,u=l.y-o.y,d=o.x+c*.02,f=o.y+u*.02,g=Math.round(l.y/t.verticalSpacing)*t.verticalSpacing,b=Math.max(f,g);o.x=d,o.y=b,o.originalX=d,o.originalY=b}),e}function FZ(e,t){const a=t.nodeHeight*.8,i=50,o=new Map;e.forEach(u=>{o.set(u.id,{x:u.x,y:u.y})});let l=0,c=1;for(;c>0&&l<i;){l++,c=0;for(let u=0;u<e.length;u++)for(let d=u+1;d<e.length;d++){const f=e[u],m=e[d],g=Math.max(0,Math.min(f.x+t.nodeWidth,m.x+t.nodeWidth)-Math.max(f.x,m.x)),b=Math.max(0,Math.min(f.y+t.nodeHeight,m.y+t.nodeHeight)-Math.max(f.y,m.y)),y=f.y+t.nodeHeight*.5,v=m.y+t.nodeHeight*.5,p=Math.abs(v-y),x=p<a;if(g>0&&b>0||x){c++;let w=0;g>0&&b>0?w=b*.08:x&&(w=(a-p)*.08),f.y<m.y?(f.y-=w,m.y+=w):(f.y+=w,m.y-=w)}}if(c===0)break}return e.forEach(u=>{const d=o.get(u.id);if(!d)return;const f=d.y-u.y,m=u.y+f*.03;u.y=m,u.originalY=m}),e}function HZ(e,t){const s=[],n=e.map(c=>{const u=Math.max(...c.map(w=>w.y)),d=c.filter(w=>Math.abs(w.y-u)<1),f=d.map(w=>w.x),m=Math.min(...f),g=Math.max(...f),b=g-m,y=f.reduce((w,N)=>w+N,0)/f.length,v=Math.min(...c.map(w=>w.x)),p=Math.max(...c.map(w=>w.x+w.width)),x=p-v;return{treeNodes:c,rootNodes:d,minRootX:m,maxRootX:g,rootWidth:b,rootCenterX:y,minX:v,maxX:p,treeWidth:x}}),a=Math.min(...n.map(c=>c.minRootX)),o=Math.max(...n.map(c=>c.maxRootX))-a;let l=0;return n.forEach(c=>{const u=o>0?c.rootWidth/o:1,d=c.minRootX-a;l-c.minX+d*u,c.treeNodes.forEach(f=>{const g=(f.x-c.minRootX)*u,b=l+g;s.push({...f,x:b,originalX:b})}),l+=c.treeWidth*u+t.horizontalSpacing}),s}function rx(e,t,s,n=new Set){if(n.has(e))throw new Error(`Circular reference detected for perkId: ${e}`);const a=t.get(e);if(!a)return s.nodeWidth;n.add(e);const i=a.children||[],o=i.map(c=>rx(c,t,s,new Set(n)));if(o.length===0)return s.nodeWidth;let l=0;return o.forEach((c,u)=>{l+=c,u<i.length-1&&(l+=s.horizontalSpacing)}),Math.max(l,s.nodeWidth)}function UZ(e){return e.perks.map(t=>({edid:t.edid,name:t.name,position:t.position,connection:t.connections}))}const GZ={perkNode:e=>r.jsx(JA,{...e,onTogglePerk:e.data.onTogglePerk,onRankChange:e.data.onRankChange})};function VZ({tree:e,onTogglePerk:t,onRankChange:s,selectedPerks:n,currentSkillLevel:a}){const[i,o]=z.useState(null),[l,c]=z.useState(null),[u,d]=z.useState(!1),f=z.useCallback((E,R)=>{},[]),m=h.useMemo(()=>{if(!e)return null;const E=XA(e);return E.success?E.data:(console.error("Invalid perk tree data:",E.error),null)},[e]);z.useEffect(()=>{if(!m){c(null);return}d(!0),KA(m.treeId).then(E=>{c(E)}).catch(E=>{c(null)}).finally(()=>{d(!1)})},[m==null?void 0:m.treeId]);const g=h.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),b=h.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),y=h.useMemo(()=>{if(!m)return[];if(l&&!u){const E=RZ(m,l,b);return Array.from(E.entries()).map(([R,T])=>({id:R,x:T.x,y:T.y,width:b.nodeWidth||140,height:b.nodeHeight||80,originalX:T.x,originalY:T.y}))}else{const E=UZ(m);return BZ(E,g)}},[m,g,l,u,b]),v=h.useMemo(()=>!m||y.length===0?[]:m.perks.map(E=>{const R=E.edid,T=y.find(L=>L.id===R),O=T?{x:T.x,y:T.y}:{x:0,y:0},P=E.connections.children.length>0,B=E.connections.parents.length===0;return{id:R,type:"perkNode",position:O,draggable:!1,data:{...E,hasChildren:P,isRoot:B,currentSkillLevel:a,onTogglePerk:t,onRankChange:s}}}),[m,y,t,s,a]),p=h.useMemo(()=>v.map(E=>{const R=n.find(P=>P.edid===E.id),T=(R==null?void 0:R.selected)||!1,O=(R==null?void 0:R.currentRank)||0;return{...E,data:{...E.data,selected:T,currentRank:O}}}),[v,n]),x=h.useMemo(()=>{if(!m)return[];const E=[];return m.perks.forEach(R=>{const T=R.edid;R.connections.children.length>0&&R.connections.children.forEach(O=>{if(O===T)return;m.perks.some(B=>B.edid===O)&&E.push({id:`${T}-${O}`,source:T,target:O,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),E},[m]),[w,N,j]=VA([]),[_,k,A]=qA([]);z.useEffect(()=>{N(p)},[p,N]),z.useEffect(()=>{k(x)},[x,k]),z.useEffect(()=>{m&&w.length>0&&i&&setTimeout(()=>{i.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[m==null?void 0:m.treeId,i]);const S=h.useCallback(E=>k(R=>Hy(E,R)),[k]),C=h.useCallback(E=>{E.stopPropagation()},[]),M=h.useCallback(E=>{E.stopPropagation()},[]);return m?r.jsxs("div",{className:"w-full h-full bg-background rounded-lg border",style:{zIndex:_t.CONTENT,position:"relative"},onMouseDown:E=>E.stopPropagation(),onTouchStart:E=>E.stopPropagation(),children:[r.jsx("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-1",children:r.jsx("div",{className:"bg-primary text-primary-foreground px-2 py-1 rounded text-xs font-medium",children:u?"Loading Positions...":l?"Positioned Tree":"Algorithm v2"})}),r.jsxs(Zy,{nodes:w,edges:_,onNodesChange:j,onEdgesChange:A,onConnect:S,onInit:o,nodeTypes:GZ,nodesDraggable:!1,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},onNodeDragStop:f,onMouseDown:C,onTouchStart:M,onDoubleClick:E=>E.preventDefault(),panOnDrag:!0,panOnScroll:!1,preventScrolling:!0,style:{backgroundColor:"hsl(var(--background))",zIndex:1},children:[r.jsx(YA,{}),r.jsx(ZA,{})]})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20 rounded-lg",children:r.jsx("p",{className:"text-muted-foreground",children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function sR({open:e,onOpenChange:t,selectedSkill:s,skillName:n,perkTree:a,skills:i,onSkillSelect:o,onReset:l}){var _,k;const{selectedPerks:c,perkRanks:u,handlePerkSelect:d,handlePerkRankChange:f,handleResetPerks:m}=Yy(s),{getSkillLevel:g}=Ye(),b=s?g(s):void 0,y=z.useMemo(()=>a?a.perks.map(A=>({...A,selected:c.includes(A.edid),currentRank:u[A.edid]||0})):[],[a,c,u]),v=z.useCallback(A=>{d(A)},[d]),p=z.useCallback((A,S)=>{f(A,S)},[f]),x=()=>{m(),l()},w=()=>{t(!1)},N=[{id:"skills",name:"Skills",placeholder:"Search skills...",options:i.map(A=>({id:A.id,label:A.name,value:A.id,category:"Skills",description:`${A.selectedPerks}/${A.totalPerks} perks selected`}))}],j=A=>{o(A.value)};return s?r.jsx(my,{open:e,onOpenChange:t,shouldScaleBackground:!1,dismissible:!0,children:r.jsxs(Y2,{children:[r.jsx(hy,{}),r.jsxs(fy,{className:"fixed inset-x-0 bottom-0 z-50 mt-24 flex flex-col rounded-t-[10px] border bg-background h-[85vh] bg-card border-t shadow-lg !bg-card","data-vaul-no-drag":!0,style:{backgroundColor:"hsl(var(--card))",zIndex:_t.DRAWER},children:[r.jsx(gy,{className:"border-b",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-64",children:r.jsx(fi,{categories:N,onSelect:j,placeholder:"Search skills..."})}),r.jsxs("div",{className:"flex items-center gap-3",children:[n&&r.jsx(zr,{skillName:n,size:"lg",className:"flex-shrink-0"}),r.jsxs("div",{children:[r.jsx(py,{className:"text-xl",children:n||(a==null?void 0:a.treeName)||"Skill Perks"}),r.jsxs(xy,{className:"flex items-center gap-2",children:[r.jsxs("span",{children:[c.length," perks selected"]}),((_=i.find(A=>A.id===s))==null?void 0:_.minLevel)>0&&r.jsxs("span",{className:"text-blue-600 font-medium",children:["â€¢ Min: Level"," ",(k=i.find(A=>A.id===s))==null?void 0:k.minLevel]})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(G,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:[r.jsx(Ma,{className:"h-4 w-4"}),"Reset Perks"]}),r.jsx(G,{variant:"outline",size:"sm",onClick:w,className:"flex items-center gap-2",children:r.jsx(ze,{className:"h-4 w-4"})})]})]})}),r.jsx("div",{className:"flex-1 overflow-hidden",style:{height:"400px"},children:r.jsx("div",{className:"h-full w-full bg-muted/20 rounded",children:a?r.jsx(VZ,{tree:a,onTogglePerk:v,onRankChange:p,selectedPerks:y,currentSkillLevel:b}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("p",{className:"text-muted-foreground",children:s?"Loading perk tree...":"No skill selected"})})})}),r.jsx(K2,{className:"border-t",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on perk nodes to select/deselect them"}),r.jsx(G,{variant:"outline",onClick:w,children:"Close"})]})})]})]})}):null}function qZ({skills:e,loading:t,error:s,searchQuery:n,onSearchChange:a,selectedCategory:i,onCategorySelect:o,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:g,perkTree:b,skillSummary:y}){var w;const[v,p]=h.useState(!1);if(t)return r.jsx(x7,{});if(s)return r.jsx(y7,{error:s});const x=e.map(N=>({id:N.id,name:N.name,category:N.category,description:N.description,keyAbilities:N.keyAbilities||[],metaTags:N.metaTags||[],assignmentType:N.assignmentType,canAssignMajor:N.canAssignMajor,canAssignMinor:N.canAssignMinor,minLevel:N.minLevel,startingLevel:N.startingLevel,totalPerks:N.totalPerks,selectedPerksCount:N.selectedPerksCount,selectedPerks:N.selectedPerks||[],isSelected:N.isSelected||!1,isMajor:N.assignmentType==="major",isMinor:N.assignmentType==="minor"}));return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Available Skills"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.length," skills found"]})]}),r.jsx(b7,{skills:e,onSkillSelect:N=>{u(N),p(!0)},onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,selectedSkillId:c||void 0})]}),r.jsx(sR,{open:v,onOpenChange:p,selectedSkill:c,skillName:c?(w=e.find(N=>N.id===c))==null?void 0:w.name:void 0,perkTree:b||void 0,skills:x,onSkillSelect:u,onReset:g}),r.jsxs("div",{className:"p-6 bg-muted/50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"How to Assign Skills"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Major Skills (0-3)"}),r.jsx("p",{children:"Your primary skills that level up faster and start at a higher level."})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Minor Skills (0-6)"}),r.jsx("p",{children:"Secondary skills that provide additional benefits and customization."})]})]})]})]})}function nR({className:e}){var M;const{selectedMajorSkills:t,selectedMinorSkills:s,availableSkills:n,handleMajorSkillSelect:a,handleMinorSkillSelect:i,handleMajorSkillRemove:o,handleMinorSkillRemove:l}=LZ(),{build:c,getSkillLevel:u,getSkillPerks:d}=Ye(),{skills:f}=Wy(),m=lt(),[g,b]=h.useState(null),[y,v]=h.useState(!1),p=()=>{m("/build/perks")},x=E=>{b(E),v(!0)},w=E=>{b(E.edid),v(!0)},N=h.useMemo(()=>{const E=t.map(O=>O.id),R=s.map(O=>O.id),T=[...E,...R];return f.filter(O=>d(O.id).length>0&&!T.includes(O.id))},[f,t,s,d]),j=h.useMemo(()=>{const E=t.map(P=>P.id),R=s.map(P=>P.id),T=[...E,...R],O=N.map(P=>P.id);return f.filter(P=>!T.includes(P.id)&&!O.includes(P.id)).map(P=>({name:P.name,edid:P.id,category:P.category,description:P.description,scaling:"",keyAbilities:P.keyAbilities||[],metaTags:P.metaTags||[]}))},[f,t,s,N]),_=h.useCallback(E=>({name:E.name,edid:E.id,category:E.category,description:E.description,scaling:E.scaling||"",keyAbilities:E.keyAbilities||[],metaTags:E.metaTags||[]}),[]),k=h.useMemo(()=>n.map(_),[n,_]),A=f.map(E=>{var L,D,I,F,U,H,Z,K;d(E.id);const R=u(E.id),T=((D=(L=c==null?void 0:c.skills)==null?void 0:L.major)==null?void 0:D.includes(E.id))||!1,O=((F=(I=c==null?void 0:c.skills)==null?void 0:I.minor)==null?void 0:F.includes(E.id))||!1,P=!T&&(((H=(U=c==null?void 0:c.skills)==null?void 0:U.major)==null?void 0:H.length)||0)<3,B=!O&&(((K=(Z=c==null?void 0:c.skills)==null?void 0:Z.minor)==null?void 0:K.length)||0)<6;return{...E,isMajor:T,isMinor:O,canAssignMajor:P,canAssignMinor:B,level:R}}),{selectedPerkTree:S}=Yy(g),C=(E,R)=>{const T=d(E.id||E.edid),O=E.totalPerks||0,P=E.id||E.edid,B=E.minLevel!==void 0?E.minLevel:u(E.id||E.edid);let L="cursor-pointer transition-all hover:shadow-md ",D="text-xs ";switch(R){case"major":L+="bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",D+="bg-yellow-100 text-yellow-800 border-yellow-300";break;case"minor":L+="bg-gray-50/50 border-gray-300 shadow-gray-300/20",D+="bg-gray-100 text-gray-800 border-gray-300";break;case"perked":L+="bg-blue-50/50 border-blue-500 shadow-blue-500/20",D+="bg-blue-100 text-blue-800 border-blue-300";break}return r.jsx(ae,{className:L,onClick:()=>x(P),children:r.jsx(oe,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(zr,{skillName:E.name,size:"2xl",className:"flex-shrink-0"}),r.jsx("h5",{className:"font-medium text-sm text-foreground",children:E.name}),r.jsx(El,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(we,{text:E.description,className:"text-xs text-muted-foreground line-clamp-2 mb-3",as:"p"}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(wE,{level:B,size:"sm"}),E.startingLevel>0&&r.jsxs(Q,{variant:"outline",className:"text-xs bg-green-100 text-green-800 border-green-300",children:["Starting: ",E.startingLevel]}),r.jsxs(Q,{variant:"outline",className:D,children:[T.length,"/",O," perks"]}),R==="major"&&r.jsx(Q,{variant:"outline",className:"text-xs bg-yellow-100 text-yellow-800 border-yellow-300",children:"Major"}),R==="minor"&&r.jsx(Q,{variant:"outline",className:"text-xs bg-gray-100 text-gray-800 border-gray-300",children:"Minor"}),R==="perked"&&r.jsx(Q,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800 border-blue-300",children:"Perked"}),R==="assigned"&&r.jsx(Q,{variant:"outline",className:"text-xs bg-orange-100 text-orange-800 border-orange-300",children:"Assigned"})]})]}),(R==="major"||R==="minor")&&r.jsx(G,{size:"sm",variant:"ghost",onClick:I=>{I.stopPropagation(),R==="major"?o(P):l(P)},className:`${R==="major"?"text-yellow-600 hover:text-yellow-700 hover:bg-yellow-100":"text-gray-600 hover:text-gray-700 hover:bg-gray-100"}`,children:r.jsx(ze,{className:"h-4 w-4"})})]})})},P)};return r.jsxs(r.Fragment,{children:[r.jsxs(ts,{title:"Skills & Perks",navigateTo:"skills",onNavigate:p,className:e,children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-md font-medium text-foreground",children:"Major Skills"}),t.length<3&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(Q,{variant:"outline",className:"text-xs",children:[t.length,"/3"]})}),r.jsx(kg,{skills:k,onSelect:E=>{const R=n.find(T=>T.id===E.edid);R&&a(R)},placeholder:"Select major skill...",className:"w-full"})]}),t.length>0&&r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:t.map(E=>C(E,"major"))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-md font-medium text-foreground",children:"Minor Skills"}),s.length<6&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(Q,{variant:"outline",className:"text-xs",children:[s.length,"/6"]})}),r.jsx(kg,{skills:n.map(_),onSelect:E=>{const R=n.find(T=>T.id===E.edid);R&&i(R)},placeholder:"Select minor skill...",className:"w-full"})]}),s.length>0&&r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:s.map(E=>C(E,"minor"))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-md font-medium text-foreground",children:"Other Perked Skills"}),r.jsx("div",{className:"space-y-2",children:r.jsx(kg,{skills:j,onSelect:w,placeholder:"Select skill to add perks...",className:"w-full"})}),N.length>0&&r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:N.map(E=>C(E,"perked"))})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on any skill card to view and manage its perk tree. Min levels show the minimum level required by your selected perks. Starting levels show your base skill level from race bonuses and major/minor assignments."})})]}),r.jsx(sR,{open:y,onOpenChange:v,selectedSkill:g,skillName:g?(M=f.find(E=>E.id===g))==null?void 0:M.name:void 0,perkTree:S||void 0,skills:A,onSkillSelect:b,onReset:()=>{}})]})}function NN({item:e,className:t,allTraitIds:s,disableHover:n=!1}){e.originalTrait;const{hasRegularTrait:a,hasBonusTrait:i,addRegularTrait:o,addBonusTrait:l,removeTrait:c,canAddRegularTrait:u,canAddBonusTrait:d,build:f}=Ye(),g=a(e.id)?"primary":i(e.id)?"secondary":"none",b=x=>{g===x?c(e.id):(c(e.id),x==="primary"&&u()?o(e.id):x==="secondary"&&d()&&l(e.id))},y=!u()&&g!=="primary",v=!d()&&g!=="secondary",p=()=>g==="primary"?"border-yellow-500 bg-yellow-50/50 shadow-yellow-500/20":g==="secondary"?"border-gray-400 bg-gray-50/50 shadow-gray-400/20":"";return h.useEffect(()=>{var x,w;if(s){const N=((x=f==null?void 0:f.traits)==null?void 0:x.regular)||[],j=((w=f==null?void 0:f.traits)==null?void 0:w.bonus)||[];[...N,...j].filter(A=>!s.includes(A)).forEach(A=>c(A))}},[s,f==null?void 0:f.traits,c]),r.jsxs(xe,{expanded:!0,className:$(t,p()),disableHover:n,hideChevron:!0,children:[r.jsx(xe.Header,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-skyrim-gold/20 flex items-center justify-center",children:r.jsx(u3,{className:"h-8 w-8 text-skyrim-gold"})}),r.jsx(Ce,{className:"text-primary font-semibold",children:e.name})]})}),r.jsx(xe.Summary,{children:r.jsx(we,{text:e.description,className:"text-base text-muted-foreground"})}),r.jsx(xe.Footer,{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(G,{size:"sm",variant:g==="primary"?"default":"outline",disabled:y,className:$("flex-1 text-xs",g==="primary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:x=>{x.stopPropagation(),b("primary")},children:g==="primary"?"Remove Trait":"Starting Trait"}),r.jsx(G,{size:"sm",variant:g==="secondary"?"default":"outline",disabled:v,className:$("flex-1 text-xs",g==="secondary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:x=>{x.stopPropagation(),b("secondary")},children:g==="secondary"?"Remove Trait":"Late Game Trait"})]})})]})}function aR(e,t){const s=h.useMemo(()=>e.map(l=>{var c;return{id:l.id||l.name,name:l.name,description:l.description||"",category:l.category||"",effects:((c=l.effects)==null?void 0:c.map(u=>`${u.type} ${u.value||""}`).filter(Boolean))||[],tags:l.tags||[],originalTrait:l}}),[e]),n=h.useMemo(()=>({keys:[{name:"description",weight:.6},{name:"name",weight:.3},{name:"effects",weight:.1}],includeScore:!0,includeMatches:!0,ignoreLocation:!0,minMatchCharLength:3,threshold:.6}),[]),a=h.useMemo(()=>new ls(s,n),[s,n]),i=h.useMemo(()=>{const l=t.trim().toLowerCase();if(!l)return s.map((m,g)=>({item:m,refIndex:g,score:0,matches:[]}));const c=a.search(l),u=l.slice(0,Math.min(3,l.length));return c.map(m=>{const g=m.item.description.toLowerCase(),y=new RegExp(`\\b${u}`).test(g)?(m.score??1)*.85:m.score;return{...m,score:y}}).filter(m=>(m.score??1)<=.6).sort((m,g)=>(m.score??1)-(g.score??1))},[a,t,s]);return{filteredTraits:h.useMemo(()=>i.map(l=>l.item.originalTrait),[i]),searchResults:i,searchableTraits:s}}function Sg({traits:e,onSelect:t,placeholder:s="Search traits...",className:n="",disabled:a=!1}){const[i,o]=h.useState(""),[l,c]=h.useState(!1),u=Vr("(max-width: 640px)");h.useRef(null);const{filteredTraits:d}=aR(e,i),f=h.useMemo(()=>d.map(p=>{var x;return{id:p.edid||p.name,label:p.name,description:p.description||"",category:p.category||"",badge:p.category&&r.jsx(Q,{variant:"outline",className:"text-xs",children:p.category}),metadata:{originalTrait:p,effectsCount:((x=p.effects)==null?void 0:x.length)||0}}}),[d]),m=h.useCallback(p=>{t(p),o(p.name)},[t]),g=h.useCallback(p=>{const x=e.find(w=>(w.edid||w.name)===p.id);x&&(t(x),o(x.name))},[e,t]),b=h.useMemo(()=>(p,x)=>{var w;return r.jsx("div",{className:"flex items-start gap-3",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium truncate",children:p.label}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[p.badge&&r.jsx("div",{className:"flex-shrink-0",children:p.badge}),((w=p.metadata)==null?void 0:w.effectsCount)&&p.metadata.effectsCount>0&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.metadata.effectsCount," effect",p.metadata.effectsCount!==1?"s":""]})]}),p.description&&r.jsx(we,{text:p.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]})})},[]),y=h.useMemo(()=>({data:e,search:p=>{const x=p.toLowerCase();return e.filter(w=>{var N;return w.name.toLowerCase().includes(x)||((N=w.description)==null?void 0:N.toLowerCase().includes(x))})}}),[e]),v=h.useCallback((p,x,w)=>r.jsx(G,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:w,children:r.jsx("div",{className:"flex items-start gap-3 w-full",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium truncate",children:p.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[p.category&&r.jsx(Q,{variant:"outline",className:$("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:p.category}),p.effects&&p.effects.length>0&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.effects.length," effect",p.effects.length!==1?"s":""]})]}),p.description&&r.jsx(we,{text:p.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]})})}),[]);return u?r.jsx($l,{isOpen:l,onOpenChange:c,onSelect:m,searchPlaceholder:"Search traits...",title:"Select Trait",description:"Choose a trait from the options below",triggerText:i,triggerPlaceholder:s,store:y,renderListItem:v,emptyMessage:"No traits found",className:n,disabled:a}):r.jsx(Mu,{options:f,onSelect:g,placeholder:s,className:n,disabled:a,renderOption:b,emptyMessage:"No traits found",searchQuery:i,onSearchQueryChange:o})}function rR(e){const t=e.map(s=>s.category).filter(Boolean);return[...new Set(t)].sort()}function QZ(e){const t=e.flatMap(s=>{var n;return((n=s.effects)==null?void 0:n.map(a=>a.type))||[]});return[...new Set(t)].sort()}function iR(e){const t=e.flatMap(s=>s.tags||[]);return[...new Set(t)].sort()}function ZZ(){const[e,t]=h.useState({search:"",category:"",tags:[]}),{data:s,loading:n,error:a}=Gi(),i=h.useMemo(()=>s.filter(u=>{var d;if(e.search){const f=e.search.toLowerCase();if(![u.name,u.description,u.category,...u.tags||[],...((d=u.effects)==null?void 0:d.map(g=>g.type))||[]].join(" ").toLowerCase().includes(f))return!1}return!(e.category&&u.category!==e.category||e.tags.length>0&&!e.tags.some(m=>{var g,b;return((g=u.tags)==null?void 0:g.includes(m))||u.category===m||((b=u.effects)==null?void 0:b.some(y=>y.type===m))}))}),[s,e]),o=h.useMemo(()=>rR(s),[s]),l=h.useMemo(()=>QZ(s),[s]),c=h.useMemo(()=>iR(s),[s]);return{traits:i,allTraits:s,loading:n,error:a,filters:e,setFilters:t,allCategories:o,allEffectTypes:l,allTags:c}}function oR({className:e}){const{allTraits:t}=ZZ(),{build:s,addTraitToSlot:n,removeTrait:a,getRegularTraitLimit:i,getBonusTraitLimit:o}=Ye(),l=lt();i(),o();const c=s.traits.regular.map(b=>t.find(y=>y.edid===b)).filter(Boolean),u=s.traits.bonus.map(b=>t.find(y=>y.edid===b)).filter(Boolean),d=(b,y)=>{b.edid&&n(b.edid,y)},f=b=>{a(b)},m=()=>{l("/build/traits")},g=t.filter(b=>b.edid&&!s.traits.regular.includes(b.edid)&&!s.traits.bonus.includes(b.edid));return r.jsx(ts,{title:"Traits",navigateTo:"traits",onNavigate:m,className:e,children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-md font-medium text-foreground",children:"Starting"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{variant:"outline",className:"text-xs",children:"Slot 1"}),c[0]&&r.jsx(Q,{variant:"default",className:"text-xs",children:"Starting"})]}),c[0]?r.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-sm",children:c[0].name}),r.jsx(we,{text:c[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>f(c[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:r.jsx(ze,{className:"h-3 w-3"})})]}):r.jsx(Sg,{traits:g,onSelect:b=>d(b,"regular"),placeholder:"Select starting trait...",className:"w-full"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{variant:"outline",className:"text-xs",children:"Slot 2"}),c[1]&&r.jsx(Q,{variant:"default",className:"text-xs",children:"Starting"})]}),c[1]?r.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-sm",children:c[1].name}),r.jsx(we,{text:c[1].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>f(c[1].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:r.jsx(ze,{className:"h-3 w-3"})})]}):r.jsx(Sg,{traits:g,onSelect:b=>d(b,"regular"),placeholder:"Select starting trait...",className:"w-full"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-md font-medium text-foreground",children:"Late Game"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{variant:"outline",className:"text-xs",children:"Slot 1"}),u[0]&&r.jsx(Q,{variant:"secondary",className:"text-xs",children:"Late Game"})]}),u[0]?r.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-gray-50/50 border-gray-400 shadow-gray-400/20",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-sm",children:u[0].name}),r.jsx(we,{text:u[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>f(u[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:r.jsx(ze,{className:"h-3 w-3"})})]}):r.jsx(Sg,{traits:g,onSelect:b=>d(b,"bonus"),placeholder:"Select late game trait...",className:"w-full"})]})]})]})})}const WZ=()=>{const{build:e,resetBuild:t,getSummary:s,setBuildName:n,setBuildNotes:a}=Ye(),i=lt(),o=s(),[l,c]=h.useState(!1),u=()=>{navigator.clipboard.writeText(window.location.href)},d=()=>{confirm("Are you sure you want to reset your character build? This cannot be undone.")&&t()},f=()=>{c(!1),i("/build")},m=g=>{c(!1),i(`/build#${g}`),setTimeout(()=>{const b=document.getElementById(g);b==null||b.scrollIntoView({behavior:"smooth",block:"start"})},100)};return r.jsx("div",{className:"fixed bottom-4 right-4",style:{zIndex:_t.MODAL+1},children:r.jsxs(tl,{open:l,onOpenChange:c,children:[r.jsx(SS,{asChild:!0,children:r.jsx(G,{size:"lg",className:`h-12 w-12 rounded-full shadow-lg transition-opacity duration-200 ${l?"opacity-0 pointer-events-none":"opacity-100"}`,style:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))"},children:r.jsx(yf,{className:"h-5 w-5"})})}),r.jsx(Ci,{side:"right",className:"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0",children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs(sl,{className:"p-6 pb-4 border-b",children:[r.jsxs(nl,{className:"flex items-center gap-2",children:[r.jsx(yf,{className:"h-5 w-5"}),o.name||"Character Build"]}),r.jsx(z0,{children:"Quick reference and editing for your character build"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r.jsx(ES,{name:e.name,notes:e.notes,onNameChange:n,onNotesChange:a,className:"mb-0"}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(uE,{}),r.jsx(GC,{}),r.jsx(oR,{}),r.jsx(vE,{}),r.jsx(bE,{})]}),r.jsx(LS,{showControls:!0,showSummary:!0,compact:!1}),r.jsx(nR,{}),r.jsx(sE,{navigate:i}),r.jsx(qB,{build:e})]}),r.jsxs("div",{className:"p-6 pt-4 border-t bg-muted/50",children:[r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(G,{onClick:f,className:"flex-1",children:[r.jsx($r,{className:"w-4 h-4 mr-2"}),"Full Build Page"]}),r.jsxs(G,{variant:"outline",onClick:u,children:[r.jsx(l3,{className:"w-4 h-4 mr-2"}),"Share"]}),r.jsxs(G,{variant:"destructive",onClick:d,children:[r.jsx(o5,{className:"w-4 h-4 mr-2"}),"Reset"]})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Quick Navigation:"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[!e.race&&r.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("race"),children:"Race"}),!e.stone&&r.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("birthsign"),children:"Birthsign"}),e.traits.regular.length===0&&e.traits.bonus.length===0&&r.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("traits"),children:"Traits"}),!e.religion&&r.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("religion"),children:"Religion"}),!e.favoriteBlessing&&r.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("favorite-blessing"),children:"Favorite Blessing"}),e.skills.major.length===0&&e.skills.minor.length===0&&r.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("skills"),children:"Skills"}),e.destinyPath.length===0&&r.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("destiny"),children:"Destiny"})]})]})]})]})})]})})},YZ=e=>{const t=window.location.href,s=new URL(t);if(!s.search)return t;const n=s.hash||"#/",[a,i]=n.split("?"),o=new URLSearchParams(s.search),l=new URLSearchParams(i||"");for(const[f,m]of o.entries())l.set(f,m);const c=l.toString(),u=c?`${a}?${c}`:a;return`${s.origin}${s.pathname}${u}`},jN=()=>{const e=YZ();e!==window.location.href&&window.history.replaceState(null,"",e)},kN=()=>window.location.search.length>0,XZ=e=>{const t=WL(e);return btoa(unescape(encodeURIComponent(JSON.stringify(t)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},KZ=e=>{try{const t=e.replace(/-/g,"+").replace(/_/g,"/"),s=JSON.parse(decodeURIComponent(escape(atob(t))));return C0(s)}catch{return null}},JZ=()=>{const e=va(u=>u.build),t=va(u=>u.setBuild),s=h.useRef(!1),n=h.useRef(null),a=h.useRef(""),i=h.useMemo(()=>C0(e),[e]),o=h.useMemo(()=>{const u={v:i.v,n:i.name,o:i.notes,r:i.race,s:i.stone,g:i.religion,f:i.favoriteBlessing,t:i.traits,k:i.skills,sl:i.skillLevels,e:i.equipment,d:i.destinyPath,a:i.attributeAssignments,p:i.perks};return JSON.stringify(u)},[i]),l=h.useMemo(()=>i.name===""&&i.notes===""&&i.race===null&&i.stone===null&&i.religion===null&&i.favoriteBlessing===null&&i.traits.regular.length===0&&i.traits.bonus.length===0&&i.skills.major.length===0&&i.skills.minor.length===0&&Object.keys(i.skillLevels).length===0&&i.equipment.length===0&&i.destinyPath.length===0&&i.attributeAssignments.health===0&&i.attributeAssignments.stamina===0&&i.attributeAssignments.magicka===0&&i.attributeAssignments.level===1&&Object.keys(i.perks.selected).length===0,[i]),c=h.useCallback(u=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{const d=()=>{try{const f=XZ(u),g=window.location.hash.split("?"),b=g[0],y=g[1]||"",v=new URLSearchParams(y);l?v.delete("b"):v.set("b",f);const p=v.toString(),x=p?`${b}?${p}`:b,w=window.location.origin+window.location.pathname+x;window.history.replaceState(null,"",w),kN()&&jN()}catch(f){console.error("âŒ [URL Sync] Error updating URL:",f)}};typeof requestIdleCallback<"u"?requestIdleCallback(d,{timeout:100}):setTimeout(d,0)},1e3)},[l]);h.useEffect(()=>{if(s.current)return;const u=()=>{const d=window.location.hash,f=window.location.search;let m=null;if(d){const b=d.split("?")[1]||"";m=new URLSearchParams(b).get("b")}if(!m&&f&&(m=new URLSearchParams(f).get("b")),m)try{const g=KZ(m);if((g==null?void 0:g.v)===1||(g==null?void 0:g.v)===2){const b=ii(g);t(b),kN()&&jN()}}catch(g){console.error("âŒ [URL Sync] Error decoding build from URL:",g)}s.current=!0};typeof requestIdleCallback<"u"?requestIdleCallback(u,{timeout:200}):setTimeout(u,0)},[t]),h.useEffect(()=>{!s.current||!e||o!==a.current&&(a.current=o,c(e))},[o,e,c]),h.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[])},lR=h.forwardRef(({className:e,collapsed:t,...s},n)=>r.jsx("aside",{ref:n,"data-collapsed":t?"":void 0,className:$("flex flex-col bg-card border-r border-skyrim-gold/20 h-[calc(100vh-3rem)] sticky top-12 transition-all duration-300 ease-in-out",t?"w-0 overflow-hidden opacity-0":"w-64 opacity-100",e),...s}));lR.displayName="Sidebar";const cR=h.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:$("flex-1 flex flex-col justify-start overflow-y-auto px-2 py-2",e),...t}));cR.displayName="SidebarContent";const uR=h.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:$("mb-2",e),...t}));uR.displayName="SidebarGroup";const dR=h.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:$("px-3 py-2 border-b border-skyrim-gold/20 flex items-center gap-2 min-h-[48px]",e),...t}));dR.displayName="SidebarHeader";const fR=h.forwardRef(({className:e,...t},s)=>r.jsx("ul",{ref:s,className:$("flex flex-col gap-0.5 list-none p-0 m-0",e),...t}));fR.displayName="SidebarMenu";const mR=h.forwardRef(({className:e,asChild:t,isActive:s,...n},a)=>{const i=t?"span":"button";return r.jsx(i,{ref:a,"data-active":s?"":void 0,className:$("group flex items-center w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out","hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] hover:border-l-4","active:scale-[0.98] active:bg-skyrim-gold/25","cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",s?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent",e),tabIndex:0,...n})});mR.displayName="SidebarMenuButton";const hR=h.forwardRef(({className:e,...t},s)=>r.jsx("li",{ref:s,className:$("relative flex items-stretch",e),...t}));hR.displayName="SidebarMenuItem";const gR=h.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:e,...t}));gR.displayName="SidebarRail";class Fe{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.edid=="string"&&typeof t.globalFormId=="string"&&typeof t.plugin=="string"&&typeof t.value=="number"&&typeof t.weight=="number"&&Array.isArray(t.flags)&&Array.isArray(t.effects)}static equals(t,s){return t.name===s.name}static addComputedProperties(t){const s=t.effects.length>0,n=t.effects.length,a=n>2,i=n<=1,o=t.effects.reduce((p,x)=>p+x.magnitude,0),l=Math.max(...t.effects.map(p=>p.duration),0),c=Math.min(...t.effects.map(p=>p.duration),0),u=t.effects.reduce((p,x)=>p+x.baseCost,0),d=n>0?o/n:0,f=n>0?t.effects.reduce((p,x)=>p+x.duration,0)/n:0,m=this.determineRarity(t,{effectCount:n,totalMagnitude:o,averageMagnitude:d,value:t.value}),g=this.generateTags(t,{hasEffects:s,effectCount:n,isComplex:a,isSimple:i,rarity:m}),b=this.createSearchableText(t,g),y=[...new Set(t.effects.map(p=>p.effectType))],v=[...new Set(t.effects.map(p=>p.skill).filter(p=>p!=="None"))];return{...t,hasEffects:s,effectCount:n,isComplex:a,isSimple:i,totalMagnitude:o,maxDuration:l,minDuration:c,totalBaseCost:u,averageMagnitude:d,averageDuration:f,tags:g,searchableText:b,rarity:m,effectTypes:y,skills:v}}static determineRarity(t,s){const{effectCount:n,totalMagnitude:a,averageMagnitude:i,value:o}=s;return o>=100&&n>=3&&i>=50?"Legendary":o>=50&&n>=2||n>=3&&i>=30?"Epic":o>=25&&n>=2||n>=2&&i>=20?"Rare":o>=10||n>=1?"Uncommon":"Common"}static generateTags(t,s){const n=[];return n.push(s.rarity),s.hasEffects&&n.push("Has Effects"),s.effectCount===1?n.push("Single Effect"):s.effectCount<=2?n.push("Few Effects"):n.push("Many Effects"),s.isComplex?n.push("Complex"):s.isSimple&&n.push("Simple"),t.effects.forEach(a=>{n.push(a.mgefName),n.push(a.effectType),a.skill!=="None"&&n.push(a.skill)}),n.push(t.plugin),t.flags.forEach(a=>{n.push(a)}),[...new Set(n)]}static createSearchableText(t,s){return[t.name,t.edid,t.globalFormId,t.plugin,...t.effects.map(a=>a.mgefName),...t.effects.map(a=>a.mgefDescription),...t.effects.map(a=>a.effectType),...t.effects.map(a=>a.skill),...t.flags,...s].join(" ").toLowerCase()}static filterByEffectType(t,s){return t.filter(n=>n.effectTypes.includes(s))}static filterByEffectTypes(t,s){return s.length===0?t:t.filter(n=>s.some(a=>n.effectTypes.includes(a)))}static filterBySkill(t,s){return t.filter(n=>n.skills.includes(s))}static filterBySkills(t,s){return s.length===0?t:t.filter(n=>s.some(a=>n.skills.includes(a)))}static filterByPlugin(t,s){return t.filter(n=>n.plugin===s)}static filterByPlugins(t,s){return s.length===0?t:t.filter(n=>s.includes(n.plugin))}static filterByRarity(t,s){return t.filter(n=>n.rarity===s)}static filterByRarities(t,s){return s.length===0?t:t.filter(n=>s.includes(n.rarity))}static filterByValueRange(t,s,n){return t.filter(a=>!(s!==null&&a.value<s||n!==null&&a.value>n))}static filterByWeightRange(t,s,n){return t.filter(a=>!(s!==null&&a.weight<s||n!==null&&a.weight>n))}static filterByMagnitudeRange(t,s,n){return t.filter(a=>!(s!==null&&a.totalMagnitude<s||n!==null&&a.totalMagnitude>n))}static filterByDurationRange(t,s,n){return t.filter(a=>!(s!==null&&a.maxDuration<s||n!==null&&a.maxDuration>n))}static filterByBaseCostRange(t,s,n){return t.filter(a=>!(s!==null&&a.totalBaseCost<s||n!==null&&a.totalBaseCost>n))}static filterByEffects(t,s){return s.length===0?t:t.filter(n=>s.some(a=>n.effects.some(i=>i.mgefName.toLowerCase().includes(a.toLowerCase()))))}static filterByFlags(t,s){return s.length===0?t:t.filter(n=>s.some(a=>n.flags.includes(a)))}static search(t,s){if(!s.trim())return[];const n=s.toLowerCase().trim(),a=[];for(const i of t){const o=this.calculateSearchScore(i,n);if(o>0){const l=this.getMatchedFields(i,n);a.push({ingredient:i,score:o,matchedFields:l})}}return a.sort((i,o)=>o.score-i.score)}static calculateSearchScore(t,s){let n=0;const a=s.toLowerCase();return t.name.toLowerCase()===a&&(n+=100),t.edid.toLowerCase()===a&&(n+=90),t.plugin.toLowerCase()===a&&(n+=80),t.name.toLowerCase().includes(a)&&(n+=50),t.edid.toLowerCase().includes(a)&&(n+=45),t.plugin.toLowerCase().includes(a)&&(n+=40),t.effects.forEach(i=>{i.mgefName.toLowerCase()===a&&(n+=40),i.mgefName.toLowerCase().includes(a)&&(n+=20),i.mgefDescription.toLowerCase().includes(a)&&(n+=15),i.effectType.toLowerCase().includes(a)&&(n+=15),i.skill.toLowerCase().includes(a)&&(n+=10)}),t.flags.forEach(i=>{i.toLowerCase()===a&&(n+=25),i.toLowerCase().includes(a)&&(n+=10)}),t.tags.forEach(i=>{i.toLowerCase()===a&&(n+=25),i.toLowerCase().includes(a)&&(n+=10)}),n}static getMatchedFields(t,s){const n=[],a=s.toLowerCase();return t.name.toLowerCase().includes(a)&&n.push("name"),t.edid.toLowerCase().includes(a)&&n.push("edid"),t.plugin.toLowerCase().includes(a)&&n.push("plugin"),t.effects.forEach(i=>{(i.mgefName.toLowerCase().includes(a)||i.mgefDescription.toLowerCase().includes(a)||i.effectType.toLowerCase().includes(a)||i.skill.toLowerCase().includes(a))&&n.push("effects")}),t.flags.forEach(i=>{i.toLowerCase().includes(a)&&n.push("flags")}),[...new Set(n)]}static sort(t,s,n="asc"){return[...t].sort((i,o)=>{let l=0;switch(s){case"name":l=i.name.localeCompare(o.name);break;case"value":l=i.value-o.value;break;case"weight":l=i.weight-o.weight;break;case"effectCount":l=i.effectCount-o.effectCount;break;case"magnitude":l=i.totalMagnitude-o.totalMagnitude;break;case"duration":l=i.maxDuration-o.maxDuration;break;case"baseCost":l=i.totalBaseCost-o.totalBaseCost;break;case"plugin":l=i.plugin.localeCompare(o.plugin);break}return n==="asc"?l:-l})}static getUniqueEffectTypes(t){const s=t.flatMap(n=>n.effectTypes);return[...new Set(s)].sort()}static getUniqueEffects(t){const s=t.flatMap(n=>n.effects.map(a=>a.mgefName));return[...new Set(s)].sort()}static getUniqueSkills(t){const s=t.flatMap(n=>n.skills);return[...new Set(s)].sort()}static getUniquePlugins(t){const s=t.map(n=>n.plugin);return[...new Set(s)].sort()}static getUniqueRarities(t){const s=t.map(n=>n.rarity);return[...new Set(s)].sort()}static getUniqueFlags(t){const s=t.flatMap(n=>n.flags);return[...new Set(s)].sort()}static applyFilters(t,s){let n=[...t];return s.searchTerm.trim()&&(n=this.search(n,s.searchTerm).map(i=>i.ingredient)),s.effectTypes.length>0&&(n=this.filterByEffectTypes(n,s.effectTypes)),s.skills.length>0&&(n=this.filterBySkills(n,s.skills)),s.plugins.length>0&&(n=this.filterByPlugins(n,s.plugins)),s.rarities.length>0&&(n=this.filterByRarities(n,s.rarities)),s.effects.length>0&&(n=this.filterByEffects(n,s.effects)),s.flags.length>0&&(n=this.filterByFlags(n,s.flags)),s.hasEffects!==null&&(n=n.filter(a=>a.hasEffects===s.hasEffects)),s.isComplex!==null&&(n=n.filter(a=>a.isComplex===s.isComplex)),n=this.filterByValueRange(n,s.minValue,s.maxValue),n=this.filterByWeightRange(n,s.minWeight,s.maxWeight),n=this.filterByMagnitudeRange(n,s.minMagnitude,s.maxMagnitude),n=this.filterByDurationRange(n,s.minDuration,s.maxDuration),n=this.filterByBaseCostRange(n,s.minBaseCost,s.maxBaseCost),n}static getStatistics(t){const s=t.length,n={};t.forEach(E=>{E.effectTypes.forEach(R=>{n[R]=(n[R]||0)+1})});const a={};t.forEach(E=>{a[E.plugin]=(a[E.plugin]||0)+1});const i={};t.forEach(E=>{i[E.rarity]=(i[E.rarity]||0)+1});const o={};t.forEach(E=>{E.skills.forEach(R=>{o[R]=(o[R]||0)+1})});const l=t.reduce((E,R)=>E+R.effectCount,0),c=t.reduce((E,R)=>E+R.totalMagnitude,0),u=t.reduce((E,R)=>E+R.maxDuration,0),d=t.reduce((E,R)=>E+R.totalBaseCost,0),f=t.reduce((E,R)=>E+R.value,0),m=t.reduce((E,R)=>E+R.weight,0),g=s>0?l/s:0,b=s>0?c/s:0,y=s>0?u/s:0,v=s>0?d/s:0,p=s>0?f/s:0,x=s>0?m/s:0,w={};t.forEach(E=>{E.effects.forEach(R=>{w[R.mgefName]=(w[R.mgefName]||0)+1})});const N=Object.entries(w).map(([E,R])=>({name:E,count:R})).sort((E,R)=>R.count-E.count).slice(0,10),j=Object.entries(n).map(([E,R])=>({name:E,count:R})).sort((E,R)=>R.count-E.count).slice(0,10),_=Object.entries(a).map(([E,R])=>({name:E,count:R})).sort((E,R)=>R.count-E.count).slice(0,10),k=Object.entries(o).map(([E,R])=>({name:E,count:R})).sort((E,R)=>R.count-E.count).slice(0,10),A=t.map(E=>E.value).sort((E,R)=>E-R),S=t.map(E=>E.weight).sort((E,R)=>E-R),C={min:A[0]||0,max:A[A.length-1]||0,mean:p,median:A[Math.floor(A.length/2)]||0},M={min:S[0]||0,max:S[S.length-1]||0,mean:x,median:S[Math.floor(S.length/2)]||0};return{totalIngredients:s,ingredientsByEffectType:n,ingredientsByPlugin:a,ingredientsByRarity:i,ingredientsBySkill:o,averageEffectCount:g,averageMagnitude:b,averageDuration:y,averageBaseCost:v,averageValue:p,averageWeight:x,topEffects:N,topEffectTypes:j,topPlugins:_,topSkills:k,valueDistribution:C,weightDistribution:M}}static getEffectComparisons(t,s){const n={};return s.forEach(a=>{a.effects.forEach(i=>{n[i.mgefName]||(n[i.mgefName]={magnitudeSum:0,durationSum:0,baseCostSum:0,count:0}),n[i.mgefName].magnitudeSum+=i.magnitude,n[i.mgefName].durationSum+=i.duration,n[i.mgefName].baseCostSum+=i.baseCost,n[i.mgefName].count+=1})}),t.effects.map(a=>{const i=n[a.mgefName],o=i.count>0?i.magnitudeSum/i.count:0,l=i.count>0?i.durationSum/i.count:0,c=i.count>0?i.baseCostSum/i.count:0,u=a.magnitude-o,d=a.duration-l,f=a.baseCost-c;return{name:a.mgefName,magnitude:{value:a.magnitude,mean:o,difference:u,percentage:o>0?u/o*100:0},duration:{value:a.duration,mean:l,difference:d,percentage:l>0?d/l*100:0},baseCost:{value:a.baseCost,mean:c,difference:f,percentage:c>0?f/c*100:0}}})}static getMetaAnalysis(t){const s=[],n={};t.forEach(c=>{const u=c.effects.map(d=>d.mgefName);for(let d=0;d<u.length;d++)for(let f=d+1;f<u.length;f++){const m=[u[d],u[f]].sort().join("|");n[m]||(n[m]={count:0,totalMagnitude:0}),n[m].count+=1,n[m].totalMagnitude+=c.totalMagnitude}}),Object.entries(n).forEach(([c,u])=>{const[d,f]=c.split("|");s.push({effect1:d,effect2:f,frequency:u.count,averageMagnitude:u.totalMagnitude/u.count})}),s.sort((c,u)=>u.frequency-c.frequency);const a=Object.entries(t.reduce((c,u)=>(c[u.plugin]||(c[u.plugin]={ingredientCount:0,uniqueEffects:new Set,totalValue:0}),c[u.plugin].ingredientCount+=1,c[u.plugin].totalValue+=u.value,u.effects.forEach(d=>{c[u.plugin].uniqueEffects.add(d.mgefName)}),c),{})).map(([c,u])=>({plugin:c,ingredientCount:u.ingredientCount,uniqueEffects:u.uniqueEffects.size,averageValue:u.totalValue/u.ingredientCount})),i=t.reduce((c,u)=>(c[u.rarity.toLowerCase()]=(c[u.rarity.toLowerCase()]||0)+1,c),{}),o=t.map(c=>({ingredient:c.name,ratio:c.weight>0?c.value/c.weight:0})).sort((c,u)=>u.ratio-c.ratio),l=t.map(c=>({ingredient:c.name,value:c.value})).sort((c,u)=>u.value-c.value);return{effectSynergies:s.slice(0,20),pluginContributions:a.sort((c,u)=>u.ingredientCount-c.ingredientCount),rarityAnalysis:i,economicAnalysis:{valuePerWeight:o.slice(0,20),mostValuable:l.slice(0,20)}}}}const di=class di{constructor(){Re(this,"cache",null);Re(this,"lastFetch",0);Re(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return di.instance||(di.instance=new di),di.instance}async loadIngredients(){if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const t=Vt("data/alchemy-ingredients.json"),s=await fetch(t);if(!s.ok)throw new Error(`Failed to fetch alchemy ingredients: ${s.status} ${s.statusText}`);const n=await s.json();if(!Array.isArray(n)||n.length===0)throw new Error("AlchemyDataProvider: No valid ingredients found in data structure");const a=[];let i=0,o=0;for(const l of n)if(Fe.isValid(l)){const c=Fe.addComputedProperties(l);a.push(c),i++}else console.warn("AlchemyDataProvider: Invalid ingredient data:",l),o++;return console.log(`AlchemyDataProvider: Loaded ${i} valid ingredients, ${o} invalid items`),this.cache=a,this.lastFetch=Date.now(),a}catch(t){throw console.error("AlchemyDataProvider: Error loading ingredients:",t),t}}async getIngredientData(){const t=await this.loadIngredients(),s=Fe.getStatistics(t);return{ingredients:t,totalCount:s.totalIngredients,effectTypes:Fe.getUniqueEffectTypes(t),effects:Fe.getUniqueEffects(t),skills:Fe.getUniqueSkills(t),plugins:Fe.getUniquePlugins(t),lastUpdated:new Date().toISOString()}}async getIngredientByName(t){return(await this.loadIngredients()).find(n=>n.name===t)||null}async getIngredientsByEffectType(t){const s=await this.loadIngredients();return Fe.filterByEffectType(s,t)}async getIngredientsBySkill(t){const s=await this.loadIngredients();return Fe.filterBySkill(s,t)}async getIngredientsByPlugin(t){const s=await this.loadIngredients();return Fe.filterByPlugin(s,t)}async getIngredientsByRarity(t){const s=await this.loadIngredients();return Fe.filterByRarity(s,t)}async getIngredientsByEffect(t){const s=await this.loadIngredients();return Fe.filterByEffects(s,[t])}async searchIngredients(t){const s=await this.loadIngredients();return Fe.search(s,t).map(a=>a.ingredient)}async getStatistics(){const t=await this.loadIngredients();return Fe.getStatistics(t)}async getMetaAnalysis(){const t=await this.loadIngredients();return Fe.getMetaAnalysis(t)}clearCache(){this.cache=null,this.lastFetch=0}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isExpired:this.cache!==null&&Date.now()-this.lastFetch>=this.CACHE_DURATION,timeUntilExpiry:this.cache?Math.max(0,this.CACHE_DURATION-(Date.now()-this.lastFetch)):0}}};Re(di,"instance");let ix=di;const SN={effectTypes:[],effects:[],skills:[],plugins:[],flags:[],searchTerm:"",hasEffects:null,isComplex:null,minValue:null,maxValue:null,minWeight:null,maxWeight:null,minMagnitude:null,maxMagnitude:null,minDuration:null,maxDuration:null,minBaseCost:null,maxBaseCost:null,rarities:[]},Xy=fs((e,t)=>({data:[],statistics:null,metaAnalysis:null,loading:!1,error:null,filters:SN,filteredData:[],load:async()=>{e({loading:!0,error:null});try{const s=ix.getInstance(),n=await s.loadIngredients(),a=await s.getStatistics(),i=await s.getMetaAnalysis();e({data:n,statistics:a,metaAnalysis:i,loading:!1}),t().applyFilters()}catch(s){e({error:s instanceof Error?s.message:"Failed to load alchemy ingredients",loading:!1})}},setFilters:s=>{const a={...t().filters,...s};e({filters:a}),t().applyFilters()},clearFilters:()=>{e({filters:SN}),t().applyFilters()},applyFilters:()=>{const{data:s,filters:n}=t(),a=Fe.applyFilters(s,n);e({filteredData:a})},getByName:s=>t().data.find(n=>n.name===s),getByEffectType:s=>Fe.filterByEffectType(t().data,s),getBySkill:s=>Fe.filterBySkill(t().data,s),getByPlugin:s=>Fe.filterByPlugin(t().data,s),getByRarity:s=>Fe.filterByRarity(t().data,s),getByEffect:s=>Fe.filterByEffects(t().data,[s]),search:s=>Fe.search(t().data,s).map(a=>a.ingredient),getStatistics:()=>t().statistics,getMetaAnalysis:()=>t().metaAnalysis}));function eW(e){const{statistics:t,metaAnalysis:s}=Xy(),n=h.useMemo(()=>Fe.getUniqueEffectTypes(e),[e]),a=h.useMemo(()=>Fe.getUniqueEffects(e),[e]),i=h.useMemo(()=>Fe.getUniqueSkills(e),[e]),o=h.useMemo(()=>Fe.getUniquePlugins(e),[e]),l=h.useMemo(()=>Fe.getUniqueRarities(e),[e]),c=h.useMemo(()=>Fe.getUniqueFlags(e),[e]),u=h.useMemo(()=>e.length,[e]),d=h.useMemo(()=>{const v={};return e.forEach(p=>{p.effectTypes.forEach(x=>{v[x]=(v[x]||0)+1})}),v},[e]),f=h.useMemo(()=>{const v={};return e.forEach(p=>{v[p.plugin]=(v[p.plugin]||0)+1}),v},[e]),m=h.useMemo(()=>{const v={};return e.forEach(p=>{v[p.rarity]=(v[p.rarity]||0)+1}),v},[e]),g=h.useMemo(()=>{const v={};return e.forEach(p=>{p.skills.forEach(x=>{v[x]=(v[x]||0)+1})}),v},[e]),b=h.useMemo(()=>v=>Fe.getEffectComparisons(v,e),[e]),y=h.useMemo(()=>v=>({effectCount:v.effectCount,totalMagnitude:v.totalMagnitude,maxDuration:v.maxDuration,totalBaseCost:v.totalBaseCost,averageMagnitude:v.averageMagnitude,averageDuration:v.averageDuration,rarity:v.rarity,effectTypes:v.effectTypes,skills:v.skills}),[]);return{statistics:t,metaAnalysis:s,availableEffectTypes:n,availableEffects:a,availableSkills:i,availablePlugins:o,availableRarities:l,availableFlags:c,totalIngredients:u,ingredientsByEffectType:d,ingredientsByPlugin:f,ingredientsByRarity:m,ingredientsBySkill:g,getEffectComparisons:b,getIngredientStats:y}}function tW(e={}){const{autoLoad:t=!0,refreshOnMount:s=!1}=e,{data:n,loading:a,error:i,load:o,getByName:l,getByEffectType:c,getBySkill:u,getByPlugin:d,getByRarity:f,getByEffect:m}=Xy(),g=h.useCallback(async()=>{t&&n.length===0&&await o()},[t,n.length,o]),b=h.useCallback(async()=>{await o()},[o]),y=h.useCallback(()=>{},[]);h.useEffect(()=>{t&&n.length===0&&g()},[t,n.length,g]),h.useEffect(()=>{s&&b()},[s,b]);const v=n.length,p=[...new Set(n.flatMap(R=>R.effectTypes))],x=[...new Set(n.flatMap(R=>R.effects.map(T=>T.mgefName)))],w=[...new Set(n.flatMap(R=>R.skills))],N=[...new Set(n.map(R=>R.plugin))],j=new Date().toISOString(),_=n.length>0?{ingredients:n,totalCount:v,effectTypes:p,effects:x,skills:w,plugins:N,lastUpdated:j}:null,k=h.useCallback(R=>l(R),[l]),A=h.useCallback(R=>c(R),[c]),S=h.useCallback(R=>u(R),[u]),C=h.useCallback(R=>d(R),[d]),M=h.useCallback(R=>f(R),[f]),E=h.useCallback(R=>m(R),[m]);return{ingredients:n,ingredientData:_,loading:a,error:i,totalCount:v,effectTypes:p,effects:x,skills:w,plugins:N,lastUpdated:j,loadIngredients:g,refresh:b,clearError:y,getIngredientByName:k,getIngredientsByEffectType:A,getIngredientsBySkill:S,getIngredientsByPlugin:C,getIngredientsByRarity:M,getIngredientsByEffect:E}}function sW(e){const{filters:t,filteredData:s,setFilters:n,clearFilters:a}=Xy(),i=h.useCallback(_=>{n({searchTerm:_})},[n]),o=h.useCallback(_=>{n({effectTypes:_})},[n]),l=h.useCallback(_=>{n({effects:_})},[n]),c=h.useCallback(_=>{n({skills:_})},[n]),u=h.useCallback(_=>{n({plugins:_})},[n]),d=h.useCallback(_=>{n({flags:_})},[n]),f=h.useCallback(_=>{n({rarities:_})},[n]),m=h.useCallback(_=>{n({hasEffects:_})},[n]),g=h.useCallback(_=>{n({isComplex:_})},[n]),b=h.useCallback((_,k)=>{n({minValue:_,maxValue:k})},[n]),y=h.useCallback((_,k)=>{n({minWeight:_,maxWeight:k})},[n]),v=h.useCallback((_,k)=>{n({minMagnitude:_,maxMagnitude:k})},[n]),p=h.useCallback((_,k)=>{n({minDuration:_,maxDuration:k})},[n]),x=h.useCallback((_,k)=>{n({minBaseCost:_,maxBaseCost:k})},[n]),w=h.useMemo(()=>t.searchTerm.trim()!==""||t.effectTypes.length>0||t.effects.length>0||t.skills.length>0||t.plugins.length>0||t.flags.length>0||t.rarities.length>0||t.hasEffects!==null||t.isComplex!==null||t.minValue!==null||t.maxValue!==null||t.minWeight!==null||t.maxWeight!==null||t.minMagnitude!==null||t.maxMagnitude!==null||t.minDuration!==null||t.maxDuration!==null||t.minBaseCost!==null||t.maxBaseCost!==null,[t]),N=h.useMemo(()=>{let _=0;return t.searchTerm.trim()!==""&&_++,t.effectTypes.length>0&&_++,t.effects.length>0&&_++,t.skills.length>0&&_++,t.plugins.length>0&&_++,t.flags.length>0&&_++,t.rarities.length>0&&_++,t.hasEffects!==null&&_++,t.isComplex!==null&&_++,(t.minValue!==null||t.maxValue!==null)&&_++,(t.minWeight!==null||t.maxWeight!==null)&&_++,(t.minMagnitude!==null||t.maxMagnitude!==null)&&_++,(t.minDuration!==null||t.maxDuration!==null)&&_++,(t.minBaseCost!==null||t.maxBaseCost!==null)&&_++,_},[t]),j=h.useCallback(()=>{const _=[];if(t.searchTerm.trim()!==""&&_.push({key:"searchTerm",value:t.searchTerm,label:`Search: "${t.searchTerm}"`}),t.effectTypes.length>0&&_.push({key:"effectTypes",value:t.effectTypes,label:`Effect Types: ${t.effectTypes.join(", ")}`}),t.effects.length>0&&_.push({key:"effects",value:t.effects,label:`Effects: ${t.effects.join(", ")}`}),t.skills.length>0&&_.push({key:"skills",value:t.skills,label:`Skills: ${t.skills.join(", ")}`}),t.plugins.length>0&&_.push({key:"plugins",value:t.plugins,label:`Plugins: ${t.plugins.join(", ")}`}),t.flags.length>0&&_.push({key:"flags",value:t.flags,label:`Flags: ${t.flags.join(", ")}`}),t.rarities.length>0&&_.push({key:"rarities",value:t.rarities,label:`Rarities: ${t.rarities.join(", ")}`}),t.hasEffects!==null&&_.push({key:"hasEffects",value:t.hasEffects,label:`Has Effects: ${t.hasEffects?"Yes":"No"}`}),t.isComplex!==null&&_.push({key:"isComplex",value:t.isComplex,label:`Complexity: ${t.isComplex?"Complex":"Simple"}`}),t.minValue!==null||t.maxValue!==null){const k=`${t.minValue??"0"} - ${t.maxValue??"âˆž"}`;_.push({key:"valueRange",value:{min:t.minValue,max:t.maxValue},label:`Value: ${k}`})}if(t.minWeight!==null||t.maxWeight!==null){const k=`${t.minWeight??"0"} - ${t.maxWeight??"âˆž"}`;_.push({key:"weightRange",value:{min:t.minWeight,max:t.maxWeight},label:`Weight: ${k}`})}if(t.minMagnitude!==null||t.maxMagnitude!==null){const k=`${t.minMagnitude??"0"} - ${t.maxMagnitude??"âˆž"}`;_.push({key:"magnitudeRange",value:{min:t.minMagnitude,max:t.maxMagnitude},label:`Magnitude: ${k}`})}if(t.minDuration!==null||t.maxDuration!==null){const k=`${t.minDuration??"0"} - ${t.maxDuration??"âˆž"}`;_.push({key:"durationRange",value:{min:t.minDuration,max:t.maxDuration},label:`Duration: ${k}`})}if(t.minBaseCost!==null||t.maxBaseCost!==null){const k=`${t.minBaseCost??"0"} - ${t.maxBaseCost??"âˆž"}`;_.push({key:"baseCostRange",value:{min:t.minBaseCost,max:t.maxBaseCost},label:`Base Cost: ${k}`})}return _},[t]);return{filters:t,filteredIngredients:s,setFilters:n,clearFilters:a,setSearchTerm:i,setEffectTypes:o,setEffects:l,setSkills:c,setPlugins:u,setFlags:d,setRarities:f,setHasEffects:m,setIsComplex:g,setValueRange:b,setWeightRange:y,setMagnitudeRange:v,setDurationRange:p,setBaseCostRange:x,isFilterActive:w,activeFilterCount:N,getActiveFilters:j}}function nW(e,t={}){const{initialPageSize:s=20,maxPageSize:n=100}=t,[a,i]=h.useState(1),[o,l]=h.useState(s),c=h.useRef([]),u=e.length,d=h.useMemo(()=>{const p=a*o;return e.slice(0,p)},[e,a,o]),f=h.useMemo(()=>d.length<e.length,[d.length,e.length]),m=a>1;h.useEffect(()=>{const p=c.current;(p.length!==e.length||e.some((w,N)=>{var j;return w.name!==((j=p[N])==null?void 0:j.name)}))&&(i(1),c.current=e)},[e]);const g=h.useMemo(()=>({totalItems:u,displayedItems:d.length,currentPage:a,hasMore:f,itemsPerPage:o}),[u,d.length,a,f,o]),b=h.useCallback(p=>{const x=Math.max(1,Math.min(p,n));l(x),i(1)},[n]),y=h.useCallback(()=>{f&&i(p=>p+1)},[f]),v=h.useCallback(()=>{i(1),l(s)},[s]);return{currentPage:a,pageSize:o,hasMore:f,hasPrevious:m,paginationInfo:g,setPageSize:b,loadMore:y,resetPagination:v,displayedItems:d}}function aW(e,t){const{filteredIngredients:s,searchResults:n,isSearching:a}=h.useMemo(()=>{if(!t.trim())return{filteredIngredients:e,searchResults:[],isSearching:!1};const i=Fe.search(e,t);return{filteredIngredients:i.map(o=>o.ingredient),searchResults:i,isSearching:!0}},[e,t]);return{filteredIngredients:s,searchResults:n,isSearching:a,searchTerm:t}}function pR({ingredient:e,variant:t="default",onClick:s,isSelected:n=!1,showEffects:a=!0,showProperties:i=!0,effectComparisons:o=[]}){const l=()=>{s==null||s()},c=g=>g.effectType.toLowerCase().includes("damage")?r.jsx(St,{className:"h-4 w-4 text-red-500"}):g.effectType.toLowerCase().includes("heal")||g.effectType.toLowerCase().includes("restore")?r.jsx(wc,{className:"h-4 w-4 text-green-500"}):g.effectType.toLowerCase().includes("resist")?r.jsx(Oe,{className:"h-4 w-4 text-blue-500"}):r.jsx(wc,{className:"h-4 w-4 text-purple-500"}),u=g=>g.mgefDescription||"",d=()=>r.jsxs(ae,{className:`cursor-pointer transition-all hover:shadow-md ${n?"ring-2 ring-primary":""}`,onClick:l,children:[r.jsx(de,{className:"pb-2",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h3",{className:"text-sm font-medium truncate",children:e.name})})}),r.jsx(oe,{className:"pt-0",children:r.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.value,"g â€¢ ",Math.round(e.weight*10)/10,"w"]})})]}),f=()=>r.jsxs(ae,{className:`cursor-pointer transition-all hover:shadow-md ${n?"ring-2 ring-primary":""}`,onClick:l,children:[r.jsx(de,{className:"pb-3",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("h3",{className:"font-medium truncate",children:e.name})})})}),r.jsx(oe,{className:"pt-0",children:r.jsxs("div",{className:"space-y-2",children:[i&&r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(mb,{className:"h-3 w-3"}),r.jsxs("span",{children:[e.value,"g"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(pb,{className:"h-3 w-3"}),r.jsxs("span",{children:[Math.round(e.weight*10)/10,"w"]})]})]}),a&&e.effects.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Effects"}),r.jsx("div",{className:"space-y-2",children:e.effects.map((g,b)=>r.jsx("div",{className:"p-2 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-2",children:[c(g),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-bold text-xs mb-1",children:g.mgefName}),r.jsx("div",{className:"text-xs text-muted-foreground",children:r.jsx(we,{text:u(g),className:"text-xs text-muted-foreground"})}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Magnitude: ",g.magnitude]}),r.jsxs("span",{children:["Duration: ",g.duration,"s"]})]})]})]})},b))})]}),!1]})})]}),m=()=>r.jsxs(ae,{className:`cursor-pointer transition-all hover:shadow-md ${n?"ring-2 ring-primary":""}`,onClick:l,children:[r.jsx(de,{className:"pb-3",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("h3",{className:"font-medium",children:e.name})})})}),r.jsx(oe,{className:"pt-0",children:r.jsxs("div",{className:"space-y-3",children:[i&&r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-3 bg-muted/30 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mb,{className:"h-4 w-4 text-yellow-500"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:"Value"}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.value," gold"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pb,{className:"h-4 w-4 text-gray-500"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:"Weight"}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[Math.round(e.weight*10)/10," units"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wc,{className:"h-4 w-4 text-purple-500"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:"Effects"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Available"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(St,{className:"h-4 w-4 text-blue-500"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:"Total Magnitude"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:e.totalMagnitude})]})]})]}),a&&e.effects.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium mb-3",children:"Effects"}),r.jsx("div",{className:"space-y-3",children:e.effects.map((g,b)=>r.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-3",children:[c(g),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-bold text-sm mb-1",children:g.mgefName}),r.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:r.jsx(we,{text:u(g),className:"text-sm text-muted-foreground"})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mt-2",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(St,{className:"h-3 w-3"}),r.jsxs("span",{children:["Magnitude: ",g.magnitude]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx($n,{className:"h-3 w-3"}),r.jsxs("span",{children:["Duration: ",g.duration,"s"]})]})]}),r.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[r.jsxs("div",{children:["Type: ",g.effectType]}),g.skill!=="None"&&r.jsxs("div",{children:["Skill: ",g.skill]}),r.jsxs("div",{children:["Form ID: ",g.mgefFormId]})]})]})]})},b))})]}),!1,r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t",children:[r.jsxs("span",{children:["Total Magnitude: ",e.totalMagnitude]}),r.jsxs("span",{children:["Max Duration: ",e.maxDuration,"s"]}),r.jsxs("span",{children:["Total Base Cost: ",e.totalBaseCost.toFixed(2)]})]})]})})]});switch(t){case"compact":return d();case"detailed":return m();default:return f()}}function rW({ingredients:e,variant:t="default",onIngredientClick:s,selectedIngredients:n=[],showEffects:a=!0,showProperties:i=!0,getEffectComparisons:o,className:l}){const c=u=>{s==null||s(u)};return e.length===0?r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-muted-foreground mb-2",children:"No ingredients found"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Try adjusting your search or filter criteria"})]})}):r.jsx("div",{className:$("space-y-3",l),children:e.map(u=>{const d=n.includes(u.name),f=(o==null?void 0:o(u))||[];return r.jsx(pR,{ingredient:u,variant:t,onClick:()=>c(u),isSelected:d,showEffects:a,showProperties:i,effectComparisons:f},u.edid)})})}function iW({ingredients:e,variant:t="default",columns:s=3,onIngredientClick:n,selectedIngredients:a=[],showEffects:i=!0,showProperties:o=!0,getEffectComparisons:l,loadMore:c,hasMore:u=!0,className:d="",gap:f=12,maxColumnWidth:m}){const[g,b]=h.useState(0),y=h.useRef(null),v=h.useRef(null),p=h.useCallback(()=>m&&g>0?Math.max(1,Math.floor(g/m)):s,[s,m,g]);h.useEffect(()=>{const w=()=>{y.current&&b(y.current.offsetWidth)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),h.useEffect(()=>{if(!c||!u||!v.current)return;const w=new IntersectionObserver(N=>{N.forEach(j=>{j.isIntersecting&&c&&c()})},{threshold:.1,rootMargin:"0px 0px 4000px 0px"});return w.observe(v.current),()=>w.disconnect()},[c,u]);const x=h.useCallback(()=>{const w=p();return r.jsx("div",{className:"w-full",style:{display:"grid",gridTemplateColumns:`repeat(${w}, 1fr)`,gap:`${f}px`},children:e.map(N=>{const j=a.includes(N.name),_=(l==null?void 0:l(N))||[];return r.jsx(pR,{ingredient:N,variant:t,onClick:()=>n==null?void 0:n(N),isSelected:j,showEffects:i,showProperties:o,effectComparisons:_,className:"w-full h-full"},N.edid)})})},[e,p,f,a,l,t,n,i,o]);return e.length===0?r.jsx("div",{className:`text-center py-12 ${d}`,children:r.jsx("p",{className:"text-muted-foreground",children:"No ingredients to display"})}):r.jsxs("div",{ref:y,className:d,children:[x(),u&&c&&r.jsx("div",{ref:v,className:"w-full h-16 mt-16",style:{minHeight:"64px"}})]})}function oW({ingredients:e,className:t}){const s=z.useMemo(()=>{const l=new Map;return e.forEach(c=>{c.effects.forEach(u=>{const d=u.mgefName||"Unknown Effect",f=u.magnitude||0,m=u.duration||0,g=u.baseCost||0;l.has(d)||l.set(d,{name:d,count:0,averageMagnitude:0,averageDuration:0,averageBaseCost:0,totalMagnitude:0,totalDuration:0,totalBaseCost:0,ingredients:[]});const b=l.get(d);b.count++,b.totalMagnitude+=f,b.totalDuration+=m,b.totalBaseCost+=g,b.ingredients.includes(c.name)||b.ingredients.push(c.name)})}),l.forEach(c=>{c.averageMagnitude=c.totalMagnitude/c.count,c.averageDuration=c.totalDuration/c.count,c.averageBaseCost=c.totalBaseCost/c.count}),Array.from(l.values()).sort((c,u)=>u.count-c.count)},[e]),n=z.useMemo(()=>{if(s.length===0)return{magnitude:0,duration:0,baseCost:0};const l=s.reduce((d,f)=>d+f.averageMagnitude,0),c=s.reduce((d,f)=>d+f.averageDuration,0),u=s.reduce((d,f)=>d+f.averageBaseCost,0);return{magnitude:l/s.length,duration:c/s.length,baseCost:u/s.length}},[s]),a=(l,c)=>{const d=(l-c)/c*100;return d>20?"text-green-600":d>10?"text-green-500":d<-20?"text-red-600":d<-10?"text-red-500":"text-muted-foreground"},i=(l,c)=>{const d=(l-c)/c*100;return d>10?r.jsx(Dr,{className:"h-4 w-4 text-green-500"}):d<-10?r.jsx(Fc,{className:"h-4 w-4 text-red-500"}):null},o=(l,c)=>{const u=l-c,d=u/c*100,f=u>=0?"+":"";return`${f}${u.toFixed(1)} (${f}${d.toFixed(1)}%)`};return s.length===0?r.jsxs(ae,{className:t,children:[r.jsx(de,{children:r.jsx(ve,{className:"text-lg",children:"Alchemy Effect Meta Analysis"})}),r.jsx(oe,{children:r.jsx("p",{className:"text-muted-foreground",children:"No effects found to analyze."})})]}):r.jsxs(ae,{className:t,children:[r.jsxs(de,{children:[r.jsx(ve,{className:"text-lg",children:"Alchemy Effect Meta Analysis"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Analysis of ",s.length," unique effects across"," ",e.length," ingredients"]})]}),r.jsx(oe,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-muted/30 rounded-lg",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:n.magnitude.toFixed(1)}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Magnitude"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold",children:[n.duration.toFixed(1),"s"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Duration"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:n.baseCost.toFixed(0)}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Base Cost"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"font-medium text-sm",children:"Effect Analysis"}),s.slice(0,10).map(l=>r.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[r.jsx("div",{className:"flex items-start justify-between mb-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wc,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"font-medium text-sm",children:l.name}),r.jsxs(Q,{variant:"secondary",className:"text-xs",children:[l.count," ingredients"]})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx("span",{className:"text-muted-foreground",children:"Magnitude:"}),r.jsx("span",{className:"font-medium",children:l.averageMagnitude.toFixed(1)}),i(l.averageMagnitude,n.magnitude)]}),r.jsx("div",{className:$("text-xs",a(l.averageMagnitude,n.magnitude)),children:o(l.averageMagnitude,n.magnitude)})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),r.jsxs("span",{className:"font-medium",children:[l.averageDuration.toFixed(1),"s"]}),i(l.averageDuration,n.duration)]}),r.jsx("div",{className:$("text-xs",a(l.averageDuration,n.duration)),children:o(l.averageDuration,n.duration)})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx("span",{className:"text-muted-foreground",children:"Base Cost:"}),r.jsx("span",{className:"font-medium",children:l.averageBaseCost.toFixed(0)}),i(l.averageBaseCost,n.baseCost)]}),r.jsx("div",{className:$("text-xs",a(l.averageBaseCost,n.baseCost)),children:o(l.averageBaseCost,n.baseCost)})]})]}),l.ingredients.length>0&&r.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:r.jsxs("div",{className:"text-xs text-muted-foreground mb-1",children:["Found in: ",l.ingredients.slice(0,3).join(", "),l.ingredients.length>3&&` +${l.ingredients.length-3} more`]})})]},l.name)),s.length>10&&r.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing top 10 effects of ",s.length," total"]})]}),r.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-sm mb-2",children:"Legend"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dr,{className:"h-3 w-3 text-green-500"}),r.jsx("span",{children:"Above average (+10%+)"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fc,{className:"h-3 w-3 text-red-500"}),r.jsx("span",{children:"Below average (-10%+)"})]})]})]})]})})]})}function lW({statistics:e,className:t}){const{totalIngredients:s,ingredientsByEffectType:n,ingredientsByPlugin:a,ingredientsByRarity:i,ingredientsBySkill:o,averageMagnitude:l,averageDuration:c,averageBaseCost:u,averageValue:d,averageWeight:f,topEffects:m,topSkills:g,topPlugins:b}=e,y=[{title:"Total Ingredients",value:s,icon:wc,description:"All available ingredients",color:"text-blue-600"},{title:"Avg Magnitude",value:l.toFixed(1),icon:St,description:"Effect strength",color:"text-yellow-600"},{title:"Avg Duration",value:`${c.toFixed(1)}s`,icon:$n,description:"Effect duration",color:"text-green-600"},{title:"Avg Value",value:d.toFixed(0),icon:Oe,description:"Gold value",color:"text-purple-600"},{title:"Avg Weight",value:`${f.toFixed(1)}`,icon:tn,description:"Carry weight",color:"text-orange-600"},{title:"Avg Base Cost",value:u.toFixed(0),icon:Dr,description:"Magicka cost",color:"text-red-600"}];return r.jsxs("div",{className:`space-y-6 ${t||""}`,children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(v=>{const p=v.icon;return r.jsxs(ae,{children:[r.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ve,{className:"text-sm font-medium",children:v.title}),r.jsx(p,{className:`h-4 w-4 ${v.color}`})]}),r.jsxs(oe,{children:[r.jsx("div",{className:"text-2xl font-bold",children:v.value}),r.jsx("p",{className:"text-xs text-muted-foreground",children:v.description})]})]},v.title)})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx(St,{className:"h-4 w-4"}),"Effect Types"]})}),r.jsx(oe,{children:r.jsxs("div",{className:"space-y-2",children:[Object.entries(n).sort(([,v],[,p])=>p-v).slice(0,8).map(([v,p])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:v}),r.jsx(Q,{variant:"secondary",className:"text-xs",children:p})]},v)),Object.keys(n).length>8&&r.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["+",Object.keys(n).length-8," more effect types"]})]})})]}),r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx(p0,{className:"h-4 w-4"}),"Plugin Sources"]})}),r.jsx(oe,{children:r.jsxs("div",{className:"space-y-2",children:[Object.entries(a).sort(([,v],[,p])=>p-v).slice(0,8).map(([v,p])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:v}),r.jsx(Q,{variant:"outline",className:"text-xs",children:p})]},v)),Object.keys(a).length>8&&r.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["+",Object.keys(a).length-8," more plugins"]})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx(Oe,{className:"h-4 w-4"}),"Ingredient Rarities"]})}),r.jsx(oe,{children:r.jsx("div",{className:"space-y-2",children:Object.entries(i).sort(([,v],[,p])=>p-v).map(([v,p])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:v}),r.jsx(Q,{variant:v==="Common"?"default":v==="Uncommon"?"secondary":v==="Rare"?"outline":v==="Epic"?"destructive":"secondary",className:"text-xs",children:p})]},v))})})]}),r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx(Qn,{className:"h-4 w-4"}),"Associated Skills"]})}),r.jsx(oe,{children:r.jsxs("div",{className:"space-y-2",children:[Object.entries(o).sort(([,v],[,p])=>p-v).slice(0,8).map(([v,p])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:v}),r.jsx(Q,{variant:"outline",className:"text-xs",children:p})]},v)),Object.keys(o).length>8&&r.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["+",Object.keys(o).length-8," more skills"]})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx(St,{className:"h-4 w-4"}),"Most Common Effects"]})}),r.jsx(oe,{children:r.jsx("div",{className:"space-y-2",children:m.slice(0,8).map((v,p)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:v.name}),r.jsxs(Q,{variant:"outline",className:"text-xs",children:[v.count," ingredients"]})]},v.name))})})]}),r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx(Qn,{className:"h-4 w-4"}),"Most Common Skills"]})}),r.jsx(oe,{children:r.jsx("div",{className:"space-y-2",children:g.slice(0,8).map((v,p)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:v.name}),r.jsxs(Q,{variant:"outline",className:"text-xs",children:[v.count," ingredients"]})]},v.name))})})]})]})]})}function cW(){const{ingredients:e,loading:t,error:s}=tW(),{filteredIngredients:n}=sW(),{statistics:a,availableEffects:i,getEffectComparisons:o}=eW(e),[l,c]=h.useState("grid"),[u,d]=h.useState("alphabetical");h.useEffect(()=>{console.log(`ðŸŽ¯ sortBy changed to: ${u}`)},[u]);const m=(()=>{try{return!e||e.length===0?[]:[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, effects, or description...",options:[]},{id:"effects",name:"Effects",placeholder:"Filter by effect...",options:(i||[]).map(E=>({id:`effect-${E}`,label:E,value:E,category:"Effects",description:`Ingredients with ${E} effect`}))}]}catch{return[]}})(),[g,b]=h.useState([]),y=M=>{let E;typeof M=="string"?E={id:`custom-${M}`,label:M,value:M,category:"Fuzzy Search"}:E={id:`${M.category}-${M.id}`,label:M.label,value:M.value,category:M.category},g.some(R=>R.value===E.value&&R.category===E.category)||b(R=>[...R,E])},v=M=>{b(E=>E.filter(R=>R.id!==M))},p=n.filter(M=>g.length===0?!0:g.every(E=>{switch(E.category){case"Fuzzy Search":return!0;case"Effects":return M.effects.some(R=>R.mgefName===E.value);default:return!0}})),x=g.filter(M=>M.category==="Fuzzy Search").map(M=>M.value).join(" "),{filteredIngredients:w}=aW(p,x),N=h.useMemo(()=>{console.log(`ðŸ”„ Sorting triggered - sortBy: ${u}, filteredIngredients.length: ${w.length}`);const M=[...w].sort((E,R)=>{let T=0;switch(u){case"alphabetical":T=E.name.localeCompare(R.name);break;case"value":T=R.value-E.value,T===0&&(T=E.name.localeCompare(R.name));break;case"weight":T=E.weight-R.weight,T===0&&(T=E.name.localeCompare(R.name));break;default:T=0}return T});return console.log(`âœ… Sort complete - sortBy: ${u}, Total items: ${M.length}`),M.length>0&&console.log("ðŸ“Š First 3 items after sort:",M.slice(0,3).map(E=>({name:E.name,value:E.value,weight:E.weight}))),M},[w,u]),{displayedItems:j,loadMore:_,resetPagination:k,paginationInfo:A,hasMore:S}=nW(N);h.useEffect(()=>{k()},[g,u,k]);const C=M=>{};return t?r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading alchemy ingredients..."})]})}):s?r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-destructive mb-2",children:"Error loading alchemy ingredients"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s})]})}):r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx("div",{className:"flex-1",children:r.jsx(ta,{categories:m,onSelect:y,onCustomSearch:y})})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(Km,{viewMode:l,onViewModeChange:c}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:u,onChange:M=>{const E=M.target.value;console.log(`ðŸ”„ Select changed from ${u} to ${E}`),d(E)},className:"appearance-none bg-background border border-border rounded-lg px-3 py-1.5 pr-8 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer",children:[r.jsx("option",{value:"alphabetical",children:"Sort: A-Z"}),r.jsx("option",{value:"value",children:"Sort: Value"}),r.jsx("option",{value:"weight",children:"Sort: Weight"})]}),r.jsx(vt,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]})]}),r.jsx("div",{className:"my-4",children:g.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("button",{onClick:()=>b([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[r.jsx(ze,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),g.map(M=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>v(M.id),title:"Click to remove",children:[M.label,r.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},M.id))]})}),r.jsxs(qa,{defaultValue:"ingredients",className:"w-full",children:[r.jsxs(Qa,{className:"mb-4",children:[r.jsx(kt,{value:"ingredients",children:"Ingredients"}),r.jsx(kt,{value:"statistics",children:"Statistics"}),r.jsx(kt,{value:"meta",children:"Meta Analysis"})]}),r.jsx(At,{value:"ingredients",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",A.displayedItems," of"," ",A.totalItems," ingredients"]}),l==="grid"&&r.jsx(iW,{ingredients:j,variant:"default",columns:3,onIngredientClick:C,showEffects:!0,showProperties:!0,getEffectComparisons:o,loadMore:_,hasMore:S}),l==="list"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx(rW,{ingredients:j,variant:"default",onIngredientClick:C,showEffects:!0,showProperties:!0,getEffectComparisons:o}),S&&r.jsx("div",{className:"flex justify-center pt-4",children:r.jsxs(G,{variant:"outline",onClick:_,className:"w-full max-w-xs",children:["Load More (",A.displayedItems," of"," ",A.totalItems,")"]})})]})]})}),r.jsx(At,{value:"statistics",children:a&&r.jsx(lW,{statistics:a})}),r.jsx(At,{value:"meta",children:r.jsx(oW,{ingredients:e})})]}),r.jsx(Tu,{threshold:400})]})}function uW(){return r.jsx(Ut,{title:"Alchemy Ingredients",description:"Discover and explore all available alchemy ingredients in LoreRim. Search by effects, skills, plugins, and more.",children:r.jsx(cW,{})})}function dW(e={}){const{autoLoad:t=!0,refreshOnMount:s=!1}=e,{data:n,loading:a,error:i,load:o}=xa(),l=h.useCallback(async()=>{t&&n.length===0&&await o()},[t,n.length,o]),c=h.useCallback(async()=>{await o()},[o]),u=h.useCallback(()=>{},[]);h.useEffect(()=>{t&&n.length===0&&l()},[t,n.length,l]),h.useEffect(()=>{s&&c()},[s,c]);const d=n.length,f=[...new Set(n.map(j=>j.category).filter(Boolean))],m=[...new Set(n.flatMap(j=>j.effects.map(_=>_.name)))],g=[...new Set(n.flatMap(j=>j.ingredients))],b=new Date().toISOString(),y=n.length>0?{recipes:n,totalCount:d,categories:f,effects:m,ingredients:g,lastUpdated:b}:null,v=h.useCallback(j=>xa.getState().getByName(j),[]),p=h.useCallback(j=>xa.getState().getByCategory(j),[]),x=h.useCallback(j=>xa.getState().getByDifficulty(j),[]),w=h.useCallback(j=>xa.getState().getByIngredient(j),[]),N=h.useCallback(j=>xa.getState().getByEffect(j),[]);return{recipes:n,recipeData:y,loading:a,error:i,totalCount:d,categories:f,effects:m,ingredients:g,lastUpdated:b,loadRecipes:l,refresh:c,clearError:u,getRecipeByName:v,getRecipesByCategory:p,getRecipesByDifficulty:x,getRecipesByIngredient:w,getRecipesByEffect:N}}function fW(e,t={}){const{initialFilters:s={},enableSearch:n=!0,enableSorting:a=!0}=t,i=Array.isArray(e)?e:[],[o,l]=h.useState({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null,...s}),[c,u]=h.useState([]),[d,f]=h.useState("name"),[m,g]=h.useState("asc"),b=h.useCallback(L=>{c.some(D=>D.value===L.value&&D.category===L.category)||u(D=>[...D,L])},[c]),y=h.useCallback(L=>{u(D=>D.filter(I=>I.id!==L))},[]),v=h.useCallback(()=>{u([])},[]),p=h.useCallback(L=>{l(D=>({...D,searchTerm:L}))},[]),x=h.useCallback(L=>{l(D=>({...D,categories:L}))},[]),w=h.useCallback(L=>{l(D=>({...D,effects:L}))},[]),N=h.useCallback(L=>{l(D=>({...D,ingredients:L}))},[]),j=h.useCallback(L=>{l(D=>({...D,difficulties:L}))},[]),_=h.useCallback(L=>{l(D=>({...D,hasEffects:L}))},[]),k=h.useCallback(L=>{l(D=>({...D,isComplex:L}))},[]),A=h.useCallback((L,D)=>{l(I=>({...I,minIngredientCount:L,maxIngredientCount:D}))},[]),S=h.useCallback((L,D)=>{l(I=>({...I,minMagnitude:L,maxMagnitude:D}))},[]),C=h.useCallback(()=>{l({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null}),u([])},[]),M=h.useCallback(()=>{l(L=>({...L,searchTerm:""}))},[]),E=h.useCallback(L=>{g(L)},[]),R=h.useCallback(()=>{g(L=>L==="asc"?"desc":"asc")},[]),T=h.useMemo(()=>{let L=Ke.applyFilters(i,o);if(c.length>0){const D=c.reduce((I,F)=>{switch(F.category){case"categories":I.categories.push(F.value);break;case"effects":I.effects.push(F.value);break;case"ingredients":I.ingredients.push(F.value);break;case"difficulties":I.difficulties.push(F.value);break}return I},{categories:[],effects:[],ingredients:[],difficulties:[]});D.categories.length>0&&(L=Ke.filterByCategories(L,D.categories)),D.effects.length>0&&(L=Ke.filterByEffects(L,D.effects)),D.ingredients.length>0&&(L=Ke.filterByIngredients(L,D.ingredients)),D.difficulties.length>0&&(L=Ke.filterByDifficulties(L,D.difficulties))}return a&&(L=Ke.sort(L,d,m)),L},[i,o,c,a,d,m]),O=h.useMemo(()=>!n||!o.searchTerm.trim()?[]:Ke.search(i,o.searchTerm),[i,o.searchTerm,n]),P=h.useMemo(()=>o.searchTerm.trim()!==""||o.categories.length>0||o.effects.length>0||o.ingredients.length>0||o.difficulties.length>0||o.hasEffects!==null||o.isComplex!==null||o.minIngredientCount!==null||o.maxIngredientCount!==null||o.minMagnitude!==null||o.maxMagnitude!==null||c.length>0,[o,c]),B=h.useMemo(()=>{let L=0;return o.searchTerm.trim()&&L++,o.categories.length>0&&(L+=o.categories.length),o.effects.length>0&&(L+=o.effects.length),o.ingredients.length>0&&(L+=o.ingredients.length),o.difficulties.length>0&&(L+=o.difficulties.length),o.hasEffects!==null&&L++,o.isComplex!==null&&L++,(o.minIngredientCount!==null||o.maxIngredientCount!==null)&&L++,(o.minMagnitude!==null||o.maxMagnitude!==null)&&L++,L+=c.length,L},[o,c]);return{filters:o,searchTerm:o.searchTerm,selectedTags:c,setSelectedTags:u,addTagFilter:b,removeTagFilter:y,clearAllTags:v,filteredRecipes:T,searchResults:O,hasActiveFilters:P,filterCount:B,setSearchTerm:p,setCategories:x,setEffects:w,setIngredients:N,setDifficulties:j,setHasEffects:_,setIsComplex:k,setIngredientCountRange:A,setMagnitudeRange:S,clearFilters:C,clearSearch:M,sortBy:d,sortOrder:m,setSortBy:f,setSortOrder:E,toggleSortOrder:R}}function mW(e,t={}){const{enableStatistics:s=!0,enableGrouping:n=!0}=t,a=Array.isArray(e)?e:[],i=h.useMemo(()=>s?Ke.getStatistics(a):{totalRecipes:0,recipesByCategory:{},recipesByDifficulty:{},recipesByEffect:{},averageIngredientCount:0,averageEffectCount:0,mostCommonIngredients:[],mostCommonEffects:[]},[a,s]),o=h.useMemo(()=>{if(!n)return{};const w={};return a.forEach(N=>{const j=N.category||"Uncategorized";w[j]||(w[j]=[]),w[j].push(N)}),w},[a,n]),l=h.useMemo(()=>{if(!n)return{};const w={};return a.forEach(N=>{const j=N.difficulty;w[j]||(w[j]=[]),w[j].push(N)}),w},[a,n]),c=h.useMemo(()=>{if(!n)return{};const w={};return a.forEach(N=>{N.effects.forEach(j=>{w[j.name]||(w[j.name]=[]),w[j.name].push(N)})}),w},[a,n]),u=h.useMemo(()=>{if(!n)return{};const w={};return a.forEach(N=>{N.ingredients.forEach(j=>{w[j]||(w[j]=[]),w[j].push(N)})}),w},[a,n]),d=h.useMemo(()=>Ke.getUniqueCategories(a),[a]),f=h.useMemo(()=>Ke.getUniqueDifficulties(a),[a]),m=h.useMemo(()=>Ke.getUniqueEffects(a),[a]),g=h.useMemo(()=>Ke.getUniqueIngredients(a),[a]),b=h.useMemo(()=>[{name:"Recipe Categories",options:d},{name:"Effects",options:m},{name:"Ingredients",options:g},{name:"Difficulty",options:f}],[d,m,g,f]),y=h.useMemo(()=>(w,N)=>{const j=w.ingredientCount-N.ingredientCount,_=w.effectCount-N.effectCount,k=w.totalMagnitude-N.totalMagnitude,A=w.maxDuration-N.maxDuration,S=new Set(w.ingredients),C=new Set(N.ingredients),M=[...S].filter(D=>C.has(D)),E=[...S].filter(D=>!C.has(D)),R=[...C].filter(D=>!S.has(D)),T=new Set(w.effects.map(D=>D.name)),O=new Set(N.effects.map(D=>D.name)),P=[...T].filter(D=>O.has(D)),B=[...T].filter(D=>!O.has(D)),L=[...O].filter(D=>!T.has(D));return{recipe1:w,recipe2:N,differences:{ingredientCount:{difference:j,percentage:N.ingredientCount>0?j/N.ingredientCount*100:0},effectCount:{difference:_,percentage:N.effectCount>0?_/N.effectCount*100:0},magnitude:{difference:k,percentage:N.totalMagnitude>0?k/N.totalMagnitude*100:0},duration:{difference:A,percentage:N.maxDuration>0?A/N.maxDuration*100:0},ingredients:{added:E,removed:R,common:M},effects:{added:B,removed:L,common:P}}}},[]),v=h.useMemo(()=>w=>{if(w.ingredientCount===0)return 0;const N=w.totalMagnitude*w.maxDuration,j=w.ingredientCount;return N/j},[]),p=h.useMemo(()=>w=>{let N=0;switch(N+=w.ingredientCount*.3,N+=w.effectCount*.4,N+=w.effects.reduce((j,_)=>j+_.magnitude*_.duration*.1,0),w.difficulty){case"Simple":N+=1;break;case"Moderate":N+=2;break;case"Complex":N+=3;break}return Math.round(N*10)/10},[]),x=h.useMemo(()=>w=>Ke.getEffectComparisons(w,a),[a]);return{statistics:i,recipesByCategory:o,recipesByDifficulty:l,recipesByEffect:c,recipesByIngredient:u,availableCategories:d,availableDifficulties:f,availableEffects:m,availableIngredients:g,searchCategories:b,compareRecipes:y,getRecipeEfficiency:v,getRecipeComplexity:p,getEffectComparisons:x}}const _N=50;function hW(e){const[t,s]=h.useState(1),n=h.useRef([]),a=h.useMemo(()=>{const u=t*_N;return e.slice(0,u)},[e,t]);h.useEffect(()=>{const u=n.current;(u.length!==e.length||e.some((f,m)=>{var g;return f.name!==((g=u[m])==null?void 0:g.name)}))&&(s(1),n.current=e)},[e]);const i=h.useMemo(()=>a.length<e.length,[a.length,e.length]),o=h.useCallback(()=>{i&&s(u=>u+1)},[i]),l=h.useCallback(()=>{s(1)},[]),c=h.useMemo(()=>({displayedItems:a.length,totalItems:e.length,hasMore:i,currentPage:t,itemsPerPage:_N}),[a.length,e.length,i,t]);return{displayedItems:a,loadMore:o,resetPagination:l,paginationInfo:c,hasMore:i}}function Ky({recipe:e,variant:t="default",onClick:s,isSelected:n=!1,showEffects:a=!0,showIngredients:i=!0,effectComparisons:o=[]}){const l=()=>{s==null||s()},c=v=>typeof v=="string"?v:v&&typeof v=="object"?v.item?v.item:v.name?v.name:v.label?v.label:v.id?v.id:"Unknown Ingredient":String(v||""),u=v=>typeof v=="string"?v:typeof v=="number"?v.toString():v&&typeof v=="object"?v.name?v.name:v.label?v.label:v.id?v.id:v.item?v.item:v.category?v.category:c(v):String(v||""),d=v=>r.jsx(br,{className:"h-4 w-4 text-green-500"}),f=v=>{if(typeof v=="string")return{name:v,count:1};if(v&&typeof v=="object"){const p=c(v),x=v.count||v.amount||1;return{name:p,count:x}}return{name:String(v||""),count:1}},m=v=>u(v.description||""),g=()=>r.jsxs(ae,{className:`cursor-pointer transition-all hover:shadow-md ${n?"ring-2 ring-primary":""}`,onClick:l,children:[r.jsx(de,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-medium truncate",children:u(e.name)}),r.jsx("div",{className:"flex gap-1",children:e.category&&r.jsx(Q,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),r.jsx(oe,{className:"pt-0",children:r.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.ingredientCount," ingredients â€¢ ",e.effectCount," effects"]})})]}),b=()=>r.jsxs(ae,{className:`cursor-pointer transition-all hover:shadow-md ${n?"ring-2 ring-primary":""}`,onClick:l,children:[r.jsx(de,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium truncate",children:u(e.name)}),e.description&&r.jsx(we,{text:u(e.description),className:"text-sm text-muted-foreground mt-1 line-clamp-2",as:"p"})]}),r.jsx("div",{className:"flex flex-col gap-1 ml-2",children:e.category&&r.jsx(Q,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),r.jsx(oe,{className:"pt-0",children:r.jsxs("div",{className:"space-y-2",children:[i&&e.ingredients.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:["Ingredients (",e.ingredientCount,")"]}),r.jsx("div",{className:"space-y-1",children:e.ingredients.map((v,p)=>{const{name:x,count:w}=f(v);return r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:x}),r.jsxs("span",{className:"font-medium",children:["Ã—",w]})]},p)})})]}),a&&e.effects.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:["Effects (",e.effectCount,")"]}),r.jsx("div",{className:"space-y-2",children:e.effects.map((v,p)=>r.jsx("div",{className:"p-2 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-2",children:[d(),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-xs mb-1",children:u(v.name)}),r.jsx("div",{className:"text-xs text-muted-foreground",children:r.jsx(we,{text:m(v),className:"text-xs text-muted-foreground"})})]})]})},p))})]}),!1]})})]}),y=()=>r.jsxs(ae,{className:`cursor-pointer transition-all hover:shadow-md ${n?"ring-2 ring-primary":""}`,onClick:l,children:[r.jsx(de,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium",children:u(e.name)}),e.description&&r.jsx(we,{text:u(e.description),className:"text-sm text-muted-foreground mt-1",as:"p"})]}),r.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[e.category&&r.jsx(Q,{variant:"secondary",className:"text-xs",children:u(e.category)}),e.type&&r.jsx(Q,{variant:"outline",className:"text-xs",children:u(e.type)})]})]})}),r.jsx(oe,{className:"pt-0",children:r.jsxs("div",{className:"space-y-3",children:[i&&e.ingredients.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Ingredients"}),r.jsx("div",{className:"space-y-2",children:e.ingredients.map((v,p)=>{const{name:x,count:w}=f(v);return r.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-lg",children:[r.jsx("span",{className:"text-sm",children:x}),r.jsxs("span",{className:"font-medium text-sm",children:["Ã—",w]})]},p)})})]}),a&&e.effects.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium mb-3",children:"Effects"}),r.jsx("div",{className:"space-y-3",children:e.effects.map((v,p)=>r.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:r.jsxs("div",{className:"flex items-start gap-3",children:[d(),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-sm mb-1",children:u(v.name)}),r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsx(we,{text:m(v),className:"text-sm text-muted-foreground"})})]})]})},p))})]}),!1,r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t",children:[r.jsxs("span",{children:["Total Magnitude: ",e.totalMagnitude]}),r.jsxs("span",{children:["Max Duration: ",e.maxDuration,"s"]})]})]})})]});switch(t){case"compact":return g();case"detailed":return y();default:return b()}}function gW({recipes:e,variant:t="default",onRecipeClick:s,selectedRecipes:n=[],showEffects:a=!0,showIngredients:i=!0,className:o,getEffectComparisons:l}){const c=u=>{s==null||s(u)};return e.length===0?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-muted-foreground",children:"No recipes found"})})}):r.jsx("div",{className:`space-y-3 ${o||""}`,children:e.map(u=>r.jsx(Ky,{recipe:u,variant:t,onClick:()=>c(u),isSelected:n.includes(u.name),showEffects:a,showIngredients:i,effectComparisons:(l==null?void 0:l(u))||[]},u.name))})}function pW({recipes:e,loadMore:t,hasMore:s=!0,columns:n=3,gap:a=12,maxColumnWidth:i,className:o="",variant:l="default",onRecipeClick:c,showEffects:u=!0,showIngredients:d=!0,getEffectComparisons:f}){const[m,g]=h.useState(0),b=h.useRef(null),y=h.useRef(null),v=h.useCallback(()=>i&&m>0?Math.max(1,Math.floor(m/i)):n,[n,i,m]);h.useEffect(()=>{const x=()=>{b.current&&g(b.current.offsetWidth)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),h.useEffect(()=>{if(!t||!s||!y.current)return;const x=new IntersectionObserver(w=>{w.forEach(N=>{N.isIntersecting&&t&&t()})},{threshold:.1,rootMargin:"0px 0px 4000px 0px"});return x.observe(y.current),()=>x.disconnect()},[t,s]);const p=h.useCallback(()=>{const x=v();return r.jsx("div",{className:"w-full",style:{display:"grid",gridTemplateColumns:`repeat(${x}, 1fr)`,gap:`${a}px`},children:e.map(w=>r.jsx(Ky,{recipe:w,variant:l,onClick:()=>c==null?void 0:c(w),showEffects:u,showIngredients:d,effectComparisons:(f==null?void 0:f(w))||[],className:"w-full h-full"},w.name))})},[e,v,a,l,c,u,d,f]);return e.length===0?r.jsx("div",{className:`text-center py-12 ${o}`,children:r.jsx("p",{className:"text-muted-foreground",children:"No recipes to display"})}):r.jsxs("div",{ref:b,className:o,children:[p(),s&&t&&r.jsx("div",{ref:y,className:"w-full h-16 mt-16",style:{minHeight:"64px"}})]})}function xW({recipes:e,className:t}){const s=z.useMemo(()=>{const l=new Map;return e.forEach(c=>{c.effects.forEach(u=>{const d=u.name||"Unknown Effect",f=u.magnitude||0,m=u.duration||0;l.has(d)||l.set(d,{name:d,count:0,averageMagnitude:0,averageDuration:0,totalMagnitude:0,totalDuration:0,recipes:[]});const g=l.get(d);g.count++,g.totalMagnitude+=f,g.totalDuration+=m,g.recipes.includes(c.name)||g.recipes.push(c.name)})}),l.forEach(c=>{c.averageMagnitude=c.totalMagnitude/c.count,c.averageDuration=c.totalDuration/c.count}),Array.from(l.values()).sort((c,u)=>u.count-c.count)},[e]),n=z.useMemo(()=>{if(s.length===0)return{magnitude:0,duration:0};const l=s.reduce((u,d)=>u+d.averageMagnitude,0),c=s.reduce((u,d)=>u+d.averageDuration,0);return{magnitude:l/s.length,duration:c/s.length}},[s]),a=(l,c)=>{const d=(l-c)/c*100;return d>20?"text-green-600":d>10?"text-green-500":d<-20?"text-red-600":d<-10?"text-red-500":"text-muted-foreground"},i=(l,c)=>{const d=(l-c)/c*100;return d>10?r.jsx(Dr,{className:"h-4 w-4 text-green-500"}):d<-10?r.jsx(Fc,{className:"h-4 w-4 text-red-500"}):null},o=(l,c)=>{const u=l-c,d=u/c*100,f=u>=0?"+":"";return`${f}${u.toFixed(1)} (${f}${d.toFixed(1)}%)`};return s.length===0?r.jsxs(ae,{className:t,children:[r.jsx(de,{children:r.jsx(ve,{className:"text-lg",children:"Food Effect Meta Analysis"})}),r.jsx(oe,{children:r.jsx("p",{className:"text-muted-foreground",children:"No effects found to analyze."})})]}):r.jsxs(ae,{className:t,children:[r.jsxs(de,{children:[r.jsx(ve,{className:"text-lg",children:"Food Effect Meta Analysis"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Analysis of ",s.length," unique effects across ",e.length," recipes"]})]}),r.jsx(oe,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:n.magnitude.toFixed(1)}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Magnitude"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold",children:[n.duration.toFixed(1),"s"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Duration"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"font-medium text-sm",children:"Effect Analysis"}),s.slice(0,10).map(l=>r.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[r.jsx("div",{className:"flex items-start justify-between mb-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(br,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"font-medium text-sm",children:l.name}),r.jsxs(Q,{variant:"secondary",className:"text-xs",children:[l.count," recipes"]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx("span",{className:"text-muted-foreground",children:"Magnitude:"}),r.jsx("span",{className:"font-medium",children:l.averageMagnitude.toFixed(1)}),i(l.averageMagnitude,n.magnitude)]}),r.jsx("div",{className:$("text-xs",a(l.averageMagnitude,n.magnitude)),children:o(l.averageMagnitude,n.magnitude)})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),r.jsxs("span",{className:"font-medium",children:[l.averageDuration.toFixed(1),"s"]}),i(l.averageDuration,n.duration)]}),r.jsx("div",{className:$("text-xs",a(l.averageDuration,n.duration)),children:o(l.averageDuration,n.duration)})]})]}),l.recipes.length>0&&r.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:r.jsxs("div",{className:"text-xs text-muted-foreground mb-1",children:["Found in: ",l.recipes.slice(0,3).join(", "),l.recipes.length>3&&` +${l.recipes.length-3} more`]})})]},l.name)),s.length>10&&r.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing top 10 effects of ",s.length," total"]})]}),r.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-sm mb-2",children:"Legend"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dr,{className:"h-3 w-3 text-green-500"}),r.jsx("span",{children:"Above average (+10%+)"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fc,{className:"h-3 w-3 text-red-500"}),r.jsx("span",{children:"Below average (-10%+)"})]})]})]})]})})]})}function yW({statistics:e,className:t}){const{totalRecipes:s,foodRecipes:n,alcoholRecipes:a,recipesByCategory:i,recipesByDifficulty:o,averageIngredientCount:l,averageEffectCount:c,averageMagnitude:u,averageDuration:d,topEffects:f,topIngredients:m}=e,g=[{title:"Total Recipes",value:s,icon:W4,description:"All available recipes",color:"text-blue-600"},{title:"Food Recipes",value:n,icon:y5,description:"Culinary recipes",color:"text-green-600"},{title:"Alcohol Recipes",value:a,icon:w5,description:"Beverage recipes",color:"text-purple-600"},{title:"Avg Ingredients",value:l.toFixed(1),icon:tn,description:"Per recipe",color:"text-orange-600"},{title:"Avg Effects",value:c.toFixed(1),icon:St,description:"Per recipe",color:"text-yellow-600"},{title:"Avg Magnitude",value:u.toFixed(1),icon:Dr,description:"Effect strength",color:"text-red-600"}];return r.jsxs("div",{className:`space-y-6 ${t||""}`,children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(b=>{const y=b.icon;return r.jsxs(ae,{children:[r.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ve,{className:"text-sm font-medium",children:b.title}),r.jsx(y,{className:`h-4 w-4 ${b.color}`})]}),r.jsxs(oe,{children:[r.jsx("div",{className:"text-2xl font-bold",children:b.value}),r.jsx("p",{className:"text-xs text-muted-foreground",children:b.description})]})]},b.title)})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx(Qn,{className:"h-4 w-4"}),"Recipe Categories"]})}),r.jsx(oe,{children:r.jsxs("div",{className:"space-y-2",children:[Object.entries(i).sort(([,b],[,y])=>y-b).slice(0,8).map(([b,y])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:b}),r.jsx(Q,{variant:"secondary",className:"text-xs",children:y})]},b)),Object.keys(i).length>8&&r.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["+",Object.keys(i).length-8," more categories"]})]})})]}),r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx($n,{className:"h-4 w-4"}),"Recipe Difficulties"]})}),r.jsx(oe,{children:r.jsx("div",{className:"space-y-2",children:Object.entries(o).sort(([,b],[,y])=>y-b).map(([b,y])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:b}),r.jsx(Q,{variant:b==="Simple"?"default":b==="Moderate"?"secondary":"destructive",className:"text-xs",children:y})]},b))})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx(St,{className:"h-4 w-4"}),"Most Common Effects"]})}),r.jsx(oe,{children:r.jsx("div",{className:"space-y-2",children:f.slice(0,8).map((b,y)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:b.name}),r.jsxs(Q,{variant:"outline",className:"text-xs",children:[b.count," recipes"]})]},b.name))})})]}),r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx(tn,{className:"h-4 w-4"}),"Most Common Ingredients"]})}),r.jsx(oe,{children:r.jsx("div",{className:"space-y-2",children:m.slice(0,8).map((b,y)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:b.name}),r.jsxs(Q,{variant:"outline",className:"text-xs",children:[b.count," recipes"]})]},b.name))})})]})]})]})}function vW(e,t){return{filteredRecipes:h.useMemo(()=>{if(!t.trim())return e;const a=t.toLowerCase().trim().split(/\s+/);return e.filter(i=>{const o=[i.name,i.output,i.description||"",...i.ingredients.map(l=>typeof l=="string"?l:l&&typeof l=="object"&&(l.name||l.label||l.id)||String(l)),...i.effects.map(l=>l.name),...i.effects.map(l=>l.description),i.category||"",i.difficulty||"",i.type||"",...i.tags].join(" ").toLowerCase();return a.every(l=>o.includes(l))})},[e,t]),searchQuery:t.trim()}}function bW(){const{recipes:e,loading:t,error:s}=dW(),{filteredRecipes:n}=fW(e),{statistics:a,availableCategories:i,availableEffects:o,availableIngredients:l,getEffectComparisons:c}=mW(e),[u,d]=h.useState("grid"),m=(()=>{try{if(!e||e.length===0)return[];const C=l||[],M=o||[],E=i||[];return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, ingredients, effects, or description...",options:[]},{id:"ingredients",name:"Ingredients",placeholder:"Filter by ingredient...",options:C.map(R=>({id:`ingredient-${R}`,label:R,value:R,category:"Ingredients",description:`Recipes with ${R}`}))},{id:"effects",name:"Effects",placeholder:"Filter by effect...",options:M.map(R=>({id:`effect-${R}`,label:R,value:R,category:"Effects",description:`Recipes with ${R} effect`}))},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:E.map(R=>({id:`category-${R}`,label:R,value:R,category:"Categories",description:`${R} recipes`}))}]}catch{return[]}})(),[g,b]=h.useState([]),y=C=>{let M;typeof C=="string"?M={id:`custom-${C}`,label:C,value:C,category:"Fuzzy Search"}:M={id:`${C.category}-${C.id}`,label:C.label,value:C.value,category:C.category},g.some(E=>E.value===M.value&&E.category===M.category)||b(E=>[...E,M])},v=C=>{b(M=>M.filter(E=>E.id!==C))},p=n.filter(C=>g.length===0?!0:g.every(M=>{switch(M.category){case"Fuzzy Search":return!0;case"Categories":return C.category===M.value;case"Ingredients":return C.ingredients.some(E=>typeof E=="string"?E===M.value:E&&typeof E=="object"?E.item===M.value||E.name===M.value||E.label===M.value||E.id===M.value:!1);case"Effects":return C.effects.some(E=>E.name===M.value);default:return!0}})),x=g.filter(C=>C.category==="Fuzzy Search").map(C=>C.value).join(" "),{filteredRecipes:w}=vW(p,x),{displayedItems:N,loadMore:j,resetPagination:_,paginationInfo:k,hasMore:A}=hW(w);h.useEffect(()=>{_()},[g,_]);const S=C=>{};return t?r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading recipes..."})]})}):s?r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-destructive mb-2",children:"Error loading recipes"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s})]})}):r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx("div",{className:"flex-1",children:r.jsx(ta,{categories:m,onSelect:y,onCustomSearch:y})})}),r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx(Km,{viewMode:u,onViewModeChange:d})}),r.jsx("div",{className:"my-4",children:g.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("button",{onClick:()=>b([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[r.jsx(ze,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),g.map(C=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>v(C.id),title:"Click to remove",children:[C.label,r.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},C.id))]})}),r.jsxs(qa,{defaultValue:"recipes",className:"w-full",children:[r.jsxs(Qa,{className:"mb-4",children:[r.jsx(kt,{value:"recipes",children:"Recipes"}),r.jsx(kt,{value:"statistics",children:"Statistics"}),r.jsx(kt,{value:"meta",children:"Meta Analysis"})]}),r.jsx(At,{value:"recipes",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",k.displayedItems," of"," ",k.totalItems," recipes"]}),u==="grid"&&r.jsx(pW,{recipes:N,variant:"default",columns:3,onRecipeClick:S,showEffects:!0,showIngredients:!0,getEffectComparisons:c,loadMore:j,hasMore:A}),u==="list"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx(gW,{recipes:N,variant:"default",onRecipeClick:S,showEffects:!0,showIngredients:!0,getEffectComparisons:c}),A&&r.jsx("div",{className:"flex justify-center pt-4",children:r.jsxs(G,{variant:"outline",onClick:j,className:"w-full max-w-xs",children:["Load More (",k.displayedItems," of"," ",k.totalItems,")"]})})]})]})}),r.jsx(At,{value:"statistics",children:r.jsx(yW,{statistics:a})}),r.jsx(At,{value:"meta",children:r.jsx(xW,{recipes:e})})]}),r.jsx(Tu,{threshold:400})]})}function wW(){return r.jsx(Ut,{title:"Cookbook Reference",description:"Browse and search all available recipes. Find the perfect dish for your character's needs.",children:r.jsx(bW,{})})}function NW({path:e,className:t=""}){return e.length===0?r.jsxs("div",{className:`space-y-2 ${t}`,children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Selected Path"}),r.jsx("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:r.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})})]}):r.jsxs("div",{className:`space-y-2 ${t}`,children:[r.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Selected Path (",e.length," nodes)"]}),r.jsx("div",{className:"space-y-2",children:e.map((s,n)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium",children:n+1}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-sm",children:s.name}),s.description&&r.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:s.description})]})]}),r.jsx(Q,{variant:"secondary",className:n===e.length-1?"bg-yellow-600 text-yellow-50":"bg-blue-500",children:n===e.length-1?"Current":"Selected"})]},s.id))})]})}function jW({stepIndex:e,totalSteps:t,title:s,onBack:n,onOverview:a,onClear:i,canBack:o}){const l=t>0?`${e+1} of ${t}`:"Start";return r.jsx("header",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:r.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[r.jsx("div",{className:"flex items-center space-x-2",children:o&&r.jsxs(G,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",children:[r.jsx(Cm,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Go back"})]})}),r.jsxs("div",{className:"flex flex-col items-center flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:s}),r.jsx("div",{className:"text-xs text-muted-foreground",children:l})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(G,{variant:"ghost",size:"sm",onClick:a,className:"h-8 w-8 p-0",children:[r.jsx(ek,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Path overview"})]}),r.jsxs(Zi,{children:[r.jsx(Wi,{asChild:!0,children:r.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[r.jsx(h3,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"More options"})]})}),r.jsx(Gr,{align:"end",children:r.jsx(us,{onClick:i,children:"Clear Path"})})]})]})]})})}function kW({step:e,onChange:t}){return r.jsxs(ae,{className:"border-primary/20 bg-primary/5 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-primary"}),r.jsx(de,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),r.jsx(ve,{className:"text-base font-medium text-primary",children:e.name})]}),r.jsxs(G,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:[r.jsx(G3,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Change step"})]})]})}),r.jsxs(oe,{className:"pt-0",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e.summary}),e.meta.tags&&e.meta.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1",children:e.meta.tags.map(s=>r.jsx(Q,{variant:"secondary",className:"text-xs",children:s},s))}),e.meta.levelRequirement&&r.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Level ",e.meta.levelRequirement," required"]})]})]})}function SW({choice:e,onOpenDetails:t,onSelect:s}){return r.jsxs(ae,{className:"hover:shadow-md transition-shadow border-2 border-dashed border-muted hover:border-primary/50",children:[r.jsx(de,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-muted-foreground/30 rounded-full"}),r.jsx(ve,{className:"text-base font-medium",children:e.name})]}),r.jsxs(G,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:[r.jsx(Jo,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"View details"})]})]})}),r.jsxs(oe,{className:"pt-0",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:e.description||"No description available"}),e.tags&&e.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map(n=>r.jsx(Q,{variant:"outline",className:"text-xs",children:n},n))}),e.levelRequirement&&r.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:["Level ",e.levelRequirement," required"]}),r.jsxs(G,{onClick:s,className:"w-full",size:"sm",children:[r.jsx(Bc,{className:"h-4 w-4 mr-2"}),"Select"]})]})]})}function _W({canBack:e,canNext:t,onBack:s,onOverview:n}){return r.jsx("div",{className:"sticky bottom-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-t",children:r.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[r.jsxs(G,{variant:"outline",size:"sm",onClick:s,disabled:!e,className:"flex items-center space-x-2",children:[r.jsx(Cm,{className:"h-4 w-4"}),r.jsx("span",{children:"Back"})]}),r.jsx("div",{className:"flex-1 flex justify-center",children:r.jsxs(G,{variant:"ghost",size:"sm",onClick:n,className:"flex items-center space-x-2",children:[r.jsx(ek,{className:"h-4 w-4"}),r.jsx("span",{children:"Path Overview"})]})}),r.jsx(G,{variant:"outline",size:"sm",disabled:!t,className:"flex items-center space-x-2 opacity-50",children:r.jsx("span",{children:"Next"})})]})})}function CW({open:e,steps:t,currentIndex:s,onJump:n,onClear:a,onClose:i}){return t.length===0?r.jsx(tl,{open:e,onOpenChange:i,children:r.jsxs(Ci,{side:"bottom",className:"h-[80vh]",children:[r.jsx(sl,{children:r.jsx(nl,{children:"Path Overview"})}),r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"No destiny path selected yet"}),r.jsx(G,{onClick:i,children:"Start Building"})]})]})}):r.jsx(tl,{open:e,onOpenChange:i,children:r.jsxs(Ci,{side:"bottom",className:"h-[80vh]",children:[r.jsx(sl,{className:"flex flex-row items-center justify-between px-0",children:r.jsx(nl,{className:"flex-1 min-w-0",children:"Path Overview"})}),r.jsx(Ai,{className:"flex-1 mt-6",children:r.jsx("div",{className:"space-y-2",children:t.map((o,l)=>r.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${l===s?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>n(l),children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(Q,{variant:l===s?"default":"secondary",children:l+1}),r.jsx("h3",{className:"font-medium text-sm",children:o.name})]}),r.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:o.summary}),o.meta.tags&&o.meta.tags.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[o.meta.tags.slice(0,3).map(c=>r.jsx(Q,{variant:"outline",className:"text-xs",children:c},c)),o.meta.tags.length>3&&r.jsxs(Q,{variant:"outline",className:"text-xs",children:["+",o.meta.tags.length-3]})]})]}),l===s&&r.jsx("div",{className:"ml-2",children:r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})})]})},o.id))})}),r.jsxs("div",{className:"mt-4 pt-4 border-t space-y-3",children:[r.jsx("div",{className:"text-sm text-muted-foreground text-center",children:"Tap any step to jump to that point in your path"}),r.jsxs(G,{variant:"outline",size:"sm",onClick:a,className:"w-full text-destructive hover:text-destructive border-destructive/20 hover:border-destructive/40",children:[r.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Restart Path"]})]})]})})}function EW({open:e,choice:t,onSelect:s,onClose:n}){return t?r.jsx(tl,{open:e,onOpenChange:n,children:r.jsxs(Ci,{side:"bottom",className:"h-[90vh]",children:[r.jsxs(sl,{className:"flex flex-row items-center justify-between",children:[r.jsx(nl,{className:"text-left",children:t.name}),r.jsx(G,{variant:"ghost",size:"sm",onClick:n,children:r.jsx(ze,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto mt-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-sm mb-2",children:"Description"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:t.description||"No description available"})]}),t.tags&&t.tags.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-sm mb-2",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(a=>r.jsx(Q,{variant:"secondary",className:"text-xs",children:a},a))})]}),t.levelRequirement&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-sm mb-2",children:"Requirements"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Level ",t.levelRequirement," required"]})]}),t.prerequisites&&t.prerequisites.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-sm mb-2",children:"Prerequisites"}),r.jsx("div",{className:"space-y-1",children:t.prerequisites.map(a=>r.jsxs("div",{className:"text-sm text-muted-foreground",children:["â€¢ ",a]},a))})]}),t.lore&&r.jsxs(r.Fragment,{children:[r.jsx(li,{}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(Qn,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("h3",{className:"font-medium text-sm",children:"Lore"})]}),r.jsx("p",{className:"text-sm text-muted-foreground italic",children:t.lore})]})]})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[r.jsxs(G,{onClick:s,className:"w-full",size:"lg",children:[r.jsx(Bc,{className:"h-4 w-4 mr-2"}),"Select This Destiny"]}),r.jsx(G,{variant:"outline",onClick:n,className:"w-full",children:"Close"})]})]})}):null}function AW({steps:e,onRestart:t,onShare:s}){return r.jsxs(ae,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/20",children:[r.jsx(de,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($c,{className:"h-5 w-5 text-green-600"}),r.jsx(ve,{className:"text-base text-green-800 dark:text-green-200",children:"Destiny Path Complete!"})]})}),r.jsxs(oe,{className:"pt-0",children:[r.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 mb-4",children:["You have successfully built a destiny path with ",e.length," steps."]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"font-medium text-sm mb-2 text-green-800 dark:text-green-200",children:"Your Path:"}),r.jsx("div",{className:"space-y-1",children:e.map((n,a)=>r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Q,{variant:"outline",className:"text-xs",children:a+1}),r.jsx("span",{className:"text-green-700 dark:text-green-300",children:n.name})]},n.id))})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(G,{variant:"outline",size:"sm",onClick:t,className:"flex-1",children:[r.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Start Over"]}),r.jsxs(G,{variant:"outline",size:"sm",onClick:s,className:"flex-1",children:[r.jsx(K3,{className:"h-4 w-4 mr-2"}),"Share Path"]})]})]})]})}function xR(e){const{filterType:t,currentPath:s=[]}=e,{nodes:n,rootNodes:a}=Qr(),[i,o]=h.useState([]),{possiblePaths:l}=ah({fromNode:s.length>0?s[s.length-1]:void 0}),c=h.useMemo(()=>{if(t!=="build-path"||s.length===0)return n;const v=new Set,p=new Set,x=N=>{p.has(N)||(p.add(N),v.add(N),n.forEach(j=>{j.prerequisites.includes(N)&&x(j.edid)}))},w=s[s.length-1];return x(w.edid),n.filter(N=>v.has(N.edid))},[t,s,n,a]),u=h.useMemo(()=>{if(t==="build-path"){const v=new Set,p=new Set;l.forEach(N=>{N.path.forEach(j=>{v.add(j.edid)}),N.path.length>0&&p.add(N.path[N.path.length-1].edid)});const x=n.filter(N=>v.has(N.edid)),w=n.filter(N=>p.has(N.edid));return[{id:"includes-node",name:"Includes Node",placeholder:"Filter paths that include this node...",options:x.map(N=>{const j=l.filter(_=>_.path.some(k=>k.edid===N.edid)).length;return{id:`includes-${N.id}`,label:N.name,value:N.edid,category:"Includes Node",description:`${j} path${j!==1?"s":""} include ${N.name}`}})},{id:"ends-with-node",name:"Ends With Node",placeholder:"Filter paths that end with this node...",options:w.map(N=>{const j=l.filter(_=>_.path.length>0&&_.path[_.path.length-1].edid===N.edid).length;return{id:`ends-${N.id}`,label:N.name,value:N.edid,category:"Ends With Node",description:`${j} path${j!==1?"s":""} end with ${N.name}`}})}]}else{const v=[...new Set(n.flatMap(x=>x.tags))],p=[...new Set(n.flatMap(x=>x.prerequisites))];return[{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:v.map(x=>({id:`tag-${x}`,label:x,value:x,category:"Tags",description:`Nodes with ${x} tag`}))},{id:"prerequisites",name:"Prerequisites",placeholder:"Filter by prerequisite...",options:p.map(x=>{const w=n.find(N=>N.edid===x);return{id:`prereq-${x}`,label:w?w.name:x,value:x,category:"Prerequisites",description:`Nodes requiring ${w?w.name:x}`}})}]}},[t,c,n,l]),d=h.useCallback(v=>{o(p=>p.some(w=>w.type===v.type&&w.nodeName===v.nodeName)?p:[...p,v])},[]),f=h.useCallback(v=>{o(p=>p.filter(x=>x.id!==v))},[]),m=h.useCallback(()=>{o([])},[]),g=h.useCallback(()=>u.flatMap(v=>v.options),[u]),b=h.useCallback(v=>c.some(p=>p.id===v.id),[c]),y=h.useMemo(()=>t!=="build-path"||i.length===0?l.map(v=>v.path):l.map(v=>v.path).filter(v=>i.every(p=>{switch(p.type){case"includes-node":return v.some(x=>x.edid===p.nodeName||x.edid===p.nodeId);case"ends-with-node":return v.length>0&&(v[v.length-1].edid===p.nodeName||v[v.length-1].edid===p.nodeId);default:return!0}})),[t,i,l]);return{selectedFilters:i,searchCategories:u,addFilter:d,removeFilter:f,clearFilters:m,filteredPaths:y,availableNodes:c,getFilterOptions:g,isNodeAvailable:b}}function yR({searchCategories:e,selectedFilters:t,onFilterSelect:s,onFilterRemove:n,onClearFilters:a,className:i=""}){const o=e.find(d=>d.id==="includes-node"),l=e.find(d=>d.id==="ends-with-node"),c=e.find(d=>d.id==="tags"),u=e.find(d=>d.id==="prerequisites");return r.jsxs("div",{className:`space-y-4 ${i}`,children:[r.jsxs("div",{className:"flex flex-wrap gap-4",children:[o&&r.jsxs("div",{className:"space-y-2 max-w-sm",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Includes"}),r.jsx(fi,{categories:[o],onSelect:s,placeholder:o.placeholder,className:"w-full"})]}),l&&r.jsxs("div",{className:"space-y-2 max-w-sm",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Ends With"}),r.jsx(fi,{categories:[l],onSelect:s,placeholder:l.placeholder,className:"w-full"})]}),c&&r.jsxs("div",{className:"space-y-2 max-w-sm",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Tags"}),r.jsx(fi,{categories:[c],onSelect:s,placeholder:c.placeholder,className:"w-full"})]}),u&&r.jsxs("div",{className:"space-y-2 max-w-sm",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Prerequisites"}),r.jsx(fi,{categories:[u],onSelect:s,placeholder:u.placeholder,className:"w-full"})]})]}),t.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Active Filters"}),r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("button",{onClick:a,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[r.jsx(ze,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),t.map(d=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>n(d.id),title:"Click to remove",children:[r.jsx("span",{className:"text-xs opacity-70 mr-1",children:d.type==="includes-node"?"Includes:":d.type==="ends-with-node"?"Ends:":d.type==="tags"?"Tag:":"Prereq:"}),d.label,r.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},d.id))]})]})]})}function RW({onPathChange:e,onPathComplete:t,className:s="",compact:n=!1,currentPath:a=[]}){var S,C;const{currentPath:i,currentNode:o,isValidPath:l,pathErrors:c,setPath:u,clearPath:d,goToPathIndex:f,isPathComplete:m,getPathSummary:g}=_y({initialPath:a}),{possiblePaths:b}=ah({fromNode:o||void 0}),{nodes:y}=Qr(),v=xR({filterType:"build-path",currentPath:i}),p=v.selectedFilters.length>0?v.filteredPaths:b.map(M=>M.path),x=M=>{if(typeof M=="string")return;let E,R;if(M.category==="Includes Node")E="includes-node",R=M.id.replace(/^includes-/,"");else if(M.category==="Ends With Node")E="ends-with-node",R=M.id.replace(/^ends-/,"");else return;const T={id:M.id,type:E,nodeName:M.value,nodeId:R,label:M.label};v.addFilter(T)},w=M=>{v.removeFilter(M)},N=()=>{v.clearFilters()},j=(M,E)=>{let R;if(i.length===0)R=M.slice(0,E+1);else{if(E===0)return;const T=M.slice(1,E+1);R=[...i,...T]}u(R),e==null||e(R),m&&(t==null||t(R))},_=M=>{f(M),e==null||e(i)},k=()=>{d(),e==null||e([])},A=g();return n?r.jsxs("div",{className:`space-y-4 ${s}`,children:[r.jsx(NW,{path:i}),i.length>0&&r.jsx("div",{className:"flex justify-end",children:r.jsxs(G,{variant:"outline",size:"sm",onClick:k,className:"text-xs",children:[r.jsx(Ma,{className:"w-3 h-3 mr-1"}),"Clear Path"]})}),p.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Possible Remaining Paths"}),r.jsx(Ai,{className:"h-[200px]",children:r.jsx("div",{className:"p-4",children:r.jsx(Fp,{possiblePaths:p.map(M=>({path:M,isComplete:!1,endNode:M[M.length-1]})),selectedPathLength:i.length,onPathClick:j,variant:"compact"})})})]}),!l&&c.length>0&&r.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(Xo,{className:"w-3 h-3"}),r.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),r.jsx("ul",{className:"space-y-0.5",children:c.map((M,E)=>r.jsxs("li",{children:["â€¢ ",M]},E))})]})]}):r.jsxs("div",{className:`space-y-6 ${s}`,children:[r.jsxs(ae,{children:[r.jsx(de,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx($c,{className:"w-5 h-5 text-primary"}),"Destiny Path Builder"]}),r.jsx("div",{className:"flex items-center gap-2",children:i.length>0&&r.jsxs(G,{variant:"outline",size:"sm",onClick:k,className:"flex items-center gap-1",children:[r.jsx(Ma,{className:"w-4 h-4"}),"Clear Path"]})})]})}),r.jsxs(oe,{children:[r.jsx(tE,{path:i,allNodes:y,onBreadcrumbClick:_,className:"mb-4"}),i.length>0&&r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[r.jsxs("span",{children:["Path Length: ",i.length]}),r.jsx("span",{children:"â€¢"}),r.jsxs("span",{children:["Start: ",(S=A.startNode)==null?void 0:S.name]}),r.jsx("span",{children:"â€¢"}),r.jsxs("span",{children:["Current: ",(C=A.endNode)==null?void 0:C.name]}),m&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"â€¢"}),r.jsx(Q,{variant:"default",className:"text-xs",children:"Complete"})]})]}),!l&&c.length>0&&r.jsxs("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[r.jsx(Xo,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Path Validation Errors:"})]}),r.jsx("ul",{className:"text-sm space-y-1",children:c.map((M,E)=>r.jsxs("li",{className:"text-destructive",children:["â€¢ ",M]},E))})]})]})]}),i.length>0&&r.jsxs(ae,{children:[r.jsx(de,{children:r.jsx(ve,{className:"text-lg",children:"Current Path"})}),r.jsx(oe,{children:r.jsx("div",{className:"space-y-2",children:i.map((M,E)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50",children:[r.jsx(Q,{variant:"outline",className:"text-xs",children:E+1}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium",children:M.name}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:M.description})]})]},M.id))})})]}),r.jsxs(ae,{children:[r.jsxs(de,{children:[r.jsx(ve,{className:"text-lg",children:i.length===0?"Choose Your Starting Point":"Possible Paths"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:i.length===0?"Select a root destiny node to begin your path":p.length===0?v.selectedFilters.length>0?"No paths match your current filters":"You have reached the end of this destiny path":v.selectedFilters.length>0?`Showing ${p.length} filtered paths from your current position`:`Explore ${p.length} possible paths from your current position`})]}),r.jsxs(oe,{className:"h-[600px] p-0",children:[r.jsx("div",{className:"p-6 pb-6",children:r.jsx(yR,{searchCategories:v.searchCategories,selectedFilters:v.selectedFilters,onFilterSelect:x,onFilterRemove:w,onClearFilters:N})}),p.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[v.selectedFilters.length>0?r.jsx(Z3,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}):r.jsx($c,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg font-medium",children:v.selectedFilters.length>0?"No paths match your filters":"Path Complete!"}),r.jsx("p",{className:"text-sm",children:v.selectedFilters.length>0?"Try adjusting your filters to see more paths.":"You've reached the end of this destiny path."})]}):r.jsx(Ai,{className:"h-[calc(600px-200px)]",children:r.jsx("div",{className:"p-6 pt-4",children:r.jsx(Fp,{possiblePaths:p.map(M=>({path:M,isComplete:!1,endNode:M[M.length-1]})),selectedPathLength:i.length,onPathClick:j})})})]})]})]})}function TW({item:e,originalNode:t,allNodes:s}){const n=a=>s.filter(i=>i.prerequisites.includes(a)).map(i=>i.name);return r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t&&t.prerequisites.length>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Prereq:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:t.prerequisites.map((a,i)=>r.jsx(Q,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:a},i))})]}),t&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Leads to:"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[n(t.name).map((a,i)=>r.jsx(Q,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:a},i)),n(t.name).length===0&&r.jsx("span",{className:"text-xs text-muted-foreground",children:"Terminal"})]})]}),e.tags.length>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Tags:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((a,i)=>r.jsx(Q,{variant:"secondary",className:"text-xs",children:a},i))})]})]})}function MW({items:e,allNodes:t}){return r.jsx(Ai,{className:"h-[calc(100vh-500px)]",children:r.jsx(ZH,{type:"single",collapsible:!0,className:"w-full",children:e.map(s=>r.jsxs(MC,{value:s.id,children:[r.jsx(DC,{className:"text-left hover:no-underline",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-bold text-base text-foreground truncate hover:underline",children:s.name}),r.jsx("div",{className:"text-base text-muted-foreground truncate",children:s.description})]})}),r.jsx(PC,{children:r.jsx(TW,{item:s,originalNode:t.find(n=>n.id===s.id),allNodes:t})})]},s.id))})})}const CN=fs((e,t)=>({steps:[],currentIndex:-1,nextChoices:[],selectChoice:s=>{const{steps:n,currentIndex:a,nextChoices:i}=t(),o=i.find(c=>c.edid===s);if(!o)return;const l={id:o.edid,name:o.name,summary:o.description||"",meta:{tags:o.tags||[],levelRequirement:o.levelRequirement,lore:o.lore},node:o};e(c=>{const u=[...c.steps],d=c.currentIndex+1;return d<u.length&&u.splice(d,u.length-d),u.push(l),{steps:u,currentIndex:d,nextChoices:[]}})},jumpTo:s=>{const{steps:n}=t();s<0||s>=n.length||e(a=>({currentIndex:s,steps:a.steps.slice(0,s+1),nextChoices:[]}))},clear:()=>{e({steps:[],currentIndex:-1,nextChoices:[]})},setNextChoices:s=>{e({nextChoices:s})},hydrateFromQuery:s=>{try{const n=atob(s),a=JSON.parse(n);a.steps&&Array.isArray(a.steps)&&e({steps:a.steps,currentIndex:a.currentIndex||a.steps.length-1,nextChoices:a.nextChoices||[]})}catch(n){console.warn("Failed to hydrate from query:",n)}},toQuery:()=>{const{steps:s,currentIndex:n,nextChoices:a}=t(),i={steps:s,currentIndex:n,nextChoices:a.map(o=>o.edid)};try{return btoa(JSON.stringify(i))}catch(o){return console.warn("Failed to serialize to query:",o),""}}}));function DW(){const{steps:e,currentIndex:t,nextChoices:s,selectChoice:n,jumpTo:a,clear:i}=CN(),o=t>=0&&t<e.length?e[t]:null,l=e.length,c=s.length===0,{nodes:u,rootNodes:d}=Qr(),[f,m]=h.useState(!1),[g,b]=h.useState(!1),[y,v]=h.useState(null),[p,x]=h.useState(!1);h.useEffect(()=>{const{setNextChoices:A}=CN.getState();if(t===-1)A(d);else if(o){const S=u.filter(C=>{var M;return(M=C.prerequisites)==null?void 0:M.includes(o.node.edid)});A(S)}else A([])},[t,o,u,d]);const w=A=>{n(A),b(!1),v(null)},N=A=>{v(A),b(!0)},j=()=>{t>0&&a(t-1)},_=A=>{a(A),m(!1)},k=()=>{i(),m(!1)};return r.jsxs("div",{className:"flex min-h-screen flex-col bg-background",children:[r.jsx(jW,{stepIndex:t,totalSteps:l,title:(o==null?void 0:o.name)??"Start Destiny",onBack:j,onOverview:()=>m(!0),onClear:k,canBack:t>0}),r.jsxs("main",{className:"flex-1 px-3 py-2 space-y-4",children:[o&&r.jsxs("div",{className:"space-y-2 p-3 rounded-lg bg-muted/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"h-px flex-1 bg-border"}),r.jsx("span",{className:"text-xs font-medium text-muted-foreground px-2",children:"CURRENT STEP"}),r.jsx("div",{className:"h-px flex-1 bg-border"})]}),r.jsx(kW,{step:o,onChange:()=>x(!0)})]}),o&&!c&&s.length>0&&r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"w-px h-6 bg-primary/30"})}),!c&&s.length>0&&r.jsxs("section",{"aria-label":"Next choices",className:"space-y-3 p-3 rounded-lg bg-background border border-border",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"h-px flex-1 bg-border"}),r.jsx("span",{className:"text-xs font-medium text-muted-foreground px-2",children:t===-1?"CHOOSE STARTING DESTINY":"CHOOSE NEXT STEP"}),r.jsx("div",{className:"h-px flex-1 bg-border"})]}),r.jsxs("div",{className:"space-y-2",children:[s.slice(0,3).map(A=>r.jsx(SW,{choice:A,onOpenDetails:()=>N(A),onSelect:()=>w(A.edid)},A.edid)),s.length>3&&r.jsx("div",{className:"text-center py-2",children:r.jsxs("span",{className:"text-sm text-muted-foreground",children:["+",s.length-3," more choices available"]})})]})]}),c&&l>0&&r.jsx(AW,{steps:e,onRestart:()=>i(),onShare:()=>{}}),l===0&&s.length===0&&r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"No destiny paths available. Please check your prerequisites."})})]}),r.jsx(_W,{canBack:t>0,canNext:!1,onBack:j,onOverview:()=>m(!0)}),r.jsx(CW,{open:f,steps:e,currentIndex:t,onJump:_,onClear:k,onClose:()=>m(!1)}),r.jsx(EW,{open:g,choice:y,onSelect:()=>y&&w(y.edid),onClose:()=>{b(!1),v(null)}})]})}function PW(e){return Vr("(min-width: 1024px)")?r.jsx(RW,{...e}):r.jsx(DW,{})}function LW({items:e,filters:t=[]}){const[s,n]=h.useState(null),[a,i]=h.useState("grid"),[o,l]=h.useState({search:"",selectedFilters:{},selectedTags:[]}),c=h.useMemo(()=>{let b=e;if(o.search){const y=o.search.toLowerCase();b=b.filter(v=>v.name.toLowerCase().includes(y)||v.description.toLowerCase().includes(y)||v.tags.some(p=>p.toLowerCase().includes(y)))}return o.selectedTags.length>0&&(b=b.filter(y=>o.selectedTags.some(v=>y.tags.includes(v.value)||y.category===v.value||y.name.toLowerCase().includes(v.value.toLowerCase())))),b},[e,o]),u=h.useMemo(()=>t.length===0?[]:t.map(b=>({...b,options:b.options.map(y=>({...y,count:e.filter(v=>v.tags.includes(y.value)||v.category===y.value).length}))})),[t,e]),d=h.useCallback(b=>{n(b)},[]),f=h.useCallback(b=>{l(b)},[]),m=h.useCallback(b=>{l(y=>({...y,search:b}))},[]),g=h.useCallback(b=>{i(b)},[]);return{selectedItem:s,viewMode:a,currentFilters:o,filteredItems:c,filtersWithCounts:u,handleItemSelect:d,handleFiltersChange:f,handleSearch:m,handleViewModeChange:g,setSelectedItem:n}}function zW(){const{build:e,setDestinyPath:t}=Ye(),{nodes:s,isLoading:n,error:a}=Qr(),i=h.useMemo(()=>e.destinyPath.map(y=>s.find(v=>v.edid===y)).filter(y=>!!y),[e.destinyPath,s]),{currentPath:o}=_y({initialPath:i,validatePath:!0});ah({fromNode:o.length>0?o[o.length-1]:void 0});const l=xR({filterType:"reference"}),u=h.useMemo(()=>l.selectedFilters.length===0?s:s.filter(y=>l.selectedFilters.every(v=>{var p,x;switch(v.type){case"tags":return(p=y.tags)==null?void 0:p.includes(v.nodeName);case"prerequisites":return(x=y.prerequisites)==null?void 0:x.includes(v.nodeName);default:return!0}})),[s,l.selectedFilters]).map(y=>h9(y));LW({items:u,filters:[]});const d=y=>{if(typeof y=="string")return;let v,p;if(y.category==="Tags")v="tags",p=y.id.replace(/^tag-/,"");else if(y.category==="Prerequisites")v="prerequisites",p=y.id.replace(/^prereq-/,"");else return;const x={id:y.id,type:v,nodeName:y.value,nodeId:p,label:y.label};l.addFilter(x)},f=y=>{l.removeFilter(y)},m=()=>{l.clearFilters()},g=y=>{const v=y.map(p=>p.edid);t(v)},b=y=>{const v=y.map(p=>p.edid);t(v)};return n?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading destiny data..."})]})}):a?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-destructive mb-4",children:a}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):r.jsx(Ut,{title:"Destiny",description:"Plan your character's destiny through the perk tree. Each node represents a powerful ability or enhancement that will shape your journey.",children:r.jsx("div",{className:"mb-6",children:r.jsxs(qa,{defaultValue:"path",className:"w-full",children:[r.jsxs(Qa,{className:"grid w-full grid-cols-2",children:[r.jsx(kt,{value:"path",children:"Path Builder"}),r.jsx(kt,{value:"reference",children:"Reference"})]}),r.jsxs(At,{value:"reference",className:"space-y-4",children:[r.jsx(yR,{searchCategories:l.searchCategories,selectedFilters:l.selectedFilters,onFilterSelect:d,onFilterRemove:f,onClearFilters:m}),r.jsx("div",{className:"w-full",children:r.jsx(MW,{items:u,allNodes:s})})]}),r.jsx(At,{value:"path",className:"space-y-4",children:r.jsx(PW,{currentPath:o,onPathChange:g,onPathComplete:b})})]})})})}function OW(){const{data:e,loading:t,error:s}=B2(),[n,a]=h.useState(null),[i,o]=h.useState(null),[l,c]=h.useState(!1),[u,d]=h.useState(!1),[f,m]=h.useState("alphabetical"),[g,b]=h.useState("grid"),[y,v]=h.useState("religions"),[p]=bk();h.useEffect(()=>{const D=p.get("tab");D==="blessings"?v("blessings"):D==="religions"&&v("religions")},[p]);const x=h.useMemo(()=>(e||[]).map(yE),[e]),w=h.useMemo(()=>x.map(HC),[x]);h.useMemo(()=>x.filter(D=>D.blessing&&D.blessing.effects.length>0),[x]);const N=()=>{const D=[...new Set((e||[]).map(F=>F.pantheon).filter(Boolean))],I=[...new Set(w.flatMap(F=>F.tags))];return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"pantheons",name:"Pantheons",placeholder:"Search by pantheon...",options:D.map(F=>({id:`pantheon-${F}`,label:F,value:F,category:"Pantheons",description:`Religions from ${F} pantheon`}))},{id:"favored-races",name:"Favored Races",placeholder:"Search by favored race...",options:I.map(F=>({id:`race-${F}`,label:F,value:F,category:"Favored Races",description:`Religions that favor ${F}`}))}]},[j,_]=h.useState([]),k=j.filter(D=>D.category==="Fuzzy Search").map(D=>D.value).join(" "),A=h.useMemo(()=>{let D=x;const I=j.filter(F=>F.category!=="Fuzzy Search");return I.length>0&&(D=D.filter(F=>I.every(U=>{var H;return U.category==="Pantheons"?F.type===U.value:U.category==="Favored Races"?(H=F.favoredRaces)==null?void 0:H.includes(U.value):!0}))),D},[x,j]),{filteredReligions:S}=Hp(A,k),C=h.useMemo(()=>{const D=[...S];return D.sort((I,F)=>{if(f==="alphabetical")return I.name.localeCompare(F.name);if(f==="divine-type"){const U=K=>{switch(K){case"Divine":return 1;case"Daedric":return 2;case"Tribunal":return 3;case"Ancestor":return 4;default:return 5}},H=U(I.type),Z=U(F.type);return H!==Z?H-Z:I.name.localeCompare(F.name)}return 0}),D},[S,f]),M=h.useMemo(()=>{let I=x.filter(U=>U.blessing&&U.blessing.effects.length>0);const F=j.filter(U=>U.category!=="Fuzzy Search");return F.length>0&&(I=I.filter(U=>F.every(H=>{var Z;return H.category==="Pantheons"?U.type===H.value:H.category==="Favored Races"?(Z=U.favoredRaces)==null?void 0:Z.includes(H.value):!0}))),I},[x,j]),{filteredReligions:E}=Hp(M,k),R=h.useMemo(()=>{const D=[...E];return D.sort((I,F)=>{if(f==="alphabetical")return I.name.localeCompare(F.name);if(f==="divine-type"){const U=K=>{switch(K){case"Divine":return 1;case"Daedric":return 2;case"Tribunal":return 3;case"Ancestor":return 4;default:return 5}},H=U(I.type),Z=U(F.type);return H!==Z?H-Z:I.name.localeCompare(F.name)}return 0}),D},[E,f]),T=D=>{const I=typeof D=="string"?{id:D,label:D,value:D,category:"Fuzzy Search"}:{id:D.id,label:D.label,value:D.value,category:D.category};_(F=>[...F,I])},O=D=>{_(I=>I.filter(F=>F.id!==D))},P=D=>{const I=x.find(F=>F.name===D);I&&(a(I),c(!0))},B=D=>{o(D),d(!0)},L=D=>{switch(D){case"alphabetical":return"A-Z";case"divine-type":return"Type";default:return"A-Z"}};return t?r.jsx(Ut,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-lg",children:"Loading religions..."})})}):s?r.jsx(Ut,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-lg text-red-500",children:["Error loading religions: ",s]})})}):r.jsxs(Ut,{title:"Religions",description:"Choose your character's faith and divine blessings",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(ta,{categories:N(),onSelect:T,onCustomSearch:T}),j.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("button",{onClick:()=>_([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[r.jsx(ze,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),j.map(D=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>O(D.id),title:"Click to remove",children:[D.label,r.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},D.id))]})]}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(G,{variant:g==="grid"?"default":"outline",size:"sm",onClick:()=>b("grid"),className:"flex items-center gap-2",children:[r.jsx($i,{className:"h-4 w-4"}),"Grid"]}),r.jsxs(G,{variant:g==="list"?"default":"outline",size:"sm",onClick:()=>b("list"),className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-4 w-4"}),"List"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(Zi,{children:[r.jsx(Wi,{asChild:!0,children:r.jsxs(G,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort: ",L(f),r.jsx(vt,{className:"h-4 w-4"})]})}),r.jsxs(Gr,{children:[r.jsx(us,{onClick:()=>m("alphabetical"),children:"Alphabetical (A-Z)"}),r.jsx(us,{onClick:()=>m("divine-type"),children:"Religion Type"})]})]})})]}),r.jsx("div",{className:"mt-6",children:r.jsxs(qa,{value:y,onValueChange:D=>v(D),children:[r.jsxs(Qa,{className:"grid w-full grid-cols-2",children:[r.jsxs(kt,{value:"religions",children:["Religions (",C.length,")"]}),r.jsxs(kt,{value:"blessings",children:["Blessings (",R.length,")"]})]}),r.jsxs(At,{value:"religions",className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"text-sm text-muted-foreground",children:[C.length," religion",C.length!==1?"s":""," found"]})}),r.jsx("div",{className:g==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:C.map(D=>r.jsx(pE,{originalReligion:D,onOpenDetails:P,showToggle:!0,className:g==="list"?"w-full":"h-full"},D.name))}),C.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-lg text-muted-foreground",children:"No religions found matching your criteria"}),r.jsx(G,{variant:"outline",onClick:()=>_([]),className:"mt-4",children:"Clear filters"})]})]}),r.jsxs(At,{value:"blessings",className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"text-sm text-muted-foreground",children:[R.length," blessing",R.length!==1?"s":""," found"]})}),r.jsx("div",{className:g==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:R.map(D=>r.jsx(X9,{religion:D,onClick:()=>B(D),showToggle:!0,className:g==="list"?"w-full":"h-full"},D.name))}),R.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-lg text-muted-foreground",children:"No blessings found matching your criteria"}),r.jsx(G,{variant:"outline",onClick:()=>_([]),className:"mt-4",children:"Clear filters"})]})]})]})}),r.jsx(xE,{religion:n,isOpen:l,onOpenChange:c}),r.jsx(s7,{religion:i,isOpen:u,onOpenChange:d})]})}const BW="modulepreload",IW=function(e){return"/lorerim-arcaneum/"+e},EN={},fn=function(t,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(s.map(c=>{if(c=IW(c),c in EN)return;EN[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":BW,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function AN(e){return e.map(t=>({id:`skill-${t.id}`,type:"skill",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...t.keyAbilities||[],...t.metaTags||[],t.scaling||""],originalData:t,url:`/build/perks?skill=${t.id}`}))}function RN(e){return e.map(t=>({id:`race-${t.id}`,type:"race",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.source||"",...t.tags||[],...t.keywords||[]],originalData:t,url:"/races"}))}function TN(e){return e.map(t=>{var s;return{id:`trait-${t.id}`,type:"trait",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...((s=t.effects)==null?void 0:s.map(n=>n.description||n.type))||[]],originalData:t,url:"/traits"}})}function MN(e){const t=[];return e.forEach(s=>{var n,a,i,o,l,c,u,d,f,m,g,b,y,v,p;t.push({id:`religion-${s.id||s.name}`,type:"religion",name:s.name,description:((n=s.tenet)==null?void 0:n.description)||"",category:s.type||s.pantheon||"",tags:s.tags||[],searchableText:[s.name,((a=s.tenet)==null?void 0:a.description)||"",s.type||"",s.pantheon||"",...s.tags||[],...Fn()?s.favoredRaces||[]:[],...s.worshipRestrictions||[],...((o=(i=s.tenet)==null?void 0:i.effects)==null?void 0:o.map(x=>x.effectName))||[],...((c=(l=s.blessing)==null?void 0:l.effects)==null?void 0:c.map(x=>x.effectName))||[],...((d=(u=s.boon1)==null?void 0:u.effects)==null?void 0:d.map(x=>x.effectName))||[],...((m=(f=s.boon2)==null?void 0:f.effects)==null?void 0:m.map(x=>x.effectName))||[]],originalData:s,url:"/religions"}),s.blessing&&s.blessing.effects.length>0&&t.push({id:`blessing-${s.id||s.name}`,type:"blessing",name:`Blessing of ${s.name}`,description:((g=s.blessing.effects[0])==null?void 0:g.effectDescription)||"",category:"Blessing",tags:s.tags||[],searchableText:[`Blessing of ${s.name}`,s.name,((b=s.blessing.effects[0])==null?void 0:b.effectDescription)||"",((y=s.blessing.effects[0])==null?void 0:y.effectName)||"",...((v=s.blessing.effects)==null?void 0:v.map(x=>x.effectName))||[],...((p=s.blessing.effects)==null?void 0:p.map(x=>x.effectDescription))||[],...s.tags||[],"blessing","divine","worship"],originalData:{...s,blessingOnly:!0},url:"/religions?tab=blessings"})}),t}function DN(e){return e.map(t=>{var s,n;return{id:`birthsign-${t.id||t.edid}`,type:"birthsign",name:t.name,description:t.description,category:t.group,tags:t.tags||[],searchableText:[t.name,t.description||"",t.group||"",...t.tags||[],...((s=t.powers)==null?void 0:s.map(a=>a.name||a.description))||[],...((n=t.stat_modifications)==null?void 0:n.map(a=>a.stat))||[]],originalData:t,url:"/birthsigns"}})}function PN(e){return e.map(t=>({id:`destiny-${t.id}`,type:"destiny",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.lore||"",...t.tags||[],...t.prerequisites||[]],originalData:t,url:"/destiny"}))}function LN(e){return e.map(t=>{var s;return{id:`perk-${t.treeId||t.id}`,type:"perk",name:t.treeName||t.name,description:t.treeDescription||t.description,category:t.category,tags:t.tags||[],searchableText:[t.treeName||t.name,t.treeDescription||t.description||"",t.category||"",...t.tags||[],...((s=t.perks)==null?void 0:s.map(n=>n.name))||[]],originalData:t,url:"/build/perks"}})}function zN(e){return e.map(t=>{var s,n,a,i,o,l;return{id:`perk-ref-${t.edid}`,type:"perk-reference",name:t.name,description:((n=(s=t.ranks[0])==null?void 0:s.description)==null?void 0:n.base)||"",category:t.category,tags:t.tags,searchableText:[t.name,((i=(a=t.ranks[0])==null?void 0:a.description)==null?void 0:i.base)||"",((l=(o=t.ranks[0])==null?void 0:o.description)==null?void 0:l.subtext)||"",t.skillTreeName,t.category,...t.tags,...t.prerequisites,t.isRoot?"root perk":"branch perk",t.totalRanks>1?"multi-rank":"single-rank"],originalData:t,url:`/perk-references?skill=${t.skillTree}&perk=${t.edid}`}})}function ON(e){return e.map(t=>({id:`spell-${t.editorId}`,type:"spell",name:t.name,description:t.description,category:t.school,tags:t.tags||[],searchableText:[t.name,t.description||"",t.school||"",t.level||"",t.tome||"",...t.tags||[],...t.effects.map(s=>s.name),...t.effects.map(s=>s.description),t.isAreaSpell?"area spell":"",t.isDurationSpell?"duration spell":"",t.isInstantSpell?"instant spell":"",`magicka cost ${t.magickaCost}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`,`area ${t.maxArea}`].filter(Boolean),originalData:t,url:`/spells?spell=${t.editorId}`}))}function BN(e){return e.map(t=>({id:`recipe-${t.name}`,type:"recipe",name:t.name,description:t.description,category:t.category,tags:t.tags,searchableText:[t.name,t.description||"",t.category||"",t.output||"",t.difficulty||"",t.type||"",...t.tags,...t.ingredients.map(s=>typeof s=="string"?s:s.name||s.item||""),...t.effects.map(s=>s.name),...t.effects.map(s=>s.description),`ingredients ${t.ingredientCount}`,`effects ${t.effectCount}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`].filter(Boolean),originalData:t,url:`/cookbook?recipe=${encodeURIComponent(t.name)}`}))}function $W(e){return{id:e.item.id,name:e.item.name,description:e.item.description||"",summary:e.item.description||"",tags:e.item.tags,category:e.item.category,imageUrl:void 0,effects:[],associatedItems:[],originalSearchResult:e}}function FW(e){return e.map(t=>{var s,n;return{field:t.key||"unknown",snippet:t.value,startIndex:((s=t.indices[0])==null?void 0:s[0])||0,endIndex:((n=t.indices[0])==null?void 0:n[1])||0}})}function IN(e){return e.map(t=>({id:`enchantment-${t.baseEnchantmentId}`,type:"enchantment",name:t.name,description:t.effects.map(s=>s.name).join(", "),category:t.category,tags:[t.targetType,...t.foundOnItems.map(s=>s.type),...t.tags],searchableText:[t.name,...t.effects.map(s=>`${s.name} ${s.description}`),...t.foundOnItems.map(s=>`${s.name} ${s.type}`),t.category,t.plugin,t.searchableText],originalData:t,url:"/enchantments"}))}class HW{constructor(){Re(this,"searchIndex",null);Re(this,"isIndexing",!1);Re(this,"allSearchableItems",[]);Re(this,"indexedStores",new Set);Re(this,"fuseOptions",{keys:[{name:"name",weight:1},{name:"description",weight:.4},{name:"category",weight:.3},{name:"tags",weight:.4},{name:"searchableText",weight:.2}],threshold:.8,includeMatches:!0,includeScore:!0,minMatchCharLength:1,ignoreLocation:!0,useExtendedSearch:!0,findAllMatches:!0});Re(this,"transformSkillsToSearchable",AN);Re(this,"transformRacesToSearchable",RN);Re(this,"transformTraitsToSearchable",TN);Re(this,"transformReligionsToSearchable",MN);Re(this,"transformBirthsignsToSearchable",DN);Re(this,"transformDestinyNodesToSearchable",PN);Re(this,"transformPerkTreesToSearchable",LN);Re(this,"transformPerkReferencesToSearchable",zN);Re(this,"transformRecipesToSearchable",BN);Re(this,"transformSpellsToSearchable",ON);Re(this,"transformEnchantmentsToSearchable",IN)}async addToIndex(t,s){this.indexedStores.has(t)||(this.allSearchableItems.push(...s),this.indexedStores.add(t),this.searchIndex=new ls(this.allSearchableItems,this.fuseOptions))}hasIndexedData(){return this.allSearchableItems.length>0}rebuildSearchIndex(){this.allSearchableItems.length>0&&(this.searchIndex=new ls(this.allSearchableItems,this.fuseOptions))}async buildSearchIndex(){if(!this.isIndexing){this.isIndexing=!0;try{const{useSkillsStore:t}=await fn(async()=>{const{useSkillsStore:A}=await Promise.resolve().then(()=>xL);return{useSkillsStore:A}},[]),{useRacesStore:s}=await fn(async()=>{const{useRacesStore:A}=await Promise.resolve().then(()=>pL);return{useRacesStore:A}},void 0),{useTraitsStore:n}=await fn(async()=>{const{useTraitsStore:A}=await Promise.resolve().then(()=>NB);return{useTraitsStore:A}},void 0),{useReligionsStore:a}=await fn(async()=>{const{useReligionsStore:A}=await Promise.resolve().then(()=>wB);return{useReligionsStore:A}},void 0),{useBirthsignsStore:i}=await fn(async()=>{const{useBirthsignsStore:A}=await Promise.resolve().then(()=>fB);return{useBirthsignsStore:A}},void 0),{useDestinyNodesStore:o}=await fn(async()=>{const{useDestinyNodesStore:A}=await Promise.resolve().then(()=>bB);return{useDestinyNodesStore:A}},void 0),{usePerkTreesStore:l}=await fn(async()=>{const{usePerkTreesStore:A}=await Promise.resolve().then(()=>gL);return{usePerkTreesStore:A}},void 0),{useRecipesStore:c}=await fn(async()=>{const{useRecipesStore:A}=await Promise.resolve().then(()=>UF);return{useRecipesStore:A}},void 0),{SpellDataProvider:u}=await fn(async()=>{const{SpellDataProvider:A}=await Promise.resolve().then(()=>GF);return{SpellDataProvider:A}},void 0),{EnchantmentDataProvider:d}=await fn(async()=>{const{EnchantmentDataProvider:A}=await import("./EnchantmentDataProvider-DExvp-Ap.js");return{EnchantmentDataProvider:A}},[]),f=t.getState().data,m=s.getState().data,g=n.getState().data,b=a.getState().data,y=i.getState().data,v=o.getState().data,p=l.getState().data,x=c.getState().data,N=await u.getInstance().loadSpells(),_=await d.getInstance().loadEnchantments();if(!(f!=null&&f.length)||!(m!=null&&m.length)||!(g!=null&&g.length)||!(b!=null&&b.length)||!(y!=null&&y.length)||!(v!=null&&v.length)||!(p!=null&&p.length)||!(x!=null&&x.length)||!(N!=null&&N.length)||!(_!=null&&_.length))throw new Error("Store data not available - stores must be loaded before building search index");const k=[...AN(f),...RN(m),...TN(g),...MN(b),...DN(y),...PN(v),...LN(p),...BN(x),...ON(N),...IN(_)];this.allSearchableItems=k,this.searchIndex=new ls(k,this.fuseOptions)}catch(t){throw console.error("Failed to build search index:",t),t}finally{this.isIndexing=!1}}}async addPerkReferencesToIndex(t){if(this.indexedStores.has("perk-references"))return;const s=zN(t);this.allSearchableItems.push(...s),this.indexedStores.add("perk-references"),this.searchIndex=new ls(this.allSearchableItems,this.fuseOptions)}search(t,s){if(!this.searchIndex)return[];if(!t.trim()||t.trim()==="*"){let d=this.allSearchableItems;return s&&(d=this.applyFilters(d,s)),d.map(f=>({item:f,score:1,matches:[],highlights:[]}))}if(!this.searchIndex)return console.warn("Search index not ready, returning empty results"),[];const a=t.includes(" | ")||t.includes(" & ")||t.includes("!")?[]:this.allSearchableItems.filter(d=>d.name.toLowerCase()===t.toLowerCase()),i=this.searchIndex.search(t),o=new Set(a.map(d=>d.id)),l=[...a.map(d=>({item:d,score:0,matches:[]})),...i.filter(d=>!o.has(d.item.id))];let c=l;return s&&(l.length,c=l.filter(d=>{const f=d.item;return this.applyFilters([f],s).length>0}),c.length),c.map(d=>({item:d.item,score:d.score||0,matches:[...d.matches||[]],highlights:FW([...d.matches||[]])}))}applyFilters(t,s){return t.filter(n=>{var a,i,o,l,c,u,d,f,m,g,b,y;if((((a=s.types)==null?void 0:a.length)||0)>0&&!((i=s.types)!=null&&i.includes(n.type))||(((o=s.categories)==null?void 0:o.length)||0)>0&&n.category&&!((l=s.categories)!=null&&l.includes(n.category)))return!1;if((((c=s.tags)==null?void 0:c.length)||0)>0){const v=n.tags.map(w=>w.toLowerCase());if(!(s.tags||[]).map(w=>w.toLowerCase()).some(w=>v.some(N=>N.includes(w)||w.includes(N))))return!1}if(n.type==="skill"&&((u=s.skillCategories)!=null&&u.length)&&(!n.category||!s.skillCategories.includes(n.category))||n.type==="race"&&((d=s.raceTypes)!=null&&d.length)&&(!n.category||!s.raceTypes.includes(n.category))||n.type==="trait"&&((f=s.traitTypes)!=null&&f.length)&&(!n.category||!s.traitTypes.includes(n.category))||n.type==="religion"&&((m=s.religionTypes)!=null&&m.length)&&(!n.category||!s.religionTypes.includes(n.category))||n.type==="birthsign"&&((g=s.birthsignGroups)!=null&&g.length)&&(!n.category||!s.birthsignGroups.includes(n.category))||n.type==="spell"&&((b=s.spellSchools)!=null&&b.length)&&(!n.category||!s.spellSchools.includes(n.category)))return!1;if(n.type==="spell"&&((y=s.spellLevels)!=null&&y.length)){const v=n.originalData;if(!v.level||!s.spellLevels.includes(v.level))return!1}return!0})}getAvailableFilters(){const t=new Map,s=new Map,n=new Map;return this.allSearchableItems.forEach(a=>{const i=t.get(a.type)||0;if(t.set(a.type,i+1),a.category){const o=s.get(a.category)||0;s.set(a.category,o+1)}a.tags.forEach(o=>{const l=n.get(o)||0;n.set(o,l+1)})}),{types:Array.from(t.entries()).map(([a,i])=>({value:a,label:a.charAt(0).toUpperCase()+a.slice(1),count:i})),categories:Array.from(s.entries()).map(([a,i])=>({value:a,label:a,count:i})),tags:Array.from(n.entries()).map(([a,i])=>({value:a,label:a,count:i}))}}getSearchableItems(){return this.allSearchableItems}isReady(){return this.searchIndex!==null&&!this.isIndexing}isLoading(){return this.isIndexing}}const UW={skill:{label:"Skill",icon:"âš”ï¸",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},race:{label:"Race",icon:"ðŸ‘¤",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},trait:{label:"Trait",icon:"ðŸŽ¯",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},religion:{label:"Religion",icon:"â›ª",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},birthsign:{label:"Birthsign",icon:"â­",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},destiny:{label:"Destiny",icon:"ðŸŒŸ",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},perk:{label:"Perk",icon:"ðŸ”®",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"}};function GW({type:e,className:t,variant:s="default"}){const n=UW[e]||{label:e.charAt(0).toUpperCase()+e.slice(1),icon:"ðŸ“„",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return s==="default"?r.jsxs(Q,{className:$("inline-flex items-center gap-1 px-2 py-1 text-xs font-medium",n.color,t),children:[r.jsx("span",{children:n.icon}),r.jsx("span",{children:n.label})]}):r.jsxs(Q,{variant:s,className:$("inline-flex items-center gap-1",t),children:[r.jsx("span",{children:n.icon}),r.jsx("span",{children:n.label})]})}function VW({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"}){return r.jsxs(xe,{className:$("transition-all hover:shadow-md",t),expanded:s,onToggle:n,children:[r.jsx(xe.Header,{children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(GW,{type:e.type})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-medium text-sm truncate",children:e.name}),e.category&&r.jsx(Q,{variant:"outline",className:"text-xs",children:e.category})]})})]})}),r.jsxs(xe.Summary,{children:[e.description&&r.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((i,o)=>r.jsx(Q,{variant:"secondary",className:"text-xs",children:i},`${i}-${o}`)),e.tags.length>3&&r.jsxs(Q,{variant:"secondary",className:"text-xs",children:["+",e.tags.length-3]})]})]}),r.jsxs(xe.Details,{children:[e.tags.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground",children:"All Tags"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((i,o)=>r.jsx(Q,{variant:"secondary",className:"text-xs",children:i},`${i}-${o}`))})]}),e.description&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]})]})}function Xi(e,t){return e?e.find(n=>{const a=!!n.id&&n.id===t.id,i=!!n.edid&&n.edid===t.edid,o=!!n.treeId&&n.treeId===t.treeId,l=!!n.name&&n.name===t.name;return a||i||o||l}):void 0}function qW({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"}){const i=Ui(l=>l.data),o=Xi(i,e.originalData);return o?r.jsx(zf,{originalBirthsign:o,isExpanded:s,onToggle:n,className:t,showToggle:!1}):(console.error("Birthsign not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalBirthsignsInStore:i.length,firstFewBirthsigns:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function QW({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"}){const i=Ll(l=>l.data),o=Xi(i,e.originalData);return o?r.jsxs(xe,{className:t,expanded:s,onToggle:n,children:[r.jsx(xe.Header,{children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.icon?r.jsx("img",{src:o.icon,alt:o.name,className:"w-6 h-6 object-contain"}):r.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:o.name.charAt(0)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-primary",children:o.name}),o.category&&r.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),r.jsx(xe.Summary,{children:o.description&&r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.description})}),r.jsxs(xe.Details,{children:[o.effects&&o.effects.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Effects"}),r.jsx("div",{className:"space-y-1",children:o.effects.map((l,c)=>r.jsxs("div",{className:"text-sm text-muted-foreground",children:["â€¢ ",l]},c))})]}),o.tags&&o.tags.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((l,c)=>r.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]})]})]}):(console.error("Destiny node not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalDestinyNodesInStore:i.length,firstFewDestinyNodes:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}class ZW{constructor(t){Re(this,"perkNodes",[]);this.perkNodes=this.transformPerkTrees(t)}transformPerkTrees(t){const s=[];return t.forEach(n=>{n.perks.forEach(a=>{var o,l,c,u,d;const i={...a,skillTree:n.treeId,skillTreeName:n.treeName,isRoot:a.isRoot||!1,hasChildren:(((l=(o=a.connections)==null?void 0:o.children)==null?void 0:l.length)||0)>0,prerequisites:((c=a.connections)==null?void 0:c.parents)||[],connections:{parents:((u=a.connections)==null?void 0:u.parents)||[],children:((d=a.connections)==null?void 0:d.children)||[]},searchableText:this.generateSearchableText(a,n),tags:this.generateTags(a,n),category:this.determineCategory(n.treeName),minLevel:this.calculateMinLevel(a)};s.push(i)})}),s}calculateMinLevel(t){var n,a;let s=0;if(t.ranks&&t.ranks.length>0&&t.ranks.forEach(i=>{var o,l;(l=(o=i.prerequisites)==null?void 0:o.skillLevel)!=null&&l.level&&(s=Math.max(s,i.prerequisites.skillLevel.level))}),s===0)if(t.isRoot)s=1;else{const i=((a=(n=t.connections)==null?void 0:n.parents)==null?void 0:a.length)||0;s=Math.max(1,i*5)}return s}generateSearchableText(t,s){var a,i;return[t.name,(a=t.ranks)==null?void 0:a.map(o=>{var l;return(l=o.description)==null?void 0:l.base}).join(" "),(i=t.ranks)==null?void 0:i.map(o=>{var l;return(l=o.description)==null?void 0:l.subtext}).join(" "),s.treeName,this.determineCategory(s.treeName)].filter(Boolean).join(" ").toLowerCase()}generateTags(t,s){var i,o,l,c;const n=[s.treeName,this.determineCategory(s.treeName),t.isRoot?"root":"branch",t.totalRanks>1?"multi-rank":"single-rank"];((o=(i=t.connections)==null?void 0:i.parents)==null?void 0:o.length)>0&&n.push("has-prerequisites"),((c=(l=t.connections)==null?void 0:l.children)==null?void 0:c.length)>0&&n.push("has-children");const a=this.calculateMinLevel(t);return a>0&&n.push(`level-${a}+`),n}determineCategory(t){return{Alchemy:"Magic",Alteration:"Magic",Conjuration:"Magic",Destruction:"Magic",Illusion:"Magic",Restoration:"Magic",Archery:"Combat",Block:"Combat","Heavy Armor":"Combat","One Handed":"Combat",Smithing:"Combat","Two Handed":"Combat","Light Armor":"Stealth",Lockpicking:"Stealth",Pickpocket:"Stealth",Sneak:"Stealth",Speech:"Stealth",Enchanting:"Crafting"}[t]||"Other"}getAllPerks(){return this.perkNodes}getPerksBySkill(t){return this.perkNodes.filter(s=>s.skillTree===t)}getPerksByCategory(t){return this.perkNodes.filter(s=>s.category===t)}getPerksByPrerequisite(t){return this.perkNodes.filter(s=>s.prerequisites.includes(t))}getRootPerks(){return this.perkNodes.filter(t=>t.isRoot)}getMultiRankPerks(){return this.perkNodes.filter(t=>t.totalRanks>1)}searchPerks(t){const s=t.toLowerCase();return this.perkNodes.filter(n=>n.searchableText.includes(s)||n.name.toLowerCase().includes(s)||n.tags.some(a=>typeof a=="string"&&a.toLowerCase().includes(s)))}}function vR(){const{data:e,loading:t,error:s}=uy(),n=h.useMemo(()=>e?new ZW(e):null,[e]),a=h.useMemo(()=>(n==null?void 0:n.getAllPerks())||[],[n]);return{dataProvider:n,allPerks:a,loading:t,error:s}}function Iu(){const{dataProvider:e,allPerks:t,loading:s,error:n}=vR(),a=h.useMemo(()=>{const g=new Map;return t.forEach(b=>{g.has(b.skillTree)||g.set(b.skillTree,{id:b.skillTree,name:b.skillTreeName,count:0});const y=g.get(b.skillTree);y.count++}),Array.from(g.values()).sort((b,y)=>b.name.localeCompare(y.name))},[t]),i=h.useMemo(()=>{const g=new Map;return t.forEach(b=>{g.has(b.category)||g.set(b.category,{name:b.category,count:0});const y=g.get(b.category);y.count++}),Array.from(g.values()).sort((b,y)=>b.name.localeCompare(y.name))},[t]),o=h.useMemo(()=>{const g=new Set;return t.forEach(b=>{b.tags.forEach(y=>g.add(y))}),Array.from(g).sort()},[t]),l=h.useMemo(()=>t.filter(g=>g.isRoot),[t]),c=h.useMemo(()=>t.filter(g=>g.totalRanks>1),[t]),u=h.useMemo(()=>t.filter(g=>g.totalRanks===1),[t]),d=h.useMemo(()=>g=>(e==null?void 0:e.getPerksBySkill(g))||[],[e]),f=h.useMemo(()=>g=>(e==null?void 0:e.getPerksByCategory(g))||[],[e]),m=h.useMemo(()=>g=>(e==null?void 0:e.searchPerks(g))||[],[e]);return{allPerks:t,skillTrees:a,categories:i,tags:o,rootPerks:l,multiRankPerks:c,singleRankPerks:u,getPerksBySkill:d,getPerksByCategory:f,searchPerks:m,loading:s,error:n,dataProvider:e}}const WW={skill:{Alchemy:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Alteration:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Archery:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200",Block:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Conjuration:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Destruction:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Enchanting:"bg-indigo-100 text-indigo-800 border-indigo-200 hover:bg-indigo-200","Heavy Armor":"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",Illusion:"bg-pink-100 text-pink-800 border-pink-200 hover:bg-pink-200","Light Armor":"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200",Lockpicking:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200","One-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Pickpocket:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Restoration:"bg-teal-100 text-teal-800 border-teal-200 hover:bg-teal-200",Smithing:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Sneak:"bg-slate-100 text-slate-800 border-slate-200 hover:bg-slate-200",Speech:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200","Two-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200"},category:{Combat:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Crafting:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Survival:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Social:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200"},rank:{"1 rank":"bg-blue-100 text-blue-800 border-blue-200","2 ranks":"bg-green-100 text-green-800 border-green-200","3 ranks":"bg-purple-100 text-purple-800 border-purple-200","4 ranks":"bg-orange-100 text-orange-800 border-orange-200","5 ranks":"bg-red-100 text-red-800 border-red-200"},availability:{Available:"bg-green-100 text-green-800 border-green-200",Unavailable:"bg-red-100 text-red-800 border-red-200","Prerequisites Met":"bg-blue-100 text-blue-800 border-blue-200","Prerequisites Missing":"bg-gray-100 text-gray-800 border-gray-200"},level:{"Level 1+":"bg-green-100 text-green-800 border-green-200","Level 5+":"bg-blue-100 text-blue-800 border-blue-200","Level 10+":"bg-purple-100 text-purple-800 border-purple-200","Level 15+":"bg-orange-100 text-orange-800 border-orange-200","Level 20+":"bg-red-100 text-red-800 border-red-200","Level 25+":"bg-indigo-100 text-indigo-800 border-indigo-200","Level 30+":"bg-pink-100 text-pink-800 border-pink-200","Level 35+":"bg-teal-100 text-teal-800 border-teal-200","Level 40+":"bg-cyan-100 text-cyan-800 border-cyan-200","Level 45+":"bg-emerald-100 text-emerald-800 border-emerald-200","Level 50+":"bg-amber-100 text-amber-800 border-amber-200"},root:{Root:"bg-gold-100 text-gold-800 border-gold-200 hover:bg-gold-200"}},YW={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},XW="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function Ds({label:e,type:t,size:s="md",className:n}){const i=WW[t][e]||XW;return r.jsx(Q,{variant:"outline",className:$(i,YW[s],"font-medium transition-colors",n),children:e})}function KW({item:e,className:t,isExpanded:s=!1,onToggle:n,disableHover:a=!1,viewMode:i="grid"}){const o=e.originalPerk,{allPerks:l}=Iu();if(!o)return null;const u=(d=>d.map(f=>{const m=l.find(g=>g.edid===f);return(m==null?void 0:m.name)||f}))(o.prerequisites);return r.jsxs(xe,{className:t,expanded:s,onToggle:n,disableHover:a,children:[r.jsxs(xe.Header,{children:[r.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:e.name.charAt(0)})}),r.jsx("div",{className:"flex-1 min-w-0",children:i==="grid"?r.jsxs("div",{className:"space-y-1",children:[r.jsx(Ce,{className:"text-primary font-semibold truncate",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.skillTreeName&&r.jsx(Ds,{label:o.skillTreeName,type:"skill",size:"sm"}),o.totalRanks>1&&r.jsx(Ds,{label:`${o.totalRanks} ranks`,type:"rank",size:"sm"}),o.minLevel&&r.jsx(Ds,{label:`Level ${o.minLevel}+`,type:"level",size:"sm"})]})]}):r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx(Ce,{className:"text-primary font-semibold truncate",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.skillTreeName&&r.jsx(Ds,{label:o.skillTreeName,type:"skill",size:"sm"}),o.totalRanks>1&&r.jsx(Ds,{label:`${o.totalRanks} ranks`,type:"rank",size:"sm"}),o.minLevel&&r.jsx(Ds,{label:`Level ${o.minLevel}+`,type:"level",size:"sm"})]})]})})]}),r.jsxs(xe.Summary,{children:[r.jsx(pe,{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((d,f)=>r.jsx(Q,{variant:"outline",className:"text-xs",children:d},f)),e.tags.length>3&&r.jsxs(Aa,{className:"text-muted-foreground",children:["+",e.tags.length-3," more"]})]})]}),r.jsxs(xe.Details,{children:[o.prerequisites&&o.prerequisites.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Prerequisites"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:u.map((d,f)=>r.jsx(Q,{variant:"secondary",className:"text-xs",children:d},f))})]}),o.ranks&&o.ranks.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Perk Ranks"}),r.jsx("div",{className:"space-y-2",children:o.ranks.map((d,f)=>{var m;return r.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[r.jsx("div",{className:"flex items-center justify-between mb-1",children:r.jsxs("span",{className:"font-medium text-sm",children:["Rank ",f+1]})}),((m=d.description)==null?void 0:m.base)&&r.jsx(pe,{className:"text-sm text-muted-foreground",children:d.description.base})]},f)})})]}),e.tags.length>0&&r.jsxs("div",{children:[r.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((d,f)=>r.jsx(Q,{variant:"outline",className:"text-xs",children:d},f))})]})]})]})}function bR(e,t){var u,d,f,m;const s=((d=(u=t.perks)==null?void 0:u.selected)==null?void 0:d[e.skillTree])||[],n=((m=(f=t.perks)==null?void 0:f.ranks)==null?void 0:m[e.skillTree])||{},a=s.includes(e.edid),i=n[e.edid]||0,o=a&&i>0?i:1,l=JW(e,o);let c="";return e.totalRanks>1?a&&i>0&&i<e.totalRanks?c=_g(e,i+1):(!a||i===0)&&(c=_g(e,1)):c=_g(e,1),{id:e.edid,name:e.name,description:l,summary:c,category:e.category,tags:e.tags,isSelected:a,originalPerk:e,skillTree:e.skillTree,skillTreeName:e.skillTreeName,isRoot:e.isRoot,hasChildren:e.hasChildren,prerequisites:e.prerequisites,connections:e.connections,totalRanks:e.totalRanks,currentRank:i,isAvailable:e.isRoot||e.prerequisites.every(g=>s.includes(g)),minLevel:e.minLevel}}function JW(e,t){var a;if(!e.ranks||e.ranks.length===0)return"";const s=t||1;return((a=(e.ranks.find(i=>i.rank===s)||e.ranks[0]).description)==null?void 0:a.base)||""}function _g(e,t){var a;if(!e.ranks||e.ranks.length===0)return"";const s=t||1;return((a=(e.ranks.find(i=>i.rank===s)||e.ranks[0]).description)==null?void 0:a.subtext)||""}function eY({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"}){const{build:i}=Ye(),{allPerks:o}=Iu(),l=e.originalData,c=o.find(f=>f.edid===(l==null?void 0:l.edid));if(!c)return console.warn("Perk reference not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData}),null;const d={...bR(c,i),originalPerk:c};return r.jsx(KW,{item:d,className:t,isExpanded:s,onToggle:n,viewMode:a})}function tY({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"}){var c;const i=Hi(u=>u.data),o=Xi(i,e.originalData);if(!o)return console.error("Perk tree not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalPerkTreesInStore:i.length,firstFewPerkTrees:i.slice(0,3).map(u=>({treeId:u.treeId,treeName:u.treeName||u.name}))}),null;const l=((c=o.perks)==null?void 0:c.length)||0;return r.jsxs(xe,{className:t,expanded:s,onToggle:n,children:[r.jsx(xe.Header,{children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:(o.treeName||o.name).charAt(0)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-primary",children:o.treeName||o.name}),o.category&&r.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),r.jsxs(xe.Summary,{children:[o.treeDescription&&r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.treeDescription}),l>0&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[r.jsx("span",{className:"font-medium",children:"Perks:"})," ",l," total"]})]}),r.jsxs(xe.Details,{children:[o.perks&&o.perks.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Sample Perks"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.perks.slice(0,6).map((u,d)=>r.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:u.name},`${u.edid}-${d}`)),o.perks.length>6&&r.jsxs("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded text-muted-foreground",children:["+",o.perks.length-6," more"]})]})]}),o.tags&&o.tags.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((u,d)=>r.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-secondary text-secondary-foreground rounded",children:u},`${u}-${d}`))})]})]})]})}function sY({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"}){const i=wn(c=>c.data),o=Xi(i,e.originalData);if(!o)return console.error("Race not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalRacesInStore:i.length,firstFewRaces:i.slice(0,3).map(c=>({edid:c.edid,name:c.name}))}),null;const l={id:o.id||o.edid||o.name,name:o.name,description:o.description||"",summary:o.description||"",category:o.category||"",tags:o.tags||[],type:"race",effects:[]};return r.jsx("div",{className:t,children:r.jsx(Lu,{item:{...l,originalRace:o},isExpanded:s,onToggle:n,showToggle:!1,disableHover:!1,className:"w-full"})})}function nY({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"}){const i=zl(g=>g.data),[o,l]=h.useState(null),[c,u]=h.useState(!1),d=Xi(i,e.originalData);if(!d)return console.error("Religion not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalReligionsInStore:i.length,firstFewReligions:i.slice(0,3).map(g=>({id:g.id,name:g.name}))}),null;const f=yE(d),m=g=>{l(f),u(!0)};return r.jsxs("div",{className:t,children:[r.jsx(pE,{originalReligion:f,className:"w-full",onOpenDetails:m,showToggle:!0}),r.jsx(xE,{religion:o,isOpen:c,onClose:()=>u(!1)})]})}function aY({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"}){const i=Hr(l=>l.data),o=Xi(i,e.originalData);return o?r.jsxs(xe,{className:t,expanded:s,onToggle:n,children:[r.jsx(xe.Header,{children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:o.name.charAt(0)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-primary",children:o.name}),o.category&&r.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),r.jsxs(xe.Summary,{children:[o.description&&r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.description}),o.keyAbilities&&o.keyAbilities.length>0&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[r.jsx("span",{className:"font-medium",children:"Key abilities:"})," ",o.keyAbilities.slice(0,2).join(", "),o.keyAbilities.length>2&&"..."]})]}),r.jsxs(xe.Details,{children:[o.tags&&o.tags.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((l,c)=>r.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),o.keyAbilities&&o.keyAbilities.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Key Abilities"}),r.jsx("div",{className:"space-y-1",children:o.keyAbilities.map((l,c)=>r.jsxs("div",{className:"text-sm text-muted-foreground",children:["â€¢ ",l]},c))})]})]})]}):(console.error("Skill not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalSkillsInStore:i.length,firstFewSkills:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function rY({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"}){const i=Gi(l=>l.data),o=Xi(i,e.originalData);return o?r.jsxs(xe,{className:t,expanded:s,onToggle:n,children:[r.jsx(xe.Header,{children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:o.name.charAt(0)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-primary",children:o.name}),o.category&&r.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),r.jsx(xe.Summary,{children:o.description&&r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.description})}),r.jsxs(xe.Details,{children:[o.tags&&o.tags.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((l,c)=>r.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),o.description&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:o.description})]})]})]}):(console.error("Trait not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalTraitsInStore:i.length,firstFewTraits:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}const iY={Destruction:Rl,Restoration:Yn,Conjuration:g0,Illusion:Al,Alteration:rt,"":yn},oY={Novice:"bg-green-100 text-green-800 border-green-200",Apprentice:"bg-blue-100 text-blue-800 border-blue-200",Adept:"bg-purple-100 text-purple-800 border-purple-200",Expert:"bg-orange-100 text-orange-800 border-orange-200",Master:"bg-red-100 text-red-800 border-red-200"};function lY({spell:e,className:t,isExpanded:s=!1,onToggle:n,disableHover:a=!1}){var l;const i=iY[e.school]||yn,o=()=>{n==null||n()};return r.jsxs(xe,{className:t,expanded:s,onToggle:o,disableHover:a,children:[r.jsx(xe.Header,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(i,{className:"w-5 h-5 text-muted-foreground"}),r.jsx("h3",{className:"text-primary font-semibold text-lg",children:e.name}),r.jsx("span",{className:"ml-auto transition-transform duration-200 text-muted-foreground",children:r.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 8l4 4 4-4"})})})]})}),r.jsx(xe.Summary,{children:r.jsxs("div",{className:"px-4 py-2 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 7v14"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"})]}),r.jsx("span",{children:e.school})]}),r.jsx(Q,{variant:"secondary",className:oY[e.level]||"",children:e.level})]}),r.jsx(we,{text:e.description,className:"text-sm text-muted-foreground mb-3",as:"p"})]})}),r.jsx(xe.Details,{children:r.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[e.hasEffects&&r.jsxs("div",{children:[r.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Effects"}),r.jsx("div",{className:"space-y-2",children:e.effects.map((c,u)=>r.jsxs("div",{className:"p-2 rounded bg-muted border text-sm",children:[r.jsx(we,{text:c.description,className:"text-muted-foreground mb-2",as:"p"}),r.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[c.magnitude>0&&r.jsxs("span",{children:["Magnitude: ",c.magnitude]}),c.duration>0&&r.jsxs("span",{children:["Duration: ",c.duration,"s"]}),c.area>0&&r.jsxs("span",{children:["Area: ",c.area,"ft"]})]})]},u))})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Statistics"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Magicka Cost:"}),r.jsxs("span",{className:"font-medium",children:[e.magickaCost," MP"]})]}),e.totalMagnitude>0&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Total Magnitude:"}),r.jsx("span",{className:"font-medium",children:e.totalMagnitude})]}),e.maxDuration>0&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Max Duration:"}),r.jsxs("span",{className:"font-medium",children:[e.maxDuration,"s"]})]}),e.maxArea>0&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Max Area:"}),r.jsxs("span",{className:"font-medium",children:[e.maxArea,"ft"]})]})]})]}),(e.tome||((l=e.vendors)==null?void 0:l.length))&&r.jsxs("div",{children:[r.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Additional Info"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[e.tome&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-muted-foreground",children:"Tome:"}),r.jsx("span",{children:e.tome})]}),e.vendors&&e.vendors.length>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-muted-foreground",children:"Vendors:"}),r.jsx("span",{children:e.vendors.join(", ")})]})]})]}),e.tags&&e.tags.length>0&&r.jsxs("div",{children:[r.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((c,u)=>r.jsx(Q,{variant:"outline",className:"text-xs",children:c},u))})]})]})})]})}const cY=({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="card"})=>{const i=e.originalData;if(!i)return console.warn("SpellSearchCard: Missing spell data for item:",e),r.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[r.jsx("h3",{className:"font-semibold",children:"Spell not found"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});if(!i.name||!i.editorId)return console.warn("SpellSearchCard: Invalid spell data structure:",i),r.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[r.jsx("h3",{className:"font-semibold",children:"Invalid spell data"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const o=z.useCallback(()=>{n&&n()},[n]);return r.jsx(lY,{spell:i,isExpanded:s,onToggle:o,className:t})},uY=({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"})=>{const i=e.originalData;if(!i||!i.name)return console.warn("RecipeSearchCard: Missing or invalid recipe data for item:",e),r.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[r.jsx("h3",{className:"font-semibold",children:"Recipe not found"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const o=Ke.addComputedProperties(i),l=z.useCallback(()=>{n&&n()},[n]);return r.jsx(Ky,{recipe:o,variant:a==="list"?"compact":"default",isSelected:!1,onClick:l,showEffects:!0,showIngredients:!0,className:t})},dY={category:{"Standard Enchantments (Touch)":"bg-blue-100 text-blue-800 border-blue-200","Standard Enchantments (Self)":"bg-green-100 text-green-800 border-green-200"},targetType:{touch:"bg-red-100 text-red-800 border-red-200",self:"bg-purple-100 text-purple-800 border-purple-200"},itemType:{weapon:"bg-orange-100 text-orange-800 border-orange-200",armor:"bg-indigo-100 text-indigo-800 border-indigo-200"}},fY={category:{"Standard Enchantments (Touch)":"âš”ï¸","Standard Enchantments (Self)":"ðŸ›¡ï¸"},targetType:{touch:"âš”ï¸",self:"ðŸ›¡ï¸"},itemType:{weapon:"ðŸ—¡ï¸",armor:"ðŸ›¡ï¸"}},mY={category:{},targetType:{touch:"Weapon",self:"Armor"},itemType:{}},$N={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"},xn=z.memo(({type:e,value:t,size:s="md",variant:n="default",className:a})=>{const i=dY[e],o=fY[e],l=mY[e],c=i[t]||"bg-gray-100 text-gray-800 border-gray-200",u=o[t]||"ðŸ“‹",d=l[t]||t;return n==="outline"?r.jsxs(Q,{variant:"outline",className:$($N[s],"inline-flex items-center gap-1",a),children:[r.jsx("span",{children:u}),r.jsx("span",{children:d})]}):r.jsxs("span",{className:$("inline-flex items-center gap-1 rounded-full border font-medium",$N[s],c,a),children:[r.jsx("span",{children:u}),r.jsx("span",{children:d})]})}),hY=z.memo(({effect:e,className:t,showDescription:s=!0,compact:n=!1})=>r.jsxs("div",{className:$("space-y-1",t),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),r.jsx("span",{className:"text-sm font-medium text-foreground",children:e.name})]}),s&&r.jsx("div",{className:"pl-5",children:r.jsx(we,{text:e.description,options:B0(),className:"text-sm text-muted-foreground"})})]})),tu=z.memo(({effects:e,title:t="Effects",className:s,showDescriptions:n=!0,compact:a=!1,maxDisplay:i=3})=>{if(e.length===0)return r.jsx("div",{className:$("text-sm text-muted-foreground",s),children:"No effects"});const o=e.slice(0,i),l=e.length>i;return r.jsxs("div",{className:$("space-y-2",s),children:[t&&r.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[r.jsx(yn,{className:"h-4 w-4"}),t]}),r.jsxs("div",{className:$("space-y-2",a?"text-sm":"text-base"),children:[o.map((c,u)=>r.jsx("div",{className:"p-2 rounded bg-muted border",children:r.jsx(hY,{effect:c,showDescription:n,compact:a})},`${c.name}-${u}`)),l&&r.jsxs("div",{className:"text-sm text-muted-foreground italic",children:["+",e.length-i," more effects"]})]})]})}),gY={weapon:"ðŸ—¡ï¸",armor:"ðŸ›¡ï¸"},ox=z.memo(({items:e,title:t="Found Items",className:s,maxItems:n=5,showType:a=!0,compact:i=!1})=>{if(e.length===0)return r.jsx("div",{className:$("text-sm text-muted-foreground",s),children:"No items found"});const o=e.slice(0,n),l=e.length>n;return r.jsxs("div",{className:$("space-y-2",s),children:[t&&r.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[r.jsx(p0,{className:"h-4 w-4"}),t,r.jsxs("span",{className:"text-xs text-muted-foreground/70",children:["(",e.length,")"]})]}),r.jsxs("div",{className:$("space-y-1"),children:[o.map((c,u)=>r.jsxs("div",{className:$("flex items-center gap-2 p-2 rounded bg-muted border",i?"text-xs":"text-sm"),children:[r.jsx("span",{className:"text-muted-foreground",children:gY[c.type]}),r.jsx("span",{className:"font-medium text-foreground flex-1",children:c.name}),a&&r.jsx(xn,{type:"itemType",value:c.type,size:"sm",variant:"outline"})]},`${c.name}-${u}`)),l&&r.jsxs("div",{className:"text-sm text-muted-foreground italic",children:["+",e.length-n," more items"]})]})]})});function FN(e,t){if(!t.trim())return e;const s=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(s,'<mark class="bg-yellow-200 dark:bg-yellow-800">$1</mark>')}function pY({item:e,searchTerm:t="",isExpanded:s=!1,onToggle:n,viewMode:a="grid",className:i}){const o=e.originalData,l=t?FN(o.name,t):o.name,c=o.effects.length>0?t?FN(o.effects.map(d=>d.name).join(", "),t):o.effects.map(d=>d.name).join(", "):void 0,u=()=>{window.location.href=`/enchantments?selected=${o.baseEnchantmentId}`};return a==="list"?r.jsx(ae,{className:$("cursor-pointer hover:shadow-md transition-shadow border-l-4 border-l-blue-500",i),onClick:u,children:r.jsxs(oe,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"text-lg",children:"ðŸ”®"}),r.jsx("h4",{className:"font-medium text-sm truncate",dangerouslySetInnerHTML:{__html:l}}),r.jsx(xn,{type:"targetType",value:o.targetType,size:"sm"}),r.jsxs(Q,{variant:"outline",className:"text-xs",children:[o.effectCount," effects"]})]}),c&&r.jsx("p",{className:"text-xs text-muted-foreground mb-2",dangerouslySetInnerHTML:{__html:c}}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx("span",{children:o.category}),r.jsx("span",{children:"â€¢"}),r.jsx("span",{children:o.plugin}),r.jsx("span",{children:"â€¢"}),r.jsxs("span",{children:[o.itemCount," items"]})]})]}),r.jsx(G,{variant:"ghost",size:"sm",className:"ml-2",onClick:d=>{d.stopPropagation(),n==null||n()},children:s?r.jsx(Ic,{className:"h-4 w-4"}):r.jsx(vt,{className:"h-4 w-4"})})]}),s&&r.jsxs("div",{className:"mt-4 space-y-3 pt-4 border-t",children:[o.effects.length>0&&r.jsx(tu,{effects:o.effects,title:"Effects",compact:!0,showDescriptions:!1,maxDisplay:3}),r.jsx(ox,{items:o.foundOnItems,title:"Found on",compact:!0,showType:!0,maxItems:3})]})]})}):r.jsxs(ae,{className:$("cursor-pointer hover:shadow-md transition-shadow",i),onClick:u,children:[r.jsx(de,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(ve,{className:"text-lg",dangerouslySetInnerHTML:{__html:l}}),c&&r.jsx("p",{className:"text-sm text-muted-foreground mt-1",dangerouslySetInnerHTML:{__html:c}})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsx(xn,{type:"targetType",value:o.targetType}),r.jsxs(Q,{variant:"outline",className:"text-xs",children:[o.effectCount," effects"]})]})]})}),r.jsx(oe,{className:"pt-0",children:r.jsxs("div",{className:"space-y-3",children:[o.effects.length>0&&r.jsx(tu,{effects:o.effects,title:"Effects",compact:!0,showDescriptions:!1,maxDisplay:2}),r.jsx(ox,{items:o.foundOnItems,title:"Found on",compact:!0,showType:!0,maxItems:3}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx("span",{children:o.category}),r.jsx("span",{children:"â€¢"}),r.jsx("span",{children:o.plugin}),r.jsx("span",{children:"â€¢"}),r.jsxs("span",{children:[o.itemCount," items"]})]}),n&&r.jsx(G,{variant:"ghost",size:"sm",className:"w-full mt-2",onClick:d=>{d.stopPropagation(),n()},children:s?r.jsxs(r.Fragment,{children:[r.jsx(Ic,{className:"h-4 w-4 mr-1"}),"Show Less"]}):r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"h-4 w-4 mr-1"}),"Show More"]})})]})})]})}function HN({item:e,className:t,isExpanded:s=!1,onToggle:n,viewMode:a="grid"}){switch(e.type){case"race":return r.jsx(sY,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});case"skill":return r.jsx(aY,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});case"trait":return r.jsx(rY,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});case"birthsign":return r.jsx(qW,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});case"destiny":return r.jsx(QW,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});case"religion":return r.jsx(nY,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});case"perk":return r.jsx(tY,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});case"spell":return r.jsx(cY,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});case"perk-reference":return r.jsx(eY,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});case"recipe":return r.jsx(uY,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});case"enchantment":return r.jsx(pY,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a});default:return r.jsx(VW,{item:e,className:t,isExpanded:s,onToggle:n,viewMode:a})}}function xY({item:e}){return r.jsx("div",{className:`w-full border-2 rounded-lg p-4 ${e.color} transition-all duration-200 hover:shadow-lg`,style:{minHeight:`${e.height}px`},"data-testid":`test-card-${e.id}`,children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:e.title}),r.jsxs("span",{className:"text-xs text-gray-500",children:["#",e.id.slice(-6)]})]}),r.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((t,s)=>r.jsx("span",{className:"px-2 py-1 text-xs bg-white/50 rounded-full text-gray-700 border",children:t},s))}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Height: ",e.height,"px"]})]})})}const UN={Alteration:c5,Conjuration:g0,Destruction:Rl,Illusion:Al,Restoration:Yn,Mysticism:yn},yY={Alteration:"bg-blue-500 text-white",Conjuration:"bg-purple-500 text-white",Destruction:"bg-red-500 text-white",Illusion:"bg-indigo-500 text-white",Restoration:"bg-green-500 text-white",Mysticism:"bg-yellow-500 text-white"},GN={Novice:1,Apprentice:2,Adept:3,Expert:4,Master:5},vY={sm:"w-6 h-6 text-sm",md:"w-8 h-8 text-base",lg:"w-10 h-10 text-lg",xl:"w-12 h-12 text-xl","2xl":"w-16 h-16 text-2xl"},bY={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"};function Jy(){const{activeFilters:e,selectedTags:t,viewMode:s,setActiveFilters:n,updateActiveFilters:a,addTag:i,removeTag:o,removeTagByValue:l,clearAllTags:c,setViewMode:u,hasTag:d,getTagsByCategory:f,getFuzzySearchTags:m,getFilterTags:g,clearAllSearchState:b}=O2(),y=h.useMemo(()=>m().map(k=>k.value).join(" "),[m]),v=h.useMemo(()=>t.length>0,[t]),p=h.useCallback(_=>{let k;typeof _=="string"?k={id:`custom-${_}`,label:_,value:_,category:Ze.FUZZY_SEARCH}:k={id:`${_.category}-${_.id}`,label:_.label,value:_.value,category:_.category},i(k)},[i]),x=h.useCallback(_=>{o(_)},[o]),w=h.useCallback(()=>{c()},[c]),N=h.useCallback(_=>{u(_)},[u]),j=h.useCallback(()=>{c()},[c]);return{activeFilters:e,selectedTags:t,viewMode:s,fuzzySearchQuery:y,hasActiveFilters:v,setActiveFilters:n,updateActiveFilters:a,addTag:i,removeTag:o,removeTagByValue:l,clearAllTags:c,setViewMode:u,handleTagSelect:p,handleTagRemove:x,handleClearFilters:w,handleViewModeChange:N,hasTag:d,getTagsByCategory:f,getFuzzySearchTags:m,getFilterTags:g,clearFilters:j}}let Cg=null;function wY(){return Cg||(Cg=new HW),Cg}function ev(){const[e,t]=h.useState(!1),[s,n]=h.useState(!1),[a,i]=h.useState(null),o=Hr(j=>j.data),l=wn(j=>j.data),c=Gi(j=>j.data),u=zl(j=>j.data),d=Ui(j=>j.data),f=Ll(j=>j.data),m=Hi(j=>j.data),g=xa(j=>j.data),b=bo(j=>j.data),{allPerks:y}=vR(),v=wY(),p=h.useCallback(async(j,_,k)=>{if(_!=null&&_.length)try{const A=k(_);await v.addToIndex(j,A)}catch(A){console.error(`Failed to index ${j}:`,A)}},[v]);h.useEffect(()=>{o!=null&&o.length&&p("skills",o,v.transformSkillsToSearchable)},[o,p]),h.useEffect(()=>{l!=null&&l.length&&p("races",l,v.transformRacesToSearchable)},[l,p]),h.useEffect(()=>{c!=null&&c.length&&p("traits",c,v.transformTraitsToSearchable)},[c,p]),h.useEffect(()=>{u!=null&&u.length&&p("religions",u,v.transformReligionsToSearchable)},[u,p]),h.useEffect(()=>{d!=null&&d.length&&p("birthsigns",d,v.transformBirthsignsToSearchable)},[d,p]),h.useEffect(()=>{f!=null&&f.length&&p("destinyNodes",f,v.transformDestinyNodesToSearchable)},[f,p]),h.useEffect(()=>{m!=null&&m.length&&p("perkTrees",m,v.transformPerkTreesToSearchable)},[m,p]),h.useEffect(()=>{g!=null&&g.length&&p("recipes",g,v.transformRecipesToSearchable)},[g,p]),h.useEffect(()=>{y!=null&&y.length&&p("perk-references",y,v.transformPerkReferencesToSearchable)},[y,p]),h.useEffect(()=>{b!=null&&b.length&&p("spells",b,v.transformSpellsToSearchable)},[b,p]),h.useEffect(()=>{((o==null?void 0:o.length)||(l==null?void 0:l.length)||(c==null?void 0:c.length)||(u==null?void 0:u.length)||(d==null?void 0:d.length)||(f==null?void 0:f.length)||(m==null?void 0:m.length)||(g==null?void 0:g.length)||(y==null?void 0:y.length)||(b==null?void 0:b.length))&&v.hasIndexedData()&&(v.rebuildSearchIndex(),t(!0))},[o,l,c,u,d,f,m,g,y,b,v]);const x=h.useCallback((j,_)=>j.trim()?v.search(j,_):[],[v]),w=h.useCallback(()=>v.getAvailableFilters(),[v]),N=h.useCallback(()=>v.getSearchableItems(),[v]);return{isReady:e,isIndexing:s,error:a,search:x,getAvailableFilters:w,getSearchableItems:N}}function tv(){const{search:e,getAvailableFilters:t,isReady:s,getSearchableItems:n}=ev(),{activeFilters:a}=Jy(),i=h.useMemo(()=>n().length,[n]),o=h.useMemo(()=>{var g,b,y;if(!s||!a)return[];if(!((((g=a.tags)==null?void 0:g.length)||0)>0||(((b=a.types)==null?void 0:b.length)||0)>0||(((y=a.categories)==null?void 0:y.length)||0)>0))return n().map(p=>({item:p,score:1,matches:[],highlights:[]}));const d=(a.tags||[]).join(" | "),f={...a||{},tags:[]};return e(d||"*",f)},[s,e,a,n]),l=h.useMemo(()=>s?t():{types:[],categories:[],tags:[]},[s,t,i]),c=h.useMemo(()=>{const u={};return o.forEach(d=>{const f=d.item.type;u[f]=(u[f]||0)+1,d.item.category&&(u[`category:${d.item.category}`]=(u[`category:${d.item.category}`]||0)+1),d.item.tags.forEach(m=>{u[`tag:${m}`]=(u[`tag:${m}`]||0)+1})}),u},[o]);return{searchResults:o,availableFilters:l,resultCounts:c}}const VN=50;function NY(e){const[t,s]=h.useState(1),n=h.useRef([]),a=h.useMemo(()=>{const u=t*VN;return e.slice(0,u)},[e,t]);h.useEffect(()=>{const u=n.current;(u.length!==e.length||e.some((f,m)=>{var g;return f.item.id!==((g=u[m])==null?void 0:g.item.id)}))&&(s(1),n.current=e)},[e]);const i=h.useMemo(()=>a.length<e.length,[a.length,e.length]),o=h.useCallback(()=>{i&&s(u=>u+1)},[i]),l=h.useCallback(()=>{s(1)},[]),c=h.useMemo(()=>({displayedItems:a.length,totalItems:e.length,hasMore:i,currentPage:t,itemsPerPage:VN}),[a.length,e.length,i,t]);return{displayedItems:a,loadMore:o,resetPagination:l,paginationInfo:c,hasMore:i}}function jY(){const{searchResults:e,resultCounts:t}=tv();Jy();const{displayedItems:s,loadMore:n,resetPagination:a,paginationInfo:i,hasMore:o}=NY(e),l=h.useMemo(()=>s,[s]),c=h.useMemo(()=>kY(l,"relevance"),[l]),u=h.useMemo(()=>c.map($W),[c]),d=h.useMemo(()=>e.length,[e]),f=h.useMemo(()=>{const m={};return s.forEach(g=>{const b=g.item.type;m[b]||(m[b]=[]),m[b].push(g)}),m},[s]);return{filteredResults:l,sortedResults:c,playerCreationItems:u,resultCounts:t,totalResults:d,resultsByType:f,loadMore:n,resetPagination:a,paginationInfo:i,hasMore:o}}function kY(e,t){const s=[...e];switch(t){case"relevance":return s;case"name":return s.sort((n,a)=>n.item.name.localeCompare(a.item.name));case"type":return s.sort((n,a)=>{const i=n.item.type.localeCompare(a.item.type);return i!==0?i:n.item.name.localeCompare(a.item.name)});default:return s}}function SY({activeFilters:e,onFiltersChange:t,onClearFilters:s,availableFilters:n,resultCount:a,onTagSelect:i,onTagRemove:o,selectedTags:l,className:c}){var g,b,y;const u=(((g=e==null?void 0:e.types)==null?void 0:g.length)||0)>0||(((b=e==null?void 0:e.categories)==null?void 0:b.length)||0)>0||(((y=e==null?void 0:e.tags)==null?void 0:y.length)||0)>0,d=v=>{const p=(e==null?void 0:e.types)||[],x=p.includes(v)?p.filter(w=>w!==v):[...p,v];t({types:x})},m=[{id:"fuzzy-search",name:"Search All",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:(n.categories||[]).filter(v=>v&&typeof v.label=="string").map(v=>({id:`category-${v.value}`,label:String(v.label),value:v.value,category:"Categories",description:`${v.count} item${v.count!==1?"s":""}`}))},{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:(n.tags||[]).filter(v=>v&&typeof v.label=="string").map(v=>({id:`tag-${v.value}`,label:String(v.label),value:v.value,category:"Tags",description:`${v.count} item${v.count!==1?"s":""}`}))}];return r.jsxs("div",{className:$("space-y-4",c),children:[r.jsx("div",{className:"space-y-2",children:r.jsx(ta,{categories:m,onSelect:i,onCustomSearch:i})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("span",{className:"text-sm font-medium",children:"Record Types"})}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.types.map(v=>r.jsxs(G,{variant:((e==null?void 0:e.types)||[]).includes(v.value)?"default":"outline",size:"sm",onClick:()=>d(v.value),className:"text-xs",children:[v.label,r.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",v.count,")"]})]},v.value))})]}),l.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Active Filters"}),r.jsx(G,{variant:"ghost",size:"sm",onClick:s,className:"h-6 px-2 text-xs",children:"Clear All"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(v=>r.jsxs(Q,{variant:"secondary",className:"text-xs",children:[v.category,": ",v.label,r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>o(v.id),className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",children:r.jsx(ze,{className:"h-3 w-3"})})]},v.id))})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[r.jsxs("span",{children:[a," result",a!==1?"s":""," found"]}),u&&r.jsx(G,{variant:"ghost",size:"sm",onClick:s,className:"h-6 px-2 text-xs",children:"Clear Filters"})]})]})}function wR({items:e,keyExtractor:t,renderItem:s,loadMore:n,hasMore:a=!0,columns:i=3,gap:o=12,maxColumnWidth:l,className:c=""}){const[u,d]=h.useState(0),f=h.useRef(null),m=h.useRef(null),g=h.useCallback(()=>l&&u>0?Math.max(1,Math.floor(u/l)):i,[i,l,u]);h.useEffect(()=>{const y=()=>{f.current&&d(f.current.offsetWidth)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),h.useEffect(()=>{if(!n||!a||!m.current)return;const y=new IntersectionObserver(v=>{v.forEach(p=>{p.isIntersecting&&n&&n()})},{threshold:.1,rootMargin:"0px 0px 4000px 0px"});return y.observe(m.current),()=>y.disconnect()},[n,a]);const b=h.useCallback(()=>{const y=g(),v=Array.from({length:y},()=>[]);return e.forEach((p,x)=>{const w=x%y,N=t(p);v[w].push(r.jsx("div",{style:{width:"100%",marginBottom:`${o}px`},children:s(p)},N))}),v.map((p,x)=>r.jsx("div",{style:{width:`calc(${100/y}% - ${o/2}px)`,marginRight:x<y-1?`${o}px`:0},children:p},x))},[e,t,s,g,o]);return e.length===0?r.jsx("div",{className:`text-center py-12 ${c}`,children:r.jsx("p",{className:"text-muted-foreground",children:"No items to display"})}):r.jsxs("div",{ref:f,className:c,children:[r.jsx("div",{style:{display:"flex",width:"100%"},children:b()}),a&&n&&r.jsx("div",{ref:m,className:"w-full h-16 mt-16",style:{minHeight:"64px"}})]})}function _Y({items:e,className:t,viewMode:s="grid",onViewModeChange:n,onLoadMore:a,hasMore:i=!0,paginationInfo:o}){const[l,c]=h.useState(new Set);h.useEffect(()=>{if(s==="grid"){const d=new Set(e.map(f=>f.id));c(d)}},[s,e]);const u=d=>{if(s==="grid")return;const f=new Set(l);f.has(d)?f.delete(d):f.add(d),c(f)};return e.length===0?r.jsx("div",{className:`text-center py-12 ${t}`,children:r.jsx("p",{className:"text-muted-foreground",children:"No results found"})}):r.jsxs("div",{className:t,children:[n&&r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-sm text-muted-foreground",children:o?r.jsxs(r.Fragment,{children:["Showing ",o.displayedItems," of ",o.totalItems," result",o.totalItems!==1?"s":"",o.hasMore&&r.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Scroll to load more)"})]}):`${e.length} result${e.length!==1?"s":""} found`})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(G,{variant:s==="grid"?"default":"outline",size:"sm",onClick:()=>n("grid"),className:"flex items-center gap-2",children:[r.jsx(A3,{className:"h-4 w-4"}),"Grid"]}),r.jsxs(G,{variant:s==="list"?"default":"outline",size:"sm",onClick:()=>n("list"),className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-4 w-4"}),"List"]})]})]}),s==="grid"?r.jsx(wR,{items:e,keyExtractor:d=>d.id,renderItem:d=>r.jsx(HN,{item:d,isExpanded:!0,onToggle:()=>{},viewMode:"grid"}),columns:3,gap:16,maxColumnWidth:400,loadMore:a,hasMore:i}):r.jsxs("div",{className:"space-y-2",children:[e.map(d=>{const f=l.has(d.id);return r.jsx(HN,{item:d,isExpanded:f,onToggle:()=>u(d.id),viewMode:"list"},d.id)}),i&&a&&r.jsx("div",{className:"flex justify-center pt-4",children:r.jsxs(G,{variant:"outline",onClick:a,className:"w-full max-w-xs",children:["Load More (",(o==null?void 0:o.displayedItems)||0," of ",(o==null?void 0:o.totalItems)||0,")"]})})]})]})}function CY(){const e=lt(),{lastSearchQuery:t,setLastSearchQuery:s,clearLastSearchQuery:n,addTag:a,clearAllTags:i}=O2(),o=h.useCallback(u=>{if(!u.trim())return;s(u);const d={id:`custom-${u}`,label:u,value:u,category:Ze.FUZZY_SEARCH};a(d),e("/search")},[e,s,a]),l=h.useCallback(u=>{s(u);const d={id:`type-${u}`,label:u,value:u,category:Ze.TYPES};a(d),e("/search")},[e,s,a]),c=h.useCallback(u=>{typeof u=="string"?o(u):u.id.startsWith("type-")?l(u.value):o(u.value)},[o,l]);return{lastSearchQuery:t,navigateToSearch:o,navigateToSearchWithType:l,handleSearchSelect:c,clearLastSearchQuery:n}}function EY({className:e,placeholder:t="Search skills, races, traits, religions..."}){const{isReady:s}=ev(),{availableFilters:n}=tv(),{handleSearchSelect:a}=CY(),o=[{id:"fuzzy-search",name:"Search All",placeholder:t,options:n.types.map(l=>({id:`type-${l.value}`,label:l.label,value:l.value,category:"Search All",description:`${l.count} ${l.label}${l.count!==1?"s":""}`}))}];return s?r.jsx("div",{className:$("flex items-center gap-2",e),children:r.jsx("div",{className:"flex-1",children:r.jsx(z2,{categories:o,onSelect:a,onCustomSearch:a,placeholder:t})})}):r.jsx("div",{className:$("flex items-center gap-2",e),children:r.jsx("div",{className:"flex-1 h-10 bg-muted animate-pulse rounded-md"})})}function Eg({title:e,description:t,children:s}){return r.jsxs("div",{className:"bg-background",children:[r.jsx("div",{className:"border-b border-border bg-card/50",children:r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsx(Vi,{className:"text-3xl font-bold text-primary mb-2",children:e}),t&&r.jsx(pe,{className:"text-muted-foreground max-w-2xl",children:t})]})}),r.jsx("div",{className:"container mx-auto px-4 py-6",children:s})]})}function AY(){const{isReady:e,isIndexing:t,error:s}=ev(),{activeFilters:n,selectedTags:a,viewMode:i,setActiveFilters:o,handleTagSelect:l,handleTagRemove:c,handleClearFilters:u,handleViewModeChange:d}=Jy(),{availableFilters:f}=tv(),{filteredResults:m,totalResults:g,loadMore:b,resetPagination:y,paginationInfo:v,hasMore:p}=jY();if(h.useEffect(()=>{y()},[n,y]),!e)return r.jsx(Eg,{title:"Search",description:"Building search index...",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"text-center",children:[t?r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}):null,r.jsx("p",{className:"text-muted-foreground",children:t?"Building search index...":"Loading search..."})]})})});if(s)return r.jsx(Eg,{title:"Search",description:"Error loading search",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-destructive mb-4",children:["Failed to load search: ",s]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"text-primary hover:underline",children:"Try again"})]})})});const x=a.length>0?"Search Results":"Search",w=a.length>0?`Found ${g} result${g!==1?"s":""} for ${a.length} filter${a.length!==1?"s":""}`:"Search across all skills, races, traits, religions, birthsigns, destiny nodes, and perk references";return r.jsxs(r.Fragment,{children:[r.jsxs(Eg,{title:x,description:w,children:[r.jsx("div",{className:"mb-6",children:r.jsx(SY,{activeFilters:n,onFiltersChange:o,onClearFilters:u,availableFilters:f,resultCount:g,onTagSelect:l,onTagRemove:c,selectedTags:a})}),r.jsx("div",{className:"w-full",children:r.jsx(_Y,{items:m.map(N=>N.item),viewMode:i,onViewModeChange:d,onLoadMore:b,hasMore:p,paginationInfo:v})})]}),r.jsx(Tu,{threshold:400})]})}function RY(){return r.jsx(AY,{})}const qN=["bg-red-100 border-red-300","bg-blue-100 border-blue-300","bg-green-100 border-green-300","bg-yellow-100 border-yellow-300","bg-purple-100 border-purple-300","bg-pink-100 border-pink-300","bg-indigo-100 border-indigo-300","bg-gray-100 border-gray-300"],QN=["Mystical Artifact","Ancient Scroll","Enchanted Weapon","Potion of Power","Crystal Shard","Runic Tablet","Magical Tome","Arcane Relic","Divine Essence","Ethereal Fragment"],ZN=["A powerful artifact imbued with ancient magic.","Scroll containing forgotten spells and rituals.","Weapon blessed by the gods themselves.","Brew that grants temporary supernatural abilities.","Crystal that resonates with magical energy.","Tablet inscribed with mysterious runes.","Book of forbidden knowledge and power.","Relic from a bygone era of magic.","Essence of divine power and wisdom.","Fragment of pure ethereal energy."],TY=["magic","ancient","powerful","rare","legendary","enchanted","divine","mystical","forbidden","sacred"];function WN(e){const t=[];for(let s=0;s<e;s++){const n=`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a=Math.floor(Math.random()*200)+100,i=qN[Math.floor(Math.random()*qN.length)],o=QN[Math.floor(Math.random()*QN.length)],l=ZN[Math.floor(Math.random()*ZN.length)],c=[],u=Math.floor(Math.random()*3)+1,d=[...TY].sort(()=>.5-Math.random());c.push(...d.slice(0,u)),t.push({id:n,title:o,description:l,height:a,color:i,tags:c})}return t}function MY(){const[e,t]=z.useState(()=>WN(50)),[s,n]=z.useState(!1),[a,i]=z.useState(!0),o=z.useCallback(async()=>{if(s||!a)return;n(!0),await new Promise(d=>setTimeout(d,500));const u=WN(20);t(d=>[...d,...u]),e.length+u.length>=200&&i(!1),n(!1)},[s,a,e.length]),l=u=>u.id,c=u=>r.jsx(xY,{item:u});return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"VirtualMasonryGrid Demo"}),r.jsxs("p",{className:"text-muted-foreground",children:["Testing InfiniteGrid implementation with ",e.length," items"]}),s&&r.jsx("div",{className:"mt-2 text-sm text-blue-600",children:"Loading more items..."}),!a&&r.jsx("div",{className:"mt-2 text-sm text-green-600",children:"All items loaded (200 total)"})]}),r.jsx(wR,{items:e,keyExtractor:l,renderItem:c,loadMore:o,hasMore:a,columns:3,gap:16,className:"min-h-screen"})]})}function sv(){const[e,t]=h.useState({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[s,n]=h.useState({skills:[],categories:[],prerequisites:[],tags:[]});h.useCallback(b=>{n(b)},[]);const a=h.useCallback(b=>{t(y=>({...y,skills:[...y.skills,b]}))},[]),i=h.useCallback(b=>{t(y=>({...y,skills:y.skills.filter(v=>v!==b)}))},[]);h.useCallback(b=>{t(y=>({...y,categories:[...y.categories,b]}))},[]),h.useCallback(b=>{t(y=>({...y,categories:y.categories.filter(v=>v!==b)}))},[]),h.useCallback(b=>{t(y=>({...y,prerequisites:[...y.prerequisites,b]}))},[]),h.useCallback(b=>{t(y=>({...y,prerequisites:y.prerequisites.filter(v=>v!==b)}))},[]);const o=h.useCallback(b=>{t(y=>({...y,tags:[...y.tags,b]}))},[]),l=h.useCallback(b=>{t(y=>({...y,tags:y.tags.filter(v=>v!==b)}))},[]);h.useCallback(b=>{t(y=>({...y,rankLevel:b}))},[]),h.useCallback(b=>{t(y=>({...y,rootOnly:b}))},[]);const c=h.useCallback(b=>{t(y=>({...y,minLevel:b}))},[]),u=h.useCallback(b=>{t(y=>({...y,searchQuery:b}))},[]),d=h.useCallback(()=>{t({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0})},[]),f=h.useMemo(()=>{const b=[];return e.skills.forEach(y=>{b.push({id:`skill-${y}`,type:"skill",value:y,label:y})}),e.categories.forEach(y=>{b.push({id:`category-${y}`,type:"category",value:y,label:y})}),e.prerequisites.forEach(y=>{b.push({id:`prerequisite-${y}`,type:"prerequisite",value:y,label:y})}),e.tags.forEach(y=>{b.push({id:`tag-${y}`,type:"tag",value:y,label:y})}),e.rankLevel!=="all"&&b.push({id:"rank-level",type:"rankLevel",value:e.rankLevel,label:e.rankLevel==="single"?"Single Rank":"Multi Rank"}),e.rootOnly&&b.push({id:"root-only",type:"rootOnly",value:"true",label:"Root Perks Only"}),e.minLevel!==void 0&&b.push({id:"min-level",type:"minLevel",value:e.minLevel.toString(),label:`Level ${e.minLevel}+`}),b},[e,s]);h.useMemo(()=>{const b=[];return s.skills.forEach(y=>{b.push({id:`skill-${y.id}`,label:y.name,value:y.id,category:"Skills",type:"skill"})}),s.tags.forEach(y=>{b.push({id:`tag-${y}`,label:y,value:y,category:"Tags",type:"tag"})}),b},[s]);const m=h.useCallback(b=>{if(typeof b=="string")u(b);else if(`${b.category}${b.id}`,b.label,b.value,b.category,b.category==="skill")a(b.value);else if(b.category==="tag")o(b.value);else if(b.category==="minLevel"){const y=parseInt(b.value);isNaN(y)||c(y)}else b.category==="Fuzzy Search"&&u(b.value)},[a,o,u,c]),g=h.useCallback(b=>{const y=f.find(v=>v.id===b);if(y)y.type==="skill"?i(y.value):y.type==="tag"?l(y.value):y.type==="minLevel"&&c(void 0);else if(b.startsWith("custom-")){const v=b.replace("custom-","");e.searchQuery===v&&u("")}},[f,i,l,c,e.searchQuery,u]);return{selectedTags:[...f.map(b=>({id:b.id,label:b.label,value:b.value,category:b.type})),...e.searchQuery?[{id:`custom-${e.searchQuery}`,label:e.searchQuery,value:e.searchQuery,category:"Fuzzy Search"}]:[]],viewMode:"grid",searchQuery:e.searchQuery,onTagSelect:m,onTagRemove:g,onClearTags:d,onViewModeChange:()=>{},onSearchChange:u}}class DY{constructor(t,s){Re(this,"perkNodes");Re(this,"buildState");this.perkNodes=t,this.buildState=s}transformToPlayerCreationItem(t){var o,l,c,u,d,f,m,g;const s=((l=(o=this.buildState.perks)==null?void 0:o.selected)==null?void 0:l[t.skillTree])||[],n=((u=(c=this.buildState.perks)==null?void 0:c.ranks)==null?void 0:u[t.skillTree])||{},a=s.includes(t.edid),i=n[t.edid]||0;return{id:t.edid,name:t.name,description:((f=(d=t.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",summary:((g=(m=t.ranks[0])==null?void 0:m.description)==null?void 0:g.subtext)||"",category:t.category,tags:t.tags,isSelected:a,originalPerk:t,skillTree:t.skillTree,skillTreeName:t.skillTreeName,isRoot:t.isRoot,hasChildren:t.hasChildren,prerequisites:t.prerequisites,connections:t.connections,totalRanks:t.totalRanks,currentRank:i,isAvailable:this.isPerkAvailable(t),minLevel:t.minLevel}}isPerkAvailable(t){var n,a;if(t.isRoot)return!0;const s=((a=(n=this.buildState.perks)==null?void 0:n.selected)==null?void 0:a[t.skillTree])||[];return t.prerequisites.every(i=>s.includes(i))}applyFilters(t,s){let n=[...t];if(!s)return n;if(s.skills&&s.skills.length>0&&(n=n.filter(a=>s.skills.includes(a.skillTree))),s.categories&&s.categories.length>0&&(n=n.filter(a=>s.categories.includes(a.category))),s.prerequisites&&s.prerequisites.length>0&&(n=n.filter(a=>s.prerequisites.some(i=>a.prerequisites.includes(i)))),s.tags&&s.tags.length>0&&(n=n.filter(a=>s.tags.some(i=>a.tags.includes(i)))),s.minLevel!==void 0&&(n=n.filter(a=>(a.minLevel||0)>=s.minLevel)),s.rankLevel!=="all"&&(n=n.filter(a=>s.rankLevel==="single"?a.totalRanks===1:s.rankLevel==="multi"?a.totalRanks>1:!0)),s.rootOnly&&(n=n.filter(a=>a.isRoot)),s.searchQuery&&s.searchQuery.trim()){const a=s.searchQuery.trim(),i=n.map(u=>{var d,f;return{id:u.edid,name:u.name,description:((f=(d=u.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",searchableText:u.searchableText,tags:u.tags,category:u.category,skillTree:u.skillTreeName,originalNode:u}}),o={keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0};n=new ls(i,o).search(a).map(u=>u.item.originalNode)}return n}getAvailableFilters(t){const s=new Set,n=new Set,a=new Set,i=new Set;return t.forEach(o=>{s.add(o.skillTree),n.add(o.category),o.tags.forEach(l=>a.add(l)),o.prerequisites.forEach(l=>i.add(l))}),{skills:Array.from(s),categories:Array.from(n),tags:Array.from(a),prerequisites:Array.from(i)}}sortPerks(t,s="name"){const n=[...t];switch(s){case"name":return n.sort((a,i)=>a.name.localeCompare(i.name));case"skill":return n.sort((a,i)=>a.skillTreeName.localeCompare(i.skillTreeName));case"category":return n.sort((a,i)=>a.category.localeCompare(i.category));case"rank":return n.sort((a,i)=>i.totalRanks-a.totalRanks);case"prerequisites":return n.sort((a,i)=>a.prerequisites.length-i.prerequisites.length);default:return n}}}function PY(e,t){const{build:s}=Ye(),n=h.useMemo(()=>new DY(e,s),[e,s]),a=h.useMemo(()=>n.applyFilters(e,t||{skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[n,e,t]),i=h.useMemo(()=>a.map(l=>n.transformToPlayerCreationItem(l)),[a,n]),o=h.useMemo(()=>n.getAvailableFilters(e),[n,e]);return{model:n,filteredNodes:a,perkItems:i,availableFilters:o}}function LY(){const{allPerks:e,skillTrees:t,categories:s,tags:n,loading:a,error:i}=Iu(),{selectedTags:o,searchQuery:l}=sv(),c=h.useMemo(()=>{const y=o.filter(w=>w.category==="skill").map(w=>w.value),v=o.filter(w=>w.category==="tag").map(w=>w.value),p=o.filter(w=>w.category==="minLevel").map(w=>parseInt(w.value)).find(w=>!isNaN(w));return{skills:y,categories:[],prerequisites:[],tags:v,rankLevel:"all",rootOnly:!1,searchQuery:l||"",minLevel:p}},[o,l]),{filteredNodes:u,perkItems:d,availableFilters:f}=PY(e,c),m=h.useMemo(()=>{const y=[...new Set(e.map(x=>x.skillTreeName))],v=[...new Set(e.flatMap(x=>x.tags))],p=[...new Set(e.map(x=>x.minLevel||0))].sort((x,w)=>x-w);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:v.map(x=>({id:`keyword-${x}`,label:x,value:x,category:"Fuzzy Search",description:`Perks with ${x} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:y.map(x=>({id:`skill-${x}`,label:x,value:x,category:"Skill Trees",description:`Perks from ${x} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:p.map(x=>({id:`level-${x}`,label:`Level ${x}+`,value:x.toString(),category:"Minimum Level",description:`Perks requiring level ${x} or higher`}))}]},[e]),g=h.useMemo(()=>({totalPerks:e.length,filteredPerks:u.length,rootPerks:e.filter(y=>y.isRoot).length,multiRankPerks:e.filter(y=>y.totalRanks>1).length,singleRankPerks:e.filter(y=>y.totalRanks===1).length,skills:t.length,categories:s.length,tags:n.length}),[e,u,t,s,n]),b=h.useMemo(()=>{const y=new Map;return d.forEach(v=>{y.has(v.skillTree)||y.set(v.skillTree,[]),y.get(v.skillTree).push(v)}),Array.from(y.entries()).map(([v,p])=>{var x;return{skillId:v,skillName:((x=p[0])==null?void 0:x.skillTreeName)||v,perks:p,count:p.length}}).sort((v,p)=>v.skillName.localeCompare(p.skillName))},[d]);return h.useMemo(()=>{const y=new Map;return d.forEach(v=>{y.has(v.category||"")||y.set(v.category||"",[]),y.get(v.category||"").push(v)}),Array.from(y.entries()).map(([v,p])=>({category:v,perks:p,count:p.length})).sort((v,p)=>(v.category||"").localeCompare(p.category||""))},[d]),h.useMemo(()=>d.filter(y=>y.isSelected),[d]),h.useMemo(()=>d.filter(y=>y.isAvailable),[d]),h.useMemo(()=>d.filter(y=>y.isRoot),[d]),h.useMemo(()=>d.filter(y=>y.totalRanks>1),[d]),h.useMemo(()=>d.filter(y=>y.totalRanks===1),[d]),h.useMemo(()=>(y,v="name")=>{const p=[...y];switch(v){case"name":return p.sort((x,w)=>x.name.localeCompare(w.name));case"skill":return p.sort((x,w)=>x.skillTreeName.localeCompare(w.skillTreeName));case"category":return p.sort((x,w)=>(x.category||"").localeCompare(w.category||""));case"rank":return p.sort((x,w)=>w.totalRanks-x.totalRanks);case"prerequisites":return p.sort((x,w)=>x.prerequisites.length-w.prerequisites.length);case"selected":return p.sort((x,w)=>Number(w.isSelected)-Number(x.isSelected));default:return p}},[]),{filteredItems:d,groupedItems:Object.fromEntries(b.map(y=>[y.skillId,y.perks])),stats:{totalPerks:g.totalPerks,skillTrees:g.skills,multiRank:g.multiRankPerks,singleRank:g.singleRankPerks,withPrerequisites:e.filter(y=>y.prerequisites&&y.prerequisites.length>0).length},searchCategories:m,availableFilters:f,isLoading:a,error:i}}function zY({perk:e,isOpen:t,onOpenChange:s}){var o,l,c,u;const{allPerks:n}=Iu(),a=h.useMemo(()=>{const d=new Map;return n.forEach(f=>{d.set(f.edid,f.name)}),d},[n]),i=h.useMemo(()=>e!=null&&e.prerequisites?e.prerequisites.map(d=>a.get(d)||d):[],[e==null?void 0:e.prerequisites,a]);return e?r.jsx(Yi,{open:t,onOpenChange:s,side:"right",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[r.jsx(zr,{skillName:e.skillTreeName,size:"2xl",className:"flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{label:e.skillTreeName,type:"skill",size:"sm"}),e.totalRanks>1&&r.jsx(Ds,{label:`${e.totalRanks} ranks`,type:"rank",size:"sm"}),e.minLevel&&r.jsx(Ds,{label:`Level ${e.minLevel}+`,type:"level",size:"sm"}),r.jsx(on,{itemId:e.edid,itemType:"perk",itemName:e.name})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:((l=(o=e.ranks[0])==null?void 0:o.description)==null?void 0:l.base)||"No description available."}),((u=(c=e.ranks[0])==null?void 0:c.description)==null?void 0:u.subtext)&&r.jsx("p",{className:"text-sm text-muted-foreground/80 italic border-l-2 border-muted pl-3 leading-relaxed",children:e.ranks[0].description.subtext})]})]}),r.jsxs("div",{className:"space-y-6",children:[i.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Prerequisites"}),r.jsx("ol",{className:"list-decimal list-inside space-y-1",children:i.map((d,f)=>r.jsx("li",{className:"text-sm text-muted-foreground",children:d},f))})]}),e.ranks&&e.ranks.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Perk Ranks"}),r.jsx("div",{className:"space-y-3",children:e.ranks.map((d,f)=>{var m,g,b;return r.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium text-sm",children:["Rank ",f+1]}),((g=(m=d.prerequisites)==null?void 0:m.skillLevel)==null?void 0:g.level)&&r.jsxs(Q,{variant:"outline",className:"text-xs",children:["Level ",d.prerequisites.skillLevel.level]})]}),((b=d.description)==null?void 0:b.base)&&r.jsx(pe,{className:"text-sm text-muted-foreground",children:d.description.base})]},f)})})]}),e.tags&&e.tags.length>0&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((d,f)=>r.jsx(Q,{variant:"outline",className:"text-sm",children:d},f))})]})]})]})}):null}function YN({item:e,className:t,onClick:s,viewMode:n="grid"}){const a=e.originalPerk;return r.jsx("div",{className:$("p-4 rounded-lg border bg-background hover:bg-muted/50 transition-all duration-200 hover:shadow-md cursor-pointer",n==="list"&&"flex items-center gap-4",t),onClick:s,children:n==="grid"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex items-start justify-between mb-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zr,{skillName:a.skillTreeName,size:"sm",className:"flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx(wr,{className:"text-sm font-semibold line-clamp-1",children:e.name}),r.jsx(Aa,{className:"text-muted-foreground",children:a.skillTreeName})]})]})}),r.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[a.totalRanks>1&&r.jsx(Ds,{label:`${a.totalRanks} ranks`,type:"rank",size:"sm"}),a.minLevel&&r.jsx(Ds,{label:`Level ${a.minLevel}+`,type:"level",size:"sm"})]}),r.jsxs("div",{className:"mb-3 space-y-1",children:[r.jsx(pe,{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),e.summary&&r.jsx(pe,{className:"text-xs text-muted-foreground/80 italic border-l-2 border-muted pl-2 line-clamp-2",children:e.summary})]}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,3).map((i,o)=>r.jsx(Q,{variant:"outline",className:"text-xs",children:i},o)),e.tags.length>3&&r.jsxs(Aa,{className:"text-muted-foreground",children:["+",e.tags.length-3," more"]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(zr,{skillName:a.skillTreeName,size:"sm",className:"flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx(wr,{className:"text-sm font-semibold truncate",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.totalRanks>1&&r.jsx(Ds,{label:`${a.totalRanks} ranks`,type:"rank",size:"sm"}),a.minLevel&&r.jsx(Ds,{label:`Level ${a.minLevel}+`,type:"level",size:"sm"})]})]}),r.jsxs("div",{className:"mt-1 space-y-1",children:[r.jsx(pe,{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),e.summary&&r.jsx(pe,{className:"text-xs text-muted-foreground/80 italic border-l-2 border-muted pl-2 line-clamp-2",children:e.summary})]}),r.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.tags.length>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[e.tags.slice(0,2).map((i,o)=>r.jsx(Q,{variant:"outline",className:"text-xs",children:i},o)),e.tags.length>2&&r.jsxs(Aa,{className:"text-muted-foreground",children:["+",e.tags.length-2," more"]})]})})]})]})})}function OY(e,t){const s=h.useMemo(()=>e.map(l=>{var c,u;return{id:l.edid,name:l.name,description:((u=(c=l.ranks[0])==null?void 0:c.description)==null?void 0:u.base)||"",searchableText:l.searchableText,tags:l.tags,category:l.category,skillTree:l.skillTreeName,originalPerk:l}}),[e]),n=h.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0}),[]),a=h.useMemo(()=>new ls(s,n),[s,n]),i=h.useMemo(()=>t.trim()?a.search(t):s.map(l=>({item:l,score:0,matches:[]})),[a,t]);return{filteredPerks:h.useMemo(()=>i.map(l=>l.item.originalPerk),[i]),searchResults:i,searchablePerks:s}}function BY(){lt();const{build:e}=Ye(),{allPerks:t,loading:s,error:n}=Iu(),[a,i]=h.useState("list"),[o,l]=h.useState("alphabetical"),{selectedTags:c,searchQuery:u,onTagSelect:d,onTagRemove:f,onClearTags:m,onSearchChange:g}=sv(),b=h.useMemo(()=>{const C=[...new Set(t.map(R=>R.skillTreeName))],M=[...new Set(t.flatMap(R=>R.tags))],E=[...new Set(t.map(R=>R.minLevel||0))].sort((R,T)=>R-T);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:M.map(R=>({id:`keyword-${R}`,label:R,value:R,category:"Fuzzy Search",description:`Perks with ${R} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:C.map(R=>({id:`skill-${R}`,label:R,value:R,category:"skill",description:`Perks from ${R} skill tree`}))},{id:"tags",name:"Tags",placeholder:"Filter by perk tags...",options:M.map(R=>({id:`tag-${R}`,label:R,value:R,category:"tag",description:`Perks with ${R} tag`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:E.map(R=>({id:`level-${R}`,label:`Level ${R}+`,value:R.toString(),category:"minLevel",description:`Perks requiring level ${R} or higher`}))}]},[t]),{filteredPerks:y}=OY(t,u),p=h.useMemo(()=>{let C=[...y];const M=c.filter(T=>T.category==="skill").map(T=>T.value);M.length>0&&(C=C.filter(T=>M.includes(T.skillTreeName)||M.includes(T.skillTree)));const E=c.filter(T=>T.category==="tag").map(T=>T.value);E.length>0&&(C=C.filter(T=>E.some(O=>T.tags.includes(O))));const R=c.filter(T=>T.category==="minLevel").map(T=>parseInt(T.value)).filter(T=>!isNaN(T));if(R.length>0){const T=Math.max(...R);C=C.filter(O=>(O.minLevel||0)>=T)}return C},[y,c]).map(C=>({...bR(C,e),originalPerk:C})),x=h.useMemo(()=>{const C=[...p];switch(o){case"alphabetical":return C.sort((M,E)=>M.name.localeCompare(E.name));case"skill-tree":return C.sort((M,E)=>{const R=M.originalPerk.skillTreeName,T=E.originalPerk.skillTreeName;return R.localeCompare(T)||M.name.localeCompare(E.name)});case"level":return C.sort((M,E)=>{const R=M.originalPerk.minLevel||0,T=E.originalPerk.minLevel||0;return R-T||M.name.localeCompare(E.name)});default:return C}},[p,o]),[w,N]=h.useState(null),[j,_]=h.useState(!1),k=C=>{N(C),_(!0)},A=C=>{i(C)},S=C=>{switch(C){case"alphabetical":return"Alphabetical (A-Z)";case"skill-tree":return"Skill Tree";case"level":return"Level";default:return"Alphabetical (A-Z)"}};return s?r.jsx(Ut,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-lg",children:"Loading perk data..."})})}):n?r.jsx(Ut,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-lg text-red-500",children:["Error loading perk data: ",n]})})}):r.jsxs(Ut,{title:"Perk References",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx("div",{className:"flex-1",children:r.jsx(ta,{categories:b,onSelect:d,onCustomSearch:g})})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(G,{variant:a==="grid"?"default":"outline",size:"sm",onClick:()=>A("grid"),className:"flex items-center gap-2",children:[r.jsx($i,{className:"h-4 w-4"}),"Grid"]}),r.jsxs(G,{variant:a==="list"?"default":"outline",size:"sm",onClick:()=>A("list"),className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-4 w-4"}),"List"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(Zi,{children:[r.jsx(Wi,{asChild:!0,children:r.jsxs(G,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort: ",S(o),r.jsx(vt,{className:"h-4 w-4"})]})}),r.jsxs(Gr,{align:"end",children:[r.jsx(us,{onClick:()=>l("alphabetical"),children:"Alphabetical (A-Z)"}),r.jsx(us,{onClick:()=>l("skill-tree"),children:"Skill Tree"}),r.jsx(us,{onClick:()=>l("level"),children:"Level"})]})]})})]}),r.jsx("div",{className:"my-4",children:c.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("button",{onClick:m,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[r.jsx(ze,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),c.map(C=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>f(C.id),title:"Click to remove",children:[C.label,r.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},C.id))]})}),r.jsxs("div",{className:"mt-6",children:[a==="grid"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(C=>r.jsx(YN,{item:C,onClick:()=>k(C.originalPerk),viewMode:"grid"},C.id))}):r.jsx("div",{className:"space-y-2",children:x.map(C=>r.jsx(YN,{item:C,onClick:()=>k(C.originalPerk),viewMode:"list"},C.id))}),x.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground",children:"No perks found matching your criteria."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]}),r.jsx(zY,{perk:w,isOpen:j,onOpenChange:_})]})}function XN(){const{skills:e,loading:t,error:s,searchQuery:n,setSearchQuery:a,selectedCategory:i,setSelectedCategory:o,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:g,perkTree:b,skillSummary:y}=eR(),{filteredItems:v,groupedItems:p,stats:x,isLoading:w,error:N,searchCategories:j}=LY(),{selectedTags:_,viewMode:k,searchQuery:A,onTagSelect:S,onTagRemove:C,onClearTags:M,onViewModeChange:E,onSearchChange:R}=sv();return t||w?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading data..."})]})}):s||N?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-destructive mb-4",children:s||N}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):r.jsx(Ut,{title:"Skills & Perks",description:"Manage your character's skills and browse all available perks.",children:r.jsx("div",{className:"mb-6",children:r.jsxs(qa,{defaultValue:"builder",className:"w-full",children:[r.jsxs(Qa,{className:"grid w-full grid-cols-2",children:[r.jsx(kt,{value:"builder",children:"Perk Builder"}),r.jsx(kt,{value:"reference",children:"Perk References"})]}),r.jsx(At,{value:"builder",className:"space-y-4",children:r.jsx(qZ,{skills:e,loading:t,error:s,searchQuery:n,onSearchChange:a,selectedCategory:i,onCategorySelect:o,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:g,perkTree:b,skillSummary:y})}),r.jsx(At,{value:"reference",className:"space-y-4",children:r.jsx(BY,{items:v,groupedItems:p,stats:x,searchCategories:j,selectedTags:_,viewMode:k,searchQuery:A,onTagSelect:S,onTagRemove:C,onClearTags:M,onViewModeChange:E,onSearchChange:R})})]})})})}function W(e,t,s){function n(l,c){var u;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(u=l._zod).traits??(u.traits=new Set),l._zod.traits.add(e),t(l,c);for(const d in o.prototype)d in l||Object.defineProperty(l,d,{value:o.prototype[d].bind(l)});l._zod.constr=o,l._zod.def=c}const a=(s==null?void 0:s.Parent)??Object;class i extends a{}Object.defineProperty(i,"name",{value:e});function o(l){var c;const u=s!=null&&s.Parent?new i:this;n(u,l),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:l=>{var c,u;return s!=null&&s.Parent&&l instanceof s.Parent?!0:(u=(c=l==null?void 0:l._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class su extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const NR={};function Mi(e){return NR}function IY(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,a])=>t.indexOf(+n)===-1).map(([n,a])=>a)}function $Y(e,t){return typeof t=="bigint"?t.toString():t}function jR(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function nv(e){return e==null}function av(e){const t=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(t,s)}function FY(e,t){const s=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=s>n?s:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}function tt(e,t,s){Object.defineProperty(e,t,{get(){{const n=s();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function rv(e,t,s){Object.defineProperty(e,t,{value:s,writable:!0,enumerable:!0,configurable:!0})}function nc(e){return JSON.stringify(e)}const kR=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function lx(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const HY=jR(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function cx(e){if(lx(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(lx(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}const UY=new Set(["string","number","symbol"]);function vh(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ki(e,t,s){const n=new e._zod.constr(t??e._zod.def);return(!t||s!=null&&s.parent)&&(n._zod.parent=e),n}function fe(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function GY(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const VY={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function qY(e,t){const s={},n=e._zod.def;for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(s[a]=n.shape[a])}return Ki(e,{...e._zod.def,shape:s,checks:[]})}function QY(e,t){const s={...e._zod.def.shape},n=e._zod.def;for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&delete s[a]}return Ki(e,{...e._zod.def,shape:s,checks:[]})}function ZY(e,t){if(!cx(t))throw new Error("Invalid input to extend: expected a plain object");const s={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return rv(this,"shape",n),n},checks:[]};return Ki(e,s)}function WY(e,t){return Ki(e,{...e._zod.def,get shape(){const s={...e._zod.def.shape,...t._zod.def.shape};return rv(this,"shape",s),s},catchall:t._zod.def.catchall,checks:[]})}function YY(e,t,s){const n=t._zod.def.shape,a={...n};if(s)for(const i in s){if(!(i in n))throw new Error(`Unrecognized key: "${i}"`);s[i]&&(a[i]=e?new e({type:"optional",innerType:n[i]}):n[i])}else for(const i in n)a[i]=e?new e({type:"optional",innerType:n[i]}):n[i];return Ki(t,{...t._zod.def,shape:a,checks:[]})}function XY(e,t,s){const n=t._zod.def.shape,a={...n};if(s)for(const i in s){if(!(i in a))throw new Error(`Unrecognized key: "${i}"`);s[i]&&(a[i]=new e({type:"nonoptional",innerType:n[i]}))}else for(const i in n)a[i]=new e({type:"nonoptional",innerType:n[i]});return Ki(t,{...t._zod.def,shape:a,checks:[]})}function jc(e,t=0){var s;for(let n=t;n<e.issues.length;n++)if(((s=e.issues[n])==null?void 0:s.continue)!==!0)return!0;return!1}function iv(e,t){return t.map(s=>{var n;return(n=s).path??(n.path=[]),s.path.unshift(e),s})}function Cd(e){return typeof e=="string"?e:e==null?void 0:e.message}function Di(e,t,s){var a,i,o,l,c,u;const n={...e,path:e.path??[]};if(!e.message){const d=Cd((o=(i=(a=e.inst)==null?void 0:a._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??Cd((l=t==null?void 0:t.error)==null?void 0:l.call(t,e))??Cd((c=s.customError)==null?void 0:c.call(s,e))??Cd((u=s.localeError)==null?void 0:u.call(s,e))??"Invalid input";n.message=d}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function ov(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function nu(...e){const[t,s,n]=e;return typeof t=="string"?{message:t,code:"custom",input:s,inst:n}:{...t}}const SR=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,$Y,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},_R=W("$ZodError",SR),CR=W("$ZodError",SR,{Parent:Error});function KY(e,t=s=>s.message){const s={},n=[];for(const a of e.issues)a.path.length>0?(s[a.path[0]]=s[a.path[0]]||[],s[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:s}}function JY(e,t){const s=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>a({issues:l}));else if(o.code==="invalid_key")a({issues:o.issues});else if(o.code==="invalid_element")a({issues:o.issues});else if(o.path.length===0)n._errors.push(s(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(s(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(e),n}const eX=e=>(t,s,n,a)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:s,issues:[]},i);if(o instanceof Promise)throw new su;if(o.issues.length){const l=new((a==null?void 0:a.Err)??e)(o.issues.map(c=>Di(c,i,Mi())));throw kR(l,a==null?void 0:a.callee),l}return o.value},tX=e=>async(t,s,n,a)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:s,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const l=new((a==null?void 0:a.Err)??e)(o.issues.map(c=>Di(c,i,Mi())));throw kR(l,a==null?void 0:a.callee),l}return o.value},ER=e=>(t,s,n)=>{const a=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:s,issues:[]},a);if(i instanceof Promise)throw new su;return i.issues.length?{success:!1,error:new(e??_R)(i.issues.map(o=>Di(o,a,Mi())))}:{success:!0,data:i.value}},sX=ER(CR),AR=e=>async(t,s,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:s,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>Di(o,a,Mi())))}:{success:!0,data:i.value}},nX=AR(CR),aX=/^[cC][^\s-]{8,}$/,rX=/^[0-9a-z]+$/,iX=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,oX=/^[0-9a-vA-V]{20}$/,lX=/^[A-Za-z0-9]{27}$/,cX=/^[a-zA-Z0-9_-]{21}$/,uX=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,dX=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,KN=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,fX=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,mX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function hX(){return new RegExp(mX,"u")}const gX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pX=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,xX=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,yX=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vX=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,RR=/^[A-Za-z0-9_-]*$/,bX=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,wX=/^\+(?:[0-9]){6,14}[0-9]$/,TR="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",NX=new RegExp(`^${TR}$`);function MR(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function jX(e){return new RegExp(`^${MR(e)}$`)}function kX(e){const t=MR({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${s.join("|")})`;return new RegExp(`^${TR}T(?:${n})$`)}const SX=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},_X=/^\d+$/,CX=/^-?\d+(?:\.\d+)?/i,EX=/true|false/i,AX=/^[^A-Z]*$/,RX=/^[^a-z]*$/,Ss=W("$ZodCheck",(e,t)=>{var s;e._zod??(e._zod={}),e._zod.def=t,(s=e._zod).onattach??(s.onattach=[])}),DR={number:"number",bigint:"bigint",object:"date"},PR=W("$ZodCheckLessThan",(e,t)=>{Ss.init(e,t);const s=DR[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:s,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),LR=W("$ZodCheckGreaterThan",(e,t)=>{Ss.init(e,t);const s=DR[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:s,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),TX=W("$ZodCheckMultipleOf",(e,t)=>{Ss.init(e,t),e._zod.onattach.push(s=>{var n;(n=s._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=s=>{if(typeof s.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%t.value===BigInt(0):FY(s.value,t.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:t.value,input:s.value,inst:e,continue:!t.abort})}}),MX=W("$ZodCheckNumberFormat",(e,t)=>{var o;Ss.init(e,t),t.format=t.format||"float64";const s=(o=t.format)==null?void 0:o.includes("int"),n=s?"int":"number",[a,i]=VY[t.format];e._zod.onattach.push(l=>{const c=l._zod.bag;c.format=t.format,c.minimum=a,c.maximum=i,s&&(c.pattern=_X)}),e._zod.check=l=>{const c=l.value;if(s){if(!Number.isInteger(c)){l.issues.push({expected:n,format:t.format,code:"invalid_type",input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}c<a&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),c>i&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:e})}}),DX=W("$ZodCheckMaxLength",(e,t)=>{var s;Ss.init(e,t),(s=e._zod.def).when??(s.when=n=>{const a=n.value;return!nv(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const a=n.value;if(a.length<=t.maximum)return;const o=ov(a);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),PX=W("$ZodCheckMinLength",(e,t)=>{var s;Ss.init(e,t),(s=e._zod.def).when??(s.when=n=>{const a=n.value;return!nv(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const a=n.value;if(a.length>=t.minimum)return;const o=ov(a);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),LX=W("$ZodCheckLengthEquals",(e,t)=>{var s;Ss.init(e,t),(s=e._zod.def).when??(s.when=n=>{const a=n.value;return!nv(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=n=>{const a=n.value,i=a.length;if(i===t.length)return;const o=ov(a),l=i>t.length;n.issues.push({origin:o,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),bh=W("$ZodCheckStringFormat",(e,t)=>{var s,n;Ss.init(e,t),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(s=e._zod).check??(s.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),zX=W("$ZodCheckRegex",(e,t)=>{bh.init(e,t),e._zod.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),OX=W("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=AX),bh.init(e,t)}),BX=W("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=RX),bh.init(e,t)}),IX=W("$ZodCheckIncludes",(e,t)=>{Ss.init(e,t);const s=vh(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${s}`:s);t.pattern=n,e._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),$X=W("$ZodCheckStartsWith",(e,t)=>{Ss.init(e,t);const s=new RegExp(`^${vh(t.prefix)}.*`);t.pattern??(t.pattern=s),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(s)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),FX=W("$ZodCheckEndsWith",(e,t)=>{Ss.init(e,t);const s=new RegExp(`.*${vh(t.suffix)}$`);t.pattern??(t.pattern=s),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(s)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),HX=W("$ZodCheckOverwrite",(e,t)=>{Ss.init(e,t),e._zod.check=s=>{s.value=t.tx(s.value)}});class UX{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(o=>o),a=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(a)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,s=this==null?void 0:this.args,a=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...s,a.join(`
`))}}const GX={major:4,minor:0,patch:5},bt=W("$ZodType",(e,t)=>{var a;var s;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=GX;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const i of n)for(const o of i._zod.onattach)o(e);if(n.length===0)(s=e._zod).deferred??(s.deferred=[]),(a=e._zod.deferred)==null||a.push(()=>{e._zod.run=e._zod.parse});else{const i=(o,l,c)=>{let u=jc(o),d;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(o))continue}else if(u)continue;const m=o.issues.length,g=f._zod.check(o);if(g instanceof Promise&&(c==null?void 0:c.async)===!1)throw new su;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,o.issues.length!==m&&(u||(u=jc(o,m)))});else{if(o.issues.length===m)continue;u||(u=jc(o,m))}}return d?d.then(()=>o):o};e._zod.run=(o,l)=>{const c=e._zod.parse(o,l);if(c instanceof Promise){if(l.async===!1)throw new su;return c.then(u=>i(u,n,l))}return i(c,n,l)}}e["~standard"]={validate:i=>{var o;try{const l=sX(e,i);return l.success?{value:l.data}:{issues:(o=l.error)==null?void 0:o.issues}}catch{return nX(e,i).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),lv=W("$ZodString",(e,t)=>{var s;bt.init(e,t),e._zod.pattern=[...((s=e==null?void 0:e._zod.bag)==null?void 0:s.patterns)??[]].pop()??SX(e._zod.bag),e._zod.parse=(n,a)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),ct=W("$ZodStringFormat",(e,t)=>{bh.init(e,t),lv.init(e,t)}),VX=W("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=dX),ct.init(e,t)}),qX=W("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=KN(n))}else t.pattern??(t.pattern=KN());ct.init(e,t)}),QX=W("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=fX),ct.init(e,t)}),ZX=W("$ZodURL",(e,t)=>{ct.init(e,t),e._zod.check=s=>{try{const n=s.value,a=new URL(n),i=a.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:bX.source,input:s.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:s.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&i.endsWith("/")?s.value=i.slice(0,-1):s.value=i;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!t.abort})}}}),WX=W("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=hX()),ct.init(e,t)}),YX=W("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=cX),ct.init(e,t)}),XX=W("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=aX),ct.init(e,t)}),KX=W("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=rX),ct.init(e,t)}),JX=W("$ZodULID",(e,t)=>{t.pattern??(t.pattern=iX),ct.init(e,t)}),eK=W("$ZodXID",(e,t)=>{t.pattern??(t.pattern=oX),ct.init(e,t)}),tK=W("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=lX),ct.init(e,t)}),sK=W("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=kX(t)),ct.init(e,t)}),nK=W("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=NX),ct.init(e,t)}),aK=W("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=jX(t)),ct.init(e,t)}),rK=W("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=uX),ct.init(e,t)}),iK=W("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=gX),ct.init(e,t),e._zod.onattach.push(s=>{const n=s._zod.bag;n.format="ipv4"})}),oK=W("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=pX),ct.init(e,t),e._zod.onattach.push(s=>{const n=s._zod.bag;n.format="ipv6"}),e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!t.abort})}}}),lK=W("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=xX),ct.init(e,t)}),cK=W("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=yX),ct.init(e,t),e._zod.check=s=>{const[n,a]=s.value.split("/");try{if(!a)throw new Error;const i=Number(a);if(`${i}`!==a)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!t.abort})}}});function zR(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const uK=W("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=vX),ct.init(e,t),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),e._zod.check=s=>{zR(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!t.abort})}});function dK(e){if(!RR.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),s=t.padEnd(Math.ceil(t.length/4)*4,"=");return zR(s)}const fK=W("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=RR),ct.init(e,t),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),e._zod.check=s=>{dK(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!t.abort})}}),mK=W("$ZodE164",(e,t)=>{t.pattern??(t.pattern=wX),ct.init(e,t)});function hK(e,t=null){try{const s=e.split(".");if(s.length!==3)return!1;const[n]=s;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const gK=W("$ZodJWT",(e,t)=>{ct.init(e,t),e._zod.check=s=>{hK(s.value,t.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!t.abort})}}),OR=W("$ZodNumber",(e,t)=>{bt.init(e,t),e._zod.pattern=e._zod.bag.pattern??CX,e._zod.parse=(s,n)=>{if(t.coerce)try{s.value=Number(s.value)}catch{}const a=s.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return s;const i=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...i?{received:i}:{}}),s}}),pK=W("$ZodNumber",(e,t)=>{MX.init(e,t),OR.init(e,t)}),xK=W("$ZodBoolean",(e,t)=>{bt.init(e,t),e._zod.pattern=EX,e._zod.parse=(s,n)=>{if(t.coerce)try{s.value=!!s.value}catch{}const a=s.value;return typeof a=="boolean"||s.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),s}}),yK=W("$ZodUnknown",(e,t)=>{bt.init(e,t),e._zod.parse=s=>s}),vK=W("$ZodNever",(e,t)=>{bt.init(e,t),e._zod.parse=(s,n)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function JN(e,t,s){e.issues.length&&t.issues.push(...iv(s,e.issues)),t.value[s]=e.value}const bK=W("$ZodArray",(e,t)=>{bt.init(e,t),e._zod.parse=(s,n)=>{const a=s.value;if(!Array.isArray(a))return s.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),s;s.value=Array(a.length);const i=[];for(let o=0;o<a.length;o++){const l=a[o],c=t.element._zod.run({value:l,issues:[]},n);c instanceof Promise?i.push(c.then(u=>JN(u,s,o))):JN(c,s,o)}return i.length?Promise.all(i).then(()=>s):s}});function Ed(e,t,s){e.issues.length&&t.issues.push(...iv(s,e.issues)),t.value[s]=e.value}function ej(e,t,s,n){e.issues.length?n[s]===void 0?s in n?t.value[s]=void 0:t.value[s]=e.value:t.issues.push(...iv(s,e.issues)):e.value===void 0?s in n&&(t.value[s]=void 0):t.value[s]=e.value}const wK=W("$ZodObject",(e,t)=>{bt.init(e,t);const s=jR(()=>{const f=Object.keys(t.shape);for(const g of f)if(!(t.shape[g]instanceof bt))throw new Error(`Invalid element at key "${g}": expected a Zod schema`);const m=GY(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});tt(e._zod,"propValues",()=>{const f=t.shape,m={};for(const g in f){const b=f[g]._zod;if(b.values){m[g]??(m[g]=new Set);for(const y of b.values)m[g].add(y)}}return m});const n=f=>{const m=new UX(["shape","payload","ctx"]),g=s.value,b=x=>{const w=nc(x);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};m.write("const input = payload.value;");const y=Object.create(null);let v=0;for(const x of g.keys)y[x]=`key_${v++}`;m.write("const newResult = {}");for(const x of g.keys)if(g.optionalKeys.has(x)){const w=y[x];m.write(`const ${w} = ${b(x)};`);const N=nc(x);m.write(`
        if (${w}.issues.length) {
          if (input[${N}] === undefined) {
            if (${N} in input) {
              newResult[${N}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${w}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${N}, ...iss.path] : [${N}],
              }))
            );
          }
        } else if (${w}.value === undefined) {
          if (${N} in input) newResult[${N}] = undefined;
        } else {
          newResult[${N}] = ${w}.value;
        }
        `)}else{const w=y[x];m.write(`const ${w} = ${b(x)};`),m.write(`
          if (${w}.issues.length) payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${nc(x)}, ...iss.path] : [${nc(x)}]
          })));`),m.write(`newResult[${nc(x)}] = ${w}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const p=m.compile();return(x,w)=>p(f,x,w)};let a;const i=lx,o=!NR.jitless,c=o&&HY.value,u=t.catchall;let d;e._zod.parse=(f,m)=>{d??(d=s.value);const g=f.value;if(!i(g))return f.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),f;const b=[];if(o&&c&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)a||(a=n(t.shape)),f=a(f,m);else{f.value={};const w=d.shape;for(const N of d.keys){const j=w[N],_=j._zod.run({value:g[N],issues:[]},m),k=j._zod.optin==="optional"&&j._zod.optout==="optional";_ instanceof Promise?b.push(_.then(A=>k?ej(A,f,N,g):Ed(A,f,N))):k?ej(_,f,N,g):Ed(_,f,N)}}if(!u)return b.length?Promise.all(b).then(()=>f):f;const y=[],v=d.keySet,p=u._zod,x=p.def.type;for(const w of Object.keys(g)){if(v.has(w))continue;if(x==="never"){y.push(w);continue}const N=p.run({value:g[w],issues:[]},m);N instanceof Promise?b.push(N.then(j=>Ed(j,f,w))):Ed(N,f,w)}return y.length&&f.issues.push({code:"unrecognized_keys",keys:y,input:g,inst:e}),b.length?Promise.all(b).then(()=>f):f}});function tj(e,t,s,n){for(const a of e)if(a.issues.length===0)return t.value=a.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:s,errors:e.map(a=>a.issues.map(i=>Di(i,n,Mi())))}),t}const NK=W("$ZodUnion",(e,t)=>{bt.init(e,t),tt(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),tt(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),tt(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),tt(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${s.map(n=>av(n.source)).join("|")})$`)}}),e._zod.parse=(s,n)=>{let a=!1;const i=[];for(const o of t.options){const l=o._zod.run({value:s.value,issues:[]},n);if(l instanceof Promise)i.push(l),a=!0;else{if(l.issues.length===0)return l;i.push(l)}}return a?Promise.all(i).then(o=>tj(o,s,e,n)):tj(i,s,e,n)}}),jK=W("$ZodIntersection",(e,t)=>{bt.init(e,t),e._zod.parse=(s,n)=>{const a=s.value,i=t.left._zod.run({value:a,issues:[]},n),o=t.right._zod.run({value:a,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,u])=>sj(s,c,u)):sj(s,i,o)}});function ux(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(cx(e)&&cx(t)){const s=Object.keys(t),n=Object.keys(e).filter(i=>s.indexOf(i)!==-1),a={...e,...t};for(const i of n){const o=ux(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};a[i]=o.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let n=0;n<e.length;n++){const a=e[n],i=t[n],o=ux(a,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};s.push(o.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function sj(e,t,s){if(t.issues.length&&e.issues.push(...t.issues),s.issues.length&&e.issues.push(...s.issues),jc(e))return e;const n=ux(t.value,s.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const kK=W("$ZodEnum",(e,t)=>{bt.init(e,t);const s=IY(t.entries);e._zod.values=new Set(s),e._zod.pattern=new RegExp(`^(${s.filter(n=>UY.has(typeof n)).map(n=>typeof n=="string"?vh(n):n.toString()).join("|")})$`),e._zod.parse=(n,a)=>{const i=n.value;return e._zod.values.has(i)||n.issues.push({code:"invalid_value",values:s,input:i,inst:e}),n}}),SK=W("$ZodTransform",(e,t)=>{bt.init(e,t),e._zod.parse=(s,n)=>{const a=t.transform(s.value,s);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(o=>(s.value=o,s));if(a instanceof Promise)throw new su;return s.value=a,s}}),_K=W("$ZodOptional",(e,t)=>{bt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",tt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),tt(e._zod,"pattern",()=>{const s=t.innerType._zod.pattern;return s?new RegExp(`^(${av(s.source)})?$`):void 0}),e._zod.parse=(s,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(s,n):s.value===void 0?s:t.innerType._zod.run(s,n)}),CK=W("$ZodNullable",(e,t)=>{bt.init(e,t),tt(e._zod,"optin",()=>t.innerType._zod.optin),tt(e._zod,"optout",()=>t.innerType._zod.optout),tt(e._zod,"pattern",()=>{const s=t.innerType._zod.pattern;return s?new RegExp(`^(${av(s.source)}|null)$`):void 0}),tt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(s,n)=>s.value===null?s:t.innerType._zod.run(s,n)}),EK=W("$ZodDefault",(e,t)=>{bt.init(e,t),e._zod.optin="optional",tt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(s,n)=>{if(s.value===void 0)return s.value=t.defaultValue,s;const a=t.innerType._zod.run(s,n);return a instanceof Promise?a.then(i=>nj(i,t)):nj(a,t)}});function nj(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const AK=W("$ZodPrefault",(e,t)=>{bt.init(e,t),e._zod.optin="optional",tt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(s,n)=>(s.value===void 0&&(s.value=t.defaultValue),t.innerType._zod.run(s,n))}),RK=W("$ZodNonOptional",(e,t)=>{bt.init(e,t),tt(e._zod,"values",()=>{const s=t.innerType._zod.values;return s?new Set([...s].filter(n=>n!==void 0)):void 0}),e._zod.parse=(s,n)=>{const a=t.innerType._zod.run(s,n);return a instanceof Promise?a.then(i=>aj(i,e)):aj(a,e)}});function aj(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const TK=W("$ZodCatch",(e,t)=>{bt.init(e,t),e._zod.optin="optional",tt(e._zod,"optout",()=>t.innerType._zod.optout),tt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(s,n)=>{const a=t.innerType._zod.run(s,n);return a instanceof Promise?a.then(i=>(s.value=i.value,i.issues.length&&(s.value=t.catchValue({...s,error:{issues:i.issues.map(o=>Di(o,n,Mi()))},input:s.value}),s.issues=[]),s)):(s.value=a.value,a.issues.length&&(s.value=t.catchValue({...s,error:{issues:a.issues.map(i=>Di(i,n,Mi()))},input:s.value}),s.issues=[]),s)}}),MK=W("$ZodPipe",(e,t)=>{bt.init(e,t),tt(e._zod,"values",()=>t.in._zod.values),tt(e._zod,"optin",()=>t.in._zod.optin),tt(e._zod,"optout",()=>t.out._zod.optout),tt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(s,n)=>{const a=t.in._zod.run(s,n);return a instanceof Promise?a.then(i=>rj(i,t,n)):rj(a,t,n)}});function rj(e,t,s){return jc(e)?e:t.out._zod.run({value:e.value,issues:e.issues},s)}const DK=W("$ZodReadonly",(e,t)=>{bt.init(e,t),tt(e._zod,"propValues",()=>t.innerType._zod.propValues),tt(e._zod,"values",()=>t.innerType._zod.values),tt(e._zod,"optin",()=>t.innerType._zod.optin),tt(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(s,n)=>{const a=t.innerType._zod.run(s,n);return a instanceof Promise?a.then(ij):ij(a)}});function ij(e){return e.value=Object.freeze(e.value),e}const PK=W("$ZodCustom",(e,t)=>{Ss.init(e,t),bt.init(e,t),e._zod.parse=(s,n)=>s,e._zod.check=s=>{const n=s.value,a=t.fn(n);if(a instanceof Promise)return a.then(i=>oj(i,s,n,e));oj(a,s,n,e)}});function oj(e,t,s,n){if(!e){const a={code:"custom",input:s,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(a.params=n._zod.def.params),t.issues.push(nu(a))}}class LK{constructor(){this._map=new Map,this._idmap=new Map}add(t,...s){const n=s[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const s=this._map.get(t);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(t),this}get(t){const s=t._zod.parent;if(s){const n={...this.get(s)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function zK(){return new LK}const Ad=zK();function OK(e,t){return new e({type:"string",...fe(t)})}function BK(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...fe(t)})}function lj(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...fe(t)})}function IK(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...fe(t)})}function $K(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...fe(t)})}function FK(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...fe(t)})}function HK(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...fe(t)})}function UK(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...fe(t)})}function GK(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...fe(t)})}function VK(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...fe(t)})}function qK(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...fe(t)})}function QK(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...fe(t)})}function ZK(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...fe(t)})}function WK(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...fe(t)})}function YK(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...fe(t)})}function XK(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...fe(t)})}function KK(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...fe(t)})}function JK(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...fe(t)})}function eJ(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...fe(t)})}function tJ(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...fe(t)})}function sJ(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...fe(t)})}function nJ(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...fe(t)})}function aJ(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...fe(t)})}function rJ(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...fe(t)})}function iJ(e,t){return new e({type:"string",format:"date",check:"string_format",...fe(t)})}function oJ(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...fe(t)})}function lJ(e,t){return new e({type:"string",format:"duration",check:"string_format",...fe(t)})}function cJ(e,t){return new e({type:"number",checks:[],...fe(t)})}function uJ(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...fe(t)})}function dJ(e,t){return new e({type:"boolean",...fe(t)})}function fJ(e){return new e({type:"unknown"})}function mJ(e,t){return new e({type:"never",...fe(t)})}function cj(e,t){return new PR({check:"less_than",...fe(t),value:e,inclusive:!1})}function Ag(e,t){return new PR({check:"less_than",...fe(t),value:e,inclusive:!0})}function uj(e,t){return new LR({check:"greater_than",...fe(t),value:e,inclusive:!1})}function Rg(e,t){return new LR({check:"greater_than",...fe(t),value:e,inclusive:!0})}function dj(e,t){return new TX({check:"multiple_of",...fe(t),value:e})}function BR(e,t){return new DX({check:"max_length",...fe(t),maximum:e})}function Wf(e,t){return new PX({check:"min_length",...fe(t),minimum:e})}function IR(e,t){return new LX({check:"length_equals",...fe(t),length:e})}function hJ(e,t){return new zX({check:"string_format",format:"regex",...fe(t),pattern:e})}function gJ(e){return new OX({check:"string_format",format:"lowercase",...fe(e)})}function pJ(e){return new BX({check:"string_format",format:"uppercase",...fe(e)})}function xJ(e,t){return new IX({check:"string_format",format:"includes",...fe(t),includes:e})}function yJ(e,t){return new $X({check:"string_format",format:"starts_with",...fe(t),prefix:e})}function vJ(e,t){return new FX({check:"string_format",format:"ends_with",...fe(t),suffix:e})}function $u(e){return new HX({check:"overwrite",tx:e})}function bJ(e){return $u(t=>t.normalize(e))}function wJ(){return $u(e=>e.trim())}function NJ(){return $u(e=>e.toLowerCase())}function jJ(){return $u(e=>e.toUpperCase())}function kJ(e,t,s){return new e({type:"array",element:t,...fe(s)})}function SJ(e,t,s){return new e({type:"custom",check:"custom",fn:t,...fe(s)})}const _J=W("ZodISODateTime",(e,t)=>{sK.init(e,t),ht.init(e,t)});function CJ(e){return rJ(_J,e)}const EJ=W("ZodISODate",(e,t)=>{nK.init(e,t),ht.init(e,t)});function AJ(e){return iJ(EJ,e)}const RJ=W("ZodISOTime",(e,t)=>{aK.init(e,t),ht.init(e,t)});function TJ(e){return oJ(RJ,e)}const MJ=W("ZodISODuration",(e,t)=>{rK.init(e,t),ht.init(e,t)});function DJ(e){return lJ(MJ,e)}const PJ=(e,t)=>{_R.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>JY(e,s)},flatten:{value:s=>KY(e,s)},addIssue:{value:s=>e.issues.push(s)},addIssues:{value:s=>e.issues.push(...s)},isEmpty:{get(){return e.issues.length===0}}})},wh=W("ZodError",PJ,{Parent:Error}),LJ=eX(wh),zJ=tX(wh),OJ=ER(wh),BJ=AR(wh),Tt=W("ZodType",(e,t)=>(bt.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...s)=>e.clone({...t,checks:[...t.checks??[],...s.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(s,n)=>Ki(e,s,n),e.brand=()=>e,e.register=(s,n)=>(s.add(e,n),e),e.parse=(s,n)=>LJ(e,s,n,{callee:e.parse}),e.safeParse=(s,n)=>OJ(e,s,n),e.parseAsync=async(s,n)=>zJ(e,s,n,{callee:e.parseAsync}),e.safeParseAsync=async(s,n)=>BJ(e,s,n),e.spa=e.safeParseAsync,e.refine=(s,n)=>e.check(Tee(s,n)),e.superRefine=s=>e.check(Mee(s)),e.overwrite=s=>e.check($u(s)),e.optional=()=>gj(e),e.nullable=()=>pj(e),e.nullish=()=>gj(pj(e)),e.nonoptional=s=>jee(e,s),e.array=()=>Pi(e),e.or=s=>fee([e,s]),e.and=s=>hee(e,s),e.transform=s=>xj(e,xee(s)),e.default=s=>bee(e,s),e.prefault=s=>Nee(e,s),e.catch=s=>See(e,s),e.pipe=s=>xj(e,s),e.readonly=()=>Eee(e),e.describe=s=>{const n=e.clone();return Ad.add(n,{description:s}),n},Object.defineProperty(e,"description",{get(){var s;return(s=Ad.get(e))==null?void 0:s.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return Ad.get(e);const n=e.clone();return Ad.add(n,s[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),$R=W("_ZodString",(e,t)=>{lv.init(e,t),Tt.init(e,t);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...n)=>e.check(hJ(...n)),e.includes=(...n)=>e.check(xJ(...n)),e.startsWith=(...n)=>e.check(yJ(...n)),e.endsWith=(...n)=>e.check(vJ(...n)),e.min=(...n)=>e.check(Wf(...n)),e.max=(...n)=>e.check(BR(...n)),e.length=(...n)=>e.check(IR(...n)),e.nonempty=(...n)=>e.check(Wf(1,...n)),e.lowercase=n=>e.check(gJ(n)),e.uppercase=n=>e.check(pJ(n)),e.trim=()=>e.check(wJ()),e.normalize=(...n)=>e.check(bJ(...n)),e.toLowerCase=()=>e.check(NJ()),e.toUpperCase=()=>e.check(jJ())}),IJ=W("ZodString",(e,t)=>{lv.init(e,t),$R.init(e,t),e.email=s=>e.check(BK($J,s)),e.url=s=>e.check(UK(FJ,s)),e.jwt=s=>e.check(aJ(see,s)),e.emoji=s=>e.check(GK(HJ,s)),e.guid=s=>e.check(lj(fj,s)),e.uuid=s=>e.check(IK(Rd,s)),e.uuidv4=s=>e.check($K(Rd,s)),e.uuidv6=s=>e.check(FK(Rd,s)),e.uuidv7=s=>e.check(HK(Rd,s)),e.nanoid=s=>e.check(VK(UJ,s)),e.guid=s=>e.check(lj(fj,s)),e.cuid=s=>e.check(qK(GJ,s)),e.cuid2=s=>e.check(QK(VJ,s)),e.ulid=s=>e.check(ZK(qJ,s)),e.base64=s=>e.check(tJ(JJ,s)),e.base64url=s=>e.check(sJ(eee,s)),e.xid=s=>e.check(WK(QJ,s)),e.ksuid=s=>e.check(YK(ZJ,s)),e.ipv4=s=>e.check(XK(WJ,s)),e.ipv6=s=>e.check(KK(YJ,s)),e.cidrv4=s=>e.check(JK(XJ,s)),e.cidrv6=s=>e.check(eJ(KJ,s)),e.e164=s=>e.check(nJ(tee,s)),e.datetime=s=>e.check(CJ(s)),e.date=s=>e.check(AJ(s)),e.time=s=>e.check(TJ(s)),e.duration=s=>e.check(DJ(s))});function cs(e){return OK(IJ,e)}const ht=W("ZodStringFormat",(e,t)=>{ct.init(e,t),$R.init(e,t)}),$J=W("ZodEmail",(e,t)=>{QX.init(e,t),ht.init(e,t)}),fj=W("ZodGUID",(e,t)=>{VX.init(e,t),ht.init(e,t)}),Rd=W("ZodUUID",(e,t)=>{qX.init(e,t),ht.init(e,t)}),FJ=W("ZodURL",(e,t)=>{ZX.init(e,t),ht.init(e,t)}),HJ=W("ZodEmoji",(e,t)=>{WX.init(e,t),ht.init(e,t)}),UJ=W("ZodNanoID",(e,t)=>{YX.init(e,t),ht.init(e,t)}),GJ=W("ZodCUID",(e,t)=>{XX.init(e,t),ht.init(e,t)}),VJ=W("ZodCUID2",(e,t)=>{KX.init(e,t),ht.init(e,t)}),qJ=W("ZodULID",(e,t)=>{JX.init(e,t),ht.init(e,t)}),QJ=W("ZodXID",(e,t)=>{eK.init(e,t),ht.init(e,t)}),ZJ=W("ZodKSUID",(e,t)=>{tK.init(e,t),ht.init(e,t)}),WJ=W("ZodIPv4",(e,t)=>{iK.init(e,t),ht.init(e,t)}),YJ=W("ZodIPv6",(e,t)=>{oK.init(e,t),ht.init(e,t)}),XJ=W("ZodCIDRv4",(e,t)=>{lK.init(e,t),ht.init(e,t)}),KJ=W("ZodCIDRv6",(e,t)=>{cK.init(e,t),ht.init(e,t)}),JJ=W("ZodBase64",(e,t)=>{uK.init(e,t),ht.init(e,t)}),eee=W("ZodBase64URL",(e,t)=>{fK.init(e,t),ht.init(e,t)}),tee=W("ZodE164",(e,t)=>{mK.init(e,t),ht.init(e,t)}),see=W("ZodJWT",(e,t)=>{gK.init(e,t),ht.init(e,t)}),FR=W("ZodNumber",(e,t)=>{OR.init(e,t),Tt.init(e,t),e.gt=(n,a)=>e.check(uj(n,a)),e.gte=(n,a)=>e.check(Rg(n,a)),e.min=(n,a)=>e.check(Rg(n,a)),e.lt=(n,a)=>e.check(cj(n,a)),e.lte=(n,a)=>e.check(Ag(n,a)),e.max=(n,a)=>e.check(Ag(n,a)),e.int=n=>e.check(mj(n)),e.safe=n=>e.check(mj(n)),e.positive=n=>e.check(uj(0,n)),e.nonnegative=n=>e.check(Rg(0,n)),e.negative=n=>e.check(cj(0,n)),e.nonpositive=n=>e.check(Ag(0,n)),e.multipleOf=(n,a)=>e.check(dj(n,a)),e.step=(n,a)=>e.check(dj(n,a)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function gi(e){return cJ(FR,e)}const nee=W("ZodNumberFormat",(e,t)=>{pK.init(e,t),FR.init(e,t)});function mj(e){return uJ(nee,e)}const aee=W("ZodBoolean",(e,t)=>{xK.init(e,t),Tt.init(e,t)});function ree(e){return dJ(aee,e)}const iee=W("ZodUnknown",(e,t)=>{yK.init(e,t),Tt.init(e,t)});function hj(){return fJ(iee)}const oee=W("ZodNever",(e,t)=>{vK.init(e,t),Tt.init(e,t)});function lee(e){return mJ(oee,e)}const cee=W("ZodArray",(e,t)=>{bK.init(e,t),Tt.init(e,t),e.element=t.element,e.min=(s,n)=>e.check(Wf(s,n)),e.nonempty=s=>e.check(Wf(1,s)),e.max=(s,n)=>e.check(BR(s,n)),e.length=(s,n)=>e.check(IR(s,n)),e.unwrap=()=>e.element});function Pi(e,t){return kJ(cee,e,t)}const uee=W("ZodObject",(e,t)=>{wK.init(e,t),Tt.init(e,t),tt(e,"shape",()=>t.shape),e.keyof=()=>gee(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:hj()}),e.loose=()=>e.clone({...e._zod.def,catchall:hj()}),e.strict=()=>e.clone({...e._zod.def,catchall:lee()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>ZY(e,s),e.merge=s=>WY(e,s),e.pick=s=>qY(e,s),e.omit=s=>QY(e,s),e.partial=(...s)=>YY(HR,e,s[0]),e.required=(...s)=>XY(UR,e,s[0])});function Za(e,t){const s={type:"object",get shape(){return rv(this,"shape",{...e}),this.shape},...fe(t)};return new uee(s)}const dee=W("ZodUnion",(e,t)=>{NK.init(e,t),Tt.init(e,t),e.options=t.options});function fee(e,t){return new dee({type:"union",options:e,...fe(t)})}const mee=W("ZodIntersection",(e,t)=>{jK.init(e,t),Tt.init(e,t)});function hee(e,t){return new mee({type:"intersection",left:e,right:t})}const dx=W("ZodEnum",(e,t)=>{kK.init(e,t),Tt.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const s=new Set(Object.keys(t.entries));e.extract=(n,a)=>{const i={};for(const o of n)if(s.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new dx({...t,checks:[],...fe(a),entries:i})},e.exclude=(n,a)=>{const i={...t.entries};for(const o of n)if(s.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new dx({...t,checks:[],...fe(a),entries:i})}});function gee(e,t){const s=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new dx({type:"enum",entries:s,...fe(t)})}const pee=W("ZodTransform",(e,t)=>{SK.init(e,t),Tt.init(e,t),e._zod.parse=(s,n)=>{s.addIssue=i=>{if(typeof i=="string")s.issues.push(nu(i,s.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=s.value),o.inst??(o.inst=e),o.continue??(o.continue=!0),s.issues.push(nu(o))}};const a=t.transform(s.value,s);return a instanceof Promise?a.then(i=>(s.value=i,s)):(s.value=a,s)}});function xee(e){return new pee({type:"transform",transform:e})}const HR=W("ZodOptional",(e,t)=>{_K.init(e,t),Tt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function gj(e){return new HR({type:"optional",innerType:e})}const yee=W("ZodNullable",(e,t)=>{CK.init(e,t),Tt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function pj(e){return new yee({type:"nullable",innerType:e})}const vee=W("ZodDefault",(e,t)=>{EK.init(e,t),Tt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function bee(e,t){return new vee({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const wee=W("ZodPrefault",(e,t)=>{AK.init(e,t),Tt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Nee(e,t){return new wee({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const UR=W("ZodNonOptional",(e,t)=>{RK.init(e,t),Tt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function jee(e,t){return new UR({type:"nonoptional",innerType:e,...fe(t)})}const kee=W("ZodCatch",(e,t)=>{TK.init(e,t),Tt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function See(e,t){return new kee({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const _ee=W("ZodPipe",(e,t)=>{MK.init(e,t),Tt.init(e,t),e.in=t.in,e.out=t.out});function xj(e,t){return new _ee({type:"pipe",in:e,out:t})}const Cee=W("ZodReadonly",(e,t)=>{DK.init(e,t),Tt.init(e,t)});function Eee(e){return new Cee({type:"readonly",innerType:e})}const Aee=W("ZodCustom",(e,t)=>{PK.init(e,t),Tt.init(e,t)});function Ree(e){const t=new Ss({check:"custom"});return t._zod.check=e,t}function Tee(e,t={}){return SJ(Aee,e,t)}function Mee(e){const t=Ree(s=>(s.addIssue=n=>{if(typeof n=="string")s.issues.push(nu(n,s.value,t._zod.def));else{const a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=s.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),s.issues.push(nu(a))}},e(s.value,s)));return t}const Dee=Za({type:cs(),id:cs()}),Pee=Za({skill:cs(),level:gi()}),Lee=Za({skillLevel:Pee.optional(),items:Pi(Dee).optional()}),zee=Za({base:cs(),subtext:cs()}),Oee=Za({rank:gi(),edid:cs(),name:cs(),description:zee,prerequisites:Lee}),Bee=Za({x:gi(),y:gi(),horizontal:gi(),vertical:gi()}),Iee=Za({parents:Pi(cs()),children:Pi(cs())}),$ee=Za({edid:cs(),name:cs(),ranks:Pi(Oee),totalRanks:gi(),connections:Iee,isRoot:ree(),position:Bee}),Fee=Za({treeId:cs(),treeName:cs(),treeDescription:cs(),category:cs(),perks:Pi($ee)});Pi(Fee);function Hee(e){return e.length===0?{minX:0,maxX:0,minY:0,maxY:0}:e.reduce((t,s)=>({minX:Math.min(t.minX,s.x),maxX:Math.max(t.maxX,s.x),minY:Math.min(t.minY,s.y),maxY:Math.max(t.maxY,s.y)}),{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0})}const Uee=(e,t)=>({perkNode:s=>r.jsx(JA,{...s,onTogglePerk:e,onRankChange:t})}),Tg={cellWidth:240,cellHeight:140,nodeWidth:140,nodeHeight:80,gridGap:40,padding:80};function Gee(e,t,s){const{x:n,y:a,horizontal:i,vertical:o}=e,l=t.maxX-n+t.minX,c=-i,u=t.maxY-a+t.minY,d=-o,f=(l-t.minX)*s.cellWidth+(l-t.minX)*s.gridGap+s.padding+s.cellWidth/2,m=(u-t.minY)*s.cellHeight+(u-t.minY)*s.gridGap+s.padding+s.cellHeight/2,g=c*(s.cellWidth/2-s.nodeWidth/2),b=d*(s.cellHeight/2-s.nodeHeight/2),y=f+g,v=m+b;return{x:y,y:v,gridX:l,gridY:u,horizontal:c,vertical:d}}function Vee(e,t,s,n){const a=e-n.padding,i=t-n.padding,o=Math.floor(a/(n.cellWidth+n.gridGap)),l=Math.floor(i/(n.cellHeight+n.gridGap)),c=o*n.cellWidth+o*n.gridGap+n.padding+n.cellWidth/2,u=l*n.cellHeight+l*n.gridGap+n.padding+n.cellHeight/2,d=e-c,f=t-u,m=n.cellWidth/2-n.nodeWidth/2,g=n.cellHeight/2-n.nodeHeight/2,b=Math.max(-1,Math.min(1,d/m)),y=Math.max(-1,Math.min(1,f/g)),v=s.maxX-o+s.minX,p=s.maxY-l+s.minY,x=-b,w=-y;return{x:e,y:t,gridX:v,gridY:p,horizontal:x,vertical:w}}function qee(e,t,s){const n=Math.ceil(Math.sqrt(t)),a=Math.floor(e/n),i=e%n,o=i*(s.cellWidth+s.gridGap)+s.padding+s.cellWidth/2,l=a*(s.cellHeight+s.gridGap)+s.padding+s.cellHeight/2;return{x:o,y:l,gridX:i,gridY:a,horizontal:0,vertical:0}}function Qee({tree:e,onTogglePerk:t,onRankChange:s,selectedPerks:n,className:a}){const[i,o]=z.useState(null),[l,c]=h.useState(new Map),[u,d]=h.useState(!1),[f,m]=h.useState(!1),[g,b]=h.useState(null),y=h.useMemo(()=>{if(!e)return null;const P=XA(e);return P.success?P.data:(console.error("Invalid perk tree data:",P.error),null)},[e]);z.useEffect(()=>{if(!y){c(new Map);return}d(!0),KA(y.treeId).then(P=>{if(P){const B=bN(y.treeId,P);c(B)}else c(new Map)}).catch(P=>{c(new Map)}).finally(()=>{d(!1)})},[y==null?void 0:y.treeId]);const v=h.useMemo(()=>Uee(t,s),[t,s]),p=h.useMemo(()=>{if(!y||u)return new Map;const P=new Map,B=y.perks.map(I=>I.position).filter(I=>I!==void 0);let L={minX:0,maxX:0,minY:0,maxY:0};B.length>0&&(L=Hee(B)),b(L);let D=0;return y.perks.forEach(I=>{const F=l.get(I.edid);if(F){P.set(I.edid,F);return}if(I.position){const H=Gee(I.position,L,Tg);P.set(I.edid,H);return}const U=qee(D,y.perks.length,Tg);P.set(I.edid,U),D++}),P},[y,l,u]),x=h.useMemo(()=>{if(!y)return{saved:0,avif:0,default:0,total:0};let P=0,B=0,L=0;return y.perks.find(D=>D.edid==="LoreRimTrapper_Rank1"),y.perks.find(D=>D.edid==="LoreRimTrapper_Rank2"),y.perks.find(D=>D.edid==="LoreRimTrapper_Rank3"),y.perks.forEach(D=>{l.get(D.edid)?P++:D.position?B++:L++}),{saved:P,avif:B,default:L,total:y.perks.length}},[y,l]),w=h.useMemo(()=>!y||u?[]:y.perks.map(B=>{var H,Z,K,ue;const L=B.edid,D=p.get(L)||{x:0,y:0},I=((Z=(H=B.connections)==null?void 0:H.children)==null?void 0:Z.length)>0||!1,F=((ue=(K=B.connections)==null?void 0:K.parents)==null?void 0:ue.length)===0||!1,U=!l.get(L)&&!B.position;return{id:L,type:"perkNode",position:{x:D.x,y:D.y},draggable:f||U,data:{...B,selected:!1,hasChildren:I,isRoot:F,hasNoPosition:U}}}),[y,p,f,u,l]),N=h.useMemo(()=>{if(!y)return[];const P=[];return y.perks.forEach(B=>{var D;const L=B.edid;(D=B.connections)!=null&&D.children&&B.connections.children.forEach(I=>{if(I===L)return;y.perks.some(U=>U.edid===I)&&P.push({id:`${L}-${I}`,source:L,target:I,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),P},[y]),[j,_,k]=VA(w),[A,S,C]=qA(N);z.useEffect(()=>{_(w)},[w,_]),z.useEffect(()=>{y&&_(P=>P.map(B=>{const L=n.find(I=>I.edid===B.id),D=L!==void 0;return{...B,draggable:f,data:{...B.data,selected:D,currentRank:(L==null?void 0:L.currentRank)||0}}}))},[n,_,y,f]),z.useEffect(()=>{S(N)},[N,S]),z.useEffect(()=>{y&&j.length>0&&i&&setTimeout(()=>{i.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[y==null?void 0:y.treeId,i]);const M=h.useCallback(P=>S(B=>Hy(P,B)),[S]),E=h.useCallback((P,B)=>{if(!f||!g)return;const L=Vee(B.position.x,B.position.y,g,Tg),D=new Map(l);D.set(B.id,L),c(D)},[f,l,g]),R=h.useCallback(()=>{if(!y)return;const P=TZ(y,p);MZ(P)},[y,p]),T=h.useCallback(P=>{var D;const B=(D=P.target.files)==null?void 0:D[0];if(!B||!y)return;const L=new FileReader;L.onload=I=>{var F;try{const U=JSON.parse((F=I.target)==null?void 0:F.result);if(U.treeId===y.treeId){const H=bN(y.treeId,U);c(H)}else alert("Position file does not match current tree!")}catch(U){alert("Error loading position file!"),console.error("Error loading positions:",U)}},L.readAsText(B)},[y]),O=h.useCallback(()=>{m(!f)},[f]);return y?r.jsxs("div",{className:`w-full h-full bg-background rounded-lg border overflow-auto ${a||""}`,children:[r.jsx("div",{className:"p-4 border-b bg-muted/20",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Experimental AVIF Grid Canvas (Mirrored + Enhanced Spacing)"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Bottom-up tree with left-right mirroring using enhanced grid spacing",l.size>0&&!u&&r.jsx("span",{className:"text-green-600 ml-2",children:"â€¢ Using saved positions"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[u&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 text-xs text-blue-600",children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),"Loading positions..."]}),!u&&x.total>0&&r.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 text-xs bg-muted/30 rounded border",children:[r.jsxs("span",{className:"text-green-600",children:["Saved: ",x.saved]}),r.jsxs("span",{className:"text-blue-600",children:["AVIF: ",x.avif]}),r.jsxs("span",{className:"text-red-600",children:["Default: ",x.default]}),r.jsxs("span",{className:"text-muted-foreground",children:["Total: ",x.total]})]}),r.jsx("button",{onClick:O,className:`px-3 py-1 text-xs rounded border ${f?"bg-blue-500 text-white border-blue-500":"bg-background text-foreground border-border hover:bg-muted"}`,children:f?"Exit Edit":"Edit Mode"}),r.jsx("button",{onClick:R,className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted",children:"Save Positions"}),r.jsxs("label",{className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted cursor-pointer",children:["Load Positions",r.jsx("input",{type:"file",accept:".json",onChange:T,className:"hidden"})]})]})]})}),r.jsx("div",{className:"w-full h-full min-h-[400px]",style:{zIndex:_t.CONTENT,position:"relative"},children:r.jsxs(Zy,{nodes:j,edges:A,onNodesChange:k,onEdgesChange:C,onConnect:M,onInit:o,onNodeDragStop:E,nodeTypes:v,nodesDraggable:f,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},onDoubleClick:P=>P.preventDefault(),style:{backgroundColor:"hsl(var(--background))",zIndex:1},children:[r.jsx(YA,{color:"hsl(var(--muted-foreground))",gap:20,size:1,style:{backgroundColor:"hsl(var(--background))"}}),r.jsx(ZA,{})]})})]}):r.jsx("div",{className:`flex items-center justify-center p-8 text-muted-foreground ${a||""}`,children:r.jsx("p",{children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function Zee(){var m;const{skills:e,selectedSkill:t,perkTree:s,selectedPerks:n,availablePerks:a,onSkillSelect:i,onPerkSelect:o,onPerkRankChange:l,loading:c,error:u}=eR(),{build:d}=Ye(),f=h.useMemo(()=>!s||!n.length?[]:n.map(g=>{var v,p;const b=s.perks.find(x=>x.edid===g);if(!b)return null;const y=((p=(v=d.perks)==null?void 0:v.ranks)==null?void 0:p[g])||0;return{...b,selectedRank:y}}).filter(Boolean),[s,n,(m=d.perks)==null?void 0:m.ranks]);return c?r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx("p",{className:"text-muted-foreground",children:"Loading skills..."})}):u?r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("p",{className:"text-destructive",children:["Error loading skills: ",u]})}):r.jsx("div",{className:"container mx-auto p-6 space-y-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Skills - Experimental AVIF Grid"}),r.jsx("p",{className:"text-muted-foreground",children:"Experimental perk tree visualization using AVIF coordinate system"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("label",{className:"text-sm font-medium",children:"Select Skill:"}),r.jsxs(Zi,{children:[r.jsx(Wi,{asChild:!0,children:r.jsxs(G,{variant:"outline",className:"w-[300px] justify-between",children:[t?t.name:"Choose a skill to view its perk tree",r.jsx(vt,{className:"h-4 w-4"})]})}),r.jsx(Gr,{className:"w-[300px] max-h-[400px] overflow-y-auto",children:e.map(g=>r.jsx(us,{onClick:()=>i(g.id),className:"cursor-pointer",children:g.name},g.id))})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold mb-3",children:t?`${t.name} Perk Tree`:"Perk Tree"}),r.jsx("div",{className:"bg-background border rounded-lg h-[600px]",children:r.jsx(Qee,{tree:s||void 0,onTogglePerk:o,onRankChange:l,selectedPerks:f,className:"h-full"})})]}),t&&s&&r.jsxs("div",{className:"bg-muted/20 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-sm font-medium mb-2",children:"Debug Information"}),r.jsxs("div",{className:"text-xs space-y-1 text-muted-foreground",children:[r.jsxs("p",{children:["Selected Skill: ",t.name]}),r.jsxs("p",{children:["Perk Tree: ",s.treeName]}),r.jsxs("p",{children:["Total Perks: ",s.perks.length]}),r.jsxs("p",{children:["Selected Perks: ",n.length]}),r.jsxs("p",{children:["Available Perks: ",a.length]}),r.jsxs("p",{children:["Perks with Position Data:"," ",s.perks.filter(g=>g.position).length]}),s.perks.length>0&&s.perks[0].position&&r.jsxs("p",{children:["Sample Position: X=",s.perks[0].position.x,", Y=",s.perks[0].position.y,", H=",s.perks[0].position.horizontal,", V=",s.perks[0].position.vertical]})]})]})]})]})})}function Wee(e={}){const{autoLoad:t=!0,refreshOnMount:s=!1}=e,{data:n,loading:a,error:i,load:o}=bo(),l=h.useCallback(async()=>{t&&n.length===0&&await o()},[t,n.length,o]),c=h.useCallback(async()=>{await o()},[o]),u=h.useCallback(()=>{},[]);h.useEffect(()=>{t&&n.length===0&&l()},[t,n.length,l]),h.useEffect(()=>{s&&c()},[s,c]);const d=n.length,f=[...new Set(n.map(x=>x.school).filter(Boolean))],m=[...new Set(n.map(x=>x.level).filter(Boolean))],g=new Date().toISOString(),b=n.length>0?{spells:n,totalCount:d,schools:f,levels:m,lastUpdated:g}:null,y=h.useCallback(x=>bo.getState().getByEditorId(x),[]),v=h.useCallback(x=>bo.getState().getBySchool(x),[]),p=h.useCallback(x=>bo.getState().getByLevel(x),[]);return{spells:n,spellData:b,loading:a,error:i,totalCount:d,schools:f,levels:m,lastUpdated:g,loadSpells:l,refresh:c,clearError:u,getSpellByEditorId:y,getSpellsBySchool:v,getSpellsByLevel:p}}function Yee(){const[e,t]=h.useState(null),[s,n]=h.useState("grid");return{selectedSpell:e,viewMode:s,setSelectedSpell:t,setViewMode:n}}const yj=50;function Xee(e){const[t,s]=h.useState(1),n=h.useRef([]),a=h.useMemo(()=>{const u=t*yj;return e.slice(0,u)},[e,t]);h.useEffect(()=>{const u=n.current;(u.length!==e.length||e.some((f,m)=>{var g;return f.name!==((g=u[m])==null?void 0:g.name)}))&&(s(1),n.current=e)},[e]);const i=h.useMemo(()=>a.length<e.length,[a.length,e.length]),o=h.useCallback(()=>{i&&s(u=>u+1)},[i]),l=h.useCallback(()=>{s(1)},[]),c=h.useMemo(()=>({displayedItems:a.length,totalItems:e.length,hasMore:i,currentPage:t,itemsPerPage:yj}),[a.length,e.length,i,t]);return{displayedItems:a,loadMore:o,resetPagination:l,paginationInfo:c,hasMore:i}}const Kee="bg-white dark:bg-white";function Jee({school:e,size:t="md",className:s}){const n=UN[e]||UN.Mysticism;return r.jsx("div",{className:$("flex items-center justify-center rounded-full overflow-hidden",Kee,vY[t],s),title:`${e} magic`,children:r.jsx(n,{className:"w-full h-full object-contain text-black dark:text-black"})})}const ete={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"};function GR({school:e,size:t="md",variant:s="default",className:n}){const a=yY[e]||"bg-gray-500 text-white";return r.jsx("span",{className:$("inline-flex items-center rounded-full font-medium",bY[t],s==="default"?a:ete[s],n),children:e})}const tte={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},ste={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"},nte={Novice:"bg-gray-500 text-white",Apprentice:"bg-green-500 text-white",Adept:"bg-blue-500 text-white",Expert:"bg-purple-500 text-white",Master:"bg-yellow-500 text-black"},ate={Novice:1,Apprentice:2,Adept:3,Expert:4,Master:5};function VR({level:e,size:t="md",variant:s="default",className:n}){const a=nte[e]||"bg-gray-500 text-white";return r.jsx("span",{className:$("inline-flex items-center rounded-full font-medium",tte[t],s==="default"?a:ste[s],n),title:`Level ${ate[e]||0}`,children:e})}const rte={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},ite={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"},ote=e=>e===0?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":e<=25?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":e<=50?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":e<=100?"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400";function qR({cost:e,size:t="md",variant:s="default",showIcon:n=!0,className:a}){const i=ote(e),o=t==="sm"?"h-3 w-3":t==="lg"?"h-4 w-4":"h-3.5 w-3.5";return r.jsxs("span",{className:$("inline-flex items-center gap-1 rounded-full font-medium",rte[t],s==="default"?i:ite[s],a),title:`${e} Magicka`,children:[n&&r.jsx(St,{className:o}),e===0?"Free":e]})}function lte({stats:e,title:t="Spell Stats",compact:s=!1,className:n}){return!(e.duration!==void 0||e.area!==void 0||e.magnitude!==void 0)&&e.magickaCost===0?null:r.jsxs("div",{className:$("space-y-2",n),children:[t&&r.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:t}),r.jsxs("div",{className:$("grid gap-2",s?"grid-cols-2":"grid-cols-1"),children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(St,{className:"h-4 w-4 text-yellow-500"}),r.jsx("span",{className:"font-medium",children:e.magickaCost===0?"Free":`${e.magickaCost} MP`})]}),e.duration!==void 0&&e.duration>0&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx($n,{className:"h-4 w-4 text-blue-500"}),r.jsxs("span",{className:"font-medium",children:[e.duration,"s"]})]}),e.area!==void 0&&e.area>0&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(tn,{className:"h-4 w-4 text-green-500"}),r.jsxs("span",{className:"font-medium",children:[e.area,"ft"]})]}),e.magnitude!==void 0&&e.magnitude>0&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"h-4 w-4 text-purple-500 font-bold",children:"âš¡"}),r.jsx("span",{className:"font-medium",children:e.magnitude})]})]})]})}function cte({tags:e,title:t="Tags",compact:s=!1,maxDisplay:n=5,className:a}){if(!e||e.length===0)return null;const i=e.slice(0,n),o=e.length>n;return r.jsxs("div",{className:$("space-y-2",a),children:[t&&r.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[r.jsx(tk,{className:"h-4 w-4"}),t,e.length>1&&r.jsxs("span",{className:"text-xs text-muted-foreground/70",children:["(",e.length,")"]})]}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.map((l,c)=>r.jsx("span",{className:$("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium","bg-muted text-muted-foreground border border-border/50",s?"text-xs":"text-sm"),children:l},c)),o&&r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-muted/50 text-muted-foreground/70",children:["+",e.length-n]})]})]})}function QR({spell:e,onClick:t,className:s,compact:n=!1}){const a=(i,o)=>{var l,c,u;return i.replace(/<mag>/gi,((l=o.magnitude)==null?void 0:l.toString())||"0").replace(/<dur>/gi,((c=o.duration)==null?void 0:c.toString())||"0").replace(/<area>/gi,((u=o.area)==null?void 0:u.toString())||"0")};return r.jsxs(ae,{className:$("p-6 cursor-pointer hover:shadow-md transition-shadow h-full",s),onClick:t,children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Jee,{school:e.school,size:"2xl"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx(Ce,{className:"text-foreground font-semibold",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(GR,{school:e.school,size:"sm"}),r.jsx(VR,{level:e.level,size:"sm"}),r.jsx(qR,{cost:e.magickaCost,size:"sm"})]})]})]})}),e.effects&&e.effects.filter(i=>i.description).length>0&&r.jsxs("div",{children:[r.jsx(Aa,{className:"text-muted-foreground mb-2",children:"Effects"}),r.jsx("div",{className:"space-y-2",children:e.effects.filter(i=>i.description).map((i,o)=>r.jsxs("div",{className:"p-2 rounded bg-muted border text-sm",children:[r.jsx(we,{text:a(i.description,i),options:B0(),className:"text-muted-foreground"}),r.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground mt-1",children:[i.magnitude>0&&r.jsxs("span",{children:["Magnitude: ",i.magnitude]}),i.duration>0&&r.jsxs("span",{children:["Duration: ",i.duration,"s"]}),i.area>0&&r.jsxs("span",{children:["Area: ",i.area,"ft"]})]})]},o))})]})]})}function ute({spells:e,variant:t="default",showEffects:s=!0,showTags:n=!0,className:a="",onSpellClick:i}){return e.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-muted-foreground",children:"No spells found"})}):r.jsx("div",{className:`space-y-4 ${a}`,children:e.map((o,l)=>r.jsx(QR,{spell:o,onClick:()=>i==null?void 0:i(o),compact:t==="compact"},`${o.name}-${o.editorId}-${l}`))})}function dte({spells:e,loadMore:t,hasMore:s=!0,columns:n=3,gap:a=12,maxColumnWidth:i,className:o="",variant:l="default",onSpellClick:c}){const[u,d]=h.useState(0),f=h.useRef(null),m=h.useRef(null),g=h.useCallback(()=>i&&u>0?Math.max(1,Math.floor(u/i)):u<768?1:u<1024?2:u<1280?3:4,[n,i,u]);h.useEffect(()=>{const y=()=>{f.current&&d(f.current.offsetWidth)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),h.useEffect(()=>{if(!t||!s||!m.current)return;const y=new IntersectionObserver(v=>{v.forEach(p=>{p.isIntersecting&&t&&t()})},{threshold:.1,rootMargin:"0px 0px 4000px 0px"});return y.observe(m.current),()=>y.disconnect()},[t,s]);const b=h.useCallback(()=>{const y=g();return r.jsx("div",{className:"w-full",style:{display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,gap:`${a}px`},children:e.map(v=>r.jsx(QR,{spell:v,compact:l==="compact",onClick:()=>c==null?void 0:c(v),className:"w-full h-full"},v.name))})},[e,g,a,l,c]);return e.length===0?r.jsx("div",{className:`text-center py-12 ${o}`,children:r.jsx("p",{className:"text-muted-foreground",children:"No spells to display"})}):r.jsxs("div",{ref:f,className:o,children:[b(),s&&t&&r.jsx("div",{ref:m,className:"w-full h-16 mt-16",style:{minHeight:"64px"}})]})}const fte={Destruction:Rl,Restoration:Yn,Conjuration:g0,Illusion:Al,Alteration:rt,"":yn};function mte({spell:e,isOpen:t,onOpenChange:s}){var a;if(!e)return null;const n=fte[e.school]||yn;return r.jsx(Yi,{open:t,onOpenChange:s,side:"right",title:e.name,description:`${e.school} â€¢ ${e.level} â€¢ ${e.magickaCost} MP`,children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(n,{className:"w-16 h-16 text-muted-foreground"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx(hr,{className:"text-2xl font-bold mb-2",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(GR,{school:e.school,size:"sm"}),r.jsx(VR,{level:e.level,size:"sm"}),r.jsx(qR,{cost:e.magickaCost,size:"sm"})]}),r.jsx(we,{text:e.description})]})]}),r.jsx(li,{}),r.jsx(lte,{stats:{magickaCost:e.magickaCost||0,duration:e.maxDuration&&e.maxDuration>0?e.maxDuration:void 0,area:e.maxArea&&e.maxArea>0?e.maxArea:void 0,magnitude:e.totalMagnitude&&e.totalMagnitude>0?e.totalMagnitude:void 0}}),r.jsx(li,{}),e.hasEffects&&r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg font-semibold mb-3",children:"Effects"}),r.jsx("div",{className:"space-y-2",children:e.effects.filter((i,o,l)=>{const c=i.name.replace(/\s*\(Single\)|\s*\(Dual\)/i,""),u=l.findIndex(d=>d.name.replace(/\s*\(Single\)|\s*\(Dual\)/i,"")===c&&d.magnitude===i.magnitude&&d.duration===i.duration);return o===u}).map((i,o)=>r.jsxs("div",{className:"p-3 rounded bg-muted border",children:[r.jsx("div",{className:"font-medium text-foreground mb-2",children:i.name}),i.description&&r.jsx(we,{text:i.description,className:"text-sm text-muted-foreground mb-2"}),r.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[i.magnitude>0&&r.jsxs("span",{children:["Magnitude: ",i.magnitude]}),i.duration>0&&r.jsxs("span",{children:["Duration: ",i.duration,"s"]}),i.area>0&&r.jsxs("span",{children:["Area: ",i.area,"ft"]})]})]},o))})]}),e.tags&&e.tags.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(li,{}),r.jsx(cte,{tags:e.tags,title:"Tags",maxDisplay:20})]}),(e.tome||((a=e.vendors)==null?void 0:a.length)||e.halfCostPerk)&&r.jsxs(r.Fragment,{children:[r.jsx(li,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ce,{className:"text-lg font-semibold",children:"Additional Information"}),e.tome&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qn,{className:"w-4 h-4 text-muted-foreground"}),r.jsx(Aa,{className:"text-muted-foreground",children:"Spell Tome"})]}),r.jsx(pe,{className:"text-sm",children:e.tome})]}),e.vendors&&e.vendors.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(Aa,{className:"text-muted-foreground",children:"Available From"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.vendors.map((i,o)=>r.jsx(Q,{variant:"outline",className:"text-xs",children:i},o))})]}),e.halfCostPerk&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(St,{className:"w-4 h-4 text-muted-foreground"}),r.jsx(Aa,{className:"text-muted-foreground",children:"Half Cost Perk"})]}),r.jsx(pe,{className:"text-sm",children:e.halfCostPerkName})]})]})]}),r.jsx(li,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ce,{className:"text-lg font-semibold",children:"Game Information"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[r.jsx("span",{className:"font-medium min-w-[60px]",children:"Editor ID:"}),r.jsx("span",{className:"break-all font-mono",children:e.editorId})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[r.jsx("span",{className:"font-medium min-w-[60px]",children:"School:"}),r.jsx("span",{children:e.school})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[r.jsx("span",{className:"font-medium min-w-[60px]",children:"Level:"}),r.jsx("span",{children:e.level})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[r.jsx("span",{className:"font-medium min-w-[60px]",children:"Effects:"}),r.jsx("span",{children:e.effectCount})]})]})]})]})})}function hte(){const{spells:e,loading:t,error:s}=Wee(),{viewMode:n,setViewMode:a}=Yee(),i=Array.isArray(e)?e:[],[o,l]=h.useState(null),[c,u]=h.useState(!1),[d,f]=h.useState("alphabetical"),m=C=>{l(C),u(!0)},g=h.useMemo(()=>{if(i.length===0)return[];const C=[...new Set(i.map(E=>E.school))],M=[...new Set(i.map(E=>E.level))];return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search spells by name, school, level, or effects...",options:[]},{id:"schools",name:"Magic Schools",placeholder:"Filter by school...",options:C.map(E=>({id:`school-${E}`,label:E,value:E,category:"Magic Schools",description:`${E} spells`}))},{id:"levels",name:"Spell Levels",placeholder:"Filter by level...",options:M.map(E=>({id:`level-${E}`,label:E,value:E,category:"Spell Levels",description:`${E} spells`}))}]},[i]),[b,y]=h.useState([]),v=C=>{let M;typeof C=="string"?M={id:`custom-${C}`,label:C,value:C,category:"Fuzzy Search"}:M={id:`${C.category}-${C.id}`,label:C.label,value:C.value,category:C.category},b.some(E=>E.value===M.value&&E.category===M.category)||y(E=>[...E,M])},p=C=>{y(M=>M.filter(E=>E.id!==C))},x=()=>{y([])},w=i.filter(C=>b.length===0?!0:b.every(M=>{switch(M.category){case"Magic Schools":return C.school===M.value;case"Spell Levels":return C.level===M.value;case"Fuzzy Search":const E=M.value.toLowerCase();return C.name.toLowerCase().includes(E)||C.school.toLowerCase().includes(E)||C.level.toLowerCase().includes(E)||C.effects.some(R=>R.description.toLowerCase().includes(E));default:return!0}})),N=h.useMemo(()=>[...w].sort((C,M)=>{switch(d){case"alphabetical":return C.name.localeCompare(M.name);case"school":const E=C.school.localeCompare(M.school);return E!==0?E:C.name.localeCompare(M.name);case"level":const R=GN[C.level]||0,T=GN[M.level]||0;return R!==T?R-T:C.name.localeCompare(M.name);default:return 0}}),[w,d]),{displayedItems:j,loadMore:_,resetPagination:k,paginationInfo:A,hasMore:S}=Xee(N);return h.useEffect(()=>{k()},[b,d,k]),t?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading spells..."})]})}):s?r.jsxs("div",{className:"text-center py-12",children:[r.jsxs("p",{className:"text-destructive mb-4",children:["Error loading spells: ",s]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]}):r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx("div",{className:"flex-1",children:g.length>0?r.jsx(ta,{categories:g,onSelect:v,onCustomSearch:v}):r.jsxs("div",{className:"p-4 border border-dashed border-muted-foreground/20 rounded-lg text-center text-muted-foreground",children:["No search categories available. Spells loaded: ",i.length]})})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(Km,{viewMode:n,onViewModeChange:a}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:d,onChange:C=>f(C.target.value),className:"appearance-none bg-background border border-border rounded-lg px-3 py-1.5 pr-8 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer",children:[r.jsx("option",{value:"alphabetical",children:"Sort: A-Z"}),r.jsx("option",{value:"school",children:"Sort: School"}),r.jsx("option",{value:"level",children:"Sort: Level"})]}),r.jsx(vt,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]})]}),b.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("button",{onClick:x,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[r.jsx("span",{className:"text-lg",children:"Ã—"}),"Clear All"]}),b.map(C=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>p(C.id),title:"Click to remove",children:[C.label,r.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},C.id))]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[A.displayedItems," of ",A.totalItems," spells"]}),r.jsx("div",{children:j.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground",children:"No spells found matching your criteria."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}):r.jsxs(r.Fragment,{children:[n==="grid"&&r.jsx(dte,{spells:j,variant:"default",maxColumnWidth:400,onSpellClick:m,loadMore:_,hasMore:S}),n==="list"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx(ute,{spells:j,variant:"default",onSpellClick:m}),S&&r.jsx("div",{className:"flex justify-center pt-4",children:r.jsxs(G,{variant:"outline",onClick:_,className:"w-full max-w-xs",children:["Load More (",A.displayedItems," of"," ",A.totalItems,")"]})})]})]})}),r.jsx(mte,{spell:o,isOpen:c,onOpenChange:u}),r.jsx(Tu,{threshold:400})]})}function gte(){return r.jsx(Ut,{title:"Spell Reference",description:"Browse and search all available spells. Find the perfect magic for your character build.",children:r.jsx(hte,{})})}const pte=e=>{switch(e){case"alphabetical":return"A-Z";case"category":return"Category";case"effect-count":return"Effect Count";default:return"A-Z"}};function xte(){const{data:e,loading:t,error:s}=WF(),n=e||[],[a,i]=h.useState([]),[o,l]=h.useState("alphabetical"),[c,u]=h.useState("grid");h.useMemo(()=>n.map(_w),[n]);const f=(()=>{const k=rR(n),A=iR(n);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Search by category...",options:k.map(S=>({id:`category-${S}`,label:S,value:S,category:"Categories",description:`Traits in ${S} category`}))},{id:"tags",name:"Tags",placeholder:"Search by tag...",options:A.map(S=>({id:`tag-${S}`,label:S,value:S,category:"Tags",description:`Traits tagged with ${S}`}))}]})(),m=k=>{let A;typeof k=="string"?A={id:`custom-${k}`,label:k,value:k,category:"Fuzzy Search"}:A={id:`${k.category}-${k.id}`,label:k.label,value:k.value,category:k.category},a.some(S=>S.value===A.value&&S.category===A.category)||i(S=>[...S,A])},g=k=>{i(A=>A.filter(S=>S.id!==k))},b=n.filter(k=>a.length===0?!0:a.every(A=>{var S;switch(A.category){case"Fuzzy Search":return!0;case"Categories":return k.category===A.value;case"Tags":return((S=k.tags)==null?void 0:S.some(C=>C===A.value))||!1;default:return!0}})),y=a.filter(k=>k.category==="Fuzzy Search").map(k=>k.value).join(" "),{filteredTraits:v,searchResults:p}=aR(b,y),x=a.some(k=>k.category==="Fuzzy Search"),N=(x?v:b).map(_w),j=n.map(k=>k.id||k.name),_=[...N].sort((k,A)=>{var S,C;if(x&&p.length>0){const M=p.find(R=>R.item.originalTrait.id===k.id||R.item.originalTrait.name===k.name),E=p.find(R=>R.item.originalTrait.id===A.id||R.item.originalTrait.name===A.name);return M&&E?(M.score??1)-(E.score??1):M&&!E?-1:!M&&E?1:k.name.localeCompare(A.name)}switch(o){case"alphabetical":return k.name.localeCompare(A.name);case"category":const M=P=>{switch(P){case"Combat":return 1;case"Magic":return 2;case"Stealth":return 3;case"Social":return 4;case"Survival":return 5;default:return 6}},E=M(k.category),R=M(A.category);return E!==R?E-R:k.name.localeCompare(A.name);case"effect-count":const T=((S=k.effects)==null?void 0:S.length)||0,O=((C=A.effects)==null?void 0:C.length)||0;return T!==O?O-T:k.name.localeCompare(A.name);default:return 0}});return t?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading traits..."})]})}):s?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-destructive mb-4",children:s}),r.jsx("p",{className:"text-muted-foreground",children:"Please refresh the page to try again."})]})}):r.jsxs(Ut,{title:"Traits",description:"Choose your character's traits. Traits provide unique abilities and modifiers that will shape your character's capabilities throughout their journey.",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx("div",{className:"flex-1",children:r.jsx(ta,{categories:f,onSelect:m,onCustomSearch:m})})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(G,{variant:c==="grid"?"default":"outline",size:"sm",onClick:()=>u("grid"),className:"flex items-center gap-2",children:[r.jsx($i,{className:"h-4 w-4"}),"Grid"]}),r.jsxs(G,{variant:c==="list"?"default":"outline",size:"sm",onClick:()=>u("list"),className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-4 w-4"}),"List"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(Zi,{children:[r.jsx(Wi,{asChild:!0,children:r.jsxs(G,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort: ",pte(o),r.jsx(vt,{className:"h-4 w-4"})]})}),r.jsxs(Gr,{align:"end",children:[r.jsx(us,{onClick:()=>l("alphabetical"),children:"Alphabetical"}),r.jsx(us,{onClick:()=>l("category"),children:"Category"}),r.jsx(us,{onClick:()=>l("effect-count"),children:"Effect Count"})]})]})})]}),r.jsx("div",{className:"my-4",children:a.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("button",{onClick:()=>i([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[r.jsx(ze,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),a.map(k=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>g(k.id),title:"Click to remove",children:[k.label,r.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},k.id))]})}),c==="grid"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:_.map(k=>r.jsx(NN,{item:k,className:"w-full",allTraitIds:j},k.id))}):r.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:_.map(k=>r.jsx(NN,{item:k,className:"w-full",allTraitIds:j},k.id))}),_.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground",children:"No traits found matching your criteria."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]})}const yte=P0,vte=L0,ZR=h.forwardRef(({className:e,...t},s)=>r.jsx(Nu,{ref:s,className:$("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{zIndex:_t.MODAL},...t}));ZR.displayName=Nu.displayName;const WR=h.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(vte,{children:[r.jsx(ZR,{}),r.jsxs(ju,{ref:n,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),style:{zIndex:_t.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[t,r.jsxs(kS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(ze,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));WR.displayName=ju.displayName;const YR=({className:e,...t})=>r.jsx("div",{className:$("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});YR.displayName="DialogHeader";const XR=h.forwardRef(({className:e,...t},s)=>r.jsx(ku,{ref:s,className:$("text-lg font-semibold leading-none tracking-tight",e),...t}));XR.displayName=ku.displayName;const KR=h.forwardRef(({className:e,...t},s)=>r.jsx(Su,{ref:s,className:$("text-sm text-muted-foreground",e),...t}));KR.displayName=Su.displayName;const bte=Ml("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),tf=h.forwardRef(({className:e,variant:t,...s},n)=>r.jsx("div",{ref:n,role:"alert",className:$(bte({variant:t}),e),...s}));tf.displayName="Alert";const wte=h.forwardRef(({className:e,...t},s)=>r.jsx("h5",{ref:s,className:$("mb-1 font-medium leading-none tracking-tight",e),...t}));wte.displayName="AlertTitle";const sf=h.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:$("text-sm [&_p]:leading-relaxed",e),...t}));sf.displayName="AlertDescription";class Nte{constructor(){Re(this,"cache",new Map)}async loadRaces(){const t="races";if(this.cache.has(t))return this.cache.get(t);try{const s=await fetch("/data/gigaplanner/races.json");if(!s.ok)throw new Error(`Failed to load races data: ${s.status} ${s.statusText}`);const n=await s.json();if(!Array.isArray(n))throw new Error("Races data is not an array");for(const a of n){if(!a.id||!a.name||!a.edid)throw new Error(`Invalid race data: missing required fields for ${a.name||"unknown"}`);if(!Array.isArray(a.startingHMS)||a.startingHMS.length!==3)throw new Error(`Invalid race data: startingHMS must be array of 3 numbers for ${a.name}`);if(!Array.isArray(a.startingSkills)||a.startingSkills.length!==20)throw new Error(`Invalid race data: startingSkills must be array of 20 numbers for ${a.name}`)}return this.cache.set(t,n),n}catch(s){throw console.error("Error loading races data:",s),new Error(`Failed to load races data: ${s instanceof Error?s.message:"Unknown error"}`)}}async loadStandingStones(){const t="standingStones";if(this.cache.has(t))return this.cache.get(t);try{const s=await fetch("/data/gigaplanner/standingStones.json");if(!s.ok)throw new Error(`Failed to load standing stones data: ${s.status} ${s.statusText}`);const n=await s.json();if(!Array.isArray(n))throw new Error("Standing stones data is not an array");for(const a of n)if(!a.id||!a.name)throw new Error(`Invalid standing stone data: missing required fields for ${a.name||"unknown"}`);return this.cache.set(t,n),n}catch(s){throw console.error("Error loading standing stones data:",s),new Error(`Failed to load standing stones data: ${s instanceof Error?s.message:"Unknown error"}`)}}async loadBlessings(){const t="blessings";if(this.cache.has(t))return this.cache.get(t);try{const s=await fetch("/data/gigaplanner/blessings.json");if(!s.ok)throw new Error(`Failed to load blessings data: ${s.status} ${s.statusText}`);const n=await s.json();if(!Array.isArray(n))throw new Error("Blessings data is not an array");for(const a of n)if(typeof a!="string")throw new Error(`Invalid blessing data: all entries must be strings, got ${typeof a}`);return this.cache.set(t,n),n}catch(s){throw console.error("Error loading blessings data:",s),new Error(`Failed to load blessings data: ${s instanceof Error?s.message:"Unknown error"}`)}}async loadGameMechanics(){const t="gameMechanics";if(this.cache.has(t))return this.cache.get(t);try{const s=await fetch("/data/gigaplanner/gameMechanics.json");if(!s.ok)throw new Error(`Failed to load game mechanics data: ${s.status} ${s.statusText}`);const n=await s.json();if(!Array.isArray(n))throw new Error("Game mechanics data is not an array");for(const a of n){if(!a.id||!a.name||a.gameId===void 0)throw new Error(`Invalid game mechanics data: missing required fields for ${a.name||"unknown"}`);if(!a.derivedAttributes||!a.derivedAttributes.attribute)throw new Error(`Invalid game mechanics data: missing derivedAttributes for ${a.name}`);const{derivedAttributes:i}=a,o=i.attribute.length;if(i.isPercent.length!==o||i.prefactor.length!==o||i.threshold.length!==o||i.weight_health.length!==o||i.weight_magicka.length!==o||i.weight_stamina.length!==o)throw new Error(`Invalid game mechanics data: derivedAttributes arrays have inconsistent lengths for ${a.name}`)}return this.cache.set(t,n),n}catch(s){throw console.error("Error loading game mechanics data:",s),new Error(`Failed to load game mechanics data: ${s instanceof Error?s.message:"Unknown error"}`)}}async loadPresets(){const t="presets";if(this.cache.has(t))return this.cache.get(t);try{const s=await fetch("/data/gigaplanner/presets.json");if(!s.ok)throw new Error(`Failed to load presets data: ${s.status} ${s.statusText}`);const n=await s.json();if(!Array.isArray(n))throw new Error("Presets data is not an array");for(const a of n){if(!a.id||!a.name||a.presetId===void 0)throw new Error(`Invalid preset data: missing required fields for ${a.name||"unknown"}`);if(typeof a.perks!="number"||typeof a.races!="number"||typeof a.gameMechanics!="number"||typeof a.blessings!="number")throw new Error(`Invalid preset data: reference fields must be numbers for ${a.name}`);if(!a.version||!a.version.match(/^\d+\.\d+\.\d+$/))throw new Error(`Invalid preset data: version must be in format x.y.z for ${a.name}`)}return this.cache.set(t,n),n}catch(s){throw console.error("Error loading presets data:",s),new Error(`Failed to load presets data: ${s instanceof Error?s.message:"Unknown error"}`)}}async loadPerks(){const t="perks";if(this.cache.has(t))return this.cache.get(t);try{const s=await fetch("/data/gigaplanner/perks.json");if(!s.ok)throw new Error(`Failed to load perks data: ${s.status} ${s.statusText}`);const n=await s.json();if(!n||typeof n!="object")throw new Error("Perks data is not an object");if(!n.id||!n.name||n.perkListId===void 0)throw new Error("Invalid perks data: missing required fields");if(!Array.isArray(n.skillNames)||n.skillNames.length===0)throw new Error("Invalid perks data: skillNames must be a non-empty array");if(!Array.isArray(n.perks)||n.perks.length===0)throw new Error("Invalid perks data: perks must be a non-empty array");for(const a of n.perks){if(!a.id||!a.name||!a.skill||a.skillReq===void 0)throw new Error(`Invalid perk data: missing required fields for ${a.name||"unknown"}`);if(!n.skillNames.includes(a.skill))throw new Error(`Invalid perk data: skill '${a.skill}' not found in skillNames for ${a.name}`);if(!Array.isArray(a.prerequisites))throw new Error(`Invalid perk data: prerequisites must be an array for ${a.name}`)}return this.cache.set(t,[n]),[n]}catch(s){throw console.error("Error loading perks data:",s),new Error(`Failed to load perks data: ${s instanceof Error?s.message:"Unknown error"}`)}}async loadAllData(){const[t,s,n,a,i,o]=await Promise.all([this.loadRaces(),this.loadStandingStones(),this.loadBlessings(),this.loadGameMechanics(),this.loadPresets(),this.loadPerks()]);return{races:t,standingStones:s,blessings:n,gameMechanics:a,presets:i,perks:o}}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}class jte{constructor(){Re(this,"dataLoader");Re(this,"data",null);Re(this,"lookupMaps",{});this.dataLoader=new Nte}async initialize(){try{this.data=await this.dataLoader.loadAllData(),this.createLookupMaps()}catch(t){throw new Error(`Failed to initialize GigaPlannerConverter: ${t}`)}}createLookupMaps(){if(!this.data)throw new Error("Data not loaded. Call initialize() first.");this.lookupMaps.raceNameToId={},this.lookupMaps.raceIdToName={},this.data.races.forEach((t,s)=>{this.lookupMaps.raceNameToId[t.name]=s,this.lookupMaps.raceIdToName[s]=t.name}),this.lookupMaps.stoneNameToId={},this.lookupMaps.stoneIdToName={},this.data.standingStones.forEach((t,s)=>{this.lookupMaps.stoneNameToId[t.name]=s,this.lookupMaps.stoneIdToName[s]=t.name}),this.lookupMaps.blessingNameToId={},this.lookupMaps.blessingIdToName={},this.data.blessings.forEach((t,s)=>{this.lookupMaps.blessingNameToId[t]=s,this.lookupMaps.blessingIdToName[s]=t}),this.lookupMaps.perkListNameToId={},this.lookupMaps.perkListIdToName={},this.data.perks.forEach(t=>{this.lookupMaps.perkListNameToId[t.name]=t.perkListId,this.lookupMaps.perkListIdToName[t.perkListId]=t.name}),this.lookupMaps.mechanicsNameToId={},this.lookupMaps.mechanicsIdToName={},this.data.gameMechanics.forEach(t=>{this.lookupMaps.mechanicsNameToId[t.name]=t.id,this.lookupMaps.mechanicsIdToName[t.id]=t.name})}decodeUrl(t){try{const s=new URL(t),n=s.searchParams.get("b"),a=s.searchParams.get("p");if(!n)return{success:!1,error:"No build code found in URL"};const i=this.decodeBuildCode(n);return{success:!0,preset:a&&this.data.presets[parseInt(a)]?this.data.presets[parseInt(a)].name:null,character:i}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}decodeBuildCode(t){let s=t.replace(/-/g,"+").replace(/_/g,"/");s=atob(s);const n=s.charCodeAt(0),a=s.charCodeAt(1),i=s.charCodeAt(3),o=this.data.perks.find(u=>u.perkListId===a);console.log("ðŸ” [Converter] Looking for perkListId:",a),console.log("ðŸ” [Converter] Looking for gameMechanicsId:",i),console.log("ðŸ” [Converter] Available perk lists:",this.data.perks.map(u=>({id:u.perkListId,name:u.name}))),console.log("ðŸ” [Converter] Available game mechanics:",this.data.gameMechanics.map(u=>({id:u.gameId,name:u.name})));const l=this.data.gameMechanics.find(u=>u.gameId===i);if(!o)throw new Error(`Invalid perk list ID: ${a}`);if(!l)throw new Error(`Invalid game mechanics ID: ${i}`);const c={level:s.charCodeAt(5),hmsIncreases:{health:s.charCodeAt(6),magicka:s.charCodeAt(7),stamina:s.charCodeAt(8)},skillLevels:[],oghmaChoice:this.parseOghmaChoice(s.charCodeAt(27),n),race:this.lookupMaps.raceIdToName[s.charCodeAt(28)]||"Unknown",standingStone:this.lookupMaps.stoneIdToName[s.charCodeAt(29)]||"Unknown",blessing:this.lookupMaps.blessingIdToName[s.charCodeAt(30)]||"Unknown",perks:this.parsePerks(s,o),configuration:{perkList:o.name,gameMechanics:l.name}};for(let u=0;u<18;u++)c.skillLevels.push({skill:o.skillNames[u],level:s.charCodeAt(9+u)});return n===2&&c.skillLevels.push({skill:"Level",level:c.level}),c}parseOghmaChoice(t,s){let n=t;return s===2&&(n=n>>4),["None","Health","Magicka","Stamina"][n]||"None"}parsePerks(t,s){const n=[];console.log("ðŸ” [Perk Parser] Starting perk parsing..."),console.log("ðŸ” [Perk Parser] PerkList info:",{name:s.name,totalPerks:s.perks.length,skillNames:s.skillNames}),console.log("ðŸ” [Perk Parser] Build code length:",t.length),console.log("ðŸ” [Perk Parser] First few bytes:",Array.from(t.slice(0,10)).map(a=>a.charCodeAt(0)));for(let a=0;a<s.perks.length;a++){const i=31+Math.floor(a/8),o=7-a%8,l=t.charCodeAt(i);if((l&1<<o)>0){const u={name:s.perks[a].name,skill:s.perks[a].skill};n.push(u),console.log(`ðŸ” [Perk Parser] Found perk ${a}:`,{name:u.name,skill:u.skill,skillName:s.skillNames[u.skill],byteIndex:i,bitOffset:o,byteValue:l.toString(2).padStart(8,"0")})}}return console.log("ðŸ” [Perk Parser] Final results:",{totalFound:n.length,bySkill:n.reduce((a,i)=>{const o=s.skillNames[i.skill]||`Skill ${i.skill}`;return a[o]=(a[o]||0)+1,a},{}),allPerks:n.map(a=>({name:a.name,skill:a.skill,skillName:s.skillNames[a.skill]}))}),n}encodeUrl(t,s="https://gigaplanner.com"){try{const n=this.encodeBuildCode(t),a=this.findPresetNumber(t.configuration.perkList);let i=`${s}?b=${n}`;return a!==null&&(i+=`&p=${a}`),{success:!0,url:i}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}encodeBuildCode(t){let n=String.fromCodePoint(2);const a=this.lookupMaps.perkListNameToId[t.configuration.perkList],i=this.lookupMaps.mechanicsNameToId[t.configuration.gameMechanics];if(a===void 0)throw new Error(`Unknown perk list: ${t.configuration.perkList}`);if(i===void 0)throw new Error(`Unknown game mechanics: ${t.configuration.gameMechanics}`);n+=String.fromCodePoint(a),n+=String.fromCodePoint(0),n+=String.fromCodePoint(i),n+=String.fromCodePoint(0),n+=String.fromCodePoint(t.level),n+=String.fromCodePoint(t.hmsIncreases.health),n+=String.fromCodePoint(t.hmsIncreases.magicka),n+=String.fromCodePoint(t.hmsIncreases.stamina);const o=this.data.perks.find(d=>d.perkListId===a);for(let d=0;d<18;d++){const f=t.skillLevels.find(m=>m.skill===o.skillNames[d]);n+=String.fromCodePoint(f?f.level:0)}const c=["None","Health","Magicka","Stamina"].indexOf(t.oghmaChoice);n+=String.fromCodePoint(c<<4),n+=String.fromCodePoint(this.lookupMaps.raceNameToId[t.race]||0),n+=String.fromCodePoint(this.lookupMaps.stoneNameToId[t.standingStone]||0),n+=String.fromCodePoint(this.lookupMaps.blessingNameToId[t.blessing]||0);const u=this.encodePerks(t.perks,o);return n+=u,n=btoa(n),n=n.replace(/\+/g,"-").replace(/\//g,"_"),n.indexOf("=")!==-1&&(n=n.substring(0,n.indexOf("="))),n}encodePerks(t,s){let n="",a=0;for(let o=0;o<s.perks.length;o++){const l=t.includes(s.perks[o].name);a=a<<1|(l?1:0),o%8===7&&(n+=String.fromCodePoint(a),a=0)}const i=s.perks.length%8;if(i>0){const o=8-i;n+=String.fromCodePoint(a<<o)}return n}findPresetNumber(t){const s=this.lookupMaps.perkListNameToId[t],n=this.data.presets.find(a=>a.perks===s);return n?this.data.presets.indexOf(n):null}getDataMappings(){return{perkLists:this.data.perks.map(t=>({id:t.perkListId,name:t.name})),races:this.data.races.map((t,s)=>({id:s,name:t.name})),gameMechanics:this.data.gameMechanics.map(t=>({id:t.id,name:t.name})),standingStones:this.data.standingStones.map((t,s)=>({id:s,name:t.name})),blessings:this.data.blessings.map((t,s)=>({id:s,name:t.name})),presets:this.data.presets.map((t,s)=>({id:s,name:t.name}))}}getPerksForList(t){const s=this.data.perks.find(n=>n.name===t);return s?s.perks.map((n,a)=>({id:a,name:n.name,skill:s.skillNames[n.skill],skillReq:n.skillReq,description:n.description})):[]}}function kte(){const[e,t]=h.useState({isLoading:!1,error:null,warnings:[],success:!1}),[s,n]=h.useState(null),[a,i]=h.useState(null),o=h.useCallback(async()=>{if(console.log("ðŸ”„ [GigaPlanner Import] Initialize called"),console.log("ðŸ”§ [GigaPlanner Import] Current converter:",!!s),console.log("ðŸ”§ [GigaPlanner Import] Current transformer:",!!a),s&&a)return console.log("âœ… [GigaPlanner Import] Already initialized, skipping"),{converter:s,transformer:a};console.log("ðŸ”„ [GigaPlanner Import] Starting initialization..."),t(d=>({...d,isLoading:!0,error:null}));try{console.log("ðŸ”„ [GigaPlanner Import] Creating GigaPlannerConverter...");const d=new jte;console.log("ðŸ”„ [GigaPlanner Import] Initializing converter..."),await d.initialize(),console.log("âœ… [GigaPlanner Import] Converter initialized successfully"),console.log("ðŸ”„ [GigaPlanner Import] Loading transformation function...");const{transformGigaPlannerToBuildState:f}=await fn(async()=>{const{transformGigaPlannerToBuildState:m}=await import("./transformation-93zZwTAz.js");return{transformGigaPlannerToBuildState:m}},[]);return console.log("âœ… [GigaPlanner Import] Transformation function loaded successfully"),console.log("ðŸ”„ [GigaPlanner Import] Setting converter and transformer..."),n(d),i(()=>f),t(m=>({...m,isLoading:!1,success:!0})),console.log("âœ… [GigaPlanner Import] Initialization completed successfully"),{converter:d,transformer:f}}catch(d){return console.log("ðŸ’¥ [GigaPlanner Import] Initialization error:",d),console.log("ðŸ’¥ [GigaPlanner Import] Error type:",typeof d),console.log("ðŸ’¥ [GigaPlanner Import] Error message:",d instanceof Error?d.message:String(d)),t(f=>({...f,isLoading:!1,error:d instanceof Error?d.message:"Failed to initialize GigaPlanner import",success:!1})),null}},[s,a]),l=h.useCallback(async d=>{console.log("ðŸš€ [GigaPlanner Import] importFromUrl called with URL:",d),console.log("ðŸ”§ [GigaPlanner Import] Initial converter state:",!!s),console.log("ðŸ”§ [GigaPlanner Import] Initial transformer state:",!!a);let f=s,m=a;if(!f||!m){console.log("ðŸ”„ [GigaPlanner Import] Converter or transformer missing, initializing...");const g=await o();if(!g)return console.log("âŒ [GigaPlanner Import] Initialization failed"),null;f=g.converter,m=g.transformer,console.log("ðŸ”§ [GigaPlanner Import] After initialization - converter:",!!f),console.log("ðŸ”§ [GigaPlanner Import] After initialization - transformer:",!!m)}t(g=>({...g,isLoading:!0,error:null,warnings:[]})),console.log("ðŸš€ [GigaPlanner Import] About to start import process..."),console.log("ðŸ”§ [GigaPlanner Import] Converter available:",!!f),console.log("ðŸ”§ [GigaPlanner Import] Transformer available:",!!m),console.log("ðŸ”§ [GigaPlanner Import] Converter instance:",f),console.log("ðŸ”§ [GigaPlanner Import] Transformer instance:",m);try{console.log("ðŸ”„ [GigaPlanner Import] Starting import process for URL:",d);const g=f.decodeUrl(d);if(console.log("ðŸ“¥ [GigaPlanner Import] Decode result:",g),!g.success)return t(p=>({...p,isLoading:!1,error:g.error||"Failed to decode GigaPlanner URL",success:!1})),null;if(!g.character)return console.log("âŒ [GigaPlanner Import] No character data found in decode result"),t(p=>({...p,isLoading:!1,error:"No character data found in URL",success:!1})),null;console.log("ðŸ‘¤ [GigaPlanner Import] Character data found:",g.character),console.log("ðŸ”„ [GigaPlanner Import] Starting transformation to BuildState...");const b=await m(g.character);if(console.log("ðŸ”€ [GigaPlanner Import] Transform result:",b),!b.success)return t(p=>({...p,isLoading:!1,error:b.error||"Failed to transform character data",success:!1})),null;const y=[...g.preset?[`Imported from preset: ${g.preset}`]:[],...b.warnings||[]];t(p=>({...p,isLoading:!1,warnings:y,success:!0}));const v={buildState:b.data||null,warnings:y};return console.log("âœ… [GigaPlanner Import] Import completed successfully!"),console.log("ðŸ“¦ [GigaPlanner Import] Final result:",v),v}catch(g){return console.log("ðŸ’¥ [GigaPlanner Import] Error caught during import:",g),console.log("ðŸ’¥ [GigaPlanner Import] Error type:",typeof g),console.log("ðŸ’¥ [GigaPlanner Import] Error message:",g instanceof Error?g.message:String(g)),t(b=>({...b,isLoading:!1,error:g instanceof Error?g.message:"Failed to import from GigaPlanner URL",success:!1})),null}},[s,a,o]),c=h.useCallback(async d=>{let f=s,m=a;if(!f||!m){const g=await o();if(!g)return null;f=g.converter,m=g.transformer}t(g=>({...g,isLoading:!0,error:null,warnings:[]}));try{const g=`https://gigaplanner.com?b=${d}`;return await l(g)}catch(g){return t(b=>({...b,isLoading:!1,error:g instanceof Error?g.message:"Failed to import from build code",success:!1})),null}},[s,a,o,l]),u=h.useCallback(()=>{t({isLoading:!1,error:null,warnings:[],success:!1})},[]);return{isLoading:e.isLoading,error:e.error,warnings:e.warnings,success:e.success,initialize:o,importFromUrl:l,importFromBuildCode:c,reset:u,isInitialized:!!s&&!!a}}function Ste({onImport:e,className:t}){const[s,n]=h.useState(""),[a,i]=h.useState(""),[o,l]=h.useState("url"),{isLoading:c,error:u,warnings:d,success:f,importFromUrl:m,importFromBuildCode:g,reset:b}=kte(),y=async()=>{if(!s.trim())return;console.log("ðŸš€ [Import Card] Starting URL import:",s.trim());const x=await m(s.trim());console.log("ðŸ“¥ [Import Card] Import result received:",x),x!=null&&x.buildState?(console.log("âœ… [Import Card] BuildState found, calling onImport:",x.buildState),e?(e(x.buildState),console.log("âœ… [Import Card] onImport callback executed")):console.log("âš ï¸ [Import Card] No onImport callback provided")):console.log("âŒ [Import Card] No buildState in result or result is null")},v=async()=>{if(!a.trim())return;console.log("ðŸš€ [Import Card] Starting build code import:",a.trim());const x=await g(a.trim());console.log("ðŸ“¥ [Import Card] Import result received:",x),x!=null&&x.buildState?(console.log("âœ… [Import Card] BuildState found, calling onImport:",x.buildState),e?(e(x.buildState),console.log("âœ… [Import Card] onImport callback executed")):console.log("âš ï¸ [Import Card] No onImport callback provided")):console.log("âŒ [Import Card] No buildState in result or result is null")},p=()=>{n(""),i(""),b()};return r.jsxs(ae,{className:t,children:[r.jsxs(de,{children:[r.jsxs(ve,{className:"flex items-center gap-2",children:[r.jsx($h,{className:"h-5 w-5"}),"Import from GigaPlanner"]}),r.jsx(pn,{children:"Import character builds from GigaPlanner URLs or build codes"})]}),r.jsxs(oe,{className:"space-y-4",children:[r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(G,{variant:o==="url"?"default":"outline",size:"sm",onClick:()=>l("url"),children:"URL"}),r.jsx(G,{variant:o==="code"?"default":"outline",size:"sm",onClick:()=>l("code"),children:"Build Code"})]}),o==="url"&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(It,{htmlFor:"gigaplanner-url",children:"GigaPlanner URL"}),r.jsx(os,{id:"gigaplanner-url",placeholder:"https://gigaplanner.com?b=...",value:s,onChange:x=>n(x.target.value),disabled:c}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Example: https://gigaplanner.com?b=AgAAAAAA..."})]}),r.jsx(G,{onClick:y,disabled:!s.trim()||c,className:"w-full",children:c?r.jsxs(r.Fragment,{children:[r.jsx(hb,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):r.jsxs(r.Fragment,{children:[r.jsx($h,{className:"mr-2 h-4 w-4"}),"Import from URL"]})})]}),o==="code"&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(It,{htmlFor:"gigaplanner-build-code",children:"Build Code"}),r.jsx(os,{id:"gigaplanner-build-code",placeholder:"AgAAAAAA...",value:a,onChange:x=>i(x.target.value),disabled:c}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Example: AgAAAAAA..."})]}),r.jsx(G,{onClick:v,disabled:!a.trim()||c,className:"w-full",children:c?r.jsxs(r.Fragment,{children:[r.jsx(hb,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):r.jsxs(r.Fragment,{children:[r.jsx($h,{className:"mr-2 h-4 w-4"}),"Import from Build Code"]})})]}),u&&r.jsxs(tf,{variant:"destructive",children:[r.jsx(Si,{className:"h-4 w-4"}),r.jsx(sf,{children:u})]}),f&&r.jsxs(tf,{children:[r.jsx($c,{className:"h-4 w-4"}),r.jsxs(sf,{children:["Character imported successfully!",d.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-sm font-medium",children:"Warnings:"}),r.jsx("ul",{className:"mt-1 space-y-1",children:d.map((x,w)=>r.jsxs("li",{className:"text-sm text-muted-foreground",children:["â€¢ ",x]},w))})]})]})]}),!u&&d.length>0&&r.jsxs(tf,{variant:"default",children:[r.jsx(Si,{className:"h-4 w-4"}),r.jsx(sf,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm font-medium",children:"Import completed with warnings:"}),r.jsx("div",{className:"space-y-1",children:d.map((x,w)=>r.jsx(Q,{variant:"secondary",className:"mr-1 mb-1",children:x},w))})]})})]}),(f||u)&&r.jsx(G,{variant:"outline",onClick:p,className:"w-full",disabled:c,children:"Reset"})]})]})}function _te({open:e,onOpenChange:t,onImport:s}){return r.jsx(yte,{open:e,onOpenChange:t,children:r.jsxs(WR,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(YR,{children:[r.jsx(XR,{children:"GigaPlanner Tools"}),r.jsx(KR,{children:"Import character builds from GigaPlanner URLs or build codes."})]}),r.jsx("div",{className:"mt-4",children:r.jsx(Ste,{onImport:s})})]})})}function Cte(){const{build:e,updateBuild:t}=Ye(),[s,n]=h.useState(e.traitLimits.regular),[a,i]=h.useState(e.traitLimits.bonus),o=h.useCallback(c=>{n(c),t({traitLimits:{...e.traitLimits,regular:c}})},[e.traitLimits,t]),l=h.useCallback(c=>{i(c),t({traitLimits:{...e.traitLimits,bonus:c}})},[e.traitLimits,t]);return{regularLimit:s,bonusLimit:a,handleRegularLimitChange:o,handleBonusLimitChange:l,currentRegularCount:e.traits.regular.length,currentBonusCount:e.traits.bonus.length}}function Ete(){const{build:e,setBuildName:t,setBuildNotes:s,resetBuild:n,updateBuild:a}=Ye(),[i,o]=h.useState(!1),[l,c]=h.useState(!1),u=Cte(),d=m=>{var b,y,v;console.log("ðŸ“¥ [Build Page] GigaPlanner import received:",m),console.log("ðŸ“Š [Build Page] Current build state before import:",e),console.log("ðŸ” [Build Page] Current build analysis:"),console.log("  - Current race:",e.race,"(type:",typeof e.race,")"),console.log("  - Current stone:",e.stone,"(type:",typeof e.stone,")"),console.log("  - Current religion:",e.religion,"(type:",typeof e.religion,")"),console.log("  - Current favoriteBlessing:",e.favoriteBlessing,"(type:",typeof e.favoriteBlessing,")"),console.log("  - Current level:",(b=e.attributeAssignments)==null?void 0:b.level),console.log("ðŸ” [Build Page] Imported race:",m.race),console.log("ðŸ” [Build Page] Imported stone:",m.stone),console.log("ðŸ” [Build Page] Imported level:",(y=m.attributeAssignments)==null?void 0:y.level),console.log("ðŸ” [Build Page] Imported skill levels:",m.skillLevels),console.log("ðŸ” [Build Page] Full imported build state structure:",JSON.stringify(m,null,2)),console.log("ðŸ” [Build Page] GigaPlanner data analysis:"),console.log("  - importedBuildState.race:",m.race,"(type:",typeof m.race,")"),console.log("  - importedBuildState.stone:",m.stone,"(type:",typeof m.stone,")"),console.log("  - importedBuildState.religion:",m.religion,"(type:",typeof m.religion,")"),console.log("  - importedBuildState.favoriteBlessing:",m.favoriteBlessing,"(type:",typeof m.favoriteBlessing,")"),console.log("  - importedBuildState.attributeAssignments:",m.attributeAssignments),console.log("  - importedBuildState.skills:",m.skills),console.log("  - importedBuildState.perks:",m.perks),console.log("  - importedBuildState.traits:",m.traits);const g={v:1,name:m.name!==void 0?m.name:e.name,notes:m.notes!==void 0?m.notes:e.notes,race:m.race&&m.race!=="Unknown"?m.race:null,stone:m.stone&&m.stone!=="Unknown"?m.stone:null,attributeAssignments:m.attributeAssignments?{health:m.attributeAssignments.health!==void 0?m.attributeAssignments.health:0,stamina:m.attributeAssignments.stamina!==void 0?m.attributeAssignments.stamina:0,magicka:m.attributeAssignments.magicka!==void 0?m.attributeAssignments.magicka:0,level:m.attributeAssignments.level!==void 0?m.attributeAssignments.level:1,assignments:m.attributeAssignments.assignments||{}}:e.attributeAssignments,skills:m.skills!==void 0?{major:m.skills.major||[],minor:m.skills.minor||[]}:e.skills,perks:m.perks!==void 0?{selected:m.perks.selected||{},ranks:m.perks.ranks||{}}:e.perks,traits:m.traits!==void 0?{regular:m.traits.regular||[],bonus:m.traits.bonus||[]}:e.traits,religion:m.religion&&m.religion!=="Unknown"?m.religion:null,favoriteBlessing:m.favoriteBlessing&&m.favoriteBlessing!=="Unknown"?m.favoriteBlessing:null,destinyPath:m.destinyPath!==void 0?m.destinyPath:e.destinyPath,skillLevels:m.skillLevels!==void 0?m.skillLevels:e.skillLevels};console.log("ðŸ”„ [Build Page] Updating build with converted state:",g),console.log("ðŸ” [Build Page] Converted race:",g.race),console.log("ðŸ” [Build Page] Converted stone:",g.stone),console.log("ðŸ” [Build Page] Converted level:",(v=g.attributeAssignments)==null?void 0:v.level),console.log("ðŸ” [Build Page] Converted destiny path:",g.destinyPath),a(g),console.log("âœ… [Build Page] Build update completed"),setTimeout(()=>{var x,w,N;const p=va.getState().build;console.log("ðŸ“Š [Build Page] Current build state after update (delayed):",p),console.log("ðŸ” [Build Page] Race after update:",p.race),console.log("ðŸ” [Build Page] Stone after update:",p.stone),console.log("ðŸ” [Build Page] Level after update:",(x=p.attributeAssignments)==null?void 0:x.level),console.log("ðŸª [Build Store] Full build state after import:"),console.log("  - v:",p.v),console.log("  - name:",p.name),console.log("  - notes:",p.notes),console.log("  - race:",p.race),console.log("  - stone:",p.stone),console.log("  - religion:",p.religion),console.log("  - favoriteBlessing:",p.favoriteBlessing),console.log("  - traits:",p.traits),console.log("  - traitLimits:",p.traitLimits),console.log("  - skills:",p.skills),console.log("  - perks:",p.perks),console.log("  - skillLevels:",p.skillLevels),console.log("  - equipment:",p.equipment),console.log("  - userProgress:",p.userProgress),console.log("  - destinyPath:",p.destinyPath),console.log("  - attributeAssignments:",p.attributeAssignments),console.log("ðŸ”„ [Build Store] What we tried to set vs what actually got set:"),console.log("  - Tried to set race:",g.race,"â†’ Actually set:",p.race),console.log("  - Tried to set stone:",g.stone,"â†’ Actually set:",p.stone),console.log("  - Tried to set level:",(w=g.attributeAssignments)==null?void 0:w.level,"â†’ Actually set:",(N=p.attributeAssignments)==null?void 0:N.level),console.log("  - Tried to set blessing:",g.favoriteBlessing,"â†’ Actually set:",p.favoriteBlessing),console.log("  - Tried to set destiny path:",g.destinyPath,"â†’ Actually set:",p.destinyPath)},100),c(!1)},f=[{id:"basic-info",component:r.jsx(ES,{name:e.name,notes:e.notes,onNameChange:t,onNotesChange:s}),size:"full"},{id:"race",component:r.jsx(uE,{}),size:"half"},{id:"birthsign",component:r.jsx(GC,{}),size:"half"},{id:"trait",component:r.jsx(oR,{}),size:"half"},{id:"religion",component:r.jsx(vE,{}),size:"half"},{id:"favorite-blessing",component:r.jsx(bE,{}),size:"half"},{id:"attributes",component:r.jsx(LS,{}),size:"full"},{id:"skills",component:r.jsx(nR,{}),size:"full"},{id:"destiny",component:r.jsx(sE,{}),size:"full"}];return r.jsxs(Ut,{title:"Character Builder",description:"Create and customize your character build. Choose your race, birthsign, traits, religion, attributes, skills, and destiny to create the perfect character for your playstyle.",children:[r.jsx(IB,{onReset:()=>o(!0),build:e,onOpenGigaPlannerTools:()=>c(!0)}),r.jsx(WB,{open:i,onConfirm:()=>{n(),o(!1)},onCancel:()=>o(!1)}),r.jsx(_te,{open:l,onOpenChange:c,onImport:d}),r.jsxs(qa,{defaultValue:"build",className:"w-full",children:[r.jsxs(Qa,{className:"mb-4",children:[r.jsx(kt,{value:"build",children:"Build"}),r.jsx(kt,{value:"config",children:"Config"})]}),r.jsx(At,{value:"build",children:r.jsx($B,{cards:f,gap:16})}),r.jsx(At,{value:"config",children:r.jsx(XB,{regularLimit:u.regularLimit,bonusLimit:u.bonusLimit,onRegularLimitChange:u.handleRegularLimitChange,onBonusLimitChange:u.handleBonusLimitChange,currentRegularCount:u.currentRegularCount,currentBonusCount:u.currentBonusCount})})]})]})}function Ate(){return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(Vi,{children:"Crafting"}),r.jsx(Uc,{children:"Plan your crafting recipes and material requirements"})]}),r.jsxs(ae,{children:[r.jsxs(de,{children:[r.jsx(ve,{children:"Coming Soon"}),r.jsx(pn,{children:"Crafting system is under development"})]}),r.jsx(oe,{children:r.jsx(Uc,{children:"This section will help you plan and optimize your crafting projects."})})]})]})}function Li(e){return{ArmorBoots:"Armor Footwear",ArmorHelmet:"Armor Headgear",ArmorCuirass:"Armor Body",ArmorGauntlets:"Armor Hands",ArmorShield:"Armor Shield",ArmorGreaves:"Armor Legs",ClothingFeet:"Clothing Footwear",ClothingHead:"Clothing Headgear",ClothingBody:"Clothing Body",ClothingHands:"Clothing Hands",ClothingRing:"Rings",ClothingNecklace:"Necklaces",ClothingCirclet:"Circlets",WeapMaterialWood:"Wooden Weapons",WeapMaterialSteel:"Steel Weapons",WeapMaterialOrcish:"Orcish Weapons",WeapMaterialIron:"Iron Weapons",WeapMaterialGlass:"Glass Weapons",WeapMaterialElven:"Elven Weapons",WeapMaterialEbony:"Ebony Weapons",WeapMaterialDwarven:"Dwarven Weapons",WeapMaterialDaedric:"Daedric Weapons"}[e]||e}function Rte(e,t){const s=h.useMemo(()=>t.length===0?e:e.filter(n=>t.every(a=>{switch(a.category){case"Categories":return a.value==="weapon"?n.isWeaponEnchantment:a.value==="armor"?n.isArmorEnchantment:!0;case"Armor Restrictions":return n.wornRestrictions.includes(a.value);case"Fuzzy Search":return n.searchableText.toLowerCase().includes(a.value.toLowerCase());default:return!0}})),[e,t]);return{filteredEnchantments:s,totalCount:e.length,filteredCount:s.length}}const Tte=z.memo(({enchantment:e,onClick:t,className:s,selected:n=!1})=>r.jsx(ae,{className:$("group relative cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary/50",n&&"ring-2 ring-primary ring-offset-2",s),onClick:t,role:"button",tabIndex:0,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),t==null||t())},children:r.jsxs(oe,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[r.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:e.name}),r.jsx("div",{className:"flex gap-1 flex-shrink-0",children:r.jsx(xn,{type:"targetType",value:e.targetType,size:"sm"})})]}),e.hasEffects&&r.jsx("div",{className:"mb-3",children:r.jsx(tu,{effects:e.effects,title:"",compact:!0,showDescriptions:!0,maxDisplay:e.effects.length})}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:e.isWeaponEnchantment?r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"Weapon"}):e.wornRestrictions.length>0?e.wornRestrictions.map((a,i)=>r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",title:Li(a),children:Li(a)},i)):r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-200",children:"No listed restrictions"})})]})})),Mte=z.memo(({enchantment:e,onClick:t,className:s,selected:n=!1})=>r.jsx(ae,{className:$("group relative cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary/50",n&&"ring-2 ring-primary ring-offset-2",s),onClick:t,role:"button",tabIndex:0,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),t==null||t())},children:r.jsx(oe,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors truncate",children:e.name}),r.jsx("div",{className:"flex gap-1 flex-shrink-0",children:r.jsx(xn,{type:"targetType",value:e.targetType,size:"sm"})})]}),e.hasEffects&&r.jsx("div",{children:r.jsx(tu,{effects:e.effects,title:"",compact:!0,showDescriptions:!0,maxDisplay:e.effects.length})}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.isWeaponEnchantment?r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"Weapon"}):e.wornRestrictions.length>0?e.wornRestrictions.map((a,i)=>r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",title:Li(a),children:Li(a)},i)):r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-200",children:"No listed restrictions"})})]})})})),Dte=z.memo(({className:e,enchantments:t,loading:s,emptyMessage:n="No enchantments found",viewMode:a="grid",onEnchantmentClick:i})=>{const{data:o,loading:l,viewState:c}=za(),u=s??l,d=t??o,{sortBy:f,sortOrder:m}=c,g=h.useMemo(()=>d?[...d].sort((y,v)=>{let p,x;switch(f){case"name":p=y.name.toLowerCase(),x=v.name.toLowerCase();break;case"targetType":p=y.isWeaponEnchantment?"weapon":"armor",x=v.isWeaponEnchantment?"weapon":"armor";break;case"wornRestrictions":if(y.isWeaponEnchantment&&!v.isWeaponEnchantment)return-1;if(!y.isWeaponEnchantment&&v.isWeaponEnchantment)return 1;if(y.isWeaponEnchantment&&v.isWeaponEnchantment)p=y.name.toLowerCase(),x=v.name.toLowerCase();else{const w=y.wornRestrictions[0]||"",N=v.wornRestrictions[0]||"";w!==N?(p=w.toLowerCase(),x=N.toLowerCase()):(p=y.name.toLowerCase(),x=v.name.toLowerCase())}break;default:p=y.name.toLowerCase(),x=v.name.toLowerCase()}return p<x?m==="asc"?-1:1:p>x?m==="asc"?1:-1:0}):[],[d,f,m]),b=y=>{i==null||i(y)};return u?r.jsx("div",{className:$(a==="list"?"space-y-4":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-4",e),children:Array.from({length:8}).map((y,v)=>r.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-muted rounded mb-2"}),r.jsx("div",{className:"h-3 bg-muted rounded mb-2 w-2/3"}),r.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]},v))}):g.length===0?r.jsxs("div",{className:$("flex flex-col items-center justify-center py-12 text-center",e),children:[r.jsx("div",{className:"text-4xl mb-4",children:"ðŸ”®"}),r.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Enchantments Found"}),r.jsx("p",{className:"text-muted-foreground",children:n})]}):r.jsx("div",{className:$(a==="list"?"space-y-4":"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4",e),children:g.map(y=>a==="list"?r.jsx(Mte,{enchantment:y,onClick:()=>b(y)},y.baseEnchantmentId):r.jsx(Tte,{enchantment:y,onClick:()=>b(y)},y.baseEnchantmentId))})});function Pte(e,t){const[s,n]=h.useState(e);return h.useEffect(()=>{const a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),s}const Lte=z.memo(({className:e,showAdvanced:t=!1})=>{const{data:s,filters:n,setFilters:a}=za(),[i,o]=h.useState(t),[l,c]=h.useState(n.searchTerm||""),u=Pte(l,300),d=h.useMemo(()=>{const j=[...new Set(s.map(S=>S.category))],_=[...new Set(s.map(S=>S.plugin))],k=[...new Set(s.map(S=>S.targetType))],A=[...new Set(s.flatMap(S=>S.foundOnItems.map(C=>C.type)))];return{categories:j.sort(),plugins:_.sort(),targetTypes:k.sort(),itemTypes:A.sort()}},[s]);z.useEffect(()=>{a({searchTerm:u})},[u,a]);const f=j=>{c(j)},m=(j,_)=>{const k=n.categories||[],A=_?[...k,j]:k.filter(S=>S!==j);a({categories:A})},g=(j,_)=>{const k=n.targetTypes||[],A=_?[...k,j]:k.filter(S=>S!==j);a({targetTypes:A})},b=(j,_)=>{const k=n.plugins||[],A=_?[...k,j]:k.filter(S=>S!==j);a({plugins:A})},y=(j,_)=>{const k=n.itemTypes||[],A=_?[...k,j]:k.filter(S=>S!==j);a({itemTypes:A})},v=j=>{a({hasEffects:j})},p=j=>{a({hasWornRestrictions:j})},x=()=>{a({categories:[],targetTypes:[],itemTypes:[],plugins:[],searchTerm:"",hasEffects:null,hasWornRestrictions:null,minItemCount:null,maxItemCount:null})},w=(j,_)=>{switch(j){case"searchTerm":a({searchTerm:""});break;case"categories":a({categories:[]});break;case"targetTypes":a({targetTypes:[]});break;case"plugins":a({plugins:[]});break;case"itemTypes":a({itemTypes:[]});break;case"hasEffects":a({hasEffects:null});break;case"hasWornRestrictions":a({hasWornRestrictions:null});break}},N=n.searchTerm||n.categories.length>0||n.targetTypes.length>0||n.plugins.length>0||n.itemTypes.length>0||n.hasEffects!==null||n.hasWornRestrictions!==null;return r.jsxs("div",{className:$("space-y-4",e),children:[r.jsxs("div",{className:"relative",children:[r.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(os,{placeholder:"Search enchantments...",value:l,onChange:j=>f(j.target.value),className:"pl-10"})]}),N&&r.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.searchTerm&&r.jsxs(Q,{variant:"secondary",className:"gap-1",children:['Search: "',n.searchTerm,'"',r.jsx("button",{onClick:()=>w("searchTerm"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:r.jsx(ze,{className:"h-3 w-3"})})]}),n.categories.map(j=>r.jsxs(Q,{variant:"secondary",className:"gap-1",children:["Category: ",j,r.jsx("button",{onClick:()=>w("categories"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:r.jsx(ze,{className:"h-3 w-3"})})]},j)),n.targetTypes.map(j=>r.jsxs(Q,{variant:"secondary",className:"gap-1",children:[r.jsx(xn,{type:"targetType",value:j,size:"sm"}),r.jsx("button",{onClick:()=>w("targetTypes"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:r.jsx(ze,{className:"h-3 w-3"})})]},j)),n.plugins.map(j=>r.jsxs(Q,{variant:"secondary",className:"gap-1",children:["Plugin: ",j,r.jsx("button",{onClick:()=>w("plugins"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:r.jsx(ze,{className:"h-3 w-3"})})]},j)),n.itemTypes.map(j=>r.jsxs(Q,{variant:"secondary",className:"gap-1",children:[r.jsx(xn,{type:"itemType",value:j,size:"sm"}),r.jsx("button",{onClick:()=>w("itemTypes"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:r.jsx(ze,{className:"h-3 w-3"})})]},j)),n.hasEffects!==null&&r.jsxs(Q,{variant:"secondary",className:"gap-1",children:["Has Effects: ",n.hasEffects?"Yes":"No",r.jsx("button",{onClick:()=>w("hasEffects"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:r.jsx(ze,{className:"h-3 w-3"})})]}),n.hasWornRestrictions!==null&&r.jsxs(Q,{variant:"secondary",className:"gap-1",children:["Has Restrictions: ",n.hasWornRestrictions?"Yes":"No",r.jsx("button",{onClick:()=>w("hasWornRestrictions"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:r.jsx(ze,{className:"h-3 w-3"})})]}),r.jsx(G,{variant:"ghost",size:"sm",onClick:x,className:"h-6 px-2 text-xs",children:"Clear All"})]}),r.jsxs(G,{variant:"outline",size:"sm",onClick:()=>o(!i),className:"flex items-center gap-2",children:[r.jsx(w3,{className:"h-4 w-4"}),"Filters",i?r.jsx(Ic,{className:"h-4 w-4"}):r.jsx(vt,{className:"h-4 w-4"})]}),i&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border rounded-lg bg-muted/50",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(It,{children:"Categories"}),r.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:d.categories.map(j=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`category-${j}`,checked:n.categories.includes(j),onChange:_=>m(j,_.target.checked),className:"rounded border-gray-300"}),r.jsx(It,{htmlFor:`category-${j}`,className:"text-sm",children:j})]},j))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(It,{children:"Target Type"}),r.jsx("div",{className:"space-y-2",children:d.targetTypes.map(j=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`target-${j}`,checked:n.targetTypes.includes(j),onChange:_=>g(j,_.target.checked),className:"rounded border-gray-300"}),r.jsx(It,{htmlFor:`target-${j}`,className:"text-sm",children:r.jsx(xn,{type:"targetType",value:j,size:"sm"})})]},j))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(It,{children:"Plugin"}),r.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:d.plugins.map(j=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`plugin-${j}`,checked:n.plugins.includes(j),onChange:_=>b(j,_.target.checked),className:"rounded border-gray-300"}),r.jsx(It,{htmlFor:`plugin-${j}`,className:"text-sm",children:j})]},j))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(It,{children:"Item Type"}),r.jsx("div",{className:"space-y-2",children:d.itemTypes.map(j=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`item-${j}`,checked:n.itemTypes.includes(j),onChange:_=>y(j,_.target.checked),className:"rounded border-gray-300"}),r.jsx(It,{htmlFor:`item-${j}`,className:"text-sm",children:r.jsx(xn,{type:"itemType",value:j,size:"sm"})})]},j))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(It,{children:"Has Effects"}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"has-effects",checked:n.hasEffects===!0,onChange:j=>v(j.target.checked),className:"rounded border-gray-300"}),r.jsx(It,{htmlFor:"has-effects",className:"text-sm",children:"Has Effects"})]})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(It,{children:"Has Worn Restrictions"}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"has-restrictions",checked:n.hasWornRestrictions===!0,onChange:j=>p(j.target.checked),className:"rounded border-gray-300"}),r.jsx(It,{htmlFor:"has-restrictions",className:"text-sm",children:"Has Restrictions"})]})})]})]})]})}),zte=()=>{const{data:e,filters:t}=za(),s=h.useCallback(f=>{if(!f)return()=>!0;const m=f.toLowerCase();return g=>g.searchableText.includes(m)},[]),n=h.useCallback(f=>f.length===0?()=>!0:m=>f.includes(m.category),[]),a=h.useCallback(f=>f.length===0?()=>!0:m=>f.includes(m.targetType),[]),i=h.useCallback(f=>f.length===0?()=>!0:m=>f.includes(m.plugin),[]),o=h.useCallback(f=>f.length===0?()=>!0:m=>m.foundOnItems.map(b=>b.type).some(b=>f.includes(b)),[]),l=h.useCallback(f=>f===null?()=>!0:m=>m.hasEffects===f,[]),c=h.useCallback(f=>f===null?()=>!0:m=>m.wornRestrictions.length>0===f,[]),u=h.useCallback((f,m)=>f===null&&m===null?()=>!0:g=>!(f!==null&&g.itemCount<f||m!==null&&g.itemCount>m),[]),d=h.useMemo(()=>{const f=s(t.searchTerm),m=n(t.categories),g=a(t.targetTypes),b=i(t.plugins),y=o(t.itemTypes),v=l(t.hasEffects),p=c(t.hasWornRestrictions),x=u(t.minItemCount,t.maxItemCount);return e.filter(w=>f(w)&&m(w)&&g(w)&&b(w)&&y(w)&&v(w)&&p(w)&&x(w))},[e,t,s,n,a,i,o,l,c,u]);return{filteredEnchantments:d,filters:t,totalCount:e.length,filteredCount:d.length}},Ote=({className:e,showFilters:t=!0,enchantments:s,viewMode:n="grid",onEnchantmentClick:a})=>{const{filteredEnchantments:i,totalCount:o,filteredCount:l}=zte(),c=s||i;return r.jsxs("div",{className:$("space-y-6",e),children:[t&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(Lte,{}),l!==o&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",l," of ",o," enchantments"]})]}),r.jsx(Dte,{enchantments:c,loading:!1,viewMode:n,onEnchantmentClick:a})]})},Bte=z.memo(({enchantment:e,open:t,onOpenChange:s,className:n})=>{const{data:a}=za(),i=e,o=i?a.findIndex(m=>m.baseEnchantmentId===i.baseEnchantmentId):-1,l=o>0,c=o<a.length-1,u=()=>{l&&i&&(a[o-1],s(!1))},d=()=>{c&&i&&(a[o+1],s(!1))},f=()=>{s(!1)};return i?r.jsx(Yi,{open:t,onOpenChange:s,side:"right",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:i.name}),r.jsx(G,{variant:"ghost",size:"sm",onClick:f,className:"h-8 w-8 p-0",children:r.jsx(ze,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs(G,{variant:"outline",size:"sm",onClick:u,disabled:!l,className:"flex items-center gap-2",children:[r.jsx(Cm,{className:"h-4 w-4"}),"Previous"]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[o+1," of ",a.length]}),r.jsxs(G,{variant:"outline",size:"sm",onClick:d,disabled:!c,className:"flex items-center gap-2",children:["Next",r.jsx(El,{className:"h-4 w-4"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(xn,{type:"category",value:i.category,size:"lg"}),r.jsx(xn,{type:"targetType",value:i.targetType,size:"lg"})]}),i.hasEffects&&r.jsx("div",{children:r.jsx(tu,{effects:i.effects,title:"Enchantment Effects",showDescriptions:!0,compact:!1})}),r.jsx("div",{children:r.jsx(ox,{items:i.foundOnItems,title:"Items that can carry this enchantment",showType:!0,compact:!1})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Can be applied to:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:i.isWeaponEnchantment?r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"Weapons"}):i.wornRestrictions.map((m,g)=>r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200",children:Li(m)},g))})]})]})]})}):null}),Ite=()=>{const{loading:e,error:t,data:s}=za(),{load:n}=za();return h.useEffect(()=>{s.length===0&&!e&&n()},[s.length,e,n]),t?r.jsxs("div",{className:"p-4 text-red-600",children:["Error loading enchantments: ",t]}):null};function ei({title:e,value:t,description:s,icon:n,trend:a,trendValue:i,className:o,variant:l="default"}){const c=()=>{switch(a){case"up":return r.jsx(Dr,{className:"h-4 w-4 text-green-500"});case"down":return r.jsx(Fc,{className:"h-4 w-4 text-red-500"});case"neutral":return r.jsx(Po,{className:"h-4 w-4 text-gray-500"});default:return null}},u=()=>{switch(l){case"highlight":return"border-primary/20 bg-primary/5";case"muted":return"border-muted bg-muted/20";default:return"border-border bg-card"}};return r.jsxs(ae,{className:$("transition-all duration-200 hover:shadow-md",u(),o),children:[r.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ve,{className:"text-sm font-medium text-muted-foreground",children:e}),n&&r.jsx("div",{className:"text-muted-foreground",children:n})]}),r.jsx(oe,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-2xl font-bold",children:typeof t=="number"?t.toLocaleString():t}),s&&r.jsx("p",{className:"text-xs text-muted-foreground",children:s})]}),a&&r.jsxs("div",{className:"flex items-center gap-1",children:[c(),i&&r.jsx("span",{className:$("text-xs font-medium",a==="up"&&"text-green-600",a==="down"&&"text-red-600",a==="neutral"&&"text-gray-600"),children:i})]})]})})]})}function gl({title:e,description:t,children:s,className:n,isLoading:a=!1,error:i,height:o="h-64"}){return r.jsxs(ae,{className:$("transition-all duration-200",n),children:[r.jsxs(de,{className:"pb-3",children:[r.jsx(ve,{className:"text-lg font-semibold",children:e}),t&&r.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),r.jsx(oe,{children:r.jsx("div",{className:$("w-full",o),children:a?r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading chart..."})]})}):i?r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-sm text-destructive",children:i})})}):s})})]})}function $te({data:e,total:t,className:s,title:n="Category Breakdown",description:a="Distribution of enchantments by category"}){if(!e||e.length===0)return r.jsx(gl,{title:n,description:a,className:s,error:"No data available"});const i=Math.max(...e.map(o=>o.value));return r.jsx(gl,{title:n,description:a,className:s,children:r.jsx("div",{className:"space-y-3",children:e.map((o,l)=>{const c=t>0?o.value/t*100:0,u=i>0?o.value/i*100:0;return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"font-medium truncate",children:o.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{variant:"secondary",className:"text-xs",children:o.value}),r.jsxs("span",{className:"text-muted-foreground text-xs",children:[c.toFixed(1),"%"]})]})]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:r.jsx("div",{className:$("h-2 rounded-full transition-all duration-300","bg-gradient-to-r from-blue-500 to-blue-600"),style:{width:`${u}%`}})})]},o.name)})})})}const vj=["bg-blue-500","bg-green-500","bg-yellow-500","bg-red-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500"];function Fte({data:e,total:t,className:s}){return!e||e.length===0?r.jsx(gl,{title:"Target Type Distribution",description:"Distribution of enchantments by target type",className:s,error:"No data available"}):r.jsx(gl,{title:"Target Type Distribution",description:"Distribution of enchantments by target type",className:s,children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.map((n,a)=>{const i=t>0?n.value/t*100:0,o=vj[a%vj.length];return r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border",children:[r.jsx("div",{className:$("w-4 h-4 rounded-full",o)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium truncate",children:n.name}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.value," (",i.toFixed(1),"%)"]})]})]},n.name)})})}),r.jsxs("div",{className:"lg:w-48 space-y-3",children:[r.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted",children:[r.jsx("div",{className:"text-2xl font-bold",children:t}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Enchantments"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted",children:[r.jsx("div",{className:"text-2xl font-bold",children:e.length}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Target Types"})]})]})]})})}function bj({title:e,description:t,data:s,columns:n,className:a,maxRows:i,sortBy:o,sortDirection:l,onSort:c}){const[u,d]=h.useState(null),[f,m]=h.useState("desc"),g=x=>{c?c(x):u===x?m(f==="asc"?"desc":"asc"):(d(x),m("desc"))},b=h.useMemo(()=>{const x=o||u,w=l||f;return x?[...s].sort((N,j)=>{const _=N[x],k=j[x];if(typeof _=="string"&&typeof k=="string"){const A=_.localeCompare(k);return w==="asc"?A:-A}return typeof _=="number"&&typeof k=="number"?w==="asc"?_-k:k-_:0}):s},[s,o,u,l,f]),y=i?b.slice(0,i):b,v=x=>{const w=o||u,N=l||f;return w!==x?r.jsx($4,{className:"h-4 w-4"}):N==="asc"?r.jsx(H4,{className:"h-4 w-4"}):r.jsx(L4,{className:"h-4 w-4"})},p=(x,w)=>{const N=x[w.key];return w.render?w.render(N,x):typeof N=="number"?N.toLocaleString():typeof N=="string"?N:String(N)};return r.jsxs(ae,{className:$("transition-all duration-200",a),children:[r.jsxs(de,{className:"pb-3",children:[r.jsx(ve,{className:"text-lg font-semibold",children:e}),t&&r.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),r.jsx(oe,{children:r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b",children:n.map(x=>r.jsx("th",{className:$("px-4 py-2 text-left text-sm font-medium text-muted-foreground",x.sortable&&"cursor-pointer hover:text-foreground",x.className),onClick:()=>x.sortable&&g(x.key),children:r.jsxs("div",{className:"flex items-center gap-1",children:[x.label,x.sortable&&v(x.key)]})},String(x.key)))})}),r.jsx("tbody",{children:y.map((x,w)=>r.jsx("tr",{className:"border-b border-border/50 hover:bg-muted/50 transition-colors",children:n.map(N=>r.jsx("td",{className:$("px-4 py-3 text-sm",N.className),children:p(x,N)},String(N.key)))},w))})]}),i&&s.length>i&&r.jsx("div",{className:"mt-4 text-center",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",i," of ",s.length," items"]})})]})})]})}function Hte({data:e,total:t,className:s}){if(!e||e.length===0)return r.jsx(bj,{title:"Top Effects",description:"Most common enchantment effects",data:[],columns:[],className:s,error:"No data available"});const n=[{key:"name",label:"Effect Name",sortable:!0},{key:"count",label:"Occurrences",sortable:!0,render:i=>r.jsx(Q,{variant:"secondary",children:i.toLocaleString()})},{key:"percentage",label:"Percentage",sortable:!0,render:(i,o)=>{const l=t>0?o.count/t*100:0;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-16 bg-muted rounded-full h-2",children:r.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-green-500 to-green-600",style:{width:`${Math.min(l,100)}%`}})}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[l.toFixed(1),"%"]})]})}}],a=e.map(i=>({...i,percentage:t>0?i.count/t*100:0}));return r.jsx(bj,{title:"Top Effects",description:"Most common enchantment effects",data:a,columns:n,className:s,maxRows:10})}function Ute({data:e,total:t,className:s}){if(!e||e.length===0)return r.jsx(gl,{title:"Item Type Distribution",description:"Distribution of items that can be enchanted",className:s,error:"No data available"});const n=Math.max(...e.map(a=>a.value));return r.jsx(gl,{title:"Item Type Distribution",description:"Distribution of items that can be enchanted",className:s,height:"h-80",children:r.jsx("div",{className:"space-y-3",children:e.map((a,i)=>{const o=t>0?a.value/t*100:0,l=n>0?a.value/n*100:0;return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"font-medium truncate",children:a.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{variant:"outline",className:"text-xs",children:a.value}),r.jsxs("span",{className:"text-muted-foreground text-xs",children:[o.toFixed(1),"%"]})]})]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:r.jsx("div",{className:$("h-2 rounded-full transition-all duration-300","bg-gradient-to-r from-purple-500 to-purple-600"),style:{width:`${l}%`}})})]},a.name)})})})}function Gte(){const{data:e}=za();return h.useMemo(()=>{if(!e||e.length===0)return{totalEnchantments:0,categoryBreakdown:{},targetTypeDistribution:{},pluginSources:{},topEffects:[],itemTypeDistribution:{},averageEffectsPerEnchantment:0,enchantmentsWithWornRestrictions:0,totalEffects:0,totalItems:0,uniqueEffects:0,uniqueItemTypes:0};const t={},s={},n={},a={},i={};let o=0,l=0,c=0;e.forEach(g=>{const b=g.category||"Unknown";t[b]=(t[b]||0)+1;const y=g.targetType||"Unknown";s[y]=(s[y]||0)+1;const v=g.plugin||"Unknown";n[v]=(n[v]||0)+1,g.effects.forEach(p=>{const x=p.name||"Unknown Effect";a[x]=(a[x]||0)+1,o++}),g.foundOnItems.forEach(p=>{const x=p.type||"Unknown";i[x]=(i[x]||0)+1,l++}),g.wornRestrictions&&g.wornRestrictions.length>0&&c++});const u=Object.entries(a).map(([g,b])=>({name:g,count:b})).sort((g,b)=>b.count-g.count).slice(0,10),d=o/e.length,f=Object.keys(a).length,m=Object.keys(i).length;return{totalEnchantments:e.length,categoryBreakdown:t,targetTypeDistribution:s,pluginSources:n,topEffects:u,itemTypeDistribution:i,averageEffectsPerEnchantment:Math.round(d*100)/100,enchantmentsWithWornRestrictions:c,totalEffects:o,totalItems:l,uniqueEffects:f,uniqueItemTypes:m}},[e])}function Vte(e){return h.useMemo(()=>{const t=Object.entries(e.categoryBreakdown).map(([i,o])=>({name:i,value:o})).sort((i,o)=>o.value-i.value),s=Object.entries(e.targetTypeDistribution).map(([i,o])=>({name:i,value:o})).sort((i,o)=>o.value-i.value),n=Object.entries(e.pluginSources).map(([i,o])=>({name:i,value:o})).sort((i,o)=>o.value-i.value),a=Object.entries(e.itemTypeDistribution).map(([i,o])=>({name:i,value:o})).sort((i,o)=>o.value-i.value).slice(0,15);return{categoryData:t,targetTypeData:s,pluginData:n,itemTypeData:a,effectsData:e.topEffects}},[e])}function qte({className:e}){const t=Gte(),s=Vte(t);return r.jsxs("div",{className:$("space-y-6",e),children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Enchantment Statistics"}),r.jsx("p",{className:"text-muted-foreground",children:"Comprehensive analytics and insights about enchantment data"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(ei,{title:"Total Enchantments",value:t.totalEnchantments,description:"All available enchantments",icon:r.jsx(yn,{className:"h-4 w-4"}),variant:"highlight"}),r.jsx(ei,{title:"Unique Effects",value:t.uniqueEffects,description:"Different effect types",icon:r.jsx(St,{className:"h-4 w-4"})}),r.jsx(ei,{title:"Item Types",value:t.uniqueItemTypes,description:"Different item categories",icon:r.jsx(p0,{className:"h-4 w-4"})}),r.jsx(ei,{title:"Avg Effects/Enchantment",value:t.averageEffectsPerEnchantment,description:"Average effects per enchantment",icon:r.jsx(q4,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(ei,{title:"Total Effects",value:t.totalEffects,description:"All effect instances",icon:r.jsx(Dr,{className:"h-4 w-4"}),variant:"muted"}),r.jsx(ei,{title:"Total Items",value:t.totalItems,description:"All item instances",icon:r.jsx(rt,{className:"h-4 w-4"}),variant:"muted"}),r.jsx(ei,{title:"With Worn Restrictions",value:t.enchantmentsWithWornRestrictions,description:"Enchantments with restrictions",icon:r.jsx($n,{className:"h-4 w-4"}),variant:"muted"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx($te,{data:s.categoryData,total:t.totalEnchantments}),r.jsx(Fte,{data:s.targetTypeData,total:t.totalEnchantments})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(Hte,{data:s.effectsData,total:t.totalEffects}),r.jsx(Ute,{data:s.itemTypeData,total:t.totalItems})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Summary"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Data Coverage"}),r.jsxs("div",{className:"text-muted-foreground",children:[t.totalEnchantments," enchantments available"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Effect Diversity"}),r.jsxs("div",{className:"text-muted-foreground",children:[t.uniqueEffects," unique effects with ",t.averageEffectsPerEnchantment," average per enchantment"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Item Coverage"}),r.jsxs("div",{className:"text-muted-foreground",children:[t.uniqueItemTypes," item types with ",t.totalItems," total instances"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Restrictions"}),r.jsxs("div",{className:"text-muted-foreground",children:[t.enchantmentsWithWornRestrictions," enchantments have worn restrictions"]})]})]})]})]})}function Qte(){const[e,t]=h.useState(null),[s,n]=h.useState(!1),[a]=bk(),{data:i}=za(),[o,l]=h.useState("grid"),[c,u]=h.useState([]),{viewState:d,setViewState:f}=za(),{sortBy:m,sortOrder:g}=d,{filteredEnchantments:b}=Rte(i,c),y=h.useMemo(()=>{if(!i||i.length===0)return[];const w=[...new Set(i.filter(N=>N.isArmorEnchantment).flatMap(N=>N.wornRestrictions).filter(Boolean))].sort();return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, effects, or description...",options:[]},{id:"categories",name:"Categories",placeholder:"Filter by what can be enchanted...",options:[{id:"category-weapon",label:"Weapon",value:"weapon",category:"Categories",description:"Weapon enchantments"},{id:"category-armor",label:"Armor",value:"armor",category:"Categories",description:"Armor enchantments"}]},{id:"armor-restrictions",name:"Armor Restrictions",placeholder:"Filter by armor type restrictions...",options:w.map(N=>({id:`restriction-${N}`,label:Li(N),value:N,category:"Armor Restrictions",description:`Enchantments restricted to ${Li(N)}`}))}]},[i]),v=w=>{let N;typeof w=="string"?N={id:`custom-${w}`,label:w,value:w,category:"Fuzzy Search"}:N={id:`${w.category}-${w.id}`,label:w.label,value:w.value,category:w.category},c.some(j=>j.value===N.value&&j.category===N.category)||u(j=>[...j,N])},p=w=>{u(N=>N.filter(j=>j.id!==w))},x=()=>{u([])};return h.useEffect(()=>{a.get("selected")},[a]),r.jsxs(Ut,{title:"Enchantments",description:`Explore the vast collection of ${i.length} enchantments available in the world. Discover powerful effects, find items that carry these enchantments, and understand the restrictions that govern their use.`,children:[r.jsx(Ite,{}),r.jsx(Bte,{enchantment:e,open:s,onOpenChange:n}),r.jsxs(qa,{defaultValue:"enchantments",className:"w-full",children:[r.jsxs(Qa,{className:"mb-4",children:[r.jsx(kt,{value:"enchantments",children:"Enchantments"}),r.jsx(kt,{value:"statistics",children:"Statistics"})]}),r.jsxs(At,{value:"enchantments",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx("div",{className:"flex-1",children:r.jsx(ta,{categories:y,onSelect:v,onCustomSearch:v})})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(Km,{viewMode:o,onViewModeChange:l}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:m,onChange:w=>f({sortBy:w.target.value}),className:"appearance-none bg-background border border-border rounded-lg px-3 py-1.5 pr-8 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer",children:[r.jsx("option",{value:"name",children:"Sort: A-Z"}),r.jsx("option",{value:"targetType",children:"Sort: Ench Target"}),r.jsx("option",{value:"wornRestrictions",children:"Sort: Worn Restrictions"})]}),r.jsx(vt,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]})]}),c.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("button",{onClick:x,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[r.jsx(ze,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),c.map(w=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>p(w.id),title:"Click to remove",children:[w.label,r.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},w.id))]}),r.jsx(Ote,{showFilters:!1,enchantments:b,viewMode:o,className:"mt-4",onEnchantmentClick:w=>{t(w),n(!0)}})]}),r.jsx(At,{value:"statistics",children:r.jsxs(ae,{className:"border-skyrim-gold/20",children:[r.jsx(de,{children:r.jsx(ve,{className:"text-skyrim-gold flex items-center gap-2",children:"ðŸ“Š Enchantment Statistics"})}),r.jsx(oe,{children:r.jsx(qte,{})})]})})]}),r.jsx(Tu,{threshold:400})]})}function Zte(){return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(Vi,{children:"Equipment"}),r.jsx(Uc,{children:"Browse and compare weapons, armor, and items"})]}),r.jsxs(ae,{children:[r.jsxs(de,{children:[r.jsx(ve,{children:"Coming Soon"}),r.jsx(pn,{children:"Equipment database is under development"})]}),r.jsx(oe,{children:r.jsx(Uc,{children:"This section will provide a comprehensive database of all equipment in the game."})})]})]})}const Wte=()=>{const{build:e,getSummary:t}=Ye(),s=lt(),n=t();return!e.name&&!e.race?r.jsxs(ae,{className:"border-dashed border-2 border-muted",children:[r.jsxs(de,{children:[r.jsx(ve,{className:"text-lg",children:"No Character Build"}),r.jsx(pn,{children:"Start building your character to see it here"})]}),r.jsx(oe,{children:r.jsx(G,{onClick:()=>s("/build"),className:"w-full",children:"Create Character Build"})})]}):r.jsxs(ae,{children:[r.jsxs(de,{children:[r.jsxs(ve,{className:"text-lg flex items-center justify-between",children:[r.jsx("span",{children:n.name}),r.jsx(G,{variant:"outline",size:"sm",onClick:()=>s("/build"),children:"Edit"})]}),r.jsx(pn,{children:"Current character build status"})]}),r.jsxs(oe,{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Race:"}),r.jsx(Q,{variant:"secondary",className:"ml-2",children:n.race})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Birth Sign:"}),r.jsx(Q,{variant:"secondary",className:"ml-2",children:n.stone})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Religion:"}),r.jsx(Q,{variant:"secondary",className:"ml-2",children:n.religion})]})]}),r.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:[n.traitCount," traits"]}),r.jsx("span",{children:"â€¢"}),r.jsxs("span",{children:[n.majorSkillCount," major skills"]}),r.jsx("span",{children:"â€¢"}),r.jsxs("span",{children:[n.minorSkillCount," minor skills"]}),r.jsx("span",{children:"â€¢"}),r.jsxs("span",{children:[n.equipmentCount," equipment"]})]})]})]})};function Yte(){const e=lt(),t=()=>{e("/build")},s=[{name:"GigaPlanner",description:"Advanced build planner with detailed skill trees and optimization",url:"https://multidyls.github.io/GigaPlanner",icon:r.jsx(xf,{className:"h-5 w-5 text-primary"}),category:"Build Planning",author:"Multidyls"},{name:"Character Builder GPT",description:"AI-powered character creation assistant with personalized build recommendations",url:"https://chatgpt.com/g/g-68462f6313d48191bab174806a049ca4-lorerim-builds-wizard-v2?model=gpt-4o",icon:r.jsx(sk,{className:"h-5 w-5 text-primary"}),category:"AI Assistant",author:"Zoldyg"},{name:"Alchemy Calculator",description:"Comprehensive alchemy crafting and ingredient database with detailed recipes",url:"https://docs.google.com/spreadsheets/d/1zUVCaRlqHX_sER-kJR-ZLIAfsFbTj9FQCO-hMfnp4XA/edit?gid=2066962651#gid=2066962651",icon:r.jsx(yn,{className:"h-5 w-5 text-primary"}),category:"Crafting",author:"Rudy"},{name:"Spell List Google Sheet",description:"Lorerim Spell List Google Sheet",url:"https://docs.google.com/spreadsheets/d/1fvYHRfwAprpgEPaXyuteEx0ud9S572noYnlpVq6cJFs/edit?gid=915313506#gid=915313506",icon:r.jsx(Qn,{className:"h-5 w-5 text-primary"}),category:"Spells",author:"ImmatureTurtles"},{name:"Weapons Discussion Hub",description:"Deep dive into weapon mechanics, damage calculations, and optimization strategies",url:"https://discord.com/channels/622647066719420427/1382033558754955354",icon:r.jsx(ki,{className:"h-5 w-5 text-primary"}),category:"Combat",author:"Deo"},{name:"Spin Wheel Tool",description:"Random build generator and challenge creator for fun playthroughs",url:"https://sorathesaint.github.io/Wheel-of-classes-for-LoreRim-Arcaneum",icon:r.jsx(Ma,{className:"h-5 w-5 text-primary"}),category:"Fun",author:"Sora the Saint"}],n=a=>{a!=="#"&&window.open(a,"_blank","noopener,noreferrer")};return r.jsx("div",{className:"bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-12",children:[r.jsxs("div",{className:"text-left space-y-6",children:[r.jsx("div",{className:"flex items-center gap-3 mb-4 justify-start",children:r.jsx(Vi,{className:"text-4xl md:text-6xl font-bold text-foreground",children:"Lorerim Arcaneum"})}),r.jsx(PS,{className:"text-xl md:text-2xl text-muted-foreground",children:"A growing collection of Lorerim tools and resources. Build characters, explore mechanics, and contribute to the community."}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Big thanks to Biggie Boss"})]}),r.jsx("div",{className:"max-w-md",children:r.jsx(Wte,{})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[r.jsx(yf,{className:"h-6 w-6 text-primary"}),"Character Building"]}),r.jsx("p",{className:"text-muted-foreground",children:"Create and customize your character from scratch"})]}),r.jsxs(ae,{className:"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card",onClick:t,children:[r.jsxs(de,{children:[r.jsxs(ve,{className:"flex items-center gap-2 group-hover:text-primary transition-colors text-card-foreground",children:[r.jsx(yn,{className:"h-5 w-5"}),"Start Character Build"]}),r.jsx(pn,{className:"text-muted-foreground",children:"Design your character with races, traits, birthsigns, and more"})]}),r.jsx(oe,{children:r.jsxs(G,{className:"w-full group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:["Begin Building",r.jsx(B4,{className:"ml-2 h-4 w-4"})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(ae,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/race"),children:r.jsxs(oe,{className:"p-4 text-center",children:[r.jsx(h5,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),r.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Races"})]})}),r.jsx(ae,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/birth-signs"),children:r.jsxs(oe,{className:"p-4 text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:"â­"}),r.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Birthsigns"})]})}),r.jsx(ae,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/traits"),children:r.jsxs(oe,{className:"p-4 text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:"ðŸŽ¯"}),r.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Traits"})]})}),r.jsx(ae,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/perks"),children:r.jsxs(oe,{className:"p-4 text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:"âš”ï¸"}),r.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Skills"})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[r.jsx(Mr,{className:"h-6 w-6 text-primary"}),"Quick Access"]}),r.jsx("p",{className:"text-muted-foreground",children:"Jump directly to specific tools and features"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(ae,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/search"),children:r.jsx(oe,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Mr,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-card-foreground",children:"Advanced Search"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Detailed search with filters"})]})]})})}),r.jsx(ae,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/spells"),children:r.jsx(oe,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(yn,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-card-foreground",children:"Spells"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Browse and search spells"})]})]})})}),r.jsx(ae,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/cookbook"),children:r.jsx(oe,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(K1,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-card-foreground",children:"Cookbook"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Crafting recipes & guides"})]})]})})})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[r.jsx(xf,{className:"h-6 w-6 text-primary"}),"Favorite Tools"]}),r.jsx("p",{className:"text-muted-foreground",children:"Discover the best external tools and resources for Lorerim theorycrafting"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((a,i)=>r.jsxs(ae,{className:"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card",onClick:()=>n(a.url),children:[r.jsxs(de,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[a.icon,r.jsx(ve,{className:"text-lg group-hover:text-primary transition-colors text-card-foreground",children:a.name})]}),r.jsx($r,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"text-xs font-medium text-primary/80 bg-primary/10 px-2 py-1 rounded-full",children:a.category}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["by ",a.author]})]})]}),r.jsx(oe,{className:"pt-0",children:r.jsx(pn,{className:"text-muted-foreground",children:a.description})})]},i))})]}),r.jsx("div",{className:"text-left pt-8 border-t border-border",children:r.jsx("p",{className:"text-muted-foreground",children:"Crafted by Bardic (Jeremy) Noel, with gratitude to Biggie Boss and the Lorerim community"})})]})})}function Xte(){const e=lt();return r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:[r.jsx(Vi,{className:"text-4xl font-bold text-skyrim-gold mb-2",children:"Page Not Found"}),r.jsx(pe,{className:"text-skyrim-gold/70 mb-6",children:"Sorry, the page you are looking for does not exist or is not ready yet."}),r.jsx(G,{variant:"default",onClick:()=>e("/"),children:"Return Home"})]})}const Kte=()=>r.jsxs(_P,{children:[r.jsx(gt,{path:"/",element:r.jsx(Yte,{})}),r.jsxs(gt,{path:"/build",element:r.jsx(PI,{}),children:[r.jsx(gt,{index:!0,element:r.jsx(Ete,{})}),r.jsx(gt,{path:"race",element:r.jsx(fE,{})}),r.jsx(gt,{path:"birth-signs",element:r.jsx(v9,{})}),r.jsx(gt,{path:"traits",element:r.jsx(xte,{})}),r.jsx(gt,{path:"religions",element:r.jsx(OW,{})}),r.jsx(gt,{path:"destiny",element:r.jsx(zW,{})}),r.jsx(gt,{path:"perks",element:r.jsx(XN,{})})]}),r.jsx(gt,{path:"/spells",element:r.jsx(gte,{})}),r.jsx(gt,{path:"/cookbook",element:r.jsx(wW,{})}),r.jsx(gt,{path:"/alchemy",element:r.jsx(uW,{})}),r.jsx(gt,{path:"/search",element:r.jsx(RY,{})}),r.jsx(gt,{path:"/virtual-masonry-demo",element:r.jsx(MY,{})}),r.jsx(gt,{path:"/races-mva-demo",element:r.jsx(Q9,{})}),r.jsx(gt,{path:"/skills-mva",element:r.jsx(XN,{})}),r.jsx(gt,{path:"/skills-experimental",element:r.jsx(Zee,{})}),r.jsx(gt,{path:"/equipment",element:r.jsx(Zte,{})}),r.jsx(gt,{path:"/crafting",element:r.jsx(Ate,{})}),r.jsx(gt,{path:"/enchantments",element:r.jsx(Qte,{})}),r.jsx(gt,{path:"*",element:r.jsx(Xte,{})})]});function Jte(){const{theme:e,setTheme:t}=DS(),s=()=>{t(e==="light"?"dark":e==="dark"?"system":"light")},n=()=>{switch(e){case"light":return r.jsx(gb,{className:"h-4 w-4"});case"dark":return r.jsx(F3,{className:"h-4 w-4"});case"system":return r.jsx(I3,{className:"h-4 w-4"});default:return r.jsx(gb,{className:"h-4 w-4"})}};return r.jsxs(G,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:s,title:`Current theme: ${e}. Click to cycle themes.`,children:[n(),r.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function ese({sidebarCollapsed:e,onToggleSidebar:t,isMobile:s=!1,MobileDrawerTrigger:n}){return r.jsxs("header",{className:"sticky top-0 w-full h-12 flex items-center bg-background border-b border-skyrim-gold/20 px-2 shadow-sm backdrop-blur-sm",style:{zIndex:_t.HEADER,backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:[s&&n?r.jsx("div",{className:"mr-2",children:r.jsx(n,{})}):r.jsx("button",{onClick:t,"aria-label":e?"Open sidebar":"Close sidebar",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 mr-2",children:r.jsx(P3,{className:"w-5 h-5 text-skyrim-gold transition-transform duration-200 group-hover:rotate-12"})}),r.jsx("span",{className:"text-skyrim-gold font-bold text-base tracking-tight select-none",children:"Lorerim Arcaneum"}),r.jsx("span",{className:"ml-2 text-xs text-skyrim-gold/60 select-none",children:"Theorycrafting Hub"}),r.jsx("div",{className:"flex-1 max-w-md mx-4",children:r.jsx(EY,{placeholder:"Search skills, races, traits...",className:"w-full"})}),r.jsx("div",{className:"ml-auto",children:r.jsx(Jte,{})})]})}const JR=[{label:"Character Build",items:[{to:"/build",label:"Build"},{to:"/build/race",label:"Race"},{to:"/build/birth-signs",label:"Birth Signs"},{to:"/build/traits",label:"Traits"},{to:"/build/religions",label:"Religion"},{to:"/build/destiny",label:"Destiny"},{to:"/build/perks",label:"Skills and Perks"}]},{label:"Docs",items:[{to:"/spells",label:"Spells"},{to:"/cookbook",label:"Food and Alcohol"},{to:"/alchemy",label:"Alchemy"},{to:"/enchantments",label:"Enchantments"}]}];function tse({onNavigate:e}){const t=lt(),s=window.location.hash.replace(/^#\/?/,"/"),n=(a,i)=>{const o=window.location.hash,[l,c]=o.split("?"),d=new URLSearchParams(c||"").get("b");d?window.location.hash=`${a}?b=${d}`:t(a),e(i)};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-4 border-b border-skyrim-gold/20",children:r.jsxs("button",{onClick:()=>n("/",!0),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[r.jsx(J1,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),r.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:JR.map(a=>r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:a.label}),r.jsx("div",{className:"space-y-1",children:a.items.map(i=>{const o=s===i.to;return r.jsx("button",{onClick:()=>n(i.to,!0),className:`w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] active:scale-[0.98] cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 ${o?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent"}`,children:i.label},i.to)})})]},a.label))}),r.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[r.jsx(pe,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),r.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:"âš™ï¸ Settings"})]})]})}function sse({collapsed:e,onNavigate:t}){const s=lt(),n=window.location.hash.replace(/^#\/?/,"/"),a=i=>{const o=window.location.hash,[l,c]=o.split("?"),d=new URLSearchParams(c||"").get("b");d?window.location.hash=`${i}?b=${d}`:s(i)};return r.jsxs(lR,{collapsed:e,children:[r.jsx(dR,{children:!e&&r.jsxs("button",{onClick:()=>a("/"),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[r.jsx(J1,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),r.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),r.jsx(cR,{children:JR.map(i=>r.jsxs(uR,{children:[!e&&r.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:i.label}),r.jsx(fR,{children:i.items.map(o=>{const l=n===o.to;return r.jsx(hR,{children:r.jsx(mR,{asChild:!0,isActive:l,onClick:()=>a(o.to),tabIndex:0,children:r.jsx("span",{className:"w-full text-left truncate",children:o.label})})},o.to)})})]},i.label))}),!e&&r.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[r.jsx(pe,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),r.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:"âš™ï¸ Settings"})]}),r.jsx(gR,{})]})}function nse({onNavigate:e}){const[t,s]=h.useState(!1),n=a=>{a&&s(!1)};return r.jsxs(tl,{open:t,onOpenChange:s,children:[r.jsx(SS,{asChild:!0,children:r.jsx("button",{"aria-label":"Open navigation menu",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:r.jsx("svg",{className:"w-5 h-5 text-skyrim-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),r.jsx(Ci,{side:"left",className:"p-0 w-80",children:r.jsx("div",{className:"flex flex-col h-full",children:r.jsx(tse,{onNavigate:n})})})]})}function ase(){const[e,t]=h.useState(!0),[s,n]=h.useState(!1);return JZ(),h.useEffect(()=>{const a=()=>n(window.innerWidth<768);return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),r.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[r.jsx(ese,{sidebarCollapsed:e,onToggleSidebar:()=>t(a=>!a),isMobile:s,MobileDrawerTrigger:()=>r.jsx(nse,{onNavigate:()=>{}})}),r.jsxs("div",{className:"flex flex-1",children:[!s&&r.jsx("div",{className:`transition-all duration-300 ease-in-out ${e?"w-0 overflow-hidden":"w-64"}`,style:{zIndex:_t.SIDEBAR},children:r.jsx(sse,{collapsed:e,onNavigate:a=>{a&&t(!0)}})}),r.jsx("main",{className:"flex-1 transition-all duration-300 ease-in-out min-w-0",children:r.jsx(Kte,{})})]}),r.jsx(WZ,{})]})}function rse(){return r.jsx(XP,{children:r.jsx(E4,{children:r.jsx(ase,{})})})}var eT={exports:{}},Nh={},tT={exports:{}},sT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,B){var L=P.length;P.push(B);e:for(;0<L;){var D=L-1>>>1,I=P[D];if(0<a(I,B))P[D]=B,P[L]=I,L=D;else break e}}function s(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var B=P[0],L=P.pop();if(L!==B){P[0]=L;e:for(var D=0,I=P.length,F=I>>>1;D<F;){var U=2*(D+1)-1,H=P[U],Z=U+1,K=P[Z];if(0>a(H,L))Z<I&&0>a(K,H)?(P[D]=K,P[Z]=L,D=Z):(P[D]=H,P[U]=L,D=U);else if(Z<I&&0>a(K,L))P[D]=K,P[Z]=L,D=Z;else break e}}return B}function a(P,B){var L=P.sortIndex-B.sortIndex;return L!==0?L:P.id-B.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,g=!1,b=!1,y=!1,v=!1,p=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function N(P){for(var B=s(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=P)n(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=s(u)}}function j(P){if(y=!1,N(P),!b)if(s(c)!==null)b=!0,_||(_=!0,E());else{var B=s(u);B!==null&&O(j,B.startTime-P)}}var _=!1,k=-1,A=5,S=-1;function C(){return v?!0:!(e.unstable_now()-S<A)}function M(){if(v=!1,_){var P=e.unstable_now();S=P;var B=!0;try{e:{b=!1,y&&(y=!1,x(k),k=-1),g=!0;var L=m;try{t:{for(N(P),f=s(c);f!==null&&!(f.expirationTime>P&&C());){var D=f.callback;if(typeof D=="function"){f.callback=null,m=f.priorityLevel;var I=D(f.expirationTime<=P);if(P=e.unstable_now(),typeof I=="function"){f.callback=I,N(P),B=!0;break t}f===s(c)&&n(c),N(P)}else n(c);f=s(c)}if(f!==null)B=!0;else{var F=s(u);F!==null&&O(j,F.startTime-P),B=!1}}break e}finally{f=null,m=L,g=!1}B=void 0}}finally{B?E():_=!1}}}var E;if(typeof w=="function")E=function(){w(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,T=R.port2;R.port1.onmessage=M,E=function(){T.postMessage(null)}}else E=function(){p(M,0)};function O(P,B){k=p(function(){P(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(P){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var L=m;m=B;try{return P()}finally{m=L}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var L=m;m=P;try{return B()}finally{m=L}},e.unstable_scheduleCallback=function(P,B,L){var D=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?D+L:D):L=D,P){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=L+I,P={id:d++,callback:B,priorityLevel:P,startTime:L,expirationTime:I,sortIndex:-1},L>D?(P.sortIndex=L,t(u,P),s(c)===null&&P===s(u)&&(y?(x(k),k=-1):y=!0,O(j,L-D))):(P.sortIndex=I,t(c,P),b||g||(b=!0,_||(_=!0,E()))),P},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(P){var B=m;return function(){var L=m;m=B;try{return P.apply(this,arguments)}finally{m=L}}}})(sT);tT.exports=sT;var ise=tT.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ot=ise,nT=h,ose=Tm;function Y(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function aT(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fu(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function rT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wj(e){if(Fu(e)!==e)throw Error(Y(188))}function lse(e){var t=e.alternate;if(!t){if(t=Fu(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return wj(a),e;if(i===n)return wj(a),t;i=i.sibling}throw Error(Y(188))}if(s.return!==n.return)s=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(s.alternate!==n)throw Error(Y(190))}if(s.tag!==3)throw Error(Y(188));return s.stateNode.current===s?e:t}function iT(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=iT(e),t!==null)return t;e=e.sibling}return null}var st=Object.assign,cse=Symbol.for("react.element"),Td=Symbol.for("react.transitional.element"),xc=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),oT=Symbol.for("react.strict_mode"),fx=Symbol.for("react.profiler"),use=Symbol.for("react.provider"),lT=Symbol.for("react.consumer"),Na=Symbol.for("react.context"),cv=Symbol.for("react.forward_ref"),mx=Symbol.for("react.suspense"),hx=Symbol.for("react.suspense_list"),uv=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),gx=Symbol.for("react.activity"),dse=Symbol.for("react.memo_cache_sentinel"),Nj=Symbol.iterator;function ac(e){return e===null||typeof e!="object"?null:(e=Nj&&e[Nj]||e["@@iterator"],typeof e=="function"?e:null)}var fse=Symbol.for("react.client.reference");function px(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fse?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case No:return"Fragment";case fx:return"Profiler";case oT:return"StrictMode";case mx:return"Suspense";case hx:return"SuspenseList";case gx:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case xc:return"Portal";case Na:return(e.displayName||"Context")+".Provider";case lT:return(e._context.displayName||"Context")+".Consumer";case cv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uv:return t=e.displayName||null,t!==null?t:px(e.type)||"Memo";case or:t=e._payload,e=e._init;try{return px(e(t))}catch{}}return null}var yc=Array.isArray,ge=nT.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie=ose.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xi={pending:!1,data:null,method:null,action:null},xx=[],jo=-1;function aa(e){return{current:e}}function Gt(e){0>jo||(e.current=xx[jo],xx[jo]=null,jo--)}function ot(e,t){jo++,xx[jo]=e.current,e.current=t}var Gn=aa(null),au=aa(null),kr=aa(null),Yf=aa(null);function Xf(e,t){switch(ot(kr,t),ot(au,e),ot(Gn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?C1(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=C1(t),e=SD(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Gt(Gn),ot(Gn,e)}function pl(){Gt(Gn),Gt(au),Gt(kr)}function yx(e){e.memoizedState!==null&&ot(Yf,e);var t=Gn.current,s=SD(t,e.type);t!==s&&(ot(au,e),ot(Gn,s))}function Kf(e){au.current===e&&(Gt(Gn),Gt(au)),Yf.current===e&&(Gt(Yf),hu._currentValue=xi)}var vx=Object.prototype.hasOwnProperty,dv=Ot.unstable_scheduleCallback,Mg=Ot.unstable_cancelCallback,mse=Ot.unstable_shouldYield,hse=Ot.unstable_requestPaint,Vn=Ot.unstable_now,gse=Ot.unstable_getCurrentPriorityLevel,cT=Ot.unstable_ImmediatePriority,uT=Ot.unstable_UserBlockingPriority,Jf=Ot.unstable_NormalPriority,pse=Ot.unstable_LowPriority,dT=Ot.unstable_IdlePriority,xse=Ot.log,yse=Ot.unstable_setDisableYieldValue,Hu=null,Os=null;function pr(e){if(typeof xse=="function"&&yse(e),Os&&typeof Os.setStrictMode=="function")try{Os.setStrictMode(Hu,e)}catch{}}var Bs=Math.clz32?Math.clz32:wse,vse=Math.log,bse=Math.LN2;function wse(e){return e>>>=0,e===0?32:31-(vse(e)/bse|0)|0}var Md=256,Dd=4194304;function ni(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function jh(e,t,s){var n=e.pendingLanes;if(n===0)return 0;var a=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var l=n&134217727;return l!==0?(n=l&~i,n!==0?a=ni(n):(o&=l,o!==0?a=ni(o):s||(s=l&~e,s!==0&&(a=ni(s))))):(l=n&~i,l!==0?a=ni(l):o!==0?a=ni(o):s||(s=n&~e,s!==0&&(a=ni(s)))),a===0?0:t!==0&&t!==a&&!(t&i)&&(i=a&-a,s=t&-t,i>=s||i===32&&(s&4194048)!==0)?t:a}function Uu(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Nse(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fT(){var e=Md;return Md<<=1,!(Md&4194048)&&(Md=256),e}function mT(){var e=Dd;return Dd<<=1,!(Dd&62914560)&&(Dd=4194304),e}function Dg(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Gu(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function jse(e,t,s,n,a,i){var o=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,u=e.hiddenUpdates;for(s=o&~s;0<s;){var d=31-Bs(s),f=1<<d;l[d]=0,c[d]=-1;var m=u[d];if(m!==null)for(u[d]=null,d=0;d<m.length;d++){var g=m[d];g!==null&&(g.lane&=-536870913)}s&=~f}n!==0&&hT(e,n,0),i!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=i&~(o&~t))}function hT(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-Bs(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|s&4194090}function gT(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Bs(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}function fv(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mv(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function pT(){var e=Ie.p;return e!==0?e:(e=window.event,e===void 0?32:LD(e.type))}function kse(e,t){var s=Ie.p;try{return Ie.p=e,t()}finally{Ie.p=s}}var Zr=Math.random().toString(36).slice(2),ss="__reactFiber$"+Zr,js="__reactProps$"+Zr,Hl="__reactContainer$"+Zr,bx="__reactEvents$"+Zr,Sse="__reactListeners$"+Zr,_se="__reactHandles$"+Zr,jj="__reactResources$"+Zr,Vu="__reactMarker$"+Zr;function hv(e){delete e[ss],delete e[js],delete e[bx],delete e[Sse],delete e[_se]}function ko(e){var t=e[ss];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Hl]||s[ss]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=R1(e);e!==null;){if(s=e[ss])return s;e=R1(e)}return t}e=s,s=e.parentNode}return null}function Ul(e){if(e=e[ss]||e[Hl]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function vc(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(Y(33))}function Ho(e){var t=e[jj];return t||(t=e[jj]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ft(e){e[Vu]=!0}var xT=new Set,yT={};function Ji(e,t){xl(e,t),xl(e+"Capture",t)}function xl(e,t){for(yT[e]=t,e=0;e<t.length;e++)xT.add(t[e])}var Cse=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kj={},Sj={};function Ese(e){return vx.call(Sj,e)?!0:vx.call(kj,e)?!1:Cse.test(e)?Sj[e]=!0:(kj[e]=!0,!1)}function nf(e,t,s){if(Ese(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Pd(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function ha(e,t,s,n){if(n===null)e.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+n)}}var Pg,_j;function xo(e){if(Pg===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Pg=t&&t[1]||"",_j=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pg+e+_j}var Lg=!1;function zg(e,t){if(!e||Lg)return"";Lg=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(g){var m=g}Reflect.construct(e,[],f)}else{try{f.call()}catch(g){m=g}e.call(f.prototype)}}else{try{throw Error()}catch(g){m=g}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(g){if(g&&m&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),o=i[0],l=i[1];if(o&&l){var c=o.split(`
`),u=l.split(`
`);for(a=n=0;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;for(;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;if(n===c.length||a===u.length)for(n=c.length-1,a=u.length-1;1<=n&&0<=a&&c[n]!==u[a];)a--;for(;1<=n&&0<=a;n--,a--)if(c[n]!==u[a]){if(n!==1||a!==1)do if(n--,a--,0>a||c[n]!==u[a]){var d=`
`+c[n].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=n&&0<=a);break}}}finally{Lg=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?xo(s):""}function Ase(e){switch(e.tag){case 26:case 27:case 5:return xo(e.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 15:return zg(e.type,!1);case 11:return zg(e.type.render,!1);case 1:return zg(e.type,!0);case 31:return xo("Activity");default:return""}}function Cj(e){try{var t="";do t+=Ase(e),e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Qs(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rse(e){var t=vT(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function em(e){e._valueTracker||(e._valueTracker=Rse(e))}function bT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=vT(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function tm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Tse=/[\n"\\]/g;function Ys(e){return e.replace(Tse,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function wx(e,t,s,n,a,i,o,l){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Qs(t)):e.value!==""+Qs(t)&&(e.value=""+Qs(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?Nx(e,o,Qs(t)):s!=null?Nx(e,o,Qs(s)):n!=null&&e.removeAttribute("value"),a==null&&i!=null&&(e.defaultChecked=!!i),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Qs(l):e.removeAttribute("name")}function wT(e,t,s,n,a,i,o,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||s!=null){if(!(i!=="submit"&&i!=="reset"||t!=null))return;s=s!=null?""+Qs(s):"",t=t!=null?""+Qs(t):s,l||t===e.value||(e.value=t),e.defaultValue=t}n=n??a,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=l?e.checked:!!n,e.defaultChecked=!!n,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function Nx(e,t,s){t==="number"&&tm(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Uo(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+Qs(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function NT(e,t,s){if(t!=null&&(t=""+Qs(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Qs(s):""}function jT(e,t,s,n){if(t==null){if(n!=null){if(s!=null)throw Error(Y(92));if(yc(n)){if(1<n.length)throw Error(Y(93));n=n[0]}s=n}s==null&&(s=""),t=s}s=Qs(t),e.defaultValue=s,n=e.textContent,n===s&&n!==""&&n!==null&&(e.value=n)}function yl(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Mse=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ej(e,t,s){var n=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,s):typeof s!="number"||s===0||Mse.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function kT(e,t,s){if(t!=null&&typeof t!="object")throw Error(Y(62));if(e=e.style,s!=null){for(var n in s)!s.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&s[a]!==n&&Ej(e,a,n)}else for(var i in t)t.hasOwnProperty(i)&&Ej(e,i,t[i])}function gv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dse=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pse=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function af(e){return Pse.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var jx=null;function pv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var So=null,Go=null;function Aj(e){var t=Ul(e);if(t&&(e=t.stateNode)){var s=e[js]||null;e:switch(e=t.stateNode,t.type){case"input":if(wx(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ys(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=n[js]||null;if(!a)throw Error(Y(90));wx(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<s.length;t++)n=s[t],n.form===e.form&&bT(n)}break e;case"textarea":NT(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Uo(e,!!s.multiple,t,!1)}}}var Og=!1;function ST(e,t,s){if(Og)return e(t,s);Og=!0;try{var n=e(t);return n}finally{if(Og=!1,(So!==null||Go!==null)&&(Dh(),So&&(t=So,e=Go,Go=So=null,Aj(t),e)))for(t=0;t<e.length;t++)Aj(e[t])}}function ru(e,t){var s=e.stateNode;if(s===null)return null;var n=s[js]||null;if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Y(231,t,typeof s));return s}var $a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kx=!1;if($a)try{var rc={};Object.defineProperty(rc,"passive",{get:function(){kx=!0}}),window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{kx=!1}var xr=null,xv=null,rf=null;function _T(){if(rf)return rf;var e,t=xv,s=t.length,n,a="value"in xr?xr.value:xr.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===a[i-n];n++);return rf=a.slice(e,1<n?1-n:void 0)}function of(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ld(){return!0}function Rj(){return!1}function _s(e){function t(s,n,a,i,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ld:Rj,this.isPropagationStopped=Rj,this}return st(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ld)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ld)},persist:function(){},isPersistent:Ld}),t}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kh=_s(eo),qu=st({},eo,{view:0,detail:0}),Lse=_s(qu),Bg,Ig,ic,Sh=st({},qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ic&&(ic&&e.type==="mousemove"?(Bg=e.screenX-ic.screenX,Ig=e.screenY-ic.screenY):Ig=Bg=0,ic=e),Bg)},movementY:function(e){return"movementY"in e?e.movementY:Ig}}),Tj=_s(Sh),zse=st({},Sh,{dataTransfer:0}),Ose=_s(zse),Bse=st({},qu,{relatedTarget:0}),$g=_s(Bse),Ise=st({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),$se=_s(Ise),Fse=st({},eo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hse=_s(Fse),Use=st({},eo,{data:0}),Mj=_s(Use),Gse={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vse={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qse={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qse(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qse[e])?!!t[e]:!1}function yv(){return Qse}var Zse=st({},qu,{key:function(e){if(e.key){var t=Gse[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=of(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vse[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yv,charCode:function(e){return e.type==="keypress"?of(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?of(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wse=_s(Zse),Yse=st({},Sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dj=_s(Yse),Xse=st({},qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yv}),Kse=_s(Xse),Jse=st({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ene=_s(Jse),tne=st({},Sh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sne=_s(tne),nne=st({},eo,{newState:0,oldState:0}),ane=_s(nne),rne=[9,13,27,32],vv=$a&&"CompositionEvent"in window,kc=null;$a&&"documentMode"in document&&(kc=document.documentMode);var ine=$a&&"TextEvent"in window&&!kc,CT=$a&&(!vv||kc&&8<kc&&11>=kc),Pj=" ",Lj=!1;function ET(e,t){switch(e){case"keyup":return rne.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _o=!1;function one(e,t){switch(e){case"compositionend":return AT(t);case"keypress":return t.which!==32?null:(Lj=!0,Pj);case"textInput":return e=t.data,e===Pj&&Lj?null:e;default:return null}}function lne(e,t){if(_o)return e==="compositionend"||!vv&&ET(e,t)?(e=_T(),rf=xv=xr=null,_o=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return CT&&t.locale!=="ko"?null:t.data;default:return null}}var cne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cne[e.type]:t==="textarea"}function RT(e,t,s,n){So?Go?Go.push(n):Go=[n]:So=n,t=vm(t,"onChange"),0<t.length&&(s=new kh("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Sc=null,iu=null;function une(e){ND(e,0)}function _h(e){var t=vc(e);if(bT(t))return e}function Oj(e,t){if(e==="change")return t}var TT=!1;if($a){var Fg;if($a){var Hg="oninput"in document;if(!Hg){var Bj=document.createElement("div");Bj.setAttribute("oninput","return;"),Hg=typeof Bj.oninput=="function"}Fg=Hg}else Fg=!1;TT=Fg&&(!document.documentMode||9<document.documentMode)}function Ij(){Sc&&(Sc.detachEvent("onpropertychange",MT),iu=Sc=null)}function MT(e){if(e.propertyName==="value"&&_h(iu)){var t=[];RT(t,iu,e,pv(e)),ST(une,t)}}function dne(e,t,s){e==="focusin"?(Ij(),Sc=t,iu=s,Sc.attachEvent("onpropertychange",MT)):e==="focusout"&&Ij()}function fne(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _h(iu)}function mne(e,t){if(e==="click")return _h(t)}function hne(e,t){if(e==="input"||e==="change")return _h(t)}function gne(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hs=typeof Object.is=="function"?Object.is:gne;function ou(e,t){if(Hs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!vx.call(t,a)||!Hs(e[a],t[a]))return!1}return!0}function $j(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fj(e,t){var s=$j(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=$j(s)}}function DT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?DT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function PT(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=tm(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=tm(e.document)}return t}function bv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var pne=$a&&"documentMode"in document&&11>=document.documentMode,Co=null,Sx=null,_c=null,_x=!1;function Hj(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;_x||Co==null||Co!==tm(n)||(n=Co,"selectionStart"in n&&bv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_c&&ou(_c,n)||(_c=n,n=vm(Sx,"onSelect"),0<n.length&&(t=new kh("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Co)))}function ti(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Eo={animationend:ti("Animation","AnimationEnd"),animationiteration:ti("Animation","AnimationIteration"),animationstart:ti("Animation","AnimationStart"),transitionrun:ti("Transition","TransitionRun"),transitionstart:ti("Transition","TransitionStart"),transitioncancel:ti("Transition","TransitionCancel"),transitionend:ti("Transition","TransitionEnd")},Ug={},LT={};$a&&(LT=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function to(e){if(Ug[e])return Ug[e];if(!Eo[e])return e;var t=Eo[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in LT)return Ug[e]=t[s];return e}var zT=to("animationend"),OT=to("animationiteration"),BT=to("animationstart"),xne=to("transitionrun"),yne=to("transitionstart"),vne=to("transitioncancel"),IT=to("transitionend"),$T=new Map,Cx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cx.push("scrollEnd");function Cn(e,t){$T.set(e,t),Ji(t,[e])}var Uj=new WeakMap;function Xs(e,t){if(typeof e=="object"&&e!==null){var s=Uj.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Cj(t)},Uj.set(e,t),t)}return{value:e,source:t,stack:Cj(t)}}var qs=[],Ao=0,wv=0;function Ch(){for(var e=Ao,t=wv=Ao=0;t<e;){var s=qs[t];qs[t++]=null;var n=qs[t];qs[t++]=null;var a=qs[t];qs[t++]=null;var i=qs[t];if(qs[t++]=null,n!==null&&a!==null){var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}i!==0&&FT(s,a,i)}}function Eh(e,t,s,n){qs[Ao++]=e,qs[Ao++]=t,qs[Ao++]=s,qs[Ao++]=n,wv|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Nv(e,t,s,n){return Eh(e,t,s,n),sm(e)}function Gl(e,t){return Eh(e,null,null,t),sm(e)}function FT(e,t,s){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s);for(var a=!1,i=e.return;i!==null;)i.childLanes|=s,n=i.alternate,n!==null&&(n.childLanes|=s),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(a=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,a&&t!==null&&(a=31-Bs(s),e=i.hiddenUpdates,n=e[a],n===null?e[a]=[t]:n.push(t),t.lane=s|536870912),i):null}function sm(e){if(50<zc)throw zc=0,Zx=null,Error(Y(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ro={};function bne(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(e,t,s,n){return new bne(e,t,s,n)}function jv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ra(e,t){var s=e.alternate;return s===null?(s=Ls(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function HT(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function lf(e,t,s,n,a,i){var o=0;if(n=e,typeof e=="function")jv(e)&&(o=1);else if(typeof e=="string")o=Nae(e,s,Gn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case gx:return e=Ls(31,s,t,a),e.elementType=gx,e.lanes=i,e;case No:return yi(s.children,a,i,t);case oT:o=8,a|=24;break;case fx:return e=Ls(12,s,t,a|2),e.elementType=fx,e.lanes=i,e;case mx:return e=Ls(13,s,t,a),e.elementType=mx,e.lanes=i,e;case hx:return e=Ls(19,s,t,a),e.elementType=hx,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case use:case Na:o=10;break e;case lT:o=9;break e;case cv:o=11;break e;case uv:o=14;break e;case or:o=16,n=null;break e}o=29,s=Error(Y(130,e===null?"null":typeof e,"")),n=null}return t=Ls(o,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function yi(e,t,s,n){return e=Ls(7,e,n,t),e.lanes=s,e}function Gg(e,t,s){return e=Ls(6,e,null,t),e.lanes=s,e}function Vg(e,t,s){return t=Ls(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var To=[],Mo=0,nm=null,am=0,Zs=[],Ws=0,vi=null,ja=1,ka="";function ai(e,t){To[Mo++]=am,To[Mo++]=nm,nm=e,am=t}function UT(e,t,s){Zs[Ws++]=ja,Zs[Ws++]=ka,Zs[Ws++]=vi,vi=e;var n=ja;e=ka;var a=32-Bs(n)-1;n&=~(1<<a),s+=1;var i=32-Bs(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ja=1<<32-Bs(t)+a|s<<a|n,ka=i+e}else ja=1<<i|s<<a|n,ka=e}function kv(e){e.return!==null&&(ai(e,1),UT(e,1,0))}function Sv(e){for(;e===nm;)nm=To[--Mo],To[Mo]=null,am=To[--Mo],To[Mo]=null;for(;e===vi;)vi=Zs[--Ws],Zs[Ws]=null,ka=Zs[--Ws],Zs[Ws]=null,ja=Zs[--Ws],Zs[Ws]=null}var rs=null,pt=null,Be=!1,bi=null,zn=!1,Ex=Error(Y(519));function zi(e){var t=Error(Y(418,""));throw lu(Xs(t,e)),Ex}function Gj(e){var t=e.stateNode,s=e.type,n=e.memoizedProps;switch(t[ss]=e,t[js]=n,s){case"dialog":Te("cancel",t),Te("close",t);break;case"iframe":case"object":case"embed":Te("load",t);break;case"video":case"audio":for(s=0;s<du.length;s++)Te(du[s],t);break;case"source":Te("error",t);break;case"img":case"image":case"link":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"input":Te("invalid",t),wT(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),em(t);break;case"select":Te("invalid",t);break;case"textarea":Te("invalid",t),jT(t,n.value,n.defaultValue,n.children),em(t)}s=n.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||n.suppressHydrationWarning===!0||kD(t.textContent,s)?(n.popover!=null&&(Te("beforetoggle",t),Te("toggle",t)),n.onScroll!=null&&Te("scroll",t),n.onScrollEnd!=null&&Te("scrollend",t),n.onClick!=null&&(t.onclick=zh),t=!0):t=!1,t||zi(e)}function Vj(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:rs=rs.return}}function oc(e){if(e!==rs)return!1;if(!Be)return Vj(e),Be=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||e0(e.type,e.memoizedProps)),s=!s),s&&pt&&zi(e),Vj(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(t===0){pt=bn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++;e=e.nextSibling}pt=null}}else t===27?(t=pt,Wr(e.type)?(e=n0,n0=null,pt=e):pt=t):pt=rs?bn(e.stateNode.nextSibling):null;return!0}function Qu(){pt=rs=null,Be=!1}function qj(){var e=bi;return e!==null&&(bs===null?bs=e:bs.push.apply(bs,e),bi=null),e}function lu(e){bi===null?bi=[e]:bi.push(e)}var Ax=aa(null),so=null,Sa=null;function ur(e,t,s){ot(Ax,t._currentValue),t._currentValue=s}function Ta(e){e._currentValue=Ax.current,Gt(Ax)}function Rx(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function Tx(e,t,s,n){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var i=a.dependencies;if(i!==null){var o=a.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=s,l=i.alternate,l!==null&&(l.lanes|=s),Rx(i.return,s,e),n||(o=null);break e}i=l.next}}else if(a.tag===18){if(o=a.return,o===null)throw Error(Y(341));o.lanes|=s,i=o.alternate,i!==null&&(i.lanes|=s),Rx(o,s,e),o=null}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}}function Zu(e,t,s,n){e=null;for(var a=t,i=!1;a!==null;){if(!i){if(a.flags&524288)i=!0;else if(a.flags&262144)break}if(a.tag===10){var o=a.alternate;if(o===null)throw Error(Y(387));if(o=o.memoizedProps,o!==null){var l=a.type;Hs(a.pendingProps.value,o.value)||(e!==null?e.push(l):e=[l])}}else if(a===Yf.current){if(o=a.alternate,o===null)throw Error(Y(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(hu):e=[hu])}a=a.return}e!==null&&Tx(t,e,s,n),t.flags|=262144}function rm(e){for(e=e.firstContext;e!==null;){if(!Hs(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Oi(e){so=e,Sa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ns(e){return GT(so,e)}function zd(e,t){return so===null&&Oi(e),GT(e,t)}function GT(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Sa===null){if(e===null)throw Error(Y(308));Sa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Sa=Sa.next=t;return s}var wne=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Nne=Ot.unstable_scheduleCallback,jne=Ot.unstable_NormalPriority,Lt={$$typeof:Na,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _v(){return{controller:new wne,data:new Map,refCount:0}}function Wu(e){e.refCount--,e.refCount===0&&Nne(jne,function(){e.controller.abort()})}var Cc=null,Mx=0,vl=0,Vo=null;function kne(e,t){if(Cc===null){var s=Cc=[];Mx=0,vl=Wv(),Vo={status:"pending",value:void 0,then:function(n){s.push(n)}}}return Mx++,t.then(Qj,Qj),t}function Qj(){if(--Mx===0&&Cc!==null){Vo!==null&&(Vo.status="fulfilled");var e=Cc;Cc=null,vl=0,Vo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Sne(e,t){var s=[],n={status:"pending",value:null,reason:null,then:function(a){s.push(a)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var a=0;a<s.length;a++)(0,s[a])(t)},function(a){for(n.status="rejected",n.reason=a,a=0;a<s.length;a++)(0,s[a])(void 0)}),n}var Zj=ge.S;ge.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&kne(e,t),Zj!==null&&Zj(e,t)};var wi=aa(null);function Cv(){var e=wi.current;return e!==null?e:Je.pooledCache}function cf(e,t){t===null?ot(wi,wi.current):ot(wi,t.pool)}function VT(){var e=Cv();return e===null?null:{parent:Lt._currentValue,pool:e}}var Yu=Error(Y(460)),qT=Error(Y(474)),Ah=Error(Y(542)),Dx={then:function(){}};function Wj(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Od(){}function QT(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Od,Od),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Xj(e),e;default:if(typeof t.status=="string")t.then(Od,Od);else{if(e=Je,e!==null&&100<e.shellSuspendCounter)throw Error(Y(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=n}},function(n){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Xj(e),e}throw Ec=t,Yu}}var Ec=null;function Yj(){if(Ec===null)throw Error(Y(459));var e=Ec;return Ec=null,e}function Xj(e){if(e===Yu||e===Ah)throw Error(Y(483))}var lr=!1;function Ev(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Px(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Sr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _r(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ve&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=sm(e),FT(e,null,s),t}return Eh(e,n,t,s),sm(e)}function Ac(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,gT(e,s)}}function qg(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};i===null?a=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Lx=!1;function Rc(){if(Lx){var e=Vo;if(e!==null)throw e}}function Tc(e,t,s,n){Lx=!1;var a=e.updateQueue;lr=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane&-536870913,g=m!==l.lane;if(g?(Le&m)===m:(n&m)===m){m!==0&&m===vl&&(Lx=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var b=e,y=l;m=t;var v=s;switch(y.tag){case 1:if(b=y.payload,typeof b=="function"){f=b.call(v,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,m=typeof b=="function"?b.call(v,f,m):b,m==null)break e;f=st({},f,m);break e;case 2:lr=!0}}m=l.callback,m!==null&&(e.flags|=64,g&&(e.flags|=8192),g=a.callbacks,g===null?a.callbacks=[m]:g.push(m))}else g={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=f):d=d.next=g,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;g=l,l=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,i===null&&(a.shared.lanes=0),Ir|=o,e.lanes=o,e.memoizedState=f}}function ZT(e,t){if(typeof e!="function")throw Error(Y(191,e));e.call(t)}function WT(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)ZT(s[e],t)}var bl=aa(null),im=aa(0);function Kj(e,t){e=Ua,ot(im,e),ot(bl,t),Ua=e|t.baseLanes}function zx(){ot(im,Ua),ot(bl,bl.current)}function Av(){Ua=im.current,Gt(bl),Gt(im)}var Or=0,Ee=null,Qe=null,Et=null,om=!1,qo=!1,Bi=!1,lm=0,cu=0,Qo=null,_ne=0;function wt(){throw Error(Y(321))}function Rv(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Hs(e[s],t[s]))return!1;return!0}function Tv(e,t,s,n,a,i){return Or=i,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ge.H=e===null||e.memoizedState===null?_M:CM,Bi=!1,i=s(n,a),Bi=!1,qo&&(i=XT(t,s,n,a)),YT(e),i}function YT(e){ge.H=cm;var t=Qe!==null&&Qe.next!==null;if(Or=0,Et=Qe=Ee=null,om=!1,cu=0,Qo=null,t)throw Error(Y(300));e===null||Ht||(e=e.dependencies,e!==null&&rm(e)&&(Ht=!0))}function XT(e,t,s,n){Ee=e;var a=0;do{if(qo&&(Qo=null),cu=0,qo=!1,25<=a)throw Error(Y(301));if(a+=1,Et=Qe=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}ge.H=Dne,i=t(s,n)}while(qo);return i}function Cne(){var e=ge.H,t=e.useState()[0];return t=typeof t.then=="function"?Xu(t):t,e=e.useState()[0],(Qe!==null?Qe.memoizedState:null)!==e&&(Ee.flags|=1024),t}function Mv(){var e=lm!==0;return lm=0,e}function Dv(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Pv(e){if(om){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}om=!1}Or=0,Et=Qe=Ee=null,qo=!1,cu=lm=0,Qo=null}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ee.memoizedState=Et=e:Et=Et.next=e,Et}function Rt(){if(Qe===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=Et===null?Ee.memoizedState:Et.next;if(t!==null)Et=t,Qe=e;else{if(e===null)throw Ee.alternate===null?Error(Y(467)):Error(Y(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Et===null?Ee.memoizedState=Et=e:Et=Et.next=e}return Et}function Lv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xu(e){var t=cu;return cu+=1,Qo===null&&(Qo=[]),e=QT(Qo,e,t),t=Ee,(Et===null?t.memoizedState:Et.next)===null&&(t=t.alternate,ge.H=t===null||t.memoizedState===null?_M:CM),e}function Rh(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Xu(e);if(e.$$typeof===Na)return ns(e)}throw Error(Y(438,String(e)))}function zv(e){var t=null,s=Ee.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var n=Ee.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Lv(),Ee.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),n=0;n<e;n++)s[n]=dse;return t.index++,s}function Fa(e,t){return typeof t=="function"?t(e):t}function uf(e){var t=Rt();return Ov(t,Qe,e)}function Ov(e,t,s){var n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=s;var a=e.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}t.baseQueue=a=i,n.pending=null}if(i=e.baseState,a===null)e.memoizedState=i;else{t=a.next;var l=o=null,c=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(Le&f)===f:(Or&f)===f){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===vl&&(d=!0);else if((Or&m)===m){u=u.next,m===vl&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=f,o=i):c=c.next=f,Ee.lanes|=m,Ir|=m;f=u.action,Bi&&s(i,f),i=u.hasEagerState?u.eagerState:s(i,f)}else m={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=m,o=i):c=c.next=m,Ee.lanes|=f,Ir|=f;u=u.next}while(u!==null&&u!==t);if(c===null?o=i:c.next=l,!Hs(i,e.memoizedState)&&(Ht=!0,d&&(s=Vo,s!==null)))throw s;e.memoizedState=i,e.baseState=o,e.baseQueue=c,n.lastRenderedState=i}return a===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Qg(e){var t=Rt(),s=t.queue;if(s===null)throw Error(Y(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Hs(i,t.memoizedState)||(Ht=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function KT(e,t,s){var n=Ee,a=Rt(),i=Be;if(i){if(s===void 0)throw Error(Y(407));s=s()}else s=t();var o=!Hs((Qe||a).memoizedState,s);o&&(a.memoizedState=s,Ht=!0),a=a.queue;var l=tM.bind(null,n,a,e);if(Ku(2048,8,l,[e]),a.getSnapshot!==t||o||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,wl(9,Th(),eM.bind(null,n,a,s,t),null),Je===null)throw Error(Y(349));i||Or&124||JT(n,t,s)}return s}function JT(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ee.updateQueue,t===null?(t=Lv(),Ee.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function eM(e,t,s,n){t.value=s,t.getSnapshot=n,sM(t)&&nM(e)}function tM(e,t,s){return s(function(){sM(t)&&nM(e)})}function sM(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Hs(e,s)}catch{return!0}}function nM(e){var t=Gl(e,2);t!==null&&$s(t,e,2)}function Ox(e){var t=ys();if(typeof e=="function"){var s=e;if(e=s(),Bi){pr(!0);try{s()}finally{pr(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:e},t}function aM(e,t,s,n){return e.baseState=s,Ov(e,Qe,typeof n=="function"?n:Fa)}function Ene(e,t,s,n,a){if(Mh(e))throw Error(Y(485));if(e=t.action,e!==null){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){i.listeners.push(o)}};ge.T!==null?s(!0):i.isTransition=!1,n(i),s=t.pending,s===null?(i.next=t.pending=i,rM(t,i)):(i.next=s.next,t.pending=s.next=i)}}function rM(e,t){var s=t.action,n=t.payload,a=e.state;if(t.isTransition){var i=ge.T,o={};ge.T=o;try{var l=s(a,n),c=ge.S;c!==null&&c(o,l),Jj(e,t,l)}catch(u){Bx(e,t,u)}finally{ge.T=i}}else try{i=s(a,n),Jj(e,t,i)}catch(u){Bx(e,t,u)}}function Jj(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(n){e1(e,t,n)},function(n){return Bx(e,t,n)}):e1(e,t,s)}function e1(e,t,s){t.status="fulfilled",t.value=s,iM(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,rM(e,s)))}function Bx(e,t,s){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=s,iM(t),t=t.next;while(t!==n)}e.action=null}function iM(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oM(e,t){return t}function t1(e,t){if(Be){var s=Je.formState;if(s!==null){e:{var n=Ee;if(Be){if(pt){t:{for(var a=pt,i=zn;a.nodeType!==8;){if(!i){a=null;break t}if(a=bn(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){pt=bn(a.nextSibling),n=a.data==="F!";break e}}zi(n)}n=!1}n&&(t=s[0])}}return s=ys(),s.memoizedState=s.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oM,lastRenderedState:t},s.queue=n,s=jM.bind(null,Ee,n),n.dispatch=s,n=Ox(!1),i=Fv.bind(null,Ee,!1,n.queue),n=ys(),a={state:t,dispatch:null,action:e,pending:null},n.queue=a,s=Ene.bind(null,Ee,a,i,s),a.dispatch=s,n.memoizedState=e,[t,s,!1]}function s1(e){var t=Rt();return lM(t,Qe,e)}function lM(e,t,s){if(t=Ov(e,t,oM)[0],e=uf(Fa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Xu(t)}catch(o){throw o===Yu?Ah:o}else n=t;t=Rt();var a=t.queue,i=a.dispatch;return s!==t.memoizedState&&(Ee.flags|=2048,wl(9,Th(),Ane.bind(null,a,s),null)),[n,i,e]}function Ane(e,t){e.action=t}function n1(e){var t=Rt(),s=Qe;if(s!==null)return lM(t,s,e);Rt(),t=t.memoizedState,s=Rt();var n=s.queue.dispatch;return s.memoizedState=e,[t,n,!1]}function wl(e,t,s,n){return e={tag:e,create:s,deps:n,inst:t,next:null},t=Ee.updateQueue,t===null&&(t=Lv(),Ee.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e),e}function Th(){return{destroy:void 0,resource:void 0}}function cM(){return Rt().memoizedState}function df(e,t,s,n){var a=ys();n=n===void 0?null:n,Ee.flags|=e,a.memoizedState=wl(1|t,Th(),s,n)}function Ku(e,t,s,n){var a=Rt();n=n===void 0?null:n;var i=a.memoizedState.inst;Qe!==null&&n!==null&&Rv(n,Qe.memoizedState.deps)?a.memoizedState=wl(t,i,s,n):(Ee.flags|=e,a.memoizedState=wl(1|t,i,s,n))}function a1(e,t){df(8390656,8,e,t)}function uM(e,t){Ku(2048,8,e,t)}function dM(e,t){return Ku(4,2,e,t)}function fM(e,t){return Ku(4,4,e,t)}function mM(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hM(e,t,s){s=s!=null?s.concat([e]):null,Ku(4,4,mM.bind(null,t,e),s)}function Bv(){}function gM(e,t){var s=Rt();t=t===void 0?null:t;var n=s.memoizedState;return t!==null&&Rv(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function pM(e,t){var s=Rt();t=t===void 0?null:t;var n=s.memoizedState;if(t!==null&&Rv(t,n[1]))return n[0];if(n=e(),Bi){pr(!0);try{e()}finally{pr(!1)}}return s.memoizedState=[n,t],n}function Iv(e,t,s){return s===void 0||Or&1073741824?e.memoizedState=t:(e.memoizedState=s,e=iD(),Ee.lanes|=e,Ir|=e,s)}function xM(e,t,s,n){return Hs(s,t)?s:bl.current!==null?(e=Iv(e,s,n),Hs(e,t)||(Ht=!0),e):Or&42?(e=iD(),Ee.lanes|=e,Ir|=e,t):(Ht=!0,e.memoizedState=s)}function yM(e,t,s,n,a){var i=Ie.p;Ie.p=i!==0&&8>i?i:8;var o=ge.T,l={};ge.T=l,Fv(e,!1,t,s);try{var c=a(),u=ge.S;if(u!==null&&u(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=Sne(c,n);Mc(e,t,d,Is(e))}else Mc(e,t,n,Is(e))}catch(f){Mc(e,t,{then:function(){},status:"rejected",reason:f},Is())}finally{Ie.p=i,ge.T=o}}function Rne(){}function Ix(e,t,s,n){if(e.tag!==5)throw Error(Y(476));var a=vM(e).queue;yM(e,a,t,xi,s===null?Rne:function(){return bM(e),s(n)})}function vM(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:xi,baseState:xi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:xi},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function bM(e){var t=vM(e).next.queue;Mc(e,t,{},Is())}function $v(){return ns(hu)}function wM(){return Rt().memoizedState}function NM(){return Rt().memoizedState}function Tne(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Is();e=Sr(s);var n=_r(t,e,s);n!==null&&($s(n,t,s),Ac(n,t,s)),t={cache:_v()},e.payload=t;return}t=t.return}}function Mne(e,t,s){var n=Is();s={lane:n,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Mh(e)?kM(t,s):(s=Nv(e,t,s,n),s!==null&&($s(s,e,n),SM(s,t,n)))}function jM(e,t,s){var n=Is();Mc(e,t,s,n)}function Mc(e,t,s,n){var a={lane:n,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Mh(e))kM(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,s);if(a.hasEagerState=!0,a.eagerState=l,Hs(l,o))return Eh(e,t,a,0),Je===null&&Ch(),!1}catch{}finally{}if(s=Nv(e,t,a,n),s!==null)return $s(s,e,n),SM(s,t,n),!0}return!1}function Fv(e,t,s,n){if(n={lane:2,revertLane:Wv(),action:n,hasEagerState:!1,eagerState:null,next:null},Mh(e)){if(t)throw Error(Y(479))}else t=Nv(e,s,n,2),t!==null&&$s(t,e,2)}function Mh(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function kM(e,t){qo=om=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function SM(e,t,s){if(s&4194048){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,gT(e,s)}}var cm={readContext:ns,use:Rh,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt},_M={readContext:ns,use:Rh,useCallback:function(e,t){return ys().memoizedState=[e,t===void 0?null:t],e},useContext:ns,useEffect:a1,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,df(4194308,4,mM.bind(null,t,e),s)},useLayoutEffect:function(e,t){return df(4194308,4,e,t)},useInsertionEffect:function(e,t){df(4,2,e,t)},useMemo:function(e,t){var s=ys();t=t===void 0?null:t;var n=e();if(Bi){pr(!0);try{e()}finally{pr(!1)}}return s.memoizedState=[n,t],n},useReducer:function(e,t,s){var n=ys();if(s!==void 0){var a=s(t);if(Bi){pr(!0);try{s(t)}finally{pr(!1)}}}else a=t;return n.memoizedState=n.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},n.queue=e,e=e.dispatch=Mne.bind(null,Ee,e),[n.memoizedState,e]},useRef:function(e){var t=ys();return e={current:e},t.memoizedState=e},useState:function(e){e=Ox(e);var t=e.queue,s=jM.bind(null,Ee,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Bv,useDeferredValue:function(e,t){var s=ys();return Iv(s,e,t)},useTransition:function(){var e=Ox(!1);return e=yM.bind(null,Ee,e.queue,!0,!1),ys().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var n=Ee,a=ys();if(Be){if(s===void 0)throw Error(Y(407));s=s()}else{if(s=t(),Je===null)throw Error(Y(349));Le&124||JT(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,a1(tM.bind(null,n,i,e),[e]),n.flags|=2048,wl(9,Th(),eM.bind(null,n,i,s,t),null),s},useId:function(){var e=ys(),t=Je.identifierPrefix;if(Be){var s=ka,n=ja;s=(n&~(1<<32-Bs(n)-1)).toString(32)+s,t="Â«"+t+"R"+s,s=lm++,0<s&&(t+="H"+s.toString(32)),t+="Â»"}else s=_ne++,t="Â«"+t+"r"+s.toString(32)+"Â»";return e.memoizedState=t},useHostTransitionStatus:$v,useFormState:t1,useActionState:t1,useOptimistic:function(e){var t=ys();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Fv.bind(null,Ee,!0,s),s.dispatch=t,[e,t]},useMemoCache:zv,useCacheRefresh:function(){return ys().memoizedState=Tne.bind(null,Ee)}},CM={readContext:ns,use:Rh,useCallback:gM,useContext:ns,useEffect:uM,useImperativeHandle:hM,useInsertionEffect:dM,useLayoutEffect:fM,useMemo:pM,useReducer:uf,useRef:cM,useState:function(){return uf(Fa)},useDebugValue:Bv,useDeferredValue:function(e,t){var s=Rt();return xM(s,Qe.memoizedState,e,t)},useTransition:function(){var e=uf(Fa)[0],t=Rt().memoizedState;return[typeof e=="boolean"?e:Xu(e),t]},useSyncExternalStore:KT,useId:wM,useHostTransitionStatus:$v,useFormState:s1,useActionState:s1,useOptimistic:function(e,t){var s=Rt();return aM(s,Qe,e,t)},useMemoCache:zv,useCacheRefresh:NM},Dne={readContext:ns,use:Rh,useCallback:gM,useContext:ns,useEffect:uM,useImperativeHandle:hM,useInsertionEffect:dM,useLayoutEffect:fM,useMemo:pM,useReducer:Qg,useRef:cM,useState:function(){return Qg(Fa)},useDebugValue:Bv,useDeferredValue:function(e,t){var s=Rt();return Qe===null?Iv(s,e,t):xM(s,Qe.memoizedState,e,t)},useTransition:function(){var e=Qg(Fa)[0],t=Rt().memoizedState;return[typeof e=="boolean"?e:Xu(e),t]},useSyncExternalStore:KT,useId:wM,useHostTransitionStatus:$v,useFormState:n1,useActionState:n1,useOptimistic:function(e,t){var s=Rt();return Qe!==null?aM(s,Qe,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:zv,useCacheRefresh:NM},Zo=null,uu=0;function Bd(e){var t=uu;return uu+=1,Zo===null&&(Zo=[]),QT(Zo,e,t)}function lc(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Id(e,t){throw t.$$typeof===cse?Error(Y(525)):(e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function r1(e){var t=e._init;return t(e._payload)}function EM(e){function t(p,x){if(e){var w=p.deletions;w===null?(p.deletions=[x],p.flags|=16):w.push(x)}}function s(p,x){if(!e)return null;for(;x!==null;)t(p,x),x=x.sibling;return null}function n(p){for(var x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function a(p,x){return p=Ra(p,x),p.index=0,p.sibling=null,p}function i(p,x,w){return p.index=w,e?(w=p.alternate,w!==null?(w=w.index,w<x?(p.flags|=67108866,x):w):(p.flags|=67108866,x)):(p.flags|=1048576,x)}function o(p){return e&&p.alternate===null&&(p.flags|=67108866),p}function l(p,x,w,N){return x===null||x.tag!==6?(x=Gg(w,p.mode,N),x.return=p,x):(x=a(x,w),x.return=p,x)}function c(p,x,w,N){var j=w.type;return j===No?d(p,x,w.props.children,N,w.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===or&&r1(j)===x.type)?(x=a(x,w.props),lc(x,w),x.return=p,x):(x=lf(w.type,w.key,w.props,null,p.mode,N),lc(x,w),x.return=p,x)}function u(p,x,w,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=Vg(w,p.mode,N),x.return=p,x):(x=a(x,w.children||[]),x.return=p,x)}function d(p,x,w,N,j){return x===null||x.tag!==7?(x=yi(w,p.mode,N,j),x.return=p,x):(x=a(x,w),x.return=p,x)}function f(p,x,w){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Gg(""+x,p.mode,w),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Td:return w=lf(x.type,x.key,x.props,null,p.mode,w),lc(w,x),w.return=p,w;case xc:return x=Vg(x,p.mode,w),x.return=p,x;case or:var N=x._init;return x=N(x._payload),f(p,x,w)}if(yc(x)||ac(x))return x=yi(x,p.mode,w,null),x.return=p,x;if(typeof x.then=="function")return f(p,Bd(x),w);if(x.$$typeof===Na)return f(p,zd(p,x),w);Id(p,x)}return null}function m(p,x,w,N){var j=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return j!==null?null:l(p,x,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Td:return w.key===j?c(p,x,w,N):null;case xc:return w.key===j?u(p,x,w,N):null;case or:return j=w._init,w=j(w._payload),m(p,x,w,N)}if(yc(w)||ac(w))return j!==null?null:d(p,x,w,N,null);if(typeof w.then=="function")return m(p,x,Bd(w),N);if(w.$$typeof===Na)return m(p,x,zd(p,w),N);Id(p,w)}return null}function g(p,x,w,N,j){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return p=p.get(w)||null,l(x,p,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Td:return p=p.get(N.key===null?w:N.key)||null,c(x,p,N,j);case xc:return p=p.get(N.key===null?w:N.key)||null,u(x,p,N,j);case or:var _=N._init;return N=_(N._payload),g(p,x,w,N,j)}if(yc(N)||ac(N))return p=p.get(w)||null,d(x,p,N,j,null);if(typeof N.then=="function")return g(p,x,w,Bd(N),j);if(N.$$typeof===Na)return g(p,x,w,zd(x,N),j);Id(x,N)}return null}function b(p,x,w,N){for(var j=null,_=null,k=x,A=x=0,S=null;k!==null&&A<w.length;A++){k.index>A?(S=k,k=null):S=k.sibling;var C=m(p,k,w[A],N);if(C===null){k===null&&(k=S);break}e&&k&&C.alternate===null&&t(p,k),x=i(C,x,A),_===null?j=C:_.sibling=C,_=C,k=S}if(A===w.length)return s(p,k),Be&&ai(p,A),j;if(k===null){for(;A<w.length;A++)k=f(p,w[A],N),k!==null&&(x=i(k,x,A),_===null?j=k:_.sibling=k,_=k);return Be&&ai(p,A),j}for(k=n(k);A<w.length;A++)S=g(k,p,A,w[A],N),S!==null&&(e&&S.alternate!==null&&k.delete(S.key===null?A:S.key),x=i(S,x,A),_===null?j=S:_.sibling=S,_=S);return e&&k.forEach(function(M){return t(p,M)}),Be&&ai(p,A),j}function y(p,x,w,N){if(w==null)throw Error(Y(151));for(var j=null,_=null,k=x,A=x=0,S=null,C=w.next();k!==null&&!C.done;A++,C=w.next()){k.index>A?(S=k,k=null):S=k.sibling;var M=m(p,k,C.value,N);if(M===null){k===null&&(k=S);break}e&&k&&M.alternate===null&&t(p,k),x=i(M,x,A),_===null?j=M:_.sibling=M,_=M,k=S}if(C.done)return s(p,k),Be&&ai(p,A),j;if(k===null){for(;!C.done;A++,C=w.next())C=f(p,C.value,N),C!==null&&(x=i(C,x,A),_===null?j=C:_.sibling=C,_=C);return Be&&ai(p,A),j}for(k=n(k);!C.done;A++,C=w.next())C=g(k,p,A,C.value,N),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?A:C.key),x=i(C,x,A),_===null?j=C:_.sibling=C,_=C);return e&&k.forEach(function(E){return t(p,E)}),Be&&ai(p,A),j}function v(p,x,w,N){if(typeof w=="object"&&w!==null&&w.type===No&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Td:e:{for(var j=w.key;x!==null;){if(x.key===j){if(j=w.type,j===No){if(x.tag===7){s(p,x.sibling),N=a(x,w.props.children),N.return=p,p=N;break e}}else if(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===or&&r1(j)===x.type){s(p,x.sibling),N=a(x,w.props),lc(N,w),N.return=p,p=N;break e}s(p,x);break}else t(p,x);x=x.sibling}w.type===No?(N=yi(w.props.children,p.mode,N,w.key),N.return=p,p=N):(N=lf(w.type,w.key,w.props,null,p.mode,N),lc(N,w),N.return=p,p=N)}return o(p);case xc:e:{for(j=w.key;x!==null;){if(x.key===j)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){s(p,x.sibling),N=a(x,w.children||[]),N.return=p,p=N;break e}else{s(p,x);break}else t(p,x);x=x.sibling}N=Vg(w,p.mode,N),N.return=p,p=N}return o(p);case or:return j=w._init,w=j(w._payload),v(p,x,w,N)}if(yc(w))return b(p,x,w,N);if(ac(w)){if(j=ac(w),typeof j!="function")throw Error(Y(150));return w=j.call(w),y(p,x,w,N)}if(typeof w.then=="function")return v(p,x,Bd(w),N);if(w.$$typeof===Na)return v(p,x,zd(p,w),N);Id(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,x!==null&&x.tag===6?(s(p,x.sibling),N=a(x,w),N.return=p,p=N):(s(p,x),N=Gg(w,p.mode,N),N.return=p,p=N),o(p)):s(p,x)}return function(p,x,w,N){try{uu=0;var j=v(p,x,w,N);return Zo=null,j}catch(k){if(k===Yu||k===Ah)throw k;var _=Ls(29,k,null,p.mode);return _.lanes=N,_.return=p,_}finally{}}}var Nl=EM(!0),AM=EM(!1),an=aa(null),qn=null;function dr(e){var t=e.alternate;ot(zt,zt.current&1),ot(an,e),qn===null&&(t===null||bl.current!==null||t.memoizedState!==null)&&(qn=e)}function RM(e){if(e.tag===22){if(ot(zt,zt.current),ot(an,e),qn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(qn=e)}}else fr()}function fr(){ot(zt,zt.current),ot(an,an.current)}function _a(e){Gt(an),qn===e&&(qn=null),Gt(zt)}var zt=aa(0);function um(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s0(s)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Zg(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:st({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var $x={enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Is(),a=Sr(n);a.payload=t,s!=null&&(a.callback=s),t=_r(e,a,n),t!==null&&($s(t,e,n),Ac(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Is(),a=Sr(n);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=_r(e,a,n),t!==null&&($s(t,e,n),Ac(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Is(),n=Sr(s);n.tag=2,t!=null&&(n.callback=t),t=_r(e,n,s),t!==null&&($s(t,e,s),Ac(t,e,s))}};function i1(e,t,s,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!ou(s,n)||!ou(a,i):!0}function o1(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&$x.enqueueReplaceState(t,t.state,null)}function Ii(e,t){var s=t;if("ref"in t){s={};for(var n in t)n!=="ref"&&(s[n]=t[n])}if(e=e.defaultProps){s===t&&(s=st({},s));for(var a in e)s[a]===void 0&&(s[a]=e[a])}return s}var dm=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function TM(e){dm(e)}function MM(e){console.error(e)}function DM(e){dm(e)}function fm(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function l1(e,t,s){try{var n=e.onCaughtError;n(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Fx(e,t,s){return s=Sr(s),s.tag=3,s.payload={element:null},s.callback=function(){fm(e,t)},s}function PM(e){return e=Sr(e),e.tag=3,e}function LM(e,t,s,n){var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var i=n.value;e.payload=function(){return a(i)},e.callback=function(){l1(t,s,n)}}var o=s.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){l1(t,s,n),typeof a!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})})}function Pne(e,t,s,n,a){if(s.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=s.alternate,t!==null&&Zu(t,s,a,!0),s=an.current,s!==null){switch(s.tag){case 13:return qn===null?Wx():s.alternate===null&&xt===0&&(xt=3),s.flags&=-257,s.flags|=65536,s.lanes=a,n===Dx?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([n]):t.add(n),rp(e,n,a)),!1;case 22:return s.flags|=65536,n===Dx?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([n]):s.add(n)),rp(e,n,a)),!1}throw Error(Y(435,s.tag))}return rp(e,n,a),Wx(),!1}if(Be)return t=an.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==Ex&&(e=Error(Y(422),{cause:n}),lu(Xs(e,s)))):(n!==Ex&&(t=Error(Y(423),{cause:n}),lu(Xs(t,s))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,n=Xs(n,s),a=Fx(e.stateNode,n,a),qg(e,a),xt!==4&&(xt=2)),!1;var i=Error(Y(520),{cause:n});if(i=Xs(i,s),Lc===null?Lc=[i]:Lc.push(i),xt!==4&&(xt=2),t===null)return!0;n=Xs(n,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=a&-a,s.lanes|=e,e=Fx(s.stateNode,n,e),qg(s,e),!1;case 1:if(t=s.type,i=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Cr===null||!Cr.has(i))))return s.flags|=65536,a&=-a,s.lanes|=a,a=PM(a),LM(a,e,s,n),qg(s,a),!1}s=s.return}while(s!==null);return!1}var zM=Error(Y(461)),Ht=!1;function Wt(e,t,s,n){t.child=e===null?AM(t,null,s,n):Nl(t,e.child,s,n)}function c1(e,t,s,n,a){s=s.render;var i=t.ref;if("ref"in n){var o={};for(var l in n)l!=="ref"&&(o[l]=n[l])}else o=n;return Oi(t),n=Tv(e,t,s,o,i,a),l=Mv(),e!==null&&!Ht?(Dv(e,t,a),Ha(e,t,a)):(Be&&l&&kv(t),t.flags|=1,Wt(e,t,n,a),t.child)}function u1(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!jv(i)&&i.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=i,OM(e,t,i,n,a)):(e=lf(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!Hv(e,a)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:ou,s(o,n)&&e.ref===t.ref)return Ha(e,t,a)}return t.flags|=1,e=Ra(i,n),e.ref=t.ref,e.return=t,t.child=e}function OM(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(ou(i,n)&&e.ref===t.ref)if(Ht=!1,t.pendingProps=n=i,Hv(e,a))e.flags&131072&&(Ht=!0);else return t.lanes=e.lanes,Ha(e,t,a)}return Hx(e,t,s,n,a)}function BM(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if(t.flags&128){if(n=i!==null?i.baseLanes|s:s,e!==null){for(a=t.child=e.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;t.childLanes=i&~n}else t.childLanes=0,t.child=null;return d1(e,t,n,s)}if(s&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&cf(t,i!==null?i.cachePool:null),i!==null?Kj(t,i):zx(),RM(t);else return t.lanes=t.childLanes=536870912,d1(e,t,i!==null?i.baseLanes|s:s,s)}else i!==null?(cf(t,i.cachePool),Kj(t,i),fr(),t.memoizedState=null):(e!==null&&cf(t,null),zx(),fr());return Wt(e,t,a,s),t.child}function d1(e,t,s,n){var a=Cv();return a=a===null?null:{parent:Lt._currentValue,pool:a},t.memoizedState={baseLanes:s,cachePool:a},e!==null&&cf(t,null),zx(),RM(t),e!==null&&Zu(e,t,n,!0),null}function ff(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(Y(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Hx(e,t,s,n,a){return Oi(t),s=Tv(e,t,s,n,void 0,a),n=Mv(),e!==null&&!Ht?(Dv(e,t,a),Ha(e,t,a)):(Be&&n&&kv(t),t.flags|=1,Wt(e,t,s,a),t.child)}function f1(e,t,s,n,a,i){return Oi(t),t.updateQueue=null,s=XT(t,n,s,a),YT(e),n=Mv(),e!==null&&!Ht?(Dv(e,t,i),Ha(e,t,i)):(Be&&n&&kv(t),t.flags|=1,Wt(e,t,s,i),t.child)}function m1(e,t,s,n,a){if(Oi(t),t.stateNode===null){var i=Ro,o=s.contextType;typeof o=="object"&&o!==null&&(i=ns(o)),i=new s(n,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=$x,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=n,i.state=t.memoizedState,i.refs={},Ev(t),o=s.contextType,i.context=typeof o=="object"&&o!==null?ns(o):Ro,i.state=t.memoizedState,o=s.getDerivedStateFromProps,typeof o=="function"&&(Zg(t,s,o,n),i.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(o=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),o!==i.state&&$x.enqueueReplaceState(i,i.state,null),Tc(t,n,i,a),Rc(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){i=t.stateNode;var l=t.memoizedProps,c=Ii(s,l);i.props=c;var u=i.context,d=s.contextType;o=Ro,typeof d=="object"&&d!==null&&(o=ns(d));var f=s.getDerivedStateFromProps;d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||u!==o)&&o1(t,i,n,o),lr=!1;var m=t.memoizedState;i.state=m,Tc(t,n,i,a),Rc(),u=t.memoizedState,l||m!==u||lr?(typeof f=="function"&&(Zg(t,s,f,n),u=t.memoizedState),(c=lr||i1(t,s,c,n,m,u,o))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),i.props=n,i.state=u,i.context=o,n=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Px(e,t),o=t.memoizedProps,d=Ii(s,o),i.props=d,f=t.pendingProps,m=i.context,u=s.contextType,c=Ro,typeof u=="object"&&u!==null&&(c=ns(u)),l=s.getDerivedStateFromProps,(u=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==f||m!==c)&&o1(t,i,n,c),lr=!1,m=t.memoizedState,i.state=m,Tc(t,n,i,a),Rc();var g=t.memoizedState;o!==f||m!==g||lr||e!==null&&e.dependencies!==null&&rm(e.dependencies)?(typeof l=="function"&&(Zg(t,s,l,n),g=t.memoizedState),(d=lr||i1(t,s,d,n,m,g,c)||e!==null&&e.dependencies!==null&&rm(e.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),i.props=n,i.state=g,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return i=n,ff(e,t),n=(t.flags&128)!==0,i||n?(i=t.stateNode,s=n&&typeof s.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&n?(t.child=Nl(t,e.child,null,a),t.child=Nl(t,null,s,a)):Wt(e,t,s,a),t.memoizedState=i.state,e=t.child):e=Ha(e,t,a),e}function h1(e,t,s,n){return Qu(),t.flags|=256,Wt(e,t,s,n),t.child}var Wg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yg(e){return{baseLanes:e,cachePool:VT()}}function Xg(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=en),e}function IM(e,t,s){var n=t.pendingProps,a=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(zt.current&2)!==0),o&&(a=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(Be){if(a?dr(t):fr(),Be){var l=pt,c;if(c=l){e:{for(c=l,l=zn;c.nodeType!==8;){if(!l){l=null;break e}if(c=bn(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:vi!==null?{id:ja,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},c=Ls(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,rs=t,pt=null,c=!0):c=!1}c||zi(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return s0(l)?t.lanes=32:t.lanes=536870912,null;_a(t)}return l=n.children,n=n.fallback,a?(fr(),a=t.mode,l=mm({mode:"hidden",children:l},a),n=yi(n,a,s,null),l.return=t,n.return=t,l.sibling=n,t.child=l,a=t.child,a.memoizedState=Yg(s),a.childLanes=Xg(e,o,s),t.memoizedState=Wg,n):(dr(t),Ux(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(i)t.flags&256?(dr(t),t.flags&=-257,t=Kg(e,t,s)):t.memoizedState!==null?(fr(),t.child=e.child,t.flags|=128,t=null):(fr(),a=n.fallback,l=t.mode,n=mm({mode:"visible",children:n.children},l),a=yi(a,l,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,Nl(t,e.child,null,s),n=t.child,n.memoizedState=Yg(s),n.childLanes=Xg(e,o,s),t.memoizedState=Wg,t=a);else if(dr(t),s0(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var u=o.dgst;o=u,n=Error(Y(419)),n.stack="",n.digest=o,lu({value:n,source:null,stack:null}),t=Kg(e,t,s)}else if(Ht||Zu(e,t,s,!1),o=(s&e.childLanes)!==0,Ht||o){if(o=Je,o!==null&&(n=s&-s,n=n&42?1:fv(n),n=n&(o.suspendedLanes|s)?0:n,n!==0&&n!==c.retryLane))throw c.retryLane=n,Gl(e,n),$s(o,e,n),zM;l.data==="$?"||Wx(),t=Kg(e,t,s)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,pt=bn(l.nextSibling),rs=t,Be=!0,bi=null,zn=!1,e!==null&&(Zs[Ws++]=ja,Zs[Ws++]=ka,Zs[Ws++]=vi,ja=e.id,ka=e.overflow,vi=t),t=Ux(t,n.children),t.flags|=4096);return t}return a?(fr(),a=n.fallback,l=t.mode,c=e.child,u=c.sibling,n=Ra(c,{mode:"hidden",children:n.children}),n.subtreeFlags=c.subtreeFlags&65011712,u!==null?a=Ra(u,a):(a=yi(a,l,s,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,l=e.child.memoizedState,l===null?l=Yg(s):(c=l.cachePool,c!==null?(u=Lt._currentValue,c=c.parent!==u?{parent:u,pool:u}:c):c=VT(),l={baseLanes:l.baseLanes|s,cachePool:c}),a.memoizedState=l,a.childLanes=Xg(e,o,s),t.memoizedState=Wg,n):(dr(t),s=e.child,e=s.sibling,s=Ra(s,{mode:"visible",children:n.children}),s.return=t,s.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=s,t.memoizedState=null,s)}function Ux(e,t){return t=mm({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function mm(e,t){return e=Ls(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Kg(e,t,s){return Nl(t,e.child,null,s),e=Ux(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function g1(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Rx(e.return,t,s)}function Jg(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function $M(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Wt(e,t,n.children,s),n=zt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&g1(e,s,t);else if(e.tag===19)g1(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(ot(zt,n),a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&um(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Jg(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&um(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Jg(t,!0,s,null,i);break;case"together":Jg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ir|=t.lanes,!(s&t.childLanes))if(e!==null){if(Zu(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,s=Ra(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Ra(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Hv(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&rm(e)))}function Lne(e,t,s){switch(t.tag){case 3:Xf(t,t.stateNode.containerInfo),ur(t,Lt,e.memoizedState.cache),Qu();break;case 27:case 5:yx(t);break;case 4:Xf(t,t.stateNode.containerInfo);break;case 10:ur(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(dr(t),t.flags|=128,null):s&t.child.childLanes?IM(e,t,s):(dr(t),e=Ha(e,t,s),e!==null?e.sibling:null);dr(t);break;case 19:var a=(e.flags&128)!==0;if(n=(s&t.childLanes)!==0,n||(Zu(e,t,s,!1),n=(s&t.childLanes)!==0),a){if(n)return $M(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ot(zt,zt.current),n)break;return null;case 22:case 23:return t.lanes=0,BM(e,t,s);case 24:ur(t,Lt,e.memoizedState.cache)}return Ha(e,t,s)}function FM(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ht=!0;else{if(!Hv(e,s)&&!(t.flags&128))return Ht=!1,Lne(e,t,s);Ht=!!(e.flags&131072)}else Ht=!1,Be&&t.flags&1048576&&UT(t,am,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,a=n._init;if(n=a(n._payload),t.type=n,typeof n=="function")jv(n)?(e=Ii(n,e),t.tag=1,t=m1(null,t,n,e,s)):(t.tag=0,t=Hx(null,t,n,e,s));else{if(n!=null){if(a=n.$$typeof,a===cv){t.tag=11,t=c1(null,t,n,e,s);break e}else if(a===uv){t.tag=14,t=u1(null,t,n,e,s);break e}}throw t=px(n)||n,Error(Y(306,t,""))}}return t;case 0:return Hx(e,t,t.type,t.pendingProps,s);case 1:return n=t.type,a=Ii(n,t.pendingProps),m1(e,t,n,a,s);case 3:e:{if(Xf(t,t.stateNode.containerInfo),e===null)throw Error(Y(387));n=t.pendingProps;var i=t.memoizedState;a=i.element,Px(e,t),Tc(t,n,null,s);var o=t.memoizedState;if(n=o.cache,ur(t,Lt,n),n!==i.cache&&Tx(t,[Lt],s,!0),Rc(),n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=h1(e,t,n,s);break e}else if(n!==a){a=Xs(Error(Y(424)),t),lu(a),t=h1(e,t,n,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(pt=bn(e.firstChild),rs=t,Be=!0,bi=null,zn=!0,s=AM(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Qu(),n===a){t=Ha(e,t,s);break e}Wt(e,t,n,s)}t=t.child}return t;case 26:return ff(e,t),e===null?(s=M1(t.type,null,t.pendingProps,null))?t.memoizedState=s:Be||(s=t.type,e=t.pendingProps,n=bm(kr.current).createElement(s),n[ss]=t,n[js]=e,Xt(n,s,e),Ft(n),t.stateNode=n):t.memoizedState=M1(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return yx(t),e===null&&Be&&(n=t.stateNode=CD(t.type,t.pendingProps,kr.current),rs=t,zn=!0,a=pt,Wr(t.type)?(n0=a,pt=bn(n.firstChild)):pt=a),Wt(e,t,t.pendingProps.children,s),ff(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Be&&((a=n=pt)&&(n=cae(n,t.type,t.pendingProps,zn),n!==null?(t.stateNode=n,rs=t,pt=bn(n.firstChild),zn=!1,a=!0):a=!1),a||zi(t)),yx(t),a=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,n=i.children,e0(a,i)?n=null:o!==null&&e0(a,o)&&(t.flags|=32),t.memoizedState!==null&&(a=Tv(e,t,Cne,null,null,s),hu._currentValue=a),ff(e,t),Wt(e,t,n,s),t.child;case 6:return e===null&&Be&&((e=s=pt)&&(s=uae(s,t.pendingProps,zn),s!==null?(t.stateNode=s,rs=t,pt=null,e=!0):e=!1),e||zi(t)),null;case 13:return IM(e,t,s);case 4:return Xf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Nl(t,null,n,s):Wt(e,t,n,s),t.child;case 11:return c1(e,t,t.type,t.pendingProps,s);case 7:return Wt(e,t,t.pendingProps,s),t.child;case 8:return Wt(e,t,t.pendingProps.children,s),t.child;case 12:return Wt(e,t,t.pendingProps.children,s),t.child;case 10:return n=t.pendingProps,ur(t,t.type,n.value),Wt(e,t,n.children,s),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,Oi(t),a=ns(a),n=n(a),t.flags|=1,Wt(e,t,n,s),t.child;case 14:return u1(e,t,t.type,t.pendingProps,s);case 15:return OM(e,t,t.type,t.pendingProps,s);case 19:return $M(e,t,s);case 31:return n=t.pendingProps,s=t.mode,n={mode:n.mode,children:n.children},e===null?(s=mm(n,s),s.ref=t.ref,t.child=s,s.return=t,t=s):(s=Ra(e.child,n),s.ref=t.ref,t.child=s,s.return=t,t=s),t;case 22:return BM(e,t,s);case 24:return Oi(t),n=ns(Lt),e===null?(a=Cv(),a===null&&(a=Je,i=_v(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=s),a=i),t.memoizedState={parent:n,cache:a},Ev(t),ur(t,Lt,a)):(e.lanes&s&&(Px(e,t),Tc(t,null,null,s),Rc()),a=e.memoizedState,i=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),ur(t,Lt,n)):(n=i.cache,ur(t,Lt,n),n!==a.cache&&Tx(t,[Lt],s,!0))),Wt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(Y(156,t.tag))}function ga(e){e.flags|=4}function p1(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!RD(t)){if(t=an.current,t!==null&&((Le&4194048)===Le?qn!==null:(Le&62914560)!==Le&&!(Le&536870912)||t!==qn))throw Ec=Dx,qT;e.flags|=8192}}function $d(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?mT():536870912,e.lanes|=t,jl|=t)}function cc(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&65011712,n|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function zne(e,t,s){var n=t.pendingProps;switch(Sv(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return ut(t),null;case 3:return s=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ta(Lt),pl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(oc(t)?ga(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qj())),ut(t),null;case 26:return s=t.memoizedState,e===null?(ga(t),s!==null?(ut(t),p1(t,s)):(ut(t),t.flags&=-16777217)):s?s!==e.memoizedState?(ga(t),ut(t),p1(t,s)):(ut(t),t.flags&=-16777217):(e.memoizedProps!==n&&ga(t),ut(t),t.flags&=-16777217),null;case 27:Kf(t),s=kr.current;var a=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ga(t);else{if(!n){if(t.stateNode===null)throw Error(Y(166));return ut(t),null}e=Gn.current,oc(t)?Gj(t):(e=CD(a,n,s),t.stateNode=e,ga(t))}return ut(t),null;case 5:if(Kf(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ga(t);else{if(!n){if(t.stateNode===null)throw Error(Y(166));return ut(t),null}if(e=Gn.current,oc(t))Gj(t);else{switch(a=bm(kr.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?a.createElement(s,{is:n.is}):a.createElement(s)}}e[ss]=t,e[js]=n;e:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(Xt(e,s,n),s){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ga(t)}}return ut(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&ga(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Y(166));if(e=kr.current,oc(t)){if(e=t.stateNode,s=t.memoizedProps,n=null,a=rs,a!==null)switch(a.tag){case 27:case 5:n=a.memoizedProps}e[ss]=t,e=!!(e.nodeValue===s||n!==null&&n.suppressHydrationWarning===!0||kD(e.nodeValue,s)),e||zi(t)}else e=bm(e).createTextNode(n),e[ss]=t,t.stateNode=e}return ut(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=oc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(Y(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Y(317));a[ss]=t}else Qu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),a=!1}else a=qj(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(_a(t),t):(_a(t),null)}if(_a(t),t.flags&128)return t.lanes=s,t;if(s=n!==null,e=e!==null&&e.memoizedState!==null,s){n=t.child,a=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(a=n.alternate.memoizedState.cachePool.pool);var i=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==a&&(n.flags|=2048)}return s!==e&&s&&(t.child.flags|=8192),$d(t,t.updateQueue),ut(t),null;case 4:return pl(),e===null&&Yv(t.stateNode.containerInfo),ut(t),null;case 10:return Ta(t.type),ut(t),null;case 19:if(Gt(zt),a=t.memoizedState,a===null)return ut(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)cc(a,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=um(e),i!==null){for(t.flags|=128,cc(a,!1),e=i.updateQueue,t.updateQueue=e,$d(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)HT(s,e),s=s.sibling;return ot(zt,zt.current&1|2),t.child}e=e.sibling}a.tail!==null&&Vn()>gm&&(t.flags|=128,n=!0,cc(a,!1),t.lanes=4194304)}else{if(!n)if(e=um(i),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,$d(t,e),cc(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Be)return ut(t),null}else 2*Vn()-a.renderingStartTime>gm&&s!==536870912&&(t.flags|=128,n=!0,cc(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(e=a.last,e!==null?e.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Vn(),t.sibling=null,e=zt.current,ot(zt,n?e&1|2:e&1),t):(ut(t),null);case 22:case 23:return _a(t),Av(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?s&536870912&&!(t.flags&128)&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),s=t.updateQueue,s!==null&&$d(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==s&&(t.flags|=2048),e!==null&&Gt(wi),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Ta(Lt),ut(t),null;case 25:return null;case 30:return null}throw Error(Y(156,t.tag))}function One(e,t){switch(Sv(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ta(Lt),pl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Kf(t),null;case 13:if(_a(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Qu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Gt(zt),null;case 4:return pl(),null;case 10:return Ta(t.type),null;case 22:case 23:return _a(t),Av(),e!==null&&Gt(wi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ta(Lt),null;case 25:return null;default:return null}}function HM(e,t){switch(Sv(t),t.tag){case 3:Ta(Lt),pl();break;case 26:case 27:case 5:Kf(t);break;case 4:pl();break;case 13:_a(t);break;case 19:Gt(zt);break;case 10:Ta(t.type);break;case 22:case 23:_a(t),Av(),e!==null&&Gt(wi);break;case 24:Ta(Lt)}}function Ju(e,t){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var a=n.next;s=a;do{if((s.tag&e)===e){n=void 0;var i=s.create,o=s.inst;n=i(),o.destroy=n}s=s.next}while(s!==a)}}catch(l){We(t,t.return,l)}}function Br(e,t,s){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){var o=n.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,a=t;var c=s,u=l;try{u()}catch(d){We(a,c,d)}}}n=n.next}while(n!==i)}}catch(d){We(t,t.return,d)}}function UM(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{WT(t,s)}catch(n){We(e,e.return,n)}}}function GM(e,t,s){s.props=Ii(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(n){We(e,t,n)}}function Dc(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof s=="function"?e.refCleanup=s(n):s.current=n}}catch(a){We(e,t,a)}}function In(e,t){var s=e.ref,n=e.refCleanup;if(s!==null)if(typeof n=="function")try{n()}catch(a){We(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(a){We(e,t,a)}else s.current=null}function VM(e){var t=e.type,s=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break e;case"img":s.src?n.src=s.src:s.srcSet&&(n.srcset=s.srcSet)}}catch(a){We(e,e.return,a)}}function ep(e,t,s){try{var n=e.stateNode;aae(n,e.type,s,t),n[js]=t}catch(a){We(e,e.return,a)}}function qM(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Wr(e.type)||e.tag===4}function tp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Wr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gx(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=zh));else if(n!==4&&(n===27&&Wr(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Gx(e,t,s),e=e.sibling;e!==null;)Gx(e,t,s),e=e.sibling}function hm(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(n===27&&Wr(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(hm(e,t,s),e=e.sibling;e!==null;)hm(e,t,s),e=e.sibling}function QM(e){var t=e.stateNode,s=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Xt(t,n,s),t[ss]=e,t[js]=s}catch(i){We(e,e.return,i)}}var ba=!1,jt=!1,sp=!1,x1=typeof WeakSet=="function"?WeakSet:Set,$t=null;function Bne(e,t){if(e=e.containerInfo,Kx=km,e=PT(e),bv(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var g;f!==s||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===e)break t;if(m===s&&++u===a&&(l=o),m===i&&++d===n&&(c=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Jx={focusedElem:e,selectionRange:s},km=!1,$t=t;$t!==null;)if(t=$t,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,$t=e;else for(;$t!==null;){switch(t=$t,i=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&i!==null){e=void 0,s=t,a=i.memoizedProps,i=i.memoizedState,n=s.stateNode;try{var b=Ii(s.type,a,s.elementType===s.type);e=n.getSnapshotBeforeUpdate(b,i),n.__reactInternalSnapshotBeforeUpdate=e}catch(y){We(s,s.return,y)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)t0(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":t0(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(Y(163))}if(e=t.sibling,e!==null){e.return=t.return,$t=e;break}$t=t.return}}function ZM(e,t,s){var n=s.flags;switch(s.tag){case 0:case 11:case 15:tr(e,s),n&4&&Ju(5,s);break;case 1:if(tr(e,s),n&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(o){We(s,s.return,o)}else{var a=Ii(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){We(s,s.return,o)}}n&64&&UM(s),n&512&&Dc(s,s.return);break;case 3:if(tr(e,s),n&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{WT(e,t)}catch(o){We(s,s.return,o)}}break;case 27:t===null&&n&4&&QM(s);case 26:case 5:tr(e,s),t===null&&n&4&&VM(s),n&512&&Dc(s,s.return);break;case 12:tr(e,s);break;case 13:tr(e,s),n&4&&XM(e,s),n&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Qne.bind(null,s),dae(e,s))));break;case 22:if(n=s.memoizedState!==null||ba,!n){t=t!==null&&t.memoizedState!==null||jt,a=ba;var i=jt;ba=n,(jt=t)&&!i?ar(e,s,(s.subtreeFlags&8772)!==0):tr(e,s),ba=a,jt=i}break;case 30:break;default:tr(e,s)}}function WM(e){var t=e.alternate;t!==null&&(e.alternate=null,WM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&hv(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var at=null,vs=!1;function pa(e,t,s){for(s=s.child;s!==null;)YM(e,t,s),s=s.sibling}function YM(e,t,s){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(Hu,s)}catch{}switch(s.tag){case 26:jt||In(s,t),pa(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:jt||In(s,t);var n=at,a=vs;Wr(s.type)&&(at=s.stateNode,vs=!1),pa(e,t,s),Oc(s.stateNode),at=n,vs=a;break;case 5:jt||In(s,t);case 6:if(n=at,a=vs,at=null,pa(e,t,s),at=n,vs=a,at!==null)if(vs)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(s.stateNode)}catch(i){We(s,t,i)}else try{at.removeChild(s.stateNode)}catch(i){We(s,t,i)}break;case 18:at!==null&&(vs?(e=at,A1(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),xu(e)):A1(at,s.stateNode));break;case 4:n=at,a=vs,at=s.stateNode.containerInfo,vs=!0,pa(e,t,s),at=n,vs=a;break;case 0:case 11:case 14:case 15:jt||Br(2,s,t),jt||Br(4,s,t),pa(e,t,s);break;case 1:jt||(In(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"&&GM(s,t,n)),pa(e,t,s);break;case 21:pa(e,t,s);break;case 22:jt=(n=jt)||s.memoizedState!==null,pa(e,t,s),jt=n;break;default:pa(e,t,s)}}function XM(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{xu(e)}catch(s){We(t,t.return,s)}}function Ine(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new x1),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new x1),t;default:throw Error(Y(435,e.tag))}}function np(e,t){var s=Ine(e);t.forEach(function(n){var a=Zne.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}function Es(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n],i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(Wr(l.type)){at=l.stateNode,vs=!1;break e}break;case 5:at=l.stateNode,vs=!1;break e;case 3:case 4:at=l.stateNode.containerInfo,vs=!0;break e}l=l.return}if(at===null)throw Error(Y(160));YM(i,o,a),at=null,vs=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)KM(t,e),t=t.sibling}var mn=null;function KM(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Es(t,e),As(e),n&4&&(Br(3,e,e.return),Ju(3,e),Br(5,e,e.return));break;case 1:Es(t,e),As(e),n&512&&(jt||s===null||In(s,s.return)),n&64&&ba&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?n:s.concat(n))));break;case 26:var a=mn;if(Es(t,e),As(e),n&512&&(jt||s===null||In(s,s.return)),n&4){var i=s!==null?s.memoizedState:null;if(n=e.memoizedState,s===null)if(n===null)if(e.stateNode===null){e:{n=e.type,s=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":i=a.getElementsByTagName("title")[0],(!i||i[Vu]||i[ss]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(n),a.head.insertBefore(i,a.querySelector("head > title"))),Xt(i,n,s),i[ss]=e,Ft(i),n=i;break e;case"link":var o=P1("link","href",a).get(n+(s.href||""));if(o){for(var l=0;l<o.length;l++)if(i=o[l],i.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&i.getAttribute("rel")===(s.rel==null?null:s.rel)&&i.getAttribute("title")===(s.title==null?null:s.title)&&i.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){o.splice(l,1);break t}}i=a.createElement(n),Xt(i,n,s),a.head.appendChild(i);break;case"meta":if(o=P1("meta","content",a).get(n+(s.content||""))){for(l=0;l<o.length;l++)if(i=o[l],i.getAttribute("content")===(s.content==null?null:""+s.content)&&i.getAttribute("name")===(s.name==null?null:s.name)&&i.getAttribute("property")===(s.property==null?null:s.property)&&i.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&i.getAttribute("charset")===(s.charSet==null?null:s.charSet)){o.splice(l,1);break t}}i=a.createElement(n),Xt(i,n,s),a.head.appendChild(i);break;default:throw Error(Y(468,n))}i[ss]=e,Ft(i),n=i}e.stateNode=n}else L1(a,e.type,e.stateNode);else e.stateNode=D1(a,n,e.memoizedProps);else i!==n?(i===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):i.count--,n===null?L1(a,e.type,e.stateNode):D1(a,n,e.memoizedProps)):n===null&&e.stateNode!==null&&ep(e,e.memoizedProps,s.memoizedProps)}break;case 27:Es(t,e),As(e),n&512&&(jt||s===null||In(s,s.return)),s!==null&&n&4&&ep(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Es(t,e),As(e),n&512&&(jt||s===null||In(s,s.return)),e.flags&32){a=e.stateNode;try{yl(a,"")}catch(g){We(e,e.return,g)}}n&4&&e.stateNode!=null&&(a=e.memoizedProps,ep(e,a,s!==null?s.memoizedProps:a)),n&1024&&(sp=!0);break;case 6:if(Es(t,e),As(e),n&4){if(e.stateNode===null)throw Error(Y(162));n=e.memoizedProps,s=e.stateNode;try{s.nodeValue=n}catch(g){We(e,e.return,g)}}break;case 3:if(gf=null,a=mn,mn=wm(t.containerInfo),Es(t,e),mn=a,As(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{xu(t.containerInfo)}catch(g){We(e,e.return,g)}sp&&(sp=!1,JM(e));break;case 4:n=mn,mn=wm(e.stateNode.containerInfo),Es(t,e),As(e),mn=n;break;case 12:Es(t,e),As(e);break;case 13:Es(t,e),As(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Qv=Vn()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,np(e,n)));break;case 22:a=e.memoizedState!==null;var c=s!==null&&s.memoizedState!==null,u=ba,d=jt;if(ba=u||a,jt=d||c,Es(t,e),jt=d,ba=u,As(e),n&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(s===null||c||ba||jt||ri(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){c=s=t;try{if(i=c.stateNode,a)o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var f=c.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(g){We(c,c.return,g)}}}else if(t.tag===6){if(s===null){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(g){We(c,c.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(s=n.retryQueue,s!==null&&(n.retryQueue=null,np(e,s))));break;case 19:Es(t,e),As(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,np(e,n)));break;case 30:break;case 21:break;default:Es(t,e),As(e)}}function As(e){var t=e.flags;if(t&2){try{for(var s,n=e.return;n!==null;){if(qM(n)){s=n;break}n=n.return}if(s==null)throw Error(Y(160));switch(s.tag){case 27:var a=s.stateNode,i=tp(e);hm(e,i,a);break;case 5:var o=s.stateNode;s.flags&32&&(yl(o,""),s.flags&=-33);var l=tp(e);hm(e,l,o);break;case 3:case 4:var c=s.stateNode.containerInfo,u=tp(e);Gx(e,u,c);break;default:throw Error(Y(161))}}catch(d){We(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function JM(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;JM(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function tr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ZM(e,t.alternate,t),t=t.sibling}function ri(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Br(4,t,t.return),ri(t);break;case 1:In(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&GM(t,t.return,s),ri(t);break;case 27:Oc(t.stateNode);case 26:case 5:In(t,t.return),ri(t);break;case 22:t.memoizedState===null&&ri(t);break;case 30:ri(t);break;default:ri(t)}e=e.sibling}}function ar(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,a=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:ar(a,i,s),Ju(4,i);break;case 1:if(ar(a,i,s),n=i,a=n.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(u){We(n,n.return,u)}if(n=i,a=n.updateQueue,a!==null){var l=n.stateNode;try{var c=a.shared.hiddenCallbacks;if(c!==null)for(a.shared.hiddenCallbacks=null,a=0;a<c.length;a++)ZT(c[a],l)}catch(u){We(n,n.return,u)}}s&&o&64&&UM(i),Dc(i,i.return);break;case 27:QM(i);case 26:case 5:ar(a,i,s),s&&n===null&&o&4&&VM(i),Dc(i,i.return);break;case 12:ar(a,i,s);break;case 13:ar(a,i,s),s&&o&4&&XM(a,i);break;case 22:i.memoizedState===null&&ar(a,i,s),Dc(i,i.return);break;case 30:break;default:ar(a,i,s)}t=t.sibling}}function Uv(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Wu(s))}function Gv(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wu(e))}function Mn(e,t,s,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)eD(e,t,s,n),t=t.sibling}function eD(e,t,s,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Mn(e,t,s,n),a&2048&&Ju(9,t);break;case 1:Mn(e,t,s,n);break;case 3:Mn(e,t,s,n),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wu(e)));break;case 12:if(a&2048){Mn(e,t,s,n),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,l=i.onPostCommit;typeof l=="function"&&l(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){We(t,t.return,c)}}else Mn(e,t,s,n);break;case 13:Mn(e,t,s,n);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,t.memoizedState!==null?i._visibility&2?Mn(e,t,s,n):Pc(e,t):i._visibility&2?Mn(e,t,s,n):(i._visibility|=2,yo(e,t,s,n,(t.subtreeFlags&10256)!==0)),a&2048&&Uv(o,t);break;case 24:Mn(e,t,s,n),a&2048&&Gv(t.alternate,t);break;default:Mn(e,t,s,n)}}function yo(e,t,s,n,a){for(a=a&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var i=e,o=t,l=s,c=n,u=o.flags;switch(o.tag){case 0:case 11:case 15:yo(i,o,l,c,a),Ju(8,o);break;case 23:break;case 22:var d=o.stateNode;o.memoizedState!==null?d._visibility&2?yo(i,o,l,c,a):Pc(i,o):(d._visibility|=2,yo(i,o,l,c,a)),a&&u&2048&&Uv(o.alternate,o);break;case 24:yo(i,o,l,c,a),a&&u&2048&&Gv(o.alternate,o);break;default:yo(i,o,l,c,a)}t=t.sibling}}function Pc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,n=t,a=n.flags;switch(n.tag){case 22:Pc(s,n),a&2048&&Uv(n.alternate,n);break;case 24:Pc(s,n),a&2048&&Gv(n.alternate,n);break;default:Pc(s,n)}t=t.sibling}}var bc=8192;function ho(e){if(e.subtreeFlags&bc)for(e=e.child;e!==null;)tD(e),e=e.sibling}function tD(e){switch(e.tag){case 26:ho(e),e.flags&bc&&e.memoizedState!==null&&kae(mn,e.memoizedState,e.memoizedProps);break;case 5:ho(e);break;case 3:case 4:var t=mn;mn=wm(e.stateNode.containerInfo),ho(e),mn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=bc,bc=16777216,ho(e),bc=t):ho(e));break;default:ho(e)}}function sD(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function uc(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var s=0;s<t.length;s++){var n=t[s];$t=n,aD(n,e)}sD(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)nD(e),e=e.sibling}function nD(e){switch(e.tag){case 0:case 11:case 15:uc(e),e.flags&2048&&Br(9,e,e.return);break;case 3:uc(e);break;case 12:uc(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,mf(e)):uc(e);break;default:uc(e)}}function mf(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var s=0;s<t.length;s++){var n=t[s];$t=n,aD(n,e)}sD(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Br(8,t,t.return),mf(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,mf(t));break;default:mf(t)}e=e.sibling}}function aD(e,t){for(;$t!==null;){var s=$t;switch(s.tag){case 0:case 11:case 15:Br(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var n=s.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Wu(s.memoizedState.cache)}if(n=s.child,n!==null)n.return=s,$t=n;else e:for(s=e;$t!==null;){n=$t;var a=n.sibling,i=n.return;if(WM(n),n===s){$t=null;break e}if(a!==null){a.return=i,$t=a;break e}$t=i}}}var $ne={getCacheForType:function(e){var t=ns(Lt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s}},Fne=typeof WeakMap=="function"?WeakMap:Map,Ve=0,Je=null,Me=null,Le=0,Ge=0,Rs=null,yr=!1,Vl=!1,Vv=!1,Ua=0,xt=0,Ir=0,Ni=0,qv=0,en=0,jl=0,Lc=null,bs=null,Vx=!1,Qv=0,gm=1/0,pm=null,Cr=null,Yt=0,Er=null,kl=null,Wo=0,qx=0,Qx=null,rD=null,zc=0,Zx=null;function Is(){if(Ve&2&&Le!==0)return Le&-Le;if(ge.T!==null){var e=vl;return e!==0?e:Wv()}return pT()}function iD(){en===0&&(en=!(Le&536870912)||Be?fT():536870912);var e=an.current;return e!==null&&(e.flags|=32),en}function $s(e,t,s){(e===Je&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)&&(Sl(e,0),vr(e,Le,en,!1)),Gu(e,s),(!(Ve&2)||e!==Je)&&(e===Je&&(!(Ve&2)&&(Ni|=s),xt===4&&vr(e,Le,en,!1)),ra(e))}function oD(e,t,s){if(Ve&6)throw Error(Y(327));var n=!s&&(t&124)===0&&(t&e.expiredLanes)===0||Uu(e,t),a=n?Gne(e,t):ap(e,t,!0),i=n;do{if(a===0){Vl&&!n&&vr(e,t,0,!1);break}else{if(s=e.current.alternate,i&&!Hne(s)){a=ap(e,t,!1),i=!1;continue}if(a===2){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var l=e;a=Lc;var c=l.current.memoizedState.isDehydrated;if(c&&(Sl(l,o).flags|=256),o=ap(l,o,!1),o!==2){if(Vv&&!c){l.errorRecoveryDisabledLanes|=i,Ni|=i,a=4;break e}i=bs,bs=a,i!==null&&(bs===null?bs=i:bs.push.apply(bs,i))}a=o}if(i=!1,a!==2)continue}}if(a===1){Sl(e,0),vr(e,t,0,!0);break}e:{switch(n=e,i=a,i){case 0:case 1:throw Error(Y(345));case 4:if((t&4194048)!==t)break;case 6:vr(n,t,en,!yr);break e;case 2:bs=null;break;case 3:case 5:break;default:throw Error(Y(329))}if((t&62914560)===t&&(a=Qv+300-Vn(),10<a)){if(vr(n,t,en,!yr),jh(n,0,!0)!==0)break e;n.timeoutHandle=_D(y1.bind(null,n,s,bs,pm,Vx,t,en,Ni,jl,yr,i,2,-0,0),a);break e}y1(n,s,bs,pm,Vx,t,en,Ni,jl,yr,i,0,-0,0)}}break}while(!0);ra(e)}function y1(e,t,s,n,a,i,o,l,c,u,d,f,m,g){if(e.timeoutHandle=-1,f=t.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(mu={stylesheets:null,count:0,unsuspend:jae},tD(t),f=Sae(),f!==null)){e.cancelPendingCommit=f(b1.bind(null,e,t,i,s,n,a,o,l,c,d,1,m,g)),vr(e,i,o,!u);return}b1(e,t,i,s,n,a,o,l,c)}function Hne(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!Hs(i(),a))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vr(e,t,s,n){t&=~qv,t&=~Ni,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var i=31-Bs(a),o=1<<i;n[i]=-1,a&=~o}s!==0&&hT(e,s,t)}function Dh(){return Ve&6?!0:(ed(0),!1)}function Zv(){if(Me!==null){if(Ge===0)var e=Me.return;else e=Me,Sa=so=null,Pv(e),Zo=null,uu=0,e=Me;for(;e!==null;)HM(e.alternate,e),e=e.return;Me=null}}function Sl(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,iae(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Zv(),Je=e,Me=s=Ra(e.current,null),Le=t,Ge=0,Rs=null,yr=!1,Vl=Uu(e,t),Vv=!1,jl=en=qv=Ni=Ir=xt=0,bs=Lc=null,Vx=!1,t&8&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var a=31-Bs(n),i=1<<a;t|=e[a],n&=~i}return Ua=t,Ch(),s}function lD(e,t){Ee=null,ge.H=cm,t===Yu||t===Ah?(t=Yj(),Ge=3):t===qT?(t=Yj(),Ge=4):Ge=t===zM?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Rs=t,Me===null&&(xt=1,fm(e,Xs(t,e.current)))}function cD(){var e=ge.H;return ge.H=cm,e===null?cm:e}function uD(){var e=ge.A;return ge.A=$ne,e}function Wx(){xt=4,yr||(Le&4194048)!==Le&&an.current!==null||(Vl=!0),!(Ir&134217727)&&!(Ni&134217727)||Je===null||vr(Je,Le,en,!1)}function ap(e,t,s){var n=Ve;Ve|=2;var a=cD(),i=uD();(Je!==e||Le!==t)&&(pm=null,Sl(e,t)),t=!1;var o=xt;e:do try{if(Ge!==0&&Me!==null){var l=Me,c=Rs;switch(Ge){case 8:Zv(),o=6;break e;case 3:case 2:case 9:case 6:an.current===null&&(t=!0);var u=Ge;if(Ge=0,Rs=null,Do(e,l,c,u),s&&Vl){o=0;break e}break;default:u=Ge,Ge=0,Rs=null,Do(e,l,c,u)}}Une(),o=xt;break}catch(d){lD(e,d)}while(!0);return t&&e.shellSuspendCounter++,Sa=so=null,Ve=n,ge.H=a,ge.A=i,Me===null&&(Je=null,Le=0,Ch()),o}function Une(){for(;Me!==null;)dD(Me)}function Gne(e,t){var s=Ve;Ve|=2;var n=cD(),a=uD();Je!==e||Le!==t?(pm=null,gm=Vn()+500,Sl(e,t)):Vl=Uu(e,t);e:do try{if(Ge!==0&&Me!==null){t=Me;var i=Rs;t:switch(Ge){case 1:Ge=0,Rs=null,Do(e,t,i,1);break;case 2:case 9:if(Wj(i)){Ge=0,Rs=null,v1(t);break}t=function(){Ge!==2&&Ge!==9||Je!==e||(Ge=7),ra(e)},i.then(t,t);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:Wj(i)?(Ge=0,Rs=null,v1(t)):(Ge=0,Rs=null,Do(e,t,i,7));break;case 5:var o=null;switch(Me.tag){case 26:o=Me.memoizedState;case 5:case 27:var l=Me;if(!o||RD(o)){Ge=0,Rs=null;var c=l.sibling;if(c!==null)Me=c;else{var u=l.return;u!==null?(Me=u,Ph(u)):Me=null}break t}}Ge=0,Rs=null,Do(e,t,i,5);break;case 6:Ge=0,Rs=null,Do(e,t,i,6);break;case 8:Zv(),xt=6;break e;default:throw Error(Y(462))}}Vne();break}catch(d){lD(e,d)}while(!0);return Sa=so=null,ge.H=n,ge.A=a,Ve=s,Me!==null?0:(Je=null,Le=0,Ch(),xt)}function Vne(){for(;Me!==null&&!mse();)dD(Me)}function dD(e){var t=FM(e.alternate,e,Ua);e.memoizedProps=e.pendingProps,t===null?Ph(e):Me=t}function v1(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=f1(s,t,t.pendingProps,t.type,void 0,Le);break;case 11:t=f1(s,t,t.pendingProps,t.type.render,t.ref,Le);break;case 5:Pv(t);default:HM(s,t),t=Me=HT(t,Ua),t=FM(s,t,Ua)}e.memoizedProps=e.pendingProps,t===null?Ph(e):Me=t}function Do(e,t,s,n){Sa=so=null,Pv(t),Zo=null,uu=0;var a=t.return;try{if(Pne(e,a,t,s,Le)){xt=1,fm(e,Xs(s,e.current)),Me=null;return}}catch(i){if(a!==null)throw Me=a,i;xt=1,fm(e,Xs(s,e.current)),Me=null;return}t.flags&32768?(Be||n===1?e=!0:Vl||Le&536870912?e=!1:(yr=e=!0,(n===2||n===9||n===3||n===6)&&(n=an.current,n!==null&&n.tag===13&&(n.flags|=16384))),fD(t,e)):Ph(t)}function Ph(e){var t=e;do{if(t.flags&32768){fD(t,yr);return}e=t.return;var s=zne(t.alternate,t,Ua);if(s!==null){Me=s;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);xt===0&&(xt=5)}function fD(e,t){do{var s=One(e.alternate,e);if(s!==null){s.flags&=32767,Me=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Me=e;return}Me=e=s}while(e!==null);xt=6,Me=null}function b1(e,t,s,n,a,i,o,l,c){e.cancelPendingCommit=null;do Lh();while(Yt!==0);if(Ve&6)throw Error(Y(327));if(t!==null){if(t===e.current)throw Error(Y(177));if(i=t.lanes|t.childLanes,i|=wv,jse(e,s,i,o,l,c),e===Je&&(Me=Je=null,Le=0),kl=t,Er=e,Wo=s,qx=i,Qx=a,rD=n,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Wne(Jf,function(){return xD(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,t.subtreeFlags&13878||n){n=ge.T,ge.T=null,a=Ie.p,Ie.p=2,o=Ve,Ve|=4;try{Bne(e,t,s)}finally{Ve=o,Ie.p=a,ge.T=n}}Yt=1,mD(),hD(),gD()}}function mD(){if(Yt===1){Yt=0;var e=Er,t=kl,s=(t.flags&13878)!==0;if(t.subtreeFlags&13878||s){s=ge.T,ge.T=null;var n=Ie.p;Ie.p=2;var a=Ve;Ve|=4;try{KM(t,e);var i=Jx,o=PT(e.containerInfo),l=i.focusedElem,c=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&DT(l.ownerDocument.documentElement,l)){if(c!==null&&bv(l)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var g=m.getSelection(),b=l.textContent.length,y=Math.min(c.start,b),v=c.end===void 0?y:Math.min(c.end,b);!g.extend&&y>v&&(o=v,v=y,y=o);var p=Fj(l,y),x=Fj(l,v);if(p&&x&&(g.rangeCount!==1||g.anchorNode!==p.node||g.anchorOffset!==p.offset||g.focusNode!==x.node||g.focusOffset!==x.offset)){var w=f.createRange();w.setStart(p.node,p.offset),g.removeAllRanges(),y>v?(g.addRange(w),g.extend(x.node,x.offset)):(w.setEnd(x.node,x.offset),g.addRange(w))}}}}for(f=[],g=l;g=g.parentNode;)g.nodeType===1&&f.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var N=f[l];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}km=!!Kx,Jx=Kx=null}finally{Ve=a,Ie.p=n,ge.T=s}}e.current=t,Yt=2}}function hD(){if(Yt===2){Yt=0;var e=Er,t=kl,s=(t.flags&8772)!==0;if(t.subtreeFlags&8772||s){s=ge.T,ge.T=null;var n=Ie.p;Ie.p=2;var a=Ve;Ve|=4;try{ZM(e,t.alternate,t)}finally{Ve=a,Ie.p=n,ge.T=s}}Yt=3}}function gD(){if(Yt===4||Yt===3){Yt=0,hse();var e=Er,t=kl,s=Wo,n=rD;t.subtreeFlags&10256||t.flags&10256?Yt=5:(Yt=0,kl=Er=null,pD(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(Cr=null),mv(s),t=t.stateNode,Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(Hu,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=ge.T,a=Ie.p,Ie.p=2,ge.T=null;try{for(var i=e.onRecoverableError,o=0;o<n.length;o++){var l=n[o];i(l.value,{componentStack:l.stack})}}finally{ge.T=t,Ie.p=a}}Wo&3&&Lh(),ra(e),a=e.pendingLanes,s&4194090&&a&42?e===Zx?zc++:(zc=0,Zx=e):zc=0,ed(0)}}function pD(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Wu(t)))}function Lh(e){return mD(),hD(),gD(),xD()}function xD(){if(Yt!==5)return!1;var e=Er,t=qx;qx=0;var s=mv(Wo),n=ge.T,a=Ie.p;try{Ie.p=32>s?32:s,ge.T=null,s=Qx,Qx=null;var i=Er,o=Wo;if(Yt=0,kl=Er=null,Wo=0,Ve&6)throw Error(Y(331));var l=Ve;if(Ve|=4,nD(i.current),eD(i,i.current,o,s),Ve=l,ed(0,!1),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(Hu,i)}catch{}return!0}finally{Ie.p=a,ge.T=n,pD(e,t)}}function w1(e,t,s){t=Xs(s,t),t=Fx(e.stateNode,t,2),e=_r(e,t,2),e!==null&&(Gu(e,2),ra(e))}function We(e,t,s){if(e.tag===3)w1(e,e,s);else for(;t!==null;){if(t.tag===3){w1(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Cr===null||!Cr.has(n))){e=Xs(s,e),s=PM(2),n=_r(t,s,2),n!==null&&(LM(s,n,t,e),Gu(n,2),ra(n));break}}t=t.return}}function rp(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new Fne;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(Vv=!0,a.add(s),e=qne.bind(null,e,t,s),t.then(e,e))}function qne(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Je===e&&(Le&s)===s&&(xt===4||xt===3&&(Le&62914560)===Le&&300>Vn()-Qv?!(Ve&2)&&Sl(e,0):qv|=s,jl===Le&&(jl=0)),ra(e)}function yD(e,t){t===0&&(t=mT()),e=Gl(e,t),e!==null&&(Gu(e,t),ra(e))}function Qne(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),yD(e,s)}function Zne(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(Y(314))}n!==null&&n.delete(t),yD(e,s)}function Wne(e,t){return dv(e,t)}var xm=null,vo=null,Yx=!1,ym=!1,ip=!1,ji=0;function ra(e){e!==vo&&e.next===null&&(vo===null?xm=vo=e:vo=vo.next=e),ym=!0,Yx||(Yx=!0,Xne())}function ed(e,t){if(!ip&&ym){ip=!0;do for(var s=!1,n=xm;n!==null;){if(e!==0){var a=n.pendingLanes;if(a===0)var i=0;else{var o=n.suspendedLanes,l=n.pingedLanes;i=(1<<31-Bs(42|e)+1)-1,i&=a&~(o&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(s=!0,N1(n,i))}else i=Le,i=jh(n,n===Je?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(i&3)||Uu(n,i)||(s=!0,N1(n,i));n=n.next}while(s);ip=!1}}function Yne(){vD()}function vD(){ym=Yx=!1;var e=0;ji!==0&&(rae()&&(e=ji),ji=0);for(var t=Vn(),s=null,n=xm;n!==null;){var a=n.next,i=bD(n,t);i===0?(n.next=null,s===null?xm=a:s.next=a,a===null&&(vo=s)):(s=n,(e!==0||i&3)&&(ym=!0)),n=a}ed(e)}function bD(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var o=31-Bs(i),l=1<<o,c=a[o];c===-1?(!(l&s)||l&n)&&(a[o]=Nse(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}if(t=Je,s=Le,s=jh(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,s===0||e===t&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Mg(n),e.callbackNode=null,e.callbackPriority=0;if(!(s&3)||Uu(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(n!==null&&Mg(n),mv(s)){case 2:case 8:s=uT;break;case 32:s=Jf;break;case 268435456:s=dT;break;default:s=Jf}return n=wD.bind(null,e),s=dv(s,n),e.callbackPriority=t,e.callbackNode=s,t}return n!==null&&n!==null&&Mg(n),e.callbackPriority=2,e.callbackNode=null,2}function wD(e,t){if(Yt!==0&&Yt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Lh()&&e.callbackNode!==s)return null;var n=Le;return n=jh(e,e===Je?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(oD(e,n,t),bD(e,Vn()),e.callbackNode!=null&&e.callbackNode===s?wD.bind(null,e):null)}function N1(e,t){if(Lh())return null;oD(e,t,!0)}function Xne(){oae(function(){Ve&6?dv(cT,Yne):vD()})}function Wv(){return ji===0&&(ji=fT()),ji}function j1(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:af(""+e)}function k1(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Kne(e,t,s,n,a){if(t==="submit"&&s&&s.stateNode===a){var i=j1((a[js]||null).action),o=n.submitter;o&&(t=(t=o[js]||null)?j1(t.formAction):o.getAttribute("formAction"),t!==null&&(i=t,o=null));var l=new kh("action","action",null,n,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(ji!==0){var c=o?k1(a,o):new FormData(a);Ix(s,{pending:!0,data:c,method:a.method,action:i},null,c)}}else typeof i=="function"&&(l.preventDefault(),c=o?k1(a,o):new FormData(a),Ix(s,{pending:!0,data:c,method:a.method,action:i},i,c))},currentTarget:a}]})}}for(var op=0;op<Cx.length;op++){var lp=Cx[op],Jne=lp.toLowerCase(),eae=lp[0].toUpperCase()+lp.slice(1);Cn(Jne,"on"+eae)}Cn(zT,"onAnimationEnd");Cn(OT,"onAnimationIteration");Cn(BT,"onAnimationStart");Cn("dblclick","onDoubleClick");Cn("focusin","onFocus");Cn("focusout","onBlur");Cn(xne,"onTransitionRun");Cn(yne,"onTransitionStart");Cn(vne,"onTransitionCancel");Cn(IT,"onTransitionEnd");xl("onMouseEnter",["mouseout","mouseover"]);xl("onMouseLeave",["mouseout","mouseover"]);xl("onPointerEnter",["pointerout","pointerover"]);xl("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tae=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(du));function ND(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=u;try{i(a)}catch(d){dm(d)}a.currentTarget=null,i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=u;try{i(a)}catch(d){dm(d)}a.currentTarget=null,i=c}}}}function Te(e,t){var s=t[bx];s===void 0&&(s=t[bx]=new Set);var n=e+"__bubble";s.has(n)||(jD(t,e,2,!1),s.add(n))}function cp(e,t,s){var n=0;t&&(n|=4),jD(s,e,n,t)}var Fd="_reactListening"+Math.random().toString(36).slice(2);function Yv(e){if(!e[Fd]){e[Fd]=!0,xT.forEach(function(s){s!=="selectionchange"&&(tae.has(s)||cp(s,!1,e),cp(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fd]||(t[Fd]=!0,cp("selectionchange",!1,t))}}function jD(e,t,s,n){switch(LD(t)){case 2:var a=Eae;break;case 8:a=Aae;break;default:a=eb}s=a.bind(null,t,s,e),a=void 0,!kx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function up(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===a)return;o=o.return}for(;l!==null;){if(o=ko(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){n=i=o;continue e}l=l.parentNode}}n=n.return}ST(function(){var u=i,d=pv(s),f=[];e:{var m=$T.get(e);if(m!==void 0){var g=kh,b=e;switch(e){case"keypress":if(of(s)===0)break e;case"keydown":case"keyup":g=Wse;break;case"focusin":b="focus",g=$g;break;case"focusout":b="blur",g=$g;break;case"beforeblur":case"afterblur":g=$g;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Tj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Ose;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Kse;break;case zT:case OT:case BT:g=$se;break;case IT:g=ene;break;case"scroll":case"scrollend":g=Lse;break;case"wheel":g=sne;break;case"copy":case"cut":case"paste":g=Hse;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Dj;break;case"toggle":case"beforetoggle":g=ane}var y=(t&4)!==0,v=!y&&(e==="scroll"||e==="scrollend"),p=y?m!==null?m+"Capture":null:m;y=[];for(var x=u,w;x!==null;){var N=x;if(w=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||w===null||p===null||(N=ru(x,p),N!=null&&y.push(fu(x,N,w))),v)break;x=x.return}0<y.length&&(m=new g(m,b,null,s,d),f.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&s!==jx&&(b=s.relatedTarget||s.fromElement)&&(ko(b)||b[Hl]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(b=s.relatedTarget||s.toElement,g=u,b=b?ko(b):null,b!==null&&(v=Fu(b),y=b.tag,b!==v||y!==5&&y!==27&&y!==6)&&(b=null)):(g=null,b=u),g!==b)){if(y=Tj,N="onMouseLeave",p="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=Dj,N="onPointerLeave",p="onPointerEnter",x="pointer"),v=g==null?m:vc(g),w=b==null?m:vc(b),m=new y(N,x+"leave",g,s,d),m.target=v,m.relatedTarget=w,N=null,ko(d)===u&&(y=new y(p,x+"enter",b,s,d),y.target=w,y.relatedTarget=v,N=y),v=N,g&&b)t:{for(y=g,p=b,x=0,w=y;w;w=go(w))x++;for(w=0,N=p;N;N=go(N))w++;for(;0<x-w;)y=go(y),x--;for(;0<w-x;)p=go(p),w--;for(;x--;){if(y===p||p!==null&&y===p.alternate)break t;y=go(y),p=go(p)}y=null}else y=null;g!==null&&S1(f,m,g,y,!1),b!==null&&v!==null&&S1(f,v,b,y,!0)}}e:{if(m=u?vc(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var j=Oj;else if(zj(m))if(TT)j=hne;else{j=fne;var _=dne}else g=m.nodeName,!g||g.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&gv(u.elementType)&&(j=Oj):j=mne;if(j&&(j=j(e,u))){RT(f,j,s,d);break e}_&&_(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&Nx(m,"number",m.value)}switch(_=u?vc(u):window,e){case"focusin":(zj(_)||_.contentEditable==="true")&&(Co=_,Sx=u,_c=null);break;case"focusout":_c=Sx=Co=null;break;case"mousedown":_x=!0;break;case"contextmenu":case"mouseup":case"dragend":_x=!1,Hj(f,s,d);break;case"selectionchange":if(pne)break;case"keydown":case"keyup":Hj(f,s,d)}var k;if(vv)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else _o?ET(e,s)&&(A="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(A="onCompositionStart");A&&(CT&&s.locale!=="ko"&&(_o||A!=="onCompositionStart"?A==="onCompositionEnd"&&_o&&(k=_T()):(xr=d,xv="value"in xr?xr.value:xr.textContent,_o=!0)),_=vm(u,A),0<_.length&&(A=new Mj(A,e,null,s,d),f.push({event:A,listeners:_}),k?A.data=k:(k=AT(s),k!==null&&(A.data=k)))),(k=ine?one(e,s):lne(e,s))&&(A=vm(u,"onBeforeInput"),0<A.length&&(_=new Mj("onBeforeInput","beforeinput",null,s,d),f.push({event:_,listeners:A}),_.data=k)),Kne(f,e,u,s,d)}ND(f,t)})}function fu(e,t,s){return{instance:e,listener:t,currentTarget:s}}function vm(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=ru(e,s),a!=null&&n.unshift(fu(e,a,i)),a=ru(e,t),a!=null&&n.push(fu(e,a,i))),e.tag===3)return n;e=e.return}return[]}function go(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function S1(e,t,s,n,a){for(var i=t._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,u=l.stateNode;if(l=l.tag,c!==null&&c===n)break;l!==5&&l!==26&&l!==27||u===null||(c=u,a?(u=ru(s,i),u!=null&&o.unshift(fu(s,u,c))):a||(u=ru(s,i),u!=null&&o.push(fu(s,u,c)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var sae=/\r\n?/g,nae=/\u0000|\uFFFD/g;function _1(e){return(typeof e=="string"?e:""+e).replace(sae,`
`).replace(nae,"")}function kD(e,t){return t=_1(t),_1(e)===t}function zh(){}function qe(e,t,s,n,a,i){switch(s){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||yl(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&yl(e,""+n);break;case"className":Pd(e,"class",n);break;case"tabIndex":Pd(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Pd(e,s,n);break;case"style":kT(e,n,i);break;case"data":if(t!=="object"){Pd(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=af(""+n),e.setAttribute(s,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(s==="formAction"?(t!=="input"&&qe(e,t,"name",a.name,a,null),qe(e,t,"formEncType",a.formEncType,a,null),qe(e,t,"formMethod",a.formMethod,a,null),qe(e,t,"formTarget",a.formTarget,a,null)):(qe(e,t,"encType",a.encType,a,null),qe(e,t,"method",a.method,a,null),qe(e,t,"target",a.target,a,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=af(""+n),e.setAttribute(s,n);break;case"onClick":n!=null&&(e.onclick=zh);break;case"onScroll":n!=null&&Te("scroll",e);break;case"onScrollEnd":n!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(Y(61));if(s=n.__html,s!=null){if(a.children!=null)throw Error(Y(60));e.innerHTML=s}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}s=af(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""+n):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":n===!0?e.setAttribute(s,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,n):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(s,n):e.removeAttribute(s);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(s):e.setAttribute(s,n);break;case"popover":Te("beforetoggle",e),Te("toggle",e),nf(e,"popover",n);break;case"xlinkActuate":ha(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":ha(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":ha(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":ha(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":ha(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":ha(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":ha(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":ha(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":ha(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":nf(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Dse.get(s)||s,nf(e,s,n))}}function Xx(e,t,s,n,a,i){switch(s){case"style":kT(e,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(Y(61));if(s=n.__html,s!=null){if(a.children!=null)throw Error(Y(60));e.innerHTML=s}}break;case"children":typeof n=="string"?yl(e,n):(typeof n=="number"||typeof n=="bigint")&&yl(e,""+n);break;case"onScroll":n!=null&&Te("scroll",e);break;case"onScrollEnd":n!=null&&Te("scrollend",e);break;case"onClick":n!=null&&(e.onclick=zh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yT.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(a=s.endsWith("Capture"),t=s.slice(2,a?s.length-7:void 0),i=e[js]||null,i=i!=null?i[s]:null,typeof i=="function"&&e.removeEventListener(t,i,a),typeof n=="function")){typeof i!="function"&&i!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,n,a);break e}s in e?e[s]=n:n===!0?e.setAttribute(s,""):nf(e,s,n)}}}function Xt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var n=!1,a=!1,i;for(i in s)if(s.hasOwnProperty(i)){var o=s[i];if(o!=null)switch(i){case"src":n=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,t));default:qe(e,t,i,o,s,null)}}a&&qe(e,t,"srcSet",s.srcSet,s,null),n&&qe(e,t,"src",s.src,s,null);return;case"input":Te("invalid",e);var l=i=o=a=null,c=null,u=null;for(n in s)if(s.hasOwnProperty(n)){var d=s[n];if(d!=null)switch(n){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":i=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(Y(137,t));break;default:qe(e,t,n,d,s,null)}}wT(e,i,l,c,u,o,a,!1),em(e);return;case"select":Te("invalid",e),n=o=i=null;for(a in s)if(s.hasOwnProperty(a)&&(l=s[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":n=l;default:qe(e,t,a,l,s,null)}t=i,s=o,e.multiple=!!n,t!=null?Uo(e,!!n,t,!1):s!=null&&Uo(e,!!n,s,!0);return;case"textarea":Te("invalid",e),i=a=n=null;for(o in s)if(s.hasOwnProperty(o)&&(l=s[o],l!=null))switch(o){case"value":n=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Y(91));break;default:qe(e,t,o,l,s,null)}jT(e,n,a,i),em(e);return;case"option":for(c in s)if(s.hasOwnProperty(c)&&(n=s[c],n!=null))switch(c){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:qe(e,t,c,n,s,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(n=0;n<du.length;n++)Te(du[n],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in s)if(s.hasOwnProperty(u)&&(n=s[u],n!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,t));default:qe(e,t,u,n,s,null)}return;default:if(gv(t)){for(d in s)s.hasOwnProperty(d)&&(n=s[d],n!==void 0&&Xx(e,t,d,n,s,void 0));return}}for(l in s)s.hasOwnProperty(l)&&(n=s[l],n!=null&&qe(e,t,l,n,s,null))}function aae(e,t,s,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,l=null,c=null,u=null,d=null;for(g in s){var f=s[g];if(s.hasOwnProperty(g)&&f!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=f;default:n.hasOwnProperty(g)||qe(e,t,g,null,n,f)}}for(var m in n){var g=n[m];if(f=s[m],n.hasOwnProperty(m)&&(g!=null||f!=null))switch(m){case"type":i=g;break;case"name":a=g;break;case"checked":u=g;break;case"defaultChecked":d=g;break;case"value":o=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(Y(137,t));break;default:g!==f&&qe(e,t,m,g,n,f)}}wx(e,o,l,c,u,d,i,a);return;case"select":g=o=l=m=null;for(i in s)if(c=s[i],s.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":g=c;default:n.hasOwnProperty(i)||qe(e,t,i,null,n,c)}for(a in n)if(i=n[a],c=s[a],n.hasOwnProperty(a)&&(i!=null||c!=null))switch(a){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&qe(e,t,a,i,n,c)}t=l,s=o,n=g,m!=null?Uo(e,!!s,m,!1):!!n!=!!s&&(t!=null?Uo(e,!!s,t,!0):Uo(e,!!s,s?[]:"",!1));return;case"textarea":g=m=null;for(l in s)if(a=s[l],s.hasOwnProperty(l)&&a!=null&&!n.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:qe(e,t,l,null,n,a)}for(o in n)if(a=n[o],i=s[o],n.hasOwnProperty(o)&&(a!=null||i!=null))switch(o){case"value":m=a;break;case"defaultValue":g=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(Y(91));break;default:a!==i&&qe(e,t,o,a,n,i)}NT(e,m,g);return;case"option":for(var b in s)if(m=s[b],s.hasOwnProperty(b)&&m!=null&&!n.hasOwnProperty(b))switch(b){case"selected":e.selected=!1;break;default:qe(e,t,b,null,n,m)}for(c in n)if(m=n[c],g=s[c],n.hasOwnProperty(c)&&m!==g&&(m!=null||g!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:qe(e,t,c,m,n,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in s)m=s[y],s.hasOwnProperty(y)&&m!=null&&!n.hasOwnProperty(y)&&qe(e,t,y,null,n,m);for(u in n)if(m=n[u],g=s[u],n.hasOwnProperty(u)&&m!==g&&(m!=null||g!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(Y(137,t));break;default:qe(e,t,u,m,n,g)}return;default:if(gv(t)){for(var v in s)m=s[v],s.hasOwnProperty(v)&&m!==void 0&&!n.hasOwnProperty(v)&&Xx(e,t,v,void 0,n,m);for(d in n)m=n[d],g=s[d],!n.hasOwnProperty(d)||m===g||m===void 0&&g===void 0||Xx(e,t,d,m,n,g);return}}for(var p in s)m=s[p],s.hasOwnProperty(p)&&m!=null&&!n.hasOwnProperty(p)&&qe(e,t,p,null,n,m);for(f in n)m=n[f],g=s[f],!n.hasOwnProperty(f)||m===g||m==null&&g==null||qe(e,t,f,m,n,g)}var Kx=null,Jx=null;function bm(e){return e.nodeType===9?e:e.ownerDocument}function C1(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SD(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function e0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dp=null;function rae(){var e=window.event;return e&&e.type==="popstate"?e===dp?!1:(dp=e,!0):(dp=null,!1)}var _D=typeof setTimeout=="function"?setTimeout:void 0,iae=typeof clearTimeout=="function"?clearTimeout:void 0,E1=typeof Promise=="function"?Promise:void 0,oae=typeof queueMicrotask=="function"?queueMicrotask:typeof E1<"u"?function(e){return E1.resolve(null).then(e).catch(lae)}:_D;function lae(e){setTimeout(function(){throw e})}function Wr(e){return e==="head"}function A1(e,t){var s=t,n=0,a=0;do{var i=s.nextSibling;if(e.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(0<n&&8>n){s=n;var o=e.ownerDocument;if(s&1&&Oc(o.documentElement),s&2&&Oc(o.body),s&4)for(s=o.head,Oc(s),o=s.firstChild;o;){var l=o.nextSibling,c=o.nodeName;o[Vu]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&o.rel.toLowerCase()==="stylesheet"||s.removeChild(o),o=l}}if(a===0){e.removeChild(i),xu(t);return}a--}else s==="$"||s==="$?"||s==="$!"?a++:n=s.charCodeAt(0)-48;else n=0;s=i}while(s);xu(t)}function t0(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":t0(s),hv(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function cae(e,t,s,n){for(;e.nodeType===1;){var a=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Vu])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=bn(e.nextSibling),e===null)break}return null}function uae(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=bn(e.nextSibling),e===null))return null;return e}function s0(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function dae(e,t){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")t();else{var n=function(){t(),s.removeEventListener("DOMContentLoaded",n)};s.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var n0=null;function R1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}function CD(e,t,s){switch(t=bm(s),e){case"html":if(e=t.documentElement,!e)throw Error(Y(452));return e;case"head":if(e=t.head,!e)throw Error(Y(453));return e;case"body":if(e=t.body,!e)throw Error(Y(454));return e;default:throw Error(Y(451))}}function Oc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);hv(e)}var rn=new Map,T1=new Set;function wm(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Wa=Ie.d;Ie.d={f:fae,r:mae,D:hae,C:gae,L:pae,m:xae,X:vae,S:yae,M:bae};function fae(){var e=Wa.f(),t=Dh();return e||t}function mae(e){var t=Ul(e);t!==null&&t.tag===5&&t.type==="form"?bM(t):Wa.r(e)}var ql=typeof document>"u"?null:document;function ED(e,t,s){var n=ql;if(n&&typeof t=="string"&&t){var a=Ys(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof s=="string"&&(a+='[crossorigin="'+s+'"]'),T1.has(a)||(T1.add(a),e={rel:e,crossOrigin:s,href:t},n.querySelector(a)===null&&(t=n.createElement("link"),Xt(t,"link",e),Ft(t),n.head.appendChild(t)))}}function hae(e){Wa.D(e),ED("dns-prefetch",e,null)}function gae(e,t){Wa.C(e,t),ED("preconnect",e,t)}function pae(e,t,s){Wa.L(e,t,s);var n=ql;if(n&&e&&t){var a='link[rel="preload"][as="'+Ys(t)+'"]';t==="image"&&s&&s.imageSrcSet?(a+='[imagesrcset="'+Ys(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(a+='[imagesizes="'+Ys(s.imageSizes)+'"]')):a+='[href="'+Ys(e)+'"]';var i=a;switch(t){case"style":i=_l(e);break;case"script":i=Ql(e)}rn.has(i)||(e=st({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),rn.set(i,e),n.querySelector(a)!==null||t==="style"&&n.querySelector(td(i))||t==="script"&&n.querySelector(sd(i))||(t=n.createElement("link"),Xt(t,"link",e),Ft(t),n.head.appendChild(t)))}}function xae(e,t){Wa.m(e,t);var s=ql;if(s&&e){var n=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+Ys(n)+'"][href="'+Ys(e)+'"]',i=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Ql(e)}if(!rn.has(i)&&(e=st({rel:"modulepreload",href:e},t),rn.set(i,e),s.querySelector(a)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(sd(i)))return}n=s.createElement("link"),Xt(n,"link",e),Ft(n),s.head.appendChild(n)}}}function yae(e,t,s){Wa.S(e,t,s);var n=ql;if(n&&e){var a=Ho(n).hoistableStyles,i=_l(e);t=t||"default";var o=a.get(i);if(!o){var l={loading:0,preload:null};if(o=n.querySelector(td(i)))l.loading=5;else{e=st({rel:"stylesheet",href:e,"data-precedence":t},s),(s=rn.get(i))&&Xv(e,s);var c=o=n.createElement("link");Ft(c),Xt(c,"link",e),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,hf(o,t,n)}o={type:"stylesheet",instance:o,count:1,state:l},a.set(i,o)}}}function vae(e,t){Wa.X(e,t);var s=ql;if(s&&e){var n=Ho(s).hoistableScripts,a=Ql(e),i=n.get(a);i||(i=s.querySelector(sd(a)),i||(e=st({src:e,async:!0},t),(t=rn.get(a))&&Kv(e,t),i=s.createElement("script"),Ft(i),Xt(i,"link",e),s.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}}function bae(e,t){Wa.M(e,t);var s=ql;if(s&&e){var n=Ho(s).hoistableScripts,a=Ql(e),i=n.get(a);i||(i=s.querySelector(sd(a)),i||(e=st({src:e,async:!0,type:"module"},t),(t=rn.get(a))&&Kv(e,t),i=s.createElement("script"),Ft(i),Xt(i,"link",e),s.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}}function M1(e,t,s,n){var a=(a=kr.current)?wm(a):null;if(!a)throw Error(Y(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=_l(s.href),s=Ho(a).hoistableStyles,n=s.get(t),n||(n={type:"style",instance:null,count:0,state:null},s.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=_l(s.href);var i=Ho(a).hoistableStyles,o=i.get(e);if(o||(a=a.ownerDocument||a,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,o),(i=a.querySelector(td(e)))&&!i._p&&(o.instance=i,o.state.loading=5),rn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},rn.set(e,s),i||wae(a,e,s,o.state))),t&&n===null)throw Error(Y(528,""));return o}if(t&&n!==null)throw Error(Y(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ql(s),s=Ho(a).hoistableScripts,n=s.get(t),n||(n={type:"script",instance:null,count:0,state:null},s.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(Y(444,e))}}function _l(e){return'href="'+Ys(e)+'"'}function td(e){return'link[rel="stylesheet"]['+e+"]"}function AD(e){return st({},e,{"data-precedence":e.precedence,precedence:null})}function wae(e,t,s,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Xt(t,"link",s),Ft(t),e.head.appendChild(t))}function Ql(e){return'[src="'+Ys(e)+'"]'}function sd(e){return"script[async]"+e}function D1(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Ys(s.href)+'"]');if(n)return t.instance=n,Ft(n),n;var a=st({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Ft(n),Xt(n,"style",a),hf(n,s.precedence,e),t.instance=n;case"stylesheet":a=_l(s.href);var i=e.querySelector(td(a));if(i)return t.state.loading|=4,t.instance=i,Ft(i),i;n=AD(s),(a=rn.get(a))&&Xv(n,a),i=(e.ownerDocument||e).createElement("link"),Ft(i);var o=i;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Xt(i,"link",n),t.state.loading|=4,hf(i,s.precedence,e),t.instance=i;case"script":return i=Ql(s.src),(a=e.querySelector(sd(i)))?(t.instance=a,Ft(a),a):(n=s,(a=rn.get(i))&&(n=st({},s),Kv(n,a)),e=e.ownerDocument||e,a=e.createElement("script"),Ft(a),Xt(a,"link",n),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(Y(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(n=t.instance,t.state.loading|=4,hf(n,s.precedence,e));return t.instance}function hf(e,t,s){for(var n=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,i=a,o=0;o<n.length;o++){var l=n[o];if(l.dataset.precedence===t)i=l;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Xv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Kv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var gf=null;function P1(e,t,s){if(gf===null){var n=new Map,a=gf=new Map;a.set(s,n)}else a=gf,n=a.get(s),n||(n=new Map,a.set(s,n));if(n.has(e))return n;for(n.set(e,null),s=s.getElementsByTagName(e),a=0;a<s.length;a++){var i=s[a];if(!(i[Vu]||i[ss]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var o=i.getAttribute(t)||"";o=e+o;var l=n.get(o);l?l.push(i):n.set(o,[i])}}return n}function L1(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function Nae(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function RD(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var mu=null;function jae(){}function kae(e,t,s){if(mu===null)throw Error(Y(475));var n=mu;if(t.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var a=_l(s.href),i=e.querySelector(td(a));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=Nm.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=i,Ft(i);return}i=e.ownerDocument||e,s=AD(s),(a=rn.get(a))&&Xv(s,a),i=i.createElement("link"),Ft(i);var o=i;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Xt(i,"link",s),t.instance=i}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(n.count++,t=Nm.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function Sae(){if(mu===null)throw Error(Y(475));var e=mu;return e.stylesheets&&e.count===0&&a0(e,e.stylesheets),0<e.count?function(t){var s=setTimeout(function(){if(e.stylesheets&&a0(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(s)}}:null}function Nm(){if(this.count--,this.count===0){if(this.stylesheets)a0(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var jm=null;function a0(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,jm=new Map,t.forEach(_ae,e),jm=null,Nm.call(e))}function _ae(e,t){if(!(t.state.loading&4)){var s=jm.get(e);if(s)var n=s.get(null);else{s=new Map,jm.set(e,s);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(s.set(o.dataset.precedence,o),n=o)}n&&s.set(null,n)}a=t.instance,o=a.getAttribute("data-precedence"),i=s.get(o)||n,i===n&&s.set(null,a),s.set(o,a),this.count++,n=Nm.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),i?i.parentNode.insertBefore(a,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var hu={$$typeof:Na,Provider:null,Consumer:null,_currentValue:xi,_currentValue2:xi,_threadCount:0};function Cae(e,t,s,n,a,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dg(0),this.hiddenUpdates=Dg(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function TD(e,t,s,n,a,i,o,l,c,u,d,f){return e=new Cae(e,t,s,o,l,c,u,f),t=1,i===!0&&(t|=24),i=Ls(3,null,null,t),e.current=i,i.stateNode=e,t=_v(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:n,isDehydrated:s,cache:t},Ev(i),e}function MD(e){return e?(e=Ro,e):Ro}function DD(e,t,s,n,a,i){a=MD(a),n.context===null?n.context=a:n.pendingContext=a,n=Sr(t),n.payload={element:s},i=i===void 0?null:i,i!==null&&(n.callback=i),s=_r(e,n,t),s!==null&&($s(s,e,t),Ac(s,e,t))}function z1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Jv(e,t){z1(e,t),(e=e.alternate)&&z1(e,t)}function PD(e){if(e.tag===13){var t=Gl(e,67108864);t!==null&&$s(t,e,67108864),Jv(e,67108864)}}var km=!0;function Eae(e,t,s,n){var a=ge.T;ge.T=null;var i=Ie.p;try{Ie.p=2,eb(e,t,s,n)}finally{Ie.p=i,ge.T=a}}function Aae(e,t,s,n){var a=ge.T;ge.T=null;var i=Ie.p;try{Ie.p=8,eb(e,t,s,n)}finally{Ie.p=i,ge.T=a}}function eb(e,t,s,n){if(km){var a=r0(n);if(a===null)up(e,t,n,Sm,s),O1(e,n);else if(Tae(a,e,t,s,n))n.stopPropagation();else if(O1(e,n),t&4&&-1<Rae.indexOf(e)){for(;a!==null;){var i=Ul(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var o=ni(i.pendingLanes);if(o!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-Bs(o);l.entanglements[1]|=c,o&=~c}ra(i),!(Ve&6)&&(gm=Vn()+500,ed(0))}}break;case 13:l=Gl(i,2),l!==null&&$s(l,i,2),Dh(),Jv(i,2)}if(i=r0(n),i===null&&up(e,t,n,Sm,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else up(e,t,n,null,s)}}function r0(e){return e=pv(e),tb(e)}var Sm=null;function tb(e){if(Sm=null,e=ko(e),e!==null){var t=Fu(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=rT(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Sm=e,null}function LD(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gse()){case cT:return 2;case uT:return 8;case Jf:case pse:return 32;case dT:return 268435456;default:return 32}default:return 32}}var i0=!1,Ar=null,Rr=null,Tr=null,gu=new Map,pu=new Map,mr=[],Rae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O1(e,t){switch(e){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":gu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pu.delete(t.pointerId)}}function dc(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ul(t),t!==null&&PD(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Tae(e,t,s,n,a){switch(t){case"focusin":return Ar=dc(Ar,e,t,s,n,a),!0;case"dragenter":return Rr=dc(Rr,e,t,s,n,a),!0;case"mouseover":return Tr=dc(Tr,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return gu.set(i,dc(gu.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,pu.set(i,dc(pu.get(i)||null,e,t,s,n,a)),!0}return!1}function zD(e){var t=ko(e.target);if(t!==null){var s=Fu(t);if(s!==null){if(t=s.tag,t===13){if(t=rT(s),t!==null){e.blockedOn=t,kse(e.priority,function(){if(s.tag===13){var n=Is();n=fv(n);var a=Gl(s,n);a!==null&&$s(a,s,n),Jv(s,n)}});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=r0(e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);jx=n,s.target.dispatchEvent(n),jx=null}else return t=Ul(s),t!==null&&PD(t),e.blockedOn=s,!1;t.shift()}return!0}function B1(e,t,s){pf(e)&&s.delete(t)}function Mae(){i0=!1,Ar!==null&&pf(Ar)&&(Ar=null),Rr!==null&&pf(Rr)&&(Rr=null),Tr!==null&&pf(Tr)&&(Tr=null),gu.forEach(B1),pu.forEach(B1)}function Hd(e,t){e.blockedOn===t&&(e.blockedOn=null,i0||(i0=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,Mae)))}var Ud=null;function I1(e){Ud!==e&&(Ud=e,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,function(){Ud===e&&(Ud=null);for(var t=0;t<e.length;t+=3){var s=e[t],n=e[t+1],a=e[t+2];if(typeof n!="function"){if(tb(n||s)===null)continue;break}var i=Ul(s);i!==null&&(e.splice(t,3),t-=3,Ix(i,{pending:!0,data:a,method:s.method,action:n},n,a))}}))}function xu(e){function t(c){return Hd(c,e)}Ar!==null&&Hd(Ar,e),Rr!==null&&Hd(Rr,e),Tr!==null&&Hd(Tr,e),gu.forEach(t),pu.forEach(t);for(var s=0;s<mr.length;s++){var n=mr[s];n.blockedOn===e&&(n.blockedOn=null)}for(;0<mr.length&&(s=mr[0],s.blockedOn===null);)zD(s),s.blockedOn===null&&mr.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(n=0;n<s.length;n+=3){var a=s[n],i=s[n+1],o=a[js]||null;if(typeof i=="function")o||I1(s);else if(o){var l=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[js]||null)l=o.formAction;else if(tb(a)!==null)continue}else l=o.action;typeof l=="function"?s[n+1]=l:(s.splice(n,3),n-=3),I1(s)}}}function sb(e){this._internalRoot=e}Oh.prototype.render=sb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));var s=t.current,n=Is();DD(s,n,e,t,null,null)};Oh.prototype.unmount=sb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;DD(e.current,2,null,e,null,null),Dh(),t[Hl]=null}};function Oh(e){this._internalRoot=e}Oh.prototype.unstable_scheduleHydration=function(e){if(e){var t=pT();e={blockedOn:null,target:e,priority:t};for(var s=0;s<mr.length&&t!==0&&t<mr[s].priority;s++);mr.splice(s,0,e),s===0&&zD(e)}};var $1=nT.version;if($1!=="19.1.0")throw Error(Y(527,$1,"19.1.0"));Ie.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=lse(t),e=e!==null?iT(e):null,e=e===null?null:e.stateNode,e};var Dae={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{Hu=Gd.inject(Dae),Os=Gd}catch{}}Nh.createRoot=function(e,t){if(!aT(e))throw Error(Y(299));var s=!1,n="",a=TM,i=MM,o=DM,l=null;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=TD(e,1,!1,null,null,s,n,a,i,o,l,null),e[Hl]=t.current,Yv(e),new sb(t)};Nh.hydrateRoot=function(e,t,s){if(!aT(e))throw Error(Y(299));var n=!1,a="",i=TM,o=MM,l=DM,c=null,u=null;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onUncaughtError!==void 0&&(i=s.onUncaughtError),s.onCaughtError!==void 0&&(o=s.onCaughtError),s.onRecoverableError!==void 0&&(l=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(c=s.unstable_transitionCallbacks),s.formState!==void 0&&(u=s.formState)),t=TD(e,1,!0,t,s??null,n,a,i,o,l,c,u),t.context=MD(null),s=t.current,n=Is(),n=fv(n),a=Sr(n),a.callback=null,_r(s,a,n),s=n,t.current.lanes=s,Gu(t,s),ra(t),e[Hl]=t.current,Yv(e),new Oh(t)};Nh.version="19.1.0";function OD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OD)}catch(e){console.error(e)}}OD(),eT.exports=Nh;var Pae=eT.exports;Pae.createRoot(document.getElementById("root")).render(r.jsx(h.StrictMode,{children:r.jsx(JF,{showLoadingIndicator:!0,children:r.jsx(tI,{children:r.jsx(rse,{})})})}));export{Ll as a,Hi as b,wn as c,Ui as d,Gi as e,Vt as g,O0 as u};
