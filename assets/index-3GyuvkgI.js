var ER=Object.defineProperty;var _R=(e,t,n)=>t in e?ER(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ve=(e,t,n)=>_R(e,typeof t!="symbol"?t+"":t,n);function AR(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const o=Object.getOwnPropertyDescriptor(s,r);o&&Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function gx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var EN={exports:{}},qf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR=Symbol.for("react.transitional.element"),MR=Symbol.for("react.fragment");function _N(e,t,n){var s=null;if(n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:TR,type:e,key:s,ref:t!==void 0?t:null,props:n}}qf.Fragment=MR;qf.jsx=_N;qf.jsxs=_N;EN.exports=qf;var a=EN.exports;const Dt={CONTENT:1,DROPDOWN:100,AUTOCOMPLETE:120,TOOLTIP:150,MODAL:200,DRAWER:202,HEADER:50,SIDEBAR:60,STICKY:40};var AN={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px=Symbol.for("react.transitional.element"),RR=Symbol.for("react.portal"),DR=Symbol.for("react.fragment"),zR=Symbol.for("react.strict_mode"),LR=Symbol.for("react.profiler"),$R=Symbol.for("react.consumer"),PR=Symbol.for("react.context"),OR=Symbol.for("react.forward_ref"),BR=Symbol.for("react.suspense"),IR=Symbol.for("react.memo"),TN=Symbol.for("react.lazy"),dy=Symbol.iterator;function HR(e){return e===null||typeof e!="object"?null:(e=dy&&e[dy]||e["@@iterator"],typeof e=="function"?e:null)}var MN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RN=Object.assign,DN={};function Wi(e,t,n){this.props=e,this.context=t,this.refs=DN,this.updater=n||MN}Wi.prototype.isReactComponent={};Wi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zN(){}zN.prototype=Wi.prototype;function xx(e,t,n){this.props=e,this.context=t,this.refs=DN,this.updater=n||MN}var vx=xx.prototype=new zN;vx.constructor=xx;RN(vx,Wi.prototype);vx.isPureReactComponent=!0;var fy=Array.isArray,Je={H:null,A:null,T:null,S:null,V:null},LN=Object.prototype.hasOwnProperty;function yx(e,t,n,s,r,o){return n=o.ref,{$$typeof:px,type:e,key:t,ref:n!==void 0?n:null,props:o}}function UR(e,t){return yx(e.type,t,void 0,void 0,void 0,e.props)}function bx(e){return typeof e=="object"&&e!==null&&e.$$typeof===px}function FR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var my=/\/+/g;function Qm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FR(""+e.key):t.toString(36)}function hy(){}function VR(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(hy,hy):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ho(e,t,n,s,r){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case px:case RR:i=!0;break;case TN:return i=e._init,Ho(i(e._payload),t,n,s,r)}}if(i)return r=r(e),i=s===""?"."+Qm(e,0):s,fy(r)?(n="",i!=null&&(n=i.replace(my,"$&/")+"/"),Ho(r,t,n,"",function(u){return u})):r!=null&&(bx(r)&&(r=UR(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(my,"$&/")+"/")+i)),t.push(r)),1;i=0;var l=s===""?".":s+":";if(fy(e))for(var c=0;c<e.length;c++)s=e[c],o=l+Qm(s,c),i+=Ho(s,t,n,o,r);else if(c=HR(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,o=l+Qm(s,c++),i+=Ho(s,t,n,o,r);else if(o==="object"){if(typeof e.then=="function")return Ho(VR(e),t,n,s,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function Su(e,t,n){if(e==null)return e;var s=[],r=0;return Ho(e,s,"","",function(o){return t.call(n,o,r++)}),s}function qR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gy=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function GR(){}je.Children={map:Su,forEach:function(e,t,n){Su(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Su(e,function(){t++}),t},toArray:function(e){return Su(e,function(t){return t})||[]},only:function(e){if(!bx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Wi;je.Fragment=DR;je.Profiler=LR;je.PureComponent=xx;je.StrictMode=zR;je.Suspense=BR;je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Je;je.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Je.H.useMemoCache(e)}};je.cache=function(e){return function(){return e.apply(null,arguments)}};je.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=RN({},e.props),r=e.key,o=void 0;if(t!=null)for(i in t.ref!==void 0&&(o=void 0),t.key!==void 0&&(r=""+t.key),t)!LN.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(s[i]=t[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];s.children=l}return yx(e.type,r,void 0,void 0,o,s)};je.createContext=function(e){return e={$$typeof:PR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:$R,_context:e},e};je.createElement=function(e,t,n){var s,r={},o=null;if(t!=null)for(s in t.key!==void 0&&(o=""+t.key),t)LN.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(r[s]=t[s]);var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)r[s]===void 0&&(r[s]=i[s]);return yx(e,o,void 0,void 0,null,r)};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:OR,render:e}};je.isValidElement=bx;je.lazy=function(e){return{$$typeof:TN,_payload:{_status:-1,_result:e},_init:qR}};je.memo=function(e,t){return{$$typeof:IR,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=Je.T,n={};Je.T=n;try{var s=e(),r=Je.S;r!==null&&r(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(GR,gy)}catch(o){gy(o)}finally{Je.T=t}};je.unstable_useCacheRefresh=function(){return Je.H.useCacheRefresh()};je.use=function(e){return Je.H.use(e)};je.useActionState=function(e,t,n){return Je.H.useActionState(e,t,n)};je.useCallback=function(e,t){return Je.H.useCallback(e,t)};je.useContext=function(e){return Je.H.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e,t){return Je.H.useDeferredValue(e,t)};je.useEffect=function(e,t,n){var s=Je.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)};je.useId=function(){return Je.H.useId()};je.useImperativeHandle=function(e,t,n){return Je.H.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return Je.H.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return Je.H.useLayoutEffect(e,t)};je.useMemo=function(e,t){return Je.H.useMemo(e,t)};je.useOptimistic=function(e,t){return Je.H.useOptimistic(e,t)};je.useReducer=function(e,t,n){return Je.H.useReducer(e,t,n)};je.useRef=function(e){return Je.H.useRef(e)};je.useState=function(e){return Je.H.useState(e)};je.useSyncExternalStore=function(e,t,n){return Je.H.useSyncExternalStore(e,t,n)};je.useTransition=function(){return Je.H.useTransition()};je.version="19.1.0";AN.exports=je;var g=AN.exports;const L=gx(g),$N=AR({__proto__:null,default:L},[g]);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YR=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),py=e=>{const t=YR(e);return t.charAt(0).toUpperCase()+t.slice(1)},PN=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),XR=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:o,iconNode:i,...l},c)=>g.createElement("svg",{ref:c,...WR,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:PN("lucide",r),...!o&&!XR(l)&&{"aria-hidden":"true"},...l},[...i.map(([u,d])=>g.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(e,t)=>{const n=g.forwardRef(({className:s,...r},o)=>g.createElement(KR,{ref:o,iconNode:t,className:PN(`lucide-${ZR(py(e))}`,`lucide-${e}`,s),...r}));return n.displayName=py(e),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ng=oe("arrow-left",QR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],e4=oe("arrow-right",JR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Hc=oe("book-open",t4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],xy=oe("brain",n4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],cc=oe("check",s4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],a4=oe("chef-hat",r4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],En=oe("chevron-down",o4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],wx=oe("chevron-left",i4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Uc=oe("chevron-right",l4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],u4=oe("chevron-up",c4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ji=oe("circle-alert",d4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ld=oe("circle-check-big",f4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],h4=oe("circle-x",m4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jx=oe("circle",g4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ON=oe("clock",p4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],v4=oe("copy",x4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],b4=oe("droplets",y4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],j4=oe("ellipsis-vertical",w4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],uo=oe("external-link",N4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gf=oe("eye",S4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],BN=oe("file-text",k4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Zf=oe("flame",C4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],Nx=oe("ghost",E4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ki=oe("grid-3x3",_4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],vy=oe("hand",A4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Qi=oe("heart",T4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],IN=oe("house",M4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ni=oe("info",R4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],z4=oe("layout-grid",D4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],fo=oe("list",L4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],HN=oe("map",$4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],O4=oe("maximize-2",P4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],I4=oe("menu",B4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],U4=oe("message-square",H4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],V4=oe("minimize-2",F4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M5 12h14",key:"1ays0h"}]],Gl=oe("minus",q4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Z4=oe("monitor",G4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],X4=oe("moon",Y4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],K4=oe("pen-line",W4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],na=oe("plus",Q4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],gr=oe("rotate-ccw",J4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],t3=oe("search-x",e3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Si=oe("search",n3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$d=oe("settings",s3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],a3=oe("share-2",r3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],es=oe("shield",o3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],sa=oe("sparkles",i3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],rt=oe("star",l3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],yy=oe("sun",c3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],Sg=oe("sword",u3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],UN=oe("tag",d3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Pd=oe("target",f3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],h3=oe("trash-2",m3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],p3=oe("trees",g3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],by=oe("trending-down",x3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],kg=oe("trending-up",v3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uc=oe("triangle-alert",y3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],w3=oe("user-check",b3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Od=oe("user",j3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],FN=oe("users",N3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],k3=oe("utensils",S3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],E3=oe("wine",C3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bt=oe("x",_3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],zs=oe("zap",A3);var Sx={};Object.defineProperty(Sx,"__esModule",{value:!0});Sx.parse=$3;Sx.serialize=P3;const T3=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,M3=/^[\u0021-\u003A\u003C-\u007E]*$/,R3=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,D3=/^[\u0020-\u003A\u003D-\u007E]*$/,z3=Object.prototype.toString,L3=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function $3(e,t){const n=new L3,s=e.length;if(s<2)return n;const r=(t==null?void 0:t.decode)||O3;let o=0;do{const i=e.indexOf("=",o);if(i===-1)break;const l=e.indexOf(";",o),c=l===-1?s:l;if(i>c){o=e.lastIndexOf(";",i-1)+1;continue}const u=wy(e,o,i),d=jy(e,i,u),f=e.slice(u,d);if(n[f]===void 0){let m=wy(e,i+1,c),h=jy(e,c,m);const p=r(e.slice(m,h));n[f]=p}o=c+1}while(o<s);return n}function wy(e,t,n){do{const s=e.charCodeAt(t);if(s!==32&&s!==9)return t}while(++t<n);return n}function jy(e,t,n){for(;t>n;){const s=e.charCodeAt(--t);if(s!==32&&s!==9)return t+1}return n}function P3(e,t,n){const s=(n==null?void 0:n.encode)||encodeURIComponent;if(!T3.test(e))throw new TypeError(`argument name is invalid: ${e}`);const r=s(t);if(!M3.test(r))throw new TypeError(`argument val is invalid: ${t}`);let o=e+"="+r;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);o+="; Max-Age="+n.maxAge}if(n.domain){if(!R3.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);o+="; Domain="+n.domain}if(n.path){if(!D3.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);o+="; Path="+n.path}if(n.expires){if(!B3(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return o}function O3(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function B3(e){return z3.call(e)==="[object Date]"}var Ny="popstate";function I3(e={}){function t(r,o){let{pathname:i="/",search:l="",hash:c=""}=mo(r.location.hash.substring(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Cg("",{pathname:i,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let i=r.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=r.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof o=="string"?o:dc(o))}function s(r,o){qn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return U3(t,n,s,e)}function at(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function H3(){return Math.random().toString(36).substring(2,10)}function Sy(e,t){return{usr:e.state,key:e.key,idx:t}}function Cg(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?mo(t):t,state:n,key:t&&t.key||s||H3()}}function dc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function mo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function U3(e,t,n,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,i=r.history,l="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){l="POP";let b=d(),x=b==null?null:b-u;u=b,c&&c({action:l,location:v.location,delta:x})}function m(b,x){l="PUSH";let y=Cg(v.location,b,x);n&&n(y,b),u=d()+1;let w=Sy(y,u),j=v.createHref(y);try{i.pushState(w,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(j)}o&&c&&c({action:l,location:v.location,delta:1})}function h(b,x){l="REPLACE";let y=Cg(v.location,b,x);n&&n(y,b),u=d();let w=Sy(y,u),j=v.createHref(y);i.replaceState(w,"",j),o&&c&&c({action:l,location:v.location,delta:0})}function p(b){return F3(b)}let v={get action(){return l},get location(){return e(r,i)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Ny,f),c=b,()=>{r.removeEventListener(Ny,f),c=null}},createHref(b){return t(r,b)},createURL:p,encodeLocation(b){let x=p(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:h,go(b){return i.go(b)}};return v}function F3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),at(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:dc(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function VN(e,t,n="/"){return V3(e,t,n,!1)}function V3(e,t,n,s){let r=typeof t=="string"?mo(t):t,o=pr(r.pathname||"/",n);if(o==null)return null;let i=qN(e);q3(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=nD(o);l=eD(i[c],u,s)}return l}function qN(e,t=[],n=[],s=""){let r=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(at(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let u=dr([s,c.relativePath]),d=n.concat(c);o.children&&o.children.length>0&&(at(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),qN(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:Q3(u,o.index),routesMeta:d})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))r(o,i);else for(let c of GN(o.path))r(o,i,c)}),t}function GN(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let i=GN(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),r&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function q3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:J3(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var G3=/^:[\w-]+$/,Z3=3,Y3=2,X3=1,W3=10,K3=-2,ky=e=>e==="*";function Q3(e,t){let n=e.split("/"),s=n.length;return n.some(ky)&&(s+=K3),t&&(s+=Y3),n.filter(r=>!ky(r)).reduce((r,o)=>r+(G3.test(o)?Z3:o===""?X3:W3),s)}function J3(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function eD(e,t,n=!1){let{routesMeta:s}=e,r={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=o==="/"?t:t.slice(o.length)||"/",f=Bd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!s[s.length-1].route.index&&(f=Bd({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(r,f.params),i.push({params:r,pathname:dr([o,f.pathname]),pathnameBase:oD(dr([o,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(o=dr([o,f.pathnameBase]))}return i}function Bd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=tD(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],i=o.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let p=l[m]||"";i=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const h=l[m];return f&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function tD(e,t=!1,n=!0){qn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function nD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function pr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function sD(e,t="/"){let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?mo(e):e;return{pathname:n?n.startsWith("/")?n:rD(n,t):t,search:iD(s),hash:lD(r)}}function rD(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Jm(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function aD(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ZN(e){let t=aD(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function YN(e,t,n,s=!1){let r;typeof e=="string"?r=mo(e):(r={...e},at(!r.pathname||!r.pathname.includes("?"),Jm("?","pathname","search",r)),at(!r.pathname||!r.pathname.includes("#"),Jm("#","pathname","hash",r)),at(!r.search||!r.search.includes("#"),Jm("#","search","hash",r)));let o=e===""||r.pathname==="",i=o?"/":r.pathname,l;if(i==null)l=n;else{let f=t.length-1;if(!s&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=sD(r,l),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var dr=e=>e.join("/").replace(/\/\/+/g,"/"),oD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function cD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var XN=["POST","PUT","PATCH","DELETE"];new Set(XN);var uD=["GET",...XN];new Set(uD);var Ji=g.createContext(null);Ji.displayName="DataRouter";var Yf=g.createContext(null);Yf.displayName="DataRouterState";var WN=g.createContext({isTransitioning:!1});WN.displayName="ViewTransition";var dD=g.createContext(new Map);dD.displayName="Fetchers";var fD=g.createContext(null);fD.displayName="Await";var Ps=g.createContext(null);Ps.displayName="Navigation";var Fc=g.createContext(null);Fc.displayName="Location";var Os=g.createContext({outlet:null,matches:[],isDataRoute:!1});Os.displayName="Route";var kx=g.createContext(null);kx.displayName="RouteError";function mD(e,{relative:t}={}){at(Vc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=g.useContext(Ps),{hash:r,pathname:o,search:i}=qc(e,{relative:t}),l=o;return n!=="/"&&(l=o==="/"?n:dr([n,o])),s.createHref({pathname:l,search:i,hash:r})}function Vc(){return g.useContext(Fc)!=null}function Cr(){return at(Vc(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Fc).location}var KN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QN(e){g.useContext(Ps).static||g.useLayoutEffect(e)}function ft(){let{isDataRoute:e}=g.useContext(Os);return e?_D():hD()}function hD(){at(Vc(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Ji),{basename:t,navigator:n}=g.useContext(Ps),{matches:s}=g.useContext(Os),{pathname:r}=Cr(),o=JSON.stringify(ZN(s)),i=g.useRef(!1);return QN(()=>{i.current=!0}),g.useCallback((c,u={})=>{if(qn(i.current,KN),!i.current)return;if(typeof c=="number"){n.go(c);return}let d=YN(c,JSON.parse(o),r,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:dr([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,o,r,e])}var gD=g.createContext(null);function pD(e){let t=g.useContext(Os).outlet;return t&&g.createElement(gD.Provider,{value:e},t)}function qc(e,{relative:t}={}){let{matches:n}=g.useContext(Os),{pathname:s}=Cr(),r=JSON.stringify(ZN(n));return g.useMemo(()=>YN(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function xD(e,t){return JN(e,t)}function JN(e,t,n,s){var x;at(Vc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=g.useContext(Ps),{matches:o}=g.useContext(Os),i=o[o.length-1],l=i?i.params:{},c=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let y=d&&d.path||"";e1(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=Cr(),m;if(t){let y=typeof t=="string"?mo(t):t;at(u==="/"||((x=y.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),m=y}else m=f;let h=m.pathname||"/",p=h;if(u!=="/"){let y=u.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=VN(e,{pathname:p});qn(d||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),qn(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=jD(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:dr([u,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:dr([u,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,s);return t&&b?g.createElement(Fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function vD(){let e=ED(),t=cD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:o},"ErrorBoundary")," or"," ",g.createElement("code",{style:o},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:r},n):null,i)}var yD=g.createElement(vD,null),bD=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(Os.Provider,{value:this.props.routeContext},g.createElement(kx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wD({routeContext:e,match:t,children:n}){let s=g.useContext(Ji);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Os.Provider,{value:e},n)}function jD(e,t=[],n=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let r=e,o=n==null?void 0:n.errors;if(o!=null){let c=r.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);at(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let i=!1,l=-1;if(n)for(let c=0;c<r.length;c++){let u=r[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=n,m=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||m){i=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,u,d)=>{let f,m=!1,h=null,p=null;n&&(f=o&&u.route.id?o[u.route.id]:void 0,h=u.route.errorElement||yD,i&&(l<0&&d===0?(e1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,p=null):l===d&&(m=!0,p=u.route.hydrateFallbackElement||null)));let v=t.concat(r.slice(0,d+1)),b=()=>{let x;return f?x=h:m?x=p:u.route.Component?x=g.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,g.createElement(wD,{match:u,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?g.createElement(bD,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}function Cx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ND(e){let t=g.useContext(Ji);return at(t,Cx(e)),t}function SD(e){let t=g.useContext(Yf);return at(t,Cx(e)),t}function kD(e){let t=g.useContext(Os);return at(t,Cx(e)),t}function Ex(e){let t=kD(e),n=t.matches[t.matches.length-1];return at(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function CD(){return Ex("useRouteId")}function ED(){var s;let e=g.useContext(kx),t=SD("useRouteError"),n=Ex("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function _D(){let{router:e}=ND("useNavigate"),t=Ex("useNavigate"),n=g.useRef(!1);return QN(()=>{n.current=!0}),g.useCallback(async(r,o={})=>{qn(n.current,KN),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))},[e,t])}var Cy={};function e1(e,t,n){!t&&!Cy[e]&&(Cy[e]=!0,qn(!1,n))}g.memo(AD);function AD({routes:e,future:t,state:n}){return JN(e,void 0,n,t)}function TD(e){return pD(e.context)}function vt(e){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MD({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:o=!1}){at(!Vc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:i,navigator:r,static:o,future:{}}),[i,r,o]);typeof n=="string"&&(n=mo(n));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:m="default"}=n,h=g.useMemo(()=>{let p=pr(c,i);return p==null?null:{location:{pathname:p,search:u,hash:d,state:f,key:m},navigationType:s}},[i,c,u,d,f,m,s]);return qn(h!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:g.createElement(Ps.Provider,{value:l},g.createElement(Fc.Provider,{children:t,value:h}))}function RD({children:e,location:t}){return xD(Eg(e),t)}function Eg(e,t=[]){let n=[];return g.Children.forEach(e,(s,r)=>{if(!g.isValidElement(s))return;let o=[...t,r];if(s.type===g.Fragment){n.push.apply(n,Eg(s.props.children,o));return}at(s.type===vt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!s.props.index||!s.props.children,"An index route cannot have child routes.");let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=Eg(s.props.children,o)),n.push(i)}),n}var fd="get",md="application/x-www-form-urlencoded";function Xf(e){return e!=null&&typeof e.tagName=="string"}function DD(e){return Xf(e)&&e.tagName.toLowerCase()==="button"}function zD(e){return Xf(e)&&e.tagName.toLowerCase()==="form"}function LD(e){return Xf(e)&&e.tagName.toLowerCase()==="input"}function $D(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function PD(e,t){return e.button===0&&(!t||t==="_self")&&!$D(e)}function _g(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function OD(e,t){let n=_g(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(o=>{n.append(r,o)})}),n}var ku=null;function BD(){if(ku===null)try{new FormData(document.createElement("form"),0),ku=!1}catch{ku=!0}return ku}var ID=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eh(e){return e!=null&&!ID.has(e)?(qn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${md}"`),null):e}function HD(e,t){let n,s,r,o,i;if(zD(e)){let l=e.getAttribute("action");s=l?pr(l,t):null,n=e.getAttribute("method")||fd,r=eh(e.getAttribute("enctype"))||md,o=new FormData(e)}else if(DD(e)||LD(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?pr(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||fd,r=eh(e.getAttribute("formenctype"))||eh(l.getAttribute("enctype"))||md,o=new FormData(l,e),!BD()){let{name:u,type:d,value:f}=e;if(d==="image"){let m=u?`${u}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else u&&o.append(u,f)}}else{if(Xf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fd,s=null,r=md,i=e}return o&&r==="text/plain"&&(i=o,o=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:o,body:i}}function _x(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function UD(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FD(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function VD(e,t,n){let s=await Promise.all(e.map(async r=>{let o=t.routes[r.route.id];if(o){let i=await UD(o,n);return i.links?i.links():[]}return[]}));return YD(s.flat(1).filter(FD).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Ey(e,t,n,s,r,o){let i=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return o==="assets"?t.filter((c,u)=>i(c,u)||l(c,u)):o==="data"?t.filter((c,u)=>{var f;let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function qD(e,t,{includeHydrateFallback:n}={}){return GD(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function GD(e){return[...new Set(e)]}function ZD(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function YD(e,t){let n=new Set;return new Set(t),e.reduce((s,r)=>{let o=JSON.stringify(ZD(r));return n.has(o)||(n.add(o),s.push({key:o,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var XD=new Set([100,101,204,205]);function WD(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&pr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function t1(){let e=g.useContext(Ji);return _x(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function KD(){let e=g.useContext(Yf);return _x(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ax=g.createContext(void 0);Ax.displayName="FrameworkContext";function n1(){let e=g.useContext(Ax);return _x(e,"You must render this element inside a <HydratedRouter> element"),e}function QD(e,t){let n=g.useContext(Ax),[s,r]=g.useState(!1),[o,i]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,m=g.useRef(null);g.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let v=x=>{x.forEach(y=>{i(y.isIntersecting)})},b=new IntersectionObserver(v,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[e]),g.useEffect(()=>{if(s){let v=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(v)}}},[s]);let h=()=>{r(!0)},p=()=>{r(!1),i(!1)};return n?e!=="intent"?[o,m,{}]:[o,m,{onFocus:bl(l,h),onBlur:bl(c,p),onMouseEnter:bl(u,h),onMouseLeave:bl(d,p),onTouchStart:bl(f,h)}]:[!1,m,{}]}function bl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function JD({page:e,...t}){let{router:n}=t1(),s=g.useMemo(()=>VN(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?g.createElement(t5,{page:e,matches:s,...t}):null}function e5(e){let{manifest:t,routeModules:n}=n1(),[s,r]=g.useState([]);return g.useEffect(()=>{let o=!1;return VD(e,t,n).then(i=>{o||r(i)}),()=>{o=!0}},[e,t,n]),s}function t5({page:e,matches:t,...n}){let s=Cr(),{manifest:r,routeModules:o}=n1(),{basename:i}=t1(),{loaderData:l,matches:c}=KD(),u=g.useMemo(()=>Ey(e,t,c,r,s,"data"),[e,t,c,r,s]),d=g.useMemo(()=>Ey(e,t,c,r,s,"assets"),[e,t,c,r,s]),f=g.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let p=new Set,v=!1;if(t.forEach(x=>{var w;let y=r.routes[x.route.id];!y||!y.hasLoader||(!u.some(j=>j.route.id===x.route.id)&&x.route.id in l&&((w=o[x.route.id])!=null&&w.shouldRevalidate)||y.hasClientLoader?v=!0:p.add(x.route.id))}),p.size===0)return[];let b=WD(e,i);return v&&p.size>0&&b.searchParams.set("_routes",t.filter(x=>p.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[i,l,s,r,u,t,e,o]),m=g.useMemo(()=>qD(d,r),[d,r]),h=e5(d);return g.createElement(g.Fragment,null,f.map(p=>g.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),m.map(p=>g.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:v})=>g.createElement("link",{key:p,...v})))}function n5(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var s1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{s1&&(window.__reactRouterVersion="7.6.3")}catch{}function s5({basename:e,children:t,window:n}){let s=g.useRef();s.current==null&&(s.current=I3({window:n,v5Compat:!0}));let r=s.current,[o,i]=g.useState({action:r.action,location:r.location}),l=g.useCallback(c=>{g.startTransition(()=>i(c))},[i]);return g.useLayoutEffect(()=>r.listen(l),[r,l]),g.createElement(MD,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:r})}var r1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a1=g.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:r,reloadDocument:o,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...m},h){let{basename:p}=g.useContext(Ps),v=typeof u=="string"&&r1.test(u),b,x=!1;if(typeof u=="string"&&v&&(b=u,s1))try{let C=new URL(window.location.href),_=u.startsWith("//")?new URL(C.protocol+u):new URL(u),P=pr(_.pathname,p);_.origin===C.origin&&P!=null?u=P+_.search+_.hash:x=!0}catch{qn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=mD(u,{relative:r}),[w,j,N]=QD(s,m),S=i5(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:f});function k(C){t&&t(C),C.defaultPrevented||S(C)}let E=g.createElement("a",{...m,...N,href:b||y,onClick:x||o?t:k,ref:n5(h,j),target:c,"data-discover":!v&&n==="render"?"true":void 0});return w&&!v?g.createElement(g.Fragment,null,E,g.createElement(JD,{page:y})):E});a1.displayName="Link";var r5=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:r=!1,style:o,to:i,viewTransition:l,children:c,...u},d){let f=qc(i,{relative:u.relative}),m=Cr(),h=g.useContext(Yf),{navigator:p,basename:v}=g.useContext(Ps),b=h!=null&&m5(f)&&l===!0,x=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,y=m.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(y=y.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&v&&(w=pr(w,v)||w);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=y===x||!r&&y.startsWith(x)&&y.charAt(j)==="/",S=w!=null&&(w===x||!r&&w.startsWith(x)&&w.charAt(x.length)==="/"),k={isActive:N,isPending:S,isTransitioning:b},E=N?t:void 0,C;typeof s=="function"?C=s(k):C=[s,N?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let _=typeof o=="function"?o(k):o;return g.createElement(a1,{...u,"aria-current":E,className:C,ref:d,style:_,to:i,viewTransition:l},typeof c=="function"?c(k):c)});r5.displayName="NavLink";var a5=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:o,method:i=fd,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...m},h)=>{let p=d5(),v=f5(l,{relative:u}),b=i.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&r1.test(l),y=w=>{if(c&&c(w),w.defaultPrevented)return;w.preventDefault();let j=w.nativeEvent.submitter,N=(j==null?void 0:j.getAttribute("formmethod"))||i;p(j||w.currentTarget,{fetcherKey:t,method:N,navigate:n,replace:r,state:o,relative:u,preventScrollReset:d,viewTransition:f})};return g.createElement("form",{ref:h,method:b,action:v,onSubmit:s?c:y,...m,"data-discover":!x&&e==="render"?"true":void 0})});a5.displayName="Form";function o5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o1(e){let t=g.useContext(Ji);return at(t,o5(e)),t}function i5(e,{target:t,replace:n,state:s,preventScrollReset:r,relative:o,viewTransition:i}={}){let l=ft(),c=Cr(),u=qc(e,{relative:o});return g.useCallback(d=>{if(PD(d,t)){d.preventDefault();let f=n!==void 0?n:dc(c)===dc(u);l(e,{replace:f,state:s,preventScrollReset:r,relative:o,viewTransition:i})}},[c,l,u,n,s,t,e,r,o,i])}function l5(e){qn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(_g(e)),n=g.useRef(!1),s=Cr(),r=g.useMemo(()=>OD(s.search,n.current?null:t.current),[s.search]),o=ft(),i=g.useCallback((l,c)=>{const u=_g(typeof l=="function"?l(r):l);n.current=!0,o("?"+u,c)},[o,r]);return[r,i]}var c5=0,u5=()=>`__${String(++c5)}__`;function d5(){let{router:e}=o1("useSubmit"),{basename:t}=g.useContext(Ps),n=CD();return g.useCallback(async(s,r={})=>{let{action:o,method:i,encType:l,formData:c,body:u}=HD(s,t);if(r.navigate===!1){let d=r.fetcherKey||u5();await e.fetch(d,n,r.action||o,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||i,formEncType:r.encType||l,flushSync:r.flushSync})}else await e.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||i,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}function f5(e,{relative:t}={}){let{basename:n}=g.useContext(Ps),s=g.useContext(Os);at(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={...qc(e||".",{relative:t})},i=Cr();if(e==null){o.search=i.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();o.search=d?`?${d}`:""}}return(!e||e===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:dr([n,o.pathname])),dc(o)}function m5(e,t={}){let n=g.useContext(WN);at(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=o1("useViewTransitionState"),r=qc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=pr(n.currentLocation.pathname,s)||n.currentLocation.pathname,i=pr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Bd(r.pathname,i)!=null||Bd(r.pathname,o)!=null}[...XD];var i1={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h5=g;function l1(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Dr(){}var Zt={d:{f:Dr,r:function(){throw Error(l1(522))},D:Dr,C:Dr,L:Dr,m:Dr,X:Dr,S:Dr,M:Dr},p:0,findDOMNode:null},g5=Symbol.for("react.portal");function p5(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:g5,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}var Zl=h5.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Wf(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Zt;Kt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(l1(299));return p5(e,t,null,n)};Kt.flushSync=function(e){var t=Zl.T,n=Zt.p;try{if(Zl.T=null,Zt.p=2,e)return e()}finally{Zl.T=t,Zt.p=n,Zt.d.f()}};Kt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Zt.d.C(e,t))};Kt.prefetchDNS=function(e){typeof e=="string"&&Zt.d.D(e)};Kt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,s=Wf(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Zt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:o}):n==="script"&&Zt.d.X(e,{crossOrigin:s,integrity:r,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Kt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Wf(t.as,t.crossOrigin);Zt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Zt.d.M(e)};Kt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,s=Wf(n,t.crossOrigin);Zt.d.L(e,n,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Kt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Wf(t.as,t.crossOrigin);Zt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Zt.d.m(e)};Kt.requestFormReset=function(e){Zt.d.r(e)};Kt.unstable_batchedUpdates=function(e,t){return e(t)};Kt.useFormState=function(e,t,n){return Zl.H.useFormState(e,t,n)};Kt.useFormStatus=function(){return Zl.H.useHostTransitionStatus()};Kt.version="19.1.0";function c1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c1)}catch(e){console.error(e)}}c1(),i1.exports=Kt;var Kf=i1.exports;const x5=gx(Kf);function v5(){return"/lorerim-arcaneum/"}function ls(e){return`${v5()}${e}`}const _y=e=>{let t;const n=new Set,s=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const m=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(h=>h(t,m))}},r=()=>t,l={setState:s,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(s,r,l);return l},y5=e=>e?_y(e):_y,b5=e=>e;function w5(e,t=b5){const n=L.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return L.useDebugValue(n),n}const Ay=e=>{const t=y5(e),n=s=>w5(t,s);return Object.assign(n,t),n},cs=e=>e?Ay(e):Ay,ho=cs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(ls("data/perk-trees.json"));if(!s.ok)throw new Error(`Failed to fetch perk trees data: ${s.status}`);const o=await s.json();e({data:o,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load perk trees",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(o=>{var i,l;return o.name.toLowerCase().includes(r)||((i=o.description)==null?void 0:i.toLowerCase().includes(r))||((l=o.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),j5=Object.freeze(Object.defineProperty({__proto__:null,usePerkTreesStore:ho},Symbol.toStringTag,{value:"Module"}));function N5(){return ho.getState().data}function u1(e,t,n){var i;if(t.length===0)return 0;const r=N5().find(l=>l.treeId===e);if(!r)return 0;let o=0;for(const l of t){const c=r.perks.find(f=>f.edid===l);if(!c)continue;const u=n[l]||1,d=c.ranks.find(f=>f.rank===u);if(d&&(i=d.prerequisites)!=null&&i.skillLevel){const f=d.prerequisites.skillLevel.level;o=Math.max(o,f)}}return o}function Cu(e){const t={};for(const[n,s]of Object.entries(e.selected))if(s.length>0){const r=u1(n,s,e.ranks);r>0&&(t[n]=r)}return t}const Ty={v:1,name:"",notes:"",race:null,stone:null,religion:null,traits:{regular:[],bonus:[]},traitLimits:{regular:2,bonus:1},skills:{major:[],minor:[]},perks:{selected:{},ranks:{}},skillLevels:{},equipment:[],userProgress:{unlocks:[]},destinyPath:[],attributeAssignments:{health:0,stamina:0,magicka:0,level:1,assignments:{}}},Fr=cs((e,t)=>({build:Ty,updateBuild:n=>e(s=>({build:{...s.build,...n}})),setBuild:n=>e({build:n}),resetBuild:()=>e({build:Ty}),setAttributeAssignment:(n,s)=>{e(r=>{const o={...r.build.attributeAssignments.assignments},i={...r.build.attributeAssignments},l=o[n];return l&&(i[l]=Math.max(0,i[l]-5)),o[n]=s,i[s]+=5,{build:{...r.build,attributeAssignments:{...r.build.attributeAssignments,...i,assignments:o}}}})},clearAttributeAssignment:n=>{e(s=>{const r={...s.build.attributeAssignments.assignments},o={...s.build.attributeAssignments},i=r[n];return i&&(o[i]=Math.max(0,o[i]-5),delete r[n]),{build:{...s.build,attributeAssignments:{...s.build.attributeAssignments,...o,assignments:r}}}})},clearAllAttributeAssignments:()=>{e(n=>({build:{...n.build,attributeAssignments:{health:0,stamina:0,magicka:0,level:n.build.attributeAssignments.level,assignments:{}}}}))},updateAttributeLevel:n=>{e(s=>({build:{...s.build,attributeAssignments:{...s.build.attributeAssignments,level:Math.max(1,n)}}}))}}));function pt(){const e=Fr(F=>F.build.skills.major),t=Fr(F=>F.build.skills.minor),n=Fr(F=>F.build),s=Fr(F=>F.updateBuild),r=Fr(F=>F.resetBuild),o=F=>(e==null?void 0:e.includes(F))??!1,i=F=>(t==null?void 0:t.includes(F))??!1;return{build:n,majorSkills:e,minorSkills:t,hasMajorSkill:o,hasMinorSkill:i,addMajorSkill:F=>{console.log("addMajorSkill called:",{skillId:F});const X=e??[],Q=t??[];if(!o(F)&&X.length<3){const W=Q.filter(be=>be!==F),se={major:[...X,F],minor:W};console.log("addMajorSkill - updating build with new skills:",se),s({skills:se})}else console.log("addMajorSkill - skill already major or limit reached, skipping")},removeMajorSkill:F=>{const X=e??[],Q=t??[],W=X.filter(se=>se!==F);s({skills:{major:W,minor:Q}})},addMinorSkill:F=>{const X=e??[],Q=t??[];if(!i(F)&&Q.length<6){const W=X.filter(se=>se!==F);s({skills:{major:W,minor:[...Q,F]}})}},removeMinorSkill:F=>{const X=e??[],W=(t??[]).filter(se=>se!==F);s({skills:{major:X,minor:W}})},addPerk:(F,X)=>{var se;console.log("addPerk called:",{skillId:F,perkId:X});const Q=((se=n==null?void 0:n.perks)==null?void 0:se.selected)??{},W=Q[F]??[];if(W.includes(X))console.log("addPerk - perk already selected, skipping");else{const be={...n==null?void 0:n.perks,selected:{...Q,[F]:[...W,X]}},ue=Cu(be);console.log("addPerk - updating build with new perks:",be),console.log("addPerk - calculated skill levels:",ue),s({perks:be,skillLevels:ue})}},removePerk:(F,X)=>{var ne;const Q=((ne=n==null?void 0:n.perks)==null?void 0:ne.selected)??{},se=(Q[F]??[]).filter(ze=>ze!==X),be={...n==null?void 0:n.perks,selected:{...Q,[F]:se}},ue=Cu(be);s({perks:be,skillLevels:ue})},setPerkRank:(F,X)=>{var be;console.log("setPerkRank called:",{perkId:F,rank:X});const Q=((be=n==null?void 0:n.perks)==null?void 0:be.ranks)??{},W={...n==null?void 0:n.perks,ranks:{...Q,[F]:X}},se=Cu(W);console.log("setPerkRank - updating build with new ranks:",W),console.log("setPerkRank - calculated skill levels:",se),s({perks:W,skillLevels:se})},clearSkillPerks:F=>{var ze,xt;const X=((ze=n==null?void 0:n.perks)==null?void 0:ze.selected)??{},Q=((xt=n==null?void 0:n.perks)==null?void 0:xt.ranks)??{},{[F]:W,...se}=X,be={...Q};W&&W.forEach(hs=>{delete be[hs]});const ue={...n==null?void 0:n.perks,selected:se,ranks:be},ne=Cu(ue);s({perks:ue,skillLevels:ne})},getSkillPerks:F=>{var X,Q;return((Q=(X=n==null?void 0:n.perks)==null?void 0:X.selected)==null?void 0:Q[F])??[]},getPerkRank:F=>{var X,Q;return((Q=(X=n==null?void 0:n.perks)==null?void 0:X.ranks)==null?void 0:Q[F])??0},getSkillLevel:F=>{var X;return((X=n==null?void 0:n.skillLevels)==null?void 0:X[F])??0},addTrait:F=>{const{regular:X=[],bonus:Q=[]}=(n==null?void 0:n.traits)??{regular:[],bonus:[]},{regular:W=2,bonus:se=1}=(n==null?void 0:n.traitLimits)??{regular:2,bonus:1};X.length<W?s({traits:{...n==null?void 0:n.traits,regular:[...X,F]}}):Q.length<se&&s({traits:{...n==null?void 0:n.traits,bonus:[...Q,F]}})},addRegularTrait:F=>{const{regular:X=[]}=(n==null?void 0:n.traits)??{regular:[]},{regular:Q=2}=(n==null?void 0:n.traitLimits)??{regular:2};X.length<Q&&s({traits:{...n==null?void 0:n.traits,regular:[...X,F]}})},addBonusTrait:F=>{const{bonus:X=[]}=(n==null?void 0:n.traits)??{bonus:[]},{bonus:Q=1}=(n==null?void 0:n.traitLimits)??{bonus:1};X.length<Q&&s({traits:{...n==null?void 0:n.traits,bonus:[...X,F]}})},removeTrait:F=>{const{regular:X=[],bonus:Q=[]}=(n==null?void 0:n.traits)??{regular:[],bonus:[]};s({traits:{regular:X.filter(W=>W!==F),bonus:Q.filter(W=>W!==F)}})},hasTrait:F=>{var X,Q,W,se;return(((Q=(X=n==null?void 0:n.traits)==null?void 0:X.regular)==null?void 0:Q.includes(F))??!1)||(((se=(W=n==null?void 0:n.traits)==null?void 0:W.bonus)==null?void 0:se.includes(F))??!1)},hasRegularTrait:F=>{var X,Q;return((Q=(X=n==null?void 0:n.traits)==null?void 0:X.regular)==null?void 0:Q.includes(F))??!1},hasBonusTrait:F=>{var X,Q;return((Q=(X=n==null?void 0:n.traits)==null?void 0:X.bonus)==null?void 0:Q.includes(F))??!1},setRace:F=>{s({race:F})},setBirthsign:F=>{s({stone:F})},setStone:F=>{s({stone:F})},setReligion:F=>{s({religion:F})},addEquipment:F=>{const X=(n==null?void 0:n.equipment)??[];X.includes(F)||s({equipment:[...X,F]})},removeEquipment:F=>{const X=(n==null?void 0:n.equipment)??[];s({equipment:X.filter(Q=>Q!==F)})},setBuildName:F=>{s({name:F})},setBuildNotes:F=>{s({notes:F})},getDestinyPath:()=>(n==null?void 0:n.destinyPath)??[],setDestinyPath:F=>{s({destinyPath:F})},updateBuild:s,clearBuild:()=>{s({name:"",notes:"",race:null,stone:null,religion:null,skills:{major:[],minor:[]},traits:{regular:[],bonus:[]},perks:{selected:{},ranks:{}},skillLevels:{},destinyPath:[]})},resetBuild:r,getSummary:()=>{var F,X,Q,W,se,be,ue,ne,ze;return{name:(n==null?void 0:n.name)||"Unnamed Character",race:(n==null?void 0:n.race)||"Not selected",stone:(n==null?void 0:n.stone)||"Not selected",religion:(n==null?void 0:n.religion)||"Not selected",traitCount:(((X=(F=n==null?void 0:n.traits)==null?void 0:F.regular)==null?void 0:X.length)??0)+(((W=(Q=n==null?void 0:n.traits)==null?void 0:Q.bonus)==null?void 0:W.length)??0),majorSkillCount:((be=(se=n==null?void 0:n.skills)==null?void 0:se.major)==null?void 0:be.length)??0,minorSkillCount:((ne=(ue=n==null?void 0:n.skills)==null?void 0:ue.minor)==null?void 0:ne.length)??0,equipmentCount:((ze=n==null?void 0:n.equipment)==null?void 0:ze.length)??0}},getRegularTraitLimit:()=>{var F;return((F=n==null?void 0:n.traitLimits)==null?void 0:F.regular)??2},getBonusTraitLimit:()=>{var F;return((F=n==null?void 0:n.traitLimits)==null?void 0:F.bonus)??1},getRegularTraitCount:()=>{var F,X;return((X=(F=n==null?void 0:n.traits)==null?void 0:F.regular)==null?void 0:X.length)??0},getBonusTraitCount:()=>{var F,X;return((X=(F=n==null?void 0:n.traits)==null?void 0:F.bonus)==null?void 0:X.length)??0},canAddRegularTrait:()=>{var F,X,Q;return(((X=(F=n==null?void 0:n.traits)==null?void 0:F.regular)==null?void 0:X.length)??0)<(((Q=n==null?void 0:n.traitLimits)==null?void 0:Q.regular)??2)},canAddBonusTrait:()=>{var F,X,Q;return(((X=(F=n==null?void 0:n.traits)==null?void 0:F.bonus)==null?void 0:X.length)??0)<(((Q=n==null?void 0:n.traitLimits)==null?void 0:Q.bonus)??1)},getTraitType:F=>{var X,Q,W,se;return(Q=(X=n==null?void 0:n.traits)==null?void 0:X.regular)!=null&&Q.includes(F)?"regular":(se=(W=n==null?void 0:n.traits)==null?void 0:W.bonus)!=null&&se.includes(F)?"bonus":null},isAllTraitsFull:()=>{var se,be,ue,ne,ze,xt;const F=((be=(se=n==null?void 0:n.traits)==null?void 0:se.regular)==null?void 0:be.length)??0,X=((ne=(ue=n==null?void 0:n.traits)==null?void 0:ue.bonus)==null?void 0:ne.length)??0,Q=((ze=n==null?void 0:n.traitLimits)==null?void 0:ze.regular)??2,W=((xt=n==null?void 0:n.traitLimits)==null?void 0:xt.bonus)??1;return F>=Q&&X>=W},addTraitToSlot:(F,X)=>{if(X==="regular"){const{regular:Q=[]}=(n==null?void 0:n.traits)??{regular:[]},{regular:W=2}=(n==null?void 0:n.traitLimits)??{regular:2};if(Q.length<W){const{bonus:se=[]}=(n==null?void 0:n.traits)??{bonus:[]},be=se.filter(ue=>ue!==F);s({traits:{regular:[...Q,F],bonus:be}})}}else{const{bonus:Q=[]}=(n==null?void 0:n.traits)??{bonus:[]},{bonus:W=1}=(n==null?void 0:n.traitLimits)??{bonus:1};if(Q.length<W){const{regular:se=[]}=(n==null?void 0:n.traits)??{regular:[]},be=se.filter(ue=>ue!==F);s({traits:{regular:be,bonus:[...Q,F]}})}}},isSlotAvailable:(F,X=0)=>{var Q,W,se,be;return F==="regular"?(((W=(Q=n==null?void 0:n.traits)==null?void 0:Q.regular)==null?void 0:W.length)??0)<=X:(((be=(se=n==null?void 0:n.traits)==null?void 0:se.bonus)==null?void 0:be.length)??0)<=X}}}function My(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Qf(...e){return t=>{let n=!1;const s=e.map(r=>{const o=My(r,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let r=0;r<s.length;r++){const o=s[r];typeof o=="function"?o():My(e[r],null)}}}}function Oe(...e){return g.useCallback(Qf(...e),e)}function ki(e){const t=k5(e),n=g.forwardRef((s,r)=>{const{children:o,...i}=s,l=g.Children.toArray(o),c=l.find(E5);if(c){const u=c.props.children,d=l.map(f=>f===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:f);return a.jsx(t,{...i,ref:r,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return a.jsx(t,{...i,ref:r,children:o})});return n.displayName=`${e}.Slot`,n}var S5=ki("Slot");function k5(e){const t=g.forwardRef((n,s)=>{const{children:r,...o}=n;if(g.isValidElement(r)){const i=A5(r),l=_5(o,r.props);return r.type!==g.Fragment&&(l.ref=s?Qf(s,i):i),g.cloneElement(r,l)}return g.Children.count(r)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var d1=Symbol("radix.slottable");function C5(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=d1,t}function E5(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===d1}function _5(e,t){const n={...t};for(const s in t){const r=e[s],o=t[s];/^on[A-Z]/.test(s)?r&&o?n[s]=(...l)=>{const c=o(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...o}:s==="className"&&(n[s]=[r,o].filter(Boolean).join(" "))}return{...e,...n}}function A5(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function f1(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=f1(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function m1(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=f1(e))&&(s&&(s+=" "),s+=t);return s}const Ry=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Dy=m1,el=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return Dy(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:o}=t,i=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],f=o==null?void 0:o[u];if(d===null)return null;const m=Ry(d)||Ry(f);return r[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:f,className:m,...h}=d;return Object.entries(h).every(p=>{let[v,b]=p;return Array.isArray(b)?b.includes({...o,...l}[v]):{...o,...l}[v]===b})?[...u,f,m]:u},[]);return Dy(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)},Tx="-",T5=e=>{const t=R5(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(Tx);return l[0]===""&&l.length!==1&&l.shift(),h1(l,t)||M5(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},h1=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?h1(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const o=e.join(Tx);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},zy=/^\[(.+)\]$/,M5=e=>{if(zy.test(e)){const t=zy.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},R5=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)Ag(n[r],s,r,t);return s},Ag=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const o=r===""?t:Ly(t,r);o.classGroupId=n;return}if(typeof r=="function"){if(D5(r)){Ag(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([o,i])=>{Ag(i,Ly(t,o),n,s)})})},Ly=(e,t)=>{let n=e;return t.split(Tx).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},D5=e=>e.isThemeGetter,z5=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,s=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return r(o,i),i},set(o,i){n.has(o)?n.set(o,i):r(o,i)}}},Tg="!",Mg=":",L5=Mg.length,$5=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=r=>{const o=[];let i=0,l=0,c=0,u;for(let p=0;p<r.length;p++){let v=r[p];if(i===0&&l===0){if(v===Mg){o.push(r.slice(c,p)),c=p+L5;continue}if(v==="/"){u=p;continue}}v==="["?i++:v==="]"?i--:v==="("?l++:v===")"&&l--}const d=o.length===0?r:r.substring(c),f=P5(d),m=f!==d,h=u&&u>c?u-c:void 0;return{modifiers:o,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:h}};if(t){const r=t+Mg,o=s;s=i=>i.startsWith(r)?o(i.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=o=>n({className:o,parseClassName:r})}return s},P5=e=>e.endsWith(Tg)?e.substring(0,e.length-1):e.startsWith(Tg)?e.substring(1):e,O5=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let o=[];return s.forEach(i=>{i[0]==="["||t[i]?(r.push(...o.sort(),i),o=[]):o.push(i)}),r.push(...o.sort()),r}},B5=e=>({cache:z5(e.cacheSize),parseClassName:$5(e),sortModifiers:O5(e),...T5(e)}),I5=/\s+/,H5=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:o}=t,i=[],l=e.trim().split(I5);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:f,modifiers:m,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:v}=n(d);if(f){c=d+(c.length>0?" "+c:c);continue}let b=!!v,x=s(b?p.substring(0,v):p);if(!x){if(!b){c=d+(c.length>0?" "+c:c);continue}if(x=s(p),!x){c=d+(c.length>0?" "+c:c);continue}b=!1}const y=o(m).join(":"),w=h?y+Tg:y,j=w+x;if(i.includes(j))continue;i.push(j);const N=r(x,b);for(let S=0;S<N.length;++S){const k=N[S];i.push(w+k)}c=d+(c.length>0?" "+c:c)}return c};function U5(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=g1(t))&&(s&&(s+=" "),s+=n);return s}const g1=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=g1(e[s]))&&(n&&(n+=" "),n+=t);return n};function F5(e,...t){let n,s,r,o=i;function i(c){const u=t.reduce((d,f)=>f(d),e());return n=B5(u),s=n.cache.get,r=n.cache.set,o=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=H5(c,n);return r(c,d),d}return function(){return o(U5.apply(null,arguments))}}const Nt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},p1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,x1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,V5=/^\d+\/\d+$/,q5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,G5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Z5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Y5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,X5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,To=e=>V5.test(e),Ne=e=>!!e&&!Number.isNaN(Number(e)),zr=e=>!!e&&Number.isInteger(Number(e)),th=e=>e.endsWith("%")&&Ne(e.slice(0,-1)),Ws=e=>q5.test(e),W5=()=>!0,K5=e=>G5.test(e)&&!Z5.test(e),v1=()=>!1,Q5=e=>Y5.test(e),J5=e=>X5.test(e),ez=e=>!re(e)&&!ae(e),tz=e=>tl(e,w1,v1),re=e=>p1.test(e),Ea=e=>tl(e,j1,K5),nh=e=>tl(e,oz,Ne),$y=e=>tl(e,y1,v1),nz=e=>tl(e,b1,J5),Eu=e=>tl(e,N1,Q5),ae=e=>x1.test(e),wl=e=>nl(e,j1),sz=e=>nl(e,iz),Py=e=>nl(e,y1),rz=e=>nl(e,w1),az=e=>nl(e,b1),_u=e=>nl(e,N1,!0),tl=(e,t,n)=>{const s=p1.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},nl=(e,t,n=!1)=>{const s=x1.exec(e);return s?s[1]?t(s[1]):n:!1},y1=e=>e==="position"||e==="percentage",b1=e=>e==="image"||e==="url",w1=e=>e==="length"||e==="size"||e==="bg-size",j1=e=>e==="length",oz=e=>e==="number",iz=e=>e==="family-name",N1=e=>e==="shadow",lz=()=>{const e=Nt("color"),t=Nt("font"),n=Nt("text"),s=Nt("font-weight"),r=Nt("tracking"),o=Nt("leading"),i=Nt("breakpoint"),l=Nt("container"),c=Nt("spacing"),u=Nt("radius"),d=Nt("shadow"),f=Nt("inset-shadow"),m=Nt("text-shadow"),h=Nt("drop-shadow"),p=Nt("blur"),v=Nt("perspective"),b=Nt("aspect"),x=Nt("ease"),y=Nt("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...j(),ae,re],S=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],E=()=>[ae,re,c],C=()=>[To,"full","auto",...E()],_=()=>[zr,"none","subgrid",ae,re],P=()=>["auto",{span:["full",zr,ae,re]},zr,ae,re],O=()=>[zr,"auto",ae,re],$=()=>["auto","min","max","fr",ae,re],T=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],z=()=>["start","end","center","stretch","center-safe","end-safe"],A=()=>["auto",...E()],D=()=>[To,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],M=()=>[e,ae,re],R=()=>[...j(),Py,$y,{position:[ae,re]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],U=()=>["auto","cover","contain",rz,tz,{size:[ae,re]}],I=()=>[th,wl,Ea],V=()=>["","none","full",u,ae,re],Z=()=>["",Ne,wl,Ea],J=()=>["solid","dashed","dotted","double"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[Ne,th,Py,$y],pe=()=>["","none",p,ae,re],fe=()=>["none",Ne,ae,re],we=()=>["none",Ne,ae,re],F=()=>[Ne,ae,re],X=()=>[To,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ws],breakpoint:[Ws],color:[W5],container:[Ws],"drop-shadow":[Ws],ease:["in","out","in-out"],font:[ez],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ws],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ws],shadow:[Ws],spacing:["px",Ne],text:[Ws],"text-shadow":[Ws],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",To,re,ae,b]}],container:["container"],columns:[{columns:[Ne,re,ae,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[zr,"auto",ae,re]}],basis:[{basis:[To,"full","auto",l,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ne,To,"auto","initial","none",re]}],grow:[{grow:["",Ne,ae,re]}],shrink:[{shrink:["",Ne,ae,re]}],order:[{order:[zr,"first","last","none",ae,re]}],"grid-cols":[{"grid-cols":_()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":_()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...T(),"normal"]}],"justify-items":[{"justify-items":[...z(),"normal"]}],"justify-self":[{"justify-self":["auto",...z()]}],"align-content":[{content:["normal",...T()]}],"align-items":[{items:[...z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...z(),{baseline:["","last"]}]}],"place-content":[{"place-content":T()}],"place-items":[{"place-items":[...z(),"baseline"]}],"place-self":[{"place-self":["auto",...z()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:A()}],mx:[{mx:A()}],my:[{my:A()}],ms:[{ms:A()}],me:[{me:A()}],mt:[{mt:A()}],mr:[{mr:A()}],mb:[{mb:A()}],ml:[{ml:A()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[l,"screen",...D()]}],"min-w":[{"min-w":[l,"screen","none",...D()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",n,wl,Ea]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ae,nh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",th,re]}],"font-family":[{font:[sz,re,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ae,re]}],"line-clamp":[{"line-clamp":[Ne,"none",ae,nh]}],leading:[{leading:[o,...E()]}],"list-image":[{"list-image":["none",ae,re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ae,re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ne,"from-font","auto",ae,Ea]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[Ne,"auto",ae,re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae,re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae,re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:U()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},zr,ae,re],radial:["",ae,re],conic:[zr,ae,re]},az,nz]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:V()}],"rounded-s":[{"rounded-s":V()}],"rounded-e":[{"rounded-e":V()}],"rounded-t":[{"rounded-t":V()}],"rounded-r":[{"rounded-r":V()}],"rounded-b":[{"rounded-b":V()}],"rounded-l":[{"rounded-l":V()}],"rounded-ss":[{"rounded-ss":V()}],"rounded-se":[{"rounded-se":V()}],"rounded-ee":[{"rounded-ee":V()}],"rounded-es":[{"rounded-es":V()}],"rounded-tl":[{"rounded-tl":V()}],"rounded-tr":[{"rounded-tr":V()}],"rounded-br":[{"rounded-br":V()}],"rounded-bl":[{"rounded-bl":V()}],"border-w":[{border:Z()}],"border-w-x":[{"border-x":Z()}],"border-w-y":[{"border-y":Z()}],"border-w-s":[{"border-s":Z()}],"border-w-e":[{"border-e":Z()}],"border-w-t":[{"border-t":Z()}],"border-w-r":[{"border-r":Z()}],"border-w-b":[{"border-b":Z()}],"border-w-l":[{"border-l":Z()}],"divide-x":[{"divide-x":Z()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Z()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ne,ae,re]}],"outline-w":[{outline:["",Ne,wl,Ea]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",d,_u,Eu]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",f,_u,Eu]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[Ne,Ea]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":Z()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",m,_u,Eu]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[Ne,ae,re]}],"mix-blend":[{"mix-blend":[...ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ne]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[ae,re]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[Ne]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:U()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ae,re]}],filter:[{filter:["","none",ae,re]}],blur:[{blur:pe()}],brightness:[{brightness:[Ne,ae,re]}],contrast:[{contrast:[Ne,ae,re]}],"drop-shadow":[{"drop-shadow":["","none",h,_u,Eu]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",Ne,ae,re]}],"hue-rotate":[{"hue-rotate":[Ne,ae,re]}],invert:[{invert:["",Ne,ae,re]}],saturate:[{saturate:[Ne,ae,re]}],sepia:[{sepia:["",Ne,ae,re]}],"backdrop-filter":[{"backdrop-filter":["","none",ae,re]}],"backdrop-blur":[{"backdrop-blur":pe()}],"backdrop-brightness":[{"backdrop-brightness":[Ne,ae,re]}],"backdrop-contrast":[{"backdrop-contrast":[Ne,ae,re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ne,ae,re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ne,ae,re]}],"backdrop-invert":[{"backdrop-invert":["",Ne,ae,re]}],"backdrop-opacity":[{"backdrop-opacity":[Ne,ae,re]}],"backdrop-saturate":[{"backdrop-saturate":[Ne,ae,re]}],"backdrop-sepia":[{"backdrop-sepia":["",Ne,ae,re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ae,re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ne,"initial",ae,re]}],ease:[{ease:["linear","initial",x,ae,re]}],delay:[{delay:[Ne,ae,re]}],animate:[{animate:["none",y,ae,re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,ae,re]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:we()}],"scale-x":[{"scale-x":we()}],"scale-y":[{"scale-y":we()}],"scale-z":[{"scale-z":we()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[ae,re,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:X()}],"translate-x":[{"translate-x":X()}],"translate-y":[{"translate-y":X()}],"translate-z":[{"translate-z":X()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae,re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae,re]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[Ne,wl,Ea,nh]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},cz=F5(lz);function H(...e){return cz(m1(e))}const uz=el("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-base font-semibold transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-5 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-3 has-[>svg]:px-4",sm:"h-9 rounded-md gap-1.5 px-4 has-[>svg]:px-3.5 text-sm",lg:"h-12 rounded-md px-8 has-[>svg]:px-6 text-lg",icon:"size-11"}},defaultVariants:{variant:"default",size:"default"}});function G({className:e,variant:t,size:n,asChild:s=!1,...r}){const o=s?S5:"button";return a.jsx(o,{"data-slot":"button",className:H(uz({variant:t,size:n,className:e})),...r})}function te(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function dz(e,t){const n=g.createContext(t),s=o=>{const{children:i,...l}=o,c=g.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:i})};s.displayName=e+"Provider";function r(o){const i=g.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,r]}function un(e,t=[]){let n=[];function s(o,i){const l=g.createContext(i),c=n.length;n=[...n,i];const u=f=>{var x;const{scope:m,children:h,...p}=f,v=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,b=g.useMemo(()=>p,Object.values(p));return a.jsx(v.Provider,{value:b,children:h})};u.displayName=o+"Provider";function d(f,m){var v;const h=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,p=g.useContext(h);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,d]}const r=()=>{const o=n.map(i=>g.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return r.scopeName=e,[s,fz(r,...t)]}function fz(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:u})=>{const f=c(o)[`__scope${u}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var Ls=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},mz=$N[" useId ".trim().toString()]||(()=>{}),hz=0;function fr(e){const[t,n]=g.useState(mz());return Ls(()=>{n(s=>s??String(hz++))},[e]),t?`radix-${t}`:""}var gz=$N[" useInsertionEffect ".trim().toString()]||Ls;function Yn({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[r,o,i]=pz({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:r;{const d=g.useRef(e!==void 0);g.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const u=g.useCallback(d=>{var f;if(l){const m=xz(d)?d(e):d;m!==e&&((f=i.current)==null||f.call(i,m))}else o(d)},[l,e,o,i]);return[c,u]}function pz({defaultProp:e,onChange:t}){const[n,s]=g.useState(e),r=g.useRef(n),o=g.useRef(t);return gz(()=>{o.current=t},[t]),g.useEffect(()=>{var i;r.current!==n&&((i=o.current)==null||i.call(o,n),r.current=n)},[n,r]),[n,s,o]}function xz(e){return typeof e=="function"}var vz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ye=vz.reduce((e,t)=>{const n=ki(`Primitive.${t}`),s=g.forwardRef((r,o)=>{const{asChild:i,...l}=r,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function S1(e,t){e&&Kf.flushSync(()=>e.dispatchEvent(t))}function Ut(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function yz(e,t=globalThis==null?void 0:globalThis.document){const n=Ut(e);g.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var bz="DismissableLayer",Rg="dismissableLayer.update",wz="dismissableLayer.pointerDownOutside",jz="dismissableLayer.focusOutside",Oy,k1=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Gc=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,u=g.useContext(k1),[d,f]=g.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=g.useState({}),p=Oe(t,k=>f(k)),v=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(b),y=d?v.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,j=y>=x,N=kz(k=>{const E=k.target,C=[...u.branches].some(_=>_.contains(E));!j||C||(r==null||r(k),i==null||i(k),k.defaultPrevented||l==null||l())},m),S=Cz(k=>{const E=k.target;[...u.branches].some(_=>_.contains(E))||(o==null||o(k),i==null||i(k),k.defaultPrevented||l==null||l())},m);return yz(k=>{y===u.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),g.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Oy=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),By(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Oy)}},[d,m,n,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),By())},[d,u]),g.useEffect(()=>{const k=()=>h({});return document.addEventListener(Rg,k),()=>document.removeEventListener(Rg,k)},[]),a.jsx(ye.div,{...c,ref:p,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:te(e.onFocusCapture,S.onFocusCapture),onBlurCapture:te(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:te(e.onPointerDownCapture,N.onPointerDownCapture)})});Gc.displayName=bz;var Nz="DismissableLayerBranch",Sz=g.forwardRef((e,t)=>{const n=g.useContext(k1),s=g.useRef(null),r=Oe(t,s);return g.useEffect(()=>{const o=s.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),a.jsx(ye.div,{...e,ref:r})});Sz.displayName=Nz;function kz(e,t=globalThis==null?void 0:globalThis.document){const n=Ut(e),s=g.useRef(!1),r=g.useRef(()=>{});return g.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){C1(wz,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=c,t.addEventListener("click",r.current,{once:!0})):c()}else t.removeEventListener("click",r.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function Cz(e,t=globalThis==null?void 0:globalThis.document){const n=Ut(e),s=g.useRef(!1);return g.useEffect(()=>{const r=o=>{o.target&&!s.current&&C1(jz,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function By(){const e=new CustomEvent(Rg);document.dispatchEvent(e)}function C1(e,t,n,{discrete:s}){const r=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?S1(r,o):r.dispatchEvent(o)}var sh="focusScope.autoFocusOnMount",rh="focusScope.autoFocusOnUnmount",Iy={bubbles:!1,cancelable:!0},Ez="FocusScope",Mx=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:o,...i}=e,[l,c]=g.useState(null),u=Ut(r),d=Ut(o),f=g.useRef(null),m=Oe(t,v=>c(v)),h=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(s){let v=function(w){if(h.paused||!l)return;const j=w.target;l.contains(j)?f.current=j:Pr(f.current,{select:!0})},b=function(w){if(h.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||Pr(f.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const N of w)N.removedNodes.length>0&&Pr(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),y.disconnect()}}},[s,l,h.paused]),g.useEffect(()=>{if(l){Uy.add(h);const v=document.activeElement;if(!l.contains(v)){const x=new CustomEvent(sh,Iy);l.addEventListener(sh,u),l.dispatchEvent(x),x.defaultPrevented||(_z(Dz(E1(l)),{select:!0}),document.activeElement===v&&Pr(l))}return()=>{l.removeEventListener(sh,u),setTimeout(()=>{const x=new CustomEvent(rh,Iy);l.addEventListener(rh,d),l.dispatchEvent(x),x.defaultPrevented||Pr(v??document.body,{select:!0}),l.removeEventListener(rh,d),Uy.remove(h)},0)}}},[l,u,d,h]);const p=g.useCallback(v=>{if(!n&&!s||h.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(b&&x){const y=v.currentTarget,[w,j]=Az(y);w&&j?!v.shiftKey&&x===j?(v.preventDefault(),n&&Pr(w,{select:!0})):v.shiftKey&&x===w&&(v.preventDefault(),n&&Pr(j,{select:!0})):x===y&&v.preventDefault()}},[n,s,h.paused]);return a.jsx(ye.div,{tabIndex:-1,...i,ref:m,onKeyDown:p})});Mx.displayName=Ez;function _z(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Pr(s,{select:t}),document.activeElement!==n)return}function Az(e){const t=E1(e),n=Hy(t,e),s=Hy(t.reverse(),e);return[n,s]}function E1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Hy(e,t){for(const n of e)if(!Tz(n,{upTo:t}))return n}function Tz(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Mz(e){return e instanceof HTMLInputElement&&"select"in e}function Pr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Mz(e)&&t&&e.select()}}var Uy=Rz();function Rz(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Fy(e,t),e.unshift(t)},remove(t){var n;e=Fy(e,t),(n=e[0])==null||n.resume()}}}function Fy(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function Dz(e){return e.filter(t=>t.tagName!=="A")}var zz="Portal",Rx=g.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[r,o]=g.useState(!1);Ls(()=>o(!0),[]);const i=n||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?x5.createPortal(a.jsx(ye.div,{...s,ref:t}),i):null});Rx.displayName=zz;function Lz(e,t){return g.useReducer((n,s)=>t[n][s]??n,e)}var qt=e=>{const{present:t,children:n}=e,s=$z(t),r=typeof n=="function"?n({present:s.isPresent}):g.Children.only(n),o=Oe(s.ref,Pz(r));return typeof n=="function"||s.isPresent?g.cloneElement(r,{ref:o}):null};qt.displayName="Presence";function $z(e){const[t,n]=g.useState(),s=g.useRef(null),r=g.useRef(e),o=g.useRef("none"),i=e?"mounted":"unmounted",[l,c]=Lz(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=Au(s.current);o.current=l==="mounted"?u:"none"},[l]),Ls(()=>{const u=s.current,d=r.current;if(d!==e){const m=o.current,h=Au(u);e?c("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,c]),Ls(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=h=>{const v=Au(s.current).includes(h.animationName);if(h.target===t&&v&&(c("ANIMATION_END"),!r.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=h=>{h.target===t&&(o.current=Au(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function Au(e){return(e==null?void 0:e.animationName)||"none"}function Pz(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ah=0;function _1(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Vy()),document.body.insertAdjacentElement("beforeend",e[1]??Vy()),ah++,()=>{ah===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ah--}},[])}function Vy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var js=function(){return js=Object.assign||function(t){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},js.apply(this,arguments)};function A1(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}function Oz(e,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,o;s<r;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var hd="right-scroll-bar-position",gd="width-before-scroll-bar",Bz="with-scroll-bars-hidden",Iz="--removed-body-scroll-bar-size";function oh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Hz(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=t,n.facade}var Uz=typeof window<"u"?g.useLayoutEffect:g.useEffect,qy=new WeakMap;function Fz(e,t){var n=Hz(null,function(s){return e.forEach(function(r){return oh(r,s)})});return Uz(function(){var s=qy.get(n);if(s){var r=new Set(s),o=new Set(e),i=n.current;r.forEach(function(l){o.has(l)||oh(l,null)}),o.forEach(function(l){r.has(l)||oh(l,i)})}qy.set(n,e)},[e]),n}function Vz(e){return e}function qz(e,t){t===void 0&&(t=Vz);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,s);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(s=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){s=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(o),i=n}var c=function(){var d=i;i=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return r}function Gz(e){e===void 0&&(e={});var t=qz(null);return t.options=js({async:!0,ssr:!1},e),t}var T1=function(e){var t=e.sideCar,n=A1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return g.createElement(s,js({},n))};T1.isSideCarExport=!0;function Zz(e,t){return e.useMedium(t),T1}var M1=Gz(),ih=function(){},Jf=g.forwardRef(function(e,t){var n=g.useRef(null),s=g.useState({onScrollCapture:ih,onWheelCapture:ih,onTouchMoveCapture:ih}),r=s[0],o=s[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,m=e.sideCar,h=e.noRelative,p=e.noIsolation,v=e.inert,b=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,w=e.gapMode,j=A1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,S=Fz([n,t]),k=js(js({},j),r);return g.createElement(g.Fragment,null,d&&g.createElement(N,{sideCar:M1,removeScrollBar:u,shards:f,noRelative:h,noIsolation:p,inert:v,setCallbacks:o,allowPinchZoom:!!b,lockRef:n,gapMode:w}),i?g.cloneElement(g.Children.only(l),js(js({},k),{ref:S})):g.createElement(y,js({},k,{className:c,ref:S}),l))});Jf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jf.classNames={fullWidth:gd,zeroRight:hd};var Yz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Xz(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Yz();return t&&e.setAttribute("nonce",t),e}function Wz(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Kz(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Qz=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Xz())&&(Wz(t,n),Kz(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Jz=function(){var e=Qz();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},R1=function(){var e=Jz(),t=function(n){var s=n.styles,r=n.dynamic;return e(s,r),null};return t},eL={left:0,top:0,right:0,gap:0},lh=function(e){return parseInt(e||"",10)||0},tL=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[lh(n),lh(s),lh(r)]},nL=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return eL;var t=tL(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},sL=R1(),ai="data-scroll-locked",rL=function(e,t,n,s){var r=e.left,o=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Bz,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(ai,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hd,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(gd,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(hd," .").concat(hd,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(gd," .").concat(gd,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(ai,`] {
    `).concat(Iz,": ").concat(l,`px;
  }
`)},Gy=function(){var e=parseInt(document.body.getAttribute(ai)||"0",10);return isFinite(e)?e:0},aL=function(){g.useEffect(function(){return document.body.setAttribute(ai,(Gy()+1).toString()),function(){var e=Gy()-1;e<=0?document.body.removeAttribute(ai):document.body.setAttribute(ai,e.toString())}},[])},oL=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,r=s===void 0?"margin":s;aL();var o=g.useMemo(function(){return nL(r)},[r]);return g.createElement(sL,{styles:rL(o,!t,r,n?"":"!important")})},Dg=!1;if(typeof window<"u")try{var Tu=Object.defineProperty({},"passive",{get:function(){return Dg=!0,!0}});window.addEventListener("test",Tu,Tu),window.removeEventListener("test",Tu,Tu)}catch{Dg=!1}var Mo=Dg?{passive:!1}:!1,iL=function(e){return e.tagName==="TEXTAREA"},D1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!iL(e)&&n[t]==="visible")},lL=function(e){return D1(e,"overflowY")},cL=function(e){return D1(e,"overflowX")},Zy=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=z1(e,s);if(r){var o=L1(e,s),i=o[1],l=o[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},uL=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},dL=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},z1=function(e,t){return e==="v"?lL(t):cL(t)},L1=function(e,t){return e==="v"?uL(t):dL(t)},fL=function(e,t){return e==="h"&&t==="rtl"?-1:1},mL=function(e,t,n,s,r){var o=fL(e,window.getComputedStyle(t).direction),i=o*s,l=n.target,c=t.contains(l),u=!1,d=i>0,f=0,m=0;do{if(!l)break;var h=L1(e,l),p=h[0],v=h[1],b=h[2],x=v-b-o*p;(p||x)&&z1(e,l)&&(f+=x,m+=p);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(f)<1||!d&&Math.abs(m)<1)&&(u=!0),u},Mu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Yy=function(e){return[e.deltaX,e.deltaY]},Xy=function(e){return e&&"current"in e?e.current:e},hL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},pL=0,Ro=[];function xL(e){var t=g.useRef([]),n=g.useRef([0,0]),s=g.useRef(),r=g.useState(pL++)[0],o=g.useState(R1)[0],i=g.useRef(e);g.useEffect(function(){i.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var v=Oz([e.lockRef.current],(e.shards||[]).map(Xy),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var x=Mu(v),y=n.current,w="deltaX"in v?v.deltaX:y[0]-x[0],j="deltaY"in v?v.deltaY:y[1]-x[1],N,S=v.target,k=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in v&&k==="h"&&S.type==="range")return!1;var E=Zy(k,S);if(!E)return!0;if(E?N=k:(N=k==="v"?"h":"v",E=Zy(k,S)),!E)return!1;if(!s.current&&"changedTouches"in v&&(w||j)&&(s.current=N),!N)return!0;var C=s.current||N;return mL(C,b,v,C==="h"?w:j)},[]),c=g.useCallback(function(v){var b=v;if(!(!Ro.length||Ro[Ro.length-1]!==o)){var x="deltaY"in b?Yy(b):Mu(b),y=t.current.filter(function(N){return N.name===b.type&&(N.target===b.target||b.target===N.shadowParent)&&hL(N.delta,x)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(i.current.shards||[]).map(Xy).filter(Boolean).filter(function(N){return N.contains(b.target)}),j=w.length>0?l(b,w[0]):!i.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),u=g.useCallback(function(v,b,x,y){var w={name:v,delta:b,target:x,should:y,shadowParent:vL(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),d=g.useCallback(function(v){n.current=Mu(v),s.current=void 0},[]),f=g.useCallback(function(v){u(v.type,Yy(v),v.target,l(v,e.lockRef.current))},[]),m=g.useCallback(function(v){u(v.type,Mu(v),v.target,l(v,e.lockRef.current))},[]);g.useEffect(function(){return Ro.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Mo),document.addEventListener("touchmove",c,Mo),document.addEventListener("touchstart",d,Mo),function(){Ro=Ro.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,Mo),document.removeEventListener("touchmove",c,Mo),document.removeEventListener("touchstart",d,Mo)}},[]);var h=e.removeScrollBar,p=e.inert;return g.createElement(g.Fragment,null,p?g.createElement(o,{styles:gL(r)}):null,h?g.createElement(oL,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function vL(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const yL=Zz(M1,xL);var Dx=g.forwardRef(function(e,t){return g.createElement(Jf,js({},e,{ref:t,sideCar:yL}))});Dx.classNames=Jf.classNames;var bL=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Do=new WeakMap,Ru=new WeakMap,Du={},ch=0,$1=function(e){return e&&(e.host||$1(e.parentNode))},wL=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=$1(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},jL=function(e,t,n,s){var r=wL(t,Array.isArray(e)?e:[e]);Du[n]||(Du[n]=new WeakMap);var o=Du[n],i=[],l=new Set,c=new Set(r),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};r.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var h=m.getAttribute(s),p=h!==null&&h!=="false",v=(Do.get(m)||0)+1,b=(o.get(m)||0)+1;Do.set(m,v),o.set(m,b),i.push(m),v===1&&p&&Ru.set(m,!0),b===1&&m.setAttribute(n,"true"),p||m.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(t),l.clear(),ch++,function(){i.forEach(function(f){var m=Do.get(f)-1,h=o.get(f)-1;Do.set(f,m),o.set(f,h),m||(Ru.has(f)||f.removeAttribute(s),Ru.delete(f)),h||f.removeAttribute(n)}),ch--,ch||(Do=new WeakMap,Do=new WeakMap,Ru=new WeakMap,Du={})}},P1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),r=bL(e);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),jL(s,r,n,"aria-hidden")):function(){return null}},em="Dialog",[O1,Zee]=un(em),[NL,us]=O1(em),B1=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:r,onOpenChange:o,modal:i=!0}=e,l=g.useRef(null),c=g.useRef(null),[u,d]=Yn({prop:s,defaultProp:r??!1,onChange:o,caller:em});return a.jsx(NL,{scope:t,triggerRef:l,contentRef:c,contentId:fr(),titleId:fr(),descriptionId:fr(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:i,children:n})};B1.displayName=em;var I1="DialogTrigger",H1=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=us(I1,n),o=Oe(t,r.triggerRef);return a.jsx(ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":$x(r.open),...s,ref:o,onClick:te(e.onClick,r.onOpenToggle)})});H1.displayName=I1;var zx="DialogPortal",[SL,U1]=O1(zx,{forceMount:void 0}),F1=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:r}=e,o=us(zx,t);return a.jsx(SL,{scope:t,forceMount:n,children:g.Children.map(s,i=>a.jsx(qt,{present:n||o.open,children:a.jsx(Rx,{asChild:!0,container:r,children:i})}))})};F1.displayName=zx;var Id="DialogOverlay",V1=g.forwardRef((e,t)=>{const n=U1(Id,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,o=us(Id,e.__scopeDialog);return o.modal?a.jsx(qt,{present:s||o.open,children:a.jsx(CL,{...r,ref:t})}):null});V1.displayName=Id;var kL=ki("DialogOverlay.RemoveScroll"),CL=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=us(Id,n);return a.jsx(Dx,{as:kL,allowPinchZoom:!0,shards:[r.contentRef],children:a.jsx(ye.div,{"data-state":$x(r.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Wa="DialogContent",q1=g.forwardRef((e,t)=>{const n=U1(Wa,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,o=us(Wa,e.__scopeDialog);return a.jsx(qt,{present:s||o.open,children:o.modal?a.jsx(EL,{...r,ref:t}):a.jsx(_L,{...r,ref:t})})});q1.displayName=Wa;var EL=g.forwardRef((e,t)=>{const n=us(Wa,e.__scopeDialog),s=g.useRef(null),r=Oe(t,n.contentRef,s);return g.useEffect(()=>{const o=s.current;if(o)return P1(o)},[]),a.jsx(G1,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:te(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:te(e.onFocusOutside,o=>o.preventDefault())})}),_L=g.forwardRef((e,t)=>{const n=us(Wa,e.__scopeDialog),s=g.useRef(!1),r=g.useRef(!1);return a.jsx(G1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const i=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&r.current&&o.preventDefault()}})}),G1=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:o,...i}=e,l=us(Wa,n),c=g.useRef(null),u=Oe(t,c);return _1(),a.jsxs(a.Fragment,{children:[a.jsx(Mx,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:o,children:a.jsx(Gc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":$x(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(AL,{titleId:l.titleId}),a.jsx(ML,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Lx="DialogTitle",Z1=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=us(Lx,n);return a.jsx(ye.h2,{id:r.titleId,...s,ref:t})});Z1.displayName=Lx;var Y1="DialogDescription",X1=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=us(Y1,n);return a.jsx(ye.p,{id:r.descriptionId,...s,ref:t})});X1.displayName=Y1;var W1="DialogClose",K1=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=us(W1,n);return a.jsx(ye.button,{type:"button",...s,ref:t,onClick:te(e.onClick,()=>r.onOpenChange(!1))})});K1.displayName=W1;function $x(e){return e?"open":"closed"}var Q1="DialogTitleWarning",[Yee,J1]=dz(Q1,{contentName:Wa,titleName:Lx,docsSlug:"dialog"}),AL=({titleId:e})=>{const t=J1(Q1),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},TL="DialogDescriptionWarning",ML=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${J1(TL).contentName}}.`;return g.useEffect(()=>{var o;const r=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},eS=B1,RL=H1,tS=F1,Px=V1,Ox=q1,Bx=Z1,Ix=X1,DL=K1;const Ci=eS,nS=RL,zL=tS,sS=g.forwardRef(({className:e,...t},n)=>a.jsx(Px,{className:H("fixed inset-0 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{zIndex:Dt.MODAL},...t,ref:n}));sS.displayName=Px.displayName;const LL=el("fixed gap-4 border shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ka=g.forwardRef(({side:e="right",className:t,children:n,...s},r)=>a.jsxs(zL,{children:[a.jsx(sS,{}),a.jsxs(Ox,{ref:r,className:H(LL({side:e}),t),style:{zIndex:Dt.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[n,a.jsxs(DL,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(Bt,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ka.displayName=Ox.displayName;const Ei=({className:e,...t})=>a.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ei.displayName="SheetHeader";const _i=g.forwardRef(({className:e,...t},n)=>a.jsx(Bx,{ref:n,className:H("text-lg font-semibold text-foreground",e),...t}));_i.displayName=Bx.displayName;const Hx=g.forwardRef(({className:e,...t},n)=>a.jsx(Ix,{ref:n,className:H("text-sm text-muted-foreground",e),...t}));Hx.displayName=Ix.displayName;function xe({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:H("bg-card text-card-foreground flex flex-col gap-8 rounded-xl border py-8 px-6 shadow-sm",e),...t})}function _e({className:e,action:t,children:n,...s}){return a.jsxs("div",{"data-slot":"card-header",className:H("flex flex-row items-start justify-between space-y-0",e),...s,children:[a.jsx("div",{className:"flex-1 flex flex-col space-y-3",children:n}),t&&a.jsx("div",{className:"ml-4 flex-shrink-0",children:t})]})}function Re({className:e,...t}){return a.jsx("div",{"data-slot":"card-title",className:H("text-xl font-bold leading-none",e),...t})}function Ss({className:e,...t}){return a.jsx("div",{"data-slot":"card-description",className:H("text-base text-muted-foreground",e),...t})}function ve({className:e,...t}){return a.jsx("div",{"data-slot":"card-content",className:H("pt-0",e),...t})}const _s=g.forwardRef(({className:e,type:t,...n},s)=>a.jsx("input",{type:t,className:H("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));_s.displayName="Input";var $L="Label",rS=g.forwardRef((e,t)=>a.jsx(ye.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));rS.displayName=$L;const PL=el("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),fc=g.forwardRef(({className:e,children:t,...n},s)=>a.jsx(rS,{ref:s,className:H(PL(),e),...n,children:t}));fc.displayName="Label";function aS({name:e,notes:t,onNameChange:n,onNotesChange:s,className:r}){const[o,i]=g.useState(e),[l,c]=g.useState(t),u=g.useCallback((()=>{let h;return p=>{clearTimeout(h),h=setTimeout(()=>{n(p)},300)}})(),[n]),d=g.useCallback((()=>{let h;return p=>{clearTimeout(h),h=setTimeout(()=>{s(p)},300)}})(),[s]);g.useEffect(()=>{i(e)},[e]),g.useEffect(()=>{c(t)},[t]);const f=h=>{const p=h.target.value;i(p),u(p)},m=h=>{const p=h.target.value;c(p),d(p)};return a.jsxs(xe,{className:`mb-6 ${r||""}`,children:[a.jsx(_e,{children:a.jsx(Re,{children:"Basic Information"})}),a.jsxs(ve,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(fc,{htmlFor:"name",children:"Character Name"}),a.jsx(_s,{id:"name",value:o,onChange:f,placeholder:"Enter character name..."})]}),a.jsxs("div",{children:[a.jsx(fc,{htmlFor:"notes",children:"Notes"}),a.jsx("textarea",{id:"notes",value:l,onChange:m,placeholder:"Add character notes, roleplay details, or build explanations...",rows:4,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]})]})}const go=cs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(ls("data/birthsigns.json"));if(!s.ok)throw new Error(`Failed to fetch birthsigns data: ${s.status}`);const o=(await s.json()).map(i=>{var l,c;return{...i,id:i.edid||i.name.toLowerCase().replace(/\s+/g,"-"),tags:[i.group,...((l=i.powers)==null?void 0:l.map(u=>u.name))||[],...((c=i.stat_modifications)==null?void 0:c.map(u=>u.stat))||[]].filter(u=>!!u)}});e({data:o,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load birthsigns",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(o=>{var i,l;return o.name.toLowerCase().includes(r)||((i=o.description)==null?void 0:i.toLowerCase().includes(r))||((l=o.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),OL=Object.freeze(Object.defineProperty({__proto__:null,useBirthsignsStore:go},Symbol.toStringTag,{value:"Module"}));function BL(e){var s;const t=[],n=((s=e.description)==null?void 0:s.toLowerCase())||"";return(n.includes("damage")||n.includes("weapon"))&&t.push("Combat"),(n.includes("armor")||n.includes("defense"))&&t.push("Defensive"),(n.includes("magicka")||n.includes("spell")||n.includes("magic"))&&t.push("Magic"),(n.includes("regeneration")||n.includes("health")||n.includes("stamina"))&&t.push("Utility"),(n.includes("detect")||n.includes("stealth"))&&t.push("Stealth"),(n.includes("cost")||n.includes("less"))&&t.push("Cost Reduction"),(n.includes("increase")||n.includes("more"))&&t.push("Enhancement"),n.includes("resistance")&&t.push("Resistance"),[...new Set(t)]}const sl=cs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(ls("data/subclasses.json"));if(!s.ok)throw new Error(`Failed to fetch destiny nodes data: ${s.status}`);const o=(await s.json()).map((i,l)=>({...i,id:i.globalFormId||i.edid||`destiny-${l}`,nextBranches:i.nextBranches||[],levelRequirement:i.levelRequirement,lore:i.lore,tags:BL(i),prerequisites:Array.isArray(i.prerequisites)?i.prerequisites:[]}));e({data:o,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load destiny nodes",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(o=>{var i,l;return o.name.toLowerCase().includes(r)||((i=o.description)==null?void 0:i.toLowerCase().includes(r))||((l=o.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),IL=Object.freeze(Object.defineProperty({__proto__:null,useDestinyNodesStore:sl},Symbol.toStringTag,{value:"Module"})),ha=cs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(ls("data/playable-races.json"));if(!s.ok)throw new Error(`Failed to fetch races data: ${s.status}`);const o=(await s.json()).races.map(i=>({...i,id:i.id||i.edid||i.name.toLowerCase().replace(/\s+/g,"-"),tags:[i.category,...i.keywords||[]].filter(l=>!!l),name:i.name,edid:i.edid,description:i.description,category:i.category,source:i.source,startingStats:i.startingStats,physicalAttributes:i.physicalAttributes,skillBonuses:i.skillBonuses,racialSpells:i.racialSpells,keywords:i.keywords,flags:i.flags,regeneration:i.regeneration,combat:i.combat}));e({data:o,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load races",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(o=>{var i,l;return o.name.toLowerCase().includes(r)||((i=o.description)==null?void 0:i.toLowerCase().includes(r))||((l=o.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),HL=Object.freeze(Object.defineProperty({__proto__:null,useRacesStore:ha},Symbol.toStringTag,{value:"Module"})),UL={SHOW_FAVORED_RACES:!1,ENABLE_RACE_AUTOCOMPLETE:!1,SHOW_RACE_FILTERS:!1};function FL(e){return UL[e]}function Yt(){return FL("SHOW_FAVORED_RACES")}const rl=cs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(ls("data/wintersun-religion-docs.json"));if(!s.ok)throw new Error(`Failed to fetch religions data: ${s.status}`);const o=(await s.json()).flatMap(i=>i.deities.map(l=>({...l,id:l.id||l.name,pantheon:i.type,type:l.type||i.type,tags:[i.type,...Yt()?l.favoredRaces||[]:[],...l.tags||[]].filter(Boolean)})));e({data:o,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load religions",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(o=>{var i,l;return o.name.toLowerCase().includes(r)||((i=o.description)==null?void 0:i.toLowerCase().includes(r))||((l=o.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),VL=Object.freeze(Object.defineProperty({__proto__:null,useReligionsStore:rl},Symbol.toStringTag,{value:"Module"})),po=cs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(ls("data/skills.json"));if(!s.ok)throw new Error(`Failed to fetch skills data: ${s.status}`);const o=(await s.json()).skills.map(i=>({...i,id:i.id||i.edid||i.name.toLowerCase().replace(/\s+/g,"-"),tags:[...i.metaTags||[],i.category].filter(l=>!!l)}));e({data:o,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load skills",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(o=>{var i,l;return o.name.toLowerCase().includes(r)||((i=o.description)==null?void 0:i.toLowerCase().includes(r))||((l=o.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),qL=Object.freeze(Object.defineProperty({__proto__:null,useSkillsStore:po},Symbol.toStringTag,{value:"Module"})),xo=cs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(ls("data/traits.json"));if(!s.ok)throw new Error(`Failed to fetch traits data: ${s.status}`);const o=(await s.json()).traits.map(i=>{var l;return{...i,id:i.id||i.edid||i.name,tags:[i.category,...i.tags||[],...((l=i.effects)==null?void 0:l.map(c=>c.type))||[]].filter(c=>!!c)}});e({data:o,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load traits",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(o=>{var i,l;return o.name.toLowerCase().includes(r)||((i=o.description)==null?void 0:i.toLowerCase().includes(r))||((l=o.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),GL=Object.freeze(Object.defineProperty({__proto__:null,useTraitsStore:xo},Symbol.toStringTag,{value:"Module"}));function Qa(e){return e?e.replace(/\*\*\*(.*?)\*\*\*/g,"**$1**").replace(/<(\d+)>/g,"Level $1").replace(/\n+/g," ").trim():""}function vo(e,t,n){try{return e()}catch(s){return console.warn(`Failed to resolve ${n}:`,s),t}}function ZL(e){return e?vo(()=>{const t=ha.getState().data;if(t.length===0)throw new Error("Races data not loaded yet. Please wait a moment and try again.");let n=t.find(s=>s.edid===e);return n||(n=t.find(s=>s.name.toLowerCase()===e.toLowerCase())),n||(n=t.find(s=>s.id===e)),n?{name:n.name,effects:n.description?Qa(n.description):void 0}:(console.warn(`Race not found for ID: ${e}. Available races: ${t.map(s=>s.edid).join(", ")}`),{name:"Unknown Race"})},{name:"Unknown Race"},"race"):{name:"Not selected"}}function YL(e){return e?vo(()=>{const t=go.getState().data;if(t.length===0)throw new Error("Birthsigns data not loaded yet. Please wait a moment and try again.");const n=t.find(s=>s.edid===e);return n?{name:n.name,effects:Qa(n.description||"No effects")}:{name:"Unknown Birth Sign",effects:"No effects"}},{name:"Unknown Birth Sign",effects:"No effects"},"birth sign"):{name:"Not selected",effects:"No effects"}}function XL(e,t){return vo(()=>{const n=xo.getState().data;if(n.length===0)throw new Error("Traits data not loaded yet. Please wait a moment and try again.");const s=[];return e.forEach(r=>{const o=n.find(i=>i.edid===r);o&&s.push({name:o.name,effects:Qa(o.description||"No effects"),type:"regular"})}),t.forEach(r=>{const o=n.find(i=>i.edid===r);o&&s.push({name:o.name,effects:Qa(o.description||"No effects"),type:"bonus"})}),s},[],"traits")}function WL(e){return e?vo(()=>{const t=rl.getState().data;if(t.length===0)throw new Error("Religions data not loaded yet. Please wait a moment and try again.");const n=t.find(s=>s.id===e||s.name===e);return n?{name:n.name,effects:Qa(n.type||"No effects")}:{name:"Unknown Religion",effects:"No effects"}},{name:"Unknown Religion",effects:"No effects"},"religion"):{name:"Not selected",effects:"No effects"}}function KL(e,t,n){return vo(()=>{const s=po.getState().data;if(s.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");const r=o=>o.map(i=>{const l=s.find(u=>u.edid===i),c=n[i];return{name:(l==null?void 0:l.name)||"Unknown Skill",level:c||void 0}});return{major:r(e),minor:r(t),other:[]}},{major:[],minor:[],other:[]},"skills")}function QL(e,t){return vo(()=>{const n=po.getState().data,s=ho.getState().data;if(n.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");if(s.length===0)throw new Error("Perk trees data not loaded yet. Please wait a moment and try again.");return Object.entries(e).map(([r,o])=>{const i=n.find(u=>u.edid===r),l=s.find(u=>u.treeId===r),c=o.map(u=>{var h,p,v;let d=l==null?void 0:l.perks.find(b=>b.edid===u);d||(d=l==null?void 0:l.perks.find(b=>b.name.toLowerCase()===u.toLowerCase())),d||console.warn(`Perk lookup fallback for ID: ${u}`);const f=t[u];d||console.warn(`Perk not found for ID: ${u} in skill: ${r}. Available perks: ${l==null?void 0:l.perks.map(b=>b.edid).join(", ")}`);const m=((v=(p=(h=d==null?void 0:d.ranks)==null?void 0:h[0])==null?void 0:p.description)==null?void 0:v.base)||"No effects";return{name:(d==null?void 0:d.name)||"Unknown Perk",effects:Qa(m),rank:f||void 0}});return{skillName:(i==null?void 0:i.name)||"Unknown Skill",perks:c}}).filter(r=>r.perks.length>0)},[],"perks")}function JL(e){return e.length===0?[]:vo(()=>{const t=sl.getState().data;if(t.length===0)throw new Error("Destiny nodes data not loaded yet. Please wait a moment and try again.");return e.map(n=>{const s=t.find(r=>r.id===n||r.name===n);return{name:(s==null?void 0:s.name)||"Unknown Destiny",effects:s!=null&&s.description?Qa(s.description):void 0}})},[],"destiny path")}function e$(e){const t=[],n=e.map(s=>s.name.toLowerCase());return n.some(s=>s.includes("one-handed")||s.includes("two-handed"))&&t.push("melee"),n.some(s=>s.includes("archery"))&&t.push("archery"),n.some(s=>s.includes("magic")||s.includes("destruction"))&&t.push("magic"),n.some(s=>s.includes("stealth")||s.includes("sneak"))&&t.push("stealth"),n.some(s=>s.includes("smithing")||s.includes("enchanting"))&&t.push("crafting"),t}function t$(e){const t=[],n=e.map(s=>s.name.toLowerCase());return n.some(s=>s.includes("warrior")||s.includes("combat"))&&t.push("warrior"),n.some(s=>s.includes("mage")||s.includes("magic"))&&t.push("mage"),n.some(s=>s.includes("thief")||s.includes("stealth"))&&t.push("thief"),n.some(s=>s.includes("archer")||s.includes("ranged"))&&t.push("archer"),t}function n$(e,t,n){const s=["lorerim"];if(e.name!=="Not selected"){const l=e.name.toLowerCase().replace(/\s+/g,"");s.push(l)}const r=[...t.major,...t.minor],o=e$(r);s.push(...o);const i=t$(n);return s.push(...i),s.slice(0,5)}function s$(e){const t=ZL(e.race),n=YL(e.stone),s=WL(e.religion),r=XL(e.traits.regular,e.traits.bonus),o=KL(e.skills.major,e.skills.minor,e.skillLevels),i=QL(e.perks.selected,e.perks.ranks),l=JL(e.destinyPath),c=n$(t,o,r),u={level:e.attributeAssignments.level||1,health:e.attributeAssignments.health||0,stamina:e.attributeAssignments.stamina||0,magicka:e.attributeAssignments.magicka||0,totalPoints:(e.attributeAssignments.health||0)+(e.attributeAssignments.stamina||0)+(e.attributeAssignments.magicka||0)};return{name:e.name||"Unnamed Character",notes:e.notes||"",race:t,birthSign:n,traits:r,religion:s,skills:o,perks:i,destinyPath:l,tags:c,attributes:u}}function r$(e,t){const n=[];n.push(`**🛡️ Build: ${e.name||"Unnamed Character"}**`),e.notes&&n.push(`*${e.notes}*`),n.push(""),t&&(n.push(`[Arcaneum Build Link](${t})`),n.push("")),n.push("__🧬 Race__"),n.push(`${e.race.name}`),n.push(""),n.push("__🌌 Birth Sign__"),n.push(`${e.birthSign.name}`),n.push(""),e.traits.length>0&&(n.push("__🧠 Traits__"),e.traits.forEach(r=>{const o=r.type==="bonus"?" (Late Game)":"";n.push(`**${r.name}${o}**`)}),n.push("")),n.push("__✝️ Religion__"),n.push(`${e.religion.name}`),n.push(""),n.push(`__⚔️ Attributes (Level ${e.attributes.level})__`);const s=[];if(e.attributes.health>0&&s.push(`Health: ${e.attributes.health}`),e.attributes.stamina>0&&s.push(`Stamina: ${e.attributes.stamina}`),e.attributes.magicka>0&&s.push(`Magicka: ${e.attributes.magicka}`),s.length>0?n.push(s.join(", ")):n.push("No attribute points assigned"),n.push(""),n.push("__📚 Skills__"),e.skills.major.length>0){const r=e.skills.major.map(o=>o.level?`${o.name} (Level ${o.level})`:o.name).join(", ");n.push(`**Major:** ${r}`)}if(e.skills.minor.length>0){const r=e.skills.minor.map(o=>o.level?`${o.name} (Level ${o.level})`:o.name).join(", ");n.push(`**Minor:** ${r}`)}if(e.skills.other.length>0){const r=e.skills.other.map(o=>o.level?`${o.name} (Level ${o.level})`:o.name).join(", ");n.push(`**Other:** ${r}`)}return n.push(""),e.perks.length>0&&(n.push("__🎯 Perks__"),e.perks.forEach(r=>{n.push(`**${r.skillName}:**`),r.perks.forEach(o=>{const i=o.rank&&o.rank>1?` (Rank ${o.rank})`:"";n.push(`• **${o.name}${i}**`)}),n.push("")})),e.destinyPath.length>0&&(n.push("__🌟 Destiny Path__"),e.destinyPath.forEach(r=>{n.push(`**${r.name}**`),r.effects&&n.push(`${r.effects}`),n.push("")})),e.tags.length>0&&(n.push(""),n.push(e.tags.map(r=>`#${r}`).join(" "))),n.join(`
`)}function a$(e,t){const n=[];n.push(`**🛡️ Build: ${e.name||"Unnamed Character"}**`),e.notes&&n.push(`*${e.notes}*`),n.push(""),t&&(n.push(`[Arcaneum Build Link](${t})`),n.push("")),n.push("__🧬 Race__"),n.push(`${e.race.name}`),n.push(""),n.push("__🌌 Birth Sign__"),n.push(`${e.birthSign.name}`),n.push(""),e.traits.length>0&&(n.push("__🧠 Traits__"),e.traits.forEach(r=>{const o=r.type==="bonus"?" (Late Game)":"";n.push(`**${r.name}${o}**`)}),n.push("")),n.push("__✝️ Religion__"),n.push(`${e.religion.name}`),n.push(""),n.push(`__⚔️ Attributes (Level ${e.attributes.level})__`);const s=[];if(e.attributes.health>0&&s.push(`Health: ${e.attributes.health}`),e.attributes.stamina>0&&s.push(`Stamina: ${e.attributes.stamina}`),e.attributes.magicka>0&&s.push(`Magicka: ${e.attributes.magicka}`),s.length>0?n.push(s.join(", ")):n.push("No attribute points assigned"),n.push(""),n.push("__📚 Skills__"),e.skills.major.length>0){const r=e.skills.major.map(o=>o.level?`${o.name} (Level ${o.level})`:o.name).join(", ");n.push(`**Major:** ${r}`)}if(e.skills.minor.length>0){const r=e.skills.minor.map(o=>o.level?`${o.name} (Level ${o.level})`:o.name).join(", ");n.push(`**Minor:** ${r}`)}if(e.skills.other.length>0){const r=e.skills.other.map(o=>o.level?`${o.name} (Level ${o.level})`:o.name).join(", ");n.push(`**Other:** ${r}`)}return n.push(""),e.perks.length>0&&(n.push("__🎯 Perks__"),e.perks.forEach(r=>{n.push(`**${r.skillName}:**`),r.perks.forEach(o=>{const i=o.rank&&o.rank>1?` (Rank ${o.rank})`:"";n.push(`• **${o.name}${i}**`)}),n.push("")})),e.destinyPath.length>0&&(n.push("__🌟 Destiny Path__"),e.destinyPath.forEach(r=>{n.push(`**${r.name}**`),r.effects&&n.push(`${r.effects}`),n.push("")})),e.tags.length>0&&(n.push(""),n.push(e.tags.map(r=>`#${r}`).join(" "))),n.join(`
`)}async function o$(e){try{await navigator.clipboard.writeText(e)}catch{const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")}catch{throw new Error("Failed to copy to clipboard")}finally{document.body.removeChild(n)}}}function i$({build:e,className:t}){const[n,s]=g.useState(!1),[r,o]=g.useState(null),[i,l]=g.useState(""),[c,u]=g.useState("names"),d=g.useCallback(async f=>{s(!0),o(null),l(""),u(f);try{const m=s$(e),h=window.location.href,p=f==="full"?a$(m,h):r$(m,h);await o$(p),o(f),setTimeout(()=>o(null),2e3)}catch(m){console.error("Discord export failed:",m),l(m instanceof Error?m.message:"Export failed"),setTimeout(()=>l(""),3e3)}finally{s(!1)}},[e]);return a.jsxs("div",{className:H("relative",t),children:[a.jsxs("div",{className:"flex rounded-md border border-input bg-background",children:[a.jsx(G,{variant:n?"ghost":c==="names"?"default":"ghost",size:"sm",onClick:()=>d("names"),disabled:n,className:H("rounded-r-none border-r",c==="names"&&!n&&"bg-primary text-primary-foreground",r==="names"&&"bg-green-600 hover:bg-green-700 text-white",i&&"bg-red-600 hover:bg-red-700 text-white"),title:i||"Export build to Discord format (short form)","aria-label":"Export build to Discord format (short form)",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),a.jsx("span",{className:"ml-2",children:"Exporting..."})]}):r==="names"?a.jsxs(a.Fragment,{children:[a.jsx(cc,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Copied!"})]}):i?a.jsxs(a.Fragment,{children:[a.jsx(ji,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Error"})]}):a.jsxs(a.Fragment,{children:[a.jsx(U4,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Export (short form)"})]})}),a.jsx(G,{variant:n?"ghost":c==="full"?"default":"ghost",size:"sm",onClick:()=>d("full"),disabled:n,className:H("rounded-l-none",c==="full"&&!n&&"bg-primary text-primary-foreground",r==="full"&&"bg-green-600 hover:bg-green-700 text-white",i&&"bg-red-600 hover:bg-red-700 text-white"),title:i||"Export build to Discord format (long form)","aria-label":"Export build to Discord format (long form)",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),a.jsx("span",{className:"ml-2",children:"Exporting..."})]}):r==="full"?a.jsxs(a.Fragment,{children:[a.jsx(cc,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Copied!"})]}):i?a.jsxs(a.Fragment,{children:[a.jsx(ji,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Error"})]}):a.jsxs(a.Fragment,{children:[a.jsx(BN,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Export (long form)"})]})})]}),i&&a.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-red-100 border border-red-300 rounded text-xs text-red-800 max-w-xs z-50",role:"alert","aria-live":"polite",children:i})]})}function l$({onReset:e,build:t,className:n}){return a.jsxs("div",{className:`flex flex-wrap gap-2 mb-6 ${n||""}`,children:[a.jsxs(G,{variant:"destructive",size:"sm",className:"text-destructive-foreground cursor-pointer hover:opacity-90",onClick:e,children:[a.jsx(gr,{className:"w-4 h-4 mr-2"}),"Reset Build"]}),a.jsx(i$,{build:t})]})}function c$({cards:e,className:t="",gap:n=16}){const[s,r]=g.useState(0),o=g.useRef(null);g.useCallback(()=>s<768?1:s<1024?2:s<1280?3:4,[s]),g.useEffect(()=>{const c=()=>{o.current&&r(o.current.offsetWidth)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const i=g.useCallback(()=>{const c=s<768?1:2,u=[];let d=[];return e.forEach((f,m)=>{f.size==="full"?(d.length>0&&(u.push(l(d,c)),d=[]),u.push(a.jsx("div",{id:f.id,style:{width:"100%",marginBottom:`${n}px`},children:f.component},f.id))):d.push(f)}),d.length>0&&u.push(l(d,c)),a.jsx(a.Fragment,{children:u})},[e,s,n]),l=g.useCallback((c,u)=>{var m;const d=Array.from({length:u},()=>[]),f=new Array(u).fill(0);return c.forEach(h=>{let p=0,v=1/0;for(let b=0;b<u;b++)f[b]<v&&(v=f[b],p=b);d[p].push(a.jsx("div",{id:h.id,style:{width:"100%",marginBottom:`${n}px`},children:h.component},h.id)),f[p]+=1}),a.jsx("div",{style:{display:"flex",width:"100%",marginBottom:`${n}px`},children:d.map((h,p)=>a.jsx("div",{style:{width:`calc(${100/u}% - ${n/2}px)`,marginRight:p<u-1?`${n}px`:0},children:h},p))},`group-${(m=c[0])==null?void 0:m.id}`)},[n]);return e.length===0?a.jsx("div",{className:`text-center py-12 ${t}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No build cards to display"})}):a.jsx("div",{ref:o,className:t,children:a.jsx("div",{style:{width:"100%"},children:i()})})}const u$=el("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function K({className:e,variant:t,...n}){return a.jsx("div",{className:H(u$({variant:t}),e),...n})}const tm={traitLimit:{regular:"text-blue-600",bonus:"text-purple-600",warning:"text-yellow-600",error:"text-red-600"},summaryCard:{primary:"text-primary",secondary:"text-muted-foreground",accent:"text-accent"},backgrounds:{warning:"bg-yellow-50 dark:bg-yellow-950",info:"bg-blue-50 dark:bg-blue-950",error:"bg-red-50 dark:bg-red-950",success:"bg-green-50 dark:bg-green-950"},borders:{warning:"border-yellow-200 dark:border-yellow-800",info:"border-blue-200 dark:border-blue-800",error:"border-red-200 dark:border-red-800",success:"border-green-200 dark:border-green-800"}},oi={card:"p-6 space-y-4",section:"space-y-3",item:"space-y-2"};function d$(e){return tm.traitLimit[e]}function Wy(e){return tm.summaryCard[e]}function f$(e){return tm.backgrounds[e]}function oS(e){return tm.borders[e]}function m$({title:e,items:t,layout:n="grid",className:s}){const r=i=>{switch(i){case"race":return a.jsx(Od,{className:"h-4 w-4"});case"birthsign":return a.jsx(rt,{className:"h-4 w-4"});case"religion":return a.jsx(Qi,{className:"h-4 w-4"});case"traits":return a.jsx(UN,{className:"h-4 w-4"});default:return null}},o=()=>{switch(n){case"grid":return"grid grid-cols-2 md:grid-cols-4 gap-4";case"list":return"space-y-3";default:return"grid grid-cols-2 md:grid-cols-4 gap-4"}};return a.jsxs(xe,{className:H(oi.card,s),children:[a.jsx(_e,{children:a.jsx(Re,{children:e})}),a.jsx(ve,{className:H(oi.section),children:a.jsx("div",{className:o(),children:t.map((i,l)=>a.jsxs("div",{className:H(oi.item,i.className),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.icon||r(i.type),a.jsxs("span",{className:H("font-medium text-sm",Wy("primary")),children:[i.label,":"]})]}),a.jsx("div",{className:H("text-sm",Wy("secondary")),children:i.value||"Not selected"})]},l))})})]})}function h$(e){return[{label:"Race",value:e.race||"Not selected",type:"race"},{label:"Birth Sign",value:e.stone||"Not selected",type:"birthsign"},{label:"Religion",value:e.religion||"Not selected",type:"religion"},{label:"Traits",value:`${e.traits.regular.length}/${e.traitLimits.regular} starting, ${e.traits.bonus.length}/${e.traitLimits.bonus} late game`,type:"traits"}]}function iS({build:e,title:t="Build Summary",layout:n="grid",className:s}){const r=h$(e);return a.jsx(m$,{title:t,items:r,layout:n,className:s})}function g$({open:e,title:t,message:n,variant:s="warning",confirmText:r="Confirm",cancelText:o="Cancel",onConfirm:i,onCancel:l,className:c}){if(!e)return null;const u=()=>{switch(s){case"warning":return a.jsx(uc,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"});case"info":return a.jsx(Ni,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"});case"error":return a.jsx(h4,{className:"h-5 w-5 text-red-600 dark:text-red-400"});case"success":return a.jsx(Ld,{className:"h-5 w-5 text-green-600 dark:text-green-400"});default:return a.jsx(uc,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}},d=()=>{switch(s){case"error":return"destructive";case"success":return"default";default:return"default"}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:a.jsxs("div",{className:H("bg-white dark:bg-zinc-900 rounded-lg shadow-lg p-6 w-full max-w-xs space-y-4 border",oS(s),c),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[u(),a.jsx("span",{className:"font-semibold",children:t})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{variant:"outline",size:"sm",onClick:l,children:o}),a.jsx(G,{variant:d(),size:"sm",onClick:i,children:r})]})]})})}function p$({open:e,title:t,message:n,variant:s="warning",confirmText:r,cancelText:o,onConfirm:i,onCancel:l,className:c}){return a.jsx(g$,{open:e,title:t,message:n,variant:s,confirmText:r,cancelText:o,onConfirm:i,onCancel:l,className:c})}function x$({open:e,onConfirm:t,onCancel:n}){return a.jsx(p$,{open:e,title:"Reset Build?",message:"This will clear all selections and start a new build. This action cannot be undone.",variant:"warning",confirmText:"Confirm Reset",cancelText:"Cancel",onConfirm:t,onCancel:n})}function v$({title:e,description:t,icon:n,variant:s="default",children:r,className:o}){const i=()=>{if(n)return n;switch(s){case"warning":return a.jsx(uc,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return a.jsx(Ni,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});default:return null}};return a.jsxs(xe,{className:H(oi.card,o),children:[a.jsxs(_e,{children:[a.jsxs(Re,{className:"flex items-center gap-2",children:[i(),e]}),t&&a.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),a.jsx(ve,{className:H(oi.section),children:r})]})}function Ky({label:e,value:t,onChange:n,min:s=0,max:r=10,currentCount:o,type:i="regular",className:l}){const c=()=>{switch(i){case"regular":return a.jsx(jx,{className:"h-4 w-4"});case"bonus":return a.jsx(rt,{className:"h-4 w-4"});default:return null}},u=()=>d$(i);return a.jsxs("div",{className:H(oi.item,l),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c(),a.jsx(fc,{htmlFor:`${i}-limit`,className:u(),children:e})]}),a.jsx(_s,{id:`${i}-limit`,type:"number",min:s,max:r,value:t,onChange:d=>n(parseInt(d.target.value)||0),className:"mt-1"}),o!==void 0&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Currently selected: ",o]})]})}function Qy({type:e,title:t,message:n,className:s}){const r=()=>{switch(e){case"warning":return a.jsx(uc,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return a.jsx(Ni,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});case"error":return a.jsx(uc,{className:"h-4 w-4 text-red-600 dark:text-red-400"});case"success":return a.jsx(Ni,{className:"h-4 w-4 text-green-600 dark:text-green-400"});default:return null}};return a.jsxs("div",{className:H("flex items-start gap-2 p-4 rounded-lg border",f$(e),oS(e),s),children:[r(),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:t}),a.jsx("p",{className:"mt-1",children:n})]})]})}function y$({regularLimit:e,bonusLimit:t,onRegularLimitChange:n,onBonusLimitChange:s,currentRegularCount:r,currentBonusCount:o,className:i}){const l=e!==2||t!==1;return a.jsxs(v$,{title:"Trait Limits Configuration",description:"Configure the number of traits your character can have",icon:a.jsx(Ni,{className:"h-4 w-4 text-muted-foreground"}),className:i,children:[a.jsx(Qy,{type:"warning",title:"Default configuration is 2 starting + 1 late game traits.",message:"Increasing these limits requires corresponding MCM (Mod Configuration Menu) changes in-game. Make sure your MCM settings match these limits to avoid conflicts."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Ky,{label:"Starting Traits Limit",value:e,onChange:n,min:0,max:10,currentCount:r,type:"regular"}),a.jsx(Ky,{label:"Late Game Traits Limit",value:t,onChange:s,min:0,max:5,currentCount:o,type:"bonus"})]}),l&&a.jsx(Qy,{type:"info",title:`Custom limits detected: ${e} starting + ${t} late game traits.`,message:"Remember to update your MCM settings accordingly."})]})}const b$=el("",{variants:{variant:{h1:"scroll-m-20 text-5xl font-black tracking-tight text-balance lg:text-6xl",h2:"scroll-m-20 border-b pb-3 text-4xl font-bold tracking-tight first:mt-0 lg:text-5xl",h3:"scroll-m-20 text-3xl font-bold tracking-tight lg:text-4xl",h4:"scroll-m-20 text-2xl font-bold tracking-tight lg:text-3xl",h5:"scroll-m-20 text-xl font-bold tracking-tight lg:text-2xl",h6:"scroll-m-20 text-lg font-bold tracking-tight lg:text-xl",p:"text-lg leading-8 [&:not(:first-child)]:mt-6",blockquote:"mt-6 border-l-4 pl-6 italic text-lg",code:"bg-muted relative rounded px-[0.4rem] py-[0.3rem] font-mono text-base font-bold",lead:"text-muted-foreground text-2xl leading-8",large:"text-xl font-bold",small:"text-base font-semibold leading-none",muted:"text-muted-foreground text-base"}},defaultVariants:{variant:"p"}}),dn=g.forwardRef(({className:e,variant:t,as:n,...s},r)=>{const o=n||w$(t);return a.jsx(o,{className:H(b$({variant:t,className:e})),ref:r,...s})});dn.displayName="Typography";function w$(e){switch(e){case"h1":return"h1";case"h2":return"h2";case"h3":return"h3";case"h4":return"h4";case"h5":return"h5";case"h6":return"h6";case"blockquote":return"blockquote";case"code":return"code";case"lead":case"large":case"small":case"muted":case"p":default:return"p"}}const yo=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"h1",as:"h1",className:e,ref:n,...t}));yo.displayName="H1";const Wr=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"h2",as:"h2",className:e,ref:n,...t}));Wr.displayName="H2";const Qe=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"h3",as:"h3",className:e,ref:n,...t}));Qe.displayName="H3";const ii=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"h4",as:"h4",className:e,ref:n,...t}));ii.displayName="H4";const rn=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"h5",as:"h5",className:e,ref:n,...t}));rn.displayName="H5";const j$=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"h6",as:"h6",className:e,ref:n,...t}));j$.displayName="H6";const Ze=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"p",as:"p",className:e,ref:n,...t}));Ze.displayName="P";const N$=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"blockquote",as:"blockquote",className:e,ref:n,...t}));N$.displayName="Blockquote";const S$=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"code",as:"code",className:e,ref:n,...t}));S$.displayName="Code";const lS=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"lead",as:"p",className:e,ref:n,...t}));lS.displayName="Lead";const k$=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"large",as:"div",className:e,ref:n,...t}));k$.displayName="Large";const li=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"small",as:"small",className:e,ref:n,...t}));li.displayName="Small";const mc=g.forwardRef(({className:e,...t},n)=>a.jsx(dn,{variant:"muted",as:"p",className:e,ref:n,...t}));mc.displayName="Muted";const C$={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500"},E$={sm:"h-1.5",md:"h-2",lg:"h-3"};function uh({value:e,label:t,color:n="blue",size:s="md",showValue:r=!0,className:o,maxValue:i}){const l=i?Math.min(e/i*100,100):100;return a.jsxs("div",{className:H("space-y-1",o),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:t}),r&&a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),a.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:H("transition-all duration-300 ease-out",C$[n],E$[s]),style:{width:`${l}%`}})})]})}function _$({displayData:e,level:t,className:n,showRatios:s=!0,compact:r=!1,selectedRace:o}){return r?a.jsxs("div",{className:H("space-y-3",n),children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),o&&a.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Base stats from ",o.name]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Health"}),a.jsx("div",{className:"font-medium text-lg",children:e.health.total}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.health.assigned]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Stamina"}),a.jsx("div",{className:"font-medium text-lg",children:e.stamina.total}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.stamina.assigned]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Magicka"}),a.jsx("div",{className:"font-medium text-lg",children:e.magicka.total}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.magicka.assigned]})]})]}),s&&a.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Level ",t," •"," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments"]})]}):a.jsxs("div",{className:H("space-y-4",n),children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),o&&o.startingStats&&a.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:a.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[a.jsxs("p",{className:"font-medium mb-1",children:["Base Stats from ",o.name,":"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium",children:"Health"}),a.jsx("div",{className:"text-muted-foreground",children:o.startingStats.health})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium",children:"Stamina"}),a.jsx("div",{className:"text-muted-foreground",children:o.startingStats.stamina})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium",children:"Magicka"}),a.jsx("div",{className:"text-muted-foreground",children:o.startingStats.magicka})]})]})]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(uh,{value:e.health.total,label:"Health",color:"red",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),a.jsx(uh,{value:e.stamina.total,label:"Stamina",color:"green",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),a.jsx(uh,{value:e.magicka.total,label:"Magicka",color:"blue",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)})]}),s&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Health"}),a.jsxs("div",{className:"text-muted-foreground",children:[e.health.ratio.toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Stamina"}),a.jsxs("div",{className:"text-muted-foreground",children:[e.stamina.ratio.toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Magicka"}),a.jsxs("div",{className:"text-muted-foreground",children:[e.magicka.ratio.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:["Level ",t," •"," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments made"]})]})}function A$({level:e,assignments:t,onAssignmentChange:n,onClearAssignment:s,onClearAll:r,onUpdateAttributeLevel:o,className:i}){const l=b=>Object.values(t).filter(x=>x===b).length,c=l("health"),u=l("stamina"),d=l("magicka"),f=c+u+d,m=f+1,h=(b,x)=>{const y=l(b),w=x-y;if(w>0)for(let N=0;N<w;N++){const S=Math.max(2,f+2+N);n(S,b)}else if(w<0){for(let N=0;N<Math.abs(w);N++)for(let S=e;S>=2;S--)if(t[S]===b){s(S);break}}const j=f+w;o(j+1)},p=b=>{h(b,l(b)+1)},v=b=>{const x=l(b);x>0&&h(b,x-1)};return a.jsxs("div",{className:H("space-y-4",i),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Attribute Points"}),a.jsx("div",{className:"flex gap-2",children:a.jsxs(G,{variant:"outline",size:"sm",onClick:r,className:"text-xs",children:[a.jsx(gr,{className:"h-3 w-3 mr-1"}),"Clear All"]})})]}),a.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border",children:[a.jsxs("div",{className:"text-sm text-muted-foreground mb-3",children:["Character Level: ",m," (derived from ",f," attribute points)"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"flex flex-col items-center p-3 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-800",children:[a.jsx("div",{className:"font-medium text-red-700 dark:text-red-300 mb-3",children:"Health"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(G,{variant:"outline",size:"sm",onClick:()=>v("health"),disabled:c<=0,className:"h-8 w-8 p-0",children:a.jsx(Gl,{className:"h-4 w-4"})}),a.jsx(_s,{type:"number",value:c,onChange:b=>{const x=parseInt(b.target.value)||0;x>=0&&h("health",x)},className:"w-16 text-center text-lg font-bold text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 border-red-300 dark:border-red-600 focus:border-red-500 focus:ring-red-500",min:0}),a.jsx(G,{variant:"outline",size:"sm",onClick:()=>p("health"),className:"h-8 w-8 p-0",children:a.jsx(na,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[a.jsx("div",{className:"font-medium text-green-700 dark:text-green-300 mb-3",children:"Stamina"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(G,{variant:"outline",size:"sm",onClick:()=>v("stamina"),disabled:u<=0,className:"h-8 w-8 p-0",children:a.jsx(Gl,{className:"h-4 w-4"})}),a.jsx(_s,{type:"number",value:u,onChange:b=>{const x=parseInt(b.target.value)||0;x>=0&&h("stamina",x)},className:"w-16 text-center text-lg font-bold text-green-700 dark:text-green-300 bg-white dark:bg-gray-800 border-green-300 dark:border-green-600 focus:border-green-500 focus:ring-green-500",min:0}),a.jsx(G,{variant:"outline",size:"sm",onClick:()=>p("stamina"),className:"h-8 w-8 p-0",children:a.jsx(na,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300 mb-3",children:"Magicka"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(G,{variant:"outline",size:"sm",onClick:()=>v("magicka"),disabled:d<=0,className:"h-8 w-8 p-0",children:a.jsx(Gl,{className:"h-4 w-4"})}),a.jsx(_s,{type:"number",value:d,onChange:b=>{const x=parseInt(b.target.value)||0;x>=0&&h("magicka",x)},className:"w-16 text-center text-lg font-bold text-blue-700 dark:text-blue-300 bg-white dark:bg-gray-800 border-blue-300 dark:border-blue-600 focus:border-blue-500 focus:ring-blue-500",min:0}),a.jsx(G,{variant:"outline",size:"sm",onClick:()=>p("magicka"),className:"h-8 w-8 p-0",children:a.jsx(na,{className:"h-4 w-4"})})]})]})]})]})]})}function T$(){const{build:e,setAttributeAssignment:t,clearAttributeAssignment:n,clearAllAttributeAssignments:s,updateAttributeLevel:r}=Fr(),{data:o}=ha(),i=e.attributeAssignments,l=g.useMemo(()=>!e.race||o.length===0?null:o.find(p=>p.edid===e.race)||null,[e.race,o]),c=g.useMemo(()=>l!=null&&l.startingStats?{health:l.startingStats.health,stamina:l.startingStats.stamina,magicka:l.startingStats.magicka}:{health:100,stamina:100,magicka:100},[l]),u=g.useMemo(()=>{i.level;const p=i.health+i.stamina+i.magicka;return{health:{base:c.health,assigned:i.health,total:c.health+i.health,ratio:p>0?i.health/p*100:0},stamina:{base:c.stamina,assigned:i.stamina,total:c.stamina+i.stamina,ratio:p>0?i.stamina/p*100:0},magicka:{base:c.magicka,assigned:i.magicka,total:c.magicka+i.magicka,ratio:p>0?i.magicka/p*100:0}}},[i,c]),d=p=>p>0&&p<=i.level,f=p=>i.assignments[p]||null,m=()=>i.health+i.stamina+i.magicka,h=()=>{const p=Object.keys(i.assignments).map(Number),v=[];for(let b=2;b<=i.level;b++)p.includes(b)||v.push(b);return v};return{assignments:i,displayData:u,level:i.level,selectedRace:l,baseStats:c,setAttributeAssignment:t,clearAttributeAssignment:n,clearAllAttributeAssignments:s,updateAttributeLevel:r,canAssignAtLevel:d,getAssignmentAtLevel:f,getTotalAssignments:m,getUnassignedLevels:h}}function cS({className:e,showControls:t=!0,showSummary:n=!0,compact:s=!1}){const[r,o]=g.useState(!0),{assignments:i,displayData:l,level:c,selectedRace:u,setAttributeAssignment:d,clearAttributeAssignment:f,clearAllAttributeAssignments:m,updateAttributeLevel:h}=T$(),p=(x,y)=>{d(x,y)},v=x=>{f(x)},b=()=>{m()};return a.jsxs(xe,{className:H("w-full",e),children:[a.jsx(_e,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(Re,{className:"flex items-center gap-2",children:[a.jsx($d,{className:"h-5 w-5"}),"Attribute Assignments"]}),t&&a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>o(!r),children:r?a.jsx(u4,{className:"h-4 w-4"}):a.jsx(En,{className:"h-4 w-4"})})]})}),a.jsxs(ve,{className:"space-y-4",children:[n&&a.jsx(_$,{displayData:l,level:c,compact:s,selectedRace:u}),t&&r&&a.jsx(A$,{level:c,assignments:i.assignments,onAssignmentChange:p,onClearAssignment:v,onClearAll:b,onUpdateAttributeLevel:h})]})]})}const pd=new Map;function M$(){pd.clear()}M$();function R$(e,t={}){if(!e)return[];const n=JSON.stringify({text:e,options:t});if(pd.has(n))return pd.get(n);let s=[{text:e,key:"0"}];return t.customPatterns&&t.customPatterns.length>0&&t.customPatterns.forEach((r,o)=>{const i=[];s.forEach(l=>{if(l.className)i.push(l);else{let c=0,u;const d=new RegExp(r.pattern,r.pattern.flags.includes("g")?r.pattern.flags:r.pattern.flags+"g");d.lastIndex=0;let f=0;for(;(u=d.exec(l.text))!==null;){u.index>c&&i.push({text:l.text.slice(c,u.index),key:`${l.key}-${f++}`});let m=u[0];const h=typeof r.className=="function"?r.className(u[0]):r.className;r.transform&&(m=r.transform(m)),i.push({text:m,className:h,key:`${l.key}-${f++}`}),c=d.lastIndex}c<l.text.length&&i.push({text:l.text.slice(c),key:`${l.key}-${f++}`})}}),s=i}),s=s.map((r,o)=>({...r,key:r.key||String(o)})),pd.set(n,s),s}const D$=["health","magicka","stamina","health regeneration","magicka regeneration","stamina regeneration"],z$=["one-handed","two-handed","archery","block","heavy armor","light armor","smithing","alchemy"];function uS(){return{highlightBrackets:!0,highlightAttributes:!0,highlightSkills:!0,highlightNumbers:!0,customPatterns:[{pattern:/\*\*\*([^*]+)\*\*\*/g,className:e=>{const n=e.slice(3,-3).match(/[+-]?\d+(?:\.\d+)?%?/);if(n){const s=parseFloat(n[0]),r=n[0].startsWith("+")||s>0,o=n[0].startsWith("-")||s<0;if(r)return"font-bold text-green-600 bg-skyrim-gold/10 px-1 py-0.5 rounded";if(o)return"font-bold text-red-600 bg-skyrim-gold/10 px-1 py-0.5 rounded"}return"font-bold text-skyrim-gold bg-skyrim-gold/10 px-1 py-0.5 rounded"},transform:e=>e.slice(3,-3)},{pattern:/<([^>]+)>/g,className:e=>{const t=e.slice(1,-1);if(!/^\d+$/.test(t))return"text-foreground"},transform:e=>{const t=e.match(/<([^>]+)>/);return t?t[1]:e.slice(1,-1)}},{pattern:/[+-]?\d+(?:\.\d+)?%?/g,className:e=>{const t=parseFloat(e),n=e.startsWith("+")||t>0,s=e.startsWith("-")||t<0,r=t===0;return n?"font-bold text-green-600":s?"font-bold text-red-600":r?"font-bold text-skyrim-gold":"font-bold text-green-600"}},{pattern:new RegExp(`\\b(${D$.join("|")})\\b`,"gi"),className:"font-semibold text-primary"},{pattern:new RegExp(`\\b(${z$.join("|")})\\b`,"gi"),className:"font-semibold text-primary"}]}}function De({text:e,options:t,className:n="text-sm text-muted-foreground",as:s="div"}){const r=g.useMemo(()=>uS(),[]),o=g.useMemo(()=>e?R$(e,t||r):[],[e,t,r]);if(!e)return null;if(n.includes("line-clamp")){const l=n.match(/line-clamp-\d+/g)||[],c=n.replace(/line-clamp-\d+/g,"").trim();return a.jsx(s,{className:c,children:a.jsx("div",{className:`${l.join(" ")} overflow-hidden`,children:o.map(u=>a.jsx("span",{className:u.className,children:u.text},u.key))})})}return a.jsx(s,{className:n,children:o.map(l=>a.jsx("span",{className:l.className,children:l.text},l.key))})}const Fn=({children:e,title:t,description:n,className:s=""})=>a.jsxs("div",{className:`container mx-auto p-6 space-y-6 ${s}`,children:[t&&a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:t}),n&&a.jsx(De,{text:n,className:"text-muted-foreground mt-2 max-w-4xl",as:"p"})]})}),e]});function Ux(e){const t=e+"CollectionProvider",[n,s]=un(t),[r,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:b,children:x}=v,y=L.useRef(null),w=L.useRef(new Map).current;return a.jsx(r,{scope:b,itemMap:w,collectionRef:y,children:x})};i.displayName=t;const l=e+"CollectionSlot",c=ki(l),u=L.forwardRef((v,b)=>{const{scope:x,children:y}=v,w=o(l,x),j=Oe(b,w.collectionRef);return a.jsx(c,{ref:j,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",m=ki(d),h=L.forwardRef((v,b)=>{const{scope:x,children:y,...w}=v,j=L.useRef(null),N=Oe(b,j),S=o(d,x);return L.useEffect(()=>(S.itemMap.set(j,{ref:j,...w}),()=>void S.itemMap.delete(j))),a.jsx(m,{[f]:"",ref:N,children:y})});h.displayName=d;function p(v){const b=o(e+"CollectionConsumer",v);return L.useCallback(()=>{const y=b.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((S,k)=>w.indexOf(S.ref.current)-w.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:i,Slot:u,ItemSlot:h},p,s]}var L$=g.createContext(void 0);function al(e){const t=g.useContext(L$);return e||t||"ltr"}var dh="rovingFocusGroup.onEntryFocus",$$={bubbles:!1,cancelable:!0},Zc="RovingFocusGroup",[zg,dS,P$]=Ux(Zc),[O$,ol]=un(Zc,[P$]),[B$,I$]=O$(Zc),fS=g.forwardRef((e,t)=>a.jsx(zg.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(zg.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(H$,{...e,ref:t})})}));fS.displayName=Zc;var H$=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,m=g.useRef(null),h=Oe(t,m),p=al(o),[v,b]=Yn({prop:i,defaultProp:l??null,onChange:c,caller:Zc}),[x,y]=g.useState(!1),w=Ut(u),j=dS(n),N=g.useRef(!1),[S,k]=g.useState(0);return g.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(dh,w),()=>E.removeEventListener(dh,w)},[w]),a.jsx(B$,{scope:n,orientation:s,dir:p,loop:r,currentTabStopId:v,onItemFocus:g.useCallback(E=>b(E),[b]),onItemShiftTab:g.useCallback(()=>y(!0),[]),onFocusableItemAdd:g.useCallback(()=>k(E=>E+1),[]),onFocusableItemRemove:g.useCallback(()=>k(E=>E-1),[]),children:a.jsx(ye.div,{tabIndex:x||S===0?-1:0,"data-orientation":s,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:te(e.onMouseDown,()=>{N.current=!0}),onFocus:te(e.onFocus,E=>{const C=!N.current;if(E.target===E.currentTarget&&C&&!x){const _=new CustomEvent(dh,$$);if(E.currentTarget.dispatchEvent(_),!_.defaultPrevented){const P=j().filter(A=>A.focusable),O=P.find(A=>A.active),$=P.find(A=>A.id===v),z=[O,$,...P].filter(Boolean).map(A=>A.ref.current);gS(z,d)}}N.current=!1}),onBlur:te(e.onBlur,()=>y(!1))})})}),mS="RovingFocusGroupItem",hS=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:o,children:i,...l}=e,c=fr(),u=o||c,d=I$(mS,n),f=d.currentTabStopId===u,m=dS(n),{onFocusableItemAdd:h,onFocusableItemRemove:p,currentTabStopId:v}=d;return g.useEffect(()=>{if(s)return h(),()=>p()},[s,h,p]),a.jsx(zg.ItemSlot,{scope:n,id:u,focusable:s,active:r,children:a.jsx(ye.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:te(e.onMouseDown,b=>{s?d.onItemFocus(u):b.preventDefault()}),onFocus:te(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:te(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=V$(b,d.orientation,d.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=m().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const j=w.indexOf(b.currentTarget);w=d.loop?q$(w,j+1):w.slice(j+1)}setTimeout(()=>gS(w))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:v!=null}):i})})});hS.displayName=mS;var U$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function F$(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function V$(e,t,n){const s=F$(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return U$[s]}function gS(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function q$(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Fx=fS,Vx=hS,nm="Tabs",[G$,Xee]=un(nm,[ol]),pS=ol(),[Z$,qx]=G$(nm),xS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=al(l),[f,m]=Yn({prop:s,onChange:r,defaultProp:o??"",caller:nm});return a.jsx(Z$,{scope:n,baseId:fr(),value:f,onValueChange:m,orientation:i,dir:d,activationMode:c,children:a.jsx(ye.div,{dir:d,"data-orientation":i,...u,ref:t})})});xS.displayName=nm;var vS="TabsList",yS=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...r}=e,o=qx(vS,n),i=pS(n);return a.jsx(Fx,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:a.jsx(ye.div,{role:"tablist","aria-orientation":o.orientation,...r,ref:t})})});yS.displayName=vS;var bS="TabsTrigger",wS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...o}=e,i=qx(bS,n),l=pS(n),c=SS(i.baseId,s),u=kS(i.baseId,s),d=s===i.value;return a.jsx(Vx,{asChild:!0,...l,focusable:!r,active:d,children:a.jsx(ye.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...o,ref:t,onMouseDown:te(e.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?i.onValueChange(s):f.preventDefault()}),onKeyDown:te(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(s)}),onFocus:te(e.onFocus,()=>{const f=i.activationMode!=="manual";!d&&!r&&f&&i.onValueChange(s)})})})});wS.displayName=bS;var jS="TabsContent",NS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:r,children:o,...i}=e,l=qx(jS,n),c=SS(l.baseId,s),u=kS(l.baseId,s),d=s===l.value,f=g.useRef(d);return g.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(qt,{present:r||d,children:({present:m})=>a.jsx(ye.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&o})})});NS.displayName=jS;function SS(e,t){return`${e}-trigger-${t}`}function kS(e,t){return`${e}-content-${t}`}var Y$=xS,X$=yS,W$=wS,K$=NS;function il({className:e,...t}){return a.jsx(Y$,{"data-slot":"tabs",className:H("flex flex-col gap-2",e),...t})}function ll({className:e,...t}){return a.jsx(X$,{"data-slot":"tabs-list",className:H("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function an({className:e,...t}){return a.jsx(W$,{"data-slot":"tabs-trigger",className:H("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function wn({className:e,...t}){return a.jsx(K$,{"data-slot":"tabs-content",className:H("flex-1 outline-none",e),...t})}const en=[{label:"Build",value:"build",to:"/build"},{label:"Race",value:"race",to:"/build/race"},{label:"Birth Signs",value:"birth-signs",to:"/build/birth-signs"},{label:"Traits",value:"traits",to:"/build/traits"},{label:"Religion",value:"religions",to:"/build/religions"},{label:"Destiny",value:"destiny",to:"/build/destiny"},{label:"Perks",value:"perks",to:"/build/perks"}],Q$=({currentPath:e})=>{var d;const t=ft(),n=en.findIndex(f=>f.to===e),s=n>=0?n:0,r=f=>{const m=en.find(h=>h.value===f);m&&t(m.to)},o=f=>{t(f.to)},i=()=>{s>0&&t(en[s-1].to)},l=()=>{s<en.length-1&&t(en[s+1].to)},c=f=>{switch(f.key){case"ArrowLeft":f.preventDefault(),i();break;case"ArrowRight":f.preventDefault(),l();break;case"Home":f.preventDefault(),t(en[0].to);break;case"End":f.preventDefault(),t(en[en.length-1].to);break}},u=((d=en[s])==null?void 0:d.value)||"build";return a.jsx("div",{className:"bg-background border-b border-border shadow-sm sticky top-12 backdrop-blur-sm",style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},role:"navigation","aria-label":"Character build progress",onKeyDown:c,tabIndex:0,children:a.jsx("div",{style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx(G,{onClick:i,disabled:s===0,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to previous step: ${s>0?en[s-1].label:"none"}`,children:a.jsx(wx,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx(il,{value:u,onValueChange:r,children:a.jsx(ll,{className:"flex w-full h-auto p-1 bg-muted relative",style:{backgroundColor:"hsl(var(--muted))",backgroundImage:"none"},role:"tablist","aria-label":"Character build steps",children:en.map((f,m)=>a.jsxs(an,{value:f.value,onClick:()=>o(f),className:H("inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-xs font-medium whitespace-nowrap transition-[color,box-shadow] relative","data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm","dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30","text-foreground dark:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","cursor-pointer select-none"),style:{backgroundColor:u===f.value?"hsl(var(--background))":"transparent",backgroundImage:"none"},title:`Step ${m+1}: ${f.label}`,role:"tab","aria-selected":u===f.value,"aria-label":`Step ${m+1}: ${f.label}`,children:[a.jsx("span",{className:"hidden sm:inline",children:f.label}),a.jsx("span",{className:"sm:hidden",children:f.label.split(" ")[0]}),u===f.value&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-skyrim-gold rounded-b-md transition-all duration-200"})]},f.value))})})}),a.jsx(G,{onClick:l,disabled:s===en.length-1,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to next step: ${s<en.length-1?en[s+1].label:"none"}`,children:a.jsx(Uc,{className:"h-4 w-4"})})]})})})},J$=()=>{const e=Cr();return a.jsxs("div",{className:"flex flex-col min-h-full",children:[a.jsx(Q$,{currentPath:e.pathname}),a.jsx("div",{className:"flex-grow",children:a.jsx(TD,{})})]})};function eP(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function CS(e){const[t,n]=g.useState(void 0);return Ls(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const o=r[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var sm="Switch",[tP,Wee]=un(sm),[nP,sP]=tP(sm),ES=g.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:r,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[m,h]=g.useState(null),p=Oe(t,w=>h(w)),v=g.useRef(!1),b=m?d||!!m.closest("form"):!0,[x,y]=Yn({prop:r,defaultProp:o??!1,onChange:u,caller:sm});return a.jsxs(nP,{scope:n,checked:x,disabled:l,children:[a.jsx(ye.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":MS(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:p,onClick:te(e.onClick,w=>{y(j=>!j),b&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),b&&a.jsx(TS,{control:m,bubbles:!v.current,name:s,value:c,checked:x,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});ES.displayName=sm;var _S="SwitchThumb",AS=g.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,r=sP(_S,n);return a.jsx(ye.span,{"data-state":MS(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t})});AS.displayName=_S;var rP="SwitchBubbleInput",TS=g.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...r},o)=>{const i=g.useRef(null),l=Oe(i,o),c=eP(n),u=CS(t);return g.useEffect(()=>{const d=i.current;if(!d)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&h){const p=new Event("click",{bubbles:s});h.call(d,n),d.dispatchEvent(p)}},[c,n,s]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:l,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});TS.displayName=rP;function MS(e){return e?"checked":"unchecked"}var RS=ES,aP=AS;const rm=g.forwardRef(({className:e,...t},n)=>a.jsx(RS,{className:H("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-black data-[state=unchecked]:bg-gray-300",e),...t,ref:n,children:a.jsx(aP,{className:H("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-sm ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));rm.displayName=RS.displayName;function bo({itemId:e,itemType:t,itemName:n,isInBuild:s=!1,className:r,onCheckedChange:o}){const{setRace:i,setStone:l,setReligion:c,addRegularTrait:u,addBonusTrait:d,removeTrait:f,addMajorSkill:m,removeMajorSkill:h,removeMinorSkill:p,addEquipment:v,removeEquipment:b,build:x}=pt(),w=s||(()=>{switch(t){case"race":return x.race===e;case"stone":return x.stone===e;case"religion":return x.religion===e;case"trait":return x.traits.regular.includes(e)||x.traits.bonus.includes(e);case"skill":return x.skills.major.includes(e)||x.skills.minor.includes(e);case"equipment":return x.equipment.includes(e);default:return!1}})(),j=S=>{if(o){o(S);return}switch(t){case"race":i(S?e:null);break;case"stone":l(S?e:null);break;case"religion":c(S?e:null);break;case"trait":S?x.traits.regular.length<2?u(e):x.traits.bonus.length<1&&d(e):f(e);break;case"skill":S?m(e):(h(e),p(e));break;case"equipment":S?v(e):b(e);break}},N=()=>w?`This ${t} is currently in your build`:`Add this ${t} to your character build`;return a.jsx("div",{className:H("flex items-center justify-center p-2 rounded-lg border transition-all duration-200 cursor-pointer hover:bg-muted/50",w?"border-[#d4af37] bg-[#d4af37]/20 shadow-md":"border-border",r),onClick:S=>{S.stopPropagation(),j(!w)},title:N(),children:a.jsx(rm,{checked:w,onCheckedChange:j,className:H("transition-all duration-200",w?"data-[state=checked]:bg-[#d4af37]":"")})})}function Oa({categories:e,onSelect:t,placeholder:n="Search categories...",className:s=""}){const[r,o]=g.useState(!1),[i,l]=g.useState(null),[c,u]=g.useState(""),[d,f]=g.useState(-1),m=g.useRef(null),h=g.useRef(null),p=e.length===1?e[0]:null;g.useEffect(()=>{const k=E=>{m.current&&!m.current.contains(E.target)&&(o(!1),l(null),f(-1))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const v=i||p?(i||p).options.filter(k=>String(k.label||"").toLowerCase().includes(c.toLowerCase())||String(k.description||"").toLowerCase().includes(c.toLowerCase())):e.flatMap(k=>k.options.filter(E=>String(E.label||"").toLowerCase().includes(c.toLowerCase())||String(E.description||"").toLowerCase().includes(c.toLowerCase()))),b=k=>{u(k),o(!0),f(-1)},x=k=>{var E;l(k),u(""),(E=h.current)==null||E.focus()},y=k=>{t(k),u(""),l(null),o(!1),f(-1)},w=k=>{k.key==="ArrowDown"?(k.preventDefault(),f(E=>Math.min(E+1,v.length-1))):k.key==="ArrowUp"?(k.preventDefault(),f(E=>Math.max(E-1,-1))):k.key==="Enter"?(k.preventDefault(),d>=0&&v[d]&&y(v[d])):k.key==="Escape"&&(o(!1),l(null),f(-1))},j=()=>{o(!0)},N=i||p,S=!p&&!i;return a.jsxs("div",{ref:m,className:`relative ${s}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx(Si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(_s,{ref:h,type:"text",placeholder:N?N.placeholder:n,value:c,onChange:k=>b(k.target.value),onFocus:j,onKeyDown:w,className:"pl-10 pr-10"}),a.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>o(!r),children:a.jsx(En,{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`})})]}),r&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",style:{zIndex:Dt.AUTOCOMPLETE+10},children:[S&&a.jsxs("div",{className:"p-2 border-b border-border",children:[a.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(k=>a.jsxs("button",{onClick:()=>x(k),className:"w-full text-left px-2 py-2 hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98] rounded text-sm flex items-center justify-between transition-all duration-200 cursor-pointer",children:[a.jsx("span",{children:k.name}),a.jsx(En,{className:"h-4 w-4"})]},k.id))]}),a.jsx("div",{className:"p-2",children:v.length===0?a.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):v.map((k,E)=>a.jsxs("button",{onClick:()=>y(k),className:`w-full text-left px-2 py-2 rounded text-sm transition-all duration-200 cursor-pointer ${E===d?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"}`,children:[a.jsx("div",{className:"font-medium",children:k.label||"Unnamed Option"}),k.description&&a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:k.description})]},k.id))})]})]})}const oP=["top","right","bottom","left"],ga=Math.min,vn=Math.max,Hd=Math.round,zu=Math.floor,As=e=>({x:e,y:e}),iP={left:"right",right:"left",bottom:"top",top:"bottom"},lP={start:"end",end:"start"};function Lg(e,t,n){return vn(e,ga(t,n))}function xr(e,t){return typeof e=="function"?e(t):e}function vr(e){return e.split("-")[0]}function cl(e){return e.split("-")[1]}function Gx(e){return e==="x"?"y":"x"}function Zx(e){return e==="y"?"height":"width"}const cP=new Set(["top","bottom"]);function ks(e){return cP.has(vr(e))?"y":"x"}function Yx(e){return Gx(ks(e))}function uP(e,t,n){n===void 0&&(n=!1);const s=cl(e),r=Yx(e),o=Zx(r);let i=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Ud(i)),[i,Ud(i)]}function dP(e){const t=Ud(e);return[$g(e),t,$g(t)]}function $g(e){return e.replace(/start|end/g,t=>lP[t])}const Jy=["left","right"],eb=["right","left"],fP=["top","bottom"],mP=["bottom","top"];function hP(e,t,n){switch(e){case"top":case"bottom":return n?t?eb:Jy:t?Jy:eb;case"left":case"right":return t?fP:mP;default:return[]}}function gP(e,t,n,s){const r=cl(e);let o=hP(vr(e),n==="start",s);return r&&(o=o.map(i=>i+"-"+r),t&&(o=o.concat(o.map($g)))),o}function Ud(e){return e.replace(/left|right|bottom|top/g,t=>iP[t])}function pP(e){return{top:0,right:0,bottom:0,left:0,...e}}function DS(e){return typeof e!="number"?pP(e):{top:e,right:e,bottom:e,left:e}}function Fd(e){const{x:t,y:n,width:s,height:r}=e;return{width:s,height:r,top:n,left:t,right:t+s,bottom:n+r,x:t,y:n}}function tb(e,t,n){let{reference:s,floating:r}=e;const o=ks(t),i=Yx(t),l=Zx(i),c=vr(t),u=o==="y",d=s.x+s.width/2-r.width/2,f=s.y+s.height/2-r.height/2,m=s[l]/2-r[l]/2;let h;switch(c){case"top":h={x:d,y:s.y-r.height};break;case"bottom":h={x:d,y:s.y+s.height};break;case"right":h={x:s.x+s.width,y:f};break;case"left":h={x:s.x-r.width,y:f};break;default:h={x:s.x,y:s.y}}switch(cl(t)){case"start":h[i]-=m*(n&&u?-1:1);break;case"end":h[i]+=m*(n&&u?-1:1);break}return h}const xP=async(e,t,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:f}=tb(u,s,c),m=s,h={},p=0;for(let v=0;v<l.length;v++){const{name:b,fn:x}=l[v],{x:y,y:w,data:j,reset:N}=await x({x:d,y:f,initialPlacement:s,placement:m,strategy:r,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});d=y??d,f=w??f,h={...h,[b]:{...h[b],...j}},N&&p<=50&&(p++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(u=N.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:r}):N.rects),{x:d,y:f}=tb(u,m,c)),v=-1)}return{x:d,y:f,placement:m,strategy:r,middlewareData:h}};async function hc(e,t){var n;t===void 0&&(t={});const{x:s,y:r,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:h=0}=xr(t,e),p=DS(h),b=l[m?f==="floating"?"reference":"floating":f],x=Fd(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=f==="floating"?{x:s,y:r,width:i.floating.width,height:i.floating.height}:i.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),j=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},N=Fd(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(x.top-N.top+p.top)/j.y,bottom:(N.bottom-x.bottom+p.bottom)/j.y,left:(x.left-N.left+p.left)/j.x,right:(N.right-x.right+p.right)/j.x}}const vP=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:r,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=xr(e,t)||{};if(u==null)return{};const f=DS(d),m={x:n,y:s},h=Yx(r),p=Zx(h),v=await i.getDimensions(u),b=h==="y",x=b?"top":"left",y=b?"bottom":"right",w=b?"clientHeight":"clientWidth",j=o.reference[p]+o.reference[h]-m[h]-o.floating[p],N=m[h]-o.reference[h],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let k=S?S[w]:0;(!k||!await(i.isElement==null?void 0:i.isElement(S)))&&(k=l.floating[w]||o.floating[p]);const E=j/2-N/2,C=k/2-v[p]/2-1,_=ga(f[x],C),P=ga(f[y],C),O=_,$=k-v[p]-P,T=k/2-v[p]/2+E,z=Lg(O,T,$),A=!c.arrow&&cl(r)!=null&&T!==z&&o.reference[p]/2-(T<O?_:P)-v[p]/2<0,D=A?T<O?T-O:T-$:0;return{[h]:m[h]+D,data:{[h]:z,centerOffset:T-z-D,...A&&{alignmentOffset:D}},reset:A}}}),yP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:r,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...b}=xr(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=vr(r),y=ks(l),w=vr(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=m||(w||!v?[Ud(l)]:dP(l)),S=p!=="none";!m&&S&&N.push(...gP(l,v,p,j));const k=[l,...N],E=await hc(t,b),C=[];let _=((s=o.flip)==null?void 0:s.overflows)||[];if(d&&C.push(E[x]),f){const T=uP(r,i,j);C.push(E[T[0]],E[T[1]])}if(_=[..._,{placement:r,overflows:C}],!C.every(T=>T<=0)){var P,O;const T=(((P=o.flip)==null?void 0:P.index)||0)+1,z=k[T];if(z&&(!(f==="alignment"?y!==ks(z):!1)||_.every(M=>M.overflows[0]>0&&ks(M.placement)===y)))return{data:{index:T,overflows:_},reset:{placement:z}};let A=(O=_.filter(D=>D.overflows[0]<=0).sort((D,M)=>D.overflows[1]-M.overflows[1])[0])==null?void 0:O.placement;if(!A)switch(h){case"bestFit":{var $;const D=($=_.filter(M=>{if(S){const R=ks(M.placement);return R===y||R==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(R=>R>0).reduce((R,B)=>R+B,0)]).sort((M,R)=>M[1]-R[1])[0])==null?void 0:$[0];D&&(A=D);break}case"initialPlacement":A=l;break}if(r!==A)return{reset:{placement:A}}}return{}}}};function nb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function sb(e){return oP.some(t=>e[t]>=0)}const bP=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...r}=xr(e,t);switch(s){case"referenceHidden":{const o=await hc(t,{...r,elementContext:"reference"}),i=nb(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:sb(i)}}}case"escaped":{const o=await hc(t,{...r,altBoundary:!0}),i=nb(o,n.floating);return{data:{escapedOffsets:i,escaped:sb(i)}}}default:return{}}}}},zS=new Set(["left","top"]);async function wP(e,t){const{placement:n,platform:s,elements:r}=e,o=await(s.isRTL==null?void 0:s.isRTL(r.floating)),i=vr(n),l=cl(n),c=ks(n)==="y",u=zS.has(i)?-1:1,d=o&&c?-1:1,f=xr(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof p=="number"&&(h=l==="end"?p*-1:p),c?{x:h*d,y:m*u}:{x:m*u,y:h*d}}const jP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:r,y:o,placement:i,middlewareData:l}=t,c=await wP(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:o+c.y,data:{...c,placement:i}}}}},NP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:r}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:b=>{let{x,y}=b;return{x,y}}},...c}=xr(e,t),u={x:n,y:s},d=await hc(t,c),f=ks(vr(r)),m=Gx(f);let h=u[m],p=u[f];if(o){const b=m==="y"?"top":"left",x=m==="y"?"bottom":"right",y=h+d[b],w=h-d[x];h=Lg(y,h,w)}if(i){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",y=p+d[b],w=p-d[x];p=Lg(y,p,w)}const v=l.fn({...t,[m]:h,[f]:p});return{...v,data:{x:v.x-n,y:v.y-s,enabled:{[m]:o,[f]:i}}}}}},SP=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:r,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=xr(e,t),d={x:n,y:s},f=ks(r),m=Gx(f);let h=d[m],p=d[f];const v=xr(l,t),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=m==="y"?"height":"width",j=o.reference[m]-o.floating[w]+b.mainAxis,N=o.reference[m]+o.reference[w]-b.mainAxis;h<j?h=j:h>N&&(h=N)}if(u){var x,y;const w=m==="y"?"width":"height",j=zS.has(vr(r)),N=o.reference[f]-o.floating[w]+(j&&((x=i.offset)==null?void 0:x[f])||0)+(j?0:b.crossAxis),S=o.reference[f]+o.reference[w]+(j?0:((y=i.offset)==null?void 0:y[f])||0)-(j?b.crossAxis:0);p<N?p=N:p>S&&(p=S)}return{[m]:h,[f]:p}}}},kP=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:r,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...u}=xr(e,t),d=await hc(t,u),f=vr(r),m=cl(r),h=ks(r)==="y",{width:p,height:v}=o.floating;let b,x;f==="top"||f==="bottom"?(b=f,x=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,b=m==="end"?"top":"bottom");const y=v-d.top-d.bottom,w=p-d.left-d.right,j=ga(v-d[b],y),N=ga(p-d[x],w),S=!t.middlewareData.shift;let k=j,E=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(k=y),S&&!m){const _=vn(d.left,0),P=vn(d.right,0),O=vn(d.top,0),$=vn(d.bottom,0);h?E=p-2*(_!==0||P!==0?_+P:vn(d.left,d.right)):k=v-2*(O!==0||$!==0?O+$:vn(d.top,d.bottom))}await c({...t,availableWidth:E,availableHeight:k});const C=await i.getDimensions(l.floating);return p!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function am(){return typeof window<"u"}function ul(e){return LS(e)?(e.nodeName||"").toLowerCase():"#document"}function jn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Bs(e){var t;return(t=(LS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function LS(e){return am()?e instanceof Node||e instanceof jn(e).Node:!1}function os(e){return am()?e instanceof Element||e instanceof jn(e).Element:!1}function $s(e){return am()?e instanceof HTMLElement||e instanceof jn(e).HTMLElement:!1}function rb(e){return!am()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof jn(e).ShadowRoot}const CP=new Set(["inline","contents"]);function Yc(e){const{overflow:t,overflowX:n,overflowY:s,display:r}=is(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!CP.has(r)}const EP=new Set(["table","td","th"]);function _P(e){return EP.has(ul(e))}const AP=[":popover-open",":modal"];function om(e){return AP.some(t=>{try{return e.matches(t)}catch{return!1}})}const TP=["transform","translate","scale","rotate","perspective"],MP=["transform","translate","scale","rotate","perspective","filter"],RP=["paint","layout","strict","content"];function Xx(e){const t=Wx(),n=os(e)?is(e):e;return TP.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||MP.some(s=>(n.willChange||"").includes(s))||RP.some(s=>(n.contain||"").includes(s))}function DP(e){let t=pa(e);for(;$s(t)&&!Ai(t);){if(Xx(t))return t;if(om(t))return null;t=pa(t)}return null}function Wx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const zP=new Set(["html","body","#document"]);function Ai(e){return zP.has(ul(e))}function is(e){return jn(e).getComputedStyle(e)}function im(e){return os(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function pa(e){if(ul(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rb(e)&&e.host||Bs(e);return rb(t)?t.host:t}function $S(e){const t=pa(e);return Ai(t)?e.ownerDocument?e.ownerDocument.body:e.body:$s(t)&&Yc(t)?t:$S(t)}function gc(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=$S(e),o=r===((s=e.ownerDocument)==null?void 0:s.body),i=jn(r);if(o){const l=Pg(i);return t.concat(i,i.visualViewport||[],Yc(r)?r:[],l&&n?gc(l):[])}return t.concat(r,gc(r,[],n))}function Pg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function PS(e){const t=is(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const r=$s(e),o=r?e.offsetWidth:n,i=r?e.offsetHeight:s,l=Hd(n)!==o||Hd(s)!==i;return l&&(n=o,s=i),{width:n,height:s,$:l}}function Kx(e){return os(e)?e:e.contextElement}function ci(e){const t=Kx(e);if(!$s(t))return As(1);const n=t.getBoundingClientRect(),{width:s,height:r,$:o}=PS(t);let i=(o?Hd(n.width):n.width)/s,l=(o?Hd(n.height):n.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const LP=As(0);function OS(e){const t=jn(e);return!Wx()||!t.visualViewport?LP:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $P(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==jn(e)?!1:t}function Ja(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=Kx(e);let i=As(1);t&&(s?os(s)&&(i=ci(s)):i=ci(e));const l=$P(o,n,s)?OS(o):As(0);let c=(r.left+l.x)/i.x,u=(r.top+l.y)/i.y,d=r.width/i.x,f=r.height/i.y;if(o){const m=jn(o),h=s&&os(s)?jn(s):s;let p=m,v=Pg(p);for(;v&&s&&h!==p;){const b=ci(v),x=v.getBoundingClientRect(),y=is(v),w=x.left+(v.clientLeft+parseFloat(y.paddingLeft))*b.x,j=x.top+(v.clientTop+parseFloat(y.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=w,u+=j,p=jn(v),v=Pg(p)}}return Fd({width:d,height:f,x:c,y:u})}function Qx(e,t){const n=im(e).scrollLeft;return t?t.left+n:Ja(Bs(e)).left+n}function BS(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=s.left+t.scrollLeft-(n?0:Qx(e,s)),o=s.top+t.scrollTop;return{x:r,y:o}}function PP(e){let{elements:t,rect:n,offsetParent:s,strategy:r}=e;const o=r==="fixed",i=Bs(s),l=t?om(t.floating):!1;if(s===i||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=As(1);const d=As(0),f=$s(s);if((f||!f&&!o)&&((ul(s)!=="body"||Yc(i))&&(c=im(s)),$s(s))){const h=Ja(s);u=ci(s),d.x=h.x+s.clientLeft,d.y=h.y+s.clientTop}const m=i&&!f&&!o?BS(i,c,!0):As(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function OP(e){return Array.from(e.getClientRects())}function BP(e){const t=Bs(e),n=im(e),s=e.ownerDocument.body,r=vn(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=vn(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-n.scrollLeft+Qx(e);const l=-n.scrollTop;return is(s).direction==="rtl"&&(i+=vn(t.clientWidth,s.clientWidth)-r),{width:r,height:o,x:i,y:l}}function IP(e,t){const n=jn(e),s=Bs(e),r=n.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(r){o=r.width,i=r.height;const u=Wx();(!u||u&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:o,height:i,x:l,y:c}}const HP=new Set(["absolute","fixed"]);function UP(e,t){const n=Ja(e,!0,t==="fixed"),s=n.top+e.clientTop,r=n.left+e.clientLeft,o=$s(e)?ci(e):As(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=r*o.x,u=s*o.y;return{width:i,height:l,x:c,y:u}}function ab(e,t,n){let s;if(t==="viewport")s=IP(e,n);else if(t==="document")s=BP(Bs(e));else if(os(t))s=UP(t,n);else{const r=OS(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Fd(s)}function IS(e,t){const n=pa(e);return n===t||!os(n)||Ai(n)?!1:is(n).position==="fixed"||IS(n,t)}function FP(e,t){const n=t.get(e);if(n)return n;let s=gc(e,[],!1).filter(l=>os(l)&&ul(l)!=="body"),r=null;const o=is(e).position==="fixed";let i=o?pa(e):e;for(;os(i)&&!Ai(i);){const l=is(i),c=Xx(i);!c&&l.position==="fixed"&&(r=null),(o?!c&&!r:!c&&l.position==="static"&&!!r&&HP.has(r.position)||Yc(i)&&!c&&IS(e,i))?s=s.filter(d=>d!==i):r=l,i=pa(i)}return t.set(e,s),s}function VP(e){let{element:t,boundary:n,rootBoundary:s,strategy:r}=e;const i=[...n==="clippingAncestors"?om(t)?[]:FP(t,this._c):[].concat(n),s],l=i[0],c=i.reduce((u,d)=>{const f=ab(t,d,r);return u.top=vn(f.top,u.top),u.right=ga(f.right,u.right),u.bottom=ga(f.bottom,u.bottom),u.left=vn(f.left,u.left),u},ab(t,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function qP(e){const{width:t,height:n}=PS(e);return{width:t,height:n}}function GP(e,t,n){const s=$s(t),r=Bs(t),o=n==="fixed",i=Ja(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=As(0);function u(){c.x=Qx(r)}if(s||!s&&!o)if((ul(t)!=="body"||Yc(r))&&(l=im(t)),s){const h=Ja(t,!0,o,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else r&&u();o&&!s&&r&&u();const d=r&&!s&&!o?BS(r,l):As(0),f=i.left+l.scrollLeft-c.x-d.x,m=i.top+l.scrollTop-c.y-d.y;return{x:f,y:m,width:i.width,height:i.height}}function fh(e){return is(e).position==="static"}function ob(e,t){if(!$s(e)||is(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Bs(e)===n&&(n=n.ownerDocument.body),n}function HS(e,t){const n=jn(e);if(om(e))return n;if(!$s(e)){let r=pa(e);for(;r&&!Ai(r);){if(os(r)&&!fh(r))return r;r=pa(r)}return n}let s=ob(e,t);for(;s&&_P(s)&&fh(s);)s=ob(s,t);return s&&Ai(s)&&fh(s)&&!Xx(s)?n:s||DP(e)||n}const ZP=async function(e){const t=this.getOffsetParent||HS,n=this.getDimensions,s=await n(e.floating);return{reference:GP(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function YP(e){return is(e).direction==="rtl"}const XP={convertOffsetParentRelativeRectToViewportRelativeRect:PP,getDocumentElement:Bs,getClippingRect:VP,getOffsetParent:HS,getElementRects:ZP,getClientRects:OP,getDimensions:qP,getScale:ci,isElement:os,isRTL:YP};function US(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function WP(e,t){let n=null,s;const r=Bs(e);function o(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:f,width:m,height:h}=u;if(l||t(),!m||!h)return;const p=zu(f),v=zu(r.clientWidth-(d+m)),b=zu(r.clientHeight-(f+h)),x=zu(d),w={rootMargin:-p+"px "+-v+"px "+-b+"px "+-x+"px",threshold:vn(0,ga(1,c))||1};let j=!0;function N(S){const k=S[0].intersectionRatio;if(k!==c){if(!j)return i();k?i(!1,k):s=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!US(u,e.getBoundingClientRect())&&i(),j=!1}try{n=new IntersectionObserver(N,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(N,w)}n.observe(e)}return i(!0),o}function KP(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=Kx(e),d=r||o?[...u?gc(u):[],...gc(t)]:[];d.forEach(x=>{r&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const f=u&&l?WP(u,n):null;let m=-1,h=null;i&&(h=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let p,v=c?Ja(e):null;c&&b();function b(){const x=Ja(e);v&&!US(v,x)&&n(),v=x,p=requestAnimationFrame(b)}return n(),()=>{var x;d.forEach(y=>{r&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),f==null||f(),(x=h)==null||x.disconnect(),h=null,c&&cancelAnimationFrame(p)}}const QP=jP,JP=NP,eO=yP,tO=kP,nO=bP,ib=vP,sO=SP,rO=(e,t,n)=>{const s=new Map,r={platform:XP,...n},o={...r.platform,_c:s};return xP(e,t,{...r,platform:o})};var aO=typeof document<"u",oO=function(){},xd=aO?g.useLayoutEffect:oO;function Vd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Vd(e[s],t[s]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,r[s]))return!1;for(s=n;s--!==0;){const o=r[s];if(!(o==="_owner"&&e.$$typeof)&&!Vd(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function FS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function lb(e,t){const n=FS(e);return Math.round(t*n)/n}function mh(e){const t=g.useRef(e);return xd(()=>{t.current=e}),t}function iO(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,h]=g.useState(s);Vd(m,s)||h(s);const[p,v]=g.useState(null),[b,x]=g.useState(null),y=g.useCallback(M=>{M!==S.current&&(S.current=M,v(M))},[]),w=g.useCallback(M=>{M!==k.current&&(k.current=M,x(M))},[]),j=o||p,N=i||b,S=g.useRef(null),k=g.useRef(null),E=g.useRef(d),C=c!=null,_=mh(c),P=mh(r),O=mh(u),$=g.useCallback(()=>{if(!S.current||!k.current)return;const M={placement:t,strategy:n,middleware:m};P.current&&(M.platform=P.current),rO(S.current,k.current,M).then(R=>{const B={...R,isPositioned:O.current!==!1};T.current&&!Vd(E.current,B)&&(E.current=B,Kf.flushSync(()=>{f(B)}))})},[m,t,n,P,O]);xd(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const T=g.useRef(!1);xd(()=>(T.current=!0,()=>{T.current=!1}),[]),xd(()=>{if(j&&(S.current=j),N&&(k.current=N),j&&N){if(_.current)return _.current(j,N,$);$()}},[j,N,$,_,C]);const z=g.useMemo(()=>({reference:S,floating:k,setReference:y,setFloating:w}),[y,w]),A=g.useMemo(()=>({reference:j,floating:N}),[j,N]),D=g.useMemo(()=>{const M={position:n,left:0,top:0};if(!A.floating)return M;const R=lb(A.floating,d.x),B=lb(A.floating,d.y);return l?{...M,transform:"translate("+R+"px, "+B+"px)",...FS(A.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:B}},[n,l,A.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:$,refs:z,elements:A,floatingStyles:D}),[d,$,z,A,D])}const lO=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:r}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?ib({element:s.current,padding:r}).fn(n):{}:s?ib({element:s,padding:r}).fn(n):{}}}},cO=(e,t)=>({...QP(e),options:[e,t]}),uO=(e,t)=>({...JP(e),options:[e,t]}),dO=(e,t)=>({...sO(e),options:[e,t]}),fO=(e,t)=>({...eO(e),options:[e,t]}),mO=(e,t)=>({...tO(e),options:[e,t]}),hO=(e,t)=>({...nO(e),options:[e,t]}),gO=(e,t)=>({...lO(e),options:[e,t]});var pO="Arrow",VS=g.forwardRef((e,t)=>{const{children:n,width:s=10,height:r=5,...o}=e;return a.jsx(ye.svg,{...o,ref:t,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});VS.displayName=pO;var xO=VS,Jx="Popper",[qS,dl]=un(Jx),[vO,GS]=qS(Jx),ZS=e=>{const{__scopePopper:t,children:n}=e,[s,r]=g.useState(null);return a.jsx(vO,{scope:t,anchor:s,onAnchorChange:r,children:n})};ZS.displayName=Jx;var YS="PopperAnchor",XS=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...r}=e,o=GS(YS,n),i=g.useRef(null),l=Oe(t,i);return g.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:a.jsx(ye.div,{...r,ref:l})});XS.displayName=YS;var e0="PopperContent",[yO,bO]=qS(e0),WS=g.forwardRef((e,t)=>{var ee,pe,fe,we,F,X;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:h="optimized",onPlaced:p,...v}=e,b=GS(e0,n),[x,y]=g.useState(null),w=Oe(t,Q=>y(Q)),[j,N]=g.useState(null),S=CS(j),k=(S==null?void 0:S.width)??0,E=(S==null?void 0:S.height)??0,C=s+(o!=="center"?"-"+o:""),_=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],O=P.length>0,$={padding:_,boundary:P.filter(jO),altBoundary:O},{refs:T,floatingStyles:z,placement:A,isPositioned:D,middlewareData:M}=iO({strategy:"fixed",placement:C,whileElementsMounted:(...Q)=>KP(...Q,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[cO({mainAxis:r+E,alignmentAxis:i}),c&&uO({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?dO():void 0,...$}),c&&fO({...$}),mO({...$,apply:({elements:Q,rects:W,availableWidth:se,availableHeight:be})=>{const{width:ue,height:ne}=W.reference,ze=Q.floating.style;ze.setProperty("--radix-popper-available-width",`${se}px`),ze.setProperty("--radix-popper-available-height",`${be}px`),ze.setProperty("--radix-popper-anchor-width",`${ue}px`),ze.setProperty("--radix-popper-anchor-height",`${ne}px`)}}),j&&gO({element:j,padding:l}),NO({arrowWidth:k,arrowHeight:E}),m&&hO({strategy:"referenceHidden",...$})]}),[R,B]=JS(A),U=Ut(p);Ls(()=>{D&&(U==null||U())},[D,U]);const I=(ee=M.arrow)==null?void 0:ee.x,V=(pe=M.arrow)==null?void 0:pe.y,Z=((fe=M.arrow)==null?void 0:fe.centerOffset)!==0,[J,ie]=g.useState();return Ls(()=>{x&&ie(window.getComputedStyle(x).zIndex)},[x]),a.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:D?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(we=M.transformOrigin)==null?void 0:we.x,(F=M.transformOrigin)==null?void 0:F.y].join(" "),...((X=M.hide)==null?void 0:X.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(yO,{scope:n,placedSide:R,onArrowChange:N,arrowX:I,arrowY:V,shouldHideArrow:Z,children:a.jsx(ye.div,{"data-side":R,"data-align":B,...v,ref:w,style:{...v.style,animation:D?void 0:"none"}})})})});WS.displayName=e0;var KS="PopperArrow",wO={top:"bottom",right:"left",bottom:"top",left:"right"},QS=g.forwardRef(function(t,n){const{__scopePopper:s,...r}=t,o=bO(KS,s),i=wO[o.placedSide];return a.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:a.jsx(xO,{...r,ref:n,style:{...r.style,display:"block"}})})});QS.displayName=KS;function jO(e){return e!==null}var NO=e=>({name:"transformOrigin",options:e,fn(t){var b,x,y;const{placement:n,rects:s,middlewareData:r}=t,i=((b=r.arrow)==null?void 0:b.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,d]=JS(n),f={start:"0%",center:"50%",end:"100%"}[d],m=(((x=r.arrow)==null?void 0:x.x)??0)+l/2,h=(((y=r.arrow)==null?void 0:y.y)??0)+c/2;let p="",v="";return u==="bottom"?(p=i?f:`${m}px`,v=`${-c}px`):u==="top"?(p=i?f:`${m}px`,v=`${s.floating.height+c}px`):u==="right"?(p=`${-c}px`,v=i?f:`${h}px`):u==="left"&&(p=`${s.floating.width+c}px`,v=i?f:`${h}px`),{data:{x:p,y:v}}}});function JS(e){const[t,n="center"]=e.split("-");return[t,n]}var e2=ZS,t0=XS,n0=WS,s0=QS,Og=["Enter"," "],SO=["ArrowDown","PageUp","Home"],t2=["ArrowUp","PageDown","End"],kO=[...SO,...t2],CO={ltr:[...Og,"ArrowRight"],rtl:[...Og,"ArrowLeft"]},EO={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xc="Menu",[pc,_O,AO]=Ux(Xc),[wo,n2]=un(Xc,[AO,dl,ol]),lm=dl(),s2=ol(),[TO,jo]=wo(Xc),[MO,Wc]=wo(Xc),r2=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:r,onOpenChange:o,modal:i=!0}=e,l=lm(t),[c,u]=g.useState(null),d=g.useRef(!1),f=Ut(o),m=al(r);return g.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),a.jsx(e2,{...l,children:a.jsx(TO,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:u,children:a.jsx(MO,{scope:t,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:i,children:s})})})};r2.displayName=Xc;var RO="MenuAnchor",r0=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,r=lm(n);return a.jsx(t0,{...r,...s,ref:t})});r0.displayName=RO;var a0="MenuPortal",[DO,a2]=wo(a0,{forceMount:void 0}),o2=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:r}=e,o=jo(a0,t);return a.jsx(DO,{scope:t,forceMount:n,children:a.jsx(qt,{present:n||o.open,children:a.jsx(Rx,{asChild:!0,container:r,children:s})})})};o2.displayName=a0;var Vn="MenuContent",[zO,o0]=wo(Vn),i2=g.forwardRef((e,t)=>{const n=a2(Vn,e.__scopeMenu),{forceMount:s=n.forceMount,...r}=e,o=jo(Vn,e.__scopeMenu),i=Wc(Vn,e.__scopeMenu);return a.jsx(pc.Provider,{scope:e.__scopeMenu,children:a.jsx(qt,{present:s||o.open,children:a.jsx(pc.Slot,{scope:e.__scopeMenu,children:i.modal?a.jsx(LO,{...r,ref:t}):a.jsx($O,{...r,ref:t})})})})}),LO=g.forwardRef((e,t)=>{const n=jo(Vn,e.__scopeMenu),s=g.useRef(null),r=Oe(t,s);return g.useEffect(()=>{const o=s.current;if(o)return P1(o)},[]),a.jsx(i0,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:te(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),$O=g.forwardRef((e,t)=>{const n=jo(Vn,e.__scopeMenu);return a.jsx(i0,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),PO=ki("MenuContent.ScrollLock"),i0=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:h,disableOutsideScroll:p,...v}=e,b=jo(Vn,n),x=Wc(Vn,n),y=lm(n),w=s2(n),j=_O(n),[N,S]=g.useState(null),k=g.useRef(null),E=Oe(t,k,b.onContentChange),C=g.useRef(0),_=g.useRef(""),P=g.useRef(0),O=g.useRef(null),$=g.useRef("right"),T=g.useRef(0),z=p?Dx:g.Fragment,A=p?{as:PO,allowPinchZoom:!0}:void 0,D=R=>{var ee,pe;const B=_.current+R,U=j().filter(fe=>!fe.disabled),I=document.activeElement,V=(ee=U.find(fe=>fe.ref.current===I))==null?void 0:ee.textValue,Z=U.map(fe=>fe.textValue),J=XO(Z,B,V),ie=(pe=U.find(fe=>fe.textValue===J))==null?void 0:pe.ref.current;(function fe(we){_.current=we,window.clearTimeout(C.current),we!==""&&(C.current=window.setTimeout(()=>fe(""),1e3))})(B),ie&&setTimeout(()=>ie.focus())};g.useEffect(()=>()=>window.clearTimeout(C.current),[]),_1();const M=g.useCallback(R=>{var U,I;return $.current===((U=O.current)==null?void 0:U.side)&&KO(R,(I=O.current)==null?void 0:I.area)},[]);return a.jsx(zO,{scope:n,searchRef:_,onItemEnter:g.useCallback(R=>{M(R)&&R.preventDefault()},[M]),onItemLeave:g.useCallback(R=>{var B;M(R)||((B=k.current)==null||B.focus(),S(null))},[M]),onTriggerLeave:g.useCallback(R=>{M(R)&&R.preventDefault()},[M]),pointerGraceTimerRef:P,onPointerGraceIntentChange:g.useCallback(R=>{O.current=R},[]),children:a.jsx(z,{...A,children:a.jsx(Mx,{asChild:!0,trapped:r,onMountAutoFocus:te(o,R=>{var B;R.preventDefault(),(B=k.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:a.jsx(Gc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:h,children:a.jsx(Fx,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:s,currentTabStopId:N,onCurrentTabStopIdChange:S,onEntryFocus:te(c,R=>{x.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(n0,{role:"menu","aria-orientation":"vertical","data-state":N2(b.open),"data-radix-menu-content":"",dir:x.dir,...y,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:te(v.onKeyDown,R=>{const U=R.target.closest("[data-radix-menu-content]")===R.currentTarget,I=R.ctrlKey||R.altKey||R.metaKey,V=R.key.length===1;U&&(R.key==="Tab"&&R.preventDefault(),!I&&V&&D(R.key));const Z=k.current;if(R.target!==Z||!kO.includes(R.key))return;R.preventDefault();const ie=j().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);t2.includes(R.key)&&ie.reverse(),ZO(ie)}),onBlur:te(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(C.current),_.current="")}),onPointerMove:te(e.onPointerMove,xc(R=>{const B=R.target,U=T.current!==R.clientX;if(R.currentTarget.contains(B)&&U){const I=R.clientX>T.current?"right":"left";$.current=I,T.current=R.clientX}}))})})})})})})});i2.displayName=Vn;var OO="MenuGroup",l0=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return a.jsx(ye.div,{role:"group",...s,ref:t})});l0.displayName=OO;var BO="MenuLabel",l2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return a.jsx(ye.div,{...s,ref:t})});l2.displayName=BO;var qd="MenuItem",cb="menu.itemSelect",cm=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...r}=e,o=g.useRef(null),i=Wc(qd,e.__scopeMenu),l=o0(qd,e.__scopeMenu),c=Oe(t,o),u=g.useRef(!1),d=()=>{const f=o.current;if(!n&&f){const m=new CustomEvent(cb,{bubbles:!0,cancelable:!0});f.addEventListener(cb,h=>s==null?void 0:s(h),{once:!0}),S1(f,m),m.defaultPrevented?u.current=!1:i.onClose()}};return a.jsx(c2,{...r,ref:c,disabled:n,onClick:te(e.onClick,d),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),u.current=!0},onPointerUp:te(e.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:te(e.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||Og.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});cm.displayName=qd;var c2=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...o}=e,i=o0(qd,n),l=s2(n),c=g.useRef(null),u=Oe(t,c),[d,f]=g.useState(!1),[m,h]=g.useState("");return g.useEffect(()=>{const p=c.current;p&&h((p.textContent??"").trim())},[o.children]),a.jsx(pc.ItemSlot,{scope:n,disabled:s,textValue:r??m,children:a.jsx(Vx,{asChild:!0,...l,focusable:!s,children:a.jsx(ye.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:u,onPointerMove:te(e.onPointerMove,xc(p=>{s?i.onItemLeave(p):(i.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:te(e.onPointerLeave,xc(p=>i.onItemLeave(p))),onFocus:te(e.onFocus,()=>f(!0)),onBlur:te(e.onBlur,()=>f(!1))})})})}),IO="MenuCheckboxItem",u2=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...r}=e;return a.jsx(g2,{scope:e.__scopeMenu,checked:n,children:a.jsx(cm,{role:"menuitemcheckbox","aria-checked":Gd(n)?"mixed":n,...r,ref:t,"data-state":u0(n),onSelect:te(r.onSelect,()=>s==null?void 0:s(Gd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});u2.displayName=IO;var d2="MenuRadioGroup",[HO,UO]=wo(d2,{value:void 0,onValueChange:()=>{}}),f2=g.forwardRef((e,t)=>{const{value:n,onValueChange:s,...r}=e,o=Ut(s);return a.jsx(HO,{scope:e.__scopeMenu,value:n,onValueChange:o,children:a.jsx(l0,{...r,ref:t})})});f2.displayName=d2;var m2="MenuRadioItem",h2=g.forwardRef((e,t)=>{const{value:n,...s}=e,r=UO(m2,e.__scopeMenu),o=n===r.value;return a.jsx(g2,{scope:e.__scopeMenu,checked:o,children:a.jsx(cm,{role:"menuitemradio","aria-checked":o,...s,ref:t,"data-state":u0(o),onSelect:te(s.onSelect,()=>{var i;return(i=r.onValueChange)==null?void 0:i.call(r,n)},{checkForDefaultPrevented:!1})})})});h2.displayName=m2;var c0="MenuItemIndicator",[g2,FO]=wo(c0,{checked:!1}),p2=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...r}=e,o=FO(c0,n);return a.jsx(qt,{present:s||Gd(o.checked)||o.checked===!0,children:a.jsx(ye.span,{...r,ref:t,"data-state":u0(o.checked)})})});p2.displayName=c0;var VO="MenuSeparator",x2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return a.jsx(ye.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});x2.displayName=VO;var qO="MenuArrow",v2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,r=lm(n);return a.jsx(s0,{...r,...s,ref:t})});v2.displayName=qO;var GO="MenuSub",[Kee,y2]=wo(GO),Ol="MenuSubTrigger",b2=g.forwardRef((e,t)=>{const n=jo(Ol,e.__scopeMenu),s=Wc(Ol,e.__scopeMenu),r=y2(Ol,e.__scopeMenu),o=o0(Ol,e.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},d=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>d,[d]),g.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),a.jsx(r0,{asChild:!0,...u,children:a.jsx(c2,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":N2(n.open),...e,ref:Qf(t,r.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:te(e.onPointerMove,xc(f=>{o.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:te(e.onPointerLeave,xc(f=>{var h,p;d();const m=(h=n.content)==null?void 0:h.getBoundingClientRect();if(m){const v=(p=n.content)==null?void 0:p.dataset.side,b=v==="right",x=b?-5:5,y=m[b?"left":"right"],w=m[b?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:y,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:y,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:te(e.onKeyDown,f=>{var h;const m=o.searchRef.current!=="";e.disabled||m&&f.key===" "||CO[s.dir].includes(f.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),f.preventDefault())})})})});b2.displayName=Ol;var w2="MenuSubContent",j2=g.forwardRef((e,t)=>{const n=a2(Vn,e.__scopeMenu),{forceMount:s=n.forceMount,...r}=e,o=jo(Vn,e.__scopeMenu),i=Wc(Vn,e.__scopeMenu),l=y2(w2,e.__scopeMenu),c=g.useRef(null),u=Oe(t,c);return a.jsx(pc.Provider,{scope:e.__scopeMenu,children:a.jsx(qt,{present:s||o.open,children:a.jsx(pc.Slot,{scope:e.__scopeMenu,children:a.jsx(i0,{id:l.contentId,"aria-labelledby":l.triggerId,...r,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;i.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:te(e.onFocusOutside,d=>{d.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:te(e.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:te(e.onKeyDown,d=>{var h;const f=d.currentTarget.contains(d.target),m=EO[i.dir].includes(d.key);f&&m&&(o.onOpenChange(!1),(h=l.trigger)==null||h.focus(),d.preventDefault())})})})})})});j2.displayName=w2;function N2(e){return e?"open":"closed"}function Gd(e){return e==="indeterminate"}function u0(e){return Gd(e)?"indeterminate":e?"checked":"unchecked"}function ZO(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function YO(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function XO(e,t,n){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=YO(e,Math.max(o,0));r.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function WO(e,t){const{x:n,y:s}=e;let r=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],u=l.x,d=l.y,f=c.x,m=c.y;d>s!=m>s&&n<(f-u)*(s-d)/(m-d)+u&&(r=!r)}return r}function KO(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return WO(n,t)}function xc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var QO=r2,JO=r0,e6=o2,t6=i2,n6=l0,s6=l2,r6=cm,a6=u2,o6=f2,i6=h2,l6=p2,c6=x2,u6=v2,d6=b2,f6=j2,um="DropdownMenu",[m6,Qee]=un(um,[n2]),Qt=n2(),[h6,S2]=m6(um),k2=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:r,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=Qt(t),u=g.useRef(null),[d,f]=Yn({prop:r,defaultProp:o??!1,onChange:i,caller:um});return a.jsx(h6,{scope:t,triggerId:fr(),triggerRef:u,contentId:fr(),open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),modal:l,children:a.jsx(QO,{...c,open:d,onOpenChange:f,dir:s,modal:l,children:n})})};k2.displayName=um;var C2="DropdownMenuTrigger",E2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=e,o=S2(C2,n),i=Qt(n);return a.jsx(JO,{asChild:!0,...i,children:a.jsx(ye.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Qf(t,o.triggerRef),onPointerDown:te(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:te(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});E2.displayName=C2;var g6="DropdownMenuPortal",_2=e=>{const{__scopeDropdownMenu:t,...n}=e,s=Qt(t);return a.jsx(e6,{...s,...n})};_2.displayName=g6;var A2="DropdownMenuContent",T2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=S2(A2,n),o=Qt(n),i=g.useRef(!1);return a.jsx(t6,{id:r.contentId,"aria-labelledby":r.triggerId,...o,...s,ref:t,onCloseAutoFocus:te(e.onCloseAutoFocus,l=>{var c;i.current||(c=r.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:te(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!r.modal||d)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});T2.displayName=A2;var p6="DropdownMenuGroup",x6=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(n6,{...r,...s,ref:t})});x6.displayName=p6;var v6="DropdownMenuLabel",M2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(s6,{...r,...s,ref:t})});M2.displayName=v6;var y6="DropdownMenuItem",R2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(r6,{...r,...s,ref:t})});R2.displayName=y6;var b6="DropdownMenuCheckboxItem",D2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(a6,{...r,...s,ref:t})});D2.displayName=b6;var w6="DropdownMenuRadioGroup",j6=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(o6,{...r,...s,ref:t})});j6.displayName=w6;var N6="DropdownMenuRadioItem",z2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(i6,{...r,...s,ref:t})});z2.displayName=N6;var S6="DropdownMenuItemIndicator",L2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(l6,{...r,...s,ref:t})});L2.displayName=S6;var k6="DropdownMenuSeparator",$2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(c6,{...r,...s,ref:t})});$2.displayName=k6;var C6="DropdownMenuArrow",E6=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(u6,{...r,...s,ref:t})});E6.displayName=C6;var _6="DropdownMenuSubTrigger",P2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(d6,{...r,...s,ref:t})});P2.displayName=_6;var A6="DropdownMenuSubContent",O2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return a.jsx(f6,{...r,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});O2.displayName=A6;var T6=k2,M6=E2,R6=_2,B2=T2,I2=M2,H2=R2,U2=D2,F2=z2,V2=L2,q2=$2,G2=P2,Z2=O2;const Kc=T6,Qc=M6,D6=g.forwardRef(({className:e,inset:t,children:n,...s},r)=>a.jsxs(G2,{ref:r,className:H("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[n,a.jsx(Uc,{className:"ml-auto h-4 w-4"})]}));D6.displayName=G2.displayName;const z6=g.forwardRef(({className:e,...t},n)=>a.jsx(Z2,{ref:n,className:H("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Dt.DROPDOWN},...t}));z6.displayName=Z2.displayName;const fl=g.forwardRef(({className:e,sideOffset:t=4,...n},s)=>a.jsx(R6,{children:a.jsx(B2,{ref:s,sideOffset:t,className:H("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Dt.DROPDOWN},...n})}));fl.displayName=B2.displayName;const ss=g.forwardRef(({className:e,inset:t,...n},s)=>a.jsx(H2,{ref:s,className:H("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));ss.displayName=H2.displayName;const L6=g.forwardRef(({className:e,children:t,checked:n,...s},r)=>a.jsxs(U2,{ref:r,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(V2,{children:a.jsx(cc,{className:"h-4 w-4"})})}),t]}));L6.displayName=U2.displayName;const $6=g.forwardRef(({className:e,children:t,...n},s)=>a.jsxs(F2,{ref:s,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(V2,{children:a.jsx(jx,{className:"h-2 w-2 fill-current"})})}),t]}));$6.displayName=F2.displayName;const P6=g.forwardRef(({className:e,inset:t,...n},s)=>a.jsx(I2,{ref:s,className:H("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));P6.displayName=I2.displayName;const O6=g.forwardRef(({className:e,...t},n)=>a.jsx(q2,{ref:n,className:H("-mx-1 my-1 h-px bg-muted",e),...t}));O6.displayName=q2.displayName;function B6(e,[t,n]){return Math.min(n,Math.max(t,e))}function I6(e,t){return g.useReducer((n,s)=>t[n][s]??n,e)}var d0="ScrollArea",[Y2,Jee]=un(d0),[H6,Xn]=Y2(d0),X2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:r,scrollHideDelay:o=600,...i}=e,[l,c]=g.useState(null),[u,d]=g.useState(null),[f,m]=g.useState(null),[h,p]=g.useState(null),[v,b]=g.useState(null),[x,y]=g.useState(0),[w,j]=g.useState(0),[N,S]=g.useState(!1),[k,E]=g.useState(!1),C=Oe(t,P=>c(P)),_=al(r);return a.jsx(H6,{scope:n,type:s,dir:_,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:N,onScrollbarXEnabledChange:S,scrollbarY:v,onScrollbarYChange:b,scrollbarYEnabled:k,onScrollbarYEnabledChange:E,onCornerWidthChange:y,onCornerHeightChange:j,children:a.jsx(ye.div,{dir:_,...i,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});X2.displayName=d0;var W2="ScrollAreaViewport",K2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:r,...o}=e,i=Xn(W2,n),l=g.useRef(null),c=Oe(t,l,i.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(ye.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});K2.displayName=W2;var Is="ScrollAreaScrollbar",f0=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Xn(Is,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=r,l=e.orientation==="horizontal";return g.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),r.type==="hover"?a.jsx(U6,{...s,ref:t,forceMount:n}):r.type==="scroll"?a.jsx(F6,{...s,ref:t,forceMount:n}):r.type==="auto"?a.jsx(Q2,{...s,ref:t,forceMount:n}):r.type==="always"?a.jsx(m0,{...s,ref:t}):null});f0.displayName=Is;var U6=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Xn(Is,e.__scopeScrollArea),[o,i]=g.useState(!1);return g.useEffect(()=>{const l=r.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[r.scrollArea,r.scrollHideDelay]),a.jsx(qt,{present:n||o,children:a.jsx(Q2,{"data-state":o?"visible":"hidden",...s,ref:t})})}),F6=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Xn(Is,e.__scopeScrollArea),o=e.orientation==="horizontal",i=fm(()=>c("SCROLL_END"),100),[l,c]=I6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,r.scrollHideDelay,c]),g.useEffect(()=>{const u=r.viewport,d=o?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const h=u[d];f!==h&&(c("SCROLL"),i()),f=h};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[r.viewport,o,c,i]),a.jsx(qt,{present:n||l!=="hidden",children:a.jsx(m0,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:te(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:te(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Q2=g.forwardRef((e,t)=>{const n=Xn(Is,e.__scopeScrollArea),{forceMount:s,...r}=e,[o,i]=g.useState(!1),l=e.orientation==="horizontal",c=fm(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:d)}},10);return Ti(n.viewport,c),Ti(n.content,c),a.jsx(qt,{present:s||o,children:a.jsx(m0,{"data-state":o?"visible":"hidden",...r,ref:t})})}),m0=g.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,r=Xn(Is,e.__scopeScrollArea),o=g.useRef(null),i=g.useRef(0),[l,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=sk(l.viewport,l.content),d={...s,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function f(m,h){return X6(m,i.current,l,h)}return n==="horizontal"?a.jsx(V6,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&o.current){const m=r.viewport.scrollLeft,h=ub(m,l,r.dir);o.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=f(m,r.dir))}}):n==="vertical"?a.jsx(q6,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&o.current){const m=r.viewport.scrollTop,h=ub(m,l);o.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=f(m))}}):null}),V6=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,o=Xn(Is,e.__scopeScrollArea),[i,l]=g.useState(),c=g.useRef(null),u=Oe(t,c,o.onScrollbarXChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(ek,{"data-orientation":"horizontal",...r,ref:u,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":dm(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(o.viewport){const m=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),ak(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Yd(i.paddingLeft),paddingEnd:Yd(i.paddingRight)}})}})}),q6=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,o=Xn(Is,e.__scopeScrollArea),[i,l]=g.useState(),c=g.useRef(null),u=Oe(t,c,o.onScrollbarYChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(ek,{"data-orientation":"vertical",...r,ref:u,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":dm(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(o.viewport){const m=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),ak(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Yd(i.paddingTop),paddingEnd:Yd(i.paddingBottom)}})}})}),[G6,J2]=Y2(Is),ek=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:r,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=e,h=Xn(Is,n),[p,v]=g.useState(null),b=Oe(t,C=>v(C)),x=g.useRef(null),y=g.useRef(""),w=h.viewport,j=s.content-s.viewport,N=Ut(d),S=Ut(c),k=fm(f,10);function E(C){if(x.current){const _=C.clientX-x.current.left,P=C.clientY-x.current.top;u({x:_,y:P})}}return g.useEffect(()=>{const C=_=>{const P=_.target;(p==null?void 0:p.contains(P))&&N(_,j)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[w,p,j,N]),g.useEffect(S,[s,S]),Ti(p,k),Ti(h.content,k),a.jsx(G6,{scope:n,scrollbar:p,hasThumb:r,onThumbChange:Ut(o),onThumbPointerUp:Ut(i),onThumbPositionChange:S,onThumbPointerDown:Ut(l),children:a.jsx(ye.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:te(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),x.current=p.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),E(C))}),onPointerMove:te(e.onPointerMove,E),onPointerUp:te(e.onPointerUp,C=>{const _=C.target;_.hasPointerCapture(C.pointerId)&&_.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,h.viewport&&(h.viewport.style.scrollBehavior=""),x.current=null})})})}),Zd="ScrollAreaThumb",tk=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=J2(Zd,e.__scopeScrollArea);return a.jsx(qt,{present:n||r.hasThumb,children:a.jsx(Z6,{ref:t,...s})})}),Z6=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...r}=e,o=Xn(Zd,n),i=J2(Zd,n),{onThumbPositionChange:l}=i,c=Oe(t,f=>i.onThumbChange(f)),u=g.useRef(void 0),d=fm(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const f=o.viewport;if(f){const m=()=>{if(d(),!u.current){const h=W6(f,l);u.current=h,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[o.viewport,d,l]),a.jsx(ye.div,{"data-state":i.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:te(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,v=f.clientY-h.top;i.onThumbPointerDown({x:p,y:v})}),onPointerUp:te(e.onPointerUp,i.onThumbPointerUp)})});tk.displayName=Zd;var h0="ScrollAreaCorner",nk=g.forwardRef((e,t)=>{const n=Xn(h0,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?a.jsx(Y6,{...e,ref:t}):null});nk.displayName=h0;var Y6=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,r=Xn(h0,n),[o,i]=g.useState(0),[l,c]=g.useState(0),u=!!(o&&l);return Ti(r.scrollbarX,()=>{var f;const d=((f=r.scrollbarX)==null?void 0:f.offsetHeight)||0;r.onCornerHeightChange(d),c(d)}),Ti(r.scrollbarY,()=>{var f;const d=((f=r.scrollbarY)==null?void 0:f.offsetWidth)||0;r.onCornerWidthChange(d),i(d)}),u?a.jsx(ye.div,{...s,ref:t,style:{width:o,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Yd(e){return e?parseInt(e,10):0}function sk(e,t){const n=e/t;return isNaN(n)?0:n}function dm(e){const t=sk(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function X6(e,t,n,s="ltr"){const r=dm(n),o=r/2,i=t||o,l=r-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=s==="ltr"?[0,d]:[d*-1,0];return rk([c,u],f)(e)}function ub(e,t,n="ltr"){const s=dm(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-r,i=t.content-t.viewport,l=o-s,c=n==="ltr"?[0,i]:[i*-1,0],u=B6(e,c);return rk([0,i],[0,l])(u)}function rk(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function ak(e,t){return e>0&&e<t}var W6=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function r(){const o={left:e.scrollLeft,top:e.scrollTop},i=n.left!==o.left,l=n.top!==o.top;(i||l)&&t(),n=o,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function fm(e,t){const n=Ut(e),s=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(s.current),[]),g.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function Ti(e,t){const n=Ut(t);Ls(()=>{let s=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(s),r.unobserve(e)}}},[e,n])}var ok=X2,K6=K2,Q6=nk;const eo=g.forwardRef(({className:e,children:t,...n},s)=>a.jsxs(ok,{ref:s,className:H("relative overflow-hidden",e),...n,children:[a.jsx(K6,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(ik,{}),a.jsx(Q6,{})]}));eo.displayName=ok.displayName;const ik=g.forwardRef(({className:e,orientation:t="vertical",...n},s)=>a.jsx(f0,{ref:s,orientation:t,className:H("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:a.jsx(tk,{className:"relative flex-1 rounded-full bg-border"})}));ik.displayName=f0.displayName;function J6({items:e,viewMode:t,onItemSelect:n,selectedItem:s,renderItemCard:r,className:o}){return a.jsxs("div",{className:`space-y-4 ${o}`,children:[t==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(i=>a.jsx("div",{onClick:()=>n(i),className:"cursor-pointer transition-transform hover:scale-[1.02] relative",children:r(i,(s==null?void 0:s.id)===i.id)},i.id))}):a.jsx(eo,{className:"h-[calc(100vh-300px)]",children:a.jsx("div",{className:"space-y-1 pr-4",children:e.map(i=>a.jsx("div",{onClick:()=>n(i),className:"cursor-pointer transition-colors hover:bg-muted/50 rounded-lg",children:r(i,(s==null?void 0:s.id)===i.id)},i.id))})}),e.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No items found matching your criteria."})})]})}function e8({categories:e,onSelect:t,className:n=""}){return a.jsx("div",{className:`flex flex-wrap gap-4 justify-start ${n}`,children:e.map(s=>a.jsx("div",{className:"flex-1 min-w-[180px]",children:a.jsx(Oa,{categories:[s],onSelect:t,placeholder:s.placeholder,className:"w-full"})},s.id))})}function t8({tags:e,onRemove:t,className:n=""}){return e.length===0?null:a.jsx("div",{className:`flex flex-wrap gap-2 ${n}`,children:e.map(s=>a.jsxs(K,{variant:"secondary",className:"flex items-center gap-1 px-3 py-1 text-sm",children:[a.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.category,":"]}),a.jsx("span",{children:s.label}),a.jsx("button",{onClick:()=>t(s.id),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:a.jsx(Bt,{className:"h-3 w-3"})})]},s.id))})}function lk({categories:e,onSelect:t,onCustomSearch:n,placeholder:s="Search by name, description, or abilities...",className:r=""}){const[o,i]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState(""),[f,m]=g.useState(-1),h=g.useRef(null),p=g.useRef(null),v=e.length===1?e[0]:null;g.useEffect(()=>{const _=P=>{h.current&&!h.current.contains(P.target)&&(i(!1),c(null),m(-1))};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const b=l||v?(l||v).options.filter(_=>_.label&&typeof _.label=="string"&&_.label.toLowerCase().includes(u.toLowerCase())||_.description&&typeof _.description=="string"&&_.description.toLowerCase().includes(u.toLowerCase())):e.flatMap(_=>_.options.filter(P=>P.label&&typeof P.label=="string"&&P.label.toLowerCase().includes(u.toLowerCase())||P.description&&typeof P.description=="string"&&P.description.toLowerCase().includes(u.toLowerCase()))),x=_=>{d(_),i(!0),m(-1)},y=_=>{var P;c(_),d(""),(P=p.current)==null||P.focus()},w=_=>{t(_),d(""),c(null),i(!1),m(-1)},j=()=>{u.trim()&&(n(u.trim()),d(""),c(null),i(!1),m(-1))},N=_=>{_.key==="ArrowDown"?(_.preventDefault(),m(P=>Math.min(P+1,b.length-1))):_.key==="ArrowUp"?(_.preventDefault(),m(P=>Math.max(P-1,-1))):_.key==="Enter"?(_.preventDefault(),f>=0&&b[f]?w(b[f]):u.trim()&&j()):_.key==="Escape"&&(i(!1),c(null),m(-1))},S=()=>{i(!0)},k=l||v,E=!v&&!l,C=u.trim()&&!b.some(_=>_.label&&typeof _.label=="string"&&_.label.toLowerCase()===u.toLowerCase());return a.jsxs("div",{ref:h,className:`relative ${r}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx(Si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(_s,{ref:p,type:"text",placeholder:k?k.placeholder:s,value:u,onChange:_=>x(_.target.value),onFocus:S,onKeyDown:N,className:"pl-10 pr-20"}),C&&a.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:j,title:"Add custom search term",children:a.jsx(na,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>i(!o),children:a.jsx(En,{className:`h-4 w-4 transition-transform ${o?"rotate-180":""}`})})]}),o&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto",style:{zIndex:Dt.AUTOCOMPLETE+10},children:[E&&a.jsxs("div",{className:"p-2 border-b border-border",children:[a.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(_=>a.jsxs("button",{onClick:()=>y(_),className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center justify-between",children:[a.jsx("span",{children:_.name}),a.jsx(En,{className:"h-4 w-4"})]},_.id))]}),C&&a.jsx("div",{className:"p-2 border-b border-border",children:a.jsxs("button",{onClick:j,className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center gap-2",children:[a.jsx(na,{className:"h-4 w-4 text-primary"}),a.jsxs("span",{className:"font-medium",children:['Search for "',u,'"']}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"(Custom search)"})]})}),a.jsx("div",{className:"p-2",children:b.length===0&&!C?a.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):b.map((_,P)=>a.jsxs("button",{onClick:()=>w(_),className:`w-full text-left px-2 py-2 rounded text-sm ${P===f?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[a.jsx("div",{className:"font-medium",children:_.label}),_.description&&a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:_.description})]},_.id))})]})]})}function ba({categories:e,onSelect:t,onCustomSearch:n,className:s=""}){const r=e.find(i=>i.id==="fuzzy-search"||i.id==="keywords"),o=e.filter(i=>i.id!=="fuzzy-search"&&i.id!=="keywords");return a.jsxs("div",{className:`flex flex-wrap gap-4 justify-start ${s}`,children:[r&&a.jsx("div",{className:"flex-1 min-w-[300px]",children:a.jsx(lk,{categories:[r],onSelect:t,onCustomSearch:n,placeholder:r.placeholder,className:"w-full"})}),o.map(i=>a.jsx("div",{className:"flex-shrink-0 min-w-[200px] max-w-[300px]",children:a.jsx(Oa,{categories:[i],onSelect:t,placeholder:i.placeholder,className:"w-full"})},i.id))]})}function n8({children:e,className:t=""}){return a.jsx("div",{className:`grid grid-cols-1 lg:grid-cols-6 gap-6 ${t}`,children:e})}function s8({children:e,className:t=""}){return a.jsx("div",{className:`lg:col-span-5 ${t}`,children:e})}function r8({children:e,className:t=""}){return a.jsx("div",{className:`lg:col-span-1 ${t}`,children:a.jsx("div",{className:"sticky top-6",style:{zIndex:Dt.STICKY},children:e})})}function a8({title:e="Select an Item",description:t="Choose an item from the list to view its details"}){return a.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 text-center",children:[a.jsx(Wr,{className:"text-lg font-semibold mb-2",children:e}),a.jsx(Ze,{className:"text-muted-foreground",children:t})]})}function o8({searchCategories:e,selectedTags:t,viewMode:n="grid",onTagSelect:s,onTagRemove:r,onViewModeChange:o,children:i,className:l=""}){return a.jsxs("div",{className:`mb-8 space-y-4 ${l}`,children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(e8,{categories:e,onSelect:s,className:"w-full"})}),o&&a.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[a.jsx(G,{variant:n==="grid"?"default":"ghost",size:"sm",onClick:()=>o("grid"),className:"h-8 px-3",children:a.jsx(Ki,{className:"h-4 w-4"})}),a.jsx(G,{variant:n==="list"?"default":"ghost",size:"sm",onClick:()=>o("list"),className:"h-8 px-3",children:a.jsx(fo,{className:"h-4 w-4"})})]})]}),a.jsx(t8,{tags:t,onRemove:r,className:"justify-start"}),i&&a.jsx("div",{className:"pt-4",children:i})]})}class Ge{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.output=="string"&&Array.isArray(t.ingredients)&&Array.isArray(t.effects)}static equals(t,n){return t.name===n.name}static addComputedProperties(t){const n=t.effects.length>0,s=t.effects.length,r=t.ingredients.length,o=r>3||s>2,i=r<=2&&s<=1,l=t.effects.reduce((m,h)=>m+h.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=this.determineDifficulty(t,{ingredientCount:r,effectCount:s,isComplex:o,isSimple:i}),d=this.generateTags(t,{hasEffects:n,effectCount:s,ingredientCount:r,isComplex:o,isSimple:i,difficulty:u}),f=this.createSearchableText(t,d);return{...t,hasEffects:n,effectCount:s,ingredientCount:r,isComplex:o,isSimple:i,totalMagnitude:l,maxDuration:c,tags:d,searchableText:f,difficulty:u}}static determineDifficulty(t,n){return n.isSimple?"Simple":n.isComplex?"Complex":"Moderate"}static generateTags(t,n){const s=[];return t.category&&s.push(t.category),s.push(n.difficulty),n.hasEffects&&s.push("Has Effects"),n.ingredientCount===1?s.push("Single Ingredient"):n.ingredientCount<=3?s.push("Few Ingredients"):s.push("Many Ingredients"),n.effectCount===1?s.push("Single Effect"):n.effectCount<=2?s.push("Few Effects"):s.push("Many Effects"),t.effects.forEach(r=>{s.push(r.name)}),t.ingredients.forEach(r=>{s.push(r)}),[...new Set(s)]}static createSearchableText(t,n){const s=t.ingredients.map(o=>typeof o=="string"?o:o&&typeof o=="object"&&(o.item||o.name||o.label||o.id)||String(o));return[t.name,t.output,t.description||"",...s,...t.effects.map(o=>o.name),...t.effects.map(o=>o.description),...n].join(" ").toLowerCase()}static filterByCategory(t,n){return t.filter(s=>s.category===n)}static filterByCategories(t,n){return n.length===0?t:t.filter(s=>s.category&&n.includes(s.category))}static filterByDifficulty(t,n){return t.filter(s=>s.difficulty===n)}static filterByDifficulties(t,n){return n.length===0?t:t.filter(s=>n.includes(s.difficulty))}static filterByIngredientCount(t,n,s){return t.filter(r=>{const o=r.ingredientCount;return!(n!==null&&o<n||s!==null&&o>s)})}static filterByMagnitude(t,n,s){return t.filter(r=>{const o=r.totalMagnitude;return!(n!==null&&o<n||s!==null&&o>s)})}static filterByEffectProperties(t,n,s){return t.filter(r=>!(n!==null&&r.hasEffects!==n||s!==null&&r.isComplex!==s))}static filterByIngredients(t,n){return n.length===0?t:t.filter(s=>n.some(r=>s.ingredients.some(o=>(typeof o=="string"?o:o.item||o.name||o.label||o.id||String(o)).toLowerCase().includes(r.toLowerCase()))))}static filterByEffects(t,n){return n.length===0?t:t.filter(s=>n.some(r=>s.effects.some(o=>o.name.toLowerCase().includes(r.toLowerCase()))))}static search(t,n){if(!n.trim())return[];const s=n.toLowerCase().trim(),r=[];for(const o of t){const i=this.calculateSearchScore(o,s);if(i>0){const l=this.getMatchedFields(o,s);r.push({recipe:o,score:i,matchedFields:l})}}return r.sort((o,i)=>i.score-o.score)}static calculateSearchScore(t,n){var o;let s=0;const r=n.toLowerCase();return t.name.toLowerCase()===r&&(s+=100),t.output.toLowerCase()===r&&(s+=100),t.name.toLowerCase().includes(r)&&(s+=50),t.output.toLowerCase().includes(r)&&(s+=50),(o=t.description)!=null&&o.toLowerCase().includes(r)&&(s+=30),t.ingredients.forEach(i=>{const l=typeof i=="string"?i:i.item||i.name||i.label||i.id||String(i);l.toLowerCase()===r&&(s+=40),l.toLowerCase().includes(r)&&(s+=20)}),t.effects.forEach(i=>{i.name.toLowerCase()===r&&(s+=40),i.name.toLowerCase().includes(r)&&(s+=20),i.description.toLowerCase().includes(r)&&(s+=15)}),t.tags.forEach(i=>{i.toLowerCase()===r&&(s+=25),i.toLowerCase().includes(r)&&(s+=10)}),s}static getMatchedFields(t,n){var o;const s=[],r=n.toLowerCase();return t.name.toLowerCase().includes(r)&&s.push("name"),t.output.toLowerCase().includes(r)&&s.push("output"),(o=t.description)!=null&&o.toLowerCase().includes(r)&&s.push("description"),t.ingredients.forEach(i=>{(typeof i=="string"?i:i.item||i.name||i.label||i.id||String(i)).toLowerCase().includes(r)&&s.push("ingredients")}),t.effects.forEach(i=>{(i.name.toLowerCase().includes(r)||i.description.toLowerCase().includes(r))&&s.push("effects")}),[...new Set(s)]}static sort(t,n,s="asc"){return[...t].sort((o,i)=>{let l=0;switch(n){case"name":l=o.name.localeCompare(i.name);break;case"category":l=(o.category||"").localeCompare(i.category||"");break;case"difficulty":l=this.compareDifficulties(o.difficulty,i.difficulty);break;case"ingredientCount":l=o.ingredientCount-i.ingredientCount;break;case"effectCount":l=o.effectCount-i.effectCount;break;case"magnitude":l=o.totalMagnitude-i.totalMagnitude;break;case"duration":l=o.maxDuration-i.maxDuration;break}return s==="asc"?l:-l})}static compareDifficulties(t,n){const s={Simple:1,Moderate:2,Complex:3};return(s[t]||0)-(s[n]||0)}static getUniqueCategories(t){const n=t.map(s=>s.category).filter(s=>!!s);return[...new Set(n)].sort()}static getUniqueDifficulties(t){const n=t.map(s=>s.difficulty);return[...new Set(n)].sort((s,r)=>this.compareDifficulties(s,r))}static getUniqueEffects(t){const n=t.flatMap(s=>s.effects.map(r=>r.name));return[...new Set(n)].sort()}static getUniqueIngredients(t){const n=t.flatMap(s=>s.ingredients.map(r=>typeof r=="string"?r:r&&typeof r=="object"&&(r.item||r.name||r.label||r.id)||String(r)));return[...new Set(n)].filter(s=>s&&s!=="[object Object]").sort()}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static applyFilters(t,n){let s=[...t];return n.searchTerm.trim()&&(s=this.search(s,n.searchTerm).map(o=>o.recipe)),n.categories.length>0&&(s=this.filterByCategories(s,n.categories)),n.difficulties.length>0&&(s=this.filterByDifficulties(s,n.difficulties)),n.ingredients.length>0&&(s=this.filterByIngredients(s,n.ingredients)),n.effects.length>0&&(s=this.filterByEffects(s,n.effects)),s=this.filterByEffectProperties(s,n.hasEffects,n.isComplex),s=this.filterByIngredientCount(s,n.minIngredientCount,n.maxIngredientCount),s=this.filterByMagnitude(s,n.minMagnitude,n.maxMagnitude),s}static getStatistics(t){const n=t.length,s=t.filter(j=>j.type==="food").length,r=t.filter(j=>j.type==="alcohol").length,o={};t.forEach(j=>{j.category&&(o[j.category]=(o[j.category]||0)+1)});const i={};t.forEach(j=>{i[j.difficulty]=(i[j.difficulty]||0)+1});const l={};t.forEach(j=>{j.effects.forEach(N=>{l[N.name]=(l[N.name]||0)+1})});const c=t.reduce((j,N)=>j+N.ingredientCount,0),u=t.reduce((j,N)=>j+N.effectCount,0),d=n>0?c/n:0,f=n>0?u/n:0,m=t.reduce((j,N)=>j+N.totalMagnitude,0),h=t.reduce((j,N)=>j+N.maxDuration,0),p=n>0?m/n:0,v=n>0?h/n:0,b={};t.forEach(j=>{j.ingredients.forEach(N=>{b[N]=(b[N]||0)+1})});const x=Object.entries(b).map(([j,N])=>({name:j,count:N})).sort((j,N)=>N.count-j.count).slice(0,10),y={};t.forEach(j=>{j.effects.forEach(N=>{y[N.name]=(y[N.name]||0)+1})});const w=Object.entries(y).map(([j,N])=>({name:j,count:N})).sort((j,N)=>N.count-j.count).slice(0,10);return{totalRecipes:n,foodRecipes:s,alcoholRecipes:r,recipesByCategory:o,recipesByDifficulty:i,recipesByEffect:l,averageIngredientCount:d,averageEffectCount:f,averageMagnitude:p,averageDuration:v,topEffects:w,topIngredients:x}}static getEffectComparisons(t,n){const s={};return n.forEach(r=>{r.effects.forEach(o=>{s[o.name]||(s[o.name]={magnitudeSum:0,durationSum:0,count:0}),s[o.name].magnitudeSum+=o.magnitude,s[o.name].durationSum+=o.duration,s[o.name].count+=1})}),t.effects.map(r=>{const o=s[r.name],i=o.count>0?o.magnitudeSum/o.count:0,l=o.count>0?o.durationSum/o.count:0,c=r.magnitude-i,u=r.duration-l;return{name:r.name,magnitude:{value:r.magnitude,mean:i,difference:c,percentage:i>0?c/i*100:0},duration:{value:r.duration,mean:l,difference:u,percentage:l>0?u/l*100:0}}})}}const $a=class $a{constructor(){Ve(this,"cache",null);Ve(this,"lastFetch",0);Ve(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return $a.instance||($a.instance=new $a),$a.instance}async loadRecipes(){var t;if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const n=ls("data/cookbook-wiki.json"),s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch recipes: ${s.status} ${s.statusText}`);const r=await s.json(),o=[];if(console.log("RecipeDataProvider: Raw data keys:",Object.keys(r)),r.food&&Array.isArray(r.food)?(console.log("RecipeDataProvider: Found",r.food.length,"food recipes"),o.push(...r.food)):r.food&&typeof r.food=="object"&&(console.log("RecipeDataProvider: Food section is an object, checking for recipes property"),r.food.recipes&&Array.isArray(r.food.recipes)&&(console.log("RecipeDataProvider: Found",r.food.recipes.length,"food recipes in recipes property"),o.push(...r.food.recipes))),r.alcohol&&Array.isArray(r.alcohol)?(console.log("RecipeDataProvider: Found",r.alcohol.length,"alcohol recipes"),o.push(...r.alcohol)):r.alcohol&&typeof r.alcohol=="object"&&(console.log("RecipeDataProvider: Alcohol section is an object, checking for recipes property"),r.alcohol.recipes&&Array.isArray(r.alcohol.recipes)&&(console.log("RecipeDataProvider: Found",r.alcohol.recipes.length,"alcohol recipes in recipes property"),o.push(...r.alcohol.recipes))),o.length===0){console.log("RecipeDataProvider: No recipes found in food/alcohol sections, trying fallback");const u=((t=r.food)==null?void 0:t.recipes)||r.recipes||r;Array.isArray(u)&&(console.log("RecipeDataProvider: Found",u.length,"recipes in fallback data"),o.push(...u))}if(!Array.isArray(o)||o.length===0)throw new Error("RecipeDataProvider: No valid recipes found in data structure");const i=[];let l=0,c=0;for(const u of o)if(Ge.isValid(u)){const d=Ge.addComputedProperties(u);i.push(d),l++}else console.warn("RecipeDataProvider: Invalid recipe data:",u),c++;return this.cache=i,this.lastFetch=Date.now(),console.log(`RecipeDataProvider: Loaded ${l} valid recipes, ${c} invalid recipes`),i}catch(n){throw console.error("RecipeDataProvider: Error loading recipes:",n),n}}async getRecipeData(){console.log("RecipeDataProvider: getRecipeData called");const t=await this.loadRecipes();console.log("RecipeDataProvider: Getting statistics for",t.length,"recipes");const n=Ge.getStatistics(t),s={recipes:t,totalCount:n.totalRecipes,categories:Ge.getUniqueCategories(t),effects:Ge.getUniqueEffects(t),ingredients:Ge.getUniqueIngredients(t),lastUpdated:new Date().toISOString()};return console.log("RecipeDataProvider: getRecipeData result:",{recipesCount:s.recipes.length,totalCount:s.totalCount,categories:s.categories,effects:s.effects,ingredients:s.ingredients}),s}async getRecipeByName(t){return(await this.loadRecipes()).find(s=>s.name===t)||null}async getRecipesByCategory(t){const n=await this.loadRecipes();return Ge.filterByCategory(n,t)}async getRecipesByDifficulty(t){const n=await this.loadRecipes();return Ge.filterByDifficulty(n,t)}async getRecipesByIngredient(t){const n=await this.loadRecipes();return Ge.filterByIngredients(n,[t])}async getRecipesByEffect(t){const n=await this.loadRecipes();return Ge.filterByEffects(n,[t])}async searchRecipes(t){const n=await this.loadRecipes();return Ge.search(n,t).map(r=>r.recipe)}async getStatistics(){const t=await this.loadRecipes();return Ge.getStatistics(t)}clearCache(){this.cache=null,this.lastFetch=0,console.log("RecipeDataProvider: Cache cleared")}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isExpired:this.cache!==null&&Date.now()-this.lastFetch>=this.CACHE_DURATION,timeUntilExpiry:this.cache?Math.max(0,this.CACHE_DURATION-(Date.now()-this.lastFetch)):0}}};Ve($a,"instance");let Bg=$a;const nr=cs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const r=await Bg.getInstance().loadRecipes();e({data:r,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load recipes",loading:!1})}}},getById:n=>t().data.find(r=>r.name===n),getByName:n=>t().data.find(r=>r.name===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(o=>{var i,l,c,u,d,f;return o.name.toLowerCase().includes(r)||o.output.toLowerCase().includes(r)||((i=o.description)==null?void 0:i.toLowerCase().includes(r))||((l=o.category)==null?void 0:l.toLowerCase().includes(r))||((c=o.difficulty)==null?void 0:c.toLowerCase().includes(r))||((u=o.tags)==null?void 0:u.some(m=>m.toLowerCase().includes(r)))||((d=o.ingredients)==null?void 0:d.some(m=>m.toLowerCase().includes(r)))||((f=o.effects)==null?void 0:f.some(m=>{var h;return m.name.toLowerCase().includes(r)||((h=m.description)==null?void 0:h.toLowerCase().includes(r))}))})},getByCategory:n=>t().data.filter(r=>r.category===n),getByDifficulty:n=>t().data.filter(r=>r.difficulty===n),getByIngredient:n=>t().data.filter(r=>r.ingredients.some(o=>o.toLowerCase().includes(n.toLowerCase()))),getByEffect:n=>t().data.filter(r=>r.effects.some(o=>o.name.toLowerCase().includes(n.toLowerCase())))})),i8=Object.freeze(Object.defineProperty({__proto__:null,useRecipesStore:nr},Symbol.toStringTag,{value:"Module"}));class _a{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.editorId=="string"&&typeof t.school=="string"&&typeof t.level=="string"&&typeof t.magickaCost=="number"&&Array.isArray(t.effects)}static equals(t,n){return t.editorId===n.editorId}static addComputedProperties(t){const n=t.effects.length>0,s=t.effects.length,r=t.effects.some(m=>m.area>0),o=t.effects.some(m=>m.duration>0),i=t.effects.every(m=>m.duration===0),l=t.effects.reduce((m,h)=>m+h.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=Math.max(...t.effects.map(m=>m.area),0),d=this.generateTags(t,{hasEffects:n,isAreaSpell:r,isDurationSpell:o,isInstantSpell:i}),f=this.createSearchableText(t,d);return{...t,hasEffects:n,effectCount:s,isAreaSpell:r,isDurationSpell:o,isInstantSpell:i,totalMagnitude:l,maxDuration:c,maxArea:u,tags:d,searchableText:f}}static generateTags(t,n){const s=[];return s.push(t.school),s.push(t.level),n.hasEffects&&s.push("Has Effects"),n.isAreaSpell&&s.push("Area Effect"),n.isDurationSpell&&s.push("Duration"),n.isInstantSpell&&s.push("Instant"),t.magickaCost===0?s.push("Free"):t.magickaCost<=50?s.push("Low Cost"):t.magickaCost<=150?s.push("Medium Cost"):s.push("High Cost"),t.effects.forEach(r=>{r.name.toLowerCase().includes("fire")&&s.push("Fire"),(r.name.toLowerCase().includes("frost")||r.name.toLowerCase().includes("ice"))&&s.push("Frost"),(r.name.toLowerCase().includes("shock")||r.name.toLowerCase().includes("lightning"))&&s.push("Shock"),(r.name.toLowerCase().includes("heal")||r.name.toLowerCase().includes("restore"))&&s.push("Healing"),(r.name.toLowerCase().includes("conjure")||r.name.toLowerCase().includes("summon"))&&s.push("Conjuration"),(r.name.toLowerCase().includes("fear")||r.name.toLowerCase().includes("calm"))&&s.push("Illusion"),(r.name.toLowerCase().includes("paralyze")||r.name.toLowerCase().includes("slow"))&&s.push("Control")}),[...new Set(s)]}static createSearchableText(t,n){return[t.name,t.school,t.level,t.description,...n,...t.effects.map(r=>r.name),...t.effects.map(r=>r.description)].join(" ").toLowerCase()}static filterBySchool(t,n){return t.filter(s=>s.school===n)}static filterByLevel(t,n){return t.filter(s=>s.level===n)}static filterBySchools(t,n){return n.length===0?t:t.filter(s=>n.includes(s.school))}static filterByLevels(t,n){return n.length===0?t:t.filter(s=>n.includes(s.level))}static filterByMagickaCost(t,n,s){return t.filter(r=>!(n!==null&&r.magickaCost<n||s!==null&&r.magickaCost>s))}static filterByMagnitude(t,n,s){return t.filter(r=>!(n!==null&&r.totalMagnitude<n||s!==null&&r.totalMagnitude>s))}static filterByEffectProperties(t,n,s,r){return t.filter(o=>!(n!==null&&o.hasEffects!==n||s!==null&&o.isAreaSpell!==s||r!==null&&o.isDurationSpell!==r))}static search(t,n){if(!n.trim())return t.map(o=>({spell:o,score:1,matchedFields:[]}));const s=n.toLowerCase(),r=[];return t.forEach(o=>{let i=0;const l=[];o.name.toLowerCase()===s?(i+=100,l.push("name")):o.name.toLowerCase().includes(s)&&(i+=50,l.push("name")),o.school.toLowerCase()===s?(i+=30,l.push("school")):o.school.toLowerCase().includes(s)&&(i+=15,l.push("school")),o.level.toLowerCase()===s?(i+=25,l.push("level")):o.level.toLowerCase().includes(s)&&(i+=10,l.push("level")),o.description.toLowerCase().includes(s)&&(i+=5,l.push("description")),o.tags.forEach(c=>{c.toLowerCase().includes(s)&&(i+=3,l.push("tags"))}),o.effects.forEach(c=>{c.name.toLowerCase().includes(s)&&(i+=8,l.push("effects")),c.description.toLowerCase().includes(s)&&(i+=4,l.push("effects"))}),i>0&&r.push({spell:o,score:i,matchedFields:[...new Set(l)]})}),r.sort((o,i)=>i.score-o.score)}static sort(t,n,s="asc"){return[...t].sort((o,i)=>{let l=0;switch(n){case"name":l=o.name.localeCompare(i.name);break;case"school":l=o.school.localeCompare(i.school);break;case"level":l=this.compareLevels(o.level,i.level);break;case"magickaCost":l=o.magickaCost-i.magickaCost;break;case"magnitude":l=o.totalMagnitude-i.totalMagnitude;break;case"duration":l=o.maxDuration-i.maxDuration;break}return s==="desc"?-l:l})}static compareLevels(t,n){const s=["Novice","Apprentice","Adept","Expert","Master"],r=s.indexOf(t),o=s.indexOf(n);return r===-1&&o===-1?0:r===-1?1:o===-1?-1:r-o}static getUniqueSchools(t){return[...new Set(t.map(n=>n.school))].sort()}static getUniqueLevels(t){const n=[...new Set(t.map(s=>s.level))];return this.sortLevels(n)}static sortLevels(t){const n=["Novice","Apprentice","Adept","Expert","Master"];return t.sort((s,r)=>{const o=n.indexOf(s),i=n.indexOf(r);return o===-1&&i===-1?0:o===-1?1:i===-1?-1:o-i})}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static applyFilters(t,n){let s=[...t];return n.schools.length>0&&(s=this.filterBySchools(s,n.schools)),n.levels.length>0&&(s=this.filterByLevels(s,n.levels)),s=this.filterByEffectProperties(s,n.hasEffects,n.isAreaSpell,n.isDurationSpell),s=this.filterByMagickaCost(s,n.minMagickaCost,n.maxMagickaCost),s=this.filterByMagnitude(s,n.minMagnitude,n.maxMagnitude),n.searchTerm&&(s=this.search(s,n.searchTerm).map(o=>o.spell)),s}static getStatistics(t){const n=this.getUniqueSchools(t),s=this.getUniqueLevels(t),r=this.getUniqueTags(t),o=t.length,i=t.filter(m=>m.hasEffects).length,l=t.filter(m=>m.isAreaSpell).length,c=t.filter(m=>m.isDurationSpell).length,u=t.filter(m=>m.magickaCost===0).length,d=t.length>0?t.reduce((m,h)=>m+h.magickaCost,0)/t.length:0,f=t.length>0?t.reduce((m,h)=>m+h.totalMagnitude,0)/t.length:0;return{totalSpells:o,spellsWithEffects:i,areaSpells:l,durationSpells:c,freeSpells:u,avgMagickaCost:Math.round(d),avgMagnitude:Math.round(f),schools:n,levels:s,tags:r}}}const Pa=class Pa{constructor(){Ve(this,"cache",null);Ve(this,"lastFetch",0);Ve(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return Pa.instance||(Pa.instance=new Pa),Pa.instance}async loadSpells(){if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const t=ls("data/player_spells.json"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch spells: ${n.status} ${n.statusText}`);const s=await n.json(),r=[];let o=0,i=0;for(const l of s)if(_a.isValid(l)){const c=_a.addComputedProperties(l);r.push(c),o++}else console.warn("SpellDataProvider: Invalid spell data:",l),i++;return this.cache=r,this.lastFetch=Date.now(),r}catch(t){throw console.error("SpellDataProvider: Error loading spells:",t),t}}async getSpellData(){console.log("SpellDataProvider: getSpellData called");const t=await this.loadSpells();console.log("SpellDataProvider: Getting statistics for",t.length,"spells");const n=_a.getStatistics(t),s={spells:t,totalCount:n.totalSpells,schools:n.schools,levels:n.levels,lastUpdated:new Date().toISOString()};return console.log("SpellDataProvider: getSpellData result:",{spellsCount:s.spells.length,totalCount:s.totalCount,schools:s.schools,levels:s.levels}),s}async getSpellByEditorId(t){return(await this.loadSpells()).find(s=>s.editorId===t)||null}async getSpellsBySchool(t){const n=await this.loadSpells();return _a.filterBySchool(n,t)}async getSpellsByLevel(t){const n=await this.loadSpells();return _a.filterByLevel(n,t)}async searchSpells(t){const n=await this.loadSpells();return _a.search(n,t).map(r=>r.spell)}async getStatistics(){const t=await this.loadSpells();return _a.getStatistics(t)}clearCache(){console.log("SpellDataProvider: Clearing cache"),this.cache=null,this.lastFetch=0}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isValid:this.isCacheValid()}}};Ve(Pa,"instance");let Xd=Pa;const l8=Object.freeze(Object.defineProperty({__proto__:null,SpellDataProvider:Xd},Symbol.toStringTag,{value:"Module"})),qo=cs((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const r=await Xd.getInstance().loadSpells();e({data:r,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load spells",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),getByEditorId:n=>t().data.find(r=>r.editorId===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(o=>{var i,l,c,u,d;return o.name.toLowerCase().includes(r)||((i=o.description)==null?void 0:i.toLowerCase().includes(r))||((l=o.school)==null?void 0:l.toLowerCase().includes(r))||((c=o.level)==null?void 0:c.toLowerCase().includes(r))||((u=o.tags)==null?void 0:u.some(f=>f.toLowerCase().includes(r)))||((d=o.effects)==null?void 0:d.some(f=>{var m;return f.name.toLowerCase().includes(r)||((m=f.description)==null?void 0:m.toLowerCase().includes(r))}))})},getBySchool:n=>t().data.filter(r=>r.school===n),getByLevel:n=>t().data.filter(r=>r.level===n)}));function c8(){const{data:e,loading:t,error:n}=po();return{data:e.length>0?e:null,loading:t,error:n}}function u8(){const{data:e,loading:t,error:n}=xo();return{data:e.length>0?e:null,loading:t,error:n}}function ck(){const{data:e,loading:t,error:n}=rl();return{data:e.length>0?e:null,loading:t,error:n}}function d8(){const{data:e,loading:t,error:n}=go();return{data:e.length>0?e:null,loading:t,error:n}}function f8(){const{data:e,loading:t,error:n}=sl();return{data:e.length>0?e:null,loading:t,error:n}}function g0(){const{data:e,loading:t,error:n}=ho();return{data:e.length>0?e:null,loading:t,error:n}}function he({children:e,className:t,expanded:n,onToggle:s,disableHover:r=!1,hideChevron:o=!1}){let i,l,c,u;L.Children.forEach(e,v=>{L.isValidElement(v)&&(v.type===he.Header&&(i=v),v.type===he.Summary&&(l=v),v.type===he.Footer&&(c=v),v.type===he.Details&&(u=v))});const[d,f]=g.useState(!1),m=n!==void 0?n:d,h=s||(()=>f(v=>!v)),p=r?"":"hover:shadow-md hover:scale-[1.02]";return a.jsxs("div",{className:H("rounded-lg border bg-background shadow-sm transition-all duration-200 flex flex-col",p,t),children:[i&&L.cloneElement(i,{onClick:h,expanded:m,hideChevron:o}),a.jsxs("div",{className:"flex-1",children:[l,m&&u]}),c]})}he.Header=function({children:t,className:n,onClick:s,expanded:r,hideChevron:o=!1}){const i=()=>{s==null||s()};return a.jsxs("div",{className:H("flex items-center gap-3 px-4 py-3 bg-muted/30 cursor-pointer select-none hover:bg-muted/50 transition-colors duration-200 rounded-t-lg",r&&"bg-muted/50",n),onClick:i,tabIndex:0,role:"button","aria-expanded":r,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),i())},children:[t,!o&&a.jsx("span",{className:H("ml-auto transition-transform duration-200 text-muted-foreground",r?"rotate-180":""),children:a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:a.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})})]})};he.Summary=function({children:t,className:n}){return a.jsx("div",{className:H("px-4 py-2 space-y-3",n),children:t})};he.Footer=function({children:t,className:n}){return a.jsx("div",{className:H("px-4 py-2",n),children:t})};he.Details=function({children:t,className:n}){return a.jsx("div",{className:H("px-4 py-4 space-y-4 bg-background rounded-b-lg",n),children:t})};const m8={race:{Human:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Elf:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Beast:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},religion:{},trait:{},destiny:{}},h8={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},g8="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function p8({category:e,categoryType:t,size:n="md",className:s}){const o=m8[t][e]||g8;return a.jsx(K,{variant:"outline",className:H(o,h8[n],"font-medium transition-colors",s),children:e})}const x8={race:{Altmer:"altmer.svg",Argonian:"argonian.svg",Bosmer:"woodelf.svg",Breton:"breton.svg",Dunmer:"dunmer.svg",Imperial:"imperial.svg",Khajiit:"khajit.svg",Nord:"nord.svg",Orsimer:"orc.svg",Redguard:"redguard.svg"},religion:{},trait:{},destiny:{},birthsign:{Warrior:"Warrior.svg",Lady:"Lady.svg",Lord:"Lord.svg",Steed:"Steed.svg",Mage:"Mage.svg",Apprentice:"Apprentice.svg",Atronach:"Atronach.svg",Ritual:"Ritual.svg",Thief:"Thief.svg",Lover:"Lover.svg",Shadow:"Shadow.svg",Tower:"Tower.svg",Serpent:"Serpent.svg"}},db={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-16 h-16","2xl":"w-16 h-16","3xl":"w-24 h-24","4xl":"w-32 h-32"},v8={sm:"text-sm",md:"text-lg",lg:"text-xl",xl:"text-2xl","2xl":"text-3xl","3xl":"text-3xl","4xl":"text-4xl"};function uk({entityName:e,entityType:t,size:n="md",className:s,imageClassName:r}){const i=x8[t][e],[l,c]=L.useState(!1);return!i||l?a.jsx("div",{className:H("bg-white dark:bg-white text-black dark:text-black rounded-full flex items-center justify-center font-bold",db[n],s),children:a.jsx("span",{className:H(v8[n]),children:e.charAt(0)})}):a.jsx("div",{className:H("rounded-full overflow-hidden flex items-center justify-center","bg-white dark:bg-white",db[n],s),children:a.jsx("img",{src:ls(`assets/${t==="birthsign"?"sign-avatar":`${t}-avatar`}/${i}`),alt:`${e} avatar`,className:H("w-full h-full object-contain",r),onError:()=>c(!0),loading:"lazy"})})}function y8({isExpanded:e,onToggle:t,className:n,leftControls:s,header:r,collapsedContent:o,expandedContent:i,actionArea:l,children:c}){return c?a.jsx("div",{className:H("rounded-lg border bg-background shadow-sm transition-all",n),children:c}):a.jsxs("div",{className:H("rounded-lg border bg-background shadow-sm transition-all group",e?"ring-2 ring-skyrim-gold/60":"",n),children:[a.jsxs("div",{className:"flex items-start",children:[s&&a.jsx("div",{className:"mr-2 flex-shrink-0",children:s}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r&&a.jsx("div",{className:"flex-1 min-w-0",children:r}),a.jsxs("button",{type:"button",onClick:t,"aria-expanded":e,className:"ml-2 p-1 rounded hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-skyrim-gold",tabIndex:0,children:[a.jsx("span",{className:"sr-only",children:e?"Collapse":"Expand"}),a.jsx("svg",{className:H("h-4 w-4 transition-transform",e?"rotate-90":""),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:a.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})}),l&&a.jsx("div",{className:"ml-2 flex-shrink-0",children:l})]}),o&&a.jsx("div",{className:"mt-2",children:o}),e&&i&&a.jsx("div",{className:"mt-4",children:i})]})}function Jc({options:e,onSelect:t,placeholder:n="Search...",className:s="",disabled:r=!1,searchQuery:o,onSearchQueryChange:i,renderOption:l,emptyMessage:c="No options found",maxHeight:u="max-h-96",showClearButton:d=!0,showToggleButton:f=!0}){const[m,h]=g.useState(!1),[p,v]=g.useState(""),[b,x]=g.useState(-1),y=g.useRef(null),w=g.useRef(null),j=o??p,N=i??v;g.useEffect(()=>{const $=T=>{y.current&&!y.current.contains(T.target)&&(h(!1),x(-1))};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const S=$=>{N($),h(!0),x(-1)},k=$=>{t($),N(""),h(!1),x(-1)},E=$=>{$.key==="ArrowDown"?($.preventDefault(),x(T=>Math.min(T+1,e.length-1))):$.key==="ArrowUp"?($.preventDefault(),x(T=>Math.max(T-1,-1))):$.key==="Enter"?($.preventDefault(),b>=0&&e[b]&&k(e[b])):$.key==="Escape"&&(h(!1),x(-1))},C=()=>{h(!0)},_=()=>{var $;N(""),($=w.current)==null||$.focus()},P=()=>{var $;h(!m),m||($=w.current)==null||$.focus()},O=($,T)=>a.jsxs("div",{className:"flex items-center gap-3",children:[$.icon&&a.jsx("div",{className:"flex-shrink-0",children:$.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium truncate",children:$.label}),$.badge&&a.jsx("div",{className:"flex-shrink-0",children:$.badge})]}),$.description&&a.jsx(De,{text:$.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return a.jsxs("div",{ref:y,className:H("relative",s),children:[a.jsxs("div",{className:"relative",children:[a.jsx(Si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(_s,{ref:w,type:"text",placeholder:n,value:j,onChange:$=>S($.target.value),onFocus:C,onKeyDown:E,className:"pl-10 pr-20",disabled:r}),d&&j&&a.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted",onClick:_,disabled:r,children:a.jsx(Bt,{className:"h-4 w-4"})}),f&&a.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:P,disabled:r,children:a.jsx(En,{className:H("h-4 w-4 transition-transform",m&&"rotate-180")})})]}),m&&a.jsx("div",{className:H("absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",u),style:{zIndex:Dt.AUTOCOMPLETE+10},children:a.jsx("div",{className:"p-2",children:e.length===0?a.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:c}):e.map(($,T)=>a.jsx("button",{onClick:()=>k($),className:H("w-full text-left px-3 py-3 rounded-lg text-sm transition-all duration-200 cursor-pointer",T===b?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"),disabled:r,children:l?l($,T===b):O($)},$.id))})})]})}function dk(e="(max-width: 640px)"){const t=()=>typeof window>"u"||typeof window.matchMedia>"u"?!1:window.matchMedia(e).matches,[n,s]=g.useState(t);return g.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia>"u")return;const r=window.matchMedia(e),o=()=>s(r.matches);return s(r.matches),r.addEventListener("change",o),()=>{r.removeEventListener("change",o)}},[e]),n}function p0({open:e,onOpenChange:t,title:n,description:s,side:r="right",className:o,mobileQuery:i="(max-width: 640px)",resetKey:l,children:c}){const u=dk(i),d=g.useRef(null);g.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[e,u]),g.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[l]);const f=H("flex flex-col",u?"inset-0 top-0 left-0 right-0 bottom-0 h-[100dvh] max-h-[100dvh] w-[100vw] p-0 rounded-none border-0 overflow-hidden":"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0 overflow-y-auto bg-background",o);return a.jsx(Ci,{open:e,onOpenChange:t,children:a.jsxs(Ka,{side:u?"bottom":r,className:f,children:[(n||s)&&a.jsx("div",{className:H("sticky top-0 z-10 bg-background border-b","p-4"),children:a.jsxs(Ei,{className:"p-0",children:[n&&a.jsx(_i,{children:n}),s&&a.jsx(Hx,{children:s})]})}),a.jsx("div",{ref:d,className:H("flex-1 overflow-y-auto overscroll-contain",u?"p-4":"p-6"),children:c})]})})}function x0({birthsignName:e,size:t="md",className:n}){return a.jsx(uk,{entityName:e,entityType:"birthsign",size:t,className:n,imageClassName:"scale-125"})}function yr(e){return Array.isArray?Array.isArray(e):hk(e)==="[object Array]"}function b8(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function w8(e){return e==null?"":b8(e)}function Cs(e){return typeof e=="string"}function fk(e){return typeof e=="number"}function j8(e){return e===!0||e===!1||N8(e)&&hk(e)=="[object Boolean]"}function mk(e){return typeof e=="object"}function N8(e){return mk(e)&&e!==null}function yn(e){return e!=null}function hh(e){return!e.trim().length}function hk(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const S8="Incorrect 'index' type",k8=e=>`Invalid value for key ${e}`,C8=e=>`Pattern length exceeds max of ${e}.`,E8=e=>`Missing ${e} property in key`,_8=e=>`Property 'weight' in key '${e}' must be a positive integer`,fb=Object.prototype.hasOwnProperty;class A8{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(s=>{let r=gk(s);this._keys.push(r),this._keyMap[r.id]=r,n+=r.weight}),this._keys.forEach(s=>{s.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function gk(e){let t=null,n=null,s=null,r=1,o=null;if(Cs(e)||yr(e))s=e,t=mb(e),n=Ig(e);else{if(!fb.call(e,"name"))throw new Error(E8("name"));const i=e.name;if(s=i,fb.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(_8(i));t=mb(i),n=Ig(i),o=e.getFn}return{path:t,id:n,weight:r,src:s,getFn:o}}function mb(e){return yr(e)?e:e.split(".")}function Ig(e){return yr(e)?e.join("."):e}function T8(e,t){let n=[],s=!1;const r=(o,i,l)=>{if(yn(o))if(!i[l])n.push(o);else{let c=i[l];const u=o[c];if(!yn(u))return;if(l===i.length-1&&(Cs(u)||fk(u)||j8(u)))n.push(w8(u));else if(yr(u)){s=!0;for(let d=0,f=u.length;d<f;d+=1)r(u[d],i,l+1)}else i.length&&r(u,i,l+1)}};return r(e,Cs(t)?t.split("."):t,0),s?n:n[0]}const M8={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},R8={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},D8={location:0,threshold:.6,distance:100},z8={useExtendedSearch:!1,getFn:T8,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var me={...R8,...M8,...D8,...z8};const L8=/[^ ]+/g;function $8(e=1,t=3){const n=new Map,s=Math.pow(10,t);return{get(r){const o=r.match(L8).length;if(n.has(o))return n.get(o);const i=1/Math.pow(o,.5*e),l=parseFloat(Math.round(i*s)/s);return n.set(o,l),l},clear(){n.clear()}}}class v0{constructor({getFn:t=me.getFn,fieldNormWeight:n=me.fieldNormWeight}={}){this.norm=$8(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Cs(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Cs(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!yn(t)||hh(t))return;let s={v:t,i:n,n:this.norm.get(t)};this.records.push(s)}_addObject(t,n){let s={i:n,$:{}};this.keys.forEach((r,o)=>{let i=r.getFn?r.getFn(t):this.getFn(t,r.path);if(yn(i)){if(yr(i)){let l=[];const c=[{nestedArrIndex:-1,value:i}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(yn(d))if(Cs(d)&&!hh(d)){let f={v:d,i:u,n:this.norm.get(d)};l.push(f)}else yr(d)&&d.forEach((f,m)=>{c.push({nestedArrIndex:m,value:f})})}s.$[o]=l}else if(Cs(i)&&!hh(i)){let l={v:i,n:this.norm.get(i)};s.$[o]=l}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function pk(e,t,{getFn:n=me.getFn,fieldNormWeight:s=me.fieldNormWeight}={}){const r=new v0({getFn:n,fieldNormWeight:s});return r.setKeys(e.map(gk)),r.setSources(t),r.create(),r}function P8(e,{getFn:t=me.getFn,fieldNormWeight:n=me.fieldNormWeight}={}){const{keys:s,records:r}=e,o=new v0({getFn:t,fieldNormWeight:n});return o.setKeys(s),o.setIndexRecords(r),o}function Lu(e,{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:r=me.distance,ignoreLocation:o=me.ignoreLocation}={}){const i=t/e.length;if(o)return i;const l=Math.abs(s-n);return r?i+l/r:l?1:i}function O8(e=[],t=me.minMatchCharLength){let n=[],s=-1,r=-1,o=0;for(let i=e.length;o<i;o+=1){let l=e[o];l&&s===-1?s=o:!l&&s!==-1&&(r=o-1,r-s+1>=t&&n.push([s,r]),s=-1)}return e[o-1]&&o-s>=t&&n.push([s,o-1]),n}const La=32;function B8(e,t,n,{location:s=me.location,distance:r=me.distance,threshold:o=me.threshold,findAllMatches:i=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,includeMatches:c=me.includeMatches,ignoreLocation:u=me.ignoreLocation}={}){if(t.length>La)throw new Error(C8(La));const d=t.length,f=e.length,m=Math.max(0,Math.min(s,f));let h=o,p=m;const v=l>1||c,b=v?Array(f):[];let x;for(;(x=e.indexOf(t,p))>-1;){let k=Lu(t,{currentLocation:x,expectedLocation:m,distance:r,ignoreLocation:u});if(h=Math.min(k,h),p=x+d,v){let E=0;for(;E<d;)b[x+E]=1,E+=1}}p=-1;let y=[],w=1,j=d+f;const N=1<<d-1;for(let k=0;k<d;k+=1){let E=0,C=j;for(;E<C;)Lu(t,{errors:k,currentLocation:m+C,expectedLocation:m,distance:r,ignoreLocation:u})<=h?E=C:j=C,C=Math.floor((j-E)/2+E);j=C;let _=Math.max(1,m-C+1),P=i?f:Math.min(m+C,f)+d,O=Array(P+2);O[P+1]=(1<<k)-1;for(let T=P;T>=_;T-=1){let z=T-1,A=n[e.charAt(z)];if(v&&(b[z]=+!!A),O[T]=(O[T+1]<<1|1)&A,k&&(O[T]|=(y[T+1]|y[T])<<1|1|y[T+1]),O[T]&N&&(w=Lu(t,{errors:k,currentLocation:z,expectedLocation:m,distance:r,ignoreLocation:u}),w<=h)){if(h=w,p=z,p<=m)break;_=Math.max(1,2*m-p)}}if(Lu(t,{errors:k+1,currentLocation:m,expectedLocation:m,distance:r,ignoreLocation:u})>h)break;y=O}const S={isMatch:p>=0,score:Math.max(.001,w)};if(v){const k=O8(b,l);k.length?c&&(S.indices=k):S.isMatch=!1}return S}function I8(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<s-n-1}return t}const Wd=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class xk{constructor(t,{location:n=me.location,threshold:s=me.threshold,distance:r=me.distance,includeMatches:o=me.includeMatches,findAllMatches:i=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,isCaseSensitive:c=me.isCaseSensitive,ignoreDiacritics:u=me.ignoreDiacritics,ignoreLocation:d=me.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d},t=c?t:t.toLowerCase(),t=u?Wd(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(h,p)=>{this.chunks.push({pattern:h,alphabet:I8(h),startIndex:p})},m=this.pattern.length;if(m>La){let h=0;const p=m%La,v=m-p;for(;h<v;)f(this.pattern.substr(h,La),h),h+=La;if(p){const b=m-La;f(this.pattern.substr(b),b)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r}=this.options;if(t=n?t:t.toLowerCase(),t=s?Wd(t):t,this.pattern===t){let v={isMatch:!0,score:0};return r&&(v.indices=[[0,t.length-1]]),v}const{location:o,distance:i,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:d}=this.options;let f=[],m=0,h=!1;this.chunks.forEach(({pattern:v,alphabet:b,startIndex:x})=>{const{isMatch:y,score:w,indices:j}=B8(t,v,b,{location:o+x,distance:i,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:r,ignoreLocation:d});y&&(h=!0),m+=w,y&&j&&(f=[...f,...j])});let p={isMatch:h,score:h?m/this.chunks.length:1};return h&&r&&(p.indices=f),p}}class wa{constructor(t){this.pattern=t}static isMultiMatch(t){return hb(t,this.multiRegex)}static isSingleMatch(t){return hb(t,this.singleRegex)}search(){}}function hb(e,t){const n=e.match(t);return n?n[1]:null}class H8 extends wa{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class U8 extends wa{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class F8 extends wa{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class V8 extends wa{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class q8 extends wa{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class G8 extends wa{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class vk extends wa{constructor(t,{location:n=me.location,threshold:s=me.threshold,distance:r=me.distance,includeMatches:o=me.includeMatches,findAllMatches:i=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,isCaseSensitive:c=me.isCaseSensitive,ignoreDiacritics:u=me.ignoreDiacritics,ignoreLocation:d=me.ignoreLocation}={}){super(t),this._bitapSearch=new xk(t,{location:n,threshold:s,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class yk extends wa{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,s;const r=[],o=this.pattern.length;for(;(s=t.indexOf(this.pattern,n))>-1;)n=s+o,r.push([s,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const Hg=[H8,yk,F8,V8,G8,q8,U8,vk],gb=Hg.length,Z8=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Y8="|";function X8(e,t={}){return e.split(Y8).map(n=>{let s=n.trim().split(Z8).filter(o=>o&&!!o.trim()),r=[];for(let o=0,i=s.length;o<i;o+=1){const l=s[o];let c=!1,u=-1;for(;!c&&++u<gb;){const d=Hg[u];let f=d.isMultiMatch(l);f&&(r.push(new d(f,t)),c=!0)}if(!c)for(u=-1;++u<gb;){const d=Hg[u];let f=d.isSingleMatch(l);if(f){r.push(new d(f,t));break}}}return r})}const W8=new Set([vk.type,yk.type]);class K8{constructor(t,{isCaseSensitive:n=me.isCaseSensitive,ignoreDiacritics:s=me.ignoreDiacritics,includeMatches:r=me.includeMatches,minMatchCharLength:o=me.minMatchCharLength,ignoreLocation:i=me.ignoreLocation,findAllMatches:l=me.findAllMatches,location:c=me.location,threshold:u=me.threshold,distance:d=me.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r,minMatchCharLength:o,findAllMatches:l,ignoreLocation:i,location:c,threshold:u,distance:d},t=n?t:t.toLowerCase(),t=s?Wd(t):t,this.pattern=t,this.query=X8(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r,ignoreDiacritics:o}=this.options;t=r?t:t.toLowerCase(),t=o?Wd(t):t;let i=0,l=[],c=0;for(let u=0,d=n.length;u<d;u+=1){const f=n[u];l.length=0,i=0;for(let m=0,h=f.length;m<h;m+=1){const p=f[m],{isMatch:v,indices:b,score:x}=p.search(t);if(v){if(i+=1,c+=x,s){const y=p.constructor.type;W8.has(y)?l=[...l,...b]:l.push(b)}}else{c=0,i=0,l.length=0;break}}if(i){let m={isMatch:!0,score:c/i};return s&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const Ug=[];function Q8(...e){Ug.push(...e)}function Fg(e,t){for(let n=0,s=Ug.length;n<s;n+=1){let r=Ug[n];if(r.condition(e,t))return new r(e,t)}return new xk(e,t)}const Kd={AND:"$and",OR:"$or"},Vg={PATH:"$path",PATTERN:"$val"},qg=e=>!!(e[Kd.AND]||e[Kd.OR]),J8=e=>!!e[Vg.PATH],eB=e=>!yr(e)&&mk(e)&&!qg(e),pb=e=>({[Kd.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function bk(e,t,{auto:n=!0}={}){const s=r=>{let o=Object.keys(r);const i=J8(r);if(!i&&o.length>1&&!qg(r))return s(pb(r));if(eB(r)){const c=i?r[Vg.PATH]:o[0],u=i?r[Vg.PATTERN]:r[c];if(!Cs(u))throw new Error(k8(c));const d={keyId:Ig(c),pattern:u};return n&&(d.searcher=Fg(u,t)),d}let l={children:[],operator:o[0]};return o.forEach(c=>{const u=r[c];yr(u)&&u.forEach(d=>{l.children.push(s(d))})}),l};return qg(e)||(e=pb(e)),s(e)}function tB(e,{ignoreFieldNorm:t=me.ignoreFieldNorm}){e.forEach(n=>{let s=1;n.matches.forEach(({key:r,norm:o,score:i})=>{const l=r?r.weight:null;s*=Math.pow(i===0&&l?Number.EPSILON:i,(l||1)*(t?1:o))}),n.score=s})}function nB(e,t){const n=e.matches;t.matches=[],yn(n)&&n.forEach(s=>{if(!yn(s.indices)||!s.indices.length)return;const{indices:r,value:o}=s;let i={indices:r,value:o};s.key&&(i.key=s.key.src),s.idx>-1&&(i.refIndex=s.idx),t.matches.push(i)})}function sB(e,t){t.score=e.score}function rB(e,t,{includeMatches:n=me.includeMatches,includeScore:s=me.includeScore}={}){const r=[];return n&&r.push(nB),s&&r.push(sB),e.map(o=>{const{idx:i}=o,l={item:t[i],refIndex:i};return r.length&&r.forEach(c=>{c(o,l)}),l})}class Xt{constructor(t,n={},s){this.options={...me,...n},this.options.useExtendedSearch,this._keyStore=new A8(this.options.keys),this.setCollection(t,s)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof v0))throw new Error(S8);this._myIndex=n||pk(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){yn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let s=0,r=this._docs.length;s<r;s+=1){const o=this._docs[s];t(o,s)&&(this.removeAt(s),s-=1,r-=1,n.push(o))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:o,sortFn:i,ignoreFieldNorm:l}=this.options;let c=Cs(t)?Cs(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return tB(c,{ignoreFieldNorm:l}),o&&c.sort(i),fk(n)&&n>-1&&(c=c.slice(0,n)),rB(c,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(t){const n=Fg(t,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:o,i,n:l})=>{if(!yn(o))return;const{isMatch:c,score:u,indices:d}=n.searchIn(o);c&&r.push({item:o,idx:i,matches:[{score:u,value:o,norm:l,indices:d}]})}),r}_searchLogical(t){const n=bk(t,this.options),s=(l,c,u)=>{if(!l.children){const{keyId:f,searcher:m}=l,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:m});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const d=[];for(let f=0,m=l.children.length;f<m;f+=1){const h=l.children[f],p=s(h,c,u);if(p.length)d.push(...p);else if(l.operator===Kd.AND)return[]}return d},r=this._myIndex.records,o={},i=[];return r.forEach(({$:l,i:c})=>{if(yn(l)){let u=s(n,l,c);u.length&&(o[c]||(o[c]={idx:c,item:l,matches:[]},i.push(o[c])),u.forEach(({matches:d})=>{o[c].matches.push(...d)}))}}),i}_searchObjectList(t){const n=Fg(t,this.options),{keys:s,records:r}=this._myIndex,o=[];return r.forEach(({$:i,i:l})=>{if(!yn(i))return;let c=[];s.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:i[d],searcher:n}))}),c.length&&o.push({idx:l,item:i,matches:c})}),o}_findMatches({key:t,value:n,searcher:s}){if(!yn(n))return[];let r=[];if(yr(n))n.forEach(({v:o,i,n:l})=>{if(!yn(o))return;const{isMatch:c,score:u,indices:d}=s.searchIn(o);c&&r.push({score:u,key:t,value:o,idx:i,norm:l,indices:d})});else{const{v:o,n:i}=n,{isMatch:l,score:c,indices:u}=s.searchIn(o);l&&r.push({score:c,key:t,value:o,norm:i,indices:u})}return r}}Xt.version="7.1.0";Xt.createIndex=pk;Xt.parseIndex=P8;Xt.config=me;Xt.parseQuery=bk;Q8(K8);function wk(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:l.description,group:l.group,statModifications:l.stat_modifications.map(d=>`${d.stat} ${d.type} ${d.value}${d.value_type==="percentage"?"%":""}`),skillBonuses:l.skill_bonuses.map(d=>`${d.stat} +${d.value}${d.value_type==="percentage"?"%":""}`),powers:l.powers.map(d=>`${d.name} ${d.description}`),conditionalEffects:((c=l.conditional_effects)==null?void 0:c.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],masteryEffects:((u=l.mastery_effects)==null?void 0:u.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],originalBirthsign:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"powers",weight:.2},{name:"statModifications",weight:.15},{name:"skillBonuses",weight:.15},{name:"conditionalEffects",weight:.1},{name:"masteryEffects",weight:.1},{name:"group",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Xt(n,s),[n,s]),o=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredBirthsigns:g.useMemo(()=>o.map(l=>l.item.originalBirthsign),[o]),searchResults:o,searchableBirthsigns:n}}function xb({birthsigns:e,onSelect:t,placeholder:n="Search birthsigns...",className:s=""}){const[r,o]=g.useState(""),{filteredBirthsigns:i}=wk(e,r),l=g.useMemo(()=>i.map(d=>({id:d.edid,label:d.name,description:d.description,category:d.group,icon:a.jsx(x0,{birthsignName:d.name,size:"md"}),badge:d.group&&a.jsx(K,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:d.group}),metadata:{originalBirthsign:d}})),[i]),c=d=>{const f=e.find(m=>m.edid===d.id);f&&t(f)},u=(d,f)=>a.jsxs("div",{className:"flex items-center gap-3",children:[d.icon&&a.jsx("div",{className:"flex-shrink-0",children:d.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:d.label}),d.badge&&a.jsx("div",{className:"flex-shrink-0",children:d.badge})]}),d.description&&a.jsx(De,{text:d.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return a.jsx(Jc,{options:l,onSelect:c,placeholder:n,className:s,renderOption:u,emptyMessage:"No birthsigns found",searchQuery:r,onSearchQueryChange:o})}function Qd({item:e,originalBirthsign:t,isExpanded:n=!1,onToggle:s,onClick:r,className:o,showViewAllButton:i=!1,showToggle:l=!0,viewAllButtonText:c="View All",viewAllButtonRoute:u="/birthsigns"}){var S,k,E;const d=ft(),f=()=>{d(u)},m=C=>{C.target.closest("[data-no-click]")||r==null||r()},h=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Birthsign";e!=null&&e.description||t!=null&&t.description;const p=(e==null?void 0:e.category)||(t==null?void 0:t.group)||"";e!=null&&e.effects;const v=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"",b=()=>{if(!(t!=null&&t.stat_modifications))return{health:0,magicka:0,stamina:0};const C={health:0,magicka:0,stamina:0};return t.stat_modifications.forEach(_=>{const P=_.type==="bonus"?_.value:-_.value;_.stat.toLowerCase().includes("health")?C.health+=P:_.stat.toLowerCase().includes("magicka")?C.magicka+=P:_.stat.toLowerCase().includes("stamina")&&(C.stamina+=P)}),C},x=()=>{if(!t)return[];const C=[];return t.powers&&C.push(...t.powers.map(_=>({name:_.name,type:"power"}))),t.conditional_effects&&C.push(...t.conditional_effects.map(_=>({name:_.stat,type:"conditional"}))),t.mastery_effects&&C.push(...t.mastery_effects.map(_=>({name:_.stat,type:"mastery"}))),C},y=C=>{const _=C.toLowerCase();return _==="warrior"?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800":_==="mage"?"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800":_==="thief"?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":"bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30"},w=b(),j=x(),N=a.jsxs("div",{className:H("rounded-lg border bg-background shadow-sm transition-all",o),children:[a.jsxs("div",{className:"flex items-start justify-between p-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(x0,{birthsignName:h,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(Qe,{className:"text-primary font-semibold",children:h}),a.jsxs("div",{className:"flex items-center gap-2",children:[p&&a.jsx("div",{className:`inline-flex items-center justify-center px-2 py-1 border rounded-full text-xs font-medium w-16 ${y(p)}`,children:p}),(w.health!==0||w.magicka!==0||w.stamina!==0)&&a.jsxs("div",{className:"flex gap-1",children:[w.health!==0&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800 rounded-full text-xs font-medium",children:[a.jsx(Qi,{className:"h-3 w-3"}),a.jsxs("span",{children:[w.health>0?"+":"",w.health]})]}),w.magicka!==0&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-full text-xs font-medium",children:[a.jsx(zs,{className:"h-3 w-3"}),a.jsxs("span",{children:[w.magicka>0?"+":"",w.magicka]})]}),w.stamina!==0&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800 rounded-full text-xs font-medium",children:[a.jsx(es,{className:"h-3 w-3"}),a.jsxs("span",{children:[w.stamina>0?"+":"",w.stamina]})]})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[j.length>0&&a.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(rt,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{children:[j.length," effects"]})]})}),i&&a.jsxs(G,{variant:"outline",size:"sm",onClick:f,className:"text-xs","data-no-click":!0,children:[a.jsx(uo,{className:"h-3 w-3 mr-1"}),c]}),l&&a.jsx("div",{"data-no-click":!0,children:a.jsx(bo,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"stone",itemName:h})})]})]}),a.jsxs("div",{className:"space-y-3 px-4 pb-4",children:[a.jsx("div",{children:a.jsx(De,{text:v})}),t&&a.jsxs("div",{className:"flex flex-wrap gap-2",children:[(S=t.powers)==null?void 0:S.slice(0,3).map((C,_)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(rt,{className:"h-3 w-3"}),C.name]},_)),(k=t.conditional_effects)==null?void 0:k.slice(0,3).map((C,_)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-800 rounded-full text-xs font-medium",children:[a.jsx(es,{className:"h-3 w-3"}),C.stat]},`conditional-${_}`)),(E=t.mastery_effects)==null?void 0:E.slice(0,3).map((C,_)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-full text-xs font-medium",children:[a.jsx(rt,{className:"h-3 w-3"}),C.stat]},`mastery-${_}`))]})]}),n&&t&&a.jsxs("div",{className:"space-y-4 px-4 pb-4",children:[t.stat_modifications&&t.stat_modifications.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Stat Modifications"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.stat_modifications.map((C,_)=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize",children:C.stat}),a.jsxs("span",{className:H("font-bold",C.type==="bonus"?"text-green-600":"text-red-600"),children:[C.type==="bonus"?"+":"-",C.value,C.value_type==="percentage"?"%":""]})]},_))})]}),t.skill_bonuses&&t.skill_bonuses.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Skill Bonuses"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.skill_bonuses.map((C,_)=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize",children:C.stat}),a.jsxs("span",{className:"font-bold text-green-600",children:["+",C.value,C.value_type==="percentage"?"%":""]})]},_))})]}),t.powers&&t.powers.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs(rn,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[a.jsx(zs,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),a.jsx("div",{className:"space-y-2",children:t.powers.map((C,_)=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(rt,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:C.name})]}),a.jsx(De,{text:C.description}),(C.magnitude||C.duration)&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-2",children:[C.magnitude&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Magnitude:"})," ",C.magnitude]}),C.duration&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Duration:"})," ",C.duration,"s"]})]})]},_))})]}),t.conditional_effects&&t.conditional_effects.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs(rn,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[a.jsx(es,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),a.jsx("div",{className:"space-y-2",children:t.conditional_effects.map((C,_)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsx("div",{className:"flex items-center gap-2 mb-1",children:a.jsx("span",{className:"font-medium text-sm capitalize",children:C.stat})}),a.jsx(De,{text:C.description}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Condition:"})," ",C.condition]})]},_))})]}),t.mastery_effects&&t.mastery_effects.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs(rn,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[a.jsx(rt,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),a.jsx("div",{className:"space-y-2",children:t.mastery_effects.map((C,_)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(rt,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),a.jsx("div",{className:"text-sm font-medium capitalize",children:C.stat}),a.jsx(De,{text:C.description}),C.condition&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Requirement:"})," ",C.condition]})]},_))})]})]})]});return r?a.jsx("div",{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:m,children:N}):N}function aB(e){const t=e.map(n=>n.group);return[...new Set(t)].sort()}function oB(e){const t=e.flatMap(n=>[...n.stat_modifications.map(s=>s.stat),...n.skill_bonuses.map(s=>s.stat)]);return[...new Set(t)].sort()}var iB="Separator",vb="horizontal",lB=["horizontal","vertical"],jk=g.forwardRef((e,t)=>{const{decorative:n,orientation:s=vb,...r}=e,o=cB(s)?s:vb,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return a.jsx(ye.div,{"data-orientation":o,...l,...r,ref:t})});jk.displayName=iB;function cB(e){return lB.includes(e)}var uB=jk;function Vr({className:e,orientation:t="horizontal",decorative:n=!0,...s}){return a.jsx(uB,{"data-slot":"separator",decorative:n,orientation:t,className:H("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}function dB({birthsign:e,title:t,maxDisplay:n,compact:s=!1,className:r}){var c,u,d,f;if(!e)return null;const o=e.powers.length>0,i=((c=e.conditional_effects)==null?void 0:c.length)>0,l=((u=e.mastery_effects)==null?void 0:u.length)>0;if(!o&&!i&&!l)return null;if(s){const m=[...e.powers.map(p=>({type:"power",data:p})),...((d=e.conditional_effects)==null?void 0:d.map(p=>({type:"conditional",data:p})))||[],...((f=e.mastery_effects)==null?void 0:f.map(p=>({type:"mastery",data:p})))||[]],h=n?m.slice(0,n):m;return a.jsxs("div",{className:H("flex flex-wrap gap-2",r),children:[h.map((p,v)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(rt,{className:"h-3 w-3"}),p.data.name||p.data.stat]},v)),n&&m.length>n&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted text-muted-foreground border rounded-full text-xs font-medium",children:["+",m.length-n," more"]})]})}return a.jsxs(xe,{className:H("border-muted/50",r),children:[t&&a.jsx(_e,{className:"pb-3",children:a.jsx(Re,{className:"text-base",children:t})}),a.jsxs(ve,{className:"space-y-4",children:[o&&a.jsxs("div",{children:[a.jsxs(ii,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(zs,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),a.jsx("div",{className:"space-y-2",children:e.powers.map((m,h)=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(rt,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:m.name})]}),a.jsx("div",{className:"border-t border-border my-2"}),a.jsx(De,{text:m.description}),(m.magnitude||m.duration)&&a.jsxs("div",{className:"space-y-2 text-sm mt-2",children:[m.magnitude&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium min-w-[80px]",children:"Magnitude:"}),a.jsx("span",{children:m.magnitude})]}),m.duration&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium min-w-[80px]",children:"Duration:"}),a.jsxs("span",{children:[m.duration,"s"]})]})]})]},h))})]}),i&&a.jsxs("div",{children:[a.jsxs(ii,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(es,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),a.jsx("div",{className:"space-y-2",children:e.conditional_effects.map((m,h)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(K,{variant:"outline",className:"text-xs bg-purple-100 text-purple-800 border-purple-200",children:"Conditional"}),a.jsx("span",{className:"font-medium text-sm capitalize",children:m.stat})]}),a.jsx(De,{text:m.description}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Condition:"})," ",m.condition]})]},h))})]}),l&&a.jsxs("div",{children:[a.jsxs(ii,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(rt,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),a.jsx("div",{className:"space-y-2",children:e.mastery_effects.map((m,h)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(rt,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),a.jsx("div",{className:"border-t border-border my-2"}),a.jsx("div",{className:"text-sm font-medium capitalize",children:m.stat}),a.jsx(De,{text:m.description}),m.condition&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Requirement:"})," ",m.condition]})]},h))})]})]})]})}function fB({birthsign:e,title:t="Stat Modifications",className:n}){const s=e.stat_modifications.length>0,r=e.skill_bonuses.length>0;return!s&&!r?null:a.jsxs(xe,{className:H("border-muted/50",n),children:[a.jsx(_e,{className:"pb-3",children:a.jsx(Re,{className:"text-base",children:t})}),a.jsxs(ve,{className:"space-y-4",children:[s&&a.jsxs("div",{children:[a.jsx(ii,{className:"text-sm font-medium mb-2",children:"Attributes"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.stat_modifications.map((o,i)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:o.stat.replace(/_/g," ")}),a.jsxs(K,{variant:"outline",className:H("text-xs flex-shrink-0",o.type==="bonus"?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"),children:[o.type==="bonus"?"+":"-",o.value,o.value_type==="percentage"?"%":""]})]},i))})]}),r&&a.jsxs("div",{children:[a.jsx(ii,{className:"text-sm font-medium mb-2",children:"Skill Bonuses"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.skill_bonuses.map((o,i)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:o.stat.replace(/_/g," ")}),a.jsxs(K,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200 text-xs flex-shrink-0",children:["+",o.value,o.value_type==="percentage"?"%":""]})]},i))})]})]})]})}function mB({birthsign:e,isOpen:t,onOpenChange:n}){return e?a.jsx(p0,{open:t,onOpenChange:n,side:"right",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(x0,{birthsignName:e.name,size:"4xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Wr,{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"inline-flex items-center px-2 py-1 bg-skyrim-gold/10 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:e.group}),a.jsx(bo,{itemId:e.edid,itemType:"stone",itemName:e.name})]}),a.jsx(De,{text:e.description})]})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(fB,{birthsign:e}),a.jsx(Vr,{}),a.jsx(dB,{birthsign:e,title:"Special Effects"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Qe,{className:"text-lg font-semibold",children:"Game Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"EDID:"}),a.jsx("span",{className:"break-all",children:e.edid})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Form ID:"}),a.jsx("span",{className:"break-all",children:e.formid})]})]})]})]})]})}):null}function Nk({children:e,columns:t=2,gap:n="md",className:s}){const r={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},o={sm:"gap-3",md:"gap-4",lg:"gap-6"};return a.jsx("div",{className:H("grid",r[t],o[n],s),children:e})}function hB({children:e,columns:t=2,gap:n="md",className:s}){const r={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"},o={sm:"gap-2",md:"gap-4",lg:"gap-6"};return a.jsx("div",{className:H("grid",r[t],o[n],s),children:e})}var mm="Collapsible",[gB,Sk]=un(mm),[pB,y0]=gB(mm),kk=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:r,disabled:o,onOpenChange:i,...l}=e,[c,u]=Yn({prop:s,defaultProp:r??!1,onChange:i,caller:mm});return a.jsx(pB,{scope:n,disabled:o,contentId:fr(),open:c,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),children:a.jsx(ye.div,{"data-state":w0(c),"data-disabled":o?"":void 0,...l,ref:t})})});kk.displayName=mm;var Ck="CollapsibleTrigger",Ek=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,r=y0(Ck,n);return a.jsx(ye.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":w0(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:t,onClick:te(e.onClick,r.onOpenToggle)})});Ek.displayName=Ck;var b0="CollapsibleContent",_k=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=y0(b0,e.__scopeCollapsible);return a.jsx(qt,{present:n||r.open,children:({present:o})=>a.jsx(xB,{...s,ref:t,present:o})})});_k.displayName=b0;var xB=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:r,...o}=e,i=y0(b0,n),[l,c]=g.useState(s),u=g.useRef(null),d=Oe(t,u),f=g.useRef(0),m=f.current,h=g.useRef(0),p=h.current,v=i.open||l,b=g.useRef(v),x=g.useRef(void 0);return g.useEffect(()=>{const y=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(y)},[]),Ls(()=>{const y=u.current;if(y){x.current=x.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const w=y.getBoundingClientRect();f.current=w.height,h.current=w.width,b.current||(y.style.transitionDuration=x.current.transitionDuration,y.style.animationName=x.current.animationName),c(s)}},[i.open,s]),a.jsx(ye.div,{"data-state":w0(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!v,...o,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:v&&r})});function w0(e){return e?"open":"closed"}var vB=kk,yB=Ek,bB=_k,ds="Accordion",wB=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[j0,jB,NB]=Ux(ds),[hm,ete]=un(ds,[NB,Sk]),N0=Sk(),Ak=L.forwardRef((e,t)=>{const{type:n,...s}=e,r=s,o=s;return a.jsx(j0.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?a.jsx(EB,{...o,ref:t}):a.jsx(CB,{...r,ref:t})})});Ak.displayName=ds;var[Tk,SB]=hm(ds),[Mk,kB]=hm(ds,{collapsible:!1}),CB=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},collapsible:o=!1,...i}=e,[l,c]=Yn({prop:n,defaultProp:s??"",onChange:r,caller:ds});return a.jsx(Tk,{scope:e.__scopeAccordion,value:L.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:L.useCallback(()=>o&&c(""),[o,c]),children:a.jsx(Mk,{scope:e.__scopeAccordion,collapsible:o,children:a.jsx(Rk,{...i,ref:t})})})}),EB=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...o}=e,[i,l]=Yn({prop:n,defaultProp:s??[],onChange:r,caller:ds}),c=L.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=L.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return a.jsx(Tk,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:u,children:a.jsx(Mk,{scope:e.__scopeAccordion,collapsible:!0,children:a.jsx(Rk,{...o,ref:t})})})}),[_B,gm]=hm(ds),Rk=L.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:r,orientation:o="vertical",...i}=e,l=L.useRef(null),c=Oe(l,t),u=jB(n),f=al(r)==="ltr",m=te(e.onKeyDown,h=>{var E;if(!wB.includes(h.key))return;const p=h.target,v=u().filter(C=>{var _;return!((_=C.ref.current)!=null&&_.disabled)}),b=v.findIndex(C=>C.ref.current===p),x=v.length;if(b===-1)return;h.preventDefault();let y=b;const w=0,j=x-1,N=()=>{y=b+1,y>j&&(y=w)},S=()=>{y=b-1,y<w&&(y=j)};switch(h.key){case"Home":y=w;break;case"End":y=j;break;case"ArrowRight":o==="horizontal"&&(f?N():S());break;case"ArrowDown":o==="vertical"&&N();break;case"ArrowLeft":o==="horizontal"&&(f?S():N());break;case"ArrowUp":o==="vertical"&&S();break}const k=y%x;(E=v[k].ref.current)==null||E.focus()});return a.jsx(_B,{scope:n,disabled:s,direction:r,orientation:o,children:a.jsx(j0.Slot,{scope:n,children:a.jsx(ye.div,{...i,"data-orientation":o,ref:c,onKeyDown:s?void 0:m})})})}),Jd="AccordionItem",[AB,S0]=hm(Jd),Dk=L.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...r}=e,o=gm(Jd,n),i=SB(Jd,n),l=N0(n),c=fr(),u=s&&i.value.includes(s)||!1,d=o.disabled||e.disabled;return a.jsx(AB,{scope:n,open:u,disabled:d,triggerId:c,children:a.jsx(vB,{"data-orientation":o.orientation,"data-state":Bk(u),...l,...r,ref:t,disabled:d,open:u,onOpenChange:f=>{f?i.onItemOpen(s):i.onItemClose(s)}})})});Dk.displayName=Jd;var zk="AccordionHeader",Lk=L.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=gm(ds,n),o=S0(zk,n);return a.jsx(ye.h3,{"data-orientation":r.orientation,"data-state":Bk(o.open),"data-disabled":o.disabled?"":void 0,...s,ref:t})});Lk.displayName=zk;var Gg="AccordionTrigger",$k=L.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=gm(ds,n),o=S0(Gg,n),i=kB(Gg,n),l=N0(n);return a.jsx(j0.ItemSlot,{scope:n,children:a.jsx(yB,{"aria-disabled":o.open&&!i.collapsible||void 0,"data-orientation":r.orientation,id:o.triggerId,...l,...s,ref:t})})});$k.displayName=Gg;var Pk="AccordionContent",Ok=L.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=gm(ds,n),o=S0(Pk,n),i=N0(n);return a.jsx(bB,{role:"region","aria-labelledby":o.triggerId,"data-orientation":r.orientation,...i,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Ok.displayName=Pk;function Bk(e){return e?"open":"closed"}var TB=Ak,MB=Dk,RB=Lk,Ik=$k,Hk=Ok;const Uk=TB,k0=g.forwardRef(({className:e,...t},n)=>a.jsx(MB,{ref:n,className:H("border-b",e),...t}));k0.displayName="AccordionItem";const C0=g.forwardRef(({className:e,children:t,...n},s)=>a.jsx(RB,{className:"flex",children:a.jsxs(Ik,{ref:s,className:H("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,a.jsx(En,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));C0.displayName=Ik.displayName;const E0=g.forwardRef(({className:e,children:t,...n},s)=>a.jsx(Hk,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:H("pb-4 pt-0",e),children:t})}));E0.displayName=Hk.displayName;function DB({children:e,title:t="Customize Display",description:n="Configure what information to show",defaultOpen:s=!1,className:r}){return a.jsx(Uk,{type:"single",collapsible:!0,defaultValue:s?"customize-display":void 0,className:r,children:a.jsxs(k0,{value:"customize-display",className:"border-none",children:[a.jsx(C0,{className:"hover:no-underline",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($d,{className:"h-4 w-4"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:t}),a.jsx("div",{className:"text-sm text-muted-foreground",children:n})]})]})}),a.jsx(E0,{children:a.jsx("div",{className:"space-y-4 pt-2",children:e})})]})})}var zB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),LB="VisuallyHidden",Fk=g.forwardRef((e,t)=>a.jsx(ye.span,{...e,ref:t,style:{...zB,...e.style}}));Fk.displayName=LB;var $B=Fk,[pm,tte]=un("Tooltip",[dl]),_0=dl(),PB="TooltipProvider",yb="tooltip.open",[nte,Vk]=pm(PB),qk="Tooltip",[ste,xm]=pm(qk),Zg="TooltipTrigger",OB=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=xm(Zg,n),o=Vk(Zg,n),i=_0(n),l=g.useRef(null),c=Oe(t,l,r.onTriggerChange),u=g.useRef(!1),d=g.useRef(!1),f=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(t0,{asChild:!0,...i,children:a.jsx(ye.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:c,onPointerMove:te(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(r.onTriggerEnter(),d.current=!0)}),onPointerLeave:te(e.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:te(e.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:te(e.onFocus,()=>{u.current||r.onOpen()}),onBlur:te(e.onBlur,r.onClose),onClick:te(e.onClick,r.onClose)})})});OB.displayName=Zg;var BB="TooltipPortal",[rte,IB]=pm(BB,{forceMount:void 0}),Mi="TooltipContent",Gk=g.forwardRef((e,t)=>{const n=IB(Mi,e.__scopeTooltip),{forceMount:s=n.forceMount,side:r="top",...o}=e,i=xm(Mi,e.__scopeTooltip);return a.jsx(qt,{present:s||i.open,children:i.disableHoverableContent?a.jsx(Zk,{side:r,...o,ref:t}):a.jsx(HB,{side:r,...o,ref:t})})}),HB=g.forwardRef((e,t)=>{const n=xm(Mi,e.__scopeTooltip),s=Vk(Mi,e.__scopeTooltip),r=g.useRef(null),o=Oe(t,r),[i,l]=g.useState(null),{trigger:c,onClose:u}=n,d=r.current,{onPointerInTransitChange:f}=s,m=g.useCallback(()=>{l(null),f(!1)},[f]),h=g.useCallback((p,v)=>{const b=p.currentTarget,x={x:p.clientX,y:p.clientY},y=GB(x,b.getBoundingClientRect()),w=ZB(x,y),j=YB(v.getBoundingClientRect()),N=WB([...w,...j]);l(N),f(!0)},[f]);return g.useEffect(()=>()=>m(),[m]),g.useEffect(()=>{if(c&&d){const p=b=>h(b,d),v=b=>h(b,c);return c.addEventListener("pointerleave",p),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",p),d.removeEventListener("pointerleave",v)}}},[c,d,h,m]),g.useEffect(()=>{if(i){const p=v=>{const b=v.target,x={x:v.clientX,y:v.clientY},y=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),w=!XB(x,i);y?m():w&&(m(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,d,i,u,m]),a.jsx(Zk,{...e,ref:o})}),[UB,FB]=pm(qk,{isInside:!1}),VB=C5("TooltipContent"),Zk=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=xm(Mi,n),u=_0(n),{onClose:d}=c;return g.useEffect(()=>(document.addEventListener(yb,d),()=>document.removeEventListener(yb,d)),[d]),g.useEffect(()=>{if(c.trigger){const f=m=>{const h=m.target;h!=null&&h.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),a.jsx(Gc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:a.jsxs(n0,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(VB,{children:s}),a.jsx(UB,{scope:n,isInside:!0,children:a.jsx($B,{id:c.contentId,role:"tooltip",children:r||s})})]})})});Gk.displayName=Mi;var Yk="TooltipArrow",qB=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=_0(n);return FB(Yk,n).isInside?null:a.jsx(s0,{...r,...s,ref:t})});qB.displayName=Yk;function GB(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,s,r,o)){case o:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function ZB(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function YB(e){const{top:t,right:n,bottom:s,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:s},{x:r,y:s}]}function XB(e,t){const{x:n,y:s}=e;let r=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],u=l.x,d=l.y,f=c.x,m=c.y;d>s!=m>s&&n<(f-u)*(s-d)/(m-d)+u&&(r=!r)}return r}function WB(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),KB(t)}function KB(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const r=e[s];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(r.y-i.y)>=(o.y-i.y)*(r.x-i.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const r=e[s];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(r.y-i.y)>=(o.y-i.y)*(r.x-i.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Xk=Gk;const QB=g.forwardRef(({className:e,sideOffset:t=4,...n},s)=>a.jsx(Xk,{ref:s,sideOffset:t,className:H("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));QB.displayName=Xk.displayName;function In({title:e,navigateTo:t,onNavigate:n,children:s,className:r,showHeaderButton:o=!0}){return a.jsxs(xe,{className:r,children:[a.jsx(_e,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Re,{className:"text-lg",children:e}),o&&a.jsxs(G,{variant:"outline",size:"sm",onClick:n,className:"text-sm whitespace-nowrap cursor-pointer",children:["View all ",t," →"]})]})}),a.jsx(ve,{className:"space-y-4",children:s})]})}function $u({title:e,description:t,checked:n,onCheckedChange:s,className:r,disabled:o=!1,onClick:i,showSwitch:l=!0}){const c=()=>{i?i():o||s(!n)};return a.jsxs("div",{className:H("flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm flex-1 min-h-[80px] cursor-pointer hover:bg-muted/50 transition-colors",o&&"opacity-50 cursor-not-allowed",r),onClick:c,children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(fc,{className:"text-base font-medium",children:e}),t&&a.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),l&&a.jsx(rm,{checked:n,onCheckedChange:s,disabled:o})]})}function Yg(e){var t,n,s,r,o,i;return{id:`religion-${e.name.toLowerCase().replace(/\s+/g,"-")}`,name:e.name,description:((t=e.tenet)==null?void 0:t.description)||"",tags:Yt()?e.favoredRaces||[]:[],summary:((n=e.tenet)==null?void 0:n.description)||"",effects:[...((r=(s=e.tenet)==null?void 0:s.effects)==null?void 0:r.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[],...((i=(o=e.blessing)==null?void 0:o.effects)==null?void 0:i.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[]],associatedItems:[],imageUrl:void 0,category:e.type}}function bb(e){var t;return{...e,id:e.edid||e.name,name:e.name,description:e.description,tags:e.tags||[],summary:e.description,effects:[...((t=e.effects)==null?void 0:t.map(n=>({type:"positive",name:n.type,description:n.condition||n.type,value:n.value})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalTrait:e}}function Wk(e){var s,r,o,i,l,c,u,d;const t=[...((s=e.stat_modifications)==null?void 0:s.map(f=>({type:f.type==="bonus"?"positive":"negative",name:`${f.stat} ${f.type==="bonus"?"+":"-"}${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} ${f.type==="bonus"?"increased":"decreased"} by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((r=e.skill_bonuses)==null?void 0:r.map(f=>({type:"positive",name:`${f.stat} +${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} skill increased by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((o=e.powers)==null?void 0:o.map(f=>({type:"positive",name:f.name,description:f.description,value:f.magnitude||0,target:"power"})))||[],...((i=e.conditional_effects)==null?void 0:i.map(f=>({type:"neutral",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[],...((l=e.mastery_effects)==null?void 0:l.map(f=>({type:"positive",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[]],n=[e.group,...((c=e.stat_modifications)==null?void 0:c.map(f=>f.stat))||[],...((u=e.skill_bonuses)==null?void 0:u.map(f=>f.stat))||[],...((d=e.powers)==null?void 0:d.map(f=>f.name))||[]].filter((f,m,h)=>h.indexOf(f)===m);return{...e,id:e.id||e.edid,name:e.name,description:e.description,tags:n,summary:e.description,effects:t,associatedItems:[],imageUrl:void 0,category:e.group,originalBirthsign:e}}function JB(e){var s;const t=[{type:"positive",name:e.name,description:e.description||"",value:0,target:"destiny"}],n=[...e.tags||[],...((s=e.prerequisites)==null?void 0:s.map(r=>`Requires: ${r}`))||[]].filter((r,o,i)=>i.indexOf(r)===o);return{...e,id:e.id||e.edid,name:e.name,description:e.description||"",tags:n,summary:e.description||"",effects:t,associatedItems:[],imageUrl:e.icon,category:"Destiny",originalDestinyNode:e}}function eI(){const{data:e,loading:t,error:n,load:s}=go();return{birthsigns:e,loading:t,error:n,refetch:s}}function Kk({className:e}){const{birthsigns:t}=eI(),{build:n,setStone:s}=pt(),r=ft(),o=n.stone?t.find(u=>u.edid===n.stone):null,i=u=>{s(u.edid)},l=()=>{r("/birth-signs")};if(!o)return a.jsxs(In,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's birthsign"}),a.jsx(xb,{birthsigns:t,onSelect:i,placeholder:"Search for a birthsign...",className:"w-full"})]});const c=Wk(o);return a.jsxs(In,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[a.jsx(xb,{birthsigns:t,onSelect:i,placeholder:`Birth Sign: Select a birthsign (${o.name})`,className:"w-full"}),a.jsx(Qd,{item:c,originalBirthsign:o,isExpanded:!0,className:"border-0 shadow-none",showToggle:!1})]})}const tI={selectedTags:[],sortBy:"alphabetical",viewMode:"grid",expandedBirthsigns:new Set};function nI(e,t){switch(t.type){case"ADD_TAG":return e.selectedTags.some(n=>n.value===t.payload.value&&n.category===t.payload.category)?e:{...e,selectedTags:[...e.selectedTags,t.payload]};case"REMOVE_TAG":return{...e,selectedTags:e.selectedTags.filter(n=>n.id!==t.payload)};case"SET_SORT":return{...e,sortBy:t.payload};case"SET_VIEW_MODE":return{...e,viewMode:t.payload};case"TOGGLE_EXPANDED":{const n=new Set(e.expandedBirthsigns);return n.has(t.payload)?n.delete(t.payload):n.add(t.payload),{...e,expandedBirthsigns:n}}case"EXPAND_ALL":return{...e,expandedBirthsigns:new Set(t.payload)};case"COLLAPSE_ALL":return{...e,expandedBirthsigns:new Set};default:return e}}function sI(e){const[t,n]=g.useReducer(nI,tI),s=g.useMemo(()=>{const b=aB(e),x=oB(e);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"groups",name:"Birthsign Groups",placeholder:"Search by birthsign group...",options:b.map(y=>({id:`group-${y}`,label:y,value:y,category:"Birthsign Groups",description:`Birthsigns from ${y} group`}))},{id:"stats",name:"Stats & Skills",placeholder:"Search by stats and skills...",options:x.map(y=>({id:`stat-${y}`,label:y.replace(/_/g," ").replace(/\b\w/g,w=>w.toUpperCase()),value:y,category:"Stats & Skills",description:`Birthsigns that affect ${y}`}))}]},[e]),r=g.useMemo(()=>t.selectedTags.length===0?e:e.filter(b=>t.selectedTags.every(x=>{switch(x.category){case"Fuzzy Search":return!0;case"Birthsign Groups":return b.group===x.value;case"Stats & Skills":return[...b.stat_modifications.map(w=>w.stat),...b.skill_bonuses.map(w=>w.stat)].some(w=>w===x.value);default:return!0}})),[e,t.selectedTags]),o=g.useMemo(()=>t.selectedTags.filter(b=>b.category==="Fuzzy Search").map(b=>b.value).join(" "),[t.selectedTags]),{filteredBirthsigns:i}=wk(r,o),l=g.useMemo(()=>i.map(Wk),[i]),c=g.useMemo(()=>[...l].sort((b,x)=>{var y,w;switch(t.sortBy){case"alphabetical":return b.name.localeCompare(x.name);case"group":{const j=k=>{switch(k){case"Warrior":return 1;case"Mage":return 2;case"Thief":return 3;case"Serpent":return 4;case"Other":return 5;default:return 6}},N=j(b.category),S=j(x.category);return N!==S?N-S:b.name.localeCompare(x.name)}case"power-count":{const j=((y=b.effects)==null?void 0:y.filter(S=>S.target==="power").length)||0,N=((w=x.effects)==null?void 0:w.filter(S=>S.target==="power").length)||0;return j!==N?N-j:b.name.localeCompare(x.name)}default:return 0}}),[l,t.sortBy]),u=g.useCallback(b=>{n({type:"ADD_TAG",payload:b})},[]),d=g.useCallback(b=>{n({type:"REMOVE_TAG",payload:b})},[]),f=g.useCallback(b=>{n({type:"SET_SORT",payload:b})},[]),m=g.useCallback(b=>{n({type:"SET_VIEW_MODE",payload:b})},[]),h=g.useCallback(b=>{n({type:"TOGGLE_EXPANDED",payload:b})},[]),p=g.useCallback(b=>{n({type:"EXPAND_ALL",payload:b})},[]),v=g.useCallback(()=>{n({type:"COLLAPSE_ALL"})},[]);return{...t,addTag:u,removeTag:d,setSort:f,setViewMode:m,toggleExpanded:h,expandAll:p,collapseAll:v,searchCategories:s,fuzzySearchQuery:o,filteredBirthsigns:r,displayItems:l,sortedDisplayItems:c}}function rI(){const{data:e,loading:t,error:n}=d8(),s=e||[],{selectedTags:r,sortBy:o,viewMode:i,addTag:l,removeTag:c,setSort:u,setViewMode:d,searchCategories:f,filteredBirthsigns:m,displayItems:h,sortedDisplayItems:p}=sI(s);g.useEffect(()=>{console.log("birthsigns",s),console.log("sortedDisplayItems",p),console.log("displayItems",h),console.log("filteredBirthsigns",m)},[s,p,h,m]);const[v,b]=g.useState(null),[x,y]=g.useState(!1),w=j=>{b(j),y(!0)};return t?a.jsx(Fn,{title:"Birthsigns",description:"Choose your birthsign",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("p",{children:"Loading birthsigns..."})})}):n?a.jsx(Fn,{title:"Birthsigns",description:"Choose your birthsign",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("p",{className:"text-red-500",children:["Error loading birthsigns: ",n]})})}):a.jsxs(Fn,{title:"Birth Signs",description:"Choose your character's birthsign to gain unique abilities and bonuses based on the celestial constellations.",children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(ba,{categories:f,onSelect:j=>{let N;typeof j=="string"?N={id:`custom-${j}`,label:j,value:j,category:"Fuzzy Search"}:N={id:`${j.category}-${j.id}`,label:j.label,value:j.value,category:j.category},r.some(S=>S.value===N.value&&S.category===N.category)||l(N)},onCustomSearch:j=>{let N;typeof j=="string"?N={id:`custom-${j}`,label:j,value:j,category:"Fuzzy Search"}:N={id:`${j.category}-${j.id}`,label:j.label,value:j.value,category:j.category},r.some(S=>S.value===N.value&&S.category===N.category)||l(N)}})})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(G,{variant:i==="grid"?"default":"outline",size:"sm",onClick:()=>d("grid"),className:"flex items-center gap-2",children:[a.jsx(Ki,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(G,{variant:i==="list"?"default":"outline",size:"sm",onClick:()=>d("list"),className:"flex items-center gap-2",children:[a.jsx(fo,{className:"h-4 w-4"}),"List"]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Kc,{children:[a.jsx(Qc,{asChild:!0,children:a.jsxs(G,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort:"," ",o==="alphabetical"?"A-Z":o==="group"?"Group":"Power Count",a.jsx(En,{className:"h-4 w-4"})]})}),a.jsxs(fl,{align:"end",children:[a.jsx(ss,{onClick:()=>u("alphabetical"),children:"Alphabetical"}),a.jsx(ss,{onClick:()=>u("group"),children:"By Group"}),a.jsx(ss,{onClick:()=>u("power-count"),children:"By Power Count"})]})]})})]}),a.jsx("div",{className:"my-4",children:r.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>r.forEach(j=>c(j.id)),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Bt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),r.map(j=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>c(j.id),title:"Click to remove",children:[j.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},j.id))]})}),i==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:p.map(j=>{const N=s.find(S=>S.id===j.id||S.edid===j.id);return N?a.jsx(Qd,{originalBirthsign:N,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>w(N)},j.id):null})}):a.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:p.map(j=>{const N=s.find(S=>S.id===j.id||S.edid===j.id);return N?a.jsx(Qd,{originalBirthsign:N,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>w(N)},j.id):null})}),p.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No birthsigns found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),a.jsx(mB,{birthsign:v,isOpen:x,onOpenChange:y})]})}class vs{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.id=="string"&&typeof t.name=="string"&&typeof t.description=="string"&&Array.isArray(t.tags)&&Array.isArray(t.prerequisites)}static equals(t,n){return t.id===n.id}static hasTag(t,n){return t.tags.includes(n)}static hasAnyTag(t,n){return n.some(s=>this.hasTag(t,s))}static hasAllTags(t,n){return n.every(s=>this.hasTag(t,s))}static filterByTag(t,n){return t.filter(s=>this.hasTag(s,n))}static filterByAnyTag(t,n){return t.filter(s=>this.hasAnyTag(s,n))}static filterByAllTags(t,n){return t.filter(s=>this.hasAllTags(s,n))}static isRootNode(t){return t.prerequisites.length===0}static getRootNodes(t){return t.filter(n=>this.isRootNode(n))}static isLeafNode(t,n){return!n.some(s=>s.prerequisites.includes(t.edid))}static getLeafNodes(t){return t.filter(n=>this.isLeafNode(n,t))}static getNextNodes(t,n){return n.filter(s=>s.prerequisites.includes(t.edid))}static getPrerequisiteNodes(t,n){return n.filter(s=>t.prerequisites.includes(s.edid))}static search(t,n){const s=n.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||r.description.toLowerCase().includes(s)||r.tags.some(o=>o.toLowerCase().includes(s)))}static sortByName(t){return[...t].sort((n,s)=>n.name.localeCompare(s.name))}static sortByPrerequisites(t){return[...t].sort((n,s)=>n.prerequisites.length-s.prerequisites.length)}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static getUniquePrerequisites(t){const n=t.flatMap(s=>s.prerequisites);return[...new Set(n)].sort()}}function ja(e={}){const{includePrerequisites:t=!1,includeNextNodes:n=!1,filterByTags:s=[],searchTerm:r="",sortBy:o="name"}=e,{data:i,loading:l,error:c,reload:u}=f8(),d=i||[],f=c,m=g.useMemo(()=>vs.getRootNodes(d),[d]),h=g.useMemo(()=>[],[d]),p=g.useMemo(()=>vs.getUniqueTags(d),[d]),v=g.useMemo(()=>{let C=[...d];return s.length>0&&(C=vs.filterByAnyTag(C,s)),r&&(C=vs.search(C,r)),o==="name"?C=vs.sortByName(C):o==="prerequisites"&&(C=vs.sortByPrerequisites(C)),C},[d,s,r,o]),b=C=>d.find(_=>_.id===C),x=C=>d.find(_=>_.edid===C);return{nodes:d,rootNodes:m,filteredNodes:v,isLoading:l,error:f,categories:h,tags:p,refresh:()=>{u()},getNodeById:b,getNodeByName:C=>d.find(_=>_.name===C),getNodeByEdid:x,getNextNodes:C=>{const _=x(C);return _?vs.getNextNodes(_,d):[]},getPrerequisiteNodes:C=>{const _=x(C);return _?vs.getPrerequisiteNodes(_,d):[]},filterByCategory:C=>[],filterByTag:C=>vs.filterByTag(d,C),searchNodes:C=>vs.search(d,C)}}function A0(e={}){const{initialPath:t=[],validatePath:n=!0}=e,[s,r]=g.useState(t),{nodes:o,rootNodes:i}=ja(),l=g.useMemo(()=>s.length>0?s[s.length-1]:null,[s]),c=g.useMemo(()=>s.length===0?i:o.filter(w=>w.prerequisites.length===0?!1:w.prerequisites.some(j=>s.some(N=>N.edid===j))),[s,o,i]),u=g.useMemo(()=>l?o.filter(w=>w.prerequisites.includes(l.edid)):i,[l,o,i]),d=g.useMemo(()=>l?o.filter(w=>l.prerequisites.includes(w.edid)):[],[l,o]),{isValidPath:f,pathErrors:m}=g.useMemo(()=>{if(!n||s.length===0)return{isValidPath:!0,pathErrors:[]};const w=[];for(let j=1;j<s.length;j++){const N=s[j],S=s.slice(0,j);!N.prerequisites.some(E=>S.some(C=>C.edid===E))&&N.prerequisites.length>0&&w.push(`${N.name} requires one of: ${N.prerequisites.join(", ")}`)}return{isValidPath:w.length===0,pathErrors:w}},[s,n]),h=g.useCallback(w=>{if(s.length>0){if(s[s.length-1],!w.prerequisites.some(N=>s.some(S=>S.edid===N))&&w.prerequisites.length>0)return!1}else if(w.prerequisites.length>0)return!1;return r(j=>[...j,w]),!0},[s]),p=g.useCallback(w=>{r(j=>j.slice(0,w+1))},[]),v=g.useCallback(w=>{r(w)},[]),b=g.useCallback(()=>{r([])},[]),x=g.useCallback(w=>{r(j=>j.slice(0,w+1))},[]),y=g.useCallback(()=>({startNode:s[0]||null,endNode:s[s.length-1]||null,totalNodes:s.length,pathString:s.map(w=>w.name).join(" → ")}),[s]);return{currentPath:s,currentNode:l,availableNodes:c,rootNodes:i,isValidPath:f,pathErrors:m,addNodeToPath:h,removeNodeFromPath:p,setPath:v,clearPath:b,goToPathIndex:x,pathLength:s.length,isPathComplete:u.length===0,nextPossibleNodes:u,prerequisiteNodes:d,getPathSummary:y}}function vm(e={}){const{fromNode:t,maxDepth:n=10}=e,{nodes:s,rootNodes:r,isLoading:o,error:i}=ja();return{possiblePaths:g.useMemo(()=>{if(o||i||!s.length)return[];const c=[],u=new Set,d=m=>s.filter(h=>h.prerequisites.includes(m)),f=(m,h=0)=>{if(h>=n)return;const p=m[m.length-1],v=d(p.edid);if(v.length===0){c.push({path:[...m],isComplete:!0,endNode:p});return}v.forEach(b=>{const x=m.map(y=>y.id).join("->")+"->"+b.id;u.has(x)||(u.add(x),f([...m,b],h+1))})};if(t){if(d(t.edid).length===0)return[];f([t])}else r.forEach(m=>{f([m])});return c},[s,r,t,n,o,i]),isLoading:o,error:i}}var gh,ym="HoverCard",[Qk,ate]=un(ym,[dl]),bm=dl(),[aI,T0]=Qk(ym),Jk=e=>{const{__scopeHoverCard:t,children:n,open:s,defaultOpen:r,onOpenChange:o,openDelay:i=700,closeDelay:l=300}=e,c=bm(t),u=g.useRef(0),d=g.useRef(0),f=g.useRef(!1),m=g.useRef(!1),[h,p]=Yn({prop:s,defaultProp:r??!1,onChange:o,caller:ym}),v=g.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>p(!0),i)},[i,p]),b=g.useCallback(()=>{clearTimeout(u.current),!f.current&&!m.current&&(d.current=window.setTimeout(()=>p(!1),l))},[l,p]),x=g.useCallback(()=>p(!1),[p]);return g.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),a.jsx(aI,{scope:t,open:h,onOpenChange:p,onOpen:v,onClose:b,onDismiss:x,hasSelectionRef:f,isPointerDownOnContentRef:m,children:a.jsx(e2,{...c,children:n})})};Jk.displayName=ym;var eC="HoverCardTrigger",tC=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,...s}=e,r=T0(eC,n),o=bm(n);return a.jsx(t0,{asChild:!0,...o,children:a.jsx(ye.a,{"data-state":r.open?"open":"closed",...s,ref:t,onPointerEnter:te(e.onPointerEnter,tf(r.onOpen)),onPointerLeave:te(e.onPointerLeave,tf(r.onClose)),onFocus:te(e.onFocus,r.onOpen),onBlur:te(e.onBlur,r.onClose),onTouchStart:te(e.onTouchStart,i=>i.preventDefault())})})});tC.displayName=eC;var oI="HoverCardPortal",[ote,iI]=Qk(oI,{forceMount:void 0}),ef="HoverCardContent",nC=g.forwardRef((e,t)=>{const n=iI(ef,e.__scopeHoverCard),{forceMount:s=n.forceMount,...r}=e,o=T0(ef,e.__scopeHoverCard);return a.jsx(qt,{present:s||o.open,children:a.jsx(lI,{"data-state":o.open?"open":"closed",...r,onPointerEnter:te(e.onPointerEnter,tf(o.onOpen)),onPointerLeave:te(e.onPointerLeave,tf(o.onClose)),ref:t})})});nC.displayName=ef;var lI=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:i,...l}=e,c=T0(ef,n),u=bm(n),d=g.useRef(null),f=Oe(t,d),[m,h]=g.useState(!1);return g.useEffect(()=>{if(m){const p=document.body;return gh=p.style.userSelect||p.style.webkitUserSelect,p.style.userSelect="none",p.style.webkitUserSelect="none",()=>{p.style.userSelect=gh,p.style.webkitUserSelect=gh}}},[m]),g.useEffect(()=>{if(d.current){const p=()=>{h(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var b;((b=document.getSelection())==null?void 0:b.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",p),()=>{document.removeEventListener("pointerup",p),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),g.useEffect(()=>{d.current&&dI(d.current).forEach(v=>v.setAttribute("tabindex","-1"))}),a.jsx(Gc,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:te(o,p=>{p.preventDefault()}),onDismiss:c.onDismiss,children:a.jsx(n0,{...u,...l,onPointerDown:te(l.onPointerDown,p=>{p.currentTarget.contains(p.target)&&h(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:{...l.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),cI="HoverCardArrow",uI=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,...s}=e,r=bm(n);return a.jsx(s0,{...r,...s,ref:t})});uI.displayName=cI;function tf(e){return t=>t.pointerType==="touch"?void 0:e()}function dI(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var fI=Jk,mI=tC,sC=nC;const rC=fI,aC=mI,M0=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},r)=>a.jsx(sC,{ref:r,align:t,sideOffset:n,className:H("w-64 rounded-md dropdown-enhanced p-4 text-popover-foreground outline-none animate-in zoom-in-90 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-90 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Dt.TOOLTIP},...s}));M0.displayName=sC.displayName;function hI({node:e,allNodes:t,children:n,showPrerequisites:s=!0,showNextNodes:r=!0,showTags:o=!0,className:i=""}){const l=u=>t.filter(d=>d.prerequisites.includes(u)),c=u=>t.filter(d=>e.prerequisites.includes(d.name));return a.jsxs(rC,{children:[a.jsx(aC,{asChild:!0,children:n}),a.jsx(M0,{className:`w-80 p-0 ${i}`,children:a.jsxs(xe,{className:"border-0 shadow-none",children:[a.jsx(_e,{className:"pb-2",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("div",{className:"flex-1",children:a.jsx("h3",{className:"font-semibold text-lg text-foreground mb-1",children:e.name})}),e.icon&&a.jsx("div",{className:"w-8 h-8 ml-2",children:a.jsx("img",{src:e.icon,alt:e.name,className:"w-full h-full object-contain"})})]})}),a.jsxs(ve,{className:"pt-0 space-y-3",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),s&&e.prerequisites.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Prerequisites:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[c(e.name).map(u=>a.jsx(K,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:u.name},u.id)),e.prerequisites.filter(u=>!t.some(d=>d.name===u)).map((u,d)=>a.jsx(K,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500 border-gray-200",children:u},`missing-${d}`))]})]}),r&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Leads to:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[l(e.name).map(u=>a.jsx(K,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:u.name},u.id)),l(e.name).length===0&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"No further progression"})]})]}),o&&e.tags.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Tags:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((u,d)=>a.jsx(K,{variant:"secondary",className:"text-xs",children:u},d))})]}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[a.jsxs("p",{children:["ID: ",e.id]}),e.globalFormId&&a.jsxs("p",{children:["Form ID: ",e.globalFormId]})]})]})]})})]})}function oC({node:e,allNodes:t,variant:n="default",size:s="md",showHoverCard:r=!0,onClick:o,className:i=""}){const l={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},c=a.jsx(K,{variant:n,className:`
        ${l[s]} 
        ${o?"cursor-pointer hover:bg-muted/50":""} 
        ${i}
        rounded-full
      `,onClick:o,children:e.name});return r?a.jsx(hI,{node:e,allNodes:t,children:c}):c}function iC({path:e,allNodes:t,onBreadcrumbClick:n,variant:s="default",className:r=""}){if(e.length===0)return a.jsx("div",{className:`flex items-center gap-2 ${r}`,children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})});const o=s==="compact"?"sm":"md";return a.jsx("div",{className:`flex items-center gap-2 ${r}`,children:e.map((i,l)=>a.jsxs(L.Fragment,{children:[a.jsx(oC,{node:i,allNodes:t,variant:l===e.length-1?"default":"outline",size:o,showHoverCard:!0,onClick:n?()=>n(l):void 0}),l<e.length-1&&a.jsx(Uc,{className:"w-4 h-4 text-muted-foreground"})]},i.id))})}function gI({path:e,allNodes:t,selectedPathLength:n,isComplete:s,endNode:r,onPathClick:o,variant:i="default",className:l=""}){const c=i==="compact"?"sm":"md";return a.jsxs("div",{className:`p-3 border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer ${l}`,onClick:()=>o(e,n),children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("div",{className:"flex flex-wrap items-center gap-1",children:e.map((u,d)=>a.jsxs(L.Fragment,{children:[a.jsx(oC,{node:u,allNodes:t,variant:"outline",size:c,showHoverCard:!0,onClick:f=>{f==null||f.stopPropagation(),o(e,d)},className:`
                   ${d===0&&n===0?"cursor-pointer":""}
                   ${s&&d===e.length-1?"bg-yellow-600 text-yellow-50 border-yellow-700":""}
                 `}),d<e.length-1&&a.jsx(Uc,{className:"w-3 h-3 text-muted-foreground"})]},u.id))})}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsxs("span",{children:["Length: ",e.length," steps"]}),s&&a.jsxs("span",{children:["• Ends at: ",r.name]}),e.length>n&&a.jsxs("span",{children:["• ",e.length-n," more choices"]})]})]})}function Xg({possiblePaths:e,selectedPathLength:t,onPathClick:n,variant:s="default",className:r=""}){const{nodes:o}=ja();return e.length===0?a.jsxs("div",{className:`text-center py-8 ${r}`,children:[a.jsx("p",{className:"text-muted-foreground",children:"No possible paths available."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You may have reached the end of available destiny paths."})]}):a.jsx("div",{className:`space-y-3 ${r}`,children:e.map((i,l)=>a.jsx(gI,{path:i.path,allNodes:o,selectedPathLength:t,isComplete:i.isComplete,endNode:i.endNode,onPathClick:n,variant:s},l))})}const lC=({navigate:e})=>{const{build:t,setDestinyPath:n}=pt(),{nodes:s,isLoading:r,error:o}=ja(),i=L.useMemo(()=>t.destinyPath.map(y=>s.find(w=>w.id===y)).filter(y=>!!y),[t.destinyPath,s]),{isValidPath:l,pathErrors:c,setPath:u,clearPath:d,currentPath:f,currentNode:m}=A0({initialPath:i,validatePath:!0}),{possiblePaths:h}=vm({fromNode:m||void 0}),p=y=>{const w=y.map(j=>j.id);n(w)},v=(y,w)=>{let j;if(f.length===0)j=y.slice(0,w+1);else{if(w===0)return;const N=y.slice(1,w+1);j=[...f,...N]}u(j),p(j)},b=()=>{d(),n([])},x=y=>{const w=f.slice(0,y+1);u(w),p(w)};return a.jsxs(xe,{className:"mb-6",children:[a.jsx(_e,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(Re,{className:"text-lg",children:"Destiny"}),a.jsxs(G,{variant:"outline",size:"sm",onClick:()=>e("/destiny"),className:"text-sm whitespace-nowrap cursor-pointer",children:[a.jsx(uo,{className:"w-4 h-4 mr-1"}),"View All"]})]})}),a.jsx(ve,{children:r?a.jsx("div",{className:"text-muted-foreground",children:"Loading destiny data..."}):o?a.jsx("div",{className:"text-destructive",children:o}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Selected Path"}),a.jsx(iC,{path:f,allNodes:s,variant:"compact",onBreadcrumbClick:x})]}),f.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Path Details (",f.length," nodes)"]}),a.jsxs(G,{variant:"outline",size:"sm",onClick:b,className:"text-xs",children:[a.jsx(gr,{className:"w-3 h-3 mr-1"}),"Clear Path"]})]}),a.jsx("div",{className:"space-y-2",children:f.map((y,w)=>a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium flex-shrink-0",children:w+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-sm text-foreground",children:y.name}),y.description&&a.jsx(FormattedText,{text:y.description,className:"text-xs text-muted-foreground mt-1",as:"p"})]})]})},y.id))})]}),h.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:f.length===0?"Choose Your Starting Point":"Continue Your Path"}),a.jsx(eo,{className:"h-[200px]",children:a.jsx("div",{className:"p-2",children:a.jsx(Xg,{possiblePaths:h,selectedPathLength:f.length,onPathClick:v,variant:"compact"})})})]}),!l&&c.length>0&&a.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(ji,{className:"w-3 h-3"}),a.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),a.jsx("ul",{className:"space-y-0.5",children:c.map((y,w)=>a.jsxs("li",{children:["• ",y]},w))})]}),f.length===0&&h.length===0&&a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx("p",{className:"text-sm",children:"No destiny paths available"}),a.jsx(G,{variant:"outline",size:"sm",onClick:()=>e("/destiny"),className:"mt-2",children:"Browse All Destinies"})]})]})})]})};class ht{static getRaceById(t,n){return t.find(s=>s.edid===n)}static getRacesByCategory(t,n){return t.filter(s=>s.category===n)}static getUniqueCategories(t){return[...new Set(t.map(n=>n.category))]}static getUniqueTags(t){const n=t.flatMap(s=>[...s.keywords||[],...s.flags||[]]);return[...new Set(n)]}static filterByCategory(t,n){return n?t.filter(s=>s.category===n):t}static filterByTags(t,n){return n.length===0?t:t.filter(s=>n.some(r=>(s.keywords||[]).includes(r)||(s.flags||[]).includes(r)))}static filterByAnyTag(t,n){return n.length===0?t:t.filter(s=>n.some(r=>(s.keywords||[]).includes(r)||(s.flags||[]).includes(r)))}static search(t,n){if(!n.trim())return t;const s=n.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||(r.description||"").toLowerCase().includes(s)||(r.keywords||[]).some(o=>o.toLowerCase().includes(s))||(r.flags||[]).some(o=>o.toLowerCase().includes(s)))}static sortByName(t){return[...t].sort((n,s)=>n.name.localeCompare(s.name))}static sortByCategory(t){return[...t].sort((n,s)=>{const r=n.category.localeCompare(s.category);return r!==0?r:n.name.localeCompare(s.name)})}static transformToPlayerCreationItem(t){const n=[...t.keywords||[],...t.flags||[],t.category],s=[...(t.skillBonuses||[]).map(r=>({name:`${r.skill} +${r.bonus}`,type:"positive",description:`Provides ${r.bonus} bonus to ${r.skill}`,value:r.bonus,target:r.skill})),...(t.racialSpells||[]).map(r=>({name:r.name,type:"positive",description:r.description,target:"racial ability"}))];return{id:t.edid,name:t.name,description:t.description||"",tags:n,effects:s,associatedItems:[],imageUrl:void 0,category:t.category||""}}static getRelatedRaces(t,n){return n.filter(s=>s.edid!==t.edid&&s.category===t.category)}static calculateRaceStats(t){var n,s,r,o,i,l;return{totalHealth:((n=t.startingStats)==null?void 0:n.health)||0,totalMagicka:((s=t.startingStats)==null?void 0:s.magicka)||0,totalStamina:((r=t.startingStats)==null?void 0:r.stamina)||0,totalCarryWeight:((o=t.startingStats)==null?void 0:o.carryWeight)||0,skillBonusCount:((i=t.skillBonuses)==null?void 0:i.length)||0,racialSpellCount:((l=t.racialSpells)==null?void 0:l.length)||0}}static applyFilters(t,n){let s=[...t];return n.search&&(s=this.search(s,n.search)),n.type&&(s=this.filterByCategory(s,n.type)),n.tags.length>0&&(s=this.filterByTags(s,n.tags)),s}}class pI{static enrichRacesWithTags(t){t.forEach(n=>{})}static generateSearchCategories(t){const n=[...new Set(t.map(o=>o.category))],s=[...new Set(t.flatMap(o=>o.keywords.map(i=>i.edid)))],r=[...new Set(t.flatMap(o=>o.flags))];return[{id:"category",name:"Race Type",options:n},{id:"keywords",name:"Keywords",options:s},{id:"flags",name:"Flags",options:r}]}static validateRaceData(t){try{return!(!t.name||!t.edid||!t.category||!t.startingStats||typeof t.startingStats.health!="number"||typeof t.startingStats.magicka!="number"||typeof t.startingStats.stamina!="number"||typeof t.startingStats.carryWeight!="number"||!Array.isArray(t.skillBonuses)||!Array.isArray(t.racialSpells)||!Array.isArray(t.keywords)||!Array.isArray(t.flags))}catch{return!1}}static calculateRaceStats(t){const n=t.startingStats.health,s=t.startingStats.magicka,r=t.startingStats.stamina,o=t.startingStats.carryWeight,i=t.skillBonuses.length,l=t.racialSpells.length;return{totalHealth:n,totalMagicka:s,totalStamina:r,totalCarryWeight:o,skillBonusCount:i,racialSpellCount:l}}static calculatePowerLevel(t){const n=this.calculateRaceStats(t),s=(n.totalHealth+n.totalMagicka+n.totalStamina)/3,r=n.skillBonusCount*5+n.racialSpellCount*10;return Math.round(s+r)}static getDifficultyRating(t){const n=this.calculatePowerLevel(t);return n<50?1:n<70?2:n<90?3:n<110?4:5}static getPlaystyleSuggestions(t){const n=[],s=t.startingStats;return s.health>120&&(n.push("Tank"),n.push("Melee Fighter")),s.magicka>120&&(n.push("Mage"),n.push("Spellcaster")),s.stamina>120&&(n.push("Archer"),n.push("Rogue")),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("onehanded"))&&n.push("One-Handed Warrior"),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("destruction"))&&n.push("Destruction Mage"),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("sneak"))&&n.push("Stealth"),[...new Set(n)]}static formatRaceDescription(t){const n=this.calculateRaceStats(t),s=this.getPlaystyleSuggestions(t);let r=t.description;return s.length>0&&(r+=`

Recommended playstyles: ${s.join(", ")}`),r+=`

Starting Stats: Health ${n.totalHealth}, Magicka ${n.totalMagicka}, Stamina ${n.totalStamina}`,r+=`
Abilities: ${n.skillBonusCount} skill bonuses, ${n.racialSpellCount} racial spells`,r}}function ml(e={}){const{includeRelated:t=!1,categoryFilter:n="",searchTerm:s="",sortBy:r="name"}=e,{data:o,loading:i,error:l}=ha(),c=g.useMemo(()=>ht.getUniqueCategories(o),[o]),u=g.useMemo(()=>ht.getUniqueTags(o),[o]),d=g.useMemo(()=>o.filter(y=>!(n&&y.category!==n||s&&ht.search([y],s).length===0)),[o,n,s]),f=g.useMemo(()=>r==="name"?ht.sortByName(d):ht.sortByCategory(d),[d,r]);return{races:o,filteredRaces:f,isLoading:i,error:l,categories:c,tags:u,refresh:async()=>{await ha.getState().load()},getRaceById:y=>ht.getRaceById(o,y),getRacesByCategory:y=>ht.getRacesByCategory(o,y),filterByCategory:y=>ht.filterByCategory(o,y),filterByTag:y=>ht.filterByTags(o,[y]),searchRaces:y=>ht.search(o,y)}}function Pn({raceName:e,size:t="md",className:n}){return a.jsx(uk,{entityName:e,entityType:"race",size:t,className:n})}function Kr({category:e,size:t="md",className:n}){return a.jsx(p8,{category:e,categoryType:"race",size:t,className:n})}const xI={ability:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"},trait:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},flag:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"},skill:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"}},vI={sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1"};function yI(e){const t=e.toLowerCase();return["destruction","restoration","alteration","illusion","conjuration","light armor","heavy armor","one-handed","two-handed","archery","block","smithing","enchanting","alchemy","speechcraft","sneak","lockpicking","pickpocket"].some(n=>t.includes(n))?"skill":["waterbreathing","night eye","claws","histskin","dragonskin","magic resistance","voice of the emperor","battle cry"].some(n=>t.includes(n))?"ability":["strong stomach","beast race","bleeds","natural"].some(n=>t.includes(n))?"trait":"flag"}function bs({keyword:e,type:t,size:n="sm",className:s}){const r=t||yI(e),o=xI[r];return a.jsx(K,{variant:"outline",className:H(o.bg,o.text,o.border,vI[n],"font-medium",s),children:e})}const bI={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",purple:"bg-purple-500",orange:"bg-orange-500"},wI={sm:"h-1.5",md:"h-2",lg:"h-3"};function sr({value:e,maxValue:t,label:n,color:s="blue",size:r="md",showValue:o=!0,className:i}){const l=Math.min(e/t*100,100);return a.jsxs("div",{className:H("space-y-1",i),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:n}),o&&a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),a.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:H("transition-all duration-300 ease-out",bI[s],wI[r]),style:{width:`${l}%`}})})]})}function Ri({effects:e,title:t="Effects",className:n,maxDisplay:s,compact:r=!1,showDescriptions:o=!0}){if(!e||e.length===0)return null;const i=s?e.slice(0,s):e,l=s&&e.length>s;return a.jsxs("div",{className:H("space-y-3",n),children:[t&&a.jsx(rn,{className:"text-lg font-medium text-foreground",children:t}),r?a.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.map((c,u)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:c.description,children:[a.jsx(rt,{className:"h-3 w-3 text-yellow-500"}),a.jsx("span",{className:"font-medium",children:c.name})]},u)),l&&a.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded text-xs text-muted-foreground",children:["+",e.length-s," more"]})]}):a.jsxs("div",{className:"space-y-3",children:[i.map((c,u)=>a.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-muted",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(rt,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h6",{className:"font-medium text-sm",children:c.name}),o&&c.description&&a.jsx(De,{text:c.description,className:"text-xs text-muted-foreground mt-1 leading-relaxed"})]})]})},u)),l&&a.jsxs("div",{className:"text-center text-xs text-muted-foreground py-2",children:["+",e.length-s," more effects"]})]})]})}function eu({stats:e,regeneration:t,title:n="Stats",className:s,showRegeneration:r=!0,compact:o=!1}){return a.jsxs("div",{className:H("space-y-3",s),children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:n}),o&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Health"}),a.jsx("span",{className:"font-medium",children:e.health})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka"}),a.jsx("span",{className:"font-medium",children:e.magicka})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina"}),a.jsx("span",{className:"font-medium",children:e.stamina})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight"}),a.jsx("span",{className:"font-medium",children:e.carryWeight})]})]}),r&&t&&a.jsxs("div",{className:"space-y-2 mt-3",children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Health"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Magicka"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Stamina"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]}),!o&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(sr,{value:e.health,maxValue:200,label:"Health",color:"red",size:"sm"}),a.jsx(sr,{value:e.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),a.jsx(sr,{value:e.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),r&&t&&a.jsxs("div",{className:"space-y-2 mt-3",children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Health"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Magicka"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Stamina"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]})]})}function tu({item:e,className:t,showToggle:n=!0,isExpanded:s=!1,onToggle:r,disableHover:o=!1}){const i=e.originalRace;return a.jsxs(he,{className:t,expanded:s,onToggle:r,disableHover:o,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Pn,{raceName:e.name,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(Qe,{className:"text-primary font-semibold",children:e.name}),e.category&&a.jsx(K,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:e.category})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:n&&a.jsx(bo,{itemId:(i==null?void 0:i.edid)||e.id,itemType:"race",itemName:e.name})})]})}),a.jsx(he.Summary,{children:a.jsx("div",{className:"line-clamp-2",children:a.jsx(De,{text:e.summary||e.description,className:"text-sm text-muted-foreground line-clamp-2"})})}),a.jsxs(he.Details,{children:[a.jsx("div",{children:a.jsx(De,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),(i==null?void 0:i.startingStats)&&a.jsx(eu,{stats:i.startingStats,regeneration:i.regeneration,title:"Starting Attributes",showRegeneration:!1,compact:!1}),(i==null?void 0:i.skillBonuses)&&i.skillBonuses.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Starting Skills"}),a.jsx("div",{className:"space-y-2",children:i.skillBonuses.map((l,c)=>a.jsxs("div",{className:"p-2 rounded bg-muted border text-sm flex items-center justify-between",children:[a.jsxs("span",{className:"font-medium",children:[l.skill," +",l.bonus]}),a.jsx(K,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},c))})]}),(i==null?void 0:i.racialSpells)&&i.racialSpells.length>0&&a.jsx(Ri,{effects:i.racialSpells.map(l=>({name:l.name,description:l.description})),title:"Quirks",showDescriptions:!0})]})]})}function cC(e,t){const n=g.useMemo(()=>e.map(l=>({id:l.edid.toLowerCase().replace("race",""),name:l.name,description:l.description,category:l.category,abilities:l.racialSpells.map(c=>c.name),skills:l.skillBonuses.map(c=>c.skill),keywords:l.keywords.map(c=>c.edid),originalRace:l})),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"abilities",weight:.2},{name:"skills",weight:.1},{name:"keywords",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Xt(n,s),[n,s]),o=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredRaces:g.useMemo(()=>o.map(l=>l.item.originalRace),[o]),searchResults:o,searchableRaces:n}}function Di({races:e,onSelect:t,placeholder:n="Search races...",className:s=""}){const[r,o]=g.useState(""),{filteredRaces:i}=cC(e,r),l=g.useMemo(()=>i.map(d=>({id:d.edid,label:d.name,description:d.description,category:d.category,icon:a.jsx(Pn,{raceName:d.name,size:"sm"}),badge:d.category&&a.jsx(K,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:d.category}),metadata:{originalRace:d}})),[i]),c=d=>{const f=e.find(m=>m.edid===d.id);f&&t(f)},u=(d,f)=>a.jsxs("div",{className:"flex items-center gap-3",children:[d.icon&&a.jsx("div",{className:"flex-shrink-0",children:d.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:d.label}),d.badge&&a.jsx("div",{className:"flex-shrink-0",children:d.badge})]}),d.description&&a.jsx(De,{text:d.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return a.jsx(Jc,{options:l,onSelect:c,placeholder:n,className:s,renderOption:u,emptyMessage:"No races found",searchQuery:r,onSearchQueryChange:o})}function wm({keywords:e,title:t="Keywords",className:n,maxDisplay:s,showCount:r=!0}){if(!e||e.length===0)return null;const o=s?e.slice(0,s):e,i=s&&e.length>s;return a.jsxs("div",{className:H("space-y-3",n),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[t&&a.jsx(rn,{className:"text-lg font-medium text-foreground",children:t}),r&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.length," keyword",e.length!==1?"s":""]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.map((l,c)=>a.jsx(bs,{keyword:l,size:"sm"},c)),i&&a.jsxs("span",{className:"text-xs text-muted-foreground px-2 py-1",children:["+",e.length-s," more"]})]})]})}function uC({item:e,originalRace:t,isExpanded:n=!1,onToggle:s,className:r,showViewAllButton:o=!1,showToggle:i=!0,viewAllButtonText:l="View All",viewAllButtonRoute:c="/race"}){const u=ft(),d=()=>{u(c)},f=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race",m=(e==null?void 0:e.description)||(t==null?void 0:t.description)||"",h=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"",p=(e==null?void 0:e.effects)||[],v=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"";return a.jsxs(y8,{isExpanded:n,onToggle:s||(()=>{}),className:r,children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Pn,{raceName:f,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(Qe,{className:"text-primary font-semibold",children:f}),h&&a.jsx(Kr,{category:h,size:"sm"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[p&&p.length>0&&a.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(rt,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{children:[p.length," effects"]})]})}),o&&a.jsxs(G,{variant:"outline",size:"sm",onClick:d,className:"text-xs",children:[a.jsx(uo,{className:"h-3 w-3 mr-1"}),l]}),i&&a.jsx(bo,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:f})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"line-clamp-2",children:a.jsx(Ze,{className:"text-sm text-muted-foreground",children:v})}),a.jsx(Ri,{effects:p,maxDisplay:2,compact:!0})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{children:a.jsx(Ze,{className:"text-sm text-muted-foreground leading-relaxed",children:m})}),(t==null?void 0:t.startingStats)&&a.jsx(eu,{stats:t.startingStats,regeneration:t.regeneration,title:"Starting Stats"}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&a.jsx(Ri,{effects:t.racialSpells.map(b=>({name:b.name,description:b.description})),title:"Racial Abilities"}),(t==null?void 0:t.keywords)&&t.keywords.length>0&&a.jsx(wm,{keywords:t.keywords.map(b=>b.edid),title:"Keywords"})]})]})}function wb({item:e,originalRace:t,className:n,onClick:s,showViewAllButton:r=!1,showToggle:o=!0,viewAllButtonText:i="View All",viewAllButtonRoute:l="/race"}){const c=ft(),u=m=>{m.stopPropagation(),c(l)},d=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race";e!=null&&e.description||t!=null&&t.description;const f=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"";return e!=null&&e.effects,e!=null&&e.summary||t!=null&&t.description,a.jsxs("div",{className:H("p-4 border rounded-lg bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",n),onClick:s,children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Pn,{raceName:d,size:"2xl"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(Qe,{className:"text-primary font-semibold truncate",children:d}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f&&a.jsx(Kr,{category:f,size:"sm"}),(t==null?void 0:t.startingStats)&&a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-red-500/20 text-red-700 dark:text-red-400 rounded-full text-xs font-medium whitespace-nowrap",children:["❤️ ",t.startingStats.health]}),a.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-blue-500/20 text-blue-700 dark:text-blue-400 rounded-full text-xs font-medium whitespace-nowrap",children:["🔷 ",t.startingStats.magicka]}),a.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-green-500/20 text-green-700 dark:text-green-400 rounded-full text-xs font-medium whitespace-nowrap",children:["💚 ",t.startingStats.stamina]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(rt,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.racialSpells.length," effects"]})]}),o&&a.jsx("div",{onClick:m=>m.stopPropagation(),children:a.jsx(bo,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:d})})]})]}),a.jsxs("div",{className:"space-y-2",children:[(t==null?void 0:t.skillBonuses)&&t.skillBonuses.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-1 justify-items-center",children:t.skillBonuses.map((m,h)=>a.jsxs("div",{className:"px-2 py-1 bg-muted/50 text-muted-foreground rounded text-xs font-medium text-left w-full",children:[m.skill," +",m.bonus]},h))}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:t.racialSpells.map((m,h)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(rt,{className:"h-3 w-3"}),m.name]},h))})]})]})]}),r&&a.jsxs(G,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:u,children:[a.jsx(uo,{className:"h-4 w-4 mr-2"}),i]})]})}function jI({race:e,isOpen:t,onOpenChange:n}){return e?a.jsx(p0,{open:t,onOpenChange:n,side:"right",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Pn,{raceName:e.name,size:"4xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Kr,{category:e.category,size:"sm"}),a.jsx(bo,{itemId:e.edid,itemType:"race",itemName:e.name})]}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description})]})]})}),a.jsxs("div",{className:"space-y-6",children:[e.startingStats&&a.jsxs("div",{children:[a.jsx(Qe,{className:"text-lg font-semibold mb-3",children:"Starting Stats"}),a.jsx(eu,{stats:e.startingStats,regeneration:e.regeneration,title:"",compact:!1})]}),e.skillBonuses&&e.skillBonuses.length>0&&a.jsxs("div",{children:[a.jsx(Qe,{className:"text-lg font-semibold mb-3",children:"Starting Skills"}),a.jsx("div",{className:"space-y-2",children:e.skillBonuses.map((s,r)=>a.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border flex items-center justify-between",children:[a.jsxs("span",{className:"font-medium",children:[s.skill," +",s.bonus]}),a.jsx(K,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},r))})]}),e.racialSpells&&e.racialSpells.length>0&&a.jsxs("div",{children:[a.jsx(Qe,{className:"text-lg font-semibold mb-3",children:"Racial Abilities"}),a.jsx(Ri,{effects:e.racialSpells.map(s=>({name:s.name,description:s.description})),title:"",showDescriptions:!0})]}),e.keywords&&e.keywords.length>0&&a.jsxs("div",{children:[a.jsx(Qe,{className:"text-lg font-semibold mb-3",children:"Keywords"}),a.jsx(wm,{keywords:e.keywords.map(s=>s.edid),title:"",maxDisplay:10})]})]})]})}):null}function jm(e){var t,n;return{...e,id:e.edid,name:e.name,description:e.description,tags:[e.category,...Array.isArray(e.flags)?e.flags:[]],summary:e.description.length>100?`${e.description.substring(0,100)}...`:e.description,effects:[...((t=e.skillBonuses)==null?void 0:t.map(s=>({type:"positive",name:s.skill,description:`+${s.bonus} to ${s.skill}`,value:s.bonus,target:s.skill})))||[],...((n=e.racialSpells)==null?void 0:n.map(s=>({type:"positive",name:s.name,description:s.description})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalRace:e}}function NI({className:e,allRaces:t}){const{build:n,setRace:s}=pt(),r=ft(),[o,i]=g.useState(!0),l=n.race?t.find(m=>m.edid===n.race):null,c=m=>{s(m.edid)},u=()=>{r("/race")},d=()=>{i(!o)};if(!l)return a.jsxs(In,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),a.jsx(Di,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=jm(l);return a.jsxs(In,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx(Di,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),a.jsx(tu,{item:f,isExpanded:o,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}function dC(){const[e,t]=g.useState(null),[n,s]=g.useState("grid"),[r,o]=g.useState([]),i=g.useCallback(f=>{t(f)},[]),l=g.useCallback(f=>{s(f)},[]),c=g.useCallback(f=>{o(m=>m.includes(f)?m.filter(h=>h!==f):[...m,f])},[]),u=g.useCallback(()=>{o([])},[]),d=g.useCallback(f=>{o(f)},[]);return{selectedRace:e,viewMode:n,expandedSections:r,setSelectedRace:i,setViewMode:l,toggleExpandedSection:c,clearExpandedSections:u,expandAllSections:d}}function Nm({races:e}){const[t,n]=g.useState(""),[s,r]=g.useState({search:"",type:"",tags:[]}),o=g.useMemo(()=>ht.getUniqueCategories(e),[e]),i=g.useMemo(()=>ht.getUniqueTags(e),[e]),l=g.useMemo(()=>{let p=e;return t.trim()&&(p=ht.search(p,t)),s.type&&(p=ht.filterByCategory(p,s.type)),s.tags.length>0&&(p=ht.filterByTags(p,s.tags)),ht.sortByName(p)},[e,t,s]),c=g.useCallback(p=>{n(p),r(v=>({...v,search:p}))},[]),u=g.useCallback(p=>{r(p),n(p.search)},[]),d=g.useCallback(()=>{n(""),r({search:"",type:"",tags:[]})},[]),f=g.useCallback(p=>{r(v=>({...v,tags:v.tags.includes(p)?v.tags:[...v.tags,p]}))},[]),m=g.useCallback(p=>{r(v=>({...v,tags:v.tags.filter(b=>b!==p)}))},[]),h=g.useCallback(p=>{r(v=>({...v,type:p}))},[]);return{searchQuery:t,activeFilters:s,filteredRaces:l,categories:o,tags:i,setSearchQuery:c,setFilters:u,clearFilters:d,addTagFilter:f,removeTagFilter:m,setCategoryFilter:h}}function fC({races:e,selectedRaceId:t}){const n=g.useMemo(()=>e.map(u=>ht.transformToPlayerCreationItem(u)),[e]),s=g.useMemo(()=>pI.generateSearchCategories(e),[e]),r=g.useMemo(()=>t&&ht.getRaceById(e,t)||null,[e,t]),o=g.useMemo(()=>r?ht.calculateRaceStats(r):null,[r]),i=g.useMemo(()=>e.length,[e]),l=g.useMemo(()=>{const u=e.reduce((d,f)=>(d[f.category]=(d[f.category]||0)+1,d),{});return Object.entries(u).map(([d,f])=>({category:d,count:f}))},[e]),c=g.useMemo(()=>{const u=e.reduce((d,f)=>{var m;return f.keywords.forEach(h=>{d[h.edid]=(d[h.edid]||0)+1}),(m=f.flags)==null||m.forEach(h=>{d[h]=(d[h]||0)+1}),d},{});return Object.entries(u).map(([d,f])=>({tag:d,count:f})).sort((d,f)=>f.count-d.count)},[e]);return{transformedRaces:n,searchCategories:s,raceStats:o,selectedRaceDetails:r,totalRaces:i,categoriesWithCounts:l,tagsWithCounts:c}}function mC({raceId:e,allRaces:t}){const n=g.useMemo(()=>ht.getRaceById(t,e)||null,[t,e]),s=g.useMemo(()=>n?ht.getRelatedRaces(n,t):[],[n,t]),r=g.useMemo(()=>{if(!n||s.length===0)return null;const u=s[0];return{selectedRace:n,comparedRace:u,differences:{stats:{health:{selected:n.startingStats.health,compared:u.startingStats.health,difference:n.startingStats.health-u.startingStats.health},magicka:{selected:n.startingStats.magicka,compared:u.startingStats.magicka,difference:n.startingStats.magicka-u.startingStats.magicka},stamina:{selected:n.startingStats.stamina,compared:u.startingStats.stamina,difference:n.startingStats.stamina-u.startingStats.stamina},carryWeight:{selected:n.startingStats.carryWeight,compared:u.startingStats.carryWeight,difference:n.startingStats.carryWeight-u.startingStats.carryWeight}},skills:n.skillBonuses.map(d=>{const f=u.skillBonuses.find(m=>m.skill===d.skill);return{skill:d.skill,selected:d.bonus,compared:(f==null?void 0:f.bonus)||0,difference:d.bonus-((f==null?void 0:f.bonus)||0)}}),spells:{selected:n.racialSpells.map(d=>d.name),compared:u.racialSpells.map(d=>d.name),unique:n.racialSpells.filter(d=>!u.racialSpells.some(f=>f.name===d.name)).map(d=>d.name)}}}},[n,s]),o=g.useMemo(()=>s.length>0,[s]),i=g.useMemo(()=>s.length,[s]);return{race:n,relatedRaces:s,raceComparison:r,isLoading:!1,error:null,hasRelatedRaces:o,relatedRacesCount:i}}function hC({className:e}){const{races:t}=ml(),{build:n,setRace:s}=pt(),r=ft(),[o,i]=g.useState(!0),l=n.race?t.find(m=>m.edid===n.race):null,c=m=>{s(m.edid)},u=()=>{r("/build/race")},d=()=>{i(!o)};if(!l)return a.jsxs(In,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),a.jsx(Di,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=jm(l);return a.jsxs(In,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx(Di,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),a.jsx(tu,{item:f,isExpanded:o,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}function gC(){const{build:e}=pt(),{races:t,isLoading:n,error:s}=ml(),{viewMode:r,setViewMode:o}=dC(),{filteredRaces:i}=Nm({races:t}),c=(()=>{const S=[...new Set(t.flatMap(C=>C.keywords.map(_=>_.edid)))],k=[...new Set(t.flatMap(C=>C.skillBonuses.map(_=>_.skill)))],E=[...new Set(t.map(C=>C.category))];return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:S.map(C=>({id:`keyword-${C}`,label:C,value:C,category:"Fuzzy Search",description:`Races with ${C} keyword`}))},{id:"skill-bonuses",name:"Skill Bonuses",placeholder:"Search by skill...",options:k.map(C=>({id:`skill-${C}`,label:C,value:C,category:"Skill Bonuses",description:`Races with ${C} bonus`}))},{id:"categories",name:"Race Categories",placeholder:"Filter by category...",options:E.map(C=>({id:`category-${C}`,label:C,value:C,category:"Race Categories",description:`${C} races`}))}]})(),[u,d]=g.useState([]),f=S=>{let k;typeof S=="string"?k={id:`custom-${S}`,label:S,value:S,category:"Fuzzy Search"}:k={id:`${S.category}-${S.id}`,label:S.label,value:S.value,category:S.category},u.some(E=>E.value===k.value&&E.category===k.category)||d(E=>[...E,k])},m=S=>{d(k=>k.filter(E=>E.id!==S))},h=i.filter(S=>u.length===0?!0:u.every(k=>{switch(k.category){case"Fuzzy Search":return!0;case"Race Categories":return S.category===k.value;case"Skill Bonuses":return S.skillBonuses.some(E=>E.skill===k.value);case"Keywords":return S.keywords.some(E=>E.edid===k.value);default:return!0}})),p=u.filter(S=>S.category==="Fuzzy Search").map(S=>S.value).join(" "),{filteredRaces:v}=cC(h,p),b=v.map(S=>({...jm(S),originalRace:S})),[x,y]=g.useState(null),[w,j]=g.useState(!1),N=S=>{y(S),j(!0)};return n?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading races..."})]})}):s?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:s}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsxs(Fn,{title:"Races",description:"Choose your character's race. Each race has unique abilities, starting attributes, and racial traits that will shape your journey through Tamriel.",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(ba,{categories:c,onSelect:f,onCustomSearch:f})}),a.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[a.jsx(G,{variant:r==="list"?"default":"ghost",size:"sm",onClick:()=>o("list"),className:"h-8 px-3",title:"List view",children:a.jsx(fo,{className:"h-4 w-4"})}),a.jsx(G,{variant:r==="grid"?"default":"ghost",size:"sm",onClick:()=>o("grid"),className:"h-8 px-3",title:"Grid view",children:a.jsx(Ki,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"my-4",children:u.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>d([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Bt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),u.map(S=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(S.id),title:"Click to remove",children:[S.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},S.id))]})}),r==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full",children:b.map(S=>{var E;const k=e.race===((E=S.originalRace)==null?void 0:E.edid);return a.jsx(wb,{item:S,originalRace:S.originalRace,onClick:()=>N(S.originalRace),className:H(k&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}):a.jsx("div",{className:"flex flex-col gap-4 w-full",children:b.map(S=>{var E;const k=e.race===((E=S.originalRace)==null?void 0:E.edid);return a.jsx(wb,{item:S,originalRace:S.originalRace,onClick:()=>N(S.originalRace),className:H(k&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}),b.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No races found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),a.jsx(jI,{race:x,isOpen:w,onOpenChange:j})]})}function SI({initialFilters:e,onFiltersChange:t,onSearch:n,onTagSelect:s,onTagRemove:r}={}){const[o,i]=g.useState(e||{search:"",selectedFilters:{},selectedTags:[]});return g.useEffect(()=>{e&&i(e)},[e]),{filters:o,handleSearch:f=>{const m={...o,search:f};i(m),n==null||n(f)},handleTagSelect:f=>{const m={id:`${f.category}-${f.id}`,label:f.label,value:f.value,category:f.category};if(!o.selectedTags.some(p=>p.id===m.id)){const p={...o,selectedTags:[...o.selectedTags,m]};i(p),s==null||s(m),t==null||t(p)}},handleTagRemove:f=>{const m={...o,selectedTags:o.selectedTags.filter(h=>h.id!==f)};i(m),r==null||r(f),t==null||t(m)},updateFilters:f=>{i(f),t==null||t(f)}}}function kI({className:e}){const{races:t,isLoading:n,error:s,categories:r,tags:o}=ml(),{searchQuery:i,setSearchQuery:l,filteredRaces:c}=Nm({races:t}),u=L.useMemo(()=>c.map(w=>jm(w)),[c]),d=L.useMemo(()=>[{id:"categories",name:"Categories",placeholder:"Search by category...",options:(r||[]).map(w=>({id:w,label:w,value:w,category:"categories",description:`Race category: ${w}`}))},{id:"tags",name:"Tags",placeholder:"Search by tags...",options:(o||[]).map(w=>({id:w,label:w,value:w,category:"tags",description:`Race tag: ${w}`}))}],[r,o]),{filters:f,handleSearch:m,handleTagSelect:h,handleTagRemove:p}=SI({onSearch:l,onFiltersChange:w=>{}});L.useEffect(()=>{i!==f.search&&m(i)},[i,m,f.search]);const[v,b]=L.useState(null),x=w=>{const j=t.find(N=>N.edid===w.id);return j?a.jsx(uC,{item:w,originalRace:j,isExpanded:!1,showToggle:!0,className:"h-full"},j.edid):null},y=w=>{const j=t.find(N=>N.edid===w.id);return j?a.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:j.name}),a.jsx("p",{className:"text-muted-foreground mb-4",children:j.description}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Category:"})," ",j.category]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Health:"})," ",j.startingStats.health]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Magicka:"})," ",j.startingStats.magicka]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Stamina:"})," ",j.startingStats.stamina]})]})]}):null};return n?a.jsx("div",{className:H("container mx-auto p-6",e),children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((w,j)=>a.jsx("div",{className:"h-64 bg-gray-200 rounded"},j))})]})}):s?a.jsx("div",{className:H("container mx-auto p-6",e),children:a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[a.jsx("strong",{children:"Error:"})," ",s]})}):a.jsxs("div",{className:H("container mx-auto p-6",e),children:[a.jsx(o8,{searchCategories:d,selectedTags:f.selectedTags,viewMode:"grid",onTagSelect:h,onTagRemove:p,className:"mb-6"}),a.jsxs(n8,{children:[a.jsx(s8,{children:a.jsx(J6,{items:u,viewMode:"grid",onItemSelect:b,selectedItem:v,renderItemCard:x})}),a.jsx(r8,{children:v?y(v):a.jsx(a8,{title:"Select a Race",description:"Choose a race from the list to view its details"})})]})]})}function CI({className:e,selectedRace:t,onRaceSelect:n,onRaceClear:s,showSearch:r=!0,showComparison:o=!1,maxDisplayRaces:i=3}){const{races:l,isLoading:c,error:u}=ml(),{filteredRaces:d}=Nm({races:l});fC({races:l,selectedRaceId:(t==null?void 0:t.edid)||null});const[f,m]=L.useState(!1);return c?a.jsx("div",{className:H("p-4 border rounded-lg",e),children:a.jsxs("div",{className:"animate-pulse space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),a.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})}):u?a.jsx("div",{className:H("p-4 border rounded-lg",e),children:a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-3 py-2 rounded text-sm",children:[a.jsx("strong",{children:"Error:"})," ",u]})}):a.jsxs("div",{className:H("border rounded-lg overflow-hidden",e),children:[a.jsxs("div",{className:"p-4 bg-muted/50 border-b",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Qe,{className:"text-lg font-semibold",children:"Race Selection"}),t&&a.jsx(G,{variant:"ghost",size:"sm",onClick:s,className:"text-muted-foreground hover:text-foreground",children:a.jsx(Bt,{className:"h-4 w-4"})})]}),t&&a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx(K,{variant:"secondary",children:t.category}),a.jsxs(Ze,{className:"text-sm text-muted-foreground",children:[t.startingStats.health," HP, ",t.startingStats.magicka," MP, ",t.startingStats.stamina," SP"]})]})]}),a.jsx("div",{className:"p-4",children:t?a.jsxs("div",{className:"space-y-4",children:[a.jsx(tu,{item:{id:t.edid,name:t.name,description:t.description,summary:t.description,category:t.category,effects:[],tags:[],originalRace:t},isExpanded:!0,showToggle:!1,className:"border-0 shadow-none"}),o&&a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx(Ze,{className:"text-sm font-medium mb-2",children:"Compare with:"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.filter(h=>h.edid!==t.edid).slice(0,4).map(h=>a.jsx(G,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(h),className:"justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-xs",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))})]})]}):a.jsxs("div",{className:"space-y-4",children:[r&&a.jsxs("div",{children:[a.jsx(Ze,{className:"text-sm font-medium mb-2",children:"Search for a race:"}),a.jsx(Di,{races:d,onSelect:n,placeholder:"Type to search races...",className:"w-full"})]}),a.jsxs("div",{children:[a.jsx(Ze,{className:"text-sm font-medium mb-2",children:"Quick select:"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.slice(0,i).map(h=>a.jsx(G,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(h),className:"justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-xs",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))}),l.length>i&&a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>m(!f),className:"mt-2 w-full",children:[a.jsx(En,{className:H("h-4 w-4 transition-transform",f&&"rotate-180")}),"Show ",l.length-i," more races"]})]}),f&&a.jsx("div",{className:"space-y-2",children:l.slice(i).map(h=>a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>n==null?void 0:n(h),className:"w-full justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-xs",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))})]})})]})}function EI({raceId:e,className:t}){const n=ft(),{race:s,relatedRaces:r}=mC(e);return ml(),s?a.jsxs("div",{className:H("container mx-auto p-6",t),children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs(G,{variant:"ghost",onClick:()=>n("/races"),className:"mb-4",children:[a.jsx(Ng,{className:"h-4 w-4 mr-2"}),"Back to Races"]}),a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx(Pn,{raceName:s.name,size:"xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(yo,{className:"text-3xl font-bold",children:s.name}),a.jsx(Kr,{category:s.category,size:"lg"})]}),a.jsx(Ze,{className:"text-lg text-muted-foreground mb-4",children:s.description}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(FN,{className:"h-4 w-4"}),a.jsx("span",{children:"Playable Race"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(rt,{className:"h-4 w-4"}),a.jsxs("span",{children:[s.keywords.length," Keywords"]})]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(Wr,{className:"text-xl font-semibold mb-4",children:"Statistics"}),a.jsx(eu,{stats:s.startingStats,regeneration:s.regeneration,title:"Starting Stats",compact:!1,showRegeneration:!0})]}),s.racialSpells.length>0&&a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(Wr,{className:"text-xl font-semibold mb-4",children:"Racial Abilities"}),a.jsx(Ri,{effects:s.racialSpells.map(o=>({name:o.name,description:o.description})),title:"Racial Spells",showDescriptions:!0,compact:!1})]}),s.keywords.length>0&&a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(Wr,{className:"text-xl font-semibold mb-4",children:"Keywords"}),a.jsx(wm,{keywords:s.keywords.map(o=>o.edid),title:"Race Keywords",showCount:!0})]}),a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(Wr,{className:"text-xl font-semibold mb-4",children:"Additional Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Qe,{className:"text-lg font-medium mb-2",children:"Description"}),a.jsx(Ze,{className:"text-muted-foreground",children:s.description})]}),s.racialSpells.length>0&&a.jsxs("div",{children:[a.jsx(Qe,{className:"text-lg font-medium mb-2",children:"Racial Spells"}),a.jsx("div",{className:"space-y-2",children:s.racialSpells.map((o,i)=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"font-medium",children:o.name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:o.description})]},i))})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[a.jsx(Qe,{className:"text-lg font-semibold mb-3",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(G,{className:"w-full",size:"sm",children:"Add to Character Build"}),a.jsx(G,{variant:"outline",className:"w-full",size:"sm",children:"Compare with Other Races"}),a.jsxs(G,{variant:"outline",className:"w-full",size:"sm",children:[a.jsx(uo,{className:"h-4 w-4 mr-2"}),"View in Wiki"]})]})]}),a.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[a.jsx(Qe,{className:"text-lg font-semibold mb-3",children:"Race Summary"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Category:"}),a.jsx(K,{variant:"secondary",children:s.category})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Health:"}),a.jsx("span",{className:"font-medium",children:s.startingStats.health})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka:"}),a.jsx("span",{className:"font-medium",children:s.startingStats.magicka})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina:"}),a.jsx("span",{className:"font-medium",children:s.startingStats.stamina})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight:"}),a.jsx("span",{className:"font-medium",children:s.startingStats.carryWeight})]})]})]}),r.length>0&&a.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[a.jsx(Qe,{className:"text-lg font-semibold mb-3",children:"Related Races"}),a.jsx("div",{className:"space-y-2",children:r.slice(0,3).map(o=>a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>n(`/races/${o.edid}`),className:"w-full justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pn,{raceName:o.name,size:"sm"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm",children:o.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:o.category})]})]})},o.edid))})]})]})]})]}):a.jsxs("div",{className:H("container mx-auto p-6",t),children:[a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[a.jsx("strong",{children:"Error:"})," ","Race not found"]}),a.jsxs(G,{variant:"outline",onClick:()=>n("/races"),className:"mt-4",children:[a.jsx(Ng,{className:"h-4 w-4 mr-2"}),"Back to Races"]})]})}function _I(){const{races:e,isLoading:t,error:n,categories:s,tags:r}=ml(),{selectedRace:o,setSelectedRace:i,viewMode:l,setViewMode:c,expandedSections:u}=dC(),{searchQuery:d,setSearchQuery:f,activeFilters:m,clearFilters:h,filteredRaces:p}=Nm({races:e}),{transformedRaces:v,searchCategories:b,categoriesWithCounts:x}=fC({races:e,selectedRaceId:o}),{race:y,relatedRaces:w,raceComparison:j}=mC({raceId:o||"",allRaces:e}),[N,S]=L.useState(!1),[k,E]=L.useState("overview");if(t)return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Loading..."}),a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]});if(n)return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Error"}),a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[a.jsx("strong",{children:"Error:"})," ",n]})]});const C=e[0];return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Races MVA Demo - Model View Adapter Architecture"}),a.jsxs(il,{value:k,onValueChange:E,className:"mb-6",children:[a.jsxs(ll,{children:[a.jsx(an,{value:"overview",children:"Overview"}),a.jsx(an,{value:"adapters",children:"Adapters"}),a.jsx(an,{value:"components",children:"Components"}),a.jsx(an,{value:"views",children:"Views"})]}),a.jsx(wn,{value:"overview",className:"space-y-6",children:a.jsxs(xe,{children:[a.jsxs(_e,{children:[a.jsx(Re,{children:"MVA Architecture Overview"}),a.jsx(Ss,{children:"This demo showcases the Model-View-Adapter pattern implementation for the Races feature."})]}),a.jsx(ve,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Model Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Data management and business logic"}),a.jsx(K,{variant:"outline",className:"mt-2",children:"RaceModel"})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Adapter Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"State management and data transformation"}),a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.jsx(K,{variant:"outline",children:"useRaceData"}),a.jsx(K,{variant:"outline",children:"useRaceState"}),a.jsx(K,{variant:"outline",children:"useRaceFilters"})]})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"View Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"UI components and presentation"}),a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.jsx(K,{variant:"outline",children:"RaceCard"}),a.jsx(K,{variant:"outline",children:"RacePageView"})]})]})]})})]})}),a.jsx(wn,{value:"adapters",className:"space-y-6",children:a.jsxs(xe,{children:[a.jsxs(_e,{children:[a.jsx(Re,{children:"Adapter State Demo"}),a.jsx(Ss,{children:"Interactive demonstration of adapter state management"})]}),a.jsx(ve,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"State Management (useRaceState)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Selected Race:"}),a.jsx(K,{variant:o?"default":"secondary",children:o||"None"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"View Mode:"}),a.jsxs("div",{className:"flex border rounded",children:[a.jsx(G,{variant:l==="grid"?"default":"ghost",size:"sm",onClick:()=>c("grid"),children:"Grid"}),a.jsx(G,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),children:"List"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Expanded Sections:"}),a.jsx(K,{variant:"outline",children:u.length})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Filters (useRaceFilters)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Search Query:"}),a.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),className:"px-2 py-1 border rounded text-sm",placeholder:"Search races..."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Active Filters:"}),a.jsx(K,{variant:"outline",children:m.tags.length+(m.type?1:0)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Filtered Results:"}),a.jsxs(K,{variant:"outline",children:[p.length," of ",e.length]})]}),a.jsx(G,{size:"sm",onClick:h,children:"Clear Filters"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Computed Data (useRaceComputed)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Transformed Races:"}),a.jsx(K,{variant:"outline",children:v.length})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Search Categories:"}),a.jsx(K,{variant:"outline",children:b.length})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Categories with Counts:"}),a.jsx(K,{variant:"outline",children:Object.keys(x).length})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Detail View (useRaceDetail)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Selected Race Details:"}),a.jsx(K,{variant:y?"default":"secondary",children:(y==null?void 0:y.name)||"None"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Related Races:"}),a.jsx(K,{variant:"outline",children:w.length})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Comparison Available:"}),a.jsx(K,{variant:j?"default":"secondary",children:j?"Yes":"No"})]})]})]})]})})]})}),a.jsxs(wn,{value:"components",className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Atomic & Composition Components"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Data Summary"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Total Races:"})," ",e.length]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Categories:"})," ",s.join(", ")]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Total Tags:"})," ",r.length]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Sample Race: ",C==null?void 0:C.name]}),C&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-gray-600 text-sm",children:C.description}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Category:"})," ",C.category]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Keywords:"})," ",C.keywords.length]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAvatar Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),a.jsx(Pn,{raceName:(C==null?void 0:C.name)||"Nord",size:"sm"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),a.jsx(Pn,{raceName:(C==null?void 0:C.name)||"Nord",size:"lg"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),a.jsx(Pn,{raceName:(C==null?void 0:C.name)||"Nord",size:"2xl"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Extra Large"}),a.jsx(Pn,{raceName:(C==null?void 0:C.name)||"Nord",size:"xl"})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Uses generic EntityAvatar with race-specific configuration"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CategoryBadge Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),a.jsx(Kr,{category:"Human",size:"sm"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),a.jsx(Kr,{category:"Elf",size:"md"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),a.jsx(Kr,{category:"Beast",size:"lg"})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Uses generic CategoryBadge with race-specific styling"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"KeywordTag Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Auto-detected types:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(bs,{keyword:"destruction"}),a.jsx(bs,{keyword:"waterbreathing"}),a.jsx(bs,{keyword:"strong stomach"}),a.jsx(bs,{keyword:"custom_flag"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Explicit types:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(bs,{keyword:"alteration",type:"skill"}),a.jsx(bs,{keyword:"night eye",type:"ability"}),a.jsx(bs,{keyword:"beast race",type:"trait"}),a.jsx(bs,{keyword:"magic",type:"flag"})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Auto-detects keyword types or accepts explicit type prop"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"StatBar Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(sr,{value:C.startingStats.health,maxValue:200,label:"Health",color:"red",size:"md"}),a.jsx(sr,{value:C.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"md"}),a.jsx(sr,{value:C.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"md"})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Progress bars with configurable colors, sizes, and labels"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceStatsDisplay Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&a.jsx(eu,{stats:C.startingStats,regeneration:C.regeneration,title:"Sample Stats",compact:!0}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Composition component that displays race statistics"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceEffectsDisplay Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&C.racialSpells.length>0&&a.jsx(Ri,{effects:C.racialSpells.map(_=>({name:_.name,description:_.description})),title:"Racial Abilities",maxDisplay:3}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Composition component for displaying race effects/abilities"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceKeywordsDisplay Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&C.keywords.length>0&&a.jsx(wm,{keywords:C.keywords.map(_=>_.edid),title:"Race Keywords",maxDisplay:6}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Composition component that uses KeywordTag atomic components"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceCard Composition Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&a.jsx(uC,{originalRace:C,isExpanded:!0,showToggle:!1,className:"max-w-2xl"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Main composition component that orchestrates all atomic components"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAutocomplete Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Di,{races:e.slice(0,5),onSelect:_=>console.log("Selected:",_.name),placeholder:"Search for a race...",className:"w-full"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Search and selection component for races"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAccordion Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&a.jsx(tu,{item:{id:C.edid,name:C.name,description:C.description,summary:C.description,category:C.category,effects:[],tags:[],originalRace:C},isExpanded:N,onToggle:()=>S(!N),showToggle:!0,className:"border-0 shadow-none"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Accordion-style race display for player creation (click to expand/collapse)"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceSelectionCard Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(NI,{allRaces:e.slice(0,5),className:"max-w-2xl"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Complete race selection interface for player creation"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sample Races with All Components"}),a.jsx("div",{className:"space-y-4",children:e.slice(0,2).map(_=>a.jsxs("div",{className:"border rounded p-4",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[a.jsx(Pn,{raceName:_.name,size:"2xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:_.name}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx(Kr,{category:_.category,size:"sm"})})]})]}),a.jsx("p",{className:"text-sm mb-3",children:_.description}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[a.jsx(sr,{value:_.startingStats.health,maxValue:200,label:"Health",color:"red",size:"sm"}),a.jsx(sr,{value:_.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),a.jsx(sr,{value:_.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.keywords.slice(0,5).map((P,O)=>a.jsx(bs,{keyword:P.edid},O)),_.keywords.length>5&&a.jsxs("span",{className:"text-xs text-gray-500",children:["+",_.keywords.length-5," more"]})]})]},_.edid))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"View Components Demo"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceQuickSelectorView"}),a.jsx(CI,{selectedRace:o?e.find(_=>_.edid===o):void 0,onRaceSelect:_=>i(_.edid),onRaceClear:()=>i(null),showSearch:!0,showComparison:!0,maxDisplayRaces:3,className:"max-w-md"}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:a.jsx("p",{children:"Compact selection interface for embedded contexts"})})]}),o&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceDetailView"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx(EI,{raceId:o,className:"p-4"})}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:a.jsx("p",{children:"Detailed race view with rich information display"})})]})]})]})]})]}),a.jsxs(wn,{value:"views",className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"View Components"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(_e,{children:[a.jsx(Re,{children:"RacePageView"}),a.jsx(Ss,{children:"Main page view with full functionality"})]}),a.jsx(ve,{children:a.jsx(gC,{className:"border rounded-lg p-4"})})]}),a.jsxs(xe,{children:[a.jsxs(_e,{children:[a.jsx(Re,{children:"RaceReferenceView"}),a.jsx(Ss,{children:"Browse/search interface"})]}),a.jsx(ve,{children:a.jsx(kI,{className:"border rounded-lg p-4"})})]})]})]})]})]})}function ph({text:e,className:t="text-sm text-muted-foreground"}){if(!e)return null;let n=e.replace(/<[^>]*>/g,"");n=n.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const s=n.split(/(<[^>]+>)/g);return a.jsx("div",{className:t,children:s.map((r,o)=>{if(r.startsWith("<")&&r.endsWith(">")){const i=r.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:i},o)}return r})})}function AI({description:e}){if(!e)return null;const t=e.split(/(<[^>]+>)/g);return a.jsx(Ze,{className:"text-xs text-muted-foreground",children:t.map((n,s)=>{if(n.startsWith("<")&&n.endsWith(">")){const r=n.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:r},s)}return n})})}function xh({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=e.replace(/<[^>]*>/g,"");r=r.replace(/<mag>/g,t.toString()),r=r.replace(/<magnitude>/g,t.toString()),r=r.replace(/<dur>/g,n.toString()),r=r.replace(/<duration>/g,n.toString()),s>0&&(r=r.replace(/<area>/g,s.toString())),r=r.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const o=r.split(/(<[^>]+>)/g);return a.jsx(Ze,{className:"text-xs text-muted-foreground",children:o.map((i,l)=>{if(i.startsWith("<")&&i.endsWith(">")){const c=i.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:c},l)}return i})})}function vh(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function yh(e){const t=[/<mag>/g,/<magnitude>/g],n=[/<dur>/g,/<duration>/g],s=t.some(o=>o.test(e)),r=n.some(o=>o.test(e));return{hasMagnitude:s,hasDuration:r}}const TI={Restoration:a.jsx(Qi,{className:"h-4 w-4 text-green-500"}),Destruction:a.jsx(Zf,{className:"h-4 w-4 text-red-500"}),Alteration:a.jsx(es,{className:"h-4 w-4 text-blue-500"}),Illusion:a.jsx(xy,{className:"h-4 w-4 text-purple-500"}),Conjuration:a.jsx(zs,{className:"h-4 w-4 text-purple-500"}),Enchanting:a.jsx(Hc,{className:"h-4 w-4 text-blue-500"}),Alchemy:a.jsx(b4,{className:"h-4 w-4 text-green-500"}),"Light Armor":a.jsx(es,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":a.jsx(es,{className:"h-4 w-4 text-gray-500"}),"One-Handed":a.jsx(Sg,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":a.jsx(Sg,{className:"h-4 w-4 text-red-500"}),Archery:a.jsx(Pd,{className:"h-4 w-4 text-green-500"}),Block:a.jsx(es,{className:"h-4 w-4 text-yellow-500"}),Smithing:a.jsx(es,{className:"h-4 w-4 text-gray-500"}),Speechcraft:a.jsx(xy,{className:"h-4 w-4 text-blue-500"}),Sneak:a.jsx(Gf,{className:"h-4 w-4 text-purple-500"}),Lockpicking:a.jsx(vy,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:a.jsx(vy,{className:"h-4 w-4 text-purple-500"})},MI={Divine:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Daedric:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Aedric:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Tribal:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Ancestral:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},jb={sm:"text-xs px-2 py-0.5"};function nf({item:e,originalReligion:t,isExpanded:n=!1,onToggle:s,className:r,showBlessings:o=!0,showTenets:i=!0,showBoons:l=!0,showFavoredRaces:c=!0,disableHover:u,showToggle:d}){var h,p,v,b,x,y,w,j;const f=N=>{switch(N){case"positive":return a.jsx(na,{className:"h-4 w-4 text-green-500"});case"negative":return a.jsx(Gl,{className:"h-4 w-4 text-red-500"});case"neutral":return a.jsx(jx,{className:"h-4 w-4 text-blue-500"})}},m=N=>TI[N]||a.jsx(rt,{className:"h-4 w-4 text-skyrim-gold"});return a.jsxs(he,{expanded:n,onToggle:s,className:r,disableHover:u,children:[a.jsxs(he.Header,{children:[d&&a.jsx(bo,{itemId:e.id,itemType:"religion",itemName:e.name}),a.jsx("div",{className:"flex-1",children:a.jsx(Qe,{className:"text-primary font-semibold",children:e.name})}),e.category&&a.jsx(K,{variant:"outline",className:H(MI[e.category]||"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",jb.sm,"font-medium transition-colors"),children:e.category}),Yt()&&c&&t&&Array.isArray(t.favoredRaces)&&t.favoredRaces.length>0&&a.jsx("div",{className:"flex items-center gap-1",children:t.favoredRaces.map((N,S)=>a.jsxs(K,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20",jb.sm,"font-medium transition-colors"),children:[a.jsx(rt,{className:"h-3 w-3 mr-1"}),"Favors ",N]},S))})]}),a.jsxs(he.Summary,{children:[a.jsx("div",{className:"line-clamp-2",children:a.jsx(ph,{text:e.summary||e.description,className:"text-sm text-muted-foreground"})}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[(h=e.effects)==null?void 0:h.slice(0,2).map((N,S)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:N.description,children:[f(N.type),a.jsx("span",{className:"font-medium",children:N.name})]},S)),Yt()&&c&&((p=t==null?void 0:t.favoredRaces)==null?void 0:p.slice(0,2).map((N,S)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",children:[a.jsx(rt,{className:"h-3 w-3 text-skyrim-gold"}),a.jsx("span",{className:"font-medium",children:N})]},`race-${S}`)))]})]}),a.jsxs(he.Details,{children:[e.description&&a.jsx("div",{children:a.jsx(ph,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),Yt()&&c&&Array.isArray(t==null?void 0:t.favoredRaces)&&t.favoredRaces.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Favored Races"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:t.favoredRaces.map((N,S)=>a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg border border-border",children:[a.jsx(rt,{className:"h-4 w-4 text-skyrim-gold"}),a.jsx("span",{className:"text-sm font-medium",children:N})]},S))})]}),Array.isArray(t==null?void 0:t.worshipRestrictions)&&t.worshipRestrictions.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Worship Restrictions"}),a.jsx("div",{className:"space-y-2",children:t.worshipRestrictions.map((N,S)=>a.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Gl,{className:"h-4 w-4 text-red-500 mt-0.5"}),a.jsx(ph,{text:N,className:"text-sm text-muted-foreground"})]})},S))})]}),o&&Array.isArray((v=t==null?void 0:t.blessing)==null?void 0:v.effects)&&t.blessing.effects.length>0&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Blessing of ",e.name]}),a.jsx("div",{className:"space-y-3",children:t.blessing.effects.filter(N=>N.effectType!=="1"&&N.effectType!=="3").map((N,S)=>{const{hasDuration:k}=yh(N.effectDescription);return a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.effectType&&m(N.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Ze,{className:"font-medium text-sm mb-1",children:N.effectName}),a.jsx(xh,{description:N.effectDescription,magnitude:N.magnitude,duration:N.duration,area:N.area}),k&&N.duration>0&&a.jsxs(Ze,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for ",vh(N.duration),"."]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:N.area>0&&a.jsxs("span",{children:["Area: ",N.area]})})]})]})},S)})})]}),i&&Array.isArray((b=t==null?void 0:t.tenet)==null?void 0:b.effects)&&t.tenet.effects.length>0&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Tenets of ",e.name]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.tenet.effects.map((N,S)=>N.effectDescription.split(".").filter(E=>E.trim().length>0).map((E,C)=>a.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.targetAttribute&&m(N.targetAttribute)]}),a.jsx("div",{className:"flex-1",children:a.jsx(AI,{description:E.trim()+"."})})]},`${S}-${C}`)))})]}),l&&(Array.isArray((x=t==null?void 0:t.boon1)==null?void 0:x.effects)&&t.boon1.effects.length>0||Array.isArray((y=t==null?void 0:t.boon2)==null?void 0:y.effects)&&t.boon2.effects.length>0)&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Boons of ",e.name]}),a.jsxs("div",{className:"space-y-4",children:[Array.isArray((w=t==null?void 0:t.boon1)==null?void 0:w.effects)&&t.boon1.effects.length>0&&a.jsxs("div",{children:[a.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Follower Boon"}),a.jsx("div",{className:"space-y-3",children:t.boon1.effects.map((N,S)=>{const{hasDuration:k}=yh(N.effectDescription);return a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.effectType&&m(N.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Ze,{className:"font-medium text-sm mb-1",children:N.effectName}),a.jsx(xh,{description:N.effectDescription,magnitude:N.magnitude,duration:N.duration,area:N.area}),k&&N.duration>0&&a.jsxs(Ze,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",vh(N.duration),"."]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:N.area>0&&a.jsxs("span",{children:["Area: ",N.area]})})]})]})},S)})})]}),Array.isArray((j=t==null?void 0:t.boon2)==null?void 0:j.effects)&&t.boon2.effects.length>0&&a.jsxs("div",{children:[a.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Devotee Boon"}),a.jsx("div",{className:"space-y-3",children:t.boon2.effects.map((N,S)=>{const{hasDuration:k}=yh(N.effectDescription);return a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.effectType&&m(N.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Ze,{className:"font-medium text-sm mb-1",children:N.effectName}),a.jsx(xh,{description:N.effectDescription,magnitude:N.magnitude,duration:N.duration,area:N.area}),k&&N.duration>0&&a.jsxs(Ze,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",vh(N.duration),"."]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:N.area>0&&a.jsxs("span",{children:["Area: ",N.area]})})]})]})},S)})})]})]})]})]})]})}function RI(){const{data:e,loading:t,error:n}=ck();return{religions:e||[],loading:t,error:n}}function DI(e){var t,n,s,r;return{id:e.name.toLowerCase().replace(/\s+/g,"-"),name:e.name,type:e.type,description:((t=e.tenet)==null?void 0:t.description)||"",tenetDescription:((n=e.tenet)==null?void 0:n.description)||"",followerPower:((s=e.boon1)==null?void 0:s.spellName)||"",devoteePower:((r=e.boon2)==null?void 0:r.spellName)||"",favoredRaces:e.favoredRaces||[],worshipRestrictions:e.worshipRestrictions||[],originalReligion:e}}function zI(e){return e.map(DI)}function LI(e,t){return e.find(n=>n.name.toLowerCase().replace(/\s+/g,"-")===t)}function $I(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u,d,f,m,h,p,v,b;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:((c=l.tenet)==null?void 0:c.description)||"",type:l.type,favoredRaces:Yt()?l.favoredRaces||[]:[],tenetEffects:((d=(u=l.tenet)==null?void 0:u.effects)==null?void 0:d.map(x=>`${x.effectName} ${x.effectDescription}`))||[],blessingEffects:((m=(f=l.blessing)==null?void 0:f.effects)==null?void 0:m.map(x=>`${x.effectName} ${x.effectDescription}`))||[],followerPowers:((p=(h=l.boon1)==null?void 0:h.effects)==null?void 0:p.map(x=>`${x.effectName} ${x.effectDescription}`))||[],devoteePowers:((b=(v=l.boon2)==null?void 0:v.effects)==null?void 0:b.map(x=>`${x.effectName} ${x.effectDescription}`))||[],originalReligion:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"tenetEffects",weight:.2},{name:"blessingEffects",weight:.2},{name:"followerPowers",weight:.15},{name:"devoteePowers",weight:.15},...Yt()?[{name:"favoredRaces",weight:.1}]:[],{name:"type",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Xt(n,s),[n,s]),o=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredReligions:g.useMemo(()=>o.map(l=>l.item.originalReligion),[o]),searchResults:o,searchableReligions:n}}function Nb({religions:e,selectedDeityId:t,onDeitySelect:n,placeholder:s="Search for a deity to follow...",className:r,disabled:o=!1}){const[i,l]=g.useState(""),{filteredReligions:c}=$I(e,i),u=g.useMemo(()=>zI(c),[c]),d=p=>{const v={Divine:"bg-blue-100 text-blue-800 border-blue-200","Daedric Prince":"bg-red-100 text-red-800 border-red-200",Tribunal:"bg-purple-100 text-purple-800 border-purple-200",Ancestor:"bg-green-100 text-green-800 border-green-200","Nordic Deity":"bg-orange-100 text-orange-800 border-orange-200","Yokudan Deity":"bg-yellow-100 text-yellow-800 border-yellow-200","Khajiiti Deity":"bg-indigo-100 text-indigo-800 border-indigo-200",Deity:"bg-gray-100 text-gray-800 border-gray-200"};return a.jsx(K,{variant:"outline",className:H("text-xs font-medium",v[p]||v.Deity),children:p})},f=g.useMemo(()=>u.map(p=>({id:p.id,label:p.name,description:p.tenetDescription,category:p.type,badge:d(p.type),metadata:{originalReligion:p.originalReligion,favoredRaces:p.favoredRaces}})),[u]),m=p=>{n(p.id)},h=(p,v)=>{var b;return a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium",children:p.label}),p.badge]}),p.description&&a.jsx(De,{text:p.description,className:"text-sm text-muted-foreground line-clamp-2 mb-1"}),Yt()&&((b=p.metadata)==null?void 0:b.favoredRaces)&&p.metadata.favoredRaces.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(rt,{className:"h-3 w-3 text-skyrim-gold"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["Favors: ",p.metadata.favoredRaces.join(", ")]})]})]})})};return a.jsx(Jc,{options:f,onSelect:m,placeholder:s,className:r,disabled:o,renderOption:h,emptyMessage:"No deity found.",searchQuery:i,onSearchQueryChange:l})}function pC({className:e}){const{religions:t,loading:n,error:s}=RI(),{build:r,setReligion:o}=pt(),i=ft(),[l,c]=g.useState(!0),u=r.religion?LI(t,r.religion):null,d=()=>{i("/build/religions")},f=()=>{c(!l)};if(n)return a.jsx(In,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading religions..."})});if(s)return a.jsx(In,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:a.jsxs("div",{className:"text-sm text-destructive",children:["Error loading religions: ",s]})});if(!u)return a.jsxs(In,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's religion"}),a.jsx(Nb,{religions:t,selectedDeityId:r.religion,onDeitySelect:o,placeholder:"Search for a religion...",className:"w-full"})]});const m=Yg(u);return a.jsxs(In,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[a.jsx(Nb,{religions:t,selectedDeityId:r.religion,onDeitySelect:o,placeholder:`Religion: Select a religion (${u.name})`,className:"w-full"}),a.jsx(nf,{item:m,originalReligion:u,isExpanded:l,onToggle:f,className:"border-0 shadow-none",disableHover:!0,showToggle:!1,showBlessings:!1,showTenets:!0,showBoons:!0,showFavoredRaces:Yt()})]})}function xC({level:e,size:t="sm"}){const n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return e<=0?null:a.jsxs(K,{variant:"secondary",className:H("bg-blue-100 text-blue-800 border-blue-200",n[t]),children:["Min: Level ",e]})}function PI({name:e,description:t,category:n,assignmentType:s,perkCount:r,level:o,onSelect:i,onMajorClick:l,onMinorClick:c,canAssignMajor:u,canAssignMinor:d,className:f}){const m=p=>{p.stopPropagation(),l(p)},h=p=>{p.stopPropagation(),c(p)};return a.jsxs("div",{className:H("p-4 border rounded-lg hover:bg-muted/50 transition-colors",f),onClick:i,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg cursor-pointer",children:e}),a.jsx(OI,{type:s})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:t}),a.jsxs("div",{className:"flex gap-2 flex-wrap mb-4",children:[a.jsx(BI,{category:n}),a.jsx(II,{count:r}),typeof o=="number"&&o>0&&a.jsx(xC,{level:o})]}),a.jsxs("div",{className:"flex gap-2","data-assignment-control":!0,children:[a.jsx(G,{size:"sm",variant:s==="major"?"default":"outline",onClick:m,disabled:!u&&s!=="major",className:H("flex-1 text-xs",s==="major"&&"bg-yellow-600 hover:bg-yellow-700 text-white border-yellow-500"),children:s==="major"?"Remove Major":"Major"}),a.jsx(G,{size:"sm",variant:s==="minor"?"default":"outline",onClick:h,disabled:!d&&s!=="minor",className:H("flex-1 text-xs",s==="minor"&&"bg-gray-500 hover:bg-gray-600 text-white border-gray-400"),children:s==="minor"?"Remove Minor":"Minor"})]})]})}function OI({type:e,size:t="sm"}){const n={major:"bg-yellow-600 text-white hover:bg-yellow-700 border-yellow-500",minor:"bg-gray-500 text-white hover:bg-gray-600 border-gray-400",none:"bg-gray-100 text-gray-800 border border-gray-300"},s={major:"Major",minor:"Minor",none:"Unassigned"},r={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return a.jsx(K,{className:H(n[e],r[t]),children:s[e]})}function BI({category:e,size:t="sm"}){const n={Combat:"bg-red-100 text-red-800 border-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200"},s={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return a.jsx(K,{variant:"outline",className:H(n[e]||"bg-gray-100 text-gray-800 border-gray-300",s[t]),children:e})}function II({count:e,size:t="sm"}){const n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return a.jsxs(K,{variant:"secondary",className:H("bg-purple-100 text-purple-800 border-purple-200",n[t]),children:[e," Perks"]})}function HI(){return a.jsx("div",{className:"container mx-auto p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Loading Skills..."}),a.jsx("p",{className:"text-muted-foreground",children:"Initializing skill and perk data..."})]})})}function UI({error:e}){return a.jsx("div",{className:"container mx-auto p-6",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(ji,{className:"h-12 w-12 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Error Loading Skills"}),a.jsx("p",{className:"text-muted-foreground",children:e})]})})}function FI({skills:e,onSkillSelect:t,onAssignMajor:n,onAssignMinor:s,onRemoveAssignment:r,selectedSkillId:o,className:i}){return a.jsx("div",{className:H("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",i),children:e.map(l=>a.jsx(PI,{name:l.name,description:l.description,category:l.category,assignmentType:l.assignmentType,perkCount:l.perkCount,level:l.level,canAssignMajor:l.canAssignMajor,canAssignMinor:l.canAssignMinor,onSelect:()=>t(l.id),onMajorClick:c=>{c.preventDefault(),n(l.id)},onMinorClick:c=>{c.preventDefault(),s(l.id)},className:o===l.id?"ring-2 ring-primary bg-primary/5":""},l.id))})}function VI({query:e,onQueryChange:t,placeholder:n="Search skills...",className:s}){return a.jsx("div",{className:H("mb-6",s),children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(Si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(_s,{placeholder:n,value:e,onChange:r=>t(r.target.value),className:"pl-10"})]})})}function Jt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,s;n<e.length;n++)(s=Jt(e[n]))!==""&&(t+=(t&&" ")+s);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var vC={exports:{}},yC={},bC={exports:{}},wC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zi=g;function qI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var GI=typeof Object.is=="function"?Object.is:qI,ZI=zi.useState,YI=zi.useEffect,XI=zi.useLayoutEffect,WI=zi.useDebugValue;function KI(e,t){var n=t(),s=ZI({inst:{value:n,getSnapshot:t}}),r=s[0].inst,o=s[1];return XI(function(){r.value=n,r.getSnapshot=t,bh(r)&&o({inst:r})},[e,n,t]),YI(function(){return bh(r)&&o({inst:r}),e(function(){bh(r)&&o({inst:r})})},[e]),WI(n),n}function bh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!GI(e,n)}catch{return!0}}function QI(e,t){return t()}var JI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?QI:KI;wC.useSyncExternalStore=zi.useSyncExternalStore!==void 0?zi.useSyncExternalStore:JI;bC.exports=wC;var e9=bC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm=g,t9=e9;function n9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var s9=typeof Object.is=="function"?Object.is:n9,r9=t9.useSyncExternalStore,a9=Sm.useRef,o9=Sm.useEffect,i9=Sm.useMemo,l9=Sm.useDebugValue;yC.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var o=a9(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=i9(function(){function c(h){if(!u){if(u=!0,d=h,h=s(h),r!==void 0&&i.hasValue){var p=i.value;if(r(p,h))return f=p}return f=h}if(p=f,s9(d,h))return p;var v=s(h);return r!==void 0&&r(p,v)?(d=h,p):(d=h,f=v)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,s,r]);var l=r9(e,o[0],o[1]);return o9(function(){i.hasValue=!0,i.value=l},[l]),l9(l),l};vC.exports=yC;var c9=vC.exports;const u9=gx(c9),d9={},Sb=e=>{let t;const n=new Set,s=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const h=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(p=>p(t,h))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(d9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},f9=e=>e?Sb(e):Sb,{useDebugValue:m9}=L,{useSyncExternalStoreWithSelector:h9}=u9,g9=e=>e;function jC(e,t=g9,n){const s=h9(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return m9(s),s}const kb=(e,t)=>{const n=f9(e),s=(r,o=t)=>jC(n,r,o);return Object.assign(s,n),s},p9=(e,t)=>e?kb(e,t):kb;function ln(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var x9={value:()=>{}};function km(){for(var e=0,t=arguments.length,n={},s;e<t;++e){if(!(s=arguments[e]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new vd(n)}function vd(e){this._=e}function v9(e,t){return e.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}vd.prototype=km.prototype={constructor:vd,on:function(e,t){var n=this._,s=v9(e+"",n),r,o=-1,i=s.length;if(arguments.length<2){for(;++o<i;)if((r=(e=s[o]).type)&&(r=y9(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(r=(e=s[o]).type)n[r]=Cb(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Cb(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new vd(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,o;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],s=0,r=o.length;s<r;++s)o[s].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)}};function y9(e,t){for(var n=0,s=e.length,r;n<s;++n)if((r=e[n]).name===t)return r.value}function Cb(e,t,n){for(var s=0,r=e.length;s<r;++s)if(e[s].name===t){e[s]=x9,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}var Wg="http://www.w3.org/1999/xhtml";const Eb={svg:"http://www.w3.org/2000/svg",xhtml:Wg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Eb.hasOwnProperty(t)?{space:Eb[t],local:e}:e}function b9(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Wg&&t.documentElement.namespaceURI===Wg?t.createElement(e):t.createElementNS(n,e)}}function w9(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function NC(e){var t=Cm(e);return(t.local?w9:b9)(t)}function j9(){}function R0(e){return e==null?j9:function(){return this.querySelector(e)}}function N9(e){typeof e!="function"&&(e=R0(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var o=t[r],i=o.length,l=s[r]=new Array(i),c,u,d=0;d<i;++d)(c=o[d])&&(u=e.call(c,c.__data__,d,o))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new _n(s,this._parents)}function S9(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function k9(){return[]}function SC(e){return e==null?k9:function(){return this.querySelectorAll(e)}}function C9(e){return function(){return S9(e.apply(this,arguments))}}function E9(e){typeof e=="function"?e=C9(e):e=SC(e);for(var t=this._groups,n=t.length,s=[],r=[],o=0;o<n;++o)for(var i=t[o],l=i.length,c,u=0;u<l;++u)(c=i[u])&&(s.push(e.call(c,c.__data__,u,i)),r.push(c));return new _n(s,r)}function kC(e){return function(){return this.matches(e)}}function CC(e){return function(t){return t.matches(e)}}var _9=Array.prototype.find;function A9(e){return function(){return _9.call(this.children,e)}}function T9(){return this.firstElementChild}function M9(e){return this.select(e==null?T9:A9(typeof e=="function"?e:CC(e)))}var R9=Array.prototype.filter;function D9(){return Array.from(this.children)}function z9(e){return function(){return R9.call(this.children,e)}}function L9(e){return this.selectAll(e==null?D9:z9(typeof e=="function"?e:CC(e)))}function $9(e){typeof e!="function"&&(e=kC(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var o=t[r],i=o.length,l=s[r]=[],c,u=0;u<i;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&l.push(c);return new _n(s,this._parents)}function EC(e){return new Array(e.length)}function P9(){return new _n(this._enter||this._groups.map(EC),this._parents)}function sf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sf.prototype={constructor:sf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function O9(e){return function(){return e}}function B9(e,t,n,s,r,o){for(var i=0,l,c=t.length,u=o.length;i<u;++i)(l=t[i])?(l.__data__=o[i],s[i]=l):n[i]=new sf(e,o[i]);for(;i<c;++i)(l=t[i])&&(r[i]=l)}function I9(e,t,n,s,r,o,i){var l,c,u=new Map,d=t.length,f=o.length,m=new Array(d),h;for(l=0;l<d;++l)(c=t[l])&&(m[l]=h=i.call(c,c.__data__,l,t)+"",u.has(h)?r[l]=c:u.set(h,c));for(l=0;l<f;++l)h=i.call(e,o[l],l,o)+"",(c=u.get(h))?(s[l]=c,c.__data__=o[l],u.delete(h)):n[l]=new sf(e,o[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(m[l])===c&&(r[l]=c)}function H9(e){return e.__data__}function U9(e,t){if(!arguments.length)return Array.from(this,H9);var n=t?I9:B9,s=this._parents,r=this._groups;typeof e!="function"&&(e=O9(e));for(var o=r.length,i=new Array(o),l=new Array(o),c=new Array(o),u=0;u<o;++u){var d=s[u],f=r[u],m=f.length,h=F9(e.call(d,d&&d.__data__,u,s)),p=h.length,v=l[u]=new Array(p),b=i[u]=new Array(p),x=c[u]=new Array(m);n(d,f,v,b,x,h,t);for(var y=0,w=0,j,N;y<p;++y)if(j=v[y]){for(y>=w&&(w=y+1);!(N=b[w])&&++w<p;);j._next=N||null}}return i=new _n(i,s),i._enter=l,i._exit=c,i}function F9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function V9(){return new _n(this._exit||this._groups.map(EC),this._parents)}function q9(e,t,n){var s=this.enter(),r=this,o=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),s&&r?s.merge(r).order():r}function G9(e){for(var t=e.selection?e.selection():e,n=this._groups,s=t._groups,r=n.length,o=s.length,i=Math.min(r,o),l=new Array(r),c=0;c<i;++c)for(var u=n[c],d=s[c],f=u.length,m=l[c]=new Array(f),h,p=0;p<f;++p)(h=u[p]||d[p])&&(m[p]=h);for(;c<r;++c)l[c]=n[c];return new _n(l,this._parents)}function Z9(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s=e[t],r=s.length-1,o=s[r],i;--r>=0;)(i=s[r])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function Y9(e){e||(e=X9);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,s=n.length,r=new Array(s),o=0;o<s;++o){for(var i=n[o],l=i.length,c=r[o]=new Array(l),u,d=0;d<l;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new _n(r,this._parents).order()}function X9(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function W9(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function K9(){return Array.from(this)}function Q9(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,o=s.length;r<o;++r){var i=s[r];if(i)return i}return null}function J9(){let e=0;for(const t of this)++e;return e}function e7(){return!this.node()}function t7(e){for(var t=this._groups,n=0,s=t.length;n<s;++n)for(var r=t[n],o=0,i=r.length,l;o<i;++o)(l=r[o])&&e.call(l,l.__data__,o,r);return this}function n7(e){return function(){this.removeAttribute(e)}}function s7(e){return function(){this.removeAttributeNS(e.space,e.local)}}function r7(e,t){return function(){this.setAttribute(e,t)}}function a7(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function o7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function i7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function l7(e,t){var n=Cm(e);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((t==null?n.local?s7:n7:typeof t=="function"?n.local?i7:o7:n.local?a7:r7)(n,t))}function _C(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function c7(e){return function(){this.style.removeProperty(e)}}function u7(e,t,n){return function(){this.style.setProperty(e,t,n)}}function d7(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function f7(e,t,n){return arguments.length>1?this.each((t==null?c7:typeof t=="function"?d7:u7)(e,t,n??"")):Li(this.node(),e)}function Li(e,t){return e.style.getPropertyValue(t)||_C(e).getComputedStyle(e,null).getPropertyValue(t)}function m7(e){return function(){delete this[e]}}function h7(e,t){return function(){this[e]=t}}function g7(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function p7(e,t){return arguments.length>1?this.each((t==null?m7:typeof t=="function"?g7:h7)(e,t)):this.node()[e]}function AC(e){return e.trim().split(/^|\s+/)}function D0(e){return e.classList||new TC(e)}function TC(e){this._node=e,this._names=AC(e.getAttribute("class")||"")}TC.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function MC(e,t){for(var n=D0(e),s=-1,r=t.length;++s<r;)n.add(t[s])}function RC(e,t){for(var n=D0(e),s=-1,r=t.length;++s<r;)n.remove(t[s])}function x7(e){return function(){MC(this,e)}}function v7(e){return function(){RC(this,e)}}function y7(e,t){return function(){(t.apply(this,arguments)?MC:RC)(this,e)}}function b7(e,t){var n=AC(e+"");if(arguments.length<2){for(var s=D0(this.node()),r=-1,o=n.length;++r<o;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?y7:t?x7:v7)(n,t))}function w7(){this.textContent=""}function j7(e){return function(){this.textContent=e}}function N7(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function S7(e){return arguments.length?this.each(e==null?w7:(typeof e=="function"?N7:j7)(e)):this.node().textContent}function k7(){this.innerHTML=""}function C7(e){return function(){this.innerHTML=e}}function E7(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function _7(e){return arguments.length?this.each(e==null?k7:(typeof e=="function"?E7:C7)(e)):this.node().innerHTML}function A7(){this.nextSibling&&this.parentNode.appendChild(this)}function T7(){return this.each(A7)}function M7(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function R7(){return this.each(M7)}function D7(e){var t=typeof e=="function"?e:NC(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function z7(){return null}function L7(e,t){var n=typeof e=="function"?e:NC(e),s=t==null?z7:typeof t=="function"?t:R0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function $7(){var e=this.parentNode;e&&e.removeChild(this)}function P7(){return this.each($7)}function O7(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function B7(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function I7(e){return this.select(e?B7:O7)}function H7(e){return arguments.length?this.property("__data__",e):this.node().__data__}function U7(e){return function(t){e.call(this,t,this.__data__)}}function F7(e){return e.trim().split(/^|\s+/).map(function(t){var n="",s=t.indexOf(".");return s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),{type:t,name:n}})}function V7(e){return function(){var t=this.__on;if(t){for(var n=0,s=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++s]=o;++s?t.length=s:delete this.__on}}}function q7(e,t,n){return function(){var s=this.__on,r,o=U7(t);if(s){for(var i=0,l=s.length;i<l;++i)if((r=s[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},s?s.push(r):this.__on=[r]}}function G7(e,t,n){var s=F7(e+""),r,o=s.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(r=0,d=l[c];r<o;++r)if((i=s[r]).type===d.type&&i.name===d.name)return d.value}return}for(l=t?q7:V7,r=0;r<o;++r)this.each(l(s[r],t,n));return this}function DC(e,t,n){var s=_C(e),r=s.CustomEvent;typeof r=="function"?r=new r(t,n):(r=s.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Z7(e,t){return function(){return DC(this,e,t)}}function Y7(e,t){return function(){return DC(this,e,t.apply(this,arguments))}}function X7(e,t){return this.each((typeof t=="function"?Y7:Z7)(e,t))}function*W7(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,o=s.length,i;r<o;++r)(i=s[r])&&(yield i)}var zC=[null];function _n(e,t){this._groups=e,this._parents=t}function nu(){return new _n([[document.documentElement]],zC)}function K7(){return this}_n.prototype=nu.prototype={constructor:_n,select:N9,selectAll:E9,selectChild:M9,selectChildren:L9,filter:$9,data:U9,enter:P9,exit:V9,join:q9,merge:G9,selection:K7,order:Z9,sort:Y9,call:W9,nodes:K9,node:Q9,size:J9,empty:e7,each:t7,attr:l7,style:f7,property:p7,classed:b7,text:S7,html:_7,raise:T7,lower:R7,append:D7,insert:L7,remove:P7,clone:I7,datum:H7,on:G7,dispatch:X7,[Symbol.iterator]:W7};function ts(e){return typeof e=="string"?new _n([[document.querySelector(e)]],[document.documentElement]):new _n([[e]],zC)}function Q7(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ws(e,t){if(e=Q7(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const J7={passive:!1},vc={capture:!0,passive:!1};function wh(e){e.stopImmediatePropagation()}function ui(e){e.preventDefault(),e.stopImmediatePropagation()}function LC(e){var t=e.document.documentElement,n=ts(e).on("dragstart.drag",ui,vc);"onselectstart"in t?n.on("selectstart.drag",ui,vc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $C(e,t){var n=e.document.documentElement,s=ts(e).on("dragstart.drag",null);t&&(s.on("click.drag",ui,vc),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Pu=e=>()=>e;function Kg(e,{sourceEvent:t,subject:n,target:s,identifier:r,active:o,x:i,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Kg.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function eH(e){return!e.ctrlKey&&!e.button}function tH(){return this.parentNode}function nH(e,t){return t??{x:e.x,y:e.y}}function sH(){return navigator.maxTouchPoints||"ontouchstart"in this}function rH(){var e=eH,t=tH,n=nH,s=sH,r={},o=km("start","drag","end"),i=0,l,c,u,d,f=0;function m(j){j.on("mousedown.drag",h).filter(s).on("touchstart.drag",b).on("touchmove.drag",x,J7).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(j,N){if(!(d||!e.call(this,j,N))){var S=w(this,t.call(this,j,N),j,N,"mouse");S&&(ts(j.view).on("mousemove.drag",p,vc).on("mouseup.drag",v,vc),LC(j.view),wh(j),u=!1,l=j.clientX,c=j.clientY,S("start",j))}}function p(j){if(ui(j),!u){var N=j.clientX-l,S=j.clientY-c;u=N*N+S*S>f}r.mouse("drag",j)}function v(j){ts(j.view).on("mousemove.drag mouseup.drag",null),$C(j.view,u),ui(j),r.mouse("end",j)}function b(j,N){if(e.call(this,j,N)){var S=j.changedTouches,k=t.call(this,j,N),E=S.length,C,_;for(C=0;C<E;++C)(_=w(this,k,j,N,S[C].identifier,S[C]))&&(wh(j),_("start",j,S[C]))}}function x(j){var N=j.changedTouches,S=N.length,k,E;for(k=0;k<S;++k)(E=r[N[k].identifier])&&(ui(j),E("drag",j,N[k]))}function y(j){var N=j.changedTouches,S=N.length,k,E;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),k=0;k<S;++k)(E=r[N[k].identifier])&&(wh(j),E("end",j,N[k]))}function w(j,N,S,k,E,C){var _=o.copy(),P=ws(C||S,N),O,$,T;if((T=n.call(j,new Kg("beforestart",{sourceEvent:S,target:m,identifier:E,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:_}),k))!=null)return O=T.x-P[0]||0,$=T.y-P[1]||0,function z(A,D,M){var R=P,B;switch(A){case"start":r[E]=z,B=i++;break;case"end":delete r[E],--i;case"drag":P=ws(M||D,N),B=i;break}_.call(A,j,new Kg(A,{sourceEvent:D,subject:T,target:m,identifier:E,active:B,x:P[0]+O,y:P[1]+$,dx:P[0]-R[0],dy:P[1]-R[1],dispatch:_}),k)}}return m.filter=function(j){return arguments.length?(e=typeof j=="function"?j:Pu(!!j),m):e},m.container=function(j){return arguments.length?(t=typeof j=="function"?j:Pu(j),m):t},m.subject=function(j){return arguments.length?(n=typeof j=="function"?j:Pu(j),m):n},m.touchable=function(j){return arguments.length?(s=typeof j=="function"?j:Pu(!!j),m):s},m.on=function(){var j=o.on.apply(o,arguments);return j===o?m:j},m.clickDistance=function(j){return arguments.length?(f=(j=+j)*j,m):Math.sqrt(f)},m}function z0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function PC(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function su(){}var yc=.7,rf=1/yc,di="\\s*([+-]?\\d+)\\s*",bc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ts="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aH=/^#([0-9a-f]{3,8})$/,oH=new RegExp(`^rgb\\(${di},${di},${di}\\)$`),iH=new RegExp(`^rgb\\(${Ts},${Ts},${Ts}\\)$`),lH=new RegExp(`^rgba\\(${di},${di},${di},${bc}\\)$`),cH=new RegExp(`^rgba\\(${Ts},${Ts},${Ts},${bc}\\)$`),uH=new RegExp(`^hsl\\(${bc},${Ts},${Ts}\\)$`),dH=new RegExp(`^hsla\\(${bc},${Ts},${Ts},${bc}\\)$`),_b={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};z0(su,wc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ab,formatHex:Ab,formatHex8:fH,formatHsl:mH,formatRgb:Tb,toString:Tb});function Ab(){return this.rgb().formatHex()}function fH(){return this.rgb().formatHex8()}function mH(){return OC(this).formatHsl()}function Tb(){return this.rgb().formatRgb()}function wc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=aH.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Mb(t):n===3?new on(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ou(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ou(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oH.exec(e))?new on(t[1],t[2],t[3],1):(t=iH.exec(e))?new on(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lH.exec(e))?Ou(t[1],t[2],t[3],t[4]):(t=cH.exec(e))?Ou(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uH.exec(e))?zb(t[1],t[2]/100,t[3]/100,1):(t=dH.exec(e))?zb(t[1],t[2]/100,t[3]/100,t[4]):_b.hasOwnProperty(e)?Mb(_b[e]):e==="transparent"?new on(NaN,NaN,NaN,0):null}function Mb(e){return new on(e>>16&255,e>>8&255,e&255,1)}function Ou(e,t,n,s){return s<=0&&(e=t=n=NaN),new on(e,t,n,s)}function hH(e){return e instanceof su||(e=wc(e)),e?(e=e.rgb(),new on(e.r,e.g,e.b,e.opacity)):new on}function Qg(e,t,n,s){return arguments.length===1?hH(e):new on(e,t,n,s??1)}function on(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}z0(on,Qg,PC(su,{brighter(e){return e=e==null?rf:Math.pow(rf,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yc:Math.pow(yc,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new on(Ua(this.r),Ua(this.g),Ua(this.b),af(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rb,formatHex:Rb,formatHex8:gH,formatRgb:Db,toString:Db}));function Rb(){return`#${Ba(this.r)}${Ba(this.g)}${Ba(this.b)}`}function gH(){return`#${Ba(this.r)}${Ba(this.g)}${Ba(this.b)}${Ba((isNaN(this.opacity)?1:this.opacity)*255)}`}function Db(){const e=af(this.opacity);return`${e===1?"rgb(":"rgba("}${Ua(this.r)}, ${Ua(this.g)}, ${Ua(this.b)}${e===1?")":`, ${e})`}`}function af(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ua(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ba(e){return e=Ua(e),(e<16?"0":"")+e.toString(16)}function zb(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ns(e,t,n,s)}function OC(e){if(e instanceof ns)return new ns(e.h,e.s,e.l,e.opacity);if(e instanceof su||(e=wc(e)),!e)return new ns;if(e instanceof ns)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),o=Math.max(t,n,s),i=NaN,l=o-r,c=(o+r)/2;return l?(t===o?i=(n-s)/l+(n<s)*6:n===o?i=(s-t)/l+2:i=(t-n)/l+4,l/=c<.5?o+r:2-o-r,i*=60):l=c>0&&c<1?0:i,new ns(i,l,c,e.opacity)}function pH(e,t,n,s){return arguments.length===1?OC(e):new ns(e,t,n,s??1)}function ns(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}z0(ns,pH,PC(su,{brighter(e){return e=e==null?rf:Math.pow(rf,e),new ns(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yc:Math.pow(yc,e),new ns(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new on(jh(e>=240?e-240:e+120,r,s),jh(e,r,s),jh(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new ns(Lb(this.h),Bu(this.s),Bu(this.l),af(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=af(this.opacity);return`${e===1?"hsl(":"hsla("}${Lb(this.h)}, ${Bu(this.s)*100}%, ${Bu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Lb(e){return e=(e||0)%360,e<0?e+360:e}function Bu(e){return Math.max(0,Math.min(1,e||0))}function jh(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const BC=e=>()=>e;function xH(e,t){return function(n){return e+n*t}}function vH(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function yH(e){return(e=+e)==1?IC:function(t,n){return n-t?vH(t,n,e):BC(isNaN(t)?n:t)}}function IC(e,t){var n=t-e;return n?xH(e,n):BC(isNaN(e)?t:e)}const $b=function e(t){var n=yH(t);function s(r,o){var i=n((r=Qg(r)).r,(o=Qg(o)).r),l=n(r.g,o.g),c=n(r.b,o.b),u=IC(r.opacity,o.opacity);return function(d){return r.r=i(d),r.g=l(d),r.b=c(d),r.opacity=u(d),r+""}}return s.gamma=e,s}(1);function Br(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Jg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nh=new RegExp(Jg.source,"g");function bH(e){return function(){return e}}function wH(e){return function(t){return e(t)+""}}function jH(e,t){var n=Jg.lastIndex=Nh.lastIndex=0,s,r,o,i=-1,l=[],c=[];for(e=e+"",t=t+"";(s=Jg.exec(e))&&(r=Nh.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),l[i]?l[i]+=o:l[++i]=o),(s=s[0])===(r=r[0])?l[i]?l[i]+=r:l[++i]=r:(l[++i]=null,c.push({i,x:Br(s,r)})),n=Nh.lastIndex;return n<t.length&&(o=t.slice(n),l[i]?l[i]+=o:l[++i]=o),l.length<2?c[0]?wH(c[0].x):bH(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var Pb=180/Math.PI,ep={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function HC(e,t,n,s,r,o){var i,l,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*s)&&(n-=e*c,s-=t*c),(l=Math.sqrt(n*n+s*s))&&(n/=l,s/=l,c/=l),e*s<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*Pb,skewX:Math.atan(c)*Pb,scaleX:i,scaleY:l}}var Iu;function NH(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ep:HC(t.a,t.b,t.c,t.d,t.e,t.f)}function SH(e){return e==null||(Iu||(Iu=document.createElementNS("http://www.w3.org/2000/svg","g")),Iu.setAttribute("transform",e),!(e=Iu.transform.baseVal.consolidate()))?ep:(e=e.matrix,HC(e.a,e.b,e.c,e.d,e.e,e.f))}function UC(e,t,n,s){function r(u){return u.length?u.pop()+" ":""}function o(u,d,f,m,h,p){if(u!==f||d!==m){var v=h.push("translate(",null,t,null,n);p.push({i:v-4,x:Br(u,f)},{i:v-2,x:Br(d,m)})}else(f||m)&&h.push("translate("+f+t+m+n)}function i(u,d,f,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:f.push(r(f)+"rotate(",null,s)-2,x:Br(u,d)})):d&&f.push(r(f)+"rotate("+d+s)}function l(u,d,f,m){u!==d?m.push({i:f.push(r(f)+"skewX(",null,s)-2,x:Br(u,d)}):d&&f.push(r(f)+"skewX("+d+s)}function c(u,d,f,m,h,p){if(u!==f||d!==m){var v=h.push(r(h)+"scale(",null,",",null,")");p.push({i:v-4,x:Br(u,f)},{i:v-2,x:Br(d,m)})}else(f!==1||m!==1)&&h.push(r(h)+"scale("+f+","+m+")")}return function(u,d){var f=[],m=[];return u=e(u),d=e(d),o(u.translateX,u.translateY,d.translateX,d.translateY,f,m),i(u.rotate,d.rotate,f,m),l(u.skewX,d.skewX,f,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,m),u=d=null,function(h){for(var p=-1,v=m.length,b;++p<v;)f[(b=m[p]).i]=b.x(h);return f.join("")}}}var kH=UC(NH,"px, ","px)","deg)"),CH=UC(SH,", ",")",")"),EH=1e-12;function Ob(e){return((e=Math.exp(e))+1/e)/2}function _H(e){return((e=Math.exp(e))-1/e)/2}function AH(e){return((e=Math.exp(2*e))-1)/(e+1)}const TH=function e(t,n,s){function r(o,i){var l=o[0],c=o[1],u=o[2],d=i[0],f=i[1],m=i[2],h=d-l,p=f-c,v=h*h+p*p,b,x;if(v<EH)x=Math.log(m/u)/t,b=function(k){return[l+k*h,c+k*p,u*Math.exp(t*k*x)]};else{var y=Math.sqrt(v),w=(m*m-u*u+s*v)/(2*u*n*y),j=(m*m-u*u-s*v)/(2*m*n*y),N=Math.log(Math.sqrt(w*w+1)-w),S=Math.log(Math.sqrt(j*j+1)-j);x=(S-N)/t,b=function(k){var E=k*x,C=Ob(N),_=u/(n*y)*(C*AH(t*E+N)-_H(N));return[l+_*h,c+_*p,u*C/Ob(t*E+N)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return r.rho=function(o){var i=Math.max(.001,+o),l=i*i,c=l*l;return e(i,l,c)},r}(Math.SQRT2,2,4);var $i=0,Bl=0,jl=0,FC=1e3,of,Il,lf=0,to=0,Em=0,jc=typeof performance=="object"&&performance.now?performance:Date,VC=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function L0(){return to||(VC(MH),to=jc.now()+Em)}function MH(){to=0}function cf(){this._call=this._time=this._next=null}cf.prototype=qC.prototype={constructor:cf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?L0():+n)+(t==null?0:+t),!this._next&&Il!==this&&(Il?Il._next=this:of=this,Il=this),this._call=e,this._time=n,tp()},stop:function(){this._call&&(this._call=null,this._time=1/0,tp())}};function qC(e,t,n){var s=new cf;return s.restart(e,t,n),s}function RH(){L0(),++$i;for(var e=of,t;e;)(t=to-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$i}function Bb(){to=(lf=jc.now())+Em,$i=Bl=0;try{RH()}finally{$i=0,zH(),to=0}}function DH(){var e=jc.now(),t=e-lf;t>FC&&(Em-=t,lf=e)}function zH(){for(var e,t=of,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:of=n);Il=e,tp(s)}function tp(e){if(!$i){Bl&&(Bl=clearTimeout(Bl));var t=e-to;t>24?(e<1/0&&(Bl=setTimeout(Bb,e-jc.now()-Em)),jl&&(jl=clearInterval(jl))):(jl||(lf=jc.now(),jl=setInterval(DH,FC)),$i=1,VC(Bb))}}function Ib(e,t,n){var s=new cf;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,n),s}var LH=km("start","end","cancel","interrupt"),$H=[],GC=0,Hb=1,np=2,yd=3,Ub=4,sp=5,bd=6;function _m(e,t,n,s,r,o){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;PH(e,n,{name:t,index:s,group:r,on:LH,tween:$H,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:GC})}function $0(e,t){var n=fs(e,t);if(n.state>GC)throw new Error("too late; already scheduled");return n}function Hs(e,t){var n=fs(e,t);if(n.state>yd)throw new Error("too late; already running");return n}function fs(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function PH(e,t,n){var s=e.__transition,r;s[t]=n,n.timer=qC(o,0,n.time);function o(u){n.state=Hb,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,f,m,h;if(n.state!==Hb)return c();for(d in s)if(h=s[d],h.name===n.name){if(h.state===yd)return Ib(i);h.state===Ub?(h.state=bd,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete s[d]):+d<t&&(h.state=bd,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete s[d])}if(Ib(function(){n.state===yd&&(n.state=Ub,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=np,n.on.call("start",e,e.__data__,n.index,n.group),n.state===np){for(n.state=yd,r=new Array(m=n.tween.length),d=0,f=-1;d<m;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function l(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=sp,1),f=-1,m=r.length;++f<m;)r[f].call(e,d);n.state===sp&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=bd,n.timer.stop(),delete s[t];for(var u in s)return;delete e.__transition}}function wd(e,t){var n=e.__transition,s,r,o=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((s=n[i]).name!==t){o=!1;continue}r=s.state>np&&s.state<sp,s.state=bd,s.timer.stop(),s.on.call(r?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[i]}o&&delete e.__transition}}function OH(e){return this.each(function(){wd(this,e)})}function BH(e,t){var n,s;return function(){var r=Hs(this,e),o=r.tween;if(o!==n){s=n=o;for(var i=0,l=s.length;i<l;++i)if(s[i].name===t){s=s.slice(),s.splice(i,1);break}}r.tween=s}}function IH(e,t,n){var s,r;if(typeof n!="function")throw new Error;return function(){var o=Hs(this,e),i=o.tween;if(i!==s){r=(s=i).slice();for(var l={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=l;break}c===u&&r.push(l)}o.tween=r}}function HH(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s=fs(this.node(),n).tween,r=0,o=s.length,i;r<o;++r)if((i=s[r]).name===e)return i.value;return null}return this.each((t==null?BH:IH)(n,e,t))}function P0(e,t,n){var s=e._id;return e.each(function(){var r=Hs(this,s);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return fs(r,s).value[t]}}function ZC(e,t){var n;return(typeof t=="number"?Br:t instanceof wc?$b:(n=wc(t))?(t=n,$b):jH)(e,t)}function UH(e){return function(){this.removeAttribute(e)}}function FH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VH(e,t,n){var s,r=n+"",o;return function(){var i=this.getAttribute(e);return i===r?null:i===s?o:o=t(s=i,n)}}function qH(e,t,n){var s,r=n+"",o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===s?o:o=t(s=i,n)}}function GH(e,t,n){var s,r,o;return function(){var i,l=n(this),c;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=l+"",i===c?null:i===s&&c===r?o:(r=c,o=t(s=i,l)))}}function ZH(e,t,n){var s,r,o;return function(){var i,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=l+"",i===c?null:i===s&&c===r?o:(r=c,o=t(s=i,l)))}}function YH(e,t){var n=Cm(e),s=n==="transform"?CH:ZC;return this.attrTween(e,typeof t=="function"?(n.local?ZH:GH)(n,s,P0(this,"attr."+e,t)):t==null?(n.local?FH:UH)(n):(n.local?qH:VH)(n,s,t))}function XH(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function WH(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function KH(e,t){var n,s;function r(){var o=t.apply(this,arguments);return o!==s&&(n=(s=o)&&WH(e,o)),n}return r._value=t,r}function QH(e,t){var n,s;function r(){var o=t.apply(this,arguments);return o!==s&&(n=(s=o)&&XH(e,o)),n}return r._value=t,r}function JH(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var s=Cm(e);return this.tween(n,(s.local?KH:QH)(s,t))}function eU(e,t){return function(){$0(this,e).delay=+t.apply(this,arguments)}}function tU(e,t){return t=+t,function(){$0(this,e).delay=t}}function nU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eU:tU)(t,e)):fs(this.node(),t).delay}function sU(e,t){return function(){Hs(this,e).duration=+t.apply(this,arguments)}}function rU(e,t){return t=+t,function(){Hs(this,e).duration=t}}function aU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sU:rU)(t,e)):fs(this.node(),t).duration}function oU(e,t){if(typeof t!="function")throw new Error;return function(){Hs(this,e).ease=t}}function iU(e){var t=this._id;return arguments.length?this.each(oU(t,e)):fs(this.node(),t).ease}function lU(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Hs(this,e).ease=n}}function cU(e){if(typeof e!="function")throw new Error;return this.each(lU(this._id,e))}function uU(e){typeof e!="function"&&(e=kC(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var o=t[r],i=o.length,l=s[r]=[],c,u=0;u<i;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&l.push(c);return new br(s,this._parents,this._name,this._id)}function dU(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,s=t.length,r=n.length,o=Math.min(s,r),i=new Array(s),l=0;l<o;++l)for(var c=t[l],u=n[l],d=c.length,f=i[l]=new Array(d),m,h=0;h<d;++h)(m=c[h]||u[h])&&(f[h]=m);for(;l<s;++l)i[l]=t[l];return new br(i,this._parents,this._name,this._id)}function fU(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function mU(e,t,n){var s,r,o=fU(t)?$0:Hs;return function(){var i=o(this,e),l=i.on;l!==s&&(r=(s=l).copy()).on(t,n),i.on=r}}function hU(e,t){var n=this._id;return arguments.length<2?fs(this.node(),n).on.on(e):this.each(mU(n,e,t))}function gU(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function pU(){return this.on("end.remove",gU(this._id))}function xU(e){var t=this._name,n=this._id;typeof e!="function"&&(e=R0(e));for(var s=this._groups,r=s.length,o=new Array(r),i=0;i<r;++i)for(var l=s[i],c=l.length,u=o[i]=new Array(c),d,f,m=0;m<c;++m)(d=l[m])&&(f=e.call(d,d.__data__,m,l))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f,_m(u[m],t,n,m,u,fs(d,n)));return new br(o,this._parents,t,n)}function vU(e){var t=this._name,n=this._id;typeof e!="function"&&(e=SC(e));for(var s=this._groups,r=s.length,o=[],i=[],l=0;l<r;++l)for(var c=s[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var m=e.call(d,d.__data__,f,c),h,p=fs(d,n),v=0,b=m.length;v<b;++v)(h=m[v])&&_m(h,t,n,v,m,p);o.push(m),i.push(d)}return new br(o,i,t,n)}var yU=nu.prototype.constructor;function bU(){return new yU(this._groups,this._parents)}function wU(e,t){var n,s,r;return function(){var o=Li(this,e),i=(this.style.removeProperty(e),Li(this,e));return o===i?null:o===n&&i===s?r:r=t(n=o,s=i)}}function YC(e){return function(){this.style.removeProperty(e)}}function jU(e,t,n){var s,r=n+"",o;return function(){var i=Li(this,e);return i===r?null:i===s?o:o=t(s=i,n)}}function NU(e,t,n){var s,r,o;return function(){var i=Li(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Li(this,e))),i===c?null:i===s&&c===r?o:(r=c,o=t(s=i,l))}}function SU(e,t){var n,s,r,o="style."+t,i="end."+o,l;return function(){var c=Hs(this,e),u=c.on,d=c.value[o]==null?l||(l=YC(t)):void 0;(u!==n||r!==d)&&(s=(n=u).copy()).on(i,r=d),c.on=s}}function kU(e,t,n){var s=(e+="")=="transform"?kH:ZC;return t==null?this.styleTween(e,wU(e,s)).on("end.style."+e,YC(e)):typeof t=="function"?this.styleTween(e,NU(e,s,P0(this,"style."+e,t))).each(SU(this._id,e)):this.styleTween(e,jU(e,s,t),n).on("end.style."+e,null)}function CU(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function EU(e,t,n){var s,r;function o(){var i=t.apply(this,arguments);return i!==r&&(s=(r=i)&&CU(e,i,n)),s}return o._value=t,o}function _U(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,EU(e,t,n??""))}function AU(e){return function(){this.textContent=e}}function TU(e){return function(){var t=e(this);this.textContent=t??""}}function MU(e){return this.tween("text",typeof e=="function"?TU(P0(this,"text",e)):AU(e==null?"":e+""))}function RU(e){return function(t){this.textContent=e.call(this,t)}}function DU(e){var t,n;function s(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&RU(r)),t}return s._value=e,s}function zU(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,DU(e))}function LU(){for(var e=this._name,t=this._id,n=XC(),s=this._groups,r=s.length,o=0;o<r;++o)for(var i=s[o],l=i.length,c,u=0;u<l;++u)if(c=i[u]){var d=fs(c,t);_m(c,e,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new br(s,this._parents,e,n)}function $U(){var e,t,n=this,s=n._id,r=n.size();return new Promise(function(o,i){var l={value:i},c={value:function(){--r===0&&o()}};n.each(function(){var u=Hs(this,s),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),r===0&&o()})}var PU=0;function br(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function XC(){return++PU}var Ks=nu.prototype;br.prototype={constructor:br,select:xU,selectAll:vU,selectChild:Ks.selectChild,selectChildren:Ks.selectChildren,filter:uU,merge:dU,selection:bU,transition:LU,call:Ks.call,nodes:Ks.nodes,node:Ks.node,size:Ks.size,empty:Ks.empty,each:Ks.each,on:hU,attr:YH,attrTween:JH,style:kU,styleTween:_U,text:MU,textTween:zU,remove:pU,tween:HH,delay:nU,duration:aU,ease:iU,easeVarying:cU,end:$U,[Symbol.iterator]:Ks[Symbol.iterator]};function OU(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var BU={time:null,delay:0,duration:250,ease:OU};function IU(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function HU(e){var t,n;e instanceof br?(t=e._id,e=e._name):(t=XC(),(n=BU).time=L0(),e=e==null?null:e+"");for(var s=this._groups,r=s.length,o=0;o<r;++o)for(var i=s[o],l=i.length,c,u=0;u<l;++u)(c=i[u])&&_m(c,e,t,u,i,n||IU(c,t));return new br(s,this._parents,e,t)}nu.prototype.interrupt=OH;nu.prototype.transition=HU;const Hu=e=>()=>e;function UU(e,{sourceEvent:t,target:n,transform:s,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:r}})}function ar(e,t,n){this.k=e,this.x=t,this.y=n}ar.prototype={constructor:ar,scale:function(e){return e===1?this:new ar(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ar(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ra=new ar(1,0,0);ar.prototype;function Sh(e){e.stopImmediatePropagation()}function Nl(e){e.preventDefault(),e.stopImmediatePropagation()}function FU(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function VU(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Fb(){return this.__zoom||ra}function qU(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function GU(){return navigator.maxTouchPoints||"ontouchstart"in this}function ZU(e,t,n){var s=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function YU(){var e=FU,t=VU,n=ZU,s=qU,r=GU,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=TH,u=km("start","zoom","end"),d,f,m,h=500,p=150,v=0,b=10;function x(T){T.property("__zoom",Fb).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",_).filter(r).on("touchstart.zoom",P).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(T,z,A,D){var M=T.selection?T.selection():T;M.property("__zoom",Fb),T!==M?N(T,z,A,D):M.interrupt().each(function(){S(this,arguments).event(D).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},x.scaleBy=function(T,z,A,D){x.scaleTo(T,function(){var M=this.__zoom.k,R=typeof z=="function"?z.apply(this,arguments):z;return M*R},A,D)},x.scaleTo=function(T,z,A,D){x.transform(T,function(){var M=t.apply(this,arguments),R=this.__zoom,B=A==null?j(M):typeof A=="function"?A.apply(this,arguments):A,U=R.invert(B),I=typeof z=="function"?z.apply(this,arguments):z;return n(w(y(R,I),B,U),M,i)},A,D)},x.translateBy=function(T,z,A,D){x.transform(T,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),i)},null,D)},x.translateTo=function(T,z,A,D,M){x.transform(T,function(){var R=t.apply(this,arguments),B=this.__zoom,U=D==null?j(R):typeof D=="function"?D.apply(this,arguments):D;return n(ra.translate(U[0],U[1]).scale(B.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof A=="function"?-A.apply(this,arguments):-A),R,i)},D,M)};function y(T,z){return z=Math.max(o[0],Math.min(o[1],z)),z===T.k?T:new ar(z,T.x,T.y)}function w(T,z,A){var D=z[0]-A[0]*T.k,M=z[1]-A[1]*T.k;return D===T.x&&M===T.y?T:new ar(T.k,D,M)}function j(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function N(T,z,A,D){T.on("start.zoom",function(){S(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(D).end()}).tween("zoom",function(){var M=this,R=arguments,B=S(M,R).event(D),U=t.apply(M,R),I=A==null?j(U):typeof A=="function"?A.apply(M,R):A,V=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),Z=M.__zoom,J=typeof z=="function"?z.apply(M,R):z,ie=c(Z.invert(I).concat(V/Z.k),J.invert(I).concat(V/J.k));return function(ee){if(ee===1)ee=J;else{var pe=ie(ee),fe=V/pe[2];ee=new ar(fe,I[0]-pe[0]*fe,I[1]-pe[1]*fe)}B.zoom(null,ee)}})}function S(T,z,A){return!A&&T.__zooming||new k(T,z)}function k(T,z){this.that=T,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,z),this.taps=0}k.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,z){return this.mouse&&T!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var z=ts(this.that).datum();u.call(T,this.that,new UU(T,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),z)}};function E(T,...z){if(!e.apply(this,arguments))return;var A=S(this,z).event(T),D=this.__zoom,M=Math.max(o[0],Math.min(o[1],D.k*Math.pow(2,s.apply(this,arguments)))),R=ws(T);if(A.wheel)(A.mouse[0][0]!==R[0]||A.mouse[0][1]!==R[1])&&(A.mouse[1]=D.invert(A.mouse[0]=R)),clearTimeout(A.wheel);else{if(D.k===M)return;A.mouse=[R,D.invert(R)],wd(this),A.start()}Nl(T),A.wheel=setTimeout(B,p),A.zoom("mouse",n(w(y(D,M),A.mouse[0],A.mouse[1]),A.extent,i));function B(){A.wheel=null,A.end()}}function C(T,...z){if(m||!e.apply(this,arguments))return;var A=T.currentTarget,D=S(this,z,!0).event(T),M=ts(T.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",V,!0),R=ws(T,A),B=T.clientX,U=T.clientY;LC(T.view),Sh(T),D.mouse=[R,this.__zoom.invert(R)],wd(this),D.start();function I(Z){if(Nl(Z),!D.moved){var J=Z.clientX-B,ie=Z.clientY-U;D.moved=J*J+ie*ie>v}D.event(Z).zoom("mouse",n(w(D.that.__zoom,D.mouse[0]=ws(Z,A),D.mouse[1]),D.extent,i))}function V(Z){M.on("mousemove.zoom mouseup.zoom",null),$C(Z.view,D.moved),Nl(Z),D.event(Z).end()}}function _(T,...z){if(e.apply(this,arguments)){var A=this.__zoom,D=ws(T.changedTouches?T.changedTouches[0]:T,this),M=A.invert(D),R=A.k*(T.shiftKey?.5:2),B=n(w(y(A,R),D,M),t.apply(this,z),i);Nl(T),l>0?ts(this).transition().duration(l).call(N,B,D,T):ts(this).call(x.transform,B,D,T)}}function P(T,...z){if(e.apply(this,arguments)){var A=T.touches,D=A.length,M=S(this,z,T.changedTouches.length===D).event(T),R,B,U,I;for(Sh(T),B=0;B<D;++B)U=A[B],I=ws(U,this),I=[I,this.__zoom.invert(I),U.identifier],M.touch0?!M.touch1&&M.touch0[2]!==I[2]&&(M.touch1=I,M.taps=0):(M.touch0=I,R=!0,M.taps=1+!!d);d&&(d=clearTimeout(d)),R&&(M.taps<2&&(f=I[0],d=setTimeout(function(){d=null},h)),wd(this),M.start())}}function O(T,...z){if(this.__zooming){var A=S(this,z).event(T),D=T.changedTouches,M=D.length,R,B,U,I;for(Nl(T),R=0;R<M;++R)B=D[R],U=ws(B,this),A.touch0&&A.touch0[2]===B.identifier?A.touch0[0]=U:A.touch1&&A.touch1[2]===B.identifier&&(A.touch1[0]=U);if(B=A.that.__zoom,A.touch1){var V=A.touch0[0],Z=A.touch0[1],J=A.touch1[0],ie=A.touch1[1],ee=(ee=J[0]-V[0])*ee+(ee=J[1]-V[1])*ee,pe=(pe=ie[0]-Z[0])*pe+(pe=ie[1]-Z[1])*pe;B=y(B,Math.sqrt(ee/pe)),U=[(V[0]+J[0])/2,(V[1]+J[1])/2],I=[(Z[0]+ie[0])/2,(Z[1]+ie[1])/2]}else if(A.touch0)U=A.touch0[0],I=A.touch0[1];else return;A.zoom("touch",n(w(B,U,I),A.extent,i))}}function $(T,...z){if(this.__zooming){var A=S(this,z).event(T),D=T.changedTouches,M=D.length,R,B;for(Sh(T),m&&clearTimeout(m),m=setTimeout(function(){m=null},h),R=0;R<M;++R)B=D[R],A.touch0&&A.touch0[2]===B.identifier?delete A.touch0:A.touch1&&A.touch1[2]===B.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(B=ws(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<b)){var U=ts(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return x.wheelDelta=function(T){return arguments.length?(s=typeof T=="function"?T:Hu(+T),x):s},x.filter=function(T){return arguments.length?(e=typeof T=="function"?T:Hu(!!T),x):e},x.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:Hu(!!T),x):r},x.extent=function(T){return arguments.length?(t=typeof T=="function"?T:Hu([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),x):t},x.scaleExtent=function(T){return arguments.length?(o[0]=+T[0],o[1]=+T[1],x):[o[0],o[1]]},x.translateExtent=function(T){return arguments.length?(i[0][0]=+T[0][0],i[1][0]=+T[1][0],i[0][1]=+T[0][1],i[1][1]=+T[1][1],x):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},x.constrain=function(T){return arguments.length?(n=T,x):n},x.duration=function(T){return arguments.length?(l=+T,x):l},x.interpolate=function(T){return arguments.length?(c=T,x):c},x.on=function(){var T=u.on.apply(u,arguments);return T===u?x:T},x.clickDistance=function(T){return arguments.length?(v=(T=+T)*T,x):Math.sqrt(v)},x.tapDistance=function(T){return arguments.length?(b=+T,x):b},x}const Am=g.createContext(null),XU=Am.Provider,wr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},WC=wr.error001();function ot(e,t){const n=g.useContext(Am);if(n===null)throw new Error(WC);return jC(n,e,t)}const zt=()=>{const e=g.useContext(Am);if(e===null)throw new Error(WC);return g.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},WU=e=>e.userSelectionActive?"none":"all";function KC({position:e,children:t,className:n,style:s,...r}){const o=ot(WU),i=`${e}`.split("-");return L.createElement("div",{className:Jt(["react-flow__panel",n,...i]),style:{...s,pointerEvents:o},...r},t)}function KU({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:L.createElement(KC,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},L.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const QU=({x:e,y:t,label:n,labelStyle:s={},labelShowBg:r=!0,labelBgStyle:o={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=g.useRef(null),[m,h]=g.useState({x:0,y:0,width:0,height:0}),p=Jt(["react-flow__edge-textwrapper",u]);return g.useEffect(()=>{if(f.current){const v=f.current.getBBox();h({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:L.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:p,visibility:m.width?"visible":"hidden",...d},r&&L.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:o,rx:l,ry:l}),L.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:f,style:s},n),c)};var JU=g.memo(QU);const O0=e=>({width:e.offsetWidth,height:e.offsetHeight}),Pi=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),B0=(e={x:0,y:0},t)=>({x:Pi(e.x,t[0][0],t[1][0]),y:Pi(e.y,t[0][1],t[1][1])}),Vb=(e,t,n)=>e<t?Pi(Math.abs(e-t),1,50)/50:e>n?-Pi(Math.abs(e-n),1,50)/50:0,QC=(e,t)=>{const n=Vb(e.x,35,t.width-35)*20,s=Vb(e.y,35,t.height-35)*20;return[n,s]},JC=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},eF=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),I0=({x:e,y:t,width:n,height:s})=>({x:e,y:t,x2:e+n,y2:t+s}),tF=({x:e,y:t,x2:n,y2:s})=>({x:e,y:t,width:n-e,height:s-t}),qb=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),rp=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),s=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*s)},nF=e=>Hn(e.width)&&Hn(e.height)&&Hn(e.x)&&Hn(e.y),Hn=e=>!isNaN(e)&&isFinite(e),ut=Symbol.for("internals"),eE=["Enter"," ","Escape"],sF=(e,t)=>{},rF=e=>"nativeEvent"in e;function ap(e){var r,o;const t=rF(e)?e.nativeEvent:e,n=((o=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:o[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const tE=e=>"clientX"in e,aa=(e,t)=>{var o,i;const n=tE(e),s=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,r=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:s-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},uf=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},ru=({id:e,path:t,labelX:n,labelY:s,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h=20})=>L.createElement(L.Fragment,null,L.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),h&&L.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&Hn(n)&&Hn(s)?L.createElement(JU,{x:n,y:s,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);ru.displayName="BaseEdge";function Sl(e,t,n){return n===void 0?n:s=>{const r=t().edges.find(o=>o.id===e);r&&n(s,{...r})}}function nE({sourceX:e,sourceY:t,targetX:n,targetY:s}){const r=Math.abs(n-e)/2,o=n<e?n+r:n-r,i=Math.abs(s-t)/2,l=s<t?s+i:s-i;return[o,l,r,i]}function sE({sourceX:e,sourceY:t,targetX:n,targetY:s,sourceControlX:r,sourceControlY:o,targetControlX:i,targetControlY:l}){const c=e*.125+r*.375+i*.375+n*.125,u=t*.125+o*.375+l*.375+s*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var no;(function(e){e.Strict="strict",e.Loose="loose"})(no||(no={}));var Ia;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ia||(Ia={}));var Nc;(function(e){e.Partial="partial",e.Full="full"})(Nc||(Nc={}));var qr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(qr||(qr={}));var df;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(df||(df={}));var le;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(le||(le={}));function Gb({pos:e,x1:t,y1:n,x2:s,y2:r}){return e===le.Left||e===le.Right?[.5*(t+s),n]:[t,.5*(n+r)]}function rE({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:o=le.Top}){const[i,l]=Gb({pos:n,x1:e,y1:t,x2:s,y2:r}),[c,u]=Gb({pos:o,x1:s,y1:r,x2:e,y2:t}),[d,f,m,h]=sE({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${l} ${c},${u} ${s},${r}`,d,f,m,h]}const H0=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:r=le.Bottom,targetPosition:o=le.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:v})=>{const[b,x,y]=rE({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:s,targetPosition:o});return L.createElement(ru,{path:b,labelX:x,labelY:y,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:v})});H0.displayName="SimpleBezierEdge";const Zb={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}},aF=({source:e,sourcePosition:t=le.Bottom,target:n})=>t===le.Left||t===le.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Yb=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function oF({source:e,sourcePosition:t=le.Bottom,target:n,targetPosition:s=le.Top,center:r,offset:o}){const i=Zb[t],l=Zb[s],c={x:e.x+i.x*o,y:e.y+i.y*o},u={x:n.x+l.x*o,y:n.y+l.y*o},d=aF({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",m=d[f];let h=[],p,v;const b={x:0,y:0},x={x:0,y:0},[y,w,j,N]=nE({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*l[f]===-1){p=r.x??y,v=r.y??w;const k=[{x:p,y:c.y},{x:p,y:u.y}],E=[{x:c.x,y:v},{x:u.x,y:v}];i[f]===m?h=f==="x"?k:E:h=f==="x"?E:k}else{const k=[{x:c.x,y:u.y}],E=[{x:u.x,y:c.y}];if(f==="x"?h=i.x===m?E:k:h=i.y===m?k:E,t===s){const $=Math.abs(e[f]-n[f]);if($<=o){const T=Math.min(o-1,o-$);i[f]===m?b[f]=(c[f]>e[f]?-1:1)*T:x[f]=(u[f]>n[f]?-1:1)*T}}if(t!==s){const $=f==="x"?"y":"x",T=i[f]===l[$],z=c[$]>u[$],A=c[$]<u[$];(i[f]===1&&(!T&&z||T&&A)||i[f]!==1&&(!T&&A||T&&z))&&(h=f==="x"?k:E)}const C={x:c.x+b.x,y:c.y+b.y},_={x:u.x+x.x,y:u.y+x.y},P=Math.max(Math.abs(C.x-h[0].x),Math.abs(_.x-h[0].x)),O=Math.max(Math.abs(C.y-h[0].y),Math.abs(_.y-h[0].y));P>=O?(p=(C.x+_.x)/2,v=h[0].y):(p=h[0].x,v=(C.y+_.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...h,{x:u.x+x.x,y:u.y+x.y},n],p,v,j,N]}function iF(e,t,n,s){const r=Math.min(Yb(e,t)/2,Yb(t,n)/2,s),{x:o,y:i}=t;if(e.x===o&&o===n.x||e.y===i&&i===n.y)return`L${o} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${o+r*u},${i}Q ${o},${i} ${o},${i+r*d}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${i+r*c}Q ${o},${i} ${o+r*l},${i}`}function op({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:o=le.Top,borderRadius:i=5,centerX:l,centerY:c,offset:u=20}){const[d,f,m,h,p]=oF({source:{x:e,y:t},sourcePosition:n,target:{x:s,y:r},targetPosition:o,center:{x:l,y:c},offset:u});return[d.reduce((b,x,y)=>{let w="";return y>0&&y<d.length-1?w=iF(d[y-1],x,d[y+1],i):w=`${y===0?"M":"L"}${x.x} ${x.y}`,b+=w,b},""),f,m,h,p]}const Tm=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=le.Bottom,targetPosition:m=le.Top,markerEnd:h,markerStart:p,pathOptions:v,interactionWidth:b})=>{const[x,y,w]=op({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:s,targetPosition:m,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return L.createElement(ru,{path:x,labelX:y,labelY:w,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:p,interactionWidth:b})});Tm.displayName="SmoothStepEdge";const U0=g.memo(e=>{var t;return L.createElement(Tm,{...e,pathOptions:g.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});U0.displayName="StepEdge";function lF({sourceX:e,sourceY:t,targetX:n,targetY:s}){const[r,o,i,l]=nE({sourceX:e,sourceY:t,targetX:n,targetY:s});return[`M ${e},${t}L ${n},${s}`,r,o,i,l]}const F0=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h})=>{const[p,v,b]=lF({sourceX:e,sourceY:t,targetX:n,targetY:s});return L.createElement(ru,{path:p,labelX:v,labelY:b,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h})});F0.displayName="StraightEdge";function Uu(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Xb({pos:e,x1:t,y1:n,x2:s,y2:r,c:o}){switch(e){case le.Left:return[t-Uu(t-s,o),n];case le.Right:return[t+Uu(s-t,o),n];case le.Top:return[t,n-Uu(n-r,o)];case le.Bottom:return[t,n+Uu(r-n,o)]}}function aE({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:o=le.Top,curvature:i=.25}){const[l,c]=Xb({pos:n,x1:e,y1:t,x2:s,y2:r,c:i}),[u,d]=Xb({pos:o,x1:s,y1:r,x2:e,y2:t,c:i}),[f,m,h,p]=sE({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${s},${r}`,f,m,h,p]}const ff=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:r=le.Bottom,targetPosition:o=le.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,pathOptions:v,interactionWidth:b})=>{const[x,y,w]=aE({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:s,targetPosition:o,curvature:v==null?void 0:v.curvature});return L.createElement(ru,{path:x,labelX:y,labelY:w,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:b})});ff.displayName="BezierEdge";const V0=g.createContext(null),cF=V0.Provider;V0.Consumer;const uF=()=>g.useContext(V0),dF=e=>"id"in e&&"source"in e&&"target"in e,fF=({source:e,sourceHandle:t,target:n,targetHandle:s})=>`reactflow__edge-${e}${t||""}-${n}${s||""}`,ip=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(s=>`${s}=${e[s]}`).join("&")}`,mF=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),q0=(e,t)=>{if(!e.source||!e.target)return t;let n;return dF(e)?n={...e}:n={...e,id:fF(e)},mF(n,t)?t:t.concat(n)},lp=({x:e,y:t},[n,s,r],o,[i,l])=>{const c={x:(e-n)/r,y:(t-s)/r};return o?{x:i*Math.round(c.x/i),y:l*Math.round(c.y/l)}:c},oE=({x:e,y:t},[n,s,r])=>({x:e*r+n,y:t*r+s}),fi=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],s=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-s};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-s}:r}},G0=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((s,r)=>{const{x:o,y:i}=fi(r,t).positionAbsolute;return eF(s,I0({x:o,y:i,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return tF(n)},iE=(e,t,[n,s,r]=[0,0,1],o=!1,i=!1,l=[0,0])=>{const c={x:(t.x-n)/r,y:(t.y-s)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(d=>{const{width:f,height:m,selectable:h=!0,hidden:p=!1}=d;if(i&&!h||p)return!1;const{positionAbsolute:v}=fi(d,l),b={x:v.x,y:v.y,width:f||0,height:m||0},x=rp(c,b),y=typeof f>"u"||typeof m>"u"||f===null||m===null,w=o&&x>0,j=(f||0)*(m||0);(y||w||x>=j||d.dragging)&&u.push(d)}),u},lE=(e,t)=>{const n=e.map(s=>s.id);return t.filter(s=>n.includes(s.source)||n.includes(s.target))},cE=(e,t,n,s,r,o=.1)=>{const i=t/(e.width*(1+o)),l=n/(e.height*(1+o)),c=Math.min(i,l),u=Pi(c,s,r),d=e.x+e.width/2,f=e.y+e.height/2,m=t/2-d*u,h=n/2-f*u;return{x:m,y:h,zoom:u}},Ma=(e,t=0)=>e.transition().duration(t);function Wb(e,t,n,s){return(t[n]||[]).reduce((r,o)=>{var i,l;return`${e.id}-${o.id}-${n}`!==s&&r.push({id:o.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+o.x+o.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+o.y+o.height/2}),r},[])}function hF(e,t,n,s,r,o){const{x:i,y:l}=aa(e),u=t.elementsFromPoint(i,l).find(p=>p.classList.contains("react-flow__handle"));if(u){const p=u.getAttribute("data-nodeid");if(p){const v=Z0(void 0,u),b=u.getAttribute("data-handleid"),x=o({nodeId:p,id:b,type:v});if(x){const y=r.find(w=>w.nodeId===p&&w.type===v&&w.id===b);return{handle:{id:b,type:v,nodeId:p,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:x}}}}let d=[],f=1/0;if(r.forEach(p=>{const v=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);if(v<=s){const b=o(p);v<=f&&(v<f?d=[{handle:p,validHandleResult:b}]:v===f&&d.push({handle:p,validHandleResult:b}),f=v)}}),!d.length)return{handle:null,validHandleResult:uE()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:p})=>p.isValid),h=d.some(({handle:p})=>p.type==="target");return d.find(({handle:p,validHandleResult:v})=>h?p.type==="target":m?v.isValid:!0)||d[0]}const gF={source:null,target:null,sourceHandle:null,targetHandle:null},uE=()=>({handleDomNode:null,isValid:!1,connection:gF,endHandle:null});function dE(e,t,n,s,r,o,i){const l=r==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...uE(),handleDomNode:c};if(c){const d=Z0(void 0,c),f=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),p=c.classList.contains("connectableend"),v={source:l?f:n,sourceHandle:l?m:s,target:l?n:f,targetHandle:l?s:m};u.connection=v,h&&p&&(t===no.Strict?l&&d==="source"||!l&&d==="target":f!==n||m!==s)&&(u.endHandle={nodeId:f,handleId:m,type:d},u.isValid=o(v))}return u}function pF({nodes:e,nodeId:t,handleId:n,handleType:s}){return e.reduce((r,o)=>{if(o[ut]){const{handleBounds:i}=o[ut];let l=[],c=[];i&&(l=Wb(o,i,"source",`${t}-${n}-${s}`),c=Wb(o,i,"target",`${t}-${n}-${s}`)),r.push(...l,...c)}return r},[])}function Z0(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function kh(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function xF(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function fE({event:e,handleId:t,nodeId:n,onConnect:s,isTarget:r,getState:o,setState:i,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=JC(e.target),{connectionMode:f,domNode:m,autoPanOnConnect:h,connectionRadius:p,onConnectStart:v,panBy:b,getNodes:x,cancelConnection:y}=o();let w=0,j;const{x:N,y:S}=aa(e),k=d==null?void 0:d.elementFromPoint(N,S),E=Z0(c,k),C=m==null?void 0:m.getBoundingClientRect();if(!C||!E)return;let _,P=aa(e,C),O=!1,$=null,T=!1,z=null;const A=pF({nodes:x(),nodeId:n,handleId:t,handleType:E}),D=()=>{if(!h)return;const[B,U]=QC(P,C);b({x:B,y:U}),w=requestAnimationFrame(D)};i({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:E,connectionStartHandle:{nodeId:n,handleId:t,type:E},connectionEndHandle:null}),v==null||v(e,{nodeId:n,handleId:t,handleType:E});function M(B){const{transform:U}=o();P=aa(B,C);const{handle:I,validHandleResult:V}=hF(B,d,lp(P,U,!1,[1,1]),p,A,Z=>dE(Z,f,n,t,r?"target":"source",l,d));if(j=I,O||(D(),O=!0),z=V.handleDomNode,$=V.connection,T=V.isValid,i({connectionPosition:j&&T?oE({x:j.x,y:j.y},U):P,connectionStatus:xF(!!j,T),connectionEndHandle:V.endHandle}),!j&&!T&&!z)return kh(_);$.source!==$.target&&z&&(kh(_),_=z,z.classList.add("connecting","react-flow__handle-connecting"),z.classList.toggle("valid",T),z.classList.toggle("react-flow__handle-valid",T))}function R(B){var U,I;(j||z)&&$&&T&&(s==null||s($)),(I=(U=o()).onConnectEnd)==null||I.call(U,B),c&&(u==null||u(B)),kh(_),y(),cancelAnimationFrame(w),O=!1,T=!1,$=null,z=null,d.removeEventListener("mousemove",M),d.removeEventListener("mouseup",R),d.removeEventListener("touchmove",M),d.removeEventListener("touchend",R)}d.addEventListener("mousemove",M),d.addEventListener("mouseup",R),d.addEventListener("touchmove",M),d.addEventListener("touchend",R)}const Kb=()=>!0,vF=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),yF=(e,t,n)=>s=>{const{connectionStartHandle:r,connectionEndHandle:o,connectionClickStartHandle:i}=s;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},mE=g.forwardRef(({type:e="source",position:t=le.Top,isValidConnection:n,isConnectable:s=!0,isConnectableStart:r=!0,isConnectableEnd:o=!0,id:i,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...m},h)=>{var C,_;const p=i||null,v=e==="target",b=zt(),x=uF(),{connectOnClick:y,noPanClassName:w}=ot(vF,ln),{connecting:j,clickConnecting:N}=ot(yF(x,p,e),ln);x||(_=(C=b.getState()).onError)==null||_.call(C,"010",wr.error010());const S=P=>{const{defaultEdgeOptions:O,onConnect:$,hasDefaultEdges:T}=b.getState(),z={...O,...P};if(T){const{edges:A,setEdges:D}=b.getState();D(q0(z,A))}$==null||$(z),l==null||l(z)},k=P=>{if(!x)return;const O=tE(P);r&&(O&&P.button===0||!O)&&fE({event:P,handleId:p,nodeId:x,onConnect:S,isTarget:v,getState:b.getState,setState:b.setState,isValidConnection:n||b.getState().isValidConnection||Kb}),O?d==null||d(P):f==null||f(P)},E=P=>{const{onClickConnectStart:O,onClickConnectEnd:$,connectionClickStartHandle:T,connectionMode:z,isValidConnection:A}=b.getState();if(!x||!T&&!r)return;if(!T){O==null||O(P,{nodeId:x,handleId:p,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:x,type:e,handleId:p}});return}const D=JC(P.target),M=n||A||Kb,{connection:R,isValid:B}=dE({nodeId:x,id:p,type:e},z,T.nodeId,T.handleId||null,T.type,M,D);B&&S(R),$==null||$(P),b.setState({connectionClickStartHandle:null})};return L.createElement("div",{"data-handleid":p,"data-nodeid":x,"data-handlepos":t,"data-id":`${x}-${p}-${e}`,className:Jt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,u,{source:!v,target:v,connectable:s,connectablestart:r,connectableend:o,connecting:N,connectionindicator:s&&(r&&!j||o&&j)}]),onMouseDown:k,onTouchStart:k,onClick:y?E:void 0,ref:h,...m},c)});mE.displayName="Handle";var Oi=g.memo(mE);const hE=({data:e,isConnectable:t,targetPosition:n=le.Top,sourcePosition:s=le.Bottom})=>L.createElement(L.Fragment,null,L.createElement(Oi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,L.createElement(Oi,{type:"source",position:s,isConnectable:t}));hE.displayName="DefaultNode";var cp=g.memo(hE);const gE=({data:e,isConnectable:t,sourcePosition:n=le.Bottom})=>L.createElement(L.Fragment,null,e==null?void 0:e.label,L.createElement(Oi,{type:"source",position:n,isConnectable:t}));gE.displayName="InputNode";var pE=g.memo(gE);const xE=({data:e,isConnectable:t,targetPosition:n=le.Top})=>L.createElement(L.Fragment,null,L.createElement(Oi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);xE.displayName="OutputNode";var vE=g.memo(xE);const Y0=()=>null;Y0.displayName="GroupNode";const bF=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Fu=e=>e.id;function wF(e,t){return ln(e.selectedNodes.map(Fu),t.selectedNodes.map(Fu))&&ln(e.selectedEdges.map(Fu),t.selectedEdges.map(Fu))}const yE=g.memo(({onSelectionChange:e})=>{const t=zt(),{selectedNodes:n,selectedEdges:s}=ot(bF,wF);return g.useEffect(()=>{const r={nodes:n,edges:s};e==null||e(r),t.getState().onSelectionChange.forEach(o=>o(r))},[n,s,e]),null});yE.displayName="SelectionListener";const jF=e=>!!e.onSelectionChange;function NF({onSelectionChange:e}){const t=ot(jF);return e||t?L.createElement(yE,{onSelectionChange:e}):null}const SF=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function zo(e,t){g.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ke(e,t,n){g.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const kF=({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:r,onConnectStart:o,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:m,edgesUpdatable:h,elevateNodesOnSelect:p,minZoom:v,maxZoom:b,nodeExtent:x,onNodesChange:y,onEdgesChange:w,elementsSelectable:j,connectionMode:N,snapGrid:S,snapToGrid:k,translateExtent:E,connectOnClick:C,defaultEdgeOptions:_,fitView:P,fitViewOptions:O,onNodesDelete:$,onEdgesDelete:T,onNodeDrag:z,onNodeDragStart:A,onNodeDragStop:D,onSelectionDrag:M,onSelectionDragStart:R,onSelectionDragStop:B,noPanClassName:U,nodeOrigin:I,rfId:V,autoPanOnConnect:Z,autoPanOnNodeDrag:J,onError:ie,connectionRadius:ee,isValidConnection:pe,nodeDragThreshold:fe})=>{const{setNodes:we,setEdges:F,setDefaultNodesAndEdges:X,setMinZoom:Q,setMaxZoom:W,setTranslateExtent:se,setNodeExtent:be,reset:ue}=ot(SF,ln),ne=zt();return g.useEffect(()=>{const ze=s==null?void 0:s.map(xt=>({...xt,..._}));return X(n,ze),()=>{ue()}},[]),ke("defaultEdgeOptions",_,ne.setState),ke("connectionMode",N,ne.setState),ke("onConnect",r,ne.setState),ke("onConnectStart",o,ne.setState),ke("onConnectEnd",i,ne.setState),ke("onClickConnectStart",l,ne.setState),ke("onClickConnectEnd",c,ne.setState),ke("nodesDraggable",u,ne.setState),ke("nodesConnectable",d,ne.setState),ke("nodesFocusable",f,ne.setState),ke("edgesFocusable",m,ne.setState),ke("edgesUpdatable",h,ne.setState),ke("elementsSelectable",j,ne.setState),ke("elevateNodesOnSelect",p,ne.setState),ke("snapToGrid",k,ne.setState),ke("snapGrid",S,ne.setState),ke("onNodesChange",y,ne.setState),ke("onEdgesChange",w,ne.setState),ke("connectOnClick",C,ne.setState),ke("fitViewOnInit",P,ne.setState),ke("fitViewOnInitOptions",O,ne.setState),ke("onNodesDelete",$,ne.setState),ke("onEdgesDelete",T,ne.setState),ke("onNodeDrag",z,ne.setState),ke("onNodeDragStart",A,ne.setState),ke("onNodeDragStop",D,ne.setState),ke("onSelectionDrag",M,ne.setState),ke("onSelectionDragStart",R,ne.setState),ke("onSelectionDragStop",B,ne.setState),ke("noPanClassName",U,ne.setState),ke("nodeOrigin",I,ne.setState),ke("rfId",V,ne.setState),ke("autoPanOnConnect",Z,ne.setState),ke("autoPanOnNodeDrag",J,ne.setState),ke("onError",ie,ne.setState),ke("connectionRadius",ee,ne.setState),ke("isValidConnection",pe,ne.setState),ke("nodeDragThreshold",fe,ne.setState),zo(e,we),zo(t,F),zo(v,Q),zo(b,W),zo(E,se),zo(x,be),null},Qb={display:"none"},CF={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},bE="react-flow__node-desc",wE="react-flow__edge-desc",EF="react-flow__aria-live",_F=e=>e.ariaLiveMessage;function AF({rfId:e}){const t=ot(_F);return L.createElement("div",{id:`${EF}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:CF},t)}function TF({rfId:e,disableKeyboardA11y:t}){return L.createElement(L.Fragment,null,L.createElement("div",{id:`${bE}-${e}`,style:Qb},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),L.createElement("div",{id:`${wE}-${e}`,style:Qb},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&L.createElement(AF,{rfId:e}))}var Sc=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,s]=g.useState(!1),r=g.useRef(!1),o=g.useRef(new Set([])),[i,l]=g.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,m)=>f.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return g.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&ap(h))return!1;const v=ew(h.code,l);o.current.add(h[v]),Jb(i,o.current,!1)&&(h.preventDefault(),s(!0))},f=h=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&ap(h))return!1;const v=ew(h.code,l);Jb(i,o.current,!0)?(s(!1),o.current.clear()):o.current.delete(h[v]),h.key==="Meta"&&o.current.clear(),r.current=!1},m=()=>{o.current.clear(),s(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",m)}}},[e,s]),n};function Jb(e,t,n){return e.filter(s=>n||s.length===t.size).some(s=>s.every(r=>t.has(r)))}function ew(e,t){return t.includes(e)?"code":"key"}function jE(e,t,n,s){var l,c;const r=e.parentNode||e.parentId;if(!r)return n;const o=t.get(r),i=fi(o,s);return jE(o,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((l=o[ut])==null?void 0:l.z)??0)>(n.z??0)?((c=o[ut])==null?void 0:c.z)??0:n.z??0},s)}function NE(e,t,n){e.forEach(s=>{var o;const r=s.parentNode||s.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[s.id]){const{x:i,y:l,z:c}=jE(s,e,{...s.position,z:((o=s[ut])==null?void 0:o.z)??0},t);s.positionAbsolute={x:i,y:l},s[ut].z=c,n!=null&&n[s.id]&&(s[ut].isParent=!0)}})}function Ch(e,t,n,s){const r=new Map,o={},i=s?1e3:0;return e.forEach(l=>{var h;const c=(Hn(l.zIndex)?l.zIndex:0)+(l.selected?i:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(o[f]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,ut,{enumerable:!1,value:{handleBounds:m||(h=u==null?void 0:u[ut])==null?void 0:h.handleBounds,z:c}}),r.set(l.id,d)}),NE(r,n,o),r}function SE(e,t={}){const{getNodes:n,width:s,height:r,minZoom:o,maxZoom:i,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),m=t.initial&&!u&&d;if(l&&c&&(m||!t.initial)){const p=n().filter(b=>{var y;const x=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(y=t.nodes)!=null&&y.length?x&&t.nodes.some(w=>w.id===b.id):x}),v=p.every(b=>b.width&&b.height);if(p.length>0&&v){const b=G0(p,f),{x,y,zoom:w}=cE(b,s,r,t.minZoom??o,t.maxZoom??i,t.padding??.1),j=ra.translate(x,y).scale(w);return typeof t.duration=="number"&&t.duration>0?l.transform(Ma(c,t.duration),j):l.transform(c,j),!0}}return!1}function MF(e,t){return e.forEach(n=>{const s=t.get(n.id);s&&t.set(s.id,{...s,[ut]:s[ut],selected:n.selected})}),new Map(t)}function RF(e,t){return t.map(n=>{const s=e.find(r=>r.id===n.id);return s&&(n.selected=s.selected),n})}function Vu({changedNodes:e,changedEdges:t,get:n,set:s}){const{nodeInternals:r,edges:o,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&s({nodeInternals:MF(e,r)}),i==null||i(e)),t!=null&&t.length&&(u&&s({edges:RF(t,o)}),l==null||l(t))}const Lo=()=>{},DF={zoomIn:Lo,zoomOut:Lo,zoomTo:Lo,getZoom:()=>1,setViewport:Lo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Lo,fitBounds:Lo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},zF=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),LF=()=>{const e=zt(),{d3Zoom:t,d3Selection:n}=ot(zF,ln);return g.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(Ma(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(Ma(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,o)=>t.scaleTo(Ma(n,o==null?void 0:o.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,o)=>{const[i,l,c]=e.getState().transform,u=ra.translate(r.x??i,r.y??l).scale(r.zoom??c);t.transform(Ma(n,o==null?void 0:o.duration),u)},getViewport:()=>{const[r,o,i]=e.getState().transform;return{x:r,y:o,zoom:i}},fitView:r=>SE(e.getState,r),setCenter:(r,o,i)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=l/2-r*d,m=c/2-o*d,h=ra.translate(f,m).scale(d);t.transform(Ma(n,i==null?void 0:i.duration),h)},fitBounds:(r,o)=>{const{width:i,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:m}=cE(r,i,l,c,u,(o==null?void 0:o.padding)??.1),h=ra.translate(d,f).scale(m);t.transform(Ma(n,o==null?void 0:o.duration),h)},project:r=>{const{transform:o,snapToGrid:i,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),lp(r,o,i,l)},screenToFlowPosition:r=>{const{transform:o,snapToGrid:i,snapGrid:l,domNode:c}=e.getState();if(!c)return r;const{x:u,y:d}=c.getBoundingClientRect(),f={x:r.x-u,y:r.y-d};return lp(f,o,i,l)},flowToScreenPosition:r=>{const{transform:o,domNode:i}=e.getState();if(!i)return r;const{x:l,y:c}=i.getBoundingClientRect(),u=oE(r,o);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:DF,[t,n])};function X0(){const e=LF(),t=zt(),n=g.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),s=g.useCallback(v=>t.getState().nodeInternals.get(v),[]),r=g.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(b=>({...b}))},[]),o=g.useCallback(v=>{const{edges:b=[]}=t.getState();return b.find(x=>x.id===v)},[]),i=g.useCallback(v=>{const{getNodes:b,setNodes:x,hasDefaultNodes:y,onNodesChange:w}=t.getState(),j=b(),N=typeof v=="function"?v(j):v;if(y)x(N);else if(w){const S=N.length===0?j.map(k=>({type:"remove",id:k.id})):N.map(k=>({item:k,type:"reset"}));w(S)}},[]),l=g.useCallback(v=>{const{edges:b=[],setEdges:x,hasDefaultEdges:y,onEdgesChange:w}=t.getState(),j=typeof v=="function"?v(b):v;if(y)x(j);else if(w){const N=j.length===0?b.map(S=>({type:"remove",id:S.id})):j.map(S=>({item:S,type:"reset"}));w(N)}},[]),c=g.useCallback(v=>{const b=Array.isArray(v)?v:[v],{getNodes:x,setNodes:y,hasDefaultNodes:w,onNodesChange:j}=t.getState();if(w){const S=[...x(),...b];y(S)}else if(j){const N=b.map(S=>({item:S,type:"add"}));j(N)}},[]),u=g.useCallback(v=>{const b=Array.isArray(v)?v:[v],{edges:x=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:j}=t.getState();if(w)y([...x,...b]);else if(j){const N=b.map(S=>({item:S,type:"add"}));j(N)}},[]),d=g.useCallback(()=>{const{getNodes:v,edges:b=[],transform:x}=t.getState(),[y,w,j]=x;return{nodes:v().map(N=>({...N})),edges:b.map(N=>({...N})),viewport:{x:y,y:w,zoom:j}}},[]),f=g.useCallback(({nodes:v,edges:b})=>{const{nodeInternals:x,getNodes:y,edges:w,hasDefaultNodes:j,hasDefaultEdges:N,onNodesDelete:S,onEdgesDelete:k,onNodesChange:E,onEdgesChange:C}=t.getState(),_=(v||[]).map(z=>z.id),P=(b||[]).map(z=>z.id),O=y().reduce((z,A)=>{const D=A.parentNode||A.parentId,M=!_.includes(A.id)&&D&&z.find(B=>B.id===D);return(typeof A.deletable=="boolean"?A.deletable:!0)&&(_.includes(A.id)||M)&&z.push(A),z},[]),$=w.filter(z=>typeof z.deletable=="boolean"?z.deletable:!0),T=$.filter(z=>P.includes(z.id));if(O||T){const z=lE(O,$),A=[...T,...z],D=A.reduce((M,R)=>(M.includes(R.id)||M.push(R.id),M),[]);if((N||j)&&(N&&t.setState({edges:w.filter(M=>!D.includes(M.id))}),j&&(O.forEach(M=>{x.delete(M.id)}),t.setState({nodeInternals:new Map(x)}))),D.length>0&&(k==null||k(A),C&&C(D.map(M=>({id:M,type:"remove"})))),O.length>0&&(S==null||S(O),E)){const M=O.map(R=>({id:R.id,type:"remove"}));E(M)}}},[]),m=g.useCallback(v=>{const b=nF(v),x=b?null:t.getState().nodeInternals.get(v.id);return!b&&!x?[null,null,b]:[b?v:qb(x),x,b]},[]),h=g.useCallback((v,b=!0,x)=>{const[y,w,j]=m(v);return y?(x||t.getState().getNodes()).filter(N=>{if(!j&&(N.id===w.id||!N.positionAbsolute))return!1;const S=qb(N),k=rp(S,y);return b&&k>0||k>=y.width*y.height}):[]},[]),p=g.useCallback((v,b,x=!0)=>{const[y]=m(v);if(!y)return!1;const w=rp(y,b);return x&&w>0||w>=y.width*y.height},[]);return g.useMemo(()=>({...e,getNodes:n,getNode:s,getEdges:r,getEdge:o,setNodes:i,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:p}),[e,n,s,r,o,i,l,c,u,d,f,h,p])}const $F={actInsideInputWithModifier:!1};var PF=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=zt(),{deleteElements:s}=X0(),r=Sc(e,$F),o=Sc(t);g.useEffect(()=>{if(r){const{edges:i,getNodes:l}=n.getState(),c=l().filter(d=>d.selected),u=i.filter(d=>d.selected);s({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),g.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function OF(e){const t=zt();g.useEffect(()=>{let n;const s=()=>{var o,i;if(!e.current)return;const r=O0(e.current);(r.height===0||r.width===0)&&((i=(o=t.getState()).onError)==null||i.call(o,"004",wr.error004())),t.setState({width:r.width||500,height:r.height||500})};return s(),window.addEventListener("resize",s),e.current&&(n=new ResizeObserver(()=>s()),n.observe(e.current)),()=>{window.removeEventListener("resize",s),n&&e.current&&n.unobserve(e.current)}},[])}const W0={position:"absolute",width:"100%",height:"100%",top:0,left:0},BF=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,qu=e=>({x:e.x,y:e.y,zoom:e.k}),$o=(e,t)=>e.target.closest(`.${t}`),tw=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),nw=e=>{const t=e.ctrlKey&&uf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},IF=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),HF=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:s,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Ia.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:m,translateExtent:h,minZoom:p,maxZoom:v,zoomActivationKeyCode:b,preventScrolling:x=!0,children:y,noWheelClassName:w,noPanClassName:j})=>{const N=g.useRef(),S=zt(),k=g.useRef(!1),E=g.useRef(!1),C=g.useRef(null),_=g.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:O,d3ZoomHandler:$,userSelectionActive:T}=ot(IF,ln),z=Sc(b),A=g.useRef(0),D=g.useRef(!1),M=g.useRef();return OF(C),g.useEffect(()=>{if(C.current){const R=C.current.getBoundingClientRect(),B=YU().scaleExtent([p,v]).translateExtent(h),U=ts(C.current).call(B),I=ra.translate(m.x,m.y).scale(Pi(m.zoom,p,v)),V=[[0,0],[R.width,R.height]],Z=B.constrain()(I,V,h);B.transform(U,Z),B.wheelDelta(nw),S.setState({d3Zoom:B,d3Selection:U,d3ZoomHandler:U.on("wheel.zoom"),transform:[Z.x,Z.y,Z.k],domNode:C.current.closest(".react-flow")})}},[]),g.useEffect(()=>{O&&P&&(i&&!z&&!T?O.on("wheel.zoom",R=>{if($o(R,w))return!1;R.preventDefault(),R.stopImmediatePropagation();const B=O.property("__zoom").k||1;if(R.ctrlKey&&o){const pe=ws(R),fe=nw(R),we=B*Math.pow(2,fe);P.scaleTo(O,we,pe,R);return}const U=R.deltaMode===1?20:1;let I=c===Ia.Vertical?0:R.deltaX*U,V=c===Ia.Horizontal?0:R.deltaY*U;!uf()&&R.shiftKey&&c!==Ia.Vertical&&(I=R.deltaY*U,V=0),P.translateBy(O,-(I/B)*l,-(V/B)*l,{internal:!0});const Z=qu(O.property("__zoom")),{onViewportChangeStart:J,onViewportChange:ie,onViewportChangeEnd:ee}=S.getState();clearTimeout(M.current),D.current||(D.current=!0,t==null||t(R,Z),J==null||J(Z)),D.current&&(e==null||e(R,Z),ie==null||ie(Z),M.current=setTimeout(()=>{n==null||n(R,Z),ee==null||ee(Z),D.current=!1},150))},{passive:!1}):typeof $<"u"&&O.on("wheel.zoom",function(R,B){if(!x&&R.type==="wheel"&&!R.ctrlKey||$o(R,w))return null;R.preventDefault(),$.call(this,R,B)},{passive:!1}))},[T,i,c,O,P,$,z,o,x,w,t,e,n]),g.useEffect(()=>{P&&P.on("start",R=>{var I,V;if(!R.sourceEvent||R.sourceEvent.internal)return null;A.current=(I=R.sourceEvent)==null?void 0:I.button;const{onViewportChangeStart:B}=S.getState(),U=qu(R.transform);k.current=!0,_.current=U,((V=R.sourceEvent)==null?void 0:V.type)==="mousedown"&&S.setState({paneDragging:!0}),B==null||B(U),t==null||t(R.sourceEvent,U)})},[P,t]),g.useEffect(()=>{P&&(T&&!k.current?P.on("zoom",null):T||P.on("zoom",R=>{var U;const{onViewportChange:B}=S.getState();if(S.setState({transform:[R.transform.x,R.transform.y,R.transform.k]}),E.current=!!(s&&tw(f,A.current??0)),(e||B)&&!((U=R.sourceEvent)!=null&&U.internal)){const I=qu(R.transform);B==null||B(I),e==null||e(R.sourceEvent,I)}}))},[T,P,e,f,s]),g.useEffect(()=>{P&&P.on("end",R=>{if(!R.sourceEvent||R.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=S.getState();if(k.current=!1,S.setState({paneDragging:!1}),s&&tw(f,A.current??0)&&!E.current&&s(R.sourceEvent),E.current=!1,(n||B)&&BF(_.current,R.transform)){const U=qu(R.transform);_.current=U,clearTimeout(N.current),N.current=setTimeout(()=>{B==null||B(U),n==null||n(R.sourceEvent,U)},i?150:0)}})},[P,i,f,n,s]),g.useEffect(()=>{P&&P.filter(R=>{const B=z||r,U=o&&R.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&R.button===1&&R.type==="mousedown"&&($o(R,"react-flow__node")||$o(R,"react-flow__edge")))return!0;if(!f&&!B&&!i&&!u&&!o||T||!u&&R.type==="dblclick"||$o(R,w)&&R.type==="wheel"||$o(R,j)&&(R.type!=="wheel"||i&&R.type==="wheel"&&!z)||!o&&R.ctrlKey&&R.type==="wheel"||!B&&!i&&!U&&R.type==="wheel"||!f&&(R.type==="mousedown"||R.type==="touchstart")||Array.isArray(f)&&!f.includes(R.button)&&R.type==="mousedown")return!1;const I=Array.isArray(f)&&f.includes(R.button)||!R.button||R.button<=1;return(!R.ctrlKey||R.type==="wheel")&&I})},[T,P,r,o,i,u,f,d,z]),L.createElement("div",{className:"react-flow__renderer",ref:C,style:W0},y)},UF=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function FF(){const{userSelectionActive:e,userSelectionRect:t}=ot(UF,ln);return e&&t?L.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function sw(e,t){const n=t.parentNode||t.parentId,s=e.find(r=>r.id===n);if(s){const r=t.position.x+t.width-s.width,o=t.position.y+t.height-s.height;if(r>0||o>0||t.position.x<0||t.position.y<0){if(s.style={...s.style},s.style.width=s.style.width??s.width,s.style.height=s.style.height??s.height,r>0&&(s.style.width+=r),o>0&&(s.style.height+=o),t.position.x<0){const i=Math.abs(t.position.x);s.position.x=s.position.x-i,s.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);s.position.y=s.position.y-i,s.style.height+=i,t.position.y=0}s.width=s.style.width,s.height=s.style.height}}}function kE(e,t){if(e.some(s=>s.type==="reset"))return e.filter(s=>s.type==="reset").map(s=>s.item);const n=e.filter(s=>s.type==="add").map(s=>s.item);return t.reduce((s,r)=>{const o=e.filter(l=>l.id===r.id);if(o.length===0)return s.push(r),s;const i={...r};for(const l of o)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&sw(s,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&sw(s,i);break}case"remove":return s}return s.push(i),s},n)}function CE(e,t){return kE(e,t)}function VF(e,t){return kE(e,t)}const Ir=(e,t)=>({id:e,type:"select",selected:t});function Go(e,t){return e.reduce((n,s)=>{const r=t.includes(s.id);return!s.selected&&r?(s.selected=!0,n.push(Ir(s.id,!0))):s.selected&&!r&&(s.selected=!1,n.push(Ir(s.id,!1))),n},[])}const Eh=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},qF=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),EE=g.memo(({isSelecting:e,selectionMode:t=Nc.Full,panOnDrag:n,onSelectionStart:s,onSelectionEnd:r,onPaneClick:o,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const m=g.useRef(null),h=zt(),p=g.useRef(0),v=g.useRef(0),b=g.useRef(),{userSelectionActive:x,elementsSelectable:y,dragging:w}=ot(qF,ln),j=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,v.current=0},N=$=>{o==null||o($),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},S=$=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){$.preventDefault();return}i==null||i($)},k=l?$=>l($):void 0,E=$=>{const{resetSelectedElements:T,domNode:z}=h.getState();if(b.current=z==null?void 0:z.getBoundingClientRect(),!y||!e||$.button!==0||$.target!==m.current||!b.current)return;const{x:A,y:D}=aa($,b.current);T(),h.setState({userSelectionRect:{width:0,height:0,startX:A,startY:D,x:A,y:D}}),s==null||s($)},C=$=>{const{userSelectionRect:T,nodeInternals:z,edges:A,transform:D,onNodesChange:M,onEdgesChange:R,nodeOrigin:B,getNodes:U}=h.getState();if(!e||!b.current||!T)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const I=aa($,b.current),V=T.startX??0,Z=T.startY??0,J={...T,x:I.x<V?I.x:V,y:I.y<Z?I.y:Z,width:Math.abs(I.x-V),height:Math.abs(I.y-Z)},ie=U(),ee=iE(z,J,D,t===Nc.Partial,!0,B),pe=lE(ee,A).map(we=>we.id),fe=ee.map(we=>we.id);if(p.current!==fe.length){p.current=fe.length;const we=Go(ie,fe);we.length&&(M==null||M(we))}if(v.current!==pe.length){v.current=pe.length;const we=Go(A,pe);we.length&&(R==null||R(we))}h.setState({userSelectionRect:J})},_=$=>{if($.button!==0)return;const{userSelectionRect:T}=h.getState();!x&&T&&$.target===m.current&&(N==null||N($)),h.setState({nodesSelectionActive:p.current>0}),j(),r==null||r($)},P=$=>{x&&(h.setState({nodesSelectionActive:p.current>0}),r==null||r($)),j()},O=y&&(e||x);return L.createElement("div",{className:Jt(["react-flow__pane",{dragging:w,selection:e}]),onClick:O?void 0:Eh(N,m),onContextMenu:Eh(S,m),onWheel:Eh(k,m),onMouseEnter:O?void 0:c,onMouseDown:O?E:void 0,onMouseMove:O?C:u,onMouseUp:O?_:void 0,onMouseLeave:O?P:d,ref:m,style:W0},f,L.createElement(FF,null))});EE.displayName="Pane";function _E(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const s=t.get(n);return s?s.selected?!0:_E(s,t):!1}function rw(e,t,n){let s=e;do{if(s!=null&&s.matches(t))return!0;if(s===n.current)return!1;s=s.parentElement}while(s);return!1}function GF(e,t,n,s){return Array.from(e.values()).filter(r=>(r.selected||r.id===s)&&(!r.parentNode||r.parentId||!_E(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var o,i;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((o=r.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((i=r.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function ZF(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function AE(e,t,n,s,r=[0,0],o){const i=ZF(e,e.extent||s);let l=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:m,y:h}=fi(f,r).positionAbsolute;l=f&&Hn(m)&&Hn(h)&&Hn(f.width)&&Hn(f.height)?[[m+e.width*r[0],h+e.height*r[1]],[m+f.width-e.width+e.width*r[0],h+f.height-e.height+e.height*r[1]]]:l}else o==null||o("005",wr.error005()),l=i;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:m,y:h}=fi(f,r).positionAbsolute;l=[[e.extent[0][0]+m,e.extent[0][1]+h],[e.extent[1][0]+m,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const f=n.get(c);u=fi(f,r).positionAbsolute}const d=l&&l!=="parent"?B0(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function _h({nodeId:e,dragItems:t,nodeInternals:n}){const s=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?s.find(r=>r.id===e):s[0],s]}const aw=(e,t,n,s)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const o=Array.from(r),i=t.getBoundingClientRect(),l={x:i.width*s[0],y:i.height*s[1]};return o.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-l.x)/n,y:(u.top-i.top-l.y)/n,...O0(c)}})};function kl(e,t,n){return n===void 0?n:s=>{const r=t().nodeInternals.get(e);r&&n(s,{...r})}}function up({id:e,store:t,unselect:n=!1,nodeRef:s}){const{addSelectedNodes:r,unselectNodesAndEdges:o,multiSelectionActive:i,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",wr.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=s==null?void 0:s.current)==null?void 0:d.blur()})):r([e])}function YF(){const e=zt();return g.useCallback(({sourceEvent:n})=>{const{transform:s,snapGrid:r,snapToGrid:o}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,c={x:(i-s[0])/s[2],y:(l-s[1])/s[2]};return{xSnapped:o?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:o?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function Ah(e){return(t,n,s)=>e==null?void 0:e(t,s)}function TE({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:s,nodeId:r,isSelectable:o,selectNodesOnDrag:i}){const l=zt(),[c,u]=g.useState(!1),d=g.useRef([]),f=g.useRef({x:null,y:null}),m=g.useRef(0),h=g.useRef(null),p=g.useRef({x:0,y:0}),v=g.useRef(null),b=g.useRef(!1),x=g.useRef(!1),y=g.useRef(!1),w=YF();return g.useEffect(()=>{if(e!=null&&e.current){const j=ts(e.current),N=({x:E,y:C})=>{const{nodeInternals:_,onNodeDrag:P,onSelectionDrag:O,updateNodePositions:$,nodeExtent:T,snapGrid:z,snapToGrid:A,nodeOrigin:D,onError:M}=l.getState();f.current={x:E,y:C};let R=!1,B={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&T){const I=G0(d.current,D);B=I0(I)}if(d.current=d.current.map(I=>{const V={x:E-I.distance.x,y:C-I.distance.y};A&&(V.x=z[0]*Math.round(V.x/z[0]),V.y=z[1]*Math.round(V.y/z[1]));const Z=[[T[0][0],T[0][1]],[T[1][0],T[1][1]]];d.current.length>1&&T&&!I.extent&&(Z[0][0]=I.positionAbsolute.x-B.x+T[0][0],Z[1][0]=I.positionAbsolute.x+(I.width??0)-B.x2+T[1][0],Z[0][1]=I.positionAbsolute.y-B.y+T[0][1],Z[1][1]=I.positionAbsolute.y+(I.height??0)-B.y2+T[1][1]);const J=AE(I,V,_,Z,D,M);return R=R||I.position.x!==J.position.x||I.position.y!==J.position.y,I.position=J.position,I.positionAbsolute=J.positionAbsolute,I}),!R)return;$(d.current,!0,!0),u(!0);const U=r?P:Ah(O);if(U&&v.current){const[I,V]=_h({nodeId:r,dragItems:d.current,nodeInternals:_});U(v.current,I,V)}},S=()=>{if(!h.current)return;const[E,C]=QC(p.current,h.current);if(E!==0||C!==0){const{transform:_,panBy:P}=l.getState();f.current.x=(f.current.x??0)-E/_[2],f.current.y=(f.current.y??0)-C/_[2],P({x:E,y:C})&&N(f.current)}m.current=requestAnimationFrame(S)},k=E=>{var D;const{nodeInternals:C,multiSelectionActive:_,nodesDraggable:P,unselectNodesAndEdges:O,onNodeDragStart:$,onSelectionDragStart:T}=l.getState();x.current=!0;const z=r?$:Ah(T);(!i||!o)&&!_&&r&&((D=C.get(r))!=null&&D.selected||O()),r&&o&&i&&up({id:r,store:l,nodeRef:e});const A=w(E);if(f.current=A,d.current=GF(C,P,A,r),z&&d.current){const[M,R]=_h({nodeId:r,dragItems:d.current,nodeInternals:C});z(E.sourceEvent,M,R)}};if(t)j.on(".drag",null);else{const E=rH().on("start",C=>{const{domNode:_,nodeDragThreshold:P}=l.getState();P===0&&k(C),y.current=!1;const O=w(C);f.current=O,h.current=(_==null?void 0:_.getBoundingClientRect())||null,p.current=aa(C.sourceEvent,h.current)}).on("drag",C=>{var $,T;const _=w(C),{autoPanOnNodeDrag:P,nodeDragThreshold:O}=l.getState();if(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!b.current&&x.current&&P&&(b.current=!0,S()),!x.current){const z=_.xSnapped-((($=f==null?void 0:f.current)==null?void 0:$.x)??0),A=_.ySnapped-(((T=f==null?void 0:f.current)==null?void 0:T.y)??0);Math.sqrt(z*z+A*A)>O&&k(C)}(f.current.x!==_.xSnapped||f.current.y!==_.ySnapped)&&d.current&&x.current&&(v.current=C.sourceEvent,p.current=aa(C.sourceEvent,h.current),N(_))}}).on("end",C=>{if(!(!x.current||y.current)&&(u(!1),b.current=!1,x.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:_,nodeInternals:P,onNodeDragStop:O,onSelectionDragStop:$}=l.getState(),T=r?O:Ah($);if(_(d.current,!1,!1),T){const[z,A]=_h({nodeId:r,dragItems:d.current,nodeInternals:P});T(C.sourceEvent,z,A)}}}).filter(C=>{const _=C.target;return!C.button&&(!n||!rw(_,`.${n}`,e))&&(!s||rw(_,s,e))});return j.call(E),()=>{j.on(".drag",null)}}}},[e,t,n,s,o,l,r,i,w]),c}function ME(){const e=zt();return g.useCallback(n=>{const{nodeInternals:s,nodeExtent:r,updateNodePositions:o,getNodes:i,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(y=>y.selected&&(y.draggable||d&&typeof y.draggable>"u")),m=l?c[0]:5,h=l?c[1]:5,p=n.isShiftPressed?4:1,v=n.x*m*p,b=n.y*h*p,x=f.map(y=>{if(y.positionAbsolute){const w={x:y.positionAbsolute.x+v,y:y.positionAbsolute.y+b};l&&(w.x=c[0]*Math.round(w.x/c[0]),w.y=c[1]*Math.round(w.y/c[1]));const{positionAbsolute:j,position:N}=AE(y,w,s,r,void 0,u);y.position=N,y.positionAbsolute=j}return y});o(x,!0,!1)},[])}const mi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Cl=e=>{const t=({id:n,type:s,data:r,xPos:o,yPos:i,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:h,onContextMenu:p,onDoubleClick:v,style:b,className:x,isDraggable:y,isSelectable:w,isConnectable:j,isFocusable:N,selectNodesOnDrag:S,sourcePosition:k,targetPosition:E,hidden:C,resizeObserver:_,dragHandle:P,zIndex:O,isParent:$,noDragClassName:T,noPanClassName:z,initialized:A,disableKeyboardA11y:D,ariaLabel:M,rfId:R,hasHandleBounds:B})=>{const U=zt(),I=g.useRef(null),V=g.useRef(null),Z=g.useRef(k),J=g.useRef(E),ie=g.useRef(s),ee=w||y||d||f||m||h,pe=ME(),fe=kl(n,U.getState,f),we=kl(n,U.getState,m),F=kl(n,U.getState,h),X=kl(n,U.getState,p),Q=kl(n,U.getState,v),W=ue=>{const{nodeDragThreshold:ne}=U.getState();if(w&&(!S||!y||ne>0)&&up({id:n,store:U,nodeRef:I}),d){const ze=U.getState().nodeInternals.get(n);ze&&d(ue,{...ze})}},se=ue=>{if(!ap(ue)&&!D)if(eE.includes(ue.key)&&w){const ne=ue.key==="Escape";up({id:n,store:U,unselect:ne,nodeRef:I})}else y&&u&&Object.prototype.hasOwnProperty.call(mi,ue.key)&&(U.setState({ariaLiveMessage:`Moved selected node ${ue.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~i}`}),pe({x:mi[ue.key].x,y:mi[ue.key].y,isShiftPressed:ue.shiftKey}))};g.useEffect(()=>()=>{V.current&&(_==null||_.unobserve(V.current),V.current=null)},[]),g.useEffect(()=>{if(I.current&&!C){const ue=I.current;(!A||!B||V.current!==ue)&&(V.current&&(_==null||_.unobserve(V.current)),_==null||_.observe(ue),V.current=ue)}},[C,A,B]),g.useEffect(()=>{const ue=ie.current!==s,ne=Z.current!==k,ze=J.current!==E;I.current&&(ue||ne||ze)&&(ue&&(ie.current=s),ne&&(Z.current=k),ze&&(J.current=E),U.getState().updateNodeDimensions([{id:n,nodeElement:I.current,forceUpdate:!0}]))},[n,s,k,E]);const be=TE({nodeRef:I,disabled:C||!y,noDragClassName:T,handleSelector:P,nodeId:n,isSelectable:w,selectNodesOnDrag:S});return C?null:L.createElement("div",{className:Jt(["react-flow__node",`react-flow__node-${s}`,{[z]:y},x,{selected:u,selectable:w,parent:$,dragging:be}]),ref:I,style:{zIndex:O,transform:`translate(${l}px,${c}px)`,pointerEvents:ee?"all":"none",visibility:A?"visible":"hidden",...b},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:fe,onMouseMove:we,onMouseLeave:F,onContextMenu:X,onClick:W,onDoubleClick:Q,onKeyDown:N?se:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":D?void 0:`${bE}-${R}`,"aria-label":M},L.createElement(cF,{value:n},L.createElement(e,{id:n,data:r,type:s,xPos:o,yPos:i,selected:u,isConnectable:j,sourcePosition:k,targetPosition:E,dragging:be,dragHandle:P,zIndex:O})))};return t.displayName="NodeWrapper",g.memo(t)};const XF=e=>{const t=e.getNodes().filter(n=>n.selected);return{...G0(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function WF({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const s=zt(),{width:r,height:o,x:i,y:l,transformString:c,userSelectionActive:u}=ot(XF,ln),d=ME(),f=g.useRef(null);if(g.useEffect(()=>{var p;n||(p=f.current)==null||p.focus({preventScroll:!0})},[n]),TE({nodeRef:f}),u||!r||!o)return null;const m=e?p=>{const v=s.getState().getNodes().filter(b=>b.selected);e(p,v)}:void 0,h=p=>{Object.prototype.hasOwnProperty.call(mi,p.key)&&d({x:mi[p.key].x,y:mi[p.key].y,isShiftPressed:p.shiftKey})};return L.createElement("div",{className:Jt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},L.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:r,height:o,top:l,left:i}}))}var KF=g.memo(WF);const QF=e=>e.nodesSelectionActive,RE=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:o,onPaneScroll:i,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:h,onSelectionStart:p,onSelectionEnd:v,multiSelectionKeyCode:b,panActivationKeyCode:x,zoomActivationKeyCode:y,elementsSelectable:w,zoomOnScroll:j,zoomOnPinch:N,panOnScroll:S,panOnScrollSpeed:k,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:_,defaultViewport:P,translateExtent:O,minZoom:$,maxZoom:T,preventScrolling:z,onSelectionContextMenu:A,noWheelClassName:D,noPanClassName:M,disableKeyboardA11y:R})=>{const B=ot(QF),U=Sc(f),I=Sc(x),V=I||_,Z=I||S,J=U||m&&V!==!0;return PF({deleteKeyCode:l,multiSelectionKeyCode:b}),L.createElement(HF,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:o,elementsSelectable:w,zoomOnScroll:j,zoomOnPinch:N,panOnScroll:Z,panOnScrollSpeed:k,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:!U&&V,defaultViewport:P,translateExtent:O,minZoom:$,maxZoom:T,zoomActivationKeyCode:y,preventScrolling:z,noWheelClassName:D,noPanClassName:M},L.createElement(EE,{onSelectionStart:p,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:o,onPaneScroll:i,panOnDrag:V,isSelecting:!!J,selectionMode:h},e,B&&L.createElement(KF,{onSelectionContextMenu:A,noPanClassName:M,disableKeyboardA11y:R})))};RE.displayName="FlowRenderer";var JF=g.memo(RE);function eV(e){return ot(g.useCallback(n=>e?iE(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function tV(e){const t={input:Cl(e.input||pE),default:Cl(e.default||cp),output:Cl(e.output||vE),group:Cl(e.group||Y0)},n={},s=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,o)=>(r[o]=Cl(e[o]||cp),r),n);return{...t,...s}}const nV=({x:e,y:t,width:n,height:s,origin:r})=>!n||!s?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-s*r[1]},sV=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),DE=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:s,elementsSelectable:r,updateNodeDimensions:o,onError:i}=ot(sV,ln),l=eV(e.onlyRenderVisibleElements),c=g.useRef(),u=g.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const m=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));o(m)});return c.current=d,d},[]);return g.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),L.createElement("div",{className:"react-flow__nodes",style:W0},l.map(d=>{var N,S,k;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",wr.error003(f)),f="default");const m=e.nodeTypes[f]||e.nodeTypes.default,h=!!(d.draggable||t&&typeof d.draggable>"u"),p=!!(d.selectable||r&&typeof d.selectable>"u"),v=!!(d.connectable||n&&typeof d.connectable>"u"),b=!!(d.focusable||s&&typeof d.focusable>"u"),x=e.nodeExtent?B0(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,y=(x==null?void 0:x.x)??0,w=(x==null?void 0:x.y)??0,j=nV({x:y,y:w,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return L.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||le.Bottom,targetPosition:d.targetPosition||le.Top,hidden:d.hidden,xPos:y,yPos:w,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:h,isSelectable:p,isConnectable:v,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((N=d[ut])==null?void 0:N.z)??0,isParent:!!((S=d[ut])!=null&&S.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((k=d[ut])!=null&&k.handleBounds)})}))};DE.displayName="NodeRenderer";var rV=g.memo(DE);const aV=(e,t,n)=>n===le.Left?e-t:n===le.Right?e+t:e,oV=(e,t,n)=>n===le.Top?e-t:n===le.Bottom?e+t:e,ow="react-flow__edgeupdater",iw=({position:e,centerX:t,centerY:n,radius:s=10,onMouseDown:r,onMouseEnter:o,onMouseOut:i,type:l})=>L.createElement("circle",{onMouseDown:r,onMouseEnter:o,onMouseOut:i,className:Jt([ow,`${ow}-${l}`]),cx:aV(t,s,e),cy:oV(n,s,e),r:s,stroke:"transparent",fill:"transparent"}),iV=()=>!0;var Po=e=>{const t=({id:n,className:s,type:r,data:o,onClick:i,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:b,source:x,target:y,sourceX:w,sourceY:j,targetX:N,targetY:S,sourcePosition:k,targetPosition:E,elementsSelectable:C,hidden:_,sourceHandleId:P,targetHandleId:O,onContextMenu:$,onMouseEnter:T,onMouseMove:z,onMouseLeave:A,reconnectRadius:D,onReconnect:M,onReconnectStart:R,onReconnectEnd:B,markerEnd:U,markerStart:I,rfId:V,ariaLabel:Z,isFocusable:J,isReconnectable:ie,pathOptions:ee,interactionWidth:pe,disableKeyboardA11y:fe})=>{const we=g.useRef(null),[F,X]=g.useState(!1),[Q,W]=g.useState(!1),se=zt(),be=g.useMemo(()=>`url('#${ip(I,V)}')`,[I,V]),ue=g.useMemo(()=>`url('#${ip(U,V)}')`,[U,V]);if(_)return null;const ne=_t=>{var Mn;const{edges:Lt,addSelectedEdges:gs,unselectNodesAndEdges:Zs,multiSelectionActive:Ys}=se.getState(),Qn=Lt.find(Ca=>Ca.id===n);Qn&&(C&&(se.setState({nodesSelectionActive:!1}),Qn.selected&&Ys?(Zs({nodes:[],edges:[Qn]}),(Mn=we.current)==null||Mn.blur()):gs([n])),i&&i(_t,Qn))},ze=Sl(n,se.getState,l),xt=Sl(n,se.getState,$),hs=Sl(n,se.getState,T),Tr=Sl(n,se.getState,z),Tn=Sl(n,se.getState,A),Wn=(_t,Lt)=>{if(_t.button!==0)return;const{edges:gs,isValidConnection:Zs}=se.getState(),Ys=Lt?y:x,Qn=(Lt?O:P)||null,Mn=Lt?"target":"source",Ca=Zs||iV,de=Lt,Ae=gs.find(Be=>Be.id===n);W(!0),R==null||R(_t,Ae,Mn);const Pe=Be=>{W(!1),B==null||B(Be,Ae,Mn)};fE({event:_t,handleId:Qn,nodeId:Ys,onConnect:Be=>M==null?void 0:M(Ae,Be),isTarget:de,getState:se.getState,setState:se.setState,isValidConnection:Ca,edgeUpdaterType:Mn,onReconnectEnd:Pe})},Vs=_t=>Wn(_t,!0),qs=_t=>Wn(_t,!1),Gs=()=>X(!0),Kn=()=>X(!1),Mr=!C&&!i,Rr=_t=>{var Lt;if(!fe&&eE.includes(_t.key)&&C){const{unselectNodesAndEdges:gs,addSelectedEdges:Zs,edges:Ys}=se.getState();_t.key==="Escape"?((Lt=we.current)==null||Lt.blur(),gs({edges:[Ys.find(Mn=>Mn.id===n)]})):Zs([n])}};return L.createElement("g",{className:Jt(["react-flow__edge",`react-flow__edge-${r}`,s,{selected:c,animated:u,inactive:Mr,updating:F}]),onClick:ne,onDoubleClick:ze,onContextMenu:xt,onMouseEnter:hs,onMouseMove:Tr,onMouseLeave:Tn,onKeyDown:J?Rr:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Z===null?void 0:Z||`Edge from ${x} to ${y}`,"aria-describedby":J?`${wE}-${V}`:void 0,ref:we},!Q&&L.createElement(e,{id:n,source:x,target:y,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,data:o,style:b,sourceX:w,sourceY:j,targetX:N,targetY:S,sourcePosition:k,targetPosition:E,sourceHandleId:P,targetHandleId:O,markerStart:be,markerEnd:ue,pathOptions:ee,interactionWidth:pe}),ie&&L.createElement(L.Fragment,null,(ie==="source"||ie===!0)&&L.createElement(iw,{position:k,centerX:w,centerY:j,radius:D,onMouseDown:Vs,onMouseEnter:Gs,onMouseOut:Kn,type:"source"}),(ie==="target"||ie===!0)&&L.createElement(iw,{position:E,centerX:N,centerY:S,radius:D,onMouseDown:qs,onMouseEnter:Gs,onMouseOut:Kn,type:"target"})))};return t.displayName="EdgeWrapper",g.memo(t)};function lV(e){const t={default:Po(e.default||ff),straight:Po(e.bezier||F0),step:Po(e.step||U0),smoothstep:Po(e.step||Tm),simplebezier:Po(e.simplebezier||H0)},n={},s=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,o)=>(r[o]=Po(e[o]||ff),r),n);return{...t,...s}}function lw(e,t,n=null){const s=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case le.Top:return{x:s+o/2,y:r};case le.Right:return{x:s+o,y:r+i/2};case le.Bottom:return{x:s+o/2,y:r+i};case le.Left:return{x:s,y:r+i/2}}}function cw(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const cV=(e,t,n,s,r,o)=>{const i=lw(n,e,t),l=lw(o,s,r);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function uV({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:s,targetWidth:r,targetHeight:o,width:i,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+s,t.y+o)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=I0({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*m)>0}function uw(e){var s,r,o,i,l;const t=((s=e==null?void 0:e[ut])==null?void 0:s.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const dV=[{level:0,isMaxLevel:!0,edges:[]}];function fV(e,t,n=!1){let s=-1;const r=e.reduce((i,l)=>{var d,f;const c=Hn(l.zIndex);let u=c?l.zIndex:0;if(n){const m=t.get(l.target),h=t.get(l.source),p=l.selected||(m==null?void 0:m.selected)||(h==null?void 0:h.selected),v=Math.max(((d=h==null?void 0:h[ut])==null?void 0:d.z)||0,((f=m==null?void 0:m[ut])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(p?v:0)}return i[u]?i[u].push(l):i[u]=[l],s=u>s?u:s,i},{}),o=Object.entries(r).map(([i,l])=>{const c=+i;return{edges:l,level:c,isMaxLevel:c===s}});return o.length===0?dV:o}function mV(e,t,n){const s=ot(g.useCallback(r=>e?r.edges.filter(o=>{const i=t.get(o.source),l=t.get(o.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&uV({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return fV(s,t,n)}const hV=({color:e="none",strokeWidth:t=1})=>L.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),gV=({color:e="none",strokeWidth:t=1})=>L.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),dw={[df.Arrow]:hV,[df.ArrowClosed]:gV};function pV(e){const t=zt();return g.useMemo(()=>{var r,o;return Object.prototype.hasOwnProperty.call(dw,e)?dw[e]:((o=(r=t.getState()).onError)==null||o.call(r,"009",wr.error009(e)),null)},[e])}const xV=({id:e,type:t,color:n,width:s=12.5,height:r=12.5,markerUnits:o="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=pV(t);return c?L.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${s}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:l,refX:"0",refY:"0"},L.createElement(c,{color:n,strokeWidth:i})):null},vV=({defaultColor:e,rfId:t})=>n=>{const s=[];return n.edges.reduce((r,o)=>([o.markerStart,o.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=ip(i,t);s.includes(l)||(r.push({id:l,color:i.color||e,...i}),s.push(l))}}),r),[]).sort((r,o)=>r.id.localeCompare(o.id))},zE=({defaultColor:e,rfId:t})=>{const n=ot(g.useCallback(vV({defaultColor:e,rfId:t}),[e,t]),(s,r)=>!(s.length!==r.length||s.some((o,i)=>o.id!==r[i].id)));return L.createElement("defs",null,n.map(s=>L.createElement(xV,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};zE.displayName="MarkerDefinitions";var yV=g.memo(zE);const bV=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),LE=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:s,edgeTypes:r,noPanClassName:o,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:p,reconnectRadius:v,children:b,disableKeyboardA11y:x})=>{const{edgesFocusable:y,edgesUpdatable:w,elementsSelectable:j,width:N,height:S,connectionMode:k,nodeInternals:E,onError:C}=ot(bV,ln),_=mV(t,E,n);return N?L.createElement(L.Fragment,null,_.map(({level:P,edges:O,isMaxLevel:$})=>L.createElement("svg",{key:P,style:{zIndex:P},width:N,height:S,className:"react-flow__edges react-flow__container"},$&&L.createElement(yV,{defaultColor:e,rfId:s}),L.createElement("g",null,O.map(T=>{const[z,A,D]=uw(E.get(T.source)),[M,R,B]=uw(E.get(T.target));if(!D||!B)return null;let U=T.type||"default";r[U]||(C==null||C("011",wr.error011(U)),U="default");const I=r[U]||r.default,V=k===no.Strict?R.target:(R.target??[]).concat(R.source??[]),Z=cw(A.source,T.sourceHandle),J=cw(V,T.targetHandle),ie=(Z==null?void 0:Z.position)||le.Bottom,ee=(J==null?void 0:J.position)||le.Top,pe=!!(T.focusable||y&&typeof T.focusable>"u"),fe=T.reconnectable||T.updatable,we=typeof m<"u"&&(fe||w&&typeof fe>"u");if(!Z||!J)return C==null||C("008",wr.error008(Z,T)),null;const{sourceX:F,sourceY:X,targetX:Q,targetY:W}=cV(z,Z,ie,M,J,ee);return L.createElement(I,{key:T.id,id:T.id,className:Jt([T.className,o]),type:U,data:T.data,selected:!!T.selected,animated:!!T.animated,hidden:!!T.hidden,label:T.label,labelStyle:T.labelStyle,labelShowBg:T.labelShowBg,labelBgStyle:T.labelBgStyle,labelBgPadding:T.labelBgPadding,labelBgBorderRadius:T.labelBgBorderRadius,style:T.style,source:T.source,target:T.target,sourceHandleId:T.sourceHandle,targetHandleId:T.targetHandle,markerEnd:T.markerEnd,markerStart:T.markerStart,sourceX:F,sourceY:X,targetX:Q,targetY:W,sourcePosition:ie,targetPosition:ee,elementsSelectable:j,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:p,reconnectRadius:v,rfId:s,ariaLabel:T.ariaLabel,isFocusable:pe,isReconnectable:we,pathOptions:"pathOptions"in T?T.pathOptions:void 0,interactionWidth:T.interactionWidth,disableKeyboardA11y:x})})))),b):null};LE.displayName="EdgeRenderer";var wV=g.memo(LE);const jV=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function NV({children:e}){const t=ot(jV);return L.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function SV(e){const t=X0(),n=g.useRef(!1);g.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const kV={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top},$E=({nodeId:e,handleType:t,style:n,type:s=qr.Bezier,CustomComponent:r,connectionStatus:o})=>{var S,k,E;const{fromNode:i,handleId:l,toX:c,toY:u,connectionMode:d}=ot(g.useCallback(C=>({fromNode:C.nodeInternals.get(e),handleId:C.connectionHandleId,toX:(C.connectionPosition.x-C.transform[0])/C.transform[2],toY:(C.connectionPosition.y-C.transform[1])/C.transform[2],connectionMode:C.connectionMode}),[e]),ln),f=(S=i==null?void 0:i[ut])==null?void 0:S.handleBounds;let m=f==null?void 0:f[t];if(d===no.Loose&&(m=m||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!m)return null;const h=l?m.find(C=>C.id===l):m[0],p=h?h.x+h.width/2:(i.width??0)/2,v=h?h.y+h.height/2:i.height??0,b=(((k=i.positionAbsolute)==null?void 0:k.x)??0)+p,x=(((E=i.positionAbsolute)==null?void 0:E.y)??0)+v,y=h==null?void 0:h.position,w=y?kV[y]:null;if(!y||!w)return null;if(r)return L.createElement(r,{connectionLineType:s,connectionLineStyle:n,fromNode:i,fromHandle:h,fromX:b,fromY:x,toX:c,toY:u,fromPosition:y,toPosition:w,connectionStatus:o});let j="";const N={sourceX:b,sourceY:x,sourcePosition:y,targetX:c,targetY:u,targetPosition:w};return s===qr.Bezier?[j]=aE(N):s===qr.Step?[j]=op({...N,borderRadius:0}):s===qr.SmoothStep?[j]=op(N):s===qr.SimpleBezier?[j]=rE(N):j=`M${b},${x} ${c},${u}`,L.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};$E.displayName="ConnectionLine";const CV=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function EV({containerStyle:e,style:t,type:n,component:s}){const{nodeId:r,handleType:o,nodesConnectable:i,width:l,height:c,connectionStatus:u}=ot(CV,ln);return!(r&&o&&l&&i)?null:L.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},L.createElement("g",{className:Jt(["react-flow__connection",u])},L.createElement($E,{nodeId:r,handleType:o,style:t,type:n,CustomComponent:s,connectionStatus:u})))}function fw(e,t){return g.useRef(null),zt(),g.useMemo(()=>t(e),[e])}const PE=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:s,onMoveEnd:r,onInit:o,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:v,onSelectionEnd:b,connectionLineType:x,connectionLineStyle:y,connectionLineComponent:w,connectionLineContainerStyle:j,selectionKeyCode:N,selectionOnDrag:S,selectionMode:k,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:_,deleteKeyCode:P,onlyRenderVisibleElements:O,elementsSelectable:$,selectNodesOnDrag:T,defaultViewport:z,translateExtent:A,minZoom:D,maxZoom:M,preventScrolling:R,defaultMarkerColor:B,zoomOnScroll:U,zoomOnPinch:I,panOnScroll:V,panOnScrollSpeed:Z,panOnScrollMode:J,zoomOnDoubleClick:ie,panOnDrag:ee,onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:we,onPaneMouseLeave:F,onPaneScroll:X,onPaneContextMenu:Q,onEdgeContextMenu:W,onEdgeMouseEnter:se,onEdgeMouseMove:be,onEdgeMouseLeave:ue,onReconnect:ne,onReconnectStart:ze,onReconnectEnd:xt,reconnectRadius:hs,noDragClassName:Tr,noWheelClassName:Tn,noPanClassName:Wn,elevateEdgesOnSelect:Vs,disableKeyboardA11y:qs,nodeOrigin:Gs,nodeExtent:Kn,rfId:Mr})=>{const Rr=fw(e,tV),_t=fw(t,lV);return SV(o),L.createElement(JF,{onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:we,onPaneMouseLeave:F,onPaneContextMenu:Q,onPaneScroll:X,deleteKeyCode:P,selectionKeyCode:N,selectionOnDrag:S,selectionMode:k,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:_,elementsSelectable:$,onMove:n,onMoveStart:s,onMoveEnd:r,zoomOnScroll:U,zoomOnPinch:I,zoomOnDoubleClick:ie,panOnScroll:V,panOnScrollSpeed:Z,panOnScrollMode:J,panOnDrag:ee,defaultViewport:z,translateExtent:A,minZoom:D,maxZoom:M,onSelectionContextMenu:p,preventScrolling:R,noDragClassName:Tr,noWheelClassName:Tn,noPanClassName:Wn,disableKeyboardA11y:qs},L.createElement(NV,null,L.createElement(wV,{edgeTypes:_t,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:O,onEdgeContextMenu:W,onEdgeMouseEnter:se,onEdgeMouseMove:be,onEdgeMouseLeave:ue,onReconnect:ne,onReconnectStart:ze,onReconnectEnd:xt,reconnectRadius:hs,defaultMarkerColor:B,noPanClassName:Wn,elevateEdgesOnSelect:!!Vs,disableKeyboardA11y:qs,rfId:Mr},L.createElement(EV,{style:y,type:x,component:w,containerStyle:j})),L.createElement("div",{className:"react-flow__edgelabel-renderer"}),L.createElement(rV,{nodeTypes:Rr,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,selectNodesOnDrag:T,onlyRenderVisibleElements:O,noPanClassName:Wn,noDragClassName:Tr,disableKeyboardA11y:qs,nodeOrigin:Gs,nodeExtent:Kn,rfId:Mr})))};PE.displayName="GraphView";var _V=g.memo(PE);const dp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Lr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:dp,nodeExtent:dp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:no.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:sF,isValidConnection:void 0},AV=()=>p9((e,t)=>({...Lr,setNodes:n=>{const{nodeInternals:s,nodeOrigin:r,elevateNodesOnSelect:o}=t();e({nodeInternals:Ch(n,s,r,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:s={}}=t();e({edges:n.map(r=>({...s,...r}))})},setDefaultNodesAndEdges:(n,s)=>{const r=typeof n<"u",o=typeof s<"u",i=r?Ch(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:o?s:[],hasDefaultNodes:r,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:s,nodeInternals:r,fitViewOnInit:o,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((v,b)=>{const x=r.get(b.id);if(x!=null&&x.hidden)r.set(x.id,{...x,[ut]:{...x[ut],handleBounds:void 0}});else if(x){const y=O0(b.nodeElement);!!(y.width&&y.height&&(x.width!==y.width||x.height!==y.height||b.forceUpdate))&&(r.set(x.id,{...x,[ut]:{...x[ut],handleBounds:{source:aw(".source",b.nodeElement,m,u),target:aw(".target",b.nodeElement,m,u)}},...y}),v.push({id:x.id,type:"dimensions",dimensions:y}))}return v},[]);NE(r,u);const p=i||o&&!i&&SE(t,{initial:!0,...l});e({nodeInternals:new Map(r),fitViewOnInitDone:p}),(h==null?void 0:h.length)>0&&(s==null||s(h))},updateNodePositions:(n,s=!0,r=!1)=>{const{triggerNodeChanges:o}=t(),i=n.map(l=>{const c={id:l.id,type:"position",dragging:r};return s&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});o(i)},triggerNodeChanges:n=>{const{onNodesChange:s,nodeInternals:r,hasDefaultNodes:o,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(o){const u=CE(n,l()),d=Ch(u,r,i,c);e({nodeInternals:d})}s==null||s(n)}},addSelectedNodes:n=>{const{multiSelectionActive:s,edges:r,getNodes:o}=t();let i,l=null;s?i=n.map(c=>Ir(c,!0)):(i=Go(o(),n),l=Go(r,[])),Vu({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:s,edges:r,getNodes:o}=t();let i,l=null;s?i=n.map(c=>Ir(c,!0)):(i=Go(r,n),l=Go(o(),[])),Vu({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:s}={})=>{const{edges:r,getNodes:o}=t(),i=n||o(),l=s||r,c=i.map(d=>(d.selected=!1,Ir(d.id,!1))),u=l.map(d=>Ir(d.id,!1));Vu({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:s,maxZoom:r}=t();s==null||s.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:s,minZoom:r}=t();s==null||s.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var s;(s=t().d3Zoom)==null||s.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:s}=t(),o=s().filter(l=>l.selected).map(l=>Ir(l.id,!1)),i=n.filter(l=>l.selected).map(l=>Ir(l.id,!1));Vu({changedNodes:o,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:s}=t();s.forEach(r=>{r.positionAbsolute=B0(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(s)})},panBy:n=>{const{transform:s,width:r,height:o,d3Zoom:i,d3Selection:l,translateExtent:c}=t();if(!i||!l||!n.x&&!n.y)return!1;const u=ra.translate(s[0]+n.x,s[1]+n.y).scale(s[2]),d=[[0,0],[r,o]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(l,f),s[0]!==f.x||s[1]!==f.y||s[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Lr.connectionNodeId,connectionHandleId:Lr.connectionHandleId,connectionHandleType:Lr.connectionHandleType,connectionStatus:Lr.connectionStatus,connectionStartHandle:Lr.connectionStartHandle,connectionEndHandle:Lr.connectionEndHandle}),reset:()=>e({...Lr})}),Object.is),OE=({children:e})=>{const t=g.useRef(null);return t.current||(t.current=AV()),L.createElement(XU,{value:t.current},e)};OE.displayName="ReactFlowProvider";const BE=({children:e})=>g.useContext(Am)?L.createElement(L.Fragment,null,e):L.createElement(OE,null,e);BE.displayName="ReactFlowWrapper";const TV={input:pE,default:cp,output:vE,group:Y0},MV={default:ff,straight:F0,step:U0,smoothstep:Tm,simplebezier:H0},RV=[0,0],DV=[15,15],zV={x:0,y:0,zoom:1},LV={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},K0=g.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,className:r,nodeTypes:o=TV,edgeTypes:i=MV,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:h,onConnectStart:p,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:x,onNodeMouseEnter:y,onNodeMouseMove:w,onNodeMouseLeave:j,onNodeContextMenu:N,onNodeDoubleClick:S,onNodeDragStart:k,onNodeDrag:E,onNodeDragStop:C,onNodesDelete:_,onEdgesDelete:P,onSelectionChange:O,onSelectionDragStart:$,onSelectionDrag:T,onSelectionDragStop:z,onSelectionContextMenu:A,onSelectionStart:D,onSelectionEnd:M,connectionMode:R=no.Strict,connectionLineType:B=qr.Bezier,connectionLineStyle:U,connectionLineComponent:I,connectionLineContainerStyle:V,deleteKeyCode:Z="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:ie=!1,selectionMode:ee=Nc.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:fe=uf()?"Meta":"Control",zoomActivationKeyCode:we=uf()?"Meta":"Control",snapToGrid:F=!1,snapGrid:X=DV,onlyRenderVisibleElements:Q=!1,selectNodesOnDrag:W=!0,nodesDraggable:se,nodesConnectable:be,nodesFocusable:ue,nodeOrigin:ne=RV,edgesFocusable:ze,edgesUpdatable:xt,elementsSelectable:hs,defaultViewport:Tr=zV,minZoom:Tn=.5,maxZoom:Wn=2,translateExtent:Vs=dp,preventScrolling:qs=!0,nodeExtent:Gs,defaultMarkerColor:Kn="#b1b1b7",zoomOnScroll:Mr=!0,zoomOnPinch:Rr=!0,panOnScroll:_t=!1,panOnScrollSpeed:Lt=.5,panOnScrollMode:gs=Ia.Free,zoomOnDoubleClick:Zs=!0,panOnDrag:Ys=!0,onPaneClick:Qn,onPaneMouseEnter:Mn,onPaneMouseMove:Ca,onPaneMouseLeave:de,onPaneScroll:Ae,onPaneContextMenu:Pe,children:Te,onEdgeContextMenu:Be,onEdgeDoubleClick:Ht,onEdgeMouseEnter:$t,onEdgeMouseMove:ps,onEdgeMouseLeave:hn,onEdgeUpdate:Xs,onEdgeUpdateStart:xs,onEdgeUpdateEnd:Rn,onReconnect:Ao,onReconnectStart:Nu,onReconnectEnd:sR,reconnectRadius:rR=10,edgeUpdaterRadius:aR=10,onNodesChange:oR,onEdgesChange:iR,noDragClassName:lR="nodrag",noWheelClassName:cR="nowheel",noPanClassName:ly="nopan",fitView:uR=!1,fitViewOptions:dR,connectOnClick:fR=!0,attributionPosition:mR,proOptions:hR,defaultEdgeOptions:gR,elevateNodesOnSelect:pR=!0,elevateEdgesOnSelect:xR=!1,disableKeyboardA11y:cy=!1,autoPanOnConnect:vR=!0,autoPanOnNodeDrag:yR=!0,connectionRadius:bR=20,isValidConnection:wR,onError:jR,style:NR,id:uy,nodeDragThreshold:SR,...kR},CR)=>{const Km=uy||"1";return L.createElement("div",{...kR,style:{...NR,...LV},ref:CR,className:Jt(["react-flow",r]),"data-testid":"rf__wrapper",id:uy},L.createElement(BE,null,L.createElement(_V,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:y,onNodeMouseMove:w,onNodeMouseLeave:j,onNodeContextMenu:N,onNodeDoubleClick:S,nodeTypes:o,edgeTypes:i,connectionLineType:B,connectionLineStyle:U,connectionLineComponent:I,connectionLineContainerStyle:V,selectionKeyCode:J,selectionOnDrag:ie,selectionMode:ee,deleteKeyCode:Z,multiSelectionKeyCode:fe,panActivationKeyCode:pe,zoomActivationKeyCode:we,onlyRenderVisibleElements:Q,selectNodesOnDrag:W,defaultViewport:Tr,translateExtent:Vs,minZoom:Tn,maxZoom:Wn,preventScrolling:qs,zoomOnScroll:Mr,zoomOnPinch:Rr,zoomOnDoubleClick:Zs,panOnScroll:_t,panOnScrollSpeed:Lt,panOnScrollMode:gs,panOnDrag:Ys,onPaneClick:Qn,onPaneMouseEnter:Mn,onPaneMouseMove:Ca,onPaneMouseLeave:de,onPaneScroll:Ae,onPaneContextMenu:Pe,onSelectionContextMenu:A,onSelectionStart:D,onSelectionEnd:M,onEdgeContextMenu:Be,onEdgeDoubleClick:Ht,onEdgeMouseEnter:$t,onEdgeMouseMove:ps,onEdgeMouseLeave:hn,onReconnect:Ao??Xs,onReconnectStart:Nu??xs,onReconnectEnd:sR??Rn,reconnectRadius:rR??aR,defaultMarkerColor:Kn,noDragClassName:lR,noWheelClassName:cR,noPanClassName:ly,elevateEdgesOnSelect:xR,rfId:Km,disableKeyboardA11y:cy,nodeOrigin:ne,nodeExtent:Gs}),L.createElement(kF,{nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:h,onConnectStart:p,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:x,nodesDraggable:se,nodesConnectable:be,nodesFocusable:ue,edgesFocusable:ze,edgesUpdatable:xt,elementsSelectable:hs,elevateNodesOnSelect:pR,minZoom:Tn,maxZoom:Wn,nodeExtent:Gs,onNodesChange:oR,onEdgesChange:iR,snapToGrid:F,snapGrid:X,connectionMode:R,translateExtent:Vs,connectOnClick:fR,defaultEdgeOptions:gR,fitView:uR,fitViewOptions:dR,onNodesDelete:_,onEdgesDelete:P,onNodeDragStart:k,onNodeDrag:E,onNodeDragStop:C,onSelectionDrag:T,onSelectionDragStart:$,onSelectionDragStop:z,noPanClassName:ly,nodeOrigin:ne,rfId:Km,autoPanOnConnect:vR,autoPanOnNodeDrag:yR,onError:jR,connectionRadius:bR,isValidConnection:wR,nodeDragThreshold:SR}),L.createElement(NF,{onSelectionChange:O}),Te,L.createElement(KU,{proOptions:hR,position:mR}),L.createElement(TF,{rfId:Km,disableKeyboardA11y:cy})))});K0.displayName="ReactFlow";function IE(e){return t=>{const[n,s]=g.useState(t),r=g.useCallback(o=>s(i=>e(o,i)),[]);return[n,s,r]}}const HE=IE(CE),UE=IE(VF);function $V(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}function PV(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},L.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function OV(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},L.createElement("path",{d:"M0 0h32v4.2H0z"}))}function BV(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},L.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function IV(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},L.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function HV(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},L.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Hl=({children:e,className:t,...n})=>L.createElement("button",{type:"button",className:Jt(["react-flow__controls-button",t]),...n},e);Hl.displayName="ControlButton";const UV=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),FE=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:s=!0,fitViewOptions:r,onZoomIn:o,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const m=zt(),[h,p]=g.useState(!1),{isInteractive:v,minZoomReached:b,maxZoomReached:x}=ot(UV,$V),{zoomIn:y,zoomOut:w,fitView:j}=X0();if(g.useEffect(()=>{p(!0)},[]),!h)return null;const N=()=>{y(),o==null||o()},S=()=>{w(),i==null||i()},k=()=>{j(r),l==null||l()},E=()=>{m.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c==null||c(!v)};return L.createElement(KC,{className:Jt(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&L.createElement(L.Fragment,null,L.createElement(Hl,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},L.createElement(PV,null)),L.createElement(Hl,{onClick:S,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},L.createElement(OV,null))),n&&L.createElement(Hl,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},L.createElement(BV,null)),s&&L.createElement(Hl,{className:"react-flow__controls-interactive",onClick:E,title:"toggle interactivity","aria-label":"toggle interactivity"},v?L.createElement(HV,null):L.createElement(IV,null)),d)};FE.displayName="Controls";var VE=g.memo(FE);function FV(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var rs;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(rs||(rs={}));function VV({color:e,dimensions:t,lineWidth:n}){return L.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function qV({color:e,radius:t}){return L.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const GV={[rs.Dots]:"#91919a",[rs.Lines]:"#eee",[rs.Cross]:"#e2e2e2"},ZV={[rs.Dots]:1,[rs.Lines]:1,[rs.Cross]:6},YV=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function qE({id:e,variant:t=rs.Dots,gap:n=20,size:s,lineWidth:r=1,offset:o=2,color:i,style:l,className:c}){const u=g.useRef(null),{transform:d,patternId:f}=ot(YV,FV),m=i||GV[t],h=s||ZV[t],p=t===rs.Dots,v=t===rs.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*d[2]||1,b[1]*d[2]||1],y=h*d[2],w=v?[y,y]:x,j=p?[y/o,y/o]:[w[0]/o,w[1]/o];return L.createElement("svg",{className:Jt(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},L.createElement("pattern",{id:f+e,x:d[0]%x[0],y:d[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},p?L.createElement(qV,{color:m,radius:y/o}):L.createElement(VV,{dimensions:w,color:m,lineWidth:r})),L.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}qE.displayName="Background";var GE=g.memo(qE);function XV(e){if(!e||typeof e!="object")throw new Error("Invalid perk tree data");const t=e;if(!t.treeId||!t.treeName||!t.perks||!Array.isArray(t.perks))throw new Error("Invalid perk tree structure");return t}function ZE(e){try{return{success:!0,data:XV(e)}}catch(t){return{success:!1,error:t}}}const WV={nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120,fallbackSpacing:100};async function YE(e){try{const t=ls(`data/perk-positions/${e}-positions.json`);console.log("Attempting to load positions from:",t);const n=await fetch(t);if(console.log("Response status:",n.status,n.statusText),!n.ok)return console.warn(`No saved positions found for tree ${e} at ${t}`),null;const s=await n.json();return console.log("Successfully loaded positions for tree:",e),s}catch(t){return console.warn(`Failed to load saved positions for tree ${e}:`,t),null}}function KV(e,t){const n=new Map;e.forEach(i=>{const l=t==null?void 0:t.positions.find(c=>c.perkId===i.edid);n.set(i.edid,{perk:i,depth:-1,children:i.connections.children,parents:i.connections.parents,savedPosition:l})});const r=e.filter(i=>i.connections.parents.length===0).map(i=>({id:i.edid,depth:0})),o=new Set;for(;r.length>0;){const{id:i,depth:l}=r.shift();if(o.has(i))continue;o.add(i);const c=n.get(i);c&&((c.depth===-1||l<c.depth)&&(c.depth=l),c.children.forEach(u=>{n.has(u)&&!o.has(u)&&r.push({id:u,depth:l+1})}))}return n}function QV(e,t){const n=new Map,s=new Map;e.forEach(o=>{const i=o.depth;s.has(i)||s.set(i,[]),s.get(i).push(o)});const r=Math.max(...s.keys());return s.forEach((o,i)=>{const l=t.padding+(r-i)*t.verticalSpacing,c=(o.length-1)*t.horizontalSpacing,u=t.padding+(t.gridScaleX-c)/2;o.forEach((d,f)=>{const m=u+f*t.horizontalSpacing;n.set(d.perk.edid,{x:m,y:l})})}),n}function JV(e,t,n){t.positions.forEach(s=>{const r=e.get(s.perkId);r&&(r.savedPosition=s,r.calculatedPosition={x:s.x,y:s.y})})}function eq(e,t,n={}){const s={...WV,...n},r=KV(e.perks,t);t&&JV(r,t);const o=QV(r,s),i=new Map;return r.forEach((l,c)=>{if(l.calculatedPosition)i.set(c,l.calculatedPosition);else{const u=o.get(c);u?i.set(c,u):i.set(c,{x:s.padding,y:s.padding})}}),i}function tq(e,t){const n=Array.from(t.entries()).map(([s,r])=>({perkId:s,x:r.x,y:r.y,gridX:r.gridX,gridY:r.gridY,horizontal:r.horizontal,vertical:r.vertical}));return{treeId:e.treeId,treeName:e.treeName,positions:n,version:"1.0.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}function mw(e,t){const n=new Map;return t.positions.forEach(s=>{n.set(s.perkId,{x:s.x,y:s.y,gridX:s.gridX,gridY:s.gridY,horizontal:s.horizontal,vertical:s.vertical})}),n}function nq(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`${e.treeId}-positions.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}const sq=({data:e,selected:t,onTogglePerk:n,onRankChange:s})=>{var u,d,f,m,h;const r=e.totalRanks,o=r>1?(e.currentRank||0)>0:e.selected||t,i=p=>{if(p.preventDefault(),p.stopPropagation(),(e.totalRanks||1)>1){const b=e.currentRank||0,x=e.totalRanks||1,y=b>=x?0:b+1;s&&s(e.edid,y)}else n&&n(e.edid)},l=()=>{const p={padding:"8px 12px",borderRadius:"6px",border:"2px solid",fontSize:"12px",fontWeight:"500",minWidth:"140px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"};return e.hasNoPosition?{...p,borderColor:"#ef4444",borderStyle:"dashed",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 1px rgba(239, 68, 68, 0.3)"}:o?{...p,borderColor:"#d4af37",backgroundColor:"rgba(212, 175, 55, 0.15)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 2px rgba(212, 175, 55, 0.4), 0 2px 4px rgba(212, 175, 55, 0.2)",transform:"scale(1.02)"}:e.isRoot?{...p,borderColor:"hsl(var(--border))",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"}:{...p,borderColor:"hsl(var(--border))"}},c=((d=(u=e.ranks[0])==null?void 0:u.description)==null?void 0:d.base)||"";return a.jsxs(rC,{children:[a.jsx(aC,{asChild:!0,children:a.jsxs("div",{style:l(),onClick:i,onMouseDown:p=>p.stopPropagation(),children:[!e.isRoot&&a.jsx(Oi,{type:"target",position:le.Bottom}),a.jsx("div",{className:"font-medium",children:e.name}),r>1&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.currentRank||0,"/",r," ranks"]}),e.hasChildren&&a.jsx(Oi,{type:"source",position:le.Top})]})}),a.jsx(M0,{className:"w-80 bg-background border border-border shadow-lg",style:{zIndex:Dt.TOOLTIP},children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:e.name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:c}),typeof((h=(m=(f=e.ranks[0])==null?void 0:f.prerequisites)==null?void 0:m.skillLevel)==null?void 0:h.level)=="number"&&e.ranks[0].prerequisites.skillLevel.level>0&&a.jsxs("div",{className:"text-xs text-blue-700 font-medium pt-1",children:["Min. Level: ",e.ranks[0].prerequisites.skillLevel.level]}),r>1&&a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[a.jsx("strong",{children:"Ranks:"})," ",e.currentRank||0,"/",r,a.jsx("br",{}),a.jsx("em",{children:"Click to cycle through ranks"})]})]})})]})},XE=g.memo(sq);function rq({categories:e,selectedCategory:t,onCategorySelect:n,className:s}){return a.jsx("div",{className:H("mb-6",s),children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(G,{variant:t===null?"default":"outline",size:"sm",onClick:()=>n(null),children:"All Categories"}),e.map(r=>a.jsx(G,{variant:t===r?"default":"outline",size:"sm",onClick:()=>n(r),children:r},r))]})})}function Th({skills:e,onSelect:t,placeholder:n="Search skills...",className:s="",disabled:r=!1}){const[o,i]=g.useState(""),l=g.useMemo(()=>{if(!o.trim())return e;const f=o.toLowerCase();return e.filter(m=>m.name.toLowerCase().includes(f)||m.description.toLowerCase().includes(f)||m.category.toLowerCase().includes(f)||m.keyAbilities.some(h=>h.toLowerCase().includes(f))||m.metaTags.some(h=>h.toLowerCase().includes(f)))},[e,o]),c=g.useMemo(()=>l.map(f=>{var m;return{id:f.edid,label:f.name,description:f.description,category:f.category,badge:f.category&&a.jsx(K,{variant:"outline",className:"text-xs",children:f.category}),metadata:{originalSkill:f,keyAbilitiesCount:((m=f.keyAbilities)==null?void 0:m.length)||0,scaling:f.scaling}}}),[l]),u=f=>{const m=e.find(h=>h.edid===f.id);m&&t(m)},d=(f,m)=>{var h,p;return a.jsx("div",{className:"flex items-start gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:f.label}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.badge&&a.jsx("div",{className:"flex-shrink-0",children:f.badge}),((h=f.metadata)==null?void 0:h.keyAbilitiesCount)&&f.metadata.keyAbilitiesCount>0&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.metadata.keyAbilitiesCount," ability",f.metadata.keyAbilitiesCount!==1?"s":""]})]}),f.description&&a.jsx(De,{text:f.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"}),((p=f.metadata)==null?void 0:p.scaling)&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Scaling:"})," ",f.metadata.scaling]})]})})};return a.jsx(Jc,{options:c,onSelect:u,placeholder:n,className:s,disabled:r,renderOption:d,emptyMessage:"No skills found",searchQuery:o,onSearchQueryChange:i})}function aq(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const WE=L.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),au=()=>{const e=L.useContext(WE);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};aq(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function oq(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function iq(){return Q0(/^Mac/)}function lq(){return Q0(/^iPhone/)}function hw(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function cq(){return Q0(/^iPad/)||iq()&&navigator.maxTouchPoints>1}function KE(){return lq()||cq()}function Q0(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const uq=24,dq=typeof window<"u"?g.useLayoutEffect:g.useEffect;function gw(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const Mh=typeof document<"u"&&window.visualViewport;function pw(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function QE(e){for(pw(e)&&(e=e.parentElement);e&&!pw(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const fq=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Gu=0,Rh;function mq(e={}){let{isDisabled:t}=e;dq(()=>{if(!t)return Gu++,Gu===1&&KE()&&(Rh=hq()),()=>{Gu--,Gu===0&&(Rh==null||Rh())}},[t])}function hq(){let e,t=0,n=f=>{e=QE(f.target),!(e===document.documentElement&&e===document.body)&&(t=f.changedTouches[0].pageY)},s=f=>{if(!e||e===document.documentElement||e===document.body){f.preventDefault();return}let m=f.changedTouches[0].pageY,h=e.scrollTop,p=e.scrollHeight-e.clientHeight;p!==0&&((h<=0&&m>t||h>=p&&m<t)&&f.preventDefault(),t=m)},r=f=>{let m=f.target;fp(m)&&m!==document.activeElement&&(f.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},o=f=>{let m=f.target;fp(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",Mh&&(Mh.height<window.innerHeight?requestAnimationFrame(()=>{xw(m)}):Mh.addEventListener("resize",()=>xw(m),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=gw(gq(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=gw(El(document,"touchstart",n,{passive:!1,capture:!0}),El(document,"touchmove",s,{passive:!1,capture:!0}),El(document,"touchend",r,{passive:!1,capture:!0}),El(document,"focus",o,!0),El(window,"scroll",i));return()=>{u(),d(),window.scrollTo(l,c)}}function gq(e,t,n){let s=e.style[t];return e.style[t]=n,()=>{e.style[t]=s}}function El(e,t,n,s){return e.addEventListener(t,n,s),()=>{e.removeEventListener(t,n,s)}}function xw(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=QE(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let s=n.getBoundingClientRect().top,r=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom;const i=n.getBoundingClientRect().bottom+uq;o>i&&(n.scrollTop+=r-s)}e=n.parentElement}}function fp(e){return e instanceof HTMLInputElement&&!fq.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function pq(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function xq(...e){return t=>e.forEach(n=>pq(n,t))}function JE(...e){return g.useCallback(xq(...e),e)}const e_=new WeakMap;function St(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let s={};Object.entries(t).forEach(([r,o])=>{if(r.startsWith("--")){e.style.setProperty(r,o);return}s[r]=e.style[r],e.style[r]=o}),!n&&e_.set(e,s)}function vq(e,t){if(!e||!(e instanceof HTMLElement))return;let n=e_.get(e);n&&(e.style[t]=n[t])}const yt=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Zu(e,t){if(!e)return null;const n=window.getComputedStyle(e),s=n.transform||n.webkitTransform||n.mozTransform;let r=s.match(/^matrix3d\((.+)\)$/);return r?parseFloat(r[1].split(", ")[yt(t)?13:12]):(r=s.match(/^matrix\((.+)\)$/),r?parseFloat(r[1].split(", ")[yt(t)?5:4]):null)}function yq(e){return 8*(Math.log(e+1)-2)}function Dh(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function bq(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const st={DURATION:.5,EASE:[.32,.72,0,1]},t_=.4,wq=.25,jq=100,n_=8,Aa=16,mp=26,zh="vaul-dragging";function s_(e){const t=L.useRef(e);return L.useEffect(()=>{t.current=e}),L.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function Nq({defaultProp:e,onChange:t}){const n=L.useState(e),[s]=n,r=L.useRef(s),o=s_(t);return L.useEffect(()=>{r.current!==s&&(o(s),r.current=s)},[s,r,o]),n}function r_({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,r]=Nq({defaultProp:t,onChange:n}),o=e!==void 0,i=o?e:s,l=s_(n),c=L.useCallback(u=>{if(o){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else r(u)},[o,e,r,l]);return[i,c]}function Sq({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:s,overlayRef:r,fadeFromIndex:o,onSnapPointChange:i,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[d,f]=r_({prop:e,defaultProp:n==null?void 0:n[0],onChange:t}),[m,h]=L.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);L.useEffect(()=>{function k(){h({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const p=L.useMemo(()=>d===(n==null?void 0:n[n.length-1])||null,[n,d]),v=L.useMemo(()=>{var k;return(k=n==null?void 0:n.findIndex(E=>E===d))!=null?k:null},[n,d]),b=n&&n.length>0&&(o||o===0)&&!Number.isNaN(o)&&n[o]===d||!n,x=L.useMemo(()=>{const k=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var E;return(E=n==null?void 0:n.map(C=>{const _=typeof C=="string";let P=0;if(_&&(P=parseInt(C,10)),yt(l)){const $=_?P:m?C*k.height:0;return m?l==="bottom"?k.height-$:-k.height+$:$}const O=_?P:m?C*k.width:0;return m?l==="right"?k.width-O:-k.width+O:O}))!=null?E:[]},[n,m,c]),y=L.useMemo(()=>v!==null?x==null?void 0:x[v]:null,[x,v]),w=L.useCallback(k=>{var E;const C=(E=x==null?void 0:x.findIndex(_=>_===k))!=null?E:null;i(C),St(s.current,{transition:`transform ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,transform:yt(l)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`}),x&&C!==x.length-1&&o!==void 0&&C!==o&&C<o?St(r.current,{transition:`opacity ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,opacity:"0"}):St(r.current,{transition:`opacity ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,opacity:"1"}),f(n==null?void 0:n[Math.max(C,0)])},[s.current,n,x,o,r,f]);L.useEffect(()=>{if(d||e){var k;const E=(k=n==null?void 0:n.findIndex(C=>C===e||C===d))!=null?k:-1;x&&E!==-1&&typeof x[E]=="number"&&w(x[E])}},[d,e,n,x,w]);function j({draggedDistance:k,closeDrawer:E,velocity:C,dismissible:_}){if(o===void 0)return;const P=l==="bottom"||l==="right"?(y??0)-k:(y??0)+k,O=v===o-1,$=v===0,T=k>0;if(O&&St(r.current,{transition:`opacity ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`}),!u&&C>2&&!T){_?E():w(x[0]);return}if(!u&&C>2&&T&&x&&n){w(x[n.length-1]);return}const z=x==null?void 0:x.reduce((D,M)=>typeof D!="number"||typeof M!="number"?D:Math.abs(M-P)<Math.abs(D-P)?M:D),A=yt(l)?window.innerHeight:window.innerWidth;if(C>t_&&Math.abs(k)<A*.4){const D=T?1:-1;if(D>0&&p&&n){w(x[n.length-1]);return}if($&&D<0&&_&&E(),v===null)return;w(x[v+D]);return}w(z)}function N({draggedDistance:k}){if(y===null)return;const E=l==="bottom"||l==="right"?y-k:y+k;(l==="bottom"||l==="right")&&E<x[x.length-1]||(l==="top"||l==="left")&&E>x[x.length-1]||St(s.current,{transform:yt(l)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})}function S(k,E){if(!n||typeof v!="number"||!x||o===void 0)return null;const C=v===o-1;if(v>=o&&E)return 0;if(C&&!E)return 1;if(!b&&!C)return null;const P=C?v+1:v-1,O=C?x[P]-x[P-1]:x[P+1]-x[P],$=k/Math.abs(O);return C?1-$:$}return{isLastSnapPoint:p,activeSnapPoint:d,shouldFade:b,getPercentageDragged:S,setActiveSnapPoint:f,activeSnapPointIndex:v,onRelease:j,onDrag:N,snapPointsOffset:x}}const kq=()=>()=>{};function Cq(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:s,noBodyStyles:r}=au(),o=L.useRef(null),i=g.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-mp)/window.innerWidth}L.useEffect(()=>{if(t&&n){o.current&&clearTimeout(o.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;bq(s&&!r?Dh(document.body,{background:"black"}):kq,Dh(c,{transformOrigin:yt(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${st.DURATION}s`,transitionTimingFunction:`cubic-bezier(${st.EASE.join(",")})`}));const u=Dh(c,{borderRadius:`${n_}px`,overflow:"hidden",...yt(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),o.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},st.DURATION*1e3)}}},[t,n,i])}let _l=null;function Eq({isOpen:e,modal:t,nested:n,hasBeenOpened:s,preventScrollRestoration:r,noBodyStyles:o}){const[i,l]=L.useState(()=>typeof window<"u"?window.location.href:""),c=L.useRef(0),u=L.useCallback(()=>{if(hw()&&_l===null&&e&&!o){_l={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const h=m-window.innerHeight;h&&c.current>=m&&(document.body.style.top=`${-(c.current+h)}px`)}),300)}},[e]),d=L.useCallback(()=>{if(hw()&&_l!==null&&!o){const f=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,_l),window.requestAnimationFrame(()=>{if(r&&i!==window.location.href){l(window.location.href);return}window.scrollTo(m,f)}),_l=null}},[i]);return L.useEffect(()=>{function f(){c.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),L.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||d()}},[t,d]),L.useEffect(()=>{n||!s||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{d()},500)):d())},[e,s,i,t,n,u,d]),{restorePositionSetting:d}}function _q({open:e,onOpenChange:t,children:n,onDrag:s,onRelease:r,snapPoints:o,shouldScaleBackground:i=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=wq,scrollLockTimeout:u=jq,dismissible:d=!0,handleOnly:f=!1,fadeFromIndex:m=o&&o.length-1,activeSnapPoint:h,setActiveSnapPoint:p,fixed:v,modal:b=!0,onClose:x,nested:y,noBodyStyles:w=!1,direction:j="bottom",defaultOpen:N=!1,disablePreventScroll:S=!0,snapToSequentialPoint:k=!1,preventScrollRestoration:E=!1,repositionInputs:C=!0,onAnimationEnd:_,container:P,autoFocus:O=!1}){var $,T;const[z=!1,A]=r_({defaultProp:N,prop:e,onChange:de=>{t==null||t(de),!de&&!y&&Gs(),setTimeout(()=>{_==null||_(de)},st.DURATION*1e3),de&&!b&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),de||(document.body.style.pointerEvents="auto")}}),[D,M]=L.useState(!1),[R,B]=L.useState(!1),[U,I]=L.useState(!1),V=L.useRef(null),Z=L.useRef(null),J=L.useRef(null),ie=L.useRef(null),ee=L.useRef(null),pe=L.useRef(!1),fe=L.useRef(null),we=L.useRef(0),F=L.useRef(!1),X=L.useRef(!N),Q=L.useRef(0),W=L.useRef(null),se=L.useRef((($=W.current)==null?void 0:$.getBoundingClientRect().height)||0),be=L.useRef(((T=W.current)==null?void 0:T.getBoundingClientRect().width)||0),ue=L.useRef(0),ne=L.useCallback(de=>{o&&de===Tn.length-1&&(Z.current=new Date)},[]),{activeSnapPoint:ze,activeSnapPointIndex:xt,setActiveSnapPoint:hs,onRelease:Tr,snapPointsOffset:Tn,onDrag:Wn,shouldFade:Vs,getPercentageDragged:qs}=Sq({snapPoints:o,activeSnapPointProp:h,setActiveSnapPointProp:p,drawerRef:W,fadeFromIndex:m,overlayRef:V,onSnapPointChange:ne,direction:j,container:P,snapToSequentialPoint:k});mq({isDisabled:!z||R||!b||U||!D||!C||!S});const{restorePositionSetting:Gs}=Eq({isOpen:z,modal:b,nested:y??!1,hasBeenOpened:D,preventScrollRestoration:E,noBodyStyles:w});function Kn(){return(window.innerWidth-mp)/window.innerWidth}function Mr(de){var Ae,Pe;!d&&!o||W.current&&!W.current.contains(de.target)||(se.current=((Ae=W.current)==null?void 0:Ae.getBoundingClientRect().height)||0,be.current=((Pe=W.current)==null?void 0:Pe.getBoundingClientRect().width)||0,B(!0),J.current=new Date,KE()&&window.addEventListener("touchend",()=>pe.current=!1,{once:!0}),de.target.setPointerCapture(de.pointerId),we.current=yt(j)?de.pageY:de.pageX)}function Rr(de,Ae){var Pe;let Te=de;const Be=(Pe=window.getSelection())==null?void 0:Pe.toString(),Ht=W.current?Zu(W.current,j):null,$t=new Date;if(Te.tagName==="SELECT"||Te.hasAttribute("data-vaul-no-drag")||Te.closest("[data-vaul-no-drag]"))return!1;if(j==="right"||j==="left")return!0;if(Z.current&&$t.getTime()-Z.current.getTime()<500)return!1;if(Ht!==null&&(j==="bottom"?Ht>0:Ht<0))return!0;if(Be&&Be.length>0)return!1;if(ee.current&&$t.getTime()-ee.current.getTime()<u&&Ht===0||Ae)return ee.current=$t,!1;for(;Te;){if(Te.scrollHeight>Te.clientHeight){if(Te.scrollTop!==0)return ee.current=new Date,!1;if(Te.getAttribute("role")==="dialog")return!0}Te=Te.parentNode}return!0}function _t(de){if(W.current&&R){const Ae=j==="bottom"||j==="right"?1:-1,Pe=(we.current-(yt(j)?de.pageY:de.pageX))*Ae,Te=Pe>0,Be=o&&!d&&!Te;if(Be&&xt===0)return;const Ht=Math.abs(Pe),$t=document.querySelector("[data-vaul-drawer-wrapper]"),ps=j==="bottom"||j==="top"?se.current:be.current;let hn=Ht/ps;const Xs=qs(Ht,Te);if(Xs!==null&&(hn=Xs),Be&&hn>=1||!pe.current&&!Rr(de.target,Te))return;if(W.current.classList.add(zh),pe.current=!0,St(W.current,{transition:"none"}),St(V.current,{transition:"none"}),o&&Wn({draggedDistance:Pe}),Te&&!o){const Rn=yq(Pe),Ao=Math.min(Rn*-1,0)*Ae;St(W.current,{transform:yt(j)?`translate3d(0, ${Ao}px, 0)`:`translate3d(${Ao}px, 0, 0)`});return}const xs=1-hn;if((Vs||m&&xt===m-1)&&(s==null||s(de,hn),St(V.current,{opacity:`${xs}`,transition:"none"},!0)),$t&&V.current&&i){const Rn=Math.min(Kn()+hn*(1-Kn()),1),Ao=8-hn*8,Nu=Math.max(0,14-hn*14);St($t,{borderRadius:`${Ao}px`,transform:yt(j)?`scale(${Rn}) translate3d(0, ${Nu}px, 0)`:`scale(${Rn}) translate3d(${Nu}px, 0, 0)`,transition:"none"},!0)}if(!o){const Rn=Ht*Ae;St(W.current,{transform:yt(j)?`translate3d(0, ${Rn}px, 0)`:`translate3d(${Rn}px, 0, 0)`})}}}L.useEffect(()=>{window.requestAnimationFrame(()=>{X.current=!0})},[]),L.useEffect(()=>{var de;function Ae(){if(!W.current||!C)return;const Pe=document.activeElement;if(fp(Pe)||F.current){var Te;const Be=((Te=window.visualViewport)==null?void 0:Te.height)||0,Ht=window.innerHeight;let $t=Ht-Be;const ps=W.current.getBoundingClientRect().height||0,hn=ps>Ht*.8;ue.current||(ue.current=ps);const Xs=W.current.getBoundingClientRect().top;if(Math.abs(Q.current-$t)>60&&(F.current=!F.current),o&&o.length>0&&Tn&&xt){const xs=Tn[xt]||0;$t+=xs}if(Q.current=$t,ps>Be||F.current){const xs=W.current.getBoundingClientRect().height;let Rn=xs;xs>Be&&(Rn=Be-(hn?Xs:mp)),v?W.current.style.height=`${xs-Math.max($t,0)}px`:W.current.style.height=`${Math.max(Rn,Be-Xs)}px`}else oq()||(W.current.style.height=`${ue.current}px`);o&&o.length>0&&!F.current?W.current.style.bottom="0px":W.current.style.bottom=`${Math.max($t,0)}px`}}return(de=window.visualViewport)==null||de.addEventListener("resize",Ae),()=>{var Pe;return(Pe=window.visualViewport)==null?void 0:Pe.removeEventListener("resize",Ae)}},[xt,o,Tn]);function Lt(de){Zs(),x==null||x(),de||A(!1),setTimeout(()=>{o&&hs(o[0])},st.DURATION*1e3)}function gs(){if(!W.current)return;const de=document.querySelector("[data-vaul-drawer-wrapper]"),Ae=Zu(W.current,j);St(W.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`}),St(V.current,{transition:`opacity ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,opacity:"1"}),i&&Ae&&Ae>0&&z&&St(de,{borderRadius:`${n_}px`,overflow:"hidden",...yt(j)?{transform:`scale(${Kn()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Kn()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${st.DURATION}s`,transitionTimingFunction:`cubic-bezier(${st.EASE.join(",")})`},!0)}function Zs(){!R||!W.current||(W.current.classList.remove(zh),pe.current=!1,B(!1),ie.current=new Date)}function Ys(de){if(!R||!W.current)return;W.current.classList.remove(zh),pe.current=!1,B(!1),ie.current=new Date;const Ae=Zu(W.current,j);if(!de||!Rr(de.target,!1)||!Ae||Number.isNaN(Ae)||J.current===null)return;const Pe=ie.current.getTime()-J.current.getTime(),Te=we.current-(yt(j)?de.pageY:de.pageX),Be=Math.abs(Te)/Pe;if(Be>.05&&(I(!0),setTimeout(()=>{I(!1)},200)),o){Tr({draggedDistance:Te*(j==="bottom"||j==="right"?1:-1),closeDrawer:Lt,velocity:Be,dismissible:d}),r==null||r(de,!0);return}if(j==="bottom"||j==="right"?Te>0:Te<0){gs(),r==null||r(de,!0);return}if(Be>t_){Lt(),r==null||r(de,!1);return}var Ht;const $t=Math.min((Ht=W.current.getBoundingClientRect().height)!=null?Ht:0,window.innerHeight);var ps;const hn=Math.min((ps=W.current.getBoundingClientRect().width)!=null?ps:0,window.innerWidth),Xs=j==="left"||j==="right";if(Math.abs(Ae)>=(Xs?hn:$t)*c){Lt(),r==null||r(de,!1);return}r==null||r(de,!0),gs()}L.useEffect(()=>(z&&(St(document.documentElement,{scrollBehavior:"auto"}),Z.current=new Date),()=>{vq(document.documentElement,"scrollBehavior")}),[z]);function Qn(de){const Ae=de?(window.innerWidth-Aa)/window.innerWidth:1,Pe=de?-Aa:0;fe.current&&window.clearTimeout(fe.current),St(W.current,{transition:`transform ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,transform:yt(j)?`scale(${Ae}) translate3d(0, ${Pe}px, 0)`:`scale(${Ae}) translate3d(${Pe}px, 0, 0)`}),!de&&W.current&&(fe.current=setTimeout(()=>{const Te=Zu(W.current,j);St(W.current,{transition:"none",transform:yt(j)?`translate3d(0, ${Te}px, 0)`:`translate3d(${Te}px, 0, 0)`})},500))}function Mn(de,Ae){if(Ae<0)return;const Pe=(window.innerWidth-Aa)/window.innerWidth,Te=Pe+Ae*(1-Pe),Be=-Aa+Ae*Aa;St(W.current,{transform:yt(j)?`scale(${Te}) translate3d(0, ${Be}px, 0)`:`scale(${Te}) translate3d(${Be}px, 0, 0)`,transition:"none"})}function Ca(de,Ae){const Pe=yt(j)?window.innerHeight:window.innerWidth,Te=Ae?(Pe-Aa)/Pe:1,Be=Ae?-Aa:0;Ae&&St(W.current,{transition:`transform ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,transform:yt(j)?`scale(${Te}) translate3d(0, ${Be}px, 0)`:`scale(${Te}) translate3d(${Be}px, 0, 0)`})}return L.useEffect(()=>{b||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[b]),L.createElement(eS,{defaultOpen:N,onOpenChange:de=>{!d&&!de||(de?M(!0):Lt(!0),A(de))},open:z},L.createElement(WE.Provider,{value:{activeSnapPoint:ze,snapPoints:o,setActiveSnapPoint:hs,drawerRef:W,overlayRef:V,onOpenChange:t,onPress:Mr,onRelease:Ys,onDrag:_t,dismissible:d,shouldAnimate:X,handleOnly:f,isOpen:z,isDragging:R,shouldFade:Vs,closeDrawer:Lt,onNestedDrag:Mn,onNestedOpenChange:Qn,onNestedRelease:Ca,keyboardIsOpen:F,modal:b,snapPointsOffset:Tn,activeSnapPointIndex:xt,direction:j,shouldScaleBackground:i,setBackgroundColorOnScale:l,noBodyStyles:w,container:P,autoFocus:O}},n))}const a_=L.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:s,onRelease:r,shouldFade:o,isOpen:i,modal:l,shouldAnimate:c}=au(),u=JE(t,n),d=s&&s.length>0;if(!l)return null;const f=L.useCallback(m=>r(m),[r]);return L.createElement(Px,{onMouseUp:f,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":i&&d?"true":"false","data-vaul-snap-points-overlay":i&&o?"true":"false","data-vaul-animate":c!=null&&c.current?"true":"false",...e})});a_.displayName="Drawer.Overlay";const J0=L.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...s},r){const{drawerRef:o,onPress:i,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:d,activeSnapPointIndex:f,modal:m,isOpen:h,direction:p,snapPoints:v,container:b,handleOnly:x,shouldAnimate:y,autoFocus:w}=au(),[j,N]=L.useState(!1),S=JE(r,o),k=L.useRef(null),E=L.useRef(null),C=L.useRef(!1),_=v&&v.length>0;Cq();const P=($,T,z=0)=>{if(C.current)return!0;const A=Math.abs($.y),D=Math.abs($.x),M=D>A,R=["bottom","right"].includes(T)?1:-1;if(T==="left"||T==="right"){if(!($.x*R<0)&&D>=0&&D<=z)return M}else if(!($.y*R<0)&&A>=0&&A<=z)return!M;return C.current=!0,!0};L.useEffect(()=>{_&&window.requestAnimationFrame(()=>{N(!0)})},[]);function O($){k.current=null,C.current=!1,l($)}return L.createElement(Ox,{"data-vaul-drawer-direction":p,"data-vaul-drawer":"","data-vaul-delayed-snap-points":j?"true":"false","data-vaul-snap-points":h&&_?"true":"false","data-vaul-custom-container":b?"true":"false","data-vaul-animate":y!=null&&y.current?"true":"false",...s,ref:S,style:d&&d.length>0?{"--snap-point-height":`${d[f??0]}px`,...t}:t,onPointerDown:$=>{x||(s.onPointerDown==null||s.onPointerDown.call(s,$),k.current={x:$.pageX,y:$.pageY},i($))},onOpenAutoFocus:$=>{n==null||n($),w||$.preventDefault()},onPointerDownOutside:$=>{if(e==null||e($),!m||$.defaultPrevented){$.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:$=>{if(!m){$.preventDefault();return}},onPointerMove:$=>{if(E.current=$,x||(s.onPointerMove==null||s.onPointerMove.call(s,$),!k.current))return;const T=$.pageY-k.current.y,z=$.pageX-k.current.x,A=$.pointerType==="touch"?10:2;P({x:z,y:T},p,A)?c($):(Math.abs(z)>A||Math.abs(T)>A)&&(k.current=null)},onPointerUp:$=>{s.onPointerUp==null||s.onPointerUp.call(s,$),k.current=null,C.current=!1,l($)},onPointerOut:$=>{s.onPointerOut==null||s.onPointerOut.call(s,$),O(E.current)},onContextMenu:$=>{s.onContextMenu==null||s.onContextMenu.call(s,$),E.current&&O(E.current)}})});J0.displayName="Drawer.Content";const Aq=250,Tq=120,Mq=L.forwardRef(function({preventCycle:e=!1,children:t,...n},s){const{closeDrawer:r,isDragging:o,snapPoints:i,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:d,isOpen:f,onPress:m,onDrag:h}=au(),p=L.useRef(null),v=L.useRef(!1);function b(){if(v.current){w();return}window.setTimeout(()=>{x()},Tq)}function x(){if(o||e||v.current){w();return}if(w(),!i||i.length===0){u||r();return}if(l===i[i.length-1]&&u){r();return}const N=i.findIndex(k=>k===l);if(N===-1)return;const S=i[N+1];c(S)}function y(){p.current=window.setTimeout(()=>{v.current=!0},Aq)}function w(){p.current&&window.clearTimeout(p.current),v.current=!1}return L.createElement("div",{onClick:b,onPointerCancel:w,onPointerDown:j=>{d&&m(j),y()},onPointerMove:j=>{d&&h(j)},ref:s,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},L.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});Mq.displayName="Drawer.Handle";function Rq(e){const t=au(),{container:n=t.container,...s}=e;return L.createElement(tS,{container:n,...s})}const Er={Root:_q,Content:J0,Overlay:a_,Portal:Rq,Title:Bx,Description:Ix},o_=({shouldScaleBackground:e=!0,...t})=>a.jsx(Er.Root,{shouldScaleBackground:e,...t});o_.displayName="Drawer";const i_=Er.Portal,ev=g.forwardRef(({className:e,...t},n)=>a.jsx(Er.Overlay,{ref:n,className:H("fixed inset-0 bg-background/80 backdrop-blur-sm",e),style:{zIndex:Dt.MODAL},...t}));ev.displayName=Er.Overlay.displayName;const Dq=g.forwardRef(({className:e,children:t,fullHeight:n=!1,...s},r)=>a.jsxs(i_,{children:[a.jsx(ev,{}),a.jsxs(Er.Content,{ref:r,className:H(n?"fixed inset-x-0 bottom-0 z-50 flex h-[100dvh] max-h-[100dvh] w-full bg-background":"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),style:{zIndex:Dt.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[!n&&a.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));Dq.displayName="DrawerContent";const l_=({className:e,...t})=>a.jsx("div",{className:H("grid gap-1.5 p-4 text-center sm:text-left",e),...t});l_.displayName="DrawerHeader";const c_=({className:e,...t})=>a.jsx("div",{className:H("mt-auto flex flex-col gap-2 p-4",e),...t});c_.displayName="DrawerFooter";const u_=g.forwardRef(({className:e,...t},n)=>a.jsx(Er.Title,{ref:n,className:H("text-lg font-semibold leading-none tracking-tight",e),...t}));u_.displayName=Er.Title.displayName;const d_=g.forwardRef(({className:e,...t},n)=>a.jsx(Er.Description,{ref:n,className:H("text-sm text-muted-foreground",e),...t}));d_.displayName=Er.Description.displayName;var f_="Toggle",m_=g.forwardRef((e,t)=>{const{pressed:n,defaultPressed:s,onPressedChange:r,...o}=e,[i,l]=Yn({prop:n,onChange:r,defaultProp:s??!1,caller:f_});return a.jsx(ye.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:t,onClick:te(e.onClick,()=>{e.disabled||l(!i)})})});m_.displayName=f_;var Na="ToggleGroup",[h_,ite]=un(Na,[ol]),g_=ol(),tv=L.forwardRef((e,t)=>{const{type:n,...s}=e;if(n==="single"){const r=s;return a.jsx(zq,{...r,ref:t})}if(n==="multiple"){const r=s;return a.jsx(Lq,{...r,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Na}\``)});tv.displayName=Na;var[p_,x_]=h_(Na),zq=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...o}=e,[i,l]=Yn({prop:n,defaultProp:s??"",onChange:r,caller:Na});return a.jsx(p_,{scope:e.__scopeToggleGroup,type:"single",value:L.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:L.useCallback(()=>l(""),[l]),children:a.jsx(v_,{...o,ref:t})})}),Lq=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...o}=e,[i,l]=Yn({prop:n,defaultProp:s??[],onChange:r,caller:Na}),c=L.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=L.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return a.jsx(p_,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:u,children:a.jsx(v_,{...o,ref:t})})});tv.displayName=Na;var[$q,Pq]=h_(Na),v_=L.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:s=!1,rovingFocus:r=!0,orientation:o,dir:i,loop:l=!0,...c}=e,u=g_(n),d=al(i),f={role:"group",dir:d,...c};return a.jsx($q,{scope:n,rovingFocus:r,disabled:s,children:r?a.jsx(Fx,{asChild:!0,...u,orientation:o,dir:d,loop:l,children:a.jsx(ye.div,{...f,ref:t})}):a.jsx(ye.div,{...f,ref:t})})}),mf="ToggleGroupItem",y_=L.forwardRef((e,t)=>{const n=x_(mf,e.__scopeToggleGroup),s=Pq(mf,e.__scopeToggleGroup),r=g_(e.__scopeToggleGroup),o=n.value.includes(e.value),i=s.disabled||e.disabled,l={...e,pressed:o,disabled:i},c=L.useRef(null);return s.rovingFocus?a.jsx(Vx,{asChild:!0,...r,focusable:!i,active:o,ref:c,children:a.jsx(vw,{...l,ref:t})}):a.jsx(vw,{...l,ref:t})});y_.displayName=mf;var vw=L.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:s,...r}=e,o=x_(mf,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=o.type==="single"?i:void 0;return a.jsx(m_,{...l,...r,ref:t,onPressedChange:c=>{c?o.onItemActivate(s):o.onItemDeactivate(s)}})}),b_=tv,w_=y_;const j_=el("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 cursor-pointer",{variants:{variant:{default:"bg-transparent hover:bg-muted hover:text-foreground data-[state=on]:bg-muted data-[state=on]:text-foreground",outline:"border border-input bg-background hover:bg-muted hover:text-foreground data-[state=on]:bg-muted data-[state=on]:text-foreground data-[state=on]:border-muted-foreground/20"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-8"}},defaultVariants:{variant:"default",size:"default"}}),Oq=g.forwardRef(({className:e,variant:t,size:n,children:s,...r},o)=>a.jsx(b_,{ref:o,className:H(j_({variant:t,size:n}),e),...r,children:s}));Oq.displayName=b_.displayName;const Bq=g.forwardRef(({className:e,variant:t,size:n,children:s,...r},o)=>a.jsx(w_,{ref:o,className:H(j_({variant:t,size:n}),e),...r,children:s}));Bq.displayName=w_.displayName;function Iq(e){const t=new Set,n=[],s=(r,o)=>{if(t.has(r))return;t.add(r),o.push(e.find(l=>l.edid===r));const i=e.find(l=>l.edid===r);i.connection.children.forEach(l=>{e.some(c=>c.edid===l)&&s(l,o)}),i.connection.parents.forEach(l=>{e.some(c=>c.edid===l)&&s(l,o)})};return e.forEach(r=>{if(!t.has(r.edid)){const o=[];s(r.edid,o),n.push(o)}}),n}function Hq(e,t){try{if(e.length===0)return[];const r=Iq(e).map(l=>Uq(l)).map(l=>Fq(l,t)),o=qq(r,t);return N_(o,t)}catch{return e.map(s=>({id:s.edid,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0}))}}function Uq(e){const t=new Map;e.forEach(l=>{t.set(l.edid,{perk:l,depth:-1,children:l.connection.children,parents:l.connection.parents,x:0,y:0,width:0})});const n=[];t.forEach((l,c)=>{l.parents.length===0&&n.push(c)});const s=n.map(l=>({id:l,depth:0})),r=new Set;for(;s.length>0;){const{id:l,depth:c}=s.shift();if(r.has(l))continue;r.add(l);const u=t.get(l);u&&((u.depth===-1||c<u.depth)&&(u.depth=c),u.children.forEach(d=>{t.has(d)&&!r.has(d)&&s.push({id:d,depth:c+1})}))}let o=!0,i=0;for(;o&&i<10;)o=!1,i++,t.forEach((l,c)=>{if(l.parents.length>1){const u=l.parents.map(d=>{const f=t.get(d);return f?f.depth:-1}).filter(d=>d!==-1);if(u.length>0){const f=Math.min(...u)+1;l.depth!==f&&(l.depth=f,o=!0)}}});return t.forEach((l,c)=>{l.children.forEach(u=>{const d=t.get(u);if(d&&d.depth<=l.depth){const f=l.depth+1;d.depth=f}})}),{nodes:t,roots:n}}function Fq(e,t){const{nodes:n,roots:s}=e,r=[];if(n.forEach((f,m)=>{r.push({id:m,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0,children:f.children})}),r.some(f=>{try{return hp(f.id,n,t,new Set),!1}catch{return!0}}))return r.forEach(f=>{const m=n.get(f.id);if(m&&m.perk){const h=m.perk.position.x*t.gridScaleX,p=-m.perk.position.y*t.gridScaleY;f.x=h,f.y=p,f.originalX=h,f.originalY=p}}),Vq(r,t),r;const i=r.filter(f=>!r.some(h=>{var p;return h.id!==f.id&&((p=h.children)==null?void 0:p.includes(f.id))}));i.forEach(f=>{f.y=0,f.originalY=0});const l=new Set,c=i.map(f=>({node:f,depth:0}));for(;c.length>0;){const{node:f,depth:m}=c.shift();l.has(f.id)||(l.add(f.id),m>0&&(f.y=-m*t.verticalSpacing,f.originalY=f.y),f.children&&f.children.forEach(h=>{const p=r.find(v=>v.id===h);p&&!l.has(h)&&c.push({node:p,depth:m+1})}))}const u=new Map;return r.forEach(f=>{const m=Math.round(f.y/t.verticalSpacing);u.has(m)||u.set(m,[]),u.get(m).push(f)}),Array.from(u.keys()).sort((f,m)=>m-f).forEach(f=>{u.get(f).forEach(h=>{if(h.children){const p=new Map;h.children.forEach(v=>{const b=r.find(x=>x.id===v);if(b){const x=r.filter(y=>{var w;return((w=y.children)==null?void 0:w.includes(v))&&Math.abs(y.y-b.y)===t.verticalSpacing});x.length>0&&x.some(y=>y.id===h.id)&&(p.has(h.id)||p.set(h.id,[]),p.get(h.id).push(b))}}),p.forEach((v,b)=>{if(v.length>0){const x=r.find(y=>y.id===b);if(x){const y=v.map(k=>{const E=hp(k.id,n,t);return{child:k,subtreeWidth:E}}),w=y.reduce((k,{subtreeWidth:E})=>k+E,0),j=(v.length-1)*t.horizontalSpacing,N=w+j;let S=x.x-N/2;y.forEach(({child:k,subtreeWidth:E})=>{k.x=S+E/2,k.originalX=k.x,S+=E+t.horizontalSpacing})}}})}})}),N_(r,t),r}function N_(e,t){const r=t.horizontalSpacing*.4,o=new Map;e.forEach(i=>{o.set(i.id,{x:i.x,y:i.y})});for(let i=0;i<5;i++){let l=0;for(let c=0;c<e.length;c++)for(let u=c+1;u<e.length;u++){const d=e[c],f=e[u],m=d.x+t.nodeWidth*.5,h=d.y+t.nodeHeight*.5,p=f.x+t.nodeWidth*.5,v=f.y+t.nodeHeight*.5,b=p-m,x=v-h,y=Math.sqrt(b*b+x*x);if(y<r&&y>0){const w=b/y*.03,j=x/y*.03;d.x-=w,d.y-=j,f.x+=w,f.y+=j,l++}}if(l===0)break}return e.forEach(i=>{const l=o.get(i.id);if(!l)return;const c=l.x-i.x,u=l.y-i.y,d=i.x+c*.02,f=i.y+u*.02,h=Math.round(l.y/t.verticalSpacing)*t.verticalSpacing,p=Math.max(f,h);i.x=d,i.y=p,i.originalX=d,i.originalY=p}),e}function Vq(e,t){const r=t.nodeHeight*.8,o=50,i=new Map;e.forEach(u=>{i.set(u.id,{x:u.x,y:u.y})});let l=0,c=1;for(;c>0&&l<o;){l++,c=0;for(let u=0;u<e.length;u++)for(let d=u+1;d<e.length;d++){const f=e[u],m=e[d],h=Math.max(0,Math.min(f.x+t.nodeWidth,m.x+t.nodeWidth)-Math.max(f.x,m.x)),p=Math.max(0,Math.min(f.y+t.nodeHeight,m.y+t.nodeHeight)-Math.max(f.y,m.y)),v=f.y+t.nodeHeight*.5,b=m.y+t.nodeHeight*.5,x=Math.abs(b-v),y=x<r;if(h>0&&p>0||y){c++;let w=0;h>0&&p>0?w=p*.08:y&&(w=(r-x)*.08),f.y<m.y?(f.y-=w,m.y+=w):(f.y+=w,m.y-=w)}}if(c===0)break}return e.forEach(u=>{const d=i.get(u.id);if(!d)return;const f=d.y-u.y,m=u.y+f*.03;u.y=m,u.originalY=m}),e}function qq(e,t){const n=[],s=e.map(c=>{const u=Math.max(...c.map(w=>w.y)),d=c.filter(w=>Math.abs(w.y-u)<1),f=d.map(w=>w.x),m=Math.min(...f),h=Math.max(...f),p=h-m,v=f.reduce((w,j)=>w+j,0)/f.length,b=Math.min(...c.map(w=>w.x)),x=Math.max(...c.map(w=>w.x+w.width)),y=x-b;return{treeNodes:c,rootNodes:d,minRootX:m,maxRootX:h,rootWidth:p,rootCenterX:v,minX:b,maxX:x,treeWidth:y}}),r=Math.min(...s.map(c=>c.minRootX)),i=Math.max(...s.map(c=>c.maxRootX))-r;let l=0;return s.forEach(c=>{const u=i>0?c.rootWidth/i:1,d=c.minRootX-r;l-c.minX+d*u,c.treeNodes.forEach(f=>{const h=(f.x-c.minRootX)*u,p=l+h;n.push({...f,x:p,originalX:p})}),l+=c.treeWidth*u+t.horizontalSpacing}),n}function hp(e,t,n,s=new Set){if(s.has(e))throw new Error(`Circular reference detected for perkId: ${e}`);const r=t.get(e);if(!r)return n.nodeWidth;s.add(e);const o=r.children||[],i=o.map(c=>hp(c,t,n,new Set(s)));if(i.length===0)return n.nodeWidth;let l=0;return i.forEach((c,u)=>{l+=c,u<o.length-1&&(l+=n.horizontalSpacing)}),Math.max(l,n.nodeWidth)}function Gq(e){return e.perks.map(t=>({edid:t.edid,name:t.name,position:t.position,connection:t.connections}))}const Zq={perkNode:e=>a.jsx(XE,{...e,onTogglePerk:e.data.onTogglePerk,onRankChange:e.data.onRankChange})};function Yq({tree:e,onTogglePerk:t,onRankChange:n,selectedPerks:s}){const[r,o]=L.useState(null),[i,l]=L.useState(null),[c,u]=L.useState(!1),d=L.useCallback((_,P)=>{},[]),f=g.useMemo(()=>{if(!e)return null;const _=ZE(e);return _.success?_.data:(console.error("Invalid perk tree data:",_.error),null)},[e]);L.useEffect(()=>{if(!f){l(null);return}console.log("Loading saved positions for tree:",f.treeId),u(!0),YE(f.treeId).then(_=>{console.log("Loaded saved positions:",_?"Found":"Not found"),l(_)}).catch(_=>{console.warn("Failed to load saved positions:",_),l(null)}).finally(()=>{u(!1)})},[f==null?void 0:f.treeId]);const m=g.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),h=g.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),p=g.useMemo(()=>{if(!f)return[];if(console.log("Layout decision:",{hasSavedPositions:!!i,isLoadingPositions:c,treeId:f.treeId}),i&&!c){console.log("Using preset positions for tree:",f.treeId);const _=eq(f,i,h);return Array.from(_.entries()).map(([P,O])=>({id:P,x:O.x,y:O.y,width:h.nodeWidth||140,height:h.nodeHeight||80,originalX:O.x,originalY:O.y}))}else{console.log("Using fallback layout algorithm for tree:",f.treeId);const _=Gq(f);return Hq(_,m)}},[f,m,i,c,h]),v=g.useMemo(()=>!f||p.length===0?[]:f.perks.map(_=>{const P=_.edid,O=p.find(M=>M.id===P),$=O?{x:O.x,y:O.y}:{x:0,y:0},T=_.connections.children.length>0,z=_.connections.parents.length===0,A=s.find(M=>M.edid===P);return{id:P,type:"perkNode",position:$,draggable:!0,data:{..._,selected:A!==void 0,currentRank:(A==null?void 0:A.currentRank)||0,hasChildren:T,isRoot:z,onTogglePerk:t,onRankChange:n}}}),[f,p,s,t,n]),b=g.useMemo(()=>{if(!f)return[];const _=[];return f.perks.forEach(P=>{const O=P.edid;P.connections.children.length>0&&P.connections.children.forEach($=>{if($===O)return;f.perks.some(z=>z.edid===$)&&_.push({id:`${O}-${$}`,source:O,target:$,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),_},[f]),[x,y,w]=HE(v),[j,N,S]=UE(b);L.useEffect(()=>{y(v)},[v,y]),L.useEffect(()=>{N(b)},[b,N]),L.useEffect(()=>{f&&x.length>0&&r&&setTimeout(()=>{r.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[f==null?void 0:f.treeId,r]);const k=g.useCallback(_=>N(P=>q0(_,P)),[N]),E=g.useCallback(_=>{_.stopPropagation()},[]),C=g.useCallback(_=>{_.stopPropagation()},[]);return f?a.jsxs("div",{className:"w-full h-full bg-background rounded-lg border",style:{zIndex:1},onMouseDown:_=>_.stopPropagation(),onTouchStart:_=>_.stopPropagation(),children:[a.jsx("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-1",children:a.jsx("div",{className:"bg-primary text-primary-foreground px-2 py-1 rounded text-xs font-medium",children:c?"Loading Positions...":i?"Positioned Tree":"Algorithm v2"})}),a.jsxs(K0,{nodes:x,edges:j,onNodesChange:w,onEdgesChange:S,onConnect:k,onInit:o,nodeTypes:Zq,nodesDraggable:!1,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},onNodeDragStop:d,onMouseDown:E,onTouchStart:C,panOnDrag:!0,panOnScroll:!1,preventScrolling:!0,children:[a.jsx(GE,{}),a.jsx(VE,{})]})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20 rounded-lg",children:a.jsx("p",{className:"text-muted-foreground",children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function Xq(e,t){const n=new Map;return t.forEach(s=>{var i;const r=s.treeId,o=((i=s.perks)==null?void 0:i.length)||0;n.set(r,o)}),n}function nv(){const{data:e,loading:t,error:n,reload:s}=c8(),{data:r,loading:o,error:i,reload:l}=g0(),c=t||o,u=n||i;return{skills:g.useMemo(()=>{if(!e||!r)return[];const m=Xq(e,r);return e.map(h=>({id:h.edid,name:h.name,category:h.category,description:h.description,keyAbilities:h.keyAbilities||[],metaTags:h.metaTags||[],assignmentType:"none",canAssignMajor:!0,canAssignMinor:!0,level:0,totalPerks:m.get(h.edid)||0,selectedPerksCount:0,selectedPerks:[],isSelected:!1}))},[e,r]),perkTrees:r||[],loading:c,error:u,refreshSkills:async()=>{await Promise.all([s(),l()])}}}function Wq(){var b;const{skills:e,loading:t,error:n}=nv(),{build:s,addMajorSkill:r,addMinorSkill:o,removeMajorSkill:i,removeMinorSkill:l}=pt(),c=g.useMemo(()=>e.map(x=>{var E,C;const y=s.skills.major.includes(x.id),w=s.skills.minor.includes(x.id),N=(((C=(E=s.perks)==null?void 0:E.selected)==null?void 0:C[x.id])||[]).length,S=!y&&s.skills.major.length<3,k=!w&&s.skills.minor.length<6;return{...x,isMajor:y,isMinor:w,selectedPerksCount:N,canAssignMajor:S,canAssignMinor:k}}),[e,s.skills.major,s.skills.minor,(b=s.perks)==null?void 0:b.selected]),u=g.useMemo(()=>c.filter(x=>x.isMajor),[c]),d=g.useMemo(()=>c.filter(x=>x.isMinor),[c]),f=g.useMemo(()=>c.filter(x=>!x.isMajor&&!x.isMinor),[c]);return{skills:c,selectedMajorSkills:u,selectedMinorSkills:d,availableSkills:f,loading:t,error:n,handleMajorSkillSelect:x=>{r(x.id)},handleMinorSkillSelect:x=>{o(x.id)},handleMajorSkillRemove:x=>{i(x)},handleMinorSkillRemove:x=>{l(x)}}}function Kq(e){const[t,n]=g.useState(""),[s,r]=g.useState(null),o=g.useMemo(()=>e.filter(c=>{const u=c.name.toLowerCase().includes(t.toLowerCase())||c.description.toLowerCase().includes(t.toLowerCase())||c.category.toLowerCase().includes(t.toLowerCase())||c.keyAbilities.some(f=>f.toLowerCase().includes(t.toLowerCase()))||c.metaTags.some(f=>f.toLowerCase().includes(t.toLowerCase())),d=!s||c.category===s;return u&&d}),[e,t,s]),i=g.useMemo(()=>{const c=new Set(e.map(u=>u.category));return Array.from(c).sort()},[e]);return{searchQuery:t,setSearchQuery:n,selectedCategory:s,setSelectedCategory:r,filteredSkills:o,categories:i,clearFilters:()=>{n(""),r(null)}}}function sv(e){const{data:t,loading:n,error:s}=g0(),{getSkillPerks:r,getPerkRank:o,addPerk:i,removePerk:l,setPerkRank:c,clearSkillPerks:u}=pt(),d=g.useMemo(()=>!e||!t?null:t.find(y=>y.treeId===e)||null,[e,t]),f=g.useMemo(()=>e?r(e):[],[e,r]),m=g.useMemo(()=>{if(!e||!d)return{};const x={};return d.perks.forEach(y=>{x[y.edid]=o(y.edid)}),x},[e,d,o]),h=g.useMemo(()=>{if(!d)return[];const x=[];return d.perks.forEach(y=>{if(y.isRoot){x.push(y.edid);return}(y.connections.parents||[]).every(N=>f.includes(N))&&x.push(y.edid)}),x},[d,f]);return{perkTrees:t||[],selectedPerkTree:d,selectedPerks:f,perkRanks:m,availablePerks:h,loading:n,error:s,handlePerkSelect:x=>{if(!e)return;f.includes(x)?l(e,x):i(e,x)},handlePerkRankChange:(x,y)=>{c(x,y),y===0?f.includes(x)&&l(e,x):f.includes(x)||i(e,x)},handleResetPerks:()=>{e&&u(e)}}}function S_(){var A,D,M,R,B,U;const{skills:e,loading:t,error:n,refreshSkills:s}=nv(),{build:r,addMajorSkill:o,addMinorSkill:i,removeMajorSkill:l,removeMinorSkill:c}=pt(),{searchQuery:u,setSearchQuery:d,selectedCategory:f,setSelectedCategory:m,filteredSkills:h,categories:p,clearFilters:v}=Kq(e),b=g.useMemo(()=>h.map(I=>{var ee,pe,fe;const V=((pe=(ee=r.perks)==null?void 0:ee.selected)==null?void 0:pe[I.id])||[],Z=V.length,J=I.totalPerks??0,ie=u1(I.id,V,((fe=r.perks)==null?void 0:fe.ranks)||{});return{...I,selectedPerksCount:Z,level:ie,assignmentType:r.skills.major.includes(I.id)?"major":r.skills.minor.includes(I.id)?"minor":"none",canAssignMajor:!r.skills.major.includes(I.id)&&r.skills.major.length<3,canAssignMinor:!r.skills.minor.includes(I.id)&&r.skills.minor.length<6,perkCount:`${Z}/${J}`}}),[h,r.skills.major,r.skills.minor,(A=r.perks)==null?void 0:A.selected,(D=r.perks)==null?void 0:D.ranks]),x=g.useMemo(()=>({majorCount:r.skills.major.length,minorCount:r.skills.minor.length,majorLimit:3,minorLimit:6,canAssignMajor:r.skills.major.length<3,canAssignMinor:r.skills.minor.length<6,totalSkills:b.length,totalPerks:b.reduce((I,V)=>I+(V.selectedPerksCount||0),0),totalPerkRanks:0}),[b,r.skills.major,r.skills.minor]),y=g.useCallback(I=>{o(I)},[o]),w=g.useCallback(I=>{i(I)},[i]),j=g.useCallback(I=>{l(I),c(I)},[l,c]),[N,S]=g.useState(null),k=g.useCallback(I=>{S(I)},[]),E=g.useMemo(()=>N&&b.find(I=>I.id===N)||null,[N,b]),{selectedPerkTree:C,handleResetPerks:_}=sv(N),P=g.useMemo(()=>{var I;return!E||!((I=r.perks)!=null&&I.selected)?[]:r.perks.selected[E.id]||[]},[E,(M=r.perks)==null?void 0:M.selected]),O=g.useMemo(()=>{var I;return!E||!((I=r.perks)!=null&&I.ranks)?{}:r.perks.ranks[E.id]||{}},[E,(R=r.perks)==null?void 0:R.ranks]),$=g.useMemo(()=>C?C.perks||[]:[],[C]),T=g.useCallback(I=>{var J,ie;if(!E)return;const V=((ie=(J=r.perks)==null?void 0:J.selected)==null?void 0:ie[E.id])||[];V.includes(I)?(V.filter(ee=>ee!==I),console.log("Remove perk:",I,"from skill:",E.id)):([...V],console.log("Add perk:",I,"to skill:",E.id))},[E,(B=r.perks)==null?void 0:B.selected]),z=g.useCallback((I,V)=>{var J,ie;if(!E)return;({...((ie=(J=r.perks)==null?void 0:J.ranks)==null?void 0:ie[E.id])||{}},console.log("Update perk rank:",I,"to",V,"for skill:",E.id))},[E,(U=r.perks)==null?void 0:U.ranks]);return{skills:b,skillSummary:x,selectedSkill:E,selectedSkillId:N,perkTree:C,selectedPerks:P,perkRanks:O,availablePerks:$,loading:t,error:n,searchQuery:u,setSearchQuery:d,selectedCategory:f,setSelectedCategory:m,categories:p,clearFilters:v,onAssignMajor:y,onAssignMinor:w,onRemoveAssignment:j,onSkillSelect:k,onPerkSelect:T,onPerkRankChange:z,onResetPerks:_,refreshSkills:s}}function k_({open:e,onOpenChange:t,selectedSkill:n,skillName:s,perkTree:r,skills:o,onSkillSelect:i,onReset:l}){var j,N;console.log("SkillPerkTreeDrawer props:",{open:e,selectedSkill:n,skillName:s,perkTree:r?"Found":"Not found",skillsCount:o.length});const{selectedPerks:c,perkRanks:u,handlePerkSelect:d,handlePerkRankChange:f,handleResetPerks:m}=sv(n),h=L.useMemo(()=>r?r.perks.filter(S=>c.includes(S.edid)).map(S=>({...S,selected:!0,currentRank:u[S.edid]||1})):[],[r,c,u]),p=L.useCallback(S=>{d(S)},[d]),v=L.useCallback((S,k)=>{f(S,k)},[f]),b=()=>{m(),l()},x=()=>{t(!1)},y=[{id:"skills",name:"Skills",placeholder:"Search skills...",options:o.map(S=>({id:S.id,label:S.name,value:S.id,category:"Skills",description:`${S.selectedPerks}/${S.totalPerks} perks selected`}))}],w=S=>{i(S.value)};return n?a.jsxs(o_,{open:e,onOpenChange:t,shouldScaleBackground:!1,dismissible:!0,children:[console.log("Drawer render - open:",e),a.jsxs(i_,{children:[a.jsx(ev,{}),a.jsxs(J0,{className:"fixed inset-x-0 bottom-0 z-50 mt-24 flex flex-col rounded-t-[10px] border bg-background h-[85vh] bg-card border-t shadow-lg !bg-card","data-vaul-no-drag":!0,style:{backgroundColor:"hsl(var(--card))",zIndex:Dt.DRAWER},children:[console.log("Drawer content render - zIndex:",Dt.DRAWER),a.jsx(l_,{className:"border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-64",children:a.jsx(Oa,{categories:y,onSelect:w,placeholder:"Search skills..."})}),a.jsxs("div",{children:[a.jsx(u_,{className:"text-xl",children:s||(r==null?void 0:r.treeName)||"Skill Perks"}),a.jsxs(d_,{className:"flex items-center gap-2",children:[a.jsxs("span",{children:[c.length," perks selected"]}),((j=o.find(S=>S.id===n))==null?void 0:j.level)&&a.jsxs("span",{className:"text-blue-600 font-medium",children:["• Min: Level"," ",(N=o.find(S=>S.id===n))==null?void 0:N.level]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(G,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-2",children:[a.jsx(gr,{className:"h-4 w-4"}),"Reset Perks"]}),a.jsx(G,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:a.jsx(Bt,{className:"h-4 w-4"})})]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",style:{height:"400px"},children:a.jsx("div",{className:"h-full w-full bg-muted/20 rounded",children:r?a.jsx(Yq,{tree:r,onTogglePerk:p,onRankChange:v,selectedPerks:h}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"text-muted-foreground",children:n?"Loading perk tree...":"No skill selected"})})})}),a.jsx(c_,{className:"border-t",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on perk nodes to select/deselect them"}),a.jsx(G,{variant:"outline",onClick:x,children:"Close"})]})})]})]})]}):null}function Qq({skills:e,loading:t,error:n,searchQuery:s,onSearchChange:r,selectedCategory:o,onCategorySelect:i,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:v}){var w;const[b,x]=g.useState(!1);if(t)return a.jsx(HI,{});if(n)return a.jsx(UI,{error:n});const y=e.map(j=>({edid:j.id,name:j.name,category:j.category,description:j.description,scaling:"",keyAbilities:[],metaTags:[],totalPerks:j.totalPerks,selectedPerks:j.selectedPerksCount,level:j.level,isMajor:j.assignmentType==="major",isMinor:j.assignmentType==="minor"}));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsx(_e,{children:a.jsxs(Re,{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Build Summary"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(K,{variant:"outline",className:"bg-yellow-50 text-yellow-800 border-yellow-300",children:[v.majorCount,"/",v.majorLimit," Major"]}),a.jsxs(K,{variant:"outline",className:"bg-gray-50 text-gray-800 border-gray-300",children:[v.minorCount,"/",v.minorLimit," Minor"]})]})]})}),a.jsx(ve,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Total Skills"}),a.jsx("p",{className:"font-semibold",children:v.totalSkills})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Selected Perks"}),a.jsx("p",{className:"font-semibold",children:v.totalPerks})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Perk Ranks"}),a.jsx("p",{className:"font-semibold",children:v.totalPerkRanks})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Available Major"}),a.jsx("p",{className:"font-semibold text-yellow-600",children:v.majorLimit-v.majorCount})]})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(VI,{query:s,onQueryChange:r}),a.jsx(rq,{categories:l,selectedCategory:o,onCategorySelect:i})]}),a.jsx(Vr,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Available Skills"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.length," skills found"]})]}),a.jsx(FI,{skills:e,onSkillSelect:j=>{console.log("Skill selected:",j),console.log("Setting perkTreeOpen to true"),u(j),x(!0)},onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,selectedSkillId:c||void 0})]}),a.jsx(k_,{open:b,onOpenChange:x,selectedSkill:c,skillName:c?(w=e.find(j=>j.id===c))==null?void 0:w.name:void 0,perkTree:p||void 0,skills:y,onSkillSelect:u,onReset:h}),a.jsx(xe,{className:"bg-muted/50",children:a.jsxs(ve,{className:"pt-6",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"How to Assign Skills"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Major Skills (0-3)"}),a.jsx("p",{children:"Your primary skills that level up faster and start at a higher level."})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Minor Skills (0-6)"}),a.jsx("p",{children:"Secondary skills that provide additional benefits and customization."})]})]})]})})]})}function C_({className:e}){var P;const{selectedMajorSkills:t,selectedMinorSkills:n,availableSkills:s,handleMajorSkillSelect:r,handleMinorSkillSelect:o,handleMajorSkillRemove:i,handleMinorSkillRemove:l}=Wq(),{build:c,getSkillLevel:u,getSkillPerks:d}=pt(),{skills:f}=nv(),m=ft(),[h,p]=g.useState(null),[v,b]=g.useState(!1),x=()=>{m("/skills")},y=O=>{console.log("Opening perk tree for skill:",O),p(O),b(!0)},w=O=>{p(O.edid),b(!0)},j=g.useMemo(()=>{const O=t.map(z=>z.id),$=n.map(z=>z.id),T=[...O,...$];return f.filter(z=>d(z.id).length>0&&!T.includes(z.id))},[f,t,n,d]),N=g.useMemo(()=>{const O=t.map(A=>A.id),$=n.map(A=>A.id),T=[...O,...$],z=j.map(A=>A.id);return f.filter(A=>!T.includes(A.id)&&!z.includes(A.id)).map(A=>({name:A.name,edid:A.id,category:A.category,description:A.description,scaling:"",keyAbilities:A.keyAbilities||[],metaTags:A.metaTags||[]}))},[f,t,n,j]),S=O=>({name:O.name,edid:O.id,category:O.category,description:O.description,scaling:O.scaling||"",keyAbilities:O.keyAbilities||[],metaTags:O.metaTags||[]}),k=g.useMemo(()=>{const O=t.map(z=>z.id),$=n.map(z=>z.id),T=[...O,...$];return f.filter(z=>{const A=d(z.id);return T.includes(z.id)&&A.length===0})},[f,t,n,d]),E=f.map(O=>{d(O.id);const $=u(O.id),T=c.skills.major.includes(O.id),z=c.skills.minor.includes(O.id),A=!T&&c.skills.major.length<3,D=!z&&c.skills.minor.length<6;return{...O,isMajor:T,isMinor:z,canAssignMajor:A,canAssignMinor:D,level:$}}),{selectedPerkTree:C}=sv(h),_=(O,$)=>{const T=u(O.id||O.edid),z=d(O.id||O.edid),A=O.totalPerks||0,D=O.id||O.edid;let M="cursor-pointer transition-all hover:shadow-md ",R="text-xs ";switch($){case"major":M+="bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",R+="bg-yellow-100 text-yellow-800 border-yellow-300";break;case"minor":M+="bg-gray-50/50 border-gray-300 shadow-gray-300/20",R+="bg-gray-100 text-gray-800 border-gray-300";break;case"perked":M+="bg-blue-50/50 border-blue-500 shadow-blue-500/20",R+="bg-blue-100 text-blue-800 border-blue-300";break;case"assigned":M+="bg-orange-50/50 border-orange-500 shadow-orange-500/20",R+="bg-orange-100 text-orange-800 border-orange-300";break}return a.jsx(xe,{className:M,onClick:()=>y(D),children:a.jsx(ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h5",{className:"font-medium text-sm text-foreground",children:O.name}),a.jsx(Uc,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(De,{text:O.description,className:"text-xs text-muted-foreground line-clamp-2 mb-3",as:"p"}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx(xC,{level:T,size:"sm"}),a.jsxs(K,{variant:"outline",className:R,children:[z.length,"/",A," perks"]}),$==="major"&&a.jsx(K,{variant:"outline",className:"text-xs bg-yellow-100 text-yellow-800 border-yellow-300",children:"Major"}),$==="minor"&&a.jsx(K,{variant:"outline",className:"text-xs bg-gray-100 text-gray-800 border-gray-300",children:"Minor"}),$==="perked"&&a.jsx(K,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800 border-blue-300",children:"Perked"}),$==="assigned"&&a.jsx(K,{variant:"outline",className:"text-xs bg-orange-100 text-orange-800 border-orange-300",children:"Assigned"})]})]}),($==="major"||$==="minor")&&a.jsx(G,{size:"sm",variant:"ghost",onClick:B=>{B.stopPropagation(),$==="major"?i(D):l(D)},className:`${$==="major"?"text-yellow-600 hover:text-yellow-700 hover:bg-yellow-100":"text-gray-600 hover:text-gray-700 hover:bg-gray-100"}`,children:a.jsx(Bt,{className:"h-4 w-4"})})]})})},D)};return a.jsxs(a.Fragment,{children:[a.jsxs(In,{title:"Skills & Perks",navigateTo:"skills",onNavigate:x,className:e,children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Major Skills"}),t.length<3&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(K,{variant:"outline",className:"text-xs",children:[t.length,"/3"]})}),a.jsx(Th,{skills:s.map(S),onSelect:O=>{const $=s.find(T=>T.id===O.edid);$&&r($)},placeholder:"Select major skill...",className:"w-full"})]}),t.length>0&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:t.map(O=>_(O,"major"))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Minor Skills"}),n.length<6&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(K,{variant:"outline",className:"text-xs",children:[n.length,"/6"]})}),a.jsx(Th,{skills:s.map(S),onSelect:O=>{const $=s.find(T=>T.id===O.edid);$&&o($)},placeholder:"Select minor skill...",className:"w-full"})]}),n.length>0&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:n.map(O=>_(O,"minor"))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Other Perked Skills"}),a.jsx("div",{className:"space-y-2",children:a.jsx(Th,{skills:N,onSelect:w,placeholder:"Select skill to add perks...",className:"w-full"})}),j.length>0&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:j.map(O=>_(O,"perked"))})]}),k.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Assigned Skills (No Perks)"}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:k.map(O=>_(O,"assigned"))})]})]}),a.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on any skill card to view and manage its perk tree. Skill levels show the minimum level required based on your perk selections."})})]}),a.jsx(k_,{open:v,onOpenChange:b,selectedSkill:h,skillName:h?(P=f.find(O=>O.id===h))==null?void 0:P.name:void 0,perkTree:C||void 0,skills:E,onSkillSelect:p,onReset:()=>{}})]})}function Jq({item:e,className:t,allTraitIds:n,disableHover:s=!1}){e.originalTrait;const{hasRegularTrait:r,hasBonusTrait:o,addRegularTrait:i,addBonusTrait:l,removeTrait:c,canAddRegularTrait:u,canAddBonusTrait:d,build:f}=pt(),h=r(e.id)?"primary":o(e.id)?"secondary":"none",p=y=>{h===y?c(e.id):(c(e.id),y==="primary"&&u()?i(e.id):y==="secondary"&&d()&&l(e.id))},v=!u()&&h!=="primary",b=!d()&&h!=="secondary",x=()=>h==="primary"?"border-yellow-500 bg-yellow-50/50 shadow-yellow-500/20":h==="secondary"?"border-gray-400 bg-gray-50/50 shadow-gray-400/20":"";return g.useEffect(()=>{var y,w;if(n){const j=((y=f==null?void 0:f.traits)==null?void 0:y.regular)||[],N=((w=f==null?void 0:f.traits)==null?void 0:w.bonus)||[];[...j,...N].filter(E=>!n.includes(E)).forEach(E=>c(E))}},[n,f==null?void 0:f.traits,c]),a.jsxs(he,{expanded:!0,className:H(t,x()),disableHover:s,hideChevron:!0,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zs,{className:"h-4 w-4 text-black"}),a.jsx(Qe,{className:"text-primary font-semibold",children:e.name})]})}),a.jsx(he.Summary,{children:a.jsx(De,{text:e.description,className:"text-base text-muted-foreground"})}),a.jsx(he.Footer,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(G,{size:"sm",variant:h==="primary"?"default":"outline",disabled:v,className:H("flex-1 text-xs",h==="primary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:y=>{y.stopPropagation(),p("primary")},children:h==="primary"?"Remove Trait":"Starting Trait"}),a.jsx(G,{size:"sm",variant:h==="secondary"?"default":"outline",disabled:b,className:H("flex-1 text-xs",h==="secondary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:y=>{y.stopPropagation(),p("secondary")},children:h==="secondary"?"Remove Trait":"Late Game Trait"})]})})]})}function E_(e,t){const n=g.useMemo(()=>e.map(l=>{var c;return{id:l.id||l.name,name:l.name,description:l.description||"",category:l.category||"",effects:((c=l.effects)==null?void 0:c.map(u=>`${u.type} ${u.description||""} ${u.value}`))||[],tags:l.tags||[],originalTrait:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"effects",weight:.2},{name:"tags",weight:.15},{name:"category",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Xt(n,s),[n,s]),o=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredTraits:g.useMemo(()=>o.map(l=>l.item.originalTrait),[o]),searchResults:o,searchableTraits:n}}function Lh({traits:e,onSelect:t,placeholder:n="Search traits...",className:s="",disabled:r=!1}){const[o,i]=g.useState(""),{filteredTraits:l}=E_(e,o),c=g.useMemo(()=>l.map(f=>({id:f.edid,label:f.name,description:f.description,category:f.category,badge:f.category&&a.jsx(K,{variant:"outline",className:"text-xs",children:f.category}),metadata:{originalTrait:f,effectsCount:f.effects.length}})),[l]),u=f=>{const m=e.find(h=>h.edid===f.id);m&&t(m)},d=(f,m)=>{var h;return a.jsx("div",{className:"flex items-start gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:f.label}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.badge&&a.jsx("div",{className:"flex-shrink-0",children:f.badge}),((h=f.metadata)==null?void 0:h.effectsCount)&&f.metadata.effectsCount>0&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.metadata.effectsCount," effect",f.metadata.effectsCount!==1?"s":""]})]}),f.description&&a.jsx(De,{text:f.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]})})};return a.jsx(Jc,{options:c,onSelect:u,placeholder:n,className:s,disabled:r,renderOption:d,emptyMessage:"No traits found",searchQuery:o,onSearchQueryChange:i})}function __(e){const t=e.map(n=>n.category).filter(Boolean);return[...new Set(t)].sort()}function eG(e){const t=e.flatMap(n=>{var s;return((s=n.effects)==null?void 0:s.map(r=>r.type))||[]});return[...new Set(t)].sort()}function A_(e){const t=e.flatMap(n=>n.tags||[]);return[...new Set(t)].sort()}function tG(){const[e,t]=g.useState({search:"",category:"",tags:[]}),{data:n,loading:s,error:r}=xo(),o=g.useMemo(()=>n.filter(u=>{var d;if(e.search){const f=e.search.toLowerCase();if(![u.name,u.description,u.category,...u.tags||[],...((d=u.effects)==null?void 0:d.map(h=>h.type))||[]].join(" ").toLowerCase().includes(f))return!1}return!(e.category&&u.category!==e.category||e.tags.length>0&&!e.tags.some(m=>{var h,p;return((h=u.tags)==null?void 0:h.includes(m))||u.category===m||((p=u.effects)==null?void 0:p.some(v=>v.type===m))}))}),[n,e]),i=g.useMemo(()=>__(n),[n]),l=g.useMemo(()=>eG(n),[n]),c=g.useMemo(()=>A_(n),[n]);return{traits:o,allTraits:n,loading:s,error:r,filters:e,setFilters:t,allCategories:i,allEffectTypes:l,allTags:c}}function T_({className:e}){const{allTraits:t}=tG(),{build:n,addTraitToSlot:s,removeTrait:r,getRegularTraitLimit:o,getBonusTraitLimit:i}=pt(),l=ft();o(),i();const c=n.traits.regular.map(p=>t.find(v=>v.edid===p)).filter(Boolean),u=n.traits.bonus.map(p=>t.find(v=>v.edid===p)).filter(Boolean),d=(p,v)=>{s(p.edid,v)},f=p=>{r(p)},m=()=>{l("/traits")},h=t.filter(p=>!n.traits.regular.includes(p.edid)&&!n.traits.bonus.includes(p.edid));return a.jsx(In,{title:"Traits",navigateTo:"traits",onNavigate:m,className:e,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Starting"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K,{variant:"outline",className:"text-xs",children:"Slot 1"}),c[0]&&a.jsx(K,{variant:"default",className:"text-xs",children:"Starting"})]}),c[0]?a.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:c[0].name}),a.jsx(De,{text:c[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>f(c[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:a.jsx(Bt,{className:"h-3 w-3"})})]}):a.jsx(Lh,{traits:h,onSelect:p=>d(p,"regular"),placeholder:"Select starting trait...",className:"w-full"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K,{variant:"outline",className:"text-xs",children:"Slot 2"}),c[1]&&a.jsx(K,{variant:"default",className:"text-xs",children:"Starting"})]}),c[1]?a.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:c[1].name}),a.jsx(De,{text:c[1].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>f(c[1].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:a.jsx(Bt,{className:"h-3 w-3"})})]}):a.jsx(Lh,{traits:h,onSelect:p=>d(p,"regular"),placeholder:"Select starting trait...",className:"w-full"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Late Game"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K,{variant:"outline",className:"text-xs",children:"Slot 1"}),u[0]&&a.jsx(K,{variant:"secondary",className:"text-xs",children:"Late Game"})]}),u[0]?a.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-gray-50/50 border-gray-400 shadow-gray-400/20",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:u[0].name}),a.jsx(De,{text:u[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>f(u[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:a.jsx(Bt,{className:"h-3 w-3"})})]}):a.jsx(Lh,{traits:h,onSelect:p=>d(p,"bonus"),placeholder:"Select late game trait...",className:"w-full"})]})]})]})})}const nG=()=>{const{build:e,resetBuild:t,getSummary:n,setBuildName:s,setBuildNotes:r}=pt(),o=ft(),i=n(),[l,c]=g.useState(!1),u=()=>{navigator.clipboard.writeText(window.location.href)},d=()=>{confirm("Are you sure you want to reset your character build? This cannot be undone.")&&t()},f=()=>{c(!1),o("/build")},m=h=>{c(!1),o(`/build#${h}`),setTimeout(()=>{const p=document.getElementById(h);p==null||p.scrollIntoView({behavior:"smooth",block:"start"})},100)};return a.jsx("div",{className:"fixed bottom-4 right-4",style:{zIndex:Dt.MODAL+1},children:a.jsxs(Ci,{open:l,onOpenChange:c,children:[a.jsx(nS,{asChild:!0,children:a.jsx(G,{size:"lg",className:`h-12 w-12 rounded-full shadow-lg transition-opacity duration-200 ${l?"opacity-0 pointer-events-none":"opacity-100"}`,style:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))"},children:a.jsx(Od,{className:"h-5 w-5"})})}),a.jsx(Ka,{side:"right",className:"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0",children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs(Ei,{className:"p-6 pb-4 border-b",children:[a.jsxs(_i,{className:"flex items-center gap-2",children:[a.jsx(Od,{className:"h-5 w-5"}),i.name||"Character Build"]}),a.jsx(Hx,{children:"Quick reference and editing for your character build"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[a.jsx(aS,{name:e.name,notes:e.notes,onNameChange:s,onNotesChange:r,className:"mb-0"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(hC,{}),a.jsx(Kk,{}),a.jsx(T_,{}),a.jsx(pC,{})]}),a.jsx(cS,{showControls:!0,showSummary:!0,compact:!1}),a.jsx(C_,{}),a.jsx(lC,{navigate:o}),a.jsx(iS,{build:e})]}),a.jsxs("div",{className:"p-6 pt-4 border-t bg-muted/50",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(G,{onClick:f,className:"flex-1",children:[a.jsx(uo,{className:"w-4 h-4 mr-2"}),"Full Build Page"]}),a.jsxs(G,{variant:"outline",onClick:u,children:[a.jsx(v4,{className:"w-4 h-4 mr-2"}),"Share"]}),a.jsxs(G,{variant:"destructive",onClick:d,children:[a.jsx(h3,{className:"w-4 h-4 mr-2"}),"Reset"]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Quick Navigation:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[!e.race&&a.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("race"),children:"Race"}),!e.stone&&a.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("birthsign"),children:"Birthsign"}),e.traits.regular.length===0&&e.traits.bonus.length===0&&a.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("traits"),children:"Traits"}),!e.religion&&a.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("religion"),children:"Religion"}),e.skills.major.length===0&&e.skills.minor.length===0&&a.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("skills"),children:"Skills"}),e.destinyPath.length===0&&a.jsx(G,{variant:"outline",size:"sm",onClick:()=>m("destiny"),children:"Destiny"})]})]})]})]})})]})})},yw=e=>btoa(unescape(encodeURIComponent(JSON.stringify(e)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),bw=e=>{try{const t=e.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(escape(atob(t))))}catch{return null}},sG=()=>{const e=Fr(s=>s.build),t=Fr(s=>s.setBuild),n=g.useRef(!1);g.useEffect(()=>{if(n.current)return;const s=window.location.hash,[r,o]=s.split("?"),l=new URLSearchParams(o||"").get("b");if(console.log("URL Sync - Hydrating from URL:",{hash:s,encodedBuild:l}),l){const c=bw(l);console.log("URL Sync - Decoded build:",c),(c==null?void 0:c.v)===1?(console.log("URL Sync - Setting build from URL"),t(c)):console.warn("Invalid or outdated build schema in URL")}else console.log("URL Sync - No build parameter found in URL");n.current=!0},[t]),g.useEffect(()=>{const s={v:1,name:"Test",perks:{selected:{archery:["archery_01"]},ranks:{archery_01:1}}},r=yw(s),o=bw(r);console.log("URL Sync - Test encoding/decoding:",{testBuild:s,encoded:r,decoded:o,matches:JSON.stringify(s)===JSON.stringify(o)})},[]),g.useEffect(()=>{if(!n.current)return;console.log("URL Sync - Build state changed:",e);const s=yw(e),r=window.location.hash,[o,i]=r.split("?"),l=new URLSearchParams(i||"");l.set("b",s);const c=`${o}?${l.toString()}`;console.log("URL Sync - Updating URL:",c),window.history.replaceState(null,"",c)},[e.v,e.name,e.race,e.stone,e.religion,e.traits,e.skills,e.perks,e.equipment,e.destinyPath])},M_=g.forwardRef(({className:e,collapsed:t,...n},s)=>a.jsx("aside",{ref:s,"data-collapsed":t?"":void 0,className:H("flex flex-col bg-card border-r border-skyrim-gold/20 h-[calc(100vh-3rem)] sticky top-12 transition-all duration-300 ease-in-out",t?"w-0 overflow-hidden opacity-0":"w-64 opacity-100",e),...n}));M_.displayName="Sidebar";const R_=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:H("flex-1 flex flex-col justify-start overflow-y-auto px-2 py-2",e),...t}));R_.displayName="SidebarContent";const D_=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:H("mb-2",e),...t}));D_.displayName="SidebarGroup";const z_=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:H("px-3 py-2 border-b border-skyrim-gold/20 flex items-center gap-2 min-h-[48px]",e),...t}));z_.displayName="SidebarHeader";const L_=g.forwardRef(({className:e,...t},n)=>a.jsx("ul",{ref:n,className:H("flex flex-col gap-0.5 list-none p-0 m-0",e),...t}));L_.displayName="SidebarMenu";const $_=g.forwardRef(({className:e,asChild:t,isActive:n,...s},r)=>{const o=t?"span":"button";return a.jsx(o,{ref:r,"data-active":n?"":void 0,className:H("group flex items-center w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out","hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] hover:border-l-4","active:scale-[0.98] active:bg-skyrim-gold/25","cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",n?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent",e),tabIndex:0,...s})});$_.displayName="SidebarMenuButton";const P_=g.forwardRef(({className:e,...t},n)=>a.jsx("li",{ref:n,className:H("relative flex items-stretch",e),...t}));P_.displayName="SidebarMenuItem";const O_=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:e,...t}));O_.displayName="SidebarRail";function rG(e={}){const{autoLoad:t=!0,refreshOnMount:n=!1}=e,{data:s,loading:r,error:o,load:i}=nr(),l=g.useCallback(async()=>{t&&s.length===0&&await i()},[t,s.length,i]),c=g.useCallback(async()=>{await i()},[i]),u=g.useCallback(()=>{},[]);g.useEffect(()=>{t&&s.length===0&&l()},[t,s.length,l]),g.useEffect(()=>{n&&c()},[n,c]);const d=s.length,f=[...new Set(s.map(N=>N.category).filter(Boolean))],m=[...new Set(s.flatMap(N=>N.effects.map(S=>S.name)))],h=[...new Set(s.flatMap(N=>N.ingredients))],p=new Date().toISOString(),v=s.length>0?{recipes:s,totalCount:d,categories:f,effects:m,ingredients:h,lastUpdated:p}:null,b=g.useCallback(N=>nr.getState().getByName(N),[]),x=g.useCallback(N=>nr.getState().getByCategory(N),[]),y=g.useCallback(N=>nr.getState().getByDifficulty(N),[]),w=g.useCallback(N=>nr.getState().getByIngredient(N),[]),j=g.useCallback(N=>nr.getState().getByEffect(N),[]);return{recipes:s,recipeData:v,loading:r,error:o,totalCount:d,categories:f,effects:m,ingredients:h,lastUpdated:p,loadRecipes:l,refresh:c,clearError:u,getRecipeByName:b,getRecipesByCategory:x,getRecipesByDifficulty:y,getRecipesByIngredient:w,getRecipesByEffect:j}}function aG(e,t={}){const{initialFilters:n={},enableSearch:s=!0,enableSorting:r=!0}=t,o=Array.isArray(e)?e:[],[i,l]=g.useState({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null,...n}),[c,u]=g.useState([]),[d,f]=g.useState("name"),[m,h]=g.useState("asc"),p=g.useCallback(M=>{c.some(R=>R.value===M.value&&R.category===M.category)||u(R=>[...R,M])},[c]),v=g.useCallback(M=>{u(R=>R.filter(B=>B.id!==M))},[]),b=g.useCallback(()=>{u([])},[]),x=g.useCallback(M=>{l(R=>({...R,searchTerm:M}))},[]),y=g.useCallback(M=>{l(R=>({...R,categories:M}))},[]),w=g.useCallback(M=>{l(R=>({...R,effects:M}))},[]),j=g.useCallback(M=>{l(R=>({...R,ingredients:M}))},[]),N=g.useCallback(M=>{l(R=>({...R,difficulties:M}))},[]),S=g.useCallback(M=>{l(R=>({...R,hasEffects:M}))},[]),k=g.useCallback(M=>{l(R=>({...R,isComplex:M}))},[]),E=g.useCallback((M,R)=>{l(B=>({...B,minIngredientCount:M,maxIngredientCount:R}))},[]),C=g.useCallback((M,R)=>{l(B=>({...B,minMagnitude:M,maxMagnitude:R}))},[]),_=g.useCallback(()=>{l({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null}),u([])},[]),P=g.useCallback(()=>{l(M=>({...M,searchTerm:""}))},[]),O=g.useCallback(M=>{h(M)},[]),$=g.useCallback(()=>{h(M=>M==="asc"?"desc":"asc")},[]),T=g.useMemo(()=>{let M=Ge.applyFilters(o,i);if(c.length>0){const R=c.reduce((B,U)=>{switch(U.category){case"categories":B.categories.push(U.value);break;case"effects":B.effects.push(U.value);break;case"ingredients":B.ingredients.push(U.value);break;case"difficulties":B.difficulties.push(U.value);break}return B},{categories:[],effects:[],ingredients:[],difficulties:[]});R.categories.length>0&&(M=Ge.filterByCategories(M,R.categories)),R.effects.length>0&&(M=Ge.filterByEffects(M,R.effects)),R.ingredients.length>0&&(M=Ge.filterByIngredients(M,R.ingredients)),R.difficulties.length>0&&(M=Ge.filterByDifficulties(M,R.difficulties))}return r&&(M=Ge.sort(M,d,m)),M},[o,i,c,r,d,m]),z=g.useMemo(()=>!s||!i.searchTerm.trim()?[]:Ge.search(o,i.searchTerm),[o,i.searchTerm,s]),A=g.useMemo(()=>i.searchTerm.trim()!==""||i.categories.length>0||i.effects.length>0||i.ingredients.length>0||i.difficulties.length>0||i.hasEffects!==null||i.isComplex!==null||i.minIngredientCount!==null||i.maxIngredientCount!==null||i.minMagnitude!==null||i.maxMagnitude!==null||c.length>0,[i,c]),D=g.useMemo(()=>{let M=0;return i.searchTerm.trim()&&M++,i.categories.length>0&&(M+=i.categories.length),i.effects.length>0&&(M+=i.effects.length),i.ingredients.length>0&&(M+=i.ingredients.length),i.difficulties.length>0&&(M+=i.difficulties.length),i.hasEffects!==null&&M++,i.isComplex!==null&&M++,(i.minIngredientCount!==null||i.maxIngredientCount!==null)&&M++,(i.minMagnitude!==null||i.maxMagnitude!==null)&&M++,M+=c.length,M},[i,c]);return{filters:i,searchTerm:i.searchTerm,selectedTags:c,setSelectedTags:u,addTagFilter:p,removeTagFilter:v,clearAllTags:b,filteredRecipes:T,searchResults:z,hasActiveFilters:A,filterCount:D,setSearchTerm:x,setCategories:y,setEffects:w,setIngredients:j,setDifficulties:N,setHasEffects:S,setIsComplex:k,setIngredientCountRange:E,setMagnitudeRange:C,clearFilters:_,clearSearch:P,sortBy:d,sortOrder:m,setSortBy:f,setSortOrder:O,toggleSortOrder:$}}function oG(e,t={}){const{enableStatistics:n=!0,enableGrouping:s=!0}=t,r=Array.isArray(e)?e:[],o=g.useMemo(()=>n?Ge.getStatistics(r):{totalRecipes:0,recipesByCategory:{},recipesByDifficulty:{},recipesByEffect:{},averageIngredientCount:0,averageEffectCount:0,mostCommonIngredients:[],mostCommonEffects:[]},[r,n]),i=g.useMemo(()=>{if(!s)return{};const w={};return r.forEach(j=>{const N=j.category||"Uncategorized";w[N]||(w[N]=[]),w[N].push(j)}),w},[r,s]),l=g.useMemo(()=>{if(!s)return{};const w={};return r.forEach(j=>{const N=j.difficulty;w[N]||(w[N]=[]),w[N].push(j)}),w},[r,s]),c=g.useMemo(()=>{if(!s)return{};const w={};return r.forEach(j=>{j.effects.forEach(N=>{w[N.name]||(w[N.name]=[]),w[N.name].push(j)})}),w},[r,s]),u=g.useMemo(()=>{if(!s)return{};const w={};return r.forEach(j=>{j.ingredients.forEach(N=>{w[N]||(w[N]=[]),w[N].push(j)})}),w},[r,s]),d=g.useMemo(()=>Ge.getUniqueCategories(r),[r]),f=g.useMemo(()=>Ge.getUniqueDifficulties(r),[r]),m=g.useMemo(()=>Ge.getUniqueEffects(r),[r]),h=g.useMemo(()=>Ge.getUniqueIngredients(r),[r]),p=g.useMemo(()=>[{name:"Recipe Categories",options:d},{name:"Effects",options:m},{name:"Ingredients",options:h},{name:"Difficulty",options:f}],[d,m,h,f]),v=g.useMemo(()=>(w,j)=>{const N=w.ingredientCount-j.ingredientCount,S=w.effectCount-j.effectCount,k=w.totalMagnitude-j.totalMagnitude,E=w.maxDuration-j.maxDuration,C=new Set(w.ingredients),_=new Set(j.ingredients),P=[...C].filter(R=>_.has(R)),O=[...C].filter(R=>!_.has(R)),$=[..._].filter(R=>!C.has(R)),T=new Set(w.effects.map(R=>R.name)),z=new Set(j.effects.map(R=>R.name)),A=[...T].filter(R=>z.has(R)),D=[...T].filter(R=>!z.has(R)),M=[...z].filter(R=>!T.has(R));return{recipe1:w,recipe2:j,differences:{ingredientCount:{difference:N,percentage:j.ingredientCount>0?N/j.ingredientCount*100:0},effectCount:{difference:S,percentage:j.effectCount>0?S/j.effectCount*100:0},magnitude:{difference:k,percentage:j.totalMagnitude>0?k/j.totalMagnitude*100:0},duration:{difference:E,percentage:j.maxDuration>0?E/j.maxDuration*100:0},ingredients:{added:O,removed:$,common:P},effects:{added:D,removed:M,common:A}}}},[]),b=g.useMemo(()=>w=>{if(w.ingredientCount===0)return 0;const j=w.totalMagnitude*w.maxDuration,N=w.ingredientCount;return j/N},[]),x=g.useMemo(()=>w=>{let j=0;switch(j+=w.ingredientCount*.3,j+=w.effectCount*.4,j+=w.effects.reduce((N,S)=>N+S.magnitude*S.duration*.1,0),w.difficulty){case"Simple":j+=1;break;case"Moderate":j+=2;break;case"Complex":j+=3;break}return Math.round(j*10)/10},[]),y=g.useMemo(()=>w=>Ge.getEffectComparisons(w,r),[r]);return{statistics:o,recipesByCategory:i,recipesByDifficulty:l,recipesByEffect:c,recipesByIngredient:u,availableCategories:d,availableDifficulties:f,availableEffects:m,availableIngredients:h,searchCategories:p,compareRecipes:v,getRecipeEfficiency:b,getRecipeComplexity:x,getEffectComparisons:y}}function rv({recipe:e,variant:t="default",onClick:n,isSelected:s=!1,showEffects:r=!0,showIngredients:o=!0,effectComparisons:i=[]}){const l=()=>{n==null||n()},c=b=>typeof b=="string"?b:b&&typeof b=="object"?b.item?b.item:b.name?b.name:b.label?b.label:b.id?b.id:"Unknown Ingredient":String(b||""),u=b=>typeof b=="string"?b:typeof b=="number"?b.toString():b&&typeof b=="object"?b.name?b.name:b.label?b.label:b.id?b.id:b.item?b.item:b.category?b.category:c(b):String(b||""),d=b=>a.jsx(na,{className:"h-4 w-4 text-green-500"}),f=b=>{if(typeof b=="string")return{name:b,count:1};if(b&&typeof b=="object"){const x=c(b),y=b.count||b.amount||1;return{name:x,count:y}}return{name:String(b||""),count:1}},m=b=>u(b.description||""),h=()=>a.jsxs(xe,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[a.jsx(_e,{className:"pb-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-medium truncate",children:u(e.name)}),a.jsx("div",{className:"flex gap-1",children:e.category&&a.jsx(K,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),a.jsx(ve,{className:"pt-0",children:a.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.ingredientCount," ingredients • ",e.effectCount," effects"]})})]}),p=()=>a.jsxs(xe,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[a.jsx(_e,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium truncate",children:u(e.name)}),e.description&&a.jsx(De,{text:u(e.description),className:"text-sm text-muted-foreground mt-1 line-clamp-2",as:"p"})]}),a.jsx("div",{className:"flex flex-col gap-1 ml-2",children:e.category&&a.jsx(K,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),a.jsx(ve,{className:"pt-0",children:a.jsxs("div",{className:"space-y-2",children:[o&&e.ingredients.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:["Ingredients (",e.ingredientCount,")"]}),a.jsx("div",{className:"space-y-1",children:e.ingredients.map((b,x)=>{const{name:y,count:w}=f(b);return a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:y}),a.jsxs("span",{className:"font-medium",children:["×",w]})]},x)})})]}),r&&e.effects.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:["Effects (",e.effectCount,")"]}),a.jsx("div",{className:"space-y-2",children:e.effects.map((b,x)=>a.jsx("div",{className:"p-2 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-2",children:[d(),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-xs mb-1",children:u(b.name)}),a.jsx("div",{className:"text-xs text-muted-foreground",children:a.jsx(De,{text:m(b),className:"text-xs text-muted-foreground"})})]})]})},x))})]}),!1]})})]}),v=()=>a.jsxs(xe,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[a.jsx(_e,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium",children:u(e.name)}),e.description&&a.jsx(De,{text:u(e.description),className:"text-sm text-muted-foreground mt-1",as:"p"})]}),a.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[e.category&&a.jsx(K,{variant:"secondary",className:"text-xs",children:u(e.category)}),e.type&&a.jsx(K,{variant:"outline",className:"text-xs",children:u(e.type)})]})]})}),a.jsx(ve,{className:"pt-0",children:a.jsxs("div",{className:"space-y-3",children:[o&&e.ingredients.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Ingredients"}),a.jsx("div",{className:"space-y-2",children:e.ingredients.map((b,x)=>{const{name:y,count:w}=f(b);return a.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-lg",children:[a.jsx("span",{className:"text-sm",children:y}),a.jsxs("span",{className:"font-medium text-sm",children:["×",w]})]},x)})})]}),r&&e.effects.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-3",children:"Effects"}),a.jsx("div",{className:"space-y-3",children:e.effects.map((b,x)=>a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[d(),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-sm mb-1",children:u(b.name)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:a.jsx(De,{text:m(b),className:"text-sm text-muted-foreground"})})]})]})},x))})]}),!1,a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t",children:[a.jsxs("span",{children:["Total Magnitude: ",e.totalMagnitude]}),a.jsxs("span",{children:["Max Duration: ",e.maxDuration,"s"]})]})]})})]});switch(t){case"compact":return h();case"detailed":return v();default:return p()}}function iG({recipes:e,variant:t="default",columns:n=3,onRecipeClick:s,selectedRecipes:r=[],showEffects:o=!0,showIngredients:i=!0,className:l,getEffectComparisons:c}){const u=()=>{const f="grid gap-4";switch(n){case 1:return`${f} grid-cols-1`;case 2:return`${f} grid-cols-1 sm:grid-cols-2`;case 3:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`;case 4:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4`;default:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`}},d=f=>{s==null||s(f)};return e.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"No recipes found"})})}):a.jsx("div",{className:u(),children:e.map(f=>a.jsx(rv,{recipe:f,variant:t,onClick:()=>d(f),isSelected:r.includes(f.name),showEffects:o,showIngredients:i,effectComparisons:(c==null?void 0:c(f))||[]},f.name))})}function lG({recipes:e,variant:t="default",onRecipeClick:n,selectedRecipes:s=[],showEffects:r=!0,showIngredients:o=!0,className:i,getEffectComparisons:l}){const c=u=>{n==null||n(u)};return e.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"No recipes found"})})}):a.jsx("div",{className:`space-y-3 ${i||""}`,children:e.map(u=>a.jsx(rv,{recipe:u,variant:t,onClick:()=>c(u),isSelected:s.includes(u.name),showEffects:r,showIngredients:o,effectComparisons:(l==null?void 0:l(u))||[]},u.name))})}function cG({currentMode:e,onModeChange:t,className:n}){return a.jsxs("div",{className:`flex border rounded-lg p-1 bg-muted ${n||""}`,children:[a.jsx(G,{variant:e==="list"?"default":"ghost",size:"sm",onClick:()=>t("list"),className:"h-8 px-3",title:"List view",children:a.jsx(fo,{className:"h-4 w-4"})}),a.jsx(G,{variant:e==="grid"?"default":"ghost",size:"sm",onClick:()=>t("grid"),className:"h-8 px-3",title:"Grid view",children:a.jsx(Ki,{className:"h-4 w-4"})})]})}function uG({statistics:e,className:t}){const{totalRecipes:n,foodRecipes:s,alcoholRecipes:r,recipesByCategory:o,recipesByDifficulty:i,averageIngredientCount:l,averageEffectCount:c,averageMagnitude:u,averageDuration:d,topEffects:f,topIngredients:m}=e,h=[{title:"Total Recipes",value:n,icon:a4,description:"All available recipes",color:"text-blue-600"},{title:"Food Recipes",value:s,icon:k3,description:"Culinary recipes",color:"text-green-600"},{title:"Alcohol Recipes",value:r,icon:E3,description:"Beverage recipes",color:"text-purple-600"},{title:"Avg Ingredients",value:l.toFixed(1),icon:Pd,description:"Per recipe",color:"text-orange-600"},{title:"Avg Effects",value:c.toFixed(1),icon:zs,description:"Per recipe",color:"text-yellow-600"},{title:"Avg Magnitude",value:u.toFixed(1),icon:kg,description:"Effect strength",color:"text-red-600"}];return a.jsxs("div",{className:`space-y-6 ${t||""}`,children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(p=>{const v=p.icon;return a.jsxs(xe,{children:[a.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Re,{className:"text-sm font-medium",children:p.title}),a.jsx(v,{className:`h-4 w-4 ${p.color}`})]}),a.jsxs(ve,{children:[a.jsx("div",{className:"text-2xl font-bold",children:p.value}),a.jsx("p",{className:"text-xs text-muted-foreground",children:p.description})]})]},p.title)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(xe,{children:[a.jsx(_e,{children:a.jsxs(Re,{className:"flex items-center gap-2",children:[a.jsx(Hc,{className:"h-4 w-4"}),"Recipe Categories"]})}),a.jsx(ve,{children:a.jsxs("div",{className:"space-y-2",children:[Object.entries(o).sort(([,p],[,v])=>v-p).slice(0,8).map(([p,v])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:p}),a.jsx(K,{variant:"secondary",className:"text-xs",children:v})]},p)),Object.keys(o).length>8&&a.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["+",Object.keys(o).length-8," more categories"]})]})})]}),a.jsxs(xe,{children:[a.jsx(_e,{children:a.jsxs(Re,{className:"flex items-center gap-2",children:[a.jsx(ON,{className:"h-4 w-4"}),"Recipe Difficulties"]})}),a.jsx(ve,{children:a.jsx("div",{className:"space-y-2",children:Object.entries(i).sort(([,p],[,v])=>v-p).map(([p,v])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:p}),a.jsx(K,{variant:p==="Simple"?"default":p==="Moderate"?"secondary":"destructive",className:"text-xs",children:v})]},p))})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(xe,{children:[a.jsx(_e,{children:a.jsxs(Re,{className:"flex items-center gap-2",children:[a.jsx(zs,{className:"h-4 w-4"}),"Most Common Effects"]})}),a.jsx(ve,{children:a.jsx("div",{className:"space-y-2",children:f.slice(0,8).map((p,v)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:p.name}),a.jsxs(K,{variant:"outline",className:"text-xs",children:[p.count," recipes"]})]},p.name))})})]}),a.jsxs(xe,{children:[a.jsx(_e,{children:a.jsxs(Re,{className:"flex items-center gap-2",children:[a.jsx(Pd,{className:"h-4 w-4"}),"Most Common Ingredients"]})}),a.jsx(ve,{children:a.jsx("div",{className:"space-y-2",children:m.slice(0,8).map((p,v)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:p.name}),a.jsxs(K,{variant:"outline",className:"text-xs",children:[p.count," recipes"]})]},p.name))})})]})]})]})}function dG({recipes:e,className:t}){const n=L.useMemo(()=>{const l=new Map;return e.forEach(c=>{c.effects.forEach(u=>{const d=u.name||"Unknown Effect",f=u.magnitude||0,m=u.duration||0;l.has(d)||l.set(d,{name:d,count:0,averageMagnitude:0,averageDuration:0,totalMagnitude:0,totalDuration:0,recipes:[]});const h=l.get(d);h.count++,h.totalMagnitude+=f,h.totalDuration+=m,h.recipes.includes(c.name)||h.recipes.push(c.name)})}),l.forEach(c=>{c.averageMagnitude=c.totalMagnitude/c.count,c.averageDuration=c.totalDuration/c.count}),Array.from(l.values()).sort((c,u)=>u.count-c.count)},[e]),s=L.useMemo(()=>{if(n.length===0)return{magnitude:0,duration:0};const l=n.reduce((u,d)=>u+d.averageMagnitude,0),c=n.reduce((u,d)=>u+d.averageDuration,0);return{magnitude:l/n.length,duration:c/n.length}},[n]),r=(l,c)=>{const d=(l-c)/c*100;return d>20?"text-green-600":d>10?"text-green-500":d<-20?"text-red-600":d<-10?"text-red-500":"text-muted-foreground"},o=(l,c)=>{const d=(l-c)/c*100;return d>10?a.jsx(kg,{className:"h-4 w-4 text-green-500"}):d<-10?a.jsx(by,{className:"h-4 w-4 text-red-500"}):null},i=(l,c)=>{const u=l-c,d=u/c*100,f=u>=0?"+":"";return`${f}${u.toFixed(1)} (${f}${d.toFixed(1)}%)`};return n.length===0?a.jsxs(xe,{className:t,children:[a.jsx(_e,{children:a.jsx(Re,{className:"text-lg",children:"Food Effect Meta Analysis"})}),a.jsx(ve,{children:a.jsx("p",{className:"text-muted-foreground",children:"No effects found to analyze."})})]}):a.jsxs(xe,{className:t,children:[a.jsxs(_e,{children:[a.jsx(Re,{className:"text-lg",children:"Food Effect Meta Analysis"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Analysis of ",n.length," unique effects across ",e.length," recipes"]})]}),a.jsx(ve,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:s.magnitude.toFixed(1)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Magnitude"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold",children:[s.duration.toFixed(1),"s"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Duration"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"font-medium text-sm",children:"Effect Analysis"}),n.slice(0,10).map(l=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsx("div",{className:"flex items-start justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{className:"font-medium text-sm",children:l.name}),a.jsxs(K,{variant:"secondary",className:"text-xs",children:[l.count," recipes"]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Magnitude:"}),a.jsx("span",{className:"font-medium",children:l.averageMagnitude.toFixed(1)}),o(l.averageMagnitude,s.magnitude)]}),a.jsx("div",{className:H("text-xs",r(l.averageMagnitude,s.magnitude)),children:i(l.averageMagnitude,s.magnitude)})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),a.jsxs("span",{className:"font-medium",children:[l.averageDuration.toFixed(1),"s"]}),o(l.averageDuration,s.duration)]}),a.jsx("div",{className:H("text-xs",r(l.averageDuration,s.duration)),children:i(l.averageDuration,s.duration)})]})]}),l.recipes.length>0&&a.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:a.jsxs("div",{className:"text-xs text-muted-foreground mb-1",children:["Found in: ",l.recipes.slice(0,3).join(", "),l.recipes.length>3&&` +${l.recipes.length-3} more`]})})]},l.name)),n.length>10&&a.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing top 10 effects of ",n.length," total"]})]}),a.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Legend"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(kg,{className:"h-3 w-3 text-green-500"}),a.jsx("span",{children:"Above average (+10%+)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(by,{className:"h-3 w-3 text-red-500"}),a.jsx("span",{children:"Below average (-10%+)"})]})]})]})]})})]})}function fG(e,t){return{filteredRecipes:g.useMemo(()=>{if(!t.trim())return e;const r=t.toLowerCase().trim().split(/\s+/);return e.filter(o=>{const i=[o.name,o.output,o.description||"",...o.ingredients.map(l=>typeof l=="string"?l:l&&typeof l=="object"&&(l.name||l.label||l.id)||String(l)),...o.effects.map(l=>l.name),...o.effects.map(l=>l.description),o.category||"",o.difficulty||"",o.type||"",...o.tags].join(" ").toLowerCase();return r.every(l=>i.includes(l))})},[e,t]),searchQuery:t.trim()}}function mG(){const{recipes:e,loading:t,error:n}=rG(),{filteredRecipes:s}=aG(e),{statistics:r,availableCategories:o,availableEffects:i,availableIngredients:l,getEffectComparisons:c}=oG(e),[u,d]=g.useState("grid"),m=(()=>{try{if(!e||e.length===0)return console.warn("No recipes loaded for search categories"),[];const N=l||[],S=i||[],k=o||[];return console.log("Using pre-computed ingredients:",N.slice(0,10),`(total: ${N.length})`),[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, ingredients, effects, or description...",options:[]},{id:"ingredients",name:"Ingredients",placeholder:"Filter by ingredient...",options:N.map(E=>({id:`ingredient-${E}`,label:E,value:E,category:"Ingredients",description:`Recipes with ${E}`}))},{id:"effects",name:"Effects",placeholder:"Filter by effect...",options:S.map(E=>({id:`effect-${E}`,label:E,value:E,category:"Effects",description:`Recipes with ${E} effect`}))},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:k.map(E=>({id:`category-${E}`,label:E,value:E,category:"Categories",description:`${E} recipes`}))}]}catch(N){return console.error("Error generating search categories:",N),[]}})(),[h,p]=g.useState([]),v=N=>{let S;typeof N=="string"?S={id:`custom-${N}`,label:N,value:N,category:"Fuzzy Search"}:S={id:`${N.category}-${N.id}`,label:N.label,value:N.value,category:N.category},h.some(k=>k.value===S.value&&k.category===S.category)||p(k=>[...k,S])},b=N=>{p(S=>S.filter(k=>k.id!==N))},x=s.filter(N=>h.length===0?!0:h.every(S=>{switch(S.category){case"Fuzzy Search":return!0;case"Categories":return N.category===S.value;case"Ingredients":return N.ingredients.some(k=>typeof k=="string"?k===S.value:k&&typeof k=="object"?k.item===S.value||k.name===S.value||k.label===S.value||k.id===S.value:!1);case"Effects":return N.effects.some(k=>k.name===S.value);default:return!0}})),y=h.filter(N=>N.category==="Fuzzy Search").map(N=>N.value).join(" "),{filteredRecipes:w}=fG(x,y),j=N=>{console.log("Recipe clicked:",N.name)};return t?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading recipes..."})]})}):n?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-2",children:"Error loading recipes"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Cookbook"}),a.jsxs("p",{className:"text-muted-foreground",children:["Browse and search through ",r.totalRecipes," recipes"]})]})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(ba,{categories:m,onSelect:v,onCustomSearch:v})}),a.jsx(cG,{currentMode:u,onModeChange:d})]}),a.jsx("div",{className:"my-4",children:h.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>p([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Bt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),h.map(N=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>b(N.id),title:"Click to remove",children:[N.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},N.id))]})}),a.jsxs(il,{defaultValue:"recipes",className:"w-full",children:[a.jsxs(ll,{className:"mb-4",children:[a.jsx(an,{value:"recipes",children:"Recipes"}),a.jsx(an,{value:"statistics",children:"Statistics"}),a.jsx(an,{value:"meta",children:"Meta Analysis"})]}),a.jsx(wn,{value:"recipes",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-xl font-semibold",children:["Recipes (",w.length,")"]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",w.length," of ",e.length," recipes"]})]}),u==="grid"&&a.jsx(iG,{recipes:w,variant:"default",columns:3,onRecipeClick:j,showEffects:!0,showIngredients:!0,getEffectComparisons:c}),u==="list"&&a.jsx(lG,{recipes:w,variant:"default",onRecipeClick:j,showEffects:!0,showIngredients:!0,getEffectComparisons:c})]})}),a.jsx(wn,{value:"statistics",children:a.jsx(uG,{statistics:r})}),a.jsx(wn,{value:"meta",children:a.jsx(dG,{recipes:e})})]})]})}function hG(){return a.jsx(Fn,{title:"Cookbook Reference",description:"Browse and search all available recipes. Find the perfect dish for your character's needs.",children:a.jsx(mG,{})})}function gG({path:e,className:t=""}){return e.length===0?a.jsxs("div",{className:`space-y-2 ${t}`,children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Selected Path"}),a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})})]}):a.jsxs("div",{className:`space-y-2 ${t}`,children:[a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Selected Path (",e.length," nodes)"]}),a.jsx("div",{className:"space-y-2",children:e.map((n,s)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium",children:s+1}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-sm",children:n.name}),n.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:n.description})]})]}),a.jsx(K,{variant:"secondary",className:s===e.length-1?"bg-yellow-600 text-yellow-50":"bg-blue-500",children:s===e.length-1?"Current":"Selected"})]},n.id))})]})}function pG({stepIndex:e,totalSteps:t,title:n,onBack:s,onOverview:r,onClear:o,canBack:i}){const l=t>0?`${e+1} of ${t}`:"Start";return a.jsx("header",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[a.jsx("div",{className:"flex items-center space-x-2",children:i&&a.jsxs(G,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0",children:[a.jsx(wx,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Go back"})]})}),a.jsxs("div",{className:"flex flex-col items-center flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:n}),a.jsx("div",{className:"text-xs text-muted-foreground",children:l})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0",children:[a.jsx(HN,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Path overview"})]}),a.jsxs(Kc,{children:[a.jsx(Qc,{asChild:!0,children:a.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[a.jsx(j4,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"More options"})]})}),a.jsx(fl,{align:"end",children:a.jsx(ss,{onClick:o,children:"Clear Path"})})]})]})]})})}function xG({step:e,onChange:t}){return a.jsxs(xe,{className:"border-primary/20 bg-primary/5 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-primary"}),a.jsx(_e,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),a.jsx(Re,{className:"text-base font-medium text-primary",children:e.name})]}),a.jsxs(G,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:[a.jsx(K4,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Change step"})]})]})}),a.jsxs(ve,{className:"pt-0",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e.summary}),e.meta.tags&&e.meta.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:e.meta.tags.map(n=>a.jsx(K,{variant:"secondary",className:"text-xs",children:n},n))}),e.meta.levelRequirement&&a.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Level ",e.meta.levelRequirement," required"]})]})]})}function vG({choice:e,onOpenDetails:t,onSelect:n}){return a.jsxs(xe,{className:"hover:shadow-md transition-shadow border-2 border-dashed border-muted hover:border-primary/50",children:[a.jsx(_e,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-muted-foreground/30 rounded-full"}),a.jsx(Re,{className:"text-base font-medium",children:e.name})]}),a.jsxs(G,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:[a.jsx(Ni,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"View details"})]})]})}),a.jsxs(ve,{className:"pt-0",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:e.description||"No description available"}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map(s=>a.jsx(K,{variant:"outline",className:"text-xs",children:s},s))}),e.levelRequirement&&a.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:["Level ",e.levelRequirement," required"]}),a.jsxs(G,{onClick:n,className:"w-full",size:"sm",children:[a.jsx(cc,{className:"h-4 w-4 mr-2"}),"Select"]})]})]})}function yG({canBack:e,canNext:t,onBack:n,onOverview:s}){return a.jsx("div",{className:"sticky bottom-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-t",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[a.jsxs(G,{variant:"outline",size:"sm",onClick:n,disabled:!e,className:"flex items-center space-x-2",children:[a.jsx(wx,{className:"h-4 w-4"}),a.jsx("span",{children:"Back"})]}),a.jsx("div",{className:"flex-1 flex justify-center",children:a.jsxs(G,{variant:"ghost",size:"sm",onClick:s,className:"flex items-center space-x-2",children:[a.jsx(HN,{className:"h-4 w-4"}),a.jsx("span",{children:"Path Overview"})]})}),a.jsx(G,{variant:"outline",size:"sm",disabled:!t,className:"flex items-center space-x-2 opacity-50",children:a.jsx("span",{children:"Next"})})]})})}function bG({open:e,steps:t,currentIndex:n,onJump:s,onClear:r,onClose:o}){return t.length===0?a.jsx(Ci,{open:e,onOpenChange:o,children:a.jsxs(Ka,{side:"bottom",className:"h-[80vh]",children:[a.jsx(Ei,{children:a.jsx(_i,{children:"Path Overview"})}),a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"No destiny path selected yet"}),a.jsx(G,{onClick:o,children:"Start Building"})]})]})}):a.jsx(Ci,{open:e,onOpenChange:o,children:a.jsxs(Ka,{side:"bottom",className:"h-[80vh]",children:[a.jsx(Ei,{className:"flex flex-row items-center justify-between px-0",children:a.jsx(_i,{className:"flex-1 min-w-0",children:"Path Overview"})}),a.jsx(eo,{className:"flex-1 mt-6",children:a.jsx("div",{className:"space-y-2",children:t.map((i,l)=>a.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${l===n?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>s(l),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(K,{variant:l===n?"default":"secondary",children:l+1}),a.jsx("h3",{className:"font-medium text-sm",children:i.name})]}),a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:i.summary}),i.meta.tags&&i.meta.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[i.meta.tags.slice(0,3).map(c=>a.jsx(K,{variant:"outline",className:"text-xs",children:c},c)),i.meta.tags.length>3&&a.jsxs(K,{variant:"outline",className:"text-xs",children:["+",i.meta.tags.length-3]})]})]}),l===n&&a.jsx("div",{className:"ml-2",children:a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})})]})},i.id))})}),a.jsxs("div",{className:"mt-4 pt-4 border-t space-y-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground text-center",children:"Tap any step to jump to that point in your path"}),a.jsxs(G,{variant:"outline",size:"sm",onClick:r,className:"w-full text-destructive hover:text-destructive border-destructive/20 hover:border-destructive/40",children:[a.jsx(gr,{className:"h-4 w-4 mr-2"}),"Restart Path"]})]})]})})}function wG({open:e,choice:t,onSelect:n,onClose:s}){return t?a.jsx(Ci,{open:e,onOpenChange:s,children:a.jsxs(Ka,{side:"bottom",className:"h-[90vh]",children:[a.jsxs(Ei,{className:"flex flex-row items-center justify-between",children:[a.jsx(_i,{className:"text-left",children:t.name}),a.jsx(G,{variant:"ghost",size:"sm",onClick:s,children:a.jsx(Bt,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto mt-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t.description||"No description available"})]}),t.tags&&t.tags.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(r=>a.jsx(K,{variant:"secondary",className:"text-xs",children:r},r))})]}),t.levelRequirement&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Requirements"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Level ",t.levelRequirement," required"]})]}),t.prerequisites&&t.prerequisites.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Prerequisites"}),a.jsx("div",{className:"space-y-1",children:t.prerequisites.map(r=>a.jsxs("div",{className:"text-sm text-muted-foreground",children:["• ",r]},r))})]}),t.lore&&a.jsxs(a.Fragment,{children:[a.jsx(Vr,{}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Hc,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("h3",{className:"font-medium text-sm",children:"Lore"})]}),a.jsx("p",{className:"text-sm text-muted-foreground italic",children:t.lore})]})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[a.jsxs(G,{onClick:n,className:"w-full",size:"lg",children:[a.jsx(cc,{className:"h-4 w-4 mr-2"}),"Select This Destiny"]}),a.jsx(G,{variant:"outline",onClick:s,className:"w-full",children:"Close"})]})]})}):null}function jG({steps:e,onRestart:t,onShare:n}){return a.jsxs(xe,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/20",children:[a.jsx(_e,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ld,{className:"h-5 w-5 text-green-600"}),a.jsx(Re,{className:"text-base text-green-800 dark:text-green-200",children:"Destiny Path Complete!"})]})}),a.jsxs(ve,{className:"pt-0",children:[a.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 mb-4",children:["You have successfully built a destiny path with ",e.length," steps."]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-medium text-sm mb-2 text-green-800 dark:text-green-200",children:"Your Path:"}),a.jsx("div",{className:"space-y-1",children:e.map((s,r)=>a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(K,{variant:"outline",className:"text-xs",children:r+1}),a.jsx("span",{className:"text-green-700 dark:text-green-300",children:s.name})]},s.id))})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(G,{variant:"outline",size:"sm",onClick:t,className:"flex-1",children:[a.jsx(gr,{className:"h-4 w-4 mr-2"}),"Start Over"]}),a.jsxs(G,{variant:"outline",size:"sm",onClick:n,className:"flex-1",children:[a.jsx(a3,{className:"h-4 w-4 mr-2"}),"Share Path"]})]})]})]})}function B_(e){const{filterType:t,currentPath:n=[]}=e,{nodes:s,rootNodes:r}=ja(),[o,i]=g.useState([]),{possiblePaths:l}=vm({fromNode:n.length>0?n[n.length-1]:void 0}),c=g.useMemo(()=>{if(t!=="build-path"||n.length===0)return s;const b=new Set,x=new Set,y=j=>{x.has(j)||(x.add(j),b.add(j),s.forEach(N=>{N.prerequisites.includes(j)&&y(N.edid)}))},w=n[n.length-1];return y(w.edid),s.filter(j=>b.has(j.edid))},[t,n,s,r]),u=g.useMemo(()=>{if(t==="build-path"){const b=new Set,x=new Set;l.forEach(j=>{j.path.forEach(N=>{b.add(N.edid)}),j.path.length>0&&x.add(j.path[j.path.length-1].edid)});const y=s.filter(j=>b.has(j.edid)),w=s.filter(j=>x.has(j.edid));return[{id:"includes-node",name:"Includes Node",placeholder:"Filter paths that include this node...",options:y.map(j=>{const N=l.filter(S=>S.path.some(k=>k.edid===j.edid)).length;return{id:`includes-${j.id}`,label:j.name,value:j.edid,category:"Includes Node",description:`${N} path${N!==1?"s":""} include ${j.name}`}})},{id:"ends-with-node",name:"Ends With Node",placeholder:"Filter paths that end with this node...",options:w.map(j=>{const N=l.filter(S=>S.path.length>0&&S.path[S.path.length-1].edid===j.edid).length;return{id:`ends-${j.id}`,label:j.name,value:j.edid,category:"Ends With Node",description:`${N} path${N!==1?"s":""} end with ${j.name}`}})}]}else{const b=[...new Set(s.flatMap(y=>y.tags))],x=[...new Set(s.flatMap(y=>y.prerequisites))];return[{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:b.map(y=>({id:`tag-${y}`,label:y,value:y,category:"Tags",description:`Nodes with ${y} tag`}))},{id:"prerequisites",name:"Prerequisites",placeholder:"Filter by prerequisite...",options:x.map(y=>{const w=s.find(j=>j.edid===y);return{id:`prereq-${y}`,label:w?w.name:y,value:y,category:"Prerequisites",description:`Nodes requiring ${w?w.name:y}`}})}]}},[t,c,s,l]),d=g.useCallback(b=>{i(x=>x.some(w=>w.type===b.type&&w.nodeName===b.nodeName)?x:[...x,b])},[]),f=g.useCallback(b=>{i(x=>x.filter(y=>y.id!==b))},[]),m=g.useCallback(()=>{i([])},[]),h=g.useCallback(()=>u.flatMap(b=>b.options),[u]),p=g.useCallback(b=>c.some(x=>x.id===b.id),[c]),v=g.useMemo(()=>t!=="build-path"||o.length===0?l.map(b=>b.path):l.map(b=>b.path).filter(b=>o.every(x=>{switch(x.type){case"includes-node":return b.some(y=>y.edid===x.nodeName||y.edid===x.nodeId);case"ends-with-node":return b.length>0&&(b[b.length-1].edid===x.nodeName||b[b.length-1].edid===x.nodeId);default:return!0}})),[t,o,l]);return{selectedFilters:o,searchCategories:u,addFilter:d,removeFilter:f,clearFilters:m,filteredPaths:v,availableNodes:c,getFilterOptions:h,isNodeAvailable:p}}function I_({searchCategories:e,selectedFilters:t,onFilterSelect:n,onFilterRemove:s,onClearFilters:r,className:o=""}){const i=e.find(d=>d.id==="includes-node"),l=e.find(d=>d.id==="ends-with-node"),c=e.find(d=>d.id==="tags"),u=e.find(d=>d.id==="prerequisites");return a.jsxs("div",{className:`space-y-4 ${o}`,children:[a.jsxs("div",{className:"flex flex-wrap gap-4",children:[i&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Includes"}),a.jsx(Oa,{categories:[i],onSelect:n,placeholder:i.placeholder,className:"w-full"})]}),l&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Ends With"}),a.jsx(Oa,{categories:[l],onSelect:n,placeholder:l.placeholder,className:"w-full"})]}),c&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx(Oa,{categories:[c],onSelect:n,placeholder:c.placeholder,className:"w-full"})]}),u&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Prerequisites"}),a.jsx(Oa,{categories:[u],onSelect:n,placeholder:u.placeholder,className:"w-full"})]})]}),t.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Active Filters"}),a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:r,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Bt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),t.map(d=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>s(d.id),title:"Click to remove",children:[a.jsx("span",{className:"text-xs opacity-70 mr-1",children:d.type==="includes-node"?"Includes:":d.type==="ends-with-node"?"Ends:":d.type==="tags"?"Tag:":"Prereq:"}),d.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},d.id))]})]})]})}function NG({onPathChange:e,onPathComplete:t,className:n="",compact:s=!1}){var E,C;const{currentPath:r,currentNode:o,isValidPath:i,pathErrors:l,setPath:c,clearPath:u,goToPathIndex:d,isPathComplete:f,getPathSummary:m}=A0(),{possiblePaths:h}=vm({fromNode:o||void 0}),{nodes:p}=ja(),v=B_({filterType:"build-path",currentPath:r}),b=v.selectedFilters.length>0?v.filteredPaths:h.map(_=>_.path),x=_=>{if(typeof _=="string")return;let P,O;if(_.category==="Includes Node")P="includes-node",O=_.id.replace(/^includes-/,"");else if(_.category==="Ends With Node")P="ends-with-node",O=_.id.replace(/^ends-/,"");else return;const $={id:_.id,type:P,nodeName:_.value,nodeId:O,label:_.label};v.addFilter($)},y=_=>{v.removeFilter(_)},w=()=>{v.clearFilters()},j=(_,P)=>{let O;if(r.length===0)O=_.slice(0,P+1);else{if(P===0)return;const $=_.slice(1,P+1);O=[...r,...$]}c(O),e==null||e(O),f&&(t==null||t(O))},N=_=>{d(_),e==null||e(r)},S=()=>{u(),e==null||e([])},k=m();return s?a.jsxs("div",{className:`space-y-4 ${n}`,children:[a.jsx(gG,{path:r}),r.length>0&&a.jsx("div",{className:"flex justify-end",children:a.jsxs(G,{variant:"outline",size:"sm",onClick:S,className:"text-xs",children:[a.jsx(gr,{className:"w-3 h-3 mr-1"}),"Clear Path"]})}),b.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Possible Remaining Paths"}),a.jsx(eo,{className:"h-[200px]",children:a.jsx("div",{className:"p-4",children:a.jsx(Xg,{possiblePaths:b.map(_=>({path:_,isComplete:!1,endNode:_[_.length-1]})),selectedPathLength:r.length,onPathClick:j,variant:"compact"})})})]}),!i&&l.length>0&&a.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(ji,{className:"w-3 h-3"}),a.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),a.jsx("ul",{className:"space-y-0.5",children:l.map((_,P)=>a.jsxs("li",{children:["• ",_]},P))})]})]}):a.jsxs("div",{className:`space-y-6 ${n}`,children:[a.jsxs(xe,{children:[a.jsx(_e,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(Re,{className:"flex items-center gap-2",children:[a.jsx(Ld,{className:"w-5 h-5 text-primary"}),"Destiny Path Builder"]}),a.jsx("div",{className:"flex items-center gap-2",children:r.length>0&&a.jsxs(G,{variant:"outline",size:"sm",onClick:S,className:"flex items-center gap-1",children:[a.jsx(gr,{className:"w-4 h-4"}),"Clear Path"]})})]})}),a.jsxs(ve,{children:[a.jsx(iC,{path:r,allNodes:p,onBreadcrumbClick:N,className:"mb-4"}),r.length>0&&a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{children:["Path Length: ",r.length]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:["Start: ",(E=k.startNode)==null?void 0:E.name]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:["Current: ",(C=k.endNode)==null?void 0:C.name]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"•"}),a.jsx(K,{variant:"default",className:"text-xs",children:"Complete"})]})]}),!i&&l.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[a.jsx(ji,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Path Validation Errors:"})]}),a.jsx("ul",{className:"text-sm space-y-1",children:l.map((_,P)=>a.jsxs("li",{className:"text-destructive",children:["• ",_]},P))})]})]})]}),r.length>0&&a.jsxs(xe,{children:[a.jsx(_e,{children:a.jsx(Re,{className:"text-lg",children:"Current Path"})}),a.jsx(ve,{children:a.jsx("div",{className:"space-y-2",children:r.map((_,P)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50",children:[a.jsx(K,{variant:"outline",className:"text-xs",children:P+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:_.name}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:_.description})]})]},_.id))})})]}),a.jsxs(xe,{children:[a.jsxs(_e,{children:[a.jsx(Re,{className:"text-lg",children:r.length===0?"Choose Your Starting Point":"Possible Paths"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:r.length===0?"Select a root destiny node to begin your path":b.length===0?v.selectedFilters.length>0?"No paths match your current filters":"You have reached the end of this destiny path":v.selectedFilters.length>0?`Showing ${b.length} filtered paths from your current position`:`Explore ${b.length} possible paths from your current position`})]}),a.jsxs(ve,{className:"h-[600px] p-0",children:[a.jsx("div",{className:"p-6 pb-6",children:a.jsx(I_,{searchCategories:v.searchCategories,selectedFilters:v.selectedFilters,onFilterSelect:x,onFilterRemove:y,onClearFilters:w})}),b.length===0?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[v.selectedFilters.length>0?a.jsx(t3,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}):a.jsx(Ld,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg font-medium",children:v.selectedFilters.length>0?"No paths match your filters":"Path Complete!"}),a.jsx("p",{className:"text-sm",children:v.selectedFilters.length>0?"Try adjusting your filters to see more paths.":"You've reached the end of this destiny path."})]}):a.jsx(eo,{className:"h-[calc(600px-200px)]",children:a.jsx("div",{className:"p-6 pt-4",children:a.jsx(Xg,{possiblePaths:b.map(_=>({path:_,isComplete:!1,endNode:_[_.length-1]})),selectedPathLength:r.length,onPathClick:j})})})]})]})]})}function SG({item:e,originalNode:t,allNodes:n}){const s=r=>n.filter(o=>o.prerequisites.includes(r)).map(o=>o.name);return a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t&&t.prerequisites.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Prereq:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:t.prerequisites.map((r,o)=>a.jsx(K,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:r},o))})]}),t&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Leads to:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[s(t.name).map((r,o)=>a.jsx(K,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:r},o)),s(t.name).length===0&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"Terminal"})]})]}),e.tags.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Tags:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((r,o)=>a.jsx(K,{variant:"secondary",className:"text-xs",children:r},o))})]})]})}function kG({items:e,allNodes:t}){return a.jsx(eo,{className:"h-[calc(100vh-500px)]",children:a.jsx(Uk,{type:"single",collapsible:!0,className:"w-full",children:e.map(n=>a.jsxs(k0,{value:n.id,children:[a.jsx(C0,{className:"text-left hover:no-underline",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-bold text-base text-foreground truncate hover:underline",children:n.name}),a.jsx("div",{className:"text-base text-muted-foreground truncate",children:n.description})]})}),a.jsx(E0,{children:a.jsx(SG,{item:n,originalNode:t.find(s=>s.id===n.id),allNodes:t})})]},n.id))})})}const $h=cs((e,t)=>({steps:[],currentIndex:-1,nextChoices:[],selectChoice:n=>{const{steps:s,currentIndex:r,nextChoices:o}=t(),i=o.find(c=>c.edid===n);if(!i)return;const l={id:i.edid,name:i.name,summary:i.description||"",meta:{tags:i.tags||[],levelRequirement:i.levelRequirement,lore:i.lore},node:i};e(c=>{const u=[...c.steps],d=c.currentIndex+1;return d<u.length&&u.splice(d,u.length-d),u.push(l),{steps:u,currentIndex:d,nextChoices:[]}})},jumpTo:n=>{const{steps:s}=t();n<0||n>=s.length||e(r=>({currentIndex:n,steps:r.steps.slice(0,n+1),nextChoices:[]}))},clear:()=>{e({steps:[],currentIndex:-1,nextChoices:[]})},setNextChoices:n=>{e({nextChoices:n})},hydrateFromQuery:n=>{try{const s=atob(n),r=JSON.parse(s);r.steps&&Array.isArray(r.steps)&&e({steps:r.steps,currentIndex:r.currentIndex||r.steps.length-1,nextChoices:r.nextChoices||[]})}catch(s){console.warn("Failed to hydrate from query:",s)}},toQuery:()=>{const{steps:n,currentIndex:s,nextChoices:r}=t(),o={steps:n,currentIndex:s,nextChoices:r.map(i=>i.edid)};try{return btoa(JSON.stringify(o))}catch(i){return console.warn("Failed to serialize to query:",i),""}}}));function CG(){const{steps:e,currentIndex:t,nextChoices:n,selectChoice:s,jumpTo:r,clear:o}=$h(),i=t>=0&&t<e.length?e[t]:null,l=e.length,c=n.length===0,{nodes:u,rootNodes:d}=ja(),[f,m]=g.useState(!1),[h,p]=g.useState(!1),[v,b]=g.useState(null),[x,y]=g.useState(!1);g.useEffect(()=>{const{setNextChoices:E}=$h.getState();if(t===-1)E(d);else if(i){const C=u.filter(_=>{var P;return(P=_.prerequisites)==null?void 0:P.includes(i.node.edid)});E(C)}else E([])},[t,i,u,d]);const w=E=>{s(E),p(!1),b(null)},j=E=>{b(E),p(!0)},N=()=>{t>0&&r(t-1)},S=E=>{r(E),m(!1)},k=()=>{o(),m(!1)};return a.jsxs("div",{className:"flex min-h-screen flex-col bg-background",children:[a.jsx(pG,{stepIndex:t,totalSteps:l,title:(i==null?void 0:i.name)??"Start Destiny",onBack:N,onOverview:()=>m(!0),onClear:k,canBack:t>0}),a.jsxs("main",{className:"flex-1 px-3 py-2 space-y-4",children:[i&&a.jsxs("div",{className:"space-y-2 p-3 rounded-lg bg-muted/20",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-px flex-1 bg-border"}),a.jsx("span",{className:"text-xs font-medium text-muted-foreground px-2",children:"CURRENT STEP"}),a.jsx("div",{className:"h-px flex-1 bg-border"})]}),a.jsx(xG,{step:i,onChange:()=>y(!0)})]}),i&&!c&&n.length>0&&a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-px h-6 bg-primary/30"})}),!c&&n.length>0&&a.jsxs("section",{"aria-label":"Next choices",className:"space-y-3 p-3 rounded-lg bg-background border border-border",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-px flex-1 bg-border"}),a.jsx("span",{className:"text-xs font-medium text-muted-foreground px-2",children:t===-1?"CHOOSE STARTING DESTINY":"CHOOSE NEXT STEP"}),a.jsx("div",{className:"h-px flex-1 bg-border"})]}),a.jsxs("div",{className:"space-y-2",children:[n.slice(0,3).map(E=>a.jsx(vG,{choice:E,onOpenDetails:()=>j(E),onSelect:()=>w(E.edid)},E.edid)),n.length>3&&a.jsx("div",{className:"text-center py-2",children:a.jsxs("span",{className:"text-sm text-muted-foreground",children:["+",n.length-3," more choices available"]})})]})]}),c&&l>0&&a.jsx(jG,{steps:e,onRestart:()=>o(),onShare:()=>{console.log("Share path:",$h.getState().toQuery())}}),l===0&&n.length===0&&a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"No destiny paths available. Please check your prerequisites."})})]}),a.jsx(yG,{canBack:t>0,canNext:!1,onBack:N,onOverview:()=>m(!0)}),a.jsx(bG,{open:f,steps:e,currentIndex:t,onJump:S,onClear:k,onClose:()=>m(!1)}),a.jsx(wG,{open:h,choice:v,onSelect:()=>v&&w(v.edid),onClose:()=>{p(!1),b(null)}})]})}function EG(e){return dk("(min-width: 1024px)")?a.jsx(NG,{...e}):a.jsx(CG,{})}function _G({items:e,filters:t=[]}){const[n,s]=g.useState(null),[r,o]=g.useState("grid"),[i,l]=g.useState({search:"",selectedFilters:{},selectedTags:[]}),c=g.useMemo(()=>{let p=e;if(i.search){const v=i.search.toLowerCase();p=p.filter(b=>b.name.toLowerCase().includes(v)||b.description.toLowerCase().includes(v)||b.tags.some(x=>x.toLowerCase().includes(v)))}return i.selectedTags.length>0&&(p=p.filter(v=>i.selectedTags.some(b=>v.tags.includes(b.value)||v.category===b.value||v.name.toLowerCase().includes(b.value.toLowerCase())))),p},[e,i]),u=g.useMemo(()=>t.length===0?[]:t.map(p=>({...p,options:p.options.map(v=>({...v,count:e.filter(b=>b.tags.includes(v.value)||b.category===v.value).length}))})),[t,e]),d=g.useCallback(p=>{s(p)},[]),f=g.useCallback(p=>{l(p)},[]),m=g.useCallback(p=>{l(v=>({...v,search:p}))},[]),h=g.useCallback(p=>{o(p)},[]);return{selectedItem:n,viewMode:r,currentFilters:i,filteredItems:c,filtersWithCounts:u,handleItemSelect:d,handleFiltersChange:f,handleSearch:m,handleViewModeChange:h,setSelectedItem:s}}function AG(){const{nodes:e,isLoading:t,error:n}=ja(),{currentPath:s,setPath:r}=A0({validatePath:!0});vm({fromNode:s.length>0?s[s.length-1]:void 0});const o=B_({filterType:"reference"}),l=g.useMemo(()=>o.selectedFilters.length===0?e:e.filter(h=>o.selectedFilters.every(p=>{var v,b;switch(p.type){case"tags":return(v=h.tags)==null?void 0:v.includes(p.nodeName);case"prerequisites":return(b=h.prerequisites)==null?void 0:b.includes(p.nodeName);default:return!0}})),[e,o.selectedFilters]).map(h=>JB(h));_G({items:l,filters:[]});const c=h=>{if(typeof h=="string")return;let p,v;if(h.category==="Tags")p="tags",v=h.id.replace(/^tag-/,"");else if(h.category==="Prerequisites")p="prerequisites",v=h.id.replace(/^prereq-/,"");else return;const b={id:h.id,type:p,nodeName:h.value,nodeId:v,label:h.label};o.addFilter(b)},u=h=>{o.removeFilter(h)},d=()=>{o.clearFilters()},f=h=>{r(h)},m=h=>{r(h)};return t?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading destiny data..."})]})}):n?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:n}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsx(Fn,{title:"Destiny",description:"Plan your character's destiny through the perk tree. Each node represents a powerful ability or enhancement that will shape your journey.",children:a.jsx("div",{className:"mb-6",children:a.jsxs(il,{defaultValue:"path",className:"w-full",children:[a.jsxs(ll,{className:"grid w-full grid-cols-2",children:[a.jsx(an,{value:"path",children:"Path Builder"}),a.jsx(an,{value:"reference",children:"Reference"})]}),a.jsxs(wn,{value:"reference",className:"space-y-4",children:[a.jsx(I_,{searchCategories:o.searchCategories,selectedFilters:o.selectedFilters,onFilterSelect:c,onFilterRemove:u,onClearFilters:d}),a.jsx("div",{className:"w-full",children:a.jsx(kG,{items:l,allNodes:e})})]}),a.jsx(wn,{value:"path",className:"space-y-4",children:a.jsx(EG,{onPathChange:f,onPathComplete:m})})]})})})}function TG(){const{data:e,loading:t,error:n}=ck(),[s,r]=g.useState(new Set),[o,i]=g.useState("alphabetical"),[l,c]=g.useState("grid"),[u,d]=g.useState(!0),[f,m]=g.useState(!0),[h,p]=g.useState(!0),[v,b]=g.useState(Yt()),x=g.useMemo(()=>(e||[]).map(Yg),[e]),w=(()=>{const z=[...new Set((e||[]).map(D=>D.pantheon).filter(Boolean))],A=[...new Set(x.flatMap(D=>D.tags))];return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"pantheons",name:"Pantheons",placeholder:"Search by pantheon...",options:z.map(D=>({id:`pantheon-${D}`,label:D,value:D,category:"Pantheons",description:`Religions from ${D} pantheon`}))},...Yt()?[{id:"favored-races",name:"Favored Races",placeholder:"Search by favored race...",options:A.map(D=>({id:`race-${D}`,label:D,value:D,category:"Favored Races",description:`Religions that favor ${D}`}))}]:[]]})(),[j,N]=g.useState([]),S=z=>{let A;typeof z=="string"?A={id:`custom-${z}`,label:z,value:z,category:"Custom"}:A={id:z.id,label:z.label,value:z.value,category:z.category},j.find(D=>D.value===A.value)||N(D=>[...D,A])},k=z=>{N(A=>A.filter(D=>D.id!==z))},E=g.useMemo(()=>j.length===0?e||[]:(e||[]).filter(z=>j.every(A=>{var M,R,B;const D=A.value.toLowerCase();return!!((M=z.pantheon)!=null&&M.toLowerCase().includes(D)||(R=z.tags)!=null&&R.some(U=>U.toLowerCase().includes(D))||z.name.toLowerCase().includes(D)||(B=z.description)!=null&&B.toLowerCase().includes(D))})),[e,j]),C=g.useMemo(()=>{const z=[...E];switch(o){case"alphabetical":return z.sort((A,D)=>A.name.localeCompare(D.name));case"divine-type":return z.sort((A,D)=>{const M=U=>{switch(U==null?void 0:U.toLowerCase()){case"divine":return 1;case"daedric":return 2;case"yokudan":return 3;case"custom":return 4;default:return 5}},R=M(A.pantheon),B=M(D.pantheon);return R!==B?R-B:A.name.localeCompare(D.name)});default:return z}},[E,o]),_=g.useMemo(()=>C.map(Yg),[C]),P=z=>{r(A=>{const D=new Set(A);return D.has(z)?D.delete(z):D.add(z),D})},O=()=>{r(new Set(_.map(z=>z.id)))},$=()=>{r(new Set)},T=_.length>0&&_.every(z=>s.has(z.id));return _.some(z=>s.has(z.id)),t?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading religions..."})]})}):n?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:n}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsxs(Fn,{title:"Religions",description:"Choose your character's religion. Each deity offers unique blessings, tenets, and powers that will guide your spiritual journey through Tamriel.",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(ba,{categories:w,onSelect:S,onCustomSearch:S})}),a.jsxs(Kc,{children:[a.jsx(Qc,{asChild:!0,children:a.jsxs(G,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[a.jsx(En,{className:"h-4 w-4"}),o==="alphabetical"?"A-Z":"Type"]})}),a.jsxs(fl,{align:"end",children:[a.jsx(ss,{onClick:()=>i("alphabetical"),children:"Alphabetical"}),a.jsx(ss,{onClick:()=>i("divine-type"),children:"Divine Type"})]})]}),a.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[a.jsx(G,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),className:"h-8 px-3",title:"List view",children:a.jsx(fo,{className:"h-4 w-4"})}),a.jsx(G,{variant:l==="grid"?"default":"ghost",size:"sm",onClick:()=>c("grid"),className:"h-8 px-3",title:"Grid view",children:a.jsx(Ki,{className:"h-4 w-4"})})]}),a.jsx(G,{variant:"outline",size:"sm",onClick:T?$:O,className:"flex items-center justify-center",title:T?"Collapse all accordions":"Expand all accordions",children:T?a.jsx(V4,{className:"h-4 w-4"}):a.jsx(O4,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"my-4",children:j.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>N([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Bt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),j.map(z=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>k(z.id),title:"Click to remove",children:[z.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},z.id))]})}),_.length>0&&a.jsxs(DB,{children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border bg-muted/30 border-border",children:[a.jsx(rm,{checked:u&&f&&h&&v,onCheckedChange:z=>{d(z),m(z),p(z),b(z)}}),a.jsx("span",{className:"text-sm font-medium",children:"Toggle All"})]}),a.jsxs(hB,{columns:Yt()?4:3,children:[a.jsx($u,{title:"Blessings",description:"Deity blessings and effects",checked:u,onCheckedChange:d}),a.jsx($u,{title:"Tenets",description:"Religious tenets and rules",checked:f,onCheckedChange:m}),a.jsx($u,{title:"Boons",description:"Follower and devotee powers",checked:h,onCheckedChange:p}),Yt()&&a.jsx($u,{title:"Favored Races",description:"Races favored by this deity",checked:v,onCheckedChange:b})]})]}),l==="grid"?a.jsx(Nk,{columns:3,gap:"md",className:"w-full mt-6",children:_.map(z=>{const A=e.find(M=>M.name===z.name),D=s.has(z.id);return a.jsx(nf,{item:z,originalReligion:A,isExpanded:D,onToggle:()=>P(z.id),className:"w-full",showBlessings:u,showTenets:f,showBoons:h,showFavoredRaces:v},z.id)})}):a.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:_.map(z=>{const A=e.find(M=>M.name===z.name),D=s.has(z.id);return a.jsx(nf,{item:z,originalReligion:A,isExpanded:D,onToggle:()=>P(z.id),className:"w-full",showBlessings:u,showTenets:f,showBoons:h,showFavoredRaces:v},z.id)})}),_.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No religions found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]})}const MG="modulepreload",RG=function(e){return"/lorerim-arcaneum/"+e},ww={},Qs=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=RG(c),c in ww)return;ww[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":MG,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return r.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};function jw(e){return e.map(t=>({id:`skill-${t.id}`,type:"skill",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...t.keyAbilities||[],...t.metaTags||[],t.scaling||""],originalData:t,url:`/build/perks?skill=${t.id}`}))}function Nw(e){return e.map(t=>({id:`race-${t.id}`,type:"race",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.source||"",...t.tags||[],...t.keywords||[]],originalData:t,url:"/races"}))}function Sw(e){return e.map(t=>{var n;return{id:`trait-${t.id}`,type:"trait",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...((n=t.effects)==null?void 0:n.map(s=>s.description||s.type))||[]],originalData:t,url:"/traits"}})}function kw(e){return e.map(t=>{var n,s,r,o,i,l,c,u,d,f;return{id:`religion-${t.id||t.name}`,type:"religion",name:t.name,description:((n=t.tenet)==null?void 0:n.description)||"",category:t.type||t.pantheon||"",tags:t.tags||[],searchableText:[t.name,((s=t.tenet)==null?void 0:s.description)||"",t.type||"",t.pantheon||"",...t.tags||[],...Yt()?t.favoredRaces||[]:[],...t.worshipRestrictions||[],...((o=(r=t.tenet)==null?void 0:r.effects)==null?void 0:o.map(m=>m.effectName))||[],...((l=(i=t.blessing)==null?void 0:i.effects)==null?void 0:l.map(m=>m.effectName))||[],...((u=(c=t.boon1)==null?void 0:c.effects)==null?void 0:u.map(m=>m.effectName))||[],...((f=(d=t.boon2)==null?void 0:d.effects)==null?void 0:f.map(m=>m.effectName))||[]],originalData:t,url:"/religions"}})}function Cw(e){return e.map(t=>{var n,s;return{id:`birthsign-${t.id||t.edid}`,type:"birthsign",name:t.name,description:t.description,category:t.group,tags:t.tags||[],searchableText:[t.name,t.description||"",t.group||"",...t.tags||[],...((n=t.powers)==null?void 0:n.map(r=>r.name||r.description))||[],...((s=t.stat_modifications)==null?void 0:s.map(r=>r.stat))||[]],originalData:t,url:"/birthsigns"}})}function Ew(e){return e.map(t=>({id:`destiny-${t.id}`,type:"destiny",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.lore||"",...t.tags||[],...t.prerequisites||[]],originalData:t,url:"/destiny"}))}function _w(e){return e.map(t=>{var n;return{id:`perk-${t.treeId||t.id}`,type:"perk",name:t.treeName||t.name,description:t.treeDescription||t.description,category:t.category,tags:t.tags||[],searchableText:[t.treeName||t.name,t.treeDescription||t.description||"",t.category||"",...t.tags||[],...((n=t.perks)==null?void 0:n.map(s=>s.name))||[]],originalData:t,url:"/build/perks"}})}function Aw(e){return e.map(t=>{var n,s,r,o,i,l;return{id:`perk-ref-${t.edid}`,type:"perk-reference",name:t.name,description:((s=(n=t.ranks[0])==null?void 0:n.description)==null?void 0:s.base)||"",category:t.category,tags:t.tags,searchableText:[t.name,((o=(r=t.ranks[0])==null?void 0:r.description)==null?void 0:o.base)||"",((l=(i=t.ranks[0])==null?void 0:i.description)==null?void 0:l.subtext)||"",t.skillTreeName,t.category,...t.tags,...t.prerequisites,t.isRoot?"root perk":"branch perk",t.totalRanks>1?"multi-rank":"single-rank"],originalData:t,url:`/perk-references?skill=${t.skillTree}&perk=${t.edid}`}})}function Tw(e){return e.map(t=>({id:`spell-${t.editorId}`,type:"spell",name:t.name,description:t.description,category:t.school,tags:t.tags,searchableText:[t.name,t.description||"",t.school||"",t.level||"",t.tome||"",...t.tags,...t.effects.map(n=>n.name),...t.effects.map(n=>n.description),t.isAreaSpell?"area spell":"",t.isDurationSpell?"duration spell":"",t.isInstantSpell?"instant spell":"",`magicka cost ${t.magickaCost}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`,`area ${t.maxArea}`].filter(Boolean),originalData:t,url:`/spells?spell=${t.editorId}`}))}function Mw(e){return e.map(t=>({id:`recipe-${t.name}`,type:"recipe",name:t.name,description:t.description,category:t.category,tags:t.tags,searchableText:[t.name,t.description||"",t.category||"",t.output||"",t.difficulty||"",t.type||"",...t.tags,...t.ingredients.map(n=>typeof n=="string"?n:n.name||n.item||""),...t.effects.map(n=>n.name),...t.effects.map(n=>n.description),`ingredients ${t.ingredientCount}`,`effects ${t.effectCount}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`].filter(Boolean),originalData:t,url:`/cookbook?recipe=${encodeURIComponent(t.name)}`}))}function DG(e){return{id:e.item.id,name:e.item.name,description:e.item.description||"",summary:e.item.description||"",tags:e.item.tags,category:e.item.category,imageUrl:void 0,effects:[],associatedItems:[],originalSearchResult:e}}function zG(e){return e.map(t=>{var n,s;return{field:t.key||"unknown",snippet:t.value,startIndex:((n=t.indices[0])==null?void 0:n[0])||0,endIndex:((s=t.indices[0])==null?void 0:s[1])||0}})}class LG{constructor(){Ve(this,"searchIndex",null);Ve(this,"isIndexing",!1);Ve(this,"allSearchableItems",[]);Ve(this,"indexedStores",new Set);Ve(this,"fuseOptions",{keys:[{name:"name",weight:.8},{name:"description",weight:.6},{name:"category",weight:.4},{name:"tags",weight:.5},{name:"searchableText",weight:.3}],threshold:.6,includeMatches:!0,includeScore:!0,minMatchCharLength:2,ignoreLocation:!0,useExtendedSearch:!1,findAllMatches:!0});Ve(this,"transformSkillsToSearchable",jw);Ve(this,"transformRacesToSearchable",Nw);Ve(this,"transformTraitsToSearchable",Sw);Ve(this,"transformReligionsToSearchable",kw);Ve(this,"transformBirthsignsToSearchable",Cw);Ve(this,"transformDestinyNodesToSearchable",Ew);Ve(this,"transformPerkTreesToSearchable",_w);Ve(this,"transformPerkReferencesToSearchable",Aw);Ve(this,"transformRecipesToSearchable",Mw);Ve(this,"transformSpellsToSearchable",Tw)}async addToIndex(t,n){this.indexedStores.has(t)||(this.allSearchableItems.push(...n),this.indexedStores.add(t),this.searchIndex=new Xt(this.allSearchableItems,this.fuseOptions))}hasIndexedData(){return this.allSearchableItems.length>0}rebuildSearchIndex(){this.allSearchableItems.length>0&&(this.searchIndex=new Xt(this.allSearchableItems,this.fuseOptions))}async buildSearchIndex(){if(!this.isIndexing){this.isIndexing=!0;try{const{useSkillsStore:t}=await Qs(async()=>{const{useSkillsStore:N}=await Promise.resolve().then(()=>qL);return{useSkillsStore:N}},[]),{useRacesStore:n}=await Qs(async()=>{const{useRacesStore:N}=await Promise.resolve().then(()=>HL);return{useRacesStore:N}},void 0),{useTraitsStore:s}=await Qs(async()=>{const{useTraitsStore:N}=await Promise.resolve().then(()=>GL);return{useTraitsStore:N}},void 0),{useReligionsStore:r}=await Qs(async()=>{const{useReligionsStore:N}=await Promise.resolve().then(()=>VL);return{useReligionsStore:N}},void 0),{useBirthsignsStore:o}=await Qs(async()=>{const{useBirthsignsStore:N}=await Promise.resolve().then(()=>OL);return{useBirthsignsStore:N}},void 0),{useDestinyNodesStore:i}=await Qs(async()=>{const{useDestinyNodesStore:N}=await Promise.resolve().then(()=>IL);return{useDestinyNodesStore:N}},void 0),{usePerkTreesStore:l}=await Qs(async()=>{const{usePerkTreesStore:N}=await Promise.resolve().then(()=>j5);return{usePerkTreesStore:N}},void 0),{useRecipesStore:c}=await Qs(async()=>{const{useRecipesStore:N}=await Promise.resolve().then(()=>i8);return{useRecipesStore:N}},void 0),{SpellDataProvider:u}=await Qs(async()=>{const{SpellDataProvider:N}=await Promise.resolve().then(()=>l8);return{SpellDataProvider:N}},void 0),d=t.getState().data,f=n.getState().data,m=s.getState().data,h=r.getState().data,p=o.getState().data,v=i.getState().data,b=l.getState().data,x=c.getState().data,w=await u.getInstance().loadSpells();if(!(d!=null&&d.length)||!(f!=null&&f.length)||!(m!=null&&m.length)||!(h!=null&&h.length)||!(p!=null&&p.length)||!(v!=null&&v.length)||!(b!=null&&b.length)||!(x!=null&&x.length)||!(w!=null&&w.length))throw console.log("Stores not loaded yet, cannot build search index"),new Error("Store data not available - stores must be loaded before building search index");const j=[...jw(d),...Nw(f),...Sw(m),...kw(h),...Cw(p),...Ew(v),..._w(b),...Mw(x),...Tw(w)];this.allSearchableItems=j,this.searchIndex=new Xt(j,this.fuseOptions)}catch(t){throw console.error("Failed to build search index:",t),t}finally{this.isIndexing=!1}}}async addPerkReferencesToIndex(t){if(this.indexedStores.has("perk-references"))return;const n=Aw(t);this.allSearchableItems.push(...n),this.indexedStores.add("perk-references"),this.searchIndex=new Xt(this.allSearchableItems,this.fuseOptions)}search(t,n){if(!this.searchIndex)return[];if(!t.trim()||t.trim()==="*"){let i=this.allSearchableItems;return n&&(i=this.applyFilters(i,n)),i.map(l=>({item:l,score:1,matches:[],highlights:[]}))}if(!this.searchIndex)return console.warn("Search index not ready, returning empty results"),[];const s=this.searchIndex.search(t);let r=s;return n&&(r=s.filter(i=>{const l=i.item;return this.applyFilters([l],n).length>0})),r.map(i=>({item:i.item,score:i.score||0,matches:[...i.matches||[]],highlights:zG([...i.matches||[]])}))}applyFilters(t,n){return t.filter(s=>{var r,o,i,l,c,u,d;if(n.types.length>0&&!n.types.includes(s.type)||n.categories.length>0&&s.category&&!n.categories.includes(s.category))return!1;if(n.tags.length>0){const f=s.tags.map(p=>p.toLowerCase());if(!n.tags.map(p=>p.toLowerCase()).some(p=>f.some(v=>v.includes(p)||p.includes(v))))return!1}if(s.type==="skill"&&((r=n.skillCategories)!=null&&r.length)&&(!s.category||!n.skillCategories.includes(s.category))||s.type==="race"&&((o=n.raceTypes)!=null&&o.length)&&(!s.category||!n.raceTypes.includes(s.category))||s.type==="trait"&&((i=n.traitTypes)!=null&&i.length)&&(!s.category||!n.traitTypes.includes(s.category))||s.type==="religion"&&((l=n.religionTypes)!=null&&l.length)&&(!s.category||!n.religionTypes.includes(s.category))||s.type==="birthsign"&&((c=n.birthsignGroups)!=null&&c.length)&&(!s.category||!n.birthsignGroups.includes(s.category))||s.type==="spell"&&((u=n.spellSchools)!=null&&u.length)&&(!s.category||!n.spellSchools.includes(s.category)))return!1;if(s.type==="spell"&&((d=n.spellLevels)!=null&&d.length)){const f=s.originalData;if(!f.level||!n.spellLevels.includes(f.level))return!1}return!0})}getAvailableFilters(){const t=new Map,n=new Map,s=new Map;return this.allSearchableItems.forEach(r=>{const o=t.get(r.type)||0;if(t.set(r.type,o+1),r.category){const i=n.get(r.category)||0;n.set(r.category,i+1)}r.tags.forEach(i=>{const l=s.get(i)||0;s.set(i,l+1)})}),{types:Array.from(t.entries()).map(([r,o])=>({value:r,label:r.charAt(0).toUpperCase()+r.slice(1),count:o})),categories:Array.from(n.entries()).map(([r,o])=>({value:r,label:r,count:o})),tags:Array.from(s.entries()).map(([r,o])=>({value:r,label:r,count:o}))}}getSearchableItems(){return this.allSearchableItems}isReady(){return this.searchIndex!==null&&!this.isIndexing}isLoading(){return this.isIndexing}}const $G={skill:{label:"Skill",icon:"⚔️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},race:{label:"Race",icon:"👤",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},trait:{label:"Trait",icon:"🎯",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},religion:{label:"Religion",icon:"⛪",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},birthsign:{label:"Birthsign",icon:"⭐",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},destiny:{label:"Destiny",icon:"🌟",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},perk:{label:"Perk",icon:"🔮",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"}};function PG({type:e,className:t,variant:n="default"}){const s=$G[e]||{label:e.charAt(0).toUpperCase()+e.slice(1),icon:"📄",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return n==="default"?a.jsxs(K,{className:H("inline-flex items-center gap-1 px-2 py-1 text-xs font-medium",s.color,t),children:[a.jsx("span",{children:s.icon}),a.jsx("span",{children:s.label})]}):a.jsxs(K,{variant:n,className:H("inline-flex items-center gap-1",t),children:[a.jsx("span",{children:s.icon}),a.jsx("span",{children:s.label})]})}function OG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){return a.jsxs(he,{className:H("transition-all hover:shadow-md",t),expanded:n,onToggle:s,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(PG,{type:e.type})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-sm truncate",children:e.name}),e.category&&a.jsx(K,{variant:"outline",className:"text-xs",children:e.category})]})})]})}),a.jsxs(he.Summary,{children:[e.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((o,i)=>a.jsx(K,{variant:"secondary",className:"text-xs",children:o},`${o}-${i}`)),e.tags.length>3&&a.jsxs(K,{variant:"secondary",className:"text-xs",children:["+",e.tags.length-3]})]})]}),a.jsxs(he.Details,{children:[e.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"All Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((o,i)=>a.jsx(K,{variant:"secondary",className:"text-xs",children:o},`${o}-${i}`))})]}),e.description&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]})]})}function No(e,t){return e?e.find(s=>{const r=!!s.id&&s.id===t.id,o=!!s.edid&&s.edid===t.edid,i=!!s.treeId&&s.treeId===t.treeId,l=!!s.name&&s.name===t.name;return r||o||i||l}):void 0}function BG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const o=go(l=>l.data),i=No(o,e.originalData);return i?a.jsx(Qd,{originalBirthsign:i,isExpanded:n,onToggle:s,className:t,showToggle:!1}):(console.error("Birthsign not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalBirthsignsInStore:o.length,firstFewBirthsigns:o.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function IG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const o=sl(l=>l.data),i=No(o,e.originalData);return i?a.jsxs(he,{className:t,expanded:n,onToggle:s,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:i.icon?a.jsx("img",{src:i.icon,alt:i.name,className:"w-6 h-6 object-contain"}):a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:i.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:i.name}),i.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),a.jsx(he.Summary,{children:i.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.description})}),a.jsxs(he.Details,{children:[i.effects&&i.effects.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Effects"}),a.jsx("div",{className:"space-y-1",children:i.effects.map((l,c)=>a.jsxs("div",{className:"text-sm text-muted-foreground",children:["• ",l]},c))})]}),i.tags&&i.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((l,c)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]})]})]}):(console.error("Destiny node not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalDestinyNodesInStore:o.length,firstFewDestinyNodes:o.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}class HG{constructor(t){Ve(this,"perkNodes",[]);this.perkNodes=this.transformPerkTrees(t)}transformPerkTrees(t){const n=[];return t.forEach(s=>{s.perks.forEach(r=>{var i,l,c,u,d;const o={...r,skillTree:s.treeId,skillTreeName:s.treeName,isRoot:r.isRoot||!1,hasChildren:(((l=(i=r.connections)==null?void 0:i.children)==null?void 0:l.length)||0)>0,prerequisites:((c=r.connections)==null?void 0:c.parents)||[],connections:{parents:((u=r.connections)==null?void 0:u.parents)||[],children:((d=r.connections)==null?void 0:d.children)||[]},searchableText:this.generateSearchableText(r,s),tags:this.generateTags(r,s),category:this.determineCategory(s.treeName),minLevel:this.calculateMinLevel(r)};n.push(o)})}),n}calculateMinLevel(t){var s,r;let n=0;if(t.ranks&&t.ranks.length>0&&t.ranks.forEach(o=>{var i,l;(l=(i=o.prerequisites)==null?void 0:i.skillLevel)!=null&&l.level&&(n=Math.max(n,o.prerequisites.skillLevel.level))}),n===0)if(t.isRoot)n=1;else{const o=((r=(s=t.connections)==null?void 0:s.parents)==null?void 0:r.length)||0;n=Math.max(1,o*5)}return n}generateSearchableText(t,n){var r,o;return[t.name,(r=t.ranks)==null?void 0:r.map(i=>{var l;return(l=i.description)==null?void 0:l.base}).join(" "),(o=t.ranks)==null?void 0:o.map(i=>{var l;return(l=i.description)==null?void 0:l.subtext}).join(" "),n.treeName,this.determineCategory(n.treeName)].filter(Boolean).join(" ").toLowerCase()}generateTags(t,n){var o,i,l,c;const s=[n.treeName,this.determineCategory(n.treeName),t.isRoot?"root":"branch",t.totalRanks>1?"multi-rank":"single-rank"];((i=(o=t.connections)==null?void 0:o.parents)==null?void 0:i.length)>0&&s.push("has-prerequisites"),((c=(l=t.connections)==null?void 0:l.children)==null?void 0:c.length)>0&&s.push("has-children");const r=this.calculateMinLevel(t);return r>0&&s.push(`level-${r}+`),s}determineCategory(t){return{Alchemy:"Magic",Alteration:"Magic",Conjuration:"Magic",Destruction:"Magic",Illusion:"Magic",Restoration:"Magic",Archery:"Combat",Block:"Combat","Heavy Armor":"Combat","One Handed":"Combat",Smithing:"Combat","Two Handed":"Combat","Light Armor":"Stealth",Lockpicking:"Stealth",Pickpocket:"Stealth",Sneak:"Stealth",Speech:"Stealth",Enchanting:"Crafting"}[t]||"Other"}getAllPerks(){return this.perkNodes}getPerksBySkill(t){return this.perkNodes.filter(n=>n.skillTree===t)}getPerksByCategory(t){return this.perkNodes.filter(n=>n.category===t)}getPerksByPrerequisite(t){return this.perkNodes.filter(n=>n.prerequisites.includes(t))}getRootPerks(){return this.perkNodes.filter(t=>t.isRoot)}getMultiRankPerks(){return this.perkNodes.filter(t=>t.totalRanks>1)}searchPerks(t){const n=t.toLowerCase();return this.perkNodes.filter(s=>s.searchableText.includes(n)||s.name.toLowerCase().includes(n)||s.tags.some(r=>r.toLowerCase().includes(n)))}}function H_(){const{data:e,loading:t,error:n}=g0(),s=g.useMemo(()=>e?new HG(e):null,[e]),r=g.useMemo(()=>(s==null?void 0:s.getAllPerks())||[],[s]);return{dataProvider:s,allPerks:r,loading:t,error:n}}function Mm(){const{dataProvider:e,allPerks:t,loading:n,error:s}=H_(),r=g.useMemo(()=>{const h=new Map;return t.forEach(p=>{h.has(p.skillTree)||h.set(p.skillTree,{id:p.skillTree,name:p.skillTreeName,count:0});const v=h.get(p.skillTree);v.count++}),Array.from(h.values()).sort((p,v)=>p.name.localeCompare(v.name))},[t]),o=g.useMemo(()=>{const h=new Map;return t.forEach(p=>{h.has(p.category)||h.set(p.category,{name:p.category,count:0});const v=h.get(p.category);v.count++}),Array.from(h.values()).sort((p,v)=>p.name.localeCompare(v.name))},[t]),i=g.useMemo(()=>{const h=new Set;return t.forEach(p=>{p.tags.forEach(v=>h.add(v))}),Array.from(h).sort()},[t]),l=g.useMemo(()=>t.filter(h=>h.isRoot),[t]),c=g.useMemo(()=>t.filter(h=>h.totalRanks>1),[t]),u=g.useMemo(()=>t.filter(h=>h.totalRanks===1),[t]),d=g.useMemo(()=>h=>(e==null?void 0:e.getPerksBySkill(h))||[],[e]),f=g.useMemo(()=>h=>(e==null?void 0:e.getPerksByCategory(h))||[],[e]),m=g.useMemo(()=>h=>(e==null?void 0:e.searchPerks(h))||[],[e]);return{allPerks:t,skillTrees:r,categories:o,tags:i,rootPerks:l,multiRankPerks:c,singleRankPerks:u,getPerksBySkill:d,getPerksByCategory:f,searchPerks:m,loading:n,error:s,dataProvider:e}}const UG={skill:{Alchemy:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Alteration:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Archery:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200",Block:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Conjuration:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Destruction:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Enchanting:"bg-indigo-100 text-indigo-800 border-indigo-200 hover:bg-indigo-200","Heavy Armor":"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",Illusion:"bg-pink-100 text-pink-800 border-pink-200 hover:bg-pink-200","Light Armor":"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200",Lockpicking:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200","One-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Pickpocket:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Restoration:"bg-teal-100 text-teal-800 border-teal-200 hover:bg-teal-200",Smithing:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Sneak:"bg-slate-100 text-slate-800 border-slate-200 hover:bg-slate-200",Speech:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200","Two-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200"},category:{Combat:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Crafting:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Survival:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Social:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200"},rank:{"1 rank":"bg-blue-100 text-blue-800 border-blue-200","2 ranks":"bg-green-100 text-green-800 border-green-200","3 ranks":"bg-purple-100 text-purple-800 border-purple-200","4 ranks":"bg-orange-100 text-orange-800 border-orange-200","5 ranks":"bg-red-100 text-red-800 border-red-200"},availability:{Available:"bg-green-100 text-green-800 border-green-200",Unavailable:"bg-red-100 text-red-800 border-red-200","Prerequisites Met":"bg-blue-100 text-blue-800 border-blue-200","Prerequisites Missing":"bg-gray-100 text-gray-800 border-gray-200"},level:{"Level 1+":"bg-green-100 text-green-800 border-green-200","Level 5+":"bg-blue-100 text-blue-800 border-blue-200","Level 10+":"bg-purple-100 text-purple-800 border-purple-200","Level 15+":"bg-orange-100 text-orange-800 border-orange-200","Level 20+":"bg-red-100 text-red-800 border-red-200","Level 25+":"bg-indigo-100 text-indigo-800 border-indigo-200","Level 30+":"bg-pink-100 text-pink-800 border-pink-200","Level 35+":"bg-teal-100 text-teal-800 border-teal-200","Level 40+":"bg-cyan-100 text-cyan-800 border-cyan-200","Level 45+":"bg-emerald-100 text-emerald-800 border-emerald-200","Level 50+":"bg-amber-100 text-amber-800 border-amber-200"},root:{Root:"bg-gold-100 text-gold-800 border-gold-200 hover:bg-gold-200"}},FG={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},VG="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function Oo({label:e,type:t,size:n="md",className:s}){const o=UG[t][e]||VG;return a.jsx(K,{variant:"outline",className:H(o,FG[n],"font-medium transition-colors",s),children:e})}function gp({item:e,className:t,isExpanded:n=!1,onToggle:s,disableHover:r=!1,viewMode:o="grid"}){const i=e.originalPerk,{allPerks:l}=Mm();if(!i)return null;const u=(d=>d.map(f=>{const m=l.find(h=>h.edid===f);return(m==null?void 0:m.name)||f}))(i.prerequisites);return a.jsxs(he,{className:t,expanded:n,onToggle:s,disableHover:r,children:[a.jsxs(he.Header,{children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:e.name.charAt(0)})}),a.jsx("div",{className:"flex-1 min-w-0",children:o==="grid"?a.jsxs("div",{className:"space-y-1",children:[a.jsx(Qe,{className:"text-primary font-semibold truncate",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.skillTreeName&&a.jsx(Oo,{label:i.skillTreeName,type:"skill",size:"sm"}),i.totalRanks>1&&a.jsx(Oo,{label:`${i.totalRanks} ranks`,type:"rank",size:"sm"}),i.minLevel&&a.jsx(Oo,{label:`Level ${i.minLevel}+`,type:"level",size:"sm"})]})]}):a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx(Qe,{className:"text-primary font-semibold truncate",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.skillTreeName&&a.jsx(Oo,{label:i.skillTreeName,type:"skill",size:"sm"}),i.totalRanks>1&&a.jsx(Oo,{label:`${i.totalRanks} ranks`,type:"rank",size:"sm"}),i.minLevel&&a.jsx(Oo,{label:`Level ${i.minLevel}+`,type:"level",size:"sm"})]})]})})]}),a.jsxs(he.Summary,{children:[a.jsx(Ze,{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((d,f)=>a.jsx(K,{variant:"outline",className:"text-xs",children:d},f)),e.tags.length>3&&a.jsxs(li,{className:"text-muted-foreground",children:["+",e.tags.length-3," more"]})]})]}),a.jsxs(he.Details,{children:[i.prerequisites&&i.prerequisites.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Prerequisites"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:u.map((d,f)=>a.jsx(K,{variant:"secondary",className:"text-xs",children:d},f))})]}),i.ranks&&i.ranks.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Perk Ranks"}),a.jsx("div",{className:"space-y-2",children:i.ranks.map((d,f)=>{var m;return a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsx("div",{className:"flex items-center justify-between mb-1",children:a.jsxs("span",{className:"font-medium text-sm",children:["Rank ",f+1]})}),((m=d.description)==null?void 0:m.base)&&a.jsx(Ze,{className:"text-sm text-muted-foreground",children:d.description.base})]},f)})})]}),e.tags.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((d,f)=>a.jsx(K,{variant:"outline",className:"text-xs",children:d},f))})]})]})]})}function U_(e,t){var i,l,c,u,d,f;const n=((l=(i=t.perks)==null?void 0:i.selected)==null?void 0:l[e.skillTree])||[],s=((u=(c=t.perks)==null?void 0:c.ranks)==null?void 0:u[e.skillTree])||{},r=n.includes(e.edid),o=s[e.edid]||0;return{id:e.edid,name:e.name,description:((f=(d=e.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",category:e.category,tags:e.tags,isSelected:r,originalPerk:e,skillTree:e.skillTree,skillTreeName:e.skillTreeName,isRoot:e.isRoot,hasChildren:e.hasChildren,prerequisites:e.prerequisites,connections:e.connections,totalRanks:e.totalRanks,currentRank:o,isAvailable:e.isRoot||e.prerequisites.every(m=>n.includes(m)),minLevel:e.minLevel}}function qG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const{build:o}=pt(),{allPerks:i}=Mm(),l=e.originalData,c=i.find(f=>f.edid===(l==null?void 0:l.edid));if(!c)return console.warn("Perk reference not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData}),null;const d={...U_(c,o),originalPerk:c};return a.jsx(gp,{item:d,className:t,isExpanded:n,onToggle:s,viewMode:r})}function GG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){var c;const o=ho(u=>u.data),i=No(o,e.originalData);if(!i)return console.error("Perk tree not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalPerkTreesInStore:o.length,firstFewPerkTrees:o.slice(0,3).map(u=>({treeId:u.treeId,treeName:u.treeName||u.name}))}),null;const l=((c=i.perks)==null?void 0:c.length)||0;return a.jsxs(he,{className:t,expanded:n,onToggle:s,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:(i.treeName||i.name).charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:i.treeName||i.name}),i.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),a.jsxs(he.Summary,{children:[i.treeDescription&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.treeDescription}),l>0&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[a.jsx("span",{className:"font-medium",children:"Perks:"})," ",l," total"]})]}),a.jsxs(he.Details,{children:[i.perks&&i.perks.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Sample Perks"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.perks.slice(0,6).map((u,d)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:u.name},`${u.edid}-${d}`)),i.perks.length>6&&a.jsxs("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded text-muted-foreground",children:["+",i.perks.length-6," more"]})]})]}),i.tags&&i.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((u,d)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-secondary text-secondary-foreground rounded",children:u},`${u}-${d}`))})]})]})]})}function ZG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const o=ha(c=>c.data),i=No(o,e.originalData);if(!i)return console.error("Race not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalRacesInStore:o.length,firstFewRaces:o.slice(0,3).map(c=>({edid:c.edid,name:c.name}))}),null;const l={id:i.id||i.edid||i.name,name:i.name,description:i.description||"",summary:i.description||"",category:i.category||"",tags:i.tags||[],type:"race",effects:[]};return a.jsx("div",{className:t,children:a.jsx(tu,{item:{...l,originalRace:i},isExpanded:n,onToggle:s,showToggle:!1,disableHover:!1,className:"w-full"})})}function YG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){var u,d,f,m,h,p,v,b,x,y,w,j,N,S,k,E,C,_,P,O;const o=rl($=>$.data),i=No(o,e.originalData);if(!i)return console.error("Religion not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalReligionsInStore:o.length,firstFewReligions:o.slice(0,3).map($=>({id:$.id,name:$.name}))}),null;const l={name:i.name,type:i.type||i.pantheon||"Unknown",blessing:{spellId:((u=i.blessing)==null?void 0:u.spellId)||"",spellName:((d=i.blessing)==null?void 0:d.spellName)||"",effects:((f=i.blessing)==null?void 0:f.effects)||[]},boon1:{spellId:((m=i.boon1)==null?void 0:m.spellId)||"",spellName:((h=i.boon1)==null?void 0:h.spellName)||"",effects:((p=i.boon1)==null?void 0:p.effects)||[]},boon2:{spellId:((v=i.boon2)==null?void 0:v.spellId)||"",spellName:((b=i.boon2)==null?void 0:b.spellName)||"",effects:((x=i.boon2)==null?void 0:x.effects)||[]},tenet:{spellId:((y=i.tenet)==null?void 0:y.spellId)||"",spellName:((w=i.tenet)==null?void 0:w.spellName)||"",header:((j=i.tenet)==null?void 0:j.header)||"",description:((N=i.tenet)==null?void 0:N.description)||"",effects:((S=i.tenet)==null?void 0:S.effects)||[]},favoredRaces:i.favoredRaces||[],worshipRestrictions:i.worshipRestrictions||[]},c={id:i.id||i.name,name:i.name,description:((k=i.tenet)==null?void 0:k.description)||"",category:i.type||i.pantheon||"",tags:i.favoredRaces||i.tags||[],type:"religion",summary:((E=i.tenet)==null?void 0:E.description)||"",effects:[...((_=(C=i.tenet)==null?void 0:C.effects)==null?void 0:_.map($=>({type:"positive",name:$.effectName,description:$.effectDescription,value:$.magnitude,target:$.targetAttribute||""})))||[],...((O=(P=i.blessing)==null?void 0:P.effects)==null?void 0:O.map($=>({type:"positive",name:$.effectName,description:$.effectDescription,value:$.magnitude,target:$.targetAttribute||""})))||[]]};return a.jsx("div",{className:t,children:a.jsx(nf,{item:c,originalReligion:l,isExpanded:n,onToggle:s,className:"w-full",showBlessings:!0,showTenets:!0,showBoons:!0,showFavoredRaces:Yt(),disableHover:!1,showToggle:!1})})}function XG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const o=po(l=>l.data),i=No(o,e.originalData);return i?a.jsxs(he,{className:t,expanded:n,onToggle:s,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:i.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:i.name}),i.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),a.jsxs(he.Summary,{children:[i.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.description}),i.keyAbilities&&i.keyAbilities.length>0&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[a.jsx("span",{className:"font-medium",children:"Key abilities:"})," ",i.keyAbilities.slice(0,2).join(", "),i.keyAbilities.length>2&&"..."]})]}),a.jsxs(he.Details,{children:[i.tags&&i.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((l,c)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),i.keyAbilities&&i.keyAbilities.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Key Abilities"}),a.jsx("div",{className:"space-y-1",children:i.keyAbilities.map((l,c)=>a.jsxs("div",{className:"text-sm text-muted-foreground",children:["• ",l]},c))})]})]})]}):(console.error("Skill not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalSkillsInStore:o.length,firstFewSkills:o.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function WG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const o=xo(l=>l.data),i=No(o,e.originalData);return i?a.jsxs(he,{className:t,expanded:n,onToggle:s,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:i.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:i.name}),i.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),a.jsx(he.Summary,{children:i.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.description})}),a.jsxs(he.Details,{children:[i.tags&&i.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((l,c)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),i.description&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]})]})]}):(console.error("Trait not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalTraitsInStore:o.length,firstFewTraits:o.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}const KG={Destruction:Zf,Restoration:Qi,Conjuration:Nx,Illusion:Gf,Alteration:es,"":sa},QG={Novice:"bg-green-100 text-green-800 border-green-200",Apprentice:"bg-blue-100 text-blue-800 border-blue-200",Adept:"bg-purple-100 text-purple-800 border-purple-200",Expert:"bg-orange-100 text-orange-800 border-orange-200",Master:"bg-red-100 text-red-800 border-red-200"};function JG({spell:e,className:t,isExpanded:n=!1,onToggle:s,disableHover:r=!1}){var l;const o=KG[e.school]||sa,i=()=>{s==null||s()};return a.jsxs(he,{className:t,expanded:n,onToggle:i,disableHover:r,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(o,{className:"w-5 h-5 text-muted-foreground"}),a.jsx("h3",{className:"text-primary font-semibold text-lg",children:e.name}),a.jsx("span",{className:"ml-auto transition-transform duration-200 text-muted-foreground",children:a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 8l4 4 4-4"})})})]})}),a.jsx(he.Summary,{children:a.jsxs("div",{className:"px-4 py-2 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 7v14"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"})]}),a.jsx("span",{children:e.school})]}),a.jsx(K,{variant:"secondary",className:QG[e.level]||"",children:e.level})]}),a.jsx(De,{text:e.description,className:"text-sm text-muted-foreground mb-3",as:"p"})]})}),a.jsx(he.Details,{children:a.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[e.hasEffects&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Effects"}),a.jsx("div",{className:"space-y-2",children:e.effects.map((c,u)=>a.jsxs("div",{className:"p-2 rounded bg-muted border text-sm",children:[a.jsx(De,{text:c.description,className:"text-muted-foreground mb-2",as:"p"}),a.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[c.magnitude>0&&a.jsxs("span",{children:["Magnitude: ",c.magnitude]}),c.duration>0&&a.jsxs("span",{children:["Duration: ",c.duration,"s"]}),c.area>0&&a.jsxs("span",{children:["Area: ",c.area,"ft"]})]})]},u))})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Statistics"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Magicka Cost:"}),a.jsxs("span",{className:"font-medium",children:[e.magickaCost," MP"]})]}),e.totalMagnitude>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Magnitude:"}),a.jsx("span",{className:"font-medium",children:e.totalMagnitude})]}),e.maxDuration>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Max Duration:"}),a.jsxs("span",{className:"font-medium",children:[e.maxDuration,"s"]})]}),e.maxArea>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Max Area:"}),a.jsxs("span",{className:"font-medium",children:[e.maxArea,"ft"]})]})]})]}),(e.tome||((l=e.vendors)==null?void 0:l.length))&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Additional Info"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[e.tome&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Tome:"}),a.jsx("span",{children:e.tome})]}),e.vendors&&e.vendors.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Vendors:"}),a.jsx("span",{children:e.vendors.join(", ")})]})]})]}),e.tags&&e.tags.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((c,u)=>a.jsx(K,{variant:"outline",className:"text-xs",children:c},u))})]})]})})]})}const eZ=({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="card"})=>{const o=e.originalData;if(!o)return console.warn("SpellSearchCard: Missing spell data for item:",e),a.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[a.jsx("h3",{className:"font-semibold",children:"Spell not found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});if(!o.name||!o.editorId)return console.warn("SpellSearchCard: Invalid spell data structure:",o),a.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[a.jsx("h3",{className:"font-semibold",children:"Invalid spell data"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const i=L.useCallback(()=>{s&&s()},[s]);return a.jsx(JG,{spell:o,isExpanded:n,onToggle:i,className:t})},tZ=({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"})=>{const o=e.originalData;if(!o||!o.name)return console.warn("RecipeSearchCard: Missing or invalid recipe data for item:",e),a.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[a.jsx("h3",{className:"font-semibold",children:"Recipe not found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const i=Ge.addComputedProperties(o),l=L.useCallback(()=>{s&&s()},[s]);return a.jsx(rv,{recipe:i,variant:r==="list"?"compact":"default",isSelected:!1,onClick:l,showEffects:!0,showIngredients:!0,className:t})};function Rw({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){switch(e.type){case"race":return a.jsx(ZG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"skill":return a.jsx(XG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"trait":return a.jsx(WG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"birthsign":return a.jsx(BG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"destiny":return a.jsx(IG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"religion":return a.jsx(YG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"perk":return a.jsx(GG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"spell":return a.jsx(eZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"perk-reference":return a.jsx(qG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"recipe":return a.jsx(tZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});default:return a.jsx(OG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r})}}function nZ({item:e}){return a.jsx("div",{className:`w-full border-2 rounded-lg p-4 ${e.color} transition-all duration-200 hover:shadow-lg`,style:{minHeight:`${e.height}px`},"data-testid":`test-card-${e.id}`,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:e.title}),a.jsxs("span",{className:"text-xs text-gray-500",children:["#",e.id.slice(-6)]})]}),a.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((t,n)=>a.jsx("span",{className:"px-2 py-1 text-xs bg-white/50 rounded-full text-gray-700 border",children:t},n))}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Height: ",e.height,"px"]})]})})}const Dw={Alteration:p3,Conjuration:Nx,Destruction:Zf,Illusion:Gf,Restoration:Qi,Mysticism:sa},sZ={Alteration:"bg-blue-500 text-white",Conjuration:"bg-purple-500 text-white",Destruction:"bg-red-500 text-white",Illusion:"bg-indigo-500 text-white",Restoration:"bg-green-500 text-white",Mysticism:"bg-yellow-500 text-white"},zw={Novice:1,Apprentice:2,Adept:3,Expert:4,Master:5},rZ={sm:"w-6 h-6 text-sm",md:"w-8 h-8 text-base",lg:"w-10 h-10 text-lg",xl:"w-12 h-12 text-xl","2xl":"w-16 h-16 text-2xl"},aZ={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"};let Ph=null;function oZ(){return Ph||(Ph=new LG),Ph}function av(){const[e,t]=g.useState(!1),[n,s]=g.useState(!1),[r,o]=g.useState(null),i=po(N=>N.data),l=ha(N=>N.data),c=xo(N=>N.data),u=rl(N=>N.data),d=go(N=>N.data),f=sl(N=>N.data),m=ho(N=>N.data),h=nr(N=>N.data),p=qo(N=>N.data),{allPerks:v}=H_(),b=oZ(),x=g.useCallback(async(N,S,k)=>{if(S!=null&&S.length)try{const E=k(S);await b.addToIndex(N,E)}catch(E){console.error(`Failed to index ${N}:`,E)}},[b]);g.useEffect(()=>{i!=null&&i.length&&x("skills",i,b.transformSkillsToSearchable)},[i,x]),g.useEffect(()=>{l!=null&&l.length&&x("races",l,b.transformRacesToSearchable)},[l,x]),g.useEffect(()=>{c!=null&&c.length&&x("traits",c,b.transformTraitsToSearchable)},[c,x]),g.useEffect(()=>{u!=null&&u.length&&x("religions",u,b.transformReligionsToSearchable)},[u,x]),g.useEffect(()=>{d!=null&&d.length&&x("birthsigns",d,b.transformBirthsignsToSearchable)},[d,x]),g.useEffect(()=>{f!=null&&f.length&&x("destinyNodes",f,b.transformDestinyNodesToSearchable)},[f,x]),g.useEffect(()=>{m!=null&&m.length&&x("perkTrees",m,b.transformPerkTreesToSearchable)},[m,x]),g.useEffect(()=>{h!=null&&h.length&&x("recipes",h,b.transformRecipesToSearchable)},[h,x]),g.useEffect(()=>{v!=null&&v.length&&x("perk-references",v,b.transformPerkReferencesToSearchable)},[v,x]),g.useEffect(()=>{p!=null&&p.length&&x("spells",p,b.transformSpellsToSearchable)},[p,x]),g.useEffect(()=>{((i==null?void 0:i.length)||(l==null?void 0:l.length)||(c==null?void 0:c.length)||(u==null?void 0:u.length)||(d==null?void 0:d.length)||(f==null?void 0:f.length)||(m==null?void 0:m.length)||(h==null?void 0:h.length)||(v==null?void 0:v.length)||(p==null?void 0:p.length))&&b.hasIndexedData()&&(b.rebuildSearchIndex(),t(!0))},[i,l,c,u,d,f,m,h,v,p,b]);const y=g.useCallback((N,S)=>N.trim()?b.search(N,S):[],[b]),w=g.useCallback(()=>b.getAvailableFilters(),[b]),j=g.useCallback(()=>b.getSearchableItems(),[b]);return{isReady:e,isIndexing:n,error:r,search:y,getAvailableFilters:w,getSearchableItems:j}}function Oh(e,t){return e.length!==t.length?!1:e.every((n,s)=>n===t[s])}function Lw(e){var t,n,s;return{tags:((t=e.get("tags"))==null?void 0:t.split(",").filter(Boolean))||[],types:((n=e.get("types"))==null?void 0:n.split(",").filter(Boolean))||[],categories:((s=e.get("categories"))==null?void 0:s.split(",").filter(Boolean))||[],viewMode:e.get("view")||"grid"}}function ov(){const[e,t]=l5(),n=g.useRef(!1),s=g.useRef(""),r=g.useRef(null),o=Lw(e),[i,l]=g.useState({types:o.types,categories:o.categories,tags:o.tags}),[c,u]=g.useState(o.viewMode);g.useEffect(()=>{if(n.current)return;const v=e.toString();if(v===s.current)return;s.current=v;const b=Lw(e);Oh(b.types,i.types)||l(x=>({...x,types:b.types})),Oh(b.categories,i.categories)||l(x=>({...x,categories:b.categories})),Oh(b.tags,i.tags)||l(x=>({...x,tags:b.tags})),b.viewMode!==c&&u(b.viewMode)},[e,i.types,i.categories,i.tags,c]),g.useEffect(()=>{r.current&&clearTimeout(r.current),n.current=!0;const v=new URLSearchParams;i.types.length>0&&v.set("types",i.types.join(",")),i.categories.length>0&&v.set("categories",i.categories.join(",")),i.tags.length>0&&v.set("tags",i.tags.join(",")),c!=="grid"&&v.set("view",c),t(v,{replace:!0}),r.current=setTimeout(()=>{n.current=!1},10)},[i,c,t]),g.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]);const d=g.useCallback(v=>{l(b=>({...b,...v}))},[]),f=g.useCallback(v=>{l(b=>({...b,tags:b.tags.includes(v)?b.tags:[...b.tags,v]}))},[]),m=g.useCallback(v=>{l(b=>({...b,tags:b.tags.filter(x=>x!==v)}))},[]),h=g.useCallback(()=>{l({types:[],categories:[],tags:[]})},[]),p=g.useCallback(v=>{u(v)},[]);return{activeFilters:i,setActiveFilters:d,addTag:f,removeTag:m,clearFilters:h,viewMode:c,setViewMode:p}}function iv(){const{search:e,getAvailableFilters:t,isReady:n,getSearchableItems:s}=av(),{activeFilters:r}=ov(),o=g.useMemo(()=>s().length,[s]),i=g.useMemo(()=>{if(!n)return[];if(!(r.tags.length>0||r.types.length>0||r.categories.length>0))return s().map(p=>({item:p,score:1,matches:[],highlights:[]}));const d=r.tags.join(" "),f={...r,tags:[]};return e(d||"*",f)},[n,e,r,s]),l=g.useMemo(()=>n?t():{types:[],categories:[],tags:[]},[n,t,o]),c=g.useMemo(()=>{const u={};return i.forEach(d=>{const f=d.item.type;u[f]=(u[f]||0)+1,d.item.category&&(u[`category:${d.item.category}`]=(u[`category:${d.item.category}`]||0)+1),d.item.tags.forEach(m=>{u[`tag:${m}`]=(u[`tag:${m}`]||0)+1})}),u},[i]);return{searchResults:i,availableFilters:l,resultCounts:c}}function iZ(){const{searchResults:e,resultCounts:t}=iv();ov();const n=g.useMemo(()=>e,[e]),s=g.useMemo(()=>lZ(n,"relevance"),[n]),r=g.useMemo(()=>s.map(DG),[s]),o=g.useMemo(()=>e.length,[e]),i=g.useMemo(()=>{const l={};return e.forEach(c=>{const u=c.item.type;l[u]||(l[u]=[]),l[u].push(c)}),l},[e]);return{filteredResults:n,sortedResults:s,playerCreationItems:r,resultCounts:t,totalResults:o,resultsByType:i}}function lZ(e,t){const n=[...e];switch(t){case"relevance":return n;case"name":return n.sort((s,r)=>s.item.name.localeCompare(r.item.name));case"type":return n.sort((s,r)=>{const o=s.item.type.localeCompare(r.item.type);return o!==0?o:s.item.name.localeCompare(r.item.name)});default:return n}}function cZ({activeFilters:e,onFiltersChange:t,onClearFilters:n,availableFilters:s,resultCount:r,onTagSelect:o,onTagRemove:i,selectedTags:l,className:c}){const u=e.types.length>0||e.categories.length>0||e.tags.length>0,d=h=>{const p=e.types.includes(h)?e.types.filter(v=>v!==h):[...e.types,h];t({types:p})},m=[{id:"fuzzy-search",name:"Search All",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:(s.categories||[]).filter(h=>h&&typeof h.label=="string").map(h=>({id:`category-${h.value}`,label:String(h.label),value:h.value,category:"Categories",description:`${h.count} item${h.count!==1?"s":""}`}))},{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:(s.tags||[]).filter(h=>h&&typeof h.label=="string").map(h=>({id:`tag-${h.value}`,label:String(h.label),value:h.value,category:"Tags",description:`${h.count} item${h.count!==1?"s":""}`}))}];return a.jsxs("div",{className:H("space-y-4",c),children:[a.jsx("div",{className:"space-y-2",children:a.jsx(ba,{categories:m,onSelect:o,onCustomSearch:o})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("span",{className:"text-sm font-medium",children:"Record Types"})}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.types.map(h=>a.jsxs(G,{variant:e.types.includes(h.value)?"default":"outline",size:"sm",onClick:()=>d(h.value),className:"text-xs",children:[h.label,a.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",h.count,")"]})]},h.value))})]}),l.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Active Filters"}),a.jsx(G,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Clear All"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>a.jsxs(K,{variant:"secondary",className:"text-xs",children:[h.category,": ",h.label,a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>i(h.id),className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",children:a.jsx(Bt,{className:"h-3 w-3"})})]},h.id))})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[a.jsxs("span",{children:[r," result",r!==1?"s":""," found"]}),u&&a.jsx(G,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Clear Filters"})]})]})}function F_({items:e,keyExtractor:t,renderItem:n,loadMore:s,hasMore:r=!0,columns:o=3,gap:i=12,maxColumnWidth:l,className:c=""}){const[u,d]=g.useState(0),f=g.useRef(null),m=g.useCallback(()=>l&&u>0?Math.max(1,Math.floor(u/l)):o,[o,l,u]);g.useEffect(()=>{const p=()=>{f.current&&d(f.current.offsetWidth)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),g.useEffect(()=>{var b;if(!s||!r)return;const p=new IntersectionObserver(x=>{x.forEach(y=>{y.isIntersecting&&s&&s()})},{threshold:.1}),v=(b=f.current)==null?void 0:b.lastElementChild;return v&&p.observe(v),()=>p.disconnect()},[s,r,e.length]);const h=g.useCallback(()=>{const p=m(),v=Array.from({length:p},()=>[]);return e.forEach((b,x)=>{const y=x%p,w=t(b);v[y].push(a.jsx("div",{style:{width:"100%",marginBottom:`${i}px`},children:n(b)},w))}),v.map((b,x)=>a.jsx("div",{style:{width:`calc(${100/p}% - ${i/2}px)`,marginRight:x<p-1?`${i}px`:0},children:b},x))},[e,t,n,m,i]);return e.length===0?a.jsx("div",{className:`text-center py-12 ${c}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No items to display"})}):a.jsx("div",{ref:f,className:c,children:a.jsx("div",{style:{display:"flex",width:"100%"},children:h()})})}function uZ({items:e,className:t,viewMode:n="grid",onViewModeChange:s}){const[r,o]=g.useState(new Set);g.useEffect(()=>{if(n==="grid"){const l=new Set(e.map(c=>c.id));o(l)}},[n,e]);const i=l=>{if(n==="grid")return;const c=new Set(r);c.has(l)?c.delete(l):c.add(l),o(c)};return e.length===0?a.jsx("div",{className:`text-center py-12 ${t}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No results found"})}):a.jsxs("div",{className:t,children:[s&&a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.length," result",e.length!==1?"s":""," found"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(G,{variant:n==="grid"?"default":"outline",size:"sm",onClick:()=>s("grid"),className:"flex items-center gap-2",children:[a.jsx(z4,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(G,{variant:n==="list"?"default":"outline",size:"sm",onClick:()=>s("list"),className:"flex items-center gap-2",children:[a.jsx(fo,{className:"h-4 w-4"}),"List"]})]})]}),n==="grid"?a.jsx(F_,{items:e,keyExtractor:l=>l.id,renderItem:l=>a.jsx(Rw,{item:l,isExpanded:!0,onToggle:()=>{},viewMode:"grid"}),columns:3,gap:16,maxColumnWidth:400}):a.jsx("div",{className:"space-y-2",children:e.map(l=>{const c=r.has(l.id);return a.jsx(Rw,{item:l,isExpanded:c,onToggle:()=>i(l.id),viewMode:"list"},l.id)})})]})}function dZ({className:e,placeholder:t="Search skills, races, traits, religions..."}){const n=ft(),{isReady:s}=av(),{availableFilters:r}=iv(),i=[{id:"fuzzy-search",name:"Search All",placeholder:t,options:r.types.map(c=>({id:`type-${c.value}`,label:c.label,value:c.value,category:"Search All",description:`${c.count} ${c.label}${c.count!==1?"s":""}`}))}],l=c=>{if(typeof c=="string")n(`/search?tags=${encodeURIComponent(c)}`);else if(c.id.startsWith("type-")){const u=c.value;n(`/search?types=${encodeURIComponent(u)}`)}else n(`/search?tags=${encodeURIComponent(c.value)}`)};return s?a.jsx("div",{className:H("flex items-center gap-2",e),children:a.jsx("div",{className:"flex-1",children:a.jsx(lk,{categories:i,onSelect:l,onCustomSearch:l,placeholder:t})})}):a.jsx("div",{className:H("flex items-center gap-2",e),children:a.jsx("div",{className:"flex-1 h-10 bg-muted animate-pulse rounded-md"})})}function Bh({title:e,description:t,children:n}){return a.jsxs("div",{className:"bg-background",children:[a.jsx("div",{className:"border-b border-border bg-card/50",children:a.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a.jsx(yo,{className:"text-3xl font-bold text-primary mb-2",children:e}),t&&a.jsx(Ze,{className:"text-muted-foreground max-w-2xl",children:t})]})}),a.jsx("div",{className:"container mx-auto px-4 py-6",children:n})]})}function fZ(){const{isReady:e,isIndexing:t,error:n}=av(),{activeFilters:s,setActiveFilters:r,clearFilters:o,addTag:i,removeTag:l}=ov(),{availableFilters:c,searchResults:u}=iv(),{totalResults:d}=iZ(),[f,m]=g.useState([]),[h,p]=g.useState("grid");g.useEffect(()=>{const N=[];s.tags.forEach(S=>{N.push({id:`custom-${S}`,label:S,value:S,category:"Search All"})}),s.categories.forEach(S=>{N.push({id:`category-${S}`,label:S,value:S,category:"Categories"})}),m(N)},[s.tags,s.categories]);const v=N=>{let S;typeof N=="string"?S={id:`custom-${N}`,label:N,value:N,category:"Search All"}:S={id:`${N.category}-${N.id}`,label:N.label,value:N.value,category:N.category},f.some(k=>k.value===S.value&&k.category===S.category)||(m(k=>[...k,S]),S.category==="Categories"?r({categories:[...s.categories,S.value]}):S.category==="Tags"?r({tags:[...s.tags,S.value]}):i(S.value))},b=N=>{const S=f.find(k=>k.id===N);S&&(m(k=>k.filter(E=>E.id!==N)),S.category==="Categories"?r({categories:s.categories.filter(k=>k!==S.value)}):S.category==="Tags"?r({tags:s.tags.filter(k=>k!==S.value)}):l(S.value))},x=()=>{m([]),o()},y=N=>{p(N)};if(!e)return a.jsx(Bh,{title:"Search",description:"Building search index...",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[t?a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}):null,a.jsx("p",{className:"text-muted-foreground",children:t?"Building search index...":"Loading search..."})]})})});if(n)return a.jsx(Bh,{title:"Search",description:"Error loading search",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-destructive mb-4",children:["Failed to load search: ",n]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"text-primary hover:underline",children:"Try again"})]})})});const w=f.length>0?"Search Results":"Search",j=f.length>0?`Found ${d} result${d!==1?"s":""} for ${f.length} filter${f.length!==1?"s":""}`:"Search across all skills, races, traits, religions, birthsigns, destiny nodes, and perk references";return a.jsxs(Bh,{title:w,description:j,children:[a.jsx("div",{className:"mb-6",children:a.jsx(cZ,{activeFilters:s,onFiltersChange:r,onClearFilters:x,availableFilters:c,resultCount:d,onTagSelect:v,onTagRemove:b,selectedTags:f})}),a.jsx("div",{className:"w-full",children:a.jsx(uZ,{items:u.map(N=>N.item),viewMode:h,onViewModeChange:y})})]})}function mZ(){return a.jsx(fZ,{})}const $w=["bg-red-100 border-red-300","bg-blue-100 border-blue-300","bg-green-100 border-green-300","bg-yellow-100 border-yellow-300","bg-purple-100 border-purple-300","bg-pink-100 border-pink-300","bg-indigo-100 border-indigo-300","bg-gray-100 border-gray-300"],Pw=["Mystical Artifact","Ancient Scroll","Enchanted Weapon","Potion of Power","Crystal Shard","Runic Tablet","Magical Tome","Arcane Relic","Divine Essence","Ethereal Fragment"],Ow=["A powerful artifact imbued with ancient magic.","Scroll containing forgotten spells and rituals.","Weapon blessed by the gods themselves.","Brew that grants temporary supernatural abilities.","Crystal that resonates with magical energy.","Tablet inscribed with mysterious runes.","Book of forbidden knowledge and power.","Relic from a bygone era of magic.","Essence of divine power and wisdom.","Fragment of pure ethereal energy."],hZ=["magic","ancient","powerful","rare","legendary","enchanted","divine","mystical","forbidden","sacred"];function Bw(e){const t=[];for(let n=0;n<e;n++){const s=`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r=Math.floor(Math.random()*200)+100,o=$w[Math.floor(Math.random()*$w.length)],i=Pw[Math.floor(Math.random()*Pw.length)],l=Ow[Math.floor(Math.random()*Ow.length)],c=[],u=Math.floor(Math.random()*3)+1,d=[...hZ].sort(()=>.5-Math.random());c.push(...d.slice(0,u)),t.push({id:s,title:i,description:l,height:r,color:o,tags:c})}return t}function gZ(){const[e,t]=L.useState(()=>Bw(50)),[n,s]=L.useState(!1),[r,o]=L.useState(!0),i=L.useCallback(async()=>{if(n||!r)return;s(!0),await new Promise(d=>setTimeout(d,500));const u=Bw(20);t(d=>[...d,...u]),e.length+u.length>=200&&o(!1),s(!1)},[n,r,e.length]),l=u=>u.id,c=u=>a.jsx(nZ,{item:u});return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"VirtualMasonryGrid Demo"}),a.jsxs("p",{className:"text-muted-foreground",children:["Testing InfiniteGrid implementation with ",e.length," items"]}),n&&a.jsx("div",{className:"mt-2 text-sm text-blue-600",children:"Loading more items..."}),!r&&a.jsx("div",{className:"mt-2 text-sm text-green-600",children:"All items loaded (200 total)"})]}),a.jsx(F_,{items:e,keyExtractor:l,renderItem:c,loadMore:i,hasMore:r,columns:3,gap:16,className:"min-h-screen"})]})}function V_(){const[e,t]=g.useState({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[n,s]=g.useState({skills:[],categories:[],prerequisites:[],tags:[]});g.useCallback(h=>{s(h)},[]);const r=g.useCallback(h=>{t(p=>({...p,skills:[...p.skills,h]}))},[]),o=g.useCallback(h=>{t(p=>({...p,skills:p.skills.filter(v=>v!==h)}))},[]);g.useCallback(h=>{t(p=>({...p,categories:[...p.categories,h]}))},[]),g.useCallback(h=>{t(p=>({...p,categories:p.categories.filter(v=>v!==h)}))},[]),g.useCallback(h=>{t(p=>({...p,prerequisites:[...p.prerequisites,h]}))},[]),g.useCallback(h=>{t(p=>({...p,prerequisites:p.prerequisites.filter(v=>v!==h)}))},[]),g.useCallback(h=>{t(p=>({...p,tags:[...p.tags,h]}))},[]);const i=g.useCallback(h=>{t(p=>({...p,tags:p.tags.filter(v=>v!==h)}))},[]);g.useCallback(h=>{t(p=>({...p,rankLevel:h}))},[]),g.useCallback(h=>{t(p=>({...p,rootOnly:h}))},[]);const l=g.useCallback(h=>{t(p=>({...p,minLevel:h}))},[]),c=g.useCallback(h=>{t(p=>({...p,searchQuery:h}))},[]),u=g.useCallback(()=>{t({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0})},[]),d=g.useMemo(()=>{const h=[];return e.skills.forEach(p=>{const v=n.skills.find(b=>b.id===p);v&&h.push({id:`skill-${p}`,type:"skill",value:p,label:v.name})}),e.categories.forEach(p=>{h.push({id:`category-${p}`,type:"category",value:p,label:p})}),e.prerequisites.forEach(p=>{h.push({id:`prerequisite-${p}`,type:"prerequisite",value:p,label:p})}),e.tags.forEach(p=>{h.push({id:`tag-${p}`,type:"tag",value:p,label:p})}),e.rankLevel!=="all"&&h.push({id:"rank-level",type:"rankLevel",value:e.rankLevel,label:e.rankLevel==="single"?"Single Rank":"Multi Rank"}),e.rootOnly&&h.push({id:"root-only",type:"rootOnly",value:"true",label:"Root Perks Only"}),e.minLevel!==void 0&&h.push({id:"min-level",type:"minLevel",value:e.minLevel.toString(),label:`Level ${e.minLevel}+`}),h},[e,n]);g.useMemo(()=>{const h=[];return n.skills.forEach(p=>{h.push({id:`skill-${p.id}`,label:p.name,value:p.id,category:"Skills",type:"skill"})}),n.tags.forEach(p=>{h.push({id:`tag-${p}`,label:p,value:p,category:"Tags",type:"tag"})}),h},[n]);const f=g.useCallback(h=>{if(typeof h=="string")c(h);else if(`${h.category}${h.id}`,h.label,h.value,h.category,h.category==="Skill Trees")r(h.value);else if(h.category==="Minimum Level"){const p=parseInt(h.value);isNaN(p)||l(p)}else h.category==="Fuzzy Search"&&c(h.value)},[r,c,l]),m=g.useCallback(h=>{const p=d.find(v=>v.id===h);if(p)p.type==="skill"?o(p.value):p.type==="tag"?i(p.value):p.type==="minLevel"&&l(void 0);else if(h.startsWith("custom-")){const v=h.replace("custom-","");e.searchQuery===v&&c("")}},[d,o,i,l,e.searchQuery,c]);return{selectedTags:[...d.map(h=>({id:h.id,label:h.label,value:h.value,category:h.type})),...e.searchQuery?[{id:`custom-${e.searchQuery}`,label:e.searchQuery,value:e.searchQuery,category:"Fuzzy Search"}]:[]],viewMode:"grid",searchQuery:e.searchQuery,onTagSelect:f,onTagRemove:m,onClearTags:u,onViewModeChange:()=>{},onSearchChange:c}}class pZ{constructor(t,n){Ve(this,"perkNodes");Ve(this,"buildState");this.perkNodes=t,this.buildState=n}transformToPlayerCreationItem(t){var i,l,c,u,d,f;const n=((l=(i=this.buildState.perks)==null?void 0:i.selected)==null?void 0:l[t.skillTree])||[],s=((u=(c=this.buildState.perks)==null?void 0:c.ranks)==null?void 0:u[t.skillTree])||{},r=n.includes(t.edid),o=s[t.edid]||0;return{id:t.edid,name:t.name,description:((f=(d=t.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",category:t.category,tags:t.tags,isSelected:r,originalPerk:t,skillTree:t.skillTree,skillTreeName:t.skillTreeName,isRoot:t.isRoot,hasChildren:t.hasChildren,prerequisites:t.prerequisites,connections:t.connections,totalRanks:t.totalRanks,currentRank:o,isAvailable:this.isPerkAvailable(t),minLevel:t.minLevel}}isPerkAvailable(t){var s,r;if(t.isRoot)return!0;const n=((r=(s=this.buildState.perks)==null?void 0:s.selected)==null?void 0:r[t.skillTree])||[];return t.prerequisites.every(o=>n.includes(o))}applyFilters(t,n){let s=[...t];if(!n)return s;if(n.skills&&n.skills.length>0&&(s=s.filter(r=>n.skills.includes(r.skillTree))),n.categories&&n.categories.length>0&&(s=s.filter(r=>n.categories.includes(r.category))),n.prerequisites&&n.prerequisites.length>0&&(s=s.filter(r=>n.prerequisites.some(o=>r.prerequisites.includes(o)))),n.tags&&n.tags.length>0&&(s=s.filter(r=>n.tags.some(o=>r.tags.includes(o)))),n.minLevel!==void 0&&(s=s.filter(r=>(r.minLevel||0)>=n.minLevel)),n.rankLevel!=="all"&&(s=s.filter(r=>n.rankLevel==="single"?r.totalRanks===1:n.rankLevel==="multi"?r.totalRanks>1:!0)),n.rootOnly&&(s=s.filter(r=>r.isRoot)),n.searchQuery&&n.searchQuery.trim()){const r=n.searchQuery.trim(),o=s.map(u=>{var d,f;return{id:u.edid,name:u.name,description:((f=(d=u.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",searchableText:u.searchableText,tags:u.tags,category:u.category,skillTree:u.skillTreeName,originalNode:u}}),i={keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0};s=new Xt(o,i).search(r).map(u=>u.item.originalNode)}return s}getAvailableFilters(t){const n=new Set,s=new Set,r=new Set,o=new Set;return t.forEach(i=>{n.add(i.skillTree),s.add(i.category),i.tags.forEach(l=>r.add(l)),i.prerequisites.forEach(l=>o.add(l))}),{skills:Array.from(n),categories:Array.from(s),tags:Array.from(r),prerequisites:Array.from(o)}}sortPerks(t,n="name"){const s=[...t];switch(n){case"name":return s.sort((r,o)=>r.name.localeCompare(o.name));case"skill":return s.sort((r,o)=>r.skillTreeName.localeCompare(o.skillTreeName));case"category":return s.sort((r,o)=>r.category.localeCompare(o.category));case"rank":return s.sort((r,o)=>o.totalRanks-r.totalRanks);case"prerequisites":return s.sort((r,o)=>r.prerequisites.length-o.prerequisites.length);default:return s}}}function xZ(e,t){const{build:n}=pt(),s=g.useMemo(()=>new pZ(e,n),[e,n]),r=g.useMemo(()=>s.applyFilters(e,t||{skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[s,e,t]),o=g.useMemo(()=>r.map(l=>s.transformToPlayerCreationItem(l)),[r,s]),i=g.useMemo(()=>s.getAvailableFilters(e),[s,e]);return{model:s,filteredNodes:r,perkItems:o,availableFilters:i}}function vZ(){const{allPerks:e,skillTrees:t,categories:n,tags:s,loading:r,error:o}=Mm(),{selectedTags:i,searchQuery:l}=V_(),c=g.useMemo(()=>{const v=i.filter(w=>w.category==="skill").map(w=>w.value),b=i.filter(w=>w.category==="tag").map(w=>w.value),x=i.filter(w=>w.category==="minLevel").map(w=>parseInt(w.value)).find(w=>!isNaN(w));return{skills:v,categories:[],prerequisites:[],tags:b,rankLevel:"all",rootOnly:!1,searchQuery:l||"",minLevel:x}},[i,l]),{filteredNodes:u,perkItems:d,availableFilters:f}=xZ(e,c),m=g.useMemo(()=>{const v=[...new Set(e.map(y=>y.skillTreeName))],b=[...new Set(e.flatMap(y=>y.tags))],x=[...new Set(e.map(y=>y.minLevel||0))].sort((y,w)=>y-w);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:b.map(y=>({id:`keyword-${y}`,label:y,value:y,category:"Fuzzy Search",description:`Perks with ${y} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:v.map(y=>({id:`skill-${y}`,label:y,value:y,category:"Skill Trees",description:`Perks from ${y} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:x.map(y=>({id:`level-${y}`,label:`Level ${y}+`,value:y.toString(),category:"Minimum Level",description:`Perks requiring level ${y} or higher`}))}]},[e]),h=g.useMemo(()=>({totalPerks:e.length,filteredPerks:u.length,rootPerks:e.filter(v=>v.isRoot).length,multiRankPerks:e.filter(v=>v.totalRanks>1).length,singleRankPerks:e.filter(v=>v.totalRanks===1).length,skills:t.length,categories:n.length,tags:s.length}),[e,u,t,n,s]),p=g.useMemo(()=>{const v=new Map;return d.forEach(b=>{v.has(b.skillTree)||v.set(b.skillTree,[]),v.get(b.skillTree).push(b)}),Array.from(v.entries()).map(([b,x])=>{var y;return{skillId:b,skillName:((y=x[0])==null?void 0:y.skillTreeName)||b,perks:x,count:x.length}}).sort((b,x)=>b.skillName.localeCompare(x.skillName))},[d]);return g.useMemo(()=>{const v=new Map;return d.forEach(b=>{v.has(b.category||"")||v.set(b.category||"",[]),v.get(b.category||"").push(b)}),Array.from(v.entries()).map(([b,x])=>({category:b,perks:x,count:x.length})).sort((b,x)=>(b.category||"").localeCompare(x.category||""))},[d]),g.useMemo(()=>d.filter(v=>v.isSelected),[d]),g.useMemo(()=>d.filter(v=>v.isAvailable),[d]),g.useMemo(()=>d.filter(v=>v.isRoot),[d]),g.useMemo(()=>d.filter(v=>v.totalRanks>1),[d]),g.useMemo(()=>d.filter(v=>v.totalRanks===1),[d]),g.useMemo(()=>(v,b="name")=>{const x=[...v];switch(b){case"name":return x.sort((y,w)=>y.name.localeCompare(w.name));case"skill":return x.sort((y,w)=>y.skillTreeName.localeCompare(w.skillTreeName));case"category":return x.sort((y,w)=>(y.category||"").localeCompare(w.category||""));case"rank":return x.sort((y,w)=>w.totalRanks-y.totalRanks);case"prerequisites":return x.sort((y,w)=>y.prerequisites.length-w.prerequisites.length);case"selected":return x.sort((y,w)=>Number(w.isSelected)-Number(y.isSelected));default:return x}},[]),{filteredItems:d,groupedItems:Object.fromEntries(p.map(v=>[v.skillId,v.perks])),stats:{totalPerks:h.totalPerks,skillTrees:h.skills,multiRank:h.multiRankPerks,singleRank:h.singleRankPerks,withPrerequisites:e.filter(v=>v.prerequisites&&v.prerequisites.length>0).length},searchCategories:m,availableFilters:f,isLoading:r,error:o}}function yZ(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u;return{id:l.edid,name:l.name,description:((u=(c=l.ranks[0])==null?void 0:c.description)==null?void 0:u.base)||"",searchableText:l.searchableText,tags:l.tags,category:l.category,skillTree:l.skillTreeName,originalPerk:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Xt(n,s),[n,s]),o=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredPerks:g.useMemo(()=>o.map(l=>l.item.originalPerk),[o]),searchResults:o,searchablePerks:n}}function bZ(){const e=ft(),{build:t}=pt(),{allPerks:n,loading:s,error:r}=Mm(),[o,i]=g.useState("list"),c=(()=>{const S=[...new Set(n.map(C=>C.skillTreeName))],k=[...new Set(n.flatMap(C=>C.tags))],E=[...new Set(n.map(C=>C.minLevel||0))].sort((C,_)=>C-_);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:k.map(C=>({id:`keyword-${C}`,label:C,value:C,category:"Fuzzy Search",description:`Perks with ${C} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:S.map(C=>({id:`skill-${C}`,label:C,value:C,category:"Skill Trees",description:`Perks from ${C} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:E.map(C=>({id:`level-${C}`,label:`Level ${C}+`,value:C.toString(),category:"Minimum Level",description:`Perks requiring level ${C} or higher`}))}]})(),[u,d]=g.useState([]),f=S=>{let k;typeof S=="string"?k={id:`custom-${S}`,label:S,value:S,category:"Fuzzy Search"}:k={id:`${S.category}-${S.id}`,label:S.label,value:S.value,category:S.category},u.some(E=>E.value===k.value&&E.category===k.category)||d(E=>[...E,k])},m=S=>{d(k=>k.filter(E=>E.id!==S))},h=n.filter(S=>u.length===0?!0:u.every(k=>{switch(k.category){case"Fuzzy Search":return!0;case"Skill Trees":return S.skillTreeName===k.value;case"Minimum Level":const E=parseInt(k.value);return!isNaN(E)&&(S.minLevel||0)>=E;default:return!0}})),p=u.filter(S=>S.category==="Fuzzy Search").map(S=>S.value).join(" "),{filteredPerks:v}=yZ(h,p),b=v.map(S=>({...U_(S,t),originalPerk:S})),[x,y]=g.useState(new Set),w=S=>{const k=new Set(x);if(o==="grid"){const C=b.findIndex(T=>T.id===S),P=Math.floor(C/3)*3,O=Math.min(P+3,b.length);b.slice(P,O).some(T=>k.has(T.id))?b.slice(P,O).forEach(T=>{k.delete(T.id)}):b.slice(P,O).forEach(T=>{k.add(T.id)})}else k.has(S)?k.delete(S):k.add(S);y(k)},j=()=>{d([])},N=S=>{i(S),y(new Set)};return s?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading perk data..."})]})}):r?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:r}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsx(Fn,{title:"Perk References",description:"Browse and search all available perks. Find the perfect abilities for your character build.",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"flex items-center gap-2",children:[a.jsx(Ng,{className:"h-4 w-4"}),"Back"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(ba,{categories:c,onSelect:f,onCustomSearch:f,className:"w-full"}),u.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:j,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx("svg",{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Clear All"]}),u.map(S=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(S.id),title:"Click to remove",children:[S.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},S.id))]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm text-muted-foreground",children:[b.length," perk",b.length!==1?"s":""," found"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(G,{variant:o==="grid"?"default":"outline",size:"sm",onClick:()=>N("grid"),className:"flex items-center gap-2",children:[a.jsx(Ki,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(G,{variant:o==="list"?"default":"outline",size:"sm",onClick:()=>N("list"),className:"flex items-center gap-2",children:[a.jsx(fo,{className:"h-4 w-4"}),"List"]})]})]}),o==="grid"?a.jsx(Nk,{columns:3,gap:"md",children:b.map(S=>a.jsx(gp,{item:S,isExpanded:x.has(S.id),onToggle:()=>w(S.id),viewMode:"grid"},S.id))}):a.jsx("div",{className:"space-y-2",children:b.map(S=>a.jsx(gp,{item:S,isExpanded:x.has(S.id),onToggle:()=>w(S.id),viewMode:"list"},S.id))})]})})}function Iw(){const{skills:e,loading:t,error:n,searchQuery:s,setSearchQuery:r,selectedCategory:o,setSelectedCategory:i,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:v}=S_(),{filteredItems:b,groupedItems:x,stats:y,isLoading:w,error:j,searchCategories:N}=vZ(),{selectedTags:S,viewMode:k,searchQuery:E,onTagSelect:C,onTagRemove:_,onClearTags:P,onViewModeChange:O,onSearchChange:$}=V_();return t||w?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading data..."})]})}):n||j?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:n||j}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsx(Fn,{title:"Skills & Perks",description:"Manage your character's skills and browse all available perks.",children:a.jsx("div",{className:"mb-6",children:a.jsxs(il,{defaultValue:"builder",className:"w-full",children:[a.jsxs(ll,{className:"grid w-full grid-cols-2",children:[a.jsx(an,{value:"builder",children:"Perk Builder"}),a.jsx(an,{value:"reference",children:"Perk References"})]}),a.jsx(wn,{value:"builder",className:"space-y-4",children:a.jsx(Qq,{skills:e,loading:t,error:n,searchQuery:s,onSearchChange:r,selectedCategory:o,onCategorySelect:i,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:v})}),a.jsx(wn,{value:"reference",className:"space-y-4",children:a.jsx(bZ,{items:b,groupedItems:x,stats:y,searchCategories:N,selectedTags:S,viewMode:k,searchQuery:E,onTagSelect:C,onTagRemove:_,onClearTags:P,onViewModeChange:O,onSearchChange:$})})]})})})}function q(e,t,n){function s(l,c){var u;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(u=l._zod).traits??(u.traits=new Set),l._zod.traits.add(e),t(l,c);for(const d in i.prototype)d in l||Object.defineProperty(l,d,{value:i.prototype[d].bind(l)});l._zod.constr=i,l._zod.def=c}const r=(n==null?void 0:n.Parent)??Object;class o extends r{}Object.defineProperty(o,"name",{value:e});function i(l){var c;const u=n!=null&&n.Parent?new o:this;s(u,l),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(i,"init",{value:s}),Object.defineProperty(i,Symbol.hasInstance,{value:l=>{var c,u;return n!=null&&n.Parent&&l instanceof n.Parent?!0:(u=(c=l==null?void 0:l._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class kc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const q_={};function so(e){return q_}function wZ(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,r])=>t.indexOf(+s)===-1).map(([s,r])=>r)}function jZ(e,t){return typeof t=="bigint"?t.toString():t}function G_(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function lv(e){return e==null}function cv(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function NZ(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,r=n>s?n:s,o=Number.parseInt(e.toFixed(r).replace(".","")),i=Number.parseInt(t.toFixed(r).replace(".",""));return o%i/10**r}function Xe(e,t,n){Object.defineProperty(e,t,{get(){{const s=n();return e[t]=s,s}},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function uv(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Al(e){return JSON.stringify(e)}const Z_=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function pp(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const SZ=G_(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function xp(e){if(pp(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(pp(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const kZ=new Set(["string","number","symbol"]);function Rm(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function So(e,t,n){const s=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(s._zod.parent=e),s}function ce(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function CZ(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const EZ={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function _Z(e,t){const n={},s=e._zod.def;for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(n[r]=s.shape[r])}return So(e,{...e._zod.def,shape:n,checks:[]})}function AZ(e,t){const n={...e._zod.def.shape},s=e._zod.def;for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&delete n[r]}return So(e,{...e._zod.def,shape:n,checks:[]})}function TZ(e,t){if(!xp(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return uv(this,"shape",s),s},checks:[]};return So(e,n)}function MZ(e,t){return So(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return uv(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function RZ(e,t,n){const s=t._zod.def.shape,r={...s};if(n)for(const o in n){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(r[o]=e?new e({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)r[o]=e?new e({type:"optional",innerType:s[o]}):s[o];return So(t,{...t._zod.def,shape:r,checks:[]})}function DZ(e,t,n){const s=t._zod.def.shape,r={...s};if(n)for(const o in n){if(!(o in r))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(r[o]=new e({type:"nonoptional",innerType:s[o]}))}else for(const o in s)r[o]=new e({type:"nonoptional",innerType:s[o]});return So(t,{...t._zod.def,shape:r,checks:[]})}function Yl(e,t=0){var n;for(let s=t;s<e.issues.length;s++)if(((n=e.issues[s])==null?void 0:n.continue)!==!0)return!0;return!1}function dv(e,t){return t.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(e),n})}function Yu(e){return typeof e=="string"?e:e==null?void 0:e.message}function ro(e,t,n){var r,o,i,l,c,u;const s={...e,path:e.path??[]};if(!e.message){const d=Yu((i=(o=(r=e.inst)==null?void 0:r._zod.def)==null?void 0:o.error)==null?void 0:i.call(o,e))??Yu((l=t==null?void 0:t.error)==null?void 0:l.call(t,e))??Yu((c=n.customError)==null?void 0:c.call(n,e))??Yu((u=n.localeError)==null?void 0:u.call(n,e))??"Invalid input";s.message=d}return delete s.inst,delete s.continue,t!=null&&t.reportInput||delete s.input,s}function fv(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Cc(...e){const[t,n,s]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:s}:{...t}}const Y_=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,jZ,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},X_=q("$ZodError",Y_),W_=q("$ZodError",Y_,{Parent:Error});function zZ(e,t=n=>n.message){const n={},s=[];for(const r of e.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):s.push(t(r));return{formErrors:s,fieldErrors:n}}function LZ(e,t){const n=t||function(o){return o.message},s={_errors:[]},r=o=>{for(const i of o.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(l=>r({issues:l}));else if(i.code==="invalid_key")r({issues:i.issues});else if(i.code==="invalid_element")r({issues:i.issues});else if(i.path.length===0)s._errors.push(n(i));else{let l=s,c=0;for(;c<i.path.length;){const u=i.path[c];c===i.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(i))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return r(e),s}const $Z=e=>(t,n,s,r)=>{const o=s?Object.assign(s,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise)throw new kc;if(i.issues.length){const l=new((r==null?void 0:r.Err)??e)(i.issues.map(c=>ro(c,o,so())));throw Z_(l,r==null?void 0:r.callee),l}return i.value},PZ=e=>async(t,n,s,r)=>{const o=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const l=new((r==null?void 0:r.Err)??e)(i.issues.map(c=>ro(c,o,so())));throw Z_(l,r==null?void 0:r.callee),l}return i.value},K_=e=>(t,n,s)=>{const r=s?{...s,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},r);if(o instanceof Promise)throw new kc;return o.issues.length?{success:!1,error:new(e??X_)(o.issues.map(i=>ro(i,r,so())))}:{success:!0,data:o.value}},OZ=K_(W_),Q_=e=>async(t,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},r);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(i=>ro(i,r,so())))}:{success:!0,data:o.value}},BZ=Q_(W_),IZ=/^[cC][^\s-]{8,}$/,HZ=/^[0-9a-z]+$/,UZ=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,FZ=/^[0-9a-vA-V]{20}$/,VZ=/^[A-Za-z0-9]{27}$/,qZ=/^[a-zA-Z0-9_-]{21}$/,GZ=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ZZ=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Hw=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,YZ=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,XZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function WZ(){return new RegExp(XZ,"u")}const KZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,QZ=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,JZ=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,eY=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tY=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,J_=/^[A-Za-z0-9_-]*$/,nY=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,sY=/^\+(?:[0-9]){6,14}[0-9]$/,eA="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",rY=new RegExp(`^${eA}$`);function tA(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function aY(e){return new RegExp(`^${tA(e)}$`)}function oY(e){const t=tA({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const s=`${t}(?:${n.join("|")})`;return new RegExp(`^${eA}T(?:${s})$`)}const iY=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},lY=/^\d+$/,cY=/^-?\d+(?:\.\d+)?/i,uY=/true|false/i,dY=/^[^A-Z]*$/,fY=/^[^a-z]*$/,fn=q("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),nA={number:"number",bigint:"bigint",object:"date"},sA=q("$ZodCheckLessThan",(e,t)=>{fn.init(e,t);const n=nA[typeof t.value];e._zod.onattach.push(s=>{const r=s._zod.bag,o=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:n,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),rA=q("$ZodCheckGreaterThan",(e,t)=>{fn.init(e,t);const n=nA[typeof t.value];e._zod.onattach.push(s=>{const r=s._zod.bag,o=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:n,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),mY=q("$ZodCheckMultipleOf",(e,t)=>{fn.init(e,t),e._zod.onattach.push(n=>{var s;(s=n._zod.bag).multipleOf??(s.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):NZ(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),hY=q("$ZodCheckNumberFormat",(e,t)=>{var i;fn.init(e,t),t.format=t.format||"float64";const n=(i=t.format)==null?void 0:i.includes("int"),s=n?"int":"number",[r,o]=EZ[t.format];e._zod.onattach.push(l=>{const c=l._zod.bag;c.format=t.format,c.minimum=r,c.maximum=o,n&&(c.pattern=lY)}),e._zod.check=l=>{const c=l.value;if(n){if(!Number.isInteger(c)){l.issues.push({expected:s,format:t.format,code:"invalid_type",input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}c<r&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),c>o&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inst:e})}}),gY=q("$ZodCheckMaxLength",(e,t)=>{var n;fn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!lv(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const r=s.value;if(r.length<=t.maximum)return;const i=fv(r);s.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),pY=q("$ZodCheckMinLength",(e,t)=>{var n;fn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!lv(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const r=s.value;if(r.length>=t.minimum)return;const i=fv(r);s.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),xY=q("$ZodCheckLengthEquals",(e,t)=>{var n;fn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!lv(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=s=>{const r=s.value,o=r.length;if(o===t.length)return;const i=fv(r),l=o>t.length;s.issues.push({origin:i,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),Dm=q("$ZodCheckStringFormat",(e,t)=>{var n,s;fn.init(e,t),e._zod.onattach.push(r=>{const o=r._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),vY=q("$ZodCheckRegex",(e,t)=>{Dm.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),yY=q("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=dY),Dm.init(e,t)}),bY=q("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=fY),Dm.init(e,t)}),wY=q("$ZodCheckIncludes",(e,t)=>{fn.init(e,t);const n=Rm(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=s,e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(s)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),jY=q("$ZodCheckStartsWith",(e,t)=>{fn.init(e,t);const n=new RegExp(`^${Rm(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),NY=q("$ZodCheckEndsWith",(e,t)=>{fn.init(e,t);const n=new RegExp(`.*${Rm(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),SY=q("$ZodCheckOverwrite",(e,t)=>{fn.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class kY{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(i=>i),r=Math.min(...s.map(i=>i.length-i.trimStart().length)),o=s.map(i=>i.slice(r)).map(i=>" ".repeat(this.indent*2)+i);for(const i of o)this.content.push(i)}compile(){const t=Function,n=this==null?void 0:this.args,r=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new t(...n,r.join(`
`))}}const CY={major:4,minor:0,patch:5},dt=q("$ZodType",(e,t)=>{var r;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=CY;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const o of s)for(const i of o._zod.onattach)i(e);if(s.length===0)(n=e._zod).deferred??(n.deferred=[]),(r=e._zod.deferred)==null||r.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,l,c)=>{let u=Yl(i),d;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(i))continue}else if(u)continue;const m=i.issues.length,h=f._zod.check(i);if(h instanceof Promise&&(c==null?void 0:c.async)===!1)throw new kc;if(d||h instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await h,i.issues.length!==m&&(u||(u=Yl(i,m)))});else{if(i.issues.length===m)continue;u||(u=Yl(i,m))}}return d?d.then(()=>i):i};e._zod.run=(i,l)=>{const c=e._zod.parse(i,l);if(c instanceof Promise){if(l.async===!1)throw new kc;return c.then(u=>o(u,s,l))}return o(c,s,l)}}e["~standard"]={validate:o=>{var i;try{const l=OZ(e,o);return l.success?{value:l.data}:{issues:(i=l.error)==null?void 0:i.issues}}catch{return BZ(e,o).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),mv=q("$ZodString",(e,t)=>{var n;dt.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??iY(e._zod.bag),e._zod.parse=(s,r)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),tt=q("$ZodStringFormat",(e,t)=>{Dm.init(e,t),mv.init(e,t)}),EY=q("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=ZZ),tt.init(e,t)}),_Y=q("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Hw(s))}else t.pattern??(t.pattern=Hw());tt.init(e,t)}),AY=q("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=YZ),tt.init(e,t)}),TY=q("$ZodURL",(e,t)=>{tt.init(e,t),e._zod.check=n=>{try{const s=n.value,r=new URL(s),o=r.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:nY.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!s.endsWith("/")&&o.endsWith("/")?n.value=o.slice(0,-1):n.value=o;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),MY=q("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=WZ()),tt.init(e,t)}),RY=q("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=qZ),tt.init(e,t)}),DY=q("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=IZ),tt.init(e,t)}),zY=q("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=HZ),tt.init(e,t)}),LY=q("$ZodULID",(e,t)=>{t.pattern??(t.pattern=UZ),tt.init(e,t)}),$Y=q("$ZodXID",(e,t)=>{t.pattern??(t.pattern=FZ),tt.init(e,t)}),PY=q("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=VZ),tt.init(e,t)}),OY=q("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=oY(t)),tt.init(e,t)}),BY=q("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=rY),tt.init(e,t)}),IY=q("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=aY(t)),tt.init(e,t)}),HY=q("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=GZ),tt.init(e,t)}),UY=q("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=KZ),tt.init(e,t),e._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv4"})}),FY=q("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=QZ),tt.init(e,t),e._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),VY=q("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=JZ),tt.init(e,t)}),qY=q("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=eY),tt.init(e,t),e._zod.check=n=>{const[s,r]=n.value.split("/");try{if(!r)throw new Error;const o=Number(r);if(`${o}`!==r)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function aA(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const GY=q("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=tY),tt.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{aA(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function ZY(e){if(!J_.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return aA(n)}const YY=q("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=J_),tt.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{ZY(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),XY=q("$ZodE164",(e,t)=>{t.pattern??(t.pattern=sY),tt.init(e,t)});function WY(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[s]=n;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const KY=q("$ZodJWT",(e,t)=>{tt.init(e,t),e._zod.check=n=>{WY(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),oA=q("$ZodNumber",(e,t)=>{dt.init(e,t),e._zod.pattern=e._zod.bag.pattern??cY,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const o=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...o?{received:o}:{}}),n}}),QY=q("$ZodNumber",(e,t)=>{hY.init(e,t),oA.init(e,t)}),JY=q("$ZodBoolean",(e,t)=>{dt.init(e,t),e._zod.pattern=uY,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),n}}),eX=q("$ZodUnknown",(e,t)=>{dt.init(e,t),e._zod.parse=n=>n}),tX=q("$ZodNever",(e,t)=>{dt.init(e,t),e._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function Uw(e,t,n){e.issues.length&&t.issues.push(...dv(n,e.issues)),t.value[n]=e.value}const nX=q("$ZodArray",(e,t)=>{dt.init(e,t),e._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),n;n.value=Array(r.length);const o=[];for(let i=0;i<r.length;i++){const l=r[i],c=t.element._zod.run({value:l,issues:[]},s);c instanceof Promise?o.push(c.then(u=>Uw(u,n,i))):Uw(c,n,i)}return o.length?Promise.all(o).then(()=>n):n}});function Xu(e,t,n){e.issues.length&&t.issues.push(...dv(n,e.issues)),t.value[n]=e.value}function Fw(e,t,n,s){e.issues.length?s[n]===void 0?n in s?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...dv(n,e.issues)):e.value===void 0?n in s&&(t.value[n]=void 0):t.value[n]=e.value}const sX=q("$ZodObject",(e,t)=>{dt.init(e,t);const n=G_(()=>{const f=Object.keys(t.shape);for(const h of f)if(!(t.shape[h]instanceof dt))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const m=CZ(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});Xe(e._zod,"propValues",()=>{const f=t.shape,m={};for(const h in f){const p=f[h]._zod;if(p.values){m[h]??(m[h]=new Set);for(const v of p.values)m[h].add(v)}}return m});const s=f=>{const m=new kY(["shape","payload","ctx"]),h=n.value,p=y=>{const w=Al(y);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};m.write("const input = payload.value;");const v=Object.create(null);let b=0;for(const y of h.keys)v[y]=`key_${b++}`;m.write("const newResult = {}");for(const y of h.keys)if(h.optionalKeys.has(y)){const w=v[y];m.write(`const ${w} = ${p(y)};`);const j=Al(y);m.write(`
        if (${w}.issues.length) {
          if (input[${j}] === undefined) {
            if (${j} in input) {
              newResult[${j}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${w}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${j}, ...iss.path] : [${j}],
              }))
            );
          }
        } else if (${w}.value === undefined) {
          if (${j} in input) newResult[${j}] = undefined;
        } else {
          newResult[${j}] = ${w}.value;
        }
        `)}else{const w=v[y];m.write(`const ${w} = ${p(y)};`),m.write(`
          if (${w}.issues.length) payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Al(y)}, ...iss.path] : [${Al(y)}]
          })));`),m.write(`newResult[${Al(y)}] = ${w}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const x=m.compile();return(y,w)=>x(f,y,w)};let r;const o=pp,i=!q_.jitless,c=i&&SZ.value,u=t.catchall;let d;e._zod.parse=(f,m)=>{d??(d=n.value);const h=f.value;if(!o(h))return f.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),f;const p=[];if(i&&c&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)r||(r=s(t.shape)),f=r(f,m);else{f.value={};const w=d.shape;for(const j of d.keys){const N=w[j],S=N._zod.run({value:h[j],issues:[]},m),k=N._zod.optin==="optional"&&N._zod.optout==="optional";S instanceof Promise?p.push(S.then(E=>k?Fw(E,f,j,h):Xu(E,f,j))):k?Fw(S,f,j,h):Xu(S,f,j)}}if(!u)return p.length?Promise.all(p).then(()=>f):f;const v=[],b=d.keySet,x=u._zod,y=x.def.type;for(const w of Object.keys(h)){if(b.has(w))continue;if(y==="never"){v.push(w);continue}const j=x.run({value:h[w],issues:[]},m);j instanceof Promise?p.push(j.then(N=>Xu(N,f,w))):Xu(j,f,w)}return v.length&&f.issues.push({code:"unrecognized_keys",keys:v,input:h,inst:e}),p.length?Promise.all(p).then(()=>f):f}});function Vw(e,t,n,s){for(const r of e)if(r.issues.length===0)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(r=>r.issues.map(o=>ro(o,s,so())))}),t}const rX=q("$ZodUnion",(e,t)=>{dt.init(e,t),Xe(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),Xe(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),Xe(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),Xe(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${n.map(s=>cv(s.source)).join("|")})$`)}}),e._zod.parse=(n,s)=>{let r=!1;const o=[];for(const i of t.options){const l=i._zod.run({value:n.value,issues:[]},s);if(l instanceof Promise)o.push(l),r=!0;else{if(l.issues.length===0)return l;o.push(l)}}return r?Promise.all(o).then(i=>Vw(i,n,e,s)):Vw(o,n,e,s)}}),aX=q("$ZodIntersection",(e,t)=>{dt.init(e,t),e._zod.parse=(n,s)=>{const r=n.value,o=t.left._zod.run({value:r,issues:[]},s),i=t.right._zod.run({value:r,issues:[]},s);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([c,u])=>qw(n,c,u)):qw(n,o,i)}});function vp(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(xp(e)&&xp(t)){const n=Object.keys(t),s=Object.keys(e).filter(o=>n.indexOf(o)!==-1),r={...e,...t};for(const o of s){const i=vp(e[o],t[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};r[o]=i.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<e.length;s++){const r=e[s],o=t[s],i=vp(r,o);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function qw(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Yl(e))return e;const s=vp(t.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const oX=q("$ZodEnum",(e,t)=>{dt.init(e,t);const n=wZ(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(s=>kZ.has(typeof s)).map(s=>typeof s=="string"?Rm(s):s.toString()).join("|")})$`),e._zod.parse=(s,r)=>{const o=s.value;return e._zod.values.has(o)||s.issues.push({code:"invalid_value",values:n,input:o,inst:e}),s}}),iX=q("$ZodTransform",(e,t)=>{dt.init(e,t),e._zod.parse=(n,s)=>{const r=t.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(i=>(n.value=i,n));if(r instanceof Promise)throw new kc;return n.value=r,n}}),lX=q("$ZodOptional",(e,t)=>{dt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Xe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Xe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${cv(n.source)})?$`):void 0}),e._zod.parse=(n,s)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,s):n.value===void 0?n:t.innerType._zod.run(n,s)}),cX=q("$ZodNullable",(e,t)=>{dt.init(e,t),Xe(e._zod,"optin",()=>t.innerType._zod.optin),Xe(e._zod,"optout",()=>t.innerType._zod.optout),Xe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${cv(n.source)}|null)$`):void 0}),Xe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,s)=>n.value===null?n:t.innerType._zod.run(n,s)}),uX=q("$ZodDefault",(e,t)=>{dt.init(e,t),e._zod.optin="optional",Xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(o=>Gw(o,t)):Gw(r,t)}});function Gw(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const dX=q("$ZodPrefault",(e,t)=>{dt.init(e,t),e._zod.optin="optional",Xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,s))}),fX=q("$ZodNonOptional",(e,t)=>{dt.init(e,t),Xe(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(o=>Zw(o,e)):Zw(r,e)}});function Zw(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const mX=q("$ZodCatch",(e,t)=>{dt.init(e,t),e._zod.optin="optional",Xe(e._zod,"optout",()=>t.innerType._zod.optout),Xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(o=>(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(i=>ro(i,s,so()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(o=>ro(o,s,so()))},input:n.value}),n.issues=[]),n)}}),hX=q("$ZodPipe",(e,t)=>{dt.init(e,t),Xe(e._zod,"values",()=>t.in._zod.values),Xe(e._zod,"optin",()=>t.in._zod.optin),Xe(e._zod,"optout",()=>t.out._zod.optout),Xe(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,s)=>{const r=t.in._zod.run(n,s);return r instanceof Promise?r.then(o=>Yw(o,t,s)):Yw(r,t,s)}});function Yw(e,t,n){return Yl(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const gX=q("$ZodReadonly",(e,t)=>{dt.init(e,t),Xe(e._zod,"propValues",()=>t.innerType._zod.propValues),Xe(e._zod,"values",()=>t.innerType._zod.values),Xe(e._zod,"optin",()=>t.innerType._zod.optin),Xe(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(Xw):Xw(r)}});function Xw(e){return e.value=Object.freeze(e.value),e}const pX=q("$ZodCustom",(e,t)=>{fn.init(e,t),dt.init(e,t),e._zod.parse=(n,s)=>n,e._zod.check=n=>{const s=n.value,r=t.fn(s);if(r instanceof Promise)return r.then(o=>Ww(o,n,s,e));Ww(r,n,s,e)}});function Ww(e,t,n,s){if(!e){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),t.issues.push(Cc(r))}}class xX{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const s=n[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const s={...this.get(n)??{}};return delete s.id,{...s,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function vX(){return new xX}const Wu=vX();function yX(e,t){return new e({type:"string",...ce(t)})}function bX(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ce(t)})}function Kw(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ce(t)})}function wX(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ce(t)})}function jX(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ce(t)})}function NX(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ce(t)})}function SX(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ce(t)})}function kX(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ce(t)})}function CX(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ce(t)})}function EX(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ce(t)})}function _X(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ce(t)})}function AX(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ce(t)})}function TX(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ce(t)})}function MX(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ce(t)})}function RX(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ce(t)})}function DX(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ce(t)})}function zX(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ce(t)})}function LX(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ce(t)})}function $X(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ce(t)})}function PX(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ce(t)})}function OX(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ce(t)})}function BX(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ce(t)})}function IX(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ce(t)})}function HX(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ce(t)})}function UX(e,t){return new e({type:"string",format:"date",check:"string_format",...ce(t)})}function FX(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ce(t)})}function VX(e,t){return new e({type:"string",format:"duration",check:"string_format",...ce(t)})}function qX(e,t){return new e({type:"number",checks:[],...ce(t)})}function GX(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...ce(t)})}function ZX(e,t){return new e({type:"boolean",...ce(t)})}function YX(e){return new e({type:"unknown"})}function XX(e,t){return new e({type:"never",...ce(t)})}function Qw(e,t){return new sA({check:"less_than",...ce(t),value:e,inclusive:!1})}function Ih(e,t){return new sA({check:"less_than",...ce(t),value:e,inclusive:!0})}function Jw(e,t){return new rA({check:"greater_than",...ce(t),value:e,inclusive:!1})}function Hh(e,t){return new rA({check:"greater_than",...ce(t),value:e,inclusive:!0})}function ej(e,t){return new mY({check:"multiple_of",...ce(t),value:e})}function iA(e,t){return new gY({check:"max_length",...ce(t),maximum:e})}function hf(e,t){return new pY({check:"min_length",...ce(t),minimum:e})}function lA(e,t){return new xY({check:"length_equals",...ce(t),length:e})}function WX(e,t){return new vY({check:"string_format",format:"regex",...ce(t),pattern:e})}function KX(e){return new yY({check:"string_format",format:"lowercase",...ce(e)})}function QX(e){return new bY({check:"string_format",format:"uppercase",...ce(e)})}function JX(e,t){return new wY({check:"string_format",format:"includes",...ce(t),includes:e})}function eW(e,t){return new jY({check:"string_format",format:"starts_with",...ce(t),prefix:e})}function tW(e,t){return new NY({check:"string_format",format:"ends_with",...ce(t),suffix:e})}function ou(e){return new SY({check:"overwrite",tx:e})}function nW(e){return ou(t=>t.normalize(e))}function sW(){return ou(e=>e.trim())}function rW(){return ou(e=>e.toLowerCase())}function aW(){return ou(e=>e.toUpperCase())}function oW(e,t,n){return new e({type:"array",element:t,...ce(n)})}function iW(e,t,n){return new e({type:"custom",check:"custom",fn:t,...ce(n)})}const lW=q("ZodISODateTime",(e,t)=>{OY.init(e,t),it.init(e,t)});function cW(e){return HX(lW,e)}const uW=q("ZodISODate",(e,t)=>{BY.init(e,t),it.init(e,t)});function dW(e){return UX(uW,e)}const fW=q("ZodISOTime",(e,t)=>{IY.init(e,t),it.init(e,t)});function mW(e){return FX(fW,e)}const hW=q("ZodISODuration",(e,t)=>{HY.init(e,t),it.init(e,t)});function gW(e){return VX(hW,e)}const pW=(e,t)=>{X_.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>LZ(e,n)},flatten:{value:n=>zZ(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},zm=q("ZodError",pW,{Parent:Error}),xW=$Z(zm),vW=PZ(zm),yW=K_(zm),bW=Q_(zm),jt=q("ZodType",(e,t)=>(dt.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),e.clone=(n,s)=>So(e,n,s),e.brand=()=>e,e.register=(n,s)=>(n.add(e,s),e),e.parse=(n,s)=>xW(e,n,s,{callee:e.parse}),e.safeParse=(n,s)=>yW(e,n,s),e.parseAsync=async(n,s)=>vW(e,n,s,{callee:e.parseAsync}),e.safeParseAsync=async(n,s)=>bW(e,n,s),e.spa=e.safeParseAsync,e.refine=(n,s)=>e.check(mK(n,s)),e.superRefine=n=>e.check(hK(n)),e.overwrite=n=>e.check(ou(n)),e.optional=()=>rj(e),e.nullable=()=>aj(e),e.nullish=()=>rj(aj(e)),e.nonoptional=n=>aK(e,n),e.array=()=>ao(e),e.or=n=>YW([e,n]),e.and=n=>WW(e,n),e.transform=n=>oj(e,JW(n)),e.default=n=>nK(e,n),e.prefault=n=>rK(e,n),e.catch=n=>iK(e,n),e.pipe=n=>oj(e,n),e.readonly=()=>uK(e),e.describe=n=>{const s=e.clone();return Wu.add(s,{description:n}),s},Object.defineProperty(e,"description",{get(){var n;return(n=Wu.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Wu.get(e);const s=e.clone();return Wu.add(s,n[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),cA=q("_ZodString",(e,t)=>{mv.init(e,t),jt.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...s)=>e.check(WX(...s)),e.includes=(...s)=>e.check(JX(...s)),e.startsWith=(...s)=>e.check(eW(...s)),e.endsWith=(...s)=>e.check(tW(...s)),e.min=(...s)=>e.check(hf(...s)),e.max=(...s)=>e.check(iA(...s)),e.length=(...s)=>e.check(lA(...s)),e.nonempty=(...s)=>e.check(hf(1,...s)),e.lowercase=s=>e.check(KX(s)),e.uppercase=s=>e.check(QX(s)),e.trim=()=>e.check(sW()),e.normalize=(...s)=>e.check(nW(...s)),e.toLowerCase=()=>e.check(rW()),e.toUpperCase=()=>e.check(aW())}),wW=q("ZodString",(e,t)=>{mv.init(e,t),cA.init(e,t),e.email=n=>e.check(bX(jW,n)),e.url=n=>e.check(kX(NW,n)),e.jwt=n=>e.check(IX(OW,n)),e.emoji=n=>e.check(CX(SW,n)),e.guid=n=>e.check(Kw(tj,n)),e.uuid=n=>e.check(wX(Ku,n)),e.uuidv4=n=>e.check(jX(Ku,n)),e.uuidv6=n=>e.check(NX(Ku,n)),e.uuidv7=n=>e.check(SX(Ku,n)),e.nanoid=n=>e.check(EX(kW,n)),e.guid=n=>e.check(Kw(tj,n)),e.cuid=n=>e.check(_X(CW,n)),e.cuid2=n=>e.check(AX(EW,n)),e.ulid=n=>e.check(TX(_W,n)),e.base64=n=>e.check(PX(LW,n)),e.base64url=n=>e.check(OX($W,n)),e.xid=n=>e.check(MX(AW,n)),e.ksuid=n=>e.check(RX(TW,n)),e.ipv4=n=>e.check(DX(MW,n)),e.ipv6=n=>e.check(zX(RW,n)),e.cidrv4=n=>e.check(LX(DW,n)),e.cidrv6=n=>e.check($X(zW,n)),e.e164=n=>e.check(BX(PW,n)),e.datetime=n=>e.check(cW(n)),e.date=n=>e.check(dW(n)),e.time=n=>e.check(mW(n)),e.duration=n=>e.check(gW(n))});function Wt(e){return yX(wW,e)}const it=q("ZodStringFormat",(e,t)=>{tt.init(e,t),cA.init(e,t)}),jW=q("ZodEmail",(e,t)=>{AY.init(e,t),it.init(e,t)}),tj=q("ZodGUID",(e,t)=>{EY.init(e,t),it.init(e,t)}),Ku=q("ZodUUID",(e,t)=>{_Y.init(e,t),it.init(e,t)}),NW=q("ZodURL",(e,t)=>{TY.init(e,t),it.init(e,t)}),SW=q("ZodEmoji",(e,t)=>{MY.init(e,t),it.init(e,t)}),kW=q("ZodNanoID",(e,t)=>{RY.init(e,t),it.init(e,t)}),CW=q("ZodCUID",(e,t)=>{DY.init(e,t),it.init(e,t)}),EW=q("ZodCUID2",(e,t)=>{zY.init(e,t),it.init(e,t)}),_W=q("ZodULID",(e,t)=>{LY.init(e,t),it.init(e,t)}),AW=q("ZodXID",(e,t)=>{$Y.init(e,t),it.init(e,t)}),TW=q("ZodKSUID",(e,t)=>{PY.init(e,t),it.init(e,t)}),MW=q("ZodIPv4",(e,t)=>{UY.init(e,t),it.init(e,t)}),RW=q("ZodIPv6",(e,t)=>{FY.init(e,t),it.init(e,t)}),DW=q("ZodCIDRv4",(e,t)=>{VY.init(e,t),it.init(e,t)}),zW=q("ZodCIDRv6",(e,t)=>{qY.init(e,t),it.init(e,t)}),LW=q("ZodBase64",(e,t)=>{GY.init(e,t),it.init(e,t)}),$W=q("ZodBase64URL",(e,t)=>{YY.init(e,t),it.init(e,t)}),PW=q("ZodE164",(e,t)=>{XY.init(e,t),it.init(e,t)}),OW=q("ZodJWT",(e,t)=>{KY.init(e,t),it.init(e,t)}),uA=q("ZodNumber",(e,t)=>{oA.init(e,t),jt.init(e,t),e.gt=(s,r)=>e.check(Jw(s,r)),e.gte=(s,r)=>e.check(Hh(s,r)),e.min=(s,r)=>e.check(Hh(s,r)),e.lt=(s,r)=>e.check(Qw(s,r)),e.lte=(s,r)=>e.check(Ih(s,r)),e.max=(s,r)=>e.check(Ih(s,r)),e.int=s=>e.check(nj(s)),e.safe=s=>e.check(nj(s)),e.positive=s=>e.check(Jw(0,s)),e.nonnegative=s=>e.check(Hh(0,s)),e.negative=s=>e.check(Qw(0,s)),e.nonpositive=s=>e.check(Ih(0,s)),e.multipleOf=(s,r)=>e.check(ej(s,r)),e.step=(s,r)=>e.check(ej(s,r)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Ha(e){return qX(uA,e)}const BW=q("ZodNumberFormat",(e,t)=>{QY.init(e,t),uA.init(e,t)});function nj(e){return GX(BW,e)}const IW=q("ZodBoolean",(e,t)=>{JY.init(e,t),jt.init(e,t)});function HW(e){return ZX(IW,e)}const UW=q("ZodUnknown",(e,t)=>{eX.init(e,t),jt.init(e,t)});function sj(){return YX(UW)}const FW=q("ZodNever",(e,t)=>{tX.init(e,t),jt.init(e,t)});function VW(e){return XX(FW,e)}const qW=q("ZodArray",(e,t)=>{nX.init(e,t),jt.init(e,t),e.element=t.element,e.min=(n,s)=>e.check(hf(n,s)),e.nonempty=n=>e.check(hf(1,n)),e.max=(n,s)=>e.check(iA(n,s)),e.length=(n,s)=>e.check(lA(n,s)),e.unwrap=()=>e.element});function ao(e,t){return oW(qW,e,t)}const GW=q("ZodObject",(e,t)=>{sX.init(e,t),jt.init(e,t),Xe(e,"shape",()=>t.shape),e.keyof=()=>KW(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:sj()}),e.loose=()=>e.clone({...e._zod.def,catchall:sj()}),e.strict=()=>e.clone({...e._zod.def,catchall:VW()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>TZ(e,n),e.merge=n=>MZ(e,n),e.pick=n=>_Z(e,n),e.omit=n=>AZ(e,n),e.partial=(...n)=>RZ(dA,e,n[0]),e.required=(...n)=>DZ(fA,e,n[0])});function _r(e,t){const n={type:"object",get shape(){return uv(this,"shape",{...e}),this.shape},...ce(t)};return new GW(n)}const ZW=q("ZodUnion",(e,t)=>{rX.init(e,t),jt.init(e,t),e.options=t.options});function YW(e,t){return new ZW({type:"union",options:e,...ce(t)})}const XW=q("ZodIntersection",(e,t)=>{aX.init(e,t),jt.init(e,t)});function WW(e,t){return new XW({type:"intersection",left:e,right:t})}const yp=q("ZodEnum",(e,t)=>{oX.init(e,t),jt.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(s,r)=>{const o={};for(const i of s)if(n.has(i))o[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new yp({...t,checks:[],...ce(r),entries:o})},e.exclude=(s,r)=>{const o={...t.entries};for(const i of s)if(n.has(i))delete o[i];else throw new Error(`Key ${i} not found in enum`);return new yp({...t,checks:[],...ce(r),entries:o})}});function KW(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new yp({type:"enum",entries:n,...ce(t)})}const QW=q("ZodTransform",(e,t)=>{iX.init(e,t),jt.init(e,t),e._zod.parse=(n,s)=>{n.addIssue=o=>{if(typeof o=="string")n.issues.push(Cc(o,n.value,t));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!0),n.issues.push(Cc(i))}};const r=t.transform(n.value,n);return r instanceof Promise?r.then(o=>(n.value=o,n)):(n.value=r,n)}});function JW(e){return new QW({type:"transform",transform:e})}const dA=q("ZodOptional",(e,t)=>{lX.init(e,t),jt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function rj(e){return new dA({type:"optional",innerType:e})}const eK=q("ZodNullable",(e,t)=>{cX.init(e,t),jt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function aj(e){return new eK({type:"nullable",innerType:e})}const tK=q("ZodDefault",(e,t)=>{uX.init(e,t),jt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function nK(e,t){return new tK({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const sK=q("ZodPrefault",(e,t)=>{dX.init(e,t),jt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function rK(e,t){return new sK({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const fA=q("ZodNonOptional",(e,t)=>{fX.init(e,t),jt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function aK(e,t){return new fA({type:"nonoptional",innerType:e,...ce(t)})}const oK=q("ZodCatch",(e,t)=>{mX.init(e,t),jt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function iK(e,t){return new oK({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const lK=q("ZodPipe",(e,t)=>{hX.init(e,t),jt.init(e,t),e.in=t.in,e.out=t.out});function oj(e,t){return new lK({type:"pipe",in:e,out:t})}const cK=q("ZodReadonly",(e,t)=>{gX.init(e,t),jt.init(e,t)});function uK(e){return new cK({type:"readonly",innerType:e})}const dK=q("ZodCustom",(e,t)=>{pX.init(e,t),jt.init(e,t)});function fK(e){const t=new fn({check:"custom"});return t._zod.check=e,t}function mK(e,t={}){return iW(dK,e,t)}function hK(e){const t=fK(n=>(n.addIssue=s=>{if(typeof s=="string")n.issues.push(Cc(s,n.value,t._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(Cc(r))}},e(n.value,n)));return t}const gK=_r({type:Wt(),id:Wt()}),pK=_r({skill:Wt(),level:Ha()}),xK=_r({skillLevel:pK.optional(),items:ao(gK).optional()}),vK=_r({base:Wt(),subtext:Wt()}),yK=_r({rank:Ha(),edid:Wt(),name:Wt(),description:vK,prerequisites:xK}),bK=_r({x:Ha(),y:Ha(),horizontal:Ha(),vertical:Ha()}),wK=_r({parents:ao(Wt()),children:ao(Wt())}),jK=_r({edid:Wt(),name:Wt(),ranks:ao(yK),totalRanks:Ha(),connections:wK,isRoot:HW(),position:bK}),NK=_r({treeId:Wt(),treeName:Wt(),treeDescription:Wt(),category:Wt(),perks:ao(jK)});ao(NK);function SK(e){return e.length===0?{minX:0,maxX:0,minY:0,maxY:0}:e.reduce((t,n)=>({minX:Math.min(t.minX,n.x),maxX:Math.max(t.maxX,n.x),minY:Math.min(t.minY,n.y),maxY:Math.max(t.maxY,n.y)}),{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0})}const kK=(e,t)=>({perkNode:n=>a.jsx(XE,{...n,onTogglePerk:e,onRankChange:t})}),Uh={cellWidth:240,cellHeight:140,nodeWidth:140,nodeHeight:80,gridGap:40,padding:80};function CK(e,t,n){const{x:s,y:r,horizontal:o,vertical:i}=e,l=t.maxX-s+t.minX,c=-o,u=t.maxY-r+t.minY,d=-i,f=(l-t.minX)*n.cellWidth+(l-t.minX)*n.gridGap+n.padding+n.cellWidth/2,m=(u-t.minY)*n.cellHeight+(u-t.minY)*n.gridGap+n.padding+n.cellHeight/2,h=c*(n.cellWidth/2-n.nodeWidth/2),p=d*(n.cellHeight/2-n.nodeHeight/2),v=f+h,b=m+p;return{x:v,y:b,gridX:l,gridY:u,horizontal:c,vertical:d}}function EK(e,t,n,s){const r=e-s.padding,o=t-s.padding,i=Math.floor(r/(s.cellWidth+s.gridGap)),l=Math.floor(o/(s.cellHeight+s.gridGap)),c=i*s.cellWidth+i*s.gridGap+s.padding+s.cellWidth/2,u=l*s.cellHeight+l*s.gridGap+s.padding+s.cellHeight/2,d=e-c,f=t-u,m=s.cellWidth/2-s.nodeWidth/2,h=s.cellHeight/2-s.nodeHeight/2,p=Math.max(-1,Math.min(1,d/m)),v=Math.max(-1,Math.min(1,f/h)),b=n.maxX-i+n.minX,x=n.maxY-l+n.minY,y=-p,w=-v;return{x:e,y:t,gridX:b,gridY:x,horizontal:y,vertical:w}}function _K(e,t,n){const s=Math.ceil(Math.sqrt(t)),r=Math.floor(e/s),o=e%s,i=o*(n.cellWidth+n.gridGap)+n.padding+n.cellWidth/2,l=r*(n.cellHeight+n.gridGap)+n.padding+n.cellHeight/2;return{x:i,y:l,gridX:o,gridY:r,horizontal:0,vertical:0}}function AK({tree:e,onTogglePerk:t,onRankChange:n,selectedPerks:s,className:r}){const[o,i]=L.useState(null),[l,c]=g.useState(new Map),[u,d]=g.useState(!1),[f,m]=g.useState(!1),[h,p]=g.useState(null),v=g.useMemo(()=>{if(!e)return null;const A=ZE(e);return A.success?A.data:(console.error("Invalid perk tree data:",A.error),null)},[e]);L.useEffect(()=>{if(!v){c(new Map);return}console.log("Loading saved positions for tree:",v.treeId),console.log("Tree perks count:",v.perks.length),console.log("Tree perks:",v.perks.map(A=>({edid:A.edid,name:A.name}))),d(!0),YE(v.treeId).then(A=>{if(console.log("Loaded saved positions:",A?"Found":"Not found"),A){const D=mw(v.treeId,A);console.log("Loaded positions count:",D.size),console.log("Loaded positions keys:",Array.from(D.keys())),c(D)}else c(new Map)}).catch(A=>{console.warn("Failed to load saved positions:",A),c(new Map)}).finally(()=>{d(!1)})},[v==null?void 0:v.treeId]);const b=g.useMemo(()=>kK(t,n),[t,n]),x=g.useMemo(()=>{if(!v||u)return new Map;const A=new Map,D=v.perks.map(B=>B.position).filter(B=>B!==void 0);let M={minX:0,maxX:0,minY:0,maxY:0};D.length>0&&(M=SK(D)),p(M);let R=0;return v.perks.forEach(B=>{const U=l.get(B.edid);if(U){A.set(B.edid,U);return}if(B.position){const V=CK(B.position,M,Uh);A.set(B.edid,V);return}const I=_K(R,v.perks.length,Uh);A.set(B.edid,I),R++}),A},[v,l,u]),y=g.useMemo(()=>{if(!v)return{saved:0,avif:0,default:0,total:0};let A=0,D=0,M=0;const R=v.perks.find(I=>I.edid==="LoreRimTrapper_Rank1"),B=v.perks.find(I=>I.edid==="LoreRimTrapper_Rank2"),U=v.perks.find(I=>I.edid==="LoreRimTrapper_Rank3");if(R){console.log("Found Trapper perk:",R);const I=l.get("LoreRimTrapper_Rank1");console.log("Trapper saved position:",I),console.log("Trapper embedded position:",R.position),console.log("Trapper connections:",R.connections)}else console.log("Trapper perk NOT found in tree!");if(B){console.log("Found Poisoned Clamps perk:",B);const I=l.get("LoreRimTrapper_Rank2");console.log("Poisoned Clamps saved position:",I),console.log("Poisoned Clamps embedded position:",B.position),console.log("Poisoned Clamps connections:",B.connections)}else console.log("Poisoned Clamps perk NOT found in tree!");if(U){console.log("Found Salt on the Wound perk:",U);const I=l.get("LoreRimTrapper_Rank3");console.log("Salt on the Wound saved position:",I),console.log("Salt on the Wound embedded position:",U.position)}else console.log("Salt on the Wound perk NOT found in tree!");return v.perks.forEach(I=>{l.get(I.edid)?A++:I.position?D++:M++}),{saved:A,avif:D,default:M,total:v.perks.length}},[v,l]),w=g.useMemo(()=>{if(!v||u)return[];const A=v.perks.map(D=>{var V,Z,J,ie;const M=D.edid,R=x.get(M)||{x:0,y:0},B=((Z=(V=D.connections)==null?void 0:V.children)==null?void 0:Z.length)>0||!1,U=((ie=(J=D.connections)==null?void 0:J.parents)==null?void 0:ie.length)===0||!1,I=!l.get(M)&&!D.position;return M.includes("LoreRimTrapper")&&(console.log(`Node ${M} position:`,R),console.log(`Node ${M} hasChildren:`,B),console.log(`Node ${M} isRoot:`,U),console.log(`Node ${M} hasNoPosition:`,I)),{id:M,type:"perkNode",position:{x:R.x,y:R.y},draggable:f||I,data:{...D,selected:!1,hasChildren:B,isRoot:U,hasNoPosition:I}}});return console.log("Total nodes created:",A.length),console.log("Trapper-related nodes:",A.filter(D=>D.id.includes("LoreRimTrapper"))),A},[v,x,f,u,l]),j=g.useMemo(()=>{var M,R,B;if(!v)return[];const A=[],D=v.perks.find(U=>U.edid==="LoreRimTrapper_Rank1");return D&&(console.log("Trapper children connections:",(M=D.connections)==null?void 0:M.children),(B=(R=D.connections)==null?void 0:R.children)==null||B.forEach(U=>{const I=v.perks.some(V=>V.edid===U);console.log(`Trapper child ${U} exists:`,I)})),v.perks.forEach(U=>{var V;const I=U.edid;(V=U.connections)!=null&&V.children&&U.connections.children.forEach(Z=>{if(Z===I)return;v.perks.some(ie=>ie.edid===Z)&&A.push({id:`${I}-${Z}`,source:I,target:Z,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),console.log("Total edges created:",A.length),console.log("Edge connections:",A.map(U=>`${U.source} -> ${U.target}`)),A},[v]),[N,S,k]=HE(w),[E,C,_]=UE(j);L.useEffect(()=>{S(w)},[w,S]),L.useEffect(()=>{v&&S(A=>A.map(D=>{const M=s.find(B=>B.edid===D.id),R=M!==void 0;return{...D,draggable:f,data:{...D.data,selected:R,currentRank:(M==null?void 0:M.currentRank)||0}}}))},[s,S,v,f]),L.useEffect(()=>{C(j)},[j,C]),L.useEffect(()=>{v&&N.length>0&&o&&setTimeout(()=>{o.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[v==null?void 0:v.treeId,o]);const P=g.useCallback(A=>C(D=>q0(A,D)),[C]),O=g.useCallback((A,D)=>{if(!f||!h)return;const M=EK(D.position.x,D.position.y,h,Uh),R=new Map(l);R.set(D.id,M),c(R)},[f,l,h]),$=g.useCallback(()=>{if(!v)return;const A=tq(v,x);nq(A)},[v,x]),T=g.useCallback(A=>{var R;const D=(R=A.target.files)==null?void 0:R[0];if(!D||!v)return;const M=new FileReader;M.onload=B=>{var U;try{const I=JSON.parse((U=B.target)==null?void 0:U.result);if(I.treeId===v.treeId){const V=mw(v.treeId,I);c(V)}else alert("Position file does not match current tree!")}catch(I){alert("Error loading position file!"),console.error("Error loading positions:",I)}},M.readAsText(D)},[v]),z=g.useCallback(()=>{m(!f)},[f]);return v?a.jsxs("div",{className:`w-full h-full bg-background rounded-lg border overflow-auto ${r||""}`,children:[a.jsx("div",{className:"p-4 border-b bg-muted/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Experimental AVIF Grid Canvas (Mirrored + Enhanced Spacing)"}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Bottom-up tree with left-right mirroring using enhanced grid spacing",l.size>0&&!u&&a.jsx("span",{className:"text-green-600 ml-2",children:"• Using saved positions"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 text-xs text-blue-600",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),"Loading positions..."]}),!u&&y.total>0&&a.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 text-xs bg-muted/30 rounded border",children:[a.jsxs("span",{className:"text-green-600",children:["Saved: ",y.saved]}),a.jsxs("span",{className:"text-blue-600",children:["AVIF: ",y.avif]}),a.jsxs("span",{className:"text-red-600",children:["Default: ",y.default]}),a.jsxs("span",{className:"text-muted-foreground",children:["Total: ",y.total]})]}),a.jsx("button",{onClick:z,className:`px-3 py-1 text-xs rounded border ${f?"bg-blue-500 text-white border-blue-500":"bg-background text-foreground border-border hover:bg-muted"}`,children:f?"Exit Edit":"Edit Mode"}),a.jsx("button",{onClick:$,className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted",children:"Save Positions"}),a.jsxs("label",{className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted cursor-pointer",children:["Load Positions",a.jsx("input",{type:"file",accept:".json",onChange:T,className:"hidden"})]})]})]})}),a.jsx("div",{className:"w-full h-full min-h-[400px]",style:{zIndex:Dt.CONTENT},children:a.jsxs(K0,{nodes:N,edges:E,onNodesChange:k,onEdgesChange:_,onConnect:P,onInit:i,onNodeDragStop:O,nodeTypes:b,nodesDraggable:f,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},style:{backgroundColor:"hsl(var(--background))"},children:[a.jsx(GE,{color:"hsl(var(--muted-foreground))",gap:20,size:1,style:{backgroundColor:"hsl(var(--background))"}}),a.jsx(VE,{})]})})]}):a.jsx("div",{className:`flex items-center justify-center p-8 text-muted-foreground ${r||""}`,children:a.jsx("p",{children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function TK(){var m;const{skills:e,selectedSkill:t,perkTree:n,selectedPerks:s,availablePerks:r,onSkillSelect:o,onPerkSelect:i,onPerkRankChange:l,loading:c,error:u}=S_(),{build:d}=pt(),f=g.useMemo(()=>!n||!s.length?[]:s.map(h=>{var b,x;const p=n.perks.find(y=>y.edid===h);if(!p)return null;const v=((x=(b=d.perks)==null?void 0:b.ranks)==null?void 0:x[h])||0;return{...p,selectedRank:v}}).filter(Boolean),[n,s,(m=d.perks)==null?void 0:m.ranks]);return c?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Loading skills..."})}):u?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsxs("p",{className:"text-destructive",children:["Error loading skills: ",u]})}):a.jsx("div",{className:"container mx-auto p-6 space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Skills - Experimental AVIF Grid"}),a.jsx("p",{className:"text-muted-foreground",children:"Experimental perk tree visualization using AVIF coordinate system"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("label",{className:"text-sm font-medium",children:"Select Skill:"}),a.jsxs(Kc,{children:[a.jsx(Qc,{asChild:!0,children:a.jsxs(G,{variant:"outline",className:"w-[300px] justify-between",children:[t?t.name:"Choose a skill to view its perk tree",a.jsx(En,{className:"h-4 w-4"})]})}),a.jsx(fl,{className:"w-[300px] max-h-[400px] overflow-y-auto",children:e.map(h=>a.jsx(ss,{onClick:()=>o(h.id),className:"cursor-pointer",children:h.name},h.id))})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:t?`${t.name} Perk Tree`:"Perk Tree"}),a.jsx("div",{className:"bg-background border rounded-lg h-[600px]",children:a.jsx(AK,{tree:n||void 0,onTogglePerk:i,onRankChange:l,selectedPerks:f,className:"h-full"})})]}),t&&n&&a.jsxs("div",{className:"bg-muted/20 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium mb-2",children:"Debug Information"}),a.jsxs("div",{className:"text-xs space-y-1 text-muted-foreground",children:[a.jsxs("p",{children:["Selected Skill: ",t.name]}),a.jsxs("p",{children:["Perk Tree: ",n.treeName]}),a.jsxs("p",{children:["Total Perks: ",n.perks.length]}),a.jsxs("p",{children:["Selected Perks: ",s.length]}),a.jsxs("p",{children:["Available Perks: ",r.length]}),a.jsxs("p",{children:["Perks with Position Data:"," ",n.perks.filter(h=>h.position).length]}),n.perks.length>0&&n.perks[0].position&&a.jsxs("p",{children:["Sample Position: X=",n.perks[0].position.x,", Y=",n.perks[0].position.y,", H=",n.perks[0].position.horizontal,", V=",n.perks[0].position.vertical]})]})]})]})]})})}function MK(e={}){const{autoLoad:t=!0,refreshOnMount:n=!1}=e,{data:s,loading:r,error:o,load:i}=qo(),l=g.useCallback(async()=>{t&&s.length===0&&await i()},[t,s.length,i]),c=g.useCallback(async()=>{await i()},[i]),u=g.useCallback(()=>{},[]);g.useEffect(()=>{t&&s.length===0&&l()},[t,s.length,l]),g.useEffect(()=>{n&&c()},[n,c]);const d=s.length,f=[...new Set(s.map(y=>y.school).filter(Boolean))],m=[...new Set(s.map(y=>y.level).filter(Boolean))],h=new Date().toISOString(),p=s.length>0?{spells:s,totalCount:d,schools:f,levels:m,lastUpdated:h}:null,v=g.useCallback(y=>qo.getState().getByEditorId(y),[]),b=g.useCallback(y=>qo.getState().getBySchool(y),[]),x=g.useCallback(y=>qo.getState().getByLevel(y),[]);return{spells:s,spellData:p,loading:r,error:o,totalCount:d,schools:f,levels:m,lastUpdated:h,loadSpells:l,refresh:c,clearError:u,getSpellByEditorId:v,getSpellsBySchool:b,getSpellsByLevel:x}}function RK(){const[e,t]=g.useState(null),[n,s]=g.useState("grid");return{selectedSpell:e,viewMode:n,setSelectedSpell:t,setViewMode:s}}const DK="bg-white dark:bg-white";function zK({school:e,size:t="md",className:n}){const s=Dw[e]||Dw.Mysticism;return a.jsx("div",{className:H("flex items-center justify-center rounded-full overflow-hidden",DK,rZ[t],n),title:`${e} magic`,children:a.jsx(s,{className:"w-full h-full object-contain text-black dark:text-black"})})}const LK={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"};function mA({school:e,size:t="md",variant:n="default",className:s}){const r=sZ[e]||"bg-gray-500 text-white";return a.jsx("span",{className:H("inline-flex items-center rounded-full font-medium",aZ[t],n==="default"?r:LK[n],s),children:e})}const $K={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},PK={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"},OK={Novice:"bg-gray-500 text-white",Apprentice:"bg-green-500 text-white",Adept:"bg-blue-500 text-white",Expert:"bg-purple-500 text-white",Master:"bg-yellow-500 text-black"},BK={Novice:1,Apprentice:2,Adept:3,Expert:4,Master:5};function hA({level:e,size:t="md",variant:n="default",className:s}){const r=OK[e]||"bg-gray-500 text-white";return a.jsx("span",{className:H("inline-flex items-center rounded-full font-medium",$K[t],n==="default"?r:PK[n],s),title:`Level ${BK[e]||0}`,children:e})}const IK={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},HK={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"},UK=e=>e===0?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":e<=25?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":e<=50?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":e<=100?"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400";function gA({cost:e,size:t="md",variant:n="default",showIcon:s=!0,className:r}){const o=UK(e),i=t==="sm"?"h-3 w-3":t==="lg"?"h-4 w-4":"h-3.5 w-3.5";return a.jsxs("span",{className:H("inline-flex items-center gap-1 rounded-full font-medium",IK[t],n==="default"?o:HK[n],r),title:`${e} Magicka`,children:[s&&a.jsx(zs,{className:i}),e===0?"Free":e]})}function FK({stats:e,title:t="Spell Stats",compact:n=!1,className:s}){return!(e.duration!==void 0||e.area!==void 0||e.magnitude!==void 0)&&e.magickaCost===0?null:a.jsxs("div",{className:H("space-y-2",s),children:[t&&a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:t}),a.jsxs("div",{className:H("grid gap-2",n?"grid-cols-2":"grid-cols-1"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(zs,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium",children:e.magickaCost===0?"Free":`${e.magickaCost} MP`})]}),e.duration!==void 0&&e.duration>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(ON,{className:"h-4 w-4 text-blue-500"}),a.jsxs("span",{className:"font-medium",children:[e.duration,"s"]})]}),e.area!==void 0&&e.area>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Pd,{className:"h-4 w-4 text-green-500"}),a.jsxs("span",{className:"font-medium",children:[e.area,"ft"]})]}),e.magnitude!==void 0&&e.magnitude>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"h-4 w-4 text-purple-500 font-bold",children:"⚡"}),a.jsx("span",{className:"font-medium",children:e.magnitude})]})]})]})}function VK({tags:e,title:t="Tags",compact:n=!1,maxDisplay:s=5,className:r}){if(!e||e.length===0)return null;const o=e.slice(0,s),i=e.length>s;return a.jsxs("div",{className:H("space-y-2",r),children:[t&&a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a.jsx(UN,{className:"h-4 w-4"}),t,e.length>1&&a.jsxs("span",{className:"text-xs text-muted-foreground/70",children:["(",e.length,")"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.map((l,c)=>a.jsx("span",{className:H("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium","bg-muted text-muted-foreground border border-border/50",n?"text-xs":"text-sm"),children:l},c)),i&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-muted/50 text-muted-foreground/70",children:["+",e.length-s]})]})]})}function pA({spell:e,onClick:t,className:n,compact:s=!1}){const r=(o,i)=>{var l,c,u;return o.replace(/<mag>/gi,((l=i.magnitude)==null?void 0:l.toString())||"0").replace(/<dur>/gi,((c=i.duration)==null?void 0:c.toString())||"0").replace(/<area>/gi,((u=i.area)==null?void 0:u.toString())||"0")};return a.jsxs(xe,{className:H("p-6 cursor-pointer hover:shadow-md transition-shadow",n),onClick:t,children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(zK,{school:e.school,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(Qe,{className:"text-foreground font-semibold",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(mA,{school:e.school,size:"sm"}),a.jsx(hA,{level:e.level,size:"sm"}),a.jsx(gA,{cost:e.magickaCost,size:"sm"})]})]})]})}),e.effects&&e.effects.filter(o=>o.description).length>0&&a.jsxs("div",{children:[a.jsx(li,{className:"text-muted-foreground mb-2",children:"Effects"}),a.jsx("div",{className:"space-y-2",children:e.effects.filter(o=>o.description).map((o,i)=>a.jsxs("div",{className:"p-2 rounded bg-muted border text-sm",children:[a.jsx(De,{text:r(o.description,o),options:uS(),className:"text-muted-foreground"}),a.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground mt-1",children:[o.magnitude>0&&a.jsxs("span",{children:["Magnitude: ",o.magnitude]}),o.duration>0&&a.jsxs("span",{children:["Duration: ",o.duration,"s"]}),o.area>0&&a.jsxs("span",{children:["Area: ",o.area,"ft"]})]})]},i))})]})]})}const qK={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"};function GK({spells:e,variant:t="default",showEffects:n=!0,showTags:s=!0,columns:r=3,className:o="",onSpellClick:i}){return e.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No spells found"})}):a.jsx("div",{className:`grid gap-4 ${qK[r]} ${o}`,children:e.map((l,c)=>a.jsx(pA,{spell:l,onClick:()=>i==null?void 0:i(l),compact:t==="compact"},`${l.name}-${l.editorId}-${c}`))})}function ZK({spells:e,variant:t="default",showEffects:n=!0,showTags:s=!0,className:r="",onSpellClick:o}){return e.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No spells found"})}):a.jsx("div",{className:`space-y-4 ${r}`,children:e.map((i,l)=>a.jsx(pA,{spell:i,onClick:()=>o==null?void 0:o(i),compact:t==="compact"},`${i.name}-${i.editorId}-${l}`))})}const YK={Destruction:Zf,Restoration:Qi,Conjuration:Nx,Illusion:Gf,Alteration:es,"":sa};function XK({spell:e,isOpen:t,onOpenChange:n}){var r;if(!e)return null;const s=YK[e.school]||sa;return a.jsx(p0,{open:t,onOpenChange:n,side:"right",title:e.name,description:`${e.school} • ${e.level} • ${e.magickaCost} MP`,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(s,{className:"w-16 h-16 text-muted-foreground"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(Wr,{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(mA,{school:e.school,size:"sm"}),a.jsx(hA,{level:e.level,size:"sm"}),a.jsx(gA,{cost:e.magickaCost,size:"sm"})]}),a.jsx(De,{text:e.description})]})]}),a.jsx(Vr,{}),a.jsx(FK,{stats:{magickaCost:e.magickaCost||0,duration:e.maxDuration&&e.maxDuration>0?e.maxDuration:void 0,area:e.maxArea&&e.maxArea>0?e.maxArea:void 0,magnitude:e.totalMagnitude&&e.totalMagnitude>0?e.totalMagnitude:void 0}}),a.jsx(Vr,{}),e.hasEffects&&a.jsxs("div",{children:[a.jsx(Qe,{className:"text-lg font-semibold mb-3",children:"Effects"}),a.jsx("div",{className:"space-y-2",children:e.effects.filter((o,i,l)=>{const c=o.name.replace(/\s*\(Single\)|\s*\(Dual\)/i,""),u=l.findIndex(d=>d.name.replace(/\s*\(Single\)|\s*\(Dual\)/i,"")===c&&d.magnitude===o.magnitude&&d.duration===o.duration);return i===u}).map((o,i)=>a.jsxs("div",{className:"p-3 rounded bg-muted border",children:[a.jsx("div",{className:"font-medium text-foreground mb-2",children:o.name}),o.description&&a.jsx(De,{text:o.description,className:"text-sm text-muted-foreground mb-2"}),a.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[o.magnitude>0&&a.jsxs("span",{children:["Magnitude: ",o.magnitude]}),o.duration>0&&a.jsxs("span",{children:["Duration: ",o.duration,"s"]}),o.area>0&&a.jsxs("span",{children:["Area: ",o.area,"ft"]})]})]},i))})]}),e.tags&&e.tags.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(Vr,{}),a.jsx(VK,{tags:e.tags,title:"Tags",maxDisplay:20})]}),(e.tome||((r=e.vendors)==null?void 0:r.length)||e.halfCostPerk)&&a.jsxs(a.Fragment,{children:[a.jsx(Vr,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Qe,{className:"text-lg font-semibold",children:"Additional Information"}),e.tome&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Hc,{className:"w-4 h-4 text-muted-foreground"}),a.jsx(li,{className:"text-muted-foreground",children:"Spell Tome"})]}),a.jsx(Ze,{className:"text-sm",children:e.tome})]}),e.vendors&&e.vendors.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(li,{className:"text-muted-foreground",children:"Available From"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.vendors.map((o,i)=>a.jsx(K,{variant:"outline",className:"text-xs",children:o},i))})]}),e.halfCostPerk&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zs,{className:"w-4 h-4 text-muted-foreground"}),a.jsx(li,{className:"text-muted-foreground",children:"Half Cost Perk"})]}),a.jsx(Ze,{className:"text-sm",children:e.halfCostPerkName})]})]})]}),a.jsx(Vr,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Qe,{className:"text-lg font-semibold",children:"Game Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Editor ID:"}),a.jsx("span",{className:"break-all font-mono",children:e.editorId})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"School:"}),a.jsx("span",{children:e.school})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Level:"}),a.jsx("span",{children:e.level})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Effects:"}),a.jsx("span",{children:e.effectCount})]})]})]})]})})}function WK(){const{spells:e,loading:t,error:n}=MK(),{viewMode:s,setViewMode:r}=RK(),o=Array.isArray(e)?e:[],[i,l]=g.useState(null),[c,u]=g.useState(!1),[d,f]=g.useState("alphabetical"),m=N=>{l(N),u(!0)},h=g.useMemo(()=>{if(console.log("Generating search categories directly:",{safeSpellsLength:o.length,firstSpell:o[0]}),o.length===0)return[];const N=[...new Set(o.map(k=>k.school))],S=[...new Set(o.map(k=>k.level))];return console.log("Extracted categories:",{schools:N,levels:S}),[{id:"keywords",name:"Fuzzy Search",placeholder:"Search spells by name, school, level, or effects...",options:[]},{id:"schools",name:"Magic Schools",placeholder:"Filter by school...",options:N.map(k=>({id:`school-${k}`,label:k,value:k,category:"Magic Schools",description:`${k} spells`}))},{id:"levels",name:"Spell Levels",placeholder:"Filter by level...",options:S.map(k=>({id:`level-${k}`,label:k,value:k,category:"Spell Levels",description:`${k} spells`}))}]},[o]);g.useEffect(()=>{console.log("SpellPageView Debug:",{spellsLength:(e==null?void 0:e.length)||0,safeSpellsLength:o.length,loading:t,error:n,searchCategoriesLength:(h==null?void 0:h.length)||0,searchCategories:h})},[e,o,t,n,h]);const[p,v]=g.useState([]),b=N=>{let S;typeof N=="string"?S={id:`custom-${N}`,label:N,value:N,category:"Fuzzy Search"}:S={id:`${N.category}-${N.id}`,label:N.label,value:N.value,category:N.category},p.some(k=>k.value===S.value&&k.category===S.category)||v(k=>[...k,S])},x=N=>{v(S=>S.filter(k=>k.id!==N))},y=()=>{v([])},w=o.filter(N=>p.length===0?!0:p.every(S=>{switch(S.category){case"Magic Schools":return N.school===S.value;case"Spell Levels":return N.level===S.value;case"Fuzzy Search":const k=S.value.toLowerCase();return N.name.toLowerCase().includes(k)||N.school.toLowerCase().includes(k)||N.level.toLowerCase().includes(k)||N.effects.some(E=>E.description.toLowerCase().includes(k));default:return!0}})),j=g.useMemo(()=>[...w].sort((N,S)=>{switch(d){case"alphabetical":return N.name.localeCompare(S.name);case"school":const k=N.school.localeCompare(S.school);return k!==0?k:N.name.localeCompare(S.name);case"level":const E=zw[N.level]||0,C=zw[S.level]||0;return E!==C?E-C:N.name.localeCompare(S.name);default:return 0}}),[w,d]);return t?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading spells..."})]})}):n?a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("p",{className:"text-destructive mb-4",children:["Error loading spells: ",n]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded",children:["Debug: ",o.length," spells, ",h.length," search categories",h.length>0&&a.jsxs("div",{className:"mt-1",children:["Categories: ",h.map(N=>`${N.name}(${N.options.length})`).join(", ")]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-1",children:h.length>0?a.jsx(ba,{categories:h,onSelect:b,onCustomSearch:b}):a.jsxs("div",{className:"p-4 border border-dashed border-muted-foreground/20 rounded-lg text-center text-muted-foreground",children:["No search categories available. Spells loaded: ",o.length]})}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:d,onChange:N=>f(N.target.value),className:"appearance-none bg-background border border-border rounded-lg px-3 py-1.5 pr-8 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer",children:[a.jsx("option",{value:"alphabetical",children:"Sort: A-Z"}),a.jsx("option",{value:"school",children:"Sort: School"}),a.jsx("option",{value:"level",children:"Sort: Level"})]}),a.jsx(En,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]}),a.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[a.jsx("button",{onClick:()=>r("grid"),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${s==="grid"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"Grid view",children:"Grid"}),a.jsx("button",{onClick:()=>r("list"),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${s==="list"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"List view",children:"List"})]})]}),p.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:y,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx("span",{className:"text-lg",children:"×"}),"Clear All"]}),p.map(N=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>x(N.id),title:"Click to remove",children:[N.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},N.id))]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.length," of ",o.length," spells"]}),a.jsx("div",{children:j.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No spells found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}):a.jsxs(a.Fragment,{children:[s==="grid"&&a.jsx(GK,{spells:j,variant:"default",columns:3,onSpellClick:m}),s==="list"&&a.jsx(ZK,{spells:j,variant:"default",onSpellClick:m})]})}),a.jsx(XK,{spell:i,isOpen:c,onOpenChange:u})]})}function KK(){return a.jsx(Fn,{title:"Spell Reference",description:"Browse and search all available spells. Find the perfect magic for your character build.",children:a.jsx(WK,{})})}function QK(){const{data:e,loading:t,error:n,reload:s}=u8(),r=e||[],[o,i]=g.useState([]),[l,c]=g.useState("alphabetical");g.useMemo(()=>r.map(bb),[r]);const d=(()=>{const w=__(r),j=A_(r);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Search by category...",options:w.map(N=>({id:`category-${N}`,label:N,value:N,category:"Categories",description:`Traits in ${N} category`}))},{id:"tags",name:"Tags",placeholder:"Search by tag...",options:j.map(N=>({id:`tag-${N}`,label:N,value:N,category:"Tags",description:`Traits tagged with ${N}`}))}]})(),f=w=>{let j;typeof w=="string"?j={id:`custom-${w}`,label:w,value:w,category:"Fuzzy Search"}:j={id:`${w.category}-${w.id}`,label:w.label,value:w.value,category:w.category},o.some(N=>N.value===j.value&&N.category===j.category)||i(N=>[...N,j])},m=w=>{i(j=>j.filter(N=>N.id!==w))},h=r.filter(w=>o.length===0?!0:o.every(j=>{var N;switch(j.category){case"Fuzzy Search":return!0;case"Categories":return w.category===j.value;case"Tags":return((N=w.tags)==null?void 0:N.some(S=>S===j.value))||!1;default:return!0}})),p=o.filter(w=>w.category==="Fuzzy Search").map(w=>w.value).join(" "),{filteredTraits:v}=E_(h,p),b=v.map(bb),x=r.map(w=>w.id||w.name),y=[...b].sort((w,j)=>{var N,S;switch(l){case"alphabetical":return w.name.localeCompare(j.name);case"category":const k=O=>{switch(O){case"Combat":return 1;case"Magic":return 2;case"Stealth":return 3;case"Social":return 4;case"Survival":return 5;default:return 6}},E=k(w.category),C=k(j.category);return E!==C?E-C:w.name.localeCompare(j.name);case"effect-count":const _=((N=w.effects)==null?void 0:N.length)||0,P=((S=j.effects)==null?void 0:S.length)||0;return _!==P?P-_:w.name.localeCompare(j.name);default:return 0}});return t?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading traits..."})]})}):n?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:n}),a.jsx("button",{onClick:()=>s(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsxs(Fn,{title:"Traits",description:"Choose your character's traits. Traits provide unique abilities and modifiers that will shape your character's capabilities throughout their journey.",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(ba,{categories:d,onSelect:f,onCustomSearch:f})}),a.jsxs(Kc,{children:[a.jsx(Qc,{asChild:!0,children:a.jsxs(G,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[a.jsx(En,{className:"h-4 w-4"}),l==="alphabetical"?"A-Z":l==="category"?"Category":"Count"]})}),a.jsxs(fl,{align:"end",children:[a.jsx(ss,{onClick:()=>c("alphabetical"),children:"Alphabetical"}),a.jsx(ss,{onClick:()=>c("category"),children:"Category"}),a.jsx(ss,{onClick:()=>c("effect-count"),children:"Effect Count"})]})]})]}),a.jsx("div",{className:"my-4",children:o.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>i([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Bt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),o.map(w=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(w.id),title:"Click to remove",children:[w.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},w.id))]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:y.map(w=>a.jsx(Jq,{item:w,isExpanded:!0,className:"w-full",allTraitIds:x},w.id))}),y.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No traits found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]})}function JK(){const{build:e,updateBuild:t}=pt(),[n,s]=g.useState(e.traitLimits.regular),[r,o]=g.useState(e.traitLimits.bonus),i=g.useCallback(c=>{s(c),t({traitLimits:{...e.traitLimits,regular:c}})},[e.traitLimits,t]),l=g.useCallback(c=>{o(c),t({traitLimits:{...e.traitLimits,bonus:c}})},[e.traitLimits,t]);return{regularLimit:n,bonusLimit:r,handleRegularLimitChange:i,handleBonusLimitChange:l,currentRegularCount:e.traits.regular.length,currentBonusCount:e.traits.bonus.length}}function eQ(){const{build:e,setBuildName:t,setBuildNotes:n,resetBuild:s}=pt(),[r,o]=g.useState(!1),i=JK(),l=ft(),c=[{id:"basic-info",component:a.jsx(aS,{name:e.name,notes:e.notes,onNameChange:t,onNotesChange:n}),size:"full"},{id:"race",component:a.jsx(hC,{}),size:"half"},{id:"birthsign",component:a.jsx(Kk,{}),size:"half"},{id:"trait",component:a.jsx(T_,{}),size:"half"},{id:"religion",component:a.jsx(pC,{}),size:"half"},{id:"attributes",component:a.jsx(cS,{}),size:"full"},{id:"skills",component:a.jsx(C_,{}),size:"full"},{id:"destiny",component:a.jsx(lC,{navigate:l}),size:"full"},{id:"summary",component:a.jsx(iS,{build:e}),size:"full"}];return a.jsxs(Fn,{title:"Character Builder",children:[a.jsx(l$,{onReset:()=>o(!0),build:e}),a.jsx(x$,{open:r,onConfirm:()=>{s(),o(!1)},onCancel:()=>o(!1)}),a.jsxs(il,{defaultValue:"build",className:"w-full",children:[a.jsxs(ll,{className:"mb-4",children:[a.jsx(an,{value:"build",children:"Build"}),a.jsx(an,{value:"config",children:"Config"})]}),a.jsx(wn,{value:"build",children:a.jsx(c$,{cards:c,gap:16})}),a.jsx(wn,{value:"config",children:a.jsx(y$,{regularLimit:i.regularLimit,bonusLimit:i.bonusLimit,onRegularLimitChange:i.handleRegularLimitChange,onBonusLimitChange:i.handleBonusLimitChange,currentRegularCount:i.currentRegularCount,currentBonusCount:i.currentBonusCount})})]})]})}function tQ(){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(yo,{children:"Crafting"}),a.jsx(mc,{children:"Plan your crafting recipes and material requirements"})]}),a.jsxs(xe,{children:[a.jsxs(_e,{children:[a.jsx(Re,{children:"Coming Soon"}),a.jsx(Ss,{children:"Crafting system is under development"})]}),a.jsx(ve,{children:a.jsx(mc,{children:"This section will help you plan and optimize your crafting projects."})})]})]})}function nQ(){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(yo,{children:"Equipment"}),a.jsx(mc,{children:"Browse and compare weapons, armor, and items"})]}),a.jsxs(xe,{children:[a.jsxs(_e,{children:[a.jsx(Re,{children:"Coming Soon"}),a.jsx(Ss,{children:"Equipment database is under development"})]}),a.jsx(ve,{children:a.jsx(mc,{children:"This section will provide a comprehensive database of all equipment in the game."})})]})]})}const sQ=()=>{const{build:e,getSummary:t}=pt(),n=ft(),s=t();return!e.name&&!e.race?a.jsxs(xe,{className:"border-dashed border-2 border-muted",children:[a.jsxs(_e,{children:[a.jsx(Re,{className:"text-lg",children:"No Character Build"}),a.jsx(Ss,{children:"Start building your character to see it here"})]}),a.jsx(ve,{children:a.jsx(G,{onClick:()=>n("/build"),className:"w-full",children:"Create Character Build"})})]}):a.jsxs(xe,{children:[a.jsxs(_e,{children:[a.jsxs(Re,{className:"text-lg flex items-center justify-between",children:[a.jsx("span",{children:s.name}),a.jsx(G,{variant:"outline",size:"sm",onClick:()=>n("/build"),children:"Edit"})]}),a.jsx(Ss,{children:"Current character build status"})]}),a.jsxs(ve,{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Race:"}),a.jsx(K,{variant:"secondary",className:"ml-2",children:s.race})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Birth Sign:"}),a.jsx(K,{variant:"secondary",className:"ml-2",children:s.stone})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Religion:"}),a.jsx(K,{variant:"secondary",className:"ml-2",children:s.religion})]})]}),a.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[a.jsxs("span",{children:[s.traitCount," traits"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[s.majorSkillCount," major skills"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[s.minorSkillCount," minor skills"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[s.equipmentCount," equipment"]})]})]})]})};function rQ(){const e=ft(),t=()=>{e("/build")},n=[{name:"GigaPlanner",description:"Advanced build planner with detailed skill trees and optimization",url:"https://multidyls.github.io/GigaPlanner",icon:a.jsx($d,{className:"h-5 w-5 text-primary"}),category:"Build Planning",author:"Multidyls"},{name:"Character Builder GPT",description:"AI-powered character creation assistant with personalized build recommendations",url:"https://chatgpt.com/g/g-68462f6313d48191bab174806a049ca4-lorerim-builds-wizard-v2?model=gpt-4o",icon:a.jsx(FN,{className:"h-5 w-5 text-primary"}),category:"AI Assistant",author:"Zoldyg"},{name:"Alchemy Calculator",description:"Comprehensive alchemy crafting and ingredient database with detailed recipes",url:"https://docs.google.com/spreadsheets/d/1zUVCaRlqHX_sER-kJR-ZLIAfsFbTj9FQCO-hMfnp4XA/edit?gid=2066962651#gid=2066962651",icon:a.jsx(sa,{className:"h-5 w-5 text-primary"}),category:"Crafting",author:"Rudy"},{name:"Spell Sheet Generator",description:"Lorerim Spell List Google Sheet",url:"https://docs.google.com/spreadsheets/d/1fvYHRfwAprpgEPaXyuteEx0ud9S572noYnlpVq6cJFs/edit?gid=915313506#gid=915313506",icon:a.jsx(Hc,{className:"h-5 w-5 text-primary"}),category:"Spells",author:"ImmatureTurtles"},{name:"Weapons Discussion Hub",description:"Deep dive into weapon mechanics, damage calculations, and optimization strategies",url:"https://discord.com/channels/622647066719420427/1382033558754955354",icon:a.jsx(Sg,{className:"h-5 w-5 text-primary"}),category:"Combat",author:"Deo"},{name:"Spin Wheel Tool",description:"Random build generator and challenge creator for fun playthroughs",url:"https://spinthewheel.app/YXGCPykcqJ",icon:a.jsx(gr,{className:"h-5 w-5 text-primary"}),category:"Fun",author:"Sora the Saint"}],s=r=>{r!=="#"&&window.open(r,"_blank","noopener,noreferrer")};return a.jsx("div",{className:"bg-background",children:a.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-12",children:[a.jsxs("div",{className:"text-left space-y-6",children:[a.jsx("div",{className:"flex items-center gap-3 mb-4 justify-start",children:a.jsx(yo,{className:"text-4xl md:text-6xl font-bold text-foreground",children:"Lorerim Arcaneum"})}),a.jsx(lS,{className:"text-xl md:text-2xl text-muted-foreground",children:"A growing collection of Lorerim tools and resources. Build characters, explore mechanics, and contribute to the community."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Big thanks to Biggie Boss"})]}),a.jsx("div",{className:"max-w-md",children:a.jsx(sQ,{})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[a.jsx(Od,{className:"h-6 w-6 text-primary"}),"Character Building"]}),a.jsx("p",{className:"text-muted-foreground",children:"Create and customize your character from scratch"})]}),a.jsxs(xe,{className:"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card",onClick:t,children:[a.jsxs(_e,{children:[a.jsxs(Re,{className:"flex items-center gap-2 group-hover:text-primary transition-colors text-card-foreground",children:[a.jsx(sa,{className:"h-5 w-5"}),"Start Character Build"]}),a.jsx(Ss,{className:"text-muted-foreground",children:"Design your character with races, traits, birthsigns, and more"})]}),a.jsx(ve,{children:a.jsxs(G,{className:"w-full group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:["Begin Building",a.jsx(e4,{className:"ml-2 h-4 w-4"})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/race"),children:a.jsxs(ve,{className:"p-4 text-center",children:[a.jsx(w3,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Races"})]})}),a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/birth-signs"),children:a.jsxs(ve,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:"⭐"}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Birthsigns"})]})}),a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/traits"),children:a.jsxs(ve,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:"🎯"}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Traits"})]})}),a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/perks"),children:a.jsxs(ve,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:"⚔️"}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Skills"})]})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[a.jsx(Si,{className:"h-6 w-6 text-primary"}),"Quick Access"]}),a.jsx("p",{className:"text-muted-foreground",children:"Jump directly to specific tools and features"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/search"),children:a.jsx(ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Si,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-card-foreground",children:"Advanced Search"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Detailed search with filters"})]})]})})}),a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/spells"),children:a.jsx(ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(sa,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-card-foreground",children:"Spells"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Browse and search spells"})]})]})})}),a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/cookbook"),children:a.jsx(ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(BN,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-card-foreground",children:"Cookbook"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Crafting recipes & guides"})]})]})})})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[a.jsx($d,{className:"h-6 w-6 text-primary"}),"Favorite Tools"]}),a.jsx("p",{className:"text-muted-foreground",children:"Discover the best external tools and resources for Lorerim theorycrafting"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((r,o)=>a.jsxs(xe,{className:"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card",onClick:()=>s(r.url),children:[a.jsxs(_e,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[r.icon,a.jsx(Re,{className:"text-lg group-hover:text-primary transition-colors text-card-foreground",children:r.name})]}),a.jsx(uo,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-xs font-medium text-primary/80 bg-primary/10 px-2 py-1 rounded-full",children:r.category}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["by ",r.author]})]})]}),a.jsx(ve,{className:"pt-0",children:a.jsx(Ss,{className:"text-muted-foreground",children:r.description})})]},o))})]}),a.jsx("div",{className:"text-left pt-8 border-t border-border",children:a.jsx("p",{className:"text-muted-foreground",children:"Crafted by Bardic (Jeremy) Noel, with gratitude to Biggie Boss and the Lorerim community"})})]})})}function aQ(){const e=ft();return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:[a.jsx(yo,{className:"text-4xl font-bold text-skyrim-gold mb-2",children:"Page Not Found"}),a.jsx(Ze,{className:"text-skyrim-gold/70 mb-6",children:"Sorry, the page you are looking for does not exist or is not ready yet."}),a.jsx(G,{variant:"default",onClick:()=>e("/"),children:"Return Home"})]})}const oQ=()=>a.jsxs(RD,{children:[a.jsx(vt,{path:"/",element:a.jsx(rQ,{})}),a.jsxs(vt,{path:"/build",element:a.jsx(J$,{}),children:[a.jsx(vt,{index:!0,element:a.jsx(eQ,{})}),a.jsx(vt,{path:"race",element:a.jsx(gC,{})}),a.jsx(vt,{path:"birth-signs",element:a.jsx(rI,{})}),a.jsx(vt,{path:"traits",element:a.jsx(QK,{})}),a.jsx(vt,{path:"religions",element:a.jsx(TG,{})}),a.jsx(vt,{path:"destiny",element:a.jsx(AG,{})}),a.jsx(vt,{path:"perks",element:a.jsx(Iw,{})})]}),a.jsx(vt,{path:"/spells",element:a.jsx(KK,{})}),a.jsx(vt,{path:"/cookbook",element:a.jsx(hG,{})}),a.jsx(vt,{path:"/search",element:a.jsx(mZ,{})}),a.jsx(vt,{path:"/virtual-masonry-demo",element:a.jsx(gZ,{})}),a.jsx(vt,{path:"/races-mva-demo",element:a.jsx(_I,{})}),a.jsx(vt,{path:"/skills-mva",element:a.jsx(Iw,{})}),a.jsx(vt,{path:"/skills-experimental",element:a.jsx(TK,{})}),a.jsx(vt,{path:"/equipment",element:a.jsx(nQ,{})}),a.jsx(vt,{path:"/crafting",element:a.jsx(tQ,{})}),a.jsx(vt,{path:"*",element:a.jsx(aQ,{})})]}),xA=g.createContext(void 0);function iQ({children:e}){const[t,n]=g.useState("system"),[s,r]=g.useState("dark"),[o,i]=g.useState(!1);return g.useEffect(()=>{const l=localStorage.getItem("theme");l&&["light","dark","system"].includes(l)&&n(l),i(!0)},[]),g.useEffect(()=>{o&&localStorage.setItem("theme",t);let l;t==="system"?l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":l=t,r(l);const c=document.documentElement;l==="dark"?c.classList.add("dark"):c.classList.remove("dark")},[t,o]),g.useEffect(()=>{const l=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>{if(t==="system"){const u=l.matches?"dark":"light";r(u);const d=document.documentElement;u==="dark"?d.classList.add("dark"):d.classList.remove("dark")}};return l.addEventListener("change",c),()=>l.removeEventListener("change",c)},[t]),a.jsx(xA.Provider,{value:{theme:t,setTheme:n,resolvedTheme:s},children:e})}function lQ(){const e=g.useContext(xA);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function cQ(){const{theme:e,setTheme:t}=lQ(),n=()=>{t(e==="light"?"dark":e==="dark"?"system":"light")},s=()=>{switch(e){case"light":return a.jsx(yy,{className:"h-4 w-4"});case"dark":return a.jsx(X4,{className:"h-4 w-4"});case"system":return a.jsx(Z4,{className:"h-4 w-4"});default:return a.jsx(yy,{className:"h-4 w-4"})}};return a.jsxs(G,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:n,title:`Current theme: ${e}. Click to cycle themes.`,children:[s(),a.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function uQ({sidebarCollapsed:e,onToggleSidebar:t,isMobile:n=!1,MobileDrawerTrigger:s}){return a.jsxs("header",{className:"sticky top-0 w-full h-12 flex items-center bg-background border-b border-skyrim-gold/20 px-2 shadow-sm backdrop-blur-sm",style:{zIndex:Dt.HEADER,backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:[n&&s?a.jsx("div",{className:"mr-2",children:a.jsx(s,{})}):a.jsx("button",{onClick:t,"aria-label":e?"Open sidebar":"Close sidebar",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 mr-2",children:a.jsx(I4,{className:"w-5 h-5 text-skyrim-gold transition-transform duration-200 group-hover:rotate-12"})}),a.jsx("span",{className:"text-skyrim-gold font-bold text-base tracking-tight select-none",children:"Lorerim Arcaneum"}),a.jsx("span",{className:"ml-2 text-xs text-skyrim-gold/60 select-none",children:"Theorycrafting Hub"}),a.jsx("div",{className:"flex-1 max-w-md mx-4",children:a.jsx(dZ,{placeholder:"Search skills, races, traits...",className:"w-full"})}),a.jsx("div",{className:"ml-auto",children:a.jsx(cQ,{})})]})}const vA=[{label:"Character Build",items:[{to:"/build",label:"Build"},{to:"/build/race",label:"Race"},{to:"/build/birth-signs",label:"Birth Signs"},{to:"/build/traits",label:"Traits"},{to:"/build/religions",label:"Religion"},{to:"/build/destiny",label:"Destiny"},{to:"/build/perks",label:"Skills and Perks"}]},{label:"Docs",items:[{to:"/spells",label:"Spells"},{to:"/cookbook",label:"Food and Alcohol"}]}];function dQ({onNavigate:e}){const t=ft(),n=window.location.hash.replace(/^#\/?/,"/"),s=(r,o)=>{const i=window.location.hash,[l,c]=i.split("?"),d=new URLSearchParams(c||"").get("b");t(d?`${r}?b=${d}`:r),e(o)};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-4 border-b border-skyrim-gold/20",children:a.jsxs("button",{onClick:()=>s("/",!0),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[a.jsx(IN,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),a.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:vA.map(r=>a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:r.label}),a.jsx("div",{className:"space-y-1",children:r.items.map(o=>{const i=n===o.to;return a.jsx("button",{onClick:()=>s(o.to,!0),className:`w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] active:scale-[0.98] cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 ${i?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent"}`,children:o.label},o.to)})})]},r.label))}),a.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[a.jsx(Ze,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),a.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:"⚙️ Settings"})]})]})}function fQ({collapsed:e,onNavigate:t}){const n=ft(),s=window.location.hash.replace(/^#\/?/,"/"),r=o=>{const i=window.location.hash,[l,c]=i.split("?"),d=new URLSearchParams(c||"").get("b");n(d?`${o}?b=${d}`:o)};return a.jsxs(M_,{collapsed:e,children:[a.jsx(z_,{children:!e&&a.jsxs("button",{onClick:()=>r("/"),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[a.jsx(IN,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),a.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),a.jsx(R_,{children:vA.map(o=>a.jsxs(D_,{children:[!e&&a.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:o.label}),a.jsx(L_,{children:o.items.map(i=>{const l=s===i.to;return a.jsx(P_,{children:a.jsx($_,{asChild:!0,isActive:l,onClick:()=>r(i.to),tabIndex:0,children:a.jsx("span",{className:"w-full text-left truncate",children:i.label})})},i.to)})})]},o.label))}),!e&&a.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[a.jsx(Ze,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),a.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:"⚙️ Settings"})]}),a.jsx(O_,{})]})}function mQ({onNavigate:e}){const[t,n]=g.useState(!1),s=r=>{r&&n(!1)};return a.jsxs(Ci,{open:t,onOpenChange:n,children:[a.jsx(nS,{asChild:!0,children:a.jsx("button",{"aria-label":"Open navigation menu",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:a.jsx("svg",{className:"w-5 h-5 text-skyrim-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),a.jsx(Ka,{side:"left",className:"p-0 w-80",children:a.jsx("div",{className:"flex flex-col h-full",children:a.jsx(dQ,{onNavigate:s})})})]})}function hQ(){const[e,t]=g.useState(!0),[n,s]=g.useState(!1);return sG(),g.useEffect(()=>{const r=()=>s(window.innerWidth<768);return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),a.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[a.jsx(uQ,{sidebarCollapsed:e,onToggleSidebar:()=>t(r=>!r),isMobile:n,MobileDrawerTrigger:()=>a.jsx(mQ,{onNavigate:()=>{}})}),a.jsxs("div",{className:"flex flex-1",children:[!n&&a.jsx("div",{className:`transition-all duration-300 ease-in-out ${e?"w-0 overflow-hidden":"w-64"}`,style:{zIndex:Dt.SIDEBAR},children:a.jsx(fQ,{collapsed:e,onNavigate:r=>{r&&t(!0)}})}),a.jsx("main",{className:"flex-1 transition-all duration-300 ease-in-out min-w-0",children:a.jsx(oQ,{})})]}),a.jsx(nG,{})]})}function gQ(){return a.jsx(s5,{children:a.jsx(hQ,{})})}function pQ({children:e,showLoadingIndicator:t=!1}){const[n,s]=g.useState(!0),[r,o]=g.useState(null),i=g.useRef(!1),l=go(x=>x.load),c=sl(x=>x.load),u=ho(x=>x.load),d=ha(x=>x.load),f=nr(x=>x.load),m=rl(x=>x.load),h=po(x=>x.load),p=qo(x=>x.load),v=xo(x=>x.load),b=g.useCallback(async()=>{if(!i.current)try{s(!0),o(null),await Promise.all([l(),c(),u(),d(),f(),m(),h(),p(),v()]),i.current=!0,s(!1)}catch(x){console.error("Failed to initialize data:",x),o(x instanceof Error?x.message:"Failed to initialize data"),s(!1)}},[l,c,u,d,f,m,h,p,v]);return g.useEffect(()=>{b()},[b]),n&&t?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading data..."})]})}):r?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Failed to Load Data"}),a.jsx("p",{className:"text-sm",children:r})]}),a.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})}):a.jsx(a.Fragment,{children:e})}var yA={exports:{}},Lm={},bA={exports:{}},wA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,D){var M=A.length;A.push(D);e:for(;0<M;){var R=M-1>>>1,B=A[R];if(0<r(B,D))A[R]=D,A[M]=B,M=R;else break e}}function n(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var D=A[0],M=A.pop();if(M!==D){A[0]=M;e:for(var R=0,B=A.length,U=B>>>1;R<U;){var I=2*(R+1)-1,V=A[I],Z=I+1,J=A[Z];if(0>r(V,M))Z<B&&0>r(J,V)?(A[R]=J,A[Z]=M,R=Z):(A[R]=V,A[I]=M,R=I);else if(Z<B&&0>r(J,M))A[R]=J,A[Z]=M,R=Z;else break e}}return D}function r(A,D){var M=A.sortIndex-D.sortIndex;return M!==0?M:A.id-D.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,m=3,h=!1,p=!1,v=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function j(A){for(var D=n(u);D!==null;){if(D.callback===null)s(u);else if(D.startTime<=A)s(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(u)}}function N(A){if(v=!1,j(A),!p)if(n(c)!==null)p=!0,S||(S=!0,O());else{var D=n(u);D!==null&&z(N,D.startTime-A)}}var S=!1,k=-1,E=5,C=-1;function _(){return b?!0:!(e.unstable_now()-C<E)}function P(){if(b=!1,S){var A=e.unstable_now();C=A;var D=!0;try{e:{p=!1,v&&(v=!1,y(k),k=-1),h=!0;var M=m;try{t:{for(j(A),f=n(c);f!==null&&!(f.expirationTime>A&&_());){var R=f.callback;if(typeof R=="function"){f.callback=null,m=f.priorityLevel;var B=R(f.expirationTime<=A);if(A=e.unstable_now(),typeof B=="function"){f.callback=B,j(A),D=!0;break t}f===n(c)&&s(c),j(A)}else s(c);f=n(c)}if(f!==null)D=!0;else{var U=n(u);U!==null&&z(N,U.startTime-A),D=!1}}break e}finally{f=null,m=M,h=!1}D=void 0}}finally{D?O():S=!1}}}var O;if(typeof w=="function")O=function(){w(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,T=$.port2;$.port1.onmessage=P,O=function(){T.postMessage(null)}}else O=function(){x(P,0)};function z(A,D){k=x(function(){A(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(A){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var M=m;m=D;try{return A()}finally{m=M}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(A,D){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var M=m;m=A;try{return D()}finally{m=M}},e.unstable_scheduleCallback=function(A,D,M){var R=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?R+M:R):M=R,A){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=M+B,A={id:d++,callback:D,priorityLevel:A,startTime:M,expirationTime:B,sortIndex:-1},M>R?(A.sortIndex=M,t(u,A),n(c)===null&&A===n(u)&&(v?(y(k),k=-1):v=!0,z(N,M-R))):(A.sortIndex=B,t(c,A),p||h||(p=!0,S||(S=!0,O()))),A},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(A){var D=m;return function(){var M=m;m=D;try{return A.apply(this,arguments)}finally{m=M}}}})(wA);bA.exports=wA;var xQ=bA.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et=xQ,jA=g,vQ=Kf;function Y(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function NA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function iu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function SA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ij(e){if(iu(e)!==e)throw Error(Y(188))}function yQ(e){var t=e.alternate;if(!t){if(t=iu(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return ij(r),e;if(o===s)return ij(r),t;o=o.sibling}throw Error(Y(188))}if(n.return!==s.return)n=r,s=o;else{for(var i=!1,l=r.child;l;){if(l===n){i=!0,n=r,s=o;break}if(l===s){i=!0,s=r,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,s=r;break}if(l===s){i=!0,s=o,n=r;break}l=l.sibling}if(!i)throw Error(Y(189))}}if(n.alternate!==s)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function kA(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=kA(e),t!==null)return t;e=e.sibling}return null}var We=Object.assign,bQ=Symbol.for("react.element"),Qu=Symbol.for("react.transitional.element"),Ul=Symbol.for("react.portal"),Zo=Symbol.for("react.fragment"),CA=Symbol.for("react.strict_mode"),bp=Symbol.for("react.profiler"),wQ=Symbol.for("react.provider"),EA=Symbol.for("react.consumer"),or=Symbol.for("react.context"),hv=Symbol.for("react.forward_ref"),wp=Symbol.for("react.suspense"),jp=Symbol.for("react.suspense_list"),gv=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),Np=Symbol.for("react.activity"),jQ=Symbol.for("react.memo_cache_sentinel"),lj=Symbol.iterator;function Tl(e){return e===null||typeof e!="object"?null:(e=lj&&e[lj]||e["@@iterator"],typeof e=="function"?e:null)}var NQ=Symbol.for("react.client.reference");function Sp(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===NQ?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zo:return"Fragment";case bp:return"Profiler";case CA:return"StrictMode";case wp:return"Suspense";case jp:return"SuspenseList";case Np:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ul:return"Portal";case or:return(e.displayName||"Context")+".Provider";case EA:return(e._context.displayName||"Context")+".Consumer";case hv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gv:return t=e.displayName||null,t!==null?t:Sp(e.type)||"Memo";case Hr:t=e._payload,e=e._init;try{return Sp(e(t))}catch{}}return null}var Fl=Array.isArray,ge=jA.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$e=vQ.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fa={pending:!1,data:null,method:null,action:null},kp=[],Yo=-1;function Us(e){return{current:e}}function Rt(e){0>Yo||(e.current=kp[Yo],kp[Yo]=null,Yo--)}function et(e,t){Yo++,kp[Yo]=e.current,e.current=t}var Ms=Us(null),Ec=Us(null),oa=Us(null),gf=Us(null);function pf(e,t){switch(et(oa,t),et(Ec,e),et(Ms,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?mN(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=mN(t),e=VM(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Rt(Ms),et(Ms,e)}function Bi(){Rt(Ms),Rt(Ec),Rt(oa)}function Cp(e){e.memoizedState!==null&&et(gf,e);var t=Ms.current,n=VM(t,e.type);t!==n&&(et(Ec,e),et(Ms,n))}function xf(e){Ec.current===e&&(Rt(Ms),Rt(Ec)),gf.current===e&&(Rt(gf),Pc._currentValue=Fa)}var Ep=Object.prototype.hasOwnProperty,pv=Et.unstable_scheduleCallback,Fh=Et.unstable_cancelCallback,SQ=Et.unstable_shouldYield,kQ=Et.unstable_requestPaint,Rs=Et.unstable_now,CQ=Et.unstable_getCurrentPriorityLevel,_A=Et.unstable_ImmediatePriority,AA=Et.unstable_UserBlockingPriority,vf=Et.unstable_NormalPriority,EQ=Et.unstable_LowPriority,TA=Et.unstable_IdlePriority,_Q=Et.log,AQ=Et.unstable_setDisableYieldValue,lu=null,Nn=null;function Qr(e){if(typeof _Q=="function"&&AQ(e),Nn&&typeof Nn.setStrictMode=="function")try{Nn.setStrictMode(lu,e)}catch{}}var Sn=Math.clz32?Math.clz32:RQ,TQ=Math.log,MQ=Math.LN2;function RQ(e){return e>>>=0,e===0?32:31-(TQ(e)/MQ|0)|0}var Ju=256,ed=4194304;function Ra(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $m(e,t,n){var s=e.pendingLanes;if(s===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=s&134217727;return l!==0?(s=l&~o,s!==0?r=Ra(s):(i&=l,i!==0?r=Ra(i):n||(n=l&~e,n!==0&&(r=Ra(n))))):(l=s&~o,l!==0?r=Ra(l):i!==0?r=Ra(i):n||(n=s&~e,n!==0&&(r=Ra(n)))),r===0?0:t!==0&&t!==r&&!(t&o)&&(o=r&-r,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:r}function cu(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function DQ(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MA(){var e=Ju;return Ju<<=1,!(Ju&4194048)&&(Ju=256),e}function RA(){var e=ed;return ed<<=1,!(ed&62914560)&&(ed=4194304),e}function Vh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function uu(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function zQ(e,t,n,s,r,o){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,u=e.hiddenUpdates;for(n=i&~n;0<n;){var d=31-Sn(n),f=1<<d;l[d]=0,c[d]=-1;var m=u[d];if(m!==null)for(u[d]=null,d=0;d<m.length;d++){var h=m[d];h!==null&&(h.lane&=-536870913)}n&=~f}s!==0&&DA(e,s,0),o!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=o&~(i&~t))}function DA(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Sn(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194090}function zA(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Sn(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}function xv(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function vv(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function LA(){var e=$e.p;return e!==0?e:(e=window.event,e===void 0?32:eR(e.type))}function LQ(e,t){var n=$e.p;try{return $e.p=e,t()}finally{$e.p=n}}var Sa=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Sa,cn="__reactProps$"+Sa,hl="__reactContainer$"+Sa,_p="__reactEvents$"+Sa,$Q="__reactListeners$"+Sa,PQ="__reactHandles$"+Sa,cj="__reactResources$"+Sa,du="__reactMarker$"+Sa;function yv(e){delete e[Ft],delete e[cn],delete e[_p],delete e[$Q],delete e[PQ]}function Xo(e){var t=e[Ft];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hl]||n[Ft]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=pN(e);e!==null;){if(n=e[Ft])return n;e=pN(e)}return t}e=n,n=e.parentNode}return null}function gl(e){if(e=e[Ft]||e[hl]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Vl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(Y(33))}function hi(e){var t=e[cj];return t||(t=e[cj]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Tt(e){e[du]=!0}var $A=new Set,PA={};function ko(e,t){Ii(e,t),Ii(e+"Capture",t)}function Ii(e,t){for(PA[e]=t,e=0;e<t.length;e++)$A.add(t[e])}var OQ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uj={},dj={};function BQ(e){return Ep.call(dj,e)?!0:Ep.call(uj,e)?!1:OQ.test(e)?dj[e]=!0:(uj[e]=!0,!1)}function jd(e,t,n){if(BQ(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function td(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Js(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}var qh,fj;function Uo(e){if(qh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qh=t&&t[1]||"",fj=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qh+e+fj}var Gh=!1;function Zh(e,t){if(!e||Gh)return"";Gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(h){var m=h}Reflect.construct(e,[],f)}else{try{f.call()}catch(h){m=h}e.call(f.prototype)}}else{try{throw Error()}catch(h){m=h}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),i=o[0],l=o[1];if(i&&l){var c=i.split(`
`),u=l.split(`
`);for(r=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(s===c.length||r===u.length)for(s=c.length-1,r=u.length-1;1<=s&&0<=r&&c[s]!==u[r];)r--;for(;1<=s&&0<=r;s--,r--)if(c[s]!==u[r]){if(s!==1||r!==1)do if(s--,r--,0>r||c[s]!==u[r]){var d=`
`+c[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=s&&0<=r);break}}}finally{Gh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Uo(n):""}function IQ(e){switch(e.tag){case 26:case 27:case 5:return Uo(e.type);case 16:return Uo("Lazy");case 13:return Uo("Suspense");case 19:return Uo("SuspenseList");case 0:case 15:return Zh(e.type,!1);case 11:return Zh(e.type.render,!1);case 1:return Zh(e.type,!0);case 31:return Uo("Activity");default:return""}}function mj(e){try{var t="";do t+=IQ(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function zn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function OA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function HQ(e){var t=OA(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yf(e){e._valueTracker||(e._valueTracker=HQ(e))}function BA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=OA(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function bf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var UQ=/[\n"\\]/g;function On(e){return e.replace(UQ,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ap(e,t,n,s,r,o,i,l){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+zn(t)):e.value!==""+zn(t)&&(e.value=""+zn(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?Tp(e,i,zn(t)):n!=null?Tp(e,i,zn(n)):s!=null&&e.removeAttribute("value"),r==null&&o!=null&&(e.defaultChecked=!!o),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+zn(l):e.removeAttribute("name")}function IA(e,t,n,s,r,o,i,l){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;n=n!=null?""+zn(n):"",t=t!=null?""+zn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i)}function Tp(e,t,n){t==="number"&&bf(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function gi(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+zn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function HA(e,t,n){if(t!=null&&(t=""+zn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+zn(n):""}function UA(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(Y(92));if(Fl(s)){if(1<s.length)throw Error(Y(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=zn(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function Hi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var FQ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hj(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||FQ.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function FA(e,t,n){if(t!=null&&typeof t!="object")throw Error(Y(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&n[r]!==s&&hj(e,r,s)}else for(var o in t)t.hasOwnProperty(o)&&hj(e,o,t[o])}function bv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VQ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qQ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nd(e){return qQ.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Mp=null;function wv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wo=null,pi=null;function gj(e){var t=gl(e);if(t&&(e=t.stateNode)){var n=e[cn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ap(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+On(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=s[cn]||null;if(!r)throw Error(Y(90));Ap(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&BA(s)}break e;case"textarea":HA(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&gi(e,!!n.multiple,t,!1)}}}var Yh=!1;function VA(e,t,n){if(Yh)return e(t,n);Yh=!0;try{var s=e(t);return s}finally{if(Yh=!1,(Wo!==null||pi!==null)&&(Gm(),Wo&&(t=Wo,e=pi,pi=Wo=null,gj(t),e)))for(t=0;t<e.length;t++)gj(e[t])}}function _c(e,t){var n=e.stateNode;if(n===null)return null;var s=n[cn]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rp=!1;if(jr)try{var Ml={};Object.defineProperty(Ml,"passive",{get:function(){Rp=!0}}),window.addEventListener("test",Ml,Ml),window.removeEventListener("test",Ml,Ml)}catch{Rp=!1}var Jr=null,jv=null,Sd=null;function qA(){if(Sd)return Sd;var e,t=jv,n=t.length,s,r="value"in Jr?Jr.value:Jr.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===r[o-s];s++);return Sd=r.slice(e,1<s?1-s:void 0)}function kd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nd(){return!0}function pj(){return!1}function mn(e){function t(n,s,r,o,i){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?nd:pj,this.isPropagationStopped=pj,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nd)},persist:function(){},isPersistent:nd}),t}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pm=mn(Co),fu=We({},Co,{view:0,detail:0}),GQ=mn(fu),Xh,Wh,Rl,Om=We({},fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rl&&(Rl&&e.type==="mousemove"?(Xh=e.screenX-Rl.screenX,Wh=e.screenY-Rl.screenY):Wh=Xh=0,Rl=e),Xh)},movementY:function(e){return"movementY"in e?e.movementY:Wh}}),xj=mn(Om),ZQ=We({},Om,{dataTransfer:0}),YQ=mn(ZQ),XQ=We({},fu,{relatedTarget:0}),Kh=mn(XQ),WQ=We({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),KQ=mn(WQ),QQ=We({},Co,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),JQ=mn(QQ),eJ=We({},Co,{data:0}),vj=mn(eJ),tJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rJ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sJ[e])?!!t[e]:!1}function Nv(){return rJ}var aJ=We({},fu,{key:function(e){if(e.key){var t=tJ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nJ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nv,charCode:function(e){return e.type==="keypress"?kd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oJ=mn(aJ),iJ=We({},Om,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yj=mn(iJ),lJ=We({},fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nv}),cJ=mn(lJ),uJ=We({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),dJ=mn(uJ),fJ=We({},Om,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mJ=mn(fJ),hJ=We({},Co,{newState:0,oldState:0}),gJ=mn(hJ),pJ=[9,13,27,32],Sv=jr&&"CompositionEvent"in window,Xl=null;jr&&"documentMode"in document&&(Xl=document.documentMode);var xJ=jr&&"TextEvent"in window&&!Xl,GA=jr&&(!Sv||Xl&&8<Xl&&11>=Xl),bj=" ",wj=!1;function ZA(e,t){switch(e){case"keyup":return pJ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ko=!1;function vJ(e,t){switch(e){case"compositionend":return YA(t);case"keypress":return t.which!==32?null:(wj=!0,bj);case"textInput":return e=t.data,e===bj&&wj?null:e;default:return null}}function yJ(e,t){if(Ko)return e==="compositionend"||!Sv&&ZA(e,t)?(e=qA(),Sd=jv=Jr=null,Ko=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return GA&&t.locale!=="ko"?null:t.data;default:return null}}var bJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bJ[e.type]:t==="textarea"}function XA(e,t,n,s){Wo?pi?pi.push(s):pi=[s]:Wo=s,t=Of(t,"onChange"),0<t.length&&(n=new Pm("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Wl=null,Ac=null;function wJ(e){HM(e,0)}function Bm(e){var t=Vl(e);if(BA(t))return e}function Nj(e,t){if(e==="change")return t}var WA=!1;if(jr){var Qh;if(jr){var Jh="oninput"in document;if(!Jh){var Sj=document.createElement("div");Sj.setAttribute("oninput","return;"),Jh=typeof Sj.oninput=="function"}Qh=Jh}else Qh=!1;WA=Qh&&(!document.documentMode||9<document.documentMode)}function kj(){Wl&&(Wl.detachEvent("onpropertychange",KA),Ac=Wl=null)}function KA(e){if(e.propertyName==="value"&&Bm(Ac)){var t=[];XA(t,Ac,e,wv(e)),VA(wJ,t)}}function jJ(e,t,n){e==="focusin"?(kj(),Wl=t,Ac=n,Wl.attachEvent("onpropertychange",KA)):e==="focusout"&&kj()}function NJ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bm(Ac)}function SJ(e,t){if(e==="click")return Bm(t)}function kJ(e,t){if(e==="input"||e==="change")return Bm(t)}function CJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var An=typeof Object.is=="function"?Object.is:CJ;function Tc(e,t){if(An(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Ep.call(t,r)||!An(e[r],t[r]))return!1}return!0}function Cj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ej(e,t){var n=Cj(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cj(n)}}function QA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function JA(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=bf(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bf(e.document)}return t}function kv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var EJ=jr&&"documentMode"in document&&11>=document.documentMode,Qo=null,Dp=null,Kl=null,zp=!1;function _j(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zp||Qo==null||Qo!==bf(s)||(s=Qo,"selectionStart"in s&&kv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Kl&&Tc(Kl,s)||(Kl=s,s=Of(Dp,"onSelect"),0<s.length&&(t=new Pm("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Qo)))}function Ta(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Jo={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionrun:Ta("Transition","TransitionRun"),transitionstart:Ta("Transition","TransitionStart"),transitioncancel:Ta("Transition","TransitionCancel"),transitionend:Ta("Transition","TransitionEnd")},eg={},eT={};jr&&(eT=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function Eo(e){if(eg[e])return eg[e];if(!Jo[e])return e;var t=Jo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in eT)return eg[e]=t[n];return e}var tT=Eo("animationend"),nT=Eo("animationiteration"),sT=Eo("animationstart"),_J=Eo("transitionrun"),AJ=Eo("transitionstart"),TJ=Eo("transitioncancel"),rT=Eo("transitionend"),aT=new Map,Lp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lp.push("scrollEnd");function ms(e,t){aT.set(e,t),ko(t,[e])}var Aj=new WeakMap;function Bn(e,t){if(typeof e=="object"&&e!==null){var n=Aj.get(e);return n!==void 0?n:(t={value:e,source:t,stack:mj(t)},Aj.set(e,t),t)}return{value:e,source:t,stack:mj(t)}}var Dn=[],ei=0,Cv=0;function Im(){for(var e=ei,t=Cv=ei=0;t<e;){var n=Dn[t];Dn[t++]=null;var s=Dn[t];Dn[t++]=null;var r=Dn[t];Dn[t++]=null;var o=Dn[t];if(Dn[t++]=null,s!==null&&r!==null){var i=s.pending;i===null?r.next=r:(r.next=i.next,i.next=r),s.pending=r}o!==0&&oT(n,r,o)}}function Hm(e,t,n,s){Dn[ei++]=e,Dn[ei++]=t,Dn[ei++]=n,Dn[ei++]=s,Cv|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ev(e,t,n,s){return Hm(e,t,n,s),wf(e)}function pl(e,t){return Hm(e,null,null,t),wf(e)}function oT(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var r=!1,o=e.return;o!==null;)o.childLanes|=n,s=o.alternate,s!==null&&(s.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(r=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,r&&t!==null&&(r=31-Sn(n),e=o.hiddenUpdates,s=e[r],s===null?e[r]=[t]:s.push(t),t.lane=n|536870912),o):null}function wf(e){if(50<ic)throw ic=0,nx=null,Error(Y(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ti={};function MJ(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,n,s){return new MJ(e,t,n,s)}function _v(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mr(e,t){var n=e.alternate;return n===null?(n=bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function iT(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Cd(e,t,n,s,r,o){var i=0;if(s=e,typeof e=="function")_v(e)&&(i=1);else if(typeof e=="string")i=Dee(e,n,Ms.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Np:return e=bn(31,n,t,r),e.elementType=Np,e.lanes=o,e;case Zo:return Va(n.children,r,o,t);case CA:i=8,r|=24;break;case bp:return e=bn(12,n,t,r|2),e.elementType=bp,e.lanes=o,e;case wp:return e=bn(13,n,t,r),e.elementType=wp,e.lanes=o,e;case jp:return e=bn(19,n,t,r),e.elementType=jp,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wQ:case or:i=10;break e;case EA:i=9;break e;case hv:i=11;break e;case gv:i=14;break e;case Hr:i=16,s=null;break e}i=29,n=Error(Y(130,e===null?"null":typeof e,"")),s=null}return t=bn(i,n,t,r),t.elementType=e,t.type=s,t.lanes=o,t}function Va(e,t,n,s){return e=bn(7,e,s,t),e.lanes=n,e}function tg(e,t,n){return e=bn(6,e,null,t),e.lanes=n,e}function ng(e,t,n){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ni=[],si=0,jf=null,Nf=0,Ln=[],$n=0,qa=null,ir=1,lr="";function Da(e,t){ni[si++]=Nf,ni[si++]=jf,jf=e,Nf=t}function lT(e,t,n){Ln[$n++]=ir,Ln[$n++]=lr,Ln[$n++]=qa,qa=e;var s=ir;e=lr;var r=32-Sn(s)-1;s&=~(1<<r),n+=1;var o=32-Sn(t)+r;if(30<o){var i=r-r%5;o=(s&(1<<i)-1).toString(32),s>>=i,r-=i,ir=1<<32-Sn(t)+r|n<<r|s,lr=o+e}else ir=1<<o|n<<r|s,lr=e}function Av(e){e.return!==null&&(Da(e,1),lT(e,1,0))}function Tv(e){for(;e===jf;)jf=ni[--si],ni[si]=null,Nf=ni[--si],ni[si]=null;for(;e===qa;)qa=Ln[--$n],Ln[$n]=null,lr=Ln[--$n],Ln[$n]=null,ir=Ln[--$n],Ln[$n]=null}var Gt=null,lt=null,Le=!1,Ga=null,Ns=!1,$p=Error(Y(519));function oo(e){var t=Error(Y(418,""));throw Mc(Bn(t,e)),$p}function Tj(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[Ft]=e,t[cn]=s,n){case"dialog":Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":case"embed":Ce("load",t);break;case"video":case"audio":for(n=0;n<zc.length;n++)Ce(zc[n],t);break;case"source":Ce("error",t);break;case"img":case"image":case"link":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"input":Ce("invalid",t),IA(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),yf(t);break;case"select":Ce("invalid",t);break;case"textarea":Ce("invalid",t),UA(t,s.value,s.defaultValue,s.children),yf(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||FM(t.textContent,n)?(s.popover!=null&&(Ce("beforetoggle",t),Ce("toggle",t)),s.onScroll!=null&&Ce("scroll",t),s.onScrollEnd!=null&&Ce("scrollend",t),s.onClick!=null&&(t.onclick=Xm),t=!0):t=!1,t||oo(e)}function Mj(e){for(Gt=e.return;Gt;)switch(Gt.tag){case 5:case 13:Ns=!1;return;case 27:case 3:Ns=!0;return;default:Gt=Gt.return}}function Dl(e){if(e!==Gt)return!1;if(!Le)return Mj(e),Le=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||lx(e.type,e.memoizedProps)),n=!n),n&&lt&&oo(e),Mj(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){lt=as(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}lt=null}}else t===27?(t=lt,ka(e.type)?(e=dx,dx=null,lt=e):lt=t):lt=Gt?as(e.stateNode.nextSibling):null;return!0}function mu(){lt=Gt=null,Le=!1}function Rj(){var e=Ga;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),Ga=null),e}function Mc(e){Ga===null?Ga=[e]:Ga.push(e)}var Pp=Us(null),_o=null,cr=null;function Gr(e,t,n){et(Pp,t._currentValue),t._currentValue=n}function hr(e){e._currentValue=Pp.current,Rt(Pp)}function Op(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Bp(e,t,n,s){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){var i=r.child;o=o.firstContext;e:for(;o!==null;){var l=o;o=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Op(o.return,n,e),s||(i=null);break e}o=l.next}}else if(r.tag===18){if(i=r.return,i===null)throw Error(Y(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Op(i,n,e),i=null}else i=r.child;if(i!==null)i.return=r;else for(i=r;i!==null;){if(i===e){i=null;break}if(r=i.sibling,r!==null){r.return=i.return,i=r;break}i=i.return}r=i}}function hu(e,t,n,s){e=null;for(var r=t,o=!1;r!==null;){if(!o){if(r.flags&524288)o=!0;else if(r.flags&262144)break}if(r.tag===10){var i=r.alternate;if(i===null)throw Error(Y(387));if(i=i.memoizedProps,i!==null){var l=r.type;An(r.pendingProps.value,i.value)||(e!==null?e.push(l):e=[l])}}else if(r===gf.current){if(i=r.alternate,i===null)throw Error(Y(387));i.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Pc):e=[Pc])}r=r.return}e!==null&&Bp(t,e,n,s),t.flags|=262144}function Sf(e){for(e=e.firstContext;e!==null;){if(!An(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function io(e){_o=e,cr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Vt(e){return cT(_o,e)}function sd(e,t){return _o===null&&io(e),cT(e,t)}function cT(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},cr===null){if(e===null)throw Error(Y(308));cr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else cr=cr.next=t;return n}var RJ=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},DJ=Et.unstable_scheduleCallback,zJ=Et.unstable_NormalPriority,kt={$$typeof:or,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mv(){return{controller:new RJ,data:new Map,refCount:0}}function gu(e){e.refCount--,e.refCount===0&&DJ(zJ,function(){e.controller.abort()})}var Ql=null,Ip=0,Ui=0,xi=null;function LJ(e,t){if(Ql===null){var n=Ql=[];Ip=0,Ui=ey(),xi={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Ip++,t.then(Dj,Dj),t}function Dj(){if(--Ip===0&&Ql!==null){xi!==null&&(xi.status="fulfilled");var e=Ql;Ql=null,Ui=0,xi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function $J(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var zj=ge.S;ge.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&LJ(e,t),zj!==null&&zj(e,t)};var Za=Us(null);function Rv(){var e=Za.current;return e!==null?e:Ye.pooledCache}function Ed(e,t){t===null?et(Za,Za.current):et(Za,t.pool)}function uT(){var e=Rv();return e===null?null:{parent:kt._currentValue,pool:e}}var pu=Error(Y(460)),dT=Error(Y(474)),Um=Error(Y(542)),Hp={then:function(){}};function Lj(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rd(){}function fT(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(rd,rd),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pj(e),e;default:if(typeof t.status=="string")t.then(rd,rd);else{if(e=Ye,e!==null&&100<e.shellSuspendCounter)throw Error(Y(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=s}},function(s){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pj(e),e}throw Jl=t,pu}}var Jl=null;function $j(){if(Jl===null)throw Error(Y(459));var e=Jl;return Jl=null,e}function Pj(e){if(e===pu||e===Um)throw Error(Y(483))}var Ur=!1;function Dv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Up(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function la(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,He&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=wf(e),oT(e,null,n),t}return Hm(e,s,t,n),wf(e)}function ec(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,zA(e,n)}}function sg(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?r=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Fp=!1;function tc(){if(Fp){var e=xi;if(e!==null)throw e}}function nc(e,t,n,s){Fp=!1;var r=e.updateQueue;Ur=!1;var o=r.firstBaseUpdate,i=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=r.baseState;i=0,d=u=c=null,l=o;do{var m=l.lane&-536870913,h=m!==l.lane;if(h?(Me&m)===m:(s&m)===m){m!==0&&m===Ui&&(Fp=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var p=e,v=l;m=t;var b=n;switch(v.tag){case 1:if(p=v.payload,typeof p=="function"){f=p.call(b,f,m);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,m=typeof p=="function"?p.call(b,f,m):p,m==null)break e;f=We({},f,m);break e;case 2:Ur=!0}}m=l.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[m]:h.push(m))}else h={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,i|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);d===null&&(c=f),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,o===null&&(r.shared.lanes=0),ya|=i,e.lanes=i,e.memoizedState=f}}function mT(e,t){if(typeof e!="function")throw Error(Y(191,e));e.call(t)}function hT(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)mT(n[e],t)}var Fi=Us(null),kf=Us(0);function Oj(e,t){e=kr,et(kf,e),et(Fi,t),kr=e|t.baseLanes}function Vp(){et(kf,kr),et(Fi,Fi.current)}function zv(){kr=kf.current,Rt(Fi),Rt(kf)}var xa=0,Se=null,Fe=null,bt=null,Cf=!1,vi=!1,lo=!1,Ef=0,Rc=0,yi=null,PJ=0;function mt(){throw Error(Y(321))}function Lv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!An(e[n],t[n]))return!1;return!0}function $v(e,t,n,s,r,o){return xa=o,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ge.H=e===null||e.memoizedState===null?qT:GT,lo=!1,o=n(s,r),lo=!1,vi&&(o=pT(t,n,s,r)),gT(e),o}function gT(e){ge.H=_f;var t=Fe!==null&&Fe.next!==null;if(xa=0,bt=Fe=Se=null,Cf=!1,Rc=0,yi=null,t)throw Error(Y(300));e===null||Mt||(e=e.dependencies,e!==null&&Sf(e)&&(Mt=!0))}function pT(e,t,n,s){Se=e;var r=0;do{if(vi&&(yi=null),Rc=0,vi=!1,25<=r)throw Error(Y(301));if(r+=1,bt=Fe=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}ge.H=VJ,o=t(n,s)}while(vi);return o}function OJ(){var e=ge.H,t=e.useState()[0];return t=typeof t.then=="function"?xu(t):t,e=e.useState()[0],(Fe!==null?Fe.memoizedState:null)!==e&&(Se.flags|=1024),t}function Pv(){var e=Ef!==0;return Ef=0,e}function Ov(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Bv(e){if(Cf){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Cf=!1}xa=0,bt=Fe=Se=null,vi=!1,Rc=Ef=0,yi=null}function tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Se.memoizedState=bt=e:bt=bt.next=e,bt}function wt(){if(Fe===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=bt===null?Se.memoizedState:bt.next;if(t!==null)bt=t,Fe=e;else{if(e===null)throw Se.alternate===null?Error(Y(467)):Error(Y(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},bt===null?Se.memoizedState=bt=e:bt=bt.next=e}return bt}function Iv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xu(e){var t=Rc;return Rc+=1,yi===null&&(yi=[]),e=fT(yi,e,t),t=Se,(bt===null?t.memoizedState:bt.next)===null&&(t=t.alternate,ge.H=t===null||t.memoizedState===null?qT:GT),e}function Fm(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xu(e);if(e.$$typeof===or)return Vt(e)}throw Error(Y(438,String(e)))}function Hv(e){var t=null,n=Se.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=Se.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Iv(),Se.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=jQ;return t.index++,n}function Nr(e,t){return typeof t=="function"?t(e):t}function _d(e){var t=wt();return Uv(t,Fe,e)}function Uv(e,t,n){var s=e.queue;if(s===null)throw Error(Y(311));s.lastRenderedReducer=n;var r=e.baseQueue,o=s.pending;if(o!==null){if(r!==null){var i=r.next;r.next=o.next,o.next=i}t.baseQueue=r=o,s.pending=null}if(o=e.baseState,r===null)e.memoizedState=o;else{t=r.next;var l=i=null,c=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(Me&f)===f:(xa&f)===f){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Ui&&(d=!0);else if((xa&m)===m){u=u.next,m===Ui&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=f,i=o):c=c.next=f,Se.lanes|=m,ya|=m;f=u.action,lo&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else m={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=m,i=o):c=c.next=m,Se.lanes|=f,ya|=f;u=u.next}while(u!==null&&u!==t);if(c===null?i=o:c.next=l,!An(o,e.memoizedState)&&(Mt=!0,d&&(n=xi,n!==null)))throw n;e.memoizedState=o,e.baseState=i,e.baseQueue=c,s.lastRenderedState=o}return r===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function rg(e){var t=wt(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var i=r=r.next;do o=e(o,i.action),i=i.next;while(i!==r);An(o,t.memoizedState)||(Mt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function xT(e,t,n){var s=Se,r=wt(),o=Le;if(o){if(n===void 0)throw Error(Y(407));n=n()}else n=t();var i=!An((Fe||r).memoizedState,n);i&&(r.memoizedState=n,Mt=!0),r=r.queue;var l=bT.bind(null,s,r,e);if(vu(2048,8,l,[e]),r.getSnapshot!==t||i||bt!==null&&bt.memoizedState.tag&1){if(s.flags|=2048,Vi(9,Vm(),yT.bind(null,s,r,n,t),null),Ye===null)throw Error(Y(349));o||xa&124||vT(s,t,n)}return n}function vT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Se.updateQueue,t===null?(t=Iv(),Se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function yT(e,t,n,s){t.value=n,t.getSnapshot=s,wT(t)&&jT(e)}function bT(e,t,n){return n(function(){wT(t)&&jT(e)})}function wT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!An(e,n)}catch{return!0}}function jT(e){var t=pl(e,2);t!==null&&Cn(t,e,2)}function qp(e){var t=tn();if(typeof e=="function"){var n=e;if(e=n(),lo){Qr(!0);try{n()}finally{Qr(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:e},t}function NT(e,t,n,s){return e.baseState=n,Uv(e,Fe,typeof s=="function"?s:Nr)}function BJ(e,t,n,s,r){if(qm(e))throw Error(Y(485));if(e=t.action,e!==null){var o={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){o.listeners.push(i)}};ge.T!==null?n(!0):o.isTransition=!1,s(o),n=t.pending,n===null?(o.next=t.pending=o,ST(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ST(e,t){var n=t.action,s=t.payload,r=e.state;if(t.isTransition){var o=ge.T,i={};ge.T=i;try{var l=n(r,s),c=ge.S;c!==null&&c(i,l),Bj(e,t,l)}catch(u){Gp(e,t,u)}finally{ge.T=o}}else try{o=n(r,s),Bj(e,t,o)}catch(u){Gp(e,t,u)}}function Bj(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Ij(e,t,s)},function(s){return Gp(e,t,s)}):Ij(e,t,n)}function Ij(e,t,n){t.status="fulfilled",t.value=n,kT(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ST(e,n)))}function Gp(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,kT(t),t=t.next;while(t!==s)}e.action=null}function kT(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function CT(e,t){return t}function Hj(e,t){if(Le){var n=Ye.formState;if(n!==null){e:{var s=Se;if(Le){if(lt){t:{for(var r=lt,o=Ns;r.nodeType!==8;){if(!o){r=null;break t}if(r=as(r.nextSibling),r===null){r=null;break t}}o=r.data,r=o==="F!"||o==="F"?r:null}if(r){lt=as(r.nextSibling),s=r.data==="F!";break e}}oo(s)}s=!1}s&&(t=n[0])}}return n=tn(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:CT,lastRenderedState:t},n.queue=s,n=UT.bind(null,Se,s),s.dispatch=n,s=qp(!1),o=Gv.bind(null,Se,!1,s.queue),s=tn(),r={state:t,dispatch:null,action:e,pending:null},s.queue=r,n=BJ.bind(null,Se,r,o,n),r.dispatch=n,s.memoizedState=e,[t,n,!1]}function Uj(e){var t=wt();return ET(t,Fe,e)}function ET(e,t,n){if(t=Uv(e,t,CT)[0],e=_d(Nr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=xu(t)}catch(i){throw i===pu?Um:i}else s=t;t=wt();var r=t.queue,o=r.dispatch;return n!==t.memoizedState&&(Se.flags|=2048,Vi(9,Vm(),IJ.bind(null,r,n),null)),[s,o,e]}function IJ(e,t){e.action=t}function Fj(e){var t=wt(),n=Fe;if(n!==null)return ET(t,n,e);wt(),t=t.memoizedState,n=wt();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function Vi(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},t=Se.updateQueue,t===null&&(t=Iv(),Se.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Vm(){return{destroy:void 0,resource:void 0}}function _T(){return wt().memoizedState}function Ad(e,t,n,s){var r=tn();s=s===void 0?null:s,Se.flags|=e,r.memoizedState=Vi(1|t,Vm(),n,s)}function vu(e,t,n,s){var r=wt();s=s===void 0?null:s;var o=r.memoizedState.inst;Fe!==null&&s!==null&&Lv(s,Fe.memoizedState.deps)?r.memoizedState=Vi(t,o,n,s):(Se.flags|=e,r.memoizedState=Vi(1|t,o,n,s))}function Vj(e,t){Ad(8390656,8,e,t)}function AT(e,t){vu(2048,8,e,t)}function TT(e,t){return vu(4,2,e,t)}function MT(e,t){return vu(4,4,e,t)}function RT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function DT(e,t,n){n=n!=null?n.concat([e]):null,vu(4,4,RT.bind(null,t,e),n)}function Fv(){}function zT(e,t){var n=wt();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&Lv(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function LT(e,t){var n=wt();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&Lv(t,s[1]))return s[0];if(s=e(),lo){Qr(!0);try{e()}finally{Qr(!1)}}return n.memoizedState=[s,t],s}function Vv(e,t,n){return n===void 0||xa&1073741824?e.memoizedState=t:(e.memoizedState=n,e=kM(),Se.lanes|=e,ya|=e,n)}function $T(e,t,n,s){return An(n,t)?n:Fi.current!==null?(e=Vv(e,n,s),An(e,t)||(Mt=!0),e):xa&42?(e=kM(),Se.lanes|=e,ya|=e,t):(Mt=!0,e.memoizedState=n)}function PT(e,t,n,s,r){var o=$e.p;$e.p=o!==0&&8>o?o:8;var i=ge.T,l={};ge.T=l,Gv(e,!1,t,n);try{var c=r(),u=ge.S;if(u!==null&&u(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=$J(c,s);sc(e,t,d,kn(e))}else sc(e,t,s,kn(e))}catch(f){sc(e,t,{then:function(){},status:"rejected",reason:f},kn())}finally{$e.p=o,ge.T=i}}function HJ(){}function Zp(e,t,n,s){if(e.tag!==5)throw Error(Y(476));var r=OT(e).queue;PT(e,r,t,Fa,n===null?HJ:function(){return BT(e),n(s)})}function OT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Fa,baseState:Fa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:Fa},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function BT(e){var t=OT(e).next.queue;sc(e,t,{},kn())}function qv(){return Vt(Pc)}function IT(){return wt().memoizedState}function HT(){return wt().memoizedState}function UJ(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=kn();e=ia(n);var s=la(t,e,n);s!==null&&(Cn(s,t,n),ec(s,t,n)),t={cache:Mv()},e.payload=t;return}t=t.return}}function FJ(e,t,n){var s=kn();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qm(e)?FT(t,n):(n=Ev(e,t,n,s),n!==null&&(Cn(n,e,s),VT(n,t,s)))}function UT(e,t,n){var s=kn();sc(e,t,n,s)}function sc(e,t,n,s){var r={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qm(e))FT(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,n);if(r.hasEagerState=!0,r.eagerState=l,An(l,i))return Hm(e,t,r,0),Ye===null&&Im(),!1}catch{}finally{}if(n=Ev(e,t,r,s),n!==null)return Cn(n,e,s),VT(n,t,s),!0}return!1}function Gv(e,t,n,s){if(s={lane:2,revertLane:ey(),action:s,hasEagerState:!1,eagerState:null,next:null},qm(e)){if(t)throw Error(Y(479))}else t=Ev(e,n,s,2),t!==null&&Cn(t,e,2)}function qm(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function FT(e,t){vi=Cf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function VT(e,t,n){if(n&4194048){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,zA(e,n)}}var _f={readContext:Vt,use:Fm,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt},qT={readContext:Vt,use:Fm,useCallback:function(e,t){return tn().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:Vj,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ad(4194308,4,RT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ad(4194308,4,e,t)},useInsertionEffect:function(e,t){Ad(4,2,e,t)},useMemo:function(e,t){var n=tn();t=t===void 0?null:t;var s=e();if(lo){Qr(!0);try{e()}finally{Qr(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=tn();if(n!==void 0){var r=n(t);if(lo){Qr(!0);try{n(t)}finally{Qr(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=FJ.bind(null,Se,e),[s.memoizedState,e]},useRef:function(e){var t=tn();return e={current:e},t.memoizedState=e},useState:function(e){e=qp(e);var t=e.queue,n=UT.bind(null,Se,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Fv,useDeferredValue:function(e,t){var n=tn();return Vv(n,e,t)},useTransition:function(){var e=qp(!1);return e=PT.bind(null,Se,e.queue,!0,!1),tn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=Se,r=tn();if(Le){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),Ye===null)throw Error(Y(349));Me&124||vT(s,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Vj(bT.bind(null,s,o,e),[e]),s.flags|=2048,Vi(9,Vm(),yT.bind(null,s,o,n,t),null),n},useId:function(){var e=tn(),t=Ye.identifierPrefix;if(Le){var n=lr,s=ir;n=(s&~(1<<32-Sn(s)-1)).toString(32)+n,t="«"+t+"R"+n,n=Ef++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=PJ++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:qv,useFormState:Hj,useActionState:Hj,useOptimistic:function(e){var t=tn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Gv.bind(null,Se,!0,n),n.dispatch=t,[e,t]},useMemoCache:Hv,useCacheRefresh:function(){return tn().memoizedState=UJ.bind(null,Se)}},GT={readContext:Vt,use:Fm,useCallback:zT,useContext:Vt,useEffect:AT,useImperativeHandle:DT,useInsertionEffect:TT,useLayoutEffect:MT,useMemo:LT,useReducer:_d,useRef:_T,useState:function(){return _d(Nr)},useDebugValue:Fv,useDeferredValue:function(e,t){var n=wt();return $T(n,Fe.memoizedState,e,t)},useTransition:function(){var e=_d(Nr)[0],t=wt().memoizedState;return[typeof e=="boolean"?e:xu(e),t]},useSyncExternalStore:xT,useId:IT,useHostTransitionStatus:qv,useFormState:Uj,useActionState:Uj,useOptimistic:function(e,t){var n=wt();return NT(n,Fe,e,t)},useMemoCache:Hv,useCacheRefresh:HT},VJ={readContext:Vt,use:Fm,useCallback:zT,useContext:Vt,useEffect:AT,useImperativeHandle:DT,useInsertionEffect:TT,useLayoutEffect:MT,useMemo:LT,useReducer:rg,useRef:_T,useState:function(){return rg(Nr)},useDebugValue:Fv,useDeferredValue:function(e,t){var n=wt();return Fe===null?Vv(n,e,t):$T(n,Fe.memoizedState,e,t)},useTransition:function(){var e=rg(Nr)[0],t=wt().memoizedState;return[typeof e=="boolean"?e:xu(e),t]},useSyncExternalStore:xT,useId:IT,useHostTransitionStatus:qv,useFormState:Fj,useActionState:Fj,useOptimistic:function(e,t){var n=wt();return Fe!==null?NT(n,Fe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Hv,useCacheRefresh:HT},bi=null,Dc=0;function ad(e){var t=Dc;return Dc+=1,bi===null&&(bi=[]),fT(bi,e,t)}function zl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function od(e,t){throw t.$$typeof===bQ?Error(Y(525)):(e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function qj(e){var t=e._init;return t(e._payload)}function ZT(e){function t(x,y){if(e){var w=x.deletions;w===null?(x.deletions=[y],x.flags|=16):w.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function s(x){for(var y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function r(x,y){return x=mr(x,y),x.index=0,x.sibling=null,x}function o(x,y,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<y?(x.flags|=67108866,y):w):(x.flags|=67108866,y)):(x.flags|=1048576,y)}function i(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function l(x,y,w,j){return y===null||y.tag!==6?(y=tg(w,x.mode,j),y.return=x,y):(y=r(y,w),y.return=x,y)}function c(x,y,w,j){var N=w.type;return N===Zo?d(x,y,w.props.children,j,w.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Hr&&qj(N)===y.type)?(y=r(y,w.props),zl(y,w),y.return=x,y):(y=Cd(w.type,w.key,w.props,null,x.mode,j),zl(y,w),y.return=x,y)}function u(x,y,w,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=ng(w,x.mode,j),y.return=x,y):(y=r(y,w.children||[]),y.return=x,y)}function d(x,y,w,j,N){return y===null||y.tag!==7?(y=Va(w,x.mode,j,N),y.return=x,y):(y=r(y,w),y.return=x,y)}function f(x,y,w){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=tg(""+y,x.mode,w),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qu:return w=Cd(y.type,y.key,y.props,null,x.mode,w),zl(w,y),w.return=x,w;case Ul:return y=ng(y,x.mode,w),y.return=x,y;case Hr:var j=y._init;return y=j(y._payload),f(x,y,w)}if(Fl(y)||Tl(y))return y=Va(y,x.mode,w,null),y.return=x,y;if(typeof y.then=="function")return f(x,ad(y),w);if(y.$$typeof===or)return f(x,sd(x,y),w);od(x,y)}return null}function m(x,y,w,j){var N=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return N!==null?null:l(x,y,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qu:return w.key===N?c(x,y,w,j):null;case Ul:return w.key===N?u(x,y,w,j):null;case Hr:return N=w._init,w=N(w._payload),m(x,y,w,j)}if(Fl(w)||Tl(w))return N!==null?null:d(x,y,w,j,null);if(typeof w.then=="function")return m(x,y,ad(w),j);if(w.$$typeof===or)return m(x,y,sd(x,w),j);od(x,w)}return null}function h(x,y,w,j,N){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return x=x.get(w)||null,l(y,x,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Qu:return x=x.get(j.key===null?w:j.key)||null,c(y,x,j,N);case Ul:return x=x.get(j.key===null?w:j.key)||null,u(y,x,j,N);case Hr:var S=j._init;return j=S(j._payload),h(x,y,w,j,N)}if(Fl(j)||Tl(j))return x=x.get(w)||null,d(y,x,j,N,null);if(typeof j.then=="function")return h(x,y,w,ad(j),N);if(j.$$typeof===or)return h(x,y,w,sd(y,j),N);od(y,j)}return null}function p(x,y,w,j){for(var N=null,S=null,k=y,E=y=0,C=null;k!==null&&E<w.length;E++){k.index>E?(C=k,k=null):C=k.sibling;var _=m(x,k,w[E],j);if(_===null){k===null&&(k=C);break}e&&k&&_.alternate===null&&t(x,k),y=o(_,y,E),S===null?N=_:S.sibling=_,S=_,k=C}if(E===w.length)return n(x,k),Le&&Da(x,E),N;if(k===null){for(;E<w.length;E++)k=f(x,w[E],j),k!==null&&(y=o(k,y,E),S===null?N=k:S.sibling=k,S=k);return Le&&Da(x,E),N}for(k=s(k);E<w.length;E++)C=h(k,x,E,w[E],j),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?E:C.key),y=o(C,y,E),S===null?N=C:S.sibling=C,S=C);return e&&k.forEach(function(P){return t(x,P)}),Le&&Da(x,E),N}function v(x,y,w,j){if(w==null)throw Error(Y(151));for(var N=null,S=null,k=y,E=y=0,C=null,_=w.next();k!==null&&!_.done;E++,_=w.next()){k.index>E?(C=k,k=null):C=k.sibling;var P=m(x,k,_.value,j);if(P===null){k===null&&(k=C);break}e&&k&&P.alternate===null&&t(x,k),y=o(P,y,E),S===null?N=P:S.sibling=P,S=P,k=C}if(_.done)return n(x,k),Le&&Da(x,E),N;if(k===null){for(;!_.done;E++,_=w.next())_=f(x,_.value,j),_!==null&&(y=o(_,y,E),S===null?N=_:S.sibling=_,S=_);return Le&&Da(x,E),N}for(k=s(k);!_.done;E++,_=w.next())_=h(k,x,E,_.value,j),_!==null&&(e&&_.alternate!==null&&k.delete(_.key===null?E:_.key),y=o(_,y,E),S===null?N=_:S.sibling=_,S=_);return e&&k.forEach(function(O){return t(x,O)}),Le&&Da(x,E),N}function b(x,y,w,j){if(typeof w=="object"&&w!==null&&w.type===Zo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Qu:e:{for(var N=w.key;y!==null;){if(y.key===N){if(N=w.type,N===Zo){if(y.tag===7){n(x,y.sibling),j=r(y,w.props.children),j.return=x,x=j;break e}}else if(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Hr&&qj(N)===y.type){n(x,y.sibling),j=r(y,w.props),zl(j,w),j.return=x,x=j;break e}n(x,y);break}else t(x,y);y=y.sibling}w.type===Zo?(j=Va(w.props.children,x.mode,j,w.key),j.return=x,x=j):(j=Cd(w.type,w.key,w.props,null,x.mode,j),zl(j,w),j.return=x,x=j)}return i(x);case Ul:e:{for(N=w.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(x,y.sibling),j=r(y,w.children||[]),j.return=x,x=j;break e}else{n(x,y);break}else t(x,y);y=y.sibling}j=ng(w,x.mode,j),j.return=x,x=j}return i(x);case Hr:return N=w._init,w=N(w._payload),b(x,y,w,j)}if(Fl(w))return p(x,y,w,j);if(Tl(w)){if(N=Tl(w),typeof N!="function")throw Error(Y(150));return w=N.call(w),v(x,y,w,j)}if(typeof w.then=="function")return b(x,y,ad(w),j);if(w.$$typeof===or)return b(x,y,sd(x,w),j);od(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,y!==null&&y.tag===6?(n(x,y.sibling),j=r(y,w),j.return=x,x=j):(n(x,y),j=tg(w,x.mode,j),j.return=x,x=j),i(x)):n(x,y)}return function(x,y,w,j){try{Dc=0;var N=b(x,y,w,j);return bi=null,N}catch(k){if(k===pu||k===Um)throw k;var S=bn(29,k,null,x.mode);return S.lanes=j,S.return=x,S}finally{}}}var qi=ZT(!0),YT=ZT(!1),Gn=Us(null),Ds=null;function Zr(e){var t=e.alternate;et(Ct,Ct.current&1),et(Gn,e),Ds===null&&(t===null||Fi.current!==null||t.memoizedState!==null)&&(Ds=e)}function XT(e){if(e.tag===22){if(et(Ct,Ct.current),et(Gn,e),Ds===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Ds=e)}}else Yr()}function Yr(){et(Ct,Ct.current),et(Gn,Gn.current)}function ur(e){Rt(Gn),Ds===e&&(Ds=null),Rt(Ct)}var Ct=Us(0);function Af(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||ux(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ag(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:We({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Yp={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=kn(),r=ia(s);r.payload=t,n!=null&&(r.callback=n),t=la(e,r,s),t!==null&&(Cn(t,e,s),ec(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=kn(),r=ia(s);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=la(e,r,s),t!==null&&(Cn(t,e,s),ec(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kn(),s=ia(n);s.tag=2,t!=null&&(s.callback=t),t=la(e,s,n),t!==null&&(Cn(t,e,n),ec(t,e,n))}};function Gj(e,t,n,s,r,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!Tc(n,s)||!Tc(r,o):!0}function Zj(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Yp.enqueueReplaceState(t,t.state,null)}function co(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=We({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Tf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function WT(e){Tf(e)}function KT(e){console.error(e)}function QT(e){Tf(e)}function Mf(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Yj(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Xp(e,t,n){return n=ia(n),n.tag=3,n.payload={element:null},n.callback=function(){Mf(e,t)},n}function JT(e){return e=ia(e),e.tag=3,e}function eM(e,t,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var o=s.value;e.payload=function(){return r(o)},e.callback=function(){Yj(t,n,s)}}var i=n.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){Yj(t,n,s),typeof r!="function"&&(ca===null?ca=new Set([this]):ca.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function qJ(e,t,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&hu(t,n,r,!0),n=Gn.current,n!==null){switch(n.tag){case 13:return Ds===null?sx():n.alternate===null&&ct===0&&(ct=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===Hp?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),pg(e,s,r)),!1;case 22:return n.flags|=65536,s===Hp?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),pg(e,s,r)),!1}throw Error(Y(435,n.tag))}return pg(e,s,r),sx(),!1}if(Le)return t=Gn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==$p&&(e=Error(Y(422),{cause:s}),Mc(Bn(e,n)))):(s!==$p&&(t=Error(Y(423),{cause:s}),Mc(Bn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,s=Bn(s,n),r=Xp(e.stateNode,s,r),sg(e,r),ct!==4&&(ct=2)),!1;var o=Error(Y(520),{cause:s});if(o=Bn(o,n),oc===null?oc=[o]:oc.push(o),ct!==4&&(ct=2),t===null)return!0;s=Bn(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Xp(n.stateNode,s,e),sg(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(ca===null||!ca.has(o))))return n.flags|=65536,r&=-r,n.lanes|=r,r=JT(r),eM(r,e,n,s),sg(n,r),!1}n=n.return}while(n!==null);return!1}var tM=Error(Y(461)),Mt=!1;function Pt(e,t,n,s){t.child=e===null?YT(t,null,n,s):qi(t,e.child,n,s)}function Xj(e,t,n,s,r){n=n.render;var o=t.ref;if("ref"in s){var i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}else i=s;return io(t),s=$v(e,t,n,i,o,r),l=Pv(),e!==null&&!Mt?(Ov(e,t,r),Sr(e,t,r)):(Le&&l&&Av(t),t.flags|=1,Pt(e,t,s,r),t.child)}function Wj(e,t,n,s,r){if(e===null){var o=n.type;return typeof o=="function"&&!_v(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,nM(e,t,o,s,r)):(e=Cd(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Zv(e,r)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Tc,n(i,s)&&e.ref===t.ref)return Sr(e,t,r)}return t.flags|=1,e=mr(o,s),e.ref=t.ref,e.return=t,t.child=e}function nM(e,t,n,s,r){if(e!==null){var o=e.memoizedProps;if(Tc(o,s)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=s=o,Zv(e,r))e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,Sr(e,t,r)}return Wp(e,t,n,s,r)}function sM(e,t,n){var s=t.pendingProps,r=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if(t.flags&128){if(s=o!==null?o.baseLanes|n:n,e!==null){for(r=t.child=e.child,o=0;r!==null;)o=o|r.lanes|r.childLanes,r=r.sibling;t.childLanes=o&~s}else t.childLanes=0,t.child=null;return Kj(e,t,s,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ed(t,o!==null?o.cachePool:null),o!==null?Oj(t,o):Vp(),XT(t);else return t.lanes=t.childLanes=536870912,Kj(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(Ed(t,o.cachePool),Oj(t,o),Yr(),t.memoizedState=null):(e!==null&&Ed(t,null),Vp(),Yr());return Pt(e,t,r,n),t.child}function Kj(e,t,n,s){var r=Rv();return r=r===null?null:{parent:kt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&Ed(t,null),Vp(),XT(t),e!==null&&hu(e,t,s,!0),null}function Td(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(Y(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Wp(e,t,n,s,r){return io(t),n=$v(e,t,n,s,void 0,r),s=Pv(),e!==null&&!Mt?(Ov(e,t,r),Sr(e,t,r)):(Le&&s&&Av(t),t.flags|=1,Pt(e,t,n,r),t.child)}function Qj(e,t,n,s,r,o){return io(t),t.updateQueue=null,n=pT(t,s,n,r),gT(e),s=Pv(),e!==null&&!Mt?(Ov(e,t,o),Sr(e,t,o)):(Le&&s&&Av(t),t.flags|=1,Pt(e,t,n,o),t.child)}function Jj(e,t,n,s,r){if(io(t),t.stateNode===null){var o=ti,i=n.contextType;typeof i=="object"&&i!==null&&(o=Vt(i)),o=new n(s,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Yp,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=s,o.state=t.memoizedState,o.refs={},Dv(t),i=n.contextType,o.context=typeof i=="object"&&i!==null?Vt(i):ti,o.state=t.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(ag(t,n,i,s),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(i=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),i!==o.state&&Yp.enqueueReplaceState(o,o.state,null),nc(t,s,o,r),tc(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){o=t.stateNode;var l=t.memoizedProps,c=co(n,l);o.props=c;var u=o.context,d=n.contextType;i=ti,typeof d=="object"&&d!==null&&(i=Vt(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l||u!==i)&&Zj(t,o,s,i),Ur=!1;var m=t.memoizedState;o.state=m,nc(t,s,o,r),tc(),u=t.memoizedState,l||m!==u||Ur?(typeof f=="function"&&(ag(t,n,f,s),u=t.memoizedState),(c=Ur||Gj(t,n,c,s,m,u,i))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=u),o.props=s,o.state=u,o.context=i,s=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,Up(e,t),i=t.memoizedProps,d=co(n,i),o.props=d,f=t.pendingProps,m=o.context,u=n.contextType,c=ti,typeof u=="object"&&u!==null&&(c=Vt(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==f||m!==c)&&Zj(t,o,s,c),Ur=!1,m=t.memoizedState,o.state=m,nc(t,s,o,r),tc();var h=t.memoizedState;i!==f||m!==h||Ur||e!==null&&e.dependencies!==null&&Sf(e.dependencies)?(typeof l=="function"&&(ag(t,n,l,s),h=t.memoizedState),(d=Ur||Gj(t,n,d,s,m,h,c)||e!==null&&e.dependencies!==null&&Sf(e.dependencies))?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,h,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,h,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=h),o.props=s,o.state=h,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return o=s,Td(e,t),s=(t.flags&128)!==0,o||s?(o=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&s?(t.child=qi(t,e.child,null,r),t.child=qi(t,null,n,r)):Pt(e,t,n,r),t.memoizedState=o.state,e=t.child):e=Sr(e,t,r),e}function eN(e,t,n,s){return mu(),t.flags|=256,Pt(e,t,n,s),t.child}var og={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ig(e){return{baseLanes:e,cachePool:uT()}}function lg(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Un),e}function rM(e,t,n){var s=t.pendingProps,r=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(Ct.current&2)!==0),i&&(r=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(Le){if(r?Zr(t):Yr(),Le){var l=lt,c;if(c=l){e:{for(c=l,l=Ns;c.nodeType!==8;){if(!l){l=null;break e}if(c=as(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:qa!==null?{id:ir,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},c=bn(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,Gt=t,lt=null,c=!0):c=!1}c||oo(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return ux(l)?t.lanes=32:t.lanes=536870912,null;ur(t)}return l=s.children,s=s.fallback,r?(Yr(),r=t.mode,l=Rf({mode:"hidden",children:l},r),s=Va(s,r,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,r=t.child,r.memoizedState=ig(n),r.childLanes=lg(e,i,n),t.memoizedState=og,s):(Zr(t),Kp(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(o)t.flags&256?(Zr(t),t.flags&=-257,t=cg(e,t,n)):t.memoizedState!==null?(Yr(),t.child=e.child,t.flags|=128,t=null):(Yr(),r=s.fallback,l=t.mode,s=Rf({mode:"visible",children:s.children},l),r=Va(r,l,n,null),r.flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,qi(t,e.child,null,n),s=t.child,s.memoizedState=ig(n),s.childLanes=lg(e,i,n),t.memoizedState=og,t=r);else if(Zr(t),ux(l)){if(i=l.nextSibling&&l.nextSibling.dataset,i)var u=i.dgst;i=u,s=Error(Y(419)),s.stack="",s.digest=i,Mc({value:s,source:null,stack:null}),t=cg(e,t,n)}else if(Mt||hu(e,t,n,!1),i=(n&e.childLanes)!==0,Mt||i){if(i=Ye,i!==null&&(s=n&-n,s=s&42?1:xv(s),s=s&(i.suspendedLanes|n)?0:s,s!==0&&s!==c.retryLane))throw c.retryLane=s,pl(e,s),Cn(i,e,s),tM;l.data==="$?"||sx(),t=cg(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,lt=as(l.nextSibling),Gt=t,Le=!0,Ga=null,Ns=!1,e!==null&&(Ln[$n++]=ir,Ln[$n++]=lr,Ln[$n++]=qa,ir=e.id,lr=e.overflow,qa=t),t=Kp(t,s.children),t.flags|=4096);return t}return r?(Yr(),r=s.fallback,l=t.mode,c=e.child,u=c.sibling,s=mr(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,u!==null?r=mr(u,r):(r=Va(r,l,n,null),r.flags|=2),r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,l=e.child.memoizedState,l===null?l=ig(n):(c=l.cachePool,c!==null?(u=kt._currentValue,c=c.parent!==u?{parent:u,pool:u}:c):c=uT(),l={baseLanes:l.baseLanes|n,cachePool:c}),r.memoizedState=l,r.childLanes=lg(e,i,n),t.memoizedState=og,s):(Zr(t),n=e.child,e=n.sibling,n=mr(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Kp(e,t){return t=Rf({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Rf(e,t){return e=bn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function cg(e,t,n){return qi(t,e.child,null,n),e=Kp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tN(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Op(e.return,t,n)}function ug(e,t,n,s,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=r)}function aM(e,t,n){var s=t.pendingProps,r=s.revealOrder,o=s.tail;if(Pt(e,t,s.children,n),s=Ct.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tN(e,n,t);else if(e.tag===19)tN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(et(Ct,s),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Af(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),ug(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Af(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}ug(t,!0,n,null,o);break;case"together":ug(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ya|=t.lanes,!(n&t.childLanes))if(e!==null){if(hu(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=mr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Zv(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Sf(e)))}function GJ(e,t,n){switch(t.tag){case 3:pf(t,t.stateNode.containerInfo),Gr(t,kt,e.memoizedState.cache),mu();break;case 27:case 5:Cp(t);break;case 4:pf(t,t.stateNode.containerInfo);break;case 10:Gr(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Zr(t),t.flags|=128,null):n&t.child.childLanes?rM(e,t,n):(Zr(t),e=Sr(e,t,n),e!==null?e.sibling:null);Zr(t);break;case 19:var r=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(hu(e,t,n,!1),s=(n&t.childLanes)!==0),r){if(s)return aM(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),et(Ct,Ct.current),s)break;return null;case 22:case 23:return t.lanes=0,sM(e,t,n);case 24:Gr(t,kt,e.memoizedState.cache)}return Sr(e,t,n)}function oM(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Mt=!0;else{if(!Zv(e,n)&&!(t.flags&128))return Mt=!1,GJ(e,t,n);Mt=!!(e.flags&131072)}else Mt=!1,Le&&t.flags&1048576&&lT(t,Nf,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,r=s._init;if(s=r(s._payload),t.type=s,typeof s=="function")_v(s)?(e=co(s,e),t.tag=1,t=Jj(null,t,s,e,n)):(t.tag=0,t=Wp(null,t,s,e,n));else{if(s!=null){if(r=s.$$typeof,r===hv){t.tag=11,t=Xj(null,t,s,e,n);break e}else if(r===gv){t.tag=14,t=Wj(null,t,s,e,n);break e}}throw t=Sp(s)||s,Error(Y(306,t,""))}}return t;case 0:return Wp(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,r=co(s,t.pendingProps),Jj(e,t,s,r,n);case 3:e:{if(pf(t,t.stateNode.containerInfo),e===null)throw Error(Y(387));s=t.pendingProps;var o=t.memoizedState;r=o.element,Up(e,t),nc(t,s,null,n);var i=t.memoizedState;if(s=i.cache,Gr(t,kt,s),s!==o.cache&&Bp(t,[kt],n,!0),tc(),s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=eN(e,t,s,n);break e}else if(s!==r){r=Bn(Error(Y(424)),t),Mc(r),t=eN(e,t,s,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(lt=as(e.firstChild),Gt=t,Le=!0,Ga=null,Ns=!0,n=YT(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(mu(),s===r){t=Sr(e,t,n);break e}Pt(e,t,s,n)}t=t.child}return t;case 26:return Td(e,t),e===null?(n=vN(t.type,null,t.pendingProps,null))?t.memoizedState=n:Le||(n=t.type,e=t.pendingProps,s=Bf(oa.current).createElement(n),s[Ft]=t,s[cn]=e,It(s,n,e),Tt(s),t.stateNode=s):t.memoizedState=vN(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Cp(t),e===null&&Le&&(s=t.stateNode=GM(t.type,t.pendingProps,oa.current),Gt=t,Ns=!0,r=lt,ka(t.type)?(dx=r,lt=as(s.firstChild)):lt=r),Pt(e,t,t.pendingProps.children,n),Td(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Le&&((r=s=lt)&&(s=bee(s,t.type,t.pendingProps,Ns),s!==null?(t.stateNode=s,Gt=t,lt=as(s.firstChild),Ns=!1,r=!0):r=!1),r||oo(t)),Cp(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,lx(r,o)?s=null:i!==null&&lx(r,i)&&(t.flags|=32),t.memoizedState!==null&&(r=$v(e,t,OJ,null,null,n),Pc._currentValue=r),Td(e,t),Pt(e,t,s,n),t.child;case 6:return e===null&&Le&&((e=n=lt)&&(n=wee(n,t.pendingProps,Ns),n!==null?(t.stateNode=n,Gt=t,lt=null,e=!0):e=!1),e||oo(t)),null;case 13:return rM(e,t,n);case 4:return pf(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=qi(t,null,s,n):Pt(e,t,s,n),t.child;case 11:return Xj(e,t,t.type,t.pendingProps,n);case 7:return Pt(e,t,t.pendingProps,n),t.child;case 8:return Pt(e,t,t.pendingProps.children,n),t.child;case 12:return Pt(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,Gr(t,t.type,s.value),Pt(e,t,s.children,n),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,io(t),r=Vt(r),s=s(r),t.flags|=1,Pt(e,t,s,n),t.child;case 14:return Wj(e,t,t.type,t.pendingProps,n);case 15:return nM(e,t,t.type,t.pendingProps,n);case 19:return aM(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},e===null?(n=Rf(s,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=mr(e.child,s),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return sM(e,t,n);case 24:return io(t),s=Vt(kt),e===null?(r=Rv(),r===null&&(r=Ye,o=Mv(),r.pooledCache=o,o.refCount++,o!==null&&(r.pooledCacheLanes|=n),r=o),t.memoizedState={parent:s,cache:r},Dv(t),Gr(t,kt,r)):(e.lanes&n&&(Up(e,t),nc(t,null,null,n),tc()),r=e.memoizedState,o=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Gr(t,kt,s)):(s=o.cache,Gr(t,kt,s),s!==r.cache&&Bp(t,[kt],n,!0))),Pt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(Y(156,t.tag))}function er(e){e.flags|=4}function nN(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!XM(t)){if(t=Gn.current,t!==null&&((Me&4194048)===Me?Ds!==null:(Me&62914560)!==Me&&!(Me&536870912)||t!==Ds))throw Jl=Hp,dT;e.flags|=8192}}function id(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?RA():536870912,e.lanes|=t,Gi|=t)}function Ll(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function ZJ(e,t,n){var s=t.pendingProps;switch(Tv(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return nt(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),hr(kt),Bi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Dl(t)?er(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rj())),nt(t),null;case 26:return n=t.memoizedState,e===null?(er(t),n!==null?(nt(t),nN(t,n)):(nt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(er(t),nt(t),nN(t,n)):(nt(t),t.flags&=-16777217):(e.memoizedProps!==s&&er(t),nt(t),t.flags&=-16777217),null;case 27:xf(t),n=oa.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&er(t);else{if(!s){if(t.stateNode===null)throw Error(Y(166));return nt(t),null}e=Ms.current,Dl(t)?Tj(t):(e=GM(r,s,n),t.stateNode=e,er(t))}return nt(t),null;case 5:if(xf(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&er(t);else{if(!s){if(t.stateNode===null)throw Error(Y(166));return nt(t),null}if(e=Ms.current,Dl(t))Tj(t);else{switch(r=Bf(oa.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?r.createElement(n,{is:s.is}):r.createElement(n)}}e[Ft]=t,e[cn]=s;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(It(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&er(t)}}return nt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&er(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Y(166));if(e=oa.current,Dl(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,r=Gt,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}e[Ft]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||FM(e.nodeValue,n)),e||oo(t)}else e=Bf(e).createTextNode(s),e[Ft]=t,t.stateNode=e}return nt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Dl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!r)throw Error(Y(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Y(317));r[Ft]=t}else mu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nt(t),r=!1}else r=Rj(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(ur(t),t):(ur(t),null)}if(ur(t),t.flags&128)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool);var o=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==r&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),id(t,t.updateQueue),nt(t),null;case 4:return Bi(),e===null&&ty(t.stateNode.containerInfo),nt(t),null;case 10:return hr(t.type),nt(t),null;case 19:if(Rt(Ct),r=t.memoizedState,r===null)return nt(t),null;if(s=(t.flags&128)!==0,o=r.rendering,o===null)if(s)Ll(r,!1);else{if(ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Af(e),o!==null){for(t.flags|=128,Ll(r,!1),e=o.updateQueue,t.updateQueue=e,id(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)iT(n,e),n=n.sibling;return et(Ct,Ct.current&1|2),t.child}e=e.sibling}r.tail!==null&&Rs()>zf&&(t.flags|=128,s=!0,Ll(r,!1),t.lanes=4194304)}else{if(!s)if(e=Af(o),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,id(t,e),Ll(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Le)return nt(t),null}else 2*Rs()-r.renderingStartTime>zf&&n!==536870912&&(t.flags|=128,s=!0,Ll(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Rs(),t.sibling=null,e=Ct.current,et(Ct,s?e&1|2:e&1),t):(nt(t),null);case 22:case 23:return ur(t),zv(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?n&536870912&&!(t.flags&128)&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),n=t.updateQueue,n!==null&&id(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&Rt(Za),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),hr(kt),nt(t),null;case 25:return null;case 30:return null}throw Error(Y(156,t.tag))}function YJ(e,t){switch(Tv(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hr(kt),Bi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return xf(t),null;case 13:if(ur(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));mu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(Ct),null;case 4:return Bi(),null;case 10:return hr(t.type),null;case 22:case 23:return ur(t),zv(),e!==null&&Rt(Za),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return hr(kt),null;case 25:return null;default:return null}}function iM(e,t){switch(Tv(t),t.tag){case 3:hr(kt),Bi();break;case 26:case 27:case 5:xf(t);break;case 4:Bi();break;case 13:ur(t);break;case 19:Rt(Ct);break;case 10:hr(t.type);break;case 22:case 23:ur(t),zv(),e!==null&&Rt(Za);break;case 24:hr(kt)}}function yu(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&e)===e){s=void 0;var o=n.create,i=n.inst;s=o(),i.destroy=s}n=n.next}while(n!==r)}}catch(l){qe(t,t.return,l)}}function va(e,t,n){try{var s=t.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var o=r.next;s=o;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(l!==void 0){i.destroy=void 0,r=t;var c=n,u=l;try{u()}catch(d){qe(r,c,d)}}}s=s.next}while(s!==o)}}catch(d){qe(t,t.return,d)}}function lM(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{hT(t,n)}catch(s){qe(e,e.return,s)}}}function cM(e,t,n){n.props=co(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){qe(e,t,s)}}function rc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof n=="function"?e.refCleanup=n(s):n.current=s}}catch(r){qe(e,t,r)}}function Es(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){qe(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){qe(e,t,r)}else n.current=null}function uM(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){qe(e,e.return,r)}}function dg(e,t,n){try{var s=e.stateNode;gee(s,e.type,n,t),s[cn]=t}catch(r){qe(e,e.return,r)}}function dM(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ka(e.type)||e.tag===4}function fg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ka(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qp(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xm));else if(s!==4&&(s===27&&ka(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Qp(e,t,n),e=e.sibling;e!==null;)Qp(e,t,n),e=e.sibling}function Df(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(s===27&&ka(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Df(e,t,n),e=e.sibling;e!==null;)Df(e,t,n),e=e.sibling}function fM(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);It(t,s,n),t[Ft]=e,t[cn]=n}catch(o){qe(e,e.return,o)}}var rr=!1,gt=!1,mg=!1,sN=typeof WeakSet=="function"?WeakSet:Set,At=null;function XJ(e,t){if(e=e.containerInfo,ox=Ff,e=JA(e),kv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var h;f!==n||r!==0&&f.nodeType!==3||(l=i+r),f!==o||s!==0&&f.nodeType!==3||(c=i+s),f.nodeType===3&&(i+=f.nodeValue.length),(h=f.firstChild)!==null;)m=f,f=h;for(;;){if(f===e)break t;if(m===n&&++u===r&&(l=i),m===o&&++d===s&&(c=i),(h=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ix={focusedElem:e,selectionRange:n},Ff=!1,At=t;At!==null;)if(t=At,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,At=e;else for(;At!==null;){switch(t=At,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,r=o.memoizedProps,o=o.memoizedState,s=n.stateNode;try{var p=co(n.type,r,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(p,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(v){qe(n,n.return,v)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)cx(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":cx(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(Y(163))}if(e=t.sibling,e!==null){e.return=t.return,At=e;break}At=t.return}}function mM(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:$r(e,n),s&4&&yu(5,n);break;case 1:if($r(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(i){qe(n,n.return,i)}else{var r=co(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){qe(n,n.return,i)}}s&64&&lM(n),s&512&&rc(n,n.return);break;case 3:if($r(e,n),s&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{hT(e,t)}catch(i){qe(n,n.return,i)}}break;case 27:t===null&&s&4&&fM(n);case 26:case 5:$r(e,n),t===null&&s&4&&uM(n),s&512&&rc(n,n.return);break;case 12:$r(e,n);break;case 13:$r(e,n),s&4&&pM(e,n),s&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ree.bind(null,n),jee(e,n))));break;case 22:if(s=n.memoizedState!==null||rr,!s){t=t!==null&&t.memoizedState!==null||gt,r=rr;var o=gt;rr=s,(gt=t)&&!o?Or(e,n,(n.subtreeFlags&8772)!==0):$r(e,n),rr=r,gt=o}break;case 30:break;default:$r(e,n)}}function hM(e){var t=e.alternate;t!==null&&(e.alternate=null,hM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&yv(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ke=null,nn=!1;function tr(e,t,n){for(n=n.child;n!==null;)gM(e,t,n),n=n.sibling}function gM(e,t,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(lu,n)}catch{}switch(n.tag){case 26:gt||Es(n,t),tr(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:gt||Es(n,t);var s=Ke,r=nn;ka(n.type)&&(Ke=n.stateNode,nn=!1),tr(e,t,n),lc(n.stateNode),Ke=s,nn=r;break;case 5:gt||Es(n,t);case 6:if(s=Ke,r=nn,Ke=null,tr(e,t,n),Ke=s,nn=r,Ke!==null)if(nn)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(n.stateNode)}catch(o){qe(n,t,o)}else try{Ke.removeChild(n.stateNode)}catch(o){qe(n,t,o)}break;case 18:Ke!==null&&(nn?(e=Ke,gN(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ic(e)):gN(Ke,n.stateNode));break;case 4:s=Ke,r=nn,Ke=n.stateNode.containerInfo,nn=!0,tr(e,t,n),Ke=s,nn=r;break;case 0:case 11:case 14:case 15:gt||va(2,n,t),gt||va(4,n,t),tr(e,t,n);break;case 1:gt||(Es(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&cM(n,t,s)),tr(e,t,n);break;case 21:tr(e,t,n);break;case 22:gt=(s=gt)||n.memoizedState!==null,tr(e,t,n),gt=s;break;default:tr(e,t,n)}}function pM(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ic(e)}catch(n){qe(t,t.return,n)}}function WJ(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new sN),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new sN),t;default:throw Error(Y(435,e.tag))}}function hg(e,t){var n=WJ(e);t.forEach(function(s){var r=aee.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}function gn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 27:if(ka(l.type)){Ke=l.stateNode,nn=!1;break e}break;case 5:Ke=l.stateNode,nn=!1;break e;case 3:case 4:Ke=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(Ke===null)throw Error(Y(160));gM(o,i,r),Ke=null,nn=!1,o=r.alternate,o!==null&&(o.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)xM(t,e),t=t.sibling}var Jn=null;function xM(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gn(t,e),pn(e),s&4&&(va(3,e,e.return),yu(3,e),va(5,e,e.return));break;case 1:gn(t,e),pn(e),s&512&&(gt||n===null||Es(n,n.return)),s&64&&rr&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=Jn;if(gn(t,e),pn(e),s&512&&(gt||n===null||Es(n,n.return)),s&4){var o=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":o=r.getElementsByTagName("title")[0],(!o||o[du]||o[Ft]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=r.createElement(s),r.head.insertBefore(o,r.querySelector("head > title"))),It(o,s,n),o[Ft]=e,Tt(o),s=o;break e;case"link":var i=bN("link","href",r).get(s+(n.href||""));if(i){for(var l=0;l<i.length;l++)if(o=i[l],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){i.splice(l,1);break t}}o=r.createElement(s),It(o,s,n),r.head.appendChild(o);break;case"meta":if(i=bN("meta","content",r).get(s+(n.content||""))){for(l=0;l<i.length;l++)if(o=i[l],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){i.splice(l,1);break t}}o=r.createElement(s),It(o,s,n),r.head.appendChild(o);break;default:throw Error(Y(468,s))}o[Ft]=e,Tt(o),s=o}e.stateNode=s}else wN(r,e.type,e.stateNode);else e.stateNode=yN(r,s,e.memoizedProps);else o!==s?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,s===null?wN(r,e.type,e.stateNode):yN(r,s,e.memoizedProps)):s===null&&e.stateNode!==null&&dg(e,e.memoizedProps,n.memoizedProps)}break;case 27:gn(t,e),pn(e),s&512&&(gt||n===null||Es(n,n.return)),n!==null&&s&4&&dg(e,e.memoizedProps,n.memoizedProps);break;case 5:if(gn(t,e),pn(e),s&512&&(gt||n===null||Es(n,n.return)),e.flags&32){r=e.stateNode;try{Hi(r,"")}catch(h){qe(e,e.return,h)}}s&4&&e.stateNode!=null&&(r=e.memoizedProps,dg(e,r,n!==null?n.memoizedProps:r)),s&1024&&(mg=!0);break;case 6:if(gn(t,e),pn(e),s&4){if(e.stateNode===null)throw Error(Y(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(h){qe(e,e.return,h)}}break;case 3:if(Dd=null,r=Jn,Jn=If(t.containerInfo),gn(t,e),Jn=r,pn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ic(t.containerInfo)}catch(h){qe(e,e.return,h)}mg&&(mg=!1,vM(e));break;case 4:s=Jn,Jn=If(e.stateNode.containerInfo),gn(t,e),pn(e),Jn=s;break;case 12:gn(t,e),pn(e);break;case 13:gn(t,e),pn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Qv=Rs()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,hg(e,s)));break;case 22:r=e.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=rr,d=gt;if(rr=u||r,gt=d||c,gn(t,e),gt=d,rr=u,pn(e),s&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||c||rr||gt||za(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){c=n=t;try{if(o=c.stateNode,r)i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var f=c.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(h){qe(c,c.return,h)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(h){qe(c,c.return,h)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,hg(e,n))));break;case 19:gn(t,e),pn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,hg(e,s)));break;case 30:break;case 21:break;default:gn(t,e),pn(e)}}function pn(e){var t=e.flags;if(t&2){try{for(var n,s=e.return;s!==null;){if(dM(s)){n=s;break}s=s.return}if(n==null)throw Error(Y(160));switch(n.tag){case 27:var r=n.stateNode,o=fg(e);Df(e,o,r);break;case 5:var i=n.stateNode;n.flags&32&&(Hi(i,""),n.flags&=-33);var l=fg(e);Df(e,l,i);break;case 3:case 4:var c=n.stateNode.containerInfo,u=fg(e);Qp(e,u,c);break;default:throw Error(Y(161))}}catch(d){qe(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vM(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vM(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function $r(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)mM(e,t.alternate,t),t=t.sibling}function za(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:va(4,t,t.return),za(t);break;case 1:Es(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&cM(t,t.return,n),za(t);break;case 27:lc(t.stateNode);case 26:case 5:Es(t,t.return),za(t);break;case 22:t.memoizedState===null&&za(t);break;case 30:za(t);break;default:za(t)}e=e.sibling}}function Or(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,r=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:Or(r,o,n),yu(4,o);break;case 1:if(Or(r,o,n),s=o,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){qe(s,s.return,u)}if(s=o,r=s.updateQueue,r!==null){var l=s.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)mT(c[r],l)}catch(u){qe(s,s.return,u)}}n&&i&64&&lM(o),rc(o,o.return);break;case 27:fM(o);case 26:case 5:Or(r,o,n),n&&s===null&&i&4&&uM(o),rc(o,o.return);break;case 12:Or(r,o,n);break;case 13:Or(r,o,n),n&&i&4&&pM(r,o);break;case 22:o.memoizedState===null&&Or(r,o,n),rc(o,o.return);break;case 30:break;default:Or(r,o,n)}t=t.sibling}}function Yv(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&gu(n))}function Xv(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gu(e))}function ys(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)yM(e,t,n,s),t=t.sibling}function yM(e,t,n,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:ys(e,t,n,s),r&2048&&yu(9,t);break;case 1:ys(e,t,n,s);break;case 3:ys(e,t,n,s),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gu(e)));break;case 12:if(r&2048){ys(e,t,n,s),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,l=o.onPostCommit;typeof l=="function"&&l(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){qe(t,t.return,c)}}else ys(e,t,n,s);break;case 13:ys(e,t,n,s);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,t.memoizedState!==null?o._visibility&2?ys(e,t,n,s):ac(e,t):o._visibility&2?ys(e,t,n,s):(o._visibility|=2,Fo(e,t,n,s,(t.subtreeFlags&10256)!==0)),r&2048&&Yv(i,t);break;case 24:ys(e,t,n,s),r&2048&&Xv(t.alternate,t);break;default:ys(e,t,n,s)}}function Fo(e,t,n,s,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,i=t,l=n,c=s,u=i.flags;switch(i.tag){case 0:case 11:case 15:Fo(o,i,l,c,r),yu(8,i);break;case 23:break;case 22:var d=i.stateNode;i.memoizedState!==null?d._visibility&2?Fo(o,i,l,c,r):ac(o,i):(d._visibility|=2,Fo(o,i,l,c,r)),r&&u&2048&&Yv(i.alternate,i);break;case 24:Fo(o,i,l,c,r),r&&u&2048&&Xv(i.alternate,i);break;default:Fo(o,i,l,c,r)}t=t.sibling}}function ac(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,r=s.flags;switch(s.tag){case 22:ac(n,s),r&2048&&Yv(s.alternate,s);break;case 24:ac(n,s),r&2048&&Xv(s.alternate,s);break;default:ac(n,s)}t=t.sibling}}var ql=8192;function Bo(e){if(e.subtreeFlags&ql)for(e=e.child;e!==null;)bM(e),e=e.sibling}function bM(e){switch(e.tag){case 26:Bo(e),e.flags&ql&&e.memoizedState!==null&&Lee(Jn,e.memoizedState,e.memoizedProps);break;case 5:Bo(e);break;case 3:case 4:var t=Jn;Jn=If(e.stateNode.containerInfo),Bo(e),Jn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ql,ql=16777216,Bo(e),ql=t):Bo(e));break;default:Bo(e)}}function wM(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function $l(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];At=s,NM(s,e)}wM(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jM(e),e=e.sibling}function jM(e){switch(e.tag){case 0:case 11:case 15:$l(e),e.flags&2048&&va(9,e,e.return);break;case 3:$l(e);break;case 12:$l(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Md(e)):$l(e);break;default:$l(e)}}function Md(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];At=s,NM(s,e)}wM(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:va(8,t,t.return),Md(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Md(t));break;default:Md(t)}e=e.sibling}}function NM(e,t){for(;At!==null;){var n=At;switch(n.tag){case 0:case 11:case 15:va(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:gu(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,At=s;else e:for(n=e;At!==null;){s=At;var r=s.sibling,o=s.return;if(hM(s),s===n){At=null;break e}if(r!==null){r.return=o,At=r;break e}At=o}}}var KJ={getCacheForType:function(e){var t=Vt(kt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},QJ=typeof WeakMap=="function"?WeakMap:Map,He=0,Ye=null,Ee=null,Me=0,Ie=0,xn=null,ea=!1,xl=!1,Wv=!1,kr=0,ct=0,ya=0,Ya=0,Kv=0,Un=0,Gi=0,oc=null,sn=null,Jp=!1,Qv=0,zf=1/0,Lf=null,ca=null,Ot=0,ua=null,Zi=null,wi=0,ex=0,tx=null,SM=null,ic=0,nx=null;function kn(){if(He&2&&Me!==0)return Me&-Me;if(ge.T!==null){var e=Ui;return e!==0?e:ey()}return LA()}function kM(){Un===0&&(Un=!(Me&536870912)||Le?MA():536870912);var e=Gn.current;return e!==null&&(e.flags|=32),Un}function Cn(e,t,n){(e===Ye&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)&&(Yi(e,0),ta(e,Me,Un,!1)),uu(e,n),(!(He&2)||e!==Ye)&&(e===Ye&&(!(He&2)&&(Ya|=n),ct===4&&ta(e,Me,Un,!1)),Fs(e))}function CM(e,t,n){if(He&6)throw Error(Y(327));var s=!n&&(t&124)===0&&(t&e.expiredLanes)===0||cu(e,t),r=s?tee(e,t):gg(e,t,!0),o=s;do{if(r===0){xl&&!s&&ta(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!JJ(n)){r=gg(e,t,!1),o=!1;continue}if(r===2){if(o=t,e.errorRecoveryDisabledLanes&o)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var l=e;r=oc;var c=l.current.memoizedState.isDehydrated;if(c&&(Yi(l,i).flags|=256),i=gg(l,i,!1),i!==2){if(Wv&&!c){l.errorRecoveryDisabledLanes|=o,Ya|=o,r=4;break e}o=sn,sn=r,o!==null&&(sn===null?sn=o:sn.push.apply(sn,o))}r=i}if(o=!1,r!==2)continue}}if(r===1){Yi(e,0),ta(e,t,0,!0);break}e:{switch(s=e,o=r,o){case 0:case 1:throw Error(Y(345));case 4:if((t&4194048)!==t)break;case 6:ta(s,t,Un,!ea);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(Y(329))}if((t&62914560)===t&&(r=Qv+300-Rs(),10<r)){if(ta(s,t,Un,!ea),$m(s,0,!0)!==0)break e;s.timeoutHandle=qM(rN.bind(null,s,n,sn,Lf,Jp,t,Un,Ya,Gi,ea,o,2,-0,0),r);break e}rN(s,n,sn,Lf,Jp,t,Un,Ya,Gi,ea,o,0,-0,0)}}break}while(!0);Fs(e)}function rN(e,t,n,s,r,o,i,l,c,u,d,f,m,h){if(e.timeoutHandle=-1,f=t.subtreeFlags,(f&8192||(f&16785408)===16785408)&&($c={stylesheets:null,count:0,unsuspend:zee},bM(t),f=$ee(),f!==null)){e.cancelPendingCommit=f(oN.bind(null,e,t,o,n,s,r,i,l,c,d,1,m,h)),ta(e,o,i,!u);return}oN(e,t,o,n,s,r,i,l,c)}function JJ(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],o=r.getSnapshot;r=r.value;try{if(!An(o(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ta(e,t,n,s){t&=~Kv,t&=~Ya,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var o=31-Sn(r),i=1<<o;s[o]=-1,r&=~i}n!==0&&DA(e,n,t)}function Gm(){return He&6?!0:(bu(0),!1)}function Jv(){if(Ee!==null){if(Ie===0)var e=Ee.return;else e=Ee,cr=_o=null,Bv(e),bi=null,Dc=0,e=Ee;for(;e!==null;)iM(e.alternate,e),e=e.return;Ee=null}}function Yi(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,xee(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Jv(),Ye=e,Ee=n=mr(e.current,null),Me=t,Ie=0,xn=null,ea=!1,xl=cu(e,t),Wv=!1,Gi=Un=Kv=Ya=ya=ct=0,sn=oc=null,Jp=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var r=31-Sn(s),o=1<<r;t|=e[r],s&=~o}return kr=t,Im(),n}function EM(e,t){Se=null,ge.H=_f,t===pu||t===Um?(t=$j(),Ie=3):t===dT?(t=$j(),Ie=4):Ie=t===tM?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,xn=t,Ee===null&&(ct=1,Mf(e,Bn(t,e.current)))}function _M(){var e=ge.H;return ge.H=_f,e===null?_f:e}function AM(){var e=ge.A;return ge.A=KJ,e}function sx(){ct=4,ea||(Me&4194048)!==Me&&Gn.current!==null||(xl=!0),!(ya&134217727)&&!(Ya&134217727)||Ye===null||ta(Ye,Me,Un,!1)}function gg(e,t,n){var s=He;He|=2;var r=_M(),o=AM();(Ye!==e||Me!==t)&&(Lf=null,Yi(e,t)),t=!1;var i=ct;e:do try{if(Ie!==0&&Ee!==null){var l=Ee,c=xn;switch(Ie){case 8:Jv(),i=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(t=!0);var u=Ie;if(Ie=0,xn=null,ri(e,l,c,u),n&&xl){i=0;break e}break;default:u=Ie,Ie=0,xn=null,ri(e,l,c,u)}}eee(),i=ct;break}catch(d){EM(e,d)}while(!0);return t&&e.shellSuspendCounter++,cr=_o=null,He=s,ge.H=r,ge.A=o,Ee===null&&(Ye=null,Me=0,Im()),i}function eee(){for(;Ee!==null;)TM(Ee)}function tee(e,t){var n=He;He|=2;var s=_M(),r=AM();Ye!==e||Me!==t?(Lf=null,zf=Rs()+500,Yi(e,t)):xl=cu(e,t);e:do try{if(Ie!==0&&Ee!==null){t=Ee;var o=xn;t:switch(Ie){case 1:Ie=0,xn=null,ri(e,t,o,1);break;case 2:case 9:if(Lj(o)){Ie=0,xn=null,aN(t);break}t=function(){Ie!==2&&Ie!==9||Ye!==e||(Ie=7),Fs(e)},o.then(t,t);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:Lj(o)?(Ie=0,xn=null,aN(t)):(Ie=0,xn=null,ri(e,t,o,7));break;case 5:var i=null;switch(Ee.tag){case 26:i=Ee.memoizedState;case 5:case 27:var l=Ee;if(!i||XM(i)){Ie=0,xn=null;var c=l.sibling;if(c!==null)Ee=c;else{var u=l.return;u!==null?(Ee=u,Zm(u)):Ee=null}break t}}Ie=0,xn=null,ri(e,t,o,5);break;case 6:Ie=0,xn=null,ri(e,t,o,6);break;case 8:Jv(),ct=6;break e;default:throw Error(Y(462))}}nee();break}catch(d){EM(e,d)}while(!0);return cr=_o=null,ge.H=s,ge.A=r,He=n,Ee!==null?0:(Ye=null,Me=0,Im(),ct)}function nee(){for(;Ee!==null&&!SQ();)TM(Ee)}function TM(e){var t=oM(e.alternate,e,kr);e.memoizedProps=e.pendingProps,t===null?Zm(e):Ee=t}function aN(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Qj(n,t,t.pendingProps,t.type,void 0,Me);break;case 11:t=Qj(n,t,t.pendingProps,t.type.render,t.ref,Me);break;case 5:Bv(t);default:iM(n,t),t=Ee=iT(t,kr),t=oM(n,t,kr)}e.memoizedProps=e.pendingProps,t===null?Zm(e):Ee=t}function ri(e,t,n,s){cr=_o=null,Bv(t),bi=null,Dc=0;var r=t.return;try{if(qJ(e,r,t,n,Me)){ct=1,Mf(e,Bn(n,e.current)),Ee=null;return}}catch(o){if(r!==null)throw Ee=r,o;ct=1,Mf(e,Bn(n,e.current)),Ee=null;return}t.flags&32768?(Le||s===1?e=!0:xl||Me&536870912?e=!1:(ea=e=!0,(s===2||s===9||s===3||s===6)&&(s=Gn.current,s!==null&&s.tag===13&&(s.flags|=16384))),MM(t,e)):Zm(t)}function Zm(e){var t=e;do{if(t.flags&32768){MM(t,ea);return}e=t.return;var n=ZJ(t.alternate,t,kr);if(n!==null){Ee=n;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);ct===0&&(ct=5)}function MM(e,t){do{var n=YJ(e.alternate,e);if(n!==null){n.flags&=32767,Ee=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=n}while(e!==null);ct=6,Ee=null}function oN(e,t,n,s,r,o,i,l,c){e.cancelPendingCommit=null;do Ym();while(Ot!==0);if(He&6)throw Error(Y(327));if(t!==null){if(t===e.current)throw Error(Y(177));if(o=t.lanes|t.childLanes,o|=Cv,zQ(e,n,o,i,l,c),e===Ye&&(Ee=Ye=null,Me=0),Zi=t,ua=e,wi=n,ex=o,tx=r,SM=s,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,oee(vf,function(){return $M(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,t.subtreeFlags&13878||s){s=ge.T,ge.T=null,r=$e.p,$e.p=2,i=He,He|=4;try{XJ(e,t,n)}finally{He=i,$e.p=r,ge.T=s}}Ot=1,RM(),DM(),zM()}}function RM(){if(Ot===1){Ot=0;var e=ua,t=Zi,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=ge.T,ge.T=null;var s=$e.p;$e.p=2;var r=He;He|=4;try{xM(t,e);var o=ix,i=JA(e.containerInfo),l=o.focusedElem,c=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&QA(l.ownerDocument.documentElement,l)){if(c!==null&&kv(l)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var h=m.getSelection(),p=l.textContent.length,v=Math.min(c.start,p),b=c.end===void 0?v:Math.min(c.end,p);!h.extend&&v>b&&(i=b,b=v,v=i);var x=Ej(l,v),y=Ej(l,b);if(x&&y&&(h.rangeCount!==1||h.anchorNode!==x.node||h.anchorOffset!==x.offset||h.focusNode!==y.node||h.focusOffset!==y.offset)){var w=f.createRange();w.setStart(x.node,x.offset),h.removeAllRanges(),v>b?(h.addRange(w),h.extend(y.node,y.offset)):(w.setEnd(y.node,y.offset),h.addRange(w))}}}}for(f=[],h=l;h=h.parentNode;)h.nodeType===1&&f.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var j=f[l];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}Ff=!!ox,ix=ox=null}finally{He=r,$e.p=s,ge.T=n}}e.current=t,Ot=2}}function DM(){if(Ot===2){Ot=0;var e=ua,t=Zi,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=ge.T,ge.T=null;var s=$e.p;$e.p=2;var r=He;He|=4;try{mM(e,t.alternate,t)}finally{He=r,$e.p=s,ge.T=n}}Ot=3}}function zM(){if(Ot===4||Ot===3){Ot=0,kQ();var e=ua,t=Zi,n=wi,s=SM;t.subtreeFlags&10256||t.flags&10256?Ot=5:(Ot=0,Zi=ua=null,LM(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(ca=null),vv(n),t=t.stateNode,Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(lu,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=ge.T,r=$e.p,$e.p=2,ge.T=null;try{for(var o=e.onRecoverableError,i=0;i<s.length;i++){var l=s[i];o(l.value,{componentStack:l.stack})}}finally{ge.T=t,$e.p=r}}wi&3&&Ym(),Fs(e),r=e.pendingLanes,n&4194090&&r&42?e===nx?ic++:(ic=0,nx=e):ic=0,bu(0)}}function LM(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gu(t)))}function Ym(e){return RM(),DM(),zM(),$M()}function $M(){if(Ot!==5)return!1;var e=ua,t=ex;ex=0;var n=vv(wi),s=ge.T,r=$e.p;try{$e.p=32>n?32:n,ge.T=null,n=tx,tx=null;var o=ua,i=wi;if(Ot=0,Zi=ua=null,wi=0,He&6)throw Error(Y(331));var l=He;if(He|=4,jM(o.current),yM(o,o.current,i,n),He=l,bu(0,!1),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(lu,o)}catch{}return!0}finally{$e.p=r,ge.T=s,LM(e,t)}}function iN(e,t,n){t=Bn(n,t),t=Xp(e.stateNode,t,2),e=la(e,t,2),e!==null&&(uu(e,2),Fs(e))}function qe(e,t,n){if(e.tag===3)iN(e,e,n);else for(;t!==null;){if(t.tag===3){iN(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ca===null||!ca.has(s))){e=Bn(n,e),n=JT(2),s=la(t,n,2),s!==null&&(eM(n,s,t,e),uu(s,2),Fs(s));break}}t=t.return}}function pg(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new QJ;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(Wv=!0,r.add(n),e=see.bind(null,e,t,n),t.then(e,e))}function see(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ye===e&&(Me&n)===n&&(ct===4||ct===3&&(Me&62914560)===Me&&300>Rs()-Qv?!(He&2)&&Yi(e,0):Kv|=n,Gi===Me&&(Gi=0)),Fs(e)}function PM(e,t){t===0&&(t=RA()),e=pl(e,t),e!==null&&(uu(e,t),Fs(e))}function ree(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),PM(e,n)}function aee(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(Y(314))}s!==null&&s.delete(t),PM(e,n)}function oee(e,t){return pv(e,t)}var $f=null,Vo=null,rx=!1,Pf=!1,xg=!1,Xa=0;function Fs(e){e!==Vo&&e.next===null&&(Vo===null?$f=Vo=e:Vo=Vo.next=e),Pf=!0,rx||(rx=!0,lee())}function bu(e,t){if(!xg&&Pf){xg=!0;do for(var n=!1,s=$f;s!==null;){if(e!==0){var r=s.pendingLanes;if(r===0)var o=0;else{var i=s.suspendedLanes,l=s.pingedLanes;o=(1<<31-Sn(42|e)+1)-1,o&=r&~(i&~l),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,lN(s,o))}else o=Me,o=$m(s,s===Ye?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(o&3)||cu(s,o)||(n=!0,lN(s,o));s=s.next}while(n);xg=!1}}function iee(){OM()}function OM(){Pf=rx=!1;var e=0;Xa!==0&&(pee()&&(e=Xa),Xa=0);for(var t=Rs(),n=null,s=$f;s!==null;){var r=s.next,o=BM(s,t);o===0?(s.next=null,n===null?$f=r:n.next=r,r===null&&(Vo=n)):(n=s,(e!==0||o&3)&&(Pf=!0)),s=r}bu(e)}function BM(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var i=31-Sn(o),l=1<<i,c=r[i];c===-1?(!(l&n)||l&s)&&(r[i]=DQ(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}if(t=Ye,n=Me,n=$m(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,n===0||e===t&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Fh(s),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||cu(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&Fh(s),vv(n)){case 2:case 8:n=AA;break;case 32:n=vf;break;case 268435456:n=TA;break;default:n=vf}return s=IM.bind(null,e),n=pv(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&Fh(s),e.callbackPriority=2,e.callbackNode=null,2}function IM(e,t){if(Ot!==0&&Ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ym()&&e.callbackNode!==n)return null;var s=Me;return s=$m(e,e===Ye?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(CM(e,s,t),BM(e,Rs()),e.callbackNode!=null&&e.callbackNode===n?IM.bind(null,e):null)}function lN(e,t){if(Ym())return null;CM(e,t,!0)}function lee(){vee(function(){He&6?pv(_A,iee):OM()})}function ey(){return Xa===0&&(Xa=MA()),Xa}function cN(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Nd(""+e)}function uN(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function cee(e,t,n,s,r){if(t==="submit"&&n&&n.stateNode===r){var o=cN((r[cn]||null).action),i=s.submitter;i&&(t=(t=i[cn]||null)?cN(t.formAction):i.getAttribute("formAction"),t!==null&&(o=t,i=null));var l=new Pm("action","action",null,s,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Xa!==0){var c=i?uN(r,i):new FormData(r);Zp(n,{pending:!0,data:c,method:r.method,action:o},null,c)}}else typeof o=="function"&&(l.preventDefault(),c=i?uN(r,i):new FormData(r),Zp(n,{pending:!0,data:c,method:r.method,action:o},o,c))},currentTarget:r}]})}}for(var vg=0;vg<Lp.length;vg++){var yg=Lp[vg],uee=yg.toLowerCase(),dee=yg[0].toUpperCase()+yg.slice(1);ms(uee,"on"+dee)}ms(tT,"onAnimationEnd");ms(nT,"onAnimationIteration");ms(sT,"onAnimationStart");ms("dblclick","onDoubleClick");ms("focusin","onFocus");ms("focusout","onBlur");ms(_J,"onTransitionRun");ms(AJ,"onTransitionStart");ms(TJ,"onTransitionCancel");ms(rT,"onTransitionEnd");Ii("onMouseEnter",["mouseout","mouseover"]);Ii("onMouseLeave",["mouseout","mouseover"]);Ii("onPointerEnter",["pointerout","pointerover"]);Ii("onPointerLeave",["pointerout","pointerover"]);ko("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ko("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ko("onBeforeInput",["compositionend","keypress","textInput","paste"]);ko("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ko("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ko("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fee=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zc));function HM(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&r.isPropagationStopped())break e;o=l,r.currentTarget=u;try{o(r)}catch(d){Tf(d)}r.currentTarget=null,o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&r.isPropagationStopped())break e;o=l,r.currentTarget=u;try{o(r)}catch(d){Tf(d)}r.currentTarget=null,o=c}}}}function Ce(e,t){var n=t[_p];n===void 0&&(n=t[_p]=new Set);var s=e+"__bubble";n.has(s)||(UM(t,e,2,!1),n.add(s))}function bg(e,t,n){var s=0;t&&(s|=4),UM(n,e,s,t)}var ld="_reactListening"+Math.random().toString(36).slice(2);function ty(e){if(!e[ld]){e[ld]=!0,$A.forEach(function(n){n!=="selectionchange"&&(fee.has(n)||bg(n,!1,e),bg(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ld]||(t[ld]=!0,bg("selectionchange",!1,t))}}function UM(e,t,n,s){switch(eR(t)){case 2:var r=Bee;break;case 8:r=Iee;break;default:r=ay}n=r.bind(null,t,n,e),r=void 0,!Rp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function wg(e,t,n,s,r){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===r)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&i.stateNode.containerInfo===r)return;i=i.return}for(;l!==null;){if(i=Xo(l),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){s=o=i;continue e}l=l.parentNode}}s=s.return}VA(function(){var u=o,d=wv(n),f=[];e:{var m=aT.get(e);if(m!==void 0){var h=Pm,p=e;switch(e){case"keypress":if(kd(n)===0)break e;case"keydown":case"keyup":h=oJ;break;case"focusin":p="focus",h=Kh;break;case"focusout":p="blur",h=Kh;break;case"beforeblur":case"afterblur":h=Kh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=xj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=YQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=cJ;break;case tT:case nT:case sT:h=KQ;break;case rT:h=dJ;break;case"scroll":case"scrollend":h=GQ;break;case"wheel":h=mJ;break;case"copy":case"cut":case"paste":h=JQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=yj;break;case"toggle":case"beforetoggle":h=gJ}var v=(t&4)!==0,b=!v&&(e==="scroll"||e==="scrollend"),x=v?m!==null?m+"Capture":null:m;v=[];for(var y=u,w;y!==null;){var j=y;if(w=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||w===null||x===null||(j=_c(y,x),j!=null&&v.push(Lc(y,j,w))),b)break;y=y.return}0<v.length&&(m=new h(m,p,null,n,d),f.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==Mp&&(p=n.relatedTarget||n.fromElement)&&(Xo(p)||p[hl]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Xo(p):null,p!==null&&(b=iu(p),v=p.tag,p!==b||v!==5&&v!==27&&v!==6)&&(p=null)):(h=null,p=u),h!==p)){if(v=xj,j="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=yj,j="onPointerLeave",x="onPointerEnter",y="pointer"),b=h==null?m:Vl(h),w=p==null?m:Vl(p),m=new v(j,y+"leave",h,n,d),m.target=b,m.relatedTarget=w,j=null,Xo(d)===u&&(v=new v(x,y+"enter",p,n,d),v.target=w,v.relatedTarget=b,j=v),b=j,h&&p)t:{for(v=h,x=p,y=0,w=v;w;w=Io(w))y++;for(w=0,j=x;j;j=Io(j))w++;for(;0<y-w;)v=Io(v),y--;for(;0<w-y;)x=Io(x),w--;for(;y--;){if(v===x||x!==null&&v===x.alternate)break t;v=Io(v),x=Io(x)}v=null}else v=null;h!==null&&dN(f,m,h,v,!1),p!==null&&b!==null&&dN(f,b,p,v,!0)}}e:{if(m=u?Vl(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var N=Nj;else if(jj(m))if(WA)N=kJ;else{N=NJ;var S=jJ}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&bv(u.elementType)&&(N=Nj):N=SJ;if(N&&(N=N(e,u))){XA(f,N,n,d);break e}S&&S(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&Tp(m,"number",m.value)}switch(S=u?Vl(u):window,e){case"focusin":(jj(S)||S.contentEditable==="true")&&(Qo=S,Dp=u,Kl=null);break;case"focusout":Kl=Dp=Qo=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,_j(f,n,d);break;case"selectionchange":if(EJ)break;case"keydown":case"keyup":_j(f,n,d)}var k;if(Sv)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ko?ZA(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(GA&&n.locale!=="ko"&&(Ko||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ko&&(k=qA()):(Jr=d,jv="value"in Jr?Jr.value:Jr.textContent,Ko=!0)),S=Of(u,E),0<S.length&&(E=new vj(E,e,null,n,d),f.push({event:E,listeners:S}),k?E.data=k:(k=YA(n),k!==null&&(E.data=k)))),(k=xJ?vJ(e,n):yJ(e,n))&&(E=Of(u,"onBeforeInput"),0<E.length&&(S=new vj("onBeforeInput","beforeinput",null,n,d),f.push({event:S,listeners:E}),S.data=k)),cee(f,e,u,n,d)}HM(f,t)})}function Lc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Of(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,o=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||o===null||(r=_c(e,n),r!=null&&s.unshift(Lc(e,r,o)),r=_c(e,t),r!=null&&s.push(Lc(e,r,o))),e.tag===3)return s;e=e.return}return[]}function Io(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function dN(e,t,n,s,r){for(var o=t._reactName,i=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||u===null||(c=u,r?(u=_c(n,o),u!=null&&i.unshift(Lc(n,u,c))):r||(u=_c(n,o),u!=null&&i.push(Lc(n,u,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var mee=/\r\n?/g,hee=/\u0000|\uFFFD/g;function fN(e){return(typeof e=="string"?e:""+e).replace(mee,`
`).replace(hee,"")}function FM(e,t){return t=fN(t),fN(e)===t}function Xm(){}function Ue(e,t,n,s,r,o){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Hi(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Hi(e,""+s);break;case"className":td(e,"class",s);break;case"tabIndex":td(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":td(e,n,s);break;case"style":FA(e,s,o);break;case"data":if(t!=="object"){td(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Nd(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&Ue(e,t,"name",r.name,r,null),Ue(e,t,"formEncType",r.formEncType,r,null),Ue(e,t,"formMethod",r.formMethod,r,null),Ue(e,t,"formTarget",r.formTarget,r,null)):(Ue(e,t,"encType",r.encType,r,null),Ue(e,t,"method",r.method,r,null),Ue(e,t,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Nd(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=Xm);break;case"onScroll":s!=null&&Ce("scroll",e);break;case"onScrollEnd":s!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Y(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(Y(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=Nd(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),jd(e,"popover",s);break;case"xlinkActuate":Js(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Js(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Js(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Js(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Js(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Js(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Js(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Js(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Js(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":jd(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=VQ.get(n)||n,jd(e,n,s))}}function ax(e,t,n,s,r,o){switch(n){case"style":FA(e,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Y(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(Y(60));e.innerHTML=n}}break;case"children":typeof s=="string"?Hi(e,s):(typeof s=="number"||typeof s=="bigint")&&Hi(e,""+s);break;case"onScroll":s!=null&&Ce("scroll",e);break;case"onScrollEnd":s!=null&&Ce("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Xm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!PA.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),o=e[cn]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,r),typeof s=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,r);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):jd(e,n,s)}}}function It(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var s=!1,r=!1,o;for(o in n)if(n.hasOwnProperty(o)){var i=n[o];if(i!=null)switch(o){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,t));default:Ue(e,t,o,i,n,null)}}r&&Ue(e,t,"srcSet",n.srcSet,n,null),s&&Ue(e,t,"src",n.src,n,null);return;case"input":Ce("invalid",e);var l=o=i=r=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(d!=null)switch(s){case"name":r=d;break;case"type":i=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":o=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(Y(137,t));break;default:Ue(e,t,s,d,n,null)}}IA(e,o,l,c,u,i,r,!1),yf(e);return;case"select":Ce("invalid",e),s=i=o=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":o=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:Ue(e,t,r,l,n,null)}t=o,n=i,e.multiple=!!s,t!=null?gi(e,!!s,t,!1):n!=null&&gi(e,!!s,n,!0);return;case"textarea":Ce("invalid",e),o=r=s=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":r=l;break;case"children":o=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Y(91));break;default:Ue(e,t,i,l,n,null)}UA(e,s,r,o),yf(e);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ue(e,t,c,s,n,null)}return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(s=0;s<zc.length;s++)Ce(zc[s],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,t));default:Ue(e,t,u,s,n,null)}return;default:if(bv(t)){for(d in n)n.hasOwnProperty(d)&&(s=n[d],s!==void 0&&ax(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Ue(e,t,l,s,n,null))}function gee(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,o=null,i=null,l=null,c=null,u=null,d=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&f!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":c=f;default:s.hasOwnProperty(h)||Ue(e,t,h,null,s,f)}}for(var m in s){var h=s[m];if(f=n[m],s.hasOwnProperty(m)&&(h!=null||f!=null))switch(m){case"type":o=h;break;case"name":r=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":i=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(Y(137,t));break;default:h!==f&&Ue(e,t,m,h,s,f)}}Ap(e,i,l,c,u,d,o,r);return;case"select":h=i=l=m=null;for(o in n)if(c=n[o],n.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":h=c;default:s.hasOwnProperty(o)||Ue(e,t,o,null,s,c)}for(r in s)if(o=s[r],c=n[r],s.hasOwnProperty(r)&&(o!=null||c!=null))switch(r){case"value":m=o;break;case"defaultValue":l=o;break;case"multiple":i=o;default:o!==c&&Ue(e,t,r,o,s,c)}t=l,n=i,s=h,m!=null?gi(e,!!n,m,!1):!!s!=!!n&&(t!=null?gi(e,!!n,t,!0):gi(e,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ue(e,t,l,null,s,r)}for(i in s)if(r=s[i],o=n[i],s.hasOwnProperty(i)&&(r!=null||o!=null))switch(i){case"value":m=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(Y(91));break;default:r!==o&&Ue(e,t,i,r,s,o)}HA(e,m,h);return;case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&m!=null&&!s.hasOwnProperty(p))switch(p){case"selected":e.selected=!1;break;default:Ue(e,t,p,null,s,m)}for(c in s)if(m=s[c],h=n[c],s.hasOwnProperty(c)&&m!==h&&(m!=null||h!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ue(e,t,c,m,s,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!s.hasOwnProperty(v)&&Ue(e,t,v,null,s,m);for(u in s)if(m=s[u],h=n[u],s.hasOwnProperty(u)&&m!==h&&(m!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(Y(137,t));break;default:Ue(e,t,u,m,s,h)}return;default:if(bv(t)){for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!==void 0&&!s.hasOwnProperty(b)&&ax(e,t,b,void 0,s,m);for(d in s)m=s[d],h=n[d],!s.hasOwnProperty(d)||m===h||m===void 0&&h===void 0||ax(e,t,d,m,s,h);return}}for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!s.hasOwnProperty(x)&&Ue(e,t,x,null,s,m);for(f in s)m=s[f],h=n[f],!s.hasOwnProperty(f)||m===h||m==null&&h==null||Ue(e,t,f,m,s,h)}var ox=null,ix=null;function Bf(e){return e.nodeType===9?e:e.ownerDocument}function mN(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VM(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function lx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jg=null;function pee(){var e=window.event;return e&&e.type==="popstate"?e===jg?!1:(jg=e,!0):(jg=null,!1)}var qM=typeof setTimeout=="function"?setTimeout:void 0,xee=typeof clearTimeout=="function"?clearTimeout:void 0,hN=typeof Promise=="function"?Promise:void 0,vee=typeof queueMicrotask=="function"?queueMicrotask:typeof hN<"u"?function(e){return hN.resolve(null).then(e).catch(yee)}:qM;function yee(e){setTimeout(function(){throw e})}function ka(e){return e==="head"}function gN(e,t){var n=t,s=0,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(0<s&&8>s){n=s;var i=e.ownerDocument;if(n&1&&lc(i.documentElement),n&2&&lc(i.body),n&4)for(n=i.head,lc(n),i=n.firstChild;i;){var l=i.nextSibling,c=i.nodeName;i[du]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=l}}if(r===0){e.removeChild(o),Ic(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:s=n.charCodeAt(0)-48;else s=0;n=o}while(n);Ic(t)}function cx(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":cx(n),yv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function bee(e,t,n,s){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[du])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=as(e.nextSibling),e===null)break}return null}function wee(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=as(e.nextSibling),e===null))return null;return e}function ux(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function jee(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function as(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var dx=null;function pN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function GM(e,t,n){switch(t=Bf(n),e){case"html":if(e=t.documentElement,!e)throw Error(Y(452));return e;case"head":if(e=t.head,!e)throw Error(Y(453));return e;case"body":if(e=t.body,!e)throw Error(Y(454));return e;default:throw Error(Y(451))}}function lc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);yv(e)}var Zn=new Map,xN=new Set;function If(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ar=$e.d;$e.d={f:Nee,r:See,D:kee,C:Cee,L:Eee,m:_ee,X:Tee,S:Aee,M:Mee};function Nee(){var e=Ar.f(),t=Gm();return e||t}function See(e){var t=gl(e);t!==null&&t.tag===5&&t.type==="form"?BT(t):Ar.r(e)}var vl=typeof document>"u"?null:document;function ZM(e,t,n){var s=vl;if(s&&typeof t=="string"&&t){var r=On(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),xN.has(r)||(xN.add(r),e={rel:e,crossOrigin:n,href:t},s.querySelector(r)===null&&(t=s.createElement("link"),It(t,"link",e),Tt(t),s.head.appendChild(t)))}}function kee(e){Ar.D(e),ZM("dns-prefetch",e,null)}function Cee(e,t){Ar.C(e,t),ZM("preconnect",e,t)}function Eee(e,t,n){Ar.L(e,t,n);var s=vl;if(s&&e&&t){var r='link[rel="preload"][as="'+On(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+On(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+On(n.imageSizes)+'"]')):r+='[href="'+On(e)+'"]';var o=r;switch(t){case"style":o=Xi(e);break;case"script":o=yl(e)}Zn.has(o)||(e=We({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Zn.set(o,e),s.querySelector(r)!==null||t==="style"&&s.querySelector(wu(o))||t==="script"&&s.querySelector(ju(o))||(t=s.createElement("link"),It(t,"link",e),Tt(t),s.head.appendChild(t)))}}function _ee(e,t){Ar.m(e,t);var n=vl;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+On(s)+'"][href="'+On(e)+'"]',o=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=yl(e)}if(!Zn.has(o)&&(e=We({rel:"modulepreload",href:e},t),Zn.set(o,e),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ju(o)))return}s=n.createElement("link"),It(s,"link",e),Tt(s),n.head.appendChild(s)}}}function Aee(e,t,n){Ar.S(e,t,n);var s=vl;if(s&&e){var r=hi(s).hoistableStyles,o=Xi(e);t=t||"default";var i=r.get(o);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(wu(o)))l.loading=5;else{e=We({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Zn.get(o))&&ny(e,n);var c=i=s.createElement("link");Tt(c),It(c,"link",e),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Rd(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},r.set(o,i)}}}function Tee(e,t){Ar.X(e,t);var n=vl;if(n&&e){var s=hi(n).hoistableScripts,r=yl(e),o=s.get(r);o||(o=n.querySelector(ju(r)),o||(e=We({src:e,async:!0},t),(t=Zn.get(r))&&sy(e,t),o=n.createElement("script"),Tt(o),It(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(r,o))}}function Mee(e,t){Ar.M(e,t);var n=vl;if(n&&e){var s=hi(n).hoistableScripts,r=yl(e),o=s.get(r);o||(o=n.querySelector(ju(r)),o||(e=We({src:e,async:!0,type:"module"},t),(t=Zn.get(r))&&sy(e,t),o=n.createElement("script"),Tt(o),It(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(r,o))}}function vN(e,t,n,s){var r=(r=oa.current)?If(r):null;if(!r)throw Error(Y(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Xi(n.href),n=hi(r).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Xi(n.href);var o=hi(r).hoistableStyles,i=o.get(e);if(i||(r=r.ownerDocument||r,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,i),(o=r.querySelector(wu(e)))&&!o._p&&(i.instance=o,i.state.loading=5),Zn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Zn.set(e,n),o||Ree(r,e,n,i.state))),t&&s===null)throw Error(Y(528,""));return i}if(t&&s!==null)throw Error(Y(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=yl(n),n=hi(r).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(Y(444,e))}}function Xi(e){return'href="'+On(e)+'"'}function wu(e){return'link[rel="stylesheet"]['+e+"]"}function YM(e){return We({},e,{"data-precedence":e.precedence,precedence:null})}function Ree(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),It(t,"link",n),Tt(t),e.head.appendChild(t))}function yl(e){return'[src="'+On(e)+'"]'}function ju(e){return"script[async]"+e}function yN(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+On(n.href)+'"]');if(s)return t.instance=s,Tt(s),s;var r=We({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Tt(s),It(s,"style",r),Rd(s,n.precedence,e),t.instance=s;case"stylesheet":r=Xi(n.href);var o=e.querySelector(wu(r));if(o)return t.state.loading|=4,t.instance=o,Tt(o),o;s=YM(n),(r=Zn.get(r))&&ny(s,r),o=(e.ownerDocument||e).createElement("link"),Tt(o);var i=o;return i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),It(o,"link",s),t.state.loading|=4,Rd(o,n.precedence,e),t.instance=o;case"script":return o=yl(n.src),(r=e.querySelector(ju(o)))?(t.instance=r,Tt(r),r):(s=n,(r=Zn.get(o))&&(s=We({},n),sy(s,r)),e=e.ownerDocument||e,r=e.createElement("script"),Tt(r),It(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(Y(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,Rd(s,n.precedence,e));return t.instance}function Rd(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,o=r,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)o=l;else if(o!==r)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function ny(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sy(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Dd=null;function bN(e,t,n){if(Dd===null){var s=new Map,r=Dd=new Map;r.set(n,s)}else r=Dd,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var o=n[r];if(!(o[du]||o[Ft]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var i=o.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(o):s.set(i,[o])}}return s}function wN(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Dee(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function XM(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var $c=null;function zee(){}function Lee(e,t,n){if($c===null)throw Error(Y(475));var s=$c;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Xi(n.href),o=e.querySelector(wu(r));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Hf.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=o,Tt(o);return}o=e.ownerDocument||e,n=YM(n),(r=Zn.get(r))&&ny(n,r),o=o.createElement("link"),Tt(o);var i=o;i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),It(o,"link",n),t.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=Hf.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function $ee(){if($c===null)throw Error(Y(475));var e=$c;return e.stylesheets&&e.count===0&&fx(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&fx(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Hf(){if(this.count--,this.count===0){if(this.stylesheets)fx(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Uf=null;function fx(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Uf=new Map,t.forEach(Pee,e),Uf=null,Hf.call(e))}function Pee(e,t){if(!(t.state.loading&4)){var n=Uf.get(e);if(n)var s=n.get(null);else{n=new Map,Uf.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var i=r[o];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(n.set(i.dataset.precedence,i),s=i)}s&&n.set(null,s)}r=t.instance,i=r.getAttribute("data-precedence"),o=n.get(i)||s,o===s&&n.set(null,r),n.set(i,r),this.count++,s=Hf.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),o?o.parentNode.insertBefore(r,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Pc={$$typeof:or,Provider:null,Consumer:null,_currentValue:Fa,_currentValue2:Fa,_threadCount:0};function Oee(e,t,n,s,r,o,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.hiddenUpdates=Vh(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function WM(e,t,n,s,r,o,i,l,c,u,d,f){return e=new Oee(e,t,n,i,l,c,u,f),t=1,o===!0&&(t|=24),o=bn(3,null,null,t),e.current=o,o.stateNode=e,t=Mv(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:s,isDehydrated:n,cache:t},Dv(o),e}function KM(e){return e?(e=ti,e):ti}function QM(e,t,n,s,r,o){r=KM(r),s.context===null?s.context=r:s.pendingContext=r,s=ia(t),s.payload={element:n},o=o===void 0?null:o,o!==null&&(s.callback=o),n=la(e,s,t),n!==null&&(Cn(n,e,t),ec(n,e,t))}function jN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ry(e,t){jN(e,t),(e=e.alternate)&&jN(e,t)}function JM(e){if(e.tag===13){var t=pl(e,67108864);t!==null&&Cn(t,e,67108864),ry(e,67108864)}}var Ff=!0;function Bee(e,t,n,s){var r=ge.T;ge.T=null;var o=$e.p;try{$e.p=2,ay(e,t,n,s)}finally{$e.p=o,ge.T=r}}function Iee(e,t,n,s){var r=ge.T;ge.T=null;var o=$e.p;try{$e.p=8,ay(e,t,n,s)}finally{$e.p=o,ge.T=r}}function ay(e,t,n,s){if(Ff){var r=mx(s);if(r===null)wg(e,t,s,Vf,n),NN(e,s);else if(Uee(r,e,t,n,s))s.stopPropagation();else if(NN(e,s),t&4&&-1<Hee.indexOf(e)){for(;r!==null;){var o=gl(r);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var i=Ra(o.pendingLanes);if(i!==0){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var c=1<<31-Sn(i);l.entanglements[1]|=c,i&=~c}Fs(o),!(He&6)&&(zf=Rs()+500,bu(0))}}break;case 13:l=pl(o,2),l!==null&&Cn(l,o,2),Gm(),ry(o,2)}if(o=mx(s),o===null&&wg(e,t,s,Vf,n),o===r)break;r=o}r!==null&&s.stopPropagation()}else wg(e,t,s,null,n)}}function mx(e){return e=wv(e),oy(e)}var Vf=null;function oy(e){if(Vf=null,e=Xo(e),e!==null){var t=iu(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=SA(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Vf=e,null}function eR(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(CQ()){case _A:return 2;case AA:return 8;case vf:case EQ:return 32;case TA:return 268435456;default:return 32}default:return 32}}var hx=!1,da=null,fa=null,ma=null,Oc=new Map,Bc=new Map,Xr=[],Hee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NN(e,t){switch(e){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":Oc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(t.pointerId)}}function Pl(e,t,n,s,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[r]},t!==null&&(t=gl(t),t!==null&&JM(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Uee(e,t,n,s,r){switch(t){case"focusin":return da=Pl(da,e,t,n,s,r),!0;case"dragenter":return fa=Pl(fa,e,t,n,s,r),!0;case"mouseover":return ma=Pl(ma,e,t,n,s,r),!0;case"pointerover":var o=r.pointerId;return Oc.set(o,Pl(Oc.get(o)||null,e,t,n,s,r)),!0;case"gotpointercapture":return o=r.pointerId,Bc.set(o,Pl(Bc.get(o)||null,e,t,n,s,r)),!0}return!1}function tR(e){var t=Xo(e.target);if(t!==null){var n=iu(t);if(n!==null){if(t=n.tag,t===13){if(t=SA(n),t!==null){e.blockedOn=t,LQ(e.priority,function(){if(n.tag===13){var s=kn();s=xv(s);var r=pl(n,s);r!==null&&Cn(r,n,s),ry(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mx(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Mp=s,n.target.dispatchEvent(s),Mp=null}else return t=gl(n),t!==null&&JM(t),e.blockedOn=n,!1;t.shift()}return!0}function SN(e,t,n){zd(e)&&n.delete(t)}function Fee(){hx=!1,da!==null&&zd(da)&&(da=null),fa!==null&&zd(fa)&&(fa=null),ma!==null&&zd(ma)&&(ma=null),Oc.forEach(SN),Bc.forEach(SN)}function cd(e,t){e.blockedOn===t&&(e.blockedOn=null,hx||(hx=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,Fee)))}var ud=null;function kN(e){ud!==e&&(ud=e,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,function(){ud===e&&(ud=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],r=e[t+2];if(typeof s!="function"){if(oy(s||n)===null)continue;break}var o=gl(n);o!==null&&(e.splice(t,3),t-=3,Zp(o,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Ic(e){function t(c){return cd(c,e)}da!==null&&cd(da,e),fa!==null&&cd(fa,e),ma!==null&&cd(ma,e),Oc.forEach(t),Bc.forEach(t);for(var n=0;n<Xr.length;n++){var s=Xr[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Xr.length&&(n=Xr[0],n.blockedOn===null);)tR(n),n.blockedOn===null&&Xr.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],o=n[s+1],i=r[cn]||null;if(typeof o=="function")i||kN(n);else if(i){var l=null;if(o&&o.hasAttribute("formAction")){if(r=o,i=o[cn]||null)l=i.formAction;else if(oy(r)!==null)continue}else l=i.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),kN(n)}}}function iy(e){this._internalRoot=e}Wm.prototype.render=iy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));var n=t.current,s=kn();QM(n,s,e,t,null,null)};Wm.prototype.unmount=iy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;QM(e.current,2,null,e,null,null),Gm(),t[hl]=null}};function Wm(e){this._internalRoot=e}Wm.prototype.unstable_scheduleHydration=function(e){if(e){var t=LA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xr.length&&t!==0&&t<Xr[n].priority;n++);Xr.splice(n,0,e),n===0&&tR(e)}};var CN=jA.version;if(CN!=="19.1.0")throw Error(Y(527,CN,"19.1.0"));$e.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=yQ(t),e=e!==null?kA(e):null,e=e===null?null:e.stateNode,e};var Vee={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{lu=dd.inject(Vee),Nn=dd}catch{}}Lm.createRoot=function(e,t){if(!NA(e))throw Error(Y(299));var n=!1,s="",r=WT,o=KT,i=QT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=WM(e,1,!1,null,null,n,s,r,o,i,l,null),e[hl]=t.current,ty(e),new iy(t)};Lm.hydrateRoot=function(e,t,n){if(!NA(e))throw Error(Y(299));var s=!1,r="",o=WT,i=KT,l=QT,c=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(i=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),t=WM(e,1,!0,t,n??null,s,r,o,i,l,c,u),t.context=KM(null),n=t.current,s=kn(),s=xv(s),r=ia(s),r.callback=null,la(n,r,s),n=s,t.current.lanes=n,uu(t,n),Fs(t),e[hl]=t.current,ty(e),new Wm(t)};Lm.version="19.1.0";function nR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nR)}catch(e){console.error(e)}}nR(),yA.exports=Lm;var qee=yA.exports;qee.createRoot(document.getElementById("root")).render(a.jsx(g.StrictMode,{children:a.jsx(pQ,{showLoadingIndicator:!0,children:a.jsx(iQ,{children:a.jsx(gQ,{})})})}));
