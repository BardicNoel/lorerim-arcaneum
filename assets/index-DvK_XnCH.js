var bR=Object.defineProperty;var wR=(e,t,n)=>t in e?bR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Pe=(e,t,n)=>wR(e,typeof t!="symbol"?t+"":t,n);function jR(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Yx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c1={exports:{}},pm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NR=Symbol.for("react.transitional.element"),SR=Symbol.for("react.fragment");function u1(e,t,n){var s=null;if(n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:NR,type:e,key:s,ref:t!==void 0?t:null,props:n}}pm.Fragment=SR;pm.jsx=u1;pm.jsxs=u1;c1.exports=pm;var a=c1.exports;const Nt={CONTENT:1,DROPDOWN:100,AUTOCOMPLETE:120,TOOLTIP:1e3,MODAL:200,DRAWER:202,HEADER:50,SIDEBAR:60,STICKY:40};var d1={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx=Symbol.for("react.transitional.element"),kR=Symbol.for("react.portal"),CR=Symbol.for("react.fragment"),ER=Symbol.for("react.strict_mode"),AR=Symbol.for("react.profiler"),TR=Symbol.for("react.consumer"),_R=Symbol.for("react.context"),MR=Symbol.for("react.forward_ref"),RR=Symbol.for("react.suspense"),DR=Symbol.for("react.memo"),f1=Symbol.for("react.lazy"),$y=Symbol.iterator;function LR(e){return e===null||typeof e!="object"?null:(e=$y&&e[$y]||e["@@iterator"],typeof e=="function"?e:null)}var m1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h1=Object.assign,g1={};function kl(e,t,n){this.props=e,this.context=t,this.refs=g1,this.updater=n||m1}kl.prototype.isReactComponent={};kl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function p1(){}p1.prototype=kl.prototype;function Wx(e,t,n){this.props=e,this.context=t,this.refs=g1,this.updater=n||m1}var Kx=Wx.prototype=new p1;Kx.constructor=Wx;h1(Kx,kl.prototype);Kx.isPureReactComponent=!0;var Oy=Array.isArray,it={H:null,A:null,T:null,S:null,V:null},x1=Object.prototype.hasOwnProperty;function Qx(e,t,n,s,r,i){return n=i.ref,{$$typeof:Xx,type:e,key:t,ref:n!==void 0?n:null,props:i}}function zR(e,t){return Qx(e.type,t,void 0,void 0,void 0,e.props)}function Jx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xx}function PR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Iy=/\/+/g;function _h(e,t){return typeof e=="object"&&e!==null&&e.key!=null?PR(""+e.key):t.toString(36)}function By(){}function $R(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(By,By):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function xo(e,t,n,s,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Xx:case kR:o=!0;break;case f1:return o=e._init,xo(o(e._payload),t,n,s,r)}}if(o)return r=r(e),o=s===""?"."+_h(e,0):s,Oy(r)?(n="",o!=null&&(n=o.replace(Iy,"$&/")+"/"),xo(r,t,n,"",function(u){return u})):r!=null&&(Jx(r)&&(r=zR(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Iy,"$&/")+"/")+o)),t.push(r)),1;o=0;var l=s===""?".":s+":";if(Oy(e))for(var c=0;c<e.length;c++)s=e[c],i=l+_h(s,c),o+=xo(s,t,n,i,r);else if(c=LR(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,i=l+_h(s,c++),o+=xo(s,t,n,i,r);else if(i==="object"){if(typeof e.then=="function")return xo($R(e),t,n,s,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function Ku(e,t,n){if(e==null)return e;var s=[],r=0;return xo(e,s,"","",function(i){return t.call(n,i,r++)}),s}function OR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fy=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function IR(){}Ne.Children={map:Ku,forEach:function(e,t,n){Ku(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ku(e,function(){t++}),t},toArray:function(e){return Ku(e,function(t){return t})||[]},only:function(e){if(!Jx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=kl;Ne.Fragment=CR;Ne.Profiler=AR;Ne.PureComponent=Wx;Ne.StrictMode=ER;Ne.Suspense=RR;Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=it;Ne.__COMPILER_RUNTIME={__proto__:null,c:function(e){return it.H.useMemoCache(e)}};Ne.cache=function(e){return function(){return e.apply(null,arguments)}};Ne.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=h1({},e.props),r=e.key,i=void 0;if(t!=null)for(o in t.ref!==void 0&&(i=void 0),t.key!==void 0&&(r=""+t.key),t)!x1.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(s[o]=t[o]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}return Qx(e.type,r,void 0,void 0,i,s)};Ne.createContext=function(e){return e={$$typeof:_R,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:TR,_context:e},e};Ne.createElement=function(e,t,n){var s,r={},i=null;if(t!=null)for(s in t.key!==void 0&&(i=""+t.key),t)x1.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(r[s]=t[s]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)r[s]===void 0&&(r[s]=o[s]);return Qx(e,i,void 0,void 0,null,r)};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:MR,render:e}};Ne.isValidElement=Jx;Ne.lazy=function(e){return{$$typeof:f1,_payload:{_status:-1,_result:e},_init:OR}};Ne.memo=function(e,t){return{$$typeof:DR,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=it.T,n={};it.T=n;try{var s=e(),r=it.S;r!==null&&r(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(IR,Fy)}catch(i){Fy(i)}finally{it.T=t}};Ne.unstable_useCacheRefresh=function(){return it.H.useCacheRefresh()};Ne.use=function(e){return it.H.use(e)};Ne.useActionState=function(e,t,n){return it.H.useActionState(e,t,n)};Ne.useCallback=function(e,t){return it.H.useCallback(e,t)};Ne.useContext=function(e){return it.H.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e,t){return it.H.useDeferredValue(e,t)};Ne.useEffect=function(e,t,n){var s=it.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)};Ne.useId=function(){return it.H.useId()};Ne.useImperativeHandle=function(e,t,n){return it.H.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return it.H.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return it.H.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return it.H.useMemo(e,t)};Ne.useOptimistic=function(e,t){return it.H.useOptimistic(e,t)};Ne.useReducer=function(e,t,n){return it.H.useReducer(e,t,n)};Ne.useRef=function(e){return it.H.useRef(e)};Ne.useState=function(e){return it.H.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return it.H.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return it.H.useTransition()};Ne.version="19.1.0";d1.exports=Ne;var g=d1.exports;const P=Yx(g),v1=jR({__proto__:null,default:P},[g]);class BR extends g.Component{constructor(n){super(n);Pe(this,"copyErrorToClipboard",async()=>{var s;if(!this.state.error)return;const n=`Error: ${this.state.error.message}
Stack: ${this.state.error.stack}
Component Stack: ${((s=this.state.errorInfo)==null?void 0:s.componentStack)||"N/A"}
URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Timestamp: ${new Date().toISOString()}`;try{await navigator.clipboard.writeText(n),alert("Error details copied to clipboard! Please share this with the developer.")}catch{const i=document.createElement("textarea");i.value=n,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),alert("Error details copied to clipboard! Please share this with the developer.")}});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,s){console.error("ErrorBoundary caught an error:",n,s),this.setState({error:n,errorInfo:s})}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg p-6 border border-red-200",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-8 w-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Something went wrong"}),a.jsx("p",{className:"text-sm text-red-600",children:"An unexpected error occurred. Please help us fix this by sharing the error details."})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Error Details"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:a.jsx("p",{className:"font-mono break-all",children:(n=this.state.error)==null?void 0:n.message})})]})]})})}),a.jsxs("div",{className:"mt-6 flex gap-3",children:[a.jsxs("button",{onClick:this.copyErrorToClipboard,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[a.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Error Details"]}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[a.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reload Page"]})]}),a.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[a.jsx("p",{children:"If this error persists, please share the copied error details with me:"}),a.jsxs("p",{className:"mt-1",children:["ðŸ“§ ",a.jsx("strong",{children:"Email:"})," bardic.noel@gmail.com"]}),a.jsxs("p",{className:"mt-1",children:["ðŸ’¬ ",a.jsx("strong",{children:"Discord:"})," gingerbeardbard"]})]})]})}):this.props.children}}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HR=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),Hy=e=>{const t=HR(e);return t.charAt(0).toUpperCase()+t.slice(1)},y1=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),UR=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...VR,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:y1("lucide",r),...!i&&!UR(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>g.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(e,t)=>{const n=g.forwardRef(({className:s,...r},i)=>g.createElement(GR,{ref:i,iconNode:t,className:y1(`lucide-${FR(Hy(e))}`,`lucide-${e}`,s),...r}));return n.displayName=Hy(e),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ZR=ee("arrow-down",qR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Uy=ee("arrow-left",YR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],WR=ee("arrow-right",XR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],QR=ee("arrow-up-down",KR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],e3=ee("arrow-up",JR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ba=ee("book-open",t3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Ko=ee("brain",n3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],r3=ee("chart-column",s3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Dc=ee("check",a3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],o3=ee("chef-hat",i3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Je=ee("chevron-down",l3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xm=ee("chevron-left",c3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Cl=ee("chevron-right",u3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Lc=ee("chevron-up",d3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qo=ee("circle-alert",f3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zc=ee("circle-check-big",m3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],g3=ee("circle-x",h3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],e0=ee("circle",p3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Er=ee("clock",x3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],y3=ee("copy",v3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]],w3=ee("dna",b3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Mh=ee("download",j3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],t0=ee("droplets",N3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],k3=ee("ellipsis-vertical",S3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Fa=ee("external-link",C3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],El=ee("eye",E3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],b1=ee("file-text",A3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Al=ee("flame",T3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],M3=ee("funnel",_3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],n0=ee("ghost",R3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Fi=ee("grid-3x3",D3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Jo=ee("hand",L3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Qs=ee("heart",z3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],w1=ee("house",P3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],el=ee("info",$3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],I3=ee("layout-grid",O3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Ha=ee("list",B3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Vy=ee("loader-circle",F3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],j1=ee("map",H3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],V3=ee("menu",U3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],q3=ee("message-square",G3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M5 12h14",key:"1ays0h"}]],zo=ee("minus",Z3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],X3=ee("monitor",Y3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],K3=ee("moon",W3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],N1=ee("package",Q3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],eD=ee("pen-line",J3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Na=ee("plus",tD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Dr=ee("rotate-ccw",nD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],rD=ee("search-x",sD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Bn=ee("search",aD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],df=ee("settings",iD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],lD=ee("share-2",oD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],at=ee("shield",cD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],js=ee("sparkles",uD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],qe=ee("star",dD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Gy=ee("sun",fD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],Ci=ee("sword",mD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],S1=ee("tag",hD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ss=ee("target",gD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xD=ee("trash-2",pD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],yD=ee("trees",vD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],np=ee("trending-down",bD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Pc=ee("trending-up",wD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ei=ee("triangle-alert",jD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],SD=ee("user-check",ND);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ff=ee("user",kD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],k1=ee("users",CD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],AD=ee("utensils",ED);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],_D=ee("wine",TD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Me=ee("x",MD);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],sn=ee("zap",RD);var s0={};Object.defineProperty(s0,"__esModule",{value:!0});s0.parse=ID;s0.serialize=BD;const DD=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,LD=/^[\u0021-\u003A\u003C-\u007E]*$/,zD=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,PD=/^[\u0020-\u003A\u003D-\u007E]*$/,$D=Object.prototype.toString,OD=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function ID(e,t){const n=new OD,s=e.length;if(s<2)return n;const r=(t==null?void 0:t.decode)||FD;let i=0;do{const o=e.indexOf("=",i);if(o===-1)break;const l=e.indexOf(";",i),c=l===-1?s:l;if(o>c){i=e.lastIndexOf(";",o-1)+1;continue}const u=qy(e,i,o),d=Zy(e,o,u),f=e.slice(u,d);if(n[f]===void 0){let m=qy(e,o+1,c),h=Zy(e,c,m);const v=r(e.slice(m,h));n[f]=v}i=c+1}while(i<s);return n}function qy(e,t,n){do{const s=e.charCodeAt(t);if(s!==32&&s!==9)return t}while(++t<n);return n}function Zy(e,t,n){for(;t>n;){const s=e.charCodeAt(--t);if(s!==32&&s!==9)return t+1}return n}function BD(e,t,n){const s=(n==null?void 0:n.encode)||encodeURIComponent;if(!DD.test(e))throw new TypeError(`argument name is invalid: ${e}`);const r=s(t);if(!LD.test(r))throw new TypeError(`argument val is invalid: ${t}`);let i=e+"="+r;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!zD.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!PD.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!HD(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function FD(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function HD(e){return $D.call(e)==="[object Date]"}var Yy="popstate";function UD(e={}){function t(r,i){let{pathname:o="/",search:l="",hash:c=""}=Hi(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),sp("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){let o=r.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=r.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:$c(i))}function s(r,i){as(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return GD(t,n,s,e)}function ft(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function as(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function VD(){return Math.random().toString(36).substring(2,10)}function Xy(e,t){return{usr:e.state,key:e.key,idx:t}}function sp(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Hi(t):t,state:n,key:t&&t.key||s||VD()}}function $c({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Hi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function GD(e,t,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let w=d(),x=w==null?null:w-u;u=w,c&&c({action:l,location:y.location,delta:x})}function m(w,x){l="PUSH";let p=sp(y.location,w,x);n&&n(p,w),u=d()+1;let b=Xy(p,u),j=y.createHref(p);try{o.pushState(b,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(j)}i&&c&&c({action:l,location:y.location,delta:1})}function h(w,x){l="REPLACE";let p=sp(y.location,w,x);n&&n(p,w),u=d();let b=Xy(p,u),j=y.createHref(p);o.replaceState(b,"",j),i&&c&&c({action:l,location:y.location,delta:0})}function v(w){return qD(w)}let y={get action(){return l},get location(){return e(r,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Yy,f),c=w,()=>{r.removeEventListener(Yy,f),c=null}},createHref(w){return t(r,w)},createURL:v,encodeLocation(w){let x=v(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:h,go(w){return o.go(w)}};return y}function qD(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ft(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:$c(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function C1(e,t,n="/"){return ZD(e,t,n,!1)}function ZD(e,t,n,s){let r=typeof t=="string"?Hi(t):t,i=Lr(r.pathname||"/",n);if(i==null)return null;let o=E1(e);YD(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=a5(i);l=s5(o[c],u,s)}return l}function E1(e,t=[],n=[],s=""){let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ft(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let u=Ar([s,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(ft(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),E1(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:t5(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of A1(i.path))r(i,o,c)}),t}function A1(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=A1(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function YD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:n5(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var XD=/^:[\w-]+$/,WD=3,KD=2,QD=1,JD=10,e5=-2,Wy=e=>e==="*";function t5(e,t){let n=e.split("/"),s=n.length;return n.some(Wy)&&(s+=e5),t&&(s+=KD),n.filter(r=>!Wy(r)).reduce((r,i)=>r+(XD.test(i)?WD:i===""?QD:JD),s)}function n5(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function s5(e,t,n=!1){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=mf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!s[s.length-1].route.index&&(f=mf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Ar([i,f.pathname]),pathnameBase:c5(Ar([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ar([i,f.pathnameBase]))}return o}function mf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=r5(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let v=l[m]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const h=l[m];return f&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function r5(e,t=!1,n=!0){as(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function a5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return as(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Lr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function i5(e,t="/"){let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?Hi(e):e;return{pathname:n?n.startsWith("/")?n:o5(n,t):t,search:u5(s),hash:d5(r)}}function o5(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Rh(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function l5(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function T1(e){let t=l5(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function _1(e,t,n,s=!1){let r;typeof e=="string"?r=Hi(e):(r={...e},ft(!r.pathname||!r.pathname.includes("?"),Rh("?","pathname","search",r)),ft(!r.pathname||!r.pathname.includes("#"),Rh("#","pathname","hash",r)),ft(!r.search||!r.search.includes("#"),Rh("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=n;else{let f=t.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=i5(r,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Ar=e=>e.join("/").replace(/\/\/+/g,"/"),c5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),u5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,d5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function f5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var M1=["POST","PUT","PATCH","DELETE"];new Set(M1);var m5=["GET",...M1];new Set(m5);var Tl=g.createContext(null);Tl.displayName="DataRouter";var vm=g.createContext(null);vm.displayName="DataRouterState";var R1=g.createContext({isTransitioning:!1});R1.displayName="ViewTransition";var h5=g.createContext(new Map);h5.displayName="Fetchers";var g5=g.createContext(null);g5.displayName="Await";var Js=g.createContext(null);Js.displayName="Navigation";var mu=g.createContext(null);mu.displayName="Location";var er=g.createContext({outlet:null,matches:[],isDataRoute:!1});er.displayName="Route";var r0=g.createContext(null);r0.displayName="RouteError";function p5(e,{relative:t}={}){ft(hu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=g.useContext(Js),{hash:r,pathname:i,search:o}=gu(e,{relative:t}),l=i;return n!=="/"&&(l=i==="/"?n:Ar([n,i])),s.createHref({pathname:l,search:o,hash:r})}function hu(){return g.useContext(mu)!=null}function Gr(){return ft(hu(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(mu).location}var D1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function L1(e){g.useContext(Js).static||g.useLayoutEffect(e)}function lt(){let{isDataRoute:e}=g.useContext(er);return e?M5():x5()}function x5(){ft(hu(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Tl),{basename:t,navigator:n}=g.useContext(Js),{matches:s}=g.useContext(er),{pathname:r}=Gr(),i=JSON.stringify(T1(s)),o=g.useRef(!1);return L1(()=>{o.current=!0}),g.useCallback((c,u={})=>{if(as(o.current,D1),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=_1(c,JSON.parse(i),r,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Ar([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,i,r,e])}var v5=g.createContext(null);function y5(e){let t=g.useContext(er).outlet;return t&&g.createElement(v5.Provider,{value:e},t)}function gu(e,{relative:t}={}){let{matches:n}=g.useContext(er),{pathname:s}=Gr(),r=JSON.stringify(T1(n));return g.useMemo(()=>_1(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function b5(e,t){return z1(e,t)}function z1(e,t,n,s){var x;ft(hu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=g.useContext(Js),{matches:i}=g.useContext(er),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let p=d&&d.path||"";P1(c,!d||p.endsWith("*")||p.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${p}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${p}"> to <Route path="${p==="/"?"*":`${p}/*`}">.`)}let f=Gr(),m;if(t){let p=typeof t=="string"?Hi(t):t;ft(u==="/"||((x=p.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${p.pathname}" was given in the \`location\` prop.`),m=p}else m=f;let h=m.pathname||"/",v=h;if(u!=="/"){let p=u.replace(/^\//,"").split("/");v="/"+h.replace(/^\//,"").split("/").slice(p.length).join("/")}let y=C1(e,{pathname:v});as(d||y!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),as(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=k5(y&&y.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:Ar([u,r.encodeLocation?r.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?u:Ar([u,r.encodeLocation?r.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,n,s);return t&&w?g.createElement(mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},w):w}function w5(){let e=_5(),t=f5(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:r},n):null,o)}var j5=g.createElement(w5,null),N5=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(er.Provider,{value:this.props.routeContext},g.createElement(r0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function S5({routeContext:e,match:t,children:n}){let s=g.useContext(Tl);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(er.Provider,{value:e},n)}function k5(e,t=[],n=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let r=e,i=n==null?void 0:n.errors;if(i!=null){let c=r.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);ft(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<r.length;c++){let u=r[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=n,m=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||m){o=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,u,d)=>{let f,m=!1,h=null,v=null;n&&(f=i&&u.route.id?i[u.route.id]:void 0,h=u.route.errorElement||j5,o&&(l<0&&d===0?(P1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===d&&(m=!0,v=u.route.hydrateFallbackElement||null)));let y=t.concat(r.slice(0,d+1)),w=()=>{let x;return f?x=h:m?x=v:u.route.Component?x=g.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,g.createElement(S5,{match:u,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?g.createElement(N5,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}function a0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C5(e){let t=g.useContext(Tl);return ft(t,a0(e)),t}function E5(e){let t=g.useContext(vm);return ft(t,a0(e)),t}function A5(e){let t=g.useContext(er);return ft(t,a0(e)),t}function i0(e){let t=A5(e),n=t.matches[t.matches.length-1];return ft(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function T5(){return i0("useRouteId")}function _5(){var s;let e=g.useContext(r0),t=E5("useRouteError"),n=i0("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function M5(){let{router:e}=C5("useNavigate"),t=i0("useNavigate"),n=g.useRef(!1);return L1(()=>{n.current=!0}),g.useCallback(async(r,i={})=>{as(n.current,D1),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var Ky={};function P1(e,t,n){!t&&!Ky[e]&&(Ky[e]=!0,as(!1,n))}g.memo(R5);function R5({routes:e,future:t,state:n}){return z1(e,void 0,n,t)}function D5(e){return y5(e.context)}function bt(e){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function L5({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:i=!1}){ft(!hu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:r,static:i,future:{}}),[o,r,i]);typeof n=="string"&&(n=Hi(n));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:m="default"}=n,h=g.useMemo(()=>{let v=Lr(c,o);return v==null?null:{location:{pathname:v,search:u,hash:d,state:f,key:m},navigationType:s}},[o,c,u,d,f,m,s]);return as(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:g.createElement(Js.Provider,{value:l},g.createElement(mu.Provider,{children:t,value:h}))}function z5({children:e,location:t}){return b5(rp(e),t)}function rp(e,t=[]){let n=[];return g.Children.forEach(e,(s,r)=>{if(!g.isValidElement(s))return;let i=[...t,r];if(s.type===g.Fragment){n.push.apply(n,rp(s.props.children,i));return}ft(s.type===bt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=rp(s.props.children,i)),n.push(o)}),n}var Id="get",Bd="application/x-www-form-urlencoded";function ym(e){return e!=null&&typeof e.tagName=="string"}function P5(e){return ym(e)&&e.tagName.toLowerCase()==="button"}function $5(e){return ym(e)&&e.tagName.toLowerCase()==="form"}function O5(e){return ym(e)&&e.tagName.toLowerCase()==="input"}function I5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function B5(e,t){return e.button===0&&(!t||t==="_self")&&!I5(e)}function ap(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function F5(e,t){let n=ap(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}var Qu=null;function H5(){if(Qu===null)try{new FormData(document.createElement("form"),0),Qu=!1}catch{Qu=!0}return Qu}var U5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dh(e){return e!=null&&!U5.has(e)?(as(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bd}"`),null):e}function V5(e,t){let n,s,r,i,o;if($5(e)){let l=e.getAttribute("action");s=l?Lr(l,t):null,n=e.getAttribute("method")||Id,r=Dh(e.getAttribute("enctype"))||Bd,i=new FormData(e)}else if(P5(e)||O5(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?Lr(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||Id,r=Dh(e.getAttribute("formenctype"))||Dh(l.getAttribute("enctype"))||Bd,i=new FormData(l,e),!H5()){let{name:u,type:d,value:f}=e;if(d==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,f)}}else{if(ym(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Id,s=null,r=Bd,o=e}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:o}}function o0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function G5(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function q5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Z5(e,t,n){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let o=await G5(i,n);return o.links?o.links():[]}return[]}));return K5(s.flat(1).filter(q5).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Qy(e,t,n,s,r,i){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{var f;let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Y5(e,t,{includeHydrateFallback:n}={}){return X5(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function X5(e){return[...new Set(e)]}function W5(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function K5(e,t){let n=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(W5(r));return n.has(i)||(n.add(i),s.push({key:i,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Q5=new Set([100,101,204,205]);function J5(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Lr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function $1(){let e=g.useContext(Tl);return o0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function eL(){let e=g.useContext(vm);return o0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var l0=g.createContext(void 0);l0.displayName="FrameworkContext";function O1(){let e=g.useContext(l0);return o0(e,"You must render this element inside a <HydratedRouter> element"),e}function tL(e,t){let n=g.useContext(l0),[s,r]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,m=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let y=x=>{x.forEach(p=>{o(p.isIntersecting)})},w=new IntersectionObserver(y,{threshold:.5});return m.current&&w.observe(m.current),()=>{w.disconnect()}}},[e]),g.useEffect(()=>{if(s){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[s]);let h=()=>{r(!0)},v=()=>{r(!1),o(!1)};return n?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Gl(l,h),onBlur:Gl(c,v),onMouseEnter:Gl(u,h),onMouseLeave:Gl(d,v),onTouchStart:Gl(f,h)}]:[!1,m,{}]}function Gl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function nL({page:e,...t}){let{router:n}=$1(),s=g.useMemo(()=>C1(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?g.createElement(rL,{page:e,matches:s,...t}):null}function sL(e){let{manifest:t,routeModules:n}=O1(),[s,r]=g.useState([]);return g.useEffect(()=>{let i=!1;return Z5(e,t,n).then(o=>{i||r(o)}),()=>{i=!0}},[e,t,n]),s}function rL({page:e,matches:t,...n}){let s=Gr(),{manifest:r,routeModules:i}=O1(),{basename:o}=$1(),{loaderData:l,matches:c}=eL(),u=g.useMemo(()=>Qy(e,t,c,r,s,"data"),[e,t,c,r,s]),d=g.useMemo(()=>Qy(e,t,c,r,s,"assets"),[e,t,c,r,s]),f=g.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let v=new Set,y=!1;if(t.forEach(x=>{var b;let p=r.routes[x.route.id];!p||!p.hasLoader||(!u.some(j=>j.route.id===x.route.id)&&x.route.id in l&&((b=i[x.route.id])!=null&&b.shouldRevalidate)||p.hasClientLoader?y=!0:v.add(x.route.id))}),v.size===0)return[];let w=J5(e,o);return y&&v.size>0&&w.searchParams.set("_routes",t.filter(x=>v.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[o,l,s,r,u,t,e,i]),m=g.useMemo(()=>Y5(d,r),[d,r]),h=sL(d);return g.createElement(g.Fragment,null,f.map(v=>g.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),m.map(v=>g.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),h.map(({key:v,link:y})=>g.createElement("link",{key:v,...y})))}function aL(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var I1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{I1&&(window.__reactRouterVersion="7.6.3")}catch{}function iL({basename:e,children:t,window:n}){let s=g.useRef();s.current==null&&(s.current=UD({window:n,v5Compat:!0}));let r=s.current,[i,o]=g.useState({action:r.action,location:r.location}),l=g.useCallback(c=>{g.startTransition(()=>o(c))},[o]);return g.useLayoutEffect(()=>r.listen(l),[r,l]),g.createElement(L5,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:r})}var B1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,F1=g.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...m},h){let{basename:v}=g.useContext(Js),y=typeof u=="string"&&B1.test(u),w,x=!1;if(typeof u=="string"&&y&&(w=u,I1))try{let S=new URL(window.location.href),E=u.startsWith("//")?new URL(S.protocol+u):new URL(u),T=Lr(E.pathname,v);E.origin===S.origin&&T!=null?u=T+E.search+E.hash:x=!0}catch{as(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let p=p5(u,{relative:r}),[b,j,N]=tL(s,m),A=uL(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:f});function k(S){t&&t(S),S.defaultPrevented||A(S)}let C=g.createElement("a",{...m,...N,href:w||p,onClick:x||i?t:k,ref:aL(h,j),target:c,"data-discover":!y&&n==="render"?"true":void 0});return b&&!y?g.createElement(g.Fragment,null,C,g.createElement(nL,{page:p})):C});F1.displayName="Link";var oL=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let f=gu(o,{relative:u.relative}),m=Gr(),h=g.useContext(vm),{navigator:v,basename:y}=g.useContext(Js),w=h!=null&&gL(f)&&l===!0,x=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,p=m.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(p=p.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&y&&(b=Lr(b,y)||b);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=p===x||!r&&p.startsWith(x)&&p.charAt(j)==="/",A=b!=null&&(b===x||!r&&b.startsWith(x)&&b.charAt(x.length)==="/"),k={isActive:N,isPending:A,isTransitioning:w},C=N?t:void 0,S;typeof s=="function"?S=s(k):S=[s,N?"active":null,A?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let E=typeof i=="function"?i(k):i;return g.createElement(F1,{...u,"aria-current":C,className:S,ref:d,style:E,to:o,viewTransition:l},typeof c=="function"?c(k):c)});oL.displayName="NavLink";var lL=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:i,method:o=Id,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...m},h)=>{let v=mL(),y=hL(l,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&B1.test(l),p=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let j=b.nativeEvent.submitter,N=(j==null?void 0:j.getAttribute("formmethod"))||o;v(j||b.currentTarget,{fetcherKey:t,method:N,navigate:n,replace:r,state:i,relative:u,preventScrollReset:d,viewTransition:f})};return g.createElement("form",{ref:h,method:w,action:y,onSubmit:s?c:p,...m,"data-discover":!x&&e==="render"?"true":void 0})});lL.displayName="Form";function cL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H1(e){let t=g.useContext(Tl);return ft(t,cL(e)),t}function uL(e,{target:t,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:o}={}){let l=lt(),c=Gr(),u=gu(e,{relative:i});return g.useCallback(d=>{if(B5(d,t)){d.preventDefault();let f=n!==void 0?n:$c(c)===$c(u);l(e,{replace:f,state:s,preventScrollReset:r,relative:i,viewTransition:o})}},[c,l,u,n,s,t,e,r,i,o])}function U1(e){as(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(ap(e)),n=g.useRef(!1),s=Gr(),r=g.useMemo(()=>F5(s.search,n.current?null:t.current),[s.search]),i=lt(),o=g.useCallback((l,c)=>{const u=ap(typeof l=="function"?l(r):l);n.current=!0,i("?"+u,c)},[i,r]);return[r,o]}var dL=0,fL=()=>`__${String(++dL)}__`;function mL(){let{router:e}=H1("useSubmit"),{basename:t}=g.useContext(Js),n=T5();return g.useCallback(async(s,r={})=>{let{action:i,method:o,encType:l,formData:c,body:u}=V5(s,t);if(r.navigate===!1){let d=r.fetcherKey||fL();await e.fetch(d,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await e.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}function hL(e,{relative:t}={}){let{basename:n}=g.useContext(Js),s=g.useContext(er);ft(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...gu(e||".",{relative:t})},o=Gr();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Ar([n,i.pathname])),$c(i)}function gL(e,t={}){let n=g.useContext(R1);ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=H1("useViewTransitionState"),r=gu(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Lr(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Lr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return mf(r.pathname,o)!=null||mf(r.pathname,i)!=null}[...Q5];var V1={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pL=g;function G1(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ea(){}var on={d:{f:ea,r:function(){throw Error(G1(522))},D:ea,C:ea,L:ea,m:ea,X:ea,S:ea,M:ea},p:0,findDOMNode:null},xL=Symbol.for("react.portal");function vL(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xL,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}var xc=pL.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function bm(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=on;dn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(G1(299));return vL(e,t,null,n)};dn.flushSync=function(e){var t=xc.T,n=on.p;try{if(xc.T=null,on.p=2,e)return e()}finally{xc.T=t,on.p=n,on.d.f()}};dn.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,on.d.C(e,t))};dn.prefetchDNS=function(e){typeof e=="string"&&on.d.D(e)};dn.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,s=bm(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,i=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?on.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:i}):n==="script"&&on.d.X(e,{crossOrigin:s,integrity:r,fetchPriority:i,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};dn.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=bm(t.as,t.crossOrigin);on.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&on.d.M(e)};dn.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,s=bm(n,t.crossOrigin);on.d.L(e,n,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};dn.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=bm(t.as,t.crossOrigin);on.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else on.d.m(e)};dn.requestFormReset=function(e){on.d.r(e)};dn.unstable_batchedUpdates=function(e,t){return e(t)};dn.useFormState=function(e,t,n){return xc.H.useFormState(e,t,n)};dn.useFormStatus=function(){return xc.H.useHostTransitionStatus()};dn.version="19.1.0";function q1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q1)}catch(e){console.error(e)}}q1(),V1.exports=dn;var wm=V1.exports;const yL=Yx(wm);function bL(){return"/lorerim-arcaneum/"}function Wt(e){return`${bL()}${e}`}const Jy=e=>{let t;const n=new Set,s=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const m=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(h=>h(t,m))}},r=()=>t,l={setState:s,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(s,r,l);return l},wL=e=>e?Jy(e):Jy,jL=e=>e;function NL(e,t=jL){const n=P.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return P.useDebugValue(n),n}const eb=e=>{const t=wL(e),n=s=>NL(t,s);return Object.assign(n,t),n},Nn=e=>e?eb(e):eb,Ui=Nn((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(Wt("data/perk-trees.json"));if(!s.ok)throw new Error(`Failed to fetch perk trees data: ${s.status}`);const i=await s.json();e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load perk trees",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),SL=Object.freeze(Object.defineProperty({__proto__:null,usePerkTreesStore:Ui},Symbol.toStringTag,{value:"Module"})),ks=Nn((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(Wt("data/playable-races.json"));if(!s.ok)throw new Error(`Failed to fetch races data: ${s.status}`);const i=(await s.json()).races.map(o=>({...o,id:o.id||o.edid||o.name.toLowerCase().replace(/\s+/g,"-"),tags:[o.category,...o.keywords||[]].filter(l=>!!l),name:o.name,edid:o.edid,description:o.description,category:o.category,source:o.source,startingStats:o.startingStats,physicalAttributes:o.physicalAttributes,skillBonuses:o.skillBonuses,racialSpells:o.racialSpells,keywords:o.keywords,flags:o.flags,regeneration:o.regeneration,combat:o.combat}));e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load races",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),kL=Object.freeze(Object.defineProperty({__proto__:null,useRacesStore:ks},Symbol.toStringTag,{value:"Module"})),Ua=Nn((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(Wt("data/skills.json"));if(!s.ok)throw new Error(`Failed to fetch skills data: ${s.status}`);const i=(await s.json()).skills.map(o=>({...o,id:o.id||o.edid||o.name.toLowerCase().replace(/\s+/g,"-"),tags:[...o.metaTags||[],o.category].filter(l=>!!l)}));e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load skills",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),CL=Object.freeze(Object.defineProperty({__proto__:null,useSkillsStore:Ua},Symbol.toStringTag,{value:"Module"}));function EL(){return Ui.getState().data}function AL(){return ks.getState().data}function TL(e){const n=Ua.getState().data.find(s=>s.edid===e);return(n==null?void 0:n.name)||e}function jm(e,t){let n=0;if(t.race){const r=AL().find(i=>i.edid===t.race);if(r!=null&&r.skillBonuses){const i=TL(e),o=r.skillBonuses.find(l=>l.skill===i);o&&(n+=o.bonus)}}return t.skills.major.includes(e)?n+=10:t.skills.minor.includes(e)&&(n+=5),n}function _L(e,t){var o,l,c;const n=jm(e,t),s=((l=(o=t.perks)==null?void 0:o.selected)==null?void 0:l[e])||[],r=((c=t.perks)==null?void 0:c.ranks)||{},i=Nm(e,s,r);return n+i}function Nm(e,t,n){var o;if(t.length===0)return 0;const r=EL().find(l=>l.treeId===e);if(!r)return 0;let i=0;for(const l of t){const c=r.perks.find(f=>f.edid===l);if(!c)continue;const u=n[l]||1,d=c.ranks.find(f=>f.rank===u);if(d&&(o=d.prerequisites)!=null&&o.skillLevel){const f=d.prerequisites.skillLevel.level;i=Math.max(i,f)}}return i}function Ju(e){const t={};for(const[n,s]of Object.entries(e.selected))if(s.length>0){const r=Nm(n,s,e.ranks);r>0&&(t[n]=r)}return t}const tb={v:1,name:"",notes:"",race:null,stone:null,religion:null,favoriteBlessing:null,traits:{regular:[],bonus:[]},traitLimits:{regular:2,bonus:1},skills:{major:[],minor:[]},perks:{selected:{},ranks:{}},skillLevels:{},equipment:[],userProgress:{unlocks:[]},destinyPath:[],attributeAssignments:{health:0,stamina:0,magicka:0,level:1,assignments:{}}};function oa(e){var n,s,r,i,o,l,c,u,d,f,m,h,v,y;return e?{v:e.v||1,name:e.name||"",notes:e.notes||"",race:ed(e.race),stone:ed(e.stone),religion:ed(e.religion),favoriteBlessing:ed(e.favoriteBlessing),skills:{major:ra((n=e.skills)==null?void 0:n.major),minor:ra((s=e.skills)==null?void 0:s.minor)},traits:{regular:ra((r=e.traits)==null?void 0:r.regular),bonus:ra((i=e.traits)==null?void 0:i.bonus)},traitLimits:{regular:ao((o=e.traitLimits)==null?void 0:o.regular,2),bonus:ao((l=e.traitLimits)==null?void 0:l.bonus,1)},perks:{selected:RL((c=e.perks)==null?void 0:c.selected),ranks:nb((u=e.perks)==null?void 0:u.ranks)},skillLevels:nb(e.skillLevels),equipment:ra(e.equipment),userProgress:{unlocks:ra((d=e.userProgress)==null?void 0:d.unlocks)},destinyPath:ra(e.destinyPath),attributeAssignments:{health:ao((f=e.attributeAssignments)==null?void 0:f.health,0),stamina:ao((m=e.attributeAssignments)==null?void 0:m.stamina,0),magicka:ao((h=e.attributeAssignments)==null?void 0:h.magicka,0),level:ao((v=e.attributeAssignments)==null?void 0:v.level,1),assignments:DL((y=e.attributeAssignments)==null?void 0:y.assignments)}}:ML()}function ML(){return{v:1,name:"",notes:"",race:null,stone:null,religion:null,favoriteBlessing:null,traits:{regular:[],bonus:[]},traitLimits:{regular:2,bonus:1},skills:{major:[],minor:[]},perks:{selected:{},ranks:{}},skillLevels:{},equipment:[],userProgress:{unlocks:[]},destinyPath:[],attributeAssignments:{health:0,stamina:0,magicka:0,level:1,assignments:{}}}}function ed(e){return typeof e=="string"&&e.trim()!==""?e.trim():null}function ra(e){return Array.isArray(e)?e.filter(t=>typeof t=="string"&&t.trim()!==""):[]}function ao(e,t){return typeof e=="number"&&!isNaN(e)&&isFinite(e)?e:t}function RL(e){if(e&&typeof e=="object"&&!Array.isArray(e)){const t={};for(const[n,s]of Object.entries(e))typeof n=="string"&&Array.isArray(s)&&(t[n]=ra(s));return t}return{}}function nb(e){if(e&&typeof e=="object"&&!Array.isArray(e)){const t={};for(const[n,s]of Object.entries(e))typeof n=="string"&&typeof s=="number"&&!isNaN(s)&&isFinite(s)&&(t[n]=s);return t}return{}}function DL(e){if(e&&typeof e=="object"&&!Array.isArray(e)){const t={};for(const[n,s]of Object.entries(e)){const r=parseInt(n,10);!isNaN(r)&&isFinite(r)&&typeof s=="string"&&["health","stamina","magicka"].includes(s)&&(t[r]=s)}return t}return{}}const yr=Nn((e,t)=>({build:tb,updateBuild:n=>{console.log("ðŸ“¥ [Character Store] Received build updates:",n),n.destinyPath&&console.log("ðŸŽ¯ [Character Store] Destiny path update detected:",n.destinyPath),e(s=>{console.log("ðŸ”„ [Character Store] Current state before update:",s.build);const r={...s.build,...n};console.log("ðŸ“Š [Character Store] Previous build state:",s.build),console.log("ðŸ“Š [Character Store] New build state:",r),r.destinyPath&&console.log("ðŸŽ¯ [Character Store] New destiny path in build:",r.destinyPath);const i=oa(r);return console.log("ðŸ”„ [Character Store] About to return validated state:",{build:i}),{build:i}}),console.log("âœ… [Character Store] Build state updated successfully")},setBuild:n=>e({build:oa(n)}),resetBuild:()=>e({build:tb}),setAttributeAssignment:(n,s)=>{e(r=>{const i={...r.build.attributeAssignments.assignments},o={...r.build.attributeAssignments},l=i[n];l&&(o[l]=Math.max(0,o[l]-5)),i[n]=s,o[s]+=5;const c={...r.build,attributeAssignments:{...r.build.attributeAssignments,...o,assignments:i}};return{build:oa(c)}})},clearAttributeAssignment:n=>{e(s=>{const r={...s.build.attributeAssignments.assignments},i={...s.build.attributeAssignments},o=r[n];o&&(i[o]=Math.max(0,i[o]-5),delete r[n]);const l={...s.build,attributeAssignments:{...s.build.attributeAssignments,...i,assignments:r}};return{build:oa(l)}})},clearAllAttributeAssignments:()=>{e(n=>{const s={...n.build,attributeAssignments:{health:0,stamina:0,magicka:0,level:n.build.attributeAssignments.level,assignments:{}}};return{build:oa(s)}})},updateAttributeLevel:n=>{e(s=>{const r={...s.build,attributeAssignments:{...s.build.attributeAssignments,level:Math.max(1,n)}};return{build:oa(r)}})}}));function Xe(){const e=yr(V=>V.build.skills.major),t=yr(V=>V.build.skills.minor),n=yr(V=>V.build),s=yr(V=>V.updateBuild),r=yr(V=>V.resetBuild),i=V=>(e==null?void 0:e.includes(V))??!1,o=V=>(t==null?void 0:t.includes(V))??!1;return{build:n,majorSkills:e,minorSkills:t,hasMajorSkill:i,hasMinorSkill:o,addMajorSkill:V=>{const G=e??[],K=t??[];if(!i(V)&&(G==null?void 0:G.length)<3){const ie=K==null?void 0:K.filter(Q=>Q!==V),ne={major:[...G,V],minor:ie};s({skills:ne})}},removeMajorSkill:V=>{const G=e??[],K=t??[],ie=G==null?void 0:G.filter(ne=>ne!==V);s({skills:{major:ie,minor:K}})},addMinorSkill:V=>{const G=e??[],K=t??[];if(!o(V)&&(K==null?void 0:K.length)<6){const ie=G==null?void 0:G.filter(ne=>ne!==V);s({skills:{major:ie,minor:[...K,V]}})}},removeMinorSkill:V=>{const G=e??[],ie=(t??[]).filter(ne=>ne!==V);s({skills:{major:G,minor:ie}})},addPerk:(V,G)=>{var ne;const K=((ne=n==null?void 0:n.perks)==null?void 0:ne.selected)??{},ie=K[V]??[];if(!ie.includes(G)){const Q={...n==null?void 0:n.perks,selected:{...K,[V]:[...ie,G]}},Se=Ju(Q);s({perks:Q,skillLevels:Se})}},removePerk:(V,G)=>{var et;const K=((et=n==null?void 0:n.perks)==null?void 0:et.selected)??{},ne=(K[V]??[]).filter(At=>At!==G),Q={...n==null?void 0:n.perks,selected:{...K,[V]:ne}},Se=Ju(Q);s({perks:Q,skillLevels:Se})},setPerkRank:(V,G)=>{var Q;const K=((Q=n==null?void 0:n.perks)==null?void 0:Q.ranks)??{},ie={...n==null?void 0:n.perks,ranks:{...K,[V]:G}},ne=Ju(ie);s({perks:ie,skillLevels:ne})},clearSkillPerks:V=>{var At,hn;const G=((At=n==null?void 0:n.perks)==null?void 0:At.selected)??{},K=((hn=n==null?void 0:n.perks)==null?void 0:hn.ranks)??{},{[V]:ie,...ne}=G,Q={...K};ie&&ie.forEach(gn=>{delete Q[gn]});const Se={...n==null?void 0:n.perks,selected:ne,ranks:Q},et=Ju(Se);s({perks:Se,skillLevels:et})},getSkillPerks:V=>{var G,K;return((K=(G=n==null?void 0:n.perks)==null?void 0:G.selected)==null?void 0:K[V])??[]},getPerkRank:V=>{var G,K;return((K=(G=n==null?void 0:n.perks)==null?void 0:G.ranks)==null?void 0:K[V])??0},getSkillLevel:V=>n?_L(V,n):0,getStartingSkillLevel:V=>n?jm(V,n):0,addTrait:V=>{const{regular:G=[],bonus:K=[]}=(n==null?void 0:n.traits)??{regular:[],bonus:[]},{regular:ie=2,bonus:ne=1}=(n==null?void 0:n.traitLimits)??{regular:2,bonus:1};G.length<ie?s({traits:{...n==null?void 0:n.traits,regular:[...G,V]}}):K.length<ne&&s({traits:{...n==null?void 0:n.traits,bonus:[...K,V]}})},addRegularTrait:V=>{const{regular:G=[]}=(n==null?void 0:n.traits)??{regular:[]},{regular:K=2}=(n==null?void 0:n.traitLimits)??{regular:2};G.length<K&&s({traits:{...n==null?void 0:n.traits,regular:[...G,V]}})},addBonusTrait:V=>{const{bonus:G=[]}=(n==null?void 0:n.traits)??{bonus:[]},{bonus:K=1}=(n==null?void 0:n.traitLimits)??{bonus:1};G.length<K&&s({traits:{...n==null?void 0:n.traits,bonus:[...G,V]}})},removeTrait:V=>{const{regular:G=[],bonus:K=[]}=(n==null?void 0:n.traits)??{regular:[],bonus:[]};s({traits:{regular:G.filter(ie=>ie!==V),bonus:K.filter(ie=>ie!==V)}})},hasTrait:V=>{var G,K,ie,ne;return(((K=(G=n==null?void 0:n.traits)==null?void 0:G.regular)==null?void 0:K.includes(V))??!1)||(((ne=(ie=n==null?void 0:n.traits)==null?void 0:ie.bonus)==null?void 0:ne.includes(V))??!1)},hasRegularTrait:V=>{var G,K;return((K=(G=n==null?void 0:n.traits)==null?void 0:G.regular)==null?void 0:K.includes(V))??!1},hasBonusTrait:V=>{var G,K;return((K=(G=n==null?void 0:n.traits)==null?void 0:G.bonus)==null?void 0:K.includes(V))??!1},setRace:V=>{s({race:V})},setBirthsign:V=>{s({stone:V})},setStone:V=>{s({stone:V})},setReligion:V=>{s({religion:V})},setFavoriteBlessing:V=>{s({favoriteBlessing:V})},addEquipment:V=>{const G=(n==null?void 0:n.equipment)??[];G.includes(V)||s({equipment:[...G,V]})},removeEquipment:V=>{const G=(n==null?void 0:n.equipment)??[];s({equipment:G.filter(K=>K!==V)})},setBuildName:V=>{s({name:V})},setBuildNotes:V=>{s({notes:V})},getDestinyPath:()=>(n==null?void 0:n.destinyPath)??[],setDestinyPath:V=>{s({destinyPath:V})},updateBuild:s,clearBuild:()=>{s(oa({name:"",notes:"",race:null,stone:null,religion:null,skills:{major:[],minor:[]},traits:{regular:[],bonus:[]},perks:{selected:{},ranks:{}},skillLevels:{},destinyPath:[]}))},resetBuild:r,getSummary:()=>{var V,G,K,ie,ne,Q,Se,et,At;return{name:(n==null?void 0:n.name)||"Unnamed Character",race:(n==null?void 0:n.race)||"Not selected",stone:(n==null?void 0:n.stone)||"Not selected",religion:(n==null?void 0:n.religion)||"Not selected",traitCount:(((G=(V=n==null?void 0:n.traits)==null?void 0:V.regular)==null?void 0:G.length)??0)+(((ie=(K=n==null?void 0:n.traits)==null?void 0:K.bonus)==null?void 0:ie.length)??0),majorSkillCount:((Q=(ne=n==null?void 0:n.skills)==null?void 0:ne.major)==null?void 0:Q.length)??0,minorSkillCount:((et=(Se=n==null?void 0:n.skills)==null?void 0:Se.minor)==null?void 0:et.length)??0,equipmentCount:((At=n==null?void 0:n.equipment)==null?void 0:At.length)??0}},getRegularTraitLimit:()=>{var V;return((V=n==null?void 0:n.traitLimits)==null?void 0:V.regular)??2},getBonusTraitLimit:()=>{var V;return((V=n==null?void 0:n.traitLimits)==null?void 0:V.bonus)??1},getRegularTraitCount:()=>{var V,G;return((G=(V=n==null?void 0:n.traits)==null?void 0:V.regular)==null?void 0:G.length)??0},getBonusTraitCount:()=>{var V,G;return((G=(V=n==null?void 0:n.traits)==null?void 0:V.bonus)==null?void 0:G.length)??0},canAddRegularTrait:()=>{var V,G,K;return(((G=(V=n==null?void 0:n.traits)==null?void 0:V.regular)==null?void 0:G.length)??0)<(((K=n==null?void 0:n.traitLimits)==null?void 0:K.regular)??2)},canAddBonusTrait:()=>{var V,G,K;return(((G=(V=n==null?void 0:n.traits)==null?void 0:V.bonus)==null?void 0:G.length)??0)<(((K=n==null?void 0:n.traitLimits)==null?void 0:K.bonus)??1)},getTraitType:V=>{var G,K,ie,ne;return(K=(G=n==null?void 0:n.traits)==null?void 0:G.regular)!=null&&K.includes(V)?"regular":(ne=(ie=n==null?void 0:n.traits)==null?void 0:ie.bonus)!=null&&ne.includes(V)?"bonus":null},isAllTraitsFull:()=>{var ne,Q,Se,et,At,hn;const V=((Q=(ne=n==null?void 0:n.traits)==null?void 0:ne.regular)==null?void 0:Q.length)??0,G=((et=(Se=n==null?void 0:n.traits)==null?void 0:Se.bonus)==null?void 0:et.length)??0,K=((At=n==null?void 0:n.traitLimits)==null?void 0:At.regular)??2,ie=((hn=n==null?void 0:n.traitLimits)==null?void 0:hn.bonus)??1;return V>=K&&G>=ie},addTraitToSlot:(V,G)=>{if(G==="regular"){const{regular:K=[]}=(n==null?void 0:n.traits)??{regular:[]},{regular:ie=2}=(n==null?void 0:n.traitLimits)??{regular:2};if(K.length<ie){const{bonus:ne=[]}=(n==null?void 0:n.traits)??{bonus:[]},Q=ne.filter(Se=>Se!==V);s({traits:{regular:[...K,V],bonus:Q}})}}else{const{bonus:K=[]}=(n==null?void 0:n.traits)??{bonus:[]},{bonus:ie=1}=(n==null?void 0:n.traitLimits)??{bonus:1};if(K.length<ie){const{regular:ne=[]}=(n==null?void 0:n.traits)??{regular:[]},Q=ne.filter(Se=>Se!==V);s({traits:{regular:Q,bonus:[...K,V]}})}}},isSlotAvailable:(V,G=0)=>{var K,ie,ne,Q;return V==="regular"?(((ie=(K=n==null?void 0:n.traits)==null?void 0:K.regular)==null?void 0:ie.length)??0)<=G:(((Q=(ne=n==null?void 0:n.traits)==null?void 0:ne.bonus)==null?void 0:Q.length)??0)<=G}}}function sb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Sm(...e){return t=>{let n=!1;const s=e.map(r=>{const i=sb(r,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():sb(e[r],null)}}}}function Be(...e){return g.useCallback(Sm(...e),e)}function tl(e){const t=zL(e),n=g.forwardRef((s,r)=>{const{children:i,...o}=s,l=g.Children.toArray(i),c=l.find($L);if(c){const u=c.props.children,d=l.map(f=>f===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:f);return a.jsx(t,{...o,ref:r,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return a.jsx(t,{...o,ref:r,children:i})});return n.displayName=`${e}.Slot`,n}var LL=tl("Slot");function zL(e){const t=g.forwardRef((n,s)=>{const{children:r,...i}=n;if(g.isValidElement(r)){const o=IL(r),l=OL(i,r.props);return r.type!==g.Fragment&&(l.ref=s?Sm(s,o):o),g.cloneElement(r,l)}return g.Children.count(r)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Z1=Symbol("radix.slottable");function PL(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Z1,t}function $L(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Z1}function OL(e,t){const n={...t};for(const s in t){const r=e[s],i=t[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...e,...n}}function IL(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Y1(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Y1(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function X1(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Y1(e))&&(s&&(s+=" "),s+=t);return s}const rb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ab=X1,_l=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return ab(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=t,o=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],f=i==null?void 0:i[u];if(d===null)return null;const m=rb(d)||rb(f);return r[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:f,className:m,...h}=d;return Object.entries(h).every(v=>{let[y,w]=v;return Array.isArray(w)?w.includes({...i,...l}[y]):{...i,...l}[y]===w})?[...u,f,m]:u},[]);return ab(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},c0="-",BL=e=>{const t=HL(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(c0);return l[0]===""&&l.length!==1&&l.shift(),W1(l,t)||FL(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},W1=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?W1(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const i=e.join(c0);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},ib=/^\[(.+)\]$/,FL=e=>{if(ib.test(e)){const t=ib.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},HL=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)ip(n[r],s,r,t);return s},ip=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const i=r===""?t:ob(t,r);i.classGroupId=n;return}if(typeof r=="function"){if(UL(r)){ip(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,o])=>{ip(o,ob(t,i),n,s)})})},ob=(e,t)=>{let n=e;return t.split(c0).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},UL=e=>e.isThemeGetter,VL=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return r(i,o),o},set(i,o){n.has(i)?n.set(i,o):r(i,o)}}},op="!",lp=":",GL=lp.length,qL=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=r=>{const i=[];let o=0,l=0,c=0,u;for(let v=0;v<r.length;v++){let y=r[v];if(o===0&&l===0){if(y===lp){i.push(r.slice(c,v)),c=v+GL;continue}if(y==="/"){u=v;continue}}y==="["?o++:y==="]"?o--:y==="("?l++:y===")"&&l--}const d=i.length===0?r:r.substring(c),f=ZL(d),m=f!==d,h=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:h}};if(t){const r=t+lp,i=s;s=o=>o.startsWith(r)?i(o.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=i=>n({className:i,parseClassName:r})}return s},ZL=e=>e.endsWith(op)?e.substring(0,e.length-1):e.startsWith(op)?e.substring(1):e,YL=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let i=[];return s.forEach(o=>{o[0]==="["||t[o]?(r.push(...i.sort(),o),i=[]):i.push(o)}),r.push(...i.sort()),r}},XL=e=>({cache:VL(e.cacheSize),parseClassName:qL(e),sortModifiers:YL(e),...BL(e)}),WL=/\s+/,KL=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:i}=t,o=[],l=e.trim().split(WL);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:f,modifiers:m,hasImportantModifier:h,baseClassName:v,maybePostfixModifierPosition:y}=n(d);if(f){c=d+(c.length>0?" "+c:c);continue}let w=!!y,x=s(w?v.substring(0,y):v);if(!x){if(!w){c=d+(c.length>0?" "+c:c);continue}if(x=s(v),!x){c=d+(c.length>0?" "+c:c);continue}w=!1}const p=i(m).join(":"),b=h?p+op:p,j=b+x;if(o.includes(j))continue;o.push(j);const N=r(x,w);for(let A=0;A<N.length;++A){const k=N[A];o.push(b+k)}c=d+(c.length>0?" "+c:c)}return c};function QL(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=K1(t))&&(s&&(s+=" "),s+=n);return s}const K1=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=K1(e[s]))&&(n&&(n+=" "),n+=t);return n};function JL(e,...t){let n,s,r,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return n=XL(u),s=n.cache.get,r=n.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=KL(c,n);return r(c,d),d}return function(){return i(QL.apply(null,arguments))}}const Tt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Q1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,J1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ez=/^\d+\/\d+$/,tz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,rz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,az=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,io=e=>ez.test(e),ke=e=>!!e&&!Number.isNaN(Number(e)),ta=e=>!!e&&Number.isInteger(Number(e)),Lh=e=>e.endsWith("%")&&ke(e.slice(0,-1)),fr=e=>tz.test(e),iz=()=>!0,oz=e=>nz.test(e)&&!sz.test(e),eS=()=>!1,lz=e=>rz.test(e),cz=e=>az.test(e),uz=e=>!re(e)&&!ae(e),dz=e=>Ml(e,sS,eS),re=e=>Q1.test(e),ti=e=>Ml(e,rS,oz),zh=e=>Ml(e,pz,ke),lb=e=>Ml(e,tS,eS),fz=e=>Ml(e,nS,cz),td=e=>Ml(e,aS,lz),ae=e=>J1.test(e),ql=e=>Rl(e,rS),mz=e=>Rl(e,xz),cb=e=>Rl(e,tS),hz=e=>Rl(e,sS),gz=e=>Rl(e,nS),nd=e=>Rl(e,aS,!0),Ml=(e,t,n)=>{const s=Q1.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},Rl=(e,t,n=!1)=>{const s=J1.exec(e);return s?s[1]?t(s[1]):n:!1},tS=e=>e==="position"||e==="percentage",nS=e=>e==="image"||e==="url",sS=e=>e==="length"||e==="size"||e==="bg-size",rS=e=>e==="length",pz=e=>e==="number",xz=e=>e==="family-name",aS=e=>e==="shadow",vz=()=>{const e=Tt("color"),t=Tt("font"),n=Tt("text"),s=Tt("font-weight"),r=Tt("tracking"),i=Tt("leading"),o=Tt("breakpoint"),l=Tt("container"),c=Tt("spacing"),u=Tt("radius"),d=Tt("shadow"),f=Tt("inset-shadow"),m=Tt("text-shadow"),h=Tt("drop-shadow"),v=Tt("blur"),y=Tt("perspective"),w=Tt("aspect"),x=Tt("ease"),p=Tt("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...j(),ae,re],A=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],C=()=>[ae,re,c],S=()=>[io,"full","auto",...C()],E=()=>[ta,"none","subgrid",ae,re],T=()=>["auto",{span:["full",ta,ae,re]},ta,ae,re],z=()=>[ta,"auto",ae,re],R=()=>["auto","min","max","fr",ae,re],_=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],$=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...C()],O=()=>[io,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],D=()=>[e,ae,re],M=()=>[...j(),cb,lb,{position:[ae,re]}],I=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",hz,dz,{size:[ae,re]}],H=()=>[Lh,ql,ti],q=()=>["","none","full",u,ae,re],Y=()=>["",ke,ql,ti],J=()=>["solid","dashed","dotted","double"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>[ke,Lh,cb,lb],xe=()=>["","none",v,ae,re],me=()=>["none",ke,ae,re],ye=()=>["none",ke,ae,re],We=()=>[ke,ae,re],st=()=>[io,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fr],breakpoint:[fr],color:[iz],container:[fr],"drop-shadow":[fr],ease:["in","out","in-out"],font:[uz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fr],shadow:[fr],spacing:["px",ke],text:[fr],"text-shadow":[fr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",io,re,ae,w]}],container:["container"],columns:[{columns:[ke,re,ae,l]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:S()}],"inset-x":[{"inset-x":S()}],"inset-y":[{"inset-y":S()}],start:[{start:S()}],end:[{end:S()}],top:[{top:S()}],right:[{right:S()}],bottom:[{bottom:S()}],left:[{left:S()}],visibility:["visible","invisible","collapse"],z:[{z:[ta,"auto",ae,re]}],basis:[{basis:[io,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ke,io,"auto","initial","none",re]}],grow:[{grow:["",ke,ae,re]}],shrink:[{shrink:["",ke,ae,re]}],order:[{order:[ta,"first","last","none",ae,re]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:T()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:T()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[..._(),"normal"]}],"justify-items":[{"justify-items":[...$(),"normal"]}],"justify-self":[{"justify-self":["auto",...$()]}],"align-content":[{content:["normal",..._()]}],"align-items":[{items:[...$(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...$(),{baseline:["","last"]}]}],"place-content":[{"place-content":_()}],"place-items":[{"place-items":[...$(),"baseline"]}],"place-self":[{"place-self":["auto",...$()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:O()}],w:[{w:[l,"screen",...O()]}],"min-w":[{"min-w":[l,"screen","none",...O()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...O()]}],h:[{h:["screen","lh",...O()]}],"min-h":[{"min-h":["screen","lh","none",...O()]}],"max-h":[{"max-h":["screen","lh",...O()]}],"font-size":[{text:["base",n,ql,ti]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ae,zh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Lh,re]}],"font-family":[{font:[mz,re,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ae,re]}],"line-clamp":[{"line-clamp":[ke,"none",ae,zh]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",ae,re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ae,re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[ke,"from-font","auto",ae,ti]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[ke,"auto",ae,re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae,re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae,re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:M()}],"bg-repeat":[{bg:I()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ta,ae,re],radial:["",ae,re],conic:[ta,ae,re]},gz,fz]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:H()}],"gradient-via-pos":[{via:H()}],"gradient-to-pos":[{to:H()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ke,ae,re]}],"outline-w":[{outline:["",ke,ql,ti]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",d,nd,td]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",f,nd,td]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[ke,ti]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",m,nd,td]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[ke,ae,re]}],"mix-blend":[{"mix-blend":[...le(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":le()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ke]}],"mask-image-linear-from-pos":[{"mask-linear-from":te()}],"mask-image-linear-to-pos":[{"mask-linear-to":te()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":te()}],"mask-image-t-to-pos":[{"mask-t-to":te()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":te()}],"mask-image-r-to-pos":[{"mask-r-to":te()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":te()}],"mask-image-b-to-pos":[{"mask-b-to":te()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":te()}],"mask-image-l-to-pos":[{"mask-l-to":te()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":te()}],"mask-image-x-to-pos":[{"mask-x-to":te()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":te()}],"mask-image-y-to-pos":[{"mask-y-to":te()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[ae,re]}],"mask-image-radial-from-pos":[{"mask-radial-from":te()}],"mask-image-radial-to-pos":[{"mask-radial-to":te()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[ke]}],"mask-image-conic-from-pos":[{"mask-conic-from":te()}],"mask-image-conic-to-pos":[{"mask-conic-to":te()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:M()}],"mask-repeat":[{mask:I()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ae,re]}],filter:[{filter:["","none",ae,re]}],blur:[{blur:xe()}],brightness:[{brightness:[ke,ae,re]}],contrast:[{contrast:[ke,ae,re]}],"drop-shadow":[{"drop-shadow":["","none",h,nd,td]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",ke,ae,re]}],"hue-rotate":[{"hue-rotate":[ke,ae,re]}],invert:[{invert:["",ke,ae,re]}],saturate:[{saturate:[ke,ae,re]}],sepia:[{sepia:["",ke,ae,re]}],"backdrop-filter":[{"backdrop-filter":["","none",ae,re]}],"backdrop-blur":[{"backdrop-blur":xe()}],"backdrop-brightness":[{"backdrop-brightness":[ke,ae,re]}],"backdrop-contrast":[{"backdrop-contrast":[ke,ae,re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ke,ae,re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ke,ae,re]}],"backdrop-invert":[{"backdrop-invert":["",ke,ae,re]}],"backdrop-opacity":[{"backdrop-opacity":[ke,ae,re]}],"backdrop-saturate":[{"backdrop-saturate":[ke,ae,re]}],"backdrop-sepia":[{"backdrop-sepia":["",ke,ae,re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ae,re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ke,"initial",ae,re]}],ease:[{ease:["linear","initial",x,ae,re]}],delay:[{delay:[ke,ae,re]}],animate:[{animate:["none",p,ae,re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,ae,re]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:me()}],"rotate-x":[{"rotate-x":me()}],"rotate-y":[{"rotate-y":me()}],"rotate-z":[{"rotate-z":me()}],scale:[{scale:ye()}],"scale-x":[{"scale-x":ye()}],"scale-y":[{"scale-y":ye()}],"scale-z":[{"scale-z":ye()}],"scale-3d":["scale-3d"],skew:[{skew:We()}],"skew-x":[{"skew-x":We()}],"skew-y":[{"skew-y":We()}],transform:[{transform:[ae,re,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:st()}],"translate-x":[{"translate-x":st()}],"translate-y":[{"translate-y":st()}],"translate-z":[{"translate-z":st()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae,re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae,re]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[ke,ql,ti,zh]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},yz=JL(vz);function F(...e){return yz(X1(e))}const bz=_l("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-base font-semibold transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-5 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-3 has-[>svg]:px-4",sm:"h-9 rounded-md gap-1.5 px-4 has-[>svg]:px-3.5 text-sm",lg:"h-12 rounded-md px-8 has-[>svg]:px-6 text-lg",icon:"size-11"}},defaultVariants:{variant:"default",size:"default"}});function U({className:e,variant:t,size:n,asChild:s=!1,...r}){const i=s?LL:"button";return a.jsx(i,{"data-slot":"button",className:F(bz({variant:t,size:n,className:e})),...r})}function se(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function wz(e,t){const n=g.createContext(t),s=i=>{const{children:o,...l}=i,c=g.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};s.displayName=e+"Provider";function r(i){const o=g.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,r]}function Vn(e,t=[]){let n=[];function s(i,o){const l=g.createContext(o),c=n.length;n=[...n,o];const u=f=>{var x;const{scope:m,children:h,...v}=f,y=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,w=g.useMemo(()=>v,Object.values(v));return a.jsx(y.Provider,{value:w,children:h})};u.displayName=i+"Provider";function d(f,m){var y;const h=((y=m==null?void 0:m[e])==null?void 0:y[c])||l,v=g.useContext(h);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=n.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return r.scopeName=e,[s,jz(r,...t)]}function jz(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var Ws=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},Nz=v1[" useId ".trim().toString()]||(()=>{}),Sz=0;function Tr(e){const[t,n]=g.useState(Nz());return Ws(()=>{n(s=>s??String(Sz++))},[e]),t?`radix-${t}`:""}var kz=v1[" useInsertionEffect ".trim().toString()]||Ws;function qr({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[r,i,o]=Cz({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:r;{const d=g.useRef(e!==void 0);g.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const u=g.useCallback(d=>{var f;if(l){const m=Ez(d)?d(e):d;m!==e&&((f=o.current)==null||f.call(o,m))}else i(d)},[l,e,i,o]);return[c,u]}function Cz({defaultProp:e,onChange:t}){const[n,s]=g.useState(e),r=g.useRef(n),i=g.useRef(t);return kz(()=>{i.current=t},[t]),g.useEffect(()=>{var o;r.current!==n&&((o=i.current)==null||o.call(i,n),r.current=n)},[n,r]),[n,s,i]}function Ez(e){return typeof e=="function"}var Az=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],we=Az.reduce((e,t)=>{const n=tl(`Primitive.${t}`),s=g.forwardRef((r,i)=>{const{asChild:o,...l}=r,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function iS(e,t){e&&wm.flushSync(()=>e.dispatchEvent(t))}function Jt(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function Tz(e,t=globalThis==null?void 0:globalThis.document){const n=Jt(e);g.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var _z="DismissableLayer",cp="dismissableLayer.update",Mz="dismissableLayer.pointerDownOutside",Rz="dismissableLayer.focusOutside",ub,oS=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pu=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=g.useContext(oS),[d,f]=g.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=g.useState({}),v=Be(t,k=>f(k)),y=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(w),p=d?y.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,j=p>=x,N=zz(k=>{const C=k.target,S=[...u.branches].some(E=>E.contains(C));!j||S||(r==null||r(k),o==null||o(k),k.defaultPrevented||l==null||l())},m),A=Pz(k=>{const C=k.target;[...u.branches].some(E=>E.contains(C))||(i==null||i(k),o==null||o(k),k.defaultPrevented||l==null||l())},m);return Tz(k=>{p===u.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),g.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ub=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),db(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ub)}},[d,m,n,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),db())},[d,u]),g.useEffect(()=>{const k=()=>h({});return document.addEventListener(cp,k),()=>document.removeEventListener(cp,k)},[]),a.jsx(we.div,{...c,ref:v,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:se(e.onFocusCapture,A.onFocusCapture),onBlurCapture:se(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:se(e.onPointerDownCapture,N.onPointerDownCapture)})});pu.displayName=_z;var Dz="DismissableLayerBranch",Lz=g.forwardRef((e,t)=>{const n=g.useContext(oS),s=g.useRef(null),r=Be(t,s);return g.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(we.div,{...e,ref:r})});Lz.displayName=Dz;function zz(e,t=globalThis==null?void 0:globalThis.document){const n=Jt(e),s=g.useRef(!1),r=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){lS(Mz,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=c,t.addEventListener("click",r.current,{once:!0})):c()}else t.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function Pz(e,t=globalThis==null?void 0:globalThis.document){const n=Jt(e),s=g.useRef(!1);return g.useEffect(()=>{const r=i=>{i.target&&!s.current&&lS(Rz,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function db(){const e=new CustomEvent(cp);document.dispatchEvent(e)}function lS(e,t,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?iS(r,i):r.dispatchEvent(i)}var Ph="focusScope.autoFocusOnMount",$h="focusScope.autoFocusOnUnmount",fb={bubbles:!1,cancelable:!0},$z="FocusScope",u0=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=e,[l,c]=g.useState(null),u=Jt(r),d=Jt(i),f=g.useRef(null),m=Be(t,y=>c(y)),h=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(s){let y=function(b){if(h.paused||!l)return;const j=b.target;l.contains(j)?f.current=j:aa(f.current,{select:!0})},w=function(b){if(h.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||aa(f.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&aa(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const p=new MutationObserver(x);return l&&p.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),p.disconnect()}}},[s,l,h.paused]),g.useEffect(()=>{if(l){hb.add(h);const y=document.activeElement;if(!l.contains(y)){const x=new CustomEvent(Ph,fb);l.addEventListener(Ph,u),l.dispatchEvent(x),x.defaultPrevented||(Oz(Uz(cS(l)),{select:!0}),document.activeElement===y&&aa(l))}return()=>{l.removeEventListener(Ph,u),setTimeout(()=>{const x=new CustomEvent($h,fb);l.addEventListener($h,d),l.dispatchEvent(x),x.defaultPrevented||aa(y??document.body,{select:!0}),l.removeEventListener($h,d),hb.remove(h)},0)}}},[l,u,d,h]);const v=g.useCallback(y=>{if(!n&&!s||h.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(w&&x){const p=y.currentTarget,[b,j]=Iz(p);b&&j?!y.shiftKey&&x===j?(y.preventDefault(),n&&aa(b,{select:!0})):y.shiftKey&&x===b&&(y.preventDefault(),n&&aa(j,{select:!0})):x===p&&y.preventDefault()}},[n,s,h.paused]);return a.jsx(we.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});u0.displayName=$z;function Oz(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(aa(s,{select:t}),document.activeElement!==n)return}function Iz(e){const t=cS(e),n=mb(t,e),s=mb(t.reverse(),e);return[n,s]}function cS(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function mb(e,t){for(const n of e)if(!Bz(n,{upTo:t}))return n}function Bz(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Fz(e){return e instanceof HTMLInputElement&&"select"in e}function aa(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Fz(e)&&t&&e.select()}}var hb=Hz();function Hz(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=gb(e,t),e.unshift(t)},remove(t){var n;e=gb(e,t),(n=e[0])==null||n.resume()}}}function gb(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function Uz(e){return e.filter(t=>t.tagName!=="A")}var Vz="Portal",km=g.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[r,i]=g.useState(!1);Ws(()=>i(!0),[]);const o=n||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?yL.createPortal(a.jsx(we.div,{...s,ref:t}),o):null});km.displayName=Vz;function Gz(e,t){return g.useReducer((n,s)=>t[n][s]??n,e)}var Kt=e=>{const{present:t,children:n}=e,s=qz(t),r=typeof n=="function"?n({present:s.isPresent}):g.Children.only(n),i=Be(s.ref,Zz(r));return typeof n=="function"||s.isPresent?g.cloneElement(r,{ref:i}):null};Kt.displayName="Presence";function qz(e){const[t,n]=g.useState(),s=g.useRef(null),r=g.useRef(e),i=g.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Gz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=sd(s.current);i.current=l==="mounted"?u:"none"},[l]),Ws(()=>{const u=s.current,d=r.current;if(d!==e){const m=i.current,h=sd(u);e?c("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,c]),Ws(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=h=>{const y=sd(s.current).includes(h.animationName);if(h.target===t&&y&&(c("ANIMATION_END"),!r.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=h=>{h.target===t&&(i.current=sd(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function sd(e){return(e==null?void 0:e.animationName)||"none"}function Zz(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Oh=0;function uS(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??pb()),document.body.insertAdjacentElement("beforeend",e[1]??pb()),Oh++,()=>{Oh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Oh--}},[])}function pb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Is=function(){return Is=Object.assign||function(t){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Is.apply(this,arguments)};function dS(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}function Yz(e,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,i;s<r;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var Fd="right-scroll-bar-position",Hd="width-before-scroll-bar",Xz="with-scroll-bars-hidden",Wz="--removed-body-scroll-bar-size";function Ih(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Kz(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=t,n.facade}var Qz=typeof window<"u"?g.useLayoutEffect:g.useEffect,xb=new WeakMap;function Jz(e,t){var n=Kz(null,function(s){return e.forEach(function(r){return Ih(r,s)})});return Qz(function(){var s=xb.get(n);if(s){var r=new Set(s),i=new Set(e),o=n.current;r.forEach(function(l){i.has(l)||Ih(l,null)}),i.forEach(function(l){r.has(l)||Ih(l,o)})}xb.set(n,e)},[e]),n}function eP(e){return e}function tP(e,t){t===void 0&&(t=eP);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,s);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){s=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return r}function nP(e){e===void 0&&(e={});var t=tP(null);return t.options=Is({async:!0,ssr:!1},e),t}var fS=function(e){var t=e.sideCar,n=dS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return g.createElement(s,Is({},n))};fS.isSideCarExport=!0;function sP(e,t){return e.useMedium(t),fS}var mS=nP(),Bh=function(){},Cm=g.forwardRef(function(e,t){var n=g.useRef(null),s=g.useState({onScrollCapture:Bh,onWheelCapture:Bh,onTouchMoveCapture:Bh}),r=s[0],i=s[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,m=e.sideCar,h=e.noRelative,v=e.noIsolation,y=e.inert,w=e.allowPinchZoom,x=e.as,p=x===void 0?"div":x,b=e.gapMode,j=dS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,A=Jz([n,t]),k=Is(Is({},j),r);return g.createElement(g.Fragment,null,d&&g.createElement(N,{sideCar:mS,removeScrollBar:u,shards:f,noRelative:h,noIsolation:v,inert:y,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:b}),o?g.cloneElement(g.Children.only(l),Is(Is({},k),{ref:A})):g.createElement(p,Is({},k,{className:c,ref:A}),l))});Cm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cm.classNames={fullWidth:Hd,zeroRight:Fd};var rP=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function aP(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=rP();return t&&e.setAttribute("nonce",t),e}function iP(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function oP(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var lP=function(){var e=0,t=null;return{add:function(n){e==0&&(t=aP())&&(iP(t,n),oP(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},cP=function(){var e=lP();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},hS=function(){var e=cP(),t=function(n){var s=n.styles,r=n.dynamic;return e(s,r),null};return t},uP={left:0,top:0,right:0,gap:0},Fh=function(e){return parseInt(e||"",10)||0},dP=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[Fh(n),Fh(s),Fh(r)]},fP=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return uP;var t=dP(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},mP=hS(),Po="data-scroll-locked",hP=function(e,t,n,s){var r=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Xz,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Po,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Fd,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Hd,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Fd," .").concat(Fd,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Hd," .").concat(Hd,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Po,`] {
    `).concat(Wz,": ").concat(l,`px;
  }
`)},vb=function(){var e=parseInt(document.body.getAttribute(Po)||"0",10);return isFinite(e)?e:0},gP=function(){g.useEffect(function(){return document.body.setAttribute(Po,(vb()+1).toString()),function(){var e=vb()-1;e<=0?document.body.removeAttribute(Po):document.body.setAttribute(Po,e.toString())}},[])},pP=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,r=s===void 0?"margin":s;gP();var i=g.useMemo(function(){return fP(r)},[r]);return g.createElement(mP,{styles:hP(i,!t,r,n?"":"!important")})},up=!1;if(typeof window<"u")try{var rd=Object.defineProperty({},"passive",{get:function(){return up=!0,!0}});window.addEventListener("test",rd,rd),window.removeEventListener("test",rd,rd)}catch{up=!1}var oo=up?{passive:!1}:!1,xP=function(e){return e.tagName==="TEXTAREA"},gS=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!xP(e)&&n[t]==="visible")},vP=function(e){return gS(e,"overflowY")},yP=function(e){return gS(e,"overflowX")},yb=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=pS(e,s);if(r){var i=xS(e,s),o=i[1],l=i[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},bP=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},wP=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},pS=function(e,t){return e==="v"?vP(t):yP(t)},xS=function(e,t){return e==="v"?bP(t):wP(t)},jP=function(e,t){return e==="h"&&t==="rtl"?-1:1},NP=function(e,t,n,s,r){var i=jP(e,window.getComputedStyle(t).direction),o=i*s,l=n.target,c=t.contains(l),u=!1,d=o>0,f=0,m=0;do{if(!l)break;var h=xS(e,l),v=h[0],y=h[1],w=h[2],x=y-w-i*v;(v||x)&&pS(e,l)&&(f+=x,m+=v);var p=l.parentNode;l=p&&p.nodeType===Node.DOCUMENT_FRAGMENT_NODE?p.host:p}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(f)<1||!d&&Math.abs(m)<1)&&(u=!0),u},ad=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},bb=function(e){return[e.deltaX,e.deltaY]},wb=function(e){return e&&"current"in e?e.current:e},SP=function(e,t){return e[0]===t[0]&&e[1]===t[1]},kP=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},CP=0,lo=[];function EP(e){var t=g.useRef([]),n=g.useRef([0,0]),s=g.useRef(),r=g.useState(CP++)[0],i=g.useState(hS)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var y=Yz([e.lockRef.current],(e.shards||[]).map(wb),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var x=ad(y),p=n.current,b="deltaX"in y?y.deltaX:p[0]-x[0],j="deltaY"in y?y.deltaY:p[1]-x[1],N,A=y.target,k=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in y&&k==="h"&&A.type==="range")return!1;var C=yb(k,A);if(!C)return!0;if(C?N=k:(N=k==="v"?"h":"v",C=yb(k,A)),!C)return!1;if(!s.current&&"changedTouches"in y&&(b||j)&&(s.current=N),!N)return!0;var S=s.current||N;return NP(S,w,y,S==="h"?b:j)},[]),c=g.useCallback(function(y){var w=y;if(!(!lo.length||lo[lo.length-1]!==i)){var x="deltaY"in w?bb(w):ad(w),p=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&SP(N.delta,x)})[0];if(p&&p.should){w.cancelable&&w.preventDefault();return}if(!p){var b=(o.current.shards||[]).map(wb).filter(Boolean).filter(function(N){return N.contains(w.target)}),j=b.length>0?l(w,b[0]):!o.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),u=g.useCallback(function(y,w,x,p){var b={name:y,delta:w,target:x,should:p,shadowParent:AP(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),d=g.useCallback(function(y){n.current=ad(y),s.current=void 0},[]),f=g.useCallback(function(y){u(y.type,bb(y),y.target,l(y,e.lockRef.current))},[]),m=g.useCallback(function(y){u(y.type,ad(y),y.target,l(y,e.lockRef.current))},[]);g.useEffect(function(){return lo.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,oo),document.addEventListener("touchmove",c,oo),document.addEventListener("touchstart",d,oo),function(){lo=lo.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,oo),document.removeEventListener("touchmove",c,oo),document.removeEventListener("touchstart",d,oo)}},[]);var h=e.removeScrollBar,v=e.inert;return g.createElement(g.Fragment,null,v?g.createElement(i,{styles:kP(r)}):null,h?g.createElement(pP,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function AP(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const TP=sP(mS,EP);var d0=g.forwardRef(function(e,t){return g.createElement(Cm,Is({},e,{ref:t,sideCar:TP}))});d0.classNames=Cm.classNames;var _P=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},co=new WeakMap,id=new WeakMap,od={},Hh=0,vS=function(e){return e&&(e.host||vS(e.parentNode))},MP=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=vS(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},RP=function(e,t,n,s){var r=MP(t,Array.isArray(e)?e:[e]);od[n]||(od[n]=new WeakMap);var i=od[n],o=[],l=new Set,c=new Set(r),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};r.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var h=m.getAttribute(s),v=h!==null&&h!=="false",y=(co.get(m)||0)+1,w=(i.get(m)||0)+1;co.set(m,y),i.set(m,w),o.push(m),y===1&&v&&id.set(m,!0),w===1&&m.setAttribute(n,"true"),v||m.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(t),l.clear(),Hh++,function(){o.forEach(function(f){var m=co.get(f)-1,h=i.get(f)-1;co.set(f,m),i.set(f,h),m||(id.has(f)||f.removeAttribute(s),id.delete(f)),h||f.removeAttribute(n)}),Hh--,Hh||(co=new WeakMap,co=new WeakMap,id=new WeakMap,od={})}},yS=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),r=_P(e);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),RP(s,r,n,"aria-hidden")):function(){return null}},Em="Dialog",[bS,ose]=Vn(Em),[DP,As]=bS(Em),wS=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:r,onOpenChange:i,modal:o=!0}=e,l=g.useRef(null),c=g.useRef(null),[u,d]=qr({prop:s,defaultProp:r??!1,onChange:i,caller:Em});return a.jsx(DP,{scope:t,triggerRef:l,contentRef:c,contentId:Tr(),titleId:Tr(),descriptionId:Tr(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:o,children:n})};wS.displayName=Em;var jS="DialogTrigger",NS=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=As(jS,n),i=Be(t,r.triggerRef);return a.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":h0(r.open),...s,ref:i,onClick:se(e.onClick,r.onOpenToggle)})});NS.displayName=jS;var f0="DialogPortal",[LP,SS]=bS(f0,{forceMount:void 0}),kS=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:r}=e,i=As(f0,t);return a.jsx(LP,{scope:t,forceMount:n,children:g.Children.map(s,o=>a.jsx(Kt,{present:n||i.open,children:a.jsx(km,{asChild:!0,container:r,children:o})}))})};kS.displayName=f0;var hf="DialogOverlay",CS=g.forwardRef((e,t)=>{const n=SS(hf,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,i=As(hf,e.__scopeDialog);return i.modal?a.jsx(Kt,{present:s||i.open,children:a.jsx(PP,{...r,ref:t})}):null});CS.displayName=hf;var zP=tl("DialogOverlay.RemoveScroll"),PP=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=As(hf,n);return a.jsx(d0,{as:zP,allowPinchZoom:!0,shards:[r.contentRef],children:a.jsx(we.div,{"data-state":h0(r.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Ai="DialogContent",ES=g.forwardRef((e,t)=>{const n=SS(Ai,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,i=As(Ai,e.__scopeDialog);return a.jsx(Kt,{present:s||i.open,children:i.modal?a.jsx($P,{...r,ref:t}):a.jsx(OP,{...r,ref:t})})});ES.displayName=Ai;var $P=g.forwardRef((e,t)=>{const n=As(Ai,e.__scopeDialog),s=g.useRef(null),r=Be(t,n.contentRef,s);return g.useEffect(()=>{const i=s.current;if(i)return yS(i)},[]),a.jsx(AS,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:se(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:se(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:se(e.onFocusOutside,i=>i.preventDefault())})}),OP=g.forwardRef((e,t)=>{const n=As(Ai,e.__scopeDialog),s=g.useRef(!1),r=g.useRef(!1);return a.jsx(AS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),AS=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,...o}=e,l=As(Ai,n),c=g.useRef(null),u=Be(t,c);return uS(),a.jsxs(a.Fragment,{children:[a.jsx(u0,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:a.jsx(pu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":h0(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(IP,{titleId:l.titleId}),a.jsx(FP,{contentRef:c,descriptionId:l.descriptionId})]})]})}),m0="DialogTitle",TS=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=As(m0,n);return a.jsx(we.h2,{id:r.titleId,...s,ref:t})});TS.displayName=m0;var _S="DialogDescription",MS=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=As(_S,n);return a.jsx(we.p,{id:r.descriptionId,...s,ref:t})});MS.displayName=_S;var RS="DialogClose",DS=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=As(RS,n);return a.jsx(we.button,{type:"button",...s,ref:t,onClick:se(e.onClick,()=>r.onOpenChange(!1))})});DS.displayName=RS;function h0(e){return e?"open":"closed"}var LS="DialogTitleWarning",[lse,zS]=wz(LS,{contentName:Ai,titleName:m0,docsSlug:"dialog"}),IP=({titleId:e})=>{const t=zS(LS),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},BP="DialogDescriptionWarning",FP=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zS(BP).contentName}}.`;return g.useEffect(()=>{var i;const r=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},g0=wS,HP=NS,p0=kS,xu=CS,vu=ES,yu=TS,bu=MS,PS=DS;const is=g0,Va=HP,UP=p0,$S=g.forwardRef(({className:e,...t},n)=>a.jsx(xu,{className:F("fixed inset-0 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{zIndex:Nt.MODAL},...t,ref:n}));$S.displayName=xu.displayName;const VP=_l("fixed gap-4 border shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Fn=g.forwardRef(({side:e="right",className:t,children:n,...s},r)=>a.jsxs(UP,{children:[a.jsx($S,{}),a.jsxs(vu,{ref:r,className:F(VP({side:e}),t),style:{zIndex:Nt.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[n,a.jsxs(PS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary p-3 sm:p-2 z-50 min-w-[44px] min-h-[44px] flex items-center justify-center",children:[a.jsx(Me,{className:"h-6 w-6 sm:h-4 sm:w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Fn.displayName=vu.displayName;const os=({className:e,...t})=>a.jsx("div",{className:F("flex flex-col space-y-2 text-center sm:text-left",e),...t});os.displayName="SheetHeader";const ls=g.forwardRef(({className:e,...t},n)=>a.jsx(yu,{ref:n,className:F("text-lg font-semibold text-foreground",e),...t}));ls.displayName=yu.displayName;const Zr=g.forwardRef(({className:e,...t},n)=>a.jsx(bu,{ref:n,className:F("text-sm text-muted-foreground",e),...t}));Zr.displayName=bu.displayName;function ce({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:F("bg-card text-card-foreground flex flex-col gap-8 rounded-xl border py-8 px-6 shadow-sm",e),...t})}function be({className:e,action:t,children:n,...s}){return a.jsxs("div",{"data-slot":"card-header",className:F("flex flex-row items-start justify-between space-y-0",e),...s,children:[a.jsx("div",{className:"flex-1 flex flex-col space-y-3",children:n}),t&&a.jsx("div",{className:"ml-4 flex-shrink-0",children:t})]})}function _e({className:e,...t}){return a.jsx("div",{"data-slot":"card-title",className:F("text-xl font-bold leading-none",e),...t})}function bs({className:e,...t}){return a.jsx("div",{"data-slot":"card-description",className:F("text-base text-muted-foreground",e),...t})}function de({className:e,...t}){return a.jsx("div",{"data-slot":"card-content",className:F("pt-0",e),...t})}const Dt=g.forwardRef(({className:e,type:t,...n},s)=>a.jsx("input",{type:t,className:F("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));Dt.displayName="Input";var GP="Label",OS=g.forwardRef((e,t)=>a.jsx(we.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));OS.displayName=GP;const qP=_l("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pt=g.forwardRef(({className:e,children:t,...n},s)=>a.jsx(OS,{ref:s,className:F(qP(),e),...n,children:t}));Pt.displayName="Label";function IS({name:e,notes:t,onNameChange:n,onNotesChange:s,className:r}){const[i,o]=g.useState(e),[l,c]=g.useState(t),u=g.useCallback((()=>{let h;return v=>{clearTimeout(h),h=setTimeout(()=>{n(v)},300)}})(),[n]),d=g.useCallback((()=>{let h;return v=>{clearTimeout(h),h=setTimeout(()=>{s(v)},300)}})(),[s]);g.useEffect(()=>{o(e)},[e]),g.useEffect(()=>{c(t)},[t]);const f=h=>{const v=h.target.value;o(v),u(v)},m=h=>{const v=h.target.value;c(v),d(v)};return a.jsxs(ce,{className:`mb-6 ${r||""}`,children:[a.jsx(be,{children:a.jsx(_e,{children:"Basic Information"})}),a.jsxs(de,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Pt,{htmlFor:"name",children:"Character Name"}),a.jsx(Dt,{id:"name",value:i,onChange:f,placeholder:"Enter character name..."})]}),a.jsxs("div",{children:[a.jsx(Pt,{htmlFor:"notes",children:"Notes"}),a.jsx("textarea",{id:"notes",value:l,onChange:m,placeholder:"Add character notes, roleplay details, or build explanations...",rows:4,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]})]})}function ZP({onClick:e,className:t}){return a.jsxs(U,{variant:"outline",size:"sm",onClick:e,className:t,title:"GigaPlanner Tools - Import character builds","aria-label":"Open GigaPlanner tools",children:[a.jsx(df,{className:"w-4 h-4 mr-2"}),"GigaPlanner Tools"]})}const Vi=Nn((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(Wt("data/birthsigns.json"));if(!s.ok)throw new Error(`Failed to fetch birthsigns data: ${s.status}`);const i=(await s.json()).map(o=>{var l,c;return{...o,id:o.edid||o.name.toLowerCase().replace(/\s+/g,"-"),tags:[o.group,...((l=o.powers)==null?void 0:l.map(u=>u.name))||[],...((c=o.stat_modifications)==null?void 0:c.map(u=>u.stat))||[]].filter(u=>!!u)}});e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load birthsigns",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),YP=Object.freeze(Object.defineProperty({__proto__:null,useBirthsignsStore:Vi},Symbol.toStringTag,{value:"Module"})),XP={SHOW_FAVORED_RACES:!0,ENABLE_RACE_AUTOCOMPLETE:!1,SHOW_RACE_FILTERS:!1};function WP(e){return XP[e]}function _r(){return WP("SHOW_FAVORED_RACES")}function BS(e){return{effectName:e.effectName,effectDescription:e.effectDescription,magnitude:e.magnitude,duration:e.duration,area:e.area,effectType:"0",targetAttribute:null,keywords:e.keywords||[]}}function dp(e,t){return{spellId:t,spellName:e.spellName,effects:e.effects.map(BS)}}function KP(e){return{spellId:e.spellName,spellName:e.spellName,header:e.spellName,description:e.description,effects:e.effects.map(BS)}}function QP(e){const t=e.name.toLowerCase().replace(/\s+/g,"-");return{id:t,name:e.name,type:e.domain,pantheon:e.domain,blessing:void 0,boon1:dp(e.boons.boon1,`${t}-boon1`),boon2:dp(e.boons.boon2,`${t}-boon2`),tenet:KP(e.tenets),favoredRaces:e.favoredRaces||[],worshipRestrictions:[],tags:[e.domain,...e.favoredRaces||[]].filter(Boolean)}}function JP(e){const t=e.name.toLowerCase().replace(/\s+/g,"-");return{id:t,name:e.name,type:e.domain,pantheon:e.domain,blessing:dp(e.blessing,`${t}-blessing`),favoredRaces:[],tags:[e.domain]}}function e$(e){return e.map(QP)}function FS(e){return e.map(JP)}const x0=Nn((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(Wt("data/blessing-data.json"));if(!s.ok)throw new Error(`Failed to fetch blessings data: ${s.status}`);const r=await s.json(),o=FS(r).filter(l=>{var c;return((c=l.blessing)==null?void 0:c.effects)&&l.blessing.effects.length>0}).map(l=>({id:l.id,name:l.name,type:l.type,pantheon:l.pantheon,blessingName:l.blessing.spellName,blessingDescription:l.blessing.effects.map(c=>c.effectDescription).join(" "),effects:l.blessing.effects.map(c=>({name:c.effectName,description:c.effectDescription,magnitude:c.magnitude,duration:c.duration,area:c.area,effectType:c.effectType,targetAttribute:c.targetAttribute,keywords:c.keywords})),tags:l.tags||[],originalReligion:l}));e({data:o,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load blessings",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o;return i.name.toLowerCase().includes(r)||i.blessingName.toLowerCase().includes(r)||i.blessingDescription.toLowerCase().includes(r)||((o=i.tags)==null?void 0:o.some(l=>l.toLowerCase().includes(r)))})},getByType:n=>t().data.filter(r=>r.type===n)}));function t$(e){var s;const t=[],n=((s=e.description)==null?void 0:s.toLowerCase())||"";return(n.includes("damage")||n.includes("weapon"))&&t.push("Combat"),(n.includes("armor")||n.includes("defense"))&&t.push("Defensive"),(n.includes("magicka")||n.includes("spell")||n.includes("magic"))&&t.push("Magic"),(n.includes("regeneration")||n.includes("health")||n.includes("stamina"))&&t.push("Utility"),(n.includes("detect")||n.includes("stealth"))&&t.push("Stealth"),(n.includes("cost")||n.includes("less"))&&t.push("Cost Reduction"),(n.includes("increase")||n.includes("more"))&&t.push("Enhancement"),n.includes("resistance")&&t.push("Resistance"),[...new Set(t)]}const Dl=Nn((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(Wt("data/subclasses.json"));if(!s.ok)throw new Error(`Failed to fetch destiny nodes data: ${s.status}`);const i=(await s.json()).map((o,l)=>({...o,id:o.globalFormId||o.edid||`destiny-${l}`,nextBranches:o.nextBranches||[],levelRequirement:o.levelRequirement,lore:o.lore,tags:t$(o),prerequisites:Array.isArray(o.prerequisites)?o.prerequisites:[]}));e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load destiny nodes",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),n$=Object.freeze(Object.defineProperty({__proto__:null,useDestinyNodesStore:Dl},Symbol.toStringTag,{value:"Module"})),Ll=Nn((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(Wt("data/religion-data.json"));if(!s.ok)throw new Error(`Failed to fetch religions data: ${s.status}`);const r=await fetch(Wt("data/blessing-data.json"));if(!r.ok)throw new Error(`Failed to fetch blessings data: ${r.status}`);const i=await s.json(),o=await r.json(),l=e$(i),c=FS(o),u=l.map(d=>{const f=c.find(m=>m.name===d.name);return{...d,blessing:f==null?void 0:f.blessing}});e({data:u,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load religions",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n||r.name===n||r.name.toLowerCase().replace(/\s+/g,"-")===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),s$=Object.freeze(Object.defineProperty({__proto__:null,useReligionsStore:Ll},Symbol.toStringTag,{value:"Module"})),Gi=Nn((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(Wt("data/traits.json"));if(!s.ok)throw new Error(`Failed to fetch traits data: ${s.status}`);const i=(await s.json()).traits.map(o=>{var l;return{...o,id:o.id||o.edid||o.name,tags:[o.category,...o.tags||[],...((l=o.effects)==null?void 0:l.map(c=>c.type))||[]].filter(c=>!!c)}});e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load traits",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),r$=Object.freeze(Object.defineProperty({__proto__:null,useTraitsStore:Gi},Symbol.toStringTag,{value:"Module"}));function es(e){return e?e.replace(/\*\*\*(.*?)\*\*\*/g,"**$1**").replace(/<(\d+)>/g,"Level $1").replace(/\n+/g," ").trim():""}function Ga(e,t,n){try{return e()}catch(s){return console.warn(`Failed to resolve ${n}:`,s),t}}function a$(e){return e?Ga(()=>{const t=ks.getState().data;if(t.length===0)throw new Error("Races data not loaded yet. Please wait a moment and try again.");let n=t.find(s=>s.edid===e);return n||(n=t.find(s=>s.name.toLowerCase()===e.toLowerCase())),n||(n=t.find(s=>s.id===e)),n?{name:n.name,effects:n.description?es(n.description):void 0}:(console.warn(`Race not found for ID: ${e}. Available races: ${t.map(s=>s.edid).join(", ")}`),{name:"Unknown Race"})},{name:"Unknown Race"},"race"):{name:"Not selected"}}function i$(e){return e?Ga(()=>{const t=Vi.getState().data;if(t.length===0)throw new Error("Birthsigns data not loaded yet. Please wait a moment and try again.");const n=t.find(s=>s.edid===e);return n?{name:n.name,effects:es(n.description||"No effects")}:{name:"Unknown Birth Sign",effects:"No effects"}},{name:"Unknown Birth Sign",effects:"No effects"},"birth sign"):{name:"Not selected",effects:"No effects"}}function o$(e,t){return Ga(()=>{const n=Gi.getState().data;if(n.length===0)throw new Error("Traits data not loaded yet. Please wait a moment and try again.");const s=[];return e.forEach(r=>{const i=n.find(o=>o.edid===r);i&&s.push({name:i.name,effects:es(i.description||"No effects"),type:"regular"})}),t.forEach(r=>{const i=n.find(o=>o.edid===r);i&&s.push({name:i.name,effects:es(i.description||"No effects"),type:"bonus"})}),s},[],"traits")}function l$(e){return e?Ga(()=>{var o,l,c,u,d,f,m,h,v,y,w,x;const t=Ll.getState().data;if(t.length===0)throw new Error("Religions data not loaded yet. Please wait a moment and try again.");const n=t.find(p=>p.id===e||p.name===e||p.name.toLowerCase().replace(/\s+/g,"-")===e);if(!n)return{name:"Unknown Religion",effects:"No effects"};const s=((c=(l=(o=n.tenet)==null?void 0:o.effects)==null?void 0:l[0])==null?void 0:c.effectDescription)||((u=n.tenet)==null?void 0:u.description)||void 0,r=((m=(f=(d=n.boon1)==null?void 0:d.effects)==null?void 0:f[0])==null?void 0:m.effectDescription)||((h=n.boon1)==null?void 0:h.spellName)||void 0,i=((w=(y=(v=n.boon2)==null?void 0:v.effects)==null?void 0:y[0])==null?void 0:w.effectDescription)||((x=n.boon2)==null?void 0:x.spellName)||void 0;return{name:n.name,effects:es(n.type||"No effects"),tenets:s?es(s):void 0,followerBoon:r?es(r):void 0,devoteeBoon:i?es(i):void 0}},{name:"Unknown Religion",effects:"No effects"},"religion"):{name:"Not selected",effects:"No effects"}}function c$(e){return e?Ga(()=>{const t=x0.getState().data;if(t.length===0)throw new Error("Blessings data not loaded yet. Please wait a moment and try again.");const n=t.find(r=>r.id===e);if(!n)return{name:"Unknown Blessing",effects:"No effects",source:"Unknown"};const s=n.effects.slice(0,2).map(r=>r.name).join(", ");return{name:n.blessingName,effects:es(s||"No effects"),source:n.name}},{name:"Unknown Blessing",effects:"No effects",source:"Unknown"},"favorite blessing"):{name:"Not selected",effects:"No effects",source:"None"}}function u$(e,t,n){return Ga(()=>{const s=Ua.getState().data;if(s.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");const r=i=>i.map(o=>{const l=s.find(u=>u.edid===o),c=n[o];return{name:(l==null?void 0:l.name)||"Unknown Skill",level:c||void 0}});return{major:r(e),minor:r(t),other:[]}},{major:[],minor:[],other:[]},"skills")}function d$(e,t){return Ga(()=>{const n=Ua.getState().data,s=Ui.getState().data;if(n.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");if(s.length===0)throw new Error("Perk trees data not loaded yet. Please wait a moment and try again.");return Object.entries(e).map(([r,i])=>{const o=n.find(u=>u.edid===r),l=s.find(u=>u.treeId===r),c=new Map;return i.forEach(u=>{var y,w,x,p;let d=l==null?void 0:l.perks.find(b=>b.edid===u);d||(d=l==null?void 0:l.perks.find(b=>b.name.toLowerCase()===u.toLowerCase())),d||console.warn(`Perk lookup fallback for ID: ${u}`);const f=t[u];d||console.warn(`Perk not found for ID: ${u} in skill: ${r}. Available perks: ${l==null?void 0:l.perks.map(b=>b.edid).join(", ")}`);const m=((x=(w=(y=d==null?void 0:d.ranks)==null?void 0:y[0])==null?void 0:w.description)==null?void 0:x.base)||"No effects",h=(d==null?void 0:d.edid)||u,v=((p=c.get(h))==null?void 0:p.rank)||0;f&&f>v?c.set(h,{name:(d==null?void 0:d.name)||"Unknown Perk",effects:es(m),rank:f}):c.has(h)||c.set(h,{name:(d==null?void 0:d.name)||"Unknown Perk",effects:es(m),rank:f||void 0})}),{skillName:(o==null?void 0:o.name)||"Unknown Skill",perks:Array.from(c.values())}}).filter(r=>r.perks.length>0)},[],"perks")}function f$(e){return e.length===0?[]:Ga(()=>{const t=Dl.getState().data;if(t.length===0)throw new Error("Destiny nodes data not loaded yet. Please wait a moment and try again.");return e.map(n=>{let s=t.find(r=>r.edid===n);return s||(s=t.find(r=>r.id===n)),s||(s=t.find(r=>r.name===n)),{name:(s==null?void 0:s.name)||"Unknown Destiny",effects:s!=null&&s.description?es(s.description):void 0}})},[],"destiny path")}function m$(e){const t=[],n=e.map(s=>s.name.toLowerCase());return n.some(s=>s.includes("one-handed")||s.includes("two-handed"))&&t.push("melee"),n.some(s=>s.includes("archery"))&&t.push("archery"),n.some(s=>s.includes("magic")||s.includes("destruction"))&&t.push("magic"),n.some(s=>s.includes("stealth")||s.includes("sneak"))&&t.push("stealth"),n.some(s=>s.includes("smithing")||s.includes("enchanting"))&&t.push("crafting"),t}function h$(e){const t=[],n=e.map(s=>s.name.toLowerCase());return n.some(s=>s.includes("warrior")||s.includes("combat"))&&t.push("warrior"),n.some(s=>s.includes("mage")||s.includes("magic"))&&t.push("mage"),n.some(s=>s.includes("thief")||s.includes("stealth"))&&t.push("thief"),n.some(s=>s.includes("archer")||s.includes("ranged"))&&t.push("archer"),t}function g$(e,t,n){const s=["lorerim"];if(e.name!=="Not selected"){const l=e.name.toLowerCase().replace(/\s+/g,"");s.push(l)}const r=[...t.major,...t.minor],i=m$(r);s.push(...i);const o=h$(n);return s.push(...o),s.slice(0,5)}function p$(e){const t=a$(e.race),n=i$(e.stone),s=l$(e.religion),r=c$(e.favoriteBlessing),i=o$(e.traits.regular,e.traits.bonus),o=u$(e.skills.major,e.skills.minor,e.skillLevels),l=d$(e.perks.selected,e.perks.ranks),c=f$(e.destinyPath),u=g$(t,o,i),d=e.attributeAssignments.assignments||{},f=Object.values(d).filter(N=>N==="health").length,m=Object.values(d).filter(N=>N==="stamina").length,h=Object.values(d).filter(N=>N==="magicka").length,y=ks.getState().data.find(N=>N.edid===e.race),w=(y==null?void 0:y.startingStats)||{health:100,stamina:100,magicka:100},x=w.health+(e.attributeAssignments.health||0),p=w.stamina+(e.attributeAssignments.stamina||0),b=w.magicka+(e.attributeAssignments.magicka||0),j={level:e.attributeAssignments.level||1,health:x,stamina:p,magicka:b,healthLevels:f,staminaLevels:m,magickaLevels:h,totalPoints:(e.attributeAssignments.health||0)+(e.attributeAssignments.stamina||0)+(e.attributeAssignments.magicka||0)};return{name:e.name||"Unnamed Character",notes:e.notes||"",race:t,birthSign:n,traits:i,religion:s,favoriteBlessing:r,skills:o,perks:l,destinyPath:c,tags:u,attributes:j}}function x$(e,t){const n=[];n.push(`**ðŸ›¡ï¸ Build: ${e.name||"Unnamed Character"}**`),e.notes&&n.push(`*${e.notes}*`),n.push(""),t&&(n.push(`[Arcaneum Build Link](${t})`),n.push("")),n.push("__ðŸ§¬ Race__"),n.push(`${e.race.name}`),n.push(""),n.push("__ðŸŒŒ Birth Sign__"),n.push(`${e.birthSign.name}`),n.push(""),e.traits.length>0&&(n.push("__ðŸ§  Traits__"),e.traits.forEach(r=>{const i=r.type==="bonus"?" (Late Game)":"";n.push(`**${r.name}${i}**`)}),n.push("")),n.push("__âœï¸ Religion__"),n.push(`${e.religion.name}`),e.religion.tenets&&n.push(`â€¢ **Tenets:** ${e.religion.tenets}`),e.religion.followerBoon&&n.push(`â€¢ **Follower:** ${e.religion.followerBoon}`),e.religion.devoteeBoon&&n.push(`â€¢ **Devotee:** ${e.religion.devoteeBoon}`),n.push(""),n.push("__âœ¨ Favorite Blessing__"),n.push(`${e.favoriteBlessing.name}`),e.favoriteBlessing.source!=="None"&&n.push(`â€¢ **Source:** ${e.favoriteBlessing.source}`),e.favoriteBlessing.effects!=="No effects"&&n.push(`â€¢ **Effects:** ${e.favoriteBlessing.effects}`),n.push(""),n.push(`__âš”ï¸ Attributes (Level ${e.attributes.level})__`);const s=[];if(e.attributes.health>0){const r=`Health: ${e.attributes.health} (${e.attributes.healthLevels} levels)`;s.push(r)}if(e.attributes.stamina>0){const r=`Stamina: ${e.attributes.stamina} (${e.attributes.staminaLevels} levels)`;s.push(r)}if(e.attributes.magicka>0){const r=`Magicka: ${e.attributes.magicka} (${e.attributes.magickaLevels} levels)`;s.push(r)}if(s.length>0?n.push(s.join(", ")):n.push("No attribute points assigned"),n.push(""),n.push("__ðŸ“š Skills__"),e.skills.major.length>0){const r=e.skills.major.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Major:** ${r}`)}if(e.skills.minor.length>0){const r=e.skills.minor.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Minor:** ${r}`)}if(e.skills.other.length>0){const r=e.skills.other.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Other:** ${r}`)}return n.push(""),e.perks.length>0&&(n.push("__ðŸŽ¯ Perks__"),e.perks.forEach(r=>{n.push(`**${r.skillName}:**`),r.perks.forEach(i=>{const o=i.rank&&i.rank>1?` (Rank ${i.rank})`:"";n.push(`â€¢ **${i.name}${o}**`)}),n.push("")})),e.destinyPath.length>0&&(n.push("__ðŸŒŸ Destiny Path__"),e.destinyPath.forEach(r=>{n.push(`**${r.name}**`),r.effects&&n.push(`${r.effects}`),n.push("")})),e.tags.length>0&&(n.push(""),n.push(e.tags.map(r=>`#${r}`).join(" "))),n.join(`
`)}function v$(e,t){const n=[];n.push(`**ðŸ›¡ï¸ Build: ${e.name||"Unnamed Character"}**`),e.notes&&n.push(`*${e.notes}*`),n.push(""),t&&(n.push(`[Arcaneum Build Link](${t})`),n.push("")),n.push("__ðŸ§¬ Race__"),n.push(`${e.race.name}`),n.push(""),n.push("__ðŸŒŒ Birth Sign__"),n.push(`${e.birthSign.name}`),n.push(""),e.traits.length>0&&(n.push("__ðŸ§  Traits__"),e.traits.forEach(r=>{const i=r.type==="bonus"?" (Late Game)":"";n.push(`**${r.name}${i}**`)}),n.push("")),n.push("__âœï¸ Religion__"),n.push(`${e.religion.name}`),e.religion.tenets&&n.push(`â€¢ **Tenets:** ${e.religion.tenets}`),e.religion.followerBoon&&n.push(`â€¢ **Follower:** ${e.religion.followerBoon}`),e.religion.devoteeBoon&&n.push(`â€¢ **Devotee:** ${e.religion.devoteeBoon}`),n.push(""),n.push("__âœ¨ Favorite Blessing__"),n.push(`${e.favoriteBlessing.name}`),e.favoriteBlessing.source!=="None"&&n.push(`â€¢ **Source:** ${e.favoriteBlessing.source}`),e.favoriteBlessing.effects!=="No effects"&&n.push(`â€¢ **Effects:** ${e.favoriteBlessing.effects}`),n.push(""),n.push(`__âš”ï¸ Attributes (Level ${e.attributes.level})__`);const s=[];if(e.attributes.health>0){const r=`Health: ${e.attributes.health} (${e.attributes.healthLevels} levels)`;s.push(r)}if(e.attributes.stamina>0){const r=`Stamina: ${e.attributes.stamina} (${e.attributes.staminaLevels} levels)`;s.push(r)}if(e.attributes.magicka>0){const r=`Magicka: ${e.attributes.magicka} (${e.attributes.magickaLevels} levels)`;s.push(r)}if(s.length>0?n.push(s.join(", ")):n.push("No attribute points assigned"),n.push(""),n.push("__ðŸ“š Skills__"),e.skills.major.length>0){const r=e.skills.major.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Major:** ${r}`)}if(e.skills.minor.length>0){const r=e.skills.minor.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Minor:** ${r}`)}if(e.skills.other.length>0){const r=e.skills.other.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Other:** ${r}`)}return n.push(""),e.perks.length>0&&(n.push("__ðŸŽ¯ Perks__"),e.perks.forEach(r=>{n.push(`**${r.skillName}:**`),r.perks.forEach(i=>{const o=i.rank&&i.rank>1?` (Rank ${i.rank})`:"";n.push(`â€¢ **${i.name}${o}**`)}),n.push("")})),e.destinyPath.length>0&&(n.push("__ðŸŒŸ Destiny Path__"),e.destinyPath.forEach(r=>{n.push(`**${r.name}**`),r.effects&&n.push(`${r.effects}`),n.push("")})),e.tags.length>0&&(n.push(""),n.push(e.tags.map(r=>`#${r}`).join(" "))),n.join(`
`)}async function y$(e){try{await navigator.clipboard.writeText(e)}catch{const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")}catch{throw new Error("Failed to copy to clipboard")}finally{document.body.removeChild(n)}}}function b$({build:e,className:t}){const[n,s]=g.useState(!1),[r,i]=g.useState(null),[o,l]=g.useState(""),[c,u]=g.useState("names"),d=g.useCallback(async f=>{s(!0),i(null),l(""),u(f);try{const m=p$(e),h=window.location.href,v=f==="full"?v$(m,h):x$(m,h);await y$(v),i(f),setTimeout(()=>i(null),2e3)}catch(m){console.error("Discord export failed:",m),l(m instanceof Error?m.message:"Export failed"),setTimeout(()=>l(""),3e3)}finally{s(!1)}},[e]);return a.jsxs("div",{className:F("relative",t),children:[a.jsxs("div",{className:"flex rounded-md border border-input bg-background",children:[a.jsx(U,{variant:n?"ghost":c==="names"?"default":"ghost",size:"sm",onClick:()=>d("names"),disabled:n,className:F("rounded-r-none border-r",c==="names"&&!n&&"bg-primary text-primary-foreground",r==="names"&&"bg-green-600 hover:bg-green-700 text-white",o&&"bg-red-600 hover:bg-red-700 text-white"),title:o||"Export build to Discord format (short form)","aria-label":"Export build to Discord format (short form)",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),a.jsx("span",{className:"ml-2",children:"Exporting..."})]}):r==="names"?a.jsxs(a.Fragment,{children:[a.jsx(Dc,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Copied!"})]}):o?a.jsxs(a.Fragment,{children:[a.jsx(Qo,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Error"})]}):a.jsxs(a.Fragment,{children:[a.jsx(q3,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Export (short form)"})]})}),a.jsx(U,{variant:n?"ghost":c==="full"?"default":"ghost",size:"sm",onClick:()=>d("full"),disabled:n,className:F("rounded-l-none",c==="full"&&!n&&"bg-primary text-primary-foreground",r==="full"&&"bg-green-600 hover:bg-green-700 text-white",o&&"bg-red-600 hover:bg-red-700 text-white"),title:o||"Export build to Discord format (long form)","aria-label":"Export build to Discord format (long form)",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),a.jsx("span",{className:"ml-2",children:"Exporting..."})]}):r==="full"?a.jsxs(a.Fragment,{children:[a.jsx(Dc,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Copied!"})]}):o?a.jsxs(a.Fragment,{children:[a.jsx(Qo,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Error"})]}):a.jsxs(a.Fragment,{children:[a.jsx(b1,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Export (long form)"})]})})]}),o&&a.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-red-100 border border-red-300 rounded text-xs text-red-800 max-w-xs z-50",role:"alert","aria-live":"polite",children:o})]})}function w$({onReset:e,build:t,onOpenGigaPlannerTools:n,className:s}){return a.jsxs("div",{className:`flex flex-wrap gap-2 mb-6 ${s||""}`,children:[a.jsxs(U,{variant:"destructive",size:"sm",className:"text-destructive-foreground cursor-pointer hover:opacity-90",onClick:e,children:[a.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Reset Build"]}),a.jsx(b$,{build:t}),n&&a.jsx(ZP,{onClick:n})]})}function j$({cards:e,className:t="",gap:n=16}){const[s,r]=g.useState(0),i=g.useRef(null);g.useCallback(()=>s<768?1:s<1024?2:s<1280?3:4,[s]),g.useEffect(()=>{const c=()=>{i.current&&r(i.current.offsetWidth)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const o=g.useCallback(()=>{const c=s<768?1:2,u=[];let d=[];return e.forEach((f,m)=>{f.size==="full"?(d.length>0&&(u.push(l(d,c)),d=[]),u.push(a.jsx("div",{id:f.id,style:{width:"100%",marginBottom:`${n}px`},children:f.component},f.id))):d.push(f)}),d.length>0&&u.push(l(d,c)),a.jsx(a.Fragment,{children:u})},[e,s,n]),l=g.useCallback((c,u)=>{var m;const d=Array.from({length:u},()=>[]),f=new Array(u).fill(0);return c.forEach(h=>{let v=0,y=1/0;for(let w=0;w<u;w++)f[w]<y&&(y=f[w],v=w);d[v].push(a.jsx("div",{id:h.id,style:{width:"100%",marginBottom:`${n}px`},children:h.component},h.id)),f[v]+=1}),a.jsx("div",{style:{display:"flex",width:"100%",marginBottom:`${n}px`},children:d.map((h,v)=>a.jsx("div",{style:{width:`calc(${100/u}% - ${n/2}px)`,marginRight:v<u-1?`${n}px`:0},children:h},v))},`group-${(m=c[0])==null?void 0:m.id}`)},[n]);return e.length===0?a.jsx("div",{className:`text-center py-12 ${t}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No build cards to display"})}):a.jsx("div",{ref:i,className:t,children:a.jsx("div",{style:{width:"100%"},children:o()})})}const N$=_l("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Z({className:e,variant:t,...n}){return a.jsx("div",{className:F(N$({variant:t}),e),...n})}const Am={traitLimit:{regular:"text-blue-600",bonus:"text-purple-600",warning:"text-yellow-600",error:"text-red-600"},summaryCard:{primary:"text-primary",secondary:"text-muted-foreground",accent:"text-accent"},backgrounds:{warning:"bg-yellow-50 dark:bg-yellow-950",info:"bg-blue-50 dark:bg-blue-950",error:"bg-red-50 dark:bg-red-950",success:"bg-green-50 dark:bg-green-950"},borders:{warning:"border-yellow-200 dark:border-yellow-800",info:"border-blue-200 dark:border-blue-800",error:"border-red-200 dark:border-red-800",success:"border-green-200 dark:border-green-800"}},$o={card:"p-6 space-y-4",section:"space-y-3",item:"space-y-2"};function S$(e){return Am.traitLimit[e]}function jb(e){return Am.summaryCard[e]}function k$(e){return Am.backgrounds[e]}function HS(e){return Am.borders[e]}function C$({title:e,items:t,layout:n="grid",className:s}){const r=o=>{switch(o){case"race":return a.jsx(ff,{className:"h-4 w-4"});case"birthsign":return a.jsx(qe,{className:"h-4 w-4"});case"religion":return a.jsx(Qs,{className:"h-4 w-4"});case"traits":return a.jsx(S1,{className:"h-4 w-4"});default:return null}},i=()=>{switch(n){case"grid":return"grid grid-cols-2 md:grid-cols-4 gap-4";case"list":return"space-y-3";default:return"grid grid-cols-2 md:grid-cols-4 gap-4"}};return a.jsxs(ce,{className:F($o.card,s),children:[a.jsx(be,{children:a.jsx(_e,{children:e})}),a.jsx(de,{className:F($o.section),children:a.jsx("div",{className:i(),children:t.map((o,l)=>a.jsxs("div",{className:F($o.item,o.className),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.icon||r(o.type),a.jsxs("span",{className:F("font-medium text-sm",jb("primary")),children:[o.label,":"]})]}),a.jsx("div",{className:F("text-sm",jb("secondary")),children:o.value||"Not selected"})]},l))})})]})}function E$(e){return[{label:"Race",value:e.race||"Not selected",type:"race"},{label:"Birth Sign",value:e.stone||"Not selected",type:"birthsign"},{label:"Religion",value:e.religion||"Not selected",type:"religion"},{label:"Traits",value:`${e.traits.regular.length}/${e.traitLimits.regular} starting, ${e.traits.bonus.length}/${e.traitLimits.bonus} late game`,type:"traits"}]}function A$({build:e,title:t="Build Summary",layout:n="grid",className:s}){const r=E$(e);return a.jsx(C$,{title:t,items:r,layout:n,className:s})}function T$({open:e,title:t,message:n,variant:s="warning",confirmText:r="Confirm",cancelText:i="Cancel",onConfirm:o,onCancel:l,className:c}){if(!e)return null;const u=()=>{switch(s){case"warning":return a.jsx(Ei,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"});case"info":return a.jsx(el,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"});case"error":return a.jsx(g3,{className:"h-5 w-5 text-red-600 dark:text-red-400"});case"success":return a.jsx(zc,{className:"h-5 w-5 text-green-600 dark:text-green-400"});default:return a.jsx(Ei,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}},d=()=>{switch(s){case"error":return"destructive";case"success":return"default";default:return"default"}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:a.jsxs("div",{className:F("bg-white dark:bg-zinc-900 rounded-lg shadow-lg p-6 w-full max-w-xs space-y-4 border",HS(s),c),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[u(),a.jsx("span",{className:"font-semibold",children:t})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(U,{variant:"outline",size:"sm",onClick:l,children:i}),a.jsx(U,{variant:d(),size:"sm",onClick:o,children:r})]})]})})}function _$({open:e,title:t,message:n,variant:s="warning",confirmText:r,cancelText:i,onConfirm:o,onCancel:l,className:c}){return a.jsx(T$,{open:e,title:t,message:n,variant:s,confirmText:r,cancelText:i,onConfirm:o,onCancel:l,className:c})}function M$({open:e,onConfirm:t,onCancel:n}){return a.jsx(_$,{open:e,title:"Reset Build?",message:"This will clear all selections and start a new build. This action cannot be undone.",variant:"warning",confirmText:"Confirm Reset",cancelText:"Cancel",onConfirm:t,onCancel:n})}function R$({title:e,description:t,icon:n,variant:s="default",children:r,className:i}){const o=()=>{if(n)return n;switch(s){case"warning":return a.jsx(Ei,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return a.jsx(el,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});default:return null}};return a.jsxs(ce,{className:F($o.card,i),children:[a.jsxs(be,{children:[a.jsxs(_e,{className:"flex items-center gap-2",children:[o(),e]}),t&&a.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),a.jsx(de,{className:F($o.section),children:r})]})}function Nb({label:e,value:t,onChange:n,min:s=0,max:r=10,currentCount:i,type:o="regular",className:l}){const c=()=>{switch(o){case"regular":return a.jsx(e0,{className:"h-4 w-4"});case"bonus":return a.jsx(qe,{className:"h-4 w-4"});default:return null}},u=()=>S$(o);return a.jsxs("div",{className:F($o.item,l),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c(),a.jsx(Pt,{htmlFor:`${o}-limit`,className:u(),children:e})]}),a.jsx(Dt,{id:`${o}-limit`,type:"number",min:s,max:r,value:t,onChange:d=>n(parseInt(d.target.value)||0),className:"mt-1"}),i!==void 0&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Currently selected: ",i]})]})}function Sb({type:e,title:t,message:n,className:s}){const r=()=>{switch(e){case"warning":return a.jsx(Ei,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return a.jsx(el,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});case"error":return a.jsx(Ei,{className:"h-4 w-4 text-red-600 dark:text-red-400"});case"success":return a.jsx(el,{className:"h-4 w-4 text-green-600 dark:text-green-400"});default:return null}};return a.jsxs("div",{className:F("flex items-start gap-2 p-4 rounded-lg border",k$(e),HS(e),s),children:[r(),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:t}),a.jsx("p",{className:"mt-1",children:n})]})]})}function D$({regularLimit:e,bonusLimit:t,onRegularLimitChange:n,onBonusLimitChange:s,currentRegularCount:r,currentBonusCount:i,className:o}){const l=e!==2||t!==1;return a.jsxs(R$,{title:"Trait Limits Configuration",description:"Configure the number of traits your character can have",icon:a.jsx(el,{className:"h-4 w-4 text-muted-foreground"}),className:o,children:[a.jsx(Sb,{type:"warning",title:"Default configuration is 2 starting + 1 late game traits.",message:"Increasing these limits requires corresponding MCM (Mod Configuration Menu) changes in-game. Make sure your MCM settings match these limits to avoid conflicts."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Nb,{label:"Starting Traits Limit",value:e,onChange:n,min:0,max:10,currentCount:r,type:"regular"}),a.jsx(Nb,{label:"Late Game Traits Limit",value:t,onChange:s,min:0,max:5,currentCount:i,type:"bonus"})]}),l&&a.jsx(Sb,{type:"info",title:`Custom limits detected: ${e} starting + ${t} late game traits.`,message:"Remember to update your MCM settings accordingly."})]})}const L$={magicResist:{name:"Magic Resist",isPercentage:!0,prefactor:1,threshold:150,weights:{health:0,magicka:1,stamina:0},description:"Reduces incoming magical damage",category:"survival"},magickaRegen:{name:"Magicka Regen",isPercentage:!0,prefactor:8,threshold:100,weights:{health:0,magicka:1,stamina:0},description:"Increases magicka regeneration rate",category:"magic"},diseaseResist:{name:"Disease Resist",isPercentage:!0,prefactor:4,threshold:100,weights:{health:.4,magicka:0,stamina:.6},description:"Reduces chance of contracting diseases",category:"survival"},poisonResist:{name:"Poison Resist",isPercentage:!0,prefactor:4,threshold:140,weights:{health:.6,magicka:0,stamina:.4},description:"Reduces poison damage and effects",category:"survival"},staminaRegen:{name:"Stamina Regen",isPercentage:!0,prefactor:8,threshold:100,weights:{health:0,magicka:0,stamina:1},description:"Increases stamina regeneration rate",category:"movement"},moveSpeed:{name:"Move Speed",isPercentage:!0,prefactor:.75,threshold:125,weights:{health:.2,magicka:0,stamina:.8},description:"Increases movement speed",category:"movement"},carryWeight:{name:"Carry Weight",isPercentage:!1,prefactor:4,threshold:110,weights:{health:.8,magicka:0,stamina:.2},description:"Increases maximum carry capacity",category:"survival"},rangedDamage:{name:"Ranged Damage",isPercentage:!0,prefactor:4,threshold:150,weights:{health:.2,magicka:0,stamina:.8},description:"Increases ranged weapon damage",category:"combat"},oneHandDamage:{name:"One-Hand Damage",isPercentage:!0,prefactor:4,threshold:150,weights:{health:.5,magicka:0,stamina:.5},description:"Increases one-handed weapon damage",category:"combat"},twoHandDamage:{name:"Two-Hand Damage",isPercentage:!0,prefactor:4,threshold:150,weights:{health:.8,magicka:0,stamina:.2},description:"Increases two-handed weapon damage",category:"combat"},unarmedDamage:{name:"Unarmed Damage",isPercentage:!1,prefactor:4.5,threshold:125,weights:{health:.5,magicka:0,stamina:.5},description:"Increases unarmed combat damage",category:"combat"}};class kb{static calculateBaseAttributes(t,n){let s={health:100,stamina:100,magicka:100};if(t.race&&n.races){const r=n.races.find(i=>i.edid===t.race);r!=null&&r.startingStats&&(s={health:r.startingStats.health||100,stamina:r.startingStats.stamina||100,magicka:r.startingStats.magicka||100})}return s.health+=t.attributeAssignments.health||0,s.stamina+=t.attributeAssignments.stamina||0,s.magicka+=t.attributeAssignments.magicka||0,s}static calculateDerivedStat(t,n){const s=t.health*n.weights.health+t.magicka*n.weights.magicka+t.stamina*n.weights.stamina;if(s>n.threshold){const r=n.prefactor*Math.sqrt(s-n.threshold);return Math.floor(r)}return 0}static calculateAllDerivedStats(t,n){return Object.entries(n).map(([s,r])=>({name:r.name,value:this.calculateDerivedStat(t,r),isPercentage:r.isPercentage,formula:`${r.prefactor} * sqrt(weightedSum - ${r.threshold})`,description:r.description,category:r.category}))}static validateBaseAttributes(t){return t.health>=0&&t.stamina>=0&&t.magicka>=0&&t.health<=1e3&&t.stamina<=1e3&&t.magicka<=1e3}static getCalculationBreakdown(t,n){const s=t.health*n.weights.health+t.magicka*n.weights.magicka+t.stamina*n.weights.stamina,r=s-n.threshold,i=r>0?Math.floor(n.prefactor*Math.sqrt(r)):0;return{weightedSum:s,threshold:n.threshold,difference:r,prefactor:n.prefactor,result:i}}}function z$(){const{build:e}=Xe(),{data:t}=ks();return g.useMemo(()=>{var o,l,c;const s={races:t},r=kb.calculateBaseAttributes(e,s),i=kb.calculateAllDerivedStats(r,L$);return{baseAttributes:r,derivedStats:i,sources:{race:e.race||"None",birthsign:e.stone||"None",traits:[...((o=e.traits)==null?void 0:o.regular)||[],...((l=e.traits)==null?void 0:l.bonus)||[]],equipment:e.equipment||[],religion:e.religion||"None",destinyPath:e.destinyPath||[],attributeAssignments:((c=e.attributeAssignments)==null?void 0:c.level)||0}}},[e,t])}function P$(){const{build:e,setAttributeAssignment:t,clearAttributeAssignment:n,clearAllAttributeAssignments:s,updateAttributeLevel:r}=yr(),{data:i}=ks(),o=e.attributeAssignments,l=g.useMemo(()=>!e.race||i.length===0?null:i.find(v=>v.edid===e.race)||null,[e.race,i]),c=g.useMemo(()=>l!=null&&l.startingStats?{health:l.startingStats.health,stamina:l.startingStats.stamina,magicka:l.startingStats.magicka}:{health:100,stamina:100,magicka:100},[l]),u=g.useMemo(()=>{o.level;const v=o.health+o.stamina+o.magicka;return{health:{base:c.health,assigned:o.health,total:c.health+o.health,ratio:v>0?o.health/v*100:0},stamina:{base:c.stamina,assigned:o.stamina,total:c.stamina+o.stamina,ratio:v>0?o.stamina/v*100:0},magicka:{base:c.magicka,assigned:o.magicka,total:c.magicka+o.magicka,ratio:v>0?o.magicka/v*100:0}}},[o,c]),d=v=>v>0&&v<=o.level,f=v=>o.assignments[v]||null,m=()=>o.health+o.stamina+o.magicka,h=()=>{const v=Object.keys(o.assignments).map(Number),y=[];for(let w=2;w<=o.level;w++)v.includes(w)||y.push(w);return y};return{assignments:o,displayData:u,level:o.level,selectedRace:l,baseStats:c,setAttributeAssignment:t,clearAttributeAssignment:n,clearAllAttributeAssignments:s,updateAttributeLevel:r,canAssignAtLevel:d,getAssignmentAtLevel:f,getTotalAssignments:m,getUnassignedLevels:h}}const US=g.createContext(void 0);function $$({children:e}){const[t,n]=g.useState("system"),[s,r]=g.useState("dark"),[i,o]=g.useState(!1);return g.useEffect(()=>{const l=localStorage.getItem("theme");l&&["light","dark","system"].includes(l)&&n(l),o(!0)},[]),g.useEffect(()=>{i&&localStorage.setItem("theme",t);let l;t==="system"?l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":l=t,r(l);const c=document.documentElement;l==="dark"?c.classList.add("dark"):c.classList.remove("dark")},[t,i]),g.useEffect(()=>{const l=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>{if(t==="system"){const u=l.matches?"dark":"light";r(u);const d=document.documentElement;u==="dark"?d.classList.add("dark"):d.classList.remove("dark")}};return l.addEventListener("change",c),()=>l.removeEventListener("change",c)},[t]),a.jsx(US.Provider,{value:{theme:t,setTheme:n,resolvedTheme:s},children:e})}function VS(){const e=g.useContext(US);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const O$=_l("",{variants:{variant:{h1:"scroll-m-20 text-5xl font-black tracking-tight text-balance lg:text-6xl",h2:"scroll-m-20 border-b pb-3 text-4xl font-bold tracking-tight first:mt-0 lg:text-5xl",h3:"scroll-m-20 text-3xl font-bold tracking-tight lg:text-4xl",h4:"scroll-m-20 text-2xl font-bold tracking-tight lg:text-3xl",h5:"scroll-m-20 text-xl font-bold tracking-tight lg:text-2xl",h6:"scroll-m-20 text-lg font-bold tracking-tight lg:text-xl",p:"text-lg leading-8 [&:not(:first-child)]:mt-6",blockquote:"mt-6 border-l-4 pl-6 italic text-lg",code:"bg-muted relative rounded px-[0.4rem] py-[0.3rem] font-mono text-base font-bold",lead:"text-muted-foreground text-2xl leading-8",large:"text-xl font-bold",small:"text-base font-semibold leading-none",muted:"text-muted-foreground text-base"}},defaultVariants:{variant:"p"}}),Sn=g.forwardRef(({className:e,variant:t,as:n,...s},r)=>{const i=n||I$(t);return a.jsx(i,{className:F(O$({variant:t,className:e})),ref:r,...s})});Sn.displayName="Typography";function I$(e){switch(e){case"h1":return"h1";case"h2":return"h2";case"h3":return"h3";case"h4":return"h4";case"h5":return"h5";case"h6":return"h6";case"blockquote":return"blockquote";case"code":return"code";case"lead":case"large":case"small":case"muted":case"p":default:return"p"}}const qi=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"h1",as:"h1",className:e,ref:n,...t}));qi.displayName="H1";const xa=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"h2",as:"h2",className:e,ref:n,...t}));xa.displayName="H2";const je=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"h3",as:"h3",className:e,ref:n,...t}));je.displayName="H3";const Sa=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"h4",as:"h4",className:e,ref:n,...t}));Sa.displayName="H4";const rn=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"h5",as:"h5",className:e,ref:n,...t}));rn.displayName="H5";const B$=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"h6",as:"h6",className:e,ref:n,...t}));B$.displayName="H6";const ve=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"p",as:"p",className:e,ref:n,...t}));ve.displayName="P";const F$=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"blockquote",as:"blockquote",className:e,ref:n,...t}));F$.displayName="Blockquote";const H$=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"code",as:"code",className:e,ref:n,...t}));H$.displayName="Code";const GS=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"lead",as:"p",className:e,ref:n,...t}));GS.displayName="Lead";const U$=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"large",as:"div",className:e,ref:n,...t}));U$.displayName="Large";const Fs=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"small",as:"small",className:e,ref:n,...t}));Fs.displayName="Small";const Oc=g.forwardRef(({className:e,...t},n)=>a.jsx(Sn,{variant:"muted",as:"p",className:e,ref:n,...t}));Oc.displayName="Muted";function V$({level:e,assignments:t,onAssignmentChange:n,onClearAssignment:s,onClearAll:r,onUpdateAttributeLevel:i,className:o}){const{resolvedTheme:l}=VS(),c=l==="dark",u=p=>Object.values(t).filter(b=>b===p).length,d=u("health"),f=u("stamina"),m=u("magicka"),h=d+f+m,v=h+1,y=(p,b)=>{const j=u(p),N=b-j;if(N>0)for(let k=0;k<N;k++){const C=Math.max(2,h+2+k);n(C,p)}else if(N<0){for(let k=0;k<Math.abs(N);k++)for(let C=e;C>=2;C--)if(t[C]===p){s(C);break}}const A=h+N;i(A+1)},w=p=>{y(p,u(p)+1)},x=p=>{const b=u(p);b>0&&y(p,b-1)};return a.jsxs("div",{className:F("space-y-4",o),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Attribute Points"}),a.jsx("div",{className:"flex gap-2",children:a.jsxs(U,{variant:"outline",size:"sm",onClick:r,className:"text-xs",children:[a.jsx(Dr,{className:"h-3 w-3 mr-1"}),"Clear All"]})})]}),a.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border",children:[a.jsxs("div",{className:"text-sm text-muted-foreground mb-3",children:["Character Level: ",v," (derived from ",h," ","attribute points)"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border border-red-200 dark:border-red-800",style:{backgroundColor:"hsl(var(--muted) / 0.3)"},children:[a.jsx("div",{className:F("font-medium mb-3",c?"text-red-200":"text-red-500"),children:"Health"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(U,{variant:"outline",size:"sm",onClick:()=>x("health"),disabled:d<=0,className:"h-8 w-8 p-0",children:a.jsx(zo,{className:"h-4 w-4"})}),a.jsx(Dt,{type:"number",value:d,onChange:p=>{const b=parseInt(p.target.value)||0;b>=0&&y("health",b)},className:F("w-16 text-center text-lg font-bold border-red-300 focus:border-red-500 focus:ring-red-500",c?"text-red-300 border-red-600":"text-red-700"),min:0}),a.jsx(U,{variant:"outline",size:"sm",onClick:()=>w("health"),className:"h-8 w-8 p-0",children:a.jsx(Na,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border border-green-200 dark:border-green-800",style:{backgroundColor:"hsl(var(--muted) / 0.3)"},children:[a.jsx("div",{className:F("font-medium mb-3",c?"text-green-200":"text-green-500"),children:"Stamina"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(U,{variant:"outline",size:"sm",onClick:()=>x("stamina"),disabled:f<=0,className:"h-8 w-8 p-0",children:a.jsx(zo,{className:"h-4 w-4"})}),a.jsx(Dt,{type:"number",value:f,onChange:p=>{const b=parseInt(p.target.value)||0;b>=0&&y("stamina",b)},className:F("w-16 text-center text-lg font-bold border-green-300 focus:border-green-500 focus:ring-green-500",c?"text-green-300 border-green-600":"text-green-700"),min:0}),a.jsx(U,{variant:"outline",size:"sm",onClick:()=>w("stamina"),className:"h-8 w-8 p-0",children:a.jsx(Na,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border border-blue-200 dark:border-blue-800",style:{backgroundColor:"hsl(var(--muted) / 0.3)"},children:[a.jsx("div",{className:F("font-medium mb-3",c?"text-blue-200":"text-blue-500"),children:"Magicka"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(U,{variant:"outline",size:"sm",onClick:()=>x("magicka"),disabled:m<=0,className:"h-8 w-8 p-0",children:a.jsx(zo,{className:"h-4 w-4"})}),a.jsx(Dt,{type:"number",value:m,onChange:p=>{const b=parseInt(p.target.value)||0;b>=0&&y("magicka",b)},className:F("w-16 text-center text-lg font-bold border-blue-300 focus:border-blue-500 focus:ring-blue-500",c?"text-blue-300 border-blue-600":"text-blue-700"),min:0}),a.jsx(U,{variant:"outline",size:"sm",onClick:()=>w("magicka"),className:"h-8 w-8 p-0",children:a.jsx(Na,{className:"h-4 w-4"})})]})]})]})]})]})}const G$={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500"},q$={sm:"h-1.5",md:"h-2",lg:"h-3"};function Uh({value:e,label:t,color:n="blue",size:s="md",showValue:r=!0,className:i,maxValue:o}){const l=o?Math.min(e/o*100,100):100;return a.jsxs("div",{className:F("space-y-1",i),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:t}),r&&a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),a.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:F("transition-all duration-300 ease-out",G$[n],q$[s]),style:{width:`${l}%`}})})]})}function Z$({displayData:e,level:t,className:n,showRatios:s=!0,compact:r=!1,selectedRace:i}){return r?a.jsxs("div",{className:F("space-y-3",n),children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),i&&a.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Base stats from ",i.name]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Health"}),a.jsx("div",{className:"font-medium text-lg",children:e.health.total}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.health.assigned]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Stamina"}),a.jsx("div",{className:"font-medium text-lg",children:e.stamina.total}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.stamina.assigned]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Magicka"}),a.jsx("div",{className:"font-medium text-lg",children:e.magicka.total}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.magicka.assigned]})]})]}),s&&a.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Level ",t," â€¢"," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments"]})]}):a.jsxs("div",{className:F("space-y-4",n),children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Uh,{value:e.health.total,label:"Health",color:"red",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),a.jsx(Uh,{value:e.stamina.total,label:"Stamina",color:"green",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),a.jsx(Uh,{value:e.magicka.total,label:"Magicka",color:"blue",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)})]}),s&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Health"}),a.jsxs("div",{className:"text-muted-foreground",children:[e.health.ratio.toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Stamina"}),a.jsxs("div",{className:"text-muted-foreground",children:[e.stamina.ratio.toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Magicka"}),a.jsxs("div",{className:"text-muted-foreground",children:[e.magicka.ratio.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:["Level ",t," â€¢"," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments made"]})]})}function qS({className:e,showControls:t=!0,showSummary:n=!0,compact:s=!1}){const[r,i]=g.useState(!0),{assignments:o,displayData:l,level:c,selectedRace:u,setAttributeAssignment:d,clearAttributeAssignment:f,clearAllAttributeAssignments:m,updateAttributeLevel:h}=P$(),v=z$(),y=(j,N)=>{d(j,N)},w=j=>{f(j)},x=()=>{m()},p=v.derivedStats.reduce((j,N)=>(j[N.category]||(j[N.category]=[]),j[N.category].push(N),j),{}),b=["combat","survival","movement","magic"];return a.jsxs(ce,{className:F("w-full",e),children:[a.jsx(be,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(_e,{className:"flex items-center gap-2",children:[a.jsx(df,{className:"h-5 w-5"}),"Attributes & Derived Stats"]}),t&&a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>i(!r),children:r?a.jsx(Lc,{className:"h-4 w-4"}):a.jsx(Je,{className:"h-4 w-4"})})]})}),a.jsxs(de,{className:"space-y-6",children:[t&&r&&a.jsx(V$,{level:c,assignments:o.assignments,onAssignmentChange:y,onClearAssignment:w,onClearAll:x,onUpdateAttributeLevel:h}),n&&a.jsx(Z$,{displayData:l,level:c,compact:s,selectedRace:u}),n&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"text-lg font-medium text-foreground",children:"Derived Stats"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map(j=>{const N=p[j];return!N||N.length===0?null:a.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[a.jsxs("div",{className:"text-sm font-medium mb-3 capitalize",children:[j," Stats"]}),a.jsx("div",{className:"space-y-2",children:N.map(A=>a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:A.name}),a.jsx("span",{className:"font-medium",children:A.isPercentage?`${A.value}%`:A.value})]},A.name))})]},j)})})]})]})]})}const Ud=new Map;function Y$(){Ud.clear()}Y$();function X$(e,t={}){if(!e)return[];const n=JSON.stringify({text:e,options:t});if(Ud.has(n))return Ud.get(n);let s=[{text:e,key:"0"}];return t.customPatterns&&t.customPatterns.length>0&&t.customPatterns.forEach((r,i)=>{const o=[];s.forEach(l=>{if(l.className)o.push(l);else{let c=0,u;const d=new RegExp(r.pattern,r.pattern.flags.includes("g")?r.pattern.flags:r.pattern.flags+"g");d.lastIndex=0;let f=0;for(;(u=d.exec(l.text))!==null;){u.index>c&&o.push({text:l.text.slice(c,u.index),key:`${l.key}-${f++}`});let m=u[0];const h=typeof r.className=="function"?r.className(u[0]):r.className;r.transform&&(m=r.transform(m)),o.push({text:m,className:h,key:`${l.key}-${f++}`}),c=d.lastIndex}c<l.text.length&&o.push({text:l.text.slice(c),key:`${l.key}-${f++}`})}}),s=o}),s=s.map((r,i)=>({...r,key:r.key||String(i)})),Ud.set(n,s),s}const W$=["health","magicka","stamina","health regeneration","magicka regeneration","stamina regeneration"],K$=["one-handed","two-handed","archery","block","heavy armor","light armor","smithing","alchemy"];function v0(){return{highlightBrackets:!0,highlightAttributes:!0,highlightSkills:!0,highlightNumbers:!0,customPatterns:[{pattern:/\*\*\*([^*]+)\*\*\*/g,className:e=>{const n=e.slice(3,-3).match(/[+-]?\d+(?:\.\d+)?%?/);if(n){const s=parseFloat(n[0]),r=n[0].startsWith("+")||s>0,i=n[0].startsWith("-")||s<0;if(r)return"font-bold text-green-600 bg-skyrim-gold/10 px-1 py-0.5 rounded";if(i)return"font-bold text-red-600 bg-skyrim-gold/10 px-1 py-0.5 rounded"}return"font-bold text-skyrim-gold bg-skyrim-gold/10 px-1 py-0.5 rounded"},transform:e=>e.slice(3,-3)},{pattern:/<([^>]+)>/g,className:e=>{const t=e.slice(1,-1);if(!/^\d+$/.test(t))return"text-foreground"},transform:e=>{const t=e.match(/<([^>]+)>/);return t?t[1]:e.slice(1,-1)}},{pattern:/[+-]?\d+(?:\.\d+)?%?/g,className:e=>{const t=parseFloat(e),n=e.startsWith("+")||t>0,s=e.startsWith("-")||t<0,r=t===0;return n?"font-bold text-green-600":s?"font-bold text-red-600":r?"font-bold text-skyrim-gold":"font-bold text-green-600"}},{pattern:new RegExp(`\\b(${W$.join("|")})\\b`,"gi"),className:"font-semibold text-primary"},{pattern:new RegExp(`\\b(${K$.join("|")})\\b`,"gi"),className:"font-semibold text-primary"}]}}function Le({text:e,options:t,className:n="text-sm text-muted-foreground",as:s="div"}){const r=g.useMemo(()=>v0(),[]),i=g.useMemo(()=>e?X$(e,t||r):[],[e,t,r]);if(!e)return null;if(n.includes("line-clamp")){const l=n.match(/line-clamp-\d+/g)||[],c=n.replace(/line-clamp-\d+/g,"").trim(),u=s==="p"?"span":"div";return a.jsx(s,{className:c,children:a.jsx(u,{className:`${l.join(" ")} overflow-hidden`,children:i.map(d=>a.jsx("span",{className:d.className,children:d.text},d.key))})})}return a.jsx(s,{className:n,children:i.map(l=>a.jsx("span",{className:l.className,children:l.text},l.key))})}const Yt=({children:e,title:t,description:n,className:s=""})=>a.jsxs("div",{className:`container mx-auto p-6 space-y-6 ${s}`,children:[t&&a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:t}),n&&a.jsx(Le,{text:n,className:"text-muted-foreground mt-2 max-w-4xl",as:"p"})]})}),e]});function y0(e){const t=e+"CollectionProvider",[n,s]=Vn(t),[r,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:x}=y,p=P.useRef(null),b=P.useRef(new Map).current;return a.jsx(r,{scope:w,itemMap:b,collectionRef:p,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=tl(l),u=P.forwardRef((y,w)=>{const{scope:x,children:p}=y,b=i(l,x),j=Be(w,b.collectionRef);return a.jsx(c,{ref:j,children:p})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",m=tl(d),h=P.forwardRef((y,w)=>{const{scope:x,children:p,...b}=y,j=P.useRef(null),N=Be(w,j),A=i(d,x);return P.useEffect(()=>(A.itemMap.set(j,{ref:j,...b}),()=>void A.itemMap.delete(j))),a.jsx(m,{[f]:"",ref:N,children:p})});h.displayName=d;function v(y){const w=i(e+"CollectionConsumer",y);return P.useCallback(()=>{const p=w.collectionRef.current;if(!p)return[];const b=Array.from(p.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((A,k)=>b.indexOf(A.ref.current)-b.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:h},v,s]}var Q$=g.createContext(void 0);function wu(e){const t=g.useContext(Q$);return e||t||"ltr"}var Vh="rovingFocusGroup.onEntryFocus",J$={bubbles:!1,cancelable:!0},ju="RovingFocusGroup",[fp,ZS,eO]=y0(ju),[tO,Tm]=Vn(ju,[eO]),[nO,sO]=tO(ju),YS=g.forwardRef((e,t)=>a.jsx(fp.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(fp.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(rO,{...e,ref:t})})}));YS.displayName=ju;var rO=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,m=g.useRef(null),h=Be(t,m),v=wu(i),[y,w]=qr({prop:o,defaultProp:l??null,onChange:c,caller:ju}),[x,p]=g.useState(!1),b=Jt(u),j=ZS(n),N=g.useRef(!1),[A,k]=g.useState(0);return g.useEffect(()=>{const C=m.current;if(C)return C.addEventListener(Vh,b),()=>C.removeEventListener(Vh,b)},[b]),a.jsx(nO,{scope:n,orientation:s,dir:v,loop:r,currentTabStopId:y,onItemFocus:g.useCallback(C=>w(C),[w]),onItemShiftTab:g.useCallback(()=>p(!0),[]),onFocusableItemAdd:g.useCallback(()=>k(C=>C+1),[]),onFocusableItemRemove:g.useCallback(()=>k(C=>C-1),[]),children:a.jsx(we.div,{tabIndex:x||A===0?-1:0,"data-orientation":s,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:se(e.onMouseDown,()=>{N.current=!0}),onFocus:se(e.onFocus,C=>{const S=!N.current;if(C.target===C.currentTarget&&S&&!x){const E=new CustomEvent(Vh,J$);if(C.currentTarget.dispatchEvent(E),!E.defaultPrevented){const T=j().filter(L=>L.focusable),z=T.find(L=>L.active),R=T.find(L=>L.id===y),$=[z,R,...T].filter(Boolean).map(L=>L.ref.current);KS($,d)}}N.current=!1}),onBlur:se(e.onBlur,()=>p(!1))})})}),XS="RovingFocusGroupItem",WS=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:i,children:o,...l}=e,c=Tr(),u=i||c,d=sO(XS,n),f=d.currentTabStopId===u,m=ZS(n),{onFocusableItemAdd:h,onFocusableItemRemove:v,currentTabStopId:y}=d;return g.useEffect(()=>{if(s)return h(),()=>v()},[s,h,v]),a.jsx(fp.ItemSlot,{scope:n,id:u,focusable:s,active:r,children:a.jsx(we.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:se(e.onMouseDown,w=>{s?d.onItemFocus(u):w.preventDefault()}),onFocus:se(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:se(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=oO(w,d.orientation,d.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=m().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const j=b.indexOf(w.currentTarget);b=d.loop?lO(b,j+1):b.slice(j+1)}setTimeout(()=>KS(b))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:y!=null}):o})})});WS.displayName=XS;var aO={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iO(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oO(e,t,n){const s=iO(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return aO[s]}function KS(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function lO(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var QS=YS,JS=WS,_m="Tabs",[cO,cse]=Vn(_m,[Tm]),e2=Tm(),[uO,b0]=cO(_m),t2=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=wu(l),[f,m]=qr({prop:s,onChange:r,defaultProp:i??"",caller:_m});return a.jsx(uO,{scope:n,baseId:Tr(),value:f,onValueChange:m,orientation:o,dir:d,activationMode:c,children:a.jsx(we.div,{dir:d,"data-orientation":o,...u,ref:t})})});t2.displayName=_m;var n2="TabsList",s2=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...r}=e,i=b0(n2,n),o=e2(n);return a.jsx(QS,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:a.jsx(we.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});s2.displayName=n2;var r2="TabsTrigger",a2=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...i}=e,o=b0(r2,n),l=e2(n),c=l2(o.baseId,s),u=c2(o.baseId,s),d=s===o.value;return a.jsx(JS,{asChild:!0,...l,focusable:!r,active:d,children:a.jsx(we.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...i,ref:t,onMouseDown:se(e.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?o.onValueChange(s):f.preventDefault()}),onKeyDown:se(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(s)}),onFocus:se(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!r&&f&&o.onValueChange(s)})})})});a2.displayName=r2;var i2="TabsContent",o2=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:r,children:i,...o}=e,l=b0(i2,n),c=l2(l.baseId,s),u=c2(l.baseId,s),d=s===l.value,f=g.useRef(d);return g.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(Kt,{present:r||d,children:({present:m})=>a.jsx(we.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});o2.displayName=i2;function l2(e,t){return`${e}-trigger-${t}`}function c2(e,t){return`${e}-content-${t}`}var dO=t2,fO=s2,mO=a2,hO=o2;function qa({className:e,...t}){return a.jsx(dO,{"data-slot":"tabs",className:F("flex flex-col gap-2",e),...t})}function Za({className:e,...t}){return a.jsx(fO,{"data-slot":"tabs-list",className:F("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function It({className:e,...t}){return a.jsx(mO,{"data-slot":"tabs-trigger",className:F("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Zt({className:e,...t}){return a.jsx(hO,{"data-slot":"tabs-content",className:F("flex-1 outline-none",e),...t})}const pn=[{label:"Build",value:"build",to:"/build"},{label:"Race",value:"race",to:"/build/race"},{label:"Birth Signs",value:"birth-signs",to:"/build/birth-signs"},{label:"Traits",value:"traits",to:"/build/traits"},{label:"Religion",value:"religions",to:"/build/religions"},{label:"Destiny",value:"destiny",to:"/build/destiny"},{label:"Perks",value:"perks",to:"/build/perks"}],gO=({currentPath:e})=>{var f;const t=lt(),n=m=>{const h=window.location.hash,[v,y]=h.split("?"),x=new URLSearchParams(y||"").get("b");t(x?`${m}?b=${x}`:m)},s=pn.findIndex(m=>m.to===e),r=s>=0?s:0,i=m=>{const h=pn.find(v=>v.value===m);h&&n(h.to)},o=m=>{n(m.to)},l=()=>{r>0&&n(pn[r-1].to)},c=()=>{r<pn.length-1&&n(pn[r+1].to)},u=m=>{switch(m.key){case"ArrowLeft":m.preventDefault(),l();break;case"ArrowRight":m.preventDefault(),c();break;case"Home":m.preventDefault(),n(pn[0].to);break;case"End":m.preventDefault(),n(pn[pn.length-1].to);break}},d=((f=pn[r])==null?void 0:f.value)||"build";return a.jsx("div",{className:"bg-background border-b border-border shadow-sm sticky top-12 backdrop-blur-sm",style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},role:"navigation","aria-label":"Character build progress",onKeyDown:u,tabIndex:0,children:a.jsx("div",{style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx(U,{onClick:l,disabled:r===0,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to previous step: ${r>0?pn[r-1].label:"none"}`,children:a.jsx(xm,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx(qa,{value:d,onValueChange:i,children:a.jsx(Za,{className:"flex w-full h-auto p-1 bg-muted relative",style:{backgroundColor:"hsl(var(--muted))",backgroundImage:"none"},role:"tablist","aria-label":"Character build steps",children:pn.map((m,h)=>a.jsxs(It,{value:m.value,onClick:()=>o(m),className:F("inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-xs font-medium whitespace-nowrap transition-[color,box-shadow] relative","data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm","dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30","text-foreground dark:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","cursor-pointer select-none"),style:{backgroundColor:d===m.value?"hsl(var(--background))":"transparent",backgroundImage:"none"},title:`Step ${h+1}: ${m.label}`,role:"tab","aria-selected":d===m.value,"aria-label":`Step ${h+1}: ${m.label}`,children:[a.jsx("span",{className:"hidden sm:inline",children:m.label}),a.jsx("span",{className:"sm:hidden",children:m.label.split(" ")[0]}),d===m.value&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-skyrim-gold rounded-b-md transition-all duration-200"})]},m.value))})})}),a.jsx(U,{onClick:c,disabled:r===pn.length-1,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to next step: ${r<pn.length-1?pn[r+1].label:"none"}`,children:a.jsx(Cl,{className:"h-4 w-4"})})]})})})},pO=()=>{const e=Gr();return a.jsxs("div",{className:"flex flex-col min-h-full",children:[a.jsx(gO,{currentPath:e.pathname}),a.jsx("div",{className:"flex-grow",children:a.jsx(D5,{})})]})};function xO(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function u2(e){const[t,n]=g.useState(void 0);return Ws(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var Mm="Switch",[vO,use]=Vn(Mm),[yO,bO]=vO(Mm),d2=g.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:r,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[m,h]=g.useState(null),v=Be(t,b=>h(b)),y=g.useRef(!1),w=m?d||!!m.closest("form"):!0,[x,p]=qr({prop:r,defaultProp:i??!1,onChange:u,caller:Mm});return a.jsxs(yO,{scope:n,checked:x,disabled:l,children:[a.jsx(we.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":g2(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onClick:se(e.onClick,b=>{p(j=>!j),w&&(y.current=b.isPropagationStopped(),y.current||b.stopPropagation())})}),w&&a.jsx(h2,{control:m,bubbles:!y.current,name:s,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});d2.displayName=Mm;var f2="SwitchThumb",m2=g.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,r=bO(f2,n);return a.jsx(we.span,{"data-state":g2(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t})});m2.displayName=f2;var wO="SwitchBubbleInput",h2=g.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...r},i)=>{const o=g.useRef(null),l=Be(o,i),c=xO(n),u=u2(t);return g.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&h){const v=new Event("click",{bubbles:s});h.call(d,n),d.dispatchEvent(v)}},[c,n,s]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:l,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});h2.displayName=wO;function g2(e){return e?"checked":"unchecked"}var p2=d2,jO=m2;const x2=g.forwardRef(({className:e,...t},n)=>a.jsx(p2,{className:F("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-black data-[state=unchecked]:bg-gray-300",e),...t,ref:n,children:a.jsx(jO,{className:F("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-sm ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));x2.displayName=p2.displayName;function ds({itemId:e,itemType:t,itemName:n,isInBuild:s=!1,className:r,onCheckedChange:i}){const{setRace:o,setStone:l,setReligion:c,setFavoriteBlessing:u,addRegularTrait:d,addBonusTrait:f,removeTrait:m,addMajorSkill:h,removeMajorSkill:v,removeMinorSkill:y,addEquipment:w,removeEquipment:x,build:p}=Xe(),j=s||(()=>{switch(t){case"race":return p.race===e;case"stone":return p.stone===e;case"religion":return p.religion===e;case"blessing":return p.favoriteBlessing===e;case"trait":return p.traits.regular.includes(e)||p.traits.bonus.includes(e);case"skill":return p.skills.major.includes(e)||p.skills.minor.includes(e);case"equipment":return p.equipment.includes(e);default:return!1}})(),N=k=>{if(i){i(k);return}switch(t){case"race":o(k?e:null);break;case"stone":l(k?e:null);break;case"religion":c(k?e:null);break;case"blessing":u(k?e:null);break;case"trait":k?p.traits.regular.length<2?d(e):p.traits.bonus.length<1&&f(e):m(e);break;case"skill":k?h(e):(v(e),y(e));break;case"equipment":k?w(e):x(e);break}},A=()=>j?`This ${t} is currently in your build`:`Add this ${t} to your character build`;return a.jsx("div",{className:F("flex items-center justify-center p-2 rounded-lg border transition-all duration-200 cursor-pointer hover:bg-muted/50",j?"border-[#d4af37] bg-[#d4af37]/20 shadow-md":"border-border",r),onClick:k=>{k.stopPropagation(),N(!j)},title:A(),children:a.jsx(x2,{checked:j,onCheckedChange:N,className:F("transition-all duration-200",j?"data-[state=checked]:bg-[#d4af37]":"")})})}function hi({categories:e,onSelect:t,placeholder:n="Search categories...",className:s=""}){const[r,i]=g.useState(!1),[o,l]=g.useState(null),[c,u]=g.useState(""),[d,f]=g.useState(-1),m=g.useRef(null),h=g.useRef(null),v=e.length===1?e[0]:null;g.useEffect(()=>{const k=C=>{m.current&&!m.current.contains(C.target)&&(i(!1),l(null),f(-1))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const y=o||v?(o||v).options.filter(k=>String(k.label||"").toLowerCase().includes(c.toLowerCase())||String(k.description||"").toLowerCase().includes(c.toLowerCase())):e.flatMap(k=>k.options.filter(C=>String(C.label||"").toLowerCase().includes(c.toLowerCase())||String(C.description||"").toLowerCase().includes(c.toLowerCase()))),w=k=>{u(k),i(!0),f(-1)},x=k=>{var C;l(k),u(""),(C=h.current)==null||C.focus()},p=k=>{t(k),u(""),l(null),i(!1),f(-1)},b=k=>{k.key==="ArrowDown"?(k.preventDefault(),f(C=>Math.min(C+1,y.length-1))):k.key==="ArrowUp"?(k.preventDefault(),f(C=>Math.max(C-1,-1))):k.key==="Enter"?(k.preventDefault(),d>=0&&y[d]&&p(y[d])):k.key==="Escape"&&(i(!1),l(null),f(-1))},j=()=>{i(!0)},N=o||v,A=!v&&!o;return a.jsxs("div",{ref:m,className:`relative ${s}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Dt,{ref:h,type:"text",placeholder:N?N.placeholder:n,value:c,onChange:k=>w(k.target.value),onFocus:j,onKeyDown:b,className:"pl-10 pr-10"}),a.jsx(U,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>i(!r),children:a.jsx(Je,{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`})})]}),r&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",style:{zIndex:Nt.AUTOCOMPLETE+10},children:[A&&a.jsxs("div",{className:"p-2 border-b border-border",children:[a.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(k=>a.jsxs("button",{onClick:()=>x(k),className:"w-full text-left px-2 py-2 hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98] rounded text-sm flex items-center justify-between transition-all duration-200 cursor-pointer",children:[a.jsx("span",{children:k.name}),a.jsx(Je,{className:"h-4 w-4"})]},k.id))]}),a.jsx("div",{className:"p-2",children:y.length===0?a.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):y.map((k,C)=>a.jsxs("button",{onClick:()=>p(k),className:`w-full text-left px-2 py-2 rounded text-sm transition-all duration-200 cursor-pointer ${C===d?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"}`,children:[a.jsx("div",{className:"font-medium",children:k.label||"Unnamed Option"}),k.description&&a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:k.description})]},k.id))})]})]})}const NO=["top","right","bottom","left"],za=Math.min,Mn=Math.max,gf=Math.round,ld=Math.floor,Gs=e=>({x:e,y:e}),SO={left:"right",right:"left",bottom:"top",top:"bottom"},kO={start:"end",end:"start"};function mp(e,t,n){return Mn(e,za(t,n))}function zr(e,t){return typeof e=="function"?e(t):e}function Pr(e){return e.split("-")[0]}function zl(e){return e.split("-")[1]}function w0(e){return e==="x"?"y":"x"}function j0(e){return e==="y"?"height":"width"}const CO=new Set(["top","bottom"]);function Hs(e){return CO.has(Pr(e))?"y":"x"}function N0(e){return w0(Hs(e))}function EO(e,t,n){n===void 0&&(n=!1);const s=zl(e),r=N0(e),i=j0(r);let o=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=pf(o)),[o,pf(o)]}function AO(e){const t=pf(e);return[hp(e),t,hp(t)]}function hp(e){return e.replace(/start|end/g,t=>kO[t])}const Cb=["left","right"],Eb=["right","left"],TO=["top","bottom"],_O=["bottom","top"];function MO(e,t,n){switch(e){case"top":case"bottom":return n?t?Eb:Cb:t?Cb:Eb;case"left":case"right":return t?TO:_O;default:return[]}}function RO(e,t,n,s){const r=zl(e);let i=MO(Pr(e),n==="start",s);return r&&(i=i.map(o=>o+"-"+r),t&&(i=i.concat(i.map(hp)))),i}function pf(e){return e.replace(/left|right|bottom|top/g,t=>SO[t])}function DO(e){return{top:0,right:0,bottom:0,left:0,...e}}function v2(e){return typeof e!="number"?DO(e):{top:e,right:e,bottom:e,left:e}}function xf(e){const{x:t,y:n,width:s,height:r}=e;return{width:s,height:r,top:n,left:t,right:t+s,bottom:n+r,x:t,y:n}}function Ab(e,t,n){let{reference:s,floating:r}=e;const i=Hs(t),o=N0(t),l=j0(o),c=Pr(t),u=i==="y",d=s.x+s.width/2-r.width/2,f=s.y+s.height/2-r.height/2,m=s[l]/2-r[l]/2;let h;switch(c){case"top":h={x:d,y:s.y-r.height};break;case"bottom":h={x:d,y:s.y+s.height};break;case"right":h={x:s.x+s.width,y:f};break;case"left":h={x:s.x-r.width,y:f};break;default:h={x:s.x,y:s.y}}switch(zl(t)){case"start":h[o]-=m*(n&&u?-1:1);break;case"end":h[o]+=m*(n&&u?-1:1);break}return h}const LO=async(e,t,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:f}=Ab(u,s,c),m=s,h={},v=0;for(let y=0;y<l.length;y++){const{name:w,fn:x}=l[y],{x:p,y:b,data:j,reset:N}=await x({x:d,y:f,initialPlacement:s,placement:m,strategy:r,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});d=p??d,f=b??f,h={...h,[w]:{...h[w],...j}},N&&v<=50&&(v++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(u=N.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:r}):N.rects),{x:d,y:f}=Ab(u,m,c)),y=-1)}return{x:d,y:f,placement:m,strategy:r,middlewareData:h}};async function Ic(e,t){var n;t===void 0&&(t={});const{x:s,y:r,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:h=0}=zr(t,e),v=v2(h),w=l[m?f==="floating"?"reference":"floating":f],x=xf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),p=f==="floating"?{x:s,y:r,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},N=xf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:p,offsetParent:b,strategy:c}):p);return{top:(x.top-N.top+v.top)/j.y,bottom:(N.bottom-x.bottom+v.bottom)/j.y,left:(x.left-N.left+v.left)/j.x,right:(N.right-x.right+v.right)/j.x}}const zO=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:r,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=zr(e,t)||{};if(u==null)return{};const f=v2(d),m={x:n,y:s},h=N0(r),v=j0(h),y=await o.getDimensions(u),w=h==="y",x=w?"top":"left",p=w?"bottom":"right",b=w?"clientHeight":"clientWidth",j=i.reference[v]+i.reference[h]-m[h]-i.floating[v],N=m[h]-i.reference[h],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=A?A[b]:0;(!k||!await(o.isElement==null?void 0:o.isElement(A)))&&(k=l.floating[b]||i.floating[v]);const C=j/2-N/2,S=k/2-y[v]/2-1,E=za(f[x],S),T=za(f[p],S),z=E,R=k-y[v]-T,_=k/2-y[v]/2+C,$=mp(z,_,R),L=!c.arrow&&zl(r)!=null&&_!==$&&i.reference[v]/2-(_<z?E:T)-y[v]/2<0,O=L?_<z?_-z:_-R:0;return{[h]:m[h]+O,data:{[h]:$,centerOffset:_-$-O,...L&&{alignmentOffset:O}},reset:L}}}),PO=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...w}=zr(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Pr(r),p=Hs(l),b=Pr(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=m||(b||!y?[pf(l)]:AO(l)),A=v!=="none";!m&&A&&N.push(...RO(l,y,v,j));const k=[l,...N],C=await Ic(t,w),S=[];let E=((s=i.flip)==null?void 0:s.overflows)||[];if(d&&S.push(C[x]),f){const _=EO(r,o,j);S.push(C[_[0]],C[_[1]])}if(E=[...E,{placement:r,overflows:S}],!S.every(_=>_<=0)){var T,z;const _=(((T=i.flip)==null?void 0:T.index)||0)+1,$=k[_];if($&&(!(f==="alignment"?p!==Hs($):!1)||E.every(D=>D.overflows[0]>0&&Hs(D.placement)===p)))return{data:{index:_,overflows:E},reset:{placement:$}};let L=(z=E.filter(O=>O.overflows[0]<=0).sort((O,D)=>O.overflows[1]-D.overflows[1])[0])==null?void 0:z.placement;if(!L)switch(h){case"bestFit":{var R;const O=(R=E.filter(D=>{if(A){const M=Hs(D.placement);return M===p||M==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(M=>M>0).reduce((M,I)=>M+I,0)]).sort((D,M)=>D[1]-M[1])[0])==null?void 0:R[0];O&&(L=O);break}case"initialPlacement":L=l;break}if(r!==L)return{reset:{placement:L}}}return{}}}};function Tb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function _b(e){return NO.some(t=>e[t]>=0)}const $O=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...r}=zr(e,t);switch(s){case"referenceHidden":{const i=await Ic(t,{...r,elementContext:"reference"}),o=Tb(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:_b(o)}}}case"escaped":{const i=await Ic(t,{...r,altBoundary:!0}),o=Tb(i,n.floating);return{data:{escapedOffsets:o,escaped:_b(o)}}}default:return{}}}}},y2=new Set(["left","top"]);async function OO(e,t){const{placement:n,platform:s,elements:r}=e,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),o=Pr(n),l=zl(n),c=Hs(n)==="y",u=y2.has(o)?-1:1,d=i&&c?-1:1,f=zr(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof v=="number"&&(h=l==="end"?v*-1:v),c?{x:h*d,y:m*u}:{x:m*u,y:h*d}}const IO=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:r,y:i,placement:o,middlewareData:l}=t,c=await OO(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:o}}}}},BO=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:r}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x,y:p}=w;return{x,y:p}}},...c}=zr(e,t),u={x:n,y:s},d=await Ic(t,c),f=Hs(Pr(r)),m=w0(f);let h=u[m],v=u[f];if(i){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",p=h+d[w],b=h-d[x];h=mp(p,h,b)}if(o){const w=f==="y"?"top":"left",x=f==="y"?"bottom":"right",p=v+d[w],b=v-d[x];v=mp(p,v,b)}const y=l.fn({...t,[m]:h,[f]:v});return{...y,data:{x:y.x-n,y:y.y-s,enabled:{[m]:i,[f]:o}}}}}},FO=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:r,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=zr(e,t),d={x:n,y:s},f=Hs(r),m=w0(f);let h=d[m],v=d[f];const y=zr(l,t),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const b=m==="y"?"height":"width",j=i.reference[m]-i.floating[b]+w.mainAxis,N=i.reference[m]+i.reference[b]-w.mainAxis;h<j?h=j:h>N&&(h=N)}if(u){var x,p;const b=m==="y"?"width":"height",j=y2.has(Pr(r)),N=i.reference[f]-i.floating[b]+(j&&((x=o.offset)==null?void 0:x[f])||0)+(j?0:w.crossAxis),A=i.reference[f]+i.reference[b]+(j?0:((p=o.offset)==null?void 0:p[f])||0)-(j?w.crossAxis:0);v<N?v=N:v>A&&(v=A)}return{[m]:h,[f]:v}}}},HO=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:r,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=zr(e,t),d=await Ic(t,u),f=Pr(r),m=zl(r),h=Hs(r)==="y",{width:v,height:y}=i.floating;let w,x;f==="top"||f==="bottom"?(w=f,x=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,w=m==="end"?"top":"bottom");const p=y-d.top-d.bottom,b=v-d.left-d.right,j=za(y-d[w],p),N=za(v-d[x],b),A=!t.middlewareData.shift;let k=j,C=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=b),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(k=p),A&&!m){const E=Mn(d.left,0),T=Mn(d.right,0),z=Mn(d.top,0),R=Mn(d.bottom,0);h?C=v-2*(E!==0||T!==0?E+T:Mn(d.left,d.right)):k=y-2*(z!==0||R!==0?z+R:Mn(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:k});const S=await o.getDimensions(l.floating);return v!==S.width||y!==S.height?{reset:{rects:!0}}:{}}}};function Rm(){return typeof window<"u"}function Pl(e){return b2(e)?(e.nodeName||"").toLowerCase():"#document"}function zn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function tr(e){var t;return(t=(b2(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function b2(e){return Rm()?e instanceof Node||e instanceof zn(e).Node:!1}function Cs(e){return Rm()?e instanceof Element||e instanceof zn(e).Element:!1}function Ks(e){return Rm()?e instanceof HTMLElement||e instanceof zn(e).HTMLElement:!1}function Mb(e){return!Rm()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof zn(e).ShadowRoot}const UO=new Set(["inline","contents"]);function Nu(e){const{overflow:t,overflowX:n,overflowY:s,display:r}=Es(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!UO.has(r)}const VO=new Set(["table","td","th"]);function GO(e){return VO.has(Pl(e))}const qO=[":popover-open",":modal"];function Dm(e){return qO.some(t=>{try{return e.matches(t)}catch{return!1}})}const ZO=["transform","translate","scale","rotate","perspective"],YO=["transform","translate","scale","rotate","perspective","filter"],XO=["paint","layout","strict","content"];function S0(e){const t=k0(),n=Cs(e)?Es(e):e;return ZO.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||YO.some(s=>(n.willChange||"").includes(s))||XO.some(s=>(n.contain||"").includes(s))}function WO(e){let t=Pa(e);for(;Ks(t)&&!nl(t);){if(S0(t))return t;if(Dm(t))return null;t=Pa(t)}return null}function k0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const KO=new Set(["html","body","#document"]);function nl(e){return KO.has(Pl(e))}function Es(e){return zn(e).getComputedStyle(e)}function Lm(e){return Cs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Pa(e){if(Pl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Mb(e)&&e.host||tr(e);return Mb(t)?t.host:t}function w2(e){const t=Pa(e);return nl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ks(t)&&Nu(t)?t:w2(t)}function Bc(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=w2(e),i=r===((s=e.ownerDocument)==null?void 0:s.body),o=zn(r);if(i){const l=gp(o);return t.concat(o,o.visualViewport||[],Nu(r)?r:[],l&&n?Bc(l):[])}return t.concat(r,Bc(r,[],n))}function gp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function j2(e){const t=Es(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const r=Ks(e),i=r?e.offsetWidth:n,o=r?e.offsetHeight:s,l=gf(n)!==i||gf(s)!==o;return l&&(n=i,s=o),{width:n,height:s,$:l}}function C0(e){return Cs(e)?e:e.contextElement}function Oo(e){const t=C0(e);if(!Ks(t))return Gs(1);const n=t.getBoundingClientRect(),{width:s,height:r,$:i}=j2(t);let o=(i?gf(n.width):n.width)/s,l=(i?gf(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const QO=Gs(0);function N2(e){const t=zn(e);return!k0()||!t.visualViewport?QO:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function JO(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==zn(e)?!1:t}function Ti(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=C0(e);let o=Gs(1);t&&(s?Cs(s)&&(o=Oo(s)):o=Oo(e));const l=JO(i,n,s)?N2(i):Gs(0);let c=(r.left+l.x)/o.x,u=(r.top+l.y)/o.y,d=r.width/o.x,f=r.height/o.y;if(i){const m=zn(i),h=s&&Cs(s)?zn(s):s;let v=m,y=gp(v);for(;y&&s&&h!==v;){const w=Oo(y),x=y.getBoundingClientRect(),p=Es(y),b=x.left+(y.clientLeft+parseFloat(p.paddingLeft))*w.x,j=x.top+(y.clientTop+parseFloat(p.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,f*=w.y,c+=b,u+=j,v=zn(y),y=gp(v)}}return xf({width:d,height:f,x:c,y:u})}function E0(e,t){const n=Lm(e).scrollLeft;return t?t.left+n:Ti(tr(e)).left+n}function S2(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=s.left+t.scrollLeft-(n?0:E0(e,s)),i=s.top+t.scrollTop;return{x:r,y:i}}function e6(e){let{elements:t,rect:n,offsetParent:s,strategy:r}=e;const i=r==="fixed",o=tr(s),l=t?Dm(t.floating):!1;if(s===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Gs(1);const d=Gs(0),f=Ks(s);if((f||!f&&!i)&&((Pl(s)!=="body"||Nu(o))&&(c=Lm(s)),Ks(s))){const h=Ti(s);u=Oo(s),d.x=h.x+s.clientLeft,d.y=h.y+s.clientTop}const m=o&&!f&&!i?S2(o,c,!0):Gs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function t6(e){return Array.from(e.getClientRects())}function n6(e){const t=tr(e),n=Lm(e),s=e.ownerDocument.body,r=Mn(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=Mn(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+E0(e);const l=-n.scrollTop;return Es(s).direction==="rtl"&&(o+=Mn(t.clientWidth,s.clientWidth)-r),{width:r,height:i,x:o,y:l}}function s6(e,t){const n=zn(e),s=tr(e),r=n.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;const u=k0();(!u||u&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l,y:c}}const r6=new Set(["absolute","fixed"]);function a6(e,t){const n=Ti(e,!0,t==="fixed"),s=n.top+e.clientTop,r=n.left+e.clientLeft,i=Ks(e)?Oo(e):Gs(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=r*i.x,u=s*i.y;return{width:o,height:l,x:c,y:u}}function Rb(e,t,n){let s;if(t==="viewport")s=s6(e,n);else if(t==="document")s=n6(tr(e));else if(Cs(t))s=a6(t,n);else{const r=N2(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return xf(s)}function k2(e,t){const n=Pa(e);return n===t||!Cs(n)||nl(n)?!1:Es(n).position==="fixed"||k2(n,t)}function i6(e,t){const n=t.get(e);if(n)return n;let s=Bc(e,[],!1).filter(l=>Cs(l)&&Pl(l)!=="body"),r=null;const i=Es(e).position==="fixed";let o=i?Pa(e):e;for(;Cs(o)&&!nl(o);){const l=Es(o),c=S0(o);!c&&l.position==="fixed"&&(r=null),(i?!c&&!r:!c&&l.position==="static"&&!!r&&r6.has(r.position)||Nu(o)&&!c&&k2(e,o))?s=s.filter(d=>d!==o):r=l,o=Pa(o)}return t.set(e,s),s}function o6(e){let{element:t,boundary:n,rootBoundary:s,strategy:r}=e;const o=[...n==="clippingAncestors"?Dm(t)?[]:i6(t,this._c):[].concat(n),s],l=o[0],c=o.reduce((u,d)=>{const f=Rb(t,d,r);return u.top=Mn(f.top,u.top),u.right=za(f.right,u.right),u.bottom=za(f.bottom,u.bottom),u.left=Mn(f.left,u.left),u},Rb(t,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function l6(e){const{width:t,height:n}=j2(e);return{width:t,height:n}}function c6(e,t,n){const s=Ks(t),r=tr(t),i=n==="fixed",o=Ti(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Gs(0);function u(){c.x=E0(r)}if(s||!s&&!i)if((Pl(t)!=="body"||Nu(r))&&(l=Lm(t)),s){const h=Ti(t,!0,i,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else r&&u();i&&!s&&r&&u();const d=r&&!s&&!i?S2(r,l):Gs(0),f=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:f,y:m,width:o.width,height:o.height}}function Gh(e){return Es(e).position==="static"}function Db(e,t){if(!Ks(e)||Es(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return tr(e)===n&&(n=n.ownerDocument.body),n}function C2(e,t){const n=zn(e);if(Dm(e))return n;if(!Ks(e)){let r=Pa(e);for(;r&&!nl(r);){if(Cs(r)&&!Gh(r))return r;r=Pa(r)}return n}let s=Db(e,t);for(;s&&GO(s)&&Gh(s);)s=Db(s,t);return s&&nl(s)&&Gh(s)&&!S0(s)?n:s||WO(e)||n}const u6=async function(e){const t=this.getOffsetParent||C2,n=this.getDimensions,s=await n(e.floating);return{reference:c6(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function d6(e){return Es(e).direction==="rtl"}const f6={convertOffsetParentRelativeRectToViewportRelativeRect:e6,getDocumentElement:tr,getClippingRect:o6,getOffsetParent:C2,getElementRects:u6,getClientRects:t6,getDimensions:l6,getScale:Oo,isElement:Cs,isRTL:d6};function E2(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function m6(e,t){let n=null,s;const r=tr(e);function i(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:m,height:h}=u;if(l||t(),!m||!h)return;const v=ld(f),y=ld(r.clientWidth-(d+m)),w=ld(r.clientHeight-(f+h)),x=ld(d),b={rootMargin:-v+"px "+-y+"px "+-w+"px "+-x+"px",threshold:Mn(0,za(1,c))||1};let j=!0;function N(A){const k=A[0].intersectionRatio;if(k!==c){if(!j)return o();k?o(!1,k):s=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!E2(u,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(N,{...b,root:r.ownerDocument})}catch{n=new IntersectionObserver(N,b)}n.observe(e)}return o(!0),i}function h6(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=C0(e),d=r||i?[...u?Bc(u):[],...Bc(t)]:[];d.forEach(x=>{r&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const f=u&&l?m6(u,n):null;let m=-1,h=null;o&&(h=new ResizeObserver(x=>{let[p]=x;p&&p.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let v,y=c?Ti(e):null;c&&w();function w(){const x=Ti(e);y&&!E2(y,x)&&n(),y=x,v=requestAnimationFrame(w)}return n(),()=>{var x;d.forEach(p=>{r&&p.removeEventListener("scroll",n),i&&p.removeEventListener("resize",n)}),f==null||f(),(x=h)==null||x.disconnect(),h=null,c&&cancelAnimationFrame(v)}}const g6=IO,p6=BO,x6=PO,v6=HO,y6=$O,Lb=zO,b6=FO,w6=(e,t,n)=>{const s=new Map,r={platform:f6,...n},i={...r.platform,_c:s};return LO(e,t,{...r,platform:i})};var j6=typeof document<"u",N6=function(){},Vd=j6?g.useLayoutEffect:N6;function vf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!vf(e[s],t[s]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i==="_owner"&&e.$$typeof)&&!vf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function A2(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function zb(e,t){const n=A2(e);return Math.round(t*n)/n}function qh(e){const t=g.useRef(e);return Vd(()=>{t.current=e}),t}function S6(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,h]=g.useState(s);vf(m,s)||h(s);const[v,y]=g.useState(null),[w,x]=g.useState(null),p=g.useCallback(D=>{D!==A.current&&(A.current=D,y(D))},[]),b=g.useCallback(D=>{D!==k.current&&(k.current=D,x(D))},[]),j=i||v,N=o||w,A=g.useRef(null),k=g.useRef(null),C=g.useRef(d),S=c!=null,E=qh(c),T=qh(r),z=qh(u),R=g.useCallback(()=>{if(!A.current||!k.current)return;const D={placement:t,strategy:n,middleware:m};T.current&&(D.platform=T.current),w6(A.current,k.current,D).then(M=>{const I={...M,isPositioned:z.current!==!1};_.current&&!vf(C.current,I)&&(C.current=I,wm.flushSync(()=>{f(I)}))})},[m,t,n,T,z]);Vd(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[u]);const _=g.useRef(!1);Vd(()=>(_.current=!0,()=>{_.current=!1}),[]),Vd(()=>{if(j&&(A.current=j),N&&(k.current=N),j&&N){if(E.current)return E.current(j,N,R);R()}},[j,N,R,E,S]);const $=g.useMemo(()=>({reference:A,floating:k,setReference:p,setFloating:b}),[p,b]),L=g.useMemo(()=>({reference:j,floating:N}),[j,N]),O=g.useMemo(()=>{const D={position:n,left:0,top:0};if(!L.floating)return D;const M=zb(L.floating,d.x),I=zb(L.floating,d.y);return l?{...D,transform:"translate("+M+"px, "+I+"px)",...A2(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:I}},[n,l,L.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:R,refs:$,elements:L,floatingStyles:O}),[d,R,$,L,O])}const k6=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:r}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?Lb({element:s.current,padding:r}).fn(n):{}:s?Lb({element:s,padding:r}).fn(n):{}}}},C6=(e,t)=>({...g6(e),options:[e,t]}),E6=(e,t)=>({...p6(e),options:[e,t]}),A6=(e,t)=>({...b6(e),options:[e,t]}),T6=(e,t)=>({...x6(e),options:[e,t]}),_6=(e,t)=>({...v6(e),options:[e,t]}),M6=(e,t)=>({...y6(e),options:[e,t]}),R6=(e,t)=>({...k6(e),options:[e,t]});var D6="Arrow",T2=g.forwardRef((e,t)=>{const{children:n,width:s=10,height:r=5,...i}=e;return a.jsx(we.svg,{...i,ref:t,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});T2.displayName=D6;var L6=T2,A0="Popper",[_2,$l]=Vn(A0),[z6,M2]=_2(A0),R2=e=>{const{__scopePopper:t,children:n}=e,[s,r]=g.useState(null);return a.jsx(z6,{scope:t,anchor:s,onAnchorChange:r,children:n})};R2.displayName=A0;var D2="PopperAnchor",L2=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...r}=e,i=M2(D2,n),o=g.useRef(null),l=Be(t,o);return g.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:a.jsx(we.div,{...r,ref:l})});L2.displayName=D2;var T0="PopperContent",[P6,$6]=_2(T0),z2=g.forwardRef((e,t)=>{var te,xe,me,ye,We,st;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:h="optimized",onPlaced:v,...y}=e,w=M2(T0,n),[x,p]=g.useState(null),b=Be(t,V=>p(V)),[j,N]=g.useState(null),A=u2(j),k=(A==null?void 0:A.width)??0,C=(A==null?void 0:A.height)??0,S=s+(i!=="center"?"-"+i:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},T=Array.isArray(u)?u:[u],z=T.length>0,R={padding:E,boundary:T.filter(I6),altBoundary:z},{refs:_,floatingStyles:$,placement:L,isPositioned:O,middlewareData:D}=S6({strategy:"fixed",placement:S,whileElementsMounted:(...V)=>h6(...V,{animationFrame:h==="always"}),elements:{reference:w.anchor},middleware:[C6({mainAxis:r+C,alignmentAxis:o}),c&&E6({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?A6():void 0,...R}),c&&T6({...R}),_6({...R,apply:({elements:V,rects:G,availableWidth:K,availableHeight:ie})=>{const{width:ne,height:Q}=G.reference,Se=V.floating.style;Se.setProperty("--radix-popper-available-width",`${K}px`),Se.setProperty("--radix-popper-available-height",`${ie}px`),Se.setProperty("--radix-popper-anchor-width",`${ne}px`),Se.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),j&&R6({element:j,padding:l}),B6({arrowWidth:k,arrowHeight:C}),m&&M6({strategy:"referenceHidden",...R})]}),[M,I]=O2(L),B=Jt(v);Ws(()=>{O&&(B==null||B())},[O,B]);const H=(te=D.arrow)==null?void 0:te.x,q=(xe=D.arrow)==null?void 0:xe.y,Y=((me=D.arrow)==null?void 0:me.centerOffset)!==0,[J,le]=g.useState();return Ws(()=>{x&&le(window.getComputedStyle(x).zIndex)},[x]),a.jsx("div",{ref:_.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:O?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(ye=D.transformOrigin)==null?void 0:ye.x,(We=D.transformOrigin)==null?void 0:We.y].join(" "),...((st=D.hide)==null?void 0:st.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(P6,{scope:n,placedSide:M,onArrowChange:N,arrowX:H,arrowY:q,shouldHideArrow:Y,children:a.jsx(we.div,{"data-side":M,"data-align":I,...y,ref:b,style:{...y.style,animation:O?void 0:"none"}})})})});z2.displayName=T0;var P2="PopperArrow",O6={top:"bottom",right:"left",bottom:"top",left:"right"},$2=g.forwardRef(function(t,n){const{__scopePopper:s,...r}=t,i=$6(P2,s),o=O6[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(L6,{...r,ref:n,style:{...r.style,display:"block"}})})});$2.displayName=P2;function I6(e){return e!==null}var B6=e=>({name:"transformOrigin",options:e,fn(t){var w,x,p;const{placement:n,rects:s,middlewareData:r}=t,o=((w=r.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=O2(n),f={start:"0%",center:"50%",end:"100%"}[d],m=(((x=r.arrow)==null?void 0:x.x)??0)+l/2,h=(((p=r.arrow)==null?void 0:p.y)??0)+c/2;let v="",y="";return u==="bottom"?(v=o?f:`${m}px`,y=`${-c}px`):u==="top"?(v=o?f:`${m}px`,y=`${s.floating.height+c}px`):u==="right"?(v=`${-c}px`,y=o?f:`${h}px`):u==="left"&&(v=`${s.floating.width+c}px`,y=o?f:`${h}px`),{data:{x:v,y}}}});function O2(e){const[t,n="center"]=e.split("-");return[t,n]}var I2=R2,_0=L2,M0=z2,R0=$2,pp=["Enter"," "],F6=["ArrowDown","PageUp","Home"],B2=["ArrowUp","PageDown","End"],H6=[...F6,...B2],U6={ltr:[...pp,"ArrowRight"],rtl:[...pp,"ArrowLeft"]},V6={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Su="Menu",[Fc,G6,q6]=y0(Su),[Zi,F2]=Vn(Su,[q6,$l,Tm]),zm=$l(),H2=Tm(),[Z6,Yi]=Zi(Su),[Y6,ku]=Zi(Su),U2=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:r,onOpenChange:i,modal:o=!0}=e,l=zm(t),[c,u]=g.useState(null),d=g.useRef(!1),f=Jt(i),m=wu(r);return g.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),a.jsx(I2,{...l,children:a.jsx(Z6,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:u,children:a.jsx(Y6,{scope:t,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:o,children:s})})})};U2.displayName=Su;var X6="MenuAnchor",D0=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,r=zm(n);return a.jsx(_0,{...r,...s,ref:t})});D0.displayName=X6;var L0="MenuPortal",[W6,V2]=Zi(L0,{forceMount:void 0}),G2=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:r}=e,i=Yi(L0,t);return a.jsx(W6,{scope:t,forceMount:n,children:a.jsx(Kt,{present:n||i.open,children:a.jsx(km,{asChild:!0,container:r,children:s})})})};G2.displayName=L0;var rs="MenuContent",[K6,z0]=Zi(rs),q2=g.forwardRef((e,t)=>{const n=V2(rs,e.__scopeMenu),{forceMount:s=n.forceMount,...r}=e,i=Yi(rs,e.__scopeMenu),o=ku(rs,e.__scopeMenu);return a.jsx(Fc.Provider,{scope:e.__scopeMenu,children:a.jsx(Kt,{present:s||i.open,children:a.jsx(Fc.Slot,{scope:e.__scopeMenu,children:o.modal?a.jsx(Q6,{...r,ref:t}):a.jsx(J6,{...r,ref:t})})})})}),Q6=g.forwardRef((e,t)=>{const n=Yi(rs,e.__scopeMenu),s=g.useRef(null),r=Be(t,s);return g.useEffect(()=>{const i=s.current;if(i)return yS(i)},[]),a.jsx(P0,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:se(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),J6=g.forwardRef((e,t)=>{const n=Yi(rs,e.__scopeMenu);return a.jsx(P0,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),eI=tl("MenuContent.ScrollLock"),P0=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:h,disableOutsideScroll:v,...y}=e,w=Yi(rs,n),x=ku(rs,n),p=zm(n),b=H2(n),j=G6(n),[N,A]=g.useState(null),k=g.useRef(null),C=Be(t,k,w.onContentChange),S=g.useRef(0),E=g.useRef(""),T=g.useRef(0),z=g.useRef(null),R=g.useRef("right"),_=g.useRef(0),$=v?d0:g.Fragment,L=v?{as:eI,allowPinchZoom:!0}:void 0,O=M=>{var te,xe;const I=E.current+M,B=j().filter(me=>!me.disabled),H=document.activeElement,q=(te=B.find(me=>me.ref.current===H))==null?void 0:te.textValue,Y=B.map(me=>me.textValue),J=fI(Y,I,q),le=(xe=B.find(me=>me.textValue===J))==null?void 0:xe.ref.current;(function me(ye){E.current=ye,window.clearTimeout(S.current),ye!==""&&(S.current=window.setTimeout(()=>me(""),1e3))})(I),le&&setTimeout(()=>le.focus())};g.useEffect(()=>()=>window.clearTimeout(S.current),[]),uS();const D=g.useCallback(M=>{var B,H;return R.current===((B=z.current)==null?void 0:B.side)&&hI(M,(H=z.current)==null?void 0:H.area)},[]);return a.jsx(K6,{scope:n,searchRef:E,onItemEnter:g.useCallback(M=>{D(M)&&M.preventDefault()},[D]),onItemLeave:g.useCallback(M=>{var I;D(M)||((I=k.current)==null||I.focus(),A(null))},[D]),onTriggerLeave:g.useCallback(M=>{D(M)&&M.preventDefault()},[D]),pointerGraceTimerRef:T,onPointerGraceIntentChange:g.useCallback(M=>{z.current=M},[]),children:a.jsx($,{...L,children:a.jsx(u0,{asChild:!0,trapped:r,onMountAutoFocus:se(i,M=>{var I;M.preventDefault(),(I=k.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(pu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:h,children:a.jsx(QS,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:s,currentTabStopId:N,onCurrentTabStopIdChange:A,onEntryFocus:se(c,M=>{x.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(M0,{role:"menu","aria-orientation":"vertical","data-state":lk(w.open),"data-radix-menu-content":"",dir:x.dir,...p,...y,ref:C,style:{outline:"none",...y.style},onKeyDown:se(y.onKeyDown,M=>{const B=M.target.closest("[data-radix-menu-content]")===M.currentTarget,H=M.ctrlKey||M.altKey||M.metaKey,q=M.key.length===1;B&&(M.key==="Tab"&&M.preventDefault(),!H&&q&&O(M.key));const Y=k.current;if(M.target!==Y||!H6.includes(M.key))return;M.preventDefault();const le=j().filter(te=>!te.disabled).map(te=>te.ref.current);B2.includes(M.key)&&le.reverse(),uI(le)}),onBlur:se(e.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(S.current),E.current="")}),onPointerMove:se(e.onPointerMove,Hc(M=>{const I=M.target,B=_.current!==M.clientX;if(M.currentTarget.contains(I)&&B){const H=M.clientX>_.current?"right":"left";R.current=H,_.current=M.clientX}}))})})})})})})});q2.displayName=rs;var tI="MenuGroup",$0=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return a.jsx(we.div,{role:"group",...s,ref:t})});$0.displayName=tI;var nI="MenuLabel",Z2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return a.jsx(we.div,{...s,ref:t})});Z2.displayName=nI;var yf="MenuItem",Pb="menu.itemSelect",Pm=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...r}=e,i=g.useRef(null),o=ku(yf,e.__scopeMenu),l=z0(yf,e.__scopeMenu),c=Be(t,i),u=g.useRef(!1),d=()=>{const f=i.current;if(!n&&f){const m=new CustomEvent(Pb,{bubbles:!0,cancelable:!0});f.addEventListener(Pb,h=>s==null?void 0:s(h),{once:!0}),iS(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(Y2,{...r,ref:c,disabled:n,onClick:se(e.onClick,d),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),u.current=!0},onPointerUp:se(e.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:se(e.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||pp.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Pm.displayName=yf;var Y2=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...i}=e,o=z0(yf,n),l=H2(n),c=g.useRef(null),u=Be(t,c),[d,f]=g.useState(!1),[m,h]=g.useState("");return g.useEffect(()=>{const v=c.current;v&&h((v.textContent??"").trim())},[i.children]),a.jsx(Fc.ItemSlot,{scope:n,disabled:s,textValue:r??m,children:a.jsx(JS,{asChild:!0,...l,focusable:!s,children:a.jsx(we.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:u,onPointerMove:se(e.onPointerMove,Hc(v=>{s?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:se(e.onPointerLeave,Hc(v=>o.onItemLeave(v))),onFocus:se(e.onFocus,()=>f(!0)),onBlur:se(e.onBlur,()=>f(!1))})})})}),sI="MenuCheckboxItem",X2=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...r}=e;return a.jsx(ek,{scope:e.__scopeMenu,checked:n,children:a.jsx(Pm,{role:"menuitemcheckbox","aria-checked":bf(n)?"mixed":n,...r,ref:t,"data-state":I0(n),onSelect:se(r.onSelect,()=>s==null?void 0:s(bf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});X2.displayName=sI;var W2="MenuRadioGroup",[rI,aI]=Zi(W2,{value:void 0,onValueChange:()=>{}}),K2=g.forwardRef((e,t)=>{const{value:n,onValueChange:s,...r}=e,i=Jt(s);return a.jsx(rI,{scope:e.__scopeMenu,value:n,onValueChange:i,children:a.jsx($0,{...r,ref:t})})});K2.displayName=W2;var Q2="MenuRadioItem",J2=g.forwardRef((e,t)=>{const{value:n,...s}=e,r=aI(Q2,e.__scopeMenu),i=n===r.value;return a.jsx(ek,{scope:e.__scopeMenu,checked:i,children:a.jsx(Pm,{role:"menuitemradio","aria-checked":i,...s,ref:t,"data-state":I0(i),onSelect:se(s.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});J2.displayName=Q2;var O0="MenuItemIndicator",[ek,iI]=Zi(O0,{checked:!1}),tk=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...r}=e,i=iI(O0,n);return a.jsx(Kt,{present:s||bf(i.checked)||i.checked===!0,children:a.jsx(we.span,{...r,ref:t,"data-state":I0(i.checked)})})});tk.displayName=O0;var oI="MenuSeparator",nk=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return a.jsx(we.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});nk.displayName=oI;var lI="MenuArrow",sk=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,r=zm(n);return a.jsx(R0,{...r,...s,ref:t})});sk.displayName=lI;var cI="MenuSub",[dse,rk]=Zi(cI),cc="MenuSubTrigger",ak=g.forwardRef((e,t)=>{const n=Yi(cc,e.__scopeMenu),s=ku(cc,e.__scopeMenu),r=rk(cc,e.__scopeMenu),i=z0(cc,e.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>d,[d]),g.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),a.jsx(D0,{asChild:!0,...u,children:a.jsx(Y2,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":lk(n.open),...e,ref:Sm(t,r.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:se(e.onPointerMove,Hc(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:se(e.onPointerLeave,Hc(f=>{var h,v;d();const m=(h=n.content)==null?void 0:h.getBoundingClientRect();if(m){const y=(v=n.content)==null?void 0:v.dataset.side,w=y==="right",x=w?-5:5,p=m[w?"left":"right"],b=m[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:p,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:p,y:m.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:se(e.onKeyDown,f=>{var h;const m=i.searchRef.current!=="";e.disabled||m&&f.key===" "||U6[s.dir].includes(f.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),f.preventDefault())})})})});ak.displayName=cc;var ik="MenuSubContent",ok=g.forwardRef((e,t)=>{const n=V2(rs,e.__scopeMenu),{forceMount:s=n.forceMount,...r}=e,i=Yi(rs,e.__scopeMenu),o=ku(rs,e.__scopeMenu),l=rk(ik,e.__scopeMenu),c=g.useRef(null),u=Be(t,c);return a.jsx(Fc.Provider,{scope:e.__scopeMenu,children:a.jsx(Kt,{present:s||i.open,children:a.jsx(Fc.Slot,{scope:e.__scopeMenu,children:a.jsx(P0,{id:l.contentId,"aria-labelledby":l.triggerId,...r,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:se(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:se(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:se(e.onKeyDown,d=>{var h;const f=d.currentTarget.contains(d.target),m=V6[o.dir].includes(d.key);f&&m&&(i.onOpenChange(!1),(h=l.trigger)==null||h.focus(),d.preventDefault())})})})})})});ok.displayName=ik;function lk(e){return e?"open":"closed"}function bf(e){return e==="indeterminate"}function I0(e){return bf(e)?"indeterminate":e?"checked":"unchecked"}function uI(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function dI(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function fI(e,t,n){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=dI(e,Math.max(i,0));r.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function mI(e,t){const{x:n,y:s}=e;let r=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,m=c.y;d>s!=m>s&&n<(f-u)*(s-d)/(m-d)+u&&(r=!r)}return r}function hI(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return mI(n,t)}function Hc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var gI=U2,pI=D0,xI=G2,vI=q2,yI=$0,bI=Z2,wI=Pm,jI=X2,NI=K2,SI=J2,kI=tk,CI=nk,EI=sk,AI=ak,TI=ok,$m="DropdownMenu",[_I,fse]=Vn($m,[F2]),fn=F2(),[MI,ck]=_I($m),uk=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:r,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=fn(t),u=g.useRef(null),[d,f]=qr({prop:r,defaultProp:i??!1,onChange:o,caller:$m});return a.jsx(MI,{scope:t,triggerId:Tr(),triggerRef:u,contentId:Tr(),open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),modal:l,children:a.jsx(gI,{...c,open:d,onOpenChange:f,dir:s,modal:l,children:n})})};uk.displayName=$m;var dk="DropdownMenuTrigger",fk=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=e,i=ck(dk,n),o=fn(n);return a.jsx(pI,{asChild:!0,...o,children:a.jsx(we.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Sm(t,i.triggerRef),onPointerDown:se(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:se(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});fk.displayName=dk;var RI="DropdownMenuPortal",mk=e=>{const{__scopeDropdownMenu:t,...n}=e,s=fn(t);return a.jsx(xI,{...s,...n})};mk.displayName=RI;var hk="DropdownMenuContent",gk=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=ck(hk,n),i=fn(n),o=g.useRef(!1);return a.jsx(vI,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...s,ref:t,onCloseAutoFocus:se(e.onCloseAutoFocus,l=>{var c;o.current||(c=r.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:se(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!r.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gk.displayName=hk;var DI="DropdownMenuGroup",LI=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(yI,{...r,...s,ref:t})});LI.displayName=DI;var zI="DropdownMenuLabel",pk=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(bI,{...r,...s,ref:t})});pk.displayName=zI;var PI="DropdownMenuItem",xk=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(wI,{...r,...s,ref:t})});xk.displayName=PI;var $I="DropdownMenuCheckboxItem",vk=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(jI,{...r,...s,ref:t})});vk.displayName=$I;var OI="DropdownMenuRadioGroup",II=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(NI,{...r,...s,ref:t})});II.displayName=OI;var BI="DropdownMenuRadioItem",yk=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(SI,{...r,...s,ref:t})});yk.displayName=BI;var FI="DropdownMenuItemIndicator",bk=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(kI,{...r,...s,ref:t})});bk.displayName=FI;var HI="DropdownMenuSeparator",wk=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(CI,{...r,...s,ref:t})});wk.displayName=HI;var UI="DropdownMenuArrow",VI=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(EI,{...r,...s,ref:t})});VI.displayName=UI;var GI="DropdownMenuSubTrigger",jk=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(AI,{...r,...s,ref:t})});jk.displayName=GI;var qI="DropdownMenuSubContent",Nk=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=fn(n);return a.jsx(TI,{...r,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Nk.displayName=qI;var ZI=uk,YI=fk,XI=mk,Sk=gk,kk=pk,Ck=xk,Ek=vk,Ak=yk,Tk=bk,_k=wk,Mk=jk,Rk=Nk;const Xi=ZI,Wi=YI,WI=g.forwardRef(({className:e,inset:t,children:n,...s},r)=>a.jsxs(Mk,{ref:r,className:F("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[n,a.jsx(Cl,{className:"ml-auto h-4 w-4"})]}));WI.displayName=Mk.displayName;const KI=g.forwardRef(({className:e,...t},n)=>a.jsx(Rk,{ref:n,className:F("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Nt.DROPDOWN},...t}));KI.displayName=Rk.displayName;const Ya=g.forwardRef(({className:e,sideOffset:t=4,...n},s)=>a.jsx(XI,{children:a.jsx(Sk,{ref:s,sideOffset:t,className:F("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Nt.DROPDOWN},...n})}));Ya.displayName=Sk.displayName;const un=g.forwardRef(({className:e,inset:t,...n},s)=>a.jsx(Ck,{ref:s,className:F("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));un.displayName=Ck.displayName;const QI=g.forwardRef(({className:e,children:t,checked:n,...s},r)=>a.jsxs(Ek,{ref:r,className:F("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Tk,{children:a.jsx(Dc,{className:"h-4 w-4"})})}),t]}));QI.displayName=Ek.displayName;const JI=g.forwardRef(({className:e,children:t,...n},s)=>a.jsxs(Ak,{ref:s,className:F("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Tk,{children:a.jsx(e0,{className:"h-2 w-2 fill-current"})})}),t]}));JI.displayName=Ak.displayName;const e8=g.forwardRef(({className:e,inset:t,...n},s)=>a.jsx(kk,{ref:s,className:F("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));e8.displayName=kk.displayName;const t8=g.forwardRef(({className:e,...t},n)=>a.jsx(_k,{ref:n,className:F("-mx-1 my-1 h-px bg-muted",e),...t}));t8.displayName=_k.displayName;function n8(e,[t,n]){return Math.min(n,Math.max(t,e))}function s8(e,t){return g.useReducer((n,s)=>t[n][s]??n,e)}var B0="ScrollArea",[Dk,mse]=Vn(B0),[r8,fs]=Dk(B0),Lk=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:r,scrollHideDelay:i=600,...o}=e,[l,c]=g.useState(null),[u,d]=g.useState(null),[f,m]=g.useState(null),[h,v]=g.useState(null),[y,w]=g.useState(null),[x,p]=g.useState(0),[b,j]=g.useState(0),[N,A]=g.useState(!1),[k,C]=g.useState(!1),S=Be(t,T=>c(T)),E=wu(r);return a.jsx(r8,{scope:n,type:s,dir:E,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:h,onScrollbarXChange:v,scrollbarXEnabled:N,onScrollbarXEnabledChange:A,scrollbarY:y,onScrollbarYChange:w,scrollbarYEnabled:k,onScrollbarYEnabledChange:C,onCornerWidthChange:p,onCornerHeightChange:j,children:a.jsx(we.div,{dir:E,...o,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});Lk.displayName=B0;var zk="ScrollAreaViewport",Pk=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:r,...i}=e,o=fs(zk,n),l=g.useRef(null),c=Be(t,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(we.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});Pk.displayName=zk;var nr="ScrollAreaScrollbar",F0=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=fs(nr,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=r,l=e.orientation==="horizontal";return g.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),r.type==="hover"?a.jsx(a8,{...s,ref:t,forceMount:n}):r.type==="scroll"?a.jsx(i8,{...s,ref:t,forceMount:n}):r.type==="auto"?a.jsx($k,{...s,ref:t,forceMount:n}):r.type==="always"?a.jsx(H0,{...s,ref:t}):null});F0.displayName=nr;var a8=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=fs(nr,e.__scopeScrollArea),[i,o]=g.useState(!1);return g.useEffect(()=>{const l=r.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[r.scrollArea,r.scrollHideDelay]),a.jsx(Kt,{present:n||i,children:a.jsx($k,{"data-state":i?"visible":"hidden",...s,ref:t})})}),i8=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=fs(nr,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Im(()=>c("SCROLL_END"),100),[l,c]=s8("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,r.scrollHideDelay,c]),g.useEffect(()=>{const u=r.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const h=u[d];f!==h&&(c("SCROLL"),o()),f=h};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[r.viewport,i,c,o]),a.jsx(Kt,{present:n||l!=="hidden",children:a.jsx(H0,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:se(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:se(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),$k=g.forwardRef((e,t)=>{const n=fs(nr,e.__scopeScrollArea),{forceMount:s,...r}=e,[i,o]=g.useState(!1),l=e.orientation==="horizontal",c=Im(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return sl(n.viewport,c),sl(n.content,c),a.jsx(Kt,{present:s||i,children:a.jsx(H0,{"data-state":i?"visible":"hidden",...r,ref:t})})}),H0=g.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,r=fs(nr,e.__scopeScrollArea),i=g.useRef(null),o=g.useRef(0),[l,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Hk(l.viewport,l.content),d={...s,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,h){return f8(m,o.current,l,h)}return n==="horizontal"?a.jsx(o8,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollLeft,h=$b(m,l,r.dir);i.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=f(m,r.dir))}}):n==="vertical"?a.jsx(l8,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollTop,h=$b(m,l);i.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=f(m))}}):null}),o8=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,i=fs(nr,e.__scopeScrollArea),[o,l]=g.useState(),c=g.useRef(null),u=Be(t,c,i.onScrollbarXChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(Ik,{"data-orientation":"horizontal",...r,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Om(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),Vk(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:jf(o.paddingLeft),paddingEnd:jf(o.paddingRight)}})}})}),l8=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,i=fs(nr,e.__scopeScrollArea),[o,l]=g.useState(),c=g.useRef(null),u=Be(t,c,i.onScrollbarYChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(Ik,{"data-orientation":"vertical",...r,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Om(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),Vk(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:jf(o.paddingTop),paddingEnd:jf(o.paddingBottom)}})}})}),[c8,Ok]=Dk(nr),Ik=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:r,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=e,h=fs(nr,n),[v,y]=g.useState(null),w=Be(t,S=>y(S)),x=g.useRef(null),p=g.useRef(""),b=h.viewport,j=s.content-s.viewport,N=Jt(d),A=Jt(c),k=Im(f,10);function C(S){if(x.current){const E=S.clientX-x.current.left,T=S.clientY-x.current.top;u({x:E,y:T})}}return g.useEffect(()=>{const S=E=>{const T=E.target;(v==null?void 0:v.contains(T))&&N(E,j)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[b,v,j,N]),g.useEffect(A,[s,A]),sl(v,k),sl(h.content,k),a.jsx(c8,{scope:n,scrollbar:v,hasThumb:r,onThumbChange:Jt(i),onThumbPointerUp:Jt(o),onThumbPositionChange:A,onThumbPointerDown:Jt(l),children:a.jsx(we.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:se(e.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),x.current=v.getBoundingClientRect(),p.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),C(S))}),onPointerMove:se(e.onPointerMove,C),onPointerUp:se(e.onPointerUp,S=>{const E=S.target;E.hasPointerCapture(S.pointerId)&&E.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=p.current,h.viewport&&(h.viewport.style.scrollBehavior=""),x.current=null})})})}),wf="ScrollAreaThumb",Bk=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Ok(wf,e.__scopeScrollArea);return a.jsx(Kt,{present:n||r.hasThumb,children:a.jsx(u8,{ref:t,...s})})}),u8=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...r}=e,i=fs(wf,n),o=Ok(wf,n),{onThumbPositionChange:l}=o,c=Be(t,f=>o.onThumbChange(f)),u=g.useRef(void 0),d=Im(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(d(),!u.current){const h=m8(f,l);u.current=h,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,d,l]),a.jsx(we.div,{"data-state":o.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:se(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),v=f.clientX-h.left,y=f.clientY-h.top;o.onThumbPointerDown({x:v,y})}),onPointerUp:se(e.onPointerUp,o.onThumbPointerUp)})});Bk.displayName=wf;var U0="ScrollAreaCorner",Fk=g.forwardRef((e,t)=>{const n=fs(U0,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?a.jsx(d8,{...e,ref:t}):null});Fk.displayName=U0;var d8=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,r=fs(U0,n),[i,o]=g.useState(0),[l,c]=g.useState(0),u=!!(i&&l);return sl(r.scrollbarX,()=>{var f;const d=((f=r.scrollbarX)==null?void 0:f.offsetHeight)||0;r.onCornerHeightChange(d),c(d)}),sl(r.scrollbarY,()=>{var f;const d=((f=r.scrollbarY)==null?void 0:f.offsetWidth)||0;r.onCornerWidthChange(d),o(d)}),u?a.jsx(we.div,{...s,ref:t,style:{width:i,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function jf(e){return e?parseInt(e,10):0}function Hk(e,t){const n=e/t;return isNaN(n)?0:n}function Om(e){const t=Hk(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function f8(e,t,n,s="ltr"){const r=Om(n),i=r/2,o=t||i,l=r-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=s==="ltr"?[0,d]:[d*-1,0];return Uk([c,u],f)(e)}function $b(e,t,n="ltr"){const s=Om(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-r,o=t.content-t.viewport,l=i-s,c=n==="ltr"?[0,o]:[o*-1,0],u=n8(e,c);return Uk([0,o],[0,l])(u)}function Uk(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Vk(e,t){return e>0&&e<t}var m8=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function r(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&t(),n=i,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function Im(e,t){const n=Jt(e),s=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(s.current),[]),g.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function sl(e,t){const n=Jt(t);Ws(()=>{let s=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(s),r.unobserve(e)}}},[e,n])}var Gk=Lk,h8=Pk,g8=Fk;const _i=g.forwardRef(({className:e,children:t,...n},s)=>a.jsxs(Gk,{ref:s,className:F("relative overflow-hidden",e),...n,children:[a.jsx(h8,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(qk,{}),a.jsx(g8,{})]}));_i.displayName=Gk.displayName;const qk=g.forwardRef(({className:e,orientation:t="vertical",...n},s)=>a.jsx(F0,{ref:s,orientation:t,className:F("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:a.jsx(Bk,{className:"relative flex-1 rounded-full bg-border"})}));qk.displayName=F0.displayName;function p8({items:e,viewMode:t,onItemSelect:n,selectedItem:s,renderItemCard:r,className:i}){return a.jsxs("div",{className:`space-y-4 ${i}`,children:[t==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(o=>a.jsx("div",{onClick:()=>n(o),className:"cursor-pointer transition-transform hover:scale-[1.02] relative",children:r(o,(s==null?void 0:s.id)===o.id)},o.id))}):a.jsx(_i,{className:"h-[calc(100vh-300px)]",children:a.jsx("div",{className:"space-y-1 pr-4",children:e.map(o=>a.jsx("div",{onClick:()=>n(o),className:"cursor-pointer transition-colors hover:bg-muted/50 rounded-lg",children:r(o,(s==null?void 0:s.id)===o.id)},o.id))})}),e.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No items found matching your criteria."})})]})}function x8({categories:e,onSelect:t,className:n=""}){return a.jsx("div",{className:`flex flex-wrap gap-4 justify-start ${n}`,children:e.map(s=>a.jsx("div",{className:"flex-1 min-w-[180px]",children:a.jsx(hi,{categories:[s],onSelect:t,placeholder:s.placeholder,className:"w-full"})},s.id))})}function v8({tags:e,onRemove:t,className:n=""}){return e.length===0?null:a.jsx("div",{className:`flex flex-wrap gap-2 ${n}`,children:e.map(s=>a.jsxs(Z,{variant:"secondary",className:"flex items-center gap-1 px-3 py-1 text-sm",children:[a.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.category,":"]}),a.jsx("span",{children:s.label}),a.jsx("button",{onClick:()=>t(s.id),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:a.jsx(Me,{className:"h-3 w-3"})})]},s.id))})}function Zk({categories:e,onSelect:t,onCustomSearch:n,placeholder:s="Search by name, description, or abilities...",className:r=""}){const[i,o]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState(""),[f,m]=g.useState(-1),h=g.useRef(null),v=g.useRef(null),y=e.length===1?e[0]:null;g.useEffect(()=>{const E=T=>{h.current&&!h.current.contains(T.target)&&(o(!1),c(null),m(-1))};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const w=l||y?(l||y).options.filter(E=>E.label&&typeof E.label=="string"&&E.label.toLowerCase().includes(u.toLowerCase())||E.description&&typeof E.description=="string"&&E.description.toLowerCase().includes(u.toLowerCase())):e.flatMap(E=>E.options.filter(T=>T.label&&typeof T.label=="string"&&T.label.toLowerCase().includes(u.toLowerCase())||T.description&&typeof T.description=="string"&&T.description.toLowerCase().includes(u.toLowerCase()))),x=E=>{d(E),o(!0),m(-1)},p=E=>{var T;c(E),d(""),(T=v.current)==null||T.focus()},b=E=>{t(E),d(""),c(null),o(!1),m(-1)},j=()=>{u.trim()&&(n(u.trim()),d(""),c(null),o(!1),m(-1))},N=E=>{E.key==="ArrowDown"?(E.preventDefault(),m(T=>Math.min(T+1,w.length-1))):E.key==="ArrowUp"?(E.preventDefault(),m(T=>Math.max(T-1,-1))):E.key==="Enter"?(E.preventDefault(),f>=0&&w[f]?b(w[f]):u.trim()&&j()):E.key==="Escape"&&(o(!1),c(null),m(-1))},A=()=>{o(!0)},k=l||y,C=!y&&!l,S=u.trim()&&!w.some(E=>E.label&&typeof E.label=="string"&&E.label.toLowerCase()===u.toLowerCase());return a.jsxs("div",{ref:h,className:`relative ${r}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Dt,{ref:v,type:"text",placeholder:k?k.placeholder:s,value:u,onChange:E=>x(E.target.value),onFocus:A,onKeyDown:N,className:"pl-10 pr-20"}),S&&a.jsx(U,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:j,title:"Add custom search term",children:a.jsx(Na,{className:"h-4 w-4"})}),a.jsx(U,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>o(!i),children:a.jsx(Je,{className:`h-4 w-4 transition-transform ${i?"rotate-180":""}`})})]}),i&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto",style:{zIndex:Nt.AUTOCOMPLETE+10},children:[C&&a.jsxs("div",{className:"p-2 border-b border-border",children:[a.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(E=>a.jsxs("button",{onClick:()=>p(E),className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center justify-between",children:[a.jsx("span",{children:E.name}),a.jsx(Je,{className:"h-4 w-4"})]},E.id))]}),S&&a.jsx("div",{className:"p-2 border-b border-border",children:a.jsxs("button",{onClick:j,className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center gap-2",children:[a.jsx(Na,{className:"h-4 w-4 text-primary"}),a.jsxs("span",{className:"font-medium",children:['Search for "',u,'"']}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"(Custom search)"})]})}),a.jsx("div",{className:"p-2",children:w.length===0&&!S?a.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):w.map((E,T)=>a.jsxs("button",{onClick:()=>b(E),className:`w-full text-left px-2 py-2 rounded text-sm ${T===f?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[a.jsx("div",{className:"font-medium",children:E.label}),E.description&&a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:E.description})]},E.id))})]})]})}function Yr({categories:e,onSelect:t,onCustomSearch:n,className:s=""}){const r=e.find(o=>o.id==="fuzzy-search"||o.id==="keywords"),i=e.filter(o=>o.id!=="fuzzy-search"&&o.id!=="keywords");return a.jsxs("div",{className:`flex flex-wrap gap-4 justify-start ${s}`,children:[r&&a.jsx("div",{className:"flex-1 min-w-[300px]",children:a.jsx(Zk,{categories:[r],onSelect:t,onCustomSearch:n,placeholder:r.placeholder,className:"w-full"})}),i.map(o=>a.jsx("div",{className:"flex-shrink-0 min-w-[200px] max-w-[300px]",children:a.jsx(hi,{categories:[o],onSelect:t,placeholder:o.placeholder,className:"w-full"})},o.id))]})}function y8({children:e,className:t=""}){return a.jsx("div",{className:`grid grid-cols-1 lg:grid-cols-6 gap-6 ${t}`,children:e})}function b8({children:e,className:t=""}){return a.jsx("div",{className:`lg:col-span-5 ${t}`,children:e})}function w8({children:e,className:t=""}){return a.jsx("div",{className:`lg:col-span-1 ${t}`,children:a.jsx("div",{className:"sticky top-6",style:{zIndex:Nt.STICKY},children:e})})}function j8({title:e="Select an Item",description:t="Choose an item from the list to view its details"}){return a.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 text-center",children:[a.jsx(xa,{className:"text-lg font-semibold mb-2",children:e}),a.jsx(ve,{className:"text-muted-foreground",children:t})]})}function N8({searchCategories:e,selectedTags:t,viewMode:n="grid",onTagSelect:s,onTagRemove:r,onViewModeChange:i,children:o,className:l=""}){return a.jsxs("div",{className:`mb-8 space-y-4 ${l}`,children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(x8,{categories:e,onSelect:s,className:"w-full"})}),i&&a.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[a.jsx(U,{variant:n==="grid"?"default":"ghost",size:"sm",onClick:()=>i("grid"),className:"h-8 px-3",children:a.jsx(Fi,{className:"h-4 w-4"})}),a.jsx(U,{variant:n==="list"?"default":"ghost",size:"sm",onClick:()=>i("list"),className:"h-8 px-3",children:a.jsx(Ha,{className:"h-4 w-4"})})]})]}),a.jsx(v8,{tags:t,onRemove:r,className:"justify-start"}),o&&a.jsx("div",{className:"pt-4",children:o})]})}const S8=(e,t)=>{const n=e.effects.length>0,s=e.effects.length,r=e.targetType==="touch",i=e.targetType==="self",o=e.foundOnItems.length,l=[e.targetType,...e.effects.map(u=>u.name.toLowerCase()),...e.foundOnItems.map(u=>u.type),...e.plugin.toLowerCase().split(" "),t.toLowerCase().split(" ")].filter(Boolean),c=[e.name,...e.effects.map(u=>`${u.name} ${u.description}`),...e.foundOnItems.map(u=>`${u.name} ${u.type}`),e.plugin,t].join(" ").toLowerCase();return{...e,hasEffects:n,effectCount:s,isWeaponEnchantment:r,isArmorEnchantment:i,itemCount:o,tags:[...new Set(l)],searchableText:c,category:t}},$r=Nn((e,t)=>({categories:[],data:[],loading:!1,error:null,viewState:{viewMode:"grid",sortBy:"name",sortOrder:"asc",selectedEnchantment:null,expandedEnchantments:[]},filters:{categories:[],targetTypes:[],itemTypes:[],plugins:[],searchTerm:"",hasEffects:null,hasWornRestrictions:null,minItemCount:null,maxItemCount:null},searchResults:[],searchLoading:!1,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(Wt("data/enchantment-primer.json"));if(!s.ok)throw new Error(`Failed to load enchantments: ${s.statusText}`);const r=await s.json(),i=[];r.categories.forEach(o=>{o.enchantments.forEach(l=>{i.push(S8(l,o.name))})}),e({categories:r.categories,data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load enchantments",loading:!1})}}},setViewState:n=>{e(s=>({viewState:{...s.viewState,...n}}),!1,"setViewState")},setFilters:n=>{e(s=>({filters:{...s.filters,...n}}),!1,"setFilters")},search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>i.name.toLowerCase().includes(r)||i.searchableText.includes(r)||i.tags.some(o=>o.toLowerCase().includes(r))||i.effects.some(o=>o.name.toLowerCase().includes(r)||o.description.toLowerCase().includes(r))||i.foundOnItems.some(o=>o.name.toLowerCase().includes(r)||o.type.toLowerCase().includes(r)))},selectEnchantment:n=>{e(s=>({viewState:{...s.viewState,selectedEnchantment:n}}),!1,"selectEnchantment")},clearSelection:()=>{e(n=>({viewState:{...n.viewState,selectedEnchantment:null}}),!1,"clearSelection")},clearSearch:()=>{e({searchResults:[],searchLoading:!1},!1,"clearSearch")},get selectedEnchantment(){const n=t();return n.viewState.selectedEnchantment?n.data.find(s=>s.baseEnchantmentId===n.viewState.selectedEnchantment):void 0},getById:n=>t().data.find(r=>r.baseEnchantmentId===n),getByBaseEnchantmentId:n=>t().data.find(r=>r.baseEnchantmentId===n),getByCategory:n=>t().data.filter(r=>r.category===n),getByTargetType:n=>t().data.filter(r=>r.targetType===n),getByPlugin:n=>t().data.filter(r=>r.plugin===n)}));class Ke{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.output=="string"&&Array.isArray(t.ingredients)&&Array.isArray(t.effects)}static equals(t,n){return t.name===n.name}static addComputedProperties(t){const n=t.effects.length>0,s=t.effects.length,r=t.ingredients.length,i=r>3||s>2,o=r<=2&&s<=1,l=t.effects.reduce((m,h)=>m+h.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=this.determineDifficulty(t,{ingredientCount:r,effectCount:s,isComplex:i,isSimple:o}),d=this.generateTags(t,{hasEffects:n,effectCount:s,ingredientCount:r,isComplex:i,isSimple:o,difficulty:u}),f=this.createSearchableText(t,d);return{...t,hasEffects:n,effectCount:s,ingredientCount:r,isComplex:i,isSimple:o,totalMagnitude:l,maxDuration:c,tags:d,searchableText:f,difficulty:u}}static determineDifficulty(t,n){return n.isSimple?"Simple":n.isComplex?"Complex":"Moderate"}static generateTags(t,n){const s=[];return t.category&&s.push(t.category),s.push(n.difficulty),n.hasEffects&&s.push("Has Effects"),n.ingredientCount===1?s.push("Single Ingredient"):n.ingredientCount<=3?s.push("Few Ingredients"):s.push("Many Ingredients"),n.effectCount===1?s.push("Single Effect"):n.effectCount<=2?s.push("Few Effects"):s.push("Many Effects"),t.effects.forEach(r=>{s.push(r.name)}),t.ingredients.forEach(r=>{s.push(r)}),[...new Set(s)]}static createSearchableText(t,n){const s=t.ingredients.map(i=>typeof i=="string"?i:i&&typeof i=="object"&&(i.item||i.name||i.label||i.id)||String(i));return[t.name,t.output,t.description||"",...s,...t.effects.map(i=>i.name),...t.effects.map(i=>i.description),...n].join(" ").toLowerCase()}static filterByCategory(t,n){return t.filter(s=>s.category===n)}static filterByCategories(t,n){return n.length===0?t:t.filter(s=>s.category&&n.includes(s.category))}static filterByDifficulty(t,n){return t.filter(s=>s.difficulty===n)}static filterByDifficulties(t,n){return n.length===0?t:t.filter(s=>n.includes(s.difficulty))}static filterByIngredientCount(t,n,s){return t.filter(r=>{const i=r.ingredientCount;return!(n!==null&&i<n||s!==null&&i>s)})}static filterByMagnitude(t,n,s){return t.filter(r=>{const i=r.totalMagnitude;return!(n!==null&&i<n||s!==null&&i>s)})}static filterByEffectProperties(t,n,s){return t.filter(r=>!(n!==null&&r.hasEffects!==n||s!==null&&r.isComplex!==s))}static filterByIngredients(t,n){return n.length===0?t:t.filter(s=>n.some(r=>s.ingredients.some(i=>(typeof i=="string"?i:i.item||i.name||i.label||i.id||String(i)).toLowerCase().includes(r.toLowerCase()))))}static filterByEffects(t,n){return n.length===0?t:t.filter(s=>n.some(r=>s.effects.some(i=>i.name.toLowerCase().includes(r.toLowerCase()))))}static search(t,n){if(!n.trim())return[];const s=n.toLowerCase().trim(),r=[];for(const i of t){const o=this.calculateSearchScore(i,s);if(o>0){const l=this.getMatchedFields(i,s);r.push({recipe:i,score:o,matchedFields:l})}}return r.sort((i,o)=>o.score-i.score)}static calculateSearchScore(t,n){var i;let s=0;const r=n.toLowerCase();return t.name.toLowerCase()===r&&(s+=100),t.output.toLowerCase()===r&&(s+=100),t.name.toLowerCase().includes(r)&&(s+=50),t.output.toLowerCase().includes(r)&&(s+=50),(i=t.description)!=null&&i.toLowerCase().includes(r)&&(s+=30),t.ingredients.forEach(o=>{const l=typeof o=="string"?o:o.item||o.name||o.label||o.id||String(o);l.toLowerCase()===r&&(s+=40),l.toLowerCase().includes(r)&&(s+=20)}),t.effects.forEach(o=>{o.name.toLowerCase()===r&&(s+=40),o.name.toLowerCase().includes(r)&&(s+=20),o.description.toLowerCase().includes(r)&&(s+=15)}),t.tags.forEach(o=>{o.toLowerCase()===r&&(s+=25),o.toLowerCase().includes(r)&&(s+=10)}),s}static getMatchedFields(t,n){var i;const s=[],r=n.toLowerCase();return t.name.toLowerCase().includes(r)&&s.push("name"),t.output.toLowerCase().includes(r)&&s.push("output"),(i=t.description)!=null&&i.toLowerCase().includes(r)&&s.push("description"),t.ingredients.forEach(o=>{(typeof o=="string"?o:o.item||o.name||o.label||o.id||String(o)).toLowerCase().includes(r)&&s.push("ingredients")}),t.effects.forEach(o=>{(o.name.toLowerCase().includes(r)||o.description.toLowerCase().includes(r))&&s.push("effects")}),[...new Set(s)]}static sort(t,n,s="asc"){return[...t].sort((i,o)=>{let l=0;switch(n){case"name":l=i.name.localeCompare(o.name);break;case"category":l=(i.category||"").localeCompare(o.category||"");break;case"difficulty":l=this.compareDifficulties(i.difficulty,o.difficulty);break;case"ingredientCount":l=i.ingredientCount-o.ingredientCount;break;case"effectCount":l=i.effectCount-o.effectCount;break;case"magnitude":l=i.totalMagnitude-o.totalMagnitude;break;case"duration":l=i.maxDuration-o.maxDuration;break}return s==="asc"?l:-l})}static compareDifficulties(t,n){const s={Simple:1,Moderate:2,Complex:3};return(s[t]||0)-(s[n]||0)}static getUniqueCategories(t){const n=t.map(s=>s.category).filter(s=>!!s);return[...new Set(n)].sort()}static getUniqueDifficulties(t){const n=t.map(s=>s.difficulty);return[...new Set(n)].sort((s,r)=>this.compareDifficulties(s,r))}static getUniqueEffects(t){const n=t.flatMap(s=>s.effects.map(r=>r.name));return[...new Set(n)].sort()}static getUniqueIngredients(t){const n=t.flatMap(s=>s.ingredients.map(r=>typeof r=="string"?r:r&&typeof r=="object"&&(r.item||r.name||r.label||r.id)||String(r)));return[...new Set(n)].filter(s=>s&&s!=="[object Object]").sort()}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static applyFilters(t,n){let s=[...t];return n.searchTerm.trim()&&(s=this.search(s,n.searchTerm).map(i=>i.recipe)),n.categories.length>0&&(s=this.filterByCategories(s,n.categories)),n.difficulties.length>0&&(s=this.filterByDifficulties(s,n.difficulties)),n.ingredients.length>0&&(s=this.filterByIngredients(s,n.ingredients)),n.effects.length>0&&(s=this.filterByEffects(s,n.effects)),s=this.filterByEffectProperties(s,n.hasEffects,n.isComplex),s=this.filterByIngredientCount(s,n.minIngredientCount,n.maxIngredientCount),s=this.filterByMagnitude(s,n.minMagnitude,n.maxMagnitude),s}static getStatistics(t){const n=t.length,s=t.filter(j=>j.type==="food").length,r=t.filter(j=>j.type==="alcohol").length,i={};t.forEach(j=>{j.category&&(i[j.category]=(i[j.category]||0)+1)});const o={};t.forEach(j=>{o[j.difficulty]=(o[j.difficulty]||0)+1});const l={};t.forEach(j=>{j.effects.forEach(N=>{l[N.name]=(l[N.name]||0)+1})});const c=t.reduce((j,N)=>j+N.ingredientCount,0),u=t.reduce((j,N)=>j+N.effectCount,0),d=n>0?c/n:0,f=n>0?u/n:0,m=t.reduce((j,N)=>j+N.totalMagnitude,0),h=t.reduce((j,N)=>j+N.maxDuration,0),v=n>0?m/n:0,y=n>0?h/n:0,w={};t.forEach(j=>{j.ingredients.forEach(N=>{w[N]=(w[N]||0)+1})});const x=Object.entries(w).map(([j,N])=>({name:j,count:N})).sort((j,N)=>N.count-j.count).slice(0,10),p={};t.forEach(j=>{j.effects.forEach(N=>{p[N.name]=(p[N.name]||0)+1})});const b=Object.entries(p).map(([j,N])=>({name:j,count:N})).sort((j,N)=>N.count-j.count).slice(0,10);return{totalRecipes:n,foodRecipes:s,alcoholRecipes:r,recipesByCategory:i,recipesByDifficulty:o,recipesByEffect:l,averageIngredientCount:d,averageEffectCount:f,averageMagnitude:v,averageDuration:y,topEffects:b,topIngredients:x}}static getEffectComparisons(t,n){const s={};return n.forEach(r=>{r.effects.forEach(i=>{s[i.name]||(s[i.name]={magnitudeSum:0,durationSum:0,count:0}),s[i.name].magnitudeSum+=i.magnitude,s[i.name].durationSum+=i.duration,s[i.name].count+=1})}),t.effects.map(r=>{const i=s[r.name],o=i.count>0?i.magnitudeSum/i.count:0,l=i.count>0?i.durationSum/i.count:0,c=r.magnitude-o,u=r.duration-l;return{name:r.name,magnitude:{value:r.magnitude,mean:o,difference:c,percentage:o>0?c/o*100:0},duration:{value:r.duration,mean:l,difference:u,percentage:l>0?u/l*100:0}}})}}const fi=class fi{constructor(){Pe(this,"cache",null);Pe(this,"lastFetch",0);Pe(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return fi.instance||(fi.instance=new fi),fi.instance}async loadRecipes(){var t;if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const n=Wt("data/cookbook-wiki.json"),s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch recipes: ${s.status} ${s.statusText}`);const r=await s.json(),i=[];if(r.food&&Array.isArray(r.food)?i.push(...r.food):r.food&&typeof r.food=="object"&&r.food.recipes&&Array.isArray(r.food.recipes)&&i.push(...r.food.recipes),r.alcohol&&Array.isArray(r.alcohol)?i.push(...r.alcohol):r.alcohol&&typeof r.alcohol=="object"&&r.alcohol.recipes&&Array.isArray(r.alcohol.recipes)&&i.push(...r.alcohol.recipes),i.length===0){const u=((t=r.food)==null?void 0:t.recipes)||r.recipes||r;Array.isArray(u)&&i.push(...u)}if(!Array.isArray(i)||i.length===0)throw new Error("RecipeDataProvider: No valid recipes found in data structure");const o=[];let l=0,c=0;for(const u of i)if(Ke.isValid(u)){const d=Ke.addComputedProperties(u);o.push(d),l++}else console.warn("RecipeDataProvider: Invalid recipe data:",u),c++;return this.cache=o,this.lastFetch=Date.now(),o}catch(n){throw n}}async getRecipeData(){const t=await this.loadRecipes(),n=Ke.getStatistics(t);return{recipes:t,totalCount:n.totalRecipes,categories:Ke.getUniqueCategories(t),effects:Ke.getUniqueEffects(t),ingredients:Ke.getUniqueIngredients(t),lastUpdated:new Date().toISOString()}}async getRecipeByName(t){return(await this.loadRecipes()).find(s=>s.name===t)||null}async getRecipesByCategory(t){const n=await this.loadRecipes();return Ke.filterByCategory(n,t)}async getRecipesByDifficulty(t){const n=await this.loadRecipes();return Ke.filterByDifficulty(n,t)}async getRecipesByIngredient(t){const n=await this.loadRecipes();return Ke.filterByIngredients(n,[t])}async getRecipesByEffect(t){const n=await this.loadRecipes();return Ke.filterByEffects(n,[t])}async searchRecipes(t){const n=await this.loadRecipes();return Ke.search(n,t).map(r=>r.recipe)}async getStatistics(){const t=await this.loadRecipes();return Ke.getStatistics(t)}clearCache(){this.cache=null,this.lastFetch=0}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isExpired:this.cache!==null&&Date.now()-this.lastFetch>=this.CACHE_DURATION,timeUntilExpiry:this.cache?Math.max(0,this.CACHE_DURATION-(Date.now()-this.lastFetch)):0}}};Pe(fi,"instance");let xp=fi;const xr=Nn((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const r=await xp.getInstance().loadRecipes();e({data:r,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load recipes",loading:!1})}}},getById:n=>t().data.find(r=>r.name===n),getByName:n=>t().data.find(r=>r.name===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l,c,u,d,f;return i.name.toLowerCase().includes(r)||i.output.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.category)==null?void 0:l.toLowerCase().includes(r))||((c=i.difficulty)==null?void 0:c.toLowerCase().includes(r))||((u=i.tags)==null?void 0:u.some(m=>m.toLowerCase().includes(r)))||((d=i.ingredients)==null?void 0:d.some(m=>m.toLowerCase().includes(r)))||((f=i.effects)==null?void 0:f.some(m=>{var h;return m.name.toLowerCase().includes(r)||((h=m.description)==null?void 0:h.toLowerCase().includes(r))}))})},getByCategory:n=>t().data.filter(r=>r.category===n),getByDifficulty:n=>t().data.filter(r=>r.difficulty===n),getByIngredient:n=>t().data.filter(r=>r.ingredients.some(i=>i.toLowerCase().includes(n.toLowerCase()))),getByEffect:n=>t().data.filter(r=>r.effects.some(i=>i.name.toLowerCase().includes(n.toLowerCase())))})),k8=Object.freeze(Object.defineProperty({__proto__:null,useRecipesStore:xr},Symbol.toStringTag,{value:"Module"}));class ni{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.editorId=="string"&&typeof t.school=="string"&&typeof t.level=="string"&&typeof t.magickaCost=="number"&&Array.isArray(t.effects)}static equals(t,n){return t.editorId===n.editorId}static addComputedProperties(t){const n=t.effects.length>0,s=t.effects.length,r=t.effects.some(m=>m.area>0),i=t.effects.some(m=>m.duration>0),o=t.effects.every(m=>m.duration===0),l=t.effects.reduce((m,h)=>m+h.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=Math.max(...t.effects.map(m=>m.area),0),d=this.generateTags(t,{hasEffects:n,isAreaSpell:r,isDurationSpell:i,isInstantSpell:o}),f=this.createSearchableText(t,d);return{...t,hasEffects:n,effectCount:s,isAreaSpell:r,isDurationSpell:i,isInstantSpell:o,totalMagnitude:l,maxDuration:c,maxArea:u,tags:d,searchableText:f}}static generateTags(t,n){const s=[];return s.push(t.school),s.push(t.level),n.hasEffects&&s.push("Has Effects"),n.isAreaSpell&&s.push("Area Effect"),n.isDurationSpell&&s.push("Duration"),n.isInstantSpell&&s.push("Instant"),t.magickaCost===0?s.push("Free"):t.magickaCost<=50?s.push("Low Cost"):t.magickaCost<=150?s.push("Medium Cost"):s.push("High Cost"),t.effects.forEach(r=>{r.name.toLowerCase().includes("fire")&&s.push("Fire"),(r.name.toLowerCase().includes("frost")||r.name.toLowerCase().includes("ice"))&&s.push("Frost"),(r.name.toLowerCase().includes("shock")||r.name.toLowerCase().includes("lightning"))&&s.push("Shock"),(r.name.toLowerCase().includes("heal")||r.name.toLowerCase().includes("restore"))&&s.push("Healing"),(r.name.toLowerCase().includes("conjure")||r.name.toLowerCase().includes("summon"))&&s.push("Conjuration"),(r.name.toLowerCase().includes("fear")||r.name.toLowerCase().includes("calm"))&&s.push("Illusion"),(r.name.toLowerCase().includes("paralyze")||r.name.toLowerCase().includes("slow"))&&s.push("Control")}),[...new Set(s)]}static createSearchableText(t,n){return[t.name,t.school,t.level,t.description,...n,...t.effects.map(r=>r.name),...t.effects.map(r=>r.description)].join(" ").toLowerCase()}static filterBySchool(t,n){return t.filter(s=>s.school===n)}static filterByLevel(t,n){return t.filter(s=>s.level===n)}static filterBySchools(t,n){return n.length===0?t:t.filter(s=>n.includes(s.school))}static filterByLevels(t,n){return n.length===0?t:t.filter(s=>n.includes(s.level))}static filterByMagickaCost(t,n,s){return t.filter(r=>!(n!==null&&r.magickaCost<n||s!==null&&r.magickaCost>s))}static filterByMagnitude(t,n,s){return t.filter(r=>!(n!==null&&r.totalMagnitude<n||s!==null&&r.totalMagnitude>s))}static filterByEffectProperties(t,n,s,r){return t.filter(i=>!(n!==null&&i.hasEffects!==n||s!==null&&i.isAreaSpell!==s||r!==null&&i.isDurationSpell!==r))}static search(t,n){if(!n.trim())return t.map(i=>({spell:i,score:1,matchedFields:[]}));const s=n.toLowerCase(),r=[];return t.forEach(i=>{let o=0;const l=[];i.name.toLowerCase()===s?(o+=100,l.push("name")):i.name.toLowerCase().includes(s)&&(o+=50,l.push("name")),i.school.toLowerCase()===s?(o+=30,l.push("school")):i.school.toLowerCase().includes(s)&&(o+=15,l.push("school")),i.level.toLowerCase()===s?(o+=25,l.push("level")):i.level.toLowerCase().includes(s)&&(o+=10,l.push("level")),i.description.toLowerCase().includes(s)&&(o+=5,l.push("description")),i.tags.forEach(c=>{c.toLowerCase().includes(s)&&(o+=3,l.push("tags"))}),i.effects.forEach(c=>{c.name.toLowerCase().includes(s)&&(o+=8,l.push("effects")),c.description.toLowerCase().includes(s)&&(o+=4,l.push("effects"))}),o>0&&r.push({spell:i,score:o,matchedFields:[...new Set(l)]})}),r.sort((i,o)=>o.score-i.score)}static sort(t,n,s="asc"){return[...t].sort((i,o)=>{let l=0;switch(n){case"name":l=i.name.localeCompare(o.name);break;case"school":l=i.school.localeCompare(o.school);break;case"level":l=this.compareLevels(i.level,o.level);break;case"magickaCost":l=i.magickaCost-o.magickaCost;break;case"magnitude":l=i.totalMagnitude-o.totalMagnitude;break;case"duration":l=i.maxDuration-o.maxDuration;break}return s==="desc"?-l:l})}static compareLevels(t,n){const s=["Novice","Apprentice","Adept","Expert","Master"],r=s.indexOf(t),i=s.indexOf(n);return r===-1&&i===-1?0:r===-1?1:i===-1?-1:r-i}static getUniqueSchools(t){return[...new Set(t.map(n=>n.school))].sort()}static getUniqueLevels(t){const n=[...new Set(t.map(s=>s.level))];return this.sortLevels(n)}static sortLevels(t){const n=["Novice","Apprentice","Adept","Expert","Master"];return t.sort((s,r)=>{const i=n.indexOf(s),o=n.indexOf(r);return i===-1&&o===-1?0:i===-1?1:o===-1?-1:i-o})}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static applyFilters(t,n){let s=[...t];return n.schools.length>0&&(s=this.filterBySchools(s,n.schools)),n.levels.length>0&&(s=this.filterByLevels(s,n.levels)),s=this.filterByEffectProperties(s,n.hasEffects,n.isAreaSpell,n.isDurationSpell),s=this.filterByMagickaCost(s,n.minMagickaCost,n.maxMagickaCost),s=this.filterByMagnitude(s,n.minMagnitude,n.maxMagnitude),n.searchTerm&&(s=this.search(s,n.searchTerm).map(i=>i.spell)),s}static getStatistics(t){const n=this.getUniqueSchools(t),s=this.getUniqueLevels(t),r=this.getUniqueTags(t),i=t.length,o=t.filter(m=>m.hasEffects).length,l=t.filter(m=>m.isAreaSpell).length,c=t.filter(m=>m.isDurationSpell).length,u=t.filter(m=>m.magickaCost===0).length,d=t.length>0?t.reduce((m,h)=>m+h.magickaCost,0)/t.length:0,f=t.length>0?t.reduce((m,h)=>m+h.totalMagnitude,0)/t.length:0;return{totalSpells:i,spellsWithEffects:o,areaSpells:l,durationSpells:c,freeSpells:u,avgMagickaCost:Math.round(d),avgMagnitude:Math.round(f),schools:n,levels:s,tags:r}}}const mi=class mi{constructor(){Pe(this,"cache",null);Pe(this,"lastFetch",0);Pe(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return mi.instance||(mi.instance=new mi),mi.instance}async loadSpells(){if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const t=Wt("data/player_spells.json"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch spells: ${n.status} ${n.statusText}`);const s=await n.json(),r=[];let i=0,o=0;for(const l of s)if(ni.isValid(l)){const c=ni.addComputedProperties(l);r.push(c),i++}else console.warn("SpellDataProvider: Invalid spell data:",l),o++;return this.cache=r,this.lastFetch=Date.now(),r}catch(t){throw console.error("SpellDataProvider: Error loading spells:",t),t}}async getSpellData(){const t=await this.loadSpells(),n=ni.getStatistics(t);return{spells:t,totalCount:n.totalSpells,schools:n.schools,levels:n.levels,lastUpdated:new Date().toISOString()}}async getSpellByEditorId(t){return(await this.loadSpells()).find(s=>s.editorId===t)||null}async getSpellsBySchool(t){const n=await this.loadSpells();return ni.filterBySchool(n,t)}async getSpellsByLevel(t){const n=await this.loadSpells();return ni.filterByLevel(n,t)}async searchSpells(t){const n=await this.loadSpells();return ni.search(n,t).map(r=>r.spell)}async getStatistics(){const t=await this.loadSpells();return ni.getStatistics(t)}clearCache(){this.cache=null,this.lastFetch=0}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isValid:this.isCacheValid()}}};Pe(mi,"instance");let Nf=mi;const C8=Object.freeze(Object.defineProperty({__proto__:null,SpellDataProvider:Nf},Symbol.toStringTag,{value:"Module"})),wo=Nn((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const r=await Nf.getInstance().loadSpells();e({data:r,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load spells",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),getByEditorId:n=>t().data.find(r=>r.editorId===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l,c,u,d;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.school)==null?void 0:l.toLowerCase().includes(r))||((c=i.level)==null?void 0:c.toLowerCase().includes(r))||((u=i.tags)==null?void 0:u.some(f=>f.toLowerCase().includes(r)))||((d=i.effects)==null?void 0:d.some(f=>{var m;return f.name.toLowerCase().includes(r)||((m=f.description)==null?void 0:m.toLowerCase().includes(r))}))})},getBySchool:n=>t().data.filter(r=>r.school===n),getByLevel:n=>t().data.filter(r=>r.level===n)}));function E8(e,t){let n;try{n=e()}catch{return}return{getItem:r=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=n.getItem(r))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(r,i)=>n.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>n.removeItem(r)}}const vp=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return vp(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return vp(s)(n)}}}},A8=(e,t)=>(n,s,r)=>{let i={storage:E8(()=>localStorage),partialize:y=>y,version:0,merge:(y,w)=>({...w,...y}),...t},o=!1;const l=new Set,c=new Set;let u=i.storage;if(!u)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},s,r);const d=()=>{const y=i.partialize({...s()});return u.setItem(i.name,{state:y,version:i.version})},f=r.setState;r.setState=(y,w)=>{f(y,w),d()};const m=e((...y)=>{n(...y),d()},s,r);r.getInitialState=()=>m;let h;const v=()=>{var y,w;if(!u)return;o=!1,l.forEach(p=>{var b;return p((b=s())!=null?b:m)});const x=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(y=s())!=null?y:m))||void 0;return vp(u.getItem.bind(u))(i.name).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==i.version){if(i.migrate){const b=i.migrate(p.state,p.version);return b instanceof Promise?b.then(j=>[!0,j]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,p.state];return[!1,void 0]}).then(p=>{var b;const[j,N]=p;if(h=i.merge(N,(b=s())!=null?b:m),n(h,!0),j)return d()}).then(()=>{x==null||x(h,void 0),h=s(),o=!0,c.forEach(p=>p(h))}).catch(p=>{x==null||x(void 0,p)})};return r.persist={setOptions:y=>{i={...i,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},i.skipHydration||v(),h||m},T8=A8,Ze={FUZZY_SEARCH:"Fuzzy Search",SEARCH_ALL:"Search All",CATEGORIES:"Categories",TYPES:"Types"},Yk=Nn()(T8((e,t)=>({activeFilters:{types:[],categories:[],tags:[]},selectedTags:[],viewMode:"grid",lastSearchQuery:"",setActiveFilters:n=>{e({activeFilters:n})},updateActiveFilters:n=>{e(s=>({activeFilters:{...s.activeFilters,...n}}))},addTag:n=>{e(s=>{if(s.selectedTags.some(l=>l.value===n.value&&l.category===n.category))return s;const i=[...s.selectedTags,n];let o={...s.activeFilters};return n.category===Ze.TYPES?o.types=[...o.types,n.value]:n.category===Ze.CATEGORIES?o.categories=[...o.categories,n.value]:(n.category===Ze.FUZZY_SEARCH||n.category===Ze.SEARCH_ALL)&&(o.tags=[...o.tags,n.value]),{selectedTags:i,activeFilters:o}})},removeTag:n=>{e(s=>{const r=s.selectedTags.find(l=>l.id===n);if(!r)return s;const i=s.selectedTags.filter(l=>l.id!==n);let o={...s.activeFilters};return r.category===Ze.TYPES?o.types=o.types.filter(l=>l!==r.value):r.category===Ze.CATEGORIES?o.categories=o.categories.filter(l=>l!==r.value):(r.category===Ze.FUZZY_SEARCH||r.category===Ze.SEARCH_ALL)&&(o.tags=o.tags.filter(l=>l!==r.value)),{selectedTags:i,activeFilters:o}})},removeTagByValue:(n,s)=>{e(r=>{const i=r.selectedTags.filter(l=>!(l.value===n&&(!s||l.category===s)));let o={...r.activeFilters};return s===Ze.TYPES?o.types=o.types.filter(l=>l!==n):s===Ze.CATEGORIES?o.categories=o.categories.filter(l=>l!==n):(s===Ze.FUZZY_SEARCH||s===Ze.SEARCH_ALL)&&(o.tags=o.tags.filter(l=>l!==n)),{selectedTags:i,activeFilters:o}})},clearAllTags:()=>{e({selectedTags:[],activeFilters:{types:[],categories:[],tags:[]}})},setTags:n=>{e(s=>{let r={types:[],categories:[],tags:[]};return n.forEach(i=>{i.category===Ze.TYPES?r.types.push(i.value):i.category===Ze.CATEGORIES?r.categories.push(i.value):(i.category===Ze.FUZZY_SEARCH||i.category===Ze.SEARCH_ALL)&&r.tags.push(i.value)}),{selectedTags:n,activeFilters:r}})},addTags:n=>{e(s=>{const r=new Set(s.selectedTags.map(c=>`${c.value}-${c.category}`)),i=n.filter(c=>!r.has(`${c.value}-${c.category}`));if(i.length===0)return s;const o=[...s.selectedTags,...i];let l={...s.activeFilters};return i.forEach(c=>{c.category===Ze.TYPES?l.types.push(c.value):c.category===Ze.CATEGORIES?l.categories.push(c.value):(c.category===Ze.FUZZY_SEARCH||c.category===Ze.SEARCH_ALL)&&l.tags.push(c.value)}),{selectedTags:o,activeFilters:l}})},setViewMode:n=>{e({viewMode:n})},setLastSearchQuery:n=>{e({lastSearchQuery:n})},clearLastSearchQuery:()=>{e({lastSearchQuery:""})},hasTag:(n,s)=>t().selectedTags.some(i=>i.value===n&&(!s||i.category===s)),getTagsByCategory:n=>t().selectedTags.filter(r=>r.category===n),getFuzzySearchTags:()=>t().selectedTags.filter(s=>s.category===Ze.FUZZY_SEARCH||s.category===Ze.SEARCH_ALL),getFilterTags:()=>t().selectedTags.filter(s=>s.category!==Ze.FUZZY_SEARCH&&s.category!==Ze.SEARCH_ALL),clearAllSearchState:()=>{e({activeFilters:{types:[],categories:[],tags:[]},selectedTags:[],viewMode:"grid",lastSearchQuery:""})}}),{name:"global-search-storage",partialize:e=>({activeFilters:e.activeFilters,selectedTags:e.selectedTags,viewMode:e.viewMode,lastSearchQuery:e.lastSearchQuery})}));function _8(){const{data:e,loading:t,error:n}=Ua();return{data:e.length>0?e:null,loading:t,error:n}}function M8(){const{data:e,loading:t,error:n}=Gi();return{data:e.length>0?e:null,loading:t,error:n}}function Xk(){const{data:e,loading:t,error:n}=Ll();return{data:e,loading:t,error:n}}function R8(){const{data:e,loading:t,error:n}=x0();return{data:e,loading:t,error:n}}function D8(){const{data:e,loading:t,error:n}=Vi();return{data:e.length>0?e:null,loading:t,error:n}}function L8(){const{data:e,loading:t,error:n}=Dl();return{data:e.length>0?e:null,loading:t,error:n}}function V0(){const{data:e,loading:t,error:n}=Ui();return{data:e.length>0?e:null,loading:t,error:n}}function z8({children:e,showLoadingIndicator:t=!1}){const[n,s]=g.useState(!0),[r,i]=g.useState(null),o=g.useRef(!1),l=Vi(p=>p.load),c=x0(p=>p.load),u=Dl(p=>p.load),d=Ui(p=>p.load),f=ks(p=>p.load),m=xr(p=>p.load),h=Ll(p=>p.load),v=Ua(p=>p.load),y=wo(p=>p.load),w=Gi(p=>p.load),x=g.useCallback(async()=>{if(!o.current)try{s(!0),i(null),await Promise.all([l(),c(),u(),d(),f(),m(),h(),v(),y(),w()]),o.current=!0,s(!1)}catch(p){console.error("Failed to initialize data:",p),i(p instanceof Error?p.message:"Failed to initialize data"),s(!1)}},[l,c,u,d,f,m,h,v,y,w]);return g.useEffect(()=>{x()},[x]),n&&t?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading data..."})]})}):r?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Failed to Load Data"}),a.jsx("p",{className:"text-sm",children:r})]}),a.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})}):a.jsx(a.Fragment,{children:e})}function pe({children:e,className:t,expanded:n,onToggle:s,disableHover:r=!1,hideChevron:i=!1}){let o,l,c,u;P.Children.forEach(e,y=>{P.isValidElement(y)&&(y.type===pe.Header&&(o=y),y.type===pe.Summary&&(l=y),y.type===pe.Footer&&(c=y),y.type===pe.Details&&(u=y))});const[d,f]=g.useState(!1),m=n!==void 0?n:d,h=s||(()=>f(y=>!y)),v=r?"":"hover:shadow-md hover:scale-[1.02]";return a.jsxs("div",{className:F("rounded-lg border bg-background shadow-sm transition-all duration-200 flex flex-col",v,t),children:[o&&P.cloneElement(o,{onClick:h,expanded:m,hideChevron:i}),a.jsxs("div",{className:"flex-1",children:[l,m&&u]}),c]})}pe.Header=function({children:t,className:n,onClick:s,expanded:r,hideChevron:i=!1}){const o=()=>{s==null||s()};return a.jsxs("div",{className:F("flex items-center gap-3 px-4 py-3 bg-muted/30 cursor-pointer select-none hover:bg-muted/50 transition-colors duration-200 rounded-t-lg",r&&"bg-muted/50",n),onClick:o,tabIndex:0,role:"button","aria-expanded":r,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),o())},children:[t,!i&&a.jsx("span",{className:F("ml-auto transition-transform duration-200 text-muted-foreground",r?"rotate-180":""),children:a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:a.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})})]})};pe.Summary=function({children:t,className:n}){return a.jsx("div",{className:F("px-4 py-2 space-y-3",n),children:t})};pe.Footer=function({children:t,className:n}){return a.jsx("div",{className:F("px-4 py-2",n),children:t})};pe.Details=function({children:t,className:n}){return a.jsx("div",{className:F("px-4 py-4 space-y-4 bg-background rounded-b-lg",n),children:t})};const Ob={Warrior:{background:"bg-red-200",text:"text-red-800",border:"border-red-300",hover:"hover:bg-red-300"},Mage:{background:"bg-blue-200",text:"text-blue-800",border:"border-blue-300",hover:"hover:bg-blue-300"},Thief:{background:"bg-green-200",text:"text-green-800",border:"border-green-300",hover:"hover:bg-green-300"},Serpent:{background:"bg-purple-200",text:"text-purple-800",border:"border-purple-300",hover:"hover:bg-purple-300"},Other:{background:"bg-yellow-200",text:"text-yellow-800",border:"border-yellow-300",hover:"hover:bg-yellow-300"}};function P8(e){return Ob[e]||Ob.Other}function Bm({className:e="",threshold:t=300}){const[n,s]=g.useState(!1);g.useEffect(()=>{const i=()=>{window.pageYOffset>t?s(!0):s(!1)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[t]);const r=i=>{i.preventDefault(),i.stopPropagation(),window.scrollTo({top:0,behavior:"smooth"})};return n?a.jsx("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 cursor-pointer ${e}`,onClick:i=>i.stopPropagation(),onMouseEnter:i=>i.stopPropagation(),onMouseLeave:i=>i.stopPropagation(),children:a.jsxs(U,{onClick:r,size:"default",variant:"outline",className:"flex items-center gap-2 shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out transform hover:scale-110 bg-skyrim-gold/90 hover:bg-skyrim-gold text-skyrim-dark border-skyrim-gold hover:border-skyrim-gold backdrop-blur supports-[backdrop-filter]:bg-skyrim-gold/80 hover:supports-[backdrop-filter]:bg-skyrim-gold/95 cursor-pointer",children:[a.jsx(Lc,{className:"h-5 w-5 transition-transform duration-300 ease-in-out group-hover:translate-y-[-2px]"}),"Back to top"]})}):null}const $8={race:{Human:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Elf:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Beast:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},religion:{Divine:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Daedric:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Tribunal:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Ancestor:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},trait:{},destiny:{}},O8={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},I8="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function Wk({category:e,categoryType:t,size:n="md",className:s}){const i=$8[t][e]||I8;return a.jsx(Z,{variant:"outline",className:F(i,O8[n],"font-medium transition-colors",s),children:e})}const Ib={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-16 h-16","2xl":"w-16 h-16","3xl":"w-24 h-24","4xl":"w-32 h-32"},B8={sm:"text-sm",md:"text-lg",lg:"text-xl",xl:"text-2xl","2xl":"text-3xl","3xl":"text-3xl","4xl":"text-4xl"};function Fm({imgSrc:e,alt:t,size:n="md",className:s,imageClassName:r,showBorder:i=!1}){const[o,l]=P.useState(!1);return!e||o?a.jsx("div",{className:F("bg-white dark:bg-white text-black dark:text-black rounded-full flex items-center justify-center font-bold",Ib[n],s),children:a.jsx("span",{className:F(B8[n]),children:t.charAt(0)})}):a.jsxs("div",{className:F("rounded-full flex items-center justify-center relative","bg-white dark:bg-white",Ib[n],s),children:[i&&a.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-black dark:border-white pointer-events-none"}),a.jsx("img",{src:e,alt:t,className:F(i?"w-3/4 h-3/4 object-contain":"w-full h-full object-contain",r),onError:()=>l(!0),loading:"lazy"})]})}function F8({isExpanded:e,onToggle:t,className:n,leftControls:s,header:r,collapsedContent:i,expandedContent:o,actionArea:l,children:c}){return c?a.jsx("div",{className:F("rounded-lg border bg-background shadow-sm transition-all",n),children:c}):a.jsxs("div",{className:F("rounded-lg border bg-background shadow-sm transition-all group",e?"ring-2 ring-skyrim-gold/60":"",n),children:[a.jsxs("div",{className:"flex items-start",children:[s&&a.jsx("div",{className:"mr-2 flex-shrink-0",children:s}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r&&a.jsx("div",{className:"flex-1 min-w-0",children:r}),a.jsxs("button",{type:"button",onClick:t,"aria-expanded":e,className:"ml-2 p-1 rounded hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-skyrim-gold",tabIndex:0,children:[a.jsx("span",{className:"sr-only",children:e?"Collapse":"Expand"}),a.jsx("svg",{className:F("h-4 w-4 transition-transform",e?"rotate-90":""),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:a.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})}),l&&a.jsx("div",{className:"ml-2 flex-shrink-0",children:l})]}),i&&a.jsx("div",{className:"mt-2",children:i}),e&&o&&a.jsx("div",{className:"mt-4",children:o})]})}function Cu({options:e,onSelect:t,placeholder:n="Search...",className:s="",disabled:r=!1,searchQuery:i,onSearchQueryChange:o,renderOption:l,emptyMessage:c="No options found",maxHeight:u="max-h-96",showClearButton:d=!0,showToggleButton:f=!0}){const[m,h]=g.useState(!1),[v,y]=g.useState(""),[w,x]=g.useState(-1),p=g.useRef(null),b=g.useRef(null),j=i??v,N=o??y;g.useEffect(()=>{const R=_=>{p.current&&!p.current.contains(_.target)&&(h(!1),x(-1))};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const A=R=>{N(R),h(!0),x(-1)},k=R=>{t(R),N(""),h(!1),x(-1)},C=R=>{R.key==="ArrowDown"?(R.preventDefault(),x(_=>Math.min(_+1,e.length-1))):R.key==="ArrowUp"?(R.preventDefault(),x(_=>Math.max(_-1,-1))):R.key==="Enter"?(R.preventDefault(),w>=0&&e[w]&&k(e[w])):R.key==="Escape"&&(h(!1),x(-1))},S=()=>{h(!0)},E=()=>{var R;N(""),(R=b.current)==null||R.focus()},T=()=>{var R;h(!m),m||(R=b.current)==null||R.focus()},z=(R,_)=>a.jsxs("div",{className:"flex items-center gap-3",children:[R.icon&&a.jsx("div",{className:"flex-shrink-0",children:R.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium truncate",children:R.label}),R.badge&&a.jsx("div",{className:"flex-shrink-0",children:R.badge})]}),R.description&&a.jsx(Le,{text:R.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return a.jsxs("div",{ref:p,className:F("relative",s),children:[a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Dt,{ref:b,type:"text",placeholder:n,value:j,onChange:R=>A(R.target.value),onFocus:S,onKeyDown:C,className:"pl-10 pr-20",disabled:r}),d&&j&&a.jsx(U,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted",onClick:E,disabled:r,children:a.jsx(Me,{className:"h-4 w-4"})}),f&&a.jsx(U,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:T,disabled:r,children:a.jsx(Je,{className:F("h-4 w-4 transition-transform",m&&"rotate-180")})})]}),m&&a.jsx("div",{className:F("absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",u),style:{zIndex:Nt.AUTOCOMPLETE+10},children:a.jsx("div",{className:"p-2",children:e.length===0?a.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:c}):e.map((R,_)=>a.jsx("button",{onClick:()=>k(R),className:F("w-full text-left px-3 py-3 rounded-lg text-sm transition-all duration-200 cursor-pointer",_===w?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"),disabled:r,children:l?l(R,_===w):z(R)},R.id))})})]})}function Xa(e="(max-width: 640px)"){const t=()=>typeof window>"u"||typeof window.matchMedia>"u"?!1:window.matchMedia(e).matches,[n,s]=g.useState(t);return g.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia>"u")return;const r=window.matchMedia(e),i=()=>s(r.matches);return s(r.matches),r.addEventListener("change",i),()=>{r.removeEventListener("change",i)}},[e]),n}function Ki({open:e,onOpenChange:t,title:n,description:s,side:r="right",className:i,mobileQuery:o="(max-width: 640px)",resetKey:l,children:c}){const u=Xa(o),d=g.useRef(null);g.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[e,u]),g.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[l]);const f=F("flex flex-col",u?"inset-0 top-0 left-0 right-0 bottom-0 h-[100dvh] max-h-[100dvh] w-[100vw] p-0 rounded-none border-0 overflow-y-auto":"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0 overflow-y-auto bg-background",i);return a.jsx(is,{open:e,onOpenChange:t,children:a.jsxs(Fn,{side:u?"bottom":r,className:f,children:[(n||s)&&a.jsx("div",{className:F("sticky top-0 z-10 bg-background border-b",u?"p-4 pr-16":"p-4"),children:a.jsxs(os,{className:"p-0",children:[n&&a.jsx(ls,{children:n}),s&&a.jsx(Zr,{children:s})]})}),a.jsx("div",{ref:d,className:F("flex-1 overflow-y-auto overscroll-contain",u?"p-4":"p-6"),children:c})]})})}function G0({viewMode:e,onViewModeChange:t,className:n=""}){return a.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[a.jsxs(U,{variant:e==="grid"?"default":"outline",size:"sm",onClick:()=>t("grid"),className:"flex items-center gap-2",children:[a.jsx(Fi,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(U,{variant:e==="list"?"default":"outline",size:"sm",onClick:()=>t("list"),className:"flex items-center gap-2",children:[a.jsx(Ha,{className:"h-4 w-4"}),"List"]})]})}const H8={Warrior:"Warrior.svg",Lady:"Lady.svg",Lord:"Lord.svg",Steed:"Steed.svg",Mage:"Mage.svg",Apprentice:"Apprentice.svg",Atronach:"Atronach.svg",Ritual:"Ritual.svg",Thief:"Thief.svg",Lover:"Lover.svg",Shadow:"Shadow.svg",Tower:"Tower.svg",Serpent:"Serpent.svg"};function q0({birthsignName:e,size:t="md",className:n}){const s=H8[e],r=s?Wt(`assets/sign-avatar/${s}`):void 0;return a.jsxs("div",{className:"relative",children:[a.jsx(Fm,{imgSrc:r,alt:e,size:t,className:n,imageClassName:"scale-[160%]",showBorder:!1}),a.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-black dark:border-white pointer-events-none z-10"})]})}function Kk(e){return e&&e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function Qk(e){return e?Kk(e):""}function Jk(e){return e?Kk(e):""}function Or(e){return Array.isArray?Array.isArray(e):nC(e)==="[object Array]"}function U8(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function V8(e){return e==null?"":U8(e)}function Us(e){return typeof e=="string"}function eC(e){return typeof e=="number"}function G8(e){return e===!0||e===!1||q8(e)&&nC(e)=="[object Boolean]"}function tC(e){return typeof e=="object"}function q8(e){return tC(e)&&e!==null}function Rn(e){return e!=null}function Zh(e){return!e.trim().length}function nC(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Z8="Incorrect 'index' type",Y8=e=>`Invalid value for key ${e}`,X8=e=>`Pattern length exceeds max of ${e}.`,W8=e=>`Missing ${e} property in key`,K8=e=>`Property 'weight' in key '${e}' must be a positive integer`,Bb=Object.prototype.hasOwnProperty;class Q8{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(s=>{let r=sC(s);this._keys.push(r),this._keyMap[r.id]=r,n+=r.weight}),this._keys.forEach(s=>{s.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function sC(e){let t=null,n=null,s=null,r=1,i=null;if(Us(e)||Or(e))s=e,t=Fb(e),n=yp(e);else{if(!Bb.call(e,"name"))throw new Error(W8("name"));const o=e.name;if(s=o,Bb.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(K8(o));t=Fb(o),n=yp(o),i=e.getFn}return{path:t,id:n,weight:r,src:s,getFn:i}}function Fb(e){return Or(e)?e:e.split(".")}function yp(e){return Or(e)?e.join("."):e}function J8(e,t){let n=[],s=!1;const r=(i,o,l)=>{if(Rn(i))if(!o[l])n.push(i);else{let c=o[l];const u=i[c];if(!Rn(u))return;if(l===o.length-1&&(Us(u)||eC(u)||G8(u)))n.push(V8(u));else if(Or(u)){s=!0;for(let d=0,f=u.length;d<f;d+=1)r(u[d],o,l+1)}else o.length&&r(u,o,l+1)}};return r(e,Us(t)?t.split("."):t,0),s?n:n[0]}const eB={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},tB={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},nB={location:0,threshold:.6,distance:100},sB={useExtendedSearch:!1,getFn:J8,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var he={...tB,...eB,...nB,...sB};const rB=/[^ ]+/g;function aB(e=1,t=3){const n=new Map,s=Math.pow(10,t);return{get(r){const i=r.match(rB).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*e),l=parseFloat(Math.round(o*s)/s);return n.set(i,l),l},clear(){n.clear()}}}class Z0{constructor({getFn:t=he.getFn,fieldNormWeight:n=he.fieldNormWeight}={}){this.norm=aB(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Us(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Us(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Rn(t)||Zh(t))return;let s={v:t,i:n,n:this.norm.get(t)};this.records.push(s)}_addObject(t,n){let s={i:n,$:{}};this.keys.forEach((r,i)=>{let o=r.getFn?r.getFn(t):this.getFn(t,r.path);if(Rn(o)){if(Or(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(Rn(d))if(Us(d)&&!Zh(d)){let f={v:d,i:u,n:this.norm.get(d)};l.push(f)}else Or(d)&&d.forEach((f,m)=>{c.push({nestedArrIndex:m,value:f})})}s.$[i]=l}else if(Us(o)&&!Zh(o)){let l={v:o,n:this.norm.get(o)};s.$[i]=l}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function rC(e,t,{getFn:n=he.getFn,fieldNormWeight:s=he.fieldNormWeight}={}){const r=new Z0({getFn:n,fieldNormWeight:s});return r.setKeys(e.map(sC)),r.setSources(t),r.create(),r}function iB(e,{getFn:t=he.getFn,fieldNormWeight:n=he.fieldNormWeight}={}){const{keys:s,records:r}=e,i=new Z0({getFn:t,fieldNormWeight:n});return i.setKeys(s),i.setIndexRecords(r),i}function cd(e,{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:r=he.distance,ignoreLocation:i=he.ignoreLocation}={}){const o=t/e.length;if(i)return o;const l=Math.abs(s-n);return r?o+l/r:l?1:o}function oB(e=[],t=he.minMatchCharLength){let n=[],s=-1,r=-1,i=0;for(let o=e.length;i<o;i+=1){let l=e[i];l&&s===-1?s=i:!l&&s!==-1&&(r=i-1,r-s+1>=t&&n.push([s,r]),s=-1)}return e[i-1]&&i-s>=t&&n.push([s,i-1]),n}const ui=32;function lB(e,t,n,{location:s=he.location,distance:r=he.distance,threshold:i=he.threshold,findAllMatches:o=he.findAllMatches,minMatchCharLength:l=he.minMatchCharLength,includeMatches:c=he.includeMatches,ignoreLocation:u=he.ignoreLocation}={}){if(t.length>ui)throw new Error(X8(ui));const d=t.length,f=e.length,m=Math.max(0,Math.min(s,f));let h=i,v=m;const y=l>1||c,w=y?Array(f):[];let x;for(;(x=e.indexOf(t,v))>-1;){let k=cd(t,{currentLocation:x,expectedLocation:m,distance:r,ignoreLocation:u});if(h=Math.min(k,h),v=x+d,y){let C=0;for(;C<d;)w[x+C]=1,C+=1}}v=-1;let p=[],b=1,j=d+f;const N=1<<d-1;for(let k=0;k<d;k+=1){let C=0,S=j;for(;C<S;)cd(t,{errors:k,currentLocation:m+S,expectedLocation:m,distance:r,ignoreLocation:u})<=h?C=S:j=S,S=Math.floor((j-C)/2+C);j=S;let E=Math.max(1,m-S+1),T=o?f:Math.min(m+S,f)+d,z=Array(T+2);z[T+1]=(1<<k)-1;for(let _=T;_>=E;_-=1){let $=_-1,L=n[e.charAt($)];if(y&&(w[$]=+!!L),z[_]=(z[_+1]<<1|1)&L,k&&(z[_]|=(p[_+1]|p[_])<<1|1|p[_+1]),z[_]&N&&(b=cd(t,{errors:k,currentLocation:$,expectedLocation:m,distance:r,ignoreLocation:u}),b<=h)){if(h=b,v=$,v<=m)break;E=Math.max(1,2*m-v)}}if(cd(t,{errors:k+1,currentLocation:m,expectedLocation:m,distance:r,ignoreLocation:u})>h)break;p=z}const A={isMatch:v>=0,score:Math.max(.001,b)};if(y){const k=oB(w,l);k.length?c&&(A.indices=k):A.isMatch=!1}return A}function cB(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<s-n-1}return t}const Sf=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class aC{constructor(t,{location:n=he.location,threshold:s=he.threshold,distance:r=he.distance,includeMatches:i=he.includeMatches,findAllMatches:o=he.findAllMatches,minMatchCharLength:l=he.minMatchCharLength,isCaseSensitive:c=he.isCaseSensitive,ignoreDiacritics:u=he.ignoreDiacritics,ignoreLocation:d=he.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d},t=c?t:t.toLowerCase(),t=u?Sf(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(h,v)=>{this.chunks.push({pattern:h,alphabet:cB(h),startIndex:v})},m=this.pattern.length;if(m>ui){let h=0;const v=m%ui,y=m-v;for(;h<y;)f(this.pattern.substr(h,ui),h),h+=ui;if(v){const w=m-ui;f(this.pattern.substr(w),w)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r}=this.options;if(t=n?t:t.toLowerCase(),t=s?Sf(t):t,this.pattern===t){let y={isMatch:!0,score:0};return r&&(y.indices=[[0,t.length-1]]),y}const{location:i,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:d}=this.options;let f=[],m=0,h=!1;this.chunks.forEach(({pattern:y,alphabet:w,startIndex:x})=>{const{isMatch:p,score:b,indices:j}=lB(t,y,w,{location:i+x,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:r,ignoreLocation:d});p&&(h=!0),m+=b,p&&j&&(f=[...f,...j])});let v={isMatch:h,score:h?m/this.chunks.length:1};return h&&r&&(v.indices=f),v}}class Wa{constructor(t){this.pattern=t}static isMultiMatch(t){return Hb(t,this.multiRegex)}static isSingleMatch(t){return Hb(t,this.singleRegex)}search(){}}function Hb(e,t){const n=e.match(t);return n?n[1]:null}class uB extends Wa{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class dB extends Wa{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class fB extends Wa{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class mB extends Wa{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class hB extends Wa{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class gB extends Wa{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class iC extends Wa{constructor(t,{location:n=he.location,threshold:s=he.threshold,distance:r=he.distance,includeMatches:i=he.includeMatches,findAllMatches:o=he.findAllMatches,minMatchCharLength:l=he.minMatchCharLength,isCaseSensitive:c=he.isCaseSensitive,ignoreDiacritics:u=he.ignoreDiacritics,ignoreLocation:d=he.ignoreLocation}={}){super(t),this._bitapSearch=new aC(t,{location:n,threshold:s,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class oC extends Wa{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,s;const r=[],i=this.pattern.length;for(;(s=t.indexOf(this.pattern,n))>-1;)n=s+i,r.push([s,n-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const bp=[uB,oC,fB,mB,gB,hB,dB,iC],Ub=bp.length,pB=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,xB="|";function vB(e,t={}){return e.split(xB).map(n=>{let s=n.trim().split(pB).filter(i=>i&&!!i.trim()),r=[];for(let i=0,o=s.length;i<o;i+=1){const l=s[i];let c=!1,u=-1;for(;!c&&++u<Ub;){const d=bp[u];let f=d.isMultiMatch(l);f&&(r.push(new d(f,t)),c=!0)}if(!c)for(u=-1;++u<Ub;){const d=bp[u];let f=d.isSingleMatch(l);if(f){r.push(new d(f,t));break}}}return r})}const yB=new Set([iC.type,oC.type]);class bB{constructor(t,{isCaseSensitive:n=he.isCaseSensitive,ignoreDiacritics:s=he.ignoreDiacritics,includeMatches:r=he.includeMatches,minMatchCharLength:i=he.minMatchCharLength,ignoreLocation:o=he.ignoreLocation,findAllMatches:l=he.findAllMatches,location:c=he.location,threshold:u=he.threshold,distance:d=he.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r,minMatchCharLength:i,findAllMatches:l,ignoreLocation:o,location:c,threshold:u,distance:d},t=n?t:t.toLowerCase(),t=s?Sf(t):t,this.pattern=t,this.query=vB(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r,ignoreDiacritics:i}=this.options;t=r?t:t.toLowerCase(),t=i?Sf(t):t;let o=0,l=[],c=0;for(let u=0,d=n.length;u<d;u+=1){const f=n[u];l.length=0,o=0;for(let m=0,h=f.length;m<h;m+=1){const v=f[m],{isMatch:y,indices:w,score:x}=v.search(t);if(y){if(o+=1,c+=x,s){const p=v.constructor.type;yB.has(p)?l=[...l,...w]:l.push(w)}}else{c=0,o=0,l.length=0;break}}if(o){let m={isMatch:!0,score:c/o};return s&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const wp=[];function wB(...e){wp.push(...e)}function jp(e,t){for(let n=0,s=wp.length;n<s;n+=1){let r=wp[n];if(r.condition(e,t))return new r(e,t)}return new aC(e,t)}const kf={AND:"$and",OR:"$or"},Np={PATH:"$path",PATTERN:"$val"},Sp=e=>!!(e[kf.AND]||e[kf.OR]),jB=e=>!!e[Np.PATH],NB=e=>!Or(e)&&tC(e)&&!Sp(e),Vb=e=>({[kf.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function lC(e,t,{auto:n=!0}={}){const s=r=>{let i=Object.keys(r);const o=jB(r);if(!o&&i.length>1&&!Sp(r))return s(Vb(r));if(NB(r)){const c=o?r[Np.PATH]:i[0],u=o?r[Np.PATTERN]:r[c];if(!Us(u))throw new Error(Y8(c));const d={keyId:yp(c),pattern:u};return n&&(d.searcher=jp(u,t)),d}let l={children:[],operator:i[0]};return i.forEach(c=>{const u=r[c];Or(u)&&u.forEach(d=>{l.children.push(s(d))})}),l};return Sp(e)||(e=Vb(e)),s(e)}function SB(e,{ignoreFieldNorm:t=he.ignoreFieldNorm}){e.forEach(n=>{let s=1;n.matches.forEach(({key:r,norm:i,score:o})=>{const l=r?r.weight:null;s*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:i))}),n.score=s})}function kB(e,t){const n=e.matches;t.matches=[],Rn(n)&&n.forEach(s=>{if(!Rn(s.indices)||!s.indices.length)return;const{indices:r,value:i}=s;let o={indices:r,value:i};s.key&&(o.key=s.key.src),s.idx>-1&&(o.refIndex=s.idx),t.matches.push(o)})}function CB(e,t){t.score=e.score}function EB(e,t,{includeMatches:n=he.includeMatches,includeScore:s=he.includeScore}={}){const r=[];return n&&r.push(kB),s&&r.push(CB),e.map(i=>{const{idx:o}=i,l={item:t[o],refIndex:o};return r.length&&r.forEach(c=>{c(i,l)}),l})}class ln{constructor(t,n={},s){this.options={...he,...n},this.options.useExtendedSearch,this._keyStore=new Q8(this.options.keys),this.setCollection(t,s)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Z0))throw new Error(Z8);this._myIndex=n||rC(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Rn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let s=0,r=this._docs.length;s<r;s+=1){const i=this._docs[s];t(i,s)&&(this.removeAt(s),s-=1,r-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:i,sortFn:o,ignoreFieldNorm:l}=this.options;let c=Us(t)?Us(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return SB(c,{ignoreFieldNorm:l}),i&&c.sort(o),eC(n)&&n>-1&&(c=c.slice(0,n)),EB(c,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(t){const n=jp(t,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:i,i:o,n:l})=>{if(!Rn(i))return;const{isMatch:c,score:u,indices:d}=n.searchIn(i);c&&r.push({item:i,idx:o,matches:[{score:u,value:i,norm:l,indices:d}]})}),r}_searchLogical(t){const n=lC(t,this.options),s=(l,c,u)=>{if(!l.children){const{keyId:f,searcher:m}=l,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:m});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const d=[];for(let f=0,m=l.children.length;f<m;f+=1){const h=l.children[f],v=s(h,c,u);if(v.length)d.push(...v);else if(l.operator===kf.AND)return[]}return d},r=this._myIndex.records,i={},o=[];return r.forEach(({$:l,i:c})=>{if(Rn(l)){let u=s(n,l,c);u.length&&(i[c]||(i[c]={idx:c,item:l,matches:[]},o.push(i[c])),u.forEach(({matches:d})=>{i[c].matches.push(...d)}))}}),o}_searchObjectList(t){const n=jp(t,this.options),{keys:s,records:r}=this._myIndex,i=[];return r.forEach(({$:o,i:l})=>{if(!Rn(o))return;let c=[];s.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:o[d],searcher:n}))}),c.length&&i.push({idx:l,item:o,matches:c})}),i}_findMatches({key:t,value:n,searcher:s}){if(!Rn(n))return[];let r=[];if(Or(n))n.forEach(({v:i,i:o,n:l})=>{if(!Rn(i))return;const{isMatch:c,score:u,indices:d}=s.searchIn(i);c&&r.push({score:u,key:t,value:i,idx:o,norm:l,indices:d})});else{const{v:i,n:o}=n,{isMatch:l,score:c,indices:u}=s.searchIn(i);l&&r.push({score:c,key:t,value:i,norm:o,indices:u})}return r}}ln.version="7.1.0";ln.createIndex=rC;ln.parseIndex=iB;ln.config=he;ln.parseQuery=lC;wB(bB);function cC(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:l.description,group:l.group,statModifications:l.stat_modifications.map(d=>`${d.stat} ${d.type} ${d.value}${d.value_type==="percentage"?"%":""}`),skillBonuses:l.skill_bonuses.map(d=>`${d.stat} +${d.value}${d.value_type==="percentage"?"%":""}`),powers:l.powers.map(d=>`${d.name} ${d.description}`),conditionalEffects:((c=l.conditional_effects)==null?void 0:c.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],masteryEffects:((u=l.mastery_effects)==null?void 0:u.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],originalBirthsign:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"powers",weight:.2},{name:"statModifications",weight:.15},{name:"skillBonuses",weight:.15},{name:"conditionalEffects",weight:.1},{name:"masteryEffects",weight:.1},{name:"group",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new ln(n,s),[n,s]),i=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredBirthsigns:g.useMemo(()=>i.map(l=>l.item.originalBirthsign),[i]),searchResults:i,searchableBirthsigns:n}}function Gb({birthsigns:e,onSelect:t,placeholder:n="Search birthsigns...",className:s=""}){const[r,i]=g.useState(""),[o,l]=g.useState(!1),c=Xa("(max-width: 640px)"),u=g.useRef(null),{filteredBirthsigns:d}=cC(e,r),f=g.useMemo(()=>d.map(x=>({id:x.edid,label:x.name,description:x.description,category:x.group,icon:a.jsx(q0,{birthsignName:x.name,size:"md"}),badge:x.group&&a.jsx(Z,{variant:"outline",className:F("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:x.group}),metadata:{originalBirthsign:x}})),[d]),m=x=>{const p=e.find(b=>b.edid===x.id);p&&(t(p),l(!1),i(""))},h=x=>{i(x.target.value),setTimeout(()=>{var p;(p=u.current)==null||p.focus()},0)},v=(x,p)=>a.jsxs("div",{className:"flex items-center gap-3",children:[x.icon&&a.jsx("div",{className:"flex-shrink-0",children:x.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:x.label}),x.badge&&a.jsx("div",{className:"flex-shrink-0",children:x.badge})]}),x.description&&a.jsx(Le,{text:x.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]}),y=()=>a.jsxs(is,{open:o,onOpenChange:l,children:[a.jsx(Va,{asChild:!0,children:a.jsxs(U,{variant:"outline",className:F("w-full justify-between text-left font-normal",!r&&"text-muted-foreground",s),children:[a.jsx("span",{children:r||n}),a.jsx(Je,{className:"h-4 w-4 opacity-50"})]})}),a.jsxs(Fn,{side:"bottom",className:"h-[85vh] max-h-[85vh] p-0 flex flex-col",onOpenAutoFocus:x=>x.preventDefault(),children:[a.jsxs(os,{className:"p-4 border-b flex-shrink-0",children:[a.jsx(ls,{children:"Select Birth Sign"}),a.jsx(Zr,{children:"Choose your character's birth sign from the options below"})]}),a.jsx("div",{className:"p-4 border-b flex-shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Dt,{ref:u,placeholder:"Search birthsigns...",value:r,onChange:h,className:"pl-10"}),r&&a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>i(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",children:a.jsx(Me,{className:"h-3 w-3"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:f.length===0?a.jsxs("div",{className:"text-center py-8 px-4",children:[a.jsx("p",{className:"text-muted-foreground",children:"No birthsigns found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search"})]}):a.jsx("div",{className:"p-4 space-y-3",children:f.map(x=>a.jsx(U,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:()=>m(x),children:a.jsx("div",{className:"w-full",children:v(x)})},x.id))})})]})]}),w=()=>a.jsx(Cu,{options:f,onSelect:m,placeholder:n,className:s,renderOption:v,emptyMessage:"No birthsigns found",searchQuery:r,onSearchQueryChange:i});return c?a.jsx(y,{}):a.jsx(w,{})}function Cf({item:e,originalBirthsign:t,isExpanded:n=!1,onToggle:s,onClick:r,className:i,showViewAllButton:o=!1,showToggle:l=!0,viewAllButtonText:c="View All",viewAllButtonRoute:u="/birthsigns"}){var A,k,C;const d=lt(),f=()=>{d(u)},m=S=>{S.target.closest("[data-no-click]")||r==null||r()},h=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Birthsign";e!=null&&e.description||t!=null&&t.description;const v=(e==null?void 0:e.category)||(t==null?void 0:t.group)||"";e!=null&&e.effects;const y=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"",w=()=>{if(!(t!=null&&t.stat_modifications))return{health:0,magicka:0,stamina:0};const S={health:0,magicka:0,stamina:0};return t.stat_modifications.forEach(E=>{const T=E.type==="bonus"?E.value:-E.value;E.stat.toLowerCase().includes("health")?S.health+=T:E.stat.toLowerCase().includes("magicka")?S.magicka+=T:E.stat.toLowerCase().includes("stamina")&&(S.stamina+=T)}),S},x=()=>{if(!t)return[];const S=[];return t.powers&&S.push(...t.powers.map(E=>({name:E.name,type:"power"}))),t.conditional_effects&&S.push(...t.conditional_effects.map(E=>({name:E.stat,type:"conditional"}))),t.mastery_effects&&S.push(...t.mastery_effects.map(E=>({name:E.stat,type:"mastery"}))),S},p=S=>{const E=P8(S);return`${E.background} ${E.text} ${E.border}`},b=S=>{switch(S){case"health":return"bg-red-200 text-red-800 border-red-300";case"magicka":return"bg-blue-200 text-blue-800 border-blue-300";case"stamina":return"bg-green-200 text-green-800 border-green-300";default:return"bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30"}},j=w(),N=x();return a.jsxs("div",{className:F("rounded-lg border bg-background shadow-sm transition-all h-full flex flex-col",r&&"cursor-pointer hover:shadow-md hover:bg-accent/50 hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",i),onClick:r?m:void 0,children:[a.jsxs("div",{className:"flex items-start justify-between p-4 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(q0,{birthsignName:h,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(je,{className:"text-primary font-semibold",children:h}),a.jsxs("div",{className:"flex items-center gap-2",children:[v&&a.jsx("div",{className:`inline-flex items-center justify-center px-2 py-1 border rounded-full text-xs font-medium w-16 ${p(v)}`,children:v}),(j.health!==0||j.magicka!==0||j.stamina!==0)&&a.jsxs("div",{className:"flex gap-1",children:[j.health!==0&&a.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 border rounded-full text-xs font-medium ${b("health")}`,children:[a.jsx(Qs,{className:"h-3 w-3"}),a.jsxs("span",{children:[j.health>0?"+":"",j.health]})]}),j.magicka!==0&&a.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 border rounded-full text-xs font-medium ${b("magicka")}`,children:[a.jsx(sn,{className:"h-3 w-3"}),a.jsxs("span",{children:[j.magicka>0?"+":"",j.magicka]})]}),j.stamina!==0&&a.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 border rounded-full text-xs font-medium ${b("stamina")}`,children:[a.jsx(at,{className:"h-3 w-3"}),a.jsxs("span",{children:[j.stamina>0?"+":"",j.stamina]})]})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[N.length>0&&a.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(qe,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{children:[N.length," effects"]})]})}),o&&a.jsxs(U,{variant:"outline",size:"sm",onClick:f,className:"text-xs","data-no-click":!0,children:[a.jsx(Fa,{className:"h-3 w-3 mr-1"}),c]}),l&&a.jsx("div",{"data-no-click":!0,children:a.jsx(ds,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"stone",itemName:h})})]})]}),a.jsxs("div",{className:"flex-1 px-4 pb-4 min-h-0",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsx(Le,{text:y})}),t&&a.jsxs("div",{className:"flex flex-wrap gap-2",children:[(A=t.powers)==null?void 0:A.slice(0,3).map((S,E)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(qe,{className:"h-3 w-3"}),S.name]},E)),(k=t.conditional_effects)==null?void 0:k.slice(0,3).map((S,E)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-200 text-purple-800 border border-purple-300 rounded-full text-xs font-medium",children:[a.jsx(at,{className:"h-3 w-3"}),S.stat]},`conditional-${E}`)),(C=t.mastery_effects)==null?void 0:C.slice(0,3).map((S,E)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-200 text-blue-800 border border-blue-300 rounded-full text-xs font-medium",children:[a.jsx(qe,{className:"h-3 w-3"}),S.stat]},`mastery-${E}`))]})]}),n&&t&&a.jsxs("div",{className:"space-y-4 mt-4",children:[t.stat_modifications&&t.stat_modifications.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Stat Modifications"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.stat_modifications.map((S,E)=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize",children:Qk(S.stat)}),a.jsxs("span",{className:F("font-bold",S.type==="bonus"?"text-green-600":"text-red-600"),children:[S.type==="bonus"?"+":"-",S.value,S.value_type==="percentage"?"%":""]})]},E))})]}),t.skill_bonuses&&t.skill_bonuses.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Skill Bonuses"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.skill_bonuses.map((S,E)=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize",children:Jk(S.stat)}),a.jsxs("span",{className:"font-bold text-green-600",children:["+",S.value,S.value_type==="percentage"?"%":""]})]},E))})]}),t.powers&&t.powers.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs(rn,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[a.jsx(sn,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),a.jsx("div",{className:"space-y-2",children:t.powers.map((S,E)=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(qe,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:S.name})]}),a.jsx(Le,{text:S.description}),(S.magnitude||S.duration)&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-2",children:[S.magnitude&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Magnitude:"})," ",S.magnitude]}),S.duration&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Duration:"})," ",S.duration,"s"]})]})]},E))})]}),t.conditional_effects&&t.conditional_effects.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs(rn,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[a.jsx(at,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),a.jsx("div",{className:"space-y-2",children:t.conditional_effects.map((S,E)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsx("div",{className:"flex items-center gap-2 mb-1",children:a.jsx("span",{className:"font-medium text-sm capitalize",children:S.stat})}),a.jsx(Le,{text:S.description}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Condition:"})," ",S.condition]})]},E))})]}),t.mastery_effects&&t.mastery_effects.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs(rn,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[a.jsx(qe,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),a.jsx("div",{className:"space-y-2",children:t.mastery_effects.map((S,E)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(qe,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),a.jsx("div",{className:"text-sm font-medium capitalize",children:S.stat}),a.jsx(Le,{text:S.description}),S.condition&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Requirement:"})," ",S.condition]})]},E))})]})]})]})]})}function AB(e){const t=e.map(n=>n.group);return[...new Set(t)].sort()}function TB(e){const t=e.flatMap(n=>[...n.stat_modifications.map(s=>s.stat),...n.skill_bonuses.map(s=>s.stat)]);return[...new Set(t)].sort()}var _B="Separator",qb="horizontal",MB=["horizontal","vertical"],uC=g.forwardRef((e,t)=>{const{decorative:n,orientation:s=qb,...r}=e,i=RB(s)?s:qb,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(we.div,{"data-orientation":i,...l,...r,ref:t})});uC.displayName=_B;function RB(e){return MB.includes(e)}var DB=uC;function di({className:e,orientation:t="horizontal",decorative:n=!0,...s}){return a.jsx(DB,{"data-slot":"separator",decorative:n,orientation:t,className:F("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}function LB({birthsign:e,title:t,maxDisplay:n,compact:s=!1,className:r}){var c,u,d,f;if(!e)return null;const i=e.powers.length>0,o=((c=e.conditional_effects)==null?void 0:c.length)>0,l=((u=e.mastery_effects)==null?void 0:u.length)>0;if(!i&&!o&&!l)return null;if(s){const m=[...e.powers.map(v=>({type:"power",data:v})),...((d=e.conditional_effects)==null?void 0:d.map(v=>({type:"conditional",data:v})))||[],...((f=e.mastery_effects)==null?void 0:f.map(v=>({type:"mastery",data:v})))||[]],h=n?m.slice(0,n):m;return a.jsxs("div",{className:F("flex flex-wrap gap-2",r),children:[h.map((v,y)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(qe,{className:"h-3 w-3"}),v.data.name||v.data.stat]},y)),n&&m.length>n&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted text-muted-foreground border rounded-full text-xs font-medium",children:["+",m.length-n," more"]})]})}return a.jsxs(ce,{className:F("border-muted/50",r),children:[t&&a.jsx(be,{className:"pb-3",children:a.jsx(_e,{className:"text-base",children:t})}),a.jsxs(de,{className:"space-y-4",children:[i&&a.jsxs("div",{children:[a.jsxs(Sa,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(sn,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),a.jsx("div",{className:"space-y-2",children:e.powers.map((m,h)=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(qe,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:m.name})]}),a.jsx("div",{className:"border-t border-border my-2"}),a.jsx(Le,{text:m.description}),(m.magnitude||m.duration)&&a.jsxs("div",{className:"space-y-2 text-sm mt-2",children:[m.magnitude&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium min-w-[80px]",children:"Magnitude:"}),a.jsx("span",{children:m.magnitude})]}),m.duration&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium min-w-[80px]",children:"Duration:"}),a.jsxs("span",{children:[m.duration,"s"]})]})]})]},h))})]}),o&&a.jsxs("div",{children:[a.jsxs(Sa,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(at,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),a.jsx("div",{className:"space-y-2",children:e.conditional_effects.map((m,h)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Z,{variant:"outline",className:"text-xs bg-purple-200 text-purple-800 border-purple-300",children:"Conditional"}),a.jsx("span",{className:"font-medium text-sm capitalize",children:m.stat})]}),a.jsx(Le,{text:m.description}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Condition:"})," ",m.condition]})]},h))})]}),l&&a.jsxs("div",{children:[a.jsxs(Sa,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(qe,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),a.jsx("div",{className:"space-y-2",children:e.mastery_effects.map((m,h)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(qe,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),a.jsx("div",{className:"border-t border-border my-2"}),a.jsx("div",{className:"text-sm font-medium capitalize",children:m.stat}),a.jsx(Le,{text:m.description}),m.condition&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Requirement:"})," ",m.condition]})]},h))})]})]})]})}function zB({birthsign:e,title:t="Stat Modifications",className:n}){const s=e.stat_modifications.length>0,r=e.skill_bonuses.length>0;return!s&&!r?null:a.jsxs(ce,{className:F("border-muted/50",n),children:[a.jsx(be,{className:"pb-3",children:a.jsx(_e,{className:"text-base",children:t})}),a.jsxs(de,{className:"space-y-4",children:[s&&a.jsxs("div",{children:[a.jsx(Sa,{className:"text-sm font-medium mb-2",children:"Attributes"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.stat_modifications.map((i,o)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:Qk(i.stat)}),a.jsxs(Z,{variant:"outline",className:F("text-xs flex-shrink-0",i.type==="bonus"?"bg-green-200 text-green-800 border-green-300":"bg-red-200 text-red-800 border-red-300"),children:[i.type==="bonus"?"+":"-",i.value,i.value_type==="percentage"?"%":""]})]},o))})]}),r&&a.jsxs("div",{children:[a.jsx(Sa,{className:"text-sm font-medium mb-2",children:"Skill Bonuses"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.skill_bonuses.map((i,o)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:Jk(i.stat)}),a.jsxs(Z,{variant:"outline",className:"bg-blue-200 text-blue-800 border-blue-300 text-xs flex-shrink-0",children:["+",i.value,i.value_type==="percentage"?"%":""]})]},o))})]})]})]})}function PB({birthsign:e,isOpen:t,onOpenChange:n}){return e?a.jsx(Ki,{open:t,onOpenChange:n,side:"right",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(q0,{birthsignName:e.name,size:"4xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx(xa,{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"inline-flex items-center px-2 py-1 bg-skyrim-gold/10 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:e.group}),a.jsx(ds,{itemId:e.edid,itemType:"stone",itemName:e.name})]}),a.jsx(Le,{text:e.description})]})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(zB,{birthsign:e}),a.jsx(di,{}),a.jsx(LB,{birthsign:e,title:"Special Effects"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(je,{className:"text-lg font-semibold",children:"Game Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"EDID:"}),a.jsx("span",{className:"break-all",children:e.edid})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Form ID:"}),a.jsx("span",{className:"break-all",children:e.formid})]})]})]})]})]})}):null}var Hm="Collapsible",[$B,dC]=Vn(Hm),[OB,Y0]=$B(Hm),fC=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:r,disabled:i,onOpenChange:o,...l}=e,[c,u]=qr({prop:s,defaultProp:r??!1,onChange:o,caller:Hm});return a.jsx(OB,{scope:n,disabled:i,contentId:Tr(),open:c,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),children:a.jsx(we.div,{"data-state":W0(c),"data-disabled":i?"":void 0,...l,ref:t})})});fC.displayName=Hm;var mC="CollapsibleTrigger",hC=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,r=Y0(mC,n);return a.jsx(we.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":W0(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:t,onClick:se(e.onClick,r.onOpenToggle)})});hC.displayName=mC;var X0="CollapsibleContent",gC=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Y0(X0,e.__scopeCollapsible);return a.jsx(Kt,{present:n||r.open,children:({present:i})=>a.jsx(IB,{...s,ref:t,present:i})})});gC.displayName=X0;var IB=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:r,...i}=e,o=Y0(X0,n),[l,c]=g.useState(s),u=g.useRef(null),d=Be(t,u),f=g.useRef(0),m=f.current,h=g.useRef(0),v=h.current,y=o.open||l,w=g.useRef(y),x=g.useRef(void 0);return g.useEffect(()=>{const p=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(p)},[]),Ws(()=>{const p=u.current;if(p){x.current=x.current||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const b=p.getBoundingClientRect();f.current=b.height,h.current=b.width,w.current||(p.style.transitionDuration=x.current.transitionDuration,p.style.animationName=x.current.animationName),c(s)}},[o.open,s]),a.jsx(we.div,{"data-state":W0(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...i,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:y&&r})});function W0(e){return e?"open":"closed"}var BB=fC,FB=hC,HB=gC,Ts="Accordion",UB=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[K0,VB,GB]=y0(Ts),[Um,hse]=Vn(Ts,[GB,dC]),Q0=dC(),pC=P.forwardRef((e,t)=>{const{type:n,...s}=e,r=s,i=s;return a.jsx(K0.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?a.jsx(XB,{...i,ref:t}):a.jsx(YB,{...r,ref:t})})});pC.displayName=Ts;var[xC,qB]=Um(Ts),[vC,ZB]=Um(Ts,{collapsible:!1}),YB=P.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},collapsible:i=!1,...o}=e,[l,c]=qr({prop:n,defaultProp:s??"",onChange:r,caller:Ts});return a.jsx(xC,{scope:e.__scopeAccordion,value:P.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:P.useCallback(()=>i&&c(""),[i,c]),children:a.jsx(vC,{scope:e.__scopeAccordion,collapsible:i,children:a.jsx(yC,{...o,ref:t})})})}),XB=P.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...i}=e,[o,l]=qr({prop:n,defaultProp:s??[],onChange:r,caller:Ts}),c=P.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=P.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return a.jsx(xC,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:a.jsx(vC,{scope:e.__scopeAccordion,collapsible:!0,children:a.jsx(yC,{...i,ref:t})})})}),[WB,Vm]=Um(Ts),yC=P.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:r,orientation:i="vertical",...o}=e,l=P.useRef(null),c=Be(l,t),u=VB(n),f=wu(r)==="ltr",m=se(e.onKeyDown,h=>{var C;if(!UB.includes(h.key))return;const v=h.target,y=u().filter(S=>{var E;return!((E=S.ref.current)!=null&&E.disabled)}),w=y.findIndex(S=>S.ref.current===v),x=y.length;if(w===-1)return;h.preventDefault();let p=w;const b=0,j=x-1,N=()=>{p=w+1,p>j&&(p=b)},A=()=>{p=w-1,p<b&&(p=j)};switch(h.key){case"Home":p=b;break;case"End":p=j;break;case"ArrowRight":i==="horizontal"&&(f?N():A());break;case"ArrowDown":i==="vertical"&&N();break;case"ArrowLeft":i==="horizontal"&&(f?A():N());break;case"ArrowUp":i==="vertical"&&A();break}const k=p%x;(C=y[k].ref.current)==null||C.focus()});return a.jsx(WB,{scope:n,disabled:s,direction:r,orientation:i,children:a.jsx(K0.Slot,{scope:n,children:a.jsx(we.div,{...o,"data-orientation":i,ref:c,onKeyDown:s?void 0:m})})})}),Ef="AccordionItem",[KB,J0]=Um(Ef),bC=P.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...r}=e,i=Vm(Ef,n),o=qB(Ef,n),l=Q0(n),c=Tr(),u=s&&o.value.includes(s)||!1,d=i.disabled||e.disabled;return a.jsx(KB,{scope:n,open:u,disabled:d,triggerId:c,children:a.jsx(BB,{"data-orientation":i.orientation,"data-state":CC(u),...l,...r,ref:t,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(s):o.onItemClose(s)}})})});bC.displayName=Ef;var wC="AccordionHeader",jC=P.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=Vm(Ts,n),i=J0(wC,n);return a.jsx(we.h3,{"data-orientation":r.orientation,"data-state":CC(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:t})});jC.displayName=wC;var kp="AccordionTrigger",NC=P.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=Vm(Ts,n),i=J0(kp,n),o=ZB(kp,n),l=Q0(n);return a.jsx(K0.ItemSlot,{scope:n,children:a.jsx(FB,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...l,...s,ref:t})})});NC.displayName=kp;var SC="AccordionContent",kC=P.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=Vm(Ts,n),i=J0(SC,n),o=Q0(n);return a.jsx(HB,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...o,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});kC.displayName=SC;function CC(e){return e?"open":"closed"}var QB=pC,JB=bC,eF=jC,EC=NC,AC=kC;const tF=QB,TC=g.forwardRef(({className:e,...t},n)=>a.jsx(JB,{ref:n,className:F("border-b",e),...t}));TC.displayName="AccordionItem";const _C=g.forwardRef(({className:e,children:t,...n},s)=>a.jsx(eF,{className:"flex",children:a.jsxs(EC,{ref:s,className:F("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,a.jsx(Je,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));_C.displayName=EC.displayName;const MC=g.forwardRef(({className:e,children:t,...n},s)=>a.jsx(AC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:F("pb-4 pt-0",e),children:t})}));MC.displayName=AC.displayName;var nF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sF="VisuallyHidden",RC=g.forwardRef((e,t)=>a.jsx(we.span,{...e,ref:t,style:{...nF,...e.style}}));RC.displayName=sF;var rF=RC,[Gm,gse]=Vn("Tooltip",[$l]),ev=$l(),aF="TooltipProvider",Zb="tooltip.open",[pse,DC]=Gm(aF),LC="Tooltip",[xse,qm]=Gm(LC),Cp="TooltipTrigger",iF=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=qm(Cp,n),i=DC(Cp,n),o=ev(n),l=g.useRef(null),c=Be(t,l,r.onTriggerChange),u=g.useRef(!1),d=g.useRef(!1),f=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(_0,{asChild:!0,...o,children:a.jsx(we.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:c,onPointerMove:se(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),d.current=!0)}),onPointerLeave:se(e.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:se(e.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:se(e.onFocus,()=>{u.current||r.onOpen()}),onBlur:se(e.onBlur,r.onClose),onClick:se(e.onClick,r.onClose)})})});iF.displayName=Cp;var oF="TooltipPortal",[vse,lF]=Gm(oF,{forceMount:void 0}),rl="TooltipContent",zC=g.forwardRef((e,t)=>{const n=lF(rl,e.__scopeTooltip),{forceMount:s=n.forceMount,side:r="top",...i}=e,o=qm(rl,e.__scopeTooltip);return a.jsx(Kt,{present:s||o.open,children:o.disableHoverableContent?a.jsx(PC,{side:r,...i,ref:t}):a.jsx(cF,{side:r,...i,ref:t})})}),cF=g.forwardRef((e,t)=>{const n=qm(rl,e.__scopeTooltip),s=DC(rl,e.__scopeTooltip),r=g.useRef(null),i=Be(t,r),[o,l]=g.useState(null),{trigger:c,onClose:u}=n,d=r.current,{onPointerInTransitChange:f}=s,m=g.useCallback(()=>{l(null),f(!1)},[f]),h=g.useCallback((v,y)=>{const w=v.currentTarget,x={x:v.clientX,y:v.clientY},p=hF(x,w.getBoundingClientRect()),b=gF(x,p),j=pF(y.getBoundingClientRect()),N=vF([...b,...j]);l(N),f(!0)},[f]);return g.useEffect(()=>()=>m(),[m]),g.useEffect(()=>{if(c&&d){const v=w=>h(w,d),y=w=>h(w,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",y)}}},[c,d,h,m]),g.useEffect(()=>{if(o){const v=y=>{const w=y.target,x={x:y.clientX,y:y.clientY},p=(c==null?void 0:c.contains(w))||(d==null?void 0:d.contains(w)),b=!xF(x,o);p?m():b&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,m]),a.jsx(PC,{...e,ref:i})}),[uF,dF]=Gm(LC,{isInside:!1}),fF=PL("TooltipContent"),PC=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=qm(rl,n),u=ev(n),{onClose:d}=c;return g.useEffect(()=>(document.addEventListener(Zb,d),()=>document.removeEventListener(Zb,d)),[d]),g.useEffect(()=>{if(c.trigger){const f=m=>{const h=m.target;h!=null&&h.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),a.jsx(pu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:a.jsxs(M0,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(fF,{children:s}),a.jsx(uF,{scope:n,isInside:!0,children:a.jsx(rF,{id:c.contentId,role:"tooltip",children:r||s})})]})})});zC.displayName=rl;var $C="TooltipArrow",mF=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=ev(n);return dF($C,n).isInside?null:a.jsx(R0,{...r,...s,ref:t})});mF.displayName=$C;function hF(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,s,r,i)){case i:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function gF(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function pF(e){const{top:t,right:n,bottom:s,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:s},{x:r,y:s}]}function xF(e,t){const{x:n,y:s}=e;let r=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,m=c.y;d>s!=m>s&&n<(f-u)*(s-d)/(m-d)+u&&(r=!r)}return r}function vF(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),yF(t)}function yF(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const r=e[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const r=e[s];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var OC=zC;const bF=g.forwardRef(({className:e,sideOffset:t=4,...n},s)=>a.jsx(OC,{ref:s,sideOffset:t,className:F("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));bF.displayName=OC.displayName;function en({title:e,navigateTo:t,onNavigate:n,children:s,className:r,showHeaderButton:i=!0}){return a.jsxs(ce,{className:r,children:[a.jsx(be,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(_e,{className:"text-lg",children:e}),i&&a.jsxs(U,{variant:"outline",size:"sm",onClick:n,className:"text-sm whitespace-nowrap cursor-pointer",children:["View all ",t," â†’"]})]})}),a.jsx(de,{className:"space-y-4",children:s})]})}function IC(e){var t,n,s,r,i,o;return{id:`religion-${e.name.toLowerCase().replace(/\s+/g,"-")}`,name:e.name,description:((t=e.tenet)==null?void 0:t.description)||"",tags:_r()?e.favoredRaces||[]:[],summary:((n=e.tenet)==null?void 0:n.description)||"",effects:[...((r=(s=e.tenet)==null?void 0:s.effects)==null?void 0:r.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[],...((o=(i=e.blessing)==null?void 0:i.effects)==null?void 0:o.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[]],associatedItems:[],imageUrl:void 0,category:e.type}}function Yb(e){var t;return{...e,id:e.edid||e.name,name:e.name,description:e.description||"",tags:e.tags||[],summary:e.description||"",effects:[...((t=e.effects)==null?void 0:t.map(n=>({type:"positive",name:n.type,description:n.condition||n.type,value:n.value})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalTrait:e}}function BC(e){var s,r,i,o,l,c,u,d;const t=[...((s=e.stat_modifications)==null?void 0:s.map(f=>({type:f.type==="bonus"?"positive":"negative",name:`${f.stat} ${f.type==="bonus"?"+":"-"}${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} ${f.type==="bonus"?"increased":"decreased"} by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((r=e.skill_bonuses)==null?void 0:r.map(f=>({type:"positive",name:`${f.stat} +${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} skill increased by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((i=e.powers)==null?void 0:i.map(f=>({type:"positive",name:f.name,description:f.description,value:f.magnitude||0,target:"power"})))||[],...((o=e.conditional_effects)==null?void 0:o.map(f=>({type:"neutral",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[],...((l=e.mastery_effects)==null?void 0:l.map(f=>({type:"positive",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[]],n=[e.group,...((c=e.stat_modifications)==null?void 0:c.map(f=>f.stat))||[],...((u=e.skill_bonuses)==null?void 0:u.map(f=>f.stat))||[],...((d=e.powers)==null?void 0:d.map(f=>f.name))||[]].filter((f,m,h)=>h.indexOf(f)===m);return{...e,id:e.id||e.edid,name:e.name,description:e.description,tags:n,summary:e.description,effects:t,associatedItems:[],imageUrl:void 0,category:e.group,originalBirthsign:e}}function wF(e){var s;const t=[{type:"positive",name:e.name,description:e.description||"",value:0,target:"destiny"}],n=[...e.tags||[],...((s=e.prerequisites)==null?void 0:s.map(r=>`Requires: ${r}`))||[]].filter((r,i,o)=>o.indexOf(r)===i);return{...e,id:e.id||e.edid,name:e.name,description:e.description||"",tags:n,summary:e.description||"",effects:t,associatedItems:[],imageUrl:e.icon,category:"Destiny",originalDestinyNode:e}}function jF(){const{data:e,loading:t,error:n,load:s}=Vi();return{birthsigns:e,loading:t,error:n,refetch:s}}function FC({className:e}){const{birthsigns:t}=jF(),{build:n,setStone:s}=Xe(),r=lt(),i=n.stone?t.find(u=>u.edid===n.stone):null,o=u=>{s(u.edid)},l=()=>{r("/build/birth-signs")};if(!i)return a.jsxs(en,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's birthsign"}),a.jsx(Gb,{birthsigns:t,onSelect:o,placeholder:"Search for a birthsign...",className:"w-full"})]});const c=BC(i);return a.jsxs(en,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[a.jsx(Gb,{birthsigns:t,onSelect:o,placeholder:`Birth Sign: Select a birthsign (${i.name})`,className:"w-full"}),a.jsx(Cf,{item:c,originalBirthsign:i,isExpanded:!0,className:"border-0 shadow-none",showToggle:!1})]})}const NF={selectedTags:[],sortBy:"alphabetical",viewMode:"grid",expandedBirthsigns:new Set};function SF(e,t){switch(t.type){case"ADD_TAG":return e.selectedTags.some(n=>n.value===t.payload.value&&n.category===t.payload.category)?e:{...e,selectedTags:[...e.selectedTags,t.payload]};case"REMOVE_TAG":return{...e,selectedTags:e.selectedTags.filter(n=>n.id!==t.payload)};case"SET_SORT":return{...e,sortBy:t.payload};case"SET_VIEW_MODE":return{...e,viewMode:t.payload};case"TOGGLE_EXPANDED":{const n=new Set(e.expandedBirthsigns);return n.has(t.payload)?n.delete(t.payload):n.add(t.payload),{...e,expandedBirthsigns:n}}case"EXPAND_ALL":return{...e,expandedBirthsigns:new Set(t.payload)};case"COLLAPSE_ALL":return{...e,expandedBirthsigns:new Set};default:return e}}function kF(e){const[t,n]=g.useReducer(SF,NF),s=g.useMemo(()=>{const w=AB(e),x=TB(e);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"groups",name:"Birthsign Groups",placeholder:"Search by birthsign group...",options:w.map(p=>({id:`group-${p}`,label:p,value:p,category:"Birthsign Groups",description:`Birthsigns from ${p} group`}))},{id:"stats",name:"Stats & Skills",placeholder:"Search by stats and skills...",options:x.map(p=>({id:`stat-${p}`,label:p.replace(/_/g," ").replace(/\b\w/g,b=>b.toUpperCase()),value:p,category:"Stats & Skills",description:`Birthsigns that affect ${p}`}))}]},[e]),r=g.useMemo(()=>t.selectedTags.length===0?e:e.filter(w=>t.selectedTags.every(x=>{switch(x.category){case"Fuzzy Search":return!0;case"Birthsign Groups":return w.group===x.value;case"Stats & Skills":return[...w.stat_modifications.map(b=>b.stat),...w.skill_bonuses.map(b=>b.stat)].some(b=>b===x.value);default:return!0}})),[e,t.selectedTags]),i=g.useMemo(()=>t.selectedTags.filter(w=>w.category==="Fuzzy Search").map(w=>w.value).join(" "),[t.selectedTags]),{filteredBirthsigns:o}=cC(r,i),l=g.useMemo(()=>o.map(BC),[o]),c=g.useMemo(()=>[...l].sort((w,x)=>{var p,b;switch(t.sortBy){case"alphabetical":return w.name.localeCompare(x.name);case"group":{const j=k=>{switch(k){case"Warrior":return 1;case"Mage":return 2;case"Thief":return 3;case"Serpent":return 4;case"Other":return 5;default:return 6}},N=j(w.category),A=j(x.category);return N!==A?N-A:w.name.localeCompare(x.name)}case"power-count":{const j=((p=w.effects)==null?void 0:p.filter(A=>A.target==="power").length)||0,N=((b=x.effects)==null?void 0:b.filter(A=>A.target==="power").length)||0;return j!==N?N-j:w.name.localeCompare(x.name)}default:return 0}}),[l,t.sortBy]),u=g.useCallback(w=>{n({type:"ADD_TAG",payload:w})},[]),d=g.useCallback(w=>{n({type:"REMOVE_TAG",payload:w})},[]),f=g.useCallback(w=>{n({type:"SET_SORT",payload:w})},[]),m=g.useCallback(w=>{n({type:"SET_VIEW_MODE",payload:w})},[]),h=g.useCallback(w=>{n({type:"TOGGLE_EXPANDED",payload:w})},[]),v=g.useCallback(w=>{n({type:"EXPAND_ALL",payload:w})},[]),y=g.useCallback(()=>{n({type:"COLLAPSE_ALL"})},[]);return{...t,addTag:u,removeTag:d,setSort:f,setViewMode:m,toggleExpanded:h,expandAll:v,collapseAll:y,searchCategories:s,fuzzySearchQuery:i,filteredBirthsigns:r,displayItems:l,sortedDisplayItems:c}}function CF(){const{data:e,loading:t,error:n}=D8(),s=e||[],{selectedTags:r,sortBy:i,viewMode:o,addTag:l,removeTag:c,setSort:u,setViewMode:d,searchCategories:f,sortedDisplayItems:m}=kF(s),[h,v]=g.useState(null),[y,w]=g.useState(!1),x=p=>{v(p),w(!0)};return t?a.jsx(Yt,{title:"Birthsigns",description:"Choose your birthsign",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("p",{children:"Loading birthsigns..."})})}):n?a.jsx(Yt,{title:"Birthsigns",description:"Choose your birthsign",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("p",{className:"text-red-500",children:["Error loading birthsigns: ",n]})})}):a.jsxs(Yt,{title:"Birth Signs",description:"Choose your character's birthsign to gain unique abilities and bonuses based on the celestial constellations.",children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Yr,{categories:f,onSelect:p=>{let b;typeof p=="string"?b={id:`custom-${p}`,label:p,value:p,category:"Fuzzy Search"}:b={id:`${p.category}-${p.id}`,label:p.label,value:p.value,category:p.category},r.some(j=>j.value===b.value&&j.category===b.category)||l(b)},onCustomSearch:p=>{let b;typeof p=="string"?b={id:`custom-${p}`,label:p,value:p,category:"Fuzzy Search"}:b={id:`${p.category}-${p.id}`,label:p.label,value:p.value,category:p.category},r.some(j=>j.value===b.value&&j.category===b.category)||l(b)}})})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(U,{variant:o==="grid"?"default":"outline",size:"sm",onClick:()=>d("grid"),className:"flex items-center gap-2",children:[a.jsx(Fi,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(U,{variant:o==="list"?"default":"outline",size:"sm",onClick:()=>d("list"),className:"flex items-center gap-2",children:[a.jsx(Ha,{className:"h-4 w-4"}),"List"]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Xi,{children:[a.jsx(Wi,{asChild:!0,children:a.jsxs(U,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort:"," ",i==="alphabetical"?"A-Z":i==="group"?"Group":"Power Count",a.jsx(Je,{className:"h-4 w-4"})]})}),a.jsxs(Ya,{align:"end",children:[a.jsx(un,{onClick:()=>u("alphabetical"),children:"Alphabetical"}),a.jsx(un,{onClick:()=>u("group"),children:"By Group"}),a.jsx(un,{onClick:()=>u("power-count"),children:"By Power Count"})]})]})})]}),a.jsx("div",{className:"my-4",children:r.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>r.forEach(p=>c(p.id)),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Me,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),r.map(p=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>c(p.id),title:"Click to remove",children:[p.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},p.id))]})}),o==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:m.map(p=>{const b=s.find(j=>j.id===p.id||j.edid===p.id);return b?a.jsx(Cf,{originalBirthsign:b,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>x(b)},p.id):null})}):a.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:m.map(p=>{const b=s.find(j=>j.id===p.id||j.edid===p.id);return b?a.jsx(Cf,{originalBirthsign:b,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>x(b)},p.id):null})}),m.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No birthsigns found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),a.jsx(PB,{birthsign:h,isOpen:y,onOpenChange:w})]})}class zs{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.id=="string"&&typeof t.name=="string"&&typeof t.description=="string"&&Array.isArray(t.tags)&&Array.isArray(t.prerequisites)}static equals(t,n){return t.id===n.id}static hasTag(t,n){return t.tags.includes(n)}static hasAnyTag(t,n){return n.some(s=>this.hasTag(t,s))}static hasAllTags(t,n){return n.every(s=>this.hasTag(t,s))}static filterByTag(t,n){return t.filter(s=>this.hasTag(s,n))}static filterByAnyTag(t,n){return t.filter(s=>this.hasAnyTag(s,n))}static filterByAllTags(t,n){return t.filter(s=>this.hasAllTags(s,n))}static isRootNode(t){return t.prerequisites.length===0}static getRootNodes(t){return t.filter(n=>this.isRootNode(n))}static isLeafNode(t,n){return!n.some(s=>s.prerequisites.includes(t.edid))}static getLeafNodes(t){return t.filter(n=>this.isLeafNode(n,t))}static getNextNodes(t,n){return n.filter(s=>s.prerequisites.includes(t.edid))}static getPrerequisiteNodes(t,n){return n.filter(s=>t.prerequisites.includes(s.edid))}static search(t,n){const s=n.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||r.description.toLowerCase().includes(s)||r.tags.some(i=>i.toLowerCase().includes(s)))}static sortByName(t){return[...t].sort((n,s)=>n.name.localeCompare(s.name))}static sortByPrerequisites(t){return[...t].sort((n,s)=>n.prerequisites.length-s.prerequisites.length)}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static getUniquePrerequisites(t){const n=t.flatMap(s=>s.prerequisites);return[...new Set(n)].sort()}}function Ka(e={}){const{includePrerequisites:t=!1,includeNextNodes:n=!1,filterByTags:s=[],searchTerm:r="",sortBy:i="name"}=e,{data:o,loading:l,error:c,reload:u}=L8(),d=o||[],f=c,m=g.useMemo(()=>zs.getRootNodes(d),[d]),h=g.useMemo(()=>[],[d]),v=g.useMemo(()=>zs.getUniqueTags(d),[d]),y=g.useMemo(()=>{let S=[...d];return s.length>0&&(S=zs.filterByAnyTag(S,s)),r&&(S=zs.search(S,r)),i==="name"?S=zs.sortByName(S):i==="prerequisites"&&(S=zs.sortByPrerequisites(S)),S},[d,s,r,i]),w=S=>d.find(E=>E.id===S),x=S=>d.find(E=>E.edid===S);return{nodes:d,rootNodes:m,filteredNodes:y,isLoading:l,error:f,categories:h,tags:v,refresh:()=>{u()},getNodeById:w,getNodeByName:S=>d.find(E=>E.name===S),getNodeByEdid:x,getNextNodes:S=>{const E=x(S);return E?zs.getNextNodes(E,d):[]},getPrerequisiteNodes:S=>{const E=x(S);return E?zs.getPrerequisiteNodes(E,d):[]},filterByCategory:S=>[],filterByTag:S=>zs.filterByTag(d,S),searchNodes:S=>zs.search(d,S)}}function tv(e={}){const{initialPath:t=[],validatePath:n=!0}=e,[s,r]=g.useState(t),{nodes:i,rootNodes:o}=Ka(),l=g.useRef(t);g.useEffect(()=>{const j=l.current,N=t;JSON.stringify(j)!==JSON.stringify(N)&&(r(N),l.current=N)},[t]);const c=g.useMemo(()=>s.length>0?s[s.length-1]:null,[s]),u=g.useMemo(()=>s.length===0?o:i.filter(j=>j.prerequisites.length===0?!1:j.prerequisites.some(N=>s.some(A=>A.edid===N))),[s,i,o]),d=g.useMemo(()=>c?i.filter(j=>j.prerequisites.includes(c.edid)):o,[c,i,o]),f=g.useMemo(()=>c?i.filter(j=>c.prerequisites.includes(j.edid)):[],[c,i]),{isValidPath:m,pathErrors:h}=g.useMemo(()=>{if(!n||s.length===0)return{isValidPath:!0,pathErrors:[]};const j=[];for(let N=1;N<s.length;N++){const A=s[N],k=s.slice(0,N);!A.prerequisites.some(S=>k.some(E=>E.edid===S))&&A.prerequisites.length>0&&j.push(`${A.name} requires one of: ${A.prerequisites.join(", ")}`)}return{isValidPath:j.length===0,pathErrors:j}},[s,n]),v=g.useCallback(j=>{if(s.length>0){if(s[s.length-1],!j.prerequisites.some(A=>s.some(k=>k.edid===A))&&j.prerequisites.length>0)return!1}else if(j.prerequisites.length>0)return!1;return r(N=>[...N,j]),!0},[s]),y=g.useCallback(j=>{r(N=>N.slice(0,j+1))},[]),w=g.useCallback(j=>{r(j)},[]),x=g.useCallback(()=>{r([])},[]),p=g.useCallback(j=>{r(N=>N.slice(0,j+1))},[]),b=g.useCallback(()=>({startNode:s[0]||null,endNode:s[s.length-1]||null,totalNodes:s.length,pathString:s.map(j=>j.name).join(" â†’ ")}),[s]);return{currentPath:s,currentNode:c,availableNodes:u,rootNodes:o,isValidPath:m,pathErrors:h,addNodeToPath:v,removeNodeFromPath:y,setPath:w,clearPath:x,goToPathIndex:p,pathLength:s.length,isPathComplete:d.length===0,nextPossibleNodes:d,prerequisiteNodes:f,getPathSummary:b}}function Zm(e={}){const{fromNode:t,maxDepth:n=10}=e,{nodes:s,rootNodes:r,isLoading:i,error:o}=Ka();return{possiblePaths:g.useMemo(()=>{if(i||o||!s.length)return[];const c=[],u=new Set,d=m=>s.filter(h=>h.prerequisites.includes(m)),f=(m,h=0)=>{if(h>=n)return;const v=m[m.length-1],y=d(v.edid);if(y.length===0){c.push({path:[...m],isComplete:!0,endNode:v});return}y.forEach(w=>{const x=m.map(p=>p.id).join("->")+"->"+w.id;u.has(x)||(u.add(x),f([...m,w],h+1))})};if(t){if(d(t.edid).length===0)return[];f([t])}else r.forEach(m=>{f([m])});return c},[s,r,t,n,i,o]),isLoading:i,error:o}}var Yh,Ym="HoverCard",[HC,yse]=Vn(Ym,[$l]),Xm=$l(),[EF,Wm]=HC(Ym),UC=e=>{const{__scopeHoverCard:t,children:n,open:s,defaultOpen:r,onOpenChange:i,openDelay:o=700,closeDelay:l=300}=e,c=Xm(t),u=g.useRef(0),d=g.useRef(0),f=g.useRef(!1),m=g.useRef(!1),[h,v]=qr({prop:s,defaultProp:r??!1,onChange:i,caller:Ym}),y=g.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>v(!0),o)},[o,v]),w=g.useCallback(()=>{clearTimeout(u.current),!f.current&&!m.current&&(d.current=window.setTimeout(()=>v(!1),l))},[l,v]),x=g.useCallback(()=>v(!1),[v]);return g.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),a.jsx(EF,{scope:t,open:h,onOpenChange:v,onOpen:y,onClose:w,onDismiss:x,hasSelectionRef:f,isPointerDownOnContentRef:m,children:a.jsx(I2,{...c,children:n})})};UC.displayName=Ym;var VC="HoverCardTrigger",GC=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,...s}=e,r=Wm(VC,n),i=Xm(n);return a.jsx(_0,{asChild:!0,...i,children:a.jsx(we.a,{"data-state":r.open?"open":"closed",...s,ref:t,onPointerEnter:se(e.onPointerEnter,Tf(r.onOpen)),onPointerLeave:se(e.onPointerLeave,Tf(r.onClose)),onFocus:se(e.onFocus,r.onOpen),onBlur:se(e.onBlur,r.onClose),onTouchStart:se(e.onTouchStart,o=>o.preventDefault())})})});GC.displayName=VC;var nv="HoverCardPortal",[AF,TF]=HC(nv,{forceMount:void 0}),qC=e=>{const{__scopeHoverCard:t,forceMount:n,children:s,container:r}=e,i=Wm(nv,t);return a.jsx(AF,{scope:t,forceMount:n,children:a.jsx(Kt,{present:n||i.open,children:a.jsx(km,{asChild:!0,container:r,children:s})})})};qC.displayName=nv;var Af="HoverCardContent",ZC=g.forwardRef((e,t)=>{const n=TF(Af,e.__scopeHoverCard),{forceMount:s=n.forceMount,...r}=e,i=Wm(Af,e.__scopeHoverCard);return a.jsx(Kt,{present:s||i.open,children:a.jsx(_F,{"data-state":i.open?"open":"closed",...r,onPointerEnter:se(e.onPointerEnter,Tf(i.onOpen)),onPointerLeave:se(e.onPointerLeave,Tf(i.onClose)),ref:t})})});ZC.displayName=Af;var _F=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,...l}=e,c=Wm(Af,n),u=Xm(n),d=g.useRef(null),f=Be(t,d),[m,h]=g.useState(!1);return g.useEffect(()=>{if(m){const v=document.body;return Yh=v.style.userSelect||v.style.webkitUserSelect,v.style.userSelect="none",v.style.webkitUserSelect="none",()=>{v.style.userSelect=Yh,v.style.webkitUserSelect=Yh}}},[m]),g.useEffect(()=>{if(d.current){const v=()=>{h(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var w;((w=document.getSelection())==null?void 0:w.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",v),()=>{document.removeEventListener("pointerup",v),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),g.useEffect(()=>{d.current&&DF(d.current).forEach(y=>y.setAttribute("tabindex","-1"))}),a.jsx(pu,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:o,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:se(i,v=>{v.preventDefault()}),onDismiss:c.onDismiss,children:a.jsx(M0,{...u,...l,onPointerDown:se(l.onPointerDown,v=>{v.currentTarget.contains(v.target)&&h(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:{...l.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),MF="HoverCardArrow",RF=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,...s}=e,r=Xm(n);return a.jsx(R0,{...r,...s,ref:t})});RF.displayName=MF;function Tf(e){return t=>t.pointerType==="touch"?void 0:e()}function DF(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var LF=UC,zF=GC,PF=qC,YC=ZC;const XC=LF,WC=zF,$F=PF,sv=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},r)=>a.jsx(YC,{ref:r,align:t,sideOffset:n,className:F("w-64 rounded-md p-4 text-popover-foreground outline-none animate-in zoom-in-90 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-90 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Nt.TOOLTIP,backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},...s}));sv.displayName=YC.displayName;function OF({node:e,allNodes:t,children:n,showPrerequisites:s=!0,showNextNodes:r=!0,showTags:i=!0,className:o=""}){const l=u=>t.filter(d=>d.prerequisites.includes(u)),c=u=>t.filter(d=>e.prerequisites.includes(d.name));return a.jsxs(XC,{children:[a.jsx(WC,{asChild:!0,children:n}),a.jsx(sv,{className:`w-80 p-0 ${o}`,children:a.jsxs(ce,{className:"border-0 shadow-none",children:[a.jsx(be,{className:"pb-2",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("div",{className:"flex-1",children:a.jsx("h3",{className:"font-semibold text-lg text-foreground mb-1",children:e.name})}),e.icon&&a.jsx("div",{className:"w-8 h-8 ml-2",children:a.jsx("img",{src:e.icon,alt:e.name,className:"w-full h-full object-contain"})})]})}),a.jsxs(de,{className:"pt-0 space-y-3",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),s&&e.prerequisites.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Prerequisites:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[c(e.name).map(u=>a.jsx(Z,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:u.name},u.id)),e.prerequisites.filter(u=>!t.some(d=>d.name===u)).map((u,d)=>a.jsx(Z,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500 border-gray-200",children:u},`missing-${d}`))]})]}),r&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Leads to:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[l(e.name).map(u=>a.jsx(Z,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:u.name},u.id)),l(e.name).length===0&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"No further progression"})]})]}),i&&e.tags.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Tags:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((u,d)=>a.jsx(Z,{variant:"secondary",className:"text-xs",children:u},d))})]}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[a.jsxs("p",{children:["ID: ",e.id]}),e.globalFormId&&a.jsxs("p",{children:["Form ID: ",e.globalFormId]})]})]})]})})]})}function KC({node:e,allNodes:t,variant:n="default",size:s="md",showHoverCard:r=!0,onClick:i,className:o=""}){const l={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},c=a.jsx(Z,{variant:n,className:`
        ${l[s]} 
        ${i?"cursor-pointer hover:bg-muted/50":""} 
        ${o}
        rounded-full
      `,onClick:i,children:e.name});return r?a.jsx(OF,{node:e,allNodes:t,children:c}):c}function QC({path:e,allNodes:t,onBreadcrumbClick:n,variant:s="default",className:r=""}){if(e.length===0)return a.jsx("div",{className:`flex items-center gap-2 ${r}`,children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})});const i=s==="compact"?"sm":"md";return a.jsx("div",{className:`flex items-center gap-2 ${r}`,children:e.map((o,l)=>a.jsxs(P.Fragment,{children:[a.jsx(KC,{node:o,allNodes:t,variant:l===e.length-1?"default":"outline",size:i,showHoverCard:!0,onClick:n?()=>n(l):void 0}),l<e.length-1&&a.jsx(Cl,{className:"w-4 h-4 text-muted-foreground"})]},o.id))})}function IF({path:e,allNodes:t,selectedPathLength:n,isComplete:s,endNode:r,onPathClick:i,variant:o="default",className:l=""}){const c=o==="compact"?"sm":"md";return a.jsxs("div",{className:`p-3 border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer ${l}`,onClick:()=>i(e,n),children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("div",{className:"flex flex-wrap items-center gap-1",children:e.map((u,d)=>a.jsxs(P.Fragment,{children:[a.jsx(KC,{node:u,allNodes:t,variant:"outline",size:c,showHoverCard:!0,onClick:f=>{f==null||f.stopPropagation(),i(e,d)},className:`
                   ${d===0&&n===0?"cursor-pointer":""}
                   ${s&&d===e.length-1?"bg-yellow-600 text-yellow-50 border-yellow-700":""}
                 `}),d<e.length-1&&a.jsx(Cl,{className:"w-3 h-3 text-muted-foreground"})]},u.id))})}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsxs("span",{children:["Length: ",e.length," steps"]}),s&&a.jsxs("span",{children:["â€¢ Ends at: ",r.name]}),e.length>n&&a.jsxs("span",{children:["â€¢ ",e.length-n," more choices"]})]})]})}function Ep({possiblePaths:e,selectedPathLength:t,onPathClick:n,variant:s="default",className:r=""}){const{nodes:i}=Ka();return e.length===0?a.jsxs("div",{className:`text-center py-8 ${r}`,children:[a.jsx("p",{className:"text-muted-foreground",children:"No possible paths available."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You may have reached the end of available destiny paths."})]}):a.jsx("div",{className:`space-y-3 ${r}`,children:e.map((o,l)=>a.jsx(IF,{path:o.path,allNodes:i,selectedPathLength:t,isComplete:o.isComplete,endNode:o.endNode,onPathClick:n,variant:s},l))})}const JC=()=>{const{build:e,setDestinyPath:t}=Xe(),n=lt(),s=b=>{const j=window.location.hash,[N,A]=j.split("?"),C=new URLSearchParams(A||"").get("b");n(C?`${b}?b=${C}`:b)},{nodes:r,isLoading:i,error:o}=Ka(),l=P.useMemo(()=>e.destinyPath.map(b=>r.find(j=>j.edid===b)).filter(b=>!!b),[e.destinyPath,r]),{isValidPath:c,pathErrors:u,setPath:d,clearPath:f,currentPath:m,currentNode:h}=tv({initialPath:l,validatePath:!0}),{possiblePaths:v}=Zm({fromNode:h||void 0}),y=b=>{const j=b.map(N=>N.edid);t(j)},w=(b,j)=>{let N;if(m.length===0)N=b.slice(0,j+1);else{if(j===0)return;const A=b.slice(1,j+1);N=[...m,...A]}d(N),y(N)},x=()=>{f(),t([])},p=b=>{const j=m.slice(0,b+1);d(j),y(j)};return a.jsxs(ce,{className:"mb-6",children:[a.jsx(be,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(_e,{className:"text-lg",children:"Destiny"}),a.jsxs(U,{variant:"outline",size:"sm",onClick:()=>s("/build/destiny"),className:"text-sm whitespace-nowrap cursor-pointer",children:[a.jsx(Fa,{className:"w-4 h-4 mr-1"}),"View All"]})]})}),a.jsx(de,{children:i?a.jsx("div",{className:"text-muted-foreground",children:"Loading destiny data..."}):o?a.jsx("div",{className:"text-destructive",children:o}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Selected Path"}),a.jsx(QC,{path:m,allNodes:r,variant:"compact",onBreadcrumbClick:p})]}),m.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Path Details (",m.length," nodes)"]}),a.jsxs(U,{variant:"outline",size:"sm",onClick:x,className:"text-xs",children:[a.jsx(Dr,{className:"w-3 h-3 mr-1"}),"Clear Path"]})]}),a.jsx("div",{className:"space-y-2",children:m.map((b,j)=>a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium flex-shrink-0",children:j+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-sm text-foreground",children:b.name}),b.description&&a.jsx(Le,{text:b.description,className:"text-xs text-muted-foreground mt-1",as:"p"})]})]})},b.id))})]}),v.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:m.length===0?"Choose Your Starting Point":"Continue Your Path"}),a.jsx(_i,{className:"h-[400px]",children:a.jsx("div",{className:"p-2",children:a.jsx(Ep,{possiblePaths:v,selectedPathLength:m.length,onPathClick:w,variant:"compact"})})})]}),!c&&u.length>0&&a.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(Qo,{className:"w-3 h-3"}),a.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),a.jsx("ul",{className:"space-y-0.5",children:u.map((b,j)=>a.jsxs("li",{children:["â€¢ ",b]},j))})]}),m.length===0&&v.length===0&&a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx("p",{className:"text-sm",children:"No destiny paths available"}),a.jsx(U,{variant:"outline",size:"sm",onClick:()=>s("/build/destiny"),className:"mt-2",children:"Browse All Destinies"})]})]})})]})};class wt{static getRaceById(t,n){return t.find(s=>s.edid===n)}static getRacesByCategory(t,n){return t.filter(s=>s.category===n)}static getUniqueCategories(t){return[...new Set(t.map(n=>n.category))]}static getUniqueTags(t){const n=t.flatMap(s=>[...s.keywords||[],...s.flags||[]]);return[...new Set(n)]}static filterByCategory(t,n){return n?t.filter(s=>s.category===n):t}static filterByTags(t,n){return n.length===0?t:t.filter(s=>n.some(r=>(s.keywords||[]).includes(r)||(s.flags||[]).includes(r)))}static filterByAnyTag(t,n){return n.length===0?t:t.filter(s=>n.some(r=>(s.keywords||[]).includes(r)||(s.flags||[]).includes(r)))}static search(t,n){if(!n.trim())return t;const s=n.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||(r.description||"").toLowerCase().includes(s)||(r.keywords||[]).some(i=>i.toLowerCase().includes(s))||(r.flags||[]).some(i=>i.toLowerCase().includes(s)))}static sortByName(t){return[...t].sort((n,s)=>n.name.localeCompare(s.name))}static sortByCategory(t){return[...t].sort((n,s)=>{const r=n.category.localeCompare(s.category);return r!==0?r:n.name.localeCompare(s.name)})}static transformToPlayerCreationItem(t){const n=[...t.keywords||[],...t.flags||[],t.category],s=[...(t.skillBonuses||[]).map(r=>({name:`${r.skill} +${r.bonus}`,type:"positive",description:`Provides ${r.bonus} bonus to ${r.skill}`,value:r.bonus,target:r.skill})),...(t.racialSpells||[]).map(r=>({name:r.name,type:"positive",description:r.description,target:"racial ability"}))];return{id:t.edid,name:t.name,description:t.description||"",tags:n,effects:s,associatedItems:[],imageUrl:void 0,category:t.category||""}}static getRelatedRaces(t,n){return n.filter(s=>s.edid!==t.edid&&s.category===t.category)}static calculateRaceStats(t){var n,s,r,i,o,l;return{totalHealth:((n=t.startingStats)==null?void 0:n.health)||0,totalMagicka:((s=t.startingStats)==null?void 0:s.magicka)||0,totalStamina:((r=t.startingStats)==null?void 0:r.stamina)||0,totalCarryWeight:((i=t.startingStats)==null?void 0:i.carryWeight)||0,skillBonusCount:((o=t.skillBonuses)==null?void 0:o.length)||0,racialSpellCount:((l=t.racialSpells)==null?void 0:l.length)||0}}static applyFilters(t,n){let s=[...t];return n.search&&(s=this.search(s,n.search)),n.type&&(s=this.filterByCategory(s,n.type)),n.tags.length>0&&(s=this.filterByTags(s,n.tags)),s}}class BF{static enrichRacesWithTags(t){t.forEach(n=>{})}static generateSearchCategories(t){const n=[...new Set(t.map(i=>i.category))],s=[...new Set(t.flatMap(i=>i.keywords.map(o=>o.edid)))],r=[...new Set(t.flatMap(i=>i.flags))];return[{id:"category",name:"Race Type",options:n},{id:"keywords",name:"Keywords",options:s},{id:"flags",name:"Flags",options:r}]}static validateRaceData(t){try{return!(!t.name||!t.edid||!t.category||!t.startingStats||typeof t.startingStats.health!="number"||typeof t.startingStats.magicka!="number"||typeof t.startingStats.stamina!="number"||typeof t.startingStats.carryWeight!="number"||!Array.isArray(t.skillBonuses)||!Array.isArray(t.racialSpells)||!Array.isArray(t.keywords)||!Array.isArray(t.flags))}catch{return!1}}static calculateRaceStats(t){const n=t.startingStats.health,s=t.startingStats.magicka,r=t.startingStats.stamina,i=t.startingStats.carryWeight,o=t.skillBonuses.length,l=t.racialSpells.length;return{totalHealth:n,totalMagicka:s,totalStamina:r,totalCarryWeight:i,skillBonusCount:o,racialSpellCount:l}}static calculatePowerLevel(t){const n=this.calculateRaceStats(t),s=(n.totalHealth+n.totalMagicka+n.totalStamina)/3,r=n.skillBonusCount*5+n.racialSpellCount*10;return Math.round(s+r)}static getDifficultyRating(t){const n=this.calculatePowerLevel(t);return n<50?1:n<70?2:n<90?3:n<110?4:5}static getPlaystyleSuggestions(t){const n=[],s=t.startingStats;return s.health>120&&(n.push("Tank"),n.push("Melee Fighter")),s.magicka>120&&(n.push("Mage"),n.push("Spellcaster")),s.stamina>120&&(n.push("Archer"),n.push("Rogue")),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("onehanded"))&&n.push("One-Handed Warrior"),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("destruction"))&&n.push("Destruction Mage"),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("sneak"))&&n.push("Stealth"),[...new Set(n)]}static formatRaceDescription(t){const n=this.calculateRaceStats(t),s=this.getPlaystyleSuggestions(t);let r=t.description;return s.length>0&&(r+=`

Recommended playstyles: ${s.join(", ")}`),r+=`

Starting Stats: Health ${n.totalHealth}, Magicka ${n.totalMagicka}, Stamina ${n.totalStamina}`,r+=`
Abilities: ${n.skillBonusCount} skill bonuses, ${n.racialSpellCount} racial spells`,r}}function Ol(e={}){const{includeRelated:t=!1,categoryFilter:n="",searchTerm:s="",sortBy:r="name"}=e,{data:i,loading:o,error:l}=ks(),c=g.useMemo(()=>wt.getUniqueCategories(i),[i]),u=g.useMemo(()=>wt.getUniqueTags(i),[i]),d=g.useMemo(()=>i.filter(p=>!(n&&p.category!==n||s&&wt.search([p],s).length===0)),[i,n,s]),f=g.useMemo(()=>r==="name"?wt.sortByName(d):wt.sortByCategory(d),[d,r]);return{races:i,filteredRaces:f,isLoading:o,error:l,categories:c,tags:u,refresh:async()=>{await ks.getState().load()},getRaceById:p=>wt.getRaceById(i,p),getRacesByCategory:p=>wt.getRacesByCategory(i,p),filterByCategory:p=>wt.filterByCategory(i,p),filterByTag:p=>wt.filterByTags(i,[p]),searchRaces:p=>wt.search(i,p)}}const FF={Altmer:"altmer.svg",Argonian:"argonian.svg",Bosmer:"woodelf.svg",Breton:"breton.svg",Dunmer:"dunmer.svg",Imperial:"imperial.svg",Khajiit:"khajit.svg",Nord:"nord.svg",Orsimer:"orc.svg",Redguard:"redguard.svg"};function Kn({raceName:e,size:t="md",className:n}){const s=FF[e],r=s?Wt(`assets/race-avatar/${s}`):void 0;return a.jsx(Fm,{imgSrc:r,alt:e,size:t,className:n})}function va({category:e,size:t="md",className:n}){return a.jsx(Wk,{category:e,categoryType:"race",size:t,className:n})}const HF={ability:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"},trait:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},flag:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"},skill:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"}},UF={sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1"};function VF(e){const t=e.toLowerCase();return["destruction","restoration","alteration","illusion","conjuration","light armor","heavy armor","one-handed","two-handed","archery","block","smithing","enchanting","alchemy","speechcraft","sneak","lockpicking","pickpocket"].some(n=>t.includes(n))?"skill":["waterbreathing","night eye","claws","histskin","dragonskin","magic resistance","voice of the emperor","battle cry"].some(n=>t.includes(n))?"ability":["strong stomach","beast race","bleeds","natural"].some(n=>t.includes(n))?"trait":"flag"}function $s({keyword:e,type:t,size:n="sm",className:s}){const r=t||VF(e),i=HF[r];return a.jsx(Z,{variant:"outline",className:F(i.bg,i.text,i.border,UF[n],"font-medium",s),children:e})}const GF={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",purple:"bg-purple-500",orange:"bg-orange-500"},qF={sm:"h-1.5",md:"h-2",lg:"h-3"};function vr({value:e,maxValue:t,label:n,color:s="blue",size:r="md",showValue:i=!0,className:o}){const l=Math.min(e/t*100,100);return a.jsxs("div",{className:F("space-y-1",o),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:n}),i&&a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),a.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:F("transition-all duration-300 ease-out",GF[s],qF[r]),style:{width:`${l}%`}})})]})}function al({effects:e,title:t="Effects",className:n,maxDisplay:s,compact:r=!1,showDescriptions:i=!0}){if(!e||e.length===0)return null;const o=s?e.slice(0,s):e,l=s&&e.length>s;return a.jsxs("div",{className:F("space-y-3",n),children:[t&&a.jsx(rn,{className:"text-lg font-medium text-foreground",children:t}),r?a.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.map((c,u)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:c.description,children:[a.jsx(qe,{className:"h-3 w-3 text-yellow-500"}),a.jsx("span",{className:"font-medium",children:c.name})]},u)),l&&a.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded text-xs text-muted-foreground",children:["+",e.length-s," more"]})]}):a.jsxs("div",{className:"space-y-3",children:[o.map((c,u)=>a.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-muted",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(qe,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h6",{className:"font-medium text-sm",children:c.name}),i&&c.description&&a.jsx(Le,{text:c.description,className:"text-xs text-muted-foreground mt-1 leading-relaxed"})]})]})},u)),l&&a.jsxs("div",{className:"text-center text-xs text-muted-foreground py-2",children:["+",e.length-s," more effects"]})]})]})}function Eu({stats:e,regeneration:t,title:n="Stats",className:s,showRegeneration:r=!0,compact:i=!1}){return a.jsxs("div",{className:F("space-y-3",s),children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:n}),i&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Health"}),a.jsx("span",{className:"font-medium",children:e.health})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka"}),a.jsx("span",{className:"font-medium",children:e.magicka})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina"}),a.jsx("span",{className:"font-medium",children:e.stamina})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight"}),a.jsx("span",{className:"font-medium",children:e.carryWeight})]})]}),r&&t&&a.jsxs("div",{className:"space-y-2 mt-3",children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Health"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Magicka"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Stamina"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]}),!i&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(vr,{value:e.health,maxValue:200,label:"Health",color:"red",size:"sm"}),a.jsx(vr,{value:e.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),a.jsx(vr,{value:e.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),r&&t&&a.jsxs("div",{className:"space-y-2 mt-3",children:[a.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Health"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Magicka"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Stamina"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]})]})}function Au({item:e,className:t,showToggle:n=!0,isExpanded:s=!1,onToggle:r,disableHover:i=!1}){const o=e.originalRace;return a.jsxs(pe,{className:t,expanded:s,onToggle:r,disableHover:i,children:[a.jsx(pe.Header,{children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Kn,{raceName:e.name,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(je,{className:"text-primary font-semibold",children:e.name}),e.category&&a.jsx(Z,{variant:"outline",className:F("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:e.category})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:n&&a.jsx(ds,{itemId:(o==null?void 0:o.edid)||e.id,itemType:"race",itemName:e.name})})]})}),a.jsxs(pe.Details,{children:[a.jsx("div",{children:a.jsx(Le,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),(o==null?void 0:o.startingStats)&&a.jsx(Eu,{stats:o.startingStats,regeneration:o.regeneration,title:"Starting Attributes",showRegeneration:!1,compact:!1}),(o==null?void 0:o.skillBonuses)&&o.skillBonuses.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Starting Skills"}),a.jsx("div",{className:"space-y-2",children:o.skillBonuses.map((l,c)=>a.jsxs("div",{className:"p-2 rounded bg-muted border text-sm flex items-center justify-between",children:[a.jsxs("span",{className:"font-medium",children:[l.skill," +",l.bonus]}),a.jsx(Z,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},c))})]}),(o==null?void 0:o.racialSpells)&&o.racialSpells.length>0&&a.jsx(al,{effects:o.racialSpells.map(l=>({name:l.name,description:l.description})),title:"Quirks",showDescriptions:!0})]})]})}function eE(e,t){const n=g.useMemo(()=>e.map(l=>({id:l.edid.toLowerCase().replace("race",""),name:l.name,description:l.description,category:l.category,abilities:l.racialSpells.map(c=>c.name),skills:l.skillBonuses.map(c=>c.skill),keywords:l.keywords.map(c=>c.edid),originalRace:l})),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"abilities",weight:.2},{name:"skills",weight:.1},{name:"keywords",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new ln(n,s),[n,s]),i=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredRaces:g.useMemo(()=>i.map(l=>l.item.originalRace),[i]),searchResults:i,searchableRaces:n}}function il({races:e,onSelect:t,placeholder:n="Search races...",className:s=""}){const[r,i]=g.useState(""),[o,l]=g.useState(!1),c=Xa("(max-width: 640px)"),u=g.useRef(null),{filteredRaces:d}=eE(e,r),f=g.useMemo(()=>d.map(x=>({id:x.edid,label:x.name,description:x.description,category:x.category,icon:a.jsx(Kn,{raceName:x.name,size:"sm"}),badge:x.category&&a.jsx(Z,{variant:"outline",className:F("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:x.category}),metadata:{originalRace:x}})),[d]),m=x=>{const p=e.find(b=>b.edid===x.id);p&&(t(p),l(!1),i(""))},h=x=>{i(x.target.value),setTimeout(()=>{var p;(p=u.current)==null||p.focus()},0)},v=(x,p)=>a.jsxs("div",{className:"flex items-center gap-3",children:[x.icon&&a.jsx("div",{className:"flex-shrink-0",children:x.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:x.label}),x.badge&&a.jsx("div",{className:"flex-shrink-0",children:x.badge})]}),x.description&&a.jsx(Le,{text:x.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]}),y=()=>a.jsxs(is,{open:o,onOpenChange:l,children:[a.jsx(Va,{asChild:!0,children:a.jsxs(U,{variant:"outline",className:F("w-full justify-between text-left font-normal",!r&&"text-muted-foreground",s),children:[a.jsx("span",{children:r||n}),a.jsx(Je,{className:"h-4 w-4 opacity-50"})]})}),a.jsxs(Fn,{side:"bottom",className:"h-[85vh] max-h-[85vh] p-0 flex flex-col",onOpenAutoFocus:x=>x.preventDefault(),children:[a.jsxs(os,{className:"p-4 border-b flex-shrink-0",children:[a.jsx(ls,{children:"Select Race"}),a.jsx(Zr,{children:"Choose your character's race from the options below"})]}),a.jsx("div",{className:"p-4 border-b flex-shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Dt,{ref:u,placeholder:"Search races...",value:r,onChange:h,className:"pl-10"}),r&&a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>i(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",children:a.jsx(Me,{className:"h-3 w-3"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:f.length===0?a.jsxs("div",{className:"text-center py-8 px-4",children:[a.jsx("p",{className:"text-muted-foreground",children:"No races found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search"})]}):a.jsx("div",{className:"p-4 space-y-3",children:f.map(x=>a.jsx(U,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:()=>m(x),children:a.jsx("div",{className:"w-full",children:v(x)})},x.id))})})]})]}),w=()=>a.jsx(Cu,{options:f,onSelect:m,placeholder:n,className:s,renderOption:v,emptyMessage:"No races found",searchQuery:r,onSearchQueryChange:i});return c?a.jsx(y,{}):a.jsx(w,{})}function Km({keywords:e,title:t="Keywords",className:n,maxDisplay:s,showCount:r=!0}){if(!e||e.length===0)return null;const i=s?e.slice(0,s):e,o=s&&e.length>s;return a.jsxs("div",{className:F("space-y-3",n),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[t&&a.jsx(rn,{className:"text-lg font-medium text-foreground",children:t}),r&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.length," keyword",e.length!==1?"s":""]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.map((l,c)=>a.jsx($s,{keyword:l,size:"sm"},c)),o&&a.jsxs("span",{className:"text-xs text-muted-foreground px-2 py-1",children:["+",e.length-s," more"]})]})]})}function tE(e){return!e.keywords||e.keywords.length===0?[]:e.keywords.filter(t=>t.edid.toLowerCase().includes("unperked")).map(t=>{const n=t.edid.match(/REQ_RacialSkills_(\w+)Unperked/);return n?n[1].replace(/([A-Z])/g," $1").trim():t.edid.replace(/REQ_RacialSkills_/,"").replace(/Unperked$/,"").replace(/([A-Z])/g," $1").trim()}).filter(Boolean)}function Qm(e){var t,n;return{...e,id:e.edid,name:e.name,description:e.description,tags:[e.category,...Array.isArray(e.flags)?e.flags:[]],summary:e.description.length>100?`${e.description.substring(0,100)}...`:e.description,effects:[...((t=e.skillBonuses)==null?void 0:t.map(s=>({type:"positive",name:s.skill,description:`+${s.bonus} to ${s.skill}`,value:s.bonus,target:s.skill})))||[],...((n=e.racialSpells)==null?void 0:n.map(s=>({type:"positive",name:s.name,description:s.description})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalRace:e}}function nE({race:e,title:t="Unperked Abilities",className:n,showCount:s=!0}){const r=tE(e);return!r||r.length===0?null:a.jsxs("div",{className:F("space-y-3",n),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[t&&a.jsx(rn,{className:"text-lg font-medium text-foreground",children:t}),s&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:[r.length," ",r.length===1?"ability":"abilities"]})]}),a.jsx("div",{className:"space-y-2",children:r.map((i,o)=>a.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:i}),a.jsx(Z,{variant:"secondary",className:"text-xs",children:"Unperked"})]},o))})]})}function sE({item:e,originalRace:t,isExpanded:n=!1,onToggle:s,className:r,showViewAllButton:i=!1,showToggle:o=!0,viewAllButtonText:l="View All",viewAllButtonRoute:c="/race"}){const u=lt(),d=()=>{u(c)},f=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race",m=(e==null?void 0:e.description)||(t==null?void 0:t.description)||"",h=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"",v=(e==null?void 0:e.effects)||[],y=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"";return a.jsxs(F8,{isExpanded:n,onToggle:s||(()=>{}),className:r,children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Kn,{raceName:f,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(je,{className:"text-primary font-semibold",children:f}),h&&a.jsx(va,{category:h,size:"sm"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[v&&v.length>0&&a.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(qe,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{children:[v.length," effects"]})]})}),i&&a.jsxs(U,{variant:"outline",size:"sm",onClick:d,className:"text-xs",children:[a.jsx(Fa,{className:"h-3 w-3 mr-1"}),l]}),o&&a.jsx(ds,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:f})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"line-clamp-2",children:a.jsx(ve,{className:"text-sm text-muted-foreground",children:y})}),a.jsx(al,{effects:v,maxDisplay:2,compact:!0})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{children:a.jsx(ve,{className:"text-sm text-muted-foreground leading-relaxed",children:m})}),(t==null?void 0:t.startingStats)&&a.jsx(Eu,{stats:t.startingStats,regeneration:t.regeneration,title:"Starting Stats"}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&a.jsx(al,{effects:t.racialSpells.map(w=>({name:w.name,description:w.description})),title:"Racial Abilities"}),t&&a.jsx(nE,{race:t,title:"Unperked Abilities"}),(t==null?void 0:t.keywords)&&t.keywords.length>0&&a.jsx(Km,{keywords:t.keywords.map(w=>w.edid),title:"Keywords"})]})]})}function Xb({item:e,originalRace:t,className:n,onClick:s,showViewAllButton:r=!1,showToggle:i=!0,viewAllButtonText:o="View All",viewAllButtonRoute:l="/race"}){const c=lt(),u=h=>{h.stopPropagation(),c(l)},d=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race";e!=null&&e.description||t!=null&&t.description;const f=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"";e!=null&&e.effects,e!=null&&e.summary||t!=null&&t.description;const m=t?tE(t):[];return a.jsxs("div",{className:F("p-4 border rounded-lg bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",n),onClick:s,children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Kn,{raceName:d,size:"2xl"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(je,{className:"text-primary font-semibold truncate",children:d}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f&&a.jsx(va,{category:f,size:"sm"}),(t==null?void 0:t.startingStats)&&a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-red-500/20 text-red-700 dark:text-red-400 rounded-full text-xs font-medium whitespace-nowrap",children:["â¤ï¸ ",t.startingStats.health]}),a.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-blue-500/20 text-blue-700 dark:text-blue-400 rounded-full text-xs font-medium whitespace-nowrap",children:["ðŸ”· ",t.startingStats.magicka]}),a.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-green-500/20 text-green-700 dark:text-green-400 rounded-full text-xs font-medium whitespace-nowrap",children:["ðŸ’š ",t.startingStats.stamina]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(qe,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.racialSpells.length," effects"]})]}),i&&a.jsx("div",{onClick:h=>h.stopPropagation(),children:a.jsx(ds,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:d})})]})]}),a.jsxs("div",{className:"space-y-2",children:[(t==null?void 0:t.skillBonuses)&&t.skillBonuses.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-1 justify-items-center",children:t.skillBonuses.map((h,v)=>a.jsxs("div",{className:"px-2 py-1 bg-muted/50 text-muted-foreground rounded text-xs font-medium text-left w-full",children:[h.skill," +",h.bonus]},v))}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:t.racialSpells.map((h,v)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(qe,{className:"h-3 w-3"}),h.name]},v))}),m.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:m.map((h,v)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 text-muted-foreground border rounded-full text-xs font-medium",children:["âš¡ ",h]},v))})]})]})]}),r&&a.jsxs(U,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:u,children:[a.jsx(Fa,{className:"h-4 w-4 mr-2"}),o]})]})}function ZF({race:e,isOpen:t,onOpenChange:n}){return e?a.jsx(Ki,{open:t,onOpenChange:n,side:"right",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Kn,{raceName:e.name,size:"4xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(va,{category:e.category,size:"sm"}),a.jsx(ds,{itemId:e.edid,itemType:"race",itemName:e.name})]}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description})]})]})}),a.jsxs("div",{className:"space-y-6",children:[e.startingStats&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Starting Stats"}),a.jsx(Eu,{stats:e.startingStats,regeneration:e.regeneration,title:"",compact:!1})]}),e.skillBonuses&&e.skillBonuses.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Starting Skills"}),a.jsx("div",{className:"space-y-2",children:e.skillBonuses.map((s,r)=>a.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border flex items-center justify-between",children:[a.jsxs("span",{className:"font-medium",children:[s.skill," +",s.bonus]}),a.jsx(Z,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},r))})]}),e.racialSpells&&e.racialSpells.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Racial Abilities"}),a.jsx(al,{effects:e.racialSpells.map(s=>({name:s.name,description:s.description})),title:"",showDescriptions:!0})]}),a.jsx(nE,{race:e,title:"Unperked Abilities"}),e.keywords&&e.keywords.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Keywords"}),a.jsx(Km,{keywords:e.keywords.map(s=>s.edid),title:"",maxDisplay:10})]})]})]})}):null}function YF({className:e,allRaces:t}){const{build:n,setRace:s}=Xe(),r=lt(),[i,o]=g.useState(!0),l=n.race?t.find(m=>m.edid===n.race):null,c=m=>{s(m.edid)},u=()=>{r("/race")},d=()=>{o(!i)};if(!l)return a.jsxs(en,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),a.jsx(il,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=Qm(l);return a.jsxs(en,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx(il,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),a.jsx(Au,{item:f,isExpanded:i,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}function rE(){const[e,t]=g.useState(null),[n,s]=g.useState("grid"),[r,i]=g.useState([]),o=g.useCallback(f=>{t(f)},[]),l=g.useCallback(f=>{s(f)},[]),c=g.useCallback(f=>{i(m=>m.includes(f)?m.filter(h=>h!==f):[...m,f])},[]),u=g.useCallback(()=>{i([])},[]),d=g.useCallback(f=>{i(f)},[]);return{selectedRace:e,viewMode:n,expandedSections:r,setSelectedRace:o,setViewMode:l,toggleExpandedSection:c,clearExpandedSections:u,expandAllSections:d}}function Jm({races:e}){const[t,n]=g.useState(""),[s,r]=g.useState({search:"",type:"",tags:[]}),i=g.useMemo(()=>wt.getUniqueCategories(e),[e]),o=g.useMemo(()=>wt.getUniqueTags(e),[e]),l=g.useMemo(()=>{let v=e;return t.trim()&&(v=wt.search(v,t)),s.type&&(v=wt.filterByCategory(v,s.type)),s.tags.length>0&&(v=wt.filterByTags(v,s.tags)),wt.sortByName(v)},[e,t,s]),c=g.useCallback(v=>{n(v),r(y=>({...y,search:v}))},[]),u=g.useCallback(v=>{r(v),n(v.search)},[]),d=g.useCallback(()=>{n(""),r({search:"",type:"",tags:[]})},[]),f=g.useCallback(v=>{r(y=>({...y,tags:y.tags.includes(v)?y.tags:[...y.tags,v]}))},[]),m=g.useCallback(v=>{r(y=>({...y,tags:y.tags.filter(w=>w!==v)}))},[]),h=g.useCallback(v=>{r(y=>({...y,type:v}))},[]);return{searchQuery:t,activeFilters:s,filteredRaces:l,categories:i,tags:o,setSearchQuery:c,setFilters:u,clearFilters:d,addTagFilter:f,removeTagFilter:m,setCategoryFilter:h}}function aE({races:e,selectedRaceId:t}){const n=g.useMemo(()=>e.map(u=>wt.transformToPlayerCreationItem(u)),[e]),s=g.useMemo(()=>BF.generateSearchCategories(e),[e]),r=g.useMemo(()=>t&&wt.getRaceById(e,t)||null,[e,t]),i=g.useMemo(()=>r?wt.calculateRaceStats(r):null,[r]),o=g.useMemo(()=>e.length,[e]),l=g.useMemo(()=>{const u=e.reduce((d,f)=>(d[f.category]=(d[f.category]||0)+1,d),{});return Object.entries(u).map(([d,f])=>({category:d,count:f}))},[e]),c=g.useMemo(()=>{const u=e.reduce((d,f)=>{var m;return f.keywords.forEach(h=>{d[h.edid]=(d[h.edid]||0)+1}),(m=f.flags)==null||m.forEach(h=>{d[h]=(d[h]||0)+1}),d},{});return Object.entries(u).map(([d,f])=>({tag:d,count:f})).sort((d,f)=>f.count-d.count)},[e]);return{transformedRaces:n,searchCategories:s,raceStats:i,selectedRaceDetails:r,totalRaces:o,categoriesWithCounts:l,tagsWithCounts:c}}function iE({raceId:e,allRaces:t}){const n=g.useMemo(()=>wt.getRaceById(t,e)||null,[t,e]),s=g.useMemo(()=>n?wt.getRelatedRaces(n,t):[],[n,t]),r=g.useMemo(()=>{if(!n||s.length===0)return null;const u=s[0];return{selectedRace:n,comparedRace:u,differences:{stats:{health:{selected:n.startingStats.health,compared:u.startingStats.health,difference:n.startingStats.health-u.startingStats.health},magicka:{selected:n.startingStats.magicka,compared:u.startingStats.magicka,difference:n.startingStats.magicka-u.startingStats.magicka},stamina:{selected:n.startingStats.stamina,compared:u.startingStats.stamina,difference:n.startingStats.stamina-u.startingStats.stamina},carryWeight:{selected:n.startingStats.carryWeight,compared:u.startingStats.carryWeight,difference:n.startingStats.carryWeight-u.startingStats.carryWeight}},skills:n.skillBonuses.map(d=>{const f=u.skillBonuses.find(m=>m.skill===d.skill);return{skill:d.skill,selected:d.bonus,compared:(f==null?void 0:f.bonus)||0,difference:d.bonus-((f==null?void 0:f.bonus)||0)}}),spells:{selected:n.racialSpells.map(d=>d.name),compared:u.racialSpells.map(d=>d.name),unique:n.racialSpells.filter(d=>!u.racialSpells.some(f=>f.name===d.name)).map(d=>d.name)}}}},[n,s]),i=g.useMemo(()=>s.length>0,[s]),o=g.useMemo(()=>s.length,[s]);return{race:n,relatedRaces:s,raceComparison:r,isLoading:!1,error:null,hasRelatedRaces:i,relatedRacesCount:o}}function oE({className:e}){const{races:t}=Ol(),{build:n,setRace:s}=Xe(),r=lt(),[i,o]=g.useState(!0),l=n.race?t.find(m=>m.edid===n.race):null,c=m=>{s(m.edid)},u=()=>{r("/build/race")},d=()=>{o(!i)};if(!l)return a.jsxs(en,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),a.jsx(il,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=Qm(l);return a.jsxs(en,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx(il,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),a.jsx(Au,{item:f,isExpanded:i,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}const lE=[{value:"name",label:"Name"},{value:"category",label:"Category"},{value:"health",label:"Health"},{value:"magicka",label:"Magicka"},{value:"stamina",label:"Stamina"}],XF=e=>{var t;return((t=lE.find(n=>n.value===e))==null?void 0:t.label)||"Name"};function cE(){const{build:e}=Xe(),{races:t,isLoading:n,error:s}=Ol(),{viewMode:r,setViewMode:i}=rE(),{filteredRaces:o}=Jm({races:t}),[l,c]=g.useState("name"),d=(()=>{const S=[...new Set(t.flatMap(z=>z.keywords.map(R=>R.edid)))],E=[...new Set(t.flatMap(z=>z.skillBonuses.map(R=>R.skill)))],T=[...new Set(t.map(z=>z.category))];return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:S.map(z=>({id:`keyword-${z}`,label:z,value:z,category:"Fuzzy Search",description:`Races with ${z} keyword`}))},{id:"skill-bonuses",name:"Skill Bonuses",placeholder:"Search by skill...",options:E.map(z=>({id:`skill-${z}`,label:z,value:z,category:"Skill Bonuses",description:`Races with ${z} bonus`}))},{id:"categories",name:"Race Categories",placeholder:"Filter by category...",options:T.map(z=>({id:`category-${z}`,label:z,value:z,category:"Race Categories",description:`${z} races`}))}]})(),[f,m]=g.useState([]),h=S=>{let E;typeof S=="string"?E={id:`custom-${S}`,label:S,value:S,category:"Fuzzy Search"}:E={id:`${S.category}-${S.id}`,label:S.label,value:S.value,category:S.category},f.some(T=>T.value===E.value&&T.category===E.category)||m(T=>[...T,E])},v=S=>{m(E=>E.filter(T=>T.id!==S))},y=o.filter(S=>f.length===0?!0:f.every(E=>{switch(E.category){case"Fuzzy Search":return!0;case"Race Categories":return S.category===E.value;case"Skill Bonuses":return S.skillBonuses.some(T=>T.skill===E.value);case"Keywords":return S.keywords.some(T=>T.edid===E.value);default:return!0}})),w=f.filter(S=>S.category==="Fuzzy Search").map(S=>S.value).join(" "),{filteredRaces:x}=eE(y,w),b=x.sort((S,E)=>{switch(l){case"name":return S.name.localeCompare(E.name);case"category":return S.category.localeCompare(E.category);case"health":return E.startingStats.health-S.startingStats.health;case"magicka":return E.startingStats.magicka-S.startingStats.magicka;case"stamina":return E.startingStats.stamina-S.startingStats.stamina;default:return 0}}).map(S=>({...Qm(S),originalRace:S})),[j,N]=g.useState(null),[A,k]=g.useState(!1),C=S=>{N(S),k(!0)};return n?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading races..."})]})}):s?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:s}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsxs(Yt,{title:"Races",description:"Choose your character's race. Each race has unique abilities, starting attributes, and racial traits that will shape your journey through Tamriel.",children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Yr,{categories:d,onSelect:h,onCustomSearch:h})})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(U,{variant:r==="grid"?"default":"outline",size:"sm",onClick:()=>i("grid"),className:"flex items-center gap-2",children:[a.jsx(Fi,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(U,{variant:r==="list"?"default":"outline",size:"sm",onClick:()=>i("list"),className:"flex items-center gap-2",children:[a.jsx(Ha,{className:"h-4 w-4"}),"List"]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Xi,{children:[a.jsx(Wi,{asChild:!0,children:a.jsxs(U,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort: ",XF(l),a.jsx(Je,{className:"h-4 w-4"})]})}),a.jsx(Ya,{align:"end",children:lE.map(S=>a.jsx(un,{onClick:()=>c(S.value),children:S.label},S.value))})]})})]}),a.jsx("div",{className:"my-4",children:f.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>m([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Me,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),f.map(S=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>v(S.id),title:"Click to remove",children:[S.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},S.id))]})}),r==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:b.map(S=>{var T;const E=e.race===((T=S.originalRace)==null?void 0:T.edid);return a.jsx(Xb,{item:S,originalRace:S.originalRace,onClick:()=>C(S.originalRace),className:F(E&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}):a.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:b.map(S=>{var T;const E=e.race===((T=S.originalRace)==null?void 0:T.edid);return a.jsx(Xb,{item:S,originalRace:S.originalRace,onClick:()=>C(S.originalRace),className:F(E&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}),b.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No races found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),a.jsx(ZF,{race:j,isOpen:A,onOpenChange:k})]})}function WF({initialFilters:e,onFiltersChange:t,onSearch:n,onTagSelect:s,onTagRemove:r}={}){const[i,o]=g.useState(e||{search:"",selectedFilters:{},selectedTags:[]});return g.useEffect(()=>{e&&o(e)},[e]),{filters:i,handleSearch:f=>{const m={...i,search:f};o(m),n==null||n(f)},handleTagSelect:f=>{const m={id:`${f.category}-${f.id}`,label:f.label,value:f.value,category:f.category};if(!i.selectedTags.some(v=>v.id===m.id)){const v={...i,selectedTags:[...i.selectedTags,m]};o(v),s==null||s(m),t==null||t(v)}},handleTagRemove:f=>{const m={...i,selectedTags:i.selectedTags.filter(h=>h.id!==f)};o(m),r==null||r(f),t==null||t(m)},updateFilters:f=>{o(f),t==null||t(f)}}}function KF({className:e}){const{races:t,isLoading:n,error:s,categories:r,tags:i}=Ol(),{searchQuery:o,setSearchQuery:l,filteredRaces:c}=Jm({races:t}),u=P.useMemo(()=>c.map(b=>Qm(b)),[c]),d=P.useMemo(()=>[{id:"categories",name:"Categories",placeholder:"Search by category...",options:(r||[]).map(b=>({id:b,label:b,value:b,category:"categories",description:`Race category: ${b}`}))},{id:"tags",name:"Tags",placeholder:"Search by tags...",options:(i||[]).map(b=>({id:b,label:b,value:b,category:"tags",description:`Race tag: ${b}`}))}],[r,i]),{filters:f,handleSearch:m,handleTagSelect:h,handleTagRemove:v}=WF({onSearch:l,onFiltersChange:b=>{}});P.useEffect(()=>{o!==f.search&&m(o)},[o,m,f.search]);const[y,w]=P.useState(null),x=b=>{const j=t.find(N=>N.edid===b.id);return j?a.jsx(sE,{item:b,originalRace:j,isExpanded:!1,showToggle:!0,className:"h-full"},j.edid):null},p=b=>{const j=t.find(N=>N.edid===b.id);return j?a.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:j.name}),a.jsx("p",{className:"text-muted-foreground mb-4",children:j.description}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Category:"})," ",j.category]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Health:"})," ",j.startingStats.health]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Magicka:"})," ",j.startingStats.magicka]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Stamina:"})," ",j.startingStats.stamina]})]})]}):null};return n?a.jsx("div",{className:F("container mx-auto p-6",e),children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((b,j)=>a.jsx("div",{className:"h-64 bg-gray-200 rounded"},j))})]})}):s?a.jsx("div",{className:F("container mx-auto p-6",e),children:a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[a.jsx("strong",{children:"Error:"})," ",s]})}):a.jsxs("div",{className:F("container mx-auto p-6",e),children:[a.jsx(N8,{searchCategories:d,selectedTags:f.selectedTags,viewMode:"grid",onTagSelect:h,onTagRemove:v,className:"mb-6"}),a.jsxs(y8,{children:[a.jsx(b8,{children:a.jsx(p8,{items:u,viewMode:"grid",onItemSelect:w,selectedItem:y,renderItemCard:x})}),a.jsx(w8,{children:y?p(y):a.jsx(j8,{title:"Select a Race",description:"Choose a race from the list to view its details"})})]})]})}function QF({className:e,selectedRace:t,onRaceSelect:n,onRaceClear:s,showSearch:r=!0,showComparison:i=!1,maxDisplayRaces:o=3}){const{races:l,isLoading:c,error:u}=Ol(),{filteredRaces:d}=Jm({races:l});aE({races:l,selectedRaceId:(t==null?void 0:t.edid)||null});const[f,m]=P.useState(!1);return c?a.jsx("div",{className:F("p-4 border rounded-lg",e),children:a.jsxs("div",{className:"animate-pulse space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),a.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})}):u?a.jsx("div",{className:F("p-4 border rounded-lg",e),children:a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-3 py-2 rounded text-sm",children:[a.jsx("strong",{children:"Error:"})," ",u]})}):a.jsxs("div",{className:F("border rounded-lg overflow-hidden",e),children:[a.jsxs("div",{className:"p-4 bg-muted/50 border-b",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(je,{className:"text-lg font-semibold",children:"Race Selection"}),t&&a.jsx(U,{variant:"ghost",size:"sm",onClick:s,className:"text-muted-foreground hover:text-foreground",children:a.jsx(Me,{className:"h-4 w-4"})})]}),t&&a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx(Z,{variant:"secondary",children:t.category}),a.jsxs(ve,{className:"text-sm text-muted-foreground",children:[t.startingStats.health," HP, ",t.startingStats.magicka," MP, ",t.startingStats.stamina," SP"]})]})]}),a.jsx("div",{className:"p-4",children:t?a.jsxs("div",{className:"space-y-4",children:[a.jsx(Au,{item:{id:t.edid,name:t.name,description:t.description,summary:t.description,category:t.category,effects:[],tags:[],originalRace:t},isExpanded:!0,showToggle:!1,className:"border-0 shadow-none"}),i&&a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx(ve,{className:"text-sm font-medium mb-2",children:"Compare with:"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.filter(h=>h.edid!==t.edid).slice(0,4).map(h=>a.jsx(U,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(h),className:"justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-xs",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))})]})]}):a.jsxs("div",{className:"space-y-4",children:[r&&a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium mb-2",children:"Search for a race:"}),a.jsx(il,{races:d,onSelect:n,placeholder:"Type to search races...",className:"w-full"})]}),a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium mb-2",children:"Quick select:"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.slice(0,o).map(h=>a.jsx(U,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(h),className:"justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-xs",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))}),l.length>o&&a.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>m(!f),className:"mt-2 w-full",children:[a.jsx(Je,{className:F("h-4 w-4 transition-transform",f&&"rotate-180")}),"Show ",l.length-o," more races"]})]}),f&&a.jsx("div",{className:"space-y-2",children:l.slice(o).map(h=>a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>n==null?void 0:n(h),className:"w-full justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-xs",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))})]})})]})}function JF({raceId:e,className:t}){const n=lt(),{races:s}=Ol(),{race:r,relatedRaces:i}=iE({raceId:e,allRaces:s});return r?a.jsxs("div",{className:F("container mx-auto p-6",t),children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs(U,{variant:"ghost",onClick:()=>n("/races"),className:"mb-4",children:[a.jsx(Uy,{className:"h-4 w-4 mr-2"}),"Back to Races"]}),a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx(Kn,{raceName:r.name,size:"xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(qi,{className:"text-3xl font-bold",children:r.name}),a.jsx(va,{category:r.category,size:"lg"})]}),a.jsx(ve,{className:"text-lg text-muted-foreground mb-4",children:r.description}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(k1,{className:"h-4 w-4"}),a.jsx("span",{children:"Playable Race"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(qe,{className:"h-4 w-4"}),a.jsxs("span",{children:[r.keywords.length," Keywords"]})]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(xa,{className:"text-xl font-semibold mb-4",children:"Statistics"}),a.jsx(Eu,{stats:r.startingStats,regeneration:r.regeneration,title:"Starting Stats",compact:!1,showRegeneration:!0})]}),r.racialSpells.length>0&&a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(xa,{className:"text-xl font-semibold mb-4",children:"Racial Abilities"}),a.jsx(al,{effects:r.racialSpells.map(o=>({name:o.name,description:o.description})),title:"Racial Spells",showDescriptions:!0,compact:!1})]}),r.keywords.length>0&&a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(xa,{className:"text-xl font-semibold mb-4",children:"Keywords"}),a.jsx(Km,{keywords:r.keywords.map(o=>o.edid),title:"Race Keywords",showCount:!0})]}),a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(xa,{className:"text-xl font-semibold mb-4",children:"Additional Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-medium mb-2",children:"Description"}),a.jsx(ve,{className:"text-muted-foreground",children:r.description})]}),r.racialSpells.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-medium mb-2",children:"Racial Spells"}),a.jsx("div",{className:"space-y-2",children:r.racialSpells.map((o,l)=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"font-medium",children:o.name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:o.description})]},l))})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(U,{className:"w-full",size:"sm",children:"Add to Character Build"}),a.jsx(U,{variant:"outline",className:"w-full",size:"sm",children:"Compare with Other Races"}),a.jsxs(U,{variant:"outline",className:"w-full",size:"sm",children:[a.jsx(Fa,{className:"h-4 w-4 mr-2"}),"View in Wiki"]})]})]}),a.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Race Summary"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Category:"}),a.jsx(Z,{variant:"secondary",children:r.category})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Health:"}),a.jsx("span",{className:"font-medium",children:r.startingStats.health})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka:"}),a.jsx("span",{className:"font-medium",children:r.startingStats.magicka})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina:"}),a.jsx("span",{className:"font-medium",children:r.startingStats.stamina})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight:"}),a.jsx("span",{className:"font-medium",children:r.startingStats.carryWeight})]})]})]}),i.length>0&&a.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Related Races"}),a.jsx("div",{className:"space-y-2",children:i.slice(0,3).map(o=>a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>n(`/races/${o.edid}`),className:"w-full justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kn,{raceName:o.name,size:"sm"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm",children:o.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:o.category})]})]})},o.edid))})]})]})]})]}):a.jsxs("div",{className:F("container mx-auto p-6",t),children:[a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[a.jsx("strong",{children:"Error:"})," ","Race not found"]}),a.jsxs(U,{variant:"outline",onClick:()=>n("/races"),className:"mt-4",children:[a.jsx(Uy,{className:"h-4 w-4 mr-2"}),"Back to Races"]})]})}function e9(){const{races:e,isLoading:t,error:n,categories:s,tags:r}=Ol(),{selectedRace:i,setSelectedRace:o,viewMode:l,setViewMode:c,expandedSections:u}=rE(),{searchQuery:d,setSearchQuery:f,activeFilters:m,clearFilters:h,filteredRaces:v}=Jm({races:e}),{transformedRaces:y,searchCategories:w,categoriesWithCounts:x}=aE({races:e,selectedRaceId:i}),{race:p,relatedRaces:b,raceComparison:j}=iE({raceId:i||"",allRaces:e}),[N,A]=P.useState(!1),[k,C]=P.useState("overview");if(t)return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Loading..."}),a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]});if(n)return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Error"}),a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[a.jsx("strong",{children:"Error:"})," ",n]})]});const S=e[0];return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Races MVA Demo - Model View Adapter Architecture"}),a.jsxs(qa,{value:k,onValueChange:C,className:"mb-6",children:[a.jsxs(Za,{children:[a.jsx(It,{value:"overview",children:"Overview"}),a.jsx(It,{value:"adapters",children:"Adapters"}),a.jsx(It,{value:"components",children:"Components"}),a.jsx(It,{value:"views",children:"Views"})]}),a.jsx(Zt,{value:"overview",className:"space-y-6",children:a.jsxs(ce,{children:[a.jsxs(be,{children:[a.jsx(_e,{children:"MVA Architecture Overview"}),a.jsx(bs,{children:"This demo showcases the Model-View-Adapter pattern implementation for the Races feature."})]}),a.jsx(de,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Model Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Data management and business logic"}),a.jsx(Z,{variant:"outline",className:"mt-2",children:"RaceModel"})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Adapter Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"State management and data transformation"}),a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.jsx(Z,{variant:"outline",children:"useRaceData"}),a.jsx(Z,{variant:"outline",children:"useRaceState"}),a.jsx(Z,{variant:"outline",children:"useRaceFilters"})]})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"View Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"UI components and presentation"}),a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.jsx(Z,{variant:"outline",children:"RaceCard"}),a.jsx(Z,{variant:"outline",children:"RacePageView"})]})]})]})})]})}),a.jsx(Zt,{value:"adapters",className:"space-y-6",children:a.jsxs(ce,{children:[a.jsxs(be,{children:[a.jsx(_e,{children:"Adapter State Demo"}),a.jsx(bs,{children:"Interactive demonstration of adapter state management"})]}),a.jsx(de,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"State Management (useRaceState)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Selected Race:"}),a.jsx(Z,{variant:i?"default":"secondary",children:i||"None"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"View Mode:"}),a.jsxs("div",{className:"flex border rounded",children:[a.jsx(U,{variant:l==="grid"?"default":"ghost",size:"sm",onClick:()=>c("grid"),children:"Grid"}),a.jsx(U,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),children:"List"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Expanded Sections:"}),a.jsx(Z,{variant:"outline",children:u.length})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Filters (useRaceFilters)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Search Query:"}),a.jsx("input",{type:"text",value:d,onChange:E=>f(E.target.value),className:"px-2 py-1 border rounded text-sm",placeholder:"Search races..."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Active Filters:"}),a.jsx(Z,{variant:"outline",children:m.tags.length+(m.type?1:0)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Filtered Results:"}),a.jsxs(Z,{variant:"outline",children:[v.length," of ",e.length]})]}),a.jsx(U,{size:"sm",onClick:h,children:"Clear Filters"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Computed Data (useRaceComputed)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Transformed Races:"}),a.jsx(Z,{variant:"outline",children:y.length})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Search Categories:"}),a.jsx(Z,{variant:"outline",children:w.length})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Categories with Counts:"}),a.jsx(Z,{variant:"outline",children:Object.keys(x).length})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Detail View (useRaceDetail)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Selected Race Details:"}),a.jsx(Z,{variant:p?"default":"secondary",children:(p==null?void 0:p.name)||"None"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Related Races:"}),a.jsx(Z,{variant:"outline",children:b.length})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Comparison Available:"}),a.jsx(Z,{variant:j?"default":"secondary",children:j?"Yes":"No"})]})]})]})]})})]})}),a.jsxs(Zt,{value:"components",className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Atomic & Composition Components"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Data Summary"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Total Races:"})," ",e.length]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Categories:"})," ",s.join(", ")]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Total Tags:"})," ",r.length]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Sample Race: ",S==null?void 0:S.name]}),S&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-gray-600 text-sm",children:S.description}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Category:"})," ",S.category]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Keywords:"})," ",S.keywords.length]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAvatar Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),a.jsx(Kn,{raceName:(S==null?void 0:S.name)||"Nord",size:"sm"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),a.jsx(Kn,{raceName:(S==null?void 0:S.name)||"Nord",size:"lg"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),a.jsx(Kn,{raceName:(S==null?void 0:S.name)||"Nord",size:"2xl"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Extra Large"}),a.jsx(Kn,{raceName:(S==null?void 0:S.name)||"Nord",size:"xl"})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Uses generic EntityAvatar with race-specific configuration"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CategoryBadge Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),a.jsx(va,{category:"Human",size:"sm"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),a.jsx(va,{category:"Elf",size:"md"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),a.jsx(va,{category:"Beast",size:"lg"})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Uses generic CategoryBadge with race-specific styling"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"KeywordTag Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Auto-detected types:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx($s,{keyword:"destruction"}),a.jsx($s,{keyword:"waterbreathing"}),a.jsx($s,{keyword:"strong stomach"}),a.jsx($s,{keyword:"custom_flag"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Explicit types:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx($s,{keyword:"alteration",type:"skill"}),a.jsx($s,{keyword:"night eye",type:"ability"}),a.jsx($s,{keyword:"beast race",type:"trait"}),a.jsx($s,{keyword:"magic",type:"flag"})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Auto-detects keyword types or accepts explicit type prop"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"StatBar Component"}),a.jsxs("div",{className:"space-y-4",children:[S&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(vr,{value:S.startingStats.health,maxValue:200,label:"Health",color:"red",size:"md"}),a.jsx(vr,{value:S.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"md"}),a.jsx(vr,{value:S.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"md"})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Progress bars with configurable colors, sizes, and labels"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceStatsDisplay Component"}),a.jsxs("div",{className:"space-y-4",children:[S&&a.jsx(Eu,{stats:S.startingStats,regeneration:S.regeneration,title:"Sample Stats",compact:!0}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Composition component that displays race statistics"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceEffectsDisplay Component"}),a.jsxs("div",{className:"space-y-4",children:[S&&S.racialSpells.length>0&&a.jsx(al,{effects:S.racialSpells.map(E=>({name:E.name,description:E.description})),title:"Racial Abilities",maxDisplay:3}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Composition component for displaying race effects/abilities"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceKeywordsDisplay Component"}),a.jsxs("div",{className:"space-y-4",children:[S&&S.keywords.length>0&&a.jsx(Km,{keywords:S.keywords.map(E=>E.edid),title:"Race Keywords",maxDisplay:6}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Composition component that uses KeywordTag atomic components"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceCard Composition Component"}),a.jsxs("div",{className:"space-y-4",children:[S&&a.jsx(sE,{originalRace:S,isExpanded:!0,showToggle:!1,className:"max-w-2xl"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Main composition component that orchestrates all atomic components"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAutocomplete Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(il,{races:e.slice(0,5),onSelect:E=>{},placeholder:"Search for a race...",className:"w-full"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Search and selection component for races"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAccordion Component"}),a.jsxs("div",{className:"space-y-4",children:[S&&a.jsx(Au,{item:{id:S.edid,name:S.name,description:S.description,summary:S.description,category:S.category,effects:[],tags:[],originalRace:S},isExpanded:N,onToggle:()=>A(!N),showToggle:!0,className:"border-0 shadow-none"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Accordion-style race display for player creation (click to expand/collapse)"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceSelectionCard Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(YF,{allRaces:e.slice(0,5),className:"max-w-2xl"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Complete race selection interface for player creation"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sample Races with All Components"}),a.jsx("div",{className:"space-y-4",children:e.slice(0,2).map(E=>a.jsxs("div",{className:"border rounded p-4",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[a.jsx(Kn,{raceName:E.name,size:"2xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:E.name}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx(va,{category:E.category,size:"sm"})})]})]}),a.jsx("p",{className:"text-sm mb-3",children:E.description}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[a.jsx(vr,{value:E.startingStats.health,maxValue:200,label:"Health",color:"red",size:"sm"}),a.jsx(vr,{value:E.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),a.jsx(vr,{value:E.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[E.keywords.slice(0,5).map((T,z)=>a.jsx($s,{keyword:T.edid},z)),E.keywords.length>5&&a.jsxs("span",{className:"text-xs text-gray-500",children:["+",E.keywords.length-5," more"]})]})]},E.edid))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"View Components Demo"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceQuickSelectorView"}),a.jsx(QF,{selectedRace:i?e.find(E=>E.edid===i):void 0,onRaceSelect:E=>o(E.edid),onRaceClear:()=>o(null),showSearch:!0,showComparison:!0,maxDisplayRaces:3,className:"max-w-md"}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:a.jsx("p",{children:"Compact selection interface for embedded contexts"})})]}),i&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceDetailView"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx(JF,{raceId:i,className:"p-4"})}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:a.jsx("p",{children:"Detailed race view with rich information display"})})]})]})]})]})]}),a.jsxs(Zt,{value:"views",className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"View Components"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(ce,{children:[a.jsxs(be,{children:[a.jsx(_e,{children:"RacePageView"}),a.jsx(bs,{children:"Main page view with full functionality"})]}),a.jsx(de,{children:a.jsx(cE,{className:"border rounded-lg p-4"})})]}),a.jsxs(ce,{children:[a.jsxs(be,{children:[a.jsx(_e,{children:"RaceReferenceView"}),a.jsx(bs,{children:"Browse/search interface"})]}),a.jsx(de,{children:a.jsx(KF,{className:"border rounded-lg p-4"})})]})]})]})]})]})}function Wb({blessings:e,selectedBlessingId:t,onBlessingSelect:n,placeholder:s="Search for a blessing source...",className:r,disabled:i=!1}){const[o,l]=g.useState(!1),[c,u]=g.useState(""),[d,f]=g.useState(-1),[m,h]=g.useState(!1),v=Xa("(max-width: 640px)"),y=g.useRef(null),w=g.useRef(null),x=g.useRef(null),p=g.useMemo(()=>{if(!e||!c.trim())return e||[];const R=c.toLowerCase();return e.filter(_=>{var $;return _.name.toLowerCase().includes(R)||_.blessingName.toLowerCase().includes(R)||_.blessingDescription.toLowerCase().includes(R)||(($=_.tags)==null?void 0:$.some(L=>L.toLowerCase().includes(R)))})},[e,c]);g.useMemo(()=>!t||!e?null:e.find(R=>R.id===t),[t,e]),g.useEffect(()=>{const R=_=>{y.current&&!y.current.contains(_.target)&&(l(!1),f(-1))};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const b=R=>{u(R),l(!0),f(-1)},j=R=>{n(R),u(""),l(!1),f(-1),h(!1)},N=R=>{R.key==="ArrowDown"?(R.preventDefault(),f(_=>Math.min(_+1,p.length-1))):R.key==="ArrowUp"?(R.preventDefault(),f(_=>Math.max(_-1,-1))):R.key==="Enter"?(R.preventDefault(),d>=0&&p[d]&&j(p[d].id)):R.key==="Escape"&&(l(!1),f(-1))},A=()=>{l(!0)},k=()=>{var R;u(""),(R=w.current)==null||R.focus()},C=R=>{u(R.target.value),setTimeout(()=>{var _;(_=x.current)==null||_.focus()},0)},S=R=>{const _={Divine:"bg-blue-100 text-blue-800 border-blue-200","Daedric Prince":"bg-red-100 text-red-800 border-red-200",Tribunal:"bg-purple-100 text-purple-800 border-purple-200",Ancestor:"bg-green-100 text-green-800 border-green-200","Nordic Deity":"bg-orange-100 text-orange-800 border-orange-200","Yokudan Deity":"bg-yellow-100 text-yellow-800 border-yellow-200","Khajiiti Deity":"bg-indigo-100 text-indigo-800 border-indigo-200",Deity:"bg-gray-100 text-gray-800 border-gray-200"};return a.jsx(Z,{variant:"outline",className:F("text-xs font-medium",_[R]||_.Deity),children:R})},E=R=>{if(R===0)return"Permanent";const _=Math.floor(R/3600),$=Math.floor(R%3600/60);return _>0?`${_}h${$>0?` ${$}m`:""}`:`${$}m`},T=()=>a.jsxs(is,{open:m,onOpenChange:h,children:[a.jsx(Va,{asChild:!0,children:a.jsxs(U,{variant:"outline",className:F("w-full justify-between text-left font-normal",!c&&"text-muted-foreground",r),disabled:i,children:[a.jsx("span",{children:c||s}),a.jsx(Je,{className:"h-4 w-4 opacity-50"})]})}),a.jsxs(Fn,{side:"bottom",className:"h-[85vh] max-h-[85vh] p-0 flex flex-col",onOpenAutoFocus:R=>R.preventDefault(),children:[a.jsxs(os,{className:"p-4 border-b flex-shrink-0",children:[a.jsx(ls,{children:"Select Blessing"}),a.jsx(Zr,{children:"Choose your favorite blessing from the options below"})]}),a.jsx("div",{className:"p-4 border-b flex-shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Dt,{ref:x,placeholder:"Search blessings...",value:c,onChange:C,className:"pl-10"}),c&&a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>u(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",children:a.jsx(Me,{className:"h-3 w-3"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:p.length===0?a.jsxs("div",{className:"text-center py-8 px-4",children:[a.jsx("p",{className:"text-muted-foreground",children:"No blessings found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search"})]}):a.jsx("div",{className:"p-4 space-y-3",children:p.map(R=>a.jsx(U,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:()=>j(R.id),children:a.jsxs("div",{className:"w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium",children:R.name}),S(R.type)]}),R.blessingName&&a.jsx("p",{className:"text-sm font-medium text-primary mb-1",children:R.blessingName}),R.effects.length>0&&a.jsxs("div",{className:"space-y-1",children:[R.effects.slice(0,2).map((_,$)=>a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(sn,{className:"h-3 w-3 text-skyrim-gold"}),a.jsx("span",{className:"font-medium",children:_.name}),_.magnitude>0&&a.jsxs("span",{className:"text-xs",children:["+",_.magnitude]}),_.duration>0&&a.jsxs("span",{className:"text-xs",children:["(",E(_.duration),")"]})]},$)),R.effects.length>2&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",R.effects.length-2," more effects"]})]})]})},R.id))})})]})]}),z=()=>a.jsxs("div",{ref:y,className:F("relative",r),children:[a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Dt,{ref:w,type:"text",placeholder:s,value:c,onChange:R=>b(R.target.value),onFocus:A,onKeyDown:N,disabled:i,className:"pl-10 pr-20"}),c&&a.jsx(U,{variant:"ghost",size:"sm",onClick:k,className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted",children:a.jsx(Me,{className:"h-4 w-4"})}),a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>l(!o),className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",children:a.jsx(Je,{className:F("h-4 w-4 transition-transform",o&&"rotate-180")})})]}),o&&a.jsx("div",{className:F("absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30 max-h-60"),style:{zIndex:Nt.AUTOCOMPLETE+10},children:a.jsx("div",{className:"p-2",children:p.length===0?a.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No blessing found."}):p.map((R,_)=>a.jsxs("button",{onClick:()=>j(R.id),className:F("w-full text-left px-3 py-3 rounded-lg text-sm transition-all duration-200 cursor-pointer",_===d?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium",children:R.name}),S(R.type)]}),R.blessingName&&a.jsx("p",{className:"text-sm font-medium text-primary mb-1",children:R.blessingName}),R.effects.length>0&&a.jsxs("div",{className:"space-y-1",children:[R.effects.slice(0,2).map(($,L)=>a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(sn,{className:"h-3 w-3 text-skyrim-gold"}),a.jsx("span",{className:"font-medium",children:$.name}),$.magnitude>0&&a.jsxs("span",{className:"text-xs",children:["+",$.magnitude]}),$.duration>0&&a.jsxs("span",{className:"text-xs",children:["(",E($.duration),")"]})]},L)),R.effects.length>2&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",R.effects.length-2," more effects"]})]})]},R.id))})})]});return v?a.jsx(T,{}):a.jsx(z,{})}const t9={};function ol({religionName:e,size:t="2xl",className:n}){const s=t9[e],r=s?Wt(`assets/religion-avatar/${s}`):void 0;return a.jsx(Fm,{imgSrc:r,alt:e,size:t,className:n})}function uE(e){if(!e)return e;let t=e;return t=t.replace(/Global=WSN_Favor_Global_Fractional(\d*)/g,(n,s)=>`favor-based amount${s||""}`).replace(/Global=WSN_Favor_Global/g,"favor-based amount").replace(/WSN_Favor_Global_Fractional(\d*)/g,(n,s)=>`favor-based amount${s||""}`).replace(/WSN_Favor_Global/g,"favor-based amount").replace(/WSN_Effect_Global_[A-Za-z]+/g,"effect amount").replace(/WSN_[A-Za-z_]+/g,"favor-based amount").replace(/([A-Za-z])_([A-Za-z])/g,"$1 $2").replace(/([A-Za-z])_([A-Za-z])/g,"$1 $2").replace(new RegExp("(?<!<)_(?!>)","g")," "),t}function dE(e){return e?uE(e).replace(/\b\w/g,n=>n.toUpperCase()):""}function eh(e){return e?uE(e):""}function n9(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function s9({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=eh(e).replace(/<mag>/g,t.toString()).replace(/<magnitude>/g,t.toString()).replace(/<dur>/g,n.toString()).replace(/<duration>/g,n.toString()).replace(/<area>/g,s.toString());return r=r.replace(/\b(magnitude|mag)\b/gi,t.toString()).replace(/\b(duration|dur)\b/gi,n.toString()).replace(/\b(area)\b/gi,s.toString()),a.jsx(Le,{text:r,className:"text-sm text-muted-foreground"})}function r9({religion:e,className:t,onClick:n,showToggle:s=!0}){var o,l;Xe();const r=e.blessing,i=((o=r==null?void 0:r.effects)==null?void 0:o.length)||0;return!r||i===0?null:a.jsxs("div",{className:F("p-4 border rounded-2xl bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",t),onClick:n,children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(ol,{religionName:e.name,size:"2xl"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(je,{className:"text-lg font-semibold text-primary truncate",children:e.name}),a.jsxs(ve,{className:"text-sm text-muted-foreground mt-1",children:["Blessing â€¢ ",i," effect",i!==1?"s":""]})]}),s&&a.jsx("div",{onClick:c=>c.stopPropagation(),children:a.jsx(ds,{itemId:(l=e.name)==null?void 0:l.toLowerCase().replace(/\s+/g,"-"),itemType:"blessing",itemName:`Blessing of ${e.name}`})})]}),a.jsx("div",{className:"space-y-2",children:r.effects.filter(c=>c.effectType!=="1"&&c.effectType!=="3").slice(0,2).map((c,u)=>a.jsx("div",{className:"flex items-start gap-2 p-2 bg-muted/30 rounded-lg",children:a.jsxs("div",{className:"flex-1",children:[a.jsx(ve,{className:"font-medium text-sm mb-1",children:dE(c.effectName)}),a.jsx(s9,{description:c.effectDescription,magnitude:c.magnitude,duration:c.duration,area:c.area}),(c.duration>0||c.area>0)&&a.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[c.duration>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Er,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",n9(c.duration)]})]}),c.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",c.area]})]})]})]})},u))}),i>2&&a.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:a.jsxs(ve,{className:"text-xs text-muted-foreground",children:["+",i-2," more effect",i-2!==1?"s":""]})})]})}const a9={Restoration:a.jsx(Qs,{className:"h-4 w-4 text-green-500"}),Destruction:a.jsx(Al,{className:"h-4 w-4 text-red-500"}),Alteration:a.jsx(at,{className:"h-4 w-4 text-blue-500"}),Illusion:a.jsx(Ko,{className:"h-4 w-4 text-purple-500"}),Conjuration:a.jsx(sn,{className:"h-4 w-4 text-purple-500"}),Enchanting:a.jsx(Ba,{className:"h-4 w-4 text-blue-500"}),Alchemy:a.jsx(t0,{className:"h-4 w-4 text-green-500"}),"Light Armor":a.jsx(at,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":a.jsx(at,{className:"h-4 w-4 text-gray-500"}),"One-Handed":a.jsx(Ci,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":a.jsx(Ci,{className:"h-4 w-4 text-red-500"}),Archery:a.jsx(ss,{className:"h-4 w-4 text-green-500"}),Block:a.jsx(at,{className:"h-4 w-4 text-yellow-500"}),Smithing:a.jsx(at,{className:"h-4 w-4 text-gray-500"}),Speechcraft:a.jsx(Ko,{className:"h-4 w-4 text-blue-500"}),Sneak:a.jsx(El,{className:"h-4 w-4 text-purple-500"}),Lockpicking:a.jsx(Jo,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:a.jsx(Jo,{className:"h-4 w-4 text-purple-500"})};function i9(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function o9({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=e.replace(/<mag>/g,t.toString()).replace(/<magnitude>/g,t.toString()).replace(/<dur>/g,n.toString()).replace(/<duration>/g,n.toString()).replace(/<area>/g,s.toString());return r=r.replace(/\b(magnitude|mag)\b/gi,t.toString()).replace(/\b(duration|dur)\b/gi,n.toString()).replace(/\b(area)\b/gi,s.toString()),a.jsx(Le,{text:r,className:"text-sm text-muted-foreground"})}function l9(e){return a9[e]||a.jsx(qe,{className:"h-4 w-4 text-gray-500"})}function c9({religion:e,isOpen:t,onOpenChange:n}){var i,o,l;if(Xe(),!e)return null;const s=e.blessing,r=((i=s==null?void 0:s.effects)==null?void 0:i.length)||0;return!s||r===0?null:a.jsx(Ki,{open:t,onOpenChange:n,title:`Blessing of ${e.name}`,description:"Divine blessing granted to worshippers",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ol,{religionName:e.name,size:"lg"}),a.jsxs("div",{children:[a.jsxs(je,{className:"text-xl font-semibold",children:["Blessing of ",e.name]}),a.jsxs(ve,{className:"text-sm text-muted-foreground",children:[r," effect",r!==1?"s":""]})]})]}),a.jsx(ds,{itemId:(o=e.name)==null?void 0:o.toLowerCase().replace(/\s+/g,"-"),itemType:"blessing",itemName:`Blessing of ${e.name}`})]}),a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Blessing Effects"}),a.jsx("div",{className:"space-y-3",children:s.effects.filter(c=>c.effectType!=="1"&&c.effectType!=="3").map((c,u)=>a.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ol,{religionName:e.name,size:"sm"}),c.effectType&&l9(c.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(ve,{className:"font-medium text-sm mb-2",children:c.effectName}),a.jsx(o9,{description:c.effectDescription,magnitude:c.magnitude,duration:c.duration,area:c.area}),c.duration>0&&a.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[a.jsx(Er,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",i9(c.duration)]})]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:c.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",c.area]})]})})]})]})},u))})]}),a.jsxs("div",{className:"pt-4 border-t border-border",children:[a.jsxs(je,{className:"text-lg font-semibold mb-3",children:["About ",e.name]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium mb-1",children:"Religion Type"}),a.jsx(ve,{className:"text-sm text-muted-foreground",children:e.type})]}),((l=e.tenet)==null?void 0:l.description)&&a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium mb-1",children:"Tenets"}),a.jsx(ve,{className:"text-sm text-muted-foreground",children:e.tenet.description})]}),e.favoredRaces&&e.favoredRaces.length>0&&a.jsxs("div",{children:[a.jsx(ve,{className:"text-sm font-medium mb-1",children:"Favored Races"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.favoredRaces.map((c,u)=>a.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-md",children:c},u))})]})]})]})]})})}function fE({category:e,size:t="md",className:n}){return a.jsx(Wk,{category:e,categoryType:"religion",size:t,className:n})}function mE({item:e,originalReligion:t,className:n,onClick:s,showViewAllButton:r=!1,showToggle:i=!0,viewAllButtonText:o="View All",viewAllButtonRoute:l="/religions",onOpenDetails:c}){var x,p,b,j,N,A,k,C,S,E,T,z;const u=lt(),d=R=>{R.stopPropagation(),u(l),window.scrollTo({top:0,behavior:"smooth"})},f=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Religion",m=(e==null?void 0:e.description)||((x=t==null?void 0:t.tenet)==null?void 0:x.description)||"",h=(e==null?void 0:e.category)||(t==null?void 0:t.type)||"";e!=null&&e.effects,e!=null&&e.summary||(p=t==null?void 0:t.tenet)!=null&&p.description;const v=(((j=(b=t==null?void 0:t.blessing)==null?void 0:b.effects)==null?void 0:j.length)||0)+(((A=(N=t==null?void 0:t.tenet)==null?void 0:N.effects)==null?void 0:A.length)||0)+(((C=(k=t==null?void 0:t.boon1)==null?void 0:k.effects)==null?void 0:C.length)||0)+(((E=(S=t==null?void 0:t.boon2)==null?void 0:S.effects)==null?void 0:E.length)||0),y=g.useMemo(()=>{var R,_,$;return(($=(_=(R=t==null?void 0:t.blessing)==null?void 0:R.effects)==null?void 0:_[0])==null?void 0:$.effectName)||"Blessing"},[t]),w=(T=t==null?void 0:t.tenet)!=null&&T.description?t.tenet.description.split(".").filter(R=>R.trim().length>0).slice(0,4).map(R=>({id:R.trim(),title:R.trim(),short:R.trim(),full:R.trim()})):[];return a.jsxs("div",{className:F("p-4 border rounded-2xl bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",n),onClick:R=>{if(s&&s(),c){const _=(t==null?void 0:t.name)||(e==null?void 0:e.id)||"";c(_)}},children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(ol,{religionName:f,size:"2xl"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(je,{className:"text-lg font-semibold text-primary truncate",children:f}),h&&a.jsx(fE,{category:h,size:"sm",className:"mt-1"})]}),i&&a.jsx("div",{onClick:R=>R.stopPropagation(),children:a.jsx(ds,{itemId:((z=t==null?void 0:t.name)==null?void 0:z.toLowerCase().replace(/\s+/g,"-"))||(e==null?void 0:e.id)||"",itemType:"religion",itemName:f})})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[v>0&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded-full text-xs",children:[a.jsx(qe,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{className:"font-medium",children:[v," effects"]})]}),(t==null?void 0:t.favoredRaces)&&t.favoredRaces.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[t.favoredRaces.slice(0,2).map((R,_)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(qe,{className:"h-3 w-3"}),R]},_)),t.favoredRaces.length>2&&a.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded-full text-xs font-medium",children:["+",t.favoredRaces.length-2]})]})]}),m&&a.jsx("div",{className:"mb-3",children:a.jsx("div",{className:"text-sm text-muted-foreground leading-relaxed",children:m})}),a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/30 rounded-lg",children:[a.jsx(Qs,{className:"h-4 w-4 text-red-500"}),a.jsx("span",{className:"text-sm font-medium",children:y})]})}),w.length>0&&a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"space-y-1",children:[w.slice(0,4).map((R,_)=>a.jsxs("div",{className:"flex items-start gap-2 p-2 bg-muted/30 rounded-lg text-xs",children:[a.jsx(at,{className:"h-3 w-3 text-blue-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-muted-foreground leading-relaxed",children:R.title})]},_)),w.length>4&&a.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded-full text-xs font-medium text-center",children:["+",w.length-4," more tenets"]})]})}),r&&a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(U,{variant:"outline",size:"sm",onClick:d,children:a.jsx(Fa,{className:"h-4 w-4"})})})]})}const u9={Restoration:a.jsx(Qs,{className:"h-4 w-4 text-green-500"}),Destruction:a.jsx(Al,{className:"h-4 w-4 text-red-500"}),Alteration:a.jsx(at,{className:"h-4 w-4 text-blue-500"}),Illusion:a.jsx(Ko,{className:"h-4 w-4 text-purple-500"}),Conjuration:a.jsx(sn,{className:"h-4 w-4 text-purple-500"}),Enchanting:a.jsx(Ba,{className:"h-4 w-4 text-blue-500"}),Alchemy:a.jsx(t0,{className:"h-4 w-4 text-green-500"}),"Light Armor":a.jsx(at,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":a.jsx(at,{className:"h-4 w-4 text-gray-500"}),"One-Handed":a.jsx(Ci,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":a.jsx(Ci,{className:"h-4 w-4 text-red-500"}),Archery:a.jsx(ss,{className:"h-4 w-4 text-green-500"}),Block:a.jsx(at,{className:"h-4 w-4 text-yellow-500"}),Smithing:a.jsx(at,{className:"h-4 w-4 text-gray-500"}),Speechcraft:a.jsx(Ko,{className:"h-4 w-4 text-blue-500"}),Sneak:a.jsx(El,{className:"h-4 w-4 text-purple-500"}),Lockpicking:a.jsx(Jo,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:a.jsx(Jo,{className:"h-4 w-4 text-purple-500"})};function Xh(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function Wh({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=eh(e);r=r.replace(/<[^>]*>/g,""),r=r.replace(/<mag>/g,t.toString()),r=r.replace(/<magnitude>/g,t.toString()),r=r.replace(/<dur>/g,n.toString()),r=r.replace(/<duration>/g,n.toString()),s>0&&(r=r.replace(/<area>/g,s.toString())),r=r.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const i=r.split(/(<[^>]+>)/g);return a.jsx(ve,{className:"text-sm text-muted-foreground",children:i.map((o,l)=>{if(o.startsWith("<")&&o.endsWith(">")){const c=o.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:c},l)}return o})})}function hE({religion:e,isOpen:t,onOpenChange:n}){var r,i;if(!e)return null;const s=o=>u9[o]||a.jsx(qe,{className:"h-4 w-4 text-skyrim-gold"});return a.jsx(Ki,{open:t,onOpenChange:n,side:"right",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(ol,{religionName:e.name,size:"4xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.type&&a.jsx(fE,{category:e.type,size:"sm"}),a.jsx(ds,{itemId:e.name,itemType:"religion",itemName:e.name})]}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:((r=e.tenet)==null?void 0:r.description)||"A divine faith with unique blessings and tenets."})]})]})}),a.jsxs("div",{className:"space-y-6",children:[e.favoredRaces&&e.favoredRaces.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Favored Races"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.favoredRaces.map((o,l)=>a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg border border-border",children:[a.jsx(qe,{className:"h-4 w-4 text-skyrim-gold"}),a.jsx("span",{className:"text-sm font-medium",children:o})]},l))})]}),e.worshipRestrictions&&e.worshipRestrictions.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Worship Restrictions"}),a.jsx("div",{className:"space-y-2",children:e.worshipRestrictions.map((o,l)=>a.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Me,{className:"h-4 w-4 text-red-500 mt-0.5"}),a.jsx(ve,{className:"text-sm text-muted-foreground",children:o})]})},l))})]}),e.blessing&&e.blessing.effects.length>0&&a.jsxs("div",{children:[a.jsxs(je,{className:"text-lg font-semibold mb-3",children:["Blessing of ",e.name]}),a.jsx("div",{className:"space-y-3",children:e.blessing.effects.filter(o=>o.effectType!=="1"&&o.effectType!=="3").map((o,l)=>a.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qs,{className:"h-4 w-4 text-red-500"}),o.effectType&&s(o.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(ve,{className:"font-medium text-sm mb-2",children:dE(o.effectName)}),a.jsx(Wh,{description:o.effectDescription,magnitude:o.magnitude,duration:o.duration,area:o.area}),o.duration>0&&a.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[a.jsx(Er,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",Xh(o.duration)]})]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:o.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",o.area]})]})})]})]})},l))})]}),((i=e.tenet)==null?void 0:i.effects)&&e.tenet.effects.length>0&&a.jsxs("div",{children:[a.jsxs(je,{className:"text-lg font-semibold mb-3",children:["Tenets of ",e.name]}),a.jsx("div",{className:"space-y-3",children:e.tenet.description.split(".").filter(o=>o.trim().length>0).map((o,l)=>a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-muted/50 rounded-lg border border-border",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(at,{className:"h-4 w-4 text-blue-500"})}),a.jsx("div",{className:"flex-1",children:a.jsx(ve,{className:"text-sm text-muted-foreground",children:o.trim()+"."})})]},l))})]}),(e.boon1||e.boon2)&&a.jsxs("div",{children:[a.jsxs(je,{className:"text-lg font-semibold mb-3",children:["Boons of ",e.name]}),a.jsxs("div",{className:"space-y-4",children:[e.boon1&&e.boon1.effects.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-md font-medium mb-2",children:"Follower Boon"}),a.jsx("div",{className:"space-y-3",children:e.boon1.effects.map((o,l)=>a.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sn,{className:"h-4 w-4 text-yellow-500"}),o.effectType&&s(o.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(ve,{className:"font-medium text-sm mb-2",children:o.effectName}),a.jsx(Wh,{description:o.effectDescription,magnitude:o.magnitude,duration:o.duration,area:o.area}),o.duration>0&&a.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[a.jsx(Er,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",Xh(o.duration)]})]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:o.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",o.area]})]})})]})]})},l))})]}),e.boon2&&e.boon2.effects.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-md font-medium mb-2",children:"Devotee Boon"}),a.jsx("div",{className:"space-y-3",children:e.boon2.effects.map((o,l)=>a.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ba,{className:"h-4 w-4 text-purple-500"}),o.effectType&&s(o.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(ve,{className:"font-medium text-sm mb-2",children:o.effectName}),a.jsx(Wh,{description:o.effectDescription,magnitude:o.magnitude,duration:o.duration,area:o.area}),o.duration>0&&a.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[a.jsx(Er,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",Xh(o.duration)]})]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:o.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",o.area]})]})})]})]})},l))})]})]})]})]})]})})}function Ap(e,t){const n=g.useMemo(()=>e?e.map(l=>{var c,u,d,f,m,h,v,y,w;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:((c=l.tenet)==null?void 0:c.description)||"",type:l.type,pantheon:l.pantheon||"",favoredRaces:_r()?l.favoredRaces||[]:[],tenetEffects:((d=(u=l.tenet)==null?void 0:u.effects)==null?void 0:d.map(x=>`${x.effectName} ${x.effectDescription}`))||[],blessingEffects:((m=(f=l.blessing)==null?void 0:f.effects)==null?void 0:m.map(x=>`${x.effectName} ${x.effectDescription}`))||[],followerPowers:((v=(h=l.boon1)==null?void 0:h.effects)==null?void 0:v.map(x=>`${x.effectName} ${x.effectDescription}`))||[],devoteePowers:((w=(y=l.boon2)==null?void 0:y.effects)==null?void 0:w.map(x=>`${x.effectName} ${x.effectDescription}`))||[],originalReligion:l}}):[],[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"tenetEffects",weight:.2},{name:"blessingEffects",weight:.2},{name:"followerPowers",weight:.15},{name:"devoteePowers",weight:.15},..._r()?[{name:"favoredRaces",weight:.1}]:[],{name:"type",weight:.1},{name:"pantheon",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new ln(n,s),[n,s]),i=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredReligions:g.useMemo(()=>i.map(l=>l.item.originalReligion),[i]),searchResults:i,searchableReligions:n}}function gE(e){var t,n,s,r,i,o,l,c,u,d,f,m,h,v;return{name:e.name,type:e.type||e.pantheon||"Unknown",blessing:{spellId:((t=e.blessing)==null?void 0:t.spellId)||"",spellName:((n=e.blessing)==null?void 0:n.spellName)||"",effects:((s=e.blessing)==null?void 0:s.effects)||[]},boon1:{spellId:((r=e.boon1)==null?void 0:r.spellId)||"",spellName:((i=e.boon1)==null?void 0:i.spellName)||"",effects:((o=e.boon1)==null?void 0:o.effects)||[]},boon2:{spellId:((l=e.boon2)==null?void 0:l.spellId)||"",spellName:((c=e.boon2)==null?void 0:c.spellName)||"",effects:((u=e.boon2)==null?void 0:u.effects)||[]},tenet:{spellId:((d=e.tenet)==null?void 0:d.spellId)||"",spellName:((f=e.tenet)==null?void 0:f.spellName)||"",header:((m=e.tenet)==null?void 0:m.header)||"",description:((h=e.tenet)==null?void 0:h.description)||"",effects:((v=e.tenet)==null?void 0:v.effects)||[]},favoredRaces:e.favoredRaces||[],worshipRestrictions:e.worshipRestrictions||[]}}function d9(e){var t,n,s,r;return{id:e.name.toLowerCase().replace(/\s+/g,"-"),name:e.name,type:e.type,description:((t=e.tenet)==null?void 0:t.description)||"",tenetDescription:((n=e.tenet)==null?void 0:n.description)||"",followerPower:((s=e.boon1)==null?void 0:s.spellName)||"",devoteePower:((r=e.boon2)==null?void 0:r.spellName)||"",favoredRaces:e.favoredRaces||[],worshipRestrictions:e.worshipRestrictions||[],originalReligion:e}}function f9(e){return e?e.map(d9):[]}function m9(e,t){if(!(!e||!t))return e.find(n=>n.name.toLowerCase().replace(/\s+/g,"-")===t)}function Kb({religions:e,selectedDeityId:t,onDeitySelect:n,placeholder:s="Search for a deity to follow...",className:r,disabled:i=!1}){const[o,l]=g.useState(""),[c,u]=g.useState(!1),d=Xa("(max-width: 640px)"),f=g.useRef(null),{filteredReligions:m}=Ap(e,o),h=g.useMemo(()=>f9(m),[m]),v=N=>{const A={Divine:"bg-blue-100 text-blue-800 border-blue-200","Daedric Prince":"bg-red-100 text-red-800 border-red-200",Tribunal:"bg-purple-100 text-purple-800 border-purple-200",Ancestor:"bg-green-100 text-green-800 border-green-200","Nordic Deity":"bg-orange-100 text-orange-800 border-orange-200","Yokudan Deity":"bg-yellow-100 text-yellow-800 border-yellow-200","Khajiiti Deity":"bg-indigo-100 text-indigo-800 border-indigo-200",Deity:"bg-gray-100 text-gray-800 border-gray-200"};return a.jsx(Z,{variant:"outline",className:F("text-xs font-medium",A[N]||A.Deity),children:N})},y=g.useMemo(()=>h.map(N=>({id:N.id,label:N.name,description:N.tenetDescription,category:N.type,badge:v(N.type),metadata:{originalReligion:N.originalReligion,favoredRaces:N.favoredRaces}})),[h]),w=N=>{n(N.id),u(!1),l("")},x=N=>{l(N.target.value),setTimeout(()=>{var A;(A=f.current)==null||A.focus()},0)},p=(N,A)=>{var k;return a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium",children:N.label}),N.badge]}),N.description&&a.jsx(Le,{text:N.description,className:"text-sm text-muted-foreground line-clamp-2 mb-1"}),_r()&&((k=N.metadata)==null?void 0:k.favoredRaces)&&N.metadata.favoredRaces.length>0&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(qe,{className:"h-3 w-3 fill-current"}),a.jsxs("span",{children:["Favored races:"," ",N.metadata.favoredRaces.map(C=>C.name).join(", ")]})]})]})})},b=()=>a.jsxs(is,{open:c,onOpenChange:u,children:[a.jsx(Va,{asChild:!0,children:a.jsxs(U,{variant:"outline",className:F("w-full justify-between text-left font-normal",!o&&"text-muted-foreground",r),disabled:i,children:[a.jsx("span",{children:o||s}),a.jsx(Je,{className:"h-4 w-4 opacity-50"})]})}),a.jsxs(Fn,{side:"bottom",className:"h-[85vh] max-h-[85vh] p-0 flex flex-col",onOpenAutoFocus:N=>N.preventDefault(),children:[a.jsxs(os,{className:"p-4 border-b flex-shrink-0",children:[a.jsx(ls,{children:"Select Religion"}),a.jsx(Zr,{children:"Choose your character's religion from the options below"})]}),a.jsx("div",{className:"p-4 border-b flex-shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Dt,{ref:f,placeholder:"Search religions...",value:o,onChange:x,className:"pl-10"}),o&&a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>l(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",children:a.jsx(Me,{className:"h-3 w-3"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:y.length===0?a.jsxs("div",{className:"text-center py-8 px-4",children:[a.jsx("p",{className:"text-muted-foreground",children:"No religions found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search"})]}):a.jsx("div",{className:"p-4 space-y-3",children:y.map(N=>a.jsx(U,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:()=>w(N),children:a.jsx("div",{className:"w-full",children:p(N)})},N.id))})})]})]}),j=()=>a.jsx(Cu,{options:y,onSelect:w,placeholder:s,className:r,renderOption:p,emptyMessage:"No religions found",searchQuery:o,onSearchQueryChange:l});return d?a.jsx(b,{}):a.jsx(j,{})}function Kh({text:e,className:t="text-sm text-muted-foreground"}){if(!e)return null;let n=e.replace(/<[^>]*>/g,"");n=n.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const s=n.split(/(<[^>]+>)/g);return a.jsx("div",{className:t,children:s.map((r,i)=>{if(r.startsWith("<")&&r.endsWith(">")){const o=r.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:o},i)}return r})})}function h9({description:e}){if(!e)return null;const n=eh(e).split(/(<[^>]+>)/g);return a.jsx(ve,{className:"text-xs text-muted-foreground",children:n.map((s,r)=>{if(s.startsWith("<")&&s.endsWith(">")){const i=s.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:i},r)}return s})})}function Qh({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=eh(e);r=r.replace(/<[^>]*>/g,""),r=r.replace(/<mag>/g,t.toString()),r=r.replace(/<magnitude>/g,t.toString()),r=r.replace(/<dur>/g,n.toString()),r=r.replace(/<duration>/g,n.toString()),s>0&&(r=r.replace(/<area>/g,s.toString())),r=r.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const i=r.split(/(<[^>]+>)/g);return a.jsx(ve,{className:"text-xs text-muted-foreground",children:i.map((o,l)=>{if(o.startsWith("<")&&o.endsWith(">")){const c=o.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:c},l)}return o})})}function Jh(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function eg(e){const t=[/<mag>/g,/<magnitude>/g],n=[/<dur>/g,/<duration>/g],s=t.some(i=>i.test(e)),r=n.some(i=>i.test(e));return{hasMagnitude:s,hasDuration:r}}const g9={Restoration:a.jsx(Qs,{className:"h-4 w-4 text-green-500"}),Destruction:a.jsx(Al,{className:"h-4 w-4 text-red-500"}),Alteration:a.jsx(at,{className:"h-4 w-4 text-blue-500"}),Illusion:a.jsx(Ko,{className:"h-4 w-4 text-purple-500"}),Conjuration:a.jsx(sn,{className:"h-4 w-4 text-purple-500"}),Enchanting:a.jsx(Ba,{className:"h-4 w-4 text-blue-500"}),Alchemy:a.jsx(t0,{className:"h-4 w-4 text-green-500"}),"Light Armor":a.jsx(at,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":a.jsx(at,{className:"h-4 w-4 text-gray-500"}),"One-Handed":a.jsx(Ci,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":a.jsx(Ci,{className:"h-4 w-4 text-red-500"}),Archery:a.jsx(ss,{className:"h-4 w-4 text-green-500"}),Block:a.jsx(at,{className:"h-4 w-4 text-yellow-500"}),Smithing:a.jsx(at,{className:"h-4 w-4 text-gray-500"}),Speechcraft:a.jsx(Ko,{className:"h-4 w-4 text-blue-500"}),Sneak:a.jsx(El,{className:"h-4 w-4 text-purple-500"}),Lockpicking:a.jsx(Jo,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:a.jsx(Jo,{className:"h-4 w-4 text-purple-500"})},p9={Divine:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Daedric:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Aedric:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Tribal:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Ancestral:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},Qb={sm:"text-xs px-2 py-0.5"};function x9({item:e,originalReligion:t,isExpanded:n=!1,onToggle:s,className:r,showBlessings:i=!0,showTenets:o=!0,showBoons:l=!0,showFavoredRaces:c=!0,disableHover:u,showToggle:d}){var h,v,y,w,x,p,b,j;const f=N=>{switch(N){case"positive":return a.jsx(Na,{className:"h-4 w-4 text-green-500"});case"negative":return a.jsx(zo,{className:"h-4 w-4 text-red-500"});case"neutral":return a.jsx(e0,{className:"h-4 w-4 text-blue-500"})}},m=N=>g9[N]||a.jsx(qe,{className:"h-4 w-4 text-skyrim-gold"});return a.jsxs(pe,{expanded:n,onToggle:s,className:r,disableHover:u,children:[a.jsxs(pe.Header,{children:[d&&a.jsx(ds,{itemId:e.id,itemType:"religion",itemName:e.name}),a.jsx("div",{className:"flex-1",children:a.jsx(je,{className:"text-primary font-semibold",children:e.name})}),e.category&&a.jsx(Z,{variant:"outline",className:F(p9[e.category]||"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",Qb.sm,"font-medium transition-colors"),children:e.category}),_r()&&c&&t&&Array.isArray(t.favoredRaces)&&t.favoredRaces.length>0&&a.jsx("div",{className:"flex items-center gap-1",children:t.favoredRaces.map((N,A)=>a.jsxs(Z,{variant:"outline",className:F("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20",Qb.sm,"font-medium transition-colors"),children:[a.jsx(qe,{className:"h-3 w-3 mr-1"}),"Favors ",N]},A))})]}),a.jsxs(pe.Summary,{children:[a.jsx("div",{className:"line-clamp-2",children:a.jsx(Kh,{text:e.summary||e.description,className:"text-sm text-muted-foreground"})}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[(h=e.effects)==null?void 0:h.slice(0,2).map((N,A)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:N.description,children:[f(N.type),a.jsx("span",{className:"font-medium",children:N.name})]},A)),_r()&&c&&((v=t==null?void 0:t.favoredRaces)==null?void 0:v.slice(0,2).map((N,A)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",children:[a.jsx(qe,{className:"h-3 w-3 text-skyrim-gold"}),a.jsx("span",{className:"font-medium",children:N})]},`race-${A}`)))]})]}),a.jsxs(pe.Details,{children:[e.description&&a.jsx("div",{children:a.jsx(Kh,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),_r()&&c&&Array.isArray(t==null?void 0:t.favoredRaces)&&t.favoredRaces.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Favored Races"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:t.favoredRaces.map((N,A)=>a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg border border-border",children:[a.jsx(qe,{className:"h-4 w-4 text-skyrim-gold"}),a.jsx("span",{className:"text-sm font-medium",children:N})]},A))})]}),Array.isArray(t==null?void 0:t.worshipRestrictions)&&t.worshipRestrictions.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Worship Restrictions"}),a.jsx("div",{className:"space-y-2",children:t.worshipRestrictions.map((N,A)=>a.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(zo,{className:"h-4 w-4 text-red-500 mt-0.5"}),a.jsx(Kh,{text:N,className:"text-sm text-muted-foreground"})]})},A))})]}),i&&Array.isArray((y=t==null?void 0:t.blessing)==null?void 0:y.effects)&&t.blessing.effects.length>0&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Blessing of ",e.name]}),a.jsx("div",{className:"space-y-3",children:t.blessing.effects.filter(N=>N.effectType!=="1"&&N.effectType!=="3").map((N,A)=>{const{hasDuration:k}=eg(N.effectDescription);return a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.effectType&&m(N.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(ve,{className:"font-medium text-sm mb-1",children:N.effectName}),a.jsx(Qh,{description:N.effectDescription,magnitude:N.magnitude,duration:N.duration,area:N.area}),k&&N.duration>0&&a.jsxs(ve,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for ",Jh(N.duration),"."]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:N.area>0&&a.jsxs("span",{children:["Area: ",N.area]})})]})]})},A)})})]}),o&&Array.isArray((w=t==null?void 0:t.tenet)==null?void 0:w.effects)&&t.tenet.effects.length>0&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Tenets of ",e.name]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.tenet.description.split(".").filter(N=>N.trim().length>0).map((N,A)=>a.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsx("div",{className:"flex items-center gap-2",children:f("positive")}),a.jsx("div",{className:"flex-1",children:a.jsx(h9,{description:N.trim()+"."})})]},A))})]}),l&&(Array.isArray((x=t==null?void 0:t.boon1)==null?void 0:x.effects)&&t.boon1.effects.length>0||Array.isArray((p=t==null?void 0:t.boon2)==null?void 0:p.effects)&&t.boon2.effects.length>0)&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Boons of ",e.name]}),a.jsxs("div",{className:"space-y-4",children:[Array.isArray((b=t==null?void 0:t.boon1)==null?void 0:b.effects)&&t.boon1.effects.length>0&&a.jsxs("div",{children:[a.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Follower Boon"}),a.jsx("div",{className:"space-y-3",children:t.boon1.effects.map((N,A)=>{const{hasDuration:k}=eg(N.effectDescription);return a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.effectType&&m(N.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(ve,{className:"font-medium text-sm mb-1",children:N.effectName}),a.jsx(Qh,{description:N.effectDescription,magnitude:N.magnitude,duration:N.duration,area:N.area}),k&&N.duration>0&&a.jsxs(ve,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",Jh(N.duration),"."]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:N.area>0&&a.jsxs("span",{children:["Area: ",N.area]})})]})]})},A)})})]}),Array.isArray((j=t==null?void 0:t.boon2)==null?void 0:j.effects)&&t.boon2.effects.length>0&&a.jsxs("div",{children:[a.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Devotee Boon"}),a.jsx("div",{className:"space-y-3",children:t.boon2.effects.map((N,A)=>{const{hasDuration:k}=eg(N.effectDescription);return a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.effectType&&m(N.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(ve,{className:"font-medium text-sm mb-1",children:N.effectName}),a.jsx(Qh,{description:N.effectDescription,magnitude:N.magnitude,duration:N.duration,area:N.area}),k&&N.duration>0&&a.jsxs(ve,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",Jh(N.duration),"."]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:N.area>0&&a.jsxs("span",{children:["Area: ",N.area]})})]})]})},A)})})]})]})]})]})]})}function v9(){const{data:e,loading:t,error:n}=Xk();return{religions:e||[],loading:t,error:n}}function pE({className:e}){const{religions:t,loading:n,error:s}=v9(),{build:r,setReligion:i}=Xe(),o=lt(),[l,c]=g.useState(!0),u=r.religion?m9(t,r.religion):null,d=()=>{o("/build/religions"),window.scrollTo({top:0,behavior:"smooth"})},f=()=>{c(!l)};if(n)return a.jsx(en,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading religions..."})});if(s)return a.jsx(en,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:a.jsxs("div",{className:"text-sm text-destructive",children:["Error loading religions: ",s]})});if(!u)return a.jsxs(en,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's religion"}),a.jsx(Kb,{religions:t,selectedDeityId:r.religion,onDeitySelect:i,placeholder:"Search for a religion...",className:"w-full"})]});const m=IC(u);return a.jsxs(en,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[a.jsx(Kb,{religions:t,selectedDeityId:r.religion,onDeitySelect:i,placeholder:`Religion: Select a religion (${u.name})`,className:"w-full"}),a.jsx(x9,{item:m,originalReligion:u,isExpanded:l,onToggle:f,className:"border-0 shadow-none",disableHover:!0,showToggle:!1,showBlessings:!1,showTenets:!0,showBoons:!0,showFavoredRaces:_r()})]})}function y9(){const{data:e,loading:t,error:n}=R8();return{blessings:e||[],loading:t,error:n}}function b9(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function w9({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=e.replace(/<mag>/g,t.toString()).replace(/<magnitude>/g,t.toString()).replace(/<dur>/g,n.toString()).replace(/<duration>/g,n.toString()).replace(/<area>/g,s.toString());return r=r.replace(/\b(magnitude|mag)\b/gi,t.toString()).replace(/\b(duration|dur)\b/gi,n.toString()).replace(/\b(area)\b/gi,s.toString()),a.jsx("div",{className:"text-sm text-muted-foreground",children:r})}function xE({className:e}){const{build:t,setFavoriteBlessing:n}=Xe(),s=lt(),{blessings:r,loading:i,error:o}=y9(),l=t.favoriteBlessing?r.find(u=>u.id===t.favoriteBlessing):null,c=()=>{s("/build/religions?tab=blessings"),window.scrollTo({top:0,behavior:"smooth"})};return i?a.jsx(en,{title:"Favorite Blessing",navigateTo:"religions",onNavigate:c,className:e,children:a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading blessings..."})}):o?a.jsx(en,{title:"Favorite Blessing",navigateTo:"religions",onNavigate:c,className:e,children:a.jsxs("div",{className:"text-sm text-destructive",children:["Error loading blessings: ",o]})}):l?a.jsxs(en,{title:"Favorite Blessing",navigateTo:"religions",onNavigate:c,className:e,children:[a.jsx(Wb,{blessings:r,selectedBlessingId:t.favoriteBlessing,onBlessingSelect:n,placeholder:`Favorite Blessing: Select a blessing source (${l.name})`,className:"w-full"}),a.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-card",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(ol,{religionName:l.name,size:"lg"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-lg font-semibold text-primary truncate",children:l.blessingName}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[l.effects.length," effect",l.effects.length!==1?"s":""]})]})]}),a.jsx("div",{className:"space-y-2",children:l.effects.slice(0,2).map((u,d)=>a.jsxs("div",{className:"flex items-start gap-2 p-2 bg-muted/30 rounded-lg",children:[a.jsx(sn,{className:"h-4 w-4 text-skyrim-gold mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-sm mb-1",children:u.name}),a.jsx(w9,{description:u.description,magnitude:u.magnitude,duration:u.duration,area:u.area}),(u.duration>0||u.area>0)&&a.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[u.duration>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Er,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",b9(u.duration)]})]}),u.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",u.area]})]})]})]})]},d))}),l.effects.length>2&&a.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:a.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",l.effects.length-2," more effect",l.effects.length-2!==1?"s":""]})})]})]}):a.jsxs(en,{title:"Favorite Blessing",navigateTo:"religions",onNavigate:c,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's favorite blessing (the blessing you expect to use most frequently)"}),a.jsx(Wb,{blessings:r,selectedBlessingId:t.favoriteBlessing,onBlessingSelect:n,placeholder:"Search for a blessing source...",className:"w-full"})]})}function vE({level:e,size:t="sm"}){const n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return e<=0?null:a.jsxs(Z,{variant:"secondary",className:F("bg-blue-100 text-blue-800 border-blue-200",n[t]),children:["Min: Level ",e]})}function j9({name:e,description:t,category:n,assignmentType:s,perkCount:r,minLevel:i,startingLevel:o,onSelect:l,onMajorClick:c,onMinorClick:u,canAssignMajor:d,canAssignMinor:f,className:m}){const h=y=>{y.stopPropagation(),c(y)},v=y=>{y.stopPropagation(),u(y)};return a.jsxs("div",{className:F("p-4 border rounded-lg hover:bg-muted/50 transition-colors",m),onClick:l,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(th,{skillName:e,size:"2xl",className:"flex-shrink-0"}),a.jsx("h3",{className:"font-semibold text-lg cursor-pointer",children:e})]}),a.jsx(N9,{type:s})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:t}),a.jsxs("div",{className:"flex gap-2 flex-wrap mb-4",children:[a.jsx(S9,{category:n}),a.jsx(k9,{count:r}),typeof i=="number"&&i>0&&a.jsx(vE,{level:i}),typeof o=="number"&&o>0&&a.jsxs(Z,{variant:"outline",className:"text-xs bg-green-100 text-green-800 border-green-300",children:["Starting: ",o]})]}),a.jsxs("div",{className:"flex gap-2","data-assignment-control":!0,children:[a.jsx(U,{size:"sm",variant:s==="major"?"default":"outline",onClick:h,disabled:!d&&s!=="major",className:F("flex-1 text-xs",s==="major"&&"bg-yellow-600 hover:bg-yellow-700 text-white border-yellow-500"),children:s==="major"?"Remove Major":"Major"}),a.jsx(U,{size:"sm",variant:s==="minor"?"default":"outline",onClick:v,disabled:!f&&s!=="minor",className:F("flex-1 text-xs",s==="minor"&&"bg-gray-500 hover:bg-gray-600 text-white border-gray-400"),children:s==="minor"?"Remove Minor":"Minor"})]})]})}function N9({type:e,size:t="sm"}){const n={major:"bg-yellow-600 text-white hover:bg-yellow-700 border-yellow-500",minor:"bg-gray-500 text-white hover:bg-gray-600 border-gray-400",none:"bg-gray-100 text-gray-800 border border-gray-300"},s={major:"Major",minor:"Minor",none:"Unassigned"},r={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return a.jsx(Z,{className:F(n[e],r[t]),children:s[e]})}function S9({category:e,size:t="sm"}){const n={Combat:"bg-red-100 text-red-800 border-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200"},s={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return a.jsx(Z,{variant:"outline",className:F(n[e]||"bg-gray-100 text-gray-800 border-gray-300",s[t]),children:e})}function k9({count:e,size:t="sm"}){const n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return a.jsxs(Z,{variant:"secondary",className:F("bg-purple-100 text-purple-800 border-purple-200",n[t]),children:[e," Perks"]})}function C9(){return a.jsx("div",{className:"container mx-auto p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Loading Skills..."}),a.jsx("p",{className:"text-muted-foreground",children:"Initializing skill and perk data..."})]})})}function E9({error:e}){return a.jsx("div",{className:"container mx-auto p-6",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(Qo,{className:"h-12 w-12 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Error Loading Skills"}),a.jsx("p",{className:"text-muted-foreground",children:e})]})})}const A9={Alchemy:"alchemy.svg",Alteration:"alteration.svg",Block:"block.svg",Conjuration:"conjuration.svg",Destruction:"destruction.svg",Enchanting:"enchanting.svg",Evasion:"evasion.svg",Finesse:"finesse.svg","Heavy Armor":"heavyarmor.svg",Illusion:"illusion.svg",Marksman:"marksman.svg","One-handed":"one-handed.svg",Restoration:"restoration.svg",Smithing:"smithing.svg",Sneak:"sneak.svg",Speech:"speech.svg","Two-handed":"two-handed.svg",Wayfarer:"wayfarer.svg"};function th({skillName:e,size:t="md",className:n}){const s=A9[e],r=s?Wt(`assets/skills/${s}`):void 0;return a.jsx(Fm,{imgSrc:r,alt:e,size:t,className:n,showBorder:!0})}function T9({skills:e,onSkillSelect:t,onAssignMajor:n,onAssignMinor:s,onRemoveAssignment:r,selectedSkillId:i,className:o}){return a.jsx("div",{className:F("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",o),children:e.map(l=>a.jsx(j9,{name:l.name,description:l.description,category:l.category,assignmentType:l.assignmentType,perkCount:l.perkCount,minLevel:l.minLevel,startingLevel:l.startingLevel,canAssignMajor:l.canAssignMajor,canAssignMinor:l.canAssignMinor,onSelect:()=>t(l.id),onMajorClick:c=>{c.preventDefault(),n(l.id)},onMinorClick:c=>{c.preventDefault(),s(l.id)},className:i===l.id?"ring-2 ring-primary bg-primary/5":""},l.id))})}function mn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,s;n<e.length;n++)(s=mn(e[n]))!==""&&(t+=(t&&" ")+s);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var yE={exports:{}},bE={},wE={exports:{}},jE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ll=g;function _9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var M9=typeof Object.is=="function"?Object.is:_9,R9=ll.useState,D9=ll.useEffect,L9=ll.useLayoutEffect,z9=ll.useDebugValue;function P9(e,t){var n=t(),s=R9({inst:{value:n,getSnapshot:t}}),r=s[0].inst,i=s[1];return L9(function(){r.value=n,r.getSnapshot=t,tg(r)&&i({inst:r})},[e,n,t]),D9(function(){return tg(r)&&i({inst:r}),e(function(){tg(r)&&i({inst:r})})},[e]),z9(n),n}function tg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!M9(e,n)}catch{return!0}}function $9(e,t){return t()}var O9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$9:P9;jE.useSyncExternalStore=ll.useSyncExternalStore!==void 0?ll.useSyncExternalStore:O9;wE.exports=jE;var I9=wE.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh=g,B9=I9;function F9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var H9=typeof Object.is=="function"?Object.is:F9,U9=B9.useSyncExternalStore,V9=nh.useRef,G9=nh.useEffect,q9=nh.useMemo,Z9=nh.useDebugValue;bE.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=V9(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=q9(function(){function c(h){if(!u){if(u=!0,d=h,h=s(h),r!==void 0&&o.hasValue){var v=o.value;if(r(v,h))return f=v}return f=h}if(v=f,H9(d,h))return v;var y=s(h);return r!==void 0&&r(v,y)?(d=h,v):(d=h,f=y)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,s,r]);var l=U9(e,i[0],i[1]);return G9(function(){o.hasValue=!0,o.value=l},[l]),Z9(l),l};yE.exports=bE;var Y9=yE.exports;const X9=Yx(Y9),W9={},Jb=e=>{let t;const n=new Set,s=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const h=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(v=>v(t,h))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(W9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},K9=e=>e?Jb(e):Jb,{useDebugValue:Q9}=P,{useSyncExternalStoreWithSelector:J9}=X9,e7=e=>e;function NE(e,t=e7,n){const s=J9(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Q9(s),s}const ew=(e,t)=>{const n=K9(e),s=(r,i=t)=>NE(n,r,i);return Object.assign(s,n),s},t7=(e,t)=>e?ew(e,t):ew;function wn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var n7={value:()=>{}};function sh(){for(var e=0,t=arguments.length,n={},s;e<t;++e){if(!(s=arguments[e]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new Gd(n)}function Gd(e){this._=e}function s7(e,t){return e.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}Gd.prototype=sh.prototype={constructor:Gd,on:function(e,t){var n=this._,s=s7(e+"",n),r,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((r=(e=s[i]).type)&&(r=r7(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(r=(e=s[i]).type)n[r]=tw(n[r],e.name,t);else if(t==null)for(r in n)n[r]=tw(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gd(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,i;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],s=0,r=i.length;s<r;++s)i[s].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)}};function r7(e,t){for(var n=0,s=e.length,r;n<s;++n)if((r=e[n]).name===t)return r.value}function tw(e,t,n){for(var s=0,r=e.length;s<r;++s)if(e[s].name===t){e[s]=n7,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}var Tp="http://www.w3.org/1999/xhtml";const nw={svg:"http://www.w3.org/2000/svg",xhtml:Tp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rh(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),nw.hasOwnProperty(t)?{space:nw[t],local:e}:e}function a7(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Tp&&t.documentElement.namespaceURI===Tp?t.createElement(e):t.createElementNS(n,e)}}function i7(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function SE(e){var t=rh(e);return(t.local?i7:a7)(t)}function o7(){}function rv(e){return e==null?o7:function(){return this.querySelector(e)}}function l7(e){typeof e!="function"&&(e=rv(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,l=s[r]=new Array(o),c,u,d=0;d<o;++d)(c=i[d])&&(u=e.call(c,c.__data__,d,i))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new Hn(s,this._parents)}function c7(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function u7(){return[]}function kE(e){return e==null?u7:function(){return this.querySelectorAll(e)}}function d7(e){return function(){return c7(e.apply(this,arguments))}}function f7(e){typeof e=="function"?e=d7(e):e=kE(e);for(var t=this._groups,n=t.length,s=[],r=[],i=0;i<n;++i)for(var o=t[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(s.push(e.call(c,c.__data__,u,o)),r.push(c));return new Hn(s,r)}function CE(e){return function(){return this.matches(e)}}function EE(e){return function(t){return t.matches(e)}}var m7=Array.prototype.find;function h7(e){return function(){return m7.call(this.children,e)}}function g7(){return this.firstElementChild}function p7(e){return this.select(e==null?g7:h7(typeof e=="function"?e:EE(e)))}var x7=Array.prototype.filter;function v7(){return Array.from(this.children)}function y7(e){return function(){return x7.call(this.children,e)}}function b7(e){return this.selectAll(e==null?v7:y7(typeof e=="function"?e:EE(e)))}function w7(e){typeof e!="function"&&(e=CE(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,l=s[r]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new Hn(s,this._parents)}function AE(e){return new Array(e.length)}function j7(){return new Hn(this._enter||this._groups.map(AE),this._parents)}function _f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_f.prototype={constructor:_f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function N7(e){return function(){return e}}function S7(e,t,n,s,r,i){for(var o=0,l,c=t.length,u=i.length;o<u;++o)(l=t[o])?(l.__data__=i[o],s[o]=l):n[o]=new _f(e,i[o]);for(;o<c;++o)(l=t[o])&&(r[o]=l)}function k7(e,t,n,s,r,i,o){var l,c,u=new Map,d=t.length,f=i.length,m=new Array(d),h;for(l=0;l<d;++l)(c=t[l])&&(m[l]=h=o.call(c,c.__data__,l,t)+"",u.has(h)?r[l]=c:u.set(h,c));for(l=0;l<f;++l)h=o.call(e,i[l],l,i)+"",(c=u.get(h))?(s[l]=c,c.__data__=i[l],u.delete(h)):n[l]=new _f(e,i[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(m[l])===c&&(r[l]=c)}function C7(e){return e.__data__}function E7(e,t){if(!arguments.length)return Array.from(this,C7);var n=t?k7:S7,s=this._parents,r=this._groups;typeof e!="function"&&(e=N7(e));for(var i=r.length,o=new Array(i),l=new Array(i),c=new Array(i),u=0;u<i;++u){var d=s[u],f=r[u],m=f.length,h=A7(e.call(d,d&&d.__data__,u,s)),v=h.length,y=l[u]=new Array(v),w=o[u]=new Array(v),x=c[u]=new Array(m);n(d,f,y,w,x,h,t);for(var p=0,b=0,j,N;p<v;++p)if(j=y[p]){for(p>=b&&(b=p+1);!(N=w[b])&&++b<v;);j._next=N||null}}return o=new Hn(o,s),o._enter=l,o._exit=c,o}function A7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function T7(){return new Hn(this._exit||this._groups.map(AE),this._parents)}function _7(e,t,n){var s=this.enter(),r=this,i=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),s&&r?s.merge(r).order():r}function M7(e){for(var t=e.selection?e.selection():e,n=this._groups,s=t._groups,r=n.length,i=s.length,o=Math.min(r,i),l=new Array(r),c=0;c<o;++c)for(var u=n[c],d=s[c],f=u.length,m=l[c]=new Array(f),h,v=0;v<f;++v)(h=u[v]||d[v])&&(m[v]=h);for(;c<r;++c)l[c]=n[c];return new Hn(l,this._parents)}function R7(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s=e[t],r=s.length-1,i=s[r],o;--r>=0;)(o=s[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function D7(e){e||(e=L7);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,s=n.length,r=new Array(s),i=0;i<s;++i){for(var o=n[i],l=o.length,c=r[i]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new Hn(r,this._parents).order()}function L7(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function z7(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function P7(){return Array.from(this)}function $7(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,i=s.length;r<i;++r){var o=s[r];if(o)return o}return null}function O7(){let e=0;for(const t of this)++e;return e}function I7(){return!this.node()}function B7(e){for(var t=this._groups,n=0,s=t.length;n<s;++n)for(var r=t[n],i=0,o=r.length,l;i<o;++i)(l=r[i])&&e.call(l,l.__data__,i,r);return this}function F7(e){return function(){this.removeAttribute(e)}}function H7(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U7(e,t){return function(){this.setAttribute(e,t)}}function V7(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function G7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function q7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Z7(e,t){var n=rh(e);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((t==null?n.local?H7:F7:typeof t=="function"?n.local?q7:G7:n.local?V7:U7)(n,t))}function TE(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Y7(e){return function(){this.style.removeProperty(e)}}function X7(e,t,n){return function(){this.style.setProperty(e,t,n)}}function W7(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function K7(e,t,n){return arguments.length>1?this.each((t==null?Y7:typeof t=="function"?W7:X7)(e,t,n??"")):cl(this.node(),e)}function cl(e,t){return e.style.getPropertyValue(t)||TE(e).getComputedStyle(e,null).getPropertyValue(t)}function Q7(e){return function(){delete this[e]}}function J7(e,t){return function(){this[e]=t}}function eH(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function tH(e,t){return arguments.length>1?this.each((t==null?Q7:typeof t=="function"?eH:J7)(e,t)):this.node()[e]}function _E(e){return e.trim().split(/^|\s+/)}function av(e){return e.classList||new ME(e)}function ME(e){this._node=e,this._names=_E(e.getAttribute("class")||"")}ME.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function RE(e,t){for(var n=av(e),s=-1,r=t.length;++s<r;)n.add(t[s])}function DE(e,t){for(var n=av(e),s=-1,r=t.length;++s<r;)n.remove(t[s])}function nH(e){return function(){RE(this,e)}}function sH(e){return function(){DE(this,e)}}function rH(e,t){return function(){(t.apply(this,arguments)?RE:DE)(this,e)}}function aH(e,t){var n=_E(e+"");if(arguments.length<2){for(var s=av(this.node()),r=-1,i=n.length;++r<i;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?rH:t?nH:sH)(n,t))}function iH(){this.textContent=""}function oH(e){return function(){this.textContent=e}}function lH(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function cH(e){return arguments.length?this.each(e==null?iH:(typeof e=="function"?lH:oH)(e)):this.node().textContent}function uH(){this.innerHTML=""}function dH(e){return function(){this.innerHTML=e}}function fH(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mH(e){return arguments.length?this.each(e==null?uH:(typeof e=="function"?fH:dH)(e)):this.node().innerHTML}function hH(){this.nextSibling&&this.parentNode.appendChild(this)}function gH(){return this.each(hH)}function pH(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xH(){return this.each(pH)}function vH(e){var t=typeof e=="function"?e:SE(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yH(){return null}function bH(e,t){var n=typeof e=="function"?e:SE(e),s=t==null?yH:typeof t=="function"?t:rv(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function wH(){var e=this.parentNode;e&&e.removeChild(this)}function jH(){return this.each(wH)}function NH(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function SH(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kH(e){return this.select(e?SH:NH)}function CH(e){return arguments.length?this.property("__data__",e):this.node().__data__}function EH(e){return function(t){e.call(this,t,this.__data__)}}function AH(e){return e.trim().split(/^|\s+/).map(function(t){var n="",s=t.indexOf(".");return s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),{type:t,name:n}})}function TH(e){return function(){var t=this.__on;if(t){for(var n=0,s=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++s]=i;++s?t.length=s:delete this.__on}}}function _H(e,t,n){return function(){var s=this.__on,r,i=EH(t);if(s){for(var o=0,l=s.length;o<l;++o)if((r=s[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},s?s.push(r):this.__on=[r]}}function MH(e,t,n){var s=AH(e+""),r,i=s.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(r=0,d=l[c];r<i;++r)if((o=s[r]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?_H:TH,r=0;r<i;++r)this.each(l(s[r],t,n));return this}function LE(e,t,n){var s=TE(e),r=s.CustomEvent;typeof r=="function"?r=new r(t,n):(r=s.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function RH(e,t){return function(){return LE(this,e,t)}}function DH(e,t){return function(){return LE(this,e,t.apply(this,arguments))}}function LH(e,t){return this.each((typeof t=="function"?DH:RH)(e,t))}function*zH(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,i=s.length,o;r<i;++r)(o=s[r])&&(yield o)}var zE=[null];function Hn(e,t){this._groups=e,this._parents=t}function Tu(){return new Hn([[document.documentElement]],zE)}function PH(){return this}Hn.prototype=Tu.prototype={constructor:Hn,select:l7,selectAll:f7,selectChild:p7,selectChildren:b7,filter:w7,data:E7,enter:j7,exit:T7,join:_7,merge:M7,selection:PH,order:R7,sort:D7,call:z7,nodes:P7,node:$7,size:O7,empty:I7,each:B7,attr:Z7,style:K7,property:tH,classed:aH,text:cH,html:mH,raise:gH,lower:xH,append:vH,insert:bH,remove:jH,clone:kH,datum:CH,on:MH,dispatch:LH,[Symbol.iterator]:zH};function vs(e){return typeof e=="string"?new Hn([[document.querySelector(e)]],[document.documentElement]):new Hn([[e]],zE)}function $H(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Os(e,t){if(e=$H(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const OH={passive:!1},Uc={capture:!0,passive:!1};function ng(e){e.stopImmediatePropagation()}function Io(e){e.preventDefault(),e.stopImmediatePropagation()}function PE(e){var t=e.document.documentElement,n=vs(e).on("dragstart.drag",Io,Uc);"onselectstart"in t?n.on("selectstart.drag",Io,Uc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $E(e,t){var n=e.document.documentElement,s=vs(e).on("dragstart.drag",null);t&&(s.on("click.drag",Io,Uc),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ud=e=>()=>e;function _p(e,{sourceEvent:t,subject:n,target:s,identifier:r,active:i,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}_p.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function IH(e){return!e.ctrlKey&&!e.button}function BH(){return this.parentNode}function FH(e,t){return t??{x:e.x,y:e.y}}function HH(){return navigator.maxTouchPoints||"ontouchstart"in this}function UH(){var e=IH,t=BH,n=FH,s=HH,r={},i=sh("start","drag","end"),o=0,l,c,u,d,f=0;function m(j){j.on("mousedown.drag",h).filter(s).on("touchstart.drag",w).on("touchmove.drag",x,OH).on("touchend.drag touchcancel.drag",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(j,N){if(!(d||!e.call(this,j,N))){var A=b(this,t.call(this,j,N),j,N,"mouse");A&&(vs(j.view).on("mousemove.drag",v,Uc).on("mouseup.drag",y,Uc),PE(j.view),ng(j),u=!1,l=j.clientX,c=j.clientY,A("start",j))}}function v(j){if(Io(j),!u){var N=j.clientX-l,A=j.clientY-c;u=N*N+A*A>f}r.mouse("drag",j)}function y(j){vs(j.view).on("mousemove.drag mouseup.drag",null),$E(j.view,u),Io(j),r.mouse("end",j)}function w(j,N){if(e.call(this,j,N)){var A=j.changedTouches,k=t.call(this,j,N),C=A.length,S,E;for(S=0;S<C;++S)(E=b(this,k,j,N,A[S].identifier,A[S]))&&(ng(j),E("start",j,A[S]))}}function x(j){var N=j.changedTouches,A=N.length,k,C;for(k=0;k<A;++k)(C=r[N[k].identifier])&&(Io(j),C("drag",j,N[k]))}function p(j){var N=j.changedTouches,A=N.length,k,C;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),k=0;k<A;++k)(C=r[N[k].identifier])&&(ng(j),C("end",j,N[k]))}function b(j,N,A,k,C,S){var E=i.copy(),T=Os(S||A,N),z,R,_;if((_=n.call(j,new _p("beforestart",{sourceEvent:A,target:m,identifier:C,active:o,x:T[0],y:T[1],dx:0,dy:0,dispatch:E}),k))!=null)return z=_.x-T[0]||0,R=_.y-T[1]||0,function $(L,O,D){var M=T,I;switch(L){case"start":r[C]=$,I=o++;break;case"end":delete r[C],--o;case"drag":T=Os(D||O,N),I=o;break}E.call(L,j,new _p(L,{sourceEvent:O,subject:_,target:m,identifier:C,active:I,x:T[0]+z,y:T[1]+R,dx:T[0]-M[0],dy:T[1]-M[1],dispatch:E}),k)}}return m.filter=function(j){return arguments.length?(e=typeof j=="function"?j:ud(!!j),m):e},m.container=function(j){return arguments.length?(t=typeof j=="function"?j:ud(j),m):t},m.subject=function(j){return arguments.length?(n=typeof j=="function"?j:ud(j),m):n},m.touchable=function(j){return arguments.length?(s=typeof j=="function"?j:ud(!!j),m):s},m.on=function(){var j=i.on.apply(i,arguments);return j===i?m:j},m.clickDistance=function(j){return arguments.length?(f=(j=+j)*j,m):Math.sqrt(f)},m}function iv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function OE(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function _u(){}var Vc=.7,Mf=1/Vc,Bo="\\s*([+-]?\\d+)\\s*",Gc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VH=/^#([0-9a-f]{3,8})$/,GH=new RegExp(`^rgb\\(${Bo},${Bo},${Bo}\\)$`),qH=new RegExp(`^rgb\\(${qs},${qs},${qs}\\)$`),ZH=new RegExp(`^rgba\\(${Bo},${Bo},${Bo},${Gc}\\)$`),YH=new RegExp(`^rgba\\(${qs},${qs},${qs},${Gc}\\)$`),XH=new RegExp(`^hsl\\(${Gc},${qs},${qs}\\)$`),WH=new RegExp(`^hsla\\(${Gc},${qs},${qs},${Gc}\\)$`),sw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iv(_u,qc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rw,formatHex:rw,formatHex8:KH,formatHsl:QH,formatRgb:aw,toString:aw});function rw(){return this.rgb().formatHex()}function KH(){return this.rgb().formatHex8()}function QH(){return IE(this).formatHsl()}function aw(){return this.rgb().formatRgb()}function qc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=VH.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?iw(t):n===3?new bn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?dd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?dd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=GH.exec(e))?new bn(t[1],t[2],t[3],1):(t=qH.exec(e))?new bn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ZH.exec(e))?dd(t[1],t[2],t[3],t[4]):(t=YH.exec(e))?dd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=XH.exec(e))?cw(t[1],t[2]/100,t[3]/100,1):(t=WH.exec(e))?cw(t[1],t[2]/100,t[3]/100,t[4]):sw.hasOwnProperty(e)?iw(sw[e]):e==="transparent"?new bn(NaN,NaN,NaN,0):null}function iw(e){return new bn(e>>16&255,e>>8&255,e&255,1)}function dd(e,t,n,s){return s<=0&&(e=t=n=NaN),new bn(e,t,n,s)}function JH(e){return e instanceof _u||(e=qc(e)),e?(e=e.rgb(),new bn(e.r,e.g,e.b,e.opacity)):new bn}function Mp(e,t,n,s){return arguments.length===1?JH(e):new bn(e,t,n,s??1)}function bn(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}iv(bn,Mp,OE(_u,{brighter(e){return e=e==null?Mf:Math.pow(Mf,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vc:Math.pow(Vc,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bn(vi(this.r),vi(this.g),vi(this.b),Rf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ow,formatHex:ow,formatHex8:eU,formatRgb:lw,toString:lw}));function ow(){return`#${gi(this.r)}${gi(this.g)}${gi(this.b)}`}function eU(){return`#${gi(this.r)}${gi(this.g)}${gi(this.b)}${gi((isNaN(this.opacity)?1:this.opacity)*255)}`}function lw(){const e=Rf(this.opacity);return`${e===1?"rgb(":"rgba("}${vi(this.r)}, ${vi(this.g)}, ${vi(this.b)}${e===1?")":`, ${e})`}`}function Rf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gi(e){return e=vi(e),(e<16?"0":"")+e.toString(16)}function cw(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ys(e,t,n,s)}function IE(e){if(e instanceof ys)return new ys(e.h,e.s,e.l,e.opacity);if(e instanceof _u||(e=qc(e)),!e)return new ys;if(e instanceof ys)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),i=Math.max(t,n,s),o=NaN,l=i-r,c=(i+r)/2;return l?(t===i?o=(n-s)/l+(n<s)*6:n===i?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+r:2-i-r,o*=60):l=c>0&&c<1?0:o,new ys(o,l,c,e.opacity)}function tU(e,t,n,s){return arguments.length===1?IE(e):new ys(e,t,n,s??1)}function ys(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}iv(ys,tU,OE(_u,{brighter(e){return e=e==null?Mf:Math.pow(Mf,e),new ys(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vc:Math.pow(Vc,e),new ys(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new bn(sg(e>=240?e-240:e+120,r,s),sg(e,r,s),sg(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new ys(uw(this.h),fd(this.s),fd(this.l),Rf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rf(this.opacity);return`${e===1?"hsl(":"hsla("}${uw(this.h)}, ${fd(this.s)*100}%, ${fd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uw(e){return e=(e||0)%360,e<0?e+360:e}function fd(e){return Math.max(0,Math.min(1,e||0))}function sg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const BE=e=>()=>e;function nU(e,t){return function(n){return e+n*t}}function sU(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function rU(e){return(e=+e)==1?FE:function(t,n){return n-t?sU(t,n,e):BE(isNaN(t)?n:t)}}function FE(e,t){var n=t-e;return n?nU(e,n):BE(isNaN(e)?t:e)}const dw=function e(t){var n=rU(t);function s(r,i){var o=n((r=Mp(r)).r,(i=Mp(i)).r),l=n(r.g,i.g),c=n(r.b,i.b),u=FE(r.opacity,i.opacity);return function(d){return r.r=o(d),r.g=l(d),r.b=c(d),r.opacity=u(d),r+""}}return s.gamma=e,s}(1);function la(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Rp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rg=new RegExp(Rp.source,"g");function aU(e){return function(){return e}}function iU(e){return function(t){return e(t)+""}}function oU(e,t){var n=Rp.lastIndex=rg.lastIndex=0,s,r,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=Rp.exec(e))&&(r=rg.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:la(s,r)})),n=rg.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?iU(c[0].x):aU(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var fw=180/Math.PI,Dp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function HE(e,t,n,s,r,i){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*s)&&(n-=e*c,s-=t*c),(l=Math.sqrt(n*n+s*s))&&(n/=l,s/=l,c/=l),e*s<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*fw,skewX:Math.atan(c)*fw,scaleX:o,scaleY:l}}var md;function lU(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dp:HE(t.a,t.b,t.c,t.d,t.e,t.f)}function cU(e){return e==null||(md||(md=document.createElementNS("http://www.w3.org/2000/svg","g")),md.setAttribute("transform",e),!(e=md.transform.baseVal.consolidate()))?Dp:(e=e.matrix,HE(e.a,e.b,e.c,e.d,e.e,e.f))}function UE(e,t,n,s){function r(u){return u.length?u.pop()+" ":""}function i(u,d,f,m,h,v){if(u!==f||d!==m){var y=h.push("translate(",null,t,null,n);v.push({i:y-4,x:la(u,f)},{i:y-2,x:la(d,m)})}else(f||m)&&h.push("translate("+f+t+m+n)}function o(u,d,f,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:f.push(r(f)+"rotate(",null,s)-2,x:la(u,d)})):d&&f.push(r(f)+"rotate("+d+s)}function l(u,d,f,m){u!==d?m.push({i:f.push(r(f)+"skewX(",null,s)-2,x:la(u,d)}):d&&f.push(r(f)+"skewX("+d+s)}function c(u,d,f,m,h,v){if(u!==f||d!==m){var y=h.push(r(h)+"scale(",null,",",null,")");v.push({i:y-4,x:la(u,f)},{i:y-2,x:la(d,m)})}else(f!==1||m!==1)&&h.push(r(h)+"scale("+f+","+m+")")}return function(u,d){var f=[],m=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,f,m),o(u.rotate,d.rotate,f,m),l(u.skewX,d.skewX,f,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,m),u=d=null,function(h){for(var v=-1,y=m.length,w;++v<y;)f[(w=m[v]).i]=w.x(h);return f.join("")}}}var uU=UE(lU,"px, ","px)","deg)"),dU=UE(cU,", ",")",")"),fU=1e-12;function mw(e){return((e=Math.exp(e))+1/e)/2}function mU(e){return((e=Math.exp(e))-1/e)/2}function hU(e){return((e=Math.exp(2*e))-1)/(e+1)}const gU=function e(t,n,s){function r(i,o){var l=i[0],c=i[1],u=i[2],d=o[0],f=o[1],m=o[2],h=d-l,v=f-c,y=h*h+v*v,w,x;if(y<fU)x=Math.log(m/u)/t,w=function(k){return[l+k*h,c+k*v,u*Math.exp(t*k*x)]};else{var p=Math.sqrt(y),b=(m*m-u*u+s*y)/(2*u*n*p),j=(m*m-u*u-s*y)/(2*m*n*p),N=Math.log(Math.sqrt(b*b+1)-b),A=Math.log(Math.sqrt(j*j+1)-j);x=(A-N)/t,w=function(k){var C=k*x,S=mw(N),E=u/(n*p)*(S*hU(t*C+N)-mU(N));return[l+E*h,c+E*v,u*S/mw(t*C+N)]}}return w.duration=x*1e3*t/Math.SQRT2,w}return r.rho=function(i){var o=Math.max(.001,+i),l=o*o,c=l*l;return e(o,l,c)},r}(Math.SQRT2,2,4);var ul=0,uc=0,Zl=0,VE=1e3,Df,dc,Lf=0,Mi=0,ah=0,Zc=typeof performance=="object"&&performance.now?performance:Date,GE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ov(){return Mi||(GE(pU),Mi=Zc.now()+ah)}function pU(){Mi=0}function zf(){this._call=this._time=this._next=null}zf.prototype=qE.prototype={constructor:zf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ov():+n)+(t==null?0:+t),!this._next&&dc!==this&&(dc?dc._next=this:Df=this,dc=this),this._call=e,this._time=n,Lp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lp())}};function qE(e,t,n){var s=new zf;return s.restart(e,t,n),s}function xU(){ov(),++ul;for(var e=Df,t;e;)(t=Mi-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ul}function hw(){Mi=(Lf=Zc.now())+ah,ul=uc=0;try{xU()}finally{ul=0,yU(),Mi=0}}function vU(){var e=Zc.now(),t=e-Lf;t>VE&&(ah-=t,Lf=e)}function yU(){for(var e,t=Df,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Df=n);dc=e,Lp(s)}function Lp(e){if(!ul){uc&&(uc=clearTimeout(uc));var t=e-Mi;t>24?(e<1/0&&(uc=setTimeout(hw,e-Zc.now()-ah)),Zl&&(Zl=clearInterval(Zl))):(Zl||(Lf=Zc.now(),Zl=setInterval(vU,VE)),ul=1,GE(hw))}}function gw(e,t,n){var s=new zf;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,n),s}var bU=sh("start","end","cancel","interrupt"),wU=[],ZE=0,pw=1,zp=2,qd=3,xw=4,Pp=5,Zd=6;function ih(e,t,n,s,r,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;jU(e,n,{name:t,index:s,group:r,on:bU,tween:wU,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ZE})}function lv(e,t){var n=_s(e,t);if(n.state>ZE)throw new Error("too late; already scheduled");return n}function sr(e,t){var n=_s(e,t);if(n.state>qd)throw new Error("too late; already running");return n}function _s(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function jU(e,t,n){var s=e.__transition,r;s[t]=n,n.timer=qE(i,0,n.time);function i(u){n.state=pw,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var d,f,m,h;if(n.state!==pw)return c();for(d in s)if(h=s[d],h.name===n.name){if(h.state===qd)return gw(o);h.state===xw?(h.state=Zd,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete s[d]):+d<t&&(h.state=Zd,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete s[d])}if(gw(function(){n.state===qd&&(n.state=xw,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=zp,n.on.call("start",e,e.__data__,n.index,n.group),n.state===zp){for(n.state=qd,r=new Array(m=n.tween.length),d=0,f=-1;d<m;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function l(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Pp,1),f=-1,m=r.length;++f<m;)r[f].call(e,d);n.state===Pp&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Zd,n.timer.stop(),delete s[t];for(var u in s)return;delete e.__transition}}function Yd(e,t){var n=e.__transition,s,r,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((s=n[o]).name!==t){i=!1;continue}r=s.state>zp&&s.state<Pp,s.state=Zd,s.timer.stop(),s.on.call(r?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[o]}i&&delete e.__transition}}function NU(e){return this.each(function(){Yd(this,e)})}function SU(e,t){var n,s;return function(){var r=sr(this,e),i=r.tween;if(i!==n){s=n=i;for(var o=0,l=s.length;o<l;++o)if(s[o].name===t){s=s.slice(),s.splice(o,1);break}}r.tween=s}}function kU(e,t,n){var s,r;if(typeof n!="function")throw new Error;return function(){var i=sr(this,e),o=i.tween;if(o!==s){r=(s=o).slice();for(var l={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=l;break}c===u&&r.push(l)}i.tween=r}}function CU(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s=_s(this.node(),n).tween,r=0,i=s.length,o;r<i;++r)if((o=s[r]).name===e)return o.value;return null}return this.each((t==null?SU:kU)(n,e,t))}function cv(e,t,n){var s=e._id;return e.each(function(){var r=sr(this,s);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return _s(r,s).value[t]}}function YE(e,t){var n;return(typeof t=="number"?la:t instanceof qc?dw:(n=qc(t))?(t=n,dw):oU)(e,t)}function EU(e){return function(){this.removeAttribute(e)}}function AU(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TU(e,t,n){var s,r=n+"",i;return function(){var o=this.getAttribute(e);return o===r?null:o===s?i:i=t(s=o,n)}}function _U(e,t,n){var s,r=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===s?i:i=t(s=o,n)}}function MU(e,t,n){var s,r,i;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,l)))}}function RU(e,t,n){var s,r,i;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,l)))}}function DU(e,t){var n=rh(e),s=n==="transform"?dU:YE;return this.attrTween(e,typeof t=="function"?(n.local?RU:MU)(n,s,cv(this,"attr."+e,t)):t==null?(n.local?AU:EU)(n):(n.local?_U:TU)(n,s,t))}function LU(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function zU(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function PU(e,t){var n,s;function r(){var i=t.apply(this,arguments);return i!==s&&(n=(s=i)&&zU(e,i)),n}return r._value=t,r}function $U(e,t){var n,s;function r(){var i=t.apply(this,arguments);return i!==s&&(n=(s=i)&&LU(e,i)),n}return r._value=t,r}function OU(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var s=rh(e);return this.tween(n,(s.local?PU:$U)(s,t))}function IU(e,t){return function(){lv(this,e).delay=+t.apply(this,arguments)}}function BU(e,t){return t=+t,function(){lv(this,e).delay=t}}function FU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?IU:BU)(t,e)):_s(this.node(),t).delay}function HU(e,t){return function(){sr(this,e).duration=+t.apply(this,arguments)}}function UU(e,t){return t=+t,function(){sr(this,e).duration=t}}function VU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?HU:UU)(t,e)):_s(this.node(),t).duration}function GU(e,t){if(typeof t!="function")throw new Error;return function(){sr(this,e).ease=t}}function qU(e){var t=this._id;return arguments.length?this.each(GU(t,e)):_s(this.node(),t).ease}function ZU(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;sr(this,e).ease=n}}function YU(e){if(typeof e!="function")throw new Error;return this.each(ZU(this._id,e))}function XU(e){typeof e!="function"&&(e=CE(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,l=s[r]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new Ir(s,this._parents,this._name,this._id)}function WU(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,s=t.length,r=n.length,i=Math.min(s,r),o=new Array(s),l=0;l<i;++l)for(var c=t[l],u=n[l],d=c.length,f=o[l]=new Array(d),m,h=0;h<d;++h)(m=c[h]||u[h])&&(f[h]=m);for(;l<s;++l)o[l]=t[l];return new Ir(o,this._parents,this._name,this._id)}function KU(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function QU(e,t,n){var s,r,i=KU(t)?lv:sr;return function(){var o=i(this,e),l=o.on;l!==s&&(r=(s=l).copy()).on(t,n),o.on=r}}function JU(e,t){var n=this._id;return arguments.length<2?_s(this.node(),n).on.on(e):this.each(QU(n,e,t))}function eV(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function tV(){return this.on("end.remove",eV(this._id))}function nV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rv(e));for(var s=this._groups,r=s.length,i=new Array(r),o=0;o<r;++o)for(var l=s[o],c=l.length,u=i[o]=new Array(c),d,f,m=0;m<c;++m)(d=l[m])&&(f=e.call(d,d.__data__,m,l))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f,ih(u[m],t,n,m,u,_s(d,n)));return new Ir(i,this._parents,t,n)}function sV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kE(e));for(var s=this._groups,r=s.length,i=[],o=[],l=0;l<r;++l)for(var c=s[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var m=e.call(d,d.__data__,f,c),h,v=_s(d,n),y=0,w=m.length;y<w;++y)(h=m[y])&&ih(h,t,n,y,m,v);i.push(m),o.push(d)}return new Ir(i,o,t,n)}var rV=Tu.prototype.constructor;function aV(){return new rV(this._groups,this._parents)}function iV(e,t){var n,s,r;return function(){var i=cl(this,e),o=(this.style.removeProperty(e),cl(this,e));return i===o?null:i===n&&o===s?r:r=t(n=i,s=o)}}function XE(e){return function(){this.style.removeProperty(e)}}function oV(e,t,n){var s,r=n+"",i;return function(){var o=cl(this,e);return o===r?null:o===s?i:i=t(s=o,n)}}function lV(e,t,n){var s,r,i;return function(){var o=cl(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),cl(this,e))),o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,l))}}function cV(e,t){var n,s,r,i="style."+t,o="end."+i,l;return function(){var c=sr(this,e),u=c.on,d=c.value[i]==null?l||(l=XE(t)):void 0;(u!==n||r!==d)&&(s=(n=u).copy()).on(o,r=d),c.on=s}}function uV(e,t,n){var s=(e+="")=="transform"?uU:YE;return t==null?this.styleTween(e,iV(e,s)).on("end.style."+e,XE(e)):typeof t=="function"?this.styleTween(e,lV(e,s,cv(this,"style."+e,t))).each(cV(this._id,e)):this.styleTween(e,oV(e,s,t),n).on("end.style."+e,null)}function dV(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function fV(e,t,n){var s,r;function i(){var o=t.apply(this,arguments);return o!==r&&(s=(r=o)&&dV(e,o,n)),s}return i._value=t,i}function mV(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,fV(e,t,n??""))}function hV(e){return function(){this.textContent=e}}function gV(e){return function(){var t=e(this);this.textContent=t??""}}function pV(e){return this.tween("text",typeof e=="function"?gV(cv(this,"text",e)):hV(e==null?"":e+""))}function xV(e){return function(t){this.textContent=e.call(this,t)}}function vV(e){var t,n;function s(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&xV(r)),t}return s._value=e,s}function yV(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vV(e))}function bV(){for(var e=this._name,t=this._id,n=WE(),s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=_s(c,t);ih(c,e,n,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ir(s,this._parents,e,n)}function wV(){var e,t,n=this,s=n._id,r=n.size();return new Promise(function(i,o){var l={value:o},c={value:function(){--r===0&&i()}};n.each(function(){var u=sr(this,s),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),r===0&&i()})}var jV=0;function Ir(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function WE(){return++jV}var mr=Tu.prototype;Ir.prototype={constructor:Ir,select:nV,selectAll:sV,selectChild:mr.selectChild,selectChildren:mr.selectChildren,filter:XU,merge:WU,selection:aV,transition:bV,call:mr.call,nodes:mr.nodes,node:mr.node,size:mr.size,empty:mr.empty,each:mr.each,on:JU,attr:DU,attrTween:OU,style:uV,styleTween:mV,text:pV,textTween:yV,remove:tV,tween:CU,delay:FU,duration:VU,ease:qU,easeVarying:YU,end:wV,[Symbol.iterator]:mr[Symbol.iterator]};function NV(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var SV={time:null,delay:0,duration:250,ease:NV};function kV(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function CV(e){var t,n;e instanceof Ir?(t=e._id,e=e._name):(t=WE(),(n=SV).time=ov(),e=e==null?null:e+"");for(var s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&ih(c,e,t,u,o,n||kV(c,t));return new Ir(s,this._parents,e,t)}Tu.prototype.interrupt=NU;Tu.prototype.transition=CV;const hd=e=>()=>e;function EV(e,{sourceEvent:t,target:n,transform:s,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:r}})}function wr(e,t,n){this.k=e,this.x=t,this.y=n}wr.prototype={constructor:wr,scale:function(e){return e===1?this:new wr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ka=new wr(1,0,0);wr.prototype;function ag(e){e.stopImmediatePropagation()}function Yl(e){e.preventDefault(),e.stopImmediatePropagation()}function AV(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function TV(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function vw(){return this.__zoom||ka}function _V(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function MV(){return navigator.maxTouchPoints||"ontouchstart"in this}function RV(e,t,n){var s=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function DV(){var e=AV,t=TV,n=RV,s=_V,r=MV,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=gU,u=sh("start","zoom","end"),d,f,m,h=500,v=150,y=0,w=10;function x(_){_.property("__zoom",vw).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",E).filter(r).on("touchstart.zoom",T).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(_,$,L,O){var D=_.selection?_.selection():_;D.property("__zoom",vw),_!==D?N(_,$,L,O):D.interrupt().each(function(){A(this,arguments).event(O).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},x.scaleBy=function(_,$,L,O){x.scaleTo(_,function(){var D=this.__zoom.k,M=typeof $=="function"?$.apply(this,arguments):$;return D*M},L,O)},x.scaleTo=function(_,$,L,O){x.transform(_,function(){var D=t.apply(this,arguments),M=this.__zoom,I=L==null?j(D):typeof L=="function"?L.apply(this,arguments):L,B=M.invert(I),H=typeof $=="function"?$.apply(this,arguments):$;return n(b(p(M,H),I,B),D,o)},L,O)},x.translateBy=function(_,$,L,O){x.transform(_,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),o)},null,O)},x.translateTo=function(_,$,L,O,D){x.transform(_,function(){var M=t.apply(this,arguments),I=this.__zoom,B=O==null?j(M):typeof O=="function"?O.apply(this,arguments):O;return n(ka.translate(B[0],B[1]).scale(I.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof L=="function"?-L.apply(this,arguments):-L),M,o)},O,D)};function p(_,$){return $=Math.max(i[0],Math.min(i[1],$)),$===_.k?_:new wr($,_.x,_.y)}function b(_,$,L){var O=$[0]-L[0]*_.k,D=$[1]-L[1]*_.k;return O===_.x&&D===_.y?_:new wr(_.k,O,D)}function j(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function N(_,$,L,O){_.on("start.zoom",function(){A(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(O).end()}).tween("zoom",function(){var D=this,M=arguments,I=A(D,M).event(O),B=t.apply(D,M),H=L==null?j(B):typeof L=="function"?L.apply(D,M):L,q=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),Y=D.__zoom,J=typeof $=="function"?$.apply(D,M):$,le=c(Y.invert(H).concat(q/Y.k),J.invert(H).concat(q/J.k));return function(te){if(te===1)te=J;else{var xe=le(te),me=q/xe[2];te=new wr(me,H[0]-xe[0]*me,H[1]-xe[1]*me)}I.zoom(null,te)}})}function A(_,$,L){return!L&&_.__zooming||new k(_,$)}function k(_,$){this.that=_,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,$),this.taps=0}k.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,$){return this.mouse&&_!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var $=vs(this.that).datum();u.call(_,this.that,new EV(_,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),$)}};function C(_,...$){if(!e.apply(this,arguments))return;var L=A(this,$).event(_),O=this.__zoom,D=Math.max(i[0],Math.min(i[1],O.k*Math.pow(2,s.apply(this,arguments)))),M=Os(_);if(L.wheel)(L.mouse[0][0]!==M[0]||L.mouse[0][1]!==M[1])&&(L.mouse[1]=O.invert(L.mouse[0]=M)),clearTimeout(L.wheel);else{if(O.k===D)return;L.mouse=[M,O.invert(M)],Yd(this),L.start()}Yl(_),L.wheel=setTimeout(I,v),L.zoom("mouse",n(b(p(O,D),L.mouse[0],L.mouse[1]),L.extent,o));function I(){L.wheel=null,L.end()}}function S(_,...$){if(m||!e.apply(this,arguments))return;var L=_.currentTarget,O=A(this,$,!0).event(_),D=vs(_.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",q,!0),M=Os(_,L),I=_.clientX,B=_.clientY;PE(_.view),ag(_),O.mouse=[M,this.__zoom.invert(M)],Yd(this),O.start();function H(Y){if(Yl(Y),!O.moved){var J=Y.clientX-I,le=Y.clientY-B;O.moved=J*J+le*le>y}O.event(Y).zoom("mouse",n(b(O.that.__zoom,O.mouse[0]=Os(Y,L),O.mouse[1]),O.extent,o))}function q(Y){D.on("mousemove.zoom mouseup.zoom",null),$E(Y.view,O.moved),Yl(Y),O.event(Y).end()}}function E(_,...$){if(e.apply(this,arguments)){var L=this.__zoom,O=Os(_.changedTouches?_.changedTouches[0]:_,this),D=L.invert(O),M=L.k*(_.shiftKey?.5:2),I=n(b(p(L,M),O,D),t.apply(this,$),o);Yl(_),l>0?vs(this).transition().duration(l).call(N,I,O,_):vs(this).call(x.transform,I,O,_)}}function T(_,...$){if(e.apply(this,arguments)){var L=_.touches,O=L.length,D=A(this,$,_.changedTouches.length===O).event(_),M,I,B,H;for(ag(_),I=0;I<O;++I)B=L[I],H=Os(B,this),H=[H,this.__zoom.invert(H),B.identifier],D.touch0?!D.touch1&&D.touch0[2]!==H[2]&&(D.touch1=H,D.taps=0):(D.touch0=H,M=!0,D.taps=1+!!d);d&&(d=clearTimeout(d)),M&&(D.taps<2&&(f=H[0],d=setTimeout(function(){d=null},h)),Yd(this),D.start())}}function z(_,...$){if(this.__zooming){var L=A(this,$).event(_),O=_.changedTouches,D=O.length,M,I,B,H;for(Yl(_),M=0;M<D;++M)I=O[M],B=Os(I,this),L.touch0&&L.touch0[2]===I.identifier?L.touch0[0]=B:L.touch1&&L.touch1[2]===I.identifier&&(L.touch1[0]=B);if(I=L.that.__zoom,L.touch1){var q=L.touch0[0],Y=L.touch0[1],J=L.touch1[0],le=L.touch1[1],te=(te=J[0]-q[0])*te+(te=J[1]-q[1])*te,xe=(xe=le[0]-Y[0])*xe+(xe=le[1]-Y[1])*xe;I=p(I,Math.sqrt(te/xe)),B=[(q[0]+J[0])/2,(q[1]+J[1])/2],H=[(Y[0]+le[0])/2,(Y[1]+le[1])/2]}else if(L.touch0)B=L.touch0[0],H=L.touch0[1];else return;L.zoom("touch",n(b(I,B,H),L.extent,o))}}function R(_,...$){if(this.__zooming){var L=A(this,$).event(_),O=_.changedTouches,D=O.length,M,I;for(ag(_),m&&clearTimeout(m),m=setTimeout(function(){m=null},h),M=0;M<D;++M)I=O[M],L.touch0&&L.touch0[2]===I.identifier?delete L.touch0:L.touch1&&L.touch1[2]===I.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(I=Os(I,this),Math.hypot(f[0]-I[0],f[1]-I[1])<w)){var B=vs(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return x.wheelDelta=function(_){return arguments.length?(s=typeof _=="function"?_:hd(+_),x):s},x.filter=function(_){return arguments.length?(e=typeof _=="function"?_:hd(!!_),x):e},x.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:hd(!!_),x):r},x.extent=function(_){return arguments.length?(t=typeof _=="function"?_:hd([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),x):t},x.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],x):[i[0],i[1]]},x.translateExtent=function(_){return arguments.length?(o[0][0]=+_[0][0],o[1][0]=+_[1][0],o[0][1]=+_[0][1],o[1][1]=+_[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(_){return arguments.length?(n=_,x):n},x.duration=function(_){return arguments.length?(l=+_,x):l},x.interpolate=function(_){return arguments.length?(c=_,x):c},x.on=function(){var _=u.on.apply(u,arguments);return _===u?x:_},x.clickDistance=function(_){return arguments.length?(y=(_=+_)*_,x):Math.sqrt(y)},x.tapDistance=function(_){return arguments.length?(w=+_,x):w},x}const oh=g.createContext(null),LV=oh.Provider,Br={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},KE=Br.error001();function mt(e,t){const n=g.useContext(oh);if(n===null)throw new Error(KE);return NE(n,e,t)}const Ht=()=>{const e=g.useContext(oh);if(e===null)throw new Error(KE);return g.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},zV=e=>e.userSelectionActive?"none":"all";function QE({position:e,children:t,className:n,style:s,...r}){const i=mt(zV),o=`${e}`.split("-");return P.createElement("div",{className:mn(["react-flow__panel",n,...o]),style:{...s,pointerEvents:i},...r},t)}function PV({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:P.createElement(QE,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},P.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const $V=({x:e,y:t,label:n,labelStyle:s={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=g.useRef(null),[m,h]=g.useState({x:0,y:0,width:0,height:0}),v=mn(["react-flow__edge-textwrapper",u]);return g.useEffect(()=>{if(f.current){const y=f.current.getBBox();h({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:P.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:v,visibility:m.width?"visible":"hidden",...d},r&&P.createElement("rect",{width:m.width+2*o[0],x:-o[0],y:-o[1],height:m.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),P.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:f,style:s},n),c)};var OV=g.memo($V);const uv=e=>({width:e.offsetWidth,height:e.offsetHeight}),dl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),dv=(e={x:0,y:0},t)=>({x:dl(e.x,t[0][0],t[1][0]),y:dl(e.y,t[0][1],t[1][1])}),yw=(e,t,n)=>e<t?dl(Math.abs(e-t),1,50)/50:e>n?-dl(Math.abs(e-n),1,50)/50:0,JE=(e,t)=>{const n=yw(e.x,35,t.width-35)*20,s=yw(e.y,35,t.height-35)*20;return[n,s]},eA=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},IV=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),fv=({x:e,y:t,width:n,height:s})=>({x:e,y:t,x2:e+n,y2:t+s}),BV=({x:e,y:t,x2:n,y2:s})=>({x:e,y:t,width:n-e,height:s-t}),bw=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),$p=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),s=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*s)},FV=e=>ts(e.width)&&ts(e.height)&&ts(e.x)&&ts(e.y),ts=e=>!isNaN(e)&&isFinite(e),xt=Symbol.for("internals"),tA=["Enter"," ","Escape"],HV=(e,t)=>{},UV=e=>"nativeEvent"in e;function Op(e){var r,i;const t=UV(e)?e.nativeEvent:e,n=((i=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const nA=e=>"clientX"in e,Ca=(e,t)=>{var i,o;const n=nA(e),s=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,r=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:s-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Pf=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Mu=({id:e,path:t,labelX:n,labelY:s,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h=20})=>P.createElement(P.Fragment,null,P.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),h&&P.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&ts(n)&&ts(s)?P.createElement(OV,{x:n,y:s,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);Mu.displayName="BaseEdge";function Xl(e,t,n){return n===void 0?n:s=>{const r=t().edges.find(i=>i.id===e);r&&n(s,{...r})}}function sA({sourceX:e,sourceY:t,targetX:n,targetY:s}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,o=Math.abs(s-t)/2,l=s<t?s+o:s-o;return[i,l,r,o]}function rA({sourceX:e,sourceY:t,targetX:n,targetY:s,sourceControlX:r,sourceControlY:i,targetControlX:o,targetControlY:l}){const c=e*.125+r*.375+o*.375+n*.125,u=t*.125+i*.375+l*.375+s*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Ri;(function(e){e.Strict="strict",e.Loose="loose"})(Ri||(Ri={}));var pi;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(pi||(pi={}));var Yc;(function(e){e.Partial="partial",e.Full="full"})(Yc||(Yc={}));var fa;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(fa||(fa={}));var $f;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})($f||($f={}));var oe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(oe||(oe={}));function ww({pos:e,x1:t,y1:n,x2:s,y2:r}){return e===oe.Left||e===oe.Right?[.5*(t+s),n]:[t,.5*(n+r)]}function aA({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:s,targetY:r,targetPosition:i=oe.Top}){const[o,l]=ww({pos:n,x1:e,y1:t,x2:s,y2:r}),[c,u]=ww({pos:i,x1:s,y1:r,x2:e,y2:t}),[d,f,m,h]=rA({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${s},${r}`,d,f,m,h]}const mv=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:r=oe.Bottom,targetPosition:i=oe.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:v,interactionWidth:y})=>{const[w,x,p]=aA({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:s,targetPosition:i});return P.createElement(Mu,{path:w,labelX:x,labelY:p,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:v,interactionWidth:y})});mv.displayName="SimpleBezierEdge";const jw={[oe.Left]:{x:-1,y:0},[oe.Right]:{x:1,y:0},[oe.Top]:{x:0,y:-1},[oe.Bottom]:{x:0,y:1}},VV=({source:e,sourcePosition:t=oe.Bottom,target:n})=>t===oe.Left||t===oe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Nw=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function GV({source:e,sourcePosition:t=oe.Bottom,target:n,targetPosition:s=oe.Top,center:r,offset:i}){const o=jw[t],l=jw[s],c={x:e.x+o.x*i,y:e.y+o.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},d=VV({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",m=d[f];let h=[],v,y;const w={x:0,y:0},x={x:0,y:0},[p,b,j,N]=sA({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[f]*l[f]===-1){v=r.x??p,y=r.y??b;const k=[{x:v,y:c.y},{x:v,y:u.y}],C=[{x:c.x,y},{x:u.x,y}];o[f]===m?h=f==="x"?k:C:h=f==="x"?C:k}else{const k=[{x:c.x,y:u.y}],C=[{x:u.x,y:c.y}];if(f==="x"?h=o.x===m?C:k:h=o.y===m?k:C,t===s){const R=Math.abs(e[f]-n[f]);if(R<=i){const _=Math.min(i-1,i-R);o[f]===m?w[f]=(c[f]>e[f]?-1:1)*_:x[f]=(u[f]>n[f]?-1:1)*_}}if(t!==s){const R=f==="x"?"y":"x",_=o[f]===l[R],$=c[R]>u[R],L=c[R]<u[R];(o[f]===1&&(!_&&$||_&&L)||o[f]!==1&&(!_&&L||_&&$))&&(h=f==="x"?k:C)}const S={x:c.x+w.x,y:c.y+w.y},E={x:u.x+x.x,y:u.y+x.y},T=Math.max(Math.abs(S.x-h[0].x),Math.abs(E.x-h[0].x)),z=Math.max(Math.abs(S.y-h[0].y),Math.abs(E.y-h[0].y));T>=z?(v=(S.x+E.x)/2,y=h[0].y):(v=h[0].x,y=(S.y+E.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...h,{x:u.x+x.x,y:u.y+x.y},n],v,y,j,N]}function qV(e,t,n,s){const r=Math.min(Nw(e,t)/2,Nw(t,n)/2,s),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+r*u},${o}Q ${i},${o} ${i},${o+r*d}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${o+r*c}Q ${i},${o} ${i+r*l},${o}`}function Ip({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:s,targetY:r,targetPosition:i=oe.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,m,h,v]=GV({source:{x:e,y:t},sourcePosition:n,target:{x:s,y:r},targetPosition:i,center:{x:l,y:c},offset:u});return[d.reduce((w,x,p)=>{let b="";return p>0&&p<d.length-1?b=qV(d[p-1],x,d[p+1],o):b=`${p===0?"M":"L"}${x.x} ${x.y}`,w+=b,w},""),f,m,h,v]}const lh=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=oe.Bottom,targetPosition:m=oe.Top,markerEnd:h,markerStart:v,pathOptions:y,interactionWidth:w})=>{const[x,p,b]=Ip({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:s,targetPosition:m,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return P.createElement(Mu,{path:x,labelX:p,labelY:b,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:v,interactionWidth:w})});lh.displayName="SmoothStepEdge";const hv=g.memo(e=>{var t;return P.createElement(lh,{...e,pathOptions:g.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});hv.displayName="StepEdge";function ZV({sourceX:e,sourceY:t,targetX:n,targetY:s}){const[r,i,o,l]=sA({sourceX:e,sourceY:t,targetX:n,targetY:s});return[`M ${e},${t}L ${n},${s}`,r,i,o,l]}const gv=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h})=>{const[v,y,w]=ZV({sourceX:e,sourceY:t,targetX:n,targetY:s});return P.createElement(Mu,{path:v,labelX:y,labelY:w,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h})});gv.displayName="StraightEdge";function gd(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Sw({pos:e,x1:t,y1:n,x2:s,y2:r,c:i}){switch(e){case oe.Left:return[t-gd(t-s,i),n];case oe.Right:return[t+gd(s-t,i),n];case oe.Top:return[t,n-gd(n-r,i)];case oe.Bottom:return[t,n+gd(r-n,i)]}}function iA({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:s,targetY:r,targetPosition:i=oe.Top,curvature:o=.25}){const[l,c]=Sw({pos:n,x1:e,y1:t,x2:s,y2:r,c:o}),[u,d]=Sw({pos:i,x1:s,y1:r,x2:e,y2:t,c:o}),[f,m,h,v]=rA({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${s},${r}`,f,m,h,v]}const Of=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:r=oe.Bottom,targetPosition:i=oe.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:v,pathOptions:y,interactionWidth:w})=>{const[x,p,b]=iA({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:s,targetPosition:i,curvature:y==null?void 0:y.curvature});return P.createElement(Mu,{path:x,labelX:p,labelY:b,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:v,interactionWidth:w})});Of.displayName="BezierEdge";const pv=g.createContext(null),YV=pv.Provider;pv.Consumer;const XV=()=>g.useContext(pv),WV=e=>"id"in e&&"source"in e&&"target"in e,KV=({source:e,sourceHandle:t,target:n,targetHandle:s})=>`reactflow__edge-${e}${t||""}-${n}${s||""}`,Bp=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(s=>`${s}=${e[s]}`).join("&")}`,QV=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),xv=(e,t)=>{if(!e.source||!e.target)return t;let n;return WV(e)?n={...e}:n={...e,id:KV(e)},QV(n,t)?t:t.concat(n)},Fp=({x:e,y:t},[n,s,r],i,[o,l])=>{const c={x:(e-n)/r,y:(t-s)/r};return i?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},oA=({x:e,y:t},[n,s,r])=>({x:e*r+n,y:t*r+s}),Fo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],s=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-s};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-s}:r}},vv=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((s,r)=>{const{x:i,y:o}=Fo(r,t).positionAbsolute;return IV(s,fv({x:i,y:o,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return BV(n)},lA=(e,t,[n,s,r]=[0,0,1],i=!1,o=!1,l=[0,0])=>{const c={x:(t.x-n)/r,y:(t.y-s)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(d=>{const{width:f,height:m,selectable:h=!0,hidden:v=!1}=d;if(o&&!h||v)return!1;const{positionAbsolute:y}=Fo(d,l),w={x:y.x,y:y.y,width:f||0,height:m||0},x=$p(c,w),p=typeof f>"u"||typeof m>"u"||f===null||m===null,b=i&&x>0,j=(f||0)*(m||0);(p||b||x>=j||d.dragging)&&u.push(d)}),u},cA=(e,t)=>{const n=e.map(s=>s.id);return t.filter(s=>n.includes(s.source)||n.includes(s.target))},uA=(e,t,n,s,r,i=.1)=>{const o=t/(e.width*(1+i)),l=n/(e.height*(1+i)),c=Math.min(o,l),u=dl(c,s,r),d=e.x+e.width/2,f=e.y+e.height/2,m=t/2-d*u,h=n/2-f*u;return{x:m,y:h,zoom:u}},ii=(e,t=0)=>e.transition().duration(t);function kw(e,t,n,s){return(t[n]||[]).reduce((r,i)=>{var o,l;return`${e.id}-${i.id}-${n}`!==s&&r.push({id:i.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),r},[])}function JV(e,t,n,s,r,i){const{x:o,y:l}=Ca(e),u=t.elementsFromPoint(o,l).find(v=>v.classList.contains("react-flow__handle"));if(u){const v=u.getAttribute("data-nodeid");if(v){const y=yv(void 0,u),w=u.getAttribute("data-handleid"),x=i({nodeId:v,id:w,type:y});if(x){const p=r.find(b=>b.nodeId===v&&b.type===y&&b.id===w);return{handle:{id:w,type:y,nodeId:v,x:(p==null?void 0:p.x)||n.x,y:(p==null?void 0:p.y)||n.y},validHandleResult:x}}}}let d=[],f=1/0;if(r.forEach(v=>{const y=Math.sqrt((v.x-n.x)**2+(v.y-n.y)**2);if(y<=s){const w=i(v);y<=f&&(y<f?d=[{handle:v,validHandleResult:w}]:y===f&&d.push({handle:v,validHandleResult:w}),f=y)}}),!d.length)return{handle:null,validHandleResult:dA()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:v})=>v.isValid),h=d.some(({handle:v})=>v.type==="target");return d.find(({handle:v,validHandleResult:y})=>h?v.type==="target":m?y.isValid:!0)||d[0]}const eG={source:null,target:null,sourceHandle:null,targetHandle:null},dA=()=>({handleDomNode:null,isValid:!1,connection:eG,endHandle:null});function fA(e,t,n,s,r,i,o){const l=r==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...dA(),handleDomNode:c};if(c){const d=yv(void 0,c),f=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),v=c.classList.contains("connectableend"),y={source:l?f:n,sourceHandle:l?m:s,target:l?n:f,targetHandle:l?s:m};u.connection=y,h&&v&&(t===Ri.Strict?l&&d==="source"||!l&&d==="target":f!==n||m!==s)&&(u.endHandle={nodeId:f,handleId:m,type:d},u.isValid=i(y))}return u}function tG({nodes:e,nodeId:t,handleId:n,handleType:s}){return e.reduce((r,i)=>{if(i[xt]){const{handleBounds:o}=i[xt];let l=[],c=[];o&&(l=kw(i,o,"source",`${t}-${n}-${s}`),c=kw(i,o,"target",`${t}-${n}-${s}`)),r.push(...l,...c)}return r},[])}function yv(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function ig(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function nG(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function mA({event:e,handleId:t,nodeId:n,onConnect:s,isTarget:r,getState:i,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=eA(e.target),{connectionMode:f,domNode:m,autoPanOnConnect:h,connectionRadius:v,onConnectStart:y,panBy:w,getNodes:x,cancelConnection:p}=i();let b=0,j;const{x:N,y:A}=Ca(e),k=d==null?void 0:d.elementFromPoint(N,A),C=yv(c,k),S=m==null?void 0:m.getBoundingClientRect();if(!S||!C)return;let E,T=Ca(e,S),z=!1,R=null,_=!1,$=null;const L=tG({nodes:x(),nodeId:n,handleId:t,handleType:C}),O=()=>{if(!h)return;const[I,B]=JE(T,S);w({x:I,y:B}),b=requestAnimationFrame(O)};o({connectionPosition:T,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:C,connectionStartHandle:{nodeId:n,handleId:t,type:C},connectionEndHandle:null}),y==null||y(e,{nodeId:n,handleId:t,handleType:C});function D(I){const{transform:B}=i();T=Ca(I,S);const{handle:H,validHandleResult:q}=JV(I,d,Fp(T,B,!1,[1,1]),v,L,Y=>fA(Y,f,n,t,r?"target":"source",l,d));if(j=H,z||(O(),z=!0),$=q.handleDomNode,R=q.connection,_=q.isValid,o({connectionPosition:j&&_?oA({x:j.x,y:j.y},B):T,connectionStatus:nG(!!j,_),connectionEndHandle:q.endHandle}),!j&&!_&&!$)return ig(E);R.source!==R.target&&$&&(ig(E),E=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",_),$.classList.toggle("react-flow__handle-valid",_))}function M(I){var B,H;(j||$)&&R&&_&&(s==null||s(R)),(H=(B=i()).onConnectEnd)==null||H.call(B,I),c&&(u==null||u(I)),ig(E),p(),cancelAnimationFrame(b),z=!1,_=!1,R=null,$=null,d.removeEventListener("mousemove",D),d.removeEventListener("mouseup",M),d.removeEventListener("touchmove",D),d.removeEventListener("touchend",M)}d.addEventListener("mousemove",D),d.addEventListener("mouseup",M),d.addEventListener("touchmove",D),d.addEventListener("touchend",M)}const Cw=()=>!0,sG=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),rG=(e,t,n)=>s=>{const{connectionStartHandle:r,connectionEndHandle:i,connectionClickStartHandle:o}=s;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},hA=g.forwardRef(({type:e="source",position:t=oe.Top,isValidConnection:n,isConnectable:s=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...m},h)=>{var S,E;const v=o||null,y=e==="target",w=Ht(),x=XV(),{connectOnClick:p,noPanClassName:b}=mt(sG,wn),{connecting:j,clickConnecting:N}=mt(rG(x,v,e),wn);x||(E=(S=w.getState()).onError)==null||E.call(S,"010",Br.error010());const A=T=>{const{defaultEdgeOptions:z,onConnect:R,hasDefaultEdges:_}=w.getState(),$={...z,...T};if(_){const{edges:L,setEdges:O}=w.getState();O(xv($,L))}R==null||R($),l==null||l($)},k=T=>{if(!x)return;const z=nA(T);r&&(z&&T.button===0||!z)&&mA({event:T,handleId:v,nodeId:x,onConnect:A,isTarget:y,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||Cw}),z?d==null||d(T):f==null||f(T)},C=T=>{const{onClickConnectStart:z,onClickConnectEnd:R,connectionClickStartHandle:_,connectionMode:$,isValidConnection:L}=w.getState();if(!x||!_&&!r)return;if(!_){z==null||z(T,{nodeId:x,handleId:v,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:x,type:e,handleId:v}});return}const O=eA(T.target),D=n||L||Cw,{connection:M,isValid:I}=fA({nodeId:x,id:v,type:e},$,_.nodeId,_.handleId||null,_.type,D,O);I&&A(M),R==null||R(T),w.setState({connectionClickStartHandle:null})};return P.createElement("div",{"data-handleid":v,"data-nodeid":x,"data-handlepos":t,"data-id":`${x}-${v}-${e}`,className:mn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,u,{source:!y,target:y,connectable:s,connectablestart:r,connectableend:i,connecting:N,connectionindicator:s&&(r&&!j||i&&j)}]),onMouseDown:k,onTouchStart:k,onClick:p?C:void 0,ref:h,...m},c)});hA.displayName="Handle";var fl=g.memo(hA);const gA=({data:e,isConnectable:t,targetPosition:n=oe.Top,sourcePosition:s=oe.Bottom})=>P.createElement(P.Fragment,null,P.createElement(fl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,P.createElement(fl,{type:"source",position:s,isConnectable:t}));gA.displayName="DefaultNode";var Hp=g.memo(gA);const pA=({data:e,isConnectable:t,sourcePosition:n=oe.Bottom})=>P.createElement(P.Fragment,null,e==null?void 0:e.label,P.createElement(fl,{type:"source",position:n,isConnectable:t}));pA.displayName="InputNode";var xA=g.memo(pA);const vA=({data:e,isConnectable:t,targetPosition:n=oe.Top})=>P.createElement(P.Fragment,null,P.createElement(fl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);vA.displayName="OutputNode";var yA=g.memo(vA);const bv=()=>null;bv.displayName="GroupNode";const aG=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),pd=e=>e.id;function iG(e,t){return wn(e.selectedNodes.map(pd),t.selectedNodes.map(pd))&&wn(e.selectedEdges.map(pd),t.selectedEdges.map(pd))}const bA=g.memo(({onSelectionChange:e})=>{const t=Ht(),{selectedNodes:n,selectedEdges:s}=mt(aG,iG);return g.useEffect(()=>{const r={nodes:n,edges:s};e==null||e(r),t.getState().onSelectionChange.forEach(i=>i(r))},[n,s,e]),null});bA.displayName="SelectionListener";const oG=e=>!!e.onSelectionChange;function lG({onSelectionChange:e}){const t=mt(oG);return e||t?P.createElement(bA,{onSelectionChange:e}):null}const cG=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function uo(e,t){g.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ee(e,t,n){g.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const uG=({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:r,onConnectStart:i,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:m,edgesUpdatable:h,elevateNodesOnSelect:v,minZoom:y,maxZoom:w,nodeExtent:x,onNodesChange:p,onEdgesChange:b,elementsSelectable:j,connectionMode:N,snapGrid:A,snapToGrid:k,translateExtent:C,connectOnClick:S,defaultEdgeOptions:E,fitView:T,fitViewOptions:z,onNodesDelete:R,onEdgesDelete:_,onNodeDrag:$,onNodeDragStart:L,onNodeDragStop:O,onSelectionDrag:D,onSelectionDragStart:M,onSelectionDragStop:I,noPanClassName:B,nodeOrigin:H,rfId:q,autoPanOnConnect:Y,autoPanOnNodeDrag:J,onError:le,connectionRadius:te,isValidConnection:xe,nodeDragThreshold:me})=>{const{setNodes:ye,setEdges:We,setDefaultNodesAndEdges:st,setMinZoom:V,setMaxZoom:G,setTranslateExtent:K,setNodeExtent:ie,reset:ne}=mt(cG,wn),Q=Ht();return g.useEffect(()=>{const Se=s==null?void 0:s.map(et=>({...et,...E}));return st(n,Se),()=>{ne()}},[]),Ee("defaultEdgeOptions",E,Q.setState),Ee("connectionMode",N,Q.setState),Ee("onConnect",r,Q.setState),Ee("onConnectStart",i,Q.setState),Ee("onConnectEnd",o,Q.setState),Ee("onClickConnectStart",l,Q.setState),Ee("onClickConnectEnd",c,Q.setState),Ee("nodesDraggable",u,Q.setState),Ee("nodesConnectable",d,Q.setState),Ee("nodesFocusable",f,Q.setState),Ee("edgesFocusable",m,Q.setState),Ee("edgesUpdatable",h,Q.setState),Ee("elementsSelectable",j,Q.setState),Ee("elevateNodesOnSelect",v,Q.setState),Ee("snapToGrid",k,Q.setState),Ee("snapGrid",A,Q.setState),Ee("onNodesChange",p,Q.setState),Ee("onEdgesChange",b,Q.setState),Ee("connectOnClick",S,Q.setState),Ee("fitViewOnInit",T,Q.setState),Ee("fitViewOnInitOptions",z,Q.setState),Ee("onNodesDelete",R,Q.setState),Ee("onEdgesDelete",_,Q.setState),Ee("onNodeDrag",$,Q.setState),Ee("onNodeDragStart",L,Q.setState),Ee("onNodeDragStop",O,Q.setState),Ee("onSelectionDrag",D,Q.setState),Ee("onSelectionDragStart",M,Q.setState),Ee("onSelectionDragStop",I,Q.setState),Ee("noPanClassName",B,Q.setState),Ee("nodeOrigin",H,Q.setState),Ee("rfId",q,Q.setState),Ee("autoPanOnConnect",Y,Q.setState),Ee("autoPanOnNodeDrag",J,Q.setState),Ee("onError",le,Q.setState),Ee("connectionRadius",te,Q.setState),Ee("isValidConnection",xe,Q.setState),Ee("nodeDragThreshold",me,Q.setState),uo(e,ye),uo(t,We),uo(y,V),uo(w,G),uo(C,K),uo(x,ie),null},Ew={display:"none"},dG={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},wA="react-flow__node-desc",jA="react-flow__edge-desc",fG="react-flow__aria-live",mG=e=>e.ariaLiveMessage;function hG({rfId:e}){const t=mt(mG);return P.createElement("div",{id:`${fG}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:dG},t)}function gG({rfId:e,disableKeyboardA11y:t}){return P.createElement(P.Fragment,null,P.createElement("div",{id:`${wA}-${e}`,style:Ew},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),P.createElement("div",{id:`${jA}-${e}`,style:Ew},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&P.createElement(hG,{rfId:e}))}var Xc=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,s]=g.useState(!1),r=g.useRef(!1),i=g.useRef(new Set([])),[o,l]=g.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,m)=>f.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return g.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Op(h))return!1;const y=Tw(h.code,l);i.current.add(h[y]),Aw(o,i.current,!1)&&(h.preventDefault(),s(!0))},f=h=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&Op(h))return!1;const y=Tw(h.code,l);Aw(o,i.current,!0)?(s(!1),i.current.clear()):i.current.delete(h[y]),h.key==="Meta"&&i.current.clear(),r.current=!1},m=()=>{i.current.clear(),s(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",m)}}},[e,s]),n};function Aw(e,t,n){return e.filter(s=>n||s.length===t.size).some(s=>s.every(r=>t.has(r)))}function Tw(e,t){return t.includes(e)?"code":"key"}function NA(e,t,n,s){var l,c;const r=e.parentNode||e.parentId;if(!r)return n;const i=t.get(r),o=Fo(i,s);return NA(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((l=i[xt])==null?void 0:l.z)??0)>(n.z??0)?((c=i[xt])==null?void 0:c.z)??0:n.z??0},s)}function SA(e,t,n){e.forEach(s=>{var i;const r=s.parentNode||s.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[s.id]){const{x:o,y:l,z:c}=NA(s,e,{...s.position,z:((i=s[xt])==null?void 0:i.z)??0},t);s.positionAbsolute={x:o,y:l},s[xt].z=c,n!=null&&n[s.id]&&(s[xt].isParent=!0)}})}function og(e,t,n,s){const r=new Map,i={},o=s?1e3:0;return e.forEach(l=>{var h;const c=(ts(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(i[f]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,xt,{enumerable:!1,value:{handleBounds:m||(h=u==null?void 0:u[xt])==null?void 0:h.handleBounds,z:c}}),r.set(l.id,d)}),SA(r,n,i),r}function kA(e,t={}){const{getNodes:n,width:s,height:r,minZoom:i,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),m=t.initial&&!u&&d;if(l&&c&&(m||!t.initial)){const v=n().filter(w=>{var p;const x=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(p=t.nodes)!=null&&p.length?x&&t.nodes.some(b=>b.id===w.id):x}),y=v.every(w=>w.width&&w.height);if(v.length>0&&y){const w=vv(v,f),{x,y:p,zoom:b}=uA(w,s,r,t.minZoom??i,t.maxZoom??o,t.padding??.1),j=ka.translate(x,p).scale(b);return typeof t.duration=="number"&&t.duration>0?l.transform(ii(c,t.duration),j):l.transform(c,j),!0}}return!1}function pG(e,t){return e.forEach(n=>{const s=t.get(n.id);s&&t.set(s.id,{...s,[xt]:s[xt],selected:n.selected})}),new Map(t)}function xG(e,t){return t.map(n=>{const s=e.find(r=>r.id===n.id);return s&&(n.selected=s.selected),n})}function xd({changedNodes:e,changedEdges:t,get:n,set:s}){const{nodeInternals:r,edges:i,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&s({nodeInternals:pG(e,r)}),o==null||o(e)),t!=null&&t.length&&(u&&s({edges:xG(t,i)}),l==null||l(t))}const fo=()=>{},vG={zoomIn:fo,zoomOut:fo,zoomTo:fo,getZoom:()=>1,setViewport:fo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:fo,fitBounds:fo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},yG=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),bG=()=>{const e=Ht(),{d3Zoom:t,d3Selection:n}=mt(yG,wn);return g.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(ii(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(ii(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,i)=>t.scaleTo(ii(n,i==null?void 0:i.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{const[o,l,c]=e.getState().transform,u=ka.translate(r.x??o,r.y??l).scale(r.zoom??c);t.transform(ii(n,i==null?void 0:i.duration),u)},getViewport:()=>{const[r,i,o]=e.getState().transform;return{x:r,y:i,zoom:o}},fitView:r=>kA(e.getState,r),setCenter:(r,i,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=l/2-r*d,m=c/2-i*d,h=ka.translate(f,m).scale(d);t.transform(ii(n,o==null?void 0:o.duration),h)},fitBounds:(r,i)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:m}=uA(r,o,l,c,u,(i==null?void 0:i.padding)??.1),h=ka.translate(d,f).scale(m);t.transform(ii(n,i==null?void 0:i.duration),h)},project:r=>{const{transform:i,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Fp(r,i,o,l)},screenToFlowPosition:r=>{const{transform:i,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return r;const{x:u,y:d}=c.getBoundingClientRect(),f={x:r.x-u,y:r.y-d};return Fp(f,i,o,l)},flowToScreenPosition:r=>{const{transform:i,domNode:o}=e.getState();if(!o)return r;const{x:l,y:c}=o.getBoundingClientRect(),u=oA(r,i);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:vG,[t,n])};function wv(){const e=bG(),t=Ht(),n=g.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),s=g.useCallback(y=>t.getState().nodeInternals.get(y),[]),r=g.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(w=>({...w}))},[]),i=g.useCallback(y=>{const{edges:w=[]}=t.getState();return w.find(x=>x.id===y)},[]),o=g.useCallback(y=>{const{getNodes:w,setNodes:x,hasDefaultNodes:p,onNodesChange:b}=t.getState(),j=w(),N=typeof y=="function"?y(j):y;if(p)x(N);else if(b){const A=N.length===0?j.map(k=>({type:"remove",id:k.id})):N.map(k=>({item:k,type:"reset"}));b(A)}},[]),l=g.useCallback(y=>{const{edges:w=[],setEdges:x,hasDefaultEdges:p,onEdgesChange:b}=t.getState(),j=typeof y=="function"?y(w):y;if(p)x(j);else if(b){const N=j.length===0?w.map(A=>({type:"remove",id:A.id})):j.map(A=>({item:A,type:"reset"}));b(N)}},[]),c=g.useCallback(y=>{const w=Array.isArray(y)?y:[y],{getNodes:x,setNodes:p,hasDefaultNodes:b,onNodesChange:j}=t.getState();if(b){const A=[...x(),...w];p(A)}else if(j){const N=w.map(A=>({item:A,type:"add"}));j(N)}},[]),u=g.useCallback(y=>{const w=Array.isArray(y)?y:[y],{edges:x=[],setEdges:p,hasDefaultEdges:b,onEdgesChange:j}=t.getState();if(b)p([...x,...w]);else if(j){const N=w.map(A=>({item:A,type:"add"}));j(N)}},[]),d=g.useCallback(()=>{const{getNodes:y,edges:w=[],transform:x}=t.getState(),[p,b,j]=x;return{nodes:y().map(N=>({...N})),edges:w.map(N=>({...N})),viewport:{x:p,y:b,zoom:j}}},[]),f=g.useCallback(({nodes:y,edges:w})=>{const{nodeInternals:x,getNodes:p,edges:b,hasDefaultNodes:j,hasDefaultEdges:N,onNodesDelete:A,onEdgesDelete:k,onNodesChange:C,onEdgesChange:S}=t.getState(),E=(y||[]).map($=>$.id),T=(w||[]).map($=>$.id),z=p().reduce(($,L)=>{const O=L.parentNode||L.parentId,D=!E.includes(L.id)&&O&&$.find(I=>I.id===O);return(typeof L.deletable=="boolean"?L.deletable:!0)&&(E.includes(L.id)||D)&&$.push(L),$},[]),R=b.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),_=R.filter($=>T.includes($.id));if(z||_){const $=cA(z,R),L=[..._,...$],O=L.reduce((D,M)=>(D.includes(M.id)||D.push(M.id),D),[]);if((N||j)&&(N&&t.setState({edges:b.filter(D=>!O.includes(D.id))}),j&&(z.forEach(D=>{x.delete(D.id)}),t.setState({nodeInternals:new Map(x)}))),O.length>0&&(k==null||k(L),S&&S(O.map(D=>({id:D,type:"remove"})))),z.length>0&&(A==null||A(z),C)){const D=z.map(M=>({id:M.id,type:"remove"}));C(D)}}},[]),m=g.useCallback(y=>{const w=FV(y),x=w?null:t.getState().nodeInternals.get(y.id);return!w&&!x?[null,null,w]:[w?y:bw(x),x,w]},[]),h=g.useCallback((y,w=!0,x)=>{const[p,b,j]=m(y);return p?(x||t.getState().getNodes()).filter(N=>{if(!j&&(N.id===b.id||!N.positionAbsolute))return!1;const A=bw(N),k=$p(A,p);return w&&k>0||k>=p.width*p.height}):[]},[]),v=g.useCallback((y,w,x=!0)=>{const[p]=m(y);if(!p)return!1;const b=$p(p,w);return x&&b>0||b>=p.width*p.height},[]);return g.useMemo(()=>({...e,getNodes:n,getNode:s,getEdges:r,getEdge:i,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:v}),[e,n,s,r,i,o,l,c,u,d,f,h,v])}const wG={actInsideInputWithModifier:!1};var jG=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ht(),{deleteElements:s}=wv(),r=Xc(e,wG),i=Xc(t);g.useEffect(()=>{if(r){const{edges:o,getNodes:l}=n.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);s({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),g.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function NG(e){const t=Ht();g.useEffect(()=>{let n;const s=()=>{var i,o;if(!e.current)return;const r=uv(e.current);(r.height===0||r.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",Br.error004())),t.setState({width:r.width||500,height:r.height||500})};return s(),window.addEventListener("resize",s),e.current&&(n=new ResizeObserver(()=>s()),n.observe(e.current)),()=>{window.removeEventListener("resize",s),n&&e.current&&n.unobserve(e.current)}},[])}const jv={position:"absolute",width:"100%",height:"100%",top:0,left:0},SG=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,vd=e=>({x:e.x,y:e.y,zoom:e.k}),mo=(e,t)=>e.target.closest(`.${t}`),_w=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Mw=e=>{const t=e.ctrlKey&&Pf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},kG=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),CG=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:s,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=pi.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:m,translateExtent:h,minZoom:v,maxZoom:y,zoomActivationKeyCode:w,preventScrolling:x=!0,children:p,noWheelClassName:b,noPanClassName:j})=>{const N=g.useRef(),A=Ht(),k=g.useRef(!1),C=g.useRef(!1),S=g.useRef(null),E=g.useRef({x:0,y:0,zoom:0}),{d3Zoom:T,d3Selection:z,d3ZoomHandler:R,userSelectionActive:_}=mt(kG,wn),$=Xc(w),L=g.useRef(0),O=g.useRef(!1),D=g.useRef();return NG(S),g.useEffect(()=>{if(S.current){const M=S.current.getBoundingClientRect(),I=DV().scaleExtent([v,y]).translateExtent(h),B=vs(S.current).call(I),H=ka.translate(m.x,m.y).scale(dl(m.zoom,v,y)),q=[[0,0],[M.width,M.height]],Y=I.constrain()(H,q,h);I.transform(B,Y),I.wheelDelta(Mw),A.setState({d3Zoom:I,d3Selection:B,d3ZoomHandler:B.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:S.current.closest(".react-flow")})}},[]),g.useEffect(()=>{z&&T&&(o&&!$&&!_?z.on("wheel.zoom",M=>{if(mo(M,b))return!1;M.preventDefault(),M.stopImmediatePropagation();const I=z.property("__zoom").k||1;if(M.ctrlKey&&i){const xe=Os(M),me=Mw(M),ye=I*Math.pow(2,me);T.scaleTo(z,ye,xe,M);return}const B=M.deltaMode===1?20:1;let H=c===pi.Vertical?0:M.deltaX*B,q=c===pi.Horizontal?0:M.deltaY*B;!Pf()&&M.shiftKey&&c!==pi.Vertical&&(H=M.deltaY*B,q=0),T.translateBy(z,-(H/I)*l,-(q/I)*l,{internal:!0});const Y=vd(z.property("__zoom")),{onViewportChangeStart:J,onViewportChange:le,onViewportChangeEnd:te}=A.getState();clearTimeout(D.current),O.current||(O.current=!0,t==null||t(M,Y),J==null||J(Y)),O.current&&(e==null||e(M,Y),le==null||le(Y),D.current=setTimeout(()=>{n==null||n(M,Y),te==null||te(Y),O.current=!1},150))},{passive:!1}):typeof R<"u"&&z.on("wheel.zoom",function(M,I){if(!x&&M.type==="wheel"&&!M.ctrlKey||mo(M,b))return null;M.preventDefault(),R.call(this,M,I)},{passive:!1}))},[_,o,c,z,T,R,$,i,x,b,t,e,n]),g.useEffect(()=>{T&&T.on("start",M=>{var H,q;if(!M.sourceEvent||M.sourceEvent.internal)return null;L.current=(H=M.sourceEvent)==null?void 0:H.button;const{onViewportChangeStart:I}=A.getState(),B=vd(M.transform);k.current=!0,E.current=B,((q=M.sourceEvent)==null?void 0:q.type)==="mousedown"&&A.setState({paneDragging:!0}),I==null||I(B),t==null||t(M.sourceEvent,B)})},[T,t]),g.useEffect(()=>{T&&(_&&!k.current?T.on("zoom",null):_||T.on("zoom",M=>{var B;const{onViewportChange:I}=A.getState();if(A.setState({transform:[M.transform.x,M.transform.y,M.transform.k]}),C.current=!!(s&&_w(f,L.current??0)),(e||I)&&!((B=M.sourceEvent)!=null&&B.internal)){const H=vd(M.transform);I==null||I(H),e==null||e(M.sourceEvent,H)}}))},[_,T,e,f,s]),g.useEffect(()=>{T&&T.on("end",M=>{if(!M.sourceEvent||M.sourceEvent.internal)return null;const{onViewportChangeEnd:I}=A.getState();if(k.current=!1,A.setState({paneDragging:!1}),s&&_w(f,L.current??0)&&!C.current&&s(M.sourceEvent),C.current=!1,(n||I)&&SG(E.current,M.transform)){const B=vd(M.transform);E.current=B,clearTimeout(N.current),N.current=setTimeout(()=>{I==null||I(B),n==null||n(M.sourceEvent,B)},o?150:0)}})},[T,o,f,n,s]),g.useEffect(()=>{T&&T.filter(M=>{const I=$||r,B=i&&M.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&M.button===1&&M.type==="mousedown"&&(mo(M,"react-flow__node")||mo(M,"react-flow__edge")))return!0;if(!f&&!I&&!o&&!u&&!i||_||!u&&M.type==="dblclick"||mo(M,b)&&M.type==="wheel"||mo(M,j)&&(M.type!=="wheel"||o&&M.type==="wheel"&&!$)||!i&&M.ctrlKey&&M.type==="wheel"||!I&&!o&&!B&&M.type==="wheel"||!f&&(M.type==="mousedown"||M.type==="touchstart")||Array.isArray(f)&&!f.includes(M.button)&&M.type==="mousedown")return!1;const H=Array.isArray(f)&&f.includes(M.button)||!M.button||M.button<=1;return(!M.ctrlKey||M.type==="wheel")&&H})},[_,T,r,i,o,u,f,d,$]),P.createElement("div",{className:"react-flow__renderer",ref:S,style:jv},p)},EG=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function AG(){const{userSelectionActive:e,userSelectionRect:t}=mt(EG,wn);return e&&t?P.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Rw(e,t){const n=t.parentNode||t.parentId,s=e.find(r=>r.id===n);if(s){const r=t.position.x+t.width-s.width,i=t.position.y+t.height-s.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(s.style={...s.style},s.style.width=s.style.width??s.width,s.style.height=s.style.height??s.height,r>0&&(s.style.width+=r),i>0&&(s.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);s.position.x=s.position.x-o,s.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);s.position.y=s.position.y-o,s.style.height+=o,t.position.y=0}s.width=s.style.width,s.height=s.style.height}}}function CA(e,t){if(e.some(s=>s.type==="reset"))return e.filter(s=>s.type==="reset").map(s=>s.item);const n=e.filter(s=>s.type==="add").map(s=>s.item);return t.reduce((s,r)=>{const i=e.filter(l=>l.id===r.id);if(i.length===0)return s.push(r),s;const o={...r};for(const l of i)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&Rw(s,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&Rw(s,o);break}case"remove":return s}return s.push(o),s},n)}function EA(e,t){return CA(e,t)}function TG(e,t){return CA(e,t)}const ca=(e,t)=>({id:e,type:"select",selected:t});function jo(e,t){return e.reduce((n,s)=>{const r=t.includes(s.id);return!s.selected&&r?(s.selected=!0,n.push(ca(s.id,!0))):s.selected&&!r&&(s.selected=!1,n.push(ca(s.id,!1))),n},[])}const lg=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},_G=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),AA=g.memo(({isSelecting:e,selectionMode:t=Yc.Full,panOnDrag:n,onSelectionStart:s,onSelectionEnd:r,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const m=g.useRef(null),h=Ht(),v=g.useRef(0),y=g.useRef(0),w=g.useRef(),{userSelectionActive:x,elementsSelectable:p,dragging:b}=mt(_G,wn),j=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,y.current=0},N=R=>{i==null||i(R),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},A=R=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){R.preventDefault();return}o==null||o(R)},k=l?R=>l(R):void 0,C=R=>{const{resetSelectedElements:_,domNode:$}=h.getState();if(w.current=$==null?void 0:$.getBoundingClientRect(),!p||!e||R.button!==0||R.target!==m.current||!w.current)return;const{x:L,y:O}=Ca(R,w.current);_(),h.setState({userSelectionRect:{width:0,height:0,startX:L,startY:O,x:L,y:O}}),s==null||s(R)},S=R=>{const{userSelectionRect:_,nodeInternals:$,edges:L,transform:O,onNodesChange:D,onEdgesChange:M,nodeOrigin:I,getNodes:B}=h.getState();if(!e||!w.current||!_)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const H=Ca(R,w.current),q=_.startX??0,Y=_.startY??0,J={..._,x:H.x<q?H.x:q,y:H.y<Y?H.y:Y,width:Math.abs(H.x-q),height:Math.abs(H.y-Y)},le=B(),te=lA($,J,O,t===Yc.Partial,!0,I),xe=cA(te,L).map(ye=>ye.id),me=te.map(ye=>ye.id);if(v.current!==me.length){v.current=me.length;const ye=jo(le,me);ye.length&&(D==null||D(ye))}if(y.current!==xe.length){y.current=xe.length;const ye=jo(L,xe);ye.length&&(M==null||M(ye))}h.setState({userSelectionRect:J})},E=R=>{if(R.button!==0)return;const{userSelectionRect:_}=h.getState();!x&&_&&R.target===m.current&&(N==null||N(R)),h.setState({nodesSelectionActive:v.current>0}),j(),r==null||r(R)},T=R=>{x&&(h.setState({nodesSelectionActive:v.current>0}),r==null||r(R)),j()},z=p&&(e||x);return P.createElement("div",{className:mn(["react-flow__pane",{dragging:b,selection:e}]),onClick:z?void 0:lg(N,m),onContextMenu:lg(A,m),onWheel:lg(k,m),onMouseEnter:z?void 0:c,onMouseDown:z?C:void 0,onMouseMove:z?S:u,onMouseUp:z?E:void 0,onMouseLeave:z?T:d,ref:m,style:jv},f,P.createElement(AG,null))});AA.displayName="Pane";function TA(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const s=t.get(n);return s?s.selected?!0:TA(s,t):!1}function Dw(e,t,n){let s=e;do{if(s!=null&&s.matches(t))return!0;if(s===n.current)return!1;s=s.parentElement}while(s);return!1}function MG(e,t,n,s){return Array.from(e.values()).filter(r=>(r.selected||r.id===s)&&(!r.parentNode||r.parentId||!TA(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var i,o;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=r.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((o=r.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function RG(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function _A(e,t,n,s,r=[0,0],i){const o=RG(e,e.extent||s);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:m,y:h}=Fo(f,r).positionAbsolute;l=f&&ts(m)&&ts(h)&&ts(f.width)&&ts(f.height)?[[m+e.width*r[0],h+e.height*r[1]],[m+f.width-e.width+e.width*r[0],h+f.height-e.height+e.height*r[1]]]:l}else i==null||i("005",Br.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:m,y:h}=Fo(f,r).positionAbsolute;l=[[e.extent[0][0]+m,e.extent[0][1]+h],[e.extent[1][0]+m,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const f=n.get(c);u=Fo(f,r).positionAbsolute}const d=l&&l!=="parent"?dv(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function cg({nodeId:e,dragItems:t,nodeInternals:n}){const s=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?s.find(r=>r.id===e):s[0],s]}const Lw=(e,t,n,s)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const i=Array.from(r),o=t.getBoundingClientRect(),l={x:o.width*s[0],y:o.height*s[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/n,y:(u.top-o.top-l.y)/n,...uv(c)}})};function Wl(e,t,n){return n===void 0?n:s=>{const r=t().nodeInternals.get(e);r&&n(s,{...r})}}function Up({id:e,store:t,unselect:n=!1,nodeRef:s}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",Br.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=s==null?void 0:s.current)==null?void 0:d.blur()})):r([e])}function DG(){const e=Ht();return g.useCallback(({sourceEvent:n})=>{const{transform:s,snapGrid:r,snapToGrid:i}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,c={x:(o-s[0])/s[2],y:(l-s[1])/s[2]};return{xSnapped:i?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:i?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function ug(e){return(t,n,s)=>e==null?void 0:e(t,s)}function MA({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:s,nodeId:r,isSelectable:i,selectNodesOnDrag:o}){const l=Ht(),[c,u]=g.useState(!1),d=g.useRef([]),f=g.useRef({x:null,y:null}),m=g.useRef(0),h=g.useRef(null),v=g.useRef({x:0,y:0}),y=g.useRef(null),w=g.useRef(!1),x=g.useRef(!1),p=g.useRef(!1),b=DG();return g.useEffect(()=>{if(e!=null&&e.current){const j=vs(e.current),N=({x:C,y:S})=>{const{nodeInternals:E,onNodeDrag:T,onSelectionDrag:z,updateNodePositions:R,nodeExtent:_,snapGrid:$,snapToGrid:L,nodeOrigin:O,onError:D}=l.getState();f.current={x:C,y:S};let M=!1,I={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&_){const H=vv(d.current,O);I=fv(H)}if(d.current=d.current.map(H=>{const q={x:C-H.distance.x,y:S-H.distance.y};L&&(q.x=$[0]*Math.round(q.x/$[0]),q.y=$[1]*Math.round(q.y/$[1]));const Y=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];d.current.length>1&&_&&!H.extent&&(Y[0][0]=H.positionAbsolute.x-I.x+_[0][0],Y[1][0]=H.positionAbsolute.x+(H.width??0)-I.x2+_[1][0],Y[0][1]=H.positionAbsolute.y-I.y+_[0][1],Y[1][1]=H.positionAbsolute.y+(H.height??0)-I.y2+_[1][1]);const J=_A(H,q,E,Y,O,D);return M=M||H.position.x!==J.position.x||H.position.y!==J.position.y,H.position=J.position,H.positionAbsolute=J.positionAbsolute,H}),!M)return;R(d.current,!0,!0),u(!0);const B=r?T:ug(z);if(B&&y.current){const[H,q]=cg({nodeId:r,dragItems:d.current,nodeInternals:E});B(y.current,H,q)}},A=()=>{if(!h.current)return;const[C,S]=JE(v.current,h.current);if(C!==0||S!==0){const{transform:E,panBy:T}=l.getState();f.current.x=(f.current.x??0)-C/E[2],f.current.y=(f.current.y??0)-S/E[2],T({x:C,y:S})&&N(f.current)}m.current=requestAnimationFrame(A)},k=C=>{var O;const{nodeInternals:S,multiSelectionActive:E,nodesDraggable:T,unselectNodesAndEdges:z,onNodeDragStart:R,onSelectionDragStart:_}=l.getState();x.current=!0;const $=r?R:ug(_);(!o||!i)&&!E&&r&&((O=S.get(r))!=null&&O.selected||z()),r&&i&&o&&Up({id:r,store:l,nodeRef:e});const L=b(C);if(f.current=L,d.current=MG(S,T,L,r),$&&d.current){const[D,M]=cg({nodeId:r,dragItems:d.current,nodeInternals:S});$(C.sourceEvent,D,M)}};if(t)j.on(".drag",null);else{const C=UH().on("start",S=>{const{domNode:E,nodeDragThreshold:T}=l.getState();T===0&&k(S),p.current=!1;const z=b(S);f.current=z,h.current=(E==null?void 0:E.getBoundingClientRect())||null,v.current=Ca(S.sourceEvent,h.current)}).on("drag",S=>{var R,_;const E=b(S),{autoPanOnNodeDrag:T,nodeDragThreshold:z}=l.getState();if(S.sourceEvent.type==="touchmove"&&S.sourceEvent.touches.length>1&&(p.current=!0),!p.current){if(!w.current&&x.current&&T&&(w.current=!0,A()),!x.current){const $=E.xSnapped-(((R=f==null?void 0:f.current)==null?void 0:R.x)??0),L=E.ySnapped-(((_=f==null?void 0:f.current)==null?void 0:_.y)??0);Math.sqrt($*$+L*L)>z&&k(S)}(f.current.x!==E.xSnapped||f.current.y!==E.ySnapped)&&d.current&&x.current&&(y.current=S.sourceEvent,v.current=Ca(S.sourceEvent,h.current),N(E))}}).on("end",S=>{if(!(!x.current||p.current)&&(u(!1),w.current=!1,x.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:E,nodeInternals:T,onNodeDragStop:z,onSelectionDragStop:R}=l.getState(),_=r?z:ug(R);if(E(d.current,!1,!1),_){const[$,L]=cg({nodeId:r,dragItems:d.current,nodeInternals:T});_(S.sourceEvent,$,L)}}}).filter(S=>{const E=S.target;return!S.button&&(!n||!Dw(E,`.${n}`,e))&&(!s||Dw(E,s,e))});return j.call(C),()=>{j.on(".drag",null)}}}},[e,t,n,s,i,l,r,o,b]),c}function RA(){const e=Ht();return g.useCallback(n=>{const{nodeInternals:s,nodeExtent:r,updateNodePositions:i,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(p=>p.selected&&(p.draggable||d&&typeof p.draggable>"u")),m=l?c[0]:5,h=l?c[1]:5,v=n.isShiftPressed?4:1,y=n.x*m*v,w=n.y*h*v,x=f.map(p=>{if(p.positionAbsolute){const b={x:p.positionAbsolute.x+y,y:p.positionAbsolute.y+w};l&&(b.x=c[0]*Math.round(b.x/c[0]),b.y=c[1]*Math.round(b.y/c[1]));const{positionAbsolute:j,position:N}=_A(p,b,s,r,void 0,u);p.position=N,p.positionAbsolute=j}return p});i(x,!0,!1)},[])}const Ho={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Kl=e=>{const t=({id:n,type:s,data:r,xPos:i,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:h,onContextMenu:v,onDoubleClick:y,style:w,className:x,isDraggable:p,isSelectable:b,isConnectable:j,isFocusable:N,selectNodesOnDrag:A,sourcePosition:k,targetPosition:C,hidden:S,resizeObserver:E,dragHandle:T,zIndex:z,isParent:R,noDragClassName:_,noPanClassName:$,initialized:L,disableKeyboardA11y:O,ariaLabel:D,rfId:M,hasHandleBounds:I})=>{const B=Ht(),H=g.useRef(null),q=g.useRef(null),Y=g.useRef(k),J=g.useRef(C),le=g.useRef(s),te=b||p||d||f||m||h,xe=RA(),me=Wl(n,B.getState,f),ye=Wl(n,B.getState,m),We=Wl(n,B.getState,h),st=Wl(n,B.getState,v),V=Wl(n,B.getState,y),G=ne=>{const{nodeDragThreshold:Q}=B.getState();if(b&&(!A||!p||Q>0)&&Up({id:n,store:B,nodeRef:H}),d){const Se=B.getState().nodeInternals.get(n);Se&&d(ne,{...Se})}},K=ne=>{if(!Op(ne)&&!O)if(tA.includes(ne.key)&&b){const Q=ne.key==="Escape";Up({id:n,store:B,unselect:Q,nodeRef:H})}else p&&u&&Object.prototype.hasOwnProperty.call(Ho,ne.key)&&(B.setState({ariaLiveMessage:`Moved selected node ${ne.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),xe({x:Ho[ne.key].x,y:Ho[ne.key].y,isShiftPressed:ne.shiftKey}))};g.useEffect(()=>()=>{q.current&&(E==null||E.unobserve(q.current),q.current=null)},[]),g.useEffect(()=>{if(H.current&&!S){const ne=H.current;(!L||!I||q.current!==ne)&&(q.current&&(E==null||E.unobserve(q.current)),E==null||E.observe(ne),q.current=ne)}},[S,L,I]),g.useEffect(()=>{const ne=le.current!==s,Q=Y.current!==k,Se=J.current!==C;H.current&&(ne||Q||Se)&&(ne&&(le.current=s),Q&&(Y.current=k),Se&&(J.current=C),B.getState().updateNodeDimensions([{id:n,nodeElement:H.current,forceUpdate:!0}]))},[n,s,k,C]);const ie=MA({nodeRef:H,disabled:S||!p,noDragClassName:_,handleSelector:T,nodeId:n,isSelectable:b,selectNodesOnDrag:A});return S?null:P.createElement("div",{className:mn(["react-flow__node",`react-flow__node-${s}`,{[$]:p},x,{selected:u,selectable:b,parent:R,dragging:ie}]),ref:H,style:{zIndex:z,transform:`translate(${l}px,${c}px)`,pointerEvents:te?"all":"none",visibility:L?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:me,onMouseMove:ye,onMouseLeave:We,onContextMenu:st,onClick:G,onDoubleClick:V,onKeyDown:N?K:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":O?void 0:`${wA}-${M}`,"aria-label":D},P.createElement(YV,{value:n},P.createElement(e,{id:n,data:r,type:s,xPos:i,yPos:o,selected:u,isConnectable:j,sourcePosition:k,targetPosition:C,dragging:ie,dragHandle:T,zIndex:z})))};return t.displayName="NodeWrapper",g.memo(t)};const LG=e=>{const t=e.getNodes().filter(n=>n.selected);return{...vv(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function zG({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const s=Ht(),{width:r,height:i,x:o,y:l,transformString:c,userSelectionActive:u}=mt(LG,wn),d=RA(),f=g.useRef(null);if(g.useEffect(()=>{var v;n||(v=f.current)==null||v.focus({preventScroll:!0})},[n]),MA({nodeRef:f}),u||!r||!i)return null;const m=e?v=>{const y=s.getState().getNodes().filter(w=>w.selected);e(v,y)}:void 0,h=v=>{Object.prototype.hasOwnProperty.call(Ho,v.key)&&d({x:Ho[v.key].x,y:Ho[v.key].y,isShiftPressed:v.shiftKey})};return P.createElement("div",{className:mn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},P.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:r,height:i,top:l,left:o}}))}var PG=g.memo(zG);const $G=e=>e.nodesSelectionActive,DA=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:h,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:w,panActivationKeyCode:x,zoomActivationKeyCode:p,elementsSelectable:b,zoomOnScroll:j,zoomOnPinch:N,panOnScroll:A,panOnScrollSpeed:k,panOnScrollMode:C,zoomOnDoubleClick:S,panOnDrag:E,defaultViewport:T,translateExtent:z,minZoom:R,maxZoom:_,preventScrolling:$,onSelectionContextMenu:L,noWheelClassName:O,noPanClassName:D,disableKeyboardA11y:M})=>{const I=mt($G),B=Xc(f),H=Xc(x),q=H||E,Y=H||A,J=B||m&&q!==!0;return jG({deleteKeyCode:l,multiSelectionKeyCode:w}),P.createElement(CG,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:i,elementsSelectable:b,zoomOnScroll:j,zoomOnPinch:N,panOnScroll:Y,panOnScrollSpeed:k,panOnScrollMode:C,zoomOnDoubleClick:S,panOnDrag:!B&&q,defaultViewport:T,translateExtent:z,minZoom:R,maxZoom:_,zoomActivationKeyCode:p,preventScrolling:$,noWheelClassName:O,noPanClassName:D},P.createElement(AA,{onSelectionStart:v,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:q,isSelecting:!!J,selectionMode:h},e,I&&P.createElement(PG,{onSelectionContextMenu:L,noPanClassName:D,disableKeyboardA11y:M})))};DA.displayName="FlowRenderer";var OG=g.memo(DA);function IG(e){return mt(g.useCallback(n=>e?lA(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function BG(e){const t={input:Kl(e.input||xA),default:Kl(e.default||Hp),output:Kl(e.output||yA),group:Kl(e.group||bv)},n={},s=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,i)=>(r[i]=Kl(e[i]||Hp),r),n);return{...t,...s}}const FG=({x:e,y:t,width:n,height:s,origin:r})=>!n||!s?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-s*r[1]},HG=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),LA=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:s,elementsSelectable:r,updateNodeDimensions:i,onError:o}=mt(HG,wn),l=IG(e.onlyRenderVisibleElements),c=g.useRef(),u=g.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const m=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));i(m)});return c.current=d,d},[]);return g.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),P.createElement("div",{className:"react-flow__nodes",style:jv},l.map(d=>{var N,A,k;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",Br.error003(f)),f="default");const m=e.nodeTypes[f]||e.nodeTypes.default,h=!!(d.draggable||t&&typeof d.draggable>"u"),v=!!(d.selectable||r&&typeof d.selectable>"u"),y=!!(d.connectable||n&&typeof d.connectable>"u"),w=!!(d.focusable||s&&typeof d.focusable>"u"),x=e.nodeExtent?dv(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,p=(x==null?void 0:x.x)??0,b=(x==null?void 0:x.y)??0,j=FG({x:p,y:b,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return P.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||oe.Bottom,targetPosition:d.targetPosition||oe.Top,hidden:d.hidden,xPos:p,yPos:b,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:h,isSelectable:v,isConnectable:y,isFocusable:w,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((N=d[xt])==null?void 0:N.z)??0,isParent:!!((A=d[xt])!=null&&A.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((k=d[xt])!=null&&k.handleBounds)})}))};LA.displayName="NodeRenderer";var UG=g.memo(LA);const VG=(e,t,n)=>n===oe.Left?e-t:n===oe.Right?e+t:e,GG=(e,t,n)=>n===oe.Top?e-t:n===oe.Bottom?e+t:e,zw="react-flow__edgeupdater",Pw=({position:e,centerX:t,centerY:n,radius:s=10,onMouseDown:r,onMouseEnter:i,onMouseOut:o,type:l})=>P.createElement("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:o,className:mn([zw,`${zw}-${l}`]),cx:VG(t,s,e),cy:GG(n,s,e),r:s,stroke:"transparent",fill:"transparent"}),qG=()=>!0;var ho=e=>{const t=({id:n,className:s,type:r,data:i,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:v,labelBgBorderRadius:y,style:w,source:x,target:p,sourceX:b,sourceY:j,targetX:N,targetY:A,sourcePosition:k,targetPosition:C,elementsSelectable:S,hidden:E,sourceHandleId:T,targetHandleId:z,onContextMenu:R,onMouseEnter:_,onMouseMove:$,onMouseLeave:L,reconnectRadius:O,onReconnect:D,onReconnectStart:M,onReconnectEnd:I,markerEnd:B,markerStart:H,rfId:q,ariaLabel:Y,isFocusable:J,isReconnectable:le,pathOptions:te,interactionWidth:xe,disableKeyboardA11y:me})=>{const ye=g.useRef(null),[We,st]=g.useState(!1),[V,G]=g.useState(!1),K=Ht(),ie=g.useMemo(()=>`url('#${Bp(H,q)}')`,[H,q]),ne=g.useMemo(()=>`url('#${Bp(B,q)}')`,[B,q]);if(E)return null;const Q=zt=>{var Gn;const{edges:Ut,addSelectedEdges:Rs,unselectNodesAndEdges:cr,multiSelectionActive:ur}=K.getState(),gs=Ut.find(ei=>ei.id===n);gs&&(S&&(K.setState({nodesSelectionActive:!1}),gs.selected&&ur?(cr({nodes:[],edges:[gs]}),(Gn=ye.current)==null||Gn.blur()):Rs([n])),o&&o(zt,gs))},Se=Xl(n,K.getState,l),et=Xl(n,K.getState,R),At=Xl(n,K.getState,_),hn=Xl(n,K.getState,$),gn=Xl(n,K.getState,L),ms=(zt,Ut)=>{if(zt.button!==0)return;const{edges:Rs,isValidConnection:cr}=K.getState(),ur=Ut?p:x,gs=(Ut?z:T)||null,Gn=Ut?"target":"source",ei=cr||qG,fe=Ut,Re=Rs.find(Fe=>Fe.id===n);G(!0),M==null||M(zt,Re,Gn);const Ie=Fe=>{G(!1),I==null||I(Fe,Re,Gn)};mA({event:zt,handleId:gs,nodeId:ur,onConnect:Fe=>D==null?void 0:D(Re,Fe),isTarget:fe,getState:K.getState,setState:K.setState,isValidConnection:ei,edgeUpdaterType:Gn,onReconnectEnd:Ie})},ir=zt=>ms(zt,!0),or=zt=>ms(zt,!1),lr=()=>st(!0),hs=()=>st(!1),Qr=!S&&!o,Jr=zt=>{var Ut;if(!me&&tA.includes(zt.key)&&S){const{unselectNodesAndEdges:Rs,addSelectedEdges:cr,edges:ur}=K.getState();zt.key==="Escape"?((Ut=ye.current)==null||Ut.blur(),Rs({edges:[ur.find(Gn=>Gn.id===n)]})):cr([n])}};return P.createElement("g",{className:mn(["react-flow__edge",`react-flow__edge-${r}`,s,{selected:c,animated:u,inactive:Qr,updating:We}]),onClick:Q,onDoubleClick:Se,onContextMenu:et,onMouseEnter:At,onMouseMove:hn,onMouseLeave:gn,onKeyDown:J?Jr:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Y===null?void 0:Y||`Edge from ${x} to ${p}`,"aria-describedby":J?`${jA}-${q}`:void 0,ref:ye},!V&&P.createElement(e,{id:n,source:x,target:p,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:v,labelBgBorderRadius:y,data:i,style:w,sourceX:b,sourceY:j,targetX:N,targetY:A,sourcePosition:k,targetPosition:C,sourceHandleId:T,targetHandleId:z,markerStart:ie,markerEnd:ne,pathOptions:te,interactionWidth:xe}),le&&P.createElement(P.Fragment,null,(le==="source"||le===!0)&&P.createElement(Pw,{position:k,centerX:b,centerY:j,radius:O,onMouseDown:ir,onMouseEnter:lr,onMouseOut:hs,type:"source"}),(le==="target"||le===!0)&&P.createElement(Pw,{position:C,centerX:N,centerY:A,radius:O,onMouseDown:or,onMouseEnter:lr,onMouseOut:hs,type:"target"})))};return t.displayName="EdgeWrapper",g.memo(t)};function ZG(e){const t={default:ho(e.default||Of),straight:ho(e.bezier||gv),step:ho(e.step||hv),smoothstep:ho(e.step||lh),simplebezier:ho(e.simplebezier||mv)},n={},s=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,i)=>(r[i]=ho(e[i]||Of),r),n);return{...t,...s}}function $w(e,t,n=null){const s=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case oe.Top:return{x:s+i/2,y:r};case oe.Right:return{x:s+i,y:r+o/2};case oe.Bottom:return{x:s+i/2,y:r+o};case oe.Left:return{x:s,y:r+o/2}}}function Ow(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const YG=(e,t,n,s,r,i)=>{const o=$w(n,e,t),l=$w(i,s,r);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function XG({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:s,targetWidth:r,targetHeight:i,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+s,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=fv({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*m)>0}function Iw(e){var s,r,i,o,l;const t=((s=e==null?void 0:e[xt])==null?void 0:s.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const WG=[{level:0,isMaxLevel:!0,edges:[]}];function KG(e,t,n=!1){let s=-1;const r=e.reduce((o,l)=>{var d,f;const c=ts(l.zIndex);let u=c?l.zIndex:0;if(n){const m=t.get(l.target),h=t.get(l.source),v=l.selected||(m==null?void 0:m.selected)||(h==null?void 0:h.selected),y=Math.max(((d=h==null?void 0:h[xt])==null?void 0:d.z)||0,((f=m==null?void 0:m[xt])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(v?y:0)}return o[u]?o[u].push(l):o[u]=[l],s=u>s?u:s,o},{}),i=Object.entries(r).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===s}});return i.length===0?WG:i}function QG(e,t,n){const s=mt(g.useCallback(r=>e?r.edges.filter(i=>{const o=t.get(i.source),l=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&XG({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return KG(s,t,n)}const JG=({color:e="none",strokeWidth:t=1})=>P.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),eq=({color:e="none",strokeWidth:t=1})=>P.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Bw={[$f.Arrow]:JG,[$f.ArrowClosed]:eq};function tq(e){const t=Ht();return g.useMemo(()=>{var r,i;return Object.prototype.hasOwnProperty.call(Bw,e)?Bw[e]:((i=(r=t.getState()).onError)==null||i.call(r,"009",Br.error009(e)),null)},[e])}const nq=({id:e,type:t,color:n,width:s=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=tq(t);return c?P.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${s}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},P.createElement(c,{color:n,strokeWidth:o})):null},sq=({defaultColor:e,rfId:t})=>n=>{const s=[];return n.edges.reduce((r,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=Bp(o,t);s.includes(l)||(r.push({id:l,color:o.color||e,...o}),s.push(l))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))},zA=({defaultColor:e,rfId:t})=>{const n=mt(g.useCallback(sq({defaultColor:e,rfId:t}),[e,t]),(s,r)=>!(s.length!==r.length||s.some((i,o)=>i.id!==r[o].id)));return P.createElement("defs",null,n.map(s=>P.createElement(nq,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};zA.displayName="MarkerDefinitions";var rq=g.memo(zA);const aq=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),PA=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:s,edgeTypes:r,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:v,reconnectRadius:y,children:w,disableKeyboardA11y:x})=>{const{edgesFocusable:p,edgesUpdatable:b,elementsSelectable:j,width:N,height:A,connectionMode:k,nodeInternals:C,onError:S}=mt(aq,wn),E=QG(t,C,n);return N?P.createElement(P.Fragment,null,E.map(({level:T,edges:z,isMaxLevel:R})=>P.createElement("svg",{key:T,style:{zIndex:T},width:N,height:A,className:"react-flow__edges react-flow__container"},R&&P.createElement(rq,{defaultColor:e,rfId:s}),P.createElement("g",null,z.map(_=>{const[$,L,O]=Iw(C.get(_.source)),[D,M,I]=Iw(C.get(_.target));if(!O||!I)return null;let B=_.type||"default";r[B]||(S==null||S("011",Br.error011(B)),B="default");const H=r[B]||r.default,q=k===Ri.Strict?M.target:(M.target??[]).concat(M.source??[]),Y=Ow(L.source,_.sourceHandle),J=Ow(q,_.targetHandle),le=(Y==null?void 0:Y.position)||oe.Bottom,te=(J==null?void 0:J.position)||oe.Top,xe=!!(_.focusable||p&&typeof _.focusable>"u"),me=_.reconnectable||_.updatable,ye=typeof m<"u"&&(me||b&&typeof me>"u");if(!Y||!J)return S==null||S("008",Br.error008(Y,_)),null;const{sourceX:We,sourceY:st,targetX:V,targetY:G}=YG($,Y,le,D,J,te);return P.createElement(H,{key:_.id,id:_.id,className:mn([_.className,i]),type:B,data:_.data,selected:!!_.selected,animated:!!_.animated,hidden:!!_.hidden,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,style:_.style,source:_.source,target:_.target,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerEnd:_.markerEnd,markerStart:_.markerStart,sourceX:We,sourceY:st,targetX:V,targetY:G,sourcePosition:le,targetPosition:te,elementsSelectable:j,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:v,reconnectRadius:y,rfId:s,ariaLabel:_.ariaLabel,isFocusable:xe,isReconnectable:ye,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth,disableKeyboardA11y:x})})))),w):null};PA.displayName="EdgeRenderer";var iq=g.memo(PA);const oq=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function lq({children:e}){const t=mt(oq);return P.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function cq(e){const t=wv(),n=g.useRef(!1);g.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const uq={[oe.Left]:oe.Right,[oe.Right]:oe.Left,[oe.Top]:oe.Bottom,[oe.Bottom]:oe.Top},$A=({nodeId:e,handleType:t,style:n,type:s=fa.Bezier,CustomComponent:r,connectionStatus:i})=>{var A,k,C;const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=mt(g.useCallback(S=>({fromNode:S.nodeInternals.get(e),handleId:S.connectionHandleId,toX:(S.connectionPosition.x-S.transform[0])/S.transform[2],toY:(S.connectionPosition.y-S.transform[1])/S.transform[2],connectionMode:S.connectionMode}),[e]),wn),f=(A=o==null?void 0:o[xt])==null?void 0:A.handleBounds;let m=f==null?void 0:f[t];if(d===Ri.Loose&&(m=m||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!m)return null;const h=l?m.find(S=>S.id===l):m[0],v=h?h.x+h.width/2:(o.width??0)/2,y=h?h.y+h.height/2:o.height??0,w=(((k=o.positionAbsolute)==null?void 0:k.x)??0)+v,x=(((C=o.positionAbsolute)==null?void 0:C.y)??0)+y,p=h==null?void 0:h.position,b=p?uq[p]:null;if(!p||!b)return null;if(r)return P.createElement(r,{connectionLineType:s,connectionLineStyle:n,fromNode:o,fromHandle:h,fromX:w,fromY:x,toX:c,toY:u,fromPosition:p,toPosition:b,connectionStatus:i});let j="";const N={sourceX:w,sourceY:x,sourcePosition:p,targetX:c,targetY:u,targetPosition:b};return s===fa.Bezier?[j]=iA(N):s===fa.Step?[j]=Ip({...N,borderRadius:0}):s===fa.SmoothStep?[j]=Ip(N):s===fa.SimpleBezier?[j]=aA(N):j=`M${w},${x} ${c},${u}`,P.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};$A.displayName="ConnectionLine";const dq=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function fq({containerStyle:e,style:t,type:n,component:s}){const{nodeId:r,handleType:i,nodesConnectable:o,width:l,height:c,connectionStatus:u}=mt(dq,wn);return!(r&&i&&l&&o)?null:P.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},P.createElement("g",{className:mn(["react-flow__connection",u])},P.createElement($A,{nodeId:r,handleType:i,style:t,type:n,CustomComponent:s,connectionStatus:u})))}function Fw(e,t){return g.useRef(null),Ht(),g.useMemo(()=>t(e),[e])}const OA=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:s,onMoveEnd:r,onInit:i,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:w,connectionLineType:x,connectionLineStyle:p,connectionLineComponent:b,connectionLineContainerStyle:j,selectionKeyCode:N,selectionOnDrag:A,selectionMode:k,multiSelectionKeyCode:C,panActivationKeyCode:S,zoomActivationKeyCode:E,deleteKeyCode:T,onlyRenderVisibleElements:z,elementsSelectable:R,selectNodesOnDrag:_,defaultViewport:$,translateExtent:L,minZoom:O,maxZoom:D,preventScrolling:M,defaultMarkerColor:I,zoomOnScroll:B,zoomOnPinch:H,panOnScroll:q,panOnScrollSpeed:Y,panOnScrollMode:J,zoomOnDoubleClick:le,panOnDrag:te,onPaneClick:xe,onPaneMouseEnter:me,onPaneMouseMove:ye,onPaneMouseLeave:We,onPaneScroll:st,onPaneContextMenu:V,onEdgeContextMenu:G,onEdgeMouseEnter:K,onEdgeMouseMove:ie,onEdgeMouseLeave:ne,onReconnect:Q,onReconnectStart:Se,onReconnectEnd:et,reconnectRadius:At,noDragClassName:hn,noWheelClassName:gn,noPanClassName:ms,elevateEdgesOnSelect:ir,disableKeyboardA11y:or,nodeOrigin:lr,nodeExtent:hs,rfId:Qr})=>{const Jr=Fw(e,BG),zt=Fw(t,ZG);return cq(i),P.createElement(OG,{onPaneClick:xe,onPaneMouseEnter:me,onPaneMouseMove:ye,onPaneMouseLeave:We,onPaneContextMenu:V,onPaneScroll:st,deleteKeyCode:T,selectionKeyCode:N,selectionOnDrag:A,selectionMode:k,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:C,panActivationKeyCode:S,zoomActivationKeyCode:E,elementsSelectable:R,onMove:n,onMoveStart:s,onMoveEnd:r,zoomOnScroll:B,zoomOnPinch:H,zoomOnDoubleClick:le,panOnScroll:q,panOnScrollSpeed:Y,panOnScrollMode:J,panOnDrag:te,defaultViewport:$,translateExtent:L,minZoom:O,maxZoom:D,onSelectionContextMenu:v,preventScrolling:M,noDragClassName:hn,noWheelClassName:gn,noPanClassName:ms,disableKeyboardA11y:or},P.createElement(lq,null,P.createElement(iq,{edgeTypes:zt,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:z,onEdgeContextMenu:G,onEdgeMouseEnter:K,onEdgeMouseMove:ie,onEdgeMouseLeave:ne,onReconnect:Q,onReconnectStart:Se,onReconnectEnd:et,reconnectRadius:At,defaultMarkerColor:I,noPanClassName:ms,elevateEdgesOnSelect:!!ir,disableKeyboardA11y:or,rfId:Qr},P.createElement(fq,{style:p,type:x,component:b,containerStyle:j})),P.createElement("div",{className:"react-flow__edgelabel-renderer"}),P.createElement(UG,{nodeTypes:Jr,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,selectNodesOnDrag:_,onlyRenderVisibleElements:z,noPanClassName:ms,noDragClassName:hn,disableKeyboardA11y:or,nodeOrigin:lr,nodeExtent:hs,rfId:Qr})))};OA.displayName="GraphView";var mq=g.memo(OA);const Vp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],na={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Vp,nodeExtent:Vp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ri.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:HV,isValidConnection:void 0},hq=()=>t7((e,t)=>({...na,setNodes:n=>{const{nodeInternals:s,nodeOrigin:r,elevateNodesOnSelect:i}=t();e({nodeInternals:og(n,s,r,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:s={}}=t();e({edges:n.map(r=>({...s,...r}))})},setDefaultNodesAndEdges:(n,s)=>{const r=typeof n<"u",i=typeof s<"u",o=r?og(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?s:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:s,nodeInternals:r,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((y,w)=>{const x=r.get(w.id);if(x!=null&&x.hidden)r.set(x.id,{...x,[xt]:{...x[xt],handleBounds:void 0}});else if(x){const p=uv(w.nodeElement);!!(p.width&&p.height&&(x.width!==p.width||x.height!==p.height||w.forceUpdate))&&(r.set(x.id,{...x,[xt]:{...x[xt],handleBounds:{source:Lw(".source",w.nodeElement,m,u),target:Lw(".target",w.nodeElement,m,u)}},...p}),y.push({id:x.id,type:"dimensions",dimensions:p}))}return y},[]);SA(r,u);const v=o||i&&!o&&kA(t,{initial:!0,...l});e({nodeInternals:new Map(r),fitViewOnInitDone:v}),(h==null?void 0:h.length)>0&&(s==null||s(h))},updateNodePositions:(n,s=!0,r=!1)=>{const{triggerNodeChanges:i}=t(),o=n.map(l=>{const c={id:l.id,type:"position",dragging:r};return s&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});i(o)},triggerNodeChanges:n=>{const{onNodesChange:s,nodeInternals:r,hasDefaultNodes:i,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(i){const u=EA(n,l()),d=og(u,r,o,c);e({nodeInternals:d})}s==null||s(n)}},addSelectedNodes:n=>{const{multiSelectionActive:s,edges:r,getNodes:i}=t();let o,l=null;s?o=n.map(c=>ca(c,!0)):(o=jo(i(),n),l=jo(r,[])),xd({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:s,edges:r,getNodes:i}=t();let o,l=null;s?o=n.map(c=>ca(c,!0)):(o=jo(r,n),l=jo(i(),[])),xd({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:s}={})=>{const{edges:r,getNodes:i}=t(),o=n||i(),l=s||r,c=o.map(d=>(d.selected=!1,ca(d.id,!1))),u=l.map(d=>ca(d.id,!1));xd({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:s,maxZoom:r}=t();s==null||s.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:s,minZoom:r}=t();s==null||s.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var s;(s=t().d3Zoom)==null||s.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:s}=t(),i=s().filter(l=>l.selected).map(l=>ca(l.id,!1)),o=n.filter(l=>l.selected).map(l=>ca(l.id,!1));xd({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:s}=t();s.forEach(r=>{r.positionAbsolute=dv(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(s)})},panBy:n=>{const{transform:s,width:r,height:i,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!n.x&&!n.y)return!1;const u=ka.translate(s[0]+n.x,s[1]+n.y).scale(s[2]),d=[[0,0],[r,i]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(l,f),s[0]!==f.x||s[1]!==f.y||s[2]!==f.k},cancelConnection:()=>e({connectionNodeId:na.connectionNodeId,connectionHandleId:na.connectionHandleId,connectionHandleType:na.connectionHandleType,connectionStatus:na.connectionStatus,connectionStartHandle:na.connectionStartHandle,connectionEndHandle:na.connectionEndHandle}),reset:()=>e({...na})}),Object.is),IA=({children:e})=>{const t=g.useRef(null);return t.current||(t.current=hq()),P.createElement(LV,{value:t.current},e)};IA.displayName="ReactFlowProvider";const BA=({children:e})=>g.useContext(oh)?P.createElement(P.Fragment,null,e):P.createElement(IA,null,e);BA.displayName="ReactFlowWrapper";const gq={input:xA,default:Hp,output:yA,group:bv},pq={default:Of,straight:gv,step:hv,smoothstep:lh,simplebezier:mv},xq=[0,0],vq=[15,15],yq={x:0,y:0,zoom:1},bq={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Nv=g.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,className:r,nodeTypes:i=gq,edgeTypes:o=pq,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:h,onConnectStart:v,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:p,onNodeMouseMove:b,onNodeMouseLeave:j,onNodeContextMenu:N,onNodeDoubleClick:A,onNodeDragStart:k,onNodeDrag:C,onNodeDragStop:S,onNodesDelete:E,onEdgesDelete:T,onSelectionChange:z,onSelectionDragStart:R,onSelectionDrag:_,onSelectionDragStop:$,onSelectionContextMenu:L,onSelectionStart:O,onSelectionEnd:D,connectionMode:M=Ri.Strict,connectionLineType:I=fa.Bezier,connectionLineStyle:B,connectionLineComponent:H,connectionLineContainerStyle:q,deleteKeyCode:Y="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:le=!1,selectionMode:te=Yc.Full,panActivationKeyCode:xe="Space",multiSelectionKeyCode:me=Pf()?"Meta":"Control",zoomActivationKeyCode:ye=Pf()?"Meta":"Control",snapToGrid:We=!1,snapGrid:st=vq,onlyRenderVisibleElements:V=!1,selectNodesOnDrag:G=!0,nodesDraggable:K,nodesConnectable:ie,nodesFocusable:ne,nodeOrigin:Q=xq,edgesFocusable:Se,edgesUpdatable:et,elementsSelectable:At,defaultViewport:hn=yq,minZoom:gn=.5,maxZoom:ms=2,translateExtent:ir=Vp,preventScrolling:or=!0,nodeExtent:lr,defaultMarkerColor:hs="#b1b1b7",zoomOnScroll:Qr=!0,zoomOnPinch:Jr=!0,panOnScroll:zt=!1,panOnScrollSpeed:Ut=.5,panOnScrollMode:Rs=pi.Free,zoomOnDoubleClick:cr=!0,panOnDrag:ur=!0,onPaneClick:gs,onPaneMouseEnter:Gn,onPaneMouseMove:ei,onPaneMouseLeave:fe,onPaneScroll:Re,onPaneContextMenu:Ie,children:De,onEdgeContextMenu:Fe,onEdgeDoubleClick:Qt,onEdgeMouseEnter:Vt,onEdgeMouseMove:Ds,onEdgeMouseLeave:En,onEdgeUpdate:dr,onEdgeUpdateStart:Ls,onEdgeUpdateEnd:qn,onReconnect:ro,onReconnectStart:Wu,onReconnectEnd:W4,reconnectRadius:K4=10,edgeUpdaterRadius:Q4=10,onNodesChange:J4,onEdgesChange:eR,noDragClassName:tR="nodrag",noWheelClassName:nR="nowheel",noPanClassName:Ly="nopan",fitView:sR=!1,fitViewOptions:rR,connectOnClick:aR=!0,attributionPosition:iR,proOptions:oR,defaultEdgeOptions:lR,elevateNodesOnSelect:cR=!0,elevateEdgesOnSelect:uR=!1,disableKeyboardA11y:zy=!1,autoPanOnConnect:dR=!0,autoPanOnNodeDrag:fR=!0,connectionRadius:mR=20,isValidConnection:hR,onError:gR,style:pR,id:Py,nodeDragThreshold:xR,...vR},yR)=>{const Th=Py||"1";return P.createElement("div",{...vR,style:{...pR,...bq},ref:yR,className:mn(["react-flow",r]),"data-testid":"rf__wrapper",id:Py},P.createElement(BA,null,P.createElement(mq,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:p,onNodeMouseMove:b,onNodeMouseLeave:j,onNodeContextMenu:N,onNodeDoubleClick:A,nodeTypes:i,edgeTypes:o,connectionLineType:I,connectionLineStyle:B,connectionLineComponent:H,connectionLineContainerStyle:q,selectionKeyCode:J,selectionOnDrag:le,selectionMode:te,deleteKeyCode:Y,multiSelectionKeyCode:me,panActivationKeyCode:xe,zoomActivationKeyCode:ye,onlyRenderVisibleElements:V,selectNodesOnDrag:G,defaultViewport:hn,translateExtent:ir,minZoom:gn,maxZoom:ms,preventScrolling:or,zoomOnScroll:Qr,zoomOnPinch:Jr,zoomOnDoubleClick:cr,panOnScroll:zt,panOnScrollSpeed:Ut,panOnScrollMode:Rs,panOnDrag:ur,onPaneClick:gs,onPaneMouseEnter:Gn,onPaneMouseMove:ei,onPaneMouseLeave:fe,onPaneScroll:Re,onPaneContextMenu:Ie,onSelectionContextMenu:L,onSelectionStart:O,onSelectionEnd:D,onEdgeContextMenu:Fe,onEdgeDoubleClick:Qt,onEdgeMouseEnter:Vt,onEdgeMouseMove:Ds,onEdgeMouseLeave:En,onReconnect:ro??dr,onReconnectStart:Wu??Ls,onReconnectEnd:W4??qn,reconnectRadius:K4??Q4,defaultMarkerColor:hs,noDragClassName:tR,noWheelClassName:nR,noPanClassName:Ly,elevateEdgesOnSelect:uR,rfId:Th,disableKeyboardA11y:zy,nodeOrigin:Q,nodeExtent:lr}),P.createElement(uG,{nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:h,onConnectStart:v,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:K,nodesConnectable:ie,nodesFocusable:ne,edgesFocusable:Se,edgesUpdatable:et,elementsSelectable:At,elevateNodesOnSelect:cR,minZoom:gn,maxZoom:ms,nodeExtent:lr,onNodesChange:J4,onEdgesChange:eR,snapToGrid:We,snapGrid:st,connectionMode:M,translateExtent:ir,connectOnClick:aR,defaultEdgeOptions:lR,fitView:sR,fitViewOptions:rR,onNodesDelete:E,onEdgesDelete:T,onNodeDragStart:k,onNodeDrag:C,onNodeDragStop:S,onSelectionDrag:_,onSelectionDragStart:R,onSelectionDragStop:$,noPanClassName:Ly,nodeOrigin:Q,rfId:Th,autoPanOnConnect:dR,autoPanOnNodeDrag:fR,onError:gR,connectionRadius:mR,isValidConnection:hR,nodeDragThreshold:xR}),P.createElement(lG,{onSelectionChange:z}),De,P.createElement(PV,{proOptions:oR,position:iR}),P.createElement(gG,{rfId:Th,disableKeyboardA11y:zy})))});Nv.displayName="ReactFlow";function FA(e){return t=>{const[n,s]=g.useState(t),r=g.useCallback(i=>s(o=>e(i,o)),[]);return[n,s,r]}}const HA=FA(EA),UA=FA(TG);function wq(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}function jq(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},P.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Nq(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},P.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Sq(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},P.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function kq(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},P.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Cq(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},P.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const fc=({children:e,className:t,...n})=>P.createElement("button",{type:"button",className:mn(["react-flow__controls-button",t]),...n},e);fc.displayName="ControlButton";const Eq=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),VA=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:s=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const m=Ht(),[h,v]=g.useState(!1),{isInteractive:y,minZoomReached:w,maxZoomReached:x}=mt(Eq,wq),{zoomIn:p,zoomOut:b,fitView:j}=wv();if(g.useEffect(()=>{v(!0)},[]),!h)return null;const N=()=>{p(),i==null||i()},A=()=>{b(),o==null||o()},k=()=>{j(r),l==null||l()},C=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c==null||c(!y)};return P.createElement(QE,{className:mn(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&P.createElement(P.Fragment,null,P.createElement(fc,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},P.createElement(jq,null)),P.createElement(fc,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},P.createElement(Nq,null))),n&&P.createElement(fc,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},P.createElement(Sq,null)),s&&P.createElement(fc,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity"},y?P.createElement(Cq,null):P.createElement(kq,null)),d)};VA.displayName="Controls";var GA=g.memo(VA);function Aq(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var Ns;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ns||(Ns={}));function Tq({color:e,dimensions:t,lineWidth:n}){return P.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function _q({color:e,radius:t}){return P.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Mq={[Ns.Dots]:"#91919a",[Ns.Lines]:"#eee",[Ns.Cross]:"#e2e2e2"},Rq={[Ns.Dots]:1,[Ns.Lines]:1,[Ns.Cross]:6},Dq=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function qA({id:e,variant:t=Ns.Dots,gap:n=20,size:s,lineWidth:r=1,offset:i=2,color:o,style:l,className:c}){const u=g.useRef(null),{transform:d,patternId:f}=mt(Dq,Aq),m=o||Mq[t],h=s||Rq[t],v=t===Ns.Dots,y=t===Ns.Cross,w=Array.isArray(n)?n:[n,n],x=[w[0]*d[2]||1,w[1]*d[2]||1],p=h*d[2],b=y?[p,p]:x,j=v?[p/i,p/i]:[b[0]/i,b[1]/i];return P.createElement("svg",{className:mn(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},P.createElement("pattern",{id:f+e,x:d[0]%x[0],y:d[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},v?P.createElement(_q,{color:m,radius:p/i}):P.createElement(Tq,{dimensions:b,color:m,lineWidth:r})),P.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}qA.displayName="Background";var ZA=g.memo(qA);function Lq(e){if(!e||typeof e!="object")throw new Error("Invalid perk tree data");const t=e;if(!t.treeId||!t.treeName||!t.perks||!Array.isArray(t.perks))throw new Error("Invalid perk tree structure");return t}function YA(e){try{return{success:!0,data:Lq(e)}}catch(t){return{success:!1,error:t}}}const zq={nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120,fallbackSpacing:100};async function XA(e){try{const t=Wt(`data/perk-positions/${e}-positions.json`),n=await fetch(t);return n.ok?await n.json():null}catch{return null}}function Pq(e,t){const n=new Map;e.forEach(o=>{const l=t==null?void 0:t.positions.find(c=>c.perkId===o.edid);n.set(o.edid,{perk:o,depth:-1,children:o.connections.children,parents:o.connections.parents,savedPosition:l})});const r=e.filter(o=>o.connections.parents.length===0).map(o=>({id:o.edid,depth:0})),i=new Set;for(;r.length>0;){const{id:o,depth:l}=r.shift();if(i.has(o))continue;i.add(o);const c=n.get(o);c&&((c.depth===-1||l<c.depth)&&(c.depth=l),c.children.forEach(u=>{n.has(u)&&!i.has(u)&&r.push({id:u,depth:l+1})}))}return n}function $q(e,t){const n=new Map,s=new Map;e.forEach(i=>{const o=i.depth;s.has(o)||s.set(o,[]),s.get(o).push(i)});const r=Math.max(...s.keys());return s.forEach((i,o)=>{const l=t.padding+(r-o)*t.verticalSpacing,c=(i.length-1)*t.horizontalSpacing,u=t.padding+(t.gridScaleX-c)/2;i.forEach((d,f)=>{const m=u+f*t.horizontalSpacing;n.set(d.perk.edid,{x:m,y:l})})}),n}function Oq(e,t,n){t.positions.forEach(s=>{const r=e.get(s.perkId);r&&(r.savedPosition=s,r.calculatedPosition={x:s.x,y:s.y})})}function Iq(e,t,n={}){const s={...zq,...n},r=Pq(e.perks,t);t&&Oq(r,t);const i=$q(r,s),o=new Map;return r.forEach((l,c)=>{if(l.calculatedPosition)o.set(c,l.calculatedPosition);else{const u=i.get(c);u?o.set(c,u):o.set(c,{x:s.padding,y:s.padding})}}),o}function Bq(e,t){const n=Array.from(t.entries()).map(([s,r])=>({perkId:s,x:r.x,y:r.y,gridX:r.gridX,gridY:r.gridY,horizontal:r.horizontal,vertical:r.vertical}));return{treeId:e.treeId,treeName:e.treeName,positions:n,version:"1.0.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}function Hw(e,t){const n=new Map;return t.positions.forEach(s=>{n.set(s.perkId,{x:s.x,y:s.y,gridX:s.gridX,gridY:s.gridY,horizontal:s.horizontal,vertical:s.vertical})}),n}function Fq(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`${e.treeId}-positions.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}const Hq=({data:e,selected:t,onTogglePerk:n,onRankChange:s})=>{var u,d,f,m,h;const r=e.totalRanks,i=r>1?(e.currentRank||0)>0:e.selected||t,o=v=>{if(v.preventDefault(),v.stopPropagation(),(e.totalRanks||1)>1){const w=e.currentRank||0,x=e.totalRanks||1,p=w>=x?0:w+1;s&&s(e.edid,p)}else n&&n(e.edid)},l=()=>{const v={padding:"8px 12px",borderRadius:"6px",border:"2px solid",fontSize:"12px",fontWeight:"500",minWidth:"140px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"};return e.hasNoPosition?{...v,borderColor:"#ef4444",borderStyle:"dashed",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 1px rgba(239, 68, 68, 0.3)"}:i?{...v,borderColor:"#d4af37",backgroundColor:"rgba(212, 175, 55, 0.15)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 2px rgba(212, 175, 55, 0.4), 0 2px 4px rgba(212, 175, 55, 0.2)",transform:"scale(1.02)"}:e.isRoot?{...v,borderColor:"hsl(var(--border))",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"}:{...v,borderColor:"hsl(var(--border))"}},c=((d=(u=e.ranks[0])==null?void 0:u.description)==null?void 0:d.base)||"";return a.jsxs(XC,{children:[a.jsx(WC,{asChild:!0,children:a.jsxs("div",{style:l(),onClick:o,onMouseDown:v=>v.stopPropagation(),children:[!e.isRoot&&a.jsx(fl,{type:"target",position:oe.Bottom}),a.jsx("div",{className:"font-medium",children:e.name}),r>1&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.currentRank||0,"/",r," ranks"]}),e.hasChildren&&a.jsx(fl,{type:"source",position:oe.Top})]})}),a.jsx($F,{children:a.jsx(sv,{className:"w-80",style:{zIndex:Nt.TOOLTIP,backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:e.name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:c}),typeof((h=(m=(f=e.ranks[0])==null?void 0:f.prerequisites)==null?void 0:m.skillLevel)==null?void 0:h.level)=="number"&&e.ranks[0].prerequisites.skillLevel.level>0&&a.jsxs("div",{className:"text-xs text-blue-700 font-medium pt-1",children:["Min. Level: ",e.ranks[0].prerequisites.skillLevel.level]}),r>1&&a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[a.jsx("strong",{children:"Ranks:"})," ",e.currentRank||0,"/",r,a.jsx("br",{}),a.jsx("em",{children:"Click to cycle through ranks"})]})]})})})]})},WA=g.memo(Hq);function dg({skills:e,onSelect:t,placeholder:n="Search skills...",className:s="",disabled:r=!1}){const[i,o]=g.useState(""),[l,c]=g.useState(!1),u=Xa("(max-width: 640px)"),d=g.useRef(null),f=g.useMemo(()=>{if(!i.trim())return e;const p=i.toLowerCase();return e.filter(b=>b.name.toLowerCase().includes(p)||b.description.toLowerCase().includes(p)||b.category.toLowerCase().includes(p)||b.keyAbilities.some(j=>j.toLowerCase().includes(p))||b.metaTags.some(j=>j.toLowerCase().includes(p)))},[e,i]),m=g.useMemo(()=>f.map(p=>{var b;return{id:p.edid,label:p.name,description:p.description,category:p.category,badge:p.category&&a.jsx(Z,{variant:"outline",className:"text-xs",children:p.category}),metadata:{originalSkill:p,keyAbilitiesCount:((b=p.keyAbilities)==null?void 0:b.length)||0,scaling:p.scaling}}}),[f]),h=p=>{const b=e.find(j=>j.edid===p.id);b&&(t(b),c(!1),o(""))},v=p=>{o(p.target.value),setTimeout(()=>{var b;(b=d.current)==null||b.focus()},0)},y=(p,b)=>{var j,N;return a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(th,{skillName:p.label,size:"sm",className:"flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:p.label}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[p.badge&&a.jsx("div",{className:"flex-shrink-0",children:p.badge}),((j=p.metadata)==null?void 0:j.keyAbilitiesCount)&&p.metadata.keyAbilitiesCount>0&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.metadata.keyAbilitiesCount," ability",p.metadata.keyAbilitiesCount!==1?"s":""]})]}),p.description&&a.jsx(Le,{text:p.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"}),((N=p.metadata)==null?void 0:N.scaling)&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Scaling:"})," ",p.metadata.scaling]})]})]})},w=()=>a.jsxs(is,{open:l,onOpenChange:c,children:[a.jsx(Va,{asChild:!0,children:a.jsxs(U,{variant:"outline",className:F("w-full justify-between text-left font-normal",!i&&"text-muted-foreground",s),disabled:r,children:[a.jsx("span",{children:i||n}),a.jsx(Je,{className:"h-4 w-4 opacity-50"})]})}),a.jsxs(Fn,{side:"bottom",className:"h-[85vh] max-h-[85vh] p-0 flex flex-col",onOpenAutoFocus:p=>p.preventDefault(),children:[a.jsxs(os,{className:"p-4 border-b flex-shrink-0",children:[a.jsx(ls,{children:"Select Skill"}),a.jsx(Zr,{children:"Choose a skill from the options below"})]}),a.jsx("div",{className:"p-4 border-b flex-shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Dt,{ref:d,placeholder:"Search skills...",value:i,onChange:v,className:"pl-10"}),i&&a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>o(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",children:a.jsx(Me,{className:"h-3 w-3"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:m.length===0?a.jsxs("div",{className:"text-center py-8 px-4",children:[a.jsx("p",{className:"text-muted-foreground",children:"No skills found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search"})]}):a.jsx("div",{className:"p-4 space-y-3",children:m.map(p=>a.jsx(U,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:()=>h(p),children:a.jsx("div",{className:"w-full",children:y(p)})},p.id))})})]})]}),x=()=>a.jsx(Cu,{options:m,onSelect:h,placeholder:n,className:s,disabled:r,renderOption:y,emptyMessage:"No skills found",searchQuery:i,onSearchQueryChange:o});return u?a.jsx(w,{}):a.jsx(x,{})}function Uq(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const KA=P.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Ru=()=>{const e=P.useContext(KA);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};Uq(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Vq(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function Gq(){return Sv(/^Mac/)}function qq(){return Sv(/^iPhone/)}function Uw(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Zq(){return Sv(/^iPad/)||Gq()&&navigator.maxTouchPoints>1}function QA(){return qq()||Zq()}function Sv(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const Yq=24,Xq=typeof window<"u"?g.useLayoutEffect:g.useEffect;function Vw(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const fg=typeof document<"u"&&window.visualViewport;function Gw(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function JA(e){for(Gw(e)&&(e=e.parentElement);e&&!Gw(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const Wq=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let yd=0,mg;function Kq(e={}){let{isDisabled:t}=e;Xq(()=>{if(!t)return yd++,yd===1&&QA()&&(mg=Qq()),()=>{yd--,yd===0&&(mg==null||mg())}},[t])}function Qq(){let e,t=0,n=f=>{e=JA(f.target),!(e===document.documentElement&&e===document.body)&&(t=f.changedTouches[0].pageY)},s=f=>{if(!e||e===document.documentElement||e===document.body){f.preventDefault();return}let m=f.changedTouches[0].pageY,h=e.scrollTop,v=e.scrollHeight-e.clientHeight;v!==0&&((h<=0&&m>t||h>=v&&m<t)&&f.preventDefault(),t=m)},r=f=>{let m=f.target;Gp(m)&&m!==document.activeElement&&(f.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},i=f=>{let m=f.target;Gp(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",fg&&(fg.height<window.innerHeight?requestAnimationFrame(()=>{qw(m)}):fg.addEventListener("resize",()=>qw(m),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=Vw(Jq(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=Vw(Ql(document,"touchstart",n,{passive:!1,capture:!0}),Ql(document,"touchmove",s,{passive:!1,capture:!0}),Ql(document,"touchend",r,{passive:!1,capture:!0}),Ql(document,"focus",i,!0),Ql(window,"scroll",o));return()=>{u(),d(),window.scrollTo(l,c)}}function Jq(e,t,n){let s=e.style[t];return e.style[t]=n,()=>{e.style[t]=s}}function Ql(e,t,n,s){return e.addEventListener(t,n,s),()=>{e.removeEventListener(t,n,s)}}function qw(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=JA(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let s=n.getBoundingClientRect().top,r=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom;const o=n.getBoundingClientRect().bottom+Yq;i>o&&(n.scrollTop+=r-s)}e=n.parentElement}}function Gp(e){return e instanceof HTMLInputElement&&!Wq.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function eZ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function tZ(...e){return t=>e.forEach(n=>eZ(n,t))}function eT(...e){return g.useCallback(tZ(...e),e)}const tT=new WeakMap;function _t(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let s={};Object.entries(t).forEach(([r,i])=>{if(r.startsWith("--")){e.style.setProperty(r,i);return}s[r]=e.style[r],e.style[r]=i}),!n&&tT.set(e,s)}function nZ(e,t){if(!e||!(e instanceof HTMLElement))return;let n=tT.get(e);n&&(e.style[t]=n[t])}const St=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function bd(e,t){if(!e)return null;const n=window.getComputedStyle(e),s=n.transform||n.webkitTransform||n.mozTransform;let r=s.match(/^matrix3d\((.+)\)$/);return r?parseFloat(r[1].split(", ")[St(t)?13:12]):(r=s.match(/^matrix\((.+)\)$/),r?parseFloat(r[1].split(", ")[St(t)?5:4]):null)}function sZ(e){return 8*(Math.log(e+1)-2)}function hg(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function rZ(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const dt={DURATION:.5,EASE:[.32,.72,0,1]},nT=.4,aZ=.25,iZ=100,sT=8,si=16,qp=26,gg="vaul-dragging";function rT(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),P.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function oZ({defaultProp:e,onChange:t}){const n=P.useState(e),[s]=n,r=P.useRef(s),i=rT(t);return P.useEffect(()=>{r.current!==s&&(i(s),r.current=s)},[s,r,i]),n}function aT({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,r]=oZ({defaultProp:t,onChange:n}),i=e!==void 0,o=i?e:s,l=rT(n),c=P.useCallback(u=>{if(i){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else r(u)},[i,e,r,l]);return[o,c]}function lZ({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:s,overlayRef:r,fadeFromIndex:i,onSnapPointChange:o,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[d,f]=aT({prop:e,defaultProp:n==null?void 0:n[0],onChange:t}),[m,h]=P.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);P.useEffect(()=>{function k(){h({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const v=P.useMemo(()=>d===(n==null?void 0:n[n.length-1])||null,[n,d]),y=P.useMemo(()=>{var k;return(k=n==null?void 0:n.findIndex(C=>C===d))!=null?k:null},[n,d]),w=n&&n.length>0&&(i||i===0)&&!Number.isNaN(i)&&n[i]===d||!n,x=P.useMemo(()=>{const k=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var C;return(C=n==null?void 0:n.map(S=>{const E=typeof S=="string";let T=0;if(E&&(T=parseInt(S,10)),St(l)){const R=E?T:m?S*k.height:0;return m?l==="bottom"?k.height-R:-k.height+R:R}const z=E?T:m?S*k.width:0;return m?l==="right"?k.width-z:-k.width+z:z}))!=null?C:[]},[n,m,c]),p=P.useMemo(()=>y!==null?x==null?void 0:x[y]:null,[x,y]),b=P.useCallback(k=>{var C;const S=(C=x==null?void 0:x.findIndex(E=>E===k))!=null?C:null;o(S),_t(s.current,{transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,transform:St(l)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`}),x&&S!==x.length-1&&i!==void 0&&S!==i&&S<i?_t(r.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,opacity:"0"}):_t(r.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,opacity:"1"}),f(n==null?void 0:n[Math.max(S,0)])},[s.current,n,x,i,r,f]);P.useEffect(()=>{if(d||e){var k;const C=(k=n==null?void 0:n.findIndex(S=>S===e||S===d))!=null?k:-1;x&&C!==-1&&typeof x[C]=="number"&&b(x[C])}},[d,e,n,x,b]);function j({draggedDistance:k,closeDrawer:C,velocity:S,dismissible:E}){if(i===void 0)return;const T=l==="bottom"||l==="right"?(p??0)-k:(p??0)+k,z=y===i-1,R=y===0,_=k>0;if(z&&_t(r.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`}),!u&&S>2&&!_){E?C():b(x[0]);return}if(!u&&S>2&&_&&x&&n){b(x[n.length-1]);return}const $=x==null?void 0:x.reduce((O,D)=>typeof O!="number"||typeof D!="number"?O:Math.abs(D-T)<Math.abs(O-T)?D:O),L=St(l)?window.innerHeight:window.innerWidth;if(S>nT&&Math.abs(k)<L*.4){const O=_?1:-1;if(O>0&&v&&n){b(x[n.length-1]);return}if(R&&O<0&&E&&C(),y===null)return;b(x[y+O]);return}b($)}function N({draggedDistance:k}){if(p===null)return;const C=l==="bottom"||l==="right"?p-k:p+k;(l==="bottom"||l==="right")&&C<x[x.length-1]||(l==="top"||l==="left")&&C>x[x.length-1]||_t(s.current,{transform:St(l)?`translate3d(0, ${C}px, 0)`:`translate3d(${C}px, 0, 0)`})}function A(k,C){if(!n||typeof y!="number"||!x||i===void 0)return null;const S=y===i-1;if(y>=i&&C)return 0;if(S&&!C)return 1;if(!w&&!S)return null;const T=S?y+1:y-1,z=S?x[T]-x[T-1]:x[T+1]-x[T],R=k/Math.abs(z);return S?1-R:R}return{isLastSnapPoint:v,activeSnapPoint:d,shouldFade:w,getPercentageDragged:A,setActiveSnapPoint:f,activeSnapPointIndex:y,onRelease:j,onDrag:N,snapPointsOffset:x}}const cZ=()=>()=>{};function uZ(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:s,noBodyStyles:r}=Ru(),i=P.useRef(null),o=g.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-qp)/window.innerWidth}P.useEffect(()=>{if(t&&n){i.current&&clearTimeout(i.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;rZ(s&&!r?hg(document.body,{background:"black"}):cZ,hg(c,{transformOrigin:St(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${dt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${dt.EASE.join(",")})`}));const u=hg(c,{borderRadius:`${sT}px`,overflow:"hidden",...St(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),i.current=window.setTimeout(()=>{o?document.body.style.background=o:document.body.style.removeProperty("background")},dt.DURATION*1e3)}}},[t,n,o])}let Jl=null;function dZ({isOpen:e,modal:t,nested:n,hasBeenOpened:s,preventScrollRestoration:r,noBodyStyles:i}){const[o,l]=P.useState(()=>typeof window<"u"?window.location.href:""),c=P.useRef(0),u=P.useCallback(()=>{if(Uw()&&Jl===null&&e&&!i){Jl={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const h=m-window.innerHeight;h&&c.current>=m&&(document.body.style.top=`${-(c.current+h)}px`)}),300)}},[e]),d=P.useCallback(()=>{if(Uw()&&Jl!==null&&!i){const f=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Jl),window.requestAnimationFrame(()=>{if(r&&o!==window.location.href){l(window.location.href);return}window.scrollTo(m,f)}),Jl=null}},[o]);return P.useEffect(()=>{function f(){c.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),P.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||d()}},[t,d]),P.useEffect(()=>{n||!s||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{d()},500)):d())},[e,s,o,t,n,u,d]),{restorePositionSetting:d}}function fZ({open:e,onOpenChange:t,children:n,onDrag:s,onRelease:r,snapPoints:i,shouldScaleBackground:o=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=aZ,scrollLockTimeout:u=iZ,dismissible:d=!0,handleOnly:f=!1,fadeFromIndex:m=i&&i.length-1,activeSnapPoint:h,setActiveSnapPoint:v,fixed:y,modal:w=!0,onClose:x,nested:p,noBodyStyles:b=!1,direction:j="bottom",defaultOpen:N=!1,disablePreventScroll:A=!0,snapToSequentialPoint:k=!1,preventScrollRestoration:C=!1,repositionInputs:S=!0,onAnimationEnd:E,container:T,autoFocus:z=!1}){var R,_;const[$=!1,L]=aT({defaultProp:N,prop:e,onChange:fe=>{t==null||t(fe),!fe&&!p&&lr(),setTimeout(()=>{E==null||E(fe)},dt.DURATION*1e3),fe&&!w&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),fe||(document.body.style.pointerEvents="auto")}}),[O,D]=P.useState(!1),[M,I]=P.useState(!1),[B,H]=P.useState(!1),q=P.useRef(null),Y=P.useRef(null),J=P.useRef(null),le=P.useRef(null),te=P.useRef(null),xe=P.useRef(!1),me=P.useRef(null),ye=P.useRef(0),We=P.useRef(!1),st=P.useRef(!N),V=P.useRef(0),G=P.useRef(null),K=P.useRef(((R=G.current)==null?void 0:R.getBoundingClientRect().height)||0),ie=P.useRef(((_=G.current)==null?void 0:_.getBoundingClientRect().width)||0),ne=P.useRef(0),Q=P.useCallback(fe=>{i&&fe===gn.length-1&&(Y.current=new Date)},[]),{activeSnapPoint:Se,activeSnapPointIndex:et,setActiveSnapPoint:At,onRelease:hn,snapPointsOffset:gn,onDrag:ms,shouldFade:ir,getPercentageDragged:or}=lZ({snapPoints:i,activeSnapPointProp:h,setActiveSnapPointProp:v,drawerRef:G,fadeFromIndex:m,overlayRef:q,onSnapPointChange:Q,direction:j,container:T,snapToSequentialPoint:k});Kq({isDisabled:!$||M||!w||B||!O||!S||!A});const{restorePositionSetting:lr}=dZ({isOpen:$,modal:w,nested:p??!1,hasBeenOpened:O,preventScrollRestoration:C,noBodyStyles:b});function hs(){return(window.innerWidth-qp)/window.innerWidth}function Qr(fe){var Re,Ie;!d&&!i||G.current&&!G.current.contains(fe.target)||(K.current=((Re=G.current)==null?void 0:Re.getBoundingClientRect().height)||0,ie.current=((Ie=G.current)==null?void 0:Ie.getBoundingClientRect().width)||0,I(!0),J.current=new Date,QA()&&window.addEventListener("touchend",()=>xe.current=!1,{once:!0}),fe.target.setPointerCapture(fe.pointerId),ye.current=St(j)?fe.pageY:fe.pageX)}function Jr(fe,Re){var Ie;let De=fe;const Fe=(Ie=window.getSelection())==null?void 0:Ie.toString(),Qt=G.current?bd(G.current,j):null,Vt=new Date;if(De.tagName==="SELECT"||De.hasAttribute("data-vaul-no-drag")||De.closest("[data-vaul-no-drag]"))return!1;if(j==="right"||j==="left")return!0;if(Y.current&&Vt.getTime()-Y.current.getTime()<500)return!1;if(Qt!==null&&(j==="bottom"?Qt>0:Qt<0))return!0;if(Fe&&Fe.length>0)return!1;if(te.current&&Vt.getTime()-te.current.getTime()<u&&Qt===0||Re)return te.current=Vt,!1;for(;De;){if(De.scrollHeight>De.clientHeight){if(De.scrollTop!==0)return te.current=new Date,!1;if(De.getAttribute("role")==="dialog")return!0}De=De.parentNode}return!0}function zt(fe){if(G.current&&M){const Re=j==="bottom"||j==="right"?1:-1,Ie=(ye.current-(St(j)?fe.pageY:fe.pageX))*Re,De=Ie>0,Fe=i&&!d&&!De;if(Fe&&et===0)return;const Qt=Math.abs(Ie),Vt=document.querySelector("[data-vaul-drawer-wrapper]"),Ds=j==="bottom"||j==="top"?K.current:ie.current;let En=Qt/Ds;const dr=or(Qt,De);if(dr!==null&&(En=dr),Fe&&En>=1||!xe.current&&!Jr(fe.target,De))return;if(G.current.classList.add(gg),xe.current=!0,_t(G.current,{transition:"none"}),_t(q.current,{transition:"none"}),i&&ms({draggedDistance:Ie}),De&&!i){const qn=sZ(Ie),ro=Math.min(qn*-1,0)*Re;_t(G.current,{transform:St(j)?`translate3d(0, ${ro}px, 0)`:`translate3d(${ro}px, 0, 0)`});return}const Ls=1-En;if((ir||m&&et===m-1)&&(s==null||s(fe,En),_t(q.current,{opacity:`${Ls}`,transition:"none"},!0)),Vt&&q.current&&o){const qn=Math.min(hs()+En*(1-hs()),1),ro=8-En*8,Wu=Math.max(0,14-En*14);_t(Vt,{borderRadius:`${ro}px`,transform:St(j)?`scale(${qn}) translate3d(0, ${Wu}px, 0)`:`scale(${qn}) translate3d(${Wu}px, 0, 0)`,transition:"none"},!0)}if(!i){const qn=Qt*Re;_t(G.current,{transform:St(j)?`translate3d(0, ${qn}px, 0)`:`translate3d(${qn}px, 0, 0)`})}}}P.useEffect(()=>{window.requestAnimationFrame(()=>{st.current=!0})},[]),P.useEffect(()=>{var fe;function Re(){if(!G.current||!S)return;const Ie=document.activeElement;if(Gp(Ie)||We.current){var De;const Fe=((De=window.visualViewport)==null?void 0:De.height)||0,Qt=window.innerHeight;let Vt=Qt-Fe;const Ds=G.current.getBoundingClientRect().height||0,En=Ds>Qt*.8;ne.current||(ne.current=Ds);const dr=G.current.getBoundingClientRect().top;if(Math.abs(V.current-Vt)>60&&(We.current=!We.current),i&&i.length>0&&gn&&et){const Ls=gn[et]||0;Vt+=Ls}if(V.current=Vt,Ds>Fe||We.current){const Ls=G.current.getBoundingClientRect().height;let qn=Ls;Ls>Fe&&(qn=Fe-(En?dr:qp)),y?G.current.style.height=`${Ls-Math.max(Vt,0)}px`:G.current.style.height=`${Math.max(qn,Fe-dr)}px`}else Vq()||(G.current.style.height=`${ne.current}px`);i&&i.length>0&&!We.current?G.current.style.bottom="0px":G.current.style.bottom=`${Math.max(Vt,0)}px`}}return(fe=window.visualViewport)==null||fe.addEventListener("resize",Re),()=>{var Ie;return(Ie=window.visualViewport)==null?void 0:Ie.removeEventListener("resize",Re)}},[et,i,gn]);function Ut(fe){cr(),x==null||x(),fe||L(!1),setTimeout(()=>{i&&At(i[0])},dt.DURATION*1e3)}function Rs(){if(!G.current)return;const fe=document.querySelector("[data-vaul-drawer-wrapper]"),Re=bd(G.current,j);_t(G.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`}),_t(q.current,{transition:`opacity ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,opacity:"1"}),o&&Re&&Re>0&&$&&_t(fe,{borderRadius:`${sT}px`,overflow:"hidden",...St(j)?{transform:`scale(${hs()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${hs()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${dt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${dt.EASE.join(",")})`},!0)}function cr(){!M||!G.current||(G.current.classList.remove(gg),xe.current=!1,I(!1),le.current=new Date)}function ur(fe){if(!M||!G.current)return;G.current.classList.remove(gg),xe.current=!1,I(!1),le.current=new Date;const Re=bd(G.current,j);if(!fe||!Jr(fe.target,!1)||!Re||Number.isNaN(Re)||J.current===null)return;const Ie=le.current.getTime()-J.current.getTime(),De=ye.current-(St(j)?fe.pageY:fe.pageX),Fe=Math.abs(De)/Ie;if(Fe>.05&&(H(!0),setTimeout(()=>{H(!1)},200)),i){hn({draggedDistance:De*(j==="bottom"||j==="right"?1:-1),closeDrawer:Ut,velocity:Fe,dismissible:d}),r==null||r(fe,!0);return}if(j==="bottom"||j==="right"?De>0:De<0){Rs(),r==null||r(fe,!0);return}if(Fe>nT){Ut(),r==null||r(fe,!1);return}var Qt;const Vt=Math.min((Qt=G.current.getBoundingClientRect().height)!=null?Qt:0,window.innerHeight);var Ds;const En=Math.min((Ds=G.current.getBoundingClientRect().width)!=null?Ds:0,window.innerWidth),dr=j==="left"||j==="right";if(Math.abs(Re)>=(dr?En:Vt)*c){Ut(),r==null||r(fe,!1);return}r==null||r(fe,!0),Rs()}P.useEffect(()=>($&&(_t(document.documentElement,{scrollBehavior:"auto"}),Y.current=new Date),()=>{nZ(document.documentElement,"scrollBehavior")}),[$]);function gs(fe){const Re=fe?(window.innerWidth-si)/window.innerWidth:1,Ie=fe?-si:0;me.current&&window.clearTimeout(me.current),_t(G.current,{transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,transform:St(j)?`scale(${Re}) translate3d(0, ${Ie}px, 0)`:`scale(${Re}) translate3d(${Ie}px, 0, 0)`}),!fe&&G.current&&(me.current=setTimeout(()=>{const De=bd(G.current,j);_t(G.current,{transition:"none",transform:St(j)?`translate3d(0, ${De}px, 0)`:`translate3d(${De}px, 0, 0)`})},500))}function Gn(fe,Re){if(Re<0)return;const Ie=(window.innerWidth-si)/window.innerWidth,De=Ie+Re*(1-Ie),Fe=-si+Re*si;_t(G.current,{transform:St(j)?`scale(${De}) translate3d(0, ${Fe}px, 0)`:`scale(${De}) translate3d(${Fe}px, 0, 0)`,transition:"none"})}function ei(fe,Re){const Ie=St(j)?window.innerHeight:window.innerWidth,De=Re?(Ie-si)/Ie:1,Fe=Re?-si:0;Re&&_t(G.current,{transition:`transform ${dt.DURATION}s cubic-bezier(${dt.EASE.join(",")})`,transform:St(j)?`scale(${De}) translate3d(0, ${Fe}px, 0)`:`scale(${De}) translate3d(${Fe}px, 0, 0)`})}return P.useEffect(()=>{w||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[w]),P.createElement(g0,{defaultOpen:N,onOpenChange:fe=>{!d&&!fe||(fe?D(!0):Ut(!0),L(fe))},open:$},P.createElement(KA.Provider,{value:{activeSnapPoint:Se,snapPoints:i,setActiveSnapPoint:At,drawerRef:G,overlayRef:q,onOpenChange:t,onPress:Qr,onRelease:ur,onDrag:zt,dismissible:d,shouldAnimate:st,handleOnly:f,isOpen:$,isDragging:M,shouldFade:ir,closeDrawer:Ut,onNestedDrag:Gn,onNestedOpenChange:gs,onNestedRelease:ei,keyboardIsOpen:We,modal:w,snapPointsOffset:gn,activeSnapPointIndex:et,direction:j,shouldScaleBackground:o,setBackgroundColorOnScale:l,noBodyStyles:b,container:T,autoFocus:z}},n))}const iT=P.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:s,onRelease:r,shouldFade:i,isOpen:o,modal:l,shouldAnimate:c}=Ru(),u=eT(t,n),d=s&&s.length>0;if(!l)return null;const f=P.useCallback(m=>r(m),[r]);return P.createElement(xu,{onMouseUp:f,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":o&&d?"true":"false","data-vaul-snap-points-overlay":o&&i?"true":"false","data-vaul-animate":c!=null&&c.current?"true":"false",...e})});iT.displayName="Drawer.Overlay";const kv=P.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...s},r){const{drawerRef:i,onPress:o,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:d,activeSnapPointIndex:f,modal:m,isOpen:h,direction:v,snapPoints:y,container:w,handleOnly:x,shouldAnimate:p,autoFocus:b}=Ru(),[j,N]=P.useState(!1),A=eT(r,i),k=P.useRef(null),C=P.useRef(null),S=P.useRef(!1),E=y&&y.length>0;uZ();const T=(R,_,$=0)=>{if(S.current)return!0;const L=Math.abs(R.y),O=Math.abs(R.x),D=O>L,M=["bottom","right"].includes(_)?1:-1;if(_==="left"||_==="right"){if(!(R.x*M<0)&&O>=0&&O<=$)return D}else if(!(R.y*M<0)&&L>=0&&L<=$)return!D;return S.current=!0,!0};P.useEffect(()=>{E&&window.requestAnimationFrame(()=>{N(!0)})},[]);function z(R){k.current=null,S.current=!1,l(R)}return P.createElement(vu,{"data-vaul-drawer-direction":v,"data-vaul-drawer":"","data-vaul-delayed-snap-points":j?"true":"false","data-vaul-snap-points":h&&E?"true":"false","data-vaul-custom-container":w?"true":"false","data-vaul-animate":p!=null&&p.current?"true":"false",...s,ref:A,style:d&&d.length>0?{"--snap-point-height":`${d[f??0]}px`,...t}:t,onPointerDown:R=>{x||(s.onPointerDown==null||s.onPointerDown.call(s,R),k.current={x:R.pageX,y:R.pageY},o(R))},onOpenAutoFocus:R=>{n==null||n(R),b||R.preventDefault()},onPointerDownOutside:R=>{if(e==null||e(R),!m||R.defaultPrevented){R.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:R=>{if(!m){R.preventDefault();return}},onPointerMove:R=>{if(C.current=R,x||(s.onPointerMove==null||s.onPointerMove.call(s,R),!k.current))return;const _=R.pageY-k.current.y,$=R.pageX-k.current.x,L=R.pointerType==="touch"?10:2;T({x:$,y:_},v,L)?c(R):(Math.abs($)>L||Math.abs(_)>L)&&(k.current=null)},onPointerUp:R=>{s.onPointerUp==null||s.onPointerUp.call(s,R),k.current=null,S.current=!1,l(R)},onPointerOut:R=>{s.onPointerOut==null||s.onPointerOut.call(s,R),z(C.current)},onContextMenu:R=>{s.onContextMenu==null||s.onContextMenu.call(s,R),C.current&&z(C.current)}})});kv.displayName="Drawer.Content";const mZ=250,hZ=120,gZ=P.forwardRef(function({preventCycle:e=!1,children:t,...n},s){const{closeDrawer:r,isDragging:i,snapPoints:o,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:d,isOpen:f,onPress:m,onDrag:h}=Ru(),v=P.useRef(null),y=P.useRef(!1);function w(){if(y.current){b();return}window.setTimeout(()=>{x()},hZ)}function x(){if(i||e||y.current){b();return}if(b(),!o||o.length===0){u||r();return}if(l===o[o.length-1]&&u){r();return}const N=o.findIndex(k=>k===l);if(N===-1)return;const A=o[N+1];c(A)}function p(){v.current=window.setTimeout(()=>{y.current=!0},mZ)}function b(){v.current&&window.clearTimeout(v.current),y.current=!1}return P.createElement("div",{onClick:w,onPointerCancel:b,onPointerDown:j=>{d&&m(j),p()},onPointerMove:j=>{d&&h(j)},ref:s,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},P.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});gZ.displayName="Drawer.Handle";function pZ(e){const t=Ru(),{container:n=t.container,...s}=e;return P.createElement(p0,{container:n,...s})}const Xr={Root:fZ,Content:kv,Overlay:iT,Portal:pZ,Title:yu,Description:bu},oT=({shouldScaleBackground:e=!0,...t})=>a.jsx(Xr.Root,{shouldScaleBackground:e,...t});oT.displayName="Drawer";const lT=Xr.Portal,Cv=g.forwardRef(({className:e,...t},n)=>a.jsx(Xr.Overlay,{ref:n,className:F("fixed inset-0 bg-background/80 backdrop-blur-sm",e),style:{zIndex:Nt.MODAL},...t}));Cv.displayName=Xr.Overlay.displayName;const xZ=g.forwardRef(({className:e,children:t,fullHeight:n=!1,...s},r)=>a.jsxs(lT,{children:[a.jsx(Cv,{}),a.jsxs(Xr.Content,{ref:r,className:F(n?"fixed inset-x-0 bottom-0 z-50 flex h-[100dvh] max-h-[100dvh] w-full bg-background":"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),style:{zIndex:Nt.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[!n&&a.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));xZ.displayName="DrawerContent";const cT=({className:e,...t})=>a.jsx("div",{className:F("grid gap-1.5 p-4 text-center sm:text-left",e),...t});cT.displayName="DrawerHeader";const uT=({className:e,...t})=>a.jsx("div",{className:F("mt-auto flex flex-col gap-2 p-4",e),...t});uT.displayName="DrawerFooter";const dT=g.forwardRef(({className:e,...t},n)=>a.jsx(Xr.Title,{ref:n,className:F("text-lg font-semibold leading-none tracking-tight",e),...t}));dT.displayName=Xr.Title.displayName;const fT=g.forwardRef(({className:e,...t},n)=>a.jsx(Xr.Description,{ref:n,className:F("text-sm text-muted-foreground",e),...t}));fT.displayName=Xr.Description.displayName;function vZ(e,t){const n=new Map;return t.forEach(s=>{var o;const r=s.treeId,i=((o=s.perks)==null?void 0:o.length)||0;n.set(r,i)}),n}function Ev(){const{data:e,loading:t,error:n,reload:s}=_8(),{data:r,loading:i,error:o,reload:l}=V0(),c=t||i,u=n||o;return{skills:g.useMemo(()=>{if(!e||!r)return[];const m=vZ(e,r);return e.map(h=>({id:h.edid,name:h.name,category:h.category,description:h.description,keyAbilities:h.keyAbilities||[],metaTags:h.metaTags||[],assignmentType:"none",canAssignMajor:!0,canAssignMinor:!0,level:0,totalPerks:m.get(h.edid)||0,selectedPerksCount:0,selectedPerks:[],isSelected:!1}))},[e,r]),perkTrees:r||[],loading:c,error:u,refreshSkills:async()=>{await Promise.all([s(),l()])}}}function yZ(){const{skills:e,loading:t,error:n}=Ev(),{build:s,addMajorSkill:r,addMinorSkill:i,removeMajorSkill:o,removeMinorSkill:l}=Xe(),c=g.useMemo(()=>{var w,x;return!((w=s==null?void 0:s.skills)!=null&&w.major)||!((x=s==null?void 0:s.skills)!=null&&x.minor)?e.map(p=>({...p,isMajor:!1,isMinor:!1,selectedPerksCount:0,startingLevel:0,minLevel:0,canAssignMajor:!0,canAssignMinor:!0})):e.map(p=>{var T,z,R;const b=s.skills.major.includes(p.id),j=s.skills.minor.includes(p.id),N=((z=(T=s.perks)==null?void 0:T.selected)==null?void 0:z[p.id])||[],A=N.length,k=jm(p.id,s),C=Nm(p.id,N,((R=s.perks)==null?void 0:R.ranks)||{}),S=!b&&s.skills.major.length<3,E=!j&&s.skills.minor.length<6;return{...p,isMajor:b,isMinor:j,selectedPerksCount:A,startingLevel:k,minLevel:C,canAssignMajor:S,canAssignMinor:E}})},[e,s]),u=g.useMemo(()=>c.filter(w=>w.isMajor),[c]),d=g.useMemo(()=>c.filter(w=>w.isMinor),[c]),f=g.useMemo(()=>c.filter(w=>!w.isMajor&&!w.isMinor),[c]);return{skills:c,selectedMajorSkills:u,selectedMinorSkills:d,availableSkills:f,loading:t,error:n,handleMajorSkillSelect:w=>{r(w.id)},handleMinorSkillSelect:w=>{i(w.id)},handleMajorSkillRemove:w=>{o(w)},handleMinorSkillRemove:w=>{l(w)}}}function bZ(e){const[t,n]=g.useState(""),[s,r]=g.useState(null),i=g.useMemo(()=>e.filter(c=>{const u=c.name.toLowerCase().includes(t.toLowerCase())||c.description.toLowerCase().includes(t.toLowerCase())||c.category.toLowerCase().includes(t.toLowerCase())||c.keyAbilities.some(f=>f.toLowerCase().includes(t.toLowerCase()))||c.metaTags.some(f=>f.toLowerCase().includes(t.toLowerCase())),d=!s||c.category===s;return u&&d}),[e,t,s]),o=g.useMemo(()=>{const c=new Set(e.map(u=>u.category));return Array.from(c).sort()},[e]);return{searchQuery:t,setSearchQuery:n,selectedCategory:s,setSelectedCategory:r,filteredSkills:i,categories:o,clearFilters:()=>{n(""),r(null)}}}function Av(e){const{data:t,loading:n,error:s}=V0(),{getSkillPerks:r,getPerkRank:i,addPerk:o,removePerk:l,setPerkRank:c,clearSkillPerks:u}=Xe(),d=g.useMemo(()=>!e||!t?null:t.find(p=>p.treeId===e)||null,[e,t]),f=g.useMemo(()=>e?r(e):[],[e,r]),m=g.useMemo(()=>{if(!e||!d)return{};const x={};return d.perks.forEach(p=>{x[p.edid]=i(p.edid)}),x},[e,d,i]),h=g.useMemo(()=>{if(!d)return[];const x=[];return d.perks.forEach(p=>{if(p.isRoot){x.push(p.edid);return}(p.connections.parents||[]).every(N=>f.includes(N))&&x.push(p.edid)}),x},[d,f]);return{perkTrees:t||[],selectedPerkTree:d,selectedPerks:f,perkRanks:m,availablePerks:h,loading:n,error:s,handlePerkSelect:x=>{if(!e)return;f.includes(x)?l(e,x):o(e,x)},handlePerkRankChange:(x,p)=>{c(x,p),p===0?f.includes(x)&&l(e,x):f.includes(x)||o(e,x)},handleResetPerks:()=>{e&&u(e)}}}function mT(){var M,I;const{skills:e,loading:t,error:n,refreshSkills:s}=Ev(),{build:r,addMajorSkill:i,addMinorSkill:o,removeMajorSkill:l,removeMinorSkill:c,addPerk:u,removePerk:d,setPerkRank:f}=Xe(),{searchQuery:m,setSearchQuery:h,selectedCategory:v,setSelectedCategory:y,filteredSkills:w,categories:x,clearFilters:p}=bZ(e),b=g.useMemo(()=>w.map(B=>{var te,xe,me;const H=((xe=(te=r.perks)==null?void 0:te.selected)==null?void 0:xe[B.id])||[],q=H.length,Y=B.totalPerks??0,J=jm(B.id,r),le=Nm(B.id,H,((me=r.perks)==null?void 0:me.ranks)||{});return{...B,selectedPerksCount:q,level:J+le,startingLevel:J,minLevel:le,assignmentType:r.skills.major.includes(B.id)?"major":r.skills.minor.includes(B.id)?"minor":"none",canAssignMajor:!r.skills.major.includes(B.id)&&r.skills.major.length<3,canAssignMinor:!r.skills.minor.includes(B.id)&&r.skills.minor.length<6,perkCount:`${q}/${Y}`}}),[w,r]),j=g.useMemo(()=>{const B=b.reduce((H,q)=>H+(q.selectedPerksCount||0),0);return{majorCount:r.skills.major.length,minorCount:r.skills.minor.length,majorLimit:3,minorLimit:6,canAssignMajor:r.skills.major.length<3,canAssignMinor:r.skills.minor.length<6,totalSkills:b.length,totalPerks:B,totalPerkRanks:0}},[b,r.skills.major,r.skills.minor]),N=g.useCallback(B=>{r.skills.major.includes(B)?l(B):i(B)},[r.skills.major,i,l]),A=g.useCallback(B=>{r.skills.minor.includes(B)?c(B):o(B)},[r.skills.minor,o,c]),k=g.useCallback(B=>{l(B),c(B)},[l,c]),[C,S]=g.useState(null),E=g.useCallback(B=>{S(B)},[]),T=g.useMemo(()=>C&&b.find(B=>B.id===C)||null,[C,b]),{selectedPerkTree:z,handleResetPerks:R}=Av(C),_=g.useMemo(()=>{var B;return!T||!((B=r.perks)!=null&&B.selected)?[]:r.perks.selected[T.id]||[]},[T,(M=r.perks)==null?void 0:M.selected]),$=g.useMemo(()=>{var B;return!T||!((B=r.perks)!=null&&B.ranks)?{}:r.perks.ranks[T.id]||{}},[T,(I=r.perks)==null?void 0:I.ranks]),L=g.useMemo(()=>z?z.perks||[]:[],[z]),O=g.useCallback(B=>{if(!T)return;_.includes(B)?d(T.id,B):u(T.id,B)},[T,_,u,d]),D=g.useCallback((B,H)=>{T&&f(B,H)},[T,f]);return{skills:b,skillSummary:j,selectedSkill:T,selectedSkillId:C,perkTree:z,selectedPerks:_,perkRanks:$,availablePerks:L,loading:t,error:n,searchQuery:m,setSearchQuery:h,selectedCategory:v,setSelectedCategory:y,categories:x,clearFilters:p,onAssignMajor:N,onAssignMinor:A,onRemoveAssignment:k,onSkillSelect:E,onPerkSelect:O,onPerkRankChange:D,onResetPerks:R,refreshSkills:s}}function wZ(e){const t=new Set,n=[],s=(r,i)=>{if(t.has(r))return;t.add(r),i.push(e.find(l=>l.edid===r));const o=e.find(l=>l.edid===r);o.connection.children.forEach(l=>{e.some(c=>c.edid===l)&&s(l,i)}),o.connection.parents.forEach(l=>{e.some(c=>c.edid===l)&&s(l,i)})};return e.forEach(r=>{if(!t.has(r.edid)){const i=[];s(r.edid,i),n.push(i)}}),n}function jZ(e,t){try{if(e.length===0)return[];const r=wZ(e).map(l=>NZ(l)).map(l=>SZ(l,t)),i=CZ(r,t);return hT(i,t)}catch{return e.map(s=>({id:s.edid,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0}))}}function NZ(e){const t=new Map;e.forEach(l=>{t.set(l.edid,{perk:l,depth:-1,children:l.connection.children,parents:l.connection.parents,x:0,y:0,width:0})});const n=[];t.forEach((l,c)=>{l.parents.length===0&&n.push(c)});const s=n.map(l=>({id:l,depth:0})),r=new Set;for(;s.length>0;){const{id:l,depth:c}=s.shift();if(r.has(l))continue;r.add(l);const u=t.get(l);u&&((u.depth===-1||c<u.depth)&&(u.depth=c),u.children.forEach(d=>{t.has(d)&&!r.has(d)&&s.push({id:d,depth:c+1})}))}let i=!0,o=0;for(;i&&o<10;)i=!1,o++,t.forEach((l,c)=>{if(l.parents.length>1){const u=l.parents.map(d=>{const f=t.get(d);return f?f.depth:-1}).filter(d=>d!==-1);if(u.length>0){const f=Math.min(...u)+1;l.depth!==f&&(l.depth=f,i=!0)}}});return t.forEach((l,c)=>{l.children.forEach(u=>{const d=t.get(u);if(d&&d.depth<=l.depth){const f=l.depth+1;d.depth=f}})}),{nodes:t,roots:n}}function SZ(e,t){const{nodes:n,roots:s}=e,r=[];if(n.forEach((f,m)=>{r.push({id:m,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0,children:f.children})}),r.some(f=>{try{return Zp(f.id,n,t,new Set),!1}catch{return!0}}))return r.forEach(f=>{const m=n.get(f.id);if(m&&m.perk){const h=m.perk.position.x*t.gridScaleX,v=-m.perk.position.y*t.gridScaleY;f.x=h,f.y=v,f.originalX=h,f.originalY=v}}),kZ(r,t),r;const o=r.filter(f=>!r.some(h=>{var v;return h.id!==f.id&&((v=h.children)==null?void 0:v.includes(f.id))}));o.forEach(f=>{f.y=0,f.originalY=0});const l=new Set,c=o.map(f=>({node:f,depth:0}));for(;c.length>0;){const{node:f,depth:m}=c.shift();l.has(f.id)||(l.add(f.id),m>0&&(f.y=-m*t.verticalSpacing,f.originalY=f.y),f.children&&f.children.forEach(h=>{const v=r.find(y=>y.id===h);v&&!l.has(h)&&c.push({node:v,depth:m+1})}))}const u=new Map;return r.forEach(f=>{const m=Math.round(f.y/t.verticalSpacing);u.has(m)||u.set(m,[]),u.get(m).push(f)}),Array.from(u.keys()).sort((f,m)=>m-f).forEach(f=>{u.get(f).forEach(h=>{if(h.children){const v=new Map;h.children.forEach(y=>{const w=r.find(x=>x.id===y);if(w){const x=r.filter(p=>{var b;return((b=p.children)==null?void 0:b.includes(y))&&Math.abs(p.y-w.y)===t.verticalSpacing});x.length>0&&x.some(p=>p.id===h.id)&&(v.has(h.id)||v.set(h.id,[]),v.get(h.id).push(w))}}),v.forEach((y,w)=>{if(y.length>0){const x=r.find(p=>p.id===w);if(x){const p=y.map(k=>{const C=Zp(k.id,n,t);return{child:k,subtreeWidth:C}}),b=p.reduce((k,{subtreeWidth:C})=>k+C,0),j=(y.length-1)*t.horizontalSpacing,N=b+j;let A=x.x-N/2;p.forEach(({child:k,subtreeWidth:C})=>{k.x=A+C/2,k.originalX=k.x,A+=C+t.horizontalSpacing})}}})}})}),hT(r,t),r}function hT(e,t){const r=t.horizontalSpacing*.4,i=new Map;e.forEach(o=>{i.set(o.id,{x:o.x,y:o.y})});for(let o=0;o<5;o++){let l=0;for(let c=0;c<e.length;c++)for(let u=c+1;u<e.length;u++){const d=e[c],f=e[u],m=d.x+t.nodeWidth*.5,h=d.y+t.nodeHeight*.5,v=f.x+t.nodeWidth*.5,y=f.y+t.nodeHeight*.5,w=v-m,x=y-h,p=Math.sqrt(w*w+x*x);if(p<r&&p>0){const b=w/p*.03,j=x/p*.03;d.x-=b,d.y-=j,f.x+=b,f.y+=j,l++}}if(l===0)break}return e.forEach(o=>{const l=i.get(o.id);if(!l)return;const c=l.x-o.x,u=l.y-o.y,d=o.x+c*.02,f=o.y+u*.02,h=Math.round(l.y/t.verticalSpacing)*t.verticalSpacing,v=Math.max(f,h);o.x=d,o.y=v,o.originalX=d,o.originalY=v}),e}function kZ(e,t){const r=t.nodeHeight*.8,i=50,o=new Map;e.forEach(u=>{o.set(u.id,{x:u.x,y:u.y})});let l=0,c=1;for(;c>0&&l<i;){l++,c=0;for(let u=0;u<e.length;u++)for(let d=u+1;d<e.length;d++){const f=e[u],m=e[d],h=Math.max(0,Math.min(f.x+t.nodeWidth,m.x+t.nodeWidth)-Math.max(f.x,m.x)),v=Math.max(0,Math.min(f.y+t.nodeHeight,m.y+t.nodeHeight)-Math.max(f.y,m.y)),y=f.y+t.nodeHeight*.5,w=m.y+t.nodeHeight*.5,x=Math.abs(w-y),p=x<r;if(h>0&&v>0||p){c++;let b=0;h>0&&v>0?b=v*.08:p&&(b=(r-x)*.08),f.y<m.y?(f.y-=b,m.y+=b):(f.y+=b,m.y-=b)}}if(c===0)break}return e.forEach(u=>{const d=o.get(u.id);if(!d)return;const f=d.y-u.y,m=u.y+f*.03;u.y=m,u.originalY=m}),e}function CZ(e,t){const n=[],s=e.map(c=>{const u=Math.max(...c.map(b=>b.y)),d=c.filter(b=>Math.abs(b.y-u)<1),f=d.map(b=>b.x),m=Math.min(...f),h=Math.max(...f),v=h-m,y=f.reduce((b,j)=>b+j,0)/f.length,w=Math.min(...c.map(b=>b.x)),x=Math.max(...c.map(b=>b.x+b.width)),p=x-w;return{treeNodes:c,rootNodes:d,minRootX:m,maxRootX:h,rootWidth:v,rootCenterX:y,minX:w,maxX:x,treeWidth:p}}),r=Math.min(...s.map(c=>c.minRootX)),o=Math.max(...s.map(c=>c.maxRootX))-r;let l=0;return s.forEach(c=>{const u=o>0?c.rootWidth/o:1,d=c.minRootX-r;l-c.minX+d*u,c.treeNodes.forEach(f=>{const h=(f.x-c.minRootX)*u,v=l+h;n.push({...f,x:v,originalX:v})}),l+=c.treeWidth*u+t.horizontalSpacing}),n}function Zp(e,t,n,s=new Set){if(s.has(e))throw new Error(`Circular reference detected for perkId: ${e}`);const r=t.get(e);if(!r)return n.nodeWidth;s.add(e);const i=r.children||[],o=i.map(c=>Zp(c,t,n,new Set(s)));if(o.length===0)return n.nodeWidth;let l=0;return o.forEach((c,u)=>{l+=c,u<i.length-1&&(l+=n.horizontalSpacing)}),Math.max(l,n.nodeWidth)}function EZ(e){return e.perks.map(t=>({edid:t.edid,name:t.name,position:t.position,connection:t.connections}))}const AZ={perkNode:e=>a.jsx(WA,{...e,onTogglePerk:e.data.onTogglePerk,onRankChange:e.data.onRankChange})};function TZ({tree:e,onTogglePerk:t,onRankChange:n,selectedPerks:s,currentSkillLevel:r}){const[i,o]=P.useState(null),[l,c]=P.useState(null),[u,d]=P.useState(!1),f=P.useCallback((T,z)=>{},[]),m=g.useMemo(()=>{if(!e)return null;const T=YA(e);return T.success?T.data:(console.error("Invalid perk tree data:",T.error),null)},[e]);P.useEffect(()=>{if(!m){c(null);return}d(!0),XA(m.treeId).then(T=>{c(T)}).catch(T=>{c(null)}).finally(()=>{d(!1)})},[m==null?void 0:m.treeId]);const h=g.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),v=g.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),y=g.useMemo(()=>{if(!m)return[];if(l&&!u){const T=Iq(m,l,v);return Array.from(T.entries()).map(([z,R])=>({id:z,x:R.x,y:R.y,width:v.nodeWidth||140,height:v.nodeHeight||80,originalX:R.x,originalY:R.y}))}else{const T=EZ(m);return jZ(T,h)}},[m,h,l,u,v]),w=g.useMemo(()=>!m||y.length===0?[]:m.perks.map(T=>{const z=T.edid,R=y.find(M=>M.id===z),_=R?{x:R.x,y:R.y}:{x:0,y:0},$=T.connections.children.length>0,L=T.connections.parents.length===0,O=s.find(M=>M.edid===z);return{id:z,type:"perkNode",position:_,draggable:!1,data:{...T,selected:O!==void 0,currentRank:(O==null?void 0:O.currentRank)||0,hasChildren:$,isRoot:L,currentSkillLevel:r,onTogglePerk:t,onRankChange:n}}}),[m,y,s,t,n,r]),x=g.useMemo(()=>{if(!m)return[];const T=[];return m.perks.forEach(z=>{const R=z.edid;z.connections.children.length>0&&z.connections.children.forEach(_=>{if(_===R)return;m.perks.some(L=>L.edid===_)&&T.push({id:`${R}-${_}`,source:R,target:_,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),T},[m]),[p,b,j]=HA(w),[N,A,k]=UA(x);P.useEffect(()=>{b(w)},[w,b]),P.useEffect(()=>{A(x)},[x,A]),P.useEffect(()=>{m&&p.length>0&&i&&setTimeout(()=>{i.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[m==null?void 0:m.treeId,i]);const C=g.useCallback(T=>A(z=>xv(T,z)),[A]),S=g.useCallback(T=>{T.stopPropagation()},[]),E=g.useCallback(T=>{T.stopPropagation()},[]);return m?a.jsxs("div",{className:"w-full h-full bg-background rounded-lg border",style:{zIndex:Nt.CONTENT,position:"relative"},onMouseDown:T=>T.stopPropagation(),onTouchStart:T=>T.stopPropagation(),children:[a.jsx("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-1",children:a.jsx("div",{className:"bg-primary text-primary-foreground px-2 py-1 rounded text-xs font-medium",children:u?"Loading Positions...":l?"Positioned Tree":"Algorithm v2"})}),a.jsxs(Nv,{nodes:p,edges:N,onNodesChange:j,onEdgesChange:k,onConnect:C,onInit:o,nodeTypes:AZ,nodesDraggable:!1,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},onNodeDragStop:f,onMouseDown:S,onTouchStart:E,panOnDrag:!0,panOnScroll:!1,preventScrolling:!0,style:{backgroundColor:"hsl(var(--background))",zIndex:1},children:[a.jsx(ZA,{}),a.jsx(GA,{})]})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20 rounded-lg",children:a.jsx("p",{className:"text-muted-foreground",children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function gT({open:e,onOpenChange:t,selectedSkill:n,skillName:s,perkTree:r,skills:i,onSkillSelect:o,onReset:l}){var A,k;const{selectedPerks:c,perkRanks:u,handlePerkSelect:d,handlePerkRankChange:f,handleResetPerks:m}=Av(n),{getSkillLevel:h}=Xe(),v=n?h(n):void 0,y=P.useMemo(()=>r?r.perks.filter(C=>c.includes(C.edid)).map(C=>({...C,selected:!0,currentRank:u[C.edid]||1})):[],[r,c,u]),w=P.useCallback(C=>{d(C)},[d]),x=P.useCallback((C,S)=>{f(C,S)},[f]),p=()=>{m(),l()},b=()=>{t(!1)},j=[{id:"skills",name:"Skills",placeholder:"Search skills...",options:i.map(C=>({id:C.id,label:C.name,value:C.id,category:"Skills",description:`${C.selectedPerks}/${C.totalPerks} perks selected`}))}],N=C=>{o(C.value)};return n?a.jsx(oT,{open:e,onOpenChange:t,shouldScaleBackground:!1,dismissible:!0,children:a.jsxs(lT,{children:[a.jsx(Cv,{}),a.jsxs(kv,{className:"fixed inset-x-0 bottom-0 z-50 mt-24 flex flex-col rounded-t-[10px] border bg-background h-[85vh] bg-card border-t shadow-lg !bg-card","data-vaul-no-drag":!0,style:{backgroundColor:"hsl(var(--card))",zIndex:Nt.DRAWER},children:[a.jsx(cT,{className:"border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-64",children:a.jsx(hi,{categories:j,onSelect:N,placeholder:"Search skills..."})}),a.jsxs("div",{className:"flex items-center gap-3",children:[s&&a.jsx(th,{skillName:s,size:"lg",className:"flex-shrink-0"}),a.jsxs("div",{children:[a.jsx(dT,{className:"text-xl",children:s||(r==null?void 0:r.treeName)||"Skill Perks"}),a.jsxs(fT,{className:"flex items-center gap-2",children:[a.jsxs("span",{children:[c.length," perks selected"]}),((A=i.find(C=>C.id===n))==null?void 0:A.minLevel)>0&&a.jsxs("span",{className:"text-blue-600 font-medium",children:["â€¢ Min: Level"," ",(k=i.find(C=>C.id===n))==null?void 0:k.minLevel]})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(U,{variant:"outline",size:"sm",onClick:p,className:"flex items-center gap-2",children:[a.jsx(Dr,{className:"h-4 w-4"}),"Reset Perks"]}),a.jsx(U,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-2",children:a.jsx(Me,{className:"h-4 w-4"})})]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",style:{height:"400px"},children:a.jsx("div",{className:"h-full w-full bg-muted/20 rounded",children:r?a.jsx(TZ,{tree:r,onTogglePerk:w,onRankChange:x,selectedPerks:y,currentSkillLevel:v}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"text-muted-foreground",children:n?"Loading perk tree...":"No skill selected"})})})}),a.jsx(uT,{className:"border-t",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on perk nodes to select/deselect them"}),a.jsx(U,{variant:"outline",onClick:b,children:"Close"})]})})]})]})}):null}function _Z({skills:e,loading:t,error:n,searchQuery:s,onSearchChange:r,selectedCategory:i,onCategorySelect:o,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:v,skillSummary:y}){var b;const[w,x]=g.useState(!1);if(t)return a.jsx(C9,{});if(n)return a.jsx(E9,{error:n});const p=e.map(j=>({id:j.id,name:j.name,category:j.category,description:j.description,keyAbilities:j.keyAbilities||[],metaTags:j.metaTags||[],assignmentType:j.assignmentType,canAssignMajor:j.canAssignMajor,canAssignMinor:j.canAssignMinor,minLevel:j.minLevel,startingLevel:j.startingLevel,totalPerks:j.totalPerks,selectedPerksCount:j.selectedPerksCount,selectedPerks:j.selectedPerks||[],isSelected:j.isSelected||!1,isMajor:j.assignmentType==="major",isMinor:j.assignmentType==="minor"}));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Available Skills"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.length," skills found"]})]}),a.jsx(T9,{skills:e,onSkillSelect:j=>{u(j),x(!0)},onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,selectedSkillId:c||void 0})]}),a.jsx(gT,{open:w,onOpenChange:x,selectedSkill:c,skillName:c?(b=e.find(j=>j.id===c))==null?void 0:b.name:void 0,perkTree:v||void 0,skills:p,onSkillSelect:u,onReset:h}),a.jsxs("div",{className:"p-6 bg-muted/50 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"How to Assign Skills"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Major Skills (0-3)"}),a.jsx("p",{children:"Your primary skills that level up faster and start at a higher level."})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Minor Skills (0-6)"}),a.jsx("p",{children:"Secondary skills that provide additional benefits and customization."})]})]})]})]})}function pT({className:e}){var E;const{selectedMajorSkills:t,selectedMinorSkills:n,availableSkills:s,handleMajorSkillSelect:r,handleMinorSkillSelect:i,handleMajorSkillRemove:o,handleMinorSkillRemove:l}=yZ(),{build:c,getSkillLevel:u,getSkillPerks:d}=Xe(),{skills:f}=Ev(),m=lt(),[h,v]=g.useState(null),[y,w]=g.useState(!1),x=()=>{m("/build/perks")},p=T=>{v(T),w(!0)},b=T=>{v(T.edid),w(!0)},j=g.useMemo(()=>{const T=t.map(_=>_.id),z=n.map(_=>_.id),R=[...T,...z];return f.filter(_=>d(_.id).length>0&&!R.includes(_.id))},[f,t,n,d]),N=g.useMemo(()=>{const T=t.map($=>$.id),z=n.map($=>$.id),R=[...T,...z],_=j.map($=>$.id);return f.filter($=>!R.includes($.id)&&!_.includes($.id)).map($=>({name:$.name,edid:$.id,category:$.category,description:$.description,scaling:"",keyAbilities:$.keyAbilities||[],metaTags:$.metaTags||[]}))},[f,t,n,j]),A=T=>({name:T.name,edid:T.id,category:T.category,description:T.description,scaling:T.scaling||"",keyAbilities:T.keyAbilities||[],metaTags:T.metaTags||[]}),k=f.map(T=>{var O,D,M,I,B,H,q,Y;d(T.id);const z=u(T.id),R=((D=(O=c==null?void 0:c.skills)==null?void 0:O.major)==null?void 0:D.includes(T.id))||!1,_=((I=(M=c==null?void 0:c.skills)==null?void 0:M.minor)==null?void 0:I.includes(T.id))||!1,$=!R&&(((H=(B=c==null?void 0:c.skills)==null?void 0:B.major)==null?void 0:H.length)||0)<3,L=!_&&(((Y=(q=c==null?void 0:c.skills)==null?void 0:q.minor)==null?void 0:Y.length)||0)<6;return{...T,isMajor:R,isMinor:_,canAssignMajor:$,canAssignMinor:L,level:z}}),{selectedPerkTree:C}=Av(h),S=(T,z)=>{const R=d(T.id||T.edid),_=T.totalPerks||0,$=T.id||T.edid,L=T.minLevel!==void 0?T.minLevel:u(T.id||T.edid);let O="cursor-pointer transition-all hover:shadow-md ",D="text-xs ";switch(z){case"major":O+="bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",D+="bg-yellow-100 text-yellow-800 border-yellow-300";break;case"minor":O+="bg-gray-50/50 border-gray-300 shadow-gray-300/20",D+="bg-gray-100 text-gray-800 border-gray-300";break;case"perked":O+="bg-blue-50/50 border-blue-500 shadow-blue-500/20",D+="bg-blue-100 text-blue-800 border-blue-300";break}return a.jsx(ce,{className:O,onClick:()=>p($),children:a.jsx(de,{className:"p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(th,{skillName:T.name,size:"2xl",className:"flex-shrink-0"}),a.jsx("h5",{className:"font-medium text-sm text-foreground",children:T.name}),a.jsx(Cl,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Le,{text:T.description,className:"text-xs text-muted-foreground line-clamp-2 mb-3",as:"p"}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx(vE,{level:L,size:"sm"}),T.startingLevel>0&&a.jsxs(Z,{variant:"outline",className:"text-xs bg-green-100 text-green-800 border-green-300",children:["Starting: ",T.startingLevel]}),a.jsxs(Z,{variant:"outline",className:D,children:[R.length,"/",_," perks"]}),z==="major"&&a.jsx(Z,{variant:"outline",className:"text-xs bg-yellow-100 text-yellow-800 border-yellow-300",children:"Major"}),z==="minor"&&a.jsx(Z,{variant:"outline",className:"text-xs bg-gray-100 text-gray-800 border-gray-300",children:"Minor"}),z==="perked"&&a.jsx(Z,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800 border-blue-300",children:"Perked"}),z==="assigned"&&a.jsx(Z,{variant:"outline",className:"text-xs bg-orange-100 text-orange-800 border-orange-300",children:"Assigned"})]})]}),(z==="major"||z==="minor")&&a.jsx(U,{size:"sm",variant:"ghost",onClick:M=>{M.stopPropagation(),z==="major"?o($):l($)},className:`${z==="major"?"text-yellow-600 hover:text-yellow-700 hover:bg-yellow-100":"text-gray-600 hover:text-gray-700 hover:bg-gray-100"}`,children:a.jsx(Me,{className:"h-4 w-4"})})]})})},$)};return a.jsxs(a.Fragment,{children:[a.jsxs(en,{title:"Skills & Perks",navigateTo:"skills",onNavigate:x,className:e,children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Major Skills"}),t.length<3&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Z,{variant:"outline",className:"text-xs",children:[t.length,"/3"]})}),a.jsx(dg,{skills:s.map(A),onSelect:T=>{const z=s.find(R=>R.id===T.edid);z&&r(z)},placeholder:"Select major skill...",className:"w-full"})]}),t.length>0&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:t.map(T=>S(T,"major"))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Minor Skills"}),n.length<6&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Z,{variant:"outline",className:"text-xs",children:[n.length,"/6"]})}),a.jsx(dg,{skills:s.map(A),onSelect:T=>{const z=s.find(R=>R.id===T.edid);z&&i(z)},placeholder:"Select minor skill...",className:"w-full"})]}),n.length>0&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:n.map(T=>S(T,"minor"))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Other Perked Skills"}),a.jsx("div",{className:"space-y-2",children:a.jsx(dg,{skills:N,onSelect:b,placeholder:"Select skill to add perks...",className:"w-full"})}),j.length>0&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:j.map(T=>S(T,"perked"))})]})]}),a.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on any skill card to view and manage its perk tree. Min levels show the minimum level required by your selected perks. Starting levels show your base skill level from race bonuses and major/minor assignments."})})]}),a.jsx(gT,{open:y,onOpenChange:w,selectedSkill:h,skillName:h?(E=f.find(T=>T.id===h))==null?void 0:E.name:void 0,perkTree:C||void 0,skills:k,onSkillSelect:v,onReset:()=>{}})]})}function Zw({item:e,className:t,allTraitIds:n,disableHover:s=!1}){e.originalTrait;const{hasRegularTrait:r,hasBonusTrait:i,addRegularTrait:o,addBonusTrait:l,removeTrait:c,canAddRegularTrait:u,canAddBonusTrait:d,build:f}=Xe(),h=r(e.id)?"primary":i(e.id)?"secondary":"none",v=p=>{h===p?c(e.id):(c(e.id),p==="primary"&&u()?o(e.id):p==="secondary"&&d()&&l(e.id))},y=!u()&&h!=="primary",w=!d()&&h!=="secondary",x=()=>h==="primary"?"border-yellow-500 bg-yellow-50/50 shadow-yellow-500/20":h==="secondary"?"border-gray-400 bg-gray-50/50 shadow-gray-400/20":"";return g.useEffect(()=>{var p,b;if(n){const j=((p=f==null?void 0:f.traits)==null?void 0:p.regular)||[],N=((b=f==null?void 0:f.traits)==null?void 0:b.bonus)||[];[...j,...N].filter(C=>!n.includes(C)).forEach(C=>c(C))}},[n,f==null?void 0:f.traits,c]),a.jsxs(pe,{expanded:!0,className:F(t,x()),disableHover:s,hideChevron:!0,children:[a.jsx(pe.Header,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-skyrim-gold/20 flex items-center justify-center",children:a.jsx(w3,{className:"h-8 w-8 text-skyrim-gold"})}),a.jsx(je,{className:"text-primary font-semibold",children:e.name})]})}),a.jsx(pe.Summary,{children:a.jsx(Le,{text:e.description,className:"text-base text-muted-foreground"})}),a.jsx(pe.Footer,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(U,{size:"sm",variant:h==="primary"?"default":"outline",disabled:y,className:F("flex-1 text-xs",h==="primary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:p=>{p.stopPropagation(),v("primary")},children:h==="primary"?"Remove Trait":"Starting Trait"}),a.jsx(U,{size:"sm",variant:h==="secondary"?"default":"outline",disabled:w,className:F("flex-1 text-xs",h==="secondary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:p=>{p.stopPropagation(),v("secondary")},children:h==="secondary"?"Remove Trait":"Late Game Trait"})]})})]})}function xT(e,t){const n=g.useMemo(()=>e.map(l=>{var c;return{id:l.id||l.name,name:l.name,description:l.description||"",category:l.category||"",effects:((c=l.effects)==null?void 0:c.map(u=>`${u.type} ${u.value||""}`).filter(Boolean))||[],tags:l.tags||[],originalTrait:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"description",weight:.6},{name:"name",weight:.3},{name:"effects",weight:.1}],includeScore:!0,includeMatches:!0,ignoreLocation:!0,minMatchCharLength:3,threshold:.6}),[]),r=g.useMemo(()=>new ln(n,s),[n,s]),i=g.useMemo(()=>{const l=t.trim().toLowerCase();if(!l)return n.map((m,h)=>({item:m,refIndex:h,score:0,matches:[]}));const c=r.search(l),u=l.slice(0,Math.min(3,l.length));return c.map(m=>{const h=m.item.description.toLowerCase(),y=new RegExp(`\\b${u}`).test(h)?(m.score??1)*.85:m.score;return{...m,score:y}}).filter(m=>(m.score??1)<=.6).sort((m,h)=>(m.score??1)-(h.score??1))},[r,t,n]);return{filteredTraits:g.useMemo(()=>i.map(l=>l.item.originalTrait),[i]),searchResults:i,searchableTraits:n}}function pg({traits:e,onSelect:t,placeholder:n="Search traits...",className:s="",disabled:r=!1}){const[i,o]=g.useState(""),[l,c]=g.useState(!1),u=Xa("(max-width: 640px)"),d=g.useRef(null),{filteredTraits:f}=xT(e,i),m=g.useMemo(()=>f.map(p=>{var b;return{id:p.edid||p.name,label:p.name,description:p.description||"",category:p.category||"",badge:p.category&&a.jsx(Z,{variant:"outline",className:"text-xs",children:p.category}),metadata:{originalTrait:p,effectsCount:((b=p.effects)==null?void 0:b.length)||0}}}),[f]),h=p=>{const b=e.find(j=>(j.edid||j.name)===p.id);b&&(t(b),c(!1),o(""))},v=p=>{o(p.target.value),setTimeout(()=>{var b;(b=d.current)==null||b.focus()},0)},y=(p,b)=>{var j;return a.jsx("div",{className:"flex items-start gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:p.label}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[p.badge&&a.jsx("div",{className:"flex-shrink-0",children:p.badge}),((j=p.metadata)==null?void 0:j.effectsCount)&&p.metadata.effectsCount>0&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.metadata.effectsCount," effect",p.metadata.effectsCount!==1?"s":""]})]}),p.description&&a.jsx(Le,{text:p.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]})})},w=()=>a.jsxs(is,{open:l,onOpenChange:c,children:[a.jsx(Va,{asChild:!0,children:a.jsxs(U,{variant:"outline",className:F("w-full justify-between text-left font-normal",!i&&"text-muted-foreground",s),disabled:r,children:[a.jsx("span",{children:i||n}),a.jsx(Je,{className:"h-4 w-4 opacity-50"})]})}),a.jsxs(Fn,{side:"bottom",className:"h-[85vh] max-h-[85vh] p-0 flex flex-col",onOpenAutoFocus:p=>p.preventDefault(),children:[a.jsxs(os,{className:"p-4 border-b flex-shrink-0",children:[a.jsx(ls,{children:"Select Trait"}),a.jsx(Zr,{children:"Choose a trait from the options below"})]}),a.jsx("div",{className:"p-4 border-b flex-shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Dt,{ref:d,placeholder:"Search traits...",value:i,onChange:v,className:"pl-10"}),i&&a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>o(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",children:a.jsx(Me,{className:"h-3 w-3"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:m.length===0?a.jsxs("div",{className:"text-center py-8 px-4",children:[a.jsx("p",{className:"text-muted-foreground",children:"No traits found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search"})]}):a.jsx("div",{className:"p-4 space-y-3",children:m.map(p=>a.jsx(U,{variant:"ghost",className:"w-full justify-start h-auto p-5 text-left hover:bg-muted/60 rounded-lg",onClick:()=>h(p),children:a.jsx("div",{className:"w-full",children:y(p)})},p.id))})})]})]}),x=()=>a.jsx(Cu,{options:m,onSelect:h,placeholder:n,className:s,disabled:r,renderOption:y,emptyMessage:"No traits found",searchQuery:i,onSearchQueryChange:o});return u?a.jsx(w,{}):a.jsx(x,{})}function vT(e){const t=e.map(n=>n.category).filter(Boolean);return[...new Set(t)].sort()}function MZ(e){const t=e.flatMap(n=>{var s;return((s=n.effects)==null?void 0:s.map(r=>r.type))||[]});return[...new Set(t)].sort()}function yT(e){const t=e.flatMap(n=>n.tags||[]);return[...new Set(t)].sort()}function RZ(){const[e,t]=g.useState({search:"",category:"",tags:[]}),{data:n,loading:s,error:r}=Gi(),i=g.useMemo(()=>n.filter(u=>{var d;if(e.search){const f=e.search.toLowerCase();if(![u.name,u.description,u.category,...u.tags||[],...((d=u.effects)==null?void 0:d.map(h=>h.type))||[]].join(" ").toLowerCase().includes(f))return!1}return!(e.category&&u.category!==e.category||e.tags.length>0&&!e.tags.some(m=>{var h,v;return((h=u.tags)==null?void 0:h.includes(m))||u.category===m||((v=u.effects)==null?void 0:v.some(y=>y.type===m))}))}),[n,e]),o=g.useMemo(()=>vT(n),[n]),l=g.useMemo(()=>MZ(n),[n]),c=g.useMemo(()=>yT(n),[n]);return{traits:i,allTraits:n,loading:s,error:r,filters:e,setFilters:t,allCategories:o,allEffectTypes:l,allTags:c}}function bT({className:e}){const{allTraits:t}=RZ(),{build:n,addTraitToSlot:s,removeTrait:r,getRegularTraitLimit:i,getBonusTraitLimit:o}=Xe(),l=lt();i(),o();const c=n.traits.regular.map(v=>t.find(y=>y.edid===v)).filter(Boolean),u=n.traits.bonus.map(v=>t.find(y=>y.edid===v)).filter(Boolean),d=(v,y)=>{v.edid&&s(v.edid,y)},f=v=>{r(v)},m=()=>{l("/build/traits")},h=t.filter(v=>v.edid&&!n.traits.regular.includes(v.edid)&&!n.traits.bonus.includes(v.edid));return a.jsx(en,{title:"Traits",navigateTo:"traits",onNavigate:m,className:e,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Starting"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Z,{variant:"outline",className:"text-xs",children:"Slot 1"}),c[0]&&a.jsx(Z,{variant:"default",className:"text-xs",children:"Starting"})]}),c[0]?a.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:c[0].name}),a.jsx(Le,{text:c[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>f(c[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:a.jsx(Me,{className:"h-3 w-3"})})]}):a.jsx(pg,{traits:h,onSelect:v=>d(v,"regular"),placeholder:"Select starting trait...",className:"w-full"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Z,{variant:"outline",className:"text-xs",children:"Slot 2"}),c[1]&&a.jsx(Z,{variant:"default",className:"text-xs",children:"Starting"})]}),c[1]?a.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:c[1].name}),a.jsx(Le,{text:c[1].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>f(c[1].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:a.jsx(Me,{className:"h-3 w-3"})})]}):a.jsx(pg,{traits:h,onSelect:v=>d(v,"regular"),placeholder:"Select starting trait...",className:"w-full"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Late Game"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Z,{variant:"outline",className:"text-xs",children:"Slot 1"}),u[0]&&a.jsx(Z,{variant:"secondary",className:"text-xs",children:"Late Game"})]}),u[0]?a.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-gray-50/50 border-gray-400 shadow-gray-400/20",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:u[0].name}),a.jsx(Le,{text:u[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>f(u[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:a.jsx(Me,{className:"h-3 w-3"})})]}):a.jsx(pg,{traits:h,onSelect:v=>d(v,"bonus"),placeholder:"Select late game trait...",className:"w-full"})]})]})]})})}const DZ=()=>{const{build:e,resetBuild:t,getSummary:n,setBuildName:s,setBuildNotes:r}=Xe(),i=lt(),o=n(),[l,c]=g.useState(!1),u=()=>{navigator.clipboard.writeText(window.location.href)},d=()=>{confirm("Are you sure you want to reset your character build? This cannot be undone.")&&t()},f=()=>{c(!1),i("/build")},m=h=>{c(!1),i(`/build#${h}`),setTimeout(()=>{const v=document.getElementById(h);v==null||v.scrollIntoView({behavior:"smooth",block:"start"})},100)};return a.jsx("div",{className:"fixed bottom-4 right-4",style:{zIndex:Nt.MODAL+1},children:a.jsxs(is,{open:l,onOpenChange:c,children:[a.jsx(Va,{asChild:!0,children:a.jsx(U,{size:"lg",className:`h-12 w-12 rounded-full shadow-lg transition-opacity duration-200 ${l?"opacity-0 pointer-events-none":"opacity-100"}`,style:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))"},children:a.jsx(ff,{className:"h-5 w-5"})})}),a.jsx(Fn,{side:"right",className:"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0",children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs(os,{className:"p-6 pb-4 border-b",children:[a.jsxs(ls,{className:"flex items-center gap-2",children:[a.jsx(ff,{className:"h-5 w-5"}),o.name||"Character Build"]}),a.jsx(Zr,{children:"Quick reference and editing for your character build"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[a.jsx(IS,{name:e.name,notes:e.notes,onNameChange:s,onNotesChange:r,className:"mb-0"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(oE,{}),a.jsx(FC,{}),a.jsx(bT,{}),a.jsx(pE,{}),a.jsx(xE,{})]}),a.jsx(qS,{showControls:!0,showSummary:!0,compact:!1}),a.jsx(pT,{}),a.jsx(JC,{navigate:i}),a.jsx(A$,{build:e})]}),a.jsxs("div",{className:"p-6 pt-4 border-t bg-muted/50",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(U,{onClick:f,className:"flex-1",children:[a.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Full Build Page"]}),a.jsxs(U,{variant:"outline",onClick:u,children:[a.jsx(y3,{className:"w-4 h-4 mr-2"}),"Share"]}),a.jsxs(U,{variant:"destructive",onClick:d,children:[a.jsx(xD,{className:"w-4 h-4 mr-2"}),"Reset"]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Quick Navigation:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[!e.race&&a.jsx(U,{variant:"outline",size:"sm",onClick:()=>m("race"),children:"Race"}),!e.stone&&a.jsx(U,{variant:"outline",size:"sm",onClick:()=>m("birthsign"),children:"Birthsign"}),e.traits.regular.length===0&&e.traits.bonus.length===0&&a.jsx(U,{variant:"outline",size:"sm",onClick:()=>m("traits"),children:"Traits"}),!e.religion&&a.jsx(U,{variant:"outline",size:"sm",onClick:()=>m("religion"),children:"Religion"}),!e.favoriteBlessing&&a.jsx(U,{variant:"outline",size:"sm",onClick:()=>m("favorite-blessing"),children:"Favorite Blessing"}),e.skills.major.length===0&&e.skills.minor.length===0&&a.jsx(U,{variant:"outline",size:"sm",onClick:()=>m("skills"),children:"Skills"}),e.destinyPath.length===0&&a.jsx(U,{variant:"outline",size:"sm",onClick:()=>m("destiny"),children:"Destiny"})]})]})]})]})})]})})},LZ=e=>btoa(unescape(encodeURIComponent(JSON.stringify(e)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),zZ=e=>{try{const t=e.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(escape(atob(t))))}catch{return null}},PZ=()=>{const e=yr(s=>s.build),t=yr(s=>s.setBuild),n=g.useRef(!1);g.useEffect(()=>{if(n.current){console.log("ðŸ”„ [URL Sync] Hydration already completed, skipping...");return}console.log("ðŸ”„ [URL Sync] Starting hydration...");const s=window.location.hash,[r,i]=s.split("?"),l=new URLSearchParams(i||"").get("b");if(l){console.log("ðŸ”„ [URL Sync] Found encoded build in URL:",l);const c=zZ(l);if(console.log("ðŸ”„ [URL Sync] Decoded build:",c),(c==null?void 0:c.v)===1){const u=oa(c);console.log("ðŸ”„ [URL Sync] Setting validated build from URL..."),t(u),console.log("âœ… [URL Sync] Build set from URL")}}else console.log("ðŸ”„ [URL Sync] No encoded build found in URL");n.current=!0,console.log("âœ… [URL Sync] Hydration completed")},[t]),g.useEffect(()=>{var u;if(!n.current||!e)return;console.log("ðŸ”„ [URL Sync] Updating URL with build state:",e),console.log("ðŸ”„ [URL Sync] Build state details:",{race:e.race,stone:e.stone,destinyPath:e.destinyPath,level:(u=e.attributeAssignments)==null?void 0:u.level});const s=LZ(e);console.log("ðŸ”„ [URL Sync] Encoded build:",s);const r=window.location.hash,[i,o]=r.split("?"),l=new URLSearchParams(o||"");l.set("b",s);const c=`${i}?${l.toString()}`;window.history.replaceState(null,"",c),console.log("âœ… [URL Sync] URL updated successfully")},[e.v,e.name,e.notes,e.race,e.stone,e.religion,e.favoriteBlessing,e.traits,e.traitLimits,e.skills,e.perks,e.skillLevels,e.equipment,e.destinyPath,e.userProgress,e.attributeAssignments])},wT=g.forwardRef(({className:e,collapsed:t,...n},s)=>a.jsx("aside",{ref:s,"data-collapsed":t?"":void 0,className:F("flex flex-col bg-card border-r border-skyrim-gold/20 h-[calc(100vh-3rem)] sticky top-12 transition-all duration-300 ease-in-out",t?"w-0 overflow-hidden opacity-0":"w-64 opacity-100",e),...n}));wT.displayName="Sidebar";const jT=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:F("flex-1 flex flex-col justify-start overflow-y-auto px-2 py-2",e),...t}));jT.displayName="SidebarContent";const NT=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:F("mb-2",e),...t}));NT.displayName="SidebarGroup";const ST=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:F("px-3 py-2 border-b border-skyrim-gold/20 flex items-center gap-2 min-h-[48px]",e),...t}));ST.displayName="SidebarHeader";const kT=g.forwardRef(({className:e,...t},n)=>a.jsx("ul",{ref:n,className:F("flex flex-col gap-0.5 list-none p-0 m-0",e),...t}));kT.displayName="SidebarMenu";const CT=g.forwardRef(({className:e,asChild:t,isActive:n,...s},r)=>{const i=t?"span":"button";return a.jsx(i,{ref:r,"data-active":n?"":void 0,className:F("group flex items-center w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out","hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] hover:border-l-4","active:scale-[0.98] active:bg-skyrim-gold/25","cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",n?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent",e),tabIndex:0,...s})});CT.displayName="SidebarMenuButton";const ET=g.forwardRef(({className:e,...t},n)=>a.jsx("li",{ref:n,className:F("relative flex items-stretch",e),...t}));ET.displayName="SidebarMenuItem";const AT=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:e,...t}));AT.displayName="SidebarRail";function $Z(e={}){const{autoLoad:t=!0,refreshOnMount:n=!1}=e,{data:s,loading:r,error:i,load:o}=xr(),l=g.useCallback(async()=>{t&&s.length===0&&await o()},[t,s.length,o]),c=g.useCallback(async()=>{await o()},[o]),u=g.useCallback(()=>{},[]);g.useEffect(()=>{t&&s.length===0&&l()},[t,s.length,l]),g.useEffect(()=>{n&&c()},[n,c]);const d=s.length,f=[...new Set(s.map(N=>N.category).filter(Boolean))],m=[...new Set(s.flatMap(N=>N.effects.map(A=>A.name)))],h=[...new Set(s.flatMap(N=>N.ingredients))],v=new Date().toISOString(),y=s.length>0?{recipes:s,totalCount:d,categories:f,effects:m,ingredients:h,lastUpdated:v}:null,w=g.useCallback(N=>xr.getState().getByName(N),[]),x=g.useCallback(N=>xr.getState().getByCategory(N),[]),p=g.useCallback(N=>xr.getState().getByDifficulty(N),[]),b=g.useCallback(N=>xr.getState().getByIngredient(N),[]),j=g.useCallback(N=>xr.getState().getByEffect(N),[]);return{recipes:s,recipeData:y,loading:r,error:i,totalCount:d,categories:f,effects:m,ingredients:h,lastUpdated:v,loadRecipes:l,refresh:c,clearError:u,getRecipeByName:w,getRecipesByCategory:x,getRecipesByDifficulty:p,getRecipesByIngredient:b,getRecipesByEffect:j}}function OZ(e,t={}){const{initialFilters:n={},enableSearch:s=!0,enableSorting:r=!0}=t,i=Array.isArray(e)?e:[],[o,l]=g.useState({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null,...n}),[c,u]=g.useState([]),[d,f]=g.useState("name"),[m,h]=g.useState("asc"),v=g.useCallback(D=>{c.some(M=>M.value===D.value&&M.category===D.category)||u(M=>[...M,D])},[c]),y=g.useCallback(D=>{u(M=>M.filter(I=>I.id!==D))},[]),w=g.useCallback(()=>{u([])},[]),x=g.useCallback(D=>{l(M=>({...M,searchTerm:D}))},[]),p=g.useCallback(D=>{l(M=>({...M,categories:D}))},[]),b=g.useCallback(D=>{l(M=>({...M,effects:D}))},[]),j=g.useCallback(D=>{l(M=>({...M,ingredients:D}))},[]),N=g.useCallback(D=>{l(M=>({...M,difficulties:D}))},[]),A=g.useCallback(D=>{l(M=>({...M,hasEffects:D}))},[]),k=g.useCallback(D=>{l(M=>({...M,isComplex:D}))},[]),C=g.useCallback((D,M)=>{l(I=>({...I,minIngredientCount:D,maxIngredientCount:M}))},[]),S=g.useCallback((D,M)=>{l(I=>({...I,minMagnitude:D,maxMagnitude:M}))},[]),E=g.useCallback(()=>{l({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null}),u([])},[]),T=g.useCallback(()=>{l(D=>({...D,searchTerm:""}))},[]),z=g.useCallback(D=>{h(D)},[]),R=g.useCallback(()=>{h(D=>D==="asc"?"desc":"asc")},[]),_=g.useMemo(()=>{let D=Ke.applyFilters(i,o);if(c.length>0){const M=c.reduce((I,B)=>{switch(B.category){case"categories":I.categories.push(B.value);break;case"effects":I.effects.push(B.value);break;case"ingredients":I.ingredients.push(B.value);break;case"difficulties":I.difficulties.push(B.value);break}return I},{categories:[],effects:[],ingredients:[],difficulties:[]});M.categories.length>0&&(D=Ke.filterByCategories(D,M.categories)),M.effects.length>0&&(D=Ke.filterByEffects(D,M.effects)),M.ingredients.length>0&&(D=Ke.filterByIngredients(D,M.ingredients)),M.difficulties.length>0&&(D=Ke.filterByDifficulties(D,M.difficulties))}return r&&(D=Ke.sort(D,d,m)),D},[i,o,c,r,d,m]),$=g.useMemo(()=>!s||!o.searchTerm.trim()?[]:Ke.search(i,o.searchTerm),[i,o.searchTerm,s]),L=g.useMemo(()=>o.searchTerm.trim()!==""||o.categories.length>0||o.effects.length>0||o.ingredients.length>0||o.difficulties.length>0||o.hasEffects!==null||o.isComplex!==null||o.minIngredientCount!==null||o.maxIngredientCount!==null||o.minMagnitude!==null||o.maxMagnitude!==null||c.length>0,[o,c]),O=g.useMemo(()=>{let D=0;return o.searchTerm.trim()&&D++,o.categories.length>0&&(D+=o.categories.length),o.effects.length>0&&(D+=o.effects.length),o.ingredients.length>0&&(D+=o.ingredients.length),o.difficulties.length>0&&(D+=o.difficulties.length),o.hasEffects!==null&&D++,o.isComplex!==null&&D++,(o.minIngredientCount!==null||o.maxIngredientCount!==null)&&D++,(o.minMagnitude!==null||o.maxMagnitude!==null)&&D++,D+=c.length,D},[o,c]);return{filters:o,searchTerm:o.searchTerm,selectedTags:c,setSelectedTags:u,addTagFilter:v,removeTagFilter:y,clearAllTags:w,filteredRecipes:_,searchResults:$,hasActiveFilters:L,filterCount:O,setSearchTerm:x,setCategories:p,setEffects:b,setIngredients:j,setDifficulties:N,setHasEffects:A,setIsComplex:k,setIngredientCountRange:C,setMagnitudeRange:S,clearFilters:E,clearSearch:T,sortBy:d,sortOrder:m,setSortBy:f,setSortOrder:z,toggleSortOrder:R}}function IZ(e,t={}){const{enableStatistics:n=!0,enableGrouping:s=!0}=t,r=Array.isArray(e)?e:[],i=g.useMemo(()=>n?Ke.getStatistics(r):{totalRecipes:0,recipesByCategory:{},recipesByDifficulty:{},recipesByEffect:{},averageIngredientCount:0,averageEffectCount:0,mostCommonIngredients:[],mostCommonEffects:[]},[r,n]),o=g.useMemo(()=>{if(!s)return{};const b={};return r.forEach(j=>{const N=j.category||"Uncategorized";b[N]||(b[N]=[]),b[N].push(j)}),b},[r,s]),l=g.useMemo(()=>{if(!s)return{};const b={};return r.forEach(j=>{const N=j.difficulty;b[N]||(b[N]=[]),b[N].push(j)}),b},[r,s]),c=g.useMemo(()=>{if(!s)return{};const b={};return r.forEach(j=>{j.effects.forEach(N=>{b[N.name]||(b[N.name]=[]),b[N.name].push(j)})}),b},[r,s]),u=g.useMemo(()=>{if(!s)return{};const b={};return r.forEach(j=>{j.ingredients.forEach(N=>{b[N]||(b[N]=[]),b[N].push(j)})}),b},[r,s]),d=g.useMemo(()=>Ke.getUniqueCategories(r),[r]),f=g.useMemo(()=>Ke.getUniqueDifficulties(r),[r]),m=g.useMemo(()=>Ke.getUniqueEffects(r),[r]),h=g.useMemo(()=>Ke.getUniqueIngredients(r),[r]),v=g.useMemo(()=>[{name:"Recipe Categories",options:d},{name:"Effects",options:m},{name:"Ingredients",options:h},{name:"Difficulty",options:f}],[d,m,h,f]),y=g.useMemo(()=>(b,j)=>{const N=b.ingredientCount-j.ingredientCount,A=b.effectCount-j.effectCount,k=b.totalMagnitude-j.totalMagnitude,C=b.maxDuration-j.maxDuration,S=new Set(b.ingredients),E=new Set(j.ingredients),T=[...S].filter(M=>E.has(M)),z=[...S].filter(M=>!E.has(M)),R=[...E].filter(M=>!S.has(M)),_=new Set(b.effects.map(M=>M.name)),$=new Set(j.effects.map(M=>M.name)),L=[..._].filter(M=>$.has(M)),O=[..._].filter(M=>!$.has(M)),D=[...$].filter(M=>!_.has(M));return{recipe1:b,recipe2:j,differences:{ingredientCount:{difference:N,percentage:j.ingredientCount>0?N/j.ingredientCount*100:0},effectCount:{difference:A,percentage:j.effectCount>0?A/j.effectCount*100:0},magnitude:{difference:k,percentage:j.totalMagnitude>0?k/j.totalMagnitude*100:0},duration:{difference:C,percentage:j.maxDuration>0?C/j.maxDuration*100:0},ingredients:{added:z,removed:R,common:T},effects:{added:O,removed:D,common:L}}}},[]),w=g.useMemo(()=>b=>{if(b.ingredientCount===0)return 0;const j=b.totalMagnitude*b.maxDuration,N=b.ingredientCount;return j/N},[]),x=g.useMemo(()=>b=>{let j=0;switch(j+=b.ingredientCount*.3,j+=b.effectCount*.4,j+=b.effects.reduce((N,A)=>N+A.magnitude*A.duration*.1,0),b.difficulty){case"Simple":j+=1;break;case"Moderate":j+=2;break;case"Complex":j+=3;break}return Math.round(j*10)/10},[]),p=g.useMemo(()=>b=>Ke.getEffectComparisons(b,r),[r]);return{statistics:i,recipesByCategory:o,recipesByDifficulty:l,recipesByEffect:c,recipesByIngredient:u,availableCategories:d,availableDifficulties:f,availableEffects:m,availableIngredients:h,searchCategories:v,compareRecipes:y,getRecipeEfficiency:w,getRecipeComplexity:x,getEffectComparisons:p}}const Yw=50;function BZ(e){const[t,n]=g.useState(1),s=g.useRef([]),r=g.useMemo(()=>{const u=t*Yw;return e.slice(0,u)},[e,t]);g.useEffect(()=>{const u=s.current;(u.length!==e.length||e.some((f,m)=>{var h;return f.name!==((h=u[m])==null?void 0:h.name)}))&&(n(1),s.current=e)},[e]);const i=g.useMemo(()=>r.length<e.length,[r.length,e.length]),o=g.useCallback(()=>{i&&n(u=>u+1)},[i]),l=g.useCallback(()=>{n(1)},[]),c=g.useMemo(()=>({displayedItems:r.length,totalItems:e.length,hasMore:i,currentPage:t,itemsPerPage:Yw}),[r.length,e.length,i,t]);return{displayedItems:r,loadMore:o,resetPagination:l,paginationInfo:c,hasMore:i}}function Tv({recipe:e,variant:t="default",onClick:n,isSelected:s=!1,showEffects:r=!0,showIngredients:i=!0,effectComparisons:o=[]}){const l=()=>{n==null||n()},c=w=>typeof w=="string"?w:w&&typeof w=="object"?w.item?w.item:w.name?w.name:w.label?w.label:w.id?w.id:"Unknown Ingredient":String(w||""),u=w=>typeof w=="string"?w:typeof w=="number"?w.toString():w&&typeof w=="object"?w.name?w.name:w.label?w.label:w.id?w.id:w.item?w.item:w.category?w.category:c(w):String(w||""),d=w=>a.jsx(Na,{className:"h-4 w-4 text-green-500"}),f=w=>{if(typeof w=="string")return{name:w,count:1};if(w&&typeof w=="object"){const x=c(w),p=w.count||w.amount||1;return{name:x,count:p}}return{name:String(w||""),count:1}},m=w=>u(w.description||""),h=()=>a.jsxs(ce,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[a.jsx(be,{className:"pb-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-medium truncate",children:u(e.name)}),a.jsx("div",{className:"flex gap-1",children:e.category&&a.jsx(Z,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),a.jsx(de,{className:"pt-0",children:a.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.ingredientCount," ingredients â€¢ ",e.effectCount," effects"]})})]}),v=()=>a.jsxs(ce,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[a.jsx(be,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium truncate",children:u(e.name)}),e.description&&a.jsx(Le,{text:u(e.description),className:"text-sm text-muted-foreground mt-1 line-clamp-2",as:"p"})]}),a.jsx("div",{className:"flex flex-col gap-1 ml-2",children:e.category&&a.jsx(Z,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),a.jsx(de,{className:"pt-0",children:a.jsxs("div",{className:"space-y-2",children:[i&&e.ingredients.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:["Ingredients (",e.ingredientCount,")"]}),a.jsx("div",{className:"space-y-1",children:e.ingredients.map((w,x)=>{const{name:p,count:b}=f(w);return a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:p}),a.jsxs("span",{className:"font-medium",children:["Ã—",b]})]},x)})})]}),r&&e.effects.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:["Effects (",e.effectCount,")"]}),a.jsx("div",{className:"space-y-2",children:e.effects.map((w,x)=>a.jsx("div",{className:"p-2 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-2",children:[d(),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-xs mb-1",children:u(w.name)}),a.jsx("div",{className:"text-xs text-muted-foreground",children:a.jsx(Le,{text:m(w),className:"text-xs text-muted-foreground"})})]})]})},x))})]}),!1]})})]}),y=()=>a.jsxs(ce,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[a.jsx(be,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium",children:u(e.name)}),e.description&&a.jsx(Le,{text:u(e.description),className:"text-sm text-muted-foreground mt-1",as:"p"})]}),a.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[e.category&&a.jsx(Z,{variant:"secondary",className:"text-xs",children:u(e.category)}),e.type&&a.jsx(Z,{variant:"outline",className:"text-xs",children:u(e.type)})]})]})}),a.jsx(de,{className:"pt-0",children:a.jsxs("div",{className:"space-y-3",children:[i&&e.ingredients.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Ingredients"}),a.jsx("div",{className:"space-y-2",children:e.ingredients.map((w,x)=>{const{name:p,count:b}=f(w);return a.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-lg",children:[a.jsx("span",{className:"text-sm",children:p}),a.jsxs("span",{className:"font-medium text-sm",children:["Ã—",b]})]},x)})})]}),r&&e.effects.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-3",children:"Effects"}),a.jsx("div",{className:"space-y-3",children:e.effects.map((w,x)=>a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[d(),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-sm mb-1",children:u(w.name)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:a.jsx(Le,{text:m(w),className:"text-sm text-muted-foreground"})})]})]})},x))})]}),!1,a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t",children:[a.jsxs("span",{children:["Total Magnitude: ",e.totalMagnitude]}),a.jsxs("span",{children:["Max Duration: ",e.maxDuration,"s"]})]})]})})]});switch(t){case"compact":return h();case"detailed":return y();default:return v()}}function FZ({recipes:e,variant:t="default",onRecipeClick:n,selectedRecipes:s=[],showEffects:r=!0,showIngredients:i=!0,className:o,getEffectComparisons:l}){const c=u=>{n==null||n(u)};return e.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"No recipes found"})})}):a.jsx("div",{className:`space-y-3 ${o||""}`,children:e.map(u=>a.jsx(Tv,{recipe:u,variant:t,onClick:()=>c(u),isSelected:s.includes(u.name),showEffects:r,showIngredients:i,effectComparisons:(l==null?void 0:l(u))||[]},u.name))})}function HZ({recipes:e,loadMore:t,hasMore:n=!0,columns:s=3,gap:r=12,maxColumnWidth:i,className:o="",variant:l="default",onRecipeClick:c,showEffects:u=!0,showIngredients:d=!0,getEffectComparisons:f}){const[m,h]=g.useState(0),v=g.useRef(null),y=g.useRef(null),w=g.useCallback(()=>i&&m>0?Math.max(1,Math.floor(m/i)):s,[s,i,m]);g.useEffect(()=>{const p=()=>{v.current&&h(v.current.offsetWidth)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),g.useEffect(()=>{if(!t||!n||!y.current)return;const p=new IntersectionObserver(b=>{b.forEach(j=>{j.isIntersecting&&t&&t()})},{threshold:.1,rootMargin:"0px 0px 4000px 0px"});return p.observe(y.current),()=>p.disconnect()},[t,n]);const x=g.useCallback(()=>{const p=w();return a.jsx("div",{className:"w-full",style:{display:"grid",gridTemplateColumns:`repeat(${p}, 1fr)`,gap:`${r}px`},children:e.map(b=>a.jsx(Tv,{recipe:b,variant:l,onClick:()=>c==null?void 0:c(b),showEffects:u,showIngredients:d,effectComparisons:(f==null?void 0:f(b))||[],className:"w-full h-full"},b.name))})},[e,w,r,l,c,u,d,f]);return e.length===0?a.jsx("div",{className:`text-center py-12 ${o}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No recipes to display"})}):a.jsxs("div",{ref:v,className:o,children:[x(),n&&t&&a.jsx("div",{ref:y,className:"w-full h-16 mt-16",style:{minHeight:"64px"}})]})}function UZ({recipes:e,className:t}){const n=P.useMemo(()=>{const l=new Map;return e.forEach(c=>{c.effects.forEach(u=>{const d=u.name||"Unknown Effect",f=u.magnitude||0,m=u.duration||0;l.has(d)||l.set(d,{name:d,count:0,averageMagnitude:0,averageDuration:0,totalMagnitude:0,totalDuration:0,recipes:[]});const h=l.get(d);h.count++,h.totalMagnitude+=f,h.totalDuration+=m,h.recipes.includes(c.name)||h.recipes.push(c.name)})}),l.forEach(c=>{c.averageMagnitude=c.totalMagnitude/c.count,c.averageDuration=c.totalDuration/c.count}),Array.from(l.values()).sort((c,u)=>u.count-c.count)},[e]),s=P.useMemo(()=>{if(n.length===0)return{magnitude:0,duration:0};const l=n.reduce((u,d)=>u+d.averageMagnitude,0),c=n.reduce((u,d)=>u+d.averageDuration,0);return{magnitude:l/n.length,duration:c/n.length}},[n]),r=(l,c)=>{const d=(l-c)/c*100;return d>20?"text-green-600":d>10?"text-green-500":d<-20?"text-red-600":d<-10?"text-red-500":"text-muted-foreground"},i=(l,c)=>{const d=(l-c)/c*100;return d>10?a.jsx(Pc,{className:"h-4 w-4 text-green-500"}):d<-10?a.jsx(np,{className:"h-4 w-4 text-red-500"}):null},o=(l,c)=>{const u=l-c,d=u/c*100,f=u>=0?"+":"";return`${f}${u.toFixed(1)} (${f}${d.toFixed(1)}%)`};return n.length===0?a.jsxs(ce,{className:t,children:[a.jsx(be,{children:a.jsx(_e,{className:"text-lg",children:"Food Effect Meta Analysis"})}),a.jsx(de,{children:a.jsx("p",{className:"text-muted-foreground",children:"No effects found to analyze."})})]}):a.jsxs(ce,{className:t,children:[a.jsxs(be,{children:[a.jsx(_e,{className:"text-lg",children:"Food Effect Meta Analysis"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Analysis of ",n.length," unique effects across ",e.length," recipes"]})]}),a.jsx(de,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:s.magnitude.toFixed(1)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Magnitude"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold",children:[s.duration.toFixed(1),"s"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Duration"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"font-medium text-sm",children:"Effect Analysis"}),n.slice(0,10).map(l=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsx("div",{className:"flex items-start justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{className:"font-medium text-sm",children:l.name}),a.jsxs(Z,{variant:"secondary",className:"text-xs",children:[l.count," recipes"]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Magnitude:"}),a.jsx("span",{className:"font-medium",children:l.averageMagnitude.toFixed(1)}),i(l.averageMagnitude,s.magnitude)]}),a.jsx("div",{className:F("text-xs",r(l.averageMagnitude,s.magnitude)),children:o(l.averageMagnitude,s.magnitude)})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),a.jsxs("span",{className:"font-medium",children:[l.averageDuration.toFixed(1),"s"]}),i(l.averageDuration,s.duration)]}),a.jsx("div",{className:F("text-xs",r(l.averageDuration,s.duration)),children:o(l.averageDuration,s.duration)})]})]}),l.recipes.length>0&&a.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:a.jsxs("div",{className:"text-xs text-muted-foreground mb-1",children:["Found in: ",l.recipes.slice(0,3).join(", "),l.recipes.length>3&&` +${l.recipes.length-3} more`]})})]},l.name)),n.length>10&&a.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing top 10 effects of ",n.length," total"]})]}),a.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Legend"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pc,{className:"h-3 w-3 text-green-500"}),a.jsx("span",{children:"Above average (+10%+)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(np,{className:"h-3 w-3 text-red-500"}),a.jsx("span",{children:"Below average (-10%+)"})]})]})]})]})})]})}function VZ({statistics:e,className:t}){const{totalRecipes:n,foodRecipes:s,alcoholRecipes:r,recipesByCategory:i,recipesByDifficulty:o,averageIngredientCount:l,averageEffectCount:c,averageMagnitude:u,averageDuration:d,topEffects:f,topIngredients:m}=e,h=[{title:"Total Recipes",value:n,icon:o3,description:"All available recipes",color:"text-blue-600"},{title:"Food Recipes",value:s,icon:AD,description:"Culinary recipes",color:"text-green-600"},{title:"Alcohol Recipes",value:r,icon:_D,description:"Beverage recipes",color:"text-purple-600"},{title:"Avg Ingredients",value:l.toFixed(1),icon:ss,description:"Per recipe",color:"text-orange-600"},{title:"Avg Effects",value:c.toFixed(1),icon:sn,description:"Per recipe",color:"text-yellow-600"},{title:"Avg Magnitude",value:u.toFixed(1),icon:Pc,description:"Effect strength",color:"text-red-600"}];return a.jsxs("div",{className:`space-y-6 ${t||""}`,children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(v=>{const y=v.icon;return a.jsxs(ce,{children:[a.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(_e,{className:"text-sm font-medium",children:v.title}),a.jsx(y,{className:`h-4 w-4 ${v.color}`})]}),a.jsxs(de,{children:[a.jsx("div",{className:"text-2xl font-bold",children:v.value}),a.jsx("p",{className:"text-xs text-muted-foreground",children:v.description})]})]},v.title)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ce,{children:[a.jsx(be,{children:a.jsxs(_e,{className:"flex items-center gap-2",children:[a.jsx(Ba,{className:"h-4 w-4"}),"Recipe Categories"]})}),a.jsx(de,{children:a.jsxs("div",{className:"space-y-2",children:[Object.entries(i).sort(([,v],[,y])=>y-v).slice(0,8).map(([v,y])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:v}),a.jsx(Z,{variant:"secondary",className:"text-xs",children:y})]},v)),Object.keys(i).length>8&&a.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["+",Object.keys(i).length-8," more categories"]})]})})]}),a.jsxs(ce,{children:[a.jsx(be,{children:a.jsxs(_e,{className:"flex items-center gap-2",children:[a.jsx(Er,{className:"h-4 w-4"}),"Recipe Difficulties"]})}),a.jsx(de,{children:a.jsx("div",{className:"space-y-2",children:Object.entries(o).sort(([,v],[,y])=>y-v).map(([v,y])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:v}),a.jsx(Z,{variant:v==="Simple"?"default":v==="Moderate"?"secondary":"destructive",className:"text-xs",children:y})]},v))})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ce,{children:[a.jsx(be,{children:a.jsxs(_e,{className:"flex items-center gap-2",children:[a.jsx(sn,{className:"h-4 w-4"}),"Most Common Effects"]})}),a.jsx(de,{children:a.jsx("div",{className:"space-y-2",children:f.slice(0,8).map((v,y)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:v.name}),a.jsxs(Z,{variant:"outline",className:"text-xs",children:[v.count," recipes"]})]},v.name))})})]}),a.jsxs(ce,{children:[a.jsx(be,{children:a.jsxs(_e,{className:"flex items-center gap-2",children:[a.jsx(ss,{className:"h-4 w-4"}),"Most Common Ingredients"]})}),a.jsx(de,{children:a.jsx("div",{className:"space-y-2",children:m.slice(0,8).map((v,y)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:v.name}),a.jsxs(Z,{variant:"outline",className:"text-xs",children:[v.count," recipes"]})]},v.name))})})]})]})]})}function GZ(e,t){return{filteredRecipes:g.useMemo(()=>{if(!t.trim())return e;const r=t.toLowerCase().trim().split(/\s+/);return e.filter(i=>{const o=[i.name,i.output,i.description||"",...i.ingredients.map(l=>typeof l=="string"?l:l&&typeof l=="object"&&(l.name||l.label||l.id)||String(l)),...i.effects.map(l=>l.name),...i.effects.map(l=>l.description),i.category||"",i.difficulty||"",i.type||"",...i.tags].join(" ").toLowerCase();return r.every(l=>o.includes(l))})},[e,t]),searchQuery:t.trim()}}function qZ(){const{recipes:e,loading:t,error:n}=$Z(),{filteredRecipes:s}=OZ(e),{statistics:r,availableCategories:i,availableEffects:o,availableIngredients:l,getEffectComparisons:c}=IZ(e),[u,d]=g.useState("grid"),m=(()=>{try{if(!e||e.length===0)return[];const E=l||[],T=o||[],z=i||[];return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, ingredients, effects, or description...",options:[]},{id:"ingredients",name:"Ingredients",placeholder:"Filter by ingredient...",options:E.map(R=>({id:`ingredient-${R}`,label:R,value:R,category:"Ingredients",description:`Recipes with ${R}`}))},{id:"effects",name:"Effects",placeholder:"Filter by effect...",options:T.map(R=>({id:`effect-${R}`,label:R,value:R,category:"Effects",description:`Recipes with ${R} effect`}))},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:z.map(R=>({id:`category-${R}`,label:R,value:R,category:"Categories",description:`${R} recipes`}))}]}catch{return[]}})(),[h,v]=g.useState([]),y=E=>{let T;typeof E=="string"?T={id:`custom-${E}`,label:E,value:E,category:"Fuzzy Search"}:T={id:`${E.category}-${E.id}`,label:E.label,value:E.value,category:E.category},h.some(z=>z.value===T.value&&z.category===T.category)||v(z=>[...z,T])},w=E=>{v(T=>T.filter(z=>z.id!==E))},x=s.filter(E=>h.length===0?!0:h.every(T=>{switch(T.category){case"Fuzzy Search":return!0;case"Categories":return E.category===T.value;case"Ingredients":return E.ingredients.some(z=>typeof z=="string"?z===T.value:z&&typeof z=="object"?z.item===T.value||z.name===T.value||z.label===T.value||z.id===T.value:!1);case"Effects":return E.effects.some(z=>z.name===T.value);default:return!0}})),p=h.filter(E=>E.category==="Fuzzy Search").map(E=>E.value).join(" "),{filteredRecipes:b}=GZ(x,p),{displayedItems:j,loadMore:N,resetPagination:A,paginationInfo:k,hasMore:C}=BZ(b);g.useEffect(()=>{A()},[h,A]);const S=E=>{};return t?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading recipes..."})]})}):n?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-2",children:"Error loading recipes"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})}):a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Yr,{categories:m,onSelect:y,onCustomSearch:y})})}),a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx(G0,{viewMode:u,onViewModeChange:d})}),a.jsx("div",{className:"my-4",children:h.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>v([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Me,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),h.map(E=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>w(E.id),title:"Click to remove",children:[E.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},E.id))]})}),a.jsxs(qa,{defaultValue:"recipes",className:"w-full",children:[a.jsxs(Za,{className:"mb-4",children:[a.jsx(It,{value:"recipes",children:"Recipes"}),a.jsx(It,{value:"statistics",children:"Statistics"}),a.jsx(It,{value:"meta",children:"Meta Analysis"})]}),a.jsx(Zt,{value:"recipes",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",k.displayedItems," of"," ",k.totalItems," recipes"]}),u==="grid"&&a.jsx(HZ,{recipes:j,variant:"default",columns:3,onRecipeClick:S,showEffects:!0,showIngredients:!0,getEffectComparisons:c,loadMore:N,hasMore:C}),u==="list"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(FZ,{recipes:j,variant:"default",onRecipeClick:S,showEffects:!0,showIngredients:!0,getEffectComparisons:c}),C&&a.jsx("div",{className:"flex justify-center pt-4",children:a.jsxs(U,{variant:"outline",onClick:N,className:"w-full max-w-xs",children:["Load More (",k.displayedItems," of"," ",k.totalItems,")"]})})]})]})}),a.jsx(Zt,{value:"statistics",children:a.jsx(VZ,{statistics:r})}),a.jsx(Zt,{value:"meta",children:a.jsx(UZ,{recipes:e})})]}),a.jsx(Bm,{threshold:400})]})}function ZZ(){return a.jsx(Yt,{title:"Cookbook Reference",description:"Browse and search all available recipes. Find the perfect dish for your character's needs.",children:a.jsx(qZ,{})})}function YZ({path:e,className:t=""}){return e.length===0?a.jsxs("div",{className:`space-y-2 ${t}`,children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Selected Path"}),a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})})]}):a.jsxs("div",{className:`space-y-2 ${t}`,children:[a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Selected Path (",e.length," nodes)"]}),a.jsx("div",{className:"space-y-2",children:e.map((n,s)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium",children:s+1}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-sm",children:n.name}),n.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:n.description})]})]}),a.jsx(Z,{variant:"secondary",className:s===e.length-1?"bg-yellow-600 text-yellow-50":"bg-blue-500",children:s===e.length-1?"Current":"Selected"})]},n.id))})]})}function XZ({stepIndex:e,totalSteps:t,title:n,onBack:s,onOverview:r,onClear:i,canBack:o}){const l=t>0?`${e+1} of ${t}`:"Start";return a.jsx("header",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[a.jsx("div",{className:"flex items-center space-x-2",children:o&&a.jsxs(U,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0",children:[a.jsx(xm,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Go back"})]})}),a.jsxs("div",{className:"flex flex-col items-center flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:n}),a.jsx("div",{className:"text-xs text-muted-foreground",children:l})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(U,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0",children:[a.jsx(j1,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Path overview"})]}),a.jsxs(Xi,{children:[a.jsx(Wi,{asChild:!0,children:a.jsxs(U,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[a.jsx(k3,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"More options"})]})}),a.jsx(Ya,{align:"end",children:a.jsx(un,{onClick:i,children:"Clear Path"})})]})]})]})})}function WZ({step:e,onChange:t}){return a.jsxs(ce,{className:"border-primary/20 bg-primary/5 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-primary"}),a.jsx(be,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),a.jsx(_e,{className:"text-base font-medium text-primary",children:e.name})]}),a.jsxs(U,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:[a.jsx(eD,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Change step"})]})]})}),a.jsxs(de,{className:"pt-0",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e.summary}),e.meta.tags&&e.meta.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:e.meta.tags.map(n=>a.jsx(Z,{variant:"secondary",className:"text-xs",children:n},n))}),e.meta.levelRequirement&&a.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Level ",e.meta.levelRequirement," required"]})]})]})}function KZ({choice:e,onOpenDetails:t,onSelect:n}){return a.jsxs(ce,{className:"hover:shadow-md transition-shadow border-2 border-dashed border-muted hover:border-primary/50",children:[a.jsx(be,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-muted-foreground/30 rounded-full"}),a.jsx(_e,{className:"text-base font-medium",children:e.name})]}),a.jsxs(U,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:[a.jsx(el,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"View details"})]})]})}),a.jsxs(de,{className:"pt-0",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:e.description||"No description available"}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map(s=>a.jsx(Z,{variant:"outline",className:"text-xs",children:s},s))}),e.levelRequirement&&a.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:["Level ",e.levelRequirement," required"]}),a.jsxs(U,{onClick:n,className:"w-full",size:"sm",children:[a.jsx(Dc,{className:"h-4 w-4 mr-2"}),"Select"]})]})]})}function QZ({canBack:e,canNext:t,onBack:n,onOverview:s}){return a.jsx("div",{className:"sticky bottom-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-t",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[a.jsxs(U,{variant:"outline",size:"sm",onClick:n,disabled:!e,className:"flex items-center space-x-2",children:[a.jsx(xm,{className:"h-4 w-4"}),a.jsx("span",{children:"Back"})]}),a.jsx("div",{className:"flex-1 flex justify-center",children:a.jsxs(U,{variant:"ghost",size:"sm",onClick:s,className:"flex items-center space-x-2",children:[a.jsx(j1,{className:"h-4 w-4"}),a.jsx("span",{children:"Path Overview"})]})}),a.jsx(U,{variant:"outline",size:"sm",disabled:!t,className:"flex items-center space-x-2 opacity-50",children:a.jsx("span",{children:"Next"})})]})})}function JZ({open:e,steps:t,currentIndex:n,onJump:s,onClear:r,onClose:i}){return t.length===0?a.jsx(is,{open:e,onOpenChange:i,children:a.jsxs(Fn,{side:"bottom",className:"h-[80vh]",children:[a.jsx(os,{children:a.jsx(ls,{children:"Path Overview"})}),a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"No destiny path selected yet"}),a.jsx(U,{onClick:i,children:"Start Building"})]})]})}):a.jsx(is,{open:e,onOpenChange:i,children:a.jsxs(Fn,{side:"bottom",className:"h-[80vh]",children:[a.jsx(os,{className:"flex flex-row items-center justify-between px-0",children:a.jsx(ls,{className:"flex-1 min-w-0",children:"Path Overview"})}),a.jsx(_i,{className:"flex-1 mt-6",children:a.jsx("div",{className:"space-y-2",children:t.map((o,l)=>a.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${l===n?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>s(l),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Z,{variant:l===n?"default":"secondary",children:l+1}),a.jsx("h3",{className:"font-medium text-sm",children:o.name})]}),a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:o.summary}),o.meta.tags&&o.meta.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[o.meta.tags.slice(0,3).map(c=>a.jsx(Z,{variant:"outline",className:"text-xs",children:c},c)),o.meta.tags.length>3&&a.jsxs(Z,{variant:"outline",className:"text-xs",children:["+",o.meta.tags.length-3]})]})]}),l===n&&a.jsx("div",{className:"ml-2",children:a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})})]})},o.id))})}),a.jsxs("div",{className:"mt-4 pt-4 border-t space-y-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground text-center",children:"Tap any step to jump to that point in your path"}),a.jsxs(U,{variant:"outline",size:"sm",onClick:r,className:"w-full text-destructive hover:text-destructive border-destructive/20 hover:border-destructive/40",children:[a.jsx(Dr,{className:"h-4 w-4 mr-2"}),"Restart Path"]})]})]})})}function eY({open:e,choice:t,onSelect:n,onClose:s}){return t?a.jsx(is,{open:e,onOpenChange:s,children:a.jsxs(Fn,{side:"bottom",className:"h-[90vh]",children:[a.jsxs(os,{className:"flex flex-row items-center justify-between",children:[a.jsx(ls,{className:"text-left",children:t.name}),a.jsx(U,{variant:"ghost",size:"sm",onClick:s,children:a.jsx(Me,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto mt-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t.description||"No description available"})]}),t.tags&&t.tags.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(r=>a.jsx(Z,{variant:"secondary",className:"text-xs",children:r},r))})]}),t.levelRequirement&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Requirements"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Level ",t.levelRequirement," required"]})]}),t.prerequisites&&t.prerequisites.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Prerequisites"}),a.jsx("div",{className:"space-y-1",children:t.prerequisites.map(r=>a.jsxs("div",{className:"text-sm text-muted-foreground",children:["â€¢ ",r]},r))})]}),t.lore&&a.jsxs(a.Fragment,{children:[a.jsx(di,{}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Ba,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("h3",{className:"font-medium text-sm",children:"Lore"})]}),a.jsx("p",{className:"text-sm text-muted-foreground italic",children:t.lore})]})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[a.jsxs(U,{onClick:n,className:"w-full",size:"lg",children:[a.jsx(Dc,{className:"h-4 w-4 mr-2"}),"Select This Destiny"]}),a.jsx(U,{variant:"outline",onClick:s,className:"w-full",children:"Close"})]})]})}):null}function tY({steps:e,onRestart:t,onShare:n}){return a.jsxs(ce,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/20",children:[a.jsx(be,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(zc,{className:"h-5 w-5 text-green-600"}),a.jsx(_e,{className:"text-base text-green-800 dark:text-green-200",children:"Destiny Path Complete!"})]})}),a.jsxs(de,{className:"pt-0",children:[a.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 mb-4",children:["You have successfully built a destiny path with ",e.length," steps."]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-medium text-sm mb-2 text-green-800 dark:text-green-200",children:"Your Path:"}),a.jsx("div",{className:"space-y-1",children:e.map((s,r)=>a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Z,{variant:"outline",className:"text-xs",children:r+1}),a.jsx("span",{className:"text-green-700 dark:text-green-300",children:s.name})]},s.id))})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(U,{variant:"outline",size:"sm",onClick:t,className:"flex-1",children:[a.jsx(Dr,{className:"h-4 w-4 mr-2"}),"Start Over"]}),a.jsxs(U,{variant:"outline",size:"sm",onClick:n,className:"flex-1",children:[a.jsx(lD,{className:"h-4 w-4 mr-2"}),"Share Path"]})]})]})]})}function TT(e){const{filterType:t,currentPath:n=[]}=e,{nodes:s,rootNodes:r}=Ka(),[i,o]=g.useState([]),{possiblePaths:l}=Zm({fromNode:n.length>0?n[n.length-1]:void 0}),c=g.useMemo(()=>{if(t!=="build-path"||n.length===0)return s;const w=new Set,x=new Set,p=j=>{x.has(j)||(x.add(j),w.add(j),s.forEach(N=>{N.prerequisites.includes(j)&&p(N.edid)}))},b=n[n.length-1];return p(b.edid),s.filter(j=>w.has(j.edid))},[t,n,s,r]),u=g.useMemo(()=>{if(t==="build-path"){const w=new Set,x=new Set;l.forEach(j=>{j.path.forEach(N=>{w.add(N.edid)}),j.path.length>0&&x.add(j.path[j.path.length-1].edid)});const p=s.filter(j=>w.has(j.edid)),b=s.filter(j=>x.has(j.edid));return[{id:"includes-node",name:"Includes Node",placeholder:"Filter paths that include this node...",options:p.map(j=>{const N=l.filter(A=>A.path.some(k=>k.edid===j.edid)).length;return{id:`includes-${j.id}`,label:j.name,value:j.edid,category:"Includes Node",description:`${N} path${N!==1?"s":""} include ${j.name}`}})},{id:"ends-with-node",name:"Ends With Node",placeholder:"Filter paths that end with this node...",options:b.map(j=>{const N=l.filter(A=>A.path.length>0&&A.path[A.path.length-1].edid===j.edid).length;return{id:`ends-${j.id}`,label:j.name,value:j.edid,category:"Ends With Node",description:`${N} path${N!==1?"s":""} end with ${j.name}`}})}]}else{const w=[...new Set(s.flatMap(p=>p.tags))],x=[...new Set(s.flatMap(p=>p.prerequisites))];return[{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:w.map(p=>({id:`tag-${p}`,label:p,value:p,category:"Tags",description:`Nodes with ${p} tag`}))},{id:"prerequisites",name:"Prerequisites",placeholder:"Filter by prerequisite...",options:x.map(p=>{const b=s.find(j=>j.edid===p);return{id:`prereq-${p}`,label:b?b.name:p,value:p,category:"Prerequisites",description:`Nodes requiring ${b?b.name:p}`}})}]}},[t,c,s,l]),d=g.useCallback(w=>{o(x=>x.some(b=>b.type===w.type&&b.nodeName===w.nodeName)?x:[...x,w])},[]),f=g.useCallback(w=>{o(x=>x.filter(p=>p.id!==w))},[]),m=g.useCallback(()=>{o([])},[]),h=g.useCallback(()=>u.flatMap(w=>w.options),[u]),v=g.useCallback(w=>c.some(x=>x.id===w.id),[c]),y=g.useMemo(()=>t!=="build-path"||i.length===0?l.map(w=>w.path):l.map(w=>w.path).filter(w=>i.every(x=>{switch(x.type){case"includes-node":return w.some(p=>p.edid===x.nodeName||p.edid===x.nodeId);case"ends-with-node":return w.length>0&&(w[w.length-1].edid===x.nodeName||w[w.length-1].edid===x.nodeId);default:return!0}})),[t,i,l]);return{selectedFilters:i,searchCategories:u,addFilter:d,removeFilter:f,clearFilters:m,filteredPaths:y,availableNodes:c,getFilterOptions:h,isNodeAvailable:v}}function _T({searchCategories:e,selectedFilters:t,onFilterSelect:n,onFilterRemove:s,onClearFilters:r,className:i=""}){const o=e.find(d=>d.id==="includes-node"),l=e.find(d=>d.id==="ends-with-node"),c=e.find(d=>d.id==="tags"),u=e.find(d=>d.id==="prerequisites");return a.jsxs("div",{className:`space-y-4 ${i}`,children:[a.jsxs("div",{className:"flex flex-wrap gap-4",children:[o&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Includes"}),a.jsx(hi,{categories:[o],onSelect:n,placeholder:o.placeholder,className:"w-full"})]}),l&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Ends With"}),a.jsx(hi,{categories:[l],onSelect:n,placeholder:l.placeholder,className:"w-full"})]}),c&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx(hi,{categories:[c],onSelect:n,placeholder:c.placeholder,className:"w-full"})]}),u&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Prerequisites"}),a.jsx(hi,{categories:[u],onSelect:n,placeholder:u.placeholder,className:"w-full"})]})]}),t.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Active Filters"}),a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:r,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Me,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),t.map(d=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>s(d.id),title:"Click to remove",children:[a.jsx("span",{className:"text-xs opacity-70 mr-1",children:d.type==="includes-node"?"Includes:":d.type==="ends-with-node"?"Ends:":d.type==="tags"?"Tag:":"Prereq:"}),d.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},d.id))]})]})]})}function nY({onPathChange:e,onPathComplete:t,className:n="",compact:s=!1,currentPath:r=[]}){var S,E;const{currentPath:i,currentNode:o,isValidPath:l,pathErrors:c,setPath:u,clearPath:d,goToPathIndex:f,isPathComplete:m,getPathSummary:h}=tv({initialPath:r}),{possiblePaths:v}=Zm({fromNode:o||void 0}),{nodes:y}=Ka(),w=TT({filterType:"build-path",currentPath:i}),x=w.selectedFilters.length>0?w.filteredPaths:v.map(T=>T.path),p=T=>{if(typeof T=="string")return;let z,R;if(T.category==="Includes Node")z="includes-node",R=T.id.replace(/^includes-/,"");else if(T.category==="Ends With Node")z="ends-with-node",R=T.id.replace(/^ends-/,"");else return;const _={id:T.id,type:z,nodeName:T.value,nodeId:R,label:T.label};w.addFilter(_)},b=T=>{w.removeFilter(T)},j=()=>{w.clearFilters()},N=(T,z)=>{let R;if(i.length===0)R=T.slice(0,z+1);else{if(z===0)return;const _=T.slice(1,z+1);R=[...i,..._]}u(R),e==null||e(R),m&&(t==null||t(R))},A=T=>{f(T),e==null||e(i)},k=()=>{d(),e==null||e([])},C=h();return s?a.jsxs("div",{className:`space-y-4 ${n}`,children:[a.jsx(YZ,{path:i}),i.length>0&&a.jsx("div",{className:"flex justify-end",children:a.jsxs(U,{variant:"outline",size:"sm",onClick:k,className:"text-xs",children:[a.jsx(Dr,{className:"w-3 h-3 mr-1"}),"Clear Path"]})}),x.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Possible Remaining Paths"}),a.jsx(_i,{className:"h-[200px]",children:a.jsx("div",{className:"p-4",children:a.jsx(Ep,{possiblePaths:x.map(T=>({path:T,isComplete:!1,endNode:T[T.length-1]})),selectedPathLength:i.length,onPathClick:N,variant:"compact"})})})]}),!l&&c.length>0&&a.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(Qo,{className:"w-3 h-3"}),a.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),a.jsx("ul",{className:"space-y-0.5",children:c.map((T,z)=>a.jsxs("li",{children:["â€¢ ",T]},z))})]})]}):a.jsxs("div",{className:`space-y-6 ${n}`,children:[a.jsxs(ce,{children:[a.jsx(be,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(_e,{className:"flex items-center gap-2",children:[a.jsx(zc,{className:"w-5 h-5 text-primary"}),"Destiny Path Builder"]}),a.jsx("div",{className:"flex items-center gap-2",children:i.length>0&&a.jsxs(U,{variant:"outline",size:"sm",onClick:k,className:"flex items-center gap-1",children:[a.jsx(Dr,{className:"w-4 h-4"}),"Clear Path"]})})]})}),a.jsxs(de,{children:[a.jsx(QC,{path:i,allNodes:y,onBreadcrumbClick:A,className:"mb-4"}),i.length>0&&a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{children:["Path Length: ",i.length]}),a.jsx("span",{children:"â€¢"}),a.jsxs("span",{children:["Start: ",(S=C.startNode)==null?void 0:S.name]}),a.jsx("span",{children:"â€¢"}),a.jsxs("span",{children:["Current: ",(E=C.endNode)==null?void 0:E.name]}),m&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"â€¢"}),a.jsx(Z,{variant:"default",className:"text-xs",children:"Complete"})]})]}),!l&&c.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[a.jsx(Qo,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Path Validation Errors:"})]}),a.jsx("ul",{className:"text-sm space-y-1",children:c.map((T,z)=>a.jsxs("li",{className:"text-destructive",children:["â€¢ ",T]},z))})]})]})]}),i.length>0&&a.jsxs(ce,{children:[a.jsx(be,{children:a.jsx(_e,{className:"text-lg",children:"Current Path"})}),a.jsx(de,{children:a.jsx("div",{className:"space-y-2",children:i.map((T,z)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50",children:[a.jsx(Z,{variant:"outline",className:"text-xs",children:z+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:T.name}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:T.description})]})]},T.id))})})]}),a.jsxs(ce,{children:[a.jsxs(be,{children:[a.jsx(_e,{className:"text-lg",children:i.length===0?"Choose Your Starting Point":"Possible Paths"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:i.length===0?"Select a root destiny node to begin your path":x.length===0?w.selectedFilters.length>0?"No paths match your current filters":"You have reached the end of this destiny path":w.selectedFilters.length>0?`Showing ${x.length} filtered paths from your current position`:`Explore ${x.length} possible paths from your current position`})]}),a.jsxs(de,{className:"h-[600px] p-0",children:[a.jsx("div",{className:"p-6 pb-6",children:a.jsx(_T,{searchCategories:w.searchCategories,selectedFilters:w.selectedFilters,onFilterSelect:p,onFilterRemove:b,onClearFilters:j})}),x.length===0?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[w.selectedFilters.length>0?a.jsx(rD,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}):a.jsx(zc,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg font-medium",children:w.selectedFilters.length>0?"No paths match your filters":"Path Complete!"}),a.jsx("p",{className:"text-sm",children:w.selectedFilters.length>0?"Try adjusting your filters to see more paths.":"You've reached the end of this destiny path."})]}):a.jsx(_i,{className:"h-[calc(600px-200px)]",children:a.jsx("div",{className:"p-6 pt-4",children:a.jsx(Ep,{possiblePaths:x.map(T=>({path:T,isComplete:!1,endNode:T[T.length-1]})),selectedPathLength:i.length,onPathClick:N})})})]})]})]})}function sY({item:e,originalNode:t,allNodes:n}){const s=r=>n.filter(i=>i.prerequisites.includes(r)).map(i=>i.name);return a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t&&t.prerequisites.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Prereq:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:t.prerequisites.map((r,i)=>a.jsx(Z,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:r},i))})]}),t&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Leads to:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[s(t.name).map((r,i)=>a.jsx(Z,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:r},i)),s(t.name).length===0&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"Terminal"})]})]}),e.tags.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Tags:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((r,i)=>a.jsx(Z,{variant:"secondary",className:"text-xs",children:r},i))})]})]})}function rY({items:e,allNodes:t}){return a.jsx(_i,{className:"h-[calc(100vh-500px)]",children:a.jsx(tF,{type:"single",collapsible:!0,className:"w-full",children:e.map(n=>a.jsxs(TC,{value:n.id,children:[a.jsx(_C,{className:"text-left hover:no-underline",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-bold text-base text-foreground truncate hover:underline",children:n.name}),a.jsx("div",{className:"text-base text-muted-foreground truncate",children:n.description})]})}),a.jsx(MC,{children:a.jsx(sY,{item:n,originalNode:t.find(s=>s.id===n.id),allNodes:t})})]},n.id))})})}const Xw=Nn((e,t)=>({steps:[],currentIndex:-1,nextChoices:[],selectChoice:n=>{const{steps:s,currentIndex:r,nextChoices:i}=t(),o=i.find(c=>c.edid===n);if(!o)return;const l={id:o.edid,name:o.name,summary:o.description||"",meta:{tags:o.tags||[],levelRequirement:o.levelRequirement,lore:o.lore},node:o};e(c=>{const u=[...c.steps],d=c.currentIndex+1;return d<u.length&&u.splice(d,u.length-d),u.push(l),{steps:u,currentIndex:d,nextChoices:[]}})},jumpTo:n=>{const{steps:s}=t();n<0||n>=s.length||e(r=>({currentIndex:n,steps:r.steps.slice(0,n+1),nextChoices:[]}))},clear:()=>{e({steps:[],currentIndex:-1,nextChoices:[]})},setNextChoices:n=>{e({nextChoices:n})},hydrateFromQuery:n=>{try{const s=atob(n),r=JSON.parse(s);r.steps&&Array.isArray(r.steps)&&e({steps:r.steps,currentIndex:r.currentIndex||r.steps.length-1,nextChoices:r.nextChoices||[]})}catch(s){console.warn("Failed to hydrate from query:",s)}},toQuery:()=>{const{steps:n,currentIndex:s,nextChoices:r}=t(),i={steps:n,currentIndex:s,nextChoices:r.map(o=>o.edid)};try{return btoa(JSON.stringify(i))}catch(o){return console.warn("Failed to serialize to query:",o),""}}}));function aY(){const{steps:e,currentIndex:t,nextChoices:n,selectChoice:s,jumpTo:r,clear:i}=Xw(),o=t>=0&&t<e.length?e[t]:null,l=e.length,c=n.length===0,{nodes:u,rootNodes:d}=Ka(),[f,m]=g.useState(!1),[h,v]=g.useState(!1),[y,w]=g.useState(null),[x,p]=g.useState(!1);g.useEffect(()=>{const{setNextChoices:C}=Xw.getState();if(t===-1)C(d);else if(o){const S=u.filter(E=>{var T;return(T=E.prerequisites)==null?void 0:T.includes(o.node.edid)});C(S)}else C([])},[t,o,u,d]);const b=C=>{s(C),v(!1),w(null)},j=C=>{w(C),v(!0)},N=()=>{t>0&&r(t-1)},A=C=>{r(C),m(!1)},k=()=>{i(),m(!1)};return a.jsxs("div",{className:"flex min-h-screen flex-col bg-background",children:[a.jsx(XZ,{stepIndex:t,totalSteps:l,title:(o==null?void 0:o.name)??"Start Destiny",onBack:N,onOverview:()=>m(!0),onClear:k,canBack:t>0}),a.jsxs("main",{className:"flex-1 px-3 py-2 space-y-4",children:[o&&a.jsxs("div",{className:"space-y-2 p-3 rounded-lg bg-muted/20",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-px flex-1 bg-border"}),a.jsx("span",{className:"text-xs font-medium text-muted-foreground px-2",children:"CURRENT STEP"}),a.jsx("div",{className:"h-px flex-1 bg-border"})]}),a.jsx(WZ,{step:o,onChange:()=>p(!0)})]}),o&&!c&&n.length>0&&a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-px h-6 bg-primary/30"})}),!c&&n.length>0&&a.jsxs("section",{"aria-label":"Next choices",className:"space-y-3 p-3 rounded-lg bg-background border border-border",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-px flex-1 bg-border"}),a.jsx("span",{className:"text-xs font-medium text-muted-foreground px-2",children:t===-1?"CHOOSE STARTING DESTINY":"CHOOSE NEXT STEP"}),a.jsx("div",{className:"h-px flex-1 bg-border"})]}),a.jsxs("div",{className:"space-y-2",children:[n.slice(0,3).map(C=>a.jsx(KZ,{choice:C,onOpenDetails:()=>j(C),onSelect:()=>b(C.edid)},C.edid)),n.length>3&&a.jsx("div",{className:"text-center py-2",children:a.jsxs("span",{className:"text-sm text-muted-foreground",children:["+",n.length-3," more choices available"]})})]})]}),c&&l>0&&a.jsx(tY,{steps:e,onRestart:()=>i(),onShare:()=>{}}),l===0&&n.length===0&&a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"No destiny paths available. Please check your prerequisites."})})]}),a.jsx(QZ,{canBack:t>0,canNext:!1,onBack:N,onOverview:()=>m(!0)}),a.jsx(JZ,{open:f,steps:e,currentIndex:t,onJump:A,onClear:k,onClose:()=>m(!1)}),a.jsx(eY,{open:h,choice:y,onSelect:()=>y&&b(y.edid),onClose:()=>{v(!1),w(null)}})]})}function iY(e){return Xa("(min-width: 1024px)")?a.jsx(nY,{...e}):a.jsx(aY,{})}function oY({items:e,filters:t=[]}){const[n,s]=g.useState(null),[r,i]=g.useState("grid"),[o,l]=g.useState({search:"",selectedFilters:{},selectedTags:[]}),c=g.useMemo(()=>{let v=e;if(o.search){const y=o.search.toLowerCase();v=v.filter(w=>w.name.toLowerCase().includes(y)||w.description.toLowerCase().includes(y)||w.tags.some(x=>x.toLowerCase().includes(y)))}return o.selectedTags.length>0&&(v=v.filter(y=>o.selectedTags.some(w=>y.tags.includes(w.value)||y.category===w.value||y.name.toLowerCase().includes(w.value.toLowerCase())))),v},[e,o]),u=g.useMemo(()=>t.length===0?[]:t.map(v=>({...v,options:v.options.map(y=>({...y,count:e.filter(w=>w.tags.includes(y.value)||w.category===y.value).length}))})),[t,e]),d=g.useCallback(v=>{s(v)},[]),f=g.useCallback(v=>{l(v)},[]),m=g.useCallback(v=>{l(y=>({...y,search:v}))},[]),h=g.useCallback(v=>{i(v)},[]);return{selectedItem:n,viewMode:r,currentFilters:o,filteredItems:c,filtersWithCounts:u,handleItemSelect:d,handleFiltersChange:f,handleSearch:m,handleViewModeChange:h,setSelectedItem:s}}function lY(){const{build:e,setDestinyPath:t}=Xe(),{nodes:n,isLoading:s,error:r}=Ka(),i=g.useMemo(()=>e.destinyPath.map(y=>n.find(w=>w.edid===y)).filter(y=>!!y),[e.destinyPath,n]),{currentPath:o}=tv({initialPath:i,validatePath:!0});Zm({fromNode:o.length>0?o[o.length-1]:void 0});const l=TT({filterType:"reference"}),u=g.useMemo(()=>l.selectedFilters.length===0?n:n.filter(y=>l.selectedFilters.every(w=>{var x,p;switch(w.type){case"tags":return(x=y.tags)==null?void 0:x.includes(w.nodeName);case"prerequisites":return(p=y.prerequisites)==null?void 0:p.includes(w.nodeName);default:return!0}})),[n,l.selectedFilters]).map(y=>wF(y));oY({items:u,filters:[]});const d=y=>{if(typeof y=="string")return;let w,x;if(y.category==="Tags")w="tags",x=y.id.replace(/^tag-/,"");else if(y.category==="Prerequisites")w="prerequisites",x=y.id.replace(/^prereq-/,"");else return;const p={id:y.id,type:w,nodeName:y.value,nodeId:x,label:y.label};l.addFilter(p)},f=y=>{l.removeFilter(y)},m=()=>{l.clearFilters()},h=y=>{const w=y.map(x=>x.edid);t(w)},v=y=>{const w=y.map(x=>x.edid);t(w)};return s?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading destiny data..."})]})}):r?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:r}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsx(Yt,{title:"Destiny",description:"Plan your character's destiny through the perk tree. Each node represents a powerful ability or enhancement that will shape your journey.",children:a.jsx("div",{className:"mb-6",children:a.jsxs(qa,{defaultValue:"path",className:"w-full",children:[a.jsxs(Za,{className:"grid w-full grid-cols-2",children:[a.jsx(It,{value:"path",children:"Path Builder"}),a.jsx(It,{value:"reference",children:"Reference"})]}),a.jsxs(Zt,{value:"reference",className:"space-y-4",children:[a.jsx(_T,{searchCategories:l.searchCategories,selectedFilters:l.selectedFilters,onFilterSelect:d,onFilterRemove:f,onClearFilters:m}),a.jsx("div",{className:"w-full",children:a.jsx(rY,{items:u,allNodes:n})})]}),a.jsx(Zt,{value:"path",className:"space-y-4",children:a.jsx(iY,{currentPath:o,onPathChange:h,onPathComplete:v})})]})})})}function cY(){const{data:e,loading:t,error:n}=Xk(),[s,r]=g.useState(null),[i,o]=g.useState(null),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,m]=g.useState("alphabetical"),[h,v]=g.useState("grid"),[y,w]=g.useState("religions"),[x]=U1();g.useEffect(()=>{const M=x.get("tab");M==="blessings"?w("blessings"):M==="religions"&&w("religions")},[x]);const p=g.useMemo(()=>(e||[]).map(gE),[e]),b=g.useMemo(()=>p.map(IC),[p]);g.useMemo(()=>p.filter(M=>M.blessing&&M.blessing.effects.length>0),[p]);const j=()=>{const M=[...new Set((e||[]).map(B=>B.pantheon).filter(Boolean))],I=[...new Set(b.flatMap(B=>B.tags))];return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"pantheons",name:"Pantheons",placeholder:"Search by pantheon...",options:M.map(B=>({id:`pantheon-${B}`,label:B,value:B,category:"Pantheons",description:`Religions from ${B} pantheon`}))},{id:"favored-races",name:"Favored Races",placeholder:"Search by favored race...",options:I.map(B=>({id:`race-${B}`,label:B,value:B,category:"Favored Races",description:`Religions that favor ${B}`}))}]},[N,A]=g.useState([]),k=N.filter(M=>M.category==="Fuzzy Search").map(M=>M.value).join(" "),C=g.useMemo(()=>{let M=p;const I=N.filter(B=>B.category!=="Fuzzy Search");return I.length>0&&(M=M.filter(B=>I.every(H=>{var q;return H.category==="Pantheons"?B.type===H.value:H.category==="Favored Races"?(q=B.favoredRaces)==null?void 0:q.includes(H.value):!0}))),M},[p,N]),{filteredReligions:S}=Ap(C,k),E=g.useMemo(()=>{const M=[...S];return M.sort((I,B)=>{if(f==="alphabetical")return I.name.localeCompare(B.name);if(f==="divine-type"){const H=J=>{switch(J){case"Divine":return 1;case"Daedric":return 2;case"Tribunal":return 3;case"Ancestor":return 4;default:return 5}},q=H(I.type),Y=H(B.type);return q!==Y?q-Y:I.name.localeCompare(B.name)}return 0}),M},[S,f]),T=g.useMemo(()=>{let I=p.filter(H=>H.blessing&&H.blessing.effects.length>0);const B=N.filter(H=>H.category!=="Fuzzy Search");return B.length>0&&(I=I.filter(H=>B.every(q=>{var Y;return q.category==="Pantheons"?H.type===q.value:q.category==="Favored Races"?(Y=H.favoredRaces)==null?void 0:Y.includes(q.value):!0}))),I},[p,N]),{filteredReligions:z}=Ap(T,k),R=g.useMemo(()=>{const M=[...z];return M.sort((I,B)=>{if(f==="alphabetical")return I.name.localeCompare(B.name);if(f==="divine-type"){const H=J=>{switch(J){case"Divine":return 1;case"Daedric":return 2;case"Tribunal":return 3;case"Ancestor":return 4;default:return 5}},q=H(I.type),Y=H(B.type);return q!==Y?q-Y:I.name.localeCompare(B.name)}return 0}),M},[z,f]),_=M=>{const I=typeof M=="string"?{id:M,label:M,value:M,category:"Fuzzy Search"}:{id:M.id,label:M.label,value:M.value,category:M.category};A(B=>[...B,I])},$=M=>{A(I=>I.filter(B=>B.id!==M))},L=M=>{const I=p.find(B=>B.name===M);I&&(r(I),c(!0))},O=M=>{o(M),d(!0)},D=M=>{switch(M){case"alphabetical":return"A-Z";case"divine-type":return"Type";default:return"A-Z"}};return t?a.jsx(Yt,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-lg",children:"Loading religions..."})})}):n?a.jsx(Yt,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-lg text-red-500",children:["Error loading religions: ",n]})})}):a.jsxs(Yt,{title:"Religions",description:"Choose your character's faith and divine blessings",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx(Yr,{categories:j(),onSelect:_,onCustomSearch:_}),N.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>A([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Me,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),N.map(M=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>$(M.id),title:"Click to remove",children:[M.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},M.id))]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(U,{variant:h==="grid"?"default":"outline",size:"sm",onClick:()=>v("grid"),className:"flex items-center gap-2",children:[a.jsx(Fi,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(U,{variant:h==="list"?"default":"outline",size:"sm",onClick:()=>v("list"),className:"flex items-center gap-2",children:[a.jsx(Ha,{className:"h-4 w-4"}),"List"]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Xi,{children:[a.jsx(Wi,{asChild:!0,children:a.jsxs(U,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort: ",D(f),a.jsx(Je,{className:"h-4 w-4"})]})}),a.jsxs(Ya,{children:[a.jsx(un,{onClick:()=>m("alphabetical"),children:"Alphabetical (A-Z)"}),a.jsx(un,{onClick:()=>m("divine-type"),children:"Religion Type"})]})]})})]}),a.jsx("div",{className:"mt-6",children:a.jsxs(qa,{value:y,onValueChange:M=>w(M),children:[a.jsxs(Za,{className:"grid w-full grid-cols-2",children:[a.jsxs(It,{value:"religions",children:["Religions (",E.length,")"]}),a.jsxs(It,{value:"blessings",children:["Blessings (",R.length,")"]})]}),a.jsxs(Zt,{value:"religions",className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"text-sm text-muted-foreground",children:[E.length," religion",E.length!==1?"s":""," found"]})}),a.jsx("div",{className:h==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:E.map(M=>a.jsx(mE,{originalReligion:M,onOpenDetails:L,showToggle:!0,className:h==="list"?"w-full":"h-full"},M.name))}),E.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-lg text-muted-foreground",children:"No religions found matching your criteria"}),a.jsx(U,{variant:"outline",onClick:()=>A([]),className:"mt-4",children:"Clear filters"})]})]}),a.jsxs(Zt,{value:"blessings",className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"text-sm text-muted-foreground",children:[R.length," blessing",R.length!==1?"s":""," found"]})}),a.jsx("div",{className:h==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:R.map(M=>a.jsx(r9,{religion:M,onClick:()=>O(M),showToggle:!0,className:h==="list"?"w-full":"h-full"},M.name))}),R.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-lg text-muted-foreground",children:"No blessings found matching your criteria"}),a.jsx(U,{variant:"outline",onClick:()=>A([]),className:"mt-4",children:"Clear filters"})]})]})]})}),a.jsx(hE,{religion:s,isOpen:l,onOpenChange:c}),a.jsx(c9,{religion:i,isOpen:u,onOpenChange:d})]})}const uY="modulepreload",dY=function(e){return"/lorerim-arcaneum/"+e},Ww={},ps=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=dY(c),c in Ww)return;Ww[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":uY,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function Kw(e){return e.map(t=>({id:`skill-${t.id}`,type:"skill",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...t.keyAbilities||[],...t.metaTags||[],t.scaling||""],originalData:t,url:`/build/perks?skill=${t.id}`}))}function Qw(e){return e.map(t=>({id:`race-${t.id}`,type:"race",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.source||"",...t.tags||[],...t.keywords||[]],originalData:t,url:"/races"}))}function Jw(e){return e.map(t=>{var n;return{id:`trait-${t.id}`,type:"trait",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...((n=t.effects)==null?void 0:n.map(s=>s.description||s.type))||[]],originalData:t,url:"/traits"}})}function ej(e){const t=[];return e.forEach(n=>{var s,r,i,o,l,c,u,d,f,m,h,v,y,w,x;t.push({id:`religion-${n.id||n.name}`,type:"religion",name:n.name,description:((s=n.tenet)==null?void 0:s.description)||"",category:n.type||n.pantheon||"",tags:n.tags||[],searchableText:[n.name,((r=n.tenet)==null?void 0:r.description)||"",n.type||"",n.pantheon||"",...n.tags||[],..._r()?n.favoredRaces||[]:[],...n.worshipRestrictions||[],...((o=(i=n.tenet)==null?void 0:i.effects)==null?void 0:o.map(p=>p.effectName))||[],...((c=(l=n.blessing)==null?void 0:l.effects)==null?void 0:c.map(p=>p.effectName))||[],...((d=(u=n.boon1)==null?void 0:u.effects)==null?void 0:d.map(p=>p.effectName))||[],...((m=(f=n.boon2)==null?void 0:f.effects)==null?void 0:m.map(p=>p.effectName))||[]],originalData:n,url:"/religions"}),n.blessing&&n.blessing.effects.length>0&&t.push({id:`blessing-${n.id||n.name}`,type:"blessing",name:`Blessing of ${n.name}`,description:((h=n.blessing.effects[0])==null?void 0:h.effectDescription)||"",category:"Blessing",tags:n.tags||[],searchableText:[`Blessing of ${n.name}`,n.name,((v=n.blessing.effects[0])==null?void 0:v.effectDescription)||"",((y=n.blessing.effects[0])==null?void 0:y.effectName)||"",...((w=n.blessing.effects)==null?void 0:w.map(p=>p.effectName))||[],...((x=n.blessing.effects)==null?void 0:x.map(p=>p.effectDescription))||[],...n.tags||[],"blessing","divine","worship"],originalData:{...n,blessingOnly:!0},url:"/religions?tab=blessings"})}),t}function tj(e){return e.map(t=>{var n,s;return{id:`birthsign-${t.id||t.edid}`,type:"birthsign",name:t.name,description:t.description,category:t.group,tags:t.tags||[],searchableText:[t.name,t.description||"",t.group||"",...t.tags||[],...((n=t.powers)==null?void 0:n.map(r=>r.name||r.description))||[],...((s=t.stat_modifications)==null?void 0:s.map(r=>r.stat))||[]],originalData:t,url:"/birthsigns"}})}function nj(e){return e.map(t=>({id:`destiny-${t.id}`,type:"destiny",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.lore||"",...t.tags||[],...t.prerequisites||[]],originalData:t,url:"/destiny"}))}function sj(e){return e.map(t=>{var n;return{id:`perk-${t.treeId||t.id}`,type:"perk",name:t.treeName||t.name,description:t.treeDescription||t.description,category:t.category,tags:t.tags||[],searchableText:[t.treeName||t.name,t.treeDescription||t.description||"",t.category||"",...t.tags||[],...((n=t.perks)==null?void 0:n.map(s=>s.name))||[]],originalData:t,url:"/build/perks"}})}function rj(e){return e.map(t=>{var n,s,r,i,o,l;return{id:`perk-ref-${t.edid}`,type:"perk-reference",name:t.name,description:((s=(n=t.ranks[0])==null?void 0:n.description)==null?void 0:s.base)||"",category:t.category,tags:t.tags,searchableText:[t.name,((i=(r=t.ranks[0])==null?void 0:r.description)==null?void 0:i.base)||"",((l=(o=t.ranks[0])==null?void 0:o.description)==null?void 0:l.subtext)||"",t.skillTreeName,t.category,...t.tags,...t.prerequisites,t.isRoot?"root perk":"branch perk",t.totalRanks>1?"multi-rank":"single-rank"],originalData:t,url:`/perk-references?skill=${t.skillTree}&perk=${t.edid}`}})}function aj(e){return e.map(t=>({id:`spell-${t.editorId}`,type:"spell",name:t.name,description:t.description,category:t.school,tags:t.tags,searchableText:[t.name,t.description||"",t.school||"",t.level||"",t.tome||"",...t.tags,...t.effects.map(n=>n.name),...t.effects.map(n=>n.description),t.isAreaSpell?"area spell":"",t.isDurationSpell?"duration spell":"",t.isInstantSpell?"instant spell":"",`magicka cost ${t.magickaCost}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`,`area ${t.maxArea}`].filter(Boolean),originalData:t,url:`/spells?spell=${t.editorId}`}))}function ij(e){return e.map(t=>({id:`recipe-${t.name}`,type:"recipe",name:t.name,description:t.description,category:t.category,tags:t.tags,searchableText:[t.name,t.description||"",t.category||"",t.output||"",t.difficulty||"",t.type||"",...t.tags,...t.ingredients.map(n=>typeof n=="string"?n:n.name||n.item||""),...t.effects.map(n=>n.name),...t.effects.map(n=>n.description),`ingredients ${t.ingredientCount}`,`effects ${t.effectCount}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`].filter(Boolean),originalData:t,url:`/cookbook?recipe=${encodeURIComponent(t.name)}`}))}function fY(e){return{id:e.item.id,name:e.item.name,description:e.item.description||"",summary:e.item.description||"",tags:e.item.tags,category:e.item.category,imageUrl:void 0,effects:[],associatedItems:[],originalSearchResult:e}}function mY(e){return e.map(t=>{var n,s;return{field:t.key||"unknown",snippet:t.value,startIndex:((n=t.indices[0])==null?void 0:n[0])||0,endIndex:((s=t.indices[0])==null?void 0:s[1])||0}})}function oj(e){return e.map(t=>({id:`enchantment-${t.baseEnchantmentId}`,type:"enchantment",name:t.name,description:t.effects.map(n=>n.name).join(", "),category:t.category,tags:[t.targetType,...t.foundOnItems.map(n=>n.type),...t.tags],searchableText:[t.name,...t.effects.map(n=>`${n.name} ${n.description}`),...t.foundOnItems.map(n=>`${n.name} ${n.type}`),t.category,t.plugin,t.searchableText],originalData:t,url:"/enchantments"}))}class hY{constructor(){Pe(this,"searchIndex",null);Pe(this,"isIndexing",!1);Pe(this,"allSearchableItems",[]);Pe(this,"indexedStores",new Set);Pe(this,"fuseOptions",{keys:[{name:"name",weight:1},{name:"description",weight:.4},{name:"category",weight:.3},{name:"tags",weight:.4},{name:"searchableText",weight:.2}],threshold:.8,includeMatches:!0,includeScore:!0,minMatchCharLength:1,ignoreLocation:!0,useExtendedSearch:!0,findAllMatches:!0});Pe(this,"transformSkillsToSearchable",Kw);Pe(this,"transformRacesToSearchable",Qw);Pe(this,"transformTraitsToSearchable",Jw);Pe(this,"transformReligionsToSearchable",ej);Pe(this,"transformBirthsignsToSearchable",tj);Pe(this,"transformDestinyNodesToSearchable",nj);Pe(this,"transformPerkTreesToSearchable",sj);Pe(this,"transformPerkReferencesToSearchable",rj);Pe(this,"transformRecipesToSearchable",ij);Pe(this,"transformSpellsToSearchable",aj);Pe(this,"transformEnchantmentsToSearchable",oj)}async addToIndex(t,n){this.indexedStores.has(t)||(this.allSearchableItems.push(...n),this.indexedStores.add(t),this.searchIndex=new ln(this.allSearchableItems,this.fuseOptions))}hasIndexedData(){return this.allSearchableItems.length>0}rebuildSearchIndex(){this.allSearchableItems.length>0&&(this.searchIndex=new ln(this.allSearchableItems,this.fuseOptions))}async buildSearchIndex(){if(!this.isIndexing){this.isIndexing=!0;try{const{useSkillsStore:t}=await ps(async()=>{const{useSkillsStore:C}=await Promise.resolve().then(()=>CL);return{useSkillsStore:C}},[]),{useRacesStore:n}=await ps(async()=>{const{useRacesStore:C}=await Promise.resolve().then(()=>kL);return{useRacesStore:C}},void 0),{useTraitsStore:s}=await ps(async()=>{const{useTraitsStore:C}=await Promise.resolve().then(()=>r$);return{useTraitsStore:C}},void 0),{useReligionsStore:r}=await ps(async()=>{const{useReligionsStore:C}=await Promise.resolve().then(()=>s$);return{useReligionsStore:C}},void 0),{useBirthsignsStore:i}=await ps(async()=>{const{useBirthsignsStore:C}=await Promise.resolve().then(()=>YP);return{useBirthsignsStore:C}},void 0),{useDestinyNodesStore:o}=await ps(async()=>{const{useDestinyNodesStore:C}=await Promise.resolve().then(()=>n$);return{useDestinyNodesStore:C}},void 0),{usePerkTreesStore:l}=await ps(async()=>{const{usePerkTreesStore:C}=await Promise.resolve().then(()=>SL);return{usePerkTreesStore:C}},void 0),{useRecipesStore:c}=await ps(async()=>{const{useRecipesStore:C}=await Promise.resolve().then(()=>k8);return{useRecipesStore:C}},void 0),{SpellDataProvider:u}=await ps(async()=>{const{SpellDataProvider:C}=await Promise.resolve().then(()=>C8);return{SpellDataProvider:C}},void 0),{EnchantmentDataProvider:d}=await ps(async()=>{const{EnchantmentDataProvider:C}=await import("./EnchantmentDataProvider-Cby5D_g9.js");return{EnchantmentDataProvider:C}},[]),f=t.getState().data,m=n.getState().data,h=s.getState().data,v=r.getState().data,y=i.getState().data,w=o.getState().data,x=l.getState().data,p=c.getState().data,j=await u.getInstance().loadSpells(),A=await d.getInstance().loadEnchantments();if(!(f!=null&&f.length)||!(m!=null&&m.length)||!(h!=null&&h.length)||!(v!=null&&v.length)||!(y!=null&&y.length)||!(w!=null&&w.length)||!(x!=null&&x.length)||!(p!=null&&p.length)||!(j!=null&&j.length)||!(A!=null&&A.length))throw new Error("Store data not available - stores must be loaded before building search index");const k=[...Kw(f),...Qw(m),...Jw(h),...ej(v),...tj(y),...nj(w),...sj(x),...ij(p),...aj(j),...oj(A)];this.allSearchableItems=k,this.searchIndex=new ln(k,this.fuseOptions)}catch(t){throw console.error("Failed to build search index:",t),t}finally{this.isIndexing=!1}}}async addPerkReferencesToIndex(t){if(this.indexedStores.has("perk-references"))return;const n=rj(t);this.allSearchableItems.push(...n),this.indexedStores.add("perk-references"),this.searchIndex=new ln(this.allSearchableItems,this.fuseOptions)}search(t,n){if(!this.searchIndex)return[];if(!t.trim()||t.trim()==="*"){let d=this.allSearchableItems;return n&&(d=this.applyFilters(d,n)),d.map(f=>({item:f,score:1,matches:[],highlights:[]}))}if(!this.searchIndex)return console.warn("Search index not ready, returning empty results"),[];const r=t.includes(" | ")||t.includes(" & ")||t.includes("!")?[]:this.allSearchableItems.filter(d=>d.name.toLowerCase()===t.toLowerCase()),i=this.searchIndex.search(t),o=new Set(r.map(d=>d.id)),l=[...r.map(d=>({item:d,score:0,matches:[]})),...i.filter(d=>!o.has(d.item.id))];let c=l;return n&&(l.length,c=l.filter(d=>{const f=d.item;return this.applyFilters([f],n).length>0}),c.length),c.map(d=>({item:d.item,score:d.score||0,matches:[...d.matches||[]],highlights:mY([...d.matches||[]])}))}applyFilters(t,n){return t.filter(s=>{var r,i,o,l,c,u,d;if(n.types.length>0&&!n.types.includes(s.type)||n.categories.length>0&&s.category&&!n.categories.includes(s.category))return!1;if(n.tags.length>0){const f=s.tags.map(v=>v.toLowerCase());if(!n.tags.map(v=>v.toLowerCase()).some(v=>f.some(y=>y.includes(v)||v.includes(y))))return!1}if(s.type==="skill"&&((r=n.skillCategories)!=null&&r.length)&&(!s.category||!n.skillCategories.includes(s.category))||s.type==="race"&&((i=n.raceTypes)!=null&&i.length)&&(!s.category||!n.raceTypes.includes(s.category))||s.type==="trait"&&((o=n.traitTypes)!=null&&o.length)&&(!s.category||!n.traitTypes.includes(s.category))||s.type==="religion"&&((l=n.religionTypes)!=null&&l.length)&&(!s.category||!n.religionTypes.includes(s.category))||s.type==="birthsign"&&((c=n.birthsignGroups)!=null&&c.length)&&(!s.category||!n.birthsignGroups.includes(s.category))||s.type==="spell"&&((u=n.spellSchools)!=null&&u.length)&&(!s.category||!n.spellSchools.includes(s.category)))return!1;if(s.type==="spell"&&((d=n.spellLevels)!=null&&d.length)){const f=s.originalData;if(!f.level||!n.spellLevels.includes(f.level))return!1}return!0})}getAvailableFilters(){const t=new Map,n=new Map,s=new Map;return this.allSearchableItems.forEach(r=>{const i=t.get(r.type)||0;if(t.set(r.type,i+1),r.category){const o=n.get(r.category)||0;n.set(r.category,o+1)}r.tags.forEach(o=>{const l=s.get(o)||0;s.set(o,l+1)})}),{types:Array.from(t.entries()).map(([r,i])=>({value:r,label:r.charAt(0).toUpperCase()+r.slice(1),count:i})),categories:Array.from(n.entries()).map(([r,i])=>({value:r,label:r,count:i})),tags:Array.from(s.entries()).map(([r,i])=>({value:r,label:r,count:i}))}}getSearchableItems(){return this.allSearchableItems}isReady(){return this.searchIndex!==null&&!this.isIndexing}isLoading(){return this.isIndexing}}const gY={skill:{label:"Skill",icon:"âš”ï¸",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},race:{label:"Race",icon:"ðŸ‘¤",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},trait:{label:"Trait",icon:"ðŸŽ¯",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},religion:{label:"Religion",icon:"â›ª",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},birthsign:{label:"Birthsign",icon:"â­",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},destiny:{label:"Destiny",icon:"ðŸŒŸ",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},perk:{label:"Perk",icon:"ðŸ”®",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"}};function pY({type:e,className:t,variant:n="default"}){const s=gY[e]||{label:e.charAt(0).toUpperCase()+e.slice(1),icon:"ðŸ“„",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return n==="default"?a.jsxs(Z,{className:F("inline-flex items-center gap-1 px-2 py-1 text-xs font-medium",s.color,t),children:[a.jsx("span",{children:s.icon}),a.jsx("span",{children:s.label})]}):a.jsxs(Z,{variant:n,className:F("inline-flex items-center gap-1",t),children:[a.jsx("span",{children:s.icon}),a.jsx("span",{children:s.label})]})}function xY({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){return a.jsxs(pe,{className:F("transition-all hover:shadow-md",t),expanded:n,onToggle:s,children:[a.jsx(pe.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(pY,{type:e.type})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-sm truncate",children:e.name}),e.category&&a.jsx(Z,{variant:"outline",className:"text-xs",children:e.category})]})})]})}),a.jsxs(pe.Summary,{children:[e.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((i,o)=>a.jsx(Z,{variant:"secondary",className:"text-xs",children:i},`${i}-${o}`)),e.tags.length>3&&a.jsxs(Z,{variant:"secondary",className:"text-xs",children:["+",e.tags.length-3]})]})]}),a.jsxs(pe.Details,{children:[e.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"All Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((i,o)=>a.jsx(Z,{variant:"secondary",className:"text-xs",children:i},`${i}-${o}`))})]}),e.description&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]})]})}function Qi(e,t){return e?e.find(s=>{const r=!!s.id&&s.id===t.id,i=!!s.edid&&s.edid===t.edid,o=!!s.treeId&&s.treeId===t.treeId,l=!!s.name&&s.name===t.name;return r||i||o||l}):void 0}function vY({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=Vi(l=>l.data),o=Qi(i,e.originalData);return o?a.jsx(Cf,{originalBirthsign:o,isExpanded:n,onToggle:s,className:t,showToggle:!1}):(console.error("Birthsign not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalBirthsignsInStore:i.length,firstFewBirthsigns:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function yY({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=Dl(l=>l.data),o=Qi(i,e.originalData);return o?a.jsxs(pe,{className:t,expanded:n,onToggle:s,children:[a.jsx(pe.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.icon?a.jsx("img",{src:o.icon,alt:o.name,className:"w-6 h-6 object-contain"}):a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:o.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:o.name}),o.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),a.jsx(pe.Summary,{children:o.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.description})}),a.jsxs(pe.Details,{children:[o.effects&&o.effects.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Effects"}),a.jsx("div",{className:"space-y-1",children:o.effects.map((l,c)=>a.jsxs("div",{className:"text-sm text-muted-foreground",children:["â€¢ ",l]},c))})]}),o.tags&&o.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((l,c)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]})]})]}):(console.error("Destiny node not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalDestinyNodesInStore:i.length,firstFewDestinyNodes:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}class bY{constructor(t){Pe(this,"perkNodes",[]);this.perkNodes=this.transformPerkTrees(t)}transformPerkTrees(t){const n=[];return t.forEach(s=>{s.perks.forEach(r=>{var o,l,c,u,d;const i={...r,skillTree:s.treeId,skillTreeName:s.treeName,isRoot:r.isRoot||!1,hasChildren:(((l=(o=r.connections)==null?void 0:o.children)==null?void 0:l.length)||0)>0,prerequisites:((c=r.connections)==null?void 0:c.parents)||[],connections:{parents:((u=r.connections)==null?void 0:u.parents)||[],children:((d=r.connections)==null?void 0:d.children)||[]},searchableText:this.generateSearchableText(r,s),tags:this.generateTags(r,s),category:this.determineCategory(s.treeName),minLevel:this.calculateMinLevel(r)};n.push(i)})}),n}calculateMinLevel(t){var s,r;let n=0;if(t.ranks&&t.ranks.length>0&&t.ranks.forEach(i=>{var o,l;(l=(o=i.prerequisites)==null?void 0:o.skillLevel)!=null&&l.level&&(n=Math.max(n,i.prerequisites.skillLevel.level))}),n===0)if(t.isRoot)n=1;else{const i=((r=(s=t.connections)==null?void 0:s.parents)==null?void 0:r.length)||0;n=Math.max(1,i*5)}return n}generateSearchableText(t,n){var r,i;return[t.name,(r=t.ranks)==null?void 0:r.map(o=>{var l;return(l=o.description)==null?void 0:l.base}).join(" "),(i=t.ranks)==null?void 0:i.map(o=>{var l;return(l=o.description)==null?void 0:l.subtext}).join(" "),n.treeName,this.determineCategory(n.treeName)].filter(Boolean).join(" ").toLowerCase()}generateTags(t,n){var i,o,l,c;const s=[n.treeName,this.determineCategory(n.treeName),t.isRoot?"root":"branch",t.totalRanks>1?"multi-rank":"single-rank"];((o=(i=t.connections)==null?void 0:i.parents)==null?void 0:o.length)>0&&s.push("has-prerequisites"),((c=(l=t.connections)==null?void 0:l.children)==null?void 0:c.length)>0&&s.push("has-children");const r=this.calculateMinLevel(t);return r>0&&s.push(`level-${r}+`),s}determineCategory(t){return{Alchemy:"Magic",Alteration:"Magic",Conjuration:"Magic",Destruction:"Magic",Illusion:"Magic",Restoration:"Magic",Archery:"Combat",Block:"Combat","Heavy Armor":"Combat","One Handed":"Combat",Smithing:"Combat","Two Handed":"Combat","Light Armor":"Stealth",Lockpicking:"Stealth",Pickpocket:"Stealth",Sneak:"Stealth",Speech:"Stealth",Enchanting:"Crafting"}[t]||"Other"}getAllPerks(){return this.perkNodes}getPerksBySkill(t){return this.perkNodes.filter(n=>n.skillTree===t)}getPerksByCategory(t){return this.perkNodes.filter(n=>n.category===t)}getPerksByPrerequisite(t){return this.perkNodes.filter(n=>n.prerequisites.includes(t))}getRootPerks(){return this.perkNodes.filter(t=>t.isRoot)}getMultiRankPerks(){return this.perkNodes.filter(t=>t.totalRanks>1)}searchPerks(t){const n=t.toLowerCase();return this.perkNodes.filter(s=>s.searchableText.includes(n)||s.name.toLowerCase().includes(n)||s.tags.some(r=>r.toLowerCase().includes(n)))}}function MT(){const{data:e,loading:t,error:n}=V0(),s=g.useMemo(()=>e?new bY(e):null,[e]),r=g.useMemo(()=>(s==null?void 0:s.getAllPerks())||[],[s]);return{dataProvider:s,allPerks:r,loading:t,error:n}}function ch(){const{dataProvider:e,allPerks:t,loading:n,error:s}=MT(),r=g.useMemo(()=>{const h=new Map;return t.forEach(v=>{h.has(v.skillTree)||h.set(v.skillTree,{id:v.skillTree,name:v.skillTreeName,count:0});const y=h.get(v.skillTree);y.count++}),Array.from(h.values()).sort((v,y)=>v.name.localeCompare(y.name))},[t]),i=g.useMemo(()=>{const h=new Map;return t.forEach(v=>{h.has(v.category)||h.set(v.category,{name:v.category,count:0});const y=h.get(v.category);y.count++}),Array.from(h.values()).sort((v,y)=>v.name.localeCompare(y.name))},[t]),o=g.useMemo(()=>{const h=new Set;return t.forEach(v=>{v.tags.forEach(y=>h.add(y))}),Array.from(h).sort()},[t]),l=g.useMemo(()=>t.filter(h=>h.isRoot),[t]),c=g.useMemo(()=>t.filter(h=>h.totalRanks>1),[t]),u=g.useMemo(()=>t.filter(h=>h.totalRanks===1),[t]),d=g.useMemo(()=>h=>(e==null?void 0:e.getPerksBySkill(h))||[],[e]),f=g.useMemo(()=>h=>(e==null?void 0:e.getPerksByCategory(h))||[],[e]),m=g.useMemo(()=>h=>(e==null?void 0:e.searchPerks(h))||[],[e]);return{allPerks:t,skillTrees:r,categories:i,tags:o,rootPerks:l,multiRankPerks:c,singleRankPerks:u,getPerksBySkill:d,getPerksByCategory:f,searchPerks:m,loading:n,error:s,dataProvider:e}}const wY={skill:{Alchemy:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Alteration:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Archery:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200",Block:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Conjuration:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Destruction:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Enchanting:"bg-indigo-100 text-indigo-800 border-indigo-200 hover:bg-indigo-200","Heavy Armor":"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",Illusion:"bg-pink-100 text-pink-800 border-pink-200 hover:bg-pink-200","Light Armor":"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200",Lockpicking:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200","One-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Pickpocket:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Restoration:"bg-teal-100 text-teal-800 border-teal-200 hover:bg-teal-200",Smithing:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Sneak:"bg-slate-100 text-slate-800 border-slate-200 hover:bg-slate-200",Speech:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200","Two-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200"},category:{Combat:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Crafting:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Survival:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Social:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200"},rank:{"1 rank":"bg-blue-100 text-blue-800 border-blue-200","2 ranks":"bg-green-100 text-green-800 border-green-200","3 ranks":"bg-purple-100 text-purple-800 border-purple-200","4 ranks":"bg-orange-100 text-orange-800 border-orange-200","5 ranks":"bg-red-100 text-red-800 border-red-200"},availability:{Available:"bg-green-100 text-green-800 border-green-200",Unavailable:"bg-red-100 text-red-800 border-red-200","Prerequisites Met":"bg-blue-100 text-blue-800 border-blue-200","Prerequisites Missing":"bg-gray-100 text-gray-800 border-gray-200"},level:{"Level 1+":"bg-green-100 text-green-800 border-green-200","Level 5+":"bg-blue-100 text-blue-800 border-blue-200","Level 10+":"bg-purple-100 text-purple-800 border-purple-200","Level 15+":"bg-orange-100 text-orange-800 border-orange-200","Level 20+":"bg-red-100 text-red-800 border-red-200","Level 25+":"bg-indigo-100 text-indigo-800 border-indigo-200","Level 30+":"bg-pink-100 text-pink-800 border-pink-200","Level 35+":"bg-teal-100 text-teal-800 border-teal-200","Level 40+":"bg-cyan-100 text-cyan-800 border-cyan-200","Level 45+":"bg-emerald-100 text-emerald-800 border-emerald-200","Level 50+":"bg-amber-100 text-amber-800 border-amber-200"},root:{Root:"bg-gold-100 text-gold-800 border-gold-200 hover:bg-gold-200"}},jY={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},NY="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function Dn({label:e,type:t,size:n="md",className:s}){const i=wY[t][e]||NY;return a.jsx(Z,{variant:"outline",className:F(i,jY[n],"font-medium transition-colors",s),children:e})}function SY({item:e,className:t,isExpanded:n=!1,onToggle:s,disableHover:r=!1,viewMode:i="grid"}){const o=e.originalPerk,{allPerks:l}=ch();if(!o)return null;const u=(d=>d.map(f=>{const m=l.find(h=>h.edid===f);return(m==null?void 0:m.name)||f}))(o.prerequisites);return a.jsxs(pe,{className:t,expanded:n,onToggle:s,disableHover:r,children:[a.jsxs(pe.Header,{children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:e.name.charAt(0)})}),a.jsx("div",{className:"flex-1 min-w-0",children:i==="grid"?a.jsxs("div",{className:"space-y-1",children:[a.jsx(je,{className:"text-primary font-semibold truncate",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.skillTreeName&&a.jsx(Dn,{label:o.skillTreeName,type:"skill",size:"sm"}),o.totalRanks>1&&a.jsx(Dn,{label:`${o.totalRanks} ranks`,type:"rank",size:"sm"}),o.minLevel&&a.jsx(Dn,{label:`Level ${o.minLevel}+`,type:"level",size:"sm"})]})]}):a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx(je,{className:"text-primary font-semibold truncate",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.skillTreeName&&a.jsx(Dn,{label:o.skillTreeName,type:"skill",size:"sm"}),o.totalRanks>1&&a.jsx(Dn,{label:`${o.totalRanks} ranks`,type:"rank",size:"sm"}),o.minLevel&&a.jsx(Dn,{label:`Level ${o.minLevel}+`,type:"level",size:"sm"})]})]})})]}),a.jsxs(pe.Summary,{children:[a.jsx(ve,{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((d,f)=>a.jsx(Z,{variant:"outline",className:"text-xs",children:d},f)),e.tags.length>3&&a.jsxs(Fs,{className:"text-muted-foreground",children:["+",e.tags.length-3," more"]})]})]}),a.jsxs(pe.Details,{children:[o.prerequisites&&o.prerequisites.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Prerequisites"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:u.map((d,f)=>a.jsx(Z,{variant:"secondary",className:"text-xs",children:d},f))})]}),o.ranks&&o.ranks.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Perk Ranks"}),a.jsx("div",{className:"space-y-2",children:o.ranks.map((d,f)=>{var m;return a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsx("div",{className:"flex items-center justify-between mb-1",children:a.jsxs("span",{className:"font-medium text-sm",children:["Rank ",f+1]})}),((m=d.description)==null?void 0:m.base)&&a.jsx(ve,{className:"text-sm text-muted-foreground",children:d.description.base})]},f)})})]}),e.tags.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((d,f)=>a.jsx(Z,{variant:"outline",className:"text-xs",children:d},f))})]})]})]})}function RT(e,t){var o,l,c,u,d,f;const n=((l=(o=t.perks)==null?void 0:o.selected)==null?void 0:l[e.skillTree])||[],s=((u=(c=t.perks)==null?void 0:c.ranks)==null?void 0:u[e.skillTree])||{},r=n.includes(e.edid),i=s[e.edid]||0;return{id:e.edid,name:e.name,description:((f=(d=e.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",category:e.category,tags:e.tags,isSelected:r,originalPerk:e,skillTree:e.skillTree,skillTreeName:e.skillTreeName,isRoot:e.isRoot,hasChildren:e.hasChildren,prerequisites:e.prerequisites,connections:e.connections,totalRanks:e.totalRanks,currentRank:i,isAvailable:e.isRoot||e.prerequisites.every(m=>n.includes(m)),minLevel:e.minLevel}}function kY({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const{build:i}=Xe(),{allPerks:o}=ch(),l=e.originalData,c=o.find(f=>f.edid===(l==null?void 0:l.edid));if(!c)return console.warn("Perk reference not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData}),null;const d={...RT(c,i),originalPerk:c};return a.jsx(SY,{item:d,className:t,isExpanded:n,onToggle:s,viewMode:r})}function CY({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){var c;const i=Ui(u=>u.data),o=Qi(i,e.originalData);if(!o)return console.error("Perk tree not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalPerkTreesInStore:i.length,firstFewPerkTrees:i.slice(0,3).map(u=>({treeId:u.treeId,treeName:u.treeName||u.name}))}),null;const l=((c=o.perks)==null?void 0:c.length)||0;return a.jsxs(pe,{className:t,expanded:n,onToggle:s,children:[a.jsx(pe.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:(o.treeName||o.name).charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:o.treeName||o.name}),o.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),a.jsxs(pe.Summary,{children:[o.treeDescription&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.treeDescription}),l>0&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[a.jsx("span",{className:"font-medium",children:"Perks:"})," ",l," total"]})]}),a.jsxs(pe.Details,{children:[o.perks&&o.perks.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Sample Perks"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.perks.slice(0,6).map((u,d)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:u.name},`${u.edid}-${d}`)),o.perks.length>6&&a.jsxs("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded text-muted-foreground",children:["+",o.perks.length-6," more"]})]})]}),o.tags&&o.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((u,d)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-secondary text-secondary-foreground rounded",children:u},`${u}-${d}`))})]})]})]})}function EY({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=ks(c=>c.data),o=Qi(i,e.originalData);if(!o)return console.error("Race not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalRacesInStore:i.length,firstFewRaces:i.slice(0,3).map(c=>({edid:c.edid,name:c.name}))}),null;const l={id:o.id||o.edid||o.name,name:o.name,description:o.description||"",summary:o.description||"",category:o.category||"",tags:o.tags||[],type:"race",effects:[]};return a.jsx("div",{className:t,children:a.jsx(Au,{item:{...l,originalRace:o},isExpanded:n,onToggle:s,showToggle:!1,disableHover:!1,className:"w-full"})})}function AY({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=Ll(h=>h.data),[o,l]=g.useState(null),[c,u]=g.useState(!1),d=Qi(i,e.originalData);if(!d)return console.error("Religion not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalReligionsInStore:i.length,firstFewReligions:i.slice(0,3).map(h=>({id:h.id,name:h.name}))}),null;const f=gE(d),m=h=>{l(f),u(!0)};return a.jsxs("div",{className:t,children:[a.jsx(mE,{originalReligion:f,className:"w-full",onOpenDetails:m,showToggle:!0}),a.jsx(hE,{religion:o,isOpen:c,onClose:()=>u(!1)})]})}function TY({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=Ua(l=>l.data),o=Qi(i,e.originalData);return o?a.jsxs(pe,{className:t,expanded:n,onToggle:s,children:[a.jsx(pe.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:o.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:o.name}),o.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),a.jsxs(pe.Summary,{children:[o.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.description}),o.keyAbilities&&o.keyAbilities.length>0&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[a.jsx("span",{className:"font-medium",children:"Key abilities:"})," ",o.keyAbilities.slice(0,2).join(", "),o.keyAbilities.length>2&&"..."]})]}),a.jsxs(pe.Details,{children:[o.tags&&o.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((l,c)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),o.keyAbilities&&o.keyAbilities.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Key Abilities"}),a.jsx("div",{className:"space-y-1",children:o.keyAbilities.map((l,c)=>a.jsxs("div",{className:"text-sm text-muted-foreground",children:["â€¢ ",l]},c))})]})]})]}):(console.error("Skill not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalSkillsInStore:i.length,firstFewSkills:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function _Y({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=Gi(l=>l.data),o=Qi(i,e.originalData);return o?a.jsxs(pe,{className:t,expanded:n,onToggle:s,children:[a.jsx(pe.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:o.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:o.name}),o.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),a.jsx(pe.Summary,{children:o.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.description})}),a.jsxs(pe.Details,{children:[o.tags&&o.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((l,c)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),o.description&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:o.description})]})]})]}):(console.error("Trait not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalTraitsInStore:i.length,firstFewTraits:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}const MY={Destruction:Al,Restoration:Qs,Conjuration:n0,Illusion:El,Alteration:at,"":js},RY={Novice:"bg-green-100 text-green-800 border-green-200",Apprentice:"bg-blue-100 text-blue-800 border-blue-200",Adept:"bg-purple-100 text-purple-800 border-purple-200",Expert:"bg-orange-100 text-orange-800 border-orange-200",Master:"bg-red-100 text-red-800 border-red-200"};function DY({spell:e,className:t,isExpanded:n=!1,onToggle:s,disableHover:r=!1}){var l;const i=MY[e.school]||js,o=()=>{s==null||s()};return a.jsxs(pe,{className:t,expanded:n,onToggle:o,disableHover:r,children:[a.jsx(pe.Header,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(i,{className:"w-5 h-5 text-muted-foreground"}),a.jsx("h3",{className:"text-primary font-semibold text-lg",children:e.name}),a.jsx("span",{className:"ml-auto transition-transform duration-200 text-muted-foreground",children:a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 8l4 4 4-4"})})})]})}),a.jsx(pe.Summary,{children:a.jsxs("div",{className:"px-4 py-2 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 7v14"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"})]}),a.jsx("span",{children:e.school})]}),a.jsx(Z,{variant:"secondary",className:RY[e.level]||"",children:e.level})]}),a.jsx(Le,{text:e.description,className:"text-sm text-muted-foreground mb-3",as:"p"})]})}),a.jsx(pe.Details,{children:a.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[e.hasEffects&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Effects"}),a.jsx("div",{className:"space-y-2",children:e.effects.map((c,u)=>a.jsxs("div",{className:"p-2 rounded bg-muted border text-sm",children:[a.jsx(Le,{text:c.description,className:"text-muted-foreground mb-2",as:"p"}),a.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[c.magnitude>0&&a.jsxs("span",{children:["Magnitude: ",c.magnitude]}),c.duration>0&&a.jsxs("span",{children:["Duration: ",c.duration,"s"]}),c.area>0&&a.jsxs("span",{children:["Area: ",c.area,"ft"]})]})]},u))})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Statistics"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Magicka Cost:"}),a.jsxs("span",{className:"font-medium",children:[e.magickaCost," MP"]})]}),e.totalMagnitude>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Magnitude:"}),a.jsx("span",{className:"font-medium",children:e.totalMagnitude})]}),e.maxDuration>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Max Duration:"}),a.jsxs("span",{className:"font-medium",children:[e.maxDuration,"s"]})]}),e.maxArea>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Max Area:"}),a.jsxs("span",{className:"font-medium",children:[e.maxArea,"ft"]})]})]})]}),(e.tome||((l=e.vendors)==null?void 0:l.length))&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Additional Info"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[e.tome&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Tome:"}),a.jsx("span",{children:e.tome})]}),e.vendors&&e.vendors.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Vendors:"}),a.jsx("span",{children:e.vendors.join(", ")})]})]})]}),e.tags&&e.tags.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((c,u)=>a.jsx(Z,{variant:"outline",className:"text-xs",children:c},u))})]})]})})]})}const LY=({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="card"})=>{const i=e.originalData;if(!i)return console.warn("SpellSearchCard: Missing spell data for item:",e),a.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[a.jsx("h3",{className:"font-semibold",children:"Spell not found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});if(!i.name||!i.editorId)return console.warn("SpellSearchCard: Invalid spell data structure:",i),a.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[a.jsx("h3",{className:"font-semibold",children:"Invalid spell data"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const o=P.useCallback(()=>{s&&s()},[s]);return a.jsx(DY,{spell:i,isExpanded:n,onToggle:o,className:t})},zY=({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"})=>{const i=e.originalData;if(!i||!i.name)return console.warn("RecipeSearchCard: Missing or invalid recipe data for item:",e),a.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[a.jsx("h3",{className:"font-semibold",children:"Recipe not found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const o=Ke.addComputedProperties(i),l=P.useCallback(()=>{s&&s()},[s]);return a.jsx(Tv,{recipe:o,variant:r==="list"?"compact":"default",isSelected:!1,onClick:l,showEffects:!0,showIngredients:!0,className:t})},PY={category:{"Standard Enchantments (Touch)":"bg-blue-100 text-blue-800 border-blue-200","Standard Enchantments (Self)":"bg-green-100 text-green-800 border-green-200"},targetType:{touch:"bg-red-100 text-red-800 border-red-200",self:"bg-purple-100 text-purple-800 border-purple-200"},itemType:{weapon:"bg-orange-100 text-orange-800 border-orange-200",armor:"bg-indigo-100 text-indigo-800 border-indigo-200"}},$Y={category:{"Standard Enchantments (Touch)":"âš”ï¸","Standard Enchantments (Self)":"ðŸ›¡ï¸"},targetType:{touch:"âš”ï¸",self:"ðŸ›¡ï¸"},itemType:{weapon:"ðŸ—¡ï¸",armor:"ðŸ›¡ï¸"}},OY={category:{},targetType:{touch:"Weapon",self:"Armor"},itemType:{}},lj={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"},ws=P.memo(({type:e,value:t,size:n="md",variant:s="default",className:r})=>{const i=PY[e],o=$Y[e],l=OY[e],c=i[t]||"bg-gray-100 text-gray-800 border-gray-200",u=o[t]||"ðŸ“‹",d=l[t]||t;return s==="outline"?a.jsxs(Z,{variant:"outline",className:F(lj[n],"inline-flex items-center gap-1",r),children:[a.jsx("span",{children:u}),a.jsx("span",{children:d})]}):a.jsxs("span",{className:F("inline-flex items-center gap-1 rounded-full border font-medium",lj[n],c,r),children:[a.jsx("span",{children:u}),a.jsx("span",{children:d})]})}),IY=P.memo(({effect:e,className:t,showDescription:n=!0,compact:s=!1})=>a.jsxs("div",{className:F("space-y-1",t),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(js,{className:"h-3 w-3 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium text-foreground",children:e.name})]}),n&&a.jsx("div",{className:"pl-5",children:a.jsx(Le,{text:e.description,options:v0(),className:"text-sm text-muted-foreground"})})]})),Wc=P.memo(({effects:e,title:t="Effects",className:n,showDescriptions:s=!0,compact:r=!1,maxDisplay:i=3})=>{if(e.length===0)return a.jsx("div",{className:F("text-sm text-muted-foreground",n),children:"No effects"});const o=e.slice(0,i),l=e.length>i;return a.jsxs("div",{className:F("space-y-2",n),children:[t&&a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a.jsx(js,{className:"h-4 w-4"}),t]}),a.jsxs("div",{className:F("space-y-2",r?"text-sm":"text-base"),children:[o.map((c,u)=>a.jsx("div",{className:"p-2 rounded bg-muted border",children:a.jsx(IY,{effect:c,showDescription:s,compact:r})},`${c.name}-${u}`)),l&&a.jsxs("div",{className:"text-sm text-muted-foreground italic",children:["+",e.length-i," more effects"]})]})]})}),BY={weapon:"ðŸ—¡ï¸",armor:"ðŸ›¡ï¸"},Yp=P.memo(({items:e,title:t="Found Items",className:n,maxItems:s=5,showType:r=!0,compact:i=!1})=>{if(e.length===0)return a.jsx("div",{className:F("text-sm text-muted-foreground",n),children:"No items found"});const o=e.slice(0,s),l=e.length>s;return a.jsxs("div",{className:F("space-y-2",n),children:[t&&a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a.jsx(N1,{className:"h-4 w-4"}),t,a.jsxs("span",{className:"text-xs text-muted-foreground/70",children:["(",e.length,")"]})]}),a.jsxs("div",{className:F("space-y-1"),children:[o.map((c,u)=>a.jsxs("div",{className:F("flex items-center gap-2 p-2 rounded bg-muted border",i?"text-xs":"text-sm"),children:[a.jsx("span",{className:"text-muted-foreground",children:BY[c.type]}),a.jsx("span",{className:"font-medium text-foreground flex-1",children:c.name}),r&&a.jsx(ws,{type:"itemType",value:c.type,size:"sm",variant:"outline"})]},`${c.name}-${u}`)),l&&a.jsxs("div",{className:"text-sm text-muted-foreground italic",children:["+",e.length-s," more items"]})]})]})});function cj(e,t){if(!t.trim())return e;const n=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(n,'<mark class="bg-yellow-200 dark:bg-yellow-800">$1</mark>')}function FY({item:e,searchTerm:t="",isExpanded:n=!1,onToggle:s,viewMode:r="grid",className:i}){const o=e.originalData,l=t?cj(o.name,t):o.name,c=o.effects.length>0?t?cj(o.effects.map(d=>d.name).join(", "),t):o.effects.map(d=>d.name).join(", "):void 0,u=()=>{window.location.href=`/enchantments?selected=${o.baseEnchantmentId}`};return r==="list"?a.jsx(ce,{className:F("cursor-pointer hover:shadow-md transition-shadow border-l-4 border-l-blue-500",i),onClick:u,children:a.jsxs(de,{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"text-lg",children:"ðŸ”®"}),a.jsx("h4",{className:"font-medium text-sm truncate",dangerouslySetInnerHTML:{__html:l}}),a.jsx(ws,{type:"targetType",value:o.targetType,size:"sm"}),a.jsxs(Z,{variant:"outline",className:"text-xs",children:[o.effectCount," effects"]})]}),c&&a.jsx("p",{className:"text-xs text-muted-foreground mb-2",dangerouslySetInnerHTML:{__html:c}}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx("span",{children:o.category}),a.jsx("span",{children:"â€¢"}),a.jsx("span",{children:o.plugin}),a.jsx("span",{children:"â€¢"}),a.jsxs("span",{children:[o.itemCount," items"]})]})]}),a.jsx(U,{variant:"ghost",size:"sm",className:"ml-2",onClick:d=>{d.stopPropagation(),s==null||s()},children:n?a.jsx(Lc,{className:"h-4 w-4"}):a.jsx(Je,{className:"h-4 w-4"})})]}),n&&a.jsxs("div",{className:"mt-4 space-y-3 pt-4 border-t",children:[o.effects.length>0&&a.jsx(Wc,{effects:o.effects,title:"Effects",compact:!0,showDescriptions:!1,maxDisplay:3}),a.jsx(Yp,{items:o.foundOnItems,title:"Found on",compact:!0,showType:!0,maxItems:3})]})]})}):a.jsxs(ce,{className:F("cursor-pointer hover:shadow-md transition-shadow",i),onClick:u,children:[a.jsx(be,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(_e,{className:"text-lg",dangerouslySetInnerHTML:{__html:l}}),c&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1",dangerouslySetInnerHTML:{__html:c}})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsx(ws,{type:"targetType",value:o.targetType}),a.jsxs(Z,{variant:"outline",className:"text-xs",children:[o.effectCount," effects"]})]})]})}),a.jsx(de,{className:"pt-0",children:a.jsxs("div",{className:"space-y-3",children:[o.effects.length>0&&a.jsx(Wc,{effects:o.effects,title:"Effects",compact:!0,showDescriptions:!1,maxDisplay:2}),a.jsx(Yp,{items:o.foundOnItems,title:"Found on",compact:!0,showType:!0,maxItems:3}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx("span",{children:o.category}),a.jsx("span",{children:"â€¢"}),a.jsx("span",{children:o.plugin}),a.jsx("span",{children:"â€¢"}),a.jsxs("span",{children:[o.itemCount," items"]})]}),s&&a.jsx(U,{variant:"ghost",size:"sm",className:"w-full mt-2",onClick:d=>{d.stopPropagation(),s()},children:n?a.jsxs(a.Fragment,{children:[a.jsx(Lc,{className:"h-4 w-4 mr-1"}),"Show Less"]}):a.jsxs(a.Fragment,{children:[a.jsx(Je,{className:"h-4 w-4 mr-1"}),"Show More"]})})]})})]})}function uj({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){switch(e.type){case"race":return a.jsx(EY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"skill":return a.jsx(TY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"trait":return a.jsx(_Y,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"birthsign":return a.jsx(vY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"destiny":return a.jsx(yY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"religion":return a.jsx(AY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"perk":return a.jsx(CY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"spell":return a.jsx(LY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"perk-reference":return a.jsx(kY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"recipe":return a.jsx(zY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"enchantment":return a.jsx(FY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});default:return a.jsx(xY,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r})}}function HY({item:e}){return a.jsx("div",{className:`w-full border-2 rounded-lg p-4 ${e.color} transition-all duration-200 hover:shadow-lg`,style:{minHeight:`${e.height}px`},"data-testid":`test-card-${e.id}`,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:e.title}),a.jsxs("span",{className:"text-xs text-gray-500",children:["#",e.id.slice(-6)]})]}),a.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((t,n)=>a.jsx("span",{className:"px-2 py-1 text-xs bg-white/50 rounded-full text-gray-700 border",children:t},n))}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Height: ",e.height,"px"]})]})})}const dj={Alteration:yD,Conjuration:n0,Destruction:Al,Illusion:El,Restoration:Qs,Mysticism:js},UY={Alteration:"bg-blue-500 text-white",Conjuration:"bg-purple-500 text-white",Destruction:"bg-red-500 text-white",Illusion:"bg-indigo-500 text-white",Restoration:"bg-green-500 text-white",Mysticism:"bg-yellow-500 text-white"},fj={Novice:1,Apprentice:2,Adept:3,Expert:4,Master:5},VY={sm:"w-6 h-6 text-sm",md:"w-8 h-8 text-base",lg:"w-10 h-10 text-lg",xl:"w-12 h-12 text-xl","2xl":"w-16 h-16 text-2xl"},GY={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"};let xg=null;function qY(){return xg||(xg=new hY),xg}function _v(){const[e,t]=g.useState(!1),[n,s]=g.useState(!1),[r,i]=g.useState(null),o=Ua(N=>N.data),l=ks(N=>N.data),c=Gi(N=>N.data),u=Ll(N=>N.data),d=Vi(N=>N.data),f=Dl(N=>N.data),m=Ui(N=>N.data),h=xr(N=>N.data),v=wo(N=>N.data),{allPerks:y}=MT(),w=qY(),x=g.useCallback(async(N,A,k)=>{if(A!=null&&A.length)try{const C=k(A);await w.addToIndex(N,C)}catch(C){console.error(`Failed to index ${N}:`,C)}},[w]);g.useEffect(()=>{o!=null&&o.length&&x("skills",o,w.transformSkillsToSearchable)},[o,x]),g.useEffect(()=>{l!=null&&l.length&&x("races",l,w.transformRacesToSearchable)},[l,x]),g.useEffect(()=>{c!=null&&c.length&&x("traits",c,w.transformTraitsToSearchable)},[c,x]),g.useEffect(()=>{u!=null&&u.length&&x("religions",u,w.transformReligionsToSearchable)},[u,x]),g.useEffect(()=>{d!=null&&d.length&&x("birthsigns",d,w.transformBirthsignsToSearchable)},[d,x]),g.useEffect(()=>{f!=null&&f.length&&x("destinyNodes",f,w.transformDestinyNodesToSearchable)},[f,x]),g.useEffect(()=>{m!=null&&m.length&&x("perkTrees",m,w.transformPerkTreesToSearchable)},[m,x]),g.useEffect(()=>{h!=null&&h.length&&x("recipes",h,w.transformRecipesToSearchable)},[h,x]),g.useEffect(()=>{y!=null&&y.length&&x("perk-references",y,w.transformPerkReferencesToSearchable)},[y,x]),g.useEffect(()=>{v!=null&&v.length&&x("spells",v,w.transformSpellsToSearchable)},[v,x]),g.useEffect(()=>{((o==null?void 0:o.length)||(l==null?void 0:l.length)||(c==null?void 0:c.length)||(u==null?void 0:u.length)||(d==null?void 0:d.length)||(f==null?void 0:f.length)||(m==null?void 0:m.length)||(h==null?void 0:h.length)||(y==null?void 0:y.length)||(v==null?void 0:v.length))&&w.hasIndexedData()&&(w.rebuildSearchIndex(),t(!0))},[o,l,c,u,d,f,m,h,y,v,w]);const p=g.useCallback((N,A)=>N.trim()?w.search(N,A):[],[w]),b=g.useCallback(()=>w.getAvailableFilters(),[w]),j=g.useCallback(()=>w.getSearchableItems(),[w]);return{isReady:e,isIndexing:n,error:r,search:p,getAvailableFilters:b,getSearchableItems:j}}function Mv(){const{activeFilters:e,selectedTags:t,viewMode:n,setActiveFilters:s,updateActiveFilters:r,addTag:i,removeTag:o,removeTagByValue:l,clearAllTags:c,setViewMode:u,hasTag:d,getTagsByCategory:f,getFuzzySearchTags:m,getFilterTags:h,clearAllSearchState:v}=Yk(),y=g.useMemo(()=>m().map(k=>k.value).join(" "),[m]),w=g.useMemo(()=>t.length>0,[t]),x=g.useCallback(A=>{let k;typeof A=="string"?k={id:`custom-${A}`,label:A,value:A,category:Ze.FUZZY_SEARCH}:k={id:`${A.category}-${A.id}`,label:A.label,value:A.value,category:A.category},i(k)},[i]),p=g.useCallback(A=>{o(A)},[o]),b=g.useCallback(()=>{c()},[c]),j=g.useCallback(A=>{u(A)},[u]),N=g.useCallback(()=>{c()},[c]);return{activeFilters:e,selectedTags:t,viewMode:n,fuzzySearchQuery:y,hasActiveFilters:w,setActiveFilters:s,updateActiveFilters:r,addTag:i,removeTag:o,removeTagByValue:l,clearAllTags:c,setViewMode:u,handleTagSelect:x,handleTagRemove:p,handleClearFilters:b,handleViewModeChange:j,hasTag:d,getTagsByCategory:f,getFuzzySearchTags:m,getFilterTags:h,clearFilters:N}}function Rv(){const{search:e,getAvailableFilters:t,isReady:n,getSearchableItems:s}=_v(),{activeFilters:r}=Mv(),i=g.useMemo(()=>s().length,[s]),o=g.useMemo(()=>{if(!n)return[];if(!(r.tags.length>0||r.types.length>0||r.categories.length>0))return s().map(v=>({item:v,score:1,matches:[],highlights:[]}));const d=r.tags.join(" | "),f={...r,tags:[]};return e(d||"*",f)},[n,e,r,s]),l=g.useMemo(()=>n?t():{types:[],categories:[],tags:[]},[n,t,i]),c=g.useMemo(()=>{const u={};return o.forEach(d=>{const f=d.item.type;u[f]=(u[f]||0)+1,d.item.category&&(u[`category:${d.item.category}`]=(u[`category:${d.item.category}`]||0)+1),d.item.tags.forEach(m=>{u[`tag:${m}`]=(u[`tag:${m}`]||0)+1})}),u},[o]);return{searchResults:o,availableFilters:l,resultCounts:c}}const mj=50;function ZY(e){const[t,n]=g.useState(1),s=g.useRef([]),r=g.useMemo(()=>{const u=t*mj;return e.slice(0,u)},[e,t]);g.useEffect(()=>{const u=s.current;(u.length!==e.length||e.some((f,m)=>{var h;return f.item.id!==((h=u[m])==null?void 0:h.item.id)}))&&(n(1),s.current=e)},[e]);const i=g.useMemo(()=>r.length<e.length,[r.length,e.length]),o=g.useCallback(()=>{i&&n(u=>u+1)},[i]),l=g.useCallback(()=>{n(1)},[]),c=g.useMemo(()=>({displayedItems:r.length,totalItems:e.length,hasMore:i,currentPage:t,itemsPerPage:mj}),[r.length,e.length,i,t]);return{displayedItems:r,loadMore:o,resetPagination:l,paginationInfo:c,hasMore:i}}function YY(){const{searchResults:e,resultCounts:t}=Rv();Mv();const{displayedItems:n,loadMore:s,resetPagination:r,paginationInfo:i,hasMore:o}=ZY(e),l=g.useMemo(()=>n,[n]),c=g.useMemo(()=>XY(l,"relevance"),[l]),u=g.useMemo(()=>c.map(fY),[c]),d=g.useMemo(()=>e.length,[e]),f=g.useMemo(()=>{const m={};return n.forEach(h=>{const v=h.item.type;m[v]||(m[v]=[]),m[v].push(h)}),m},[n]);return{filteredResults:l,sortedResults:c,playerCreationItems:u,resultCounts:t,totalResults:d,resultsByType:f,loadMore:s,resetPagination:r,paginationInfo:i,hasMore:o}}function XY(e,t){const n=[...e];switch(t){case"relevance":return n;case"name":return n.sort((s,r)=>s.item.name.localeCompare(r.item.name));case"type":return n.sort((s,r)=>{const i=s.item.type.localeCompare(r.item.type);return i!==0?i:s.item.name.localeCompare(r.item.name)});default:return n}}function WY({activeFilters:e,onFiltersChange:t,onClearFilters:n,availableFilters:s,resultCount:r,onTagSelect:i,onTagRemove:o,selectedTags:l,className:c}){const u=e.types.length>0||e.categories.length>0||e.tags.length>0,d=h=>{const v=e.types.includes(h)?e.types.filter(y=>y!==h):[...e.types,h];t({types:v})},m=[{id:"fuzzy-search",name:"Search All",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:(s.categories||[]).filter(h=>h&&typeof h.label=="string").map(h=>({id:`category-${h.value}`,label:String(h.label),value:h.value,category:"Categories",description:`${h.count} item${h.count!==1?"s":""}`}))},{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:(s.tags||[]).filter(h=>h&&typeof h.label=="string").map(h=>({id:`tag-${h.value}`,label:String(h.label),value:h.value,category:"Tags",description:`${h.count} item${h.count!==1?"s":""}`}))}];return a.jsxs("div",{className:F("space-y-4",c),children:[a.jsx("div",{className:"space-y-2",children:a.jsx(Yr,{categories:m,onSelect:i,onCustomSearch:i})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("span",{className:"text-sm font-medium",children:"Record Types"})}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.types.map(h=>a.jsxs(U,{variant:e.types.includes(h.value)?"default":"outline",size:"sm",onClick:()=>d(h.value),className:"text-xs",children:[h.label,a.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",h.count,")"]})]},h.value))})]}),l.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Active Filters"}),a.jsx(U,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Clear All"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>a.jsxs(Z,{variant:"secondary",className:"text-xs",children:[h.category,": ",h.label,a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>o(h.id),className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",children:a.jsx(Me,{className:"h-3 w-3"})})]},h.id))})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[a.jsxs("span",{children:[r," result",r!==1?"s":""," found"]}),u&&a.jsx(U,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Clear Filters"})]})]})}function DT({items:e,keyExtractor:t,renderItem:n,loadMore:s,hasMore:r=!0,columns:i=3,gap:o=12,maxColumnWidth:l,className:c=""}){const[u,d]=g.useState(0),f=g.useRef(null),m=g.useRef(null),h=g.useCallback(()=>l&&u>0?Math.max(1,Math.floor(u/l)):i,[i,l,u]);g.useEffect(()=>{const y=()=>{f.current&&d(f.current.offsetWidth)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),g.useEffect(()=>{if(!s||!r||!m.current)return;const y=new IntersectionObserver(w=>{w.forEach(x=>{x.isIntersecting&&s&&s()})},{threshold:.1,rootMargin:"0px 0px 4000px 0px"});return y.observe(m.current),()=>y.disconnect()},[s,r]);const v=g.useCallback(()=>{const y=h(),w=Array.from({length:y},()=>[]);return e.forEach((x,p)=>{const b=p%y,j=t(x);w[b].push(a.jsx("div",{style:{width:"100%",marginBottom:`${o}px`},children:n(x)},j))}),w.map((x,p)=>a.jsx("div",{style:{width:`calc(${100/y}% - ${o/2}px)`,marginRight:p<y-1?`${o}px`:0},children:x},p))},[e,t,n,h,o]);return e.length===0?a.jsx("div",{className:`text-center py-12 ${c}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No items to display"})}):a.jsxs("div",{ref:f,className:c,children:[a.jsx("div",{style:{display:"flex",width:"100%"},children:v()}),r&&s&&a.jsx("div",{ref:m,className:"w-full h-16 mt-16",style:{minHeight:"64px"}})]})}function KY({items:e,className:t,viewMode:n="grid",onViewModeChange:s,onLoadMore:r,hasMore:i=!0,paginationInfo:o}){const[l,c]=g.useState(new Set);g.useEffect(()=>{if(n==="grid"){const d=new Set(e.map(f=>f.id));c(d)}},[n,e]);const u=d=>{if(n==="grid")return;const f=new Set(l);f.has(d)?f.delete(d):f.add(d),c(f)};return e.length===0?a.jsx("div",{className:`text-center py-12 ${t}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No results found"})}):a.jsxs("div",{className:t,children:[s&&a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:o?a.jsxs(a.Fragment,{children:["Showing ",o.displayedItems," of ",o.totalItems," result",o.totalItems!==1?"s":"",o.hasMore&&a.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Scroll to load more)"})]}):`${e.length} result${e.length!==1?"s":""} found`})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(U,{variant:n==="grid"?"default":"outline",size:"sm",onClick:()=>s("grid"),className:"flex items-center gap-2",children:[a.jsx(I3,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(U,{variant:n==="list"?"default":"outline",size:"sm",onClick:()=>s("list"),className:"flex items-center gap-2",children:[a.jsx(Ha,{className:"h-4 w-4"}),"List"]})]})]}),n==="grid"?a.jsx(DT,{items:e,keyExtractor:d=>d.id,renderItem:d=>a.jsx(uj,{item:d,isExpanded:!0,onToggle:()=>{},viewMode:"grid"}),columns:3,gap:16,maxColumnWidth:400,loadMore:r,hasMore:i}):a.jsxs("div",{className:"space-y-2",children:[e.map(d=>{const f=l.has(d.id);return a.jsx(uj,{item:d,isExpanded:f,onToggle:()=>u(d.id),viewMode:"list"},d.id)}),i&&r&&a.jsx("div",{className:"flex justify-center pt-4",children:a.jsxs(U,{variant:"outline",onClick:r,className:"w-full max-w-xs",children:["Load More (",(o==null?void 0:o.displayedItems)||0," of ",(o==null?void 0:o.totalItems)||0,")"]})})]})]})}function QY(){const e=lt(),{lastSearchQuery:t,setLastSearchQuery:n,clearLastSearchQuery:s,addTag:r,clearAllTags:i}=Yk(),o=g.useCallback(u=>{if(!u.trim())return;n(u);const d={id:`custom-${u}`,label:u,value:u,category:Ze.FUZZY_SEARCH};r(d),e("/search")},[e,n,r]),l=g.useCallback(u=>{n(u);const d={id:`type-${u}`,label:u,value:u,category:Ze.TYPES};r(d),e("/search")},[e,n,r]),c=g.useCallback(u=>{typeof u=="string"?o(u):u.id.startsWith("type-")?l(u.value):o(u.value)},[o,l]);return{lastSearchQuery:t,navigateToSearch:o,navigateToSearchWithType:l,handleSearchSelect:c,clearLastSearchQuery:s}}function JY({className:e,placeholder:t="Search skills, races, traits, religions..."}){const{isReady:n}=_v(),{availableFilters:s}=Rv(),{handleSearchSelect:r}=QY(),o=[{id:"fuzzy-search",name:"Search All",placeholder:t,options:s.types.map(l=>({id:`type-${l.value}`,label:l.label,value:l.value,category:"Search All",description:`${l.count} ${l.label}${l.count!==1?"s":""}`}))}];return n?a.jsx("div",{className:F("flex items-center gap-2",e),children:a.jsx("div",{className:"flex-1",children:a.jsx(Zk,{categories:o,onSelect:r,onCustomSearch:r,placeholder:t})})}):a.jsx("div",{className:F("flex items-center gap-2",e),children:a.jsx("div",{className:"flex-1 h-10 bg-muted animate-pulse rounded-md"})})}function vg({title:e,description:t,children:n}){return a.jsxs("div",{className:"bg-background",children:[a.jsx("div",{className:"border-b border-border bg-card/50",children:a.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a.jsx(qi,{className:"text-3xl font-bold text-primary mb-2",children:e}),t&&a.jsx(ve,{className:"text-muted-foreground max-w-2xl",children:t})]})}),a.jsx("div",{className:"container mx-auto px-4 py-6",children:n})]})}function eX(){const{isReady:e,isIndexing:t,error:n}=_v(),{activeFilters:s,selectedTags:r,viewMode:i,setActiveFilters:o,handleTagSelect:l,handleTagRemove:c,handleClearFilters:u,handleViewModeChange:d}=Mv(),{availableFilters:f}=Rv(),{filteredResults:m,totalResults:h,loadMore:v,resetPagination:y,paginationInfo:w,hasMore:x}=YY();if(g.useEffect(()=>{y()},[s,y]),!e)return a.jsx(vg,{title:"Search",description:"Building search index...",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[t?a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}):null,a.jsx("p",{className:"text-muted-foreground",children:t?"Building search index...":"Loading search..."})]})})});if(n)return a.jsx(vg,{title:"Search",description:"Error loading search",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-destructive mb-4",children:["Failed to load search: ",n]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"text-primary hover:underline",children:"Try again"})]})})});const p=r.length>0?"Search Results":"Search",b=r.length>0?`Found ${h} result${h!==1?"s":""} for ${r.length} filter${r.length!==1?"s":""}`:"Search across all skills, races, traits, religions, birthsigns, destiny nodes, and perk references";return a.jsxs(a.Fragment,{children:[a.jsxs(vg,{title:p,description:b,children:[a.jsx("div",{className:"mb-6",children:a.jsx(WY,{activeFilters:s,onFiltersChange:o,onClearFilters:u,availableFilters:f,resultCount:h,onTagSelect:l,onTagRemove:c,selectedTags:r})}),a.jsx("div",{className:"w-full",children:a.jsx(KY,{items:m.map(j=>j.item),viewMode:i,onViewModeChange:d,onLoadMore:v,hasMore:x,paginationInfo:w})})]}),a.jsx(Bm,{threshold:400})]})}function tX(){return a.jsx(eX,{})}const hj=["bg-red-100 border-red-300","bg-blue-100 border-blue-300","bg-green-100 border-green-300","bg-yellow-100 border-yellow-300","bg-purple-100 border-purple-300","bg-pink-100 border-pink-300","bg-indigo-100 border-indigo-300","bg-gray-100 border-gray-300"],gj=["Mystical Artifact","Ancient Scroll","Enchanted Weapon","Potion of Power","Crystal Shard","Runic Tablet","Magical Tome","Arcane Relic","Divine Essence","Ethereal Fragment"],pj=["A powerful artifact imbued with ancient magic.","Scroll containing forgotten spells and rituals.","Weapon blessed by the gods themselves.","Brew that grants temporary supernatural abilities.","Crystal that resonates with magical energy.","Tablet inscribed with mysterious runes.","Book of forbidden knowledge and power.","Relic from a bygone era of magic.","Essence of divine power and wisdom.","Fragment of pure ethereal energy."],nX=["magic","ancient","powerful","rare","legendary","enchanted","divine","mystical","forbidden","sacred"];function xj(e){const t=[];for(let n=0;n<e;n++){const s=`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r=Math.floor(Math.random()*200)+100,i=hj[Math.floor(Math.random()*hj.length)],o=gj[Math.floor(Math.random()*gj.length)],l=pj[Math.floor(Math.random()*pj.length)],c=[],u=Math.floor(Math.random()*3)+1,d=[...nX].sort(()=>.5-Math.random());c.push(...d.slice(0,u)),t.push({id:s,title:o,description:l,height:r,color:i,tags:c})}return t}function sX(){const[e,t]=P.useState(()=>xj(50)),[n,s]=P.useState(!1),[r,i]=P.useState(!0),o=P.useCallback(async()=>{if(n||!r)return;s(!0),await new Promise(d=>setTimeout(d,500));const u=xj(20);t(d=>[...d,...u]),e.length+u.length>=200&&i(!1),s(!1)},[n,r,e.length]),l=u=>u.id,c=u=>a.jsx(HY,{item:u});return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"VirtualMasonryGrid Demo"}),a.jsxs("p",{className:"text-muted-foreground",children:["Testing InfiniteGrid implementation with ",e.length," items"]}),n&&a.jsx("div",{className:"mt-2 text-sm text-blue-600",children:"Loading more items..."}),!r&&a.jsx("div",{className:"mt-2 text-sm text-green-600",children:"All items loaded (200 total)"})]}),a.jsx(DT,{items:e,keyExtractor:l,renderItem:c,loadMore:o,hasMore:r,columns:3,gap:16,className:"min-h-screen"})]})}function Dv(){const[e,t]=g.useState({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[n,s]=g.useState({skills:[],categories:[],prerequisites:[],tags:[]});g.useCallback(h=>{s(h)},[]);const r=g.useCallback(h=>{t(v=>({...v,skills:[...v.skills,h]}))},[]),i=g.useCallback(h=>{t(v=>({...v,skills:v.skills.filter(y=>y!==h)}))},[]);g.useCallback(h=>{t(v=>({...v,categories:[...v.categories,h]}))},[]),g.useCallback(h=>{t(v=>({...v,categories:v.categories.filter(y=>y!==h)}))},[]),g.useCallback(h=>{t(v=>({...v,prerequisites:[...v.prerequisites,h]}))},[]),g.useCallback(h=>{t(v=>({...v,prerequisites:v.prerequisites.filter(y=>y!==h)}))},[]),g.useCallback(h=>{t(v=>({...v,tags:[...v.tags,h]}))},[]);const o=g.useCallback(h=>{t(v=>({...v,tags:v.tags.filter(y=>y!==h)}))},[]);g.useCallback(h=>{t(v=>({...v,rankLevel:h}))},[]),g.useCallback(h=>{t(v=>({...v,rootOnly:h}))},[]);const l=g.useCallback(h=>{t(v=>({...v,minLevel:h}))},[]),c=g.useCallback(h=>{t(v=>({...v,searchQuery:h}))},[]),u=g.useCallback(()=>{t({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0})},[]),d=g.useMemo(()=>{const h=[];return e.skills.forEach(v=>{const y=n.skills.find(w=>w.id===v);y&&h.push({id:`skill-${v}`,type:"skill",value:v,label:y.name})}),e.categories.forEach(v=>{h.push({id:`category-${v}`,type:"category",value:v,label:v})}),e.prerequisites.forEach(v=>{h.push({id:`prerequisite-${v}`,type:"prerequisite",value:v,label:v})}),e.tags.forEach(v=>{h.push({id:`tag-${v}`,type:"tag",value:v,label:v})}),e.rankLevel!=="all"&&h.push({id:"rank-level",type:"rankLevel",value:e.rankLevel,label:e.rankLevel==="single"?"Single Rank":"Multi Rank"}),e.rootOnly&&h.push({id:"root-only",type:"rootOnly",value:"true",label:"Root Perks Only"}),e.minLevel!==void 0&&h.push({id:"min-level",type:"minLevel",value:e.minLevel.toString(),label:`Level ${e.minLevel}+`}),h},[e,n]);g.useMemo(()=>{const h=[];return n.skills.forEach(v=>{h.push({id:`skill-${v.id}`,label:v.name,value:v.id,category:"Skills",type:"skill"})}),n.tags.forEach(v=>{h.push({id:`tag-${v}`,label:v,value:v,category:"Tags",type:"tag"})}),h},[n]);const f=g.useCallback(h=>{if(typeof h=="string")c(h);else if(`${h.category}${h.id}`,h.label,h.value,h.category,h.category==="Skill Trees")r(h.value);else if(h.category==="Minimum Level"){const v=parseInt(h.value);isNaN(v)||l(v)}else h.category==="Fuzzy Search"&&c(h.value)},[r,c,l]),m=g.useCallback(h=>{const v=d.find(y=>y.id===h);if(v)v.type==="skill"?i(v.value):v.type==="tag"?o(v.value):v.type==="minLevel"&&l(void 0);else if(h.startsWith("custom-")){const y=h.replace("custom-","");e.searchQuery===y&&c("")}},[d,i,o,l,e.searchQuery,c]);return{selectedTags:[...d.map(h=>({id:h.id,label:h.label,value:h.value,category:h.type})),...e.searchQuery?[{id:`custom-${e.searchQuery}`,label:e.searchQuery,value:e.searchQuery,category:"Fuzzy Search"}]:[]],viewMode:"grid",searchQuery:e.searchQuery,onTagSelect:f,onTagRemove:m,onClearTags:u,onViewModeChange:()=>{},onSearchChange:c}}class rX{constructor(t,n){Pe(this,"perkNodes");Pe(this,"buildState");this.perkNodes=t,this.buildState=n}transformToPlayerCreationItem(t){var o,l,c,u,d,f;const n=((l=(o=this.buildState.perks)==null?void 0:o.selected)==null?void 0:l[t.skillTree])||[],s=((u=(c=this.buildState.perks)==null?void 0:c.ranks)==null?void 0:u[t.skillTree])||{},r=n.includes(t.edid),i=s[t.edid]||0;return{id:t.edid,name:t.name,description:((f=(d=t.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",category:t.category,tags:t.tags,isSelected:r,originalPerk:t,skillTree:t.skillTree,skillTreeName:t.skillTreeName,isRoot:t.isRoot,hasChildren:t.hasChildren,prerequisites:t.prerequisites,connections:t.connections,totalRanks:t.totalRanks,currentRank:i,isAvailable:this.isPerkAvailable(t),minLevel:t.minLevel}}isPerkAvailable(t){var s,r;if(t.isRoot)return!0;const n=((r=(s=this.buildState.perks)==null?void 0:s.selected)==null?void 0:r[t.skillTree])||[];return t.prerequisites.every(i=>n.includes(i))}applyFilters(t,n){let s=[...t];if(!n)return s;if(n.skills&&n.skills.length>0&&(s=s.filter(r=>n.skills.includes(r.skillTree))),n.categories&&n.categories.length>0&&(s=s.filter(r=>n.categories.includes(r.category))),n.prerequisites&&n.prerequisites.length>0&&(s=s.filter(r=>n.prerequisites.some(i=>r.prerequisites.includes(i)))),n.tags&&n.tags.length>0&&(s=s.filter(r=>n.tags.some(i=>r.tags.includes(i)))),n.minLevel!==void 0&&(s=s.filter(r=>(r.minLevel||0)>=n.minLevel)),n.rankLevel!=="all"&&(s=s.filter(r=>n.rankLevel==="single"?r.totalRanks===1:n.rankLevel==="multi"?r.totalRanks>1:!0)),n.rootOnly&&(s=s.filter(r=>r.isRoot)),n.searchQuery&&n.searchQuery.trim()){const r=n.searchQuery.trim(),i=s.map(u=>{var d,f;return{id:u.edid,name:u.name,description:((f=(d=u.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",searchableText:u.searchableText,tags:u.tags,category:u.category,skillTree:u.skillTreeName,originalNode:u}}),o={keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0};s=new ln(i,o).search(r).map(u=>u.item.originalNode)}return s}getAvailableFilters(t){const n=new Set,s=new Set,r=new Set,i=new Set;return t.forEach(o=>{n.add(o.skillTree),s.add(o.category),o.tags.forEach(l=>r.add(l)),o.prerequisites.forEach(l=>i.add(l))}),{skills:Array.from(n),categories:Array.from(s),tags:Array.from(r),prerequisites:Array.from(i)}}sortPerks(t,n="name"){const s=[...t];switch(n){case"name":return s.sort((r,i)=>r.name.localeCompare(i.name));case"skill":return s.sort((r,i)=>r.skillTreeName.localeCompare(i.skillTreeName));case"category":return s.sort((r,i)=>r.category.localeCompare(i.category));case"rank":return s.sort((r,i)=>i.totalRanks-r.totalRanks);case"prerequisites":return s.sort((r,i)=>r.prerequisites.length-i.prerequisites.length);default:return s}}}function aX(e,t){const{build:n}=Xe(),s=g.useMemo(()=>new rX(e,n),[e,n]),r=g.useMemo(()=>s.applyFilters(e,t||{skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[s,e,t]),i=g.useMemo(()=>r.map(l=>s.transformToPlayerCreationItem(l)),[r,s]),o=g.useMemo(()=>s.getAvailableFilters(e),[s,e]);return{model:s,filteredNodes:r,perkItems:i,availableFilters:o}}function iX(){const{allPerks:e,skillTrees:t,categories:n,tags:s,loading:r,error:i}=ch(),{selectedTags:o,searchQuery:l}=Dv(),c=g.useMemo(()=>{const y=o.filter(b=>b.category==="skill").map(b=>b.value),w=o.filter(b=>b.category==="tag").map(b=>b.value),x=o.filter(b=>b.category==="minLevel").map(b=>parseInt(b.value)).find(b=>!isNaN(b));return{skills:y,categories:[],prerequisites:[],tags:w,rankLevel:"all",rootOnly:!1,searchQuery:l||"",minLevel:x}},[o,l]),{filteredNodes:u,perkItems:d,availableFilters:f}=aX(e,c),m=g.useMemo(()=>{const y=[...new Set(e.map(p=>p.skillTreeName))],w=[...new Set(e.flatMap(p=>p.tags))],x=[...new Set(e.map(p=>p.minLevel||0))].sort((p,b)=>p-b);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:w.map(p=>({id:`keyword-${p}`,label:p,value:p,category:"Fuzzy Search",description:`Perks with ${p} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:y.map(p=>({id:`skill-${p}`,label:p,value:p,category:"Skill Trees",description:`Perks from ${p} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:x.map(p=>({id:`level-${p}`,label:`Level ${p}+`,value:p.toString(),category:"Minimum Level",description:`Perks requiring level ${p} or higher`}))}]},[e]),h=g.useMemo(()=>({totalPerks:e.length,filteredPerks:u.length,rootPerks:e.filter(y=>y.isRoot).length,multiRankPerks:e.filter(y=>y.totalRanks>1).length,singleRankPerks:e.filter(y=>y.totalRanks===1).length,skills:t.length,categories:n.length,tags:s.length}),[e,u,t,n,s]),v=g.useMemo(()=>{const y=new Map;return d.forEach(w=>{y.has(w.skillTree)||y.set(w.skillTree,[]),y.get(w.skillTree).push(w)}),Array.from(y.entries()).map(([w,x])=>{var p;return{skillId:w,skillName:((p=x[0])==null?void 0:p.skillTreeName)||w,perks:x,count:x.length}}).sort((w,x)=>w.skillName.localeCompare(x.skillName))},[d]);return g.useMemo(()=>{const y=new Map;return d.forEach(w=>{y.has(w.category||"")||y.set(w.category||"",[]),y.get(w.category||"").push(w)}),Array.from(y.entries()).map(([w,x])=>({category:w,perks:x,count:x.length})).sort((w,x)=>(w.category||"").localeCompare(x.category||""))},[d]),g.useMemo(()=>d.filter(y=>y.isSelected),[d]),g.useMemo(()=>d.filter(y=>y.isAvailable),[d]),g.useMemo(()=>d.filter(y=>y.isRoot),[d]),g.useMemo(()=>d.filter(y=>y.totalRanks>1),[d]),g.useMemo(()=>d.filter(y=>y.totalRanks===1),[d]),g.useMemo(()=>(y,w="name")=>{const x=[...y];switch(w){case"name":return x.sort((p,b)=>p.name.localeCompare(b.name));case"skill":return x.sort((p,b)=>p.skillTreeName.localeCompare(b.skillTreeName));case"category":return x.sort((p,b)=>(p.category||"").localeCompare(b.category||""));case"rank":return x.sort((p,b)=>b.totalRanks-p.totalRanks);case"prerequisites":return x.sort((p,b)=>p.prerequisites.length-b.prerequisites.length);case"selected":return x.sort((p,b)=>Number(b.isSelected)-Number(p.isSelected));default:return x}},[]),{filteredItems:d,groupedItems:Object.fromEntries(v.map(y=>[y.skillId,y.perks])),stats:{totalPerks:h.totalPerks,skillTrees:h.skills,multiRank:h.multiRankPerks,singleRank:h.singleRankPerks,withPrerequisites:e.filter(y=>y.prerequisites&&y.prerequisites.length>0).length},searchCategories:m,availableFilters:f,isLoading:r,error:i}}function oX({perk:e,isOpen:t,onOpenChange:n}){var s,r;return e?a.jsx(Ki,{open:t,onOpenChange:n,side:"right",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-2xl font-bold text-muted-foreground",children:e.name.charAt(0)})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Dn,{label:e.skillTreeName,type:"skill",size:"sm"}),e.totalRanks>1&&a.jsx(Dn,{label:`${e.totalRanks} ranks`,type:"rank",size:"sm"}),e.minLevel&&a.jsx(Dn,{label:`Level ${e.minLevel}+`,type:"level",size:"sm"}),a.jsx(ds,{itemId:e.edid,itemType:"perk",itemName:e.name})]}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:((r=(s=e.ranks[0])==null?void 0:s.description)==null?void 0:r.base)||"No description available."})]})]})}),a.jsxs("div",{className:"space-y-6",children:[e.prerequisites&&e.prerequisites.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Prerequisites"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.prerequisites.map((i,o)=>a.jsx(Z,{variant:"secondary",className:"text-sm",children:i},o))})]}),e.ranks&&e.ranks.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Perk Ranks"}),a.jsx("div",{className:"space-y-3",children:e.ranks.map((i,o)=>{var l,c,u;return a.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"font-medium text-sm",children:["Rank ",o+1]}),((c=(l=i.prerequisites)==null?void 0:l.skillLevel)==null?void 0:c.level)&&a.jsxs(Z,{variant:"outline",className:"text-xs",children:["Level ",i.prerequisites.skillLevel.level]})]}),((u=i.description)==null?void 0:u.base)&&a.jsx(ve,{className:"text-sm text-muted-foreground",children:i.description.base})]},o)})})]}),e.tags&&e.tags.length>0&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((i,o)=>a.jsx(Z,{variant:"outline",className:"text-sm",children:i},o))})]}),a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Additional Info"}),a.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Skill Tree:"}),a.jsx("span",{className:"font-medium",children:e.skillTreeName})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Total Ranks:"}),a.jsx("span",{className:"font-medium",children:e.totalRanks})]}),e.isRoot&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Type:"}),a.jsx(Z,{variant:"secondary",className:"text-xs",children:"Root Perk"})]}),e.hasChildren&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Has Children:"}),a.jsx("span",{className:"font-medium",children:"Yes"})]})]})]})]})]})}):null}function vj({item:e,className:t,onClick:n,viewMode:s="grid"}){const r=e.originalPerk;return a.jsx("div",{className:F("p-4 rounded-lg border bg-background hover:bg-muted/50 transition-all duration-200 hover:shadow-md cursor-pointer",s==="list"&&"flex items-center gap-4",t),onClick:n,children:s==="grid"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex items-start justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-muted rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:e.name.charAt(0)})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx(Sa,{className:"text-sm font-semibold line-clamp-1",children:e.name}),a.jsx(Fs,{className:"text-muted-foreground",children:r.skillTreeName})]})]})}),a.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[r.totalRanks>1&&a.jsx(Dn,{label:`${r.totalRanks} ranks`,type:"rank",size:"sm"}),r.minLevel&&a.jsx(Dn,{label:`Level ${r.minLevel}+`,type:"level",size:"sm"})]}),a.jsx(ve,{className:"text-xs text-muted-foreground mb-3 line-clamp-2",children:e.description}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,3).map((i,o)=>a.jsx(Z,{variant:"outline",className:"text-xs",children:i},o)),e.tags.length>3&&a.jsxs(Fs,{className:"text-muted-foreground",children:["+",e.tags.length-3," more"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 bg-muted rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:e.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx(Sa,{className:"text-sm font-semibold truncate",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.totalRanks>1&&a.jsx(Dn,{label:`${r.totalRanks} ranks`,type:"rank",size:"sm"}),r.minLevel&&a.jsx(Dn,{label:`Level ${r.minLevel}+`,type:"level",size:"sm"})]})]}),a.jsx(ve,{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:e.description}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(Fs,{className:"text-muted-foreground",children:r.skillTreeName}),e.tags.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[e.tags.slice(0,2).map((i,o)=>a.jsx(Z,{variant:"outline",className:"text-xs",children:i},o)),e.tags.length>2&&a.jsxs(Fs,{className:"text-muted-foreground",children:["+",e.tags.length-2," more"]})]})]})]})]})})}function lX(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u;return{id:l.edid,name:l.name,description:((u=(c=l.ranks[0])==null?void 0:c.description)==null?void 0:u.base)||"",searchableText:l.searchableText,tags:l.tags,category:l.category,skillTree:l.skillTreeName,originalPerk:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new ln(n,s),[n,s]),i=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredPerks:g.useMemo(()=>i.map(l=>l.item.originalPerk),[i]),searchResults:i,searchablePerks:n}}function cX(){lt();const{build:e}=Xe(),{allPerks:t,loading:n,error:s}=ch(),[r,i]=g.useState("list"),[o,l]=g.useState("alphabetical"),{selectedTags:c,searchQuery:u,onTagSelect:d,onTagRemove:f,onClearTags:m,onSearchChange:h}=Dv(),v=g.useMemo(()=>{const S=[...new Set(t.map(z=>z.skillTreeName))],E=[...new Set(t.flatMap(z=>z.tags))],T=[...new Set(t.map(z=>z.minLevel||0))].sort((z,R)=>z-R);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:E.map(z=>({id:`keyword-${z}`,label:z,value:z,category:"Fuzzy Search",description:`Perks with ${z} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:S.map(z=>({id:`skill-${z}`,label:z,value:z,category:"Skill Trees",description:`Perks from ${z} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:T.map(z=>({id:`level-${z}`,label:`Level ${z}+`,value:z.toString(),category:"Minimum Level",description:`Perks requiring level ${z} or higher`}))}]},[t]),{filteredPerks:y}=lX(t,u),w=y.map(S=>({...RT(S,e),originalPerk:S})),x=g.useMemo(()=>{const S=[...w];switch(o){case"alphabetical":return S.sort((E,T)=>E.name.localeCompare(T.name));case"skill-tree":return S.sort((E,T)=>{const z=E.originalPerk.skillTreeName,R=T.originalPerk.skillTreeName;return z.localeCompare(R)||E.name.localeCompare(T.name)});case"level":return S.sort((E,T)=>{const z=E.originalPerk.minLevel||0,R=T.originalPerk.minLevel||0;return z-R||E.name.localeCompare(T.name)});default:return S}},[w,o]),[p,b]=g.useState(null),[j,N]=g.useState(!1),A=S=>{b(S),N(!0)},k=S=>{i(S)},C=S=>{switch(S){case"alphabetical":return"Alphabetical (A-Z)";case"skill-tree":return"Skill Tree";case"level":return"Level";default:return"Alphabetical (A-Z)"}};return n?a.jsx(Yt,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-lg",children:"Loading perk data..."})})}):s?a.jsx(Yt,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-lg text-red-500",children:["Error loading perk data: ",s]})})}):a.jsxs(Yt,{title:"Perk References",children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Yr,{categories:v,onSelect:d,onCustomSearch:h})})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(U,{variant:r==="grid"?"default":"outline",size:"sm",onClick:()=>k("grid"),className:"flex items-center gap-2",children:[a.jsx(Fi,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(U,{variant:r==="list"?"default":"outline",size:"sm",onClick:()=>k("list"),className:"flex items-center gap-2",children:[a.jsx(Ha,{className:"h-4 w-4"}),"List"]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Xi,{children:[a.jsx(Wi,{asChild:!0,children:a.jsxs(U,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort: ",C(o),a.jsx(Je,{className:"h-4 w-4"})]})}),a.jsxs(Ya,{align:"end",children:[a.jsx(un,{onClick:()=>l("alphabetical"),children:"Alphabetical (A-Z)"}),a.jsx(un,{onClick:()=>l("skill-tree"),children:"Skill Tree"}),a.jsx(un,{onClick:()=>l("level"),children:"Level"})]})]})})]}),a.jsx("div",{className:"my-4",children:c.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:m,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Me,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),c.map(S=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>f(S.id),title:"Click to remove",children:[S.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},S.id))]})}),a.jsxs("div",{className:"mt-6",children:[r==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(S=>a.jsx(vj,{item:S,onClick:()=>A(S.originalPerk),viewMode:"grid"},S.id))}):a.jsx("div",{className:"space-y-2",children:x.map(S=>a.jsx(vj,{item:S,onClick:()=>A(S.originalPerk),viewMode:"list"},S.id))}),x.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No perks found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]}),a.jsx(oX,{perk:p,isOpen:j,onOpenChange:N})]})}function yj(){const{skills:e,loading:t,error:n,searchQuery:s,setSearchQuery:r,selectedCategory:i,setSelectedCategory:o,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:v,skillSummary:y}=mT(),{filteredItems:w,groupedItems:x,stats:p,isLoading:b,error:j,searchCategories:N}=iX(),{selectedTags:A,viewMode:k,searchQuery:C,onTagSelect:S,onTagRemove:E,onClearTags:T,onViewModeChange:z,onSearchChange:R}=Dv();return t||b?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading data..."})]})}):n||j?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:n||j}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsx(Yt,{title:"Skills & Perks",description:"Manage your character's skills and browse all available perks.",children:a.jsx("div",{className:"mb-6",children:a.jsxs(qa,{defaultValue:"builder",className:"w-full",children:[a.jsxs(Za,{className:"grid w-full grid-cols-2",children:[a.jsx(It,{value:"builder",children:"Perk Builder"}),a.jsx(It,{value:"reference",children:"Perk References"})]}),a.jsx(Zt,{value:"builder",className:"space-y-4",children:a.jsx(_Z,{skills:e,loading:t,error:n,searchQuery:s,onSearchChange:r,selectedCategory:i,onCategorySelect:o,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:v,skillSummary:y})}),a.jsx(Zt,{value:"reference",className:"space-y-4",children:a.jsx(cX,{items:w,groupedItems:x,stats:p,searchCategories:N,selectedTags:A,viewMode:k,searchQuery:C,onTagSelect:S,onTagRemove:E,onClearTags:T,onViewModeChange:z,onSearchChange:R})})]})})})}function X(e,t,n){function s(l,c){var u;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(u=l._zod).traits??(u.traits=new Set),l._zod.traits.add(e),t(l,c);for(const d in o.prototype)d in l||Object.defineProperty(l,d,{value:o.prototype[d].bind(l)});l._zod.constr=o,l._zod.def=c}const r=(n==null?void 0:n.Parent)??Object;class i extends r{}Object.defineProperty(i,"name",{value:e});function o(l){var c;const u=n!=null&&n.Parent?new i:this;s(u,l),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:l=>{var c,u;return n!=null&&n.Parent&&l instanceof n.Parent?!0:(u=(c=l==null?void 0:l._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class Kc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const LT={};function Di(e){return LT}function uX(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,r])=>t.indexOf(+s)===-1).map(([s,r])=>r)}function dX(e,t){return typeof t=="bigint"?t.toString():t}function zT(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Lv(e){return e==null}function zv(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function fX(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,r=n>s?n:s,i=Number.parseInt(e.toFixed(r).replace(".","")),o=Number.parseInt(t.toFixed(r).replace(".",""));return i%o/10**r}function tt(e,t,n){Object.defineProperty(e,t,{get(){{const s=n();return e[t]=s,s}},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Pv(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ec(e){return JSON.stringify(e)}const PT=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Xp(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const mX=zT(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Wp(e){if(Xp(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(Xp(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const hX=new Set(["string","number","symbol"]);function uh(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ji(e,t,n){const s=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(s._zod.parent=e),s}function ue(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function gX(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const pX={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function xX(e,t){const n={},s=e._zod.def;for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(n[r]=s.shape[r])}return Ji(e,{...e._zod.def,shape:n,checks:[]})}function vX(e,t){const n={...e._zod.def.shape},s=e._zod.def;for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&delete n[r]}return Ji(e,{...e._zod.def,shape:n,checks:[]})}function yX(e,t){if(!Wp(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return Pv(this,"shape",s),s},checks:[]};return Ji(e,n)}function bX(e,t){return Ji(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return Pv(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function wX(e,t,n){const s=t._zod.def.shape,r={...s};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(r[i]=e?new e({type:"optional",innerType:s[i]}):s[i])}else for(const i in s)r[i]=e?new e({type:"optional",innerType:s[i]}):s[i];return Ji(t,{...t._zod.def,shape:r,checks:[]})}function jX(e,t,n){const s=t._zod.def.shape,r={...s};if(n)for(const i in n){if(!(i in r))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(r[i]=new e({type:"nonoptional",innerType:s[i]}))}else for(const i in s)r[i]=new e({type:"nonoptional",innerType:s[i]});return Ji(t,{...t._zod.def,shape:r,checks:[]})}function vc(e,t=0){var n;for(let s=t;s<e.issues.length;s++)if(((n=e.issues[s])==null?void 0:n.continue)!==!0)return!0;return!1}function $v(e,t){return t.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(e),n})}function wd(e){return typeof e=="string"?e:e==null?void 0:e.message}function Li(e,t,n){var r,i,o,l,c,u;const s={...e,path:e.path??[]};if(!e.message){const d=wd((o=(i=(r=e.inst)==null?void 0:r._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??wd((l=t==null?void 0:t.error)==null?void 0:l.call(t,e))??wd((c=n.customError)==null?void 0:c.call(n,e))??wd((u=n.localeError)==null?void 0:u.call(n,e))??"Invalid input";s.message=d}return delete s.inst,delete s.continue,t!=null&&t.reportInput||delete s.input,s}function Ov(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Qc(...e){const[t,n,s]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:s}:{...t}}const $T=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,dX,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},OT=X("$ZodError",$T),IT=X("$ZodError",$T,{Parent:Error});function NX(e,t=n=>n.message){const n={},s=[];for(const r of e.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):s.push(t(r));return{formErrors:s,fieldErrors:n}}function SX(e,t){const n=t||function(i){return i.message},s={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>r({issues:l}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)s._errors.push(n(o));else{let l=s,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return r(e),s}const kX=e=>(t,n,s,r)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new Kc;if(o.issues.length){const l=new((r==null?void 0:r.Err)??e)(o.issues.map(c=>Li(c,i,Di())));throw PT(l,r==null?void 0:r.callee),l}return o.value},CX=e=>async(t,n,s,r)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const l=new((r==null?void 0:r.Err)??e)(o.issues.map(c=>Li(c,i,Di())));throw PT(l,r==null?void 0:r.callee),l}return o.value},BT=e=>(t,n,s)=>{const r=s?{...s,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new Kc;return i.issues.length?{success:!1,error:new(e??OT)(i.issues.map(o=>Li(o,r,Di())))}:{success:!0,data:i.value}},EX=BT(IT),FT=e=>async(t,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},r);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>Li(o,r,Di())))}:{success:!0,data:i.value}},AX=FT(IT),TX=/^[cC][^\s-]{8,}$/,_X=/^[0-9a-z]+$/,MX=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,RX=/^[0-9a-vA-V]{20}$/,DX=/^[A-Za-z0-9]{27}$/,LX=/^[a-zA-Z0-9_-]{21}$/,zX=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,PX=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,bj=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,$X=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,OX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function IX(){return new RegExp(OX,"u")}const BX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,FX=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,HX=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,UX=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VX=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,HT=/^[A-Za-z0-9_-]*$/,GX=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,qX=/^\+(?:[0-9]){6,14}[0-9]$/,UT="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ZX=new RegExp(`^${UT}$`);function VT(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function YX(e){return new RegExp(`^${VT(e)}$`)}function XX(e){const t=VT({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const s=`${t}(?:${n.join("|")})`;return new RegExp(`^${UT}T(?:${s})$`)}const WX=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},KX=/^\d+$/,QX=/^-?\d+(?:\.\d+)?/i,JX=/true|false/i,eW=/^[^A-Z]*$/,tW=/^[^a-z]*$/,kn=X("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),GT={number:"number",bigint:"bigint",object:"date"},qT=X("$ZodCheckLessThan",(e,t)=>{kn.init(e,t);const n=GT[typeof t.value];e._zod.onattach.push(s=>{const r=s._zod.bag,i=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:n,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ZT=X("$ZodCheckGreaterThan",(e,t)=>{kn.init(e,t);const n=GT[typeof t.value];e._zod.onattach.push(s=>{const r=s._zod.bag,i=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:n,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),nW=X("$ZodCheckMultipleOf",(e,t)=>{kn.init(e,t),e._zod.onattach.push(n=>{var s;(s=n._zod.bag).multipleOf??(s.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):fX(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),sW=X("$ZodCheckNumberFormat",(e,t)=>{var o;kn.init(e,t),t.format=t.format||"float64";const n=(o=t.format)==null?void 0:o.includes("int"),s=n?"int":"number",[r,i]=pX[t.format];e._zod.onattach.push(l=>{const c=l._zod.bag;c.format=t.format,c.minimum=r,c.maximum=i,n&&(c.pattern=KX)}),e._zod.check=l=>{const c=l.value;if(n){if(!Number.isInteger(c)){l.issues.push({expected:s,format:t.format,code:"invalid_type",input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}c<r&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),c>i&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:e})}}),rW=X("$ZodCheckMaxLength",(e,t)=>{var n;kn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!Lv(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const r=s.value;if(r.length<=t.maximum)return;const o=Ov(r);s.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),aW=X("$ZodCheckMinLength",(e,t)=>{var n;kn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!Lv(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const r=s.value;if(r.length>=t.minimum)return;const o=Ov(r);s.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),iW=X("$ZodCheckLengthEquals",(e,t)=>{var n;kn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!Lv(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=s=>{const r=s.value,i=r.length;if(i===t.length)return;const o=Ov(r),l=i>t.length;s.issues.push({origin:o,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),dh=X("$ZodCheckStringFormat",(e,t)=>{var n,s;kn.init(e,t),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),oW=X("$ZodCheckRegex",(e,t)=>{dh.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),lW=X("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=eW),dh.init(e,t)}),cW=X("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=tW),dh.init(e,t)}),uW=X("$ZodCheckIncludes",(e,t)=>{kn.init(e,t);const n=uh(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=s,e._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),dW=X("$ZodCheckStartsWith",(e,t)=>{kn.init(e,t);const n=new RegExp(`^${uh(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),fW=X("$ZodCheckEndsWith",(e,t)=>{kn.init(e,t);const n=new RegExp(`.*${uh(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),mW=X("$ZodCheckOverwrite",(e,t)=>{kn.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class hW{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(o=>o),r=Math.min(...s.map(o=>o.length-o.trimStart().length)),i=s.map(o=>o.slice(r)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,n=this==null?void 0:this.args,r=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...n,r.join(`
`))}}const gW={major:4,minor:0,patch:5},vt=X("$ZodType",(e,t)=>{var r;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=gW;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const i of s)for(const o of i._zod.onattach)o(e);if(s.length===0)(n=e._zod).deferred??(n.deferred=[]),(r=e._zod.deferred)==null||r.push(()=>{e._zod.run=e._zod.parse});else{const i=(o,l,c)=>{let u=vc(o),d;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(o))continue}else if(u)continue;const m=o.issues.length,h=f._zod.check(o);if(h instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Kc;if(d||h instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await h,o.issues.length!==m&&(u||(u=vc(o,m)))});else{if(o.issues.length===m)continue;u||(u=vc(o,m))}}return d?d.then(()=>o):o};e._zod.run=(o,l)=>{const c=e._zod.parse(o,l);if(c instanceof Promise){if(l.async===!1)throw new Kc;return c.then(u=>i(u,s,l))}return i(c,s,l)}}e["~standard"]={validate:i=>{var o;try{const l=EX(e,i);return l.success?{value:l.data}:{issues:(o=l.error)==null?void 0:o.issues}}catch{return AX(e,i).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),Iv=X("$ZodString",(e,t)=>{var n;vt.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??WX(e._zod.bag),e._zod.parse=(s,r)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),ct=X("$ZodStringFormat",(e,t)=>{dh.init(e,t),Iv.init(e,t)}),pW=X("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=PX),ct.init(e,t)}),xW=X("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=bj(s))}else t.pattern??(t.pattern=bj());ct.init(e,t)}),vW=X("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=$X),ct.init(e,t)}),yW=X("$ZodURL",(e,t)=>{ct.init(e,t),e._zod.check=n=>{try{const s=n.value,r=new URL(s),i=r.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:GX.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!s.endsWith("/")&&i.endsWith("/")?n.value=i.slice(0,-1):n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),bW=X("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=IX()),ct.init(e,t)}),wW=X("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=LX),ct.init(e,t)}),jW=X("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=TX),ct.init(e,t)}),NW=X("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=_X),ct.init(e,t)}),SW=X("$ZodULID",(e,t)=>{t.pattern??(t.pattern=MX),ct.init(e,t)}),kW=X("$ZodXID",(e,t)=>{t.pattern??(t.pattern=RX),ct.init(e,t)}),CW=X("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=DX),ct.init(e,t)}),EW=X("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=XX(t)),ct.init(e,t)}),AW=X("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=ZX),ct.init(e,t)}),TW=X("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=YX(t)),ct.init(e,t)}),_W=X("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=zX),ct.init(e,t)}),MW=X("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=BX),ct.init(e,t),e._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv4"})}),RW=X("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=FX),ct.init(e,t),e._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),DW=X("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=HX),ct.init(e,t)}),LW=X("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=UX),ct.init(e,t),e._zod.check=n=>{const[s,r]=n.value.split("/");try{if(!r)throw new Error;const i=Number(r);if(`${i}`!==r)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function YT(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const zW=X("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=VX),ct.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{YT(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function PW(e){if(!HT.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return YT(n)}const $W=X("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=HT),ct.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{PW(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),OW=X("$ZodE164",(e,t)=>{t.pattern??(t.pattern=qX),ct.init(e,t)});function IW(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[s]=n;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const BW=X("$ZodJWT",(e,t)=>{ct.init(e,t),e._zod.check=n=>{IW(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),XT=X("$ZodNumber",(e,t)=>{vt.init(e,t),e._zod.pattern=e._zod.bag.pattern??QX,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const i=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...i?{received:i}:{}}),n}}),FW=X("$ZodNumber",(e,t)=>{sW.init(e,t),XT.init(e,t)}),HW=X("$ZodBoolean",(e,t)=>{vt.init(e,t),e._zod.pattern=JX,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),n}}),UW=X("$ZodUnknown",(e,t)=>{vt.init(e,t),e._zod.parse=n=>n}),VW=X("$ZodNever",(e,t)=>{vt.init(e,t),e._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function wj(e,t,n){e.issues.length&&t.issues.push(...$v(n,e.issues)),t.value[n]=e.value}const GW=X("$ZodArray",(e,t)=>{vt.init(e,t),e._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),n;n.value=Array(r.length);const i=[];for(let o=0;o<r.length;o++){const l=r[o],c=t.element._zod.run({value:l,issues:[]},s);c instanceof Promise?i.push(c.then(u=>wj(u,n,o))):wj(c,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function jd(e,t,n){e.issues.length&&t.issues.push(...$v(n,e.issues)),t.value[n]=e.value}function jj(e,t,n,s){e.issues.length?s[n]===void 0?n in s?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...$v(n,e.issues)):e.value===void 0?n in s&&(t.value[n]=void 0):t.value[n]=e.value}const qW=X("$ZodObject",(e,t)=>{vt.init(e,t);const n=zT(()=>{const f=Object.keys(t.shape);for(const h of f)if(!(t.shape[h]instanceof vt))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const m=gX(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});tt(e._zod,"propValues",()=>{const f=t.shape,m={};for(const h in f){const v=f[h]._zod;if(v.values){m[h]??(m[h]=new Set);for(const y of v.values)m[h].add(y)}}return m});const s=f=>{const m=new hW(["shape","payload","ctx"]),h=n.value,v=p=>{const b=ec(p);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};m.write("const input = payload.value;");const y=Object.create(null);let w=0;for(const p of h.keys)y[p]=`key_${w++}`;m.write("const newResult = {}");for(const p of h.keys)if(h.optionalKeys.has(p)){const b=y[p];m.write(`const ${b} = ${v(p)};`);const j=ec(p);m.write(`
        if (${b}.issues.length) {
          if (input[${j}] === undefined) {
            if (${j} in input) {
              newResult[${j}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${b}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${j}, ...iss.path] : [${j}],
              }))
            );
          }
        } else if (${b}.value === undefined) {
          if (${j} in input) newResult[${j}] = undefined;
        } else {
          newResult[${j}] = ${b}.value;
        }
        `)}else{const b=y[p];m.write(`const ${b} = ${v(p)};`),m.write(`
          if (${b}.issues.length) payload.issues = payload.issues.concat(${b}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${ec(p)}, ...iss.path] : [${ec(p)}]
          })));`),m.write(`newResult[${ec(p)}] = ${b}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const x=m.compile();return(p,b)=>x(f,p,b)};let r;const i=Xp,o=!LT.jitless,c=o&&mX.value,u=t.catchall;let d;e._zod.parse=(f,m)=>{d??(d=n.value);const h=f.value;if(!i(h))return f.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),f;const v=[];if(o&&c&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)r||(r=s(t.shape)),f=r(f,m);else{f.value={};const b=d.shape;for(const j of d.keys){const N=b[j],A=N._zod.run({value:h[j],issues:[]},m),k=N._zod.optin==="optional"&&N._zod.optout==="optional";A instanceof Promise?v.push(A.then(C=>k?jj(C,f,j,h):jd(C,f,j))):k?jj(A,f,j,h):jd(A,f,j)}}if(!u)return v.length?Promise.all(v).then(()=>f):f;const y=[],w=d.keySet,x=u._zod,p=x.def.type;for(const b of Object.keys(h)){if(w.has(b))continue;if(p==="never"){y.push(b);continue}const j=x.run({value:h[b],issues:[]},m);j instanceof Promise?v.push(j.then(N=>jd(N,f,b))):jd(j,f,b)}return y.length&&f.issues.push({code:"unrecognized_keys",keys:y,input:h,inst:e}),v.length?Promise.all(v).then(()=>f):f}});function Nj(e,t,n,s){for(const r of e)if(r.issues.length===0)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(r=>r.issues.map(i=>Li(i,s,Di())))}),t}const ZW=X("$ZodUnion",(e,t)=>{vt.init(e,t),tt(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),tt(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),tt(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),tt(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${n.map(s=>zv(s.source)).join("|")})$`)}}),e._zod.parse=(n,s)=>{let r=!1;const i=[];for(const o of t.options){const l=o._zod.run({value:n.value,issues:[]},s);if(l instanceof Promise)i.push(l),r=!0;else{if(l.issues.length===0)return l;i.push(l)}}return r?Promise.all(i).then(o=>Nj(o,n,e,s)):Nj(i,n,e,s)}}),YW=X("$ZodIntersection",(e,t)=>{vt.init(e,t),e._zod.parse=(n,s)=>{const r=n.value,i=t.left._zod.run({value:r,issues:[]},s),o=t.right._zod.run({value:r,issues:[]},s);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,u])=>Sj(n,c,u)):Sj(n,i,o)}});function Kp(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Wp(e)&&Wp(t)){const n=Object.keys(t),s=Object.keys(e).filter(i=>n.indexOf(i)!==-1),r={...e,...t};for(const i of s){const o=Kp(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};r[i]=o.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<e.length;s++){const r=e[s],i=t[s],o=Kp(r,i);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Sj(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),vc(e))return e;const s=Kp(t.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const XW=X("$ZodEnum",(e,t)=>{vt.init(e,t);const n=uX(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(s=>hX.has(typeof s)).map(s=>typeof s=="string"?uh(s):s.toString()).join("|")})$`),e._zod.parse=(s,r)=>{const i=s.value;return e._zod.values.has(i)||s.issues.push({code:"invalid_value",values:n,input:i,inst:e}),s}}),WW=X("$ZodTransform",(e,t)=>{vt.init(e,t),e._zod.parse=(n,s)=>{const r=t.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(o=>(n.value=o,n));if(r instanceof Promise)throw new Kc;return n.value=r,n}}),KW=X("$ZodOptional",(e,t)=>{vt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",tt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),tt(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${zv(n.source)})?$`):void 0}),e._zod.parse=(n,s)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,s):n.value===void 0?n:t.innerType._zod.run(n,s)}),QW=X("$ZodNullable",(e,t)=>{vt.init(e,t),tt(e._zod,"optin",()=>t.innerType._zod.optin),tt(e._zod,"optout",()=>t.innerType._zod.optout),tt(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${zv(n.source)}|null)$`):void 0}),tt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,s)=>n.value===null?n:t.innerType._zod.run(n,s)}),JW=X("$ZodDefault",(e,t)=>{vt.init(e,t),e._zod.optin="optional",tt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>kj(i,t)):kj(r,t)}});function kj(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const eK=X("$ZodPrefault",(e,t)=>{vt.init(e,t),e._zod.optin="optional",tt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,s))}),tK=X("$ZodNonOptional",(e,t)=>{vt.init(e,t),tt(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>Cj(i,e)):Cj(r,e)}});function Cj(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const nK=X("$ZodCatch",(e,t)=>{vt.init(e,t),e._zod.optin="optional",tt(e._zod,"optout",()=>t.innerType._zod.optout),tt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(o=>Li(o,s,Di()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(i=>Li(i,s,Di()))},input:n.value}),n.issues=[]),n)}}),sK=X("$ZodPipe",(e,t)=>{vt.init(e,t),tt(e._zod,"values",()=>t.in._zod.values),tt(e._zod,"optin",()=>t.in._zod.optin),tt(e._zod,"optout",()=>t.out._zod.optout),tt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,s)=>{const r=t.in._zod.run(n,s);return r instanceof Promise?r.then(i=>Ej(i,t,s)):Ej(r,t,s)}});function Ej(e,t,n){return vc(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const rK=X("$ZodReadonly",(e,t)=>{vt.init(e,t),tt(e._zod,"propValues",()=>t.innerType._zod.propValues),tt(e._zod,"values",()=>t.innerType._zod.values),tt(e._zod,"optin",()=>t.innerType._zod.optin),tt(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(Aj):Aj(r)}});function Aj(e){return e.value=Object.freeze(e.value),e}const aK=X("$ZodCustom",(e,t)=>{kn.init(e,t),vt.init(e,t),e._zod.parse=(n,s)=>n,e._zod.check=n=>{const s=n.value,r=t.fn(s);if(r instanceof Promise)return r.then(i=>Tj(i,n,s,e));Tj(r,n,s,e)}});function Tj(e,t,n,s){if(!e){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),t.issues.push(Qc(r))}}class iK{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const s=n[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const s={...this.get(n)??{}};return delete s.id,{...s,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function oK(){return new iK}const Nd=oK();function lK(e,t){return new e({type:"string",...ue(t)})}function cK(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ue(t)})}function _j(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ue(t)})}function uK(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ue(t)})}function dK(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ue(t)})}function fK(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ue(t)})}function mK(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ue(t)})}function hK(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ue(t)})}function gK(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ue(t)})}function pK(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ue(t)})}function xK(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ue(t)})}function vK(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ue(t)})}function yK(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ue(t)})}function bK(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ue(t)})}function wK(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ue(t)})}function jK(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ue(t)})}function NK(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ue(t)})}function SK(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ue(t)})}function kK(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ue(t)})}function CK(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ue(t)})}function EK(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ue(t)})}function AK(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ue(t)})}function TK(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ue(t)})}function _K(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ue(t)})}function MK(e,t){return new e({type:"string",format:"date",check:"string_format",...ue(t)})}function RK(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ue(t)})}function DK(e,t){return new e({type:"string",format:"duration",check:"string_format",...ue(t)})}function LK(e,t){return new e({type:"number",checks:[],...ue(t)})}function zK(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...ue(t)})}function PK(e,t){return new e({type:"boolean",...ue(t)})}function $K(e){return new e({type:"unknown"})}function OK(e,t){return new e({type:"never",...ue(t)})}function Mj(e,t){return new qT({check:"less_than",...ue(t),value:e,inclusive:!1})}function yg(e,t){return new qT({check:"less_than",...ue(t),value:e,inclusive:!0})}function Rj(e,t){return new ZT({check:"greater_than",...ue(t),value:e,inclusive:!1})}function bg(e,t){return new ZT({check:"greater_than",...ue(t),value:e,inclusive:!0})}function Dj(e,t){return new nW({check:"multiple_of",...ue(t),value:e})}function WT(e,t){return new rW({check:"max_length",...ue(t),maximum:e})}function If(e,t){return new aW({check:"min_length",...ue(t),minimum:e})}function KT(e,t){return new iW({check:"length_equals",...ue(t),length:e})}function IK(e,t){return new oW({check:"string_format",format:"regex",...ue(t),pattern:e})}function BK(e){return new lW({check:"string_format",format:"lowercase",...ue(e)})}function FK(e){return new cW({check:"string_format",format:"uppercase",...ue(e)})}function HK(e,t){return new uW({check:"string_format",format:"includes",...ue(t),includes:e})}function UK(e,t){return new dW({check:"string_format",format:"starts_with",...ue(t),prefix:e})}function VK(e,t){return new fW({check:"string_format",format:"ends_with",...ue(t),suffix:e})}function Du(e){return new mW({check:"overwrite",tx:e})}function GK(e){return Du(t=>t.normalize(e))}function qK(){return Du(e=>e.trim())}function ZK(){return Du(e=>e.toLowerCase())}function YK(){return Du(e=>e.toUpperCase())}function XK(e,t,n){return new e({type:"array",element:t,...ue(n)})}function WK(e,t,n){return new e({type:"custom",check:"custom",fn:t,...ue(n)})}const KK=X("ZodISODateTime",(e,t)=>{EW.init(e,t),ht.init(e,t)});function QK(e){return _K(KK,e)}const JK=X("ZodISODate",(e,t)=>{AW.init(e,t),ht.init(e,t)});function eQ(e){return MK(JK,e)}const tQ=X("ZodISOTime",(e,t)=>{TW.init(e,t),ht.init(e,t)});function nQ(e){return RK(tQ,e)}const sQ=X("ZodISODuration",(e,t)=>{_W.init(e,t),ht.init(e,t)});function rQ(e){return DK(sQ,e)}const aQ=(e,t)=>{OT.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>SX(e,n)},flatten:{value:n=>NX(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},fh=X("ZodError",aQ,{Parent:Error}),iQ=kX(fh),oQ=CX(fh),lQ=BT(fh),cQ=FT(fh),Et=X("ZodType",(e,t)=>(vt.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),e.clone=(n,s)=>Ji(e,n,s),e.brand=()=>e,e.register=(n,s)=>(n.add(e,s),e),e.parse=(n,s)=>iQ(e,n,s,{callee:e.parse}),e.safeParse=(n,s)=>lQ(e,n,s),e.parseAsync=async(n,s)=>oQ(e,n,s,{callee:e.parseAsync}),e.safeParseAsync=async(n,s)=>cQ(e,n,s),e.spa=e.safeParseAsync,e.refine=(n,s)=>e.check(nJ(n,s)),e.superRefine=n=>e.check(sJ(n)),e.overwrite=n=>e.check(Du(n)),e.optional=()=>$j(e),e.nullable=()=>Oj(e),e.nullish=()=>$j(Oj(e)),e.nonoptional=n=>YQ(e,n),e.array=()=>zi(e),e.or=n=>$Q([e,n]),e.and=n=>IQ(e,n),e.transform=n=>Ij(e,HQ(n)),e.default=n=>GQ(e,n),e.prefault=n=>ZQ(e,n),e.catch=n=>WQ(e,n),e.pipe=n=>Ij(e,n),e.readonly=()=>JQ(e),e.describe=n=>{const s=e.clone();return Nd.add(s,{description:n}),s},Object.defineProperty(e,"description",{get(){var n;return(n=Nd.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Nd.get(e);const s=e.clone();return Nd.add(s,n[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),QT=X("_ZodString",(e,t)=>{Iv.init(e,t),Et.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...s)=>e.check(IK(...s)),e.includes=(...s)=>e.check(HK(...s)),e.startsWith=(...s)=>e.check(UK(...s)),e.endsWith=(...s)=>e.check(VK(...s)),e.min=(...s)=>e.check(If(...s)),e.max=(...s)=>e.check(WT(...s)),e.length=(...s)=>e.check(KT(...s)),e.nonempty=(...s)=>e.check(If(1,...s)),e.lowercase=s=>e.check(BK(s)),e.uppercase=s=>e.check(FK(s)),e.trim=()=>e.check(qK()),e.normalize=(...s)=>e.check(GK(...s)),e.toLowerCase=()=>e.check(ZK()),e.toUpperCase=()=>e.check(YK())}),uQ=X("ZodString",(e,t)=>{Iv.init(e,t),QT.init(e,t),e.email=n=>e.check(cK(dQ,n)),e.url=n=>e.check(hK(fQ,n)),e.jwt=n=>e.check(TK(EQ,n)),e.emoji=n=>e.check(gK(mQ,n)),e.guid=n=>e.check(_j(Lj,n)),e.uuid=n=>e.check(uK(Sd,n)),e.uuidv4=n=>e.check(dK(Sd,n)),e.uuidv6=n=>e.check(fK(Sd,n)),e.uuidv7=n=>e.check(mK(Sd,n)),e.nanoid=n=>e.check(pK(hQ,n)),e.guid=n=>e.check(_j(Lj,n)),e.cuid=n=>e.check(xK(gQ,n)),e.cuid2=n=>e.check(vK(pQ,n)),e.ulid=n=>e.check(yK(xQ,n)),e.base64=n=>e.check(CK(SQ,n)),e.base64url=n=>e.check(EK(kQ,n)),e.xid=n=>e.check(bK(vQ,n)),e.ksuid=n=>e.check(wK(yQ,n)),e.ipv4=n=>e.check(jK(bQ,n)),e.ipv6=n=>e.check(NK(wQ,n)),e.cidrv4=n=>e.check(SK(jQ,n)),e.cidrv6=n=>e.check(kK(NQ,n)),e.e164=n=>e.check(AK(CQ,n)),e.datetime=n=>e.check(QK(n)),e.date=n=>e.check(eQ(n)),e.time=n=>e.check(nQ(n)),e.duration=n=>e.check(rQ(n))});function cn(e){return lK(uQ,e)}const ht=X("ZodStringFormat",(e,t)=>{ct.init(e,t),QT.init(e,t)}),dQ=X("ZodEmail",(e,t)=>{vW.init(e,t),ht.init(e,t)}),Lj=X("ZodGUID",(e,t)=>{pW.init(e,t),ht.init(e,t)}),Sd=X("ZodUUID",(e,t)=>{xW.init(e,t),ht.init(e,t)}),fQ=X("ZodURL",(e,t)=>{yW.init(e,t),ht.init(e,t)}),mQ=X("ZodEmoji",(e,t)=>{bW.init(e,t),ht.init(e,t)}),hQ=X("ZodNanoID",(e,t)=>{wW.init(e,t),ht.init(e,t)}),gQ=X("ZodCUID",(e,t)=>{jW.init(e,t),ht.init(e,t)}),pQ=X("ZodCUID2",(e,t)=>{NW.init(e,t),ht.init(e,t)}),xQ=X("ZodULID",(e,t)=>{SW.init(e,t),ht.init(e,t)}),vQ=X("ZodXID",(e,t)=>{kW.init(e,t),ht.init(e,t)}),yQ=X("ZodKSUID",(e,t)=>{CW.init(e,t),ht.init(e,t)}),bQ=X("ZodIPv4",(e,t)=>{MW.init(e,t),ht.init(e,t)}),wQ=X("ZodIPv6",(e,t)=>{RW.init(e,t),ht.init(e,t)}),jQ=X("ZodCIDRv4",(e,t)=>{DW.init(e,t),ht.init(e,t)}),NQ=X("ZodCIDRv6",(e,t)=>{LW.init(e,t),ht.init(e,t)}),SQ=X("ZodBase64",(e,t)=>{zW.init(e,t),ht.init(e,t)}),kQ=X("ZodBase64URL",(e,t)=>{$W.init(e,t),ht.init(e,t)}),CQ=X("ZodE164",(e,t)=>{OW.init(e,t),ht.init(e,t)}),EQ=X("ZodJWT",(e,t)=>{BW.init(e,t),ht.init(e,t)}),JT=X("ZodNumber",(e,t)=>{XT.init(e,t),Et.init(e,t),e.gt=(s,r)=>e.check(Rj(s,r)),e.gte=(s,r)=>e.check(bg(s,r)),e.min=(s,r)=>e.check(bg(s,r)),e.lt=(s,r)=>e.check(Mj(s,r)),e.lte=(s,r)=>e.check(yg(s,r)),e.max=(s,r)=>e.check(yg(s,r)),e.int=s=>e.check(zj(s)),e.safe=s=>e.check(zj(s)),e.positive=s=>e.check(Rj(0,s)),e.nonnegative=s=>e.check(bg(0,s)),e.negative=s=>e.check(Mj(0,s)),e.nonpositive=s=>e.check(yg(0,s)),e.multipleOf=(s,r)=>e.check(Dj(s,r)),e.step=(s,r)=>e.check(Dj(s,r)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function xi(e){return LK(JT,e)}const AQ=X("ZodNumberFormat",(e,t)=>{FW.init(e,t),JT.init(e,t)});function zj(e){return zK(AQ,e)}const TQ=X("ZodBoolean",(e,t)=>{HW.init(e,t),Et.init(e,t)});function _Q(e){return PK(TQ,e)}const MQ=X("ZodUnknown",(e,t)=>{UW.init(e,t),Et.init(e,t)});function Pj(){return $K(MQ)}const RQ=X("ZodNever",(e,t)=>{VW.init(e,t),Et.init(e,t)});function DQ(e){return OK(RQ,e)}const LQ=X("ZodArray",(e,t)=>{GW.init(e,t),Et.init(e,t),e.element=t.element,e.min=(n,s)=>e.check(If(n,s)),e.nonempty=n=>e.check(If(1,n)),e.max=(n,s)=>e.check(WT(n,s)),e.length=(n,s)=>e.check(KT(n,s)),e.unwrap=()=>e.element});function zi(e,t){return XK(LQ,e,t)}const zQ=X("ZodObject",(e,t)=>{qW.init(e,t),Et.init(e,t),tt(e,"shape",()=>t.shape),e.keyof=()=>BQ(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Pj()}),e.loose=()=>e.clone({...e._zod.def,catchall:Pj()}),e.strict=()=>e.clone({...e._zod.def,catchall:DQ()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>yX(e,n),e.merge=n=>bX(e,n),e.pick=n=>xX(e,n),e.omit=n=>vX(e,n),e.partial=(...n)=>wX(e_,e,n[0]),e.required=(...n)=>jX(t_,e,n[0])});function Wr(e,t){const n={type:"object",get shape(){return Pv(this,"shape",{...e}),this.shape},...ue(t)};return new zQ(n)}const PQ=X("ZodUnion",(e,t)=>{ZW.init(e,t),Et.init(e,t),e.options=t.options});function $Q(e,t){return new PQ({type:"union",options:e,...ue(t)})}const OQ=X("ZodIntersection",(e,t)=>{YW.init(e,t),Et.init(e,t)});function IQ(e,t){return new OQ({type:"intersection",left:e,right:t})}const Qp=X("ZodEnum",(e,t)=>{XW.init(e,t),Et.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(s,r)=>{const i={};for(const o of s)if(n.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Qp({...t,checks:[],...ue(r),entries:i})},e.exclude=(s,r)=>{const i={...t.entries};for(const o of s)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Qp({...t,checks:[],...ue(r),entries:i})}});function BQ(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new Qp({type:"enum",entries:n,...ue(t)})}const FQ=X("ZodTransform",(e,t)=>{WW.init(e,t),Et.init(e,t),e._zod.parse=(n,s)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(Qc(i,n.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=e),o.continue??(o.continue=!0),n.issues.push(Qc(o))}};const r=t.transform(n.value,n);return r instanceof Promise?r.then(i=>(n.value=i,n)):(n.value=r,n)}});function HQ(e){return new FQ({type:"transform",transform:e})}const e_=X("ZodOptional",(e,t)=>{KW.init(e,t),Et.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $j(e){return new e_({type:"optional",innerType:e})}const UQ=X("ZodNullable",(e,t)=>{QW.init(e,t),Et.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Oj(e){return new UQ({type:"nullable",innerType:e})}const VQ=X("ZodDefault",(e,t)=>{JW.init(e,t),Et.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function GQ(e,t){return new VQ({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const qQ=X("ZodPrefault",(e,t)=>{eK.init(e,t),Et.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ZQ(e,t){return new qQ({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const t_=X("ZodNonOptional",(e,t)=>{tK.init(e,t),Et.init(e,t),e.unwrap=()=>e._zod.def.innerType});function YQ(e,t){return new t_({type:"nonoptional",innerType:e,...ue(t)})}const XQ=X("ZodCatch",(e,t)=>{nK.init(e,t),Et.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function WQ(e,t){return new XQ({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const KQ=X("ZodPipe",(e,t)=>{sK.init(e,t),Et.init(e,t),e.in=t.in,e.out=t.out});function Ij(e,t){return new KQ({type:"pipe",in:e,out:t})}const QQ=X("ZodReadonly",(e,t)=>{rK.init(e,t),Et.init(e,t)});function JQ(e){return new QQ({type:"readonly",innerType:e})}const eJ=X("ZodCustom",(e,t)=>{aK.init(e,t),Et.init(e,t)});function tJ(e){const t=new kn({check:"custom"});return t._zod.check=e,t}function nJ(e,t={}){return WK(eJ,e,t)}function sJ(e){const t=tJ(n=>(n.addIssue=s=>{if(typeof s=="string")n.issues.push(Qc(s,n.value,t._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(Qc(r))}},e(n.value,n)));return t}const rJ=Wr({type:cn(),id:cn()}),aJ=Wr({skill:cn(),level:xi()}),iJ=Wr({skillLevel:aJ.optional(),items:zi(rJ).optional()}),oJ=Wr({base:cn(),subtext:cn()}),lJ=Wr({rank:xi(),edid:cn(),name:cn(),description:oJ,prerequisites:iJ}),cJ=Wr({x:xi(),y:xi(),horizontal:xi(),vertical:xi()}),uJ=Wr({parents:zi(cn()),children:zi(cn())}),dJ=Wr({edid:cn(),name:cn(),ranks:zi(lJ),totalRanks:xi(),connections:uJ,isRoot:_Q(),position:cJ}),fJ=Wr({treeId:cn(),treeName:cn(),treeDescription:cn(),category:cn(),perks:zi(dJ)});zi(fJ);function mJ(e){return e.length===0?{minX:0,maxX:0,minY:0,maxY:0}:e.reduce((t,n)=>({minX:Math.min(t.minX,n.x),maxX:Math.max(t.maxX,n.x),minY:Math.min(t.minY,n.y),maxY:Math.max(t.maxY,n.y)}),{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0})}const hJ=(e,t)=>({perkNode:n=>a.jsx(WA,{...n,onTogglePerk:e,onRankChange:t})}),wg={cellWidth:240,cellHeight:140,nodeWidth:140,nodeHeight:80,gridGap:40,padding:80};function gJ(e,t,n){const{x:s,y:r,horizontal:i,vertical:o}=e,l=t.maxX-s+t.minX,c=-i,u=t.maxY-r+t.minY,d=-o,f=(l-t.minX)*n.cellWidth+(l-t.minX)*n.gridGap+n.padding+n.cellWidth/2,m=(u-t.minY)*n.cellHeight+(u-t.minY)*n.gridGap+n.padding+n.cellHeight/2,h=c*(n.cellWidth/2-n.nodeWidth/2),v=d*(n.cellHeight/2-n.nodeHeight/2),y=f+h,w=m+v;return{x:y,y:w,gridX:l,gridY:u,horizontal:c,vertical:d}}function pJ(e,t,n,s){const r=e-s.padding,i=t-s.padding,o=Math.floor(r/(s.cellWidth+s.gridGap)),l=Math.floor(i/(s.cellHeight+s.gridGap)),c=o*s.cellWidth+o*s.gridGap+s.padding+s.cellWidth/2,u=l*s.cellHeight+l*s.gridGap+s.padding+s.cellHeight/2,d=e-c,f=t-u,m=s.cellWidth/2-s.nodeWidth/2,h=s.cellHeight/2-s.nodeHeight/2,v=Math.max(-1,Math.min(1,d/m)),y=Math.max(-1,Math.min(1,f/h)),w=n.maxX-o+n.minX,x=n.maxY-l+n.minY,p=-v,b=-y;return{x:e,y:t,gridX:w,gridY:x,horizontal:p,vertical:b}}function xJ(e,t,n){const s=Math.ceil(Math.sqrt(t)),r=Math.floor(e/s),i=e%s,o=i*(n.cellWidth+n.gridGap)+n.padding+n.cellWidth/2,l=r*(n.cellHeight+n.gridGap)+n.padding+n.cellHeight/2;return{x:o,y:l,gridX:i,gridY:r,horizontal:0,vertical:0}}function vJ({tree:e,onTogglePerk:t,onRankChange:n,selectedPerks:s,className:r}){const[i,o]=P.useState(null),[l,c]=g.useState(new Map),[u,d]=g.useState(!1),[f,m]=g.useState(!1),[h,v]=g.useState(null),y=g.useMemo(()=>{if(!e)return null;const L=YA(e);return L.success?L.data:(console.error("Invalid perk tree data:",L.error),null)},[e]);P.useEffect(()=>{if(!y){c(new Map);return}d(!0),XA(y.treeId).then(L=>{if(L){const O=Hw(y.treeId,L);c(O)}else c(new Map)}).catch(L=>{c(new Map)}).finally(()=>{d(!1)})},[y==null?void 0:y.treeId]);const w=g.useMemo(()=>hJ(t,n),[t,n]),x=g.useMemo(()=>{if(!y||u)return new Map;const L=new Map,O=y.perks.map(I=>I.position).filter(I=>I!==void 0);let D={minX:0,maxX:0,minY:0,maxY:0};O.length>0&&(D=mJ(O)),v(D);let M=0;return y.perks.forEach(I=>{const B=l.get(I.edid);if(B){L.set(I.edid,B);return}if(I.position){const q=gJ(I.position,D,wg);L.set(I.edid,q);return}const H=xJ(M,y.perks.length,wg);L.set(I.edid,H),M++}),L},[y,l,u]),p=g.useMemo(()=>{if(!y)return{saved:0,avif:0,default:0,total:0};let L=0,O=0,D=0;return y.perks.find(M=>M.edid==="LoreRimTrapper_Rank1"),y.perks.find(M=>M.edid==="LoreRimTrapper_Rank2"),y.perks.find(M=>M.edid==="LoreRimTrapper_Rank3"),y.perks.forEach(M=>{l.get(M.edid)?L++:M.position?O++:D++}),{saved:L,avif:O,default:D,total:y.perks.length}},[y,l]),b=g.useMemo(()=>!y||u?[]:y.perks.map(O=>{var q,Y,J,le;const D=O.edid,M=x.get(D)||{x:0,y:0},I=((Y=(q=O.connections)==null?void 0:q.children)==null?void 0:Y.length)>0||!1,B=((le=(J=O.connections)==null?void 0:J.parents)==null?void 0:le.length)===0||!1,H=!l.get(D)&&!O.position;return{id:D,type:"perkNode",position:{x:M.x,y:M.y},draggable:f||H,data:{...O,selected:!1,hasChildren:I,isRoot:B,hasNoPosition:H}}}),[y,x,f,u,l]),j=g.useMemo(()=>{if(!y)return[];const L=[];return y.perks.forEach(O=>{var M;const D=O.edid;(M=O.connections)!=null&&M.children&&O.connections.children.forEach(I=>{if(I===D)return;y.perks.some(H=>H.edid===I)&&L.push({id:`${D}-${I}`,source:D,target:I,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),L},[y]),[N,A,k]=HA(b),[C,S,E]=UA(j);P.useEffect(()=>{A(b)},[b,A]),P.useEffect(()=>{y&&A(L=>L.map(O=>{const D=s.find(I=>I.edid===O.id),M=D!==void 0;return{...O,draggable:f,data:{...O.data,selected:M,currentRank:(D==null?void 0:D.currentRank)||0}}}))},[s,A,y,f]),P.useEffect(()=>{S(j)},[j,S]),P.useEffect(()=>{y&&N.length>0&&i&&setTimeout(()=>{i.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[y==null?void 0:y.treeId,i]);const T=g.useCallback(L=>S(O=>xv(L,O)),[S]),z=g.useCallback((L,O)=>{if(!f||!h)return;const D=pJ(O.position.x,O.position.y,h,wg),M=new Map(l);M.set(O.id,D),c(M)},[f,l,h]),R=g.useCallback(()=>{if(!y)return;const L=Bq(y,x);Fq(L)},[y,x]),_=g.useCallback(L=>{var M;const O=(M=L.target.files)==null?void 0:M[0];if(!O||!y)return;const D=new FileReader;D.onload=I=>{var B;try{const H=JSON.parse((B=I.target)==null?void 0:B.result);if(H.treeId===y.treeId){const q=Hw(y.treeId,H);c(q)}else alert("Position file does not match current tree!")}catch(H){alert("Error loading position file!"),console.error("Error loading positions:",H)}},D.readAsText(O)},[y]),$=g.useCallback(()=>{m(!f)},[f]);return y?a.jsxs("div",{className:`w-full h-full bg-background rounded-lg border overflow-auto ${r||""}`,children:[a.jsx("div",{className:"p-4 border-b bg-muted/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Experimental AVIF Grid Canvas (Mirrored + Enhanced Spacing)"}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Bottom-up tree with left-right mirroring using enhanced grid spacing",l.size>0&&!u&&a.jsx("span",{className:"text-green-600 ml-2",children:"â€¢ Using saved positions"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 text-xs text-blue-600",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),"Loading positions..."]}),!u&&p.total>0&&a.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 text-xs bg-muted/30 rounded border",children:[a.jsxs("span",{className:"text-green-600",children:["Saved: ",p.saved]}),a.jsxs("span",{className:"text-blue-600",children:["AVIF: ",p.avif]}),a.jsxs("span",{className:"text-red-600",children:["Default: ",p.default]}),a.jsxs("span",{className:"text-muted-foreground",children:["Total: ",p.total]})]}),a.jsx("button",{onClick:$,className:`px-3 py-1 text-xs rounded border ${f?"bg-blue-500 text-white border-blue-500":"bg-background text-foreground border-border hover:bg-muted"}`,children:f?"Exit Edit":"Edit Mode"}),a.jsx("button",{onClick:R,className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted",children:"Save Positions"}),a.jsxs("label",{className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted cursor-pointer",children:["Load Positions",a.jsx("input",{type:"file",accept:".json",onChange:_,className:"hidden"})]})]})]})}),a.jsx("div",{className:"w-full h-full min-h-[400px]",style:{zIndex:Nt.CONTENT,position:"relative"},children:a.jsxs(Nv,{nodes:N,edges:C,onNodesChange:k,onEdgesChange:E,onConnect:T,onInit:o,onNodeDragStop:z,nodeTypes:w,nodesDraggable:f,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},style:{backgroundColor:"hsl(var(--background))",zIndex:1},children:[a.jsx(ZA,{color:"hsl(var(--muted-foreground))",gap:20,size:1,style:{backgroundColor:"hsl(var(--background))"}}),a.jsx(GA,{})]})})]}):a.jsx("div",{className:`flex items-center justify-center p-8 text-muted-foreground ${r||""}`,children:a.jsx("p",{children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function yJ(){var m;const{skills:e,selectedSkill:t,perkTree:n,selectedPerks:s,availablePerks:r,onSkillSelect:i,onPerkSelect:o,onPerkRankChange:l,loading:c,error:u}=mT(),{build:d}=Xe(),f=g.useMemo(()=>!n||!s.length?[]:s.map(h=>{var w,x;const v=n.perks.find(p=>p.edid===h);if(!v)return null;const y=((x=(w=d.perks)==null?void 0:w.ranks)==null?void 0:x[h])||0;return{...v,selectedRank:y}}).filter(Boolean),[n,s,(m=d.perks)==null?void 0:m.ranks]);return c?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Loading skills..."})}):u?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsxs("p",{className:"text-destructive",children:["Error loading skills: ",u]})}):a.jsx("div",{className:"container mx-auto p-6 space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Skills - Experimental AVIF Grid"}),a.jsx("p",{className:"text-muted-foreground",children:"Experimental perk tree visualization using AVIF coordinate system"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("label",{className:"text-sm font-medium",children:"Select Skill:"}),a.jsxs(Xi,{children:[a.jsx(Wi,{asChild:!0,children:a.jsxs(U,{variant:"outline",className:"w-[300px] justify-between",children:[t?t.name:"Choose a skill to view its perk tree",a.jsx(Je,{className:"h-4 w-4"})]})}),a.jsx(Ya,{className:"w-[300px] max-h-[400px] overflow-y-auto",children:e.map(h=>a.jsx(un,{onClick:()=>i(h.id),className:"cursor-pointer",children:h.name},h.id))})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:t?`${t.name} Perk Tree`:"Perk Tree"}),a.jsx("div",{className:"bg-background border rounded-lg h-[600px]",children:a.jsx(vJ,{tree:n||void 0,onTogglePerk:o,onRankChange:l,selectedPerks:f,className:"h-full"})})]}),t&&n&&a.jsxs("div",{className:"bg-muted/20 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium mb-2",children:"Debug Information"}),a.jsxs("div",{className:"text-xs space-y-1 text-muted-foreground",children:[a.jsxs("p",{children:["Selected Skill: ",t.name]}),a.jsxs("p",{children:["Perk Tree: ",n.treeName]}),a.jsxs("p",{children:["Total Perks: ",n.perks.length]}),a.jsxs("p",{children:["Selected Perks: ",s.length]}),a.jsxs("p",{children:["Available Perks: ",r.length]}),a.jsxs("p",{children:["Perks with Position Data:"," ",n.perks.filter(h=>h.position).length]}),n.perks.length>0&&n.perks[0].position&&a.jsxs("p",{children:["Sample Position: X=",n.perks[0].position.x,", Y=",n.perks[0].position.y,", H=",n.perks[0].position.horizontal,", V=",n.perks[0].position.vertical]})]})]})]})]})})}function bJ(e={}){const{autoLoad:t=!0,refreshOnMount:n=!1}=e,{data:s,loading:r,error:i,load:o}=wo(),l=g.useCallback(async()=>{t&&s.length===0&&await o()},[t,s.length,o]),c=g.useCallback(async()=>{await o()},[o]),u=g.useCallback(()=>{},[]);g.useEffect(()=>{t&&s.length===0&&l()},[t,s.length,l]),g.useEffect(()=>{n&&c()},[n,c]);const d=s.length,f=[...new Set(s.map(p=>p.school).filter(Boolean))],m=[...new Set(s.map(p=>p.level).filter(Boolean))],h=new Date().toISOString(),v=s.length>0?{spells:s,totalCount:d,schools:f,levels:m,lastUpdated:h}:null,y=g.useCallback(p=>wo.getState().getByEditorId(p),[]),w=g.useCallback(p=>wo.getState().getBySchool(p),[]),x=g.useCallback(p=>wo.getState().getByLevel(p),[]);return{spells:s,spellData:v,loading:r,error:i,totalCount:d,schools:f,levels:m,lastUpdated:h,loadSpells:l,refresh:c,clearError:u,getSpellByEditorId:y,getSpellsBySchool:w,getSpellsByLevel:x}}function wJ(){const[e,t]=g.useState(null),[n,s]=g.useState("grid");return{selectedSpell:e,viewMode:n,setSelectedSpell:t,setViewMode:s}}const Bj=50;function jJ(e){const[t,n]=g.useState(1),s=g.useRef([]),r=g.useMemo(()=>{const u=t*Bj;return e.slice(0,u)},[e,t]);g.useEffect(()=>{const u=s.current;(u.length!==e.length||e.some((f,m)=>{var h;return f.name!==((h=u[m])==null?void 0:h.name)}))&&(n(1),s.current=e)},[e]);const i=g.useMemo(()=>r.length<e.length,[r.length,e.length]),o=g.useCallback(()=>{i&&n(u=>u+1)},[i]),l=g.useCallback(()=>{n(1)},[]),c=g.useMemo(()=>({displayedItems:r.length,totalItems:e.length,hasMore:i,currentPage:t,itemsPerPage:Bj}),[r.length,e.length,i,t]);return{displayedItems:r,loadMore:o,resetPagination:l,paginationInfo:c,hasMore:i}}const NJ="bg-white dark:bg-white";function SJ({school:e,size:t="md",className:n}){const s=dj[e]||dj.Mysticism;return a.jsx("div",{className:F("flex items-center justify-center rounded-full overflow-hidden",NJ,VY[t],n),title:`${e} magic`,children:a.jsx(s,{className:"w-full h-full object-contain text-black dark:text-black"})})}const kJ={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"};function n_({school:e,size:t="md",variant:n="default",className:s}){const r=UY[e]||"bg-gray-500 text-white";return a.jsx("span",{className:F("inline-flex items-center rounded-full font-medium",GY[t],n==="default"?r:kJ[n],s),children:e})}const CJ={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},EJ={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"},AJ={Novice:"bg-gray-500 text-white",Apprentice:"bg-green-500 text-white",Adept:"bg-blue-500 text-white",Expert:"bg-purple-500 text-white",Master:"bg-yellow-500 text-black"},TJ={Novice:1,Apprentice:2,Adept:3,Expert:4,Master:5};function s_({level:e,size:t="md",variant:n="default",className:s}){const r=AJ[e]||"bg-gray-500 text-white";return a.jsx("span",{className:F("inline-flex items-center rounded-full font-medium",CJ[t],n==="default"?r:EJ[n],s),title:`Level ${TJ[e]||0}`,children:e})}const _J={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},MJ={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"},RJ=e=>e===0?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":e<=25?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":e<=50?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":e<=100?"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400";function r_({cost:e,size:t="md",variant:n="default",showIcon:s=!0,className:r}){const i=RJ(e),o=t==="sm"?"h-3 w-3":t==="lg"?"h-4 w-4":"h-3.5 w-3.5";return a.jsxs("span",{className:F("inline-flex items-center gap-1 rounded-full font-medium",_J[t],n==="default"?i:MJ[n],r),title:`${e} Magicka`,children:[s&&a.jsx(sn,{className:o}),e===0?"Free":e]})}function DJ({stats:e,title:t="Spell Stats",compact:n=!1,className:s}){return!(e.duration!==void 0||e.area!==void 0||e.magnitude!==void 0)&&e.magickaCost===0?null:a.jsxs("div",{className:F("space-y-2",s),children:[t&&a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:t}),a.jsxs("div",{className:F("grid gap-2",n?"grid-cols-2":"grid-cols-1"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(sn,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium",children:e.magickaCost===0?"Free":`${e.magickaCost} MP`})]}),e.duration!==void 0&&e.duration>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Er,{className:"h-4 w-4 text-blue-500"}),a.jsxs("span",{className:"font-medium",children:[e.duration,"s"]})]}),e.area!==void 0&&e.area>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(ss,{className:"h-4 w-4 text-green-500"}),a.jsxs("span",{className:"font-medium",children:[e.area,"ft"]})]}),e.magnitude!==void 0&&e.magnitude>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"h-4 w-4 text-purple-500 font-bold",children:"âš¡"}),a.jsx("span",{className:"font-medium",children:e.magnitude})]})]})]})}function LJ({tags:e,title:t="Tags",compact:n=!1,maxDisplay:s=5,className:r}){if(!e||e.length===0)return null;const i=e.slice(0,s),o=e.length>s;return a.jsxs("div",{className:F("space-y-2",r),children:[t&&a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a.jsx(S1,{className:"h-4 w-4"}),t,e.length>1&&a.jsxs("span",{className:"text-xs text-muted-foreground/70",children:["(",e.length,")"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.map((l,c)=>a.jsx("span",{className:F("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium","bg-muted text-muted-foreground border border-border/50",n?"text-xs":"text-sm"),children:l},c)),o&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-muted/50 text-muted-foreground/70",children:["+",e.length-s]})]})]})}function a_({spell:e,onClick:t,className:n,compact:s=!1}){const r=(i,o)=>{var l,c,u;return i.replace(/<mag>/gi,((l=o.magnitude)==null?void 0:l.toString())||"0").replace(/<dur>/gi,((c=o.duration)==null?void 0:c.toString())||"0").replace(/<area>/gi,((u=o.area)==null?void 0:u.toString())||"0")};return a.jsxs(ce,{className:F("p-6 cursor-pointer hover:shadow-md transition-shadow h-full",n),onClick:t,children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(SJ,{school:e.school,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(je,{className:"text-foreground font-semibold",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(n_,{school:e.school,size:"sm"}),a.jsx(s_,{level:e.level,size:"sm"}),a.jsx(r_,{cost:e.magickaCost,size:"sm"})]})]})]})}),e.effects&&e.effects.filter(i=>i.description).length>0&&a.jsxs("div",{children:[a.jsx(Fs,{className:"text-muted-foreground mb-2",children:"Effects"}),a.jsx("div",{className:"space-y-2",children:e.effects.filter(i=>i.description).map((i,o)=>a.jsxs("div",{className:"p-2 rounded bg-muted border text-sm",children:[a.jsx(Le,{text:r(i.description,i),options:v0(),className:"text-muted-foreground"}),a.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground mt-1",children:[i.magnitude>0&&a.jsxs("span",{children:["Magnitude: ",i.magnitude]}),i.duration>0&&a.jsxs("span",{children:["Duration: ",i.duration,"s"]}),i.area>0&&a.jsxs("span",{children:["Area: ",i.area,"ft"]})]})]},o))})]})]})}function zJ({spells:e,variant:t="default",showEffects:n=!0,showTags:s=!0,className:r="",onSpellClick:i}){return e.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No spells found"})}):a.jsx("div",{className:`space-y-4 ${r}`,children:e.map((o,l)=>a.jsx(a_,{spell:o,onClick:()=>i==null?void 0:i(o),compact:t==="compact"},`${o.name}-${o.editorId}-${l}`))})}function PJ({spells:e,loadMore:t,hasMore:n=!0,columns:s=3,gap:r=12,maxColumnWidth:i,className:o="",variant:l="default",onSpellClick:c}){const[u,d]=g.useState(0),f=g.useRef(null),m=g.useRef(null),h=g.useCallback(()=>i&&u>0?Math.max(1,Math.floor(u/i)):u<768?1:u<1024?2:u<1280?3:4,[s,i,u]);g.useEffect(()=>{const y=()=>{f.current&&d(f.current.offsetWidth)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),g.useEffect(()=>{if(!t||!n||!m.current)return;const y=new IntersectionObserver(w=>{w.forEach(x=>{x.isIntersecting&&t&&t()})},{threshold:.1,rootMargin:"0px 0px 4000px 0px"});return y.observe(m.current),()=>y.disconnect()},[t,n]);const v=g.useCallback(()=>{const y=h();return a.jsx("div",{className:"w-full",style:{display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,gap:`${r}px`},children:e.map(w=>a.jsx(a_,{spell:w,compact:l==="compact",onClick:()=>c==null?void 0:c(w),className:"w-full h-full"},w.name))})},[e,h,r,l,c]);return e.length===0?a.jsx("div",{className:`text-center py-12 ${o}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No spells to display"})}):a.jsxs("div",{ref:f,className:o,children:[v(),n&&t&&a.jsx("div",{ref:m,className:"w-full h-16 mt-16",style:{minHeight:"64px"}})]})}const $J={Destruction:Al,Restoration:Qs,Conjuration:n0,Illusion:El,Alteration:at,"":js};function OJ({spell:e,isOpen:t,onOpenChange:n}){var r;if(!e)return null;const s=$J[e.school]||js;return a.jsx(Ki,{open:t,onOpenChange:n,side:"right",title:e.name,description:`${e.school} â€¢ ${e.level} â€¢ ${e.magickaCost} MP`,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(s,{className:"w-16 h-16 text-muted-foreground"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(xa,{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(n_,{school:e.school,size:"sm"}),a.jsx(s_,{level:e.level,size:"sm"}),a.jsx(r_,{cost:e.magickaCost,size:"sm"})]}),a.jsx(Le,{text:e.description})]})]}),a.jsx(di,{}),a.jsx(DJ,{stats:{magickaCost:e.magickaCost||0,duration:e.maxDuration&&e.maxDuration>0?e.maxDuration:void 0,area:e.maxArea&&e.maxArea>0?e.maxArea:void 0,magnitude:e.totalMagnitude&&e.totalMagnitude>0?e.totalMagnitude:void 0}}),a.jsx(di,{}),e.hasEffects&&a.jsxs("div",{children:[a.jsx(je,{className:"text-lg font-semibold mb-3",children:"Effects"}),a.jsx("div",{className:"space-y-2",children:e.effects.filter((i,o,l)=>{const c=i.name.replace(/\s*\(Single\)|\s*\(Dual\)/i,""),u=l.findIndex(d=>d.name.replace(/\s*\(Single\)|\s*\(Dual\)/i,"")===c&&d.magnitude===i.magnitude&&d.duration===i.duration);return o===u}).map((i,o)=>a.jsxs("div",{className:"p-3 rounded bg-muted border",children:[a.jsx("div",{className:"font-medium text-foreground mb-2",children:i.name}),i.description&&a.jsx(Le,{text:i.description,className:"text-sm text-muted-foreground mb-2"}),a.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[i.magnitude>0&&a.jsxs("span",{children:["Magnitude: ",i.magnitude]}),i.duration>0&&a.jsxs("span",{children:["Duration: ",i.duration,"s"]}),i.area>0&&a.jsxs("span",{children:["Area: ",i.area,"ft"]})]})]},o))})]}),e.tags&&e.tags.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(di,{}),a.jsx(LJ,{tags:e.tags,title:"Tags",maxDisplay:20})]}),(e.tome||((r=e.vendors)==null?void 0:r.length)||e.halfCostPerk)&&a.jsxs(a.Fragment,{children:[a.jsx(di,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(je,{className:"text-lg font-semibold",children:"Additional Information"}),e.tome&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ba,{className:"w-4 h-4 text-muted-foreground"}),a.jsx(Fs,{className:"text-muted-foreground",children:"Spell Tome"})]}),a.jsx(ve,{className:"text-sm",children:e.tome})]}),e.vendors&&e.vendors.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Fs,{className:"text-muted-foreground",children:"Available From"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.vendors.map((i,o)=>a.jsx(Z,{variant:"outline",className:"text-xs",children:i},o))})]}),e.halfCostPerk&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sn,{className:"w-4 h-4 text-muted-foreground"}),a.jsx(Fs,{className:"text-muted-foreground",children:"Half Cost Perk"})]}),a.jsx(ve,{className:"text-sm",children:e.halfCostPerkName})]})]})]}),a.jsx(di,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(je,{className:"text-lg font-semibold",children:"Game Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Editor ID:"}),a.jsx("span",{className:"break-all font-mono",children:e.editorId})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"School:"}),a.jsx("span",{children:e.school})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Level:"}),a.jsx("span",{children:e.level})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Effects:"}),a.jsx("span",{children:e.effectCount})]})]})]})]})})}function IJ(){const{spells:e,loading:t,error:n}=bJ(),{viewMode:s,setViewMode:r}=wJ(),i=Array.isArray(e)?e:[],[o,l]=g.useState(null),[c,u]=g.useState(!1),[d,f]=g.useState("alphabetical"),m=E=>{l(E),u(!0)},h=g.useMemo(()=>{if(i.length===0)return[];const E=[...new Set(i.map(z=>z.school))],T=[...new Set(i.map(z=>z.level))];return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search spells by name, school, level, or effects...",options:[]},{id:"schools",name:"Magic Schools",placeholder:"Filter by school...",options:E.map(z=>({id:`school-${z}`,label:z,value:z,category:"Magic Schools",description:`${z} spells`}))},{id:"levels",name:"Spell Levels",placeholder:"Filter by level...",options:T.map(z=>({id:`level-${z}`,label:z,value:z,category:"Spell Levels",description:`${z} spells`}))}]},[i]),[v,y]=g.useState([]),w=E=>{let T;typeof E=="string"?T={id:`custom-${E}`,label:E,value:E,category:"Fuzzy Search"}:T={id:`${E.category}-${E.id}`,label:E.label,value:E.value,category:E.category},v.some(z=>z.value===T.value&&z.category===T.category)||y(z=>[...z,T])},x=E=>{y(T=>T.filter(z=>z.id!==E))},p=()=>{y([])},b=i.filter(E=>v.length===0?!0:v.every(T=>{switch(T.category){case"Magic Schools":return E.school===T.value;case"Spell Levels":return E.level===T.value;case"Fuzzy Search":const z=T.value.toLowerCase();return E.name.toLowerCase().includes(z)||E.school.toLowerCase().includes(z)||E.level.toLowerCase().includes(z)||E.effects.some(R=>R.description.toLowerCase().includes(z));default:return!0}})),j=g.useMemo(()=>[...b].sort((E,T)=>{switch(d){case"alphabetical":return E.name.localeCompare(T.name);case"school":const z=E.school.localeCompare(T.school);return z!==0?z:E.name.localeCompare(T.name);case"level":const R=fj[E.level]||0,_=fj[T.level]||0;return R!==_?R-_:E.name.localeCompare(T.name);default:return 0}}),[b,d]),{displayedItems:N,loadMore:A,resetPagination:k,paginationInfo:C,hasMore:S}=jJ(j);return g.useEffect(()=>{k()},[v,d,k]),t?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading spells..."})]})}):n?a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("p",{className:"text-destructive mb-4",children:["Error loading spells: ",n]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]}):a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:h.length>0?a.jsx(Yr,{categories:h,onSelect:w,onCustomSearch:w}):a.jsxs("div",{className:"p-4 border border-dashed border-muted-foreground/20 rounded-lg text-center text-muted-foreground",children:["No search categories available. Spells loaded: ",i.length]})})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(G0,{viewMode:s,onViewModeChange:r}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:d,onChange:E=>f(E.target.value),className:"appearance-none bg-background border border-border rounded-lg px-3 py-1.5 pr-8 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer",children:[a.jsx("option",{value:"alphabetical",children:"Sort: A-Z"}),a.jsx("option",{value:"school",children:"Sort: School"}),a.jsx("option",{value:"level",children:"Sort: Level"})]}),a.jsx(Je,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]})]}),v.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:p,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx("span",{className:"text-lg",children:"Ã—"}),"Clear All"]}),v.map(E=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>x(E.id),title:"Click to remove",children:[E.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},E.id))]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[C.displayedItems," of ",C.totalItems," spells"]}),a.jsx("div",{children:N.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No spells found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}):a.jsxs(a.Fragment,{children:[s==="grid"&&a.jsx(PJ,{spells:N,variant:"default",maxColumnWidth:400,onSpellClick:m,loadMore:A,hasMore:S}),s==="list"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(zJ,{spells:N,variant:"default",onSpellClick:m}),S&&a.jsx("div",{className:"flex justify-center pt-4",children:a.jsxs(U,{variant:"outline",onClick:A,className:"w-full max-w-xs",children:["Load More (",C.displayedItems," of"," ",C.totalItems,")"]})})]})]})}),a.jsx(OJ,{spell:o,isOpen:c,onOpenChange:u}),a.jsx(Bm,{threshold:400})]})}function BJ(){return a.jsx(Yt,{title:"Spell Reference",description:"Browse and search all available spells. Find the perfect magic for your character build.",children:a.jsx(IJ,{})})}const FJ=e=>{switch(e){case"alphabetical":return"A-Z";case"category":return"Category";case"effect-count":return"Effect Count";default:return"A-Z"}};function HJ(){const{data:e,loading:t,error:n}=M8(),s=e||[],[r,i]=g.useState([]),[o,l]=g.useState("alphabetical"),[c,u]=g.useState("grid");g.useMemo(()=>s.map(Yb),[s]);const f=(()=>{const k=vT(s),C=yT(s);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Search by category...",options:k.map(S=>({id:`category-${S}`,label:S,value:S,category:"Categories",description:`Traits in ${S} category`}))},{id:"tags",name:"Tags",placeholder:"Search by tag...",options:C.map(S=>({id:`tag-${S}`,label:S,value:S,category:"Tags",description:`Traits tagged with ${S}`}))}]})(),m=k=>{let C;typeof k=="string"?C={id:`custom-${k}`,label:k,value:k,category:"Fuzzy Search"}:C={id:`${k.category}-${k.id}`,label:k.label,value:k.value,category:k.category},r.some(S=>S.value===C.value&&S.category===C.category)||i(S=>[...S,C])},h=k=>{i(C=>C.filter(S=>S.id!==k))},v=s.filter(k=>r.length===0?!0:r.every(C=>{var S;switch(C.category){case"Fuzzy Search":return!0;case"Categories":return k.category===C.value;case"Tags":return((S=k.tags)==null?void 0:S.some(E=>E===C.value))||!1;default:return!0}})),y=r.filter(k=>k.category==="Fuzzy Search").map(k=>k.value).join(" "),{filteredTraits:w,searchResults:x}=xT(v,y),p=r.some(k=>k.category==="Fuzzy Search"),j=(p?w:v).map(Yb),N=s.map(k=>k.id||k.name),A=[...j].sort((k,C)=>{var S,E;if(p&&x.length>0){const T=x.find(R=>R.item.originalTrait.id===k.id||R.item.originalTrait.name===k.name),z=x.find(R=>R.item.originalTrait.id===C.id||R.item.originalTrait.name===C.name);return T&&z?(T.score??1)-(z.score??1):T&&!z?-1:!T&&z?1:k.name.localeCompare(C.name)}switch(o){case"alphabetical":return k.name.localeCompare(C.name);case"category":const T=L=>{switch(L){case"Combat":return 1;case"Magic":return 2;case"Stealth":return 3;case"Social":return 4;case"Survival":return 5;default:return 6}},z=T(k.category),R=T(C.category);return z!==R?z-R:k.name.localeCompare(C.name);case"effect-count":const _=((S=k.effects)==null?void 0:S.length)||0,$=((E=C.effects)==null?void 0:E.length)||0;return _!==$?$-_:k.name.localeCompare(C.name);default:return 0}});return t?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading traits..."})]})}):n?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:n}),a.jsx("p",{className:"text-muted-foreground",children:"Please refresh the page to try again."})]})}):a.jsxs(Yt,{title:"Traits",description:"Choose your character's traits. Traits provide unique abilities and modifiers that will shape your character's capabilities throughout their journey.",children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Yr,{categories:f,onSelect:m,onCustomSearch:m})})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(U,{variant:c==="grid"?"default":"outline",size:"sm",onClick:()=>u("grid"),className:"flex items-center gap-2",children:[a.jsx(Fi,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(U,{variant:c==="list"?"default":"outline",size:"sm",onClick:()=>u("list"),className:"flex items-center gap-2",children:[a.jsx(Ha,{className:"h-4 w-4"}),"List"]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Xi,{children:[a.jsx(Wi,{asChild:!0,children:a.jsxs(U,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort: ",FJ(o),a.jsx(Je,{className:"h-4 w-4"})]})}),a.jsxs(Ya,{align:"end",children:[a.jsx(un,{onClick:()=>l("alphabetical"),children:"Alphabetical"}),a.jsx(un,{onClick:()=>l("category"),children:"Category"}),a.jsx(un,{onClick:()=>l("effect-count"),children:"Effect Count"})]})]})})]}),a.jsx("div",{className:"my-4",children:r.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>i([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Me,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),r.map(k=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>h(k.id),title:"Click to remove",children:[k.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},k.id))]})}),c==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:A.map(k=>a.jsx(Zw,{item:k,className:"w-full",allTraitIds:N},k.id))}):a.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:A.map(k=>a.jsx(Zw,{item:k,className:"w-full",allTraitIds:N},k.id))}),A.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No traits found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]})}const UJ=g0,VJ=p0,i_=g.forwardRef(({className:e,...t},n)=>a.jsx(xu,{ref:n,className:F("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{zIndex:Nt.MODAL},...t}));i_.displayName=xu.displayName;const o_=g.forwardRef(({className:e,children:t,...n},s)=>a.jsxs(VJ,{children:[a.jsx(i_,{}),a.jsxs(vu,{ref:s,className:F("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),style:{zIndex:Nt.MODAL+1,backgroundColor:"hsl(var(--background))"},...n,children:[t,a.jsxs(PS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(Me,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));o_.displayName=vu.displayName;const l_=({className:e,...t})=>a.jsx("div",{className:F("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});l_.displayName="DialogHeader";const c_=g.forwardRef(({className:e,...t},n)=>a.jsx(yu,{ref:n,className:F("text-lg font-semibold leading-none tracking-tight",e),...t}));c_.displayName=yu.displayName;const u_=g.forwardRef(({className:e,...t},n)=>a.jsx(bu,{ref:n,className:F("text-sm text-muted-foreground",e),...t}));u_.displayName=bu.displayName;const GJ=_l("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Xd=g.forwardRef(({className:e,variant:t,...n},s)=>a.jsx("div",{ref:s,role:"alert",className:F(GJ({variant:t}),e),...n}));Xd.displayName="Alert";const qJ=g.forwardRef(({className:e,...t},n)=>a.jsx("h5",{ref:n,className:F("mb-1 font-medium leading-none tracking-tight",e),...t}));qJ.displayName="AlertTitle";const Wd=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:F("text-sm [&_p]:leading-relaxed",e),...t}));Wd.displayName="AlertDescription";class ZJ{constructor(){Pe(this,"cache",new Map)}async loadRaces(){const t="races";if(this.cache.has(t))return this.cache.get(t);try{const n=await fetch("/data/gigaplanner/races.json");if(!n.ok)throw new Error(`Failed to load races data: ${n.status} ${n.statusText}`);const s=await n.json();if(!Array.isArray(s))throw new Error("Races data is not an array");for(const r of s){if(!r.id||!r.name||!r.edid)throw new Error(`Invalid race data: missing required fields for ${r.name||"unknown"}`);if(!Array.isArray(r.startingHMS)||r.startingHMS.length!==3)throw new Error(`Invalid race data: startingHMS must be array of 3 numbers for ${r.name}`);if(!Array.isArray(r.startingSkills)||r.startingSkills.length!==20)throw new Error(`Invalid race data: startingSkills must be array of 20 numbers for ${r.name}`)}return this.cache.set(t,s),s}catch(n){throw console.error("Error loading races data:",n),new Error(`Failed to load races data: ${n instanceof Error?n.message:"Unknown error"}`)}}async loadStandingStones(){const t="standingStones";if(this.cache.has(t))return this.cache.get(t);try{const n=await fetch("/data/gigaplanner/standingStones.json");if(!n.ok)throw new Error(`Failed to load standing stones data: ${n.status} ${n.statusText}`);const s=await n.json();if(!Array.isArray(s))throw new Error("Standing stones data is not an array");for(const r of s)if(!r.id||!r.name)throw new Error(`Invalid standing stone data: missing required fields for ${r.name||"unknown"}`);return this.cache.set(t,s),s}catch(n){throw console.error("Error loading standing stones data:",n),new Error(`Failed to load standing stones data: ${n instanceof Error?n.message:"Unknown error"}`)}}async loadBlessings(){const t="blessings";if(this.cache.has(t))return this.cache.get(t);try{const n=await fetch("/data/gigaplanner/blessings.json");if(!n.ok)throw new Error(`Failed to load blessings data: ${n.status} ${n.statusText}`);const s=await n.json();if(!Array.isArray(s))throw new Error("Blessings data is not an array");for(const r of s)if(typeof r!="string")throw new Error(`Invalid blessing data: all entries must be strings, got ${typeof r}`);return this.cache.set(t,s),s}catch(n){throw console.error("Error loading blessings data:",n),new Error(`Failed to load blessings data: ${n instanceof Error?n.message:"Unknown error"}`)}}async loadGameMechanics(){const t="gameMechanics";if(this.cache.has(t))return this.cache.get(t);try{const n=await fetch("/data/gigaplanner/gameMechanics.json");if(!n.ok)throw new Error(`Failed to load game mechanics data: ${n.status} ${n.statusText}`);const s=await n.json();if(!Array.isArray(s))throw new Error("Game mechanics data is not an array");for(const r of s){if(!r.id||!r.name||r.gameId===void 0)throw new Error(`Invalid game mechanics data: missing required fields for ${r.name||"unknown"}`);if(!r.derivedAttributes||!r.derivedAttributes.attribute)throw new Error(`Invalid game mechanics data: missing derivedAttributes for ${r.name}`);const{derivedAttributes:i}=r,o=i.attribute.length;if(i.isPercent.length!==o||i.prefactor.length!==o||i.threshold.length!==o||i.weight_health.length!==o||i.weight_magicka.length!==o||i.weight_stamina.length!==o)throw new Error(`Invalid game mechanics data: derivedAttributes arrays have inconsistent lengths for ${r.name}`)}return this.cache.set(t,s),s}catch(n){throw console.error("Error loading game mechanics data:",n),new Error(`Failed to load game mechanics data: ${n instanceof Error?n.message:"Unknown error"}`)}}async loadPresets(){const t="presets";if(this.cache.has(t))return this.cache.get(t);try{const n=await fetch("/data/gigaplanner/presets.json");if(!n.ok)throw new Error(`Failed to load presets data: ${n.status} ${n.statusText}`);const s=await n.json();if(!Array.isArray(s))throw new Error("Presets data is not an array");for(const r of s){if(!r.id||!r.name||r.presetId===void 0)throw new Error(`Invalid preset data: missing required fields for ${r.name||"unknown"}`);if(typeof r.perks!="number"||typeof r.races!="number"||typeof r.gameMechanics!="number"||typeof r.blessings!="number")throw new Error(`Invalid preset data: reference fields must be numbers for ${r.name}`);if(!r.version||!r.version.match(/^\d+\.\d+\.\d+$/))throw new Error(`Invalid preset data: version must be in format x.y.z for ${r.name}`)}return this.cache.set(t,s),s}catch(n){throw console.error("Error loading presets data:",n),new Error(`Failed to load presets data: ${n instanceof Error?n.message:"Unknown error"}`)}}async loadPerks(){const t="perks";if(this.cache.has(t))return this.cache.get(t);try{const n=await fetch("/data/gigaplanner/perks.json");if(!n.ok)throw new Error(`Failed to load perks data: ${n.status} ${n.statusText}`);const s=await n.json();if(!s||typeof s!="object")throw new Error("Perks data is not an object");if(!s.id||!s.name||s.perkListId===void 0)throw new Error("Invalid perks data: missing required fields");if(!Array.isArray(s.skillNames)||s.skillNames.length===0)throw new Error("Invalid perks data: skillNames must be a non-empty array");if(!Array.isArray(s.perks)||s.perks.length===0)throw new Error("Invalid perks data: perks must be a non-empty array");for(const r of s.perks){if(!r.id||!r.name||!r.skill||r.skillReq===void 0)throw new Error(`Invalid perk data: missing required fields for ${r.name||"unknown"}`);if(!s.skillNames.includes(r.skill))throw new Error(`Invalid perk data: skill '${r.skill}' not found in skillNames for ${r.name}`);if(!Array.isArray(r.prerequisites))throw new Error(`Invalid perk data: prerequisites must be an array for ${r.name}`)}return this.cache.set(t,[s]),[s]}catch(n){throw console.error("Error loading perks data:",n),new Error(`Failed to load perks data: ${n instanceof Error?n.message:"Unknown error"}`)}}async loadAllData(){const[t,n,s,r,i,o]=await Promise.all([this.loadRaces(),this.loadStandingStones(),this.loadBlessings(),this.loadGameMechanics(),this.loadPresets(),this.loadPerks()]);return{races:t,standingStones:n,blessings:s,gameMechanics:r,presets:i,perks:o}}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}class YJ{constructor(){Pe(this,"dataLoader");Pe(this,"data",null);Pe(this,"lookupMaps",{});this.dataLoader=new ZJ}async initialize(){try{this.data=await this.dataLoader.loadAllData(),this.createLookupMaps()}catch(t){throw new Error(`Failed to initialize GigaPlannerConverter: ${t}`)}}createLookupMaps(){if(!this.data)throw new Error("Data not loaded. Call initialize() first.");this.lookupMaps.raceNameToId={},this.lookupMaps.raceIdToName={},this.data.races.forEach((t,n)=>{this.lookupMaps.raceNameToId[t.name]=n,this.lookupMaps.raceIdToName[n]=t.name}),this.lookupMaps.stoneNameToId={},this.lookupMaps.stoneIdToName={},this.data.standingStones.forEach((t,n)=>{this.lookupMaps.stoneNameToId[t.name]=n,this.lookupMaps.stoneIdToName[n]=t.name}),this.lookupMaps.blessingNameToId={},this.lookupMaps.blessingIdToName={},this.data.blessings.forEach((t,n)=>{this.lookupMaps.blessingNameToId[t]=n,this.lookupMaps.blessingIdToName[n]=t}),this.lookupMaps.perkListNameToId={},this.lookupMaps.perkListIdToName={},this.data.perks.forEach(t=>{this.lookupMaps.perkListNameToId[t.name]=t.perkListId,this.lookupMaps.perkListIdToName[t.perkListId]=t.name}),this.lookupMaps.mechanicsNameToId={},this.lookupMaps.mechanicsIdToName={},this.data.gameMechanics.forEach(t=>{this.lookupMaps.mechanicsNameToId[t.name]=t.id,this.lookupMaps.mechanicsIdToName[t.id]=t.name})}decodeUrl(t){try{const n=new URL(t),s=n.searchParams.get("b"),r=n.searchParams.get("p");if(!s)return{success:!1,error:"No build code found in URL"};const i=this.decodeBuildCode(s);return{success:!0,preset:r&&this.data.presets[parseInt(r)]?this.data.presets[parseInt(r)].name:null,character:i}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}decodeBuildCode(t){let n=t.replace(/-/g,"+").replace(/_/g,"/");n=atob(n);const s=n.charCodeAt(0),r=n.charCodeAt(1),i=n.charCodeAt(3),o=this.data.perks.find(u=>u.perkListId===r);console.log("ðŸ” [Converter] Looking for perkListId:",r),console.log("ðŸ” [Converter] Looking for gameMechanicsId:",i),console.log("ðŸ” [Converter] Available perk lists:",this.data.perks.map(u=>({id:u.perkListId,name:u.name}))),console.log("ðŸ” [Converter] Available game mechanics:",this.data.gameMechanics.map(u=>({id:u.gameId,name:u.name})));const l=this.data.gameMechanics.find(u=>u.gameId===i);if(!o)throw new Error(`Invalid perk list ID: ${r}`);if(!l)throw new Error(`Invalid game mechanics ID: ${i}`);const c={level:n.charCodeAt(5),hmsIncreases:{health:n.charCodeAt(6),magicka:n.charCodeAt(7),stamina:n.charCodeAt(8)},skillLevels:[],oghmaChoice:this.parseOghmaChoice(n.charCodeAt(27),s),race:this.lookupMaps.raceIdToName[n.charCodeAt(28)]||"Unknown",standingStone:this.lookupMaps.stoneIdToName[n.charCodeAt(29)]||"Unknown",blessing:this.lookupMaps.blessingIdToName[n.charCodeAt(30)]||"Unknown",perks:this.parsePerks(n,o),configuration:{perkList:o.name,gameMechanics:l.name}};for(let u=0;u<18;u++)c.skillLevels.push({skill:o.skillNames[u],level:n.charCodeAt(9+u)});return s===2&&c.skillLevels.push({skill:"Level",level:c.level}),c}parseOghmaChoice(t,n){let s=t;return n===2&&(s=s>>4),["None","Health","Magicka","Stamina"][s]||"None"}parsePerks(t,n){const s=[];console.log("ðŸ” [Perk Parser] Starting perk parsing..."),console.log("ðŸ” [Perk Parser] PerkList info:",{name:n.name,totalPerks:n.perks.length,skillNames:n.skillNames}),console.log("ðŸ” [Perk Parser] Build code length:",t.length),console.log("ðŸ” [Perk Parser] First few bytes:",Array.from(t.slice(0,10)).map(r=>r.charCodeAt(0)));for(let r=0;r<n.perks.length;r++){const i=31+Math.floor(r/8),o=7-r%8,l=t.charCodeAt(i);if((l&1<<o)>0){const u={name:n.perks[r].name,skill:n.perks[r].skill};s.push(u),console.log(`ðŸ” [Perk Parser] Found perk ${r}:`,{name:u.name,skill:u.skill,skillName:n.skillNames[u.skill],byteIndex:i,bitOffset:o,byteValue:l.toString(2).padStart(8,"0")})}}return console.log("ðŸ” [Perk Parser] Final results:",{totalFound:s.length,bySkill:s.reduce((r,i)=>{const o=n.skillNames[i.skill]||`Skill ${i.skill}`;return r[o]=(r[o]||0)+1,r},{}),allPerks:s.map(r=>({name:r.name,skill:r.skill,skillName:n.skillNames[r.skill]}))}),s}encodeUrl(t,n="https://gigaplanner.com"){try{const s=this.encodeBuildCode(t),r=this.findPresetNumber(t.configuration.perkList);let i=`${n}?b=${s}`;return r!==null&&(i+=`&p=${r}`),{success:!0,url:i}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}encodeBuildCode(t){let s=String.fromCodePoint(2);const r=this.lookupMaps.perkListNameToId[t.configuration.perkList],i=this.lookupMaps.mechanicsNameToId[t.configuration.gameMechanics];if(r===void 0)throw new Error(`Unknown perk list: ${t.configuration.perkList}`);if(i===void 0)throw new Error(`Unknown game mechanics: ${t.configuration.gameMechanics}`);s+=String.fromCodePoint(r),s+=String.fromCodePoint(0),s+=String.fromCodePoint(i),s+=String.fromCodePoint(0),s+=String.fromCodePoint(t.level),s+=String.fromCodePoint(t.hmsIncreases.health),s+=String.fromCodePoint(t.hmsIncreases.magicka),s+=String.fromCodePoint(t.hmsIncreases.stamina);const o=this.data.perks.find(d=>d.perkListId===r);for(let d=0;d<18;d++){const f=t.skillLevels.find(m=>m.skill===o.skillNames[d]);s+=String.fromCodePoint(f?f.level:0)}const c=["None","Health","Magicka","Stamina"].indexOf(t.oghmaChoice);s+=String.fromCodePoint(c<<4),s+=String.fromCodePoint(this.lookupMaps.raceNameToId[t.race]||0),s+=String.fromCodePoint(this.lookupMaps.stoneNameToId[t.standingStone]||0),s+=String.fromCodePoint(this.lookupMaps.blessingNameToId[t.blessing]||0);const u=this.encodePerks(t.perks,o);return s+=u,s=btoa(s),s=s.replace(/\+/g,"-").replace(/\//g,"_"),s.indexOf("=")!==-1&&(s=s.substring(0,s.indexOf("="))),s}encodePerks(t,n){let s="",r=0;for(let o=0;o<n.perks.length;o++){const l=t.includes(n.perks[o].name);r=r<<1|(l?1:0),o%8===7&&(s+=String.fromCodePoint(r),r=0)}const i=n.perks.length%8;if(i>0){const o=8-i;s+=String.fromCodePoint(r<<o)}return s}findPresetNumber(t){const n=this.lookupMaps.perkListNameToId[t],s=this.data.presets.find(r=>r.perks===n);return s?this.data.presets.indexOf(s):null}getDataMappings(){return{perkLists:this.data.perks.map(t=>({id:t.perkListId,name:t.name})),races:this.data.races.map((t,n)=>({id:n,name:t.name})),gameMechanics:this.data.gameMechanics.map(t=>({id:t.id,name:t.name})),standingStones:this.data.standingStones.map((t,n)=>({id:n,name:t.name})),blessings:this.data.blessings.map((t,n)=>({id:n,name:t.name})),presets:this.data.presets.map((t,n)=>({id:n,name:t.name}))}}getPerksForList(t){const n=this.data.perks.find(s=>s.name===t);return n?n.perks.map((s,r)=>({id:r,name:s.name,skill:n.skillNames[s.skill],skillReq:s.skillReq,description:s.description})):[]}}function XJ(){const[e,t]=g.useState({isLoading:!1,error:null,warnings:[],success:!1}),[n,s]=g.useState(null),[r,i]=g.useState(null),o=g.useCallback(async()=>{if(console.log("ðŸ”„ [GigaPlanner Import] Initialize called"),console.log("ðŸ”§ [GigaPlanner Import] Current converter:",!!n),console.log("ðŸ”§ [GigaPlanner Import] Current transformer:",!!r),n&&r)return console.log("âœ… [GigaPlanner Import] Already initialized, skipping"),{converter:n,transformer:r};console.log("ðŸ”„ [GigaPlanner Import] Starting initialization..."),t(d=>({...d,isLoading:!0,error:null}));try{console.log("ðŸ”„ [GigaPlanner Import] Creating GigaPlannerConverter...");const d=new YJ;console.log("ðŸ”„ [GigaPlanner Import] Initializing converter..."),await d.initialize(),console.log("âœ… [GigaPlanner Import] Converter initialized successfully"),console.log("ðŸ”„ [GigaPlanner Import] Loading transformation function...");const{transformGigaPlannerToBuildState:f}=await ps(async()=>{const{transformGigaPlannerToBuildState:m}=await import("./transformation-CgEr99VG.js");return{transformGigaPlannerToBuildState:m}},[]);return console.log("âœ… [GigaPlanner Import] Transformation function loaded successfully"),console.log("ðŸ”„ [GigaPlanner Import] Setting converter and transformer..."),s(d),i(()=>f),t(m=>({...m,isLoading:!1,success:!0})),console.log("âœ… [GigaPlanner Import] Initialization completed successfully"),{converter:d,transformer:f}}catch(d){return console.log("ðŸ’¥ [GigaPlanner Import] Initialization error:",d),console.log("ðŸ’¥ [GigaPlanner Import] Error type:",typeof d),console.log("ðŸ’¥ [GigaPlanner Import] Error message:",d instanceof Error?d.message:String(d)),t(f=>({...f,isLoading:!1,error:d instanceof Error?d.message:"Failed to initialize GigaPlanner import",success:!1})),null}},[n,r]),l=g.useCallback(async d=>{console.log("ðŸš€ [GigaPlanner Import] importFromUrl called with URL:",d),console.log("ðŸ”§ [GigaPlanner Import] Initial converter state:",!!n),console.log("ðŸ”§ [GigaPlanner Import] Initial transformer state:",!!r);let f=n,m=r;if(!f||!m){console.log("ðŸ”„ [GigaPlanner Import] Converter or transformer missing, initializing...");const h=await o();if(!h)return console.log("âŒ [GigaPlanner Import] Initialization failed"),null;f=h.converter,m=h.transformer,console.log("ðŸ”§ [GigaPlanner Import] After initialization - converter:",!!f),console.log("ðŸ”§ [GigaPlanner Import] After initialization - transformer:",!!m)}t(h=>({...h,isLoading:!0,error:null,warnings:[]})),console.log("ðŸš€ [GigaPlanner Import] About to start import process..."),console.log("ðŸ”§ [GigaPlanner Import] Converter available:",!!f),console.log("ðŸ”§ [GigaPlanner Import] Transformer available:",!!m),console.log("ðŸ”§ [GigaPlanner Import] Converter instance:",f),console.log("ðŸ”§ [GigaPlanner Import] Transformer instance:",m);try{console.log("ðŸ”„ [GigaPlanner Import] Starting import process for URL:",d);const h=f.decodeUrl(d);if(console.log("ðŸ“¥ [GigaPlanner Import] Decode result:",h),!h.success)return t(x=>({...x,isLoading:!1,error:h.error||"Failed to decode GigaPlanner URL",success:!1})),null;if(!h.character)return console.log("âŒ [GigaPlanner Import] No character data found in decode result"),t(x=>({...x,isLoading:!1,error:"No character data found in URL",success:!1})),null;console.log("ðŸ‘¤ [GigaPlanner Import] Character data found:",h.character),console.log("ðŸ”„ [GigaPlanner Import] Starting transformation to BuildState...");const v=await m(h.character);if(console.log("ðŸ”€ [GigaPlanner Import] Transform result:",v),!v.success)return t(x=>({...x,isLoading:!1,error:v.error||"Failed to transform character data",success:!1})),null;const y=[...h.preset?[`Imported from preset: ${h.preset}`]:[],...v.warnings||[]];t(x=>({...x,isLoading:!1,warnings:y,success:!0}));const w={buildState:v.data||null,warnings:y};return console.log("âœ… [GigaPlanner Import] Import completed successfully!"),console.log("ðŸ“¦ [GigaPlanner Import] Final result:",w),w}catch(h){return console.log("ðŸ’¥ [GigaPlanner Import] Error caught during import:",h),console.log("ðŸ’¥ [GigaPlanner Import] Error type:",typeof h),console.log("ðŸ’¥ [GigaPlanner Import] Error message:",h instanceof Error?h.message:String(h)),t(v=>({...v,isLoading:!1,error:h instanceof Error?h.message:"Failed to import from GigaPlanner URL",success:!1})),null}},[n,r,o]),c=g.useCallback(async d=>{let f=n,m=r;if(!f||!m){const h=await o();if(!h)return null;f=h.converter,m=h.transformer}t(h=>({...h,isLoading:!0,error:null,warnings:[]}));try{const h=`https://gigaplanner.com?b=${d}`;return await l(h)}catch(h){return t(v=>({...v,isLoading:!1,error:h instanceof Error?h.message:"Failed to import from build code",success:!1})),null}},[n,r,o,l]),u=g.useCallback(()=>{t({isLoading:!1,error:null,warnings:[],success:!1})},[]);return{isLoading:e.isLoading,error:e.error,warnings:e.warnings,success:e.success,initialize:o,importFromUrl:l,importFromBuildCode:c,reset:u,isInitialized:!!n&&!!r}}function WJ({onImport:e,className:t}){const[n,s]=g.useState(""),[r,i]=g.useState(""),[o,l]=g.useState("url"),{isLoading:c,error:u,warnings:d,success:f,importFromUrl:m,importFromBuildCode:h,reset:v}=XJ(),y=async()=>{if(!n.trim())return;console.log("ðŸš€ [Import Card] Starting URL import:",n.trim());const p=await m(n.trim());console.log("ðŸ“¥ [Import Card] Import result received:",p),p!=null&&p.buildState?(console.log("âœ… [Import Card] BuildState found, calling onImport:",p.buildState),e?(e(p.buildState),console.log("âœ… [Import Card] onImport callback executed")):console.log("âš ï¸ [Import Card] No onImport callback provided")):console.log("âŒ [Import Card] No buildState in result or result is null")},w=async()=>{if(!r.trim())return;console.log("ðŸš€ [Import Card] Starting build code import:",r.trim());const p=await h(r.trim());console.log("ðŸ“¥ [Import Card] Import result received:",p),p!=null&&p.buildState?(console.log("âœ… [Import Card] BuildState found, calling onImport:",p.buildState),e?(e(p.buildState),console.log("âœ… [Import Card] onImport callback executed")):console.log("âš ï¸ [Import Card] No onImport callback provided")):console.log("âŒ [Import Card] No buildState in result or result is null")},x=()=>{s(""),i(""),v()};return a.jsxs(ce,{className:t,children:[a.jsxs(be,{children:[a.jsxs(_e,{className:"flex items-center gap-2",children:[a.jsx(Mh,{className:"h-5 w-5"}),"Import from GigaPlanner"]}),a.jsx(bs,{children:"Import character builds from GigaPlanner URLs or build codes"})]}),a.jsxs(de,{className:"space-y-4",children:[a.jsxs("div",{className:"flex space-x-1",children:[a.jsx(U,{variant:o==="url"?"default":"outline",size:"sm",onClick:()=>l("url"),children:"URL"}),a.jsx(U,{variant:o==="code"?"default":"outline",size:"sm",onClick:()=>l("code"),children:"Build Code"})]}),o==="url"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(Pt,{htmlFor:"gigaplanner-url",children:"GigaPlanner URL"}),a.jsx(Dt,{id:"gigaplanner-url",placeholder:"https://gigaplanner.com?b=...",value:n,onChange:p=>s(p.target.value),disabled:c}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Example: https://gigaplanner.com?b=AgAAAAAA..."})]}),a.jsx(U,{onClick:y,disabled:!n.trim()||c,className:"w-full",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Vy,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mh,{className:"mr-2 h-4 w-4"}),"Import from URL"]})})]}),o==="code"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(Pt,{htmlFor:"gigaplanner-build-code",children:"Build Code"}),a.jsx(Dt,{id:"gigaplanner-build-code",placeholder:"AgAAAAAA...",value:r,onChange:p=>i(p.target.value),disabled:c}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Example: AgAAAAAA..."})]}),a.jsx(U,{onClick:w,disabled:!r.trim()||c,className:"w-full",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Vy,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Mh,{className:"mr-2 h-4 w-4"}),"Import from Build Code"]})})]}),u&&a.jsxs(Xd,{variant:"destructive",children:[a.jsx(Ei,{className:"h-4 w-4"}),a.jsx(Wd,{children:u})]}),f&&a.jsxs(Xd,{children:[a.jsx(zc,{className:"h-4 w-4"}),a.jsxs(Wd,{children:["Character imported successfully!",d.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm font-medium",children:"Warnings:"}),a.jsx("ul",{className:"mt-1 space-y-1",children:d.map((p,b)=>a.jsxs("li",{className:"text-sm text-muted-foreground",children:["â€¢ ",p]},b))})]})]})]}),!u&&d.length>0&&a.jsxs(Xd,{variant:"default",children:[a.jsx(Ei,{className:"h-4 w-4"}),a.jsx(Wd,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium",children:"Import completed with warnings:"}),a.jsx("div",{className:"space-y-1",children:d.map((p,b)=>a.jsx(Z,{variant:"secondary",className:"mr-1 mb-1",children:p},b))})]})})]}),(f||u)&&a.jsx(U,{variant:"outline",onClick:x,className:"w-full",disabled:c,children:"Reset"})]})]})}function KJ({open:e,onOpenChange:t,onImport:n}){return a.jsx(UJ,{open:e,onOpenChange:t,children:a.jsxs(o_,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(l_,{children:[a.jsx(c_,{children:"GigaPlanner Tools"}),a.jsx(u_,{children:"Import character builds from GigaPlanner URLs or build codes."})]}),a.jsx("div",{className:"mt-4",children:a.jsx(WJ,{onImport:n})})]})})}function QJ(){const{build:e,updateBuild:t}=Xe(),[n,s]=g.useState(e.traitLimits.regular),[r,i]=g.useState(e.traitLimits.bonus),o=g.useCallback(c=>{s(c),t({traitLimits:{...e.traitLimits,regular:c}})},[e.traitLimits,t]),l=g.useCallback(c=>{i(c),t({traitLimits:{...e.traitLimits,bonus:c}})},[e.traitLimits,t]);return{regularLimit:n,bonusLimit:r,handleRegularLimitChange:o,handleBonusLimitChange:l,currentRegularCount:e.traits.regular.length,currentBonusCount:e.traits.bonus.length}}function JJ(){const{build:e,setBuildName:t,setBuildNotes:n,resetBuild:s,updateBuild:r}=Xe(),[i,o]=g.useState(!1),[l,c]=g.useState(!1),u=QJ(),d=m=>{var v,y,w;console.log("ðŸ“¥ [Build Page] GigaPlanner import received:",m),console.log("ðŸ“Š [Build Page] Current build state before import:",e),console.log("ðŸ” [Build Page] Current build analysis:"),console.log("  - Current race:",e.race,"(type:",typeof e.race,")"),console.log("  - Current stone:",e.stone,"(type:",typeof e.stone,")"),console.log("  - Current religion:",e.religion,"(type:",typeof e.religion,")"),console.log("  - Current favoriteBlessing:",e.favoriteBlessing,"(type:",typeof e.favoriteBlessing,")"),console.log("  - Current level:",(v=e.attributeAssignments)==null?void 0:v.level),console.log("ðŸ” [Build Page] Imported race:",m.race),console.log("ðŸ” [Build Page] Imported stone:",m.stone),console.log("ðŸ” [Build Page] Imported level:",(y=m.attributeAssignments)==null?void 0:y.level),console.log("ðŸ” [Build Page] Imported skill levels:",m.skillLevels),console.log("ðŸ” [Build Page] Full imported build state structure:",JSON.stringify(m,null,2)),console.log("ðŸ” [Build Page] GigaPlanner data analysis:"),console.log("  - importedBuildState.race:",m.race,"(type:",typeof m.race,")"),console.log("  - importedBuildState.stone:",m.stone,"(type:",typeof m.stone,")"),console.log("  - importedBuildState.religion:",m.religion,"(type:",typeof m.religion,")"),console.log("  - importedBuildState.favoriteBlessing:",m.favoriteBlessing,"(type:",typeof m.favoriteBlessing,")"),console.log("  - importedBuildState.attributeAssignments:",m.attributeAssignments),console.log("  - importedBuildState.skills:",m.skills),console.log("  - importedBuildState.perks:",m.perks),console.log("  - importedBuildState.traits:",m.traits);const h={v:1,name:m.name!==void 0?m.name:e.name,notes:m.notes!==void 0?m.notes:e.notes,race:m.race&&m.race!=="Unknown"?m.race:null,stone:m.stone&&m.stone!=="Unknown"?m.stone:null,attributeAssignments:m.attributeAssignments?{health:m.attributeAssignments.health!==void 0?m.attributeAssignments.health:0,stamina:m.attributeAssignments.stamina!==void 0?m.attributeAssignments.stamina:0,magicka:m.attributeAssignments.magicka!==void 0?m.attributeAssignments.magicka:0,level:m.attributeAssignments.level!==void 0?m.attributeAssignments.level:1,assignments:m.attributeAssignments.assignments||{}}:e.attributeAssignments,skills:m.skills!==void 0?{major:m.skills.major||[],minor:m.skills.minor||[]}:e.skills,perks:m.perks!==void 0?{selected:m.perks.selected||{},ranks:m.perks.ranks||{}}:e.perks,traits:m.traits!==void 0?{regular:m.traits.regular||[],bonus:m.traits.bonus||[]}:e.traits,religion:m.religion&&m.religion!=="Unknown"?m.religion:null,favoriteBlessing:m.favoriteBlessing&&m.favoriteBlessing!=="Unknown"?m.favoriteBlessing:null,destinyPath:m.destinyPath!==void 0?m.destinyPath:e.destinyPath,skillLevels:m.skillLevels!==void 0?m.skillLevels:e.skillLevels};console.log("ðŸ”„ [Build Page] Updating build with converted state:",h),console.log("ðŸ” [Build Page] Converted race:",h.race),console.log("ðŸ” [Build Page] Converted stone:",h.stone),console.log("ðŸ” [Build Page] Converted level:",(w=h.attributeAssignments)==null?void 0:w.level),console.log("ðŸ” [Build Page] Converted destiny path:",h.destinyPath),r(h),console.log("âœ… [Build Page] Build update completed"),setTimeout(()=>{var p,b,j;const x=yr.getState().build;console.log("ðŸ“Š [Build Page] Current build state after update (delayed):",x),console.log("ðŸ” [Build Page] Race after update:",x.race),console.log("ðŸ” [Build Page] Stone after update:",x.stone),console.log("ðŸ” [Build Page] Level after update:",(p=x.attributeAssignments)==null?void 0:p.level),console.log("ðŸª [Build Store] Full build state after import:"),console.log("  - v:",x.v),console.log("  - name:",x.name),console.log("  - notes:",x.notes),console.log("  - race:",x.race),console.log("  - stone:",x.stone),console.log("  - religion:",x.religion),console.log("  - favoriteBlessing:",x.favoriteBlessing),console.log("  - traits:",x.traits),console.log("  - traitLimits:",x.traitLimits),console.log("  - skills:",x.skills),console.log("  - perks:",x.perks),console.log("  - skillLevels:",x.skillLevels),console.log("  - equipment:",x.equipment),console.log("  - userProgress:",x.userProgress),console.log("  - destinyPath:",x.destinyPath),console.log("  - attributeAssignments:",x.attributeAssignments),console.log("ðŸ”„ [Build Store] What we tried to set vs what actually got set:"),console.log("  - Tried to set race:",h.race,"â†’ Actually set:",x.race),console.log("  - Tried to set stone:",h.stone,"â†’ Actually set:",x.stone),console.log("  - Tried to set level:",(b=h.attributeAssignments)==null?void 0:b.level,"â†’ Actually set:",(j=x.attributeAssignments)==null?void 0:j.level),console.log("  - Tried to set blessing:",h.favoriteBlessing,"â†’ Actually set:",x.favoriteBlessing),console.log("  - Tried to set destiny path:",h.destinyPath,"â†’ Actually set:",x.destinyPath)},100),c(!1)},f=[{id:"basic-info",component:a.jsx(IS,{name:e.name,notes:e.notes,onNameChange:t,onNotesChange:n}),size:"full"},{id:"race",component:a.jsx(oE,{}),size:"half"},{id:"birthsign",component:a.jsx(FC,{}),size:"half"},{id:"trait",component:a.jsx(bT,{}),size:"half"},{id:"religion",component:a.jsx(pE,{}),size:"half"},{id:"favorite-blessing",component:a.jsx(xE,{}),size:"half"},{id:"attributes",component:a.jsx(qS,{}),size:"full"},{id:"skills",component:a.jsx(pT,{}),size:"full"},{id:"destiny",component:a.jsx(JC,{}),size:"full"}];return a.jsxs(Yt,{title:"Character Builder",description:"Create and customize your character build. Choose your race, birthsign, traits, religion, attributes, skills, and destiny to create the perfect character for your playstyle.",children:[a.jsx(w$,{onReset:()=>o(!0),build:e,onOpenGigaPlannerTools:()=>c(!0)}),a.jsx(M$,{open:i,onConfirm:()=>{s(),o(!1)},onCancel:()=>o(!1)}),a.jsx(KJ,{open:l,onOpenChange:c,onImport:d}),a.jsxs(qa,{defaultValue:"build",className:"w-full",children:[a.jsxs(Za,{className:"mb-4",children:[a.jsx(It,{value:"build",children:"Build"}),a.jsx(It,{value:"config",children:"Config"})]}),a.jsx(Zt,{value:"build",children:a.jsx(j$,{cards:f,gap:16})}),a.jsx(Zt,{value:"config",children:a.jsx(D$,{regularLimit:u.regularLimit,bonusLimit:u.bonusLimit,onRegularLimitChange:u.handleRegularLimitChange,onBonusLimitChange:u.handleBonusLimitChange,currentRegularCount:u.currentRegularCount,currentBonusCount:u.currentBonusCount})})]})]})}function eee(){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(qi,{children:"Crafting"}),a.jsx(Oc,{children:"Plan your crafting recipes and material requirements"})]}),a.jsxs(ce,{children:[a.jsxs(be,{children:[a.jsx(_e,{children:"Coming Soon"}),a.jsx(bs,{children:"Crafting system is under development"})]}),a.jsx(de,{children:a.jsx(Oc,{children:"This section will help you plan and optimize your crafting projects."})})]})]})}function tee(){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(qi,{children:"Equipment"}),a.jsx(Oc,{children:"Browse and compare weapons, armor, and items"})]}),a.jsxs(ce,{children:[a.jsxs(be,{children:[a.jsx(_e,{children:"Coming Soon"}),a.jsx(bs,{children:"Equipment database is under development"})]}),a.jsx(de,{children:a.jsx(Oc,{children:"This section will provide a comprehensive database of all equipment in the game."})})]})]})}function Pi(e){return{ArmorBoots:"Armor Footwear",ArmorHelmet:"Armor Headgear",ArmorCuirass:"Armor Body",ArmorGauntlets:"Armor Hands",ArmorShield:"Armor Shield",ArmorGreaves:"Armor Legs",ClothingFeet:"Clothing Footwear",ClothingHead:"Clothing Headgear",ClothingBody:"Clothing Body",ClothingHands:"Clothing Hands",ClothingRing:"Rings",ClothingNecklace:"Necklaces",ClothingCirclet:"Circlets",WeapMaterialWood:"Wooden Weapons",WeapMaterialSteel:"Steel Weapons",WeapMaterialOrcish:"Orcish Weapons",WeapMaterialIron:"Iron Weapons",WeapMaterialGlass:"Glass Weapons",WeapMaterialElven:"Elven Weapons",WeapMaterialEbony:"Ebony Weapons",WeapMaterialDwarven:"Dwarven Weapons",WeapMaterialDaedric:"Daedric Weapons"}[e]||e}function nee(e,t){const n=g.useMemo(()=>t.length===0?e:e.filter(s=>t.every(r=>{switch(r.category){case"Categories":return r.value==="weapon"?s.isWeaponEnchantment:r.value==="armor"?s.isArmorEnchantment:!0;case"Armor Restrictions":return s.wornRestrictions.includes(r.value);case"Fuzzy Search":return s.searchableText.toLowerCase().includes(r.value.toLowerCase());default:return!0}})),[e,t]);return{filteredEnchantments:n,totalCount:e.length,filteredCount:n.length}}const see=P.memo(({enchantment:e,onClick:t,className:n,selected:s=!1})=>a.jsx(ce,{className:F("group relative cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary/50",s&&"ring-2 ring-primary ring-offset-2",n),onClick:t,role:"button",tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),t==null||t())},children:a.jsxs(de,{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[a.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:e.name}),a.jsx("div",{className:"flex gap-1 flex-shrink-0",children:a.jsx(ws,{type:"targetType",value:e.targetType,size:"sm"})})]}),e.hasEffects&&a.jsx("div",{className:"mb-3",children:a.jsx(Wc,{effects:e.effects,title:"",compact:!0,showDescriptions:!0,maxDisplay:e.effects.length})}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:e.isWeaponEnchantment?a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"Weapon"}):e.wornRestrictions.length>0?e.wornRestrictions.map((r,i)=>a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",title:Pi(r),children:Pi(r)},i)):a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-200",children:"No listed restrictions"})})]})})),ree=P.memo(({enchantment:e,onClick:t,className:n,selected:s=!1})=>a.jsx(ce,{className:F("group relative cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary/50",s&&"ring-2 ring-primary ring-offset-2",n),onClick:t,role:"button",tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),t==null||t())},children:a.jsx(de,{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors truncate",children:e.name}),a.jsx("div",{className:"flex gap-1 flex-shrink-0",children:a.jsx(ws,{type:"targetType",value:e.targetType,size:"sm"})})]}),e.hasEffects&&a.jsx("div",{children:a.jsx(Wc,{effects:e.effects,title:"",compact:!0,showDescriptions:!0,maxDisplay:e.effects.length})}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.isWeaponEnchantment?a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"Weapon"}):e.wornRestrictions.length>0?e.wornRestrictions.map((r,i)=>a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",title:Pi(r),children:Pi(r)},i)):a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-200",children:"No listed restrictions"})})]})})})),aee=P.memo(({className:e,enchantments:t,loading:n,emptyMessage:s="No enchantments found",viewMode:r="grid",onEnchantmentClick:i})=>{const{data:o,loading:l,viewState:c}=$r(),u=n??l,d=t??o,{sortBy:f,sortOrder:m}=c,h=g.useMemo(()=>d?[...d].sort((y,w)=>{let x,p;switch(f){case"name":x=y.name.toLowerCase(),p=w.name.toLowerCase();break;case"targetType":x=y.isWeaponEnchantment?"weapon":"armor",p=w.isWeaponEnchantment?"weapon":"armor";break;case"wornRestrictions":if(y.isWeaponEnchantment&&!w.isWeaponEnchantment)return-1;if(!y.isWeaponEnchantment&&w.isWeaponEnchantment)return 1;if(y.isWeaponEnchantment&&w.isWeaponEnchantment)x=y.name.toLowerCase(),p=w.name.toLowerCase();else{const b=y.wornRestrictions[0]||"",j=w.wornRestrictions[0]||"";b!==j?(x=b.toLowerCase(),p=j.toLowerCase()):(x=y.name.toLowerCase(),p=w.name.toLowerCase())}break;default:x=y.name.toLowerCase(),p=w.name.toLowerCase()}return x<p?m==="asc"?-1:1:x>p?m==="asc"?1:-1:0}):[],[d,f,m]),v=y=>{i==null||i(y)};return u?a.jsx("div",{className:F(r==="list"?"space-y-4":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-4",e),children:Array.from({length:8}).map((y,w)=>a.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 animate-pulse",children:[a.jsx("div",{className:"h-4 bg-muted rounded mb-2"}),a.jsx("div",{className:"h-3 bg-muted rounded mb-2 w-2/3"}),a.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]},w))}):h.length===0?a.jsxs("div",{className:F("flex flex-col items-center justify-center py-12 text-center",e),children:[a.jsx("div",{className:"text-4xl mb-4",children:"ðŸ”®"}),a.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Enchantments Found"}),a.jsx("p",{className:"text-muted-foreground",children:s})]}):a.jsx("div",{className:F(r==="list"?"space-y-4":"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4",e),children:h.map(y=>r==="list"?a.jsx(ree,{enchantment:y,onClick:()=>v(y)},y.baseEnchantmentId):a.jsx(see,{enchantment:y,onClick:()=>v(y)},y.baseEnchantmentId))})});function iee(e,t){const[n,s]=g.useState(e);return g.useEffect(()=>{const r=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(r)}},[e,t]),n}const oee=P.memo(({className:e,showAdvanced:t=!1})=>{const{data:n,filters:s,setFilters:r}=$r(),[i,o]=g.useState(t),[l,c]=g.useState(s.searchTerm||""),u=iee(l,300),d=g.useMemo(()=>{const N=[...new Set(n.map(S=>S.category))],A=[...new Set(n.map(S=>S.plugin))],k=[...new Set(n.map(S=>S.targetType))],C=[...new Set(n.flatMap(S=>S.foundOnItems.map(E=>E.type)))];return{categories:N.sort(),plugins:A.sort(),targetTypes:k.sort(),itemTypes:C.sort()}},[n]);P.useEffect(()=>{r({searchTerm:u})},[u,r]);const f=N=>{c(N)},m=(N,A)=>{const k=s.categories||[],C=A?[...k,N]:k.filter(S=>S!==N);r({categories:C})},h=(N,A)=>{const k=s.targetTypes||[],C=A?[...k,N]:k.filter(S=>S!==N);r({targetTypes:C})},v=(N,A)=>{const k=s.plugins||[],C=A?[...k,N]:k.filter(S=>S!==N);r({plugins:C})},y=(N,A)=>{const k=s.itemTypes||[],C=A?[...k,N]:k.filter(S=>S!==N);r({itemTypes:C})},w=N=>{r({hasEffects:N})},x=N=>{r({hasWornRestrictions:N})},p=()=>{r({categories:[],targetTypes:[],itemTypes:[],plugins:[],searchTerm:"",hasEffects:null,hasWornRestrictions:null,minItemCount:null,maxItemCount:null})},b=(N,A)=>{switch(N){case"searchTerm":r({searchTerm:""});break;case"categories":r({categories:[]});break;case"targetTypes":r({targetTypes:[]});break;case"plugins":r({plugins:[]});break;case"itemTypes":r({itemTypes:[]});break;case"hasEffects":r({hasEffects:null});break;case"hasWornRestrictions":r({hasWornRestrictions:null});break}},j=s.searchTerm||s.categories.length>0||s.targetTypes.length>0||s.plugins.length>0||s.itemTypes.length>0||s.hasEffects!==null||s.hasWornRestrictions!==null;return a.jsxs("div",{className:F("space-y-4",e),children:[a.jsxs("div",{className:"relative",children:[a.jsx(Bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Dt,{placeholder:"Search enchantments...",value:l,onChange:N=>f(N.target.value),className:"pl-10"})]}),j&&a.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.searchTerm&&a.jsxs(Z,{variant:"secondary",className:"gap-1",children:['Search: "',s.searchTerm,'"',a.jsx("button",{onClick:()=>b("searchTerm"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:a.jsx(Me,{className:"h-3 w-3"})})]}),s.categories.map(N=>a.jsxs(Z,{variant:"secondary",className:"gap-1",children:["Category: ",N,a.jsx("button",{onClick:()=>b("categories"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:a.jsx(Me,{className:"h-3 w-3"})})]},N)),s.targetTypes.map(N=>a.jsxs(Z,{variant:"secondary",className:"gap-1",children:[a.jsx(ws,{type:"targetType",value:N,size:"sm"}),a.jsx("button",{onClick:()=>b("targetTypes"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:a.jsx(Me,{className:"h-3 w-3"})})]},N)),s.plugins.map(N=>a.jsxs(Z,{variant:"secondary",className:"gap-1",children:["Plugin: ",N,a.jsx("button",{onClick:()=>b("plugins"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:a.jsx(Me,{className:"h-3 w-3"})})]},N)),s.itemTypes.map(N=>a.jsxs(Z,{variant:"secondary",className:"gap-1",children:[a.jsx(ws,{type:"itemType",value:N,size:"sm"}),a.jsx("button",{onClick:()=>b("itemTypes"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:a.jsx(Me,{className:"h-3 w-3"})})]},N)),s.hasEffects!==null&&a.jsxs(Z,{variant:"secondary",className:"gap-1",children:["Has Effects: ",s.hasEffects?"Yes":"No",a.jsx("button",{onClick:()=>b("hasEffects"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:a.jsx(Me,{className:"h-3 w-3"})})]}),s.hasWornRestrictions!==null&&a.jsxs(Z,{variant:"secondary",className:"gap-1",children:["Has Restrictions: ",s.hasWornRestrictions?"Yes":"No",a.jsx("button",{onClick:()=>b("hasWornRestrictions"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:a.jsx(Me,{className:"h-3 w-3"})})]}),a.jsx(U,{variant:"ghost",size:"sm",onClick:p,className:"h-6 px-2 text-xs",children:"Clear All"})]}),a.jsxs(U,{variant:"outline",size:"sm",onClick:()=>o(!i),className:"flex items-center gap-2",children:[a.jsx(M3,{className:"h-4 w-4"}),"Filters",i?a.jsx(Lc,{className:"h-4 w-4"}):a.jsx(Je,{className:"h-4 w-4"})]}),i&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border rounded-lg bg-muted/50",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pt,{children:"Categories"}),a.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:d.categories.map(N=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:`category-${N}`,checked:s.categories.includes(N),onChange:A=>m(N,A.target.checked),className:"rounded border-gray-300"}),a.jsx(Pt,{htmlFor:`category-${N}`,className:"text-sm",children:N})]},N))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pt,{children:"Target Type"}),a.jsx("div",{className:"space-y-2",children:d.targetTypes.map(N=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:`target-${N}`,checked:s.targetTypes.includes(N),onChange:A=>h(N,A.target.checked),className:"rounded border-gray-300"}),a.jsx(Pt,{htmlFor:`target-${N}`,className:"text-sm",children:a.jsx(ws,{type:"targetType",value:N,size:"sm"})})]},N))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pt,{children:"Plugin"}),a.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:d.plugins.map(N=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:`plugin-${N}`,checked:s.plugins.includes(N),onChange:A=>v(N,A.target.checked),className:"rounded border-gray-300"}),a.jsx(Pt,{htmlFor:`plugin-${N}`,className:"text-sm",children:N})]},N))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pt,{children:"Item Type"}),a.jsx("div",{className:"space-y-2",children:d.itemTypes.map(N=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:`item-${N}`,checked:s.itemTypes.includes(N),onChange:A=>y(N,A.target.checked),className:"rounded border-gray-300"}),a.jsx(Pt,{htmlFor:`item-${N}`,className:"text-sm",children:a.jsx(ws,{type:"itemType",value:N,size:"sm"})})]},N))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pt,{children:"Has Effects"}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"has-effects",checked:s.hasEffects===!0,onChange:N=>w(N.target.checked),className:"rounded border-gray-300"}),a.jsx(Pt,{htmlFor:"has-effects",className:"text-sm",children:"Has Effects"})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Pt,{children:"Has Worn Restrictions"}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"has-restrictions",checked:s.hasWornRestrictions===!0,onChange:N=>x(N.target.checked),className:"rounded border-gray-300"}),a.jsx(Pt,{htmlFor:"has-restrictions",className:"text-sm",children:"Has Restrictions"})]})})]})]})]})}),lee=()=>{const{data:e,filters:t}=$r(),n=g.useCallback(f=>{if(!f)return()=>!0;const m=f.toLowerCase();return h=>h.searchableText.includes(m)},[]),s=g.useCallback(f=>f.length===0?()=>!0:m=>f.includes(m.category),[]),r=g.useCallback(f=>f.length===0?()=>!0:m=>f.includes(m.targetType),[]),i=g.useCallback(f=>f.length===0?()=>!0:m=>f.includes(m.plugin),[]),o=g.useCallback(f=>f.length===0?()=>!0:m=>m.foundOnItems.map(v=>v.type).some(v=>f.includes(v)),[]),l=g.useCallback(f=>f===null?()=>!0:m=>m.hasEffects===f,[]),c=g.useCallback(f=>f===null?()=>!0:m=>m.wornRestrictions.length>0===f,[]),u=g.useCallback((f,m)=>f===null&&m===null?()=>!0:h=>!(f!==null&&h.itemCount<f||m!==null&&h.itemCount>m),[]),d=g.useMemo(()=>{const f=n(t.searchTerm),m=s(t.categories),h=r(t.targetTypes),v=i(t.plugins),y=o(t.itemTypes),w=l(t.hasEffects),x=c(t.hasWornRestrictions),p=u(t.minItemCount,t.maxItemCount);return e.filter(b=>f(b)&&m(b)&&h(b)&&v(b)&&y(b)&&w(b)&&x(b)&&p(b))},[e,t,n,s,r,i,o,l,c,u]);return{filteredEnchantments:d,filters:t,totalCount:e.length,filteredCount:d.length}},cee=({className:e,showFilters:t=!0,enchantments:n,viewMode:s="grid",onEnchantmentClick:r})=>{const{filteredEnchantments:i,totalCount:o,filteredCount:l}=lee(),c=n||i;return a.jsxs("div",{className:F("space-y-6",e),children:[t&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(oee,{}),l!==o&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",l," of ",o," enchantments"]})]}),a.jsx(aee,{enchantments:c,loading:!1,viewMode:s,onEnchantmentClick:r})]})},uee=P.memo(({enchantment:e,open:t,onOpenChange:n,className:s})=>{const{data:r}=$r(),i=e,o=i?r.findIndex(m=>m.baseEnchantmentId===i.baseEnchantmentId):-1,l=o>0,c=o<r.length-1,u=()=>{l&&i&&(r[o-1],n(!1))},d=()=>{c&&i&&(r[o+1],n(!1))},f=()=>{n(!1)};return i?a.jsx(Ki,{open:t,onOpenChange:n,side:"right",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:i.name}),a.jsx(U,{variant:"ghost",size:"sm",onClick:f,className:"h-8 w-8 p-0",children:a.jsx(Me,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs(U,{variant:"outline",size:"sm",onClick:u,disabled:!l,className:"flex items-center gap-2",children:[a.jsx(xm,{className:"h-4 w-4"}),"Previous"]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[o+1," of ",r.length]}),a.jsxs(U,{variant:"outline",size:"sm",onClick:d,disabled:!c,className:"flex items-center gap-2",children:["Next",a.jsx(Cl,{className:"h-4 w-4"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(ws,{type:"category",value:i.category,size:"lg"}),a.jsx(ws,{type:"targetType",value:i.targetType,size:"lg"})]}),i.hasEffects&&a.jsx("div",{children:a.jsx(Wc,{effects:i.effects,title:"Enchantment Effects",showDescriptions:!0,compact:!1})}),a.jsx("div",{children:a.jsx(Yp,{items:i.foundOnItems,title:"Items that can carry this enchantment",showType:!0,compact:!1})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Can be applied to:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:i.isWeaponEnchantment?a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"Weapons"}):i.wornRestrictions.map((m,h)=>a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200",children:Pi(m)},h))})]})]})]})}):null}),dee=()=>{const{loading:e,error:t,data:n}=$r(),{load:s}=$r();return g.useEffect(()=>{n.length===0&&!e&&s()},[n.length,e,s]),t?a.jsxs("div",{className:"p-4 text-red-600",children:["Error loading enchantments: ",t]}):null};function ri({title:e,value:t,description:n,icon:s,trend:r,trendValue:i,className:o,variant:l="default"}){const c=()=>{switch(r){case"up":return a.jsx(Pc,{className:"h-4 w-4 text-green-500"});case"down":return a.jsx(np,{className:"h-4 w-4 text-red-500"});case"neutral":return a.jsx(zo,{className:"h-4 w-4 text-gray-500"});default:return null}},u=()=>{switch(l){case"highlight":return"border-primary/20 bg-primary/5";case"muted":return"border-muted bg-muted/20";default:return"border-border bg-card"}};return a.jsxs(ce,{className:F("transition-all duration-200 hover:shadow-md",u(),o),children:[a.jsxs(be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(_e,{className:"text-sm font-medium text-muted-foreground",children:e}),s&&a.jsx("div",{className:"text-muted-foreground",children:s})]}),a.jsx(de,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-2xl font-bold",children:typeof t=="number"?t.toLocaleString():t}),n&&a.jsx("p",{className:"text-xs text-muted-foreground",children:n})]}),r&&a.jsxs("div",{className:"flex items-center gap-1",children:[c(),i&&a.jsx("span",{className:F("text-xs font-medium",r==="up"&&"text-green-600",r==="down"&&"text-red-600",r==="neutral"&&"text-gray-600"),children:i})]})]})})]})}function ml({title:e,description:t,children:n,className:s,isLoading:r=!1,error:i,height:o="h-64"}){return a.jsxs(ce,{className:F("transition-all duration-200",s),children:[a.jsxs(be,{className:"pb-3",children:[a.jsx(_e,{className:"text-lg font-semibold",children:e}),t&&a.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),a.jsx(de,{children:a.jsx("div",{className:F("w-full",o),children:r?a.jsx("div",{className:"flex h-full items-center justify-center",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading chart..."})]})}):i?a.jsx("div",{className:"flex h-full items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-destructive",children:i})})}):n})})]})}function fee({data:e,total:t,className:n,title:s="Category Breakdown",description:r="Distribution of enchantments by category"}){if(!e||e.length===0)return a.jsx(ml,{title:s,description:r,className:n,error:"No data available"});const i=Math.max(...e.map(o=>o.value));return a.jsx(ml,{title:s,description:r,className:n,children:a.jsx("div",{className:"space-y-3",children:e.map((o,l)=>{const c=t>0?o.value/t*100:0,u=i>0?o.value/i*100:0;return a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"font-medium truncate",children:o.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Z,{variant:"secondary",className:"text-xs",children:o.value}),a.jsxs("span",{className:"text-muted-foreground text-xs",children:[c.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:a.jsx("div",{className:F("h-2 rounded-full transition-all duration-300","bg-gradient-to-r from-blue-500 to-blue-600"),style:{width:`${u}%`}})})]},o.name)})})})}const Fj=["bg-blue-500","bg-green-500","bg-yellow-500","bg-red-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500"];function mee({data:e,total:t,className:n}){return!e||e.length===0?a.jsx(ml,{title:"Target Type Distribution",description:"Distribution of enchantments by target type",className:n,error:"No data available"}):a.jsx(ml,{title:"Target Type Distribution",description:"Distribution of enchantments by target type",className:n,children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.map((s,r)=>{const i=t>0?s.value/t*100:0,o=Fj[r%Fj.length];return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border",children:[a.jsx("div",{className:F("w-4 h-4 rounded-full",o)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium truncate",children:s.name}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.value," (",i.toFixed(1),"%)"]})]})]},s.name)})})}),a.jsxs("div",{className:"lg:w-48 space-y-3",children:[a.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted",children:[a.jsx("div",{className:"text-2xl font-bold",children:t}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Enchantments"})]}),a.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted",children:[a.jsx("div",{className:"text-2xl font-bold",children:e.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Target Types"})]})]})]})})}function Hj({title:e,description:t,data:n,columns:s,className:r,maxRows:i,sortBy:o,sortDirection:l,onSort:c}){const[u,d]=g.useState(null),[f,m]=g.useState("desc"),h=p=>{c?c(p):u===p?m(f==="asc"?"desc":"asc"):(d(p),m("desc"))},v=g.useMemo(()=>{const p=o||u,b=l||f;return p?[...n].sort((j,N)=>{const A=j[p],k=N[p];if(typeof A=="string"&&typeof k=="string"){const C=A.localeCompare(k);return b==="asc"?C:-C}return typeof A=="number"&&typeof k=="number"?b==="asc"?A-k:k-A:0}):n},[n,o,u,l,f]),y=i?v.slice(0,i):v,w=p=>{const b=o||u,j=l||f;return b!==p?a.jsx(QR,{className:"h-4 w-4"}):j==="asc"?a.jsx(e3,{className:"h-4 w-4"}):a.jsx(ZR,{className:"h-4 w-4"})},x=(p,b)=>{const j=p[b.key];return b.render?b.render(j,p):typeof j=="number"?j.toLocaleString():typeof j=="string"?j:String(j)};return a.jsxs(ce,{className:F("transition-all duration-200",r),children:[a.jsxs(be,{className:"pb-3",children:[a.jsx(_e,{className:"text-lg font-semibold",children:e}),t&&a.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),a.jsx(de,{children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsx("tr",{className:"border-b",children:s.map(p=>a.jsx("th",{className:F("px-4 py-2 text-left text-sm font-medium text-muted-foreground",p.sortable&&"cursor-pointer hover:text-foreground",p.className),onClick:()=>p.sortable&&h(p.key),children:a.jsxs("div",{className:"flex items-center gap-1",children:[p.label,p.sortable&&w(p.key)]})},String(p.key)))})}),a.jsx("tbody",{children:y.map((p,b)=>a.jsx("tr",{className:"border-b border-border/50 hover:bg-muted/50 transition-colors",children:s.map(j=>a.jsx("td",{className:F("px-4 py-3 text-sm",j.className),children:x(p,j)},String(j.key)))},b))})]}),i&&n.length>i&&a.jsx("div",{className:"mt-4 text-center",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",i," of ",n.length," items"]})})]})})]})}function hee({data:e,total:t,className:n}){if(!e||e.length===0)return a.jsx(Hj,{title:"Top Effects",description:"Most common enchantment effects",data:[],columns:[],className:n,error:"No data available"});const s=[{key:"name",label:"Effect Name",sortable:!0},{key:"count",label:"Occurrences",sortable:!0,render:i=>a.jsx(Z,{variant:"secondary",children:i.toLocaleString()})},{key:"percentage",label:"Percentage",sortable:!0,render:(i,o)=>{const l=t>0?o.count/t*100:0;return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-16 bg-muted rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-green-500 to-green-600",style:{width:`${Math.min(l,100)}%`}})}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[l.toFixed(1),"%"]})]})}}],r=e.map(i=>({...i,percentage:t>0?i.count/t*100:0}));return a.jsx(Hj,{title:"Top Effects",description:"Most common enchantment effects",data:r,columns:s,className:n,maxRows:10})}function gee({data:e,total:t,className:n}){if(!e||e.length===0)return a.jsx(ml,{title:"Item Type Distribution",description:"Distribution of items that can be enchanted",className:n,error:"No data available"});const s=Math.max(...e.map(r=>r.value));return a.jsx(ml,{title:"Item Type Distribution",description:"Distribution of items that can be enchanted",className:n,height:"h-80",children:a.jsx("div",{className:"space-y-3",children:e.map((r,i)=>{const o=t>0?r.value/t*100:0,l=s>0?r.value/s*100:0;return a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"font-medium truncate",children:r.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Z,{variant:"outline",className:"text-xs",children:r.value}),a.jsxs("span",{className:"text-muted-foreground text-xs",children:[o.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:a.jsx("div",{className:F("h-2 rounded-full transition-all duration-300","bg-gradient-to-r from-purple-500 to-purple-600"),style:{width:`${l}%`}})})]},r.name)})})})}function pee(){const{data:e}=$r();return g.useMemo(()=>{if(!e||e.length===0)return{totalEnchantments:0,categoryBreakdown:{},targetTypeDistribution:{},pluginSources:{},topEffects:[],itemTypeDistribution:{},averageEffectsPerEnchantment:0,enchantmentsWithWornRestrictions:0,totalEffects:0,totalItems:0,uniqueEffects:0,uniqueItemTypes:0};const t={},n={},s={},r={},i={};let o=0,l=0,c=0;e.forEach(h=>{const v=h.category||"Unknown";t[v]=(t[v]||0)+1;const y=h.targetType||"Unknown";n[y]=(n[y]||0)+1;const w=h.plugin||"Unknown";s[w]=(s[w]||0)+1,h.effects.forEach(x=>{const p=x.name||"Unknown Effect";r[p]=(r[p]||0)+1,o++}),h.foundOnItems.forEach(x=>{const p=x.type||"Unknown";i[p]=(i[p]||0)+1,l++}),h.wornRestrictions&&h.wornRestrictions.length>0&&c++});const u=Object.entries(r).map(([h,v])=>({name:h,count:v})).sort((h,v)=>v.count-h.count).slice(0,10),d=o/e.length,f=Object.keys(r).length,m=Object.keys(i).length;return{totalEnchantments:e.length,categoryBreakdown:t,targetTypeDistribution:n,pluginSources:s,topEffects:u,itemTypeDistribution:i,averageEffectsPerEnchantment:Math.round(d*100)/100,enchantmentsWithWornRestrictions:c,totalEffects:o,totalItems:l,uniqueEffects:f,uniqueItemTypes:m}},[e])}function xee(e){return g.useMemo(()=>{const t=Object.entries(e.categoryBreakdown).map(([i,o])=>({name:i,value:o})).sort((i,o)=>o.value-i.value),n=Object.entries(e.targetTypeDistribution).map(([i,o])=>({name:i,value:o})).sort((i,o)=>o.value-i.value),s=Object.entries(e.pluginSources).map(([i,o])=>({name:i,value:o})).sort((i,o)=>o.value-i.value),r=Object.entries(e.itemTypeDistribution).map(([i,o])=>({name:i,value:o})).sort((i,o)=>o.value-i.value).slice(0,15);return{categoryData:t,targetTypeData:n,pluginData:s,itemTypeData:r,effectsData:e.topEffects}},[e])}function vee({className:e}){const t=pee(),n=xee(t);return a.jsxs("div",{className:F("space-y-6",e),children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Enchantment Statistics"}),a.jsx("p",{className:"text-muted-foreground",children:"Comprehensive analytics and insights about enchantment data"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(ri,{title:"Total Enchantments",value:t.totalEnchantments,description:"All available enchantments",icon:a.jsx(js,{className:"h-4 w-4"}),variant:"highlight"}),a.jsx(ri,{title:"Unique Effects",value:t.uniqueEffects,description:"Different effect types",icon:a.jsx(sn,{className:"h-4 w-4"})}),a.jsx(ri,{title:"Item Types",value:t.uniqueItemTypes,description:"Different item categories",icon:a.jsx(N1,{className:"h-4 w-4"})}),a.jsx(ri,{title:"Avg Effects/Enchantment",value:t.averageEffectsPerEnchantment,description:"Average effects per enchantment",icon:a.jsx(r3,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(ri,{title:"Total Effects",value:t.totalEffects,description:"All effect instances",icon:a.jsx(Pc,{className:"h-4 w-4"}),variant:"muted"}),a.jsx(ri,{title:"Total Items",value:t.totalItems,description:"All item instances",icon:a.jsx(at,{className:"h-4 w-4"}),variant:"muted"}),a.jsx(ri,{title:"With Worn Restrictions",value:t.enchantmentsWithWornRestrictions,description:"Enchantments with restrictions",icon:a.jsx(Er,{className:"h-4 w-4"}),variant:"muted"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(fee,{data:n.categoryData,total:t.totalEnchantments}),a.jsx(mee,{data:n.targetTypeData,total:t.totalEnchantments})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(hee,{data:n.effectsData,total:t.totalEffects}),a.jsx(gee,{data:n.itemTypeData,total:t.totalItems})]}),a.jsxs("div",{className:"bg-muted/50 rounded-lg p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Summary"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Data Coverage"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.totalEnchantments," enchantments available"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Effect Diversity"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.uniqueEffects," unique effects with ",t.averageEffectsPerEnchantment," average per enchantment"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Item Coverage"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.uniqueItemTypes," item types with ",t.totalItems," total instances"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Restrictions"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.enchantmentsWithWornRestrictions," enchantments have worn restrictions"]})]})]})]})]})}function yee(){const[e,t]=g.useState(null),[n,s]=g.useState(!1),[r]=U1(),{data:i}=$r(),[o,l]=g.useState("grid"),[c,u]=g.useState([]),{viewState:d,setViewState:f}=$r(),{sortBy:m,sortOrder:h}=d,{filteredEnchantments:v}=nee(i,c),y=g.useMemo(()=>{if(!i||i.length===0)return[];const b=[...new Set(i.filter(j=>j.isArmorEnchantment).flatMap(j=>j.wornRestrictions).filter(Boolean))].sort();return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, effects, or description...",options:[]},{id:"categories",name:"Categories",placeholder:"Filter by what can be enchanted...",options:[{id:"category-weapon",label:"Weapon",value:"weapon",category:"Categories",description:"Weapon enchantments"},{id:"category-armor",label:"Armor",value:"armor",category:"Categories",description:"Armor enchantments"}]},{id:"armor-restrictions",name:"Armor Restrictions",placeholder:"Filter by armor type restrictions...",options:b.map(j=>({id:`restriction-${j}`,label:Pi(j),value:j,category:"Armor Restrictions",description:`Enchantments restricted to ${Pi(j)}`}))}]},[i]),w=b=>{let j;typeof b=="string"?j={id:`custom-${b}`,label:b,value:b,category:"Fuzzy Search"}:j={id:`${b.category}-${b.id}`,label:b.label,value:b.value,category:b.category},c.some(N=>N.value===j.value&&N.category===j.category)||u(N=>[...N,j])},x=b=>{u(j=>j.filter(N=>N.id!==b))},p=()=>{u([])};return g.useEffect(()=>{r.get("selected")},[r]),a.jsxs(Yt,{title:"Enchantments",description:`Explore the vast collection of ${i.length} enchantments available in the world. Discover powerful effects, find items that carry these enchantments, and understand the restrictions that govern their use.`,children:[a.jsx(dee,{}),a.jsx(uee,{enchantment:e,open:n,onOpenChange:s}),a.jsxs(qa,{defaultValue:"enchantments",className:"w-full",children:[a.jsxs(Za,{className:"mb-4",children:[a.jsx(It,{value:"enchantments",children:"Enchantments"}),a.jsx(It,{value:"statistics",children:"Statistics"})]}),a.jsxs(Zt,{value:"enchantments",children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(Yr,{categories:y,onSelect:w,onCustomSearch:w})})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(G0,{viewMode:o,onViewModeChange:l}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:m,onChange:b=>f({sortBy:b.target.value}),className:"appearance-none bg-background border border-border rounded-lg px-3 py-1.5 pr-8 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer",children:[a.jsx("option",{value:"name",children:"Sort: A-Z"}),a.jsx("option",{value:"targetType",children:"Sort: Ench Target"}),a.jsx("option",{value:"wornRestrictions",children:"Sort: Worn Restrictions"})]}),a.jsx(Je,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]})]}),c.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:p,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Me,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),c.map(b=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>x(b.id),title:"Click to remove",children:[b.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"Ã—"})]},b.id))]}),a.jsx(cee,{showFilters:!1,enchantments:v,viewMode:o,className:"mt-4",onEnchantmentClick:b=>{t(b),s(!0)}})]}),a.jsx(Zt,{value:"statistics",children:a.jsxs(ce,{className:"border-skyrim-gold/20",children:[a.jsx(be,{children:a.jsx(_e,{className:"text-skyrim-gold flex items-center gap-2",children:"ðŸ“Š Enchantment Statistics"})}),a.jsx(de,{children:a.jsx(vee,{})})]})})]}),a.jsx(Bm,{threshold:400})]})}const bee=()=>{const{build:e,getSummary:t}=Xe(),n=lt(),s=t();return!e.name&&!e.race?a.jsxs(ce,{className:"border-dashed border-2 border-muted",children:[a.jsxs(be,{children:[a.jsx(_e,{className:"text-lg",children:"No Character Build"}),a.jsx(bs,{children:"Start building your character to see it here"})]}),a.jsx(de,{children:a.jsx(U,{onClick:()=>n("/build"),className:"w-full",children:"Create Character Build"})})]}):a.jsxs(ce,{children:[a.jsxs(be,{children:[a.jsxs(_e,{className:"text-lg flex items-center justify-between",children:[a.jsx("span",{children:s.name}),a.jsx(U,{variant:"outline",size:"sm",onClick:()=>n("/build"),children:"Edit"})]}),a.jsx(bs,{children:"Current character build status"})]}),a.jsxs(de,{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Race:"}),a.jsx(Z,{variant:"secondary",className:"ml-2",children:s.race})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Birth Sign:"}),a.jsx(Z,{variant:"secondary",className:"ml-2",children:s.stone})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Religion:"}),a.jsx(Z,{variant:"secondary",className:"ml-2",children:s.religion})]})]}),a.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[a.jsxs("span",{children:[s.traitCount," traits"]}),a.jsx("span",{children:"â€¢"}),a.jsxs("span",{children:[s.majorSkillCount," major skills"]}),a.jsx("span",{children:"â€¢"}),a.jsxs("span",{children:[s.minorSkillCount," minor skills"]}),a.jsx("span",{children:"â€¢"}),a.jsxs("span",{children:[s.equipmentCount," equipment"]})]})]})]})};function wee(){const e=lt(),t=()=>{e("/build")},n=[{name:"GigaPlanner",description:"Advanced build planner with detailed skill trees and optimization",url:"https://multidyls.github.io/GigaPlanner",icon:a.jsx(df,{className:"h-5 w-5 text-primary"}),category:"Build Planning",author:"Multidyls"},{name:"Character Builder GPT",description:"AI-powered character creation assistant with personalized build recommendations",url:"https://chatgpt.com/g/g-68462f6313d48191bab174806a049ca4-lorerim-builds-wizard-v2?model=gpt-4o",icon:a.jsx(k1,{className:"h-5 w-5 text-primary"}),category:"AI Assistant",author:"Zoldyg"},{name:"Alchemy Calculator",description:"Comprehensive alchemy crafting and ingredient database with detailed recipes",url:"https://docs.google.com/spreadsheets/d/1zUVCaRlqHX_sER-kJR-ZLIAfsFbTj9FQCO-hMfnp4XA/edit?gid=2066962651#gid=2066962651",icon:a.jsx(js,{className:"h-5 w-5 text-primary"}),category:"Crafting",author:"Rudy"},{name:"Spell Sheet Generator",description:"Lorerim Spell List Google Sheet",url:"https://docs.google.com/spreadsheets/d/1fvYHRfwAprpgEPaXyuteEx0ud9S572noYnlpVq6cJFs/edit?gid=915313506#gid=915313506",icon:a.jsx(Ba,{className:"h-5 w-5 text-primary"}),category:"Spells",author:"ImmatureTurtles"},{name:"Weapons Discussion Hub",description:"Deep dive into weapon mechanics, damage calculations, and optimization strategies",url:"https://discord.com/channels/622647066719420427/1382033558754955354",icon:a.jsx(Ci,{className:"h-5 w-5 text-primary"}),category:"Combat",author:"Deo"},{name:"Spin Wheel Tool",description:"Random build generator and challenge creator for fun playthroughs",url:"https://sorathesaint.github.io/Wheel-of-classes-for-LoreRim-Arcaneum",icon:a.jsx(Dr,{className:"h-5 w-5 text-primary"}),category:"Fun",author:"Sora the Saint"}],s=r=>{r!=="#"&&window.open(r,"_blank","noopener,noreferrer")};return a.jsx("div",{className:"bg-background",children:a.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-12",children:[a.jsxs("div",{className:"text-left space-y-6",children:[a.jsx("div",{className:"flex items-center gap-3 mb-4 justify-start",children:a.jsx(qi,{className:"text-4xl md:text-6xl font-bold text-foreground",children:"Lorerim Arcaneum"})}),a.jsx(GS,{className:"text-xl md:text-2xl text-muted-foreground",children:"A growing collection of Lorerim tools and resources. Build characters, explore mechanics, and contribute to the community."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Big thanks to Biggie Boss"})]}),a.jsx("div",{className:"max-w-md",children:a.jsx(bee,{})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[a.jsx(ff,{className:"h-6 w-6 text-primary"}),"Character Building"]}),a.jsx("p",{className:"text-muted-foreground",children:"Create and customize your character from scratch"})]}),a.jsxs(ce,{className:"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card",onClick:t,children:[a.jsxs(be,{children:[a.jsxs(_e,{className:"flex items-center gap-2 group-hover:text-primary transition-colors text-card-foreground",children:[a.jsx(js,{className:"h-5 w-5"}),"Start Character Build"]}),a.jsx(bs,{className:"text-muted-foreground",children:"Design your character with races, traits, birthsigns, and more"})]}),a.jsx(de,{children:a.jsxs(U,{className:"w-full group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:["Begin Building",a.jsx(WR,{className:"ml-2 h-4 w-4"})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(ce,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/race"),children:a.jsxs(de,{className:"p-4 text-center",children:[a.jsx(SD,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Races"})]})}),a.jsx(ce,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/birth-signs"),children:a.jsxs(de,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:"â­"}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Birthsigns"})]})}),a.jsx(ce,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/traits"),children:a.jsxs(de,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:"ðŸŽ¯"}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Traits"})]})}),a.jsx(ce,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/perks"),children:a.jsxs(de,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:"âš”ï¸"}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Skills"})]})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[a.jsx(Bn,{className:"h-6 w-6 text-primary"}),"Quick Access"]}),a.jsx("p",{className:"text-muted-foreground",children:"Jump directly to specific tools and features"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ce,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/search"),children:a.jsx(de,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Bn,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-card-foreground",children:"Advanced Search"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Detailed search with filters"})]})]})})}),a.jsx(ce,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/spells"),children:a.jsx(de,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(js,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-card-foreground",children:"Spells"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Browse and search spells"})]})]})})}),a.jsx(ce,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/cookbook"),children:a.jsx(de,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(b1,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-card-foreground",children:"Cookbook"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Crafting recipes & guides"})]})]})})})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[a.jsx(df,{className:"h-6 w-6 text-primary"}),"Favorite Tools"]}),a.jsx("p",{className:"text-muted-foreground",children:"Discover the best external tools and resources for Lorerim theorycrafting"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((r,i)=>a.jsxs(ce,{className:"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card",onClick:()=>s(r.url),children:[a.jsxs(be,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[r.icon,a.jsx(_e,{className:"text-lg group-hover:text-primary transition-colors text-card-foreground",children:r.name})]}),a.jsx(Fa,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-xs font-medium text-primary/80 bg-primary/10 px-2 py-1 rounded-full",children:r.category}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["by ",r.author]})]})]}),a.jsx(de,{className:"pt-0",children:a.jsx(bs,{className:"text-muted-foreground",children:r.description})})]},i))})]}),a.jsx("div",{className:"text-left pt-8 border-t border-border",children:a.jsx("p",{className:"text-muted-foreground",children:"Crafted by Bardic (Jeremy) Noel, with gratitude to Biggie Boss and the Lorerim community"})})]})})}function jee(){const e=lt();return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:[a.jsx(qi,{className:"text-4xl font-bold text-skyrim-gold mb-2",children:"Page Not Found"}),a.jsx(ve,{className:"text-skyrim-gold/70 mb-6",children:"Sorry, the page you are looking for does not exist or is not ready yet."}),a.jsx(U,{variant:"default",onClick:()=>e("/"),children:"Return Home"})]})}const Nee=()=>a.jsxs(z5,{children:[a.jsx(bt,{path:"/",element:a.jsx(wee,{})}),a.jsxs(bt,{path:"/build",element:a.jsx(pO,{}),children:[a.jsx(bt,{index:!0,element:a.jsx(JJ,{})}),a.jsx(bt,{path:"race",element:a.jsx(cE,{})}),a.jsx(bt,{path:"birth-signs",element:a.jsx(CF,{})}),a.jsx(bt,{path:"traits",element:a.jsx(HJ,{})}),a.jsx(bt,{path:"religions",element:a.jsx(cY,{})}),a.jsx(bt,{path:"destiny",element:a.jsx(lY,{})}),a.jsx(bt,{path:"perks",element:a.jsx(yj,{})})]}),a.jsx(bt,{path:"/spells",element:a.jsx(BJ,{})}),a.jsx(bt,{path:"/cookbook",element:a.jsx(ZZ,{})}),a.jsx(bt,{path:"/search",element:a.jsx(tX,{})}),a.jsx(bt,{path:"/virtual-masonry-demo",element:a.jsx(sX,{})}),a.jsx(bt,{path:"/races-mva-demo",element:a.jsx(e9,{})}),a.jsx(bt,{path:"/skills-mva",element:a.jsx(yj,{})}),a.jsx(bt,{path:"/skills-experimental",element:a.jsx(yJ,{})}),a.jsx(bt,{path:"/equipment",element:a.jsx(tee,{})}),a.jsx(bt,{path:"/crafting",element:a.jsx(eee,{})}),a.jsx(bt,{path:"/enchantments",element:a.jsx(yee,{})}),a.jsx(bt,{path:"*",element:a.jsx(jee,{})})]});function See(){const{theme:e,setTheme:t}=VS(),n=()=>{t(e==="light"?"dark":e==="dark"?"system":"light")},s=()=>{switch(e){case"light":return a.jsx(Gy,{className:"h-4 w-4"});case"dark":return a.jsx(K3,{className:"h-4 w-4"});case"system":return a.jsx(X3,{className:"h-4 w-4"});default:return a.jsx(Gy,{className:"h-4 w-4"})}};return a.jsxs(U,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:n,title:`Current theme: ${e}. Click to cycle themes.`,children:[s(),a.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function kee({sidebarCollapsed:e,onToggleSidebar:t,isMobile:n=!1,MobileDrawerTrigger:s}){return a.jsxs("header",{className:"sticky top-0 w-full h-12 flex items-center bg-background border-b border-skyrim-gold/20 px-2 shadow-sm backdrop-blur-sm",style:{zIndex:Nt.HEADER,backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:[n&&s?a.jsx("div",{className:"mr-2",children:a.jsx(s,{})}):a.jsx("button",{onClick:t,"aria-label":e?"Open sidebar":"Close sidebar",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 mr-2",children:a.jsx(V3,{className:"w-5 h-5 text-skyrim-gold transition-transform duration-200 group-hover:rotate-12"})}),a.jsx("span",{className:"text-skyrim-gold font-bold text-base tracking-tight select-none",children:"Lorerim Arcaneum"}),a.jsx("span",{className:"ml-2 text-xs text-skyrim-gold/60 select-none",children:"Theorycrafting Hub"}),a.jsx("div",{className:"flex-1 max-w-md mx-4",children:a.jsx(JY,{placeholder:"Search skills, races, traits...",className:"w-full"})}),a.jsx("div",{className:"ml-auto",children:a.jsx(See,{})})]})}const d_=[{label:"Character Build",items:[{to:"/build",label:"Build"},{to:"/build/race",label:"Race"},{to:"/build/birth-signs",label:"Birth Signs"},{to:"/build/traits",label:"Traits"},{to:"/build/religions",label:"Religion"},{to:"/build/destiny",label:"Destiny"},{to:"/build/perks",label:"Skills and Perks"}]},{label:"Docs",items:[{to:"/spells",label:"Spells"},{to:"/cookbook",label:"Food and Alcohol"},{to:"/enchantments",label:"Enchantments"}]}];function Cee({onNavigate:e}){const t=lt(),n=window.location.hash.replace(/^#\/?/,"/"),s=(r,i)=>{const o=window.location.hash,[l,c]=o.split("?"),d=new URLSearchParams(c||"").get("b");t(d?`${r}?b=${d}`:r),e(i)};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-4 border-b border-skyrim-gold/20",children:a.jsxs("button",{onClick:()=>s("/",!0),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[a.jsx(w1,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),a.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:d_.map(r=>a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:r.label}),a.jsx("div",{className:"space-y-1",children:r.items.map(i=>{const o=n===i.to;return a.jsx("button",{onClick:()=>s(i.to,!0),className:`w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] active:scale-[0.98] cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 ${o?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent"}`,children:i.label},i.to)})})]},r.label))}),a.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[a.jsx(ve,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),a.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:"âš™ï¸ Settings"})]})]})}function Eee({collapsed:e,onNavigate:t}){const n=lt(),s=window.location.hash.replace(/^#\/?/,"/"),r=i=>{const o=window.location.hash,[l,c]=o.split("?"),d=new URLSearchParams(c||"").get("b");n(d?`${i}?b=${d}`:i)};return a.jsxs(wT,{collapsed:e,children:[a.jsx(ST,{children:!e&&a.jsxs("button",{onClick:()=>r("/"),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[a.jsx(w1,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),a.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),a.jsx(jT,{children:d_.map(i=>a.jsxs(NT,{children:[!e&&a.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:i.label}),a.jsx(kT,{children:i.items.map(o=>{const l=s===o.to;return a.jsx(ET,{children:a.jsx(CT,{asChild:!0,isActive:l,onClick:()=>r(o.to),tabIndex:0,children:a.jsx("span",{className:"w-full text-left truncate",children:o.label})})},o.to)})})]},i.label))}),!e&&a.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[a.jsx(ve,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),a.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:"âš™ï¸ Settings"})]}),a.jsx(AT,{})]})}function Aee({onNavigate:e}){const[t,n]=g.useState(!1),s=r=>{r&&n(!1)};return a.jsxs(is,{open:t,onOpenChange:n,children:[a.jsx(Va,{asChild:!0,children:a.jsx("button",{"aria-label":"Open navigation menu",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:a.jsx("svg",{className:"w-5 h-5 text-skyrim-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),a.jsx(Fn,{side:"left",className:"p-0 w-80",children:a.jsx("div",{className:"flex flex-col h-full",children:a.jsx(Cee,{onNavigate:s})})})]})}function Tee(){const[e,t]=g.useState(!0),[n,s]=g.useState(!1);return PZ(),g.useEffect(()=>{const r=()=>s(window.innerWidth<768);return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),a.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[a.jsx(kee,{sidebarCollapsed:e,onToggleSidebar:()=>t(r=>!r),isMobile:n,MobileDrawerTrigger:()=>a.jsx(Aee,{onNavigate:()=>{}})}),a.jsxs("div",{className:"flex flex-1",children:[!n&&a.jsx("div",{className:`transition-all duration-300 ease-in-out ${e?"w-0 overflow-hidden":"w-64"}`,style:{zIndex:Nt.SIDEBAR},children:a.jsx(Eee,{collapsed:e,onNavigate:r=>{r&&t(!0)}})}),a.jsx("main",{className:"flex-1 transition-all duration-300 ease-in-out min-w-0",children:a.jsx(Nee,{})})]}),a.jsx(DZ,{})]})}function _ee(){return a.jsx(iL,{children:a.jsx(BR,{children:a.jsx(Tee,{})})})}var f_={exports:{}},mh={},m_={exports:{}},h_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,O){var D=L.length;L.push(O);e:for(;0<D;){var M=D-1>>>1,I=L[M];if(0<r(I,O))L[M]=O,L[D]=I,D=M;else break e}}function n(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var O=L[0],D=L.pop();if(D!==O){L[0]=D;e:for(var M=0,I=L.length,B=I>>>1;M<B;){var H=2*(M+1)-1,q=L[H],Y=H+1,J=L[Y];if(0>r(q,D))Y<I&&0>r(J,q)?(L[M]=J,L[Y]=D,M=Y):(L[M]=q,L[H]=D,M=H);else if(Y<I&&0>r(J,D))L[M]=J,L[Y]=D,M=Y;else break e}}return O}function r(L,O){var D=L.sortIndex-O.sortIndex;return D!==0?D:L.id-O.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,h=!1,v=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function j(L){for(var O=n(u);O!==null;){if(O.callback===null)s(u);else if(O.startTime<=L)s(u),O.sortIndex=O.expirationTime,t(c,O);else break;O=n(u)}}function N(L){if(y=!1,j(L),!v)if(n(c)!==null)v=!0,A||(A=!0,z());else{var O=n(u);O!==null&&$(N,O.startTime-L)}}var A=!1,k=-1,C=5,S=-1;function E(){return w?!0:!(e.unstable_now()-S<C)}function T(){if(w=!1,A){var L=e.unstable_now();S=L;var O=!0;try{e:{v=!1,y&&(y=!1,p(k),k=-1),h=!0;var D=m;try{t:{for(j(L),f=n(c);f!==null&&!(f.expirationTime>L&&E());){var M=f.callback;if(typeof M=="function"){f.callback=null,m=f.priorityLevel;var I=M(f.expirationTime<=L);if(L=e.unstable_now(),typeof I=="function"){f.callback=I,j(L),O=!0;break t}f===n(c)&&s(c),j(L)}else s(c);f=n(c)}if(f!==null)O=!0;else{var B=n(u);B!==null&&$(N,B.startTime-L),O=!1}}break e}finally{f=null,m=D,h=!1}O=void 0}}finally{O?z():A=!1}}}var z;if(typeof b=="function")z=function(){b(T)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,_=R.port2;R.port1.onmessage=T,z=function(){_.postMessage(null)}}else z=function(){x(T,0)};function $(L,O){k=x(function(){L(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(L){switch(m){case 1:case 2:case 3:var O=3;break;default:O=m}var D=m;m=O;try{return L()}finally{m=D}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(L,O){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var D=m;m=L;try{return O()}finally{m=D}},e.unstable_scheduleCallback=function(L,O,D){var M=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?M+D:M):D=M,L){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=D+I,L={id:d++,callback:O,priorityLevel:L,startTime:D,expirationTime:I,sortIndex:-1},D>M?(L.sortIndex=D,t(u,L),n(c)===null&&L===n(u)&&(y?(p(k),k=-1):y=!0,$(N,D-M))):(L.sortIndex=I,t(c,L),v||h||(v=!0,A||(A=!0,z()))),L},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(L){var O=m;return function(){var D=m;m=O;try{return L.apply(this,arguments)}finally{m=D}}}})(h_);m_.exports=h_;var Mee=m_.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lt=Mee,g_=g,Ree=wm;function W(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function x_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Uj(e){if(Lu(e)!==e)throw Error(W(188))}function Dee(e){var t=e.alternate;if(!t){if(t=Lu(e),t===null)throw Error(W(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Uj(r),e;if(i===s)return Uj(r),t;i=i.sibling}throw Error(W(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==s)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?e:t}function v_(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v_(e),t!==null)return t;e=e.sibling}return null}var nt=Object.assign,Lee=Symbol.for("react.element"),kd=Symbol.for("react.transitional.element"),mc=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),y_=Symbol.for("react.strict_mode"),Jp=Symbol.for("react.profiler"),zee=Symbol.for("react.provider"),b_=Symbol.for("react.consumer"),jr=Symbol.for("react.context"),Bv=Symbol.for("react.forward_ref"),ex=Symbol.for("react.suspense"),tx=Symbol.for("react.suspense_list"),Fv=Symbol.for("react.memo"),ua=Symbol.for("react.lazy"),nx=Symbol.for("react.activity"),Pee=Symbol.for("react.memo_cache_sentinel"),Vj=Symbol.iterator;function tc(e){return e===null||typeof e!="object"?null:(e=Vj&&e[Vj]||e["@@iterator"],typeof e=="function"?e:null)}var $ee=Symbol.for("react.client.reference");function sx(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===$ee?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case No:return"Fragment";case Jp:return"Profiler";case y_:return"StrictMode";case ex:return"Suspense";case tx:return"SuspenseList";case nx:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case mc:return"Portal";case jr:return(e.displayName||"Context")+".Provider";case b_:return(e._context.displayName||"Context")+".Consumer";case Bv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fv:return t=e.displayName||null,t!==null?t:sx(e.type)||"Memo";case ua:t=e._payload,e=e._init;try{return sx(e(t))}catch{}}return null}var hc=Array.isArray,ge=g_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oe=Ree.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yi={pending:!1,data:null,method:null,action:null},rx=[],So=-1;function rr(e){return{current:e}}function Ft(e){0>So||(e.current=rx[So],rx[So]=null,So--)}function ot(e,t){So++,rx[So]=e.current,e.current=t}var Zs=rr(null),Jc=rr(null),Ea=rr(null),Bf=rr(null);function Ff(e,t){switch(ot(Ea,t),ot(Jc,e),ot(Zs,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?XN(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=XN(t),e=$4(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ft(Zs),ot(Zs,e)}function hl(){Ft(Zs),Ft(Jc),Ft(Ea)}function ax(e){e.memoizedState!==null&&ot(Bf,e);var t=Zs.current,n=$4(t,e.type);t!==n&&(ot(Jc,e),ot(Zs,n))}function Hf(e){Jc.current===e&&(Ft(Zs),Ft(Jc)),Bf.current===e&&(Ft(Bf),cu._currentValue=yi)}var ix=Object.prototype.hasOwnProperty,Hv=Lt.unstable_scheduleCallback,jg=Lt.unstable_cancelCallback,Oee=Lt.unstable_shouldYield,Iee=Lt.unstable_requestPaint,Ys=Lt.unstable_now,Bee=Lt.unstable_getCurrentPriorityLevel,w_=Lt.unstable_ImmediatePriority,j_=Lt.unstable_UserBlockingPriority,Uf=Lt.unstable_NormalPriority,Fee=Lt.unstable_LowPriority,N_=Lt.unstable_IdlePriority,Hee=Lt.log,Uee=Lt.unstable_setDisableYieldValue,zu=null,Pn=null;function ya(e){if(typeof Hee=="function"&&Uee(e),Pn&&typeof Pn.setStrictMode=="function")try{Pn.setStrictMode(zu,e)}catch{}}var $n=Math.clz32?Math.clz32:qee,Vee=Math.log,Gee=Math.LN2;function qee(e){return e>>>=0,e===0?32:31-(Vee(e)/Gee|0)|0}var Cd=256,Ed=4194304;function oi(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function hh(e,t,n){var s=e.pendingLanes;if(s===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var l=s&134217727;return l!==0?(s=l&~i,s!==0?r=oi(s):(o&=l,o!==0?r=oi(o):n||(n=l&~e,n!==0&&(r=oi(n))))):(l=s&~i,l!==0?r=oi(l):o!==0?r=oi(o):n||(n=s&~e,n!==0&&(r=oi(n)))),r===0?0:t!==0&&t!==r&&!(t&i)&&(i=r&-r,n=t&-t,i>=n||i===32&&(n&4194048)!==0)?t:r}function Pu(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Zee(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S_(){var e=Cd;return Cd<<=1,!(Cd&4194048)&&(Cd=256),e}function k_(){var e=Ed;return Ed<<=1,!(Ed&62914560)&&(Ed=4194304),e}function Ng(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $u(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Yee(e,t,n,s,r,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var d=31-$n(n),f=1<<d;l[d]=0,c[d]=-1;var m=u[d];if(m!==null)for(u[d]=null,d=0;d<m.length;d++){var h=m[d];h!==null&&(h.lane&=-536870913)}n&=~f}s!==0&&C_(e,s,0),i!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=i&~(o&~t))}function C_(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-$n(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194090}function E_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-$n(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}function Uv(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Vv(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function A_(){var e=Oe.p;return e!==0?e:(e=window.event,e===void 0?32:Z4(e.type))}function Xee(e,t){var n=Oe.p;try{return Oe.p=e,t()}finally{Oe.p=n}}var Qa=Math.random().toString(36).slice(2),tn="__reactFiber$"+Qa,jn="__reactProps$"+Qa,Il="__reactContainer$"+Qa,ox="__reactEvents$"+Qa,Wee="__reactListeners$"+Qa,Kee="__reactHandles$"+Qa,Gj="__reactResources$"+Qa,Ou="__reactMarker$"+Qa;function Gv(e){delete e[tn],delete e[jn],delete e[ox],delete e[Wee],delete e[Kee]}function ko(e){var t=e[tn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Il]||n[tn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=QN(e);e!==null;){if(n=e[tn])return n;e=QN(e)}return t}e=n,n=e.parentNode}return null}function Bl(e){if(e=e[tn]||e[Il]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function gc(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(W(33))}function Uo(e){var t=e[Gj];return t||(t=e[Gj]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ot(e){e[Ou]=!0}var T_=new Set,__={};function eo(e,t){gl(e,t),gl(e+"Capture",t)}function gl(e,t){for(__[e]=t,e=0;e<t.length;e++)T_.add(t[e])}var Qee=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qj={},Zj={};function Jee(e){return ix.call(Zj,e)?!0:ix.call(qj,e)?!1:Qee.test(e)?Zj[e]=!0:(qj[e]=!0,!1)}function Kd(e,t,n){if(Jee(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ad(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function hr(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}var Sg,Yj;function vo(e){if(Sg===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sg=t&&t[1]||"",Yj=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sg+e+Yj}var kg=!1;function Cg(e,t){if(!e||kg)return"";kg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(h){var m=h}Reflect.construct(e,[],f)}else{try{f.call()}catch(h){m=h}e.call(f.prototype)}}else{try{throw Error()}catch(h){m=h}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),o=i[0],l=i[1];if(o&&l){var c=o.split(`
`),u=l.split(`
`);for(r=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(s===c.length||r===u.length)for(s=c.length-1,r=u.length-1;1<=s&&0<=r&&c[s]!==u[r];)r--;for(;1<=s&&0<=r;s--,r--)if(c[s]!==u[r]){if(s!==1||r!==1)do if(s--,r--,0>r||c[s]!==u[r]){var d=`
`+c[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=s&&0<=r);break}}}finally{kg=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?vo(n):""}function ete(e){switch(e.tag){case 26:case 27:case 5:return vo(e.type);case 16:return vo("Lazy");case 13:return vo("Suspense");case 19:return vo("SuspenseList");case 0:case 15:return Cg(e.type,!1);case 11:return Cg(e.type.render,!1);case 1:return Cg(e.type,!0);case 31:return vo("Activity");default:return""}}function Xj(e){try{var t="";do t+=ete(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Yn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function M_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tte(e){var t=M_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vf(e){e._valueTracker||(e._valueTracker=tte(e))}function R_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=M_(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Gf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var nte=/[\n"\\]/g;function Qn(e){return e.replace(nte,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function lx(e,t,n,s,r,i,o,l){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Yn(t)):e.value!==""+Yn(t)&&(e.value=""+Yn(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?cx(e,o,Yn(t)):n!=null?cx(e,o,Yn(n)):s!=null&&e.removeAttribute("value"),r==null&&i!=null&&(e.defaultChecked=!!i),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Yn(l):e.removeAttribute("name")}function D_(e,t,n,s,r,i,o,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||t!=null))return;n=n!=null?""+Yn(n):"",t=t!=null?""+Yn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function cx(e,t,n){t==="number"&&Gf(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Vo(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Yn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function L_(e,t,n){if(t!=null&&(t=""+Yn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Yn(n):""}function z_(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(W(92));if(hc(s)){if(1<s.length)throw Error(W(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=Yn(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function pl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ste=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wj(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||ste.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function P_(e,t,n){if(t!=null&&typeof t!="object")throw Error(W(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&n[r]!==s&&Wj(e,r,s)}else for(var i in t)t.hasOwnProperty(i)&&Wj(e,i,t[i])}function qv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rte=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ate=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qd(e){return ate.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ux=null;function Zv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Co=null,Go=null;function Kj(e){var t=Bl(e);if(t&&(e=t.stateNode)){var n=e[jn]||null;e:switch(e=t.stateNode,t.type){case"input":if(lx(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Qn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=s[jn]||null;if(!r)throw Error(W(90));lx(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&R_(s)}break e;case"textarea":L_(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Vo(e,!!n.multiple,t,!1)}}}var Eg=!1;function $_(e,t,n){if(Eg)return e(t,n);Eg=!0;try{var s=e(t);return s}finally{if(Eg=!1,(Co!==null||Go!==null)&&(Sh(),Co&&(t=Co,e=Go,Go=Co=null,Kj(t),e)))for(t=0;t<e.length;t++)Kj(e[t])}}function eu(e,t){var n=e.stateNode;if(n===null)return null;var s=n[jn]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(W(231,t,typeof n));return n}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dx=!1;if(Fr)try{var nc={};Object.defineProperty(nc,"passive",{get:function(){dx=!0}}),window.addEventListener("test",nc,nc),window.removeEventListener("test",nc,nc)}catch{dx=!1}var ba=null,Yv=null,Jd=null;function O_(){if(Jd)return Jd;var e,t=Yv,n=t.length,s,r="value"in ba?ba.value:ba.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===r[i-s];s++);return Jd=r.slice(e,1<s?1-s:void 0)}function ef(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Td(){return!0}function Qj(){return!1}function Cn(e){function t(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Td:Qj,this.isPropagationStopped=Qj,this}return nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Td)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Td)},persist:function(){},isPersistent:Td}),t}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gh=Cn(to),Iu=nt({},to,{view:0,detail:0}),ite=Cn(Iu),Ag,Tg,sc,ph=nt({},Iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sc&&(sc&&e.type==="mousemove"?(Ag=e.screenX-sc.screenX,Tg=e.screenY-sc.screenY):Tg=Ag=0,sc=e),Ag)},movementY:function(e){return"movementY"in e?e.movementY:Tg}}),Jj=Cn(ph),ote=nt({},ph,{dataTransfer:0}),lte=Cn(ote),cte=nt({},Iu,{relatedTarget:0}),_g=Cn(cte),ute=nt({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),dte=Cn(ute),fte=nt({},to,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mte=Cn(fte),hte=nt({},to,{data:0}),eN=Cn(hte),gte={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pte={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xte={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vte(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xte[e])?!!t[e]:!1}function Xv(){return vte}var yte=nt({},Iu,{key:function(e){if(e.key){var t=gte[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ef(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pte[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xv,charCode:function(e){return e.type==="keypress"?ef(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ef(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bte=Cn(yte),wte=nt({},ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tN=Cn(wte),jte=nt({},Iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xv}),Nte=Cn(jte),Ste=nt({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),kte=Cn(Ste),Cte=nt({},ph,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ete=Cn(Cte),Ate=nt({},to,{newState:0,oldState:0}),Tte=Cn(Ate),_te=[9,13,27,32],Wv=Fr&&"CompositionEvent"in window,yc=null;Fr&&"documentMode"in document&&(yc=document.documentMode);var Mte=Fr&&"TextEvent"in window&&!yc,I_=Fr&&(!Wv||yc&&8<yc&&11>=yc),nN=" ",sN=!1;function B_(e,t){switch(e){case"keyup":return _te.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Eo=!1;function Rte(e,t){switch(e){case"compositionend":return F_(t);case"keypress":return t.which!==32?null:(sN=!0,nN);case"textInput":return e=t.data,e===nN&&sN?null:e;default:return null}}function Dte(e,t){if(Eo)return e==="compositionend"||!Wv&&B_(e,t)?(e=O_(),Jd=Yv=ba=null,Eo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return I_&&t.locale!=="ko"?null:t.data;default:return null}}var Lte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lte[e.type]:t==="textarea"}function H_(e,t,n,s){Co?Go?Go.push(s):Go=[s]:Co=s,t=cm(t,"onChange"),0<t.length&&(n=new gh("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var bc=null,tu=null;function zte(e){L4(e,0)}function xh(e){var t=gc(e);if(R_(t))return e}function aN(e,t){if(e==="change")return t}var U_=!1;if(Fr){var Mg;if(Fr){var Rg="oninput"in document;if(!Rg){var iN=document.createElement("div");iN.setAttribute("oninput","return;"),Rg=typeof iN.oninput=="function"}Mg=Rg}else Mg=!1;U_=Mg&&(!document.documentMode||9<document.documentMode)}function oN(){bc&&(bc.detachEvent("onpropertychange",V_),tu=bc=null)}function V_(e){if(e.propertyName==="value"&&xh(tu)){var t=[];H_(t,tu,e,Zv(e)),$_(zte,t)}}function Pte(e,t,n){e==="focusin"?(oN(),bc=t,tu=n,bc.attachEvent("onpropertychange",V_)):e==="focusout"&&oN()}function $te(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xh(tu)}function Ote(e,t){if(e==="click")return xh(t)}function Ite(e,t){if(e==="input"||e==="change")return xh(t)}function Bte(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Un=typeof Object.is=="function"?Object.is:Bte;function nu(e,t){if(Un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!ix.call(t,r)||!Un(e[r],t[r]))return!1}return!0}function lN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cN(e,t){var n=lN(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lN(n)}}function G_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?G_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function q_(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Gf(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gf(e.document)}return t}function Kv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Fte=Fr&&"documentMode"in document&&11>=document.documentMode,Ao=null,fx=null,wc=null,mx=!1;function uN(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mx||Ao==null||Ao!==Gf(s)||(s=Ao,"selectionStart"in s&&Kv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),wc&&nu(wc,s)||(wc=s,s=cm(fx,"onSelect"),0<s.length&&(t=new gh("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ao)))}function ai(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var To={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionrun:ai("Transition","TransitionRun"),transitionstart:ai("Transition","TransitionStart"),transitioncancel:ai("Transition","TransitionCancel"),transitionend:ai("Transition","TransitionEnd")},Dg={},Z_={};Fr&&(Z_=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function no(e){if(Dg[e])return Dg[e];if(!To[e])return e;var t=To[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Z_)return Dg[e]=t[n];return e}var Y_=no("animationend"),X_=no("animationiteration"),W_=no("animationstart"),Hte=no("transitionrun"),Ute=no("transitionstart"),Vte=no("transitioncancel"),K_=no("transitionend"),Q_=new Map,hx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hx.push("scrollEnd");function Ms(e,t){Q_.set(e,t),eo(t,[e])}var dN=new WeakMap;function Jn(e,t){if(typeof e=="object"&&e!==null){var n=dN.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Xj(t)},dN.set(e,t),t)}return{value:e,source:t,stack:Xj(t)}}var Zn=[],_o=0,Qv=0;function vh(){for(var e=_o,t=Qv=_o=0;t<e;){var n=Zn[t];Zn[t++]=null;var s=Zn[t];Zn[t++]=null;var r=Zn[t];Zn[t++]=null;var i=Zn[t];if(Zn[t++]=null,s!==null&&r!==null){var o=s.pending;o===null?r.next=r:(r.next=o.next,o.next=r),s.pending=r}i!==0&&J_(n,r,i)}}function yh(e,t,n,s){Zn[_o++]=e,Zn[_o++]=t,Zn[_o++]=n,Zn[_o++]=s,Qv|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Jv(e,t,n,s){return yh(e,t,n,s),qf(e)}function Fl(e,t){return yh(e,null,null,t),qf(e)}function J_(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var r=!1,i=e.return;i!==null;)i.childLanes|=n,s=i.alternate,s!==null&&(s.childLanes|=n),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(r=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,r&&t!==null&&(r=31-$n(n),e=i.hiddenUpdates,s=e[r],s===null?e[r]=[t]:s.push(t),t.lane=n|536870912),i):null}function qf(e){if(50<Mc)throw Mc=0,zx=null,Error(W(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Mo={};function Gte(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(e,t,n,s){return new Gte(e,t,n,s)}function ey(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mr(e,t){var n=e.alternate;return n===null?(n=Ln(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function eM(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function tf(e,t,n,s,r,i){var o=0;if(s=e,typeof e=="function")ey(e)&&(o=1);else if(typeof e=="string")o=Zne(e,n,Zs.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case nx:return e=Ln(31,n,t,r),e.elementType=nx,e.lanes=i,e;case No:return bi(n.children,r,i,t);case y_:o=8,r|=24;break;case Jp:return e=Ln(12,n,t,r|2),e.elementType=Jp,e.lanes=i,e;case ex:return e=Ln(13,n,t,r),e.elementType=ex,e.lanes=i,e;case tx:return e=Ln(19,n,t,r),e.elementType=tx,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zee:case jr:o=10;break e;case b_:o=9;break e;case Bv:o=11;break e;case Fv:o=14;break e;case ua:o=16,s=null;break e}o=29,n=Error(W(130,e===null?"null":typeof e,"")),s=null}return t=Ln(o,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function bi(e,t,n,s){return e=Ln(7,e,s,t),e.lanes=n,e}function Lg(e,t,n){return e=Ln(6,e,null,t),e.lanes=n,e}function zg(e,t,n){return t=Ln(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ro=[],Do=0,Zf=null,Yf=0,Xn=[],Wn=0,wi=null,Nr=1,Sr="";function li(e,t){Ro[Do++]=Yf,Ro[Do++]=Zf,Zf=e,Yf=t}function tM(e,t,n){Xn[Wn++]=Nr,Xn[Wn++]=Sr,Xn[Wn++]=wi,wi=e;var s=Nr;e=Sr;var r=32-$n(s)-1;s&=~(1<<r),n+=1;var i=32-$n(t)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,Nr=1<<32-$n(t)+r|n<<r|s,Sr=i+e}else Nr=1<<i|n<<r|s,Sr=e}function ty(e){e.return!==null&&(li(e,1),tM(e,1,0))}function ny(e){for(;e===Zf;)Zf=Ro[--Do],Ro[Do]=null,Yf=Ro[--Do],Ro[Do]=null;for(;e===wi;)wi=Xn[--Wn],Xn[Wn]=null,Sr=Xn[--Wn],Xn[Wn]=null,Nr=Xn[--Wn],Xn[Wn]=null}var an=null,gt=null,$e=!1,ji=null,Bs=!1,gx=Error(W(519));function $i(e){var t=Error(W(418,""));throw su(Jn(t,e)),gx}function fN(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[tn]=e,t[jn]=s,n){case"dialog":Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":case"embed":Ae("load",t);break;case"video":case"audio":for(n=0;n<iu.length;n++)Ae(iu[n],t);break;case"source":Ae("error",t);break;case"img":case"image":case"link":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"input":Ae("invalid",t),D_(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),Vf(t);break;case"select":Ae("invalid",t);break;case"textarea":Ae("invalid",t),z_(t,s.value,s.defaultValue,s.children),Vf(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||P4(t.textContent,n)?(s.popover!=null&&(Ae("beforetoggle",t),Ae("toggle",t)),s.onScroll!=null&&Ae("scroll",t),s.onScrollEnd!=null&&Ae("scrollend",t),s.onClick!=null&&(t.onclick=Eh),t=!0):t=!1,t||$i(e)}function mN(e){for(an=e.return;an;)switch(an.tag){case 5:case 13:Bs=!1;return;case 27:case 3:Bs=!0;return;default:an=an.return}}function rc(e){if(e!==an)return!1;if(!$e)return mN(e),$e=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Fx(e.type,e.memoizedProps)),n=!n),n&&gt&&$i(e),mN(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){gt=Ss(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}gt=null}}else t===27?(t=gt,Ja(e.type)?(e=Vx,Vx=null,gt=e):gt=t):gt=an?Ss(e.stateNode.nextSibling):null;return!0}function Bu(){gt=an=null,$e=!1}function hN(){var e=ji;return e!==null&&(yn===null?yn=e:yn.push.apply(yn,e),ji=null),e}function su(e){ji===null?ji=[e]:ji.push(e)}var px=rr(null),so=null,kr=null;function ma(e,t,n){ot(px,t._currentValue),t._currentValue=n}function Rr(e){e._currentValue=px.current,Ft(px)}function xx(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function vx(e,t,n,s){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var i=r.dependencies;if(i!==null){var o=r.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),xx(i.return,n,e),s||(o=null);break e}i=l.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(W(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),xx(o,n,e),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function Fu(e,t,n,s){e=null;for(var r=t,i=!1;r!==null;){if(!i){if(r.flags&524288)i=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(W(387));if(o=o.memoizedProps,o!==null){var l=r.type;Un(r.pendingProps.value,o.value)||(e!==null?e.push(l):e=[l])}}else if(r===Bf.current){if(o=r.alternate,o===null)throw Error(W(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(cu):e=[cu])}r=r.return}e!==null&&vx(t,e,n,s),t.flags|=262144}function Xf(e){for(e=e.firstContext;e!==null;){if(!Un(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Oi(e){so=e,kr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function nn(e){return nM(so,e)}function _d(e,t){return so===null&&Oi(e),nM(e,t)}function nM(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},kr===null){if(e===null)throw Error(W(308));kr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else kr=kr.next=t;return n}var qte=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Zte=Lt.unstable_scheduleCallback,Yte=Lt.unstable_NormalPriority,Mt={$$typeof:jr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sy(){return{controller:new qte,data:new Map,refCount:0}}function Hu(e){e.refCount--,e.refCount===0&&Zte(Yte,function(){e.controller.abort()})}var jc=null,yx=0,xl=0,qo=null;function Xte(e,t){if(jc===null){var n=jc=[];yx=0,xl=Cy(),qo={status:"pending",value:void 0,then:function(s){n.push(s)}}}return yx++,t.then(gN,gN),t}function gN(){if(--yx===0&&jc!==null){qo!==null&&(qo.status="fulfilled");var e=jc;jc=null,xl=0,qo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Wte(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var pN=ge.S;ge.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Xte(e,t),pN!==null&&pN(e,t)};var Ni=rr(null);function ry(){var e=Ni.current;return e!==null?e:Qe.pooledCache}function nf(e,t){t===null?ot(Ni,Ni.current):ot(Ni,t.pool)}function sM(){var e=ry();return e===null?null:{parent:Mt._currentValue,pool:e}}var Uu=Error(W(460)),rM=Error(W(474)),bh=Error(W(542)),bx={then:function(){}};function xN(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Md(){}function aM(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Md,Md),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yN(e),e;default:if(typeof t.status=="string")t.then(Md,Md);else{if(e=Qe,e!==null&&100<e.shellSuspendCounter)throw Error(W(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=s}},function(s){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yN(e),e}throw Nc=t,Uu}}var Nc=null;function vN(){if(Nc===null)throw Error(W(459));var e=Nc;return Nc=null,e}function yN(e){if(e===Uu||e===bh)throw Error(W(483))}var da=!1;function ay(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ta(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ue&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=qf(e),J_(e,null,n),t}return yh(e,s,t,n),qf(e)}function Sc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,E_(e,n)}}function Pg(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var jx=!1;function kc(){if(jx){var e=qo;if(e!==null)throw e}}function Cc(e,t,n,s){jx=!1;var r=e.updateQueue;da=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane&-536870913,h=m!==l.lane;if(h?(ze&m)===m:(s&m)===m){m!==0&&m===xl&&(jx=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var v=e,y=l;m=t;var w=n;switch(y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(w,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,m=typeof v=="function"?v.call(w,f,m):v,m==null)break e;f=nt({},f,m);break e;case 2:da=!0}}m=l.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[m]:h.push(m))}else h={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);d===null&&(c=f),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,i===null&&(r.shared.lanes=0),Ia|=o,e.lanes=o,e.memoizedState=f}}function iM(e,t){if(typeof e!="function")throw Error(W(191,e));e.call(t)}function oM(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)iM(n[e],t)}var vl=rr(null),Wf=rr(0);function bN(e,t){e=Vr,ot(Wf,e),ot(vl,t),Vr=e|t.baseLanes}function Nx(){ot(Wf,Vr),ot(vl,vl.current)}function iy(){Vr=Wf.current,Ft(vl),Ft(Wf)}var $a=0,Ce=null,Ge=null,kt=null,Kf=!1,Zo=!1,Ii=!1,Qf=0,ru=0,Yo=null,Kte=0;function yt(){throw Error(W(321))}function oy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Un(e[n],t[n]))return!1;return!0}function ly(e,t,n,s,r,i){return $a=i,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ge.H=e===null||e.memoizedState===null?OM:IM,Ii=!1,i=n(s,r),Ii=!1,Zo&&(i=cM(t,n,s,r)),lM(e),i}function lM(e){ge.H=Jf;var t=Ge!==null&&Ge.next!==null;if($a=0,kt=Ge=Ce=null,Kf=!1,ru=0,Yo=null,t)throw Error(W(300));e===null||Bt||(e=e.dependencies,e!==null&&Xf(e)&&(Bt=!0))}function cM(e,t,n,s){Ce=e;var r=0;do{if(Zo&&(Yo=null),ru=0,Zo=!1,25<=r)throw Error(W(301));if(r+=1,kt=Ge=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}ge.H=rne,i=t(n,s)}while(Zo);return i}function Qte(){var e=ge.H,t=e.useState()[0];return t=typeof t.then=="function"?Vu(t):t,e=e.useState()[0],(Ge!==null?Ge.memoizedState:null)!==e&&(Ce.flags|=1024),t}function cy(){var e=Qf!==0;return Qf=0,e}function uy(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function dy(e){if(Kf){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Kf=!1}$a=0,kt=Ge=Ce=null,Zo=!1,ru=Qf=0,Yo=null}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Ce.memoizedState=kt=e:kt=kt.next=e,kt}function Ct(){if(Ge===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=kt===null?Ce.memoizedState:kt.next;if(t!==null)kt=t,Ge=e;else{if(e===null)throw Ce.alternate===null?Error(W(467)):Error(W(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},kt===null?Ce.memoizedState=kt=e:kt=kt.next=e}return kt}function fy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vu(e){var t=ru;return ru+=1,Yo===null&&(Yo=[]),e=aM(Yo,e,t),t=Ce,(kt===null?t.memoizedState:kt.next)===null&&(t=t.alternate,ge.H=t===null||t.memoizedState===null?OM:IM),e}function wh(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Vu(e);if(e.$$typeof===jr)return nn(e)}throw Error(W(438,String(e)))}function my(e){var t=null,n=Ce.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=Ce.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=fy(),Ce.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=Pee;return t.index++,n}function Hr(e,t){return typeof t=="function"?t(e):t}function sf(e){var t=Ct();return hy(t,Ge,e)}function hy(e,t,n){var s=e.queue;if(s===null)throw Error(W(311));s.lastRenderedReducer=n;var r=e.baseQueue,i=s.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}t.baseQueue=r=i,s.pending=null}if(i=e.baseState,r===null)e.memoizedState=i;else{t=r.next;var l=o=null,c=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(ze&f)===f:($a&f)===f){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===xl&&(d=!0);else if(($a&m)===m){u=u.next,m===xl&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=f,o=i):c=c.next=f,Ce.lanes|=m,Ia|=m;f=u.action,Ii&&n(i,f),i=u.hasEagerState?u.eagerState:n(i,f)}else m={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=m,o=i):c=c.next=m,Ce.lanes|=f,Ia|=f;u=u.next}while(u!==null&&u!==t);if(c===null?o=i:c.next=l,!Un(i,e.memoizedState)&&(Bt=!0,d&&(n=qo,n!==null)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,s.lastRenderedState=i}return r===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function $g(e){var t=Ct(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=e(i,o.action),o=o.next;while(o!==r);Un(i,t.memoizedState)||(Bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function uM(e,t,n){var s=Ce,r=Ct(),i=$e;if(i){if(n===void 0)throw Error(W(407));n=n()}else n=t();var o=!Un((Ge||r).memoizedState,n);o&&(r.memoizedState=n,Bt=!0),r=r.queue;var l=mM.bind(null,s,r,e);if(Gu(2048,8,l,[e]),r.getSnapshot!==t||o||kt!==null&&kt.memoizedState.tag&1){if(s.flags|=2048,yl(9,jh(),fM.bind(null,s,r,n,t),null),Qe===null)throw Error(W(349));i||$a&124||dM(s,t,n)}return n}function dM(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ce.updateQueue,t===null?(t=fy(),Ce.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function fM(e,t,n,s){t.value=n,t.getSnapshot=s,hM(t)&&gM(e)}function mM(e,t,n){return n(function(){hM(t)&&gM(e)})}function hM(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Un(e,n)}catch{return!0}}function gM(e){var t=Fl(e,2);t!==null&&In(t,e,2)}function Sx(e){var t=xn();if(typeof e=="function"){var n=e;if(e=n(),Ii){ya(!0);try{n()}finally{ya(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:e},t}function pM(e,t,n,s){return e.baseState=n,hy(e,Ge,typeof s=="function"?s:Hr)}function Jte(e,t,n,s,r){if(Nh(e))throw Error(W(485));if(e=t.action,e!==null){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){i.listeners.push(o)}};ge.T!==null?n(!0):i.isTransition=!1,s(i),n=t.pending,n===null?(i.next=t.pending=i,xM(t,i)):(i.next=n.next,t.pending=n.next=i)}}function xM(e,t){var n=t.action,s=t.payload,r=e.state;if(t.isTransition){var i=ge.T,o={};ge.T=o;try{var l=n(r,s),c=ge.S;c!==null&&c(o,l),wN(e,t,l)}catch(u){kx(e,t,u)}finally{ge.T=i}}else try{i=n(r,s),wN(e,t,i)}catch(u){kx(e,t,u)}}function wN(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){jN(e,t,s)},function(s){return kx(e,t,s)}):jN(e,t,n)}function jN(e,t,n){t.status="fulfilled",t.value=n,vM(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,xM(e,n)))}function kx(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,vM(t),t=t.next;while(t!==s)}e.action=null}function vM(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function yM(e,t){return t}function NN(e,t){if($e){var n=Qe.formState;if(n!==null){e:{var s=Ce;if($e){if(gt){t:{for(var r=gt,i=Bs;r.nodeType!==8;){if(!i){r=null;break t}if(r=Ss(r.nextSibling),r===null){r=null;break t}}i=r.data,r=i==="F!"||i==="F"?r:null}if(r){gt=Ss(r.nextSibling),s=r.data==="F!";break e}}$i(s)}s=!1}s&&(t=n[0])}}return n=xn(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yM,lastRenderedState:t},n.queue=s,n=zM.bind(null,Ce,s),s.dispatch=n,s=Sx(!1),i=vy.bind(null,Ce,!1,s.queue),s=xn(),r={state:t,dispatch:null,action:e,pending:null},s.queue=r,n=Jte.bind(null,Ce,r,i,n),r.dispatch=n,s.memoizedState=e,[t,n,!1]}function SN(e){var t=Ct();return bM(t,Ge,e)}function bM(e,t,n){if(t=hy(e,t,yM)[0],e=sf(Hr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Vu(t)}catch(o){throw o===Uu?bh:o}else s=t;t=Ct();var r=t.queue,i=r.dispatch;return n!==t.memoizedState&&(Ce.flags|=2048,yl(9,jh(),ene.bind(null,r,n),null)),[s,i,e]}function ene(e,t){e.action=t}function kN(e){var t=Ct(),n=Ge;if(n!==null)return bM(t,n,e);Ct(),t=t.memoizedState,n=Ct();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function yl(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},t=Ce.updateQueue,t===null&&(t=fy(),Ce.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function jh(){return{destroy:void 0,resource:void 0}}function wM(){return Ct().memoizedState}function rf(e,t,n,s){var r=xn();s=s===void 0?null:s,Ce.flags|=e,r.memoizedState=yl(1|t,jh(),n,s)}function Gu(e,t,n,s){var r=Ct();s=s===void 0?null:s;var i=r.memoizedState.inst;Ge!==null&&s!==null&&oy(s,Ge.memoizedState.deps)?r.memoizedState=yl(t,i,n,s):(Ce.flags|=e,r.memoizedState=yl(1|t,i,n,s))}function CN(e,t){rf(8390656,8,e,t)}function jM(e,t){Gu(2048,8,e,t)}function NM(e,t){return Gu(4,2,e,t)}function SM(e,t){return Gu(4,4,e,t)}function kM(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function CM(e,t,n){n=n!=null?n.concat([e]):null,Gu(4,4,kM.bind(null,t,e),n)}function gy(){}function EM(e,t){var n=Ct();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&oy(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function AM(e,t){var n=Ct();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&oy(t,s[1]))return s[0];if(s=e(),Ii){ya(!0);try{e()}finally{ya(!1)}}return n.memoizedState=[s,t],s}function py(e,t,n){return n===void 0||$a&1073741824?e.memoizedState=t:(e.memoizedState=n,e=v4(),Ce.lanes|=e,Ia|=e,n)}function TM(e,t,n,s){return Un(n,t)?n:vl.current!==null?(e=py(e,n,s),Un(e,t)||(Bt=!0),e):$a&42?(e=v4(),Ce.lanes|=e,Ia|=e,t):(Bt=!0,e.memoizedState=n)}function _M(e,t,n,s,r){var i=Oe.p;Oe.p=i!==0&&8>i?i:8;var o=ge.T,l={};ge.T=l,vy(e,!1,t,n);try{var c=r(),u=ge.S;if(u!==null&&u(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=Wte(c,s);Ec(e,t,d,On(e))}else Ec(e,t,s,On(e))}catch(f){Ec(e,t,{then:function(){},status:"rejected",reason:f},On())}finally{Oe.p=i,ge.T=o}}function tne(){}function Cx(e,t,n,s){if(e.tag!==5)throw Error(W(476));var r=MM(e).queue;_M(e,r,t,yi,n===null?tne:function(){return RM(e),n(s)})}function MM(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:yi,baseState:yi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:yi},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function RM(e){var t=MM(e).next.queue;Ec(e,t,{},On())}function xy(){return nn(cu)}function DM(){return Ct().memoizedState}function LM(){return Ct().memoizedState}function nne(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=On();e=Aa(n);var s=Ta(t,e,n);s!==null&&(In(s,t,n),Sc(s,t,n)),t={cache:sy()},e.payload=t;return}t=t.return}}function sne(e,t,n){var s=On();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Nh(e)?PM(t,n):(n=Jv(e,t,n,s),n!==null&&(In(n,e,s),$M(n,t,s)))}function zM(e,t,n){var s=On();Ec(e,t,n,s)}function Ec(e,t,n,s){var r={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Nh(e))PM(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(r.hasEagerState=!0,r.eagerState=l,Un(l,o))return yh(e,t,r,0),Qe===null&&vh(),!1}catch{}finally{}if(n=Jv(e,t,r,s),n!==null)return In(n,e,s),$M(n,t,s),!0}return!1}function vy(e,t,n,s){if(s={lane:2,revertLane:Cy(),action:s,hasEagerState:!1,eagerState:null,next:null},Nh(e)){if(t)throw Error(W(479))}else t=Jv(e,n,s,2),t!==null&&In(t,e,2)}function Nh(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function PM(e,t){Zo=Kf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $M(e,t,n){if(n&4194048){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,E_(e,n)}}var Jf={readContext:nn,use:wh,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt},OM={readContext:nn,use:wh,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:nn,useEffect:CN,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,rf(4194308,4,kM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rf(4194308,4,e,t)},useInsertionEffect:function(e,t){rf(4,2,e,t)},useMemo:function(e,t){var n=xn();t=t===void 0?null:t;var s=e();if(Ii){ya(!0);try{e()}finally{ya(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=xn();if(n!==void 0){var r=n(t);if(Ii){ya(!0);try{n(t)}finally{ya(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=sne.bind(null,Ce,e),[s.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:function(e){e=Sx(e);var t=e.queue,n=zM.bind(null,Ce,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:gy,useDeferredValue:function(e,t){var n=xn();return py(n,e,t)},useTransition:function(){var e=Sx(!1);return e=_M.bind(null,Ce,e.queue,!0,!1),xn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=Ce,r=xn();if($e){if(n===void 0)throw Error(W(407));n=n()}else{if(n=t(),Qe===null)throw Error(W(349));ze&124||dM(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,CN(mM.bind(null,s,i,e),[e]),s.flags|=2048,yl(9,jh(),fM.bind(null,s,i,n,t),null),n},useId:function(){var e=xn(),t=Qe.identifierPrefix;if($e){var n=Sr,s=Nr;n=(s&~(1<<32-$n(s)-1)).toString(32)+n,t="Â«"+t+"R"+n,n=Qf++,0<n&&(t+="H"+n.toString(32)),t+="Â»"}else n=Kte++,t="Â«"+t+"r"+n.toString(32)+"Â»";return e.memoizedState=t},useHostTransitionStatus:xy,useFormState:NN,useActionState:NN,useOptimistic:function(e){var t=xn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=vy.bind(null,Ce,!0,n),n.dispatch=t,[e,t]},useMemoCache:my,useCacheRefresh:function(){return xn().memoizedState=nne.bind(null,Ce)}},IM={readContext:nn,use:wh,useCallback:EM,useContext:nn,useEffect:jM,useImperativeHandle:CM,useInsertionEffect:NM,useLayoutEffect:SM,useMemo:AM,useReducer:sf,useRef:wM,useState:function(){return sf(Hr)},useDebugValue:gy,useDeferredValue:function(e,t){var n=Ct();return TM(n,Ge.memoizedState,e,t)},useTransition:function(){var e=sf(Hr)[0],t=Ct().memoizedState;return[typeof e=="boolean"?e:Vu(e),t]},useSyncExternalStore:uM,useId:DM,useHostTransitionStatus:xy,useFormState:SN,useActionState:SN,useOptimistic:function(e,t){var n=Ct();return pM(n,Ge,e,t)},useMemoCache:my,useCacheRefresh:LM},rne={readContext:nn,use:wh,useCallback:EM,useContext:nn,useEffect:jM,useImperativeHandle:CM,useInsertionEffect:NM,useLayoutEffect:SM,useMemo:AM,useReducer:$g,useRef:wM,useState:function(){return $g(Hr)},useDebugValue:gy,useDeferredValue:function(e,t){var n=Ct();return Ge===null?py(n,e,t):TM(n,Ge.memoizedState,e,t)},useTransition:function(){var e=$g(Hr)[0],t=Ct().memoizedState;return[typeof e=="boolean"?e:Vu(e),t]},useSyncExternalStore:uM,useId:DM,useHostTransitionStatus:xy,useFormState:kN,useActionState:kN,useOptimistic:function(e,t){var n=Ct();return Ge!==null?pM(n,Ge,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:my,useCacheRefresh:LM},Xo=null,au=0;function Rd(e){var t=au;return au+=1,Xo===null&&(Xo=[]),aM(Xo,e,t)}function ac(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Dd(e,t){throw t.$$typeof===Lee?Error(W(525)):(e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function EN(e){var t=e._init;return t(e._payload)}function BM(e){function t(x,p){if(e){var b=x.deletions;b===null?(x.deletions=[p],x.flags|=16):b.push(p)}}function n(x,p){if(!e)return null;for(;p!==null;)t(x,p),p=p.sibling;return null}function s(x){for(var p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function r(x,p){return x=Mr(x,p),x.index=0,x.sibling=null,x}function i(x,p,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<p?(x.flags|=67108866,p):b):(x.flags|=67108866,p)):(x.flags|=1048576,p)}function o(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function l(x,p,b,j){return p===null||p.tag!==6?(p=Lg(b,x.mode,j),p.return=x,p):(p=r(p,b),p.return=x,p)}function c(x,p,b,j){var N=b.type;return N===No?d(x,p,b.props.children,j,b.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ua&&EN(N)===p.type)?(p=r(p,b.props),ac(p,b),p.return=x,p):(p=tf(b.type,b.key,b.props,null,x.mode,j),ac(p,b),p.return=x,p)}function u(x,p,b,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==b.containerInfo||p.stateNode.implementation!==b.implementation?(p=zg(b,x.mode,j),p.return=x,p):(p=r(p,b.children||[]),p.return=x,p)}function d(x,p,b,j,N){return p===null||p.tag!==7?(p=bi(b,x.mode,j,N),p.return=x,p):(p=r(p,b),p.return=x,p)}function f(x,p,b){if(typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint")return p=Lg(""+p,x.mode,b),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case kd:return b=tf(p.type,p.key,p.props,null,x.mode,b),ac(b,p),b.return=x,b;case mc:return p=zg(p,x.mode,b),p.return=x,p;case ua:var j=p._init;return p=j(p._payload),f(x,p,b)}if(hc(p)||tc(p))return p=bi(p,x.mode,b,null),p.return=x,p;if(typeof p.then=="function")return f(x,Rd(p),b);if(p.$$typeof===jr)return f(x,_d(x,p),b);Dd(x,p)}return null}function m(x,p,b,j){var N=p!==null?p.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return N!==null?null:l(x,p,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case kd:return b.key===N?c(x,p,b,j):null;case mc:return b.key===N?u(x,p,b,j):null;case ua:return N=b._init,b=N(b._payload),m(x,p,b,j)}if(hc(b)||tc(b))return N!==null?null:d(x,p,b,j,null);if(typeof b.then=="function")return m(x,p,Rd(b),j);if(b.$$typeof===jr)return m(x,p,_d(x,b),j);Dd(x,b)}return null}function h(x,p,b,j,N){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return x=x.get(b)||null,l(p,x,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case kd:return x=x.get(j.key===null?b:j.key)||null,c(p,x,j,N);case mc:return x=x.get(j.key===null?b:j.key)||null,u(p,x,j,N);case ua:var A=j._init;return j=A(j._payload),h(x,p,b,j,N)}if(hc(j)||tc(j))return x=x.get(b)||null,d(p,x,j,N,null);if(typeof j.then=="function")return h(x,p,b,Rd(j),N);if(j.$$typeof===jr)return h(x,p,b,_d(p,j),N);Dd(p,j)}return null}function v(x,p,b,j){for(var N=null,A=null,k=p,C=p=0,S=null;k!==null&&C<b.length;C++){k.index>C?(S=k,k=null):S=k.sibling;var E=m(x,k,b[C],j);if(E===null){k===null&&(k=S);break}e&&k&&E.alternate===null&&t(x,k),p=i(E,p,C),A===null?N=E:A.sibling=E,A=E,k=S}if(C===b.length)return n(x,k),$e&&li(x,C),N;if(k===null){for(;C<b.length;C++)k=f(x,b[C],j),k!==null&&(p=i(k,p,C),A===null?N=k:A.sibling=k,A=k);return $e&&li(x,C),N}for(k=s(k);C<b.length;C++)S=h(k,x,C,b[C],j),S!==null&&(e&&S.alternate!==null&&k.delete(S.key===null?C:S.key),p=i(S,p,C),A===null?N=S:A.sibling=S,A=S);return e&&k.forEach(function(T){return t(x,T)}),$e&&li(x,C),N}function y(x,p,b,j){if(b==null)throw Error(W(151));for(var N=null,A=null,k=p,C=p=0,S=null,E=b.next();k!==null&&!E.done;C++,E=b.next()){k.index>C?(S=k,k=null):S=k.sibling;var T=m(x,k,E.value,j);if(T===null){k===null&&(k=S);break}e&&k&&T.alternate===null&&t(x,k),p=i(T,p,C),A===null?N=T:A.sibling=T,A=T,k=S}if(E.done)return n(x,k),$e&&li(x,C),N;if(k===null){for(;!E.done;C++,E=b.next())E=f(x,E.value,j),E!==null&&(p=i(E,p,C),A===null?N=E:A.sibling=E,A=E);return $e&&li(x,C),N}for(k=s(k);!E.done;C++,E=b.next())E=h(k,x,C,E.value,j),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?C:E.key),p=i(E,p,C),A===null?N=E:A.sibling=E,A=E);return e&&k.forEach(function(z){return t(x,z)}),$e&&li(x,C),N}function w(x,p,b,j){if(typeof b=="object"&&b!==null&&b.type===No&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case kd:e:{for(var N=b.key;p!==null;){if(p.key===N){if(N=b.type,N===No){if(p.tag===7){n(x,p.sibling),j=r(p,b.props.children),j.return=x,x=j;break e}}else if(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ua&&EN(N)===p.type){n(x,p.sibling),j=r(p,b.props),ac(j,b),j.return=x,x=j;break e}n(x,p);break}else t(x,p);p=p.sibling}b.type===No?(j=bi(b.props.children,x.mode,j,b.key),j.return=x,x=j):(j=tf(b.type,b.key,b.props,null,x.mode,j),ac(j,b),j.return=x,x=j)}return o(x);case mc:e:{for(N=b.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===b.containerInfo&&p.stateNode.implementation===b.implementation){n(x,p.sibling),j=r(p,b.children||[]),j.return=x,x=j;break e}else{n(x,p);break}else t(x,p);p=p.sibling}j=zg(b,x.mode,j),j.return=x,x=j}return o(x);case ua:return N=b._init,b=N(b._payload),w(x,p,b,j)}if(hc(b))return v(x,p,b,j);if(tc(b)){if(N=tc(b),typeof N!="function")throw Error(W(150));return b=N.call(b),y(x,p,b,j)}if(typeof b.then=="function")return w(x,p,Rd(b),j);if(b.$$typeof===jr)return w(x,p,_d(x,b),j);Dd(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,p!==null&&p.tag===6?(n(x,p.sibling),j=r(p,b),j.return=x,x=j):(n(x,p),j=Lg(b,x.mode,j),j.return=x,x=j),o(x)):n(x,p)}return function(x,p,b,j){try{au=0;var N=w(x,p,b,j);return Xo=null,N}catch(k){if(k===Uu||k===bh)throw k;var A=Ln(29,k,null,x.mode);return A.lanes=j,A.return=x,A}finally{}}}var bl=BM(!0),FM=BM(!1),cs=rr(null),Xs=null;function ha(e){var t=e.alternate;ot(Rt,Rt.current&1),ot(cs,e),Xs===null&&(t===null||vl.current!==null||t.memoizedState!==null)&&(Xs=e)}function HM(e){if(e.tag===22){if(ot(Rt,Rt.current),ot(cs,e),Xs===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Xs=e)}}else ga()}function ga(){ot(Rt,Rt.current),ot(cs,cs.current)}function Cr(e){Ft(cs),Xs===e&&(Xs=null),Ft(Rt)}var Rt=rr(0);function em(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Ux(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Og(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:nt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ex={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=On(),r=Aa(s);r.payload=t,n!=null&&(r.callback=n),t=Ta(e,r,s),t!==null&&(In(t,e,s),Sc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=On(),r=Aa(s);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Ta(e,r,s),t!==null&&(In(t,e,s),Sc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=On(),s=Aa(n);s.tag=2,t!=null&&(s.callback=t),t=Ta(e,s,n),t!==null&&(In(t,e,n),Sc(t,e,n))}};function AN(e,t,n,s,r,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!nu(n,s)||!nu(r,i):!0}function TN(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Ex.enqueueReplaceState(t,t.state,null)}function Bi(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=nt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var tm=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function UM(e){tm(e)}function VM(e){console.error(e)}function GM(e){tm(e)}function nm(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function _N(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ax(e,t,n){return n=Aa(n),n.tag=3,n.payload={element:null},n.callback=function(){nm(e,t)},n}function qM(e){return e=Aa(e),e.tag=3,e}function ZM(e,t,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=s.value;e.payload=function(){return r(i)},e.callback=function(){_N(t,n,s)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){_N(t,n,s),typeof r!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function ane(e,t,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&Fu(t,n,r,!0),n=cs.current,n!==null){switch(n.tag){case 13:return Xs===null?Px():n.alternate===null&&pt===0&&(pt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===bx?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),Xg(e,s,r)),!1;case 22:return n.flags|=65536,s===bx?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),Xg(e,s,r)),!1}throw Error(W(435,n.tag))}return Xg(e,s,r),Px(),!1}if($e)return t=cs.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==gx&&(e=Error(W(422),{cause:s}),su(Jn(e,n)))):(s!==gx&&(t=Error(W(423),{cause:s}),su(Jn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,s=Jn(s,n),r=Ax(e.stateNode,s,r),Pg(e,r),pt!==4&&(pt=2)),!1;var i=Error(W(520),{cause:s});if(i=Jn(i,n),_c===null?_c=[i]:_c.push(i),pt!==4&&(pt=2),t===null)return!0;s=Jn(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Ax(n.stateNode,s,e),Pg(n,e),!1;case 1:if(t=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(_a===null||!_a.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,r=qM(r),ZM(r,e,n,s),Pg(n,r),!1}n=n.return}while(n!==null);return!1}var YM=Error(W(461)),Bt=!1;function Gt(e,t,n,s){t.child=e===null?FM(t,null,n,s):bl(t,e.child,n,s)}function MN(e,t,n,s,r){n=n.render;var i=t.ref;if("ref"in s){var o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}else o=s;return Oi(t),s=ly(e,t,n,o,i,r),l=cy(),e!==null&&!Bt?(uy(e,t,r),Ur(e,t,r)):($e&&l&&ty(t),t.flags|=1,Gt(e,t,s,r),t.child)}function RN(e,t,n,s,r){if(e===null){var i=n.type;return typeof i=="function"&&!ey(i)&&i.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=i,XM(e,t,i,s,r)):(e=tf(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!yy(e,r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:nu,n(o,s)&&e.ref===t.ref)return Ur(e,t,r)}return t.flags|=1,e=Mr(i,s),e.ref=t.ref,e.return=t,t.child=e}function XM(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(nu(i,s)&&e.ref===t.ref)if(Bt=!1,t.pendingProps=s=i,yy(e,r))e.flags&131072&&(Bt=!0);else return t.lanes=e.lanes,Ur(e,t,r)}return Tx(e,t,n,s,r)}function WM(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if(t.flags&128){if(s=i!==null?i.baseLanes|n:n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;t.childLanes=i&~s}else t.childLanes=0,t.child=null;return DN(e,t,s,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&nf(t,i!==null?i.cachePool:null),i!==null?bN(t,i):Nx(),HM(t);else return t.lanes=t.childLanes=536870912,DN(e,t,i!==null?i.baseLanes|n:n,n)}else i!==null?(nf(t,i.cachePool),bN(t,i),ga(),t.memoizedState=null):(e!==null&&nf(t,null),Nx(),ga());return Gt(e,t,r,n),t.child}function DN(e,t,n,s){var r=ry();return r=r===null?null:{parent:Mt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&nf(t,null),Nx(),HM(t),e!==null&&Fu(e,t,s,!0),null}function af(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(W(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Tx(e,t,n,s,r){return Oi(t),n=ly(e,t,n,s,void 0,r),s=cy(),e!==null&&!Bt?(uy(e,t,r),Ur(e,t,r)):($e&&s&&ty(t),t.flags|=1,Gt(e,t,n,r),t.child)}function LN(e,t,n,s,r,i){return Oi(t),t.updateQueue=null,n=cM(t,s,n,r),lM(e),s=cy(),e!==null&&!Bt?(uy(e,t,i),Ur(e,t,i)):($e&&s&&ty(t),t.flags|=1,Gt(e,t,n,i),t.child)}function zN(e,t,n,s,r){if(Oi(t),t.stateNode===null){var i=Mo,o=n.contextType;typeof o=="object"&&o!==null&&(i=nn(o)),i=new n(s,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ex,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=s,i.state=t.memoizedState,i.refs={},ay(t),o=n.contextType,i.context=typeof o=="object"&&o!==null?nn(o):Mo,i.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Og(t,n,o,s),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(o=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),o!==i.state&&Ex.enqueueReplaceState(i,i.state,null),Cc(t,s,i,r),kc(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){i=t.stateNode;var l=t.memoizedProps,c=Bi(n,l);i.props=c;var u=i.context,d=n.contextType;o=Mo,typeof d=="object"&&d!==null&&(o=nn(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||u!==o)&&TN(t,i,s,o),da=!1;var m=t.memoizedState;i.state=m,Cc(t,s,i,r),kc(),u=t.memoizedState,l||m!==u||da?(typeof f=="function"&&(Og(t,n,f,s),u=t.memoizedState),(c=da||AN(t,n,c,s,m,u,o))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=u),i.props=s,i.state=u,i.context=o,s=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,wx(e,t),o=t.memoizedProps,d=Bi(n,o),i.props=d,f=t.pendingProps,m=i.context,u=n.contextType,c=Mo,typeof u=="object"&&u!==null&&(c=nn(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==f||m!==c)&&TN(t,i,s,c),da=!1,m=t.memoizedState,i.state=m,Cc(t,s,i,r),kc();var h=t.memoizedState;o!==f||m!==h||da||e!==null&&e.dependencies!==null&&Xf(e.dependencies)?(typeof l=="function"&&(Og(t,n,l,s),h=t.memoizedState),(d=da||AN(t,n,d,s,m,h,c)||e!==null&&e.dependencies!==null&&Xf(e.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,h,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,h,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=h),i.props=s,i.state=h,i.context=c,s=d):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return i=s,af(e,t),s=(t.flags&128)!==0,i||s?(i=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&s?(t.child=bl(t,e.child,null,r),t.child=bl(t,null,n,r)):Gt(e,t,n,r),t.memoizedState=i.state,e=t.child):e=Ur(e,t,r),e}function PN(e,t,n,s){return Bu(),t.flags|=256,Gt(e,t,n,s),t.child}var Ig={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bg(e){return{baseLanes:e,cachePool:sM()}}function Fg(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ns),e}function KM(e,t,n){var s=t.pendingProps,r=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(Rt.current&2)!==0),o&&(r=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if($e){if(r?ha(t):ga(),$e){var l=gt,c;if(c=l){e:{for(c=l,l=Bs;c.nodeType!==8;){if(!l){l=null;break e}if(c=Ss(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:wi!==null?{id:Nr,overflow:Sr}:null,retryLane:536870912,hydrationErrors:null},c=Ln(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,an=t,gt=null,c=!0):c=!1}c||$i(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Ux(l)?t.lanes=32:t.lanes=536870912,null;Cr(t)}return l=s.children,s=s.fallback,r?(ga(),r=t.mode,l=sm({mode:"hidden",children:l},r),s=bi(s,r,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,r=t.child,r.memoizedState=Bg(n),r.childLanes=Fg(e,o,n),t.memoizedState=Ig,s):(ha(t),_x(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(i)t.flags&256?(ha(t),t.flags&=-257,t=Hg(e,t,n)):t.memoizedState!==null?(ga(),t.child=e.child,t.flags|=128,t=null):(ga(),r=s.fallback,l=t.mode,s=sm({mode:"visible",children:s.children},l),r=bi(r,l,n,null),r.flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,bl(t,e.child,null,n),s=t.child,s.memoizedState=Bg(n),s.childLanes=Fg(e,o,n),t.memoizedState=Ig,t=r);else if(ha(t),Ux(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var u=o.dgst;o=u,s=Error(W(419)),s.stack="",s.digest=o,su({value:s,source:null,stack:null}),t=Hg(e,t,n)}else if(Bt||Fu(e,t,n,!1),o=(n&e.childLanes)!==0,Bt||o){if(o=Qe,o!==null&&(s=n&-n,s=s&42?1:Uv(s),s=s&(o.suspendedLanes|n)?0:s,s!==0&&s!==c.retryLane))throw c.retryLane=s,Fl(e,s),In(o,e,s),YM;l.data==="$?"||Px(),t=Hg(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,gt=Ss(l.nextSibling),an=t,$e=!0,ji=null,Bs=!1,e!==null&&(Xn[Wn++]=Nr,Xn[Wn++]=Sr,Xn[Wn++]=wi,Nr=e.id,Sr=e.overflow,wi=t),t=_x(t,s.children),t.flags|=4096);return t}return r?(ga(),r=s.fallback,l=t.mode,c=e.child,u=c.sibling,s=Mr(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,u!==null?r=Mr(u,r):(r=bi(r,l,n,null),r.flags|=2),r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,l=e.child.memoizedState,l===null?l=Bg(n):(c=l.cachePool,c!==null?(u=Mt._currentValue,c=c.parent!==u?{parent:u,pool:u}:c):c=sM(),l={baseLanes:l.baseLanes|n,cachePool:c}),r.memoizedState=l,r.childLanes=Fg(e,o,n),t.memoizedState=Ig,s):(ha(t),n=e.child,e=n.sibling,n=Mr(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function _x(e,t){return t=sm({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function sm(e,t){return e=Ln(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Hg(e,t,n){return bl(t,e.child,null,n),e=_x(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $N(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),xx(e.return,t,n)}function Ug(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function QM(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(Gt(e,t,s.children,n),s=Rt.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$N(e,n,t);else if(e.tag===19)$N(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(ot(Rt,s),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&em(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ug(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&em(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ug(t,!0,n,null,i);break;case"together":Ug(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ur(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ia|=t.lanes,!(n&t.childLanes))if(e!==null){if(Fu(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,n=Mr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yy(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Xf(e)))}function ine(e,t,n){switch(t.tag){case 3:Ff(t,t.stateNode.containerInfo),ma(t,Mt,e.memoizedState.cache),Bu();break;case 27:case 5:ax(t);break;case 4:Ff(t,t.stateNode.containerInfo);break;case 10:ma(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(ha(t),t.flags|=128,null):n&t.child.childLanes?KM(e,t,n):(ha(t),e=Ur(e,t,n),e!==null?e.sibling:null);ha(t);break;case 19:var r=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(Fu(e,t,n,!1),s=(n&t.childLanes)!==0),r){if(s)return QM(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ot(Rt,Rt.current),s)break;return null;case 22:case 23:return t.lanes=0,WM(e,t,n);case 24:ma(t,Mt,e.memoizedState.cache)}return Ur(e,t,n)}function JM(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Bt=!0;else{if(!yy(e,n)&&!(t.flags&128))return Bt=!1,ine(e,t,n);Bt=!!(e.flags&131072)}else Bt=!1,$e&&t.flags&1048576&&tM(t,Yf,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,r=s._init;if(s=r(s._payload),t.type=s,typeof s=="function")ey(s)?(e=Bi(s,e),t.tag=1,t=zN(null,t,s,e,n)):(t.tag=0,t=Tx(null,t,s,e,n));else{if(s!=null){if(r=s.$$typeof,r===Bv){t.tag=11,t=MN(null,t,s,e,n);break e}else if(r===Fv){t.tag=14,t=RN(null,t,s,e,n);break e}}throw t=sx(s)||s,Error(W(306,t,""))}}return t;case 0:return Tx(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,r=Bi(s,t.pendingProps),zN(e,t,s,r,n);case 3:e:{if(Ff(t,t.stateNode.containerInfo),e===null)throw Error(W(387));s=t.pendingProps;var i=t.memoizedState;r=i.element,wx(e,t),Cc(t,s,null,n);var o=t.memoizedState;if(s=o.cache,ma(t,Mt,s),s!==i.cache&&vx(t,[Mt],n,!0),kc(),s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=PN(e,t,s,n);break e}else if(s!==r){r=Jn(Error(W(424)),t),su(r),t=PN(e,t,s,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(gt=Ss(e.firstChild),an=t,$e=!0,ji=null,Bs=!0,n=FM(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Bu(),s===r){t=Ur(e,t,n);break e}Gt(e,t,s,n)}t=t.child}return t;case 26:return af(e,t),e===null?(n=e1(t.type,null,t.pendingProps,null))?t.memoizedState=n:$e||(n=t.type,e=t.pendingProps,s=um(Ea.current).createElement(n),s[tn]=t,s[jn]=e,Xt(s,n,e),Ot(s),t.stateNode=s):t.memoizedState=e1(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ax(t),e===null&&$e&&(s=t.stateNode=I4(t.type,t.pendingProps,Ea.current),an=t,Bs=!0,r=gt,Ja(t.type)?(Vx=r,gt=Ss(s.firstChild)):gt=r),Gt(e,t,t.pendingProps.children,n),af(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&$e&&((r=s=gt)&&(s=Lne(s,t.type,t.pendingProps,Bs),s!==null?(t.stateNode=s,an=t,gt=Ss(s.firstChild),Bs=!1,r=!0):r=!1),r||$i(t)),ax(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,Fx(r,i)?s=null:o!==null&&Fx(r,o)&&(t.flags|=32),t.memoizedState!==null&&(r=ly(e,t,Qte,null,null,n),cu._currentValue=r),af(e,t),Gt(e,t,s,n),t.child;case 6:return e===null&&$e&&((e=n=gt)&&(n=zne(n,t.pendingProps,Bs),n!==null?(t.stateNode=n,an=t,gt=null,e=!0):e=!1),e||$i(t)),null;case 13:return KM(e,t,n);case 4:return Ff(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=bl(t,null,s,n):Gt(e,t,s,n),t.child;case 11:return MN(e,t,t.type,t.pendingProps,n);case 7:return Gt(e,t,t.pendingProps,n),t.child;case 8:return Gt(e,t,t.pendingProps.children,n),t.child;case 12:return Gt(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,ma(t,t.type,s.value),Gt(e,t,s.children,n),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,Oi(t),r=nn(r),s=s(r),t.flags|=1,Gt(e,t,s,n),t.child;case 14:return RN(e,t,t.type,t.pendingProps,n);case 15:return XM(e,t,t.type,t.pendingProps,n);case 19:return QM(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},e===null?(n=sm(s,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Mr(e.child,s),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return WM(e,t,n);case 24:return Oi(t),s=nn(Mt),e===null?(r=ry(),r===null&&(r=Qe,i=sy(),r.pooledCache=i,i.refCount++,i!==null&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:s,cache:r},ay(t),ma(t,Mt,r)):(e.lanes&n&&(wx(e,t),Cc(t,null,null,n),kc()),r=e.memoizedState,i=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),ma(t,Mt,s)):(s=i.cache,ma(t,Mt,s),s!==r.cache&&vx(t,[Mt],n,!0))),Gt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(W(156,t.tag))}function gr(e){e.flags|=4}function ON(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!H4(t)){if(t=cs.current,t!==null&&((ze&4194048)===ze?Xs!==null:(ze&62914560)!==ze&&!(ze&536870912)||t!==Xs))throw Nc=bx,rM;e.flags|=8192}}function Ld(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?k_():536870912,e.lanes|=t,wl|=t)}function ic(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function one(e,t,n){var s=t.pendingProps;switch(ny(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return ut(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Rr(Mt),hl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(rc(t)?gr(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hN())),ut(t),null;case 26:return n=t.memoizedState,e===null?(gr(t),n!==null?(ut(t),ON(t,n)):(ut(t),t.flags&=-16777217)):n?n!==e.memoizedState?(gr(t),ut(t),ON(t,n)):(ut(t),t.flags&=-16777217):(e.memoizedProps!==s&&gr(t),ut(t),t.flags&=-16777217),null;case 27:Hf(t),n=Ea.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&gr(t);else{if(!s){if(t.stateNode===null)throw Error(W(166));return ut(t),null}e=Zs.current,rc(t)?fN(t):(e=I4(r,s,n),t.stateNode=e,gr(t))}return ut(t),null;case 5:if(Hf(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&gr(t);else{if(!s){if(t.stateNode===null)throw Error(W(166));return ut(t),null}if(e=Zs.current,rc(t))fN(t);else{switch(r=um(Ea.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?r.createElement(n,{is:s.is}):r.createElement(n)}}e[tn]=t,e[jn]=s;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(Xt(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&gr(t)}}return ut(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&gr(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(W(166));if(e=Ea.current,rc(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,r=an,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}e[tn]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||P4(e.nodeValue,n)),e||$i(t)}else e=um(e).createTextNode(s),e[tn]=t,t.stateNode=e}return ut(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=rc(t),s!==null&&s.dehydrated!==null){if(e===null){if(!r)throw Error(W(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(W(317));r[tn]=t}else Bu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),r=!1}else r=hN(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Cr(t),t):(Cr(t),null)}if(Cr(t),t.flags&128)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool);var i=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ld(t,t.updateQueue),ut(t),null;case 4:return hl(),e===null&&Ey(t.stateNode.containerInfo),ut(t),null;case 10:return Rr(t.type),ut(t),null;case 19:if(Ft(Rt),r=t.memoizedState,r===null)return ut(t),null;if(s=(t.flags&128)!==0,i=r.rendering,i===null)if(s)ic(r,!1);else{if(pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=em(e),i!==null){for(t.flags|=128,ic(r,!1),e=i.updateQueue,t.updateQueue=e,Ld(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)eM(n,e),n=n.sibling;return ot(Rt,Rt.current&1|2),t.child}e=e.sibling}r.tail!==null&&Ys()>am&&(t.flags|=128,s=!0,ic(r,!1),t.lanes=4194304)}else{if(!s)if(e=em(i),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Ld(t,e),ic(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!$e)return ut(t),null}else 2*Ys()-r.renderingStartTime>am&&n!==536870912&&(t.flags|=128,s=!0,ic(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(e=r.last,e!==null?e.sibling=i:t.child=i,r.last=i)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ys(),t.sibling=null,e=Rt.current,ot(Rt,s?e&1|2:e&1),t):(ut(t),null);case 22:case 23:return Cr(t),iy(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?n&536870912&&!(t.flags&128)&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),n=t.updateQueue,n!==null&&Ld(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&Ft(Ni),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Rr(Mt),ut(t),null;case 25:return null;case 30:return null}throw Error(W(156,t.tag))}function lne(e,t){switch(ny(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rr(Mt),hl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Hf(t),null;case 13:if(Cr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));Bu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ft(Rt),null;case 4:return hl(),null;case 10:return Rr(t.type),null;case 22:case 23:return Cr(t),iy(),e!==null&&Ft(Ni),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Rr(Mt),null;case 25:return null;default:return null}}function e4(e,t){switch(ny(t),t.tag){case 3:Rr(Mt),hl();break;case 26:case 27:case 5:Hf(t);break;case 4:hl();break;case 13:Cr(t);break;case 19:Ft(Rt);break;case 10:Rr(t.type);break;case 22:case 23:Cr(t),iy(),e!==null&&Ft(Ni);break;case 24:Rr(Mt)}}function qu(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&e)===e){s=void 0;var i=n.create,o=n.inst;s=i(),o.destroy=s}n=n.next}while(n!==r)}}catch(l){Ye(t,t.return,l)}}function Oa(e,t,n){try{var s=t.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var i=r.next;s=i;do{if((s.tag&e)===e){var o=s.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,r=t;var c=n,u=l;try{u()}catch(d){Ye(r,c,d)}}}s=s.next}while(s!==i)}}catch(d){Ye(t,t.return,d)}}function t4(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{oM(t,n)}catch(s){Ye(e,e.return,s)}}}function n4(e,t,n){n.props=Bi(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){Ye(e,t,s)}}function Ac(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof n=="function"?e.refCleanup=n(s):n.current=s}}catch(r){Ye(e,t,r)}}function Vs(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){Ye(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ye(e,t,r)}else n.current=null}function s4(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){Ye(e,e.return,r)}}function Vg(e,t,n){try{var s=e.stateNode;Tne(s,e.type,n,t),s[jn]=t}catch(r){Ye(e,e.return,r)}}function r4(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ja(e.type)||e.tag===4}function Gg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||r4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ja(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mx(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Eh));else if(s!==4&&(s===27&&Ja(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Mx(e,t,n),e=e.sibling;e!==null;)Mx(e,t,n),e=e.sibling}function rm(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(s===27&&Ja(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(rm(e,t,n),e=e.sibling;e!==null;)rm(e,t,n),e=e.sibling}function a4(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Xt(t,s,n),t[tn]=e,t[jn]=n}catch(i){Ye(e,e.return,i)}}var br=!1,jt=!1,qg=!1,IN=typeof WeakSet=="function"?WeakSet:Set,$t=null;function cne(e,t){if(e=e.containerInfo,Ix=hm,e=q_(e),Kv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var h;f!==n||r!==0&&f.nodeType!==3||(l=o+r),f!==i||s!==0&&f.nodeType!==3||(c=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)m=f,f=h;for(;;){if(f===e)break t;if(m===n&&++u===r&&(l=o),m===i&&++d===s&&(c=o),(h=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bx={focusedElem:e,selectionRange:n},hm=!1,$t=t;$t!==null;)if(t=$t,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,$t=e;else for(;$t!==null;){switch(t=$t,i=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&i!==null){e=void 0,n=t,r=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var v=Bi(n.type,r,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(v,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(y){Ye(n,n.return,y)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Hx(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Hx(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(W(163))}if(e=t.sibling,e!==null){e.return=t.return,$t=e;break}$t=t.return}}function i4(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:sa(e,n),s&4&&qu(5,n);break;case 1:if(sa(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(o){Ye(n,n.return,o)}else{var r=Bi(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Ye(n,n.return,o)}}s&64&&t4(n),s&512&&Ac(n,n.return);break;case 3:if(sa(e,n),s&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{oM(e,t)}catch(o){Ye(n,n.return,o)}}break;case 27:t===null&&s&4&&a4(n);case 26:case 5:sa(e,n),t===null&&s&4&&s4(n),s&512&&Ac(n,n.return);break;case 12:sa(e,n);break;case 13:sa(e,n),s&4&&c4(e,n),s&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=vne.bind(null,n),Pne(e,n))));break;case 22:if(s=n.memoizedState!==null||br,!s){t=t!==null&&t.memoizedState!==null||jt,r=br;var i=jt;br=s,(jt=t)&&!i?ia(e,n,(n.subtreeFlags&8772)!==0):sa(e,n),br=r,jt=i}break;case 30:break;default:sa(e,n)}}function o4(e){var t=e.alternate;t!==null&&(e.alternate=null,o4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Gv(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var rt=null,vn=!1;function pr(e,t,n){for(n=n.child;n!==null;)l4(e,t,n),n=n.sibling}function l4(e,t,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(zu,n)}catch{}switch(n.tag){case 26:jt||Vs(n,t),pr(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:jt||Vs(n,t);var s=rt,r=vn;Ja(n.type)&&(rt=n.stateNode,vn=!1),pr(e,t,n),Rc(n.stateNode),rt=s,vn=r;break;case 5:jt||Vs(n,t);case 6:if(s=rt,r=vn,rt=null,pr(e,t,n),rt=s,vn=r,rt!==null)if(vn)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(n.stateNode)}catch(i){Ye(n,t,i)}else try{rt.removeChild(n.stateNode)}catch(i){Ye(n,t,i)}break;case 18:rt!==null&&(vn?(e=rt,KN(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),fu(e)):KN(rt,n.stateNode));break;case 4:s=rt,r=vn,rt=n.stateNode.containerInfo,vn=!0,pr(e,t,n),rt=s,vn=r;break;case 0:case 11:case 14:case 15:jt||Oa(2,n,t),jt||Oa(4,n,t),pr(e,t,n);break;case 1:jt||(Vs(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&n4(n,t,s)),pr(e,t,n);break;case 21:pr(e,t,n);break;case 22:jt=(s=jt)||n.memoizedState!==null,pr(e,t,n),jt=s;break;default:pr(e,t,n)}}function c4(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fu(e)}catch(n){Ye(t,t.return,n)}}function une(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new IN),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new IN),t;default:throw Error(W(435,e.tag))}}function Zg(e,t){var n=une(e);t.forEach(function(s){var r=yne.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}function An(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(Ja(l.type)){rt=l.stateNode,vn=!1;break e}break;case 5:rt=l.stateNode,vn=!1;break e;case 3:case 4:rt=l.stateNode.containerInfo,vn=!0;break e}l=l.return}if(rt===null)throw Error(W(160));l4(i,o,r),rt=null,vn=!1,i=r.alternate,i!==null&&(i.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)u4(t,e),t=t.sibling}var xs=null;function u4(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:An(t,e),Tn(e),s&4&&(Oa(3,e,e.return),qu(3,e),Oa(5,e,e.return));break;case 1:An(t,e),Tn(e),s&512&&(jt||n===null||Vs(n,n.return)),s&64&&br&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=xs;if(An(t,e),Tn(e),s&512&&(jt||n===null||Vs(n,n.return)),s&4){var i=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":i=r.getElementsByTagName("title")[0],(!i||i[Ou]||i[tn]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),Xt(i,s,n),i[tn]=e,Ot(i),s=i;break e;case"link":var o=n1("link","href",r).get(s+(n.href||""));if(o){for(var l=0;l<o.length;l++)if(i=o[l],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(l,1);break t}}i=r.createElement(s),Xt(i,s,n),r.head.appendChild(i);break;case"meta":if(o=n1("meta","content",r).get(s+(n.content||""))){for(l=0;l<o.length;l++)if(i=o[l],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(l,1);break t}}i=r.createElement(s),Xt(i,s,n),r.head.appendChild(i);break;default:throw Error(W(468,s))}i[tn]=e,Ot(i),s=i}e.stateNode=s}else s1(r,e.type,e.stateNode);else e.stateNode=t1(r,s,e.memoizedProps);else i!==s?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,s===null?s1(r,e.type,e.stateNode):t1(r,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Vg(e,e.memoizedProps,n.memoizedProps)}break;case 27:An(t,e),Tn(e),s&512&&(jt||n===null||Vs(n,n.return)),n!==null&&s&4&&Vg(e,e.memoizedProps,n.memoizedProps);break;case 5:if(An(t,e),Tn(e),s&512&&(jt||n===null||Vs(n,n.return)),e.flags&32){r=e.stateNode;try{pl(r,"")}catch(h){Ye(e,e.return,h)}}s&4&&e.stateNode!=null&&(r=e.memoizedProps,Vg(e,r,n!==null?n.memoizedProps:r)),s&1024&&(qg=!0);break;case 6:if(An(t,e),Tn(e),s&4){if(e.stateNode===null)throw Error(W(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(h){Ye(e,e.return,h)}}break;case 3:if(cf=null,r=xs,xs=dm(t.containerInfo),An(t,e),xs=r,Tn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{fu(t.containerInfo)}catch(h){Ye(e,e.return,h)}qg&&(qg=!1,d4(e));break;case 4:s=xs,xs=dm(e.stateNode.containerInfo),An(t,e),Tn(e),xs=s;break;case 12:An(t,e),Tn(e);break;case 13:An(t,e),Tn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Sy=Ys()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Zg(e,s)));break;case 22:r=e.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=br,d=jt;if(br=u||r,jt=d||c,An(t,e),jt=d,br=u,Tn(e),s&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||c||br||jt||ci(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){c=n=t;try{if(i=c.stateNode,r)o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var f=c.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(h){Ye(c,c.return,h)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(h){Ye(c,c.return,h)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Zg(e,n))));break;case 19:An(t,e),Tn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Zg(e,s)));break;case 30:break;case 21:break;default:An(t,e),Tn(e)}}function Tn(e){var t=e.flags;if(t&2){try{for(var n,s=e.return;s!==null;){if(r4(s)){n=s;break}s=s.return}if(n==null)throw Error(W(160));switch(n.tag){case 27:var r=n.stateNode,i=Gg(e);rm(e,i,r);break;case 5:var o=n.stateNode;n.flags&32&&(pl(o,""),n.flags&=-33);var l=Gg(e);rm(e,l,o);break;case 3:case 4:var c=n.stateNode.containerInfo,u=Gg(e);Mx(e,u,c);break;default:throw Error(W(161))}}catch(d){Ye(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function d4(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;d4(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function sa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)i4(e,t.alternate,t),t=t.sibling}function ci(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Oa(4,t,t.return),ci(t);break;case 1:Vs(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&n4(t,t.return,n),ci(t);break;case 27:Rc(t.stateNode);case 26:case 5:Vs(t,t.return),ci(t);break;case 22:t.memoizedState===null&&ci(t);break;case 30:ci(t);break;default:ci(t)}e=e.sibling}}function ia(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,r=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:ia(r,i,n),qu(4,i);break;case 1:if(ia(r,i,n),s=i,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){Ye(s,s.return,u)}if(s=i,r=s.updateQueue,r!==null){var l=s.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)iM(c[r],l)}catch(u){Ye(s,s.return,u)}}n&&o&64&&t4(i),Ac(i,i.return);break;case 27:a4(i);case 26:case 5:ia(r,i,n),n&&s===null&&o&4&&s4(i),Ac(i,i.return);break;case 12:ia(r,i,n);break;case 13:ia(r,i,n),n&&o&4&&c4(r,i);break;case 22:i.memoizedState===null&&ia(r,i,n),Ac(i,i.return);break;case 30:break;default:ia(r,i,n)}t=t.sibling}}function by(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Hu(n))}function wy(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Hu(e))}function Ps(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)f4(e,t,n,s),t=t.sibling}function f4(e,t,n,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Ps(e,t,n,s),r&2048&&qu(9,t);break;case 1:Ps(e,t,n,s);break;case 3:Ps(e,t,n,s),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Hu(e)));break;case 12:if(r&2048){Ps(e,t,n,s),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,l=i.onPostCommit;typeof l=="function"&&l(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){Ye(t,t.return,c)}}else Ps(e,t,n,s);break;case 13:Ps(e,t,n,s);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,t.memoizedState!==null?i._visibility&2?Ps(e,t,n,s):Tc(e,t):i._visibility&2?Ps(e,t,n,s):(i._visibility|=2,yo(e,t,n,s,(t.subtreeFlags&10256)!==0)),r&2048&&by(o,t);break;case 24:Ps(e,t,n,s),r&2048&&wy(t.alternate,t);break;default:Ps(e,t,n,s)}}function yo(e,t,n,s,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var i=e,o=t,l=n,c=s,u=o.flags;switch(o.tag){case 0:case 11:case 15:yo(i,o,l,c,r),qu(8,o);break;case 23:break;case 22:var d=o.stateNode;o.memoizedState!==null?d._visibility&2?yo(i,o,l,c,r):Tc(i,o):(d._visibility|=2,yo(i,o,l,c,r)),r&&u&2048&&by(o.alternate,o);break;case 24:yo(i,o,l,c,r),r&&u&2048&&wy(o.alternate,o);break;default:yo(i,o,l,c,r)}t=t.sibling}}function Tc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,r=s.flags;switch(s.tag){case 22:Tc(n,s),r&2048&&by(s.alternate,s);break;case 24:Tc(n,s),r&2048&&wy(s.alternate,s);break;default:Tc(n,s)}t=t.sibling}}var pc=8192;function go(e){if(e.subtreeFlags&pc)for(e=e.child;e!==null;)m4(e),e=e.sibling}function m4(e){switch(e.tag){case 26:go(e),e.flags&pc&&e.memoizedState!==null&&Xne(xs,e.memoizedState,e.memoizedProps);break;case 5:go(e);break;case 3:case 4:var t=xs;xs=dm(e.stateNode.containerInfo),go(e),xs=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=pc,pc=16777216,go(e),pc=t):go(e));break;default:go(e)}}function h4(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function oc(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];$t=s,p4(s,e)}h4(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)g4(e),e=e.sibling}function g4(e){switch(e.tag){case 0:case 11:case 15:oc(e),e.flags&2048&&Oa(9,e,e.return);break;case 3:oc(e);break;case 12:oc(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,of(e)):oc(e);break;default:oc(e)}}function of(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];$t=s,p4(s,e)}h4(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Oa(8,t,t.return),of(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,of(t));break;default:of(t)}e=e.sibling}}function p4(e,t){for(;$t!==null;){var n=$t;switch(n.tag){case 0:case 11:case 15:Oa(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Hu(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,$t=s;else e:for(n=e;$t!==null;){s=$t;var r=s.sibling,i=s.return;if(o4(s),s===n){$t=null;break e}if(r!==null){r.return=i,$t=r;break e}$t=i}}}var dne={getCacheForType:function(e){var t=nn(Mt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},fne=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Qe=null,Te=null,ze=0,He=0,_n=null,wa=!1,Hl=!1,jy=!1,Vr=0,pt=0,Ia=0,Si=0,Ny=0,ns=0,wl=0,_c=null,yn=null,Rx=!1,Sy=0,am=1/0,im=null,_a=null,qt=0,Ma=null,jl=null,Wo=0,Dx=0,Lx=null,x4=null,Mc=0,zx=null;function On(){if(Ue&2&&ze!==0)return ze&-ze;if(ge.T!==null){var e=xl;return e!==0?e:Cy()}return A_()}function v4(){ns===0&&(ns=!(ze&536870912)||$e?S_():536870912);var e=cs.current;return e!==null&&(e.flags|=32),ns}function In(e,t,n){(e===Qe&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(Nl(e,0),ja(e,ze,ns,!1)),$u(e,n),(!(Ue&2)||e!==Qe)&&(e===Qe&&(!(Ue&2)&&(Si|=n),pt===4&&ja(e,ze,ns,!1)),ar(e))}function y4(e,t,n){if(Ue&6)throw Error(W(327));var s=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Pu(e,t),r=s?gne(e,t):Yg(e,t,!0),i=s;do{if(r===0){Hl&&!s&&ja(e,t,0,!1);break}else{if(n=e.current.alternate,i&&!mne(n)){r=Yg(e,t,!1),i=!1;continue}if(r===2){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var l=e;r=_c;var c=l.current.memoizedState.isDehydrated;if(c&&(Nl(l,o).flags|=256),o=Yg(l,o,!1),o!==2){if(jy&&!c){l.errorRecoveryDisabledLanes|=i,Si|=i,r=4;break e}i=yn,yn=r,i!==null&&(yn===null?yn=i:yn.push.apply(yn,i))}r=o}if(i=!1,r!==2)continue}}if(r===1){Nl(e,0),ja(e,t,0,!0);break}e:{switch(s=e,i=r,i){case 0:case 1:throw Error(W(345));case 4:if((t&4194048)!==t)break;case 6:ja(s,t,ns,!wa);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(W(329))}if((t&62914560)===t&&(r=Sy+300-Ys(),10<r)){if(ja(s,t,ns,!wa),hh(s,0,!0)!==0)break e;s.timeoutHandle=O4(BN.bind(null,s,n,yn,im,Rx,t,ns,Si,wl,wa,i,2,-0,0),r);break e}BN(s,n,yn,im,Rx,t,ns,Si,wl,wa,i,0,-0,0)}}break}while(!0);ar(e)}function BN(e,t,n,s,r,i,o,l,c,u,d,f,m,h){if(e.timeoutHandle=-1,f=t.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(lu={stylesheets:null,count:0,unsuspend:Yne},m4(t),f=Wne(),f!==null)){e.cancelPendingCommit=f(HN.bind(null,e,t,i,n,s,r,o,l,c,d,1,m,h)),ja(e,i,o,!u);return}HN(e,t,i,n,s,r,o,l,c)}function mne(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Un(i(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ja(e,t,n,s){t&=~Ny,t&=~Si,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var i=31-$n(r),o=1<<i;s[i]=-1,r&=~o}n!==0&&C_(e,n,t)}function Sh(){return Ue&6?!0:(Zu(0),!1)}function ky(){if(Te!==null){if(He===0)var e=Te.return;else e=Te,kr=so=null,dy(e),Xo=null,au=0,e=Te;for(;e!==null;)e4(e.alternate,e),e=e.return;Te=null}}function Nl(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Mne(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),ky(),Qe=e,Te=n=Mr(e.current,null),ze=t,He=0,_n=null,wa=!1,Hl=Pu(e,t),jy=!1,wl=ns=Ny=Si=Ia=pt=0,yn=_c=null,Rx=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var r=31-$n(s),i=1<<r;t|=e[r],s&=~i}return Vr=t,vh(),n}function b4(e,t){Ce=null,ge.H=Jf,t===Uu||t===bh?(t=vN(),He=3):t===rM?(t=vN(),He=4):He=t===YM?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,_n=t,Te===null&&(pt=1,nm(e,Jn(t,e.current)))}function w4(){var e=ge.H;return ge.H=Jf,e===null?Jf:e}function j4(){var e=ge.A;return ge.A=dne,e}function Px(){pt=4,wa||(ze&4194048)!==ze&&cs.current!==null||(Hl=!0),!(Ia&134217727)&&!(Si&134217727)||Qe===null||ja(Qe,ze,ns,!1)}function Yg(e,t,n){var s=Ue;Ue|=2;var r=w4(),i=j4();(Qe!==e||ze!==t)&&(im=null,Nl(e,t)),t=!1;var o=pt;e:do try{if(He!==0&&Te!==null){var l=Te,c=_n;switch(He){case 8:ky(),o=6;break e;case 3:case 2:case 9:case 6:cs.current===null&&(t=!0);var u=He;if(He=0,_n=null,Lo(e,l,c,u),n&&Hl){o=0;break e}break;default:u=He,He=0,_n=null,Lo(e,l,c,u)}}hne(),o=pt;break}catch(d){b4(e,d)}while(!0);return t&&e.shellSuspendCounter++,kr=so=null,Ue=s,ge.H=r,ge.A=i,Te===null&&(Qe=null,ze=0,vh()),o}function hne(){for(;Te!==null;)N4(Te)}function gne(e,t){var n=Ue;Ue|=2;var s=w4(),r=j4();Qe!==e||ze!==t?(im=null,am=Ys()+500,Nl(e,t)):Hl=Pu(e,t);e:do try{if(He!==0&&Te!==null){t=Te;var i=_n;t:switch(He){case 1:He=0,_n=null,Lo(e,t,i,1);break;case 2:case 9:if(xN(i)){He=0,_n=null,FN(t);break}t=function(){He!==2&&He!==9||Qe!==e||(He=7),ar(e)},i.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:xN(i)?(He=0,_n=null,FN(t)):(He=0,_n=null,Lo(e,t,i,7));break;case 5:var o=null;switch(Te.tag){case 26:o=Te.memoizedState;case 5:case 27:var l=Te;if(!o||H4(o)){He=0,_n=null;var c=l.sibling;if(c!==null)Te=c;else{var u=l.return;u!==null?(Te=u,kh(u)):Te=null}break t}}He=0,_n=null,Lo(e,t,i,5);break;case 6:He=0,_n=null,Lo(e,t,i,6);break;case 8:ky(),pt=6;break e;default:throw Error(W(462))}}pne();break}catch(d){b4(e,d)}while(!0);return kr=so=null,ge.H=s,ge.A=r,Ue=n,Te!==null?0:(Qe=null,ze=0,vh(),pt)}function pne(){for(;Te!==null&&!Oee();)N4(Te)}function N4(e){var t=JM(e.alternate,e,Vr);e.memoizedProps=e.pendingProps,t===null?kh(e):Te=t}function FN(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=LN(n,t,t.pendingProps,t.type,void 0,ze);break;case 11:t=LN(n,t,t.pendingProps,t.type.render,t.ref,ze);break;case 5:dy(t);default:e4(n,t),t=Te=eM(t,Vr),t=JM(n,t,Vr)}e.memoizedProps=e.pendingProps,t===null?kh(e):Te=t}function Lo(e,t,n,s){kr=so=null,dy(t),Xo=null,au=0;var r=t.return;try{if(ane(e,r,t,n,ze)){pt=1,nm(e,Jn(n,e.current)),Te=null;return}}catch(i){if(r!==null)throw Te=r,i;pt=1,nm(e,Jn(n,e.current)),Te=null;return}t.flags&32768?($e||s===1?e=!0:Hl||ze&536870912?e=!1:(wa=e=!0,(s===2||s===9||s===3||s===6)&&(s=cs.current,s!==null&&s.tag===13&&(s.flags|=16384))),S4(t,e)):kh(t)}function kh(e){var t=e;do{if(t.flags&32768){S4(t,wa);return}e=t.return;var n=one(t.alternate,t,Vr);if(n!==null){Te=n;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);pt===0&&(pt=5)}function S4(e,t){do{var n=lne(e.alternate,e);if(n!==null){n.flags&=32767,Te=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Te=e;return}Te=e=n}while(e!==null);pt=6,Te=null}function HN(e,t,n,s,r,i,o,l,c){e.cancelPendingCommit=null;do Ch();while(qt!==0);if(Ue&6)throw Error(W(327));if(t!==null){if(t===e.current)throw Error(W(177));if(i=t.lanes|t.childLanes,i|=Qv,Yee(e,n,i,o,l,c),e===Qe&&(Te=Qe=null,ze=0),jl=t,Ma=e,Wo=n,Dx=i,Lx=r,x4=s,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,bne(Uf,function(){return T4(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,t.subtreeFlags&13878||s){s=ge.T,ge.T=null,r=Oe.p,Oe.p=2,o=Ue,Ue|=4;try{cne(e,t,n)}finally{Ue=o,Oe.p=r,ge.T=s}}qt=1,k4(),C4(),E4()}}function k4(){if(qt===1){qt=0;var e=Ma,t=jl,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=ge.T,ge.T=null;var s=Oe.p;Oe.p=2;var r=Ue;Ue|=4;try{u4(t,e);var i=Bx,o=q_(e.containerInfo),l=i.focusedElem,c=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&G_(l.ownerDocument.documentElement,l)){if(c!==null&&Kv(l)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var h=m.getSelection(),v=l.textContent.length,y=Math.min(c.start,v),w=c.end===void 0?y:Math.min(c.end,v);!h.extend&&y>w&&(o=w,w=y,y=o);var x=cN(l,y),p=cN(l,w);if(x&&p&&(h.rangeCount!==1||h.anchorNode!==x.node||h.anchorOffset!==x.offset||h.focusNode!==p.node||h.focusOffset!==p.offset)){var b=f.createRange();b.setStart(x.node,x.offset),h.removeAllRanges(),y>w?(h.addRange(b),h.extend(p.node,p.offset)):(b.setEnd(p.node,p.offset),h.addRange(b))}}}}for(f=[],h=l;h=h.parentNode;)h.nodeType===1&&f.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var j=f[l];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}hm=!!Ix,Bx=Ix=null}finally{Ue=r,Oe.p=s,ge.T=n}}e.current=t,qt=2}}function C4(){if(qt===2){qt=0;var e=Ma,t=jl,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=ge.T,ge.T=null;var s=Oe.p;Oe.p=2;var r=Ue;Ue|=4;try{i4(e,t.alternate,t)}finally{Ue=r,Oe.p=s,ge.T=n}}qt=3}}function E4(){if(qt===4||qt===3){qt=0,Iee();var e=Ma,t=jl,n=Wo,s=x4;t.subtreeFlags&10256||t.flags&10256?qt=5:(qt=0,jl=Ma=null,A4(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(_a=null),Vv(n),t=t.stateNode,Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(zu,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=ge.T,r=Oe.p,Oe.p=2,ge.T=null;try{for(var i=e.onRecoverableError,o=0;o<s.length;o++){var l=s[o];i(l.value,{componentStack:l.stack})}}finally{ge.T=t,Oe.p=r}}Wo&3&&Ch(),ar(e),r=e.pendingLanes,n&4194090&&r&42?e===zx?Mc++:(Mc=0,zx=e):Mc=0,Zu(0)}}function A4(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Hu(t)))}function Ch(e){return k4(),C4(),E4(),T4()}function T4(){if(qt!==5)return!1;var e=Ma,t=Dx;Dx=0;var n=Vv(Wo),s=ge.T,r=Oe.p;try{Oe.p=32>n?32:n,ge.T=null,n=Lx,Lx=null;var i=Ma,o=Wo;if(qt=0,jl=Ma=null,Wo=0,Ue&6)throw Error(W(331));var l=Ue;if(Ue|=4,g4(i.current),f4(i,i.current,o,n),Ue=l,Zu(0,!1),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(zu,i)}catch{}return!0}finally{Oe.p=r,ge.T=s,A4(e,t)}}function UN(e,t,n){t=Jn(n,t),t=Ax(e.stateNode,t,2),e=Ta(e,t,2),e!==null&&($u(e,2),ar(e))}function Ye(e,t,n){if(e.tag===3)UN(e,e,n);else for(;t!==null;){if(t.tag===3){UN(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(_a===null||!_a.has(s))){e=Jn(n,e),n=qM(2),s=Ta(t,n,2),s!==null&&(ZM(n,s,t,e),$u(s,2),ar(s));break}}t=t.return}}function Xg(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new fne;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(jy=!0,r.add(n),e=xne.bind(null,e,t,n),t.then(e,e))}function xne(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Qe===e&&(ze&n)===n&&(pt===4||pt===3&&(ze&62914560)===ze&&300>Ys()-Sy?!(Ue&2)&&Nl(e,0):Ny|=n,wl===ze&&(wl=0)),ar(e)}function _4(e,t){t===0&&(t=k_()),e=Fl(e,t),e!==null&&($u(e,t),ar(e))}function vne(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_4(e,n)}function yne(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(W(314))}s!==null&&s.delete(t),_4(e,n)}function bne(e,t){return Hv(e,t)}var om=null,bo=null,$x=!1,lm=!1,Wg=!1,ki=0;function ar(e){e!==bo&&e.next===null&&(bo===null?om=bo=e:bo=bo.next=e),lm=!0,$x||($x=!0,jne())}function Zu(e,t){if(!Wg&&lm){Wg=!0;do for(var n=!1,s=om;s!==null;){if(e!==0){var r=s.pendingLanes;if(r===0)var i=0;else{var o=s.suspendedLanes,l=s.pingedLanes;i=(1<<31-$n(42|e)+1)-1,i&=r&~(o&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,VN(s,i))}else i=ze,i=hh(s,s===Qe?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(i&3)||Pu(s,i)||(n=!0,VN(s,i));s=s.next}while(n);Wg=!1}}function wne(){M4()}function M4(){lm=$x=!1;var e=0;ki!==0&&(_ne()&&(e=ki),ki=0);for(var t=Ys(),n=null,s=om;s!==null;){var r=s.next,i=R4(s,t);i===0?(s.next=null,n===null?om=r:n.next=r,r===null&&(bo=n)):(n=s,(e!==0||i&3)&&(lm=!0)),s=r}Zu(e)}function R4(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var o=31-$n(i),l=1<<o,c=r[o];c===-1?(!(l&n)||l&s)&&(r[o]=Zee(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}if(t=Qe,n=ze,n=hh(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,n===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&jg(s),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Pu(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&jg(s),Vv(n)){case 2:case 8:n=j_;break;case 32:n=Uf;break;case 268435456:n=N_;break;default:n=Uf}return s=D4.bind(null,e),n=Hv(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&jg(s),e.callbackPriority=2,e.callbackNode=null,2}function D4(e,t){if(qt!==0&&qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ch()&&e.callbackNode!==n)return null;var s=ze;return s=hh(e,e===Qe?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(y4(e,s,t),R4(e,Ys()),e.callbackNode!=null&&e.callbackNode===n?D4.bind(null,e):null)}function VN(e,t){if(Ch())return null;y4(e,t,!0)}function jne(){Rne(function(){Ue&6?Hv(w_,wne):M4()})}function Cy(){return ki===0&&(ki=S_()),ki}function GN(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qd(""+e)}function qN(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Nne(e,t,n,s,r){if(t==="submit"&&n&&n.stateNode===r){var i=GN((r[jn]||null).action),o=s.submitter;o&&(t=(t=o[jn]||null)?GN(t.formAction):o.getAttribute("formAction"),t!==null&&(i=t,o=null));var l=new gh("action","action",null,s,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ki!==0){var c=o?qN(r,o):new FormData(r);Cx(n,{pending:!0,data:c,method:r.method,action:i},null,c)}}else typeof i=="function"&&(l.preventDefault(),c=o?qN(r,o):new FormData(r),Cx(n,{pending:!0,data:c,method:r.method,action:i},i,c))},currentTarget:r}]})}}for(var Kg=0;Kg<hx.length;Kg++){var Qg=hx[Kg],Sne=Qg.toLowerCase(),kne=Qg[0].toUpperCase()+Qg.slice(1);Ms(Sne,"on"+kne)}Ms(Y_,"onAnimationEnd");Ms(X_,"onAnimationIteration");Ms(W_,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(Hte,"onTransitionRun");Ms(Ute,"onTransitionStart");Ms(Vte,"onTransitionCancel");Ms(K_,"onTransitionEnd");gl("onMouseEnter",["mouseout","mouseover"]);gl("onMouseLeave",["mouseout","mouseover"]);gl("onPointerEnter",["pointerout","pointerover"]);gl("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cne=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(iu));function L4(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;i=l,r.currentTarget=u;try{i(r)}catch(d){tm(d)}r.currentTarget=null,i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;i=l,r.currentTarget=u;try{i(r)}catch(d){tm(d)}r.currentTarget=null,i=c}}}}function Ae(e,t){var n=t[ox];n===void 0&&(n=t[ox]=new Set);var s=e+"__bubble";n.has(s)||(z4(t,e,2,!1),n.add(s))}function Jg(e,t,n){var s=0;t&&(s|=4),z4(n,e,s,t)}var zd="_reactListening"+Math.random().toString(36).slice(2);function Ey(e){if(!e[zd]){e[zd]=!0,T_.forEach(function(n){n!=="selectionchange"&&(Cne.has(n)||Jg(n,!1,e),Jg(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zd]||(t[zd]=!0,Jg("selectionchange",!1,t))}}function z4(e,t,n,s){switch(Z4(t)){case 2:var r=Jne;break;case 8:r=ese;break;default:r=My}n=r.bind(null,t,n,e),r=void 0,!dx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function ep(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===r)return;o=o.return}for(;l!==null;){if(o=ko(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){s=i=o;continue e}l=l.parentNode}}s=s.return}$_(function(){var u=i,d=Zv(n),f=[];e:{var m=Q_.get(e);if(m!==void 0){var h=gh,v=e;switch(e){case"keypress":if(ef(n)===0)break e;case"keydown":case"keyup":h=bte;break;case"focusin":v="focus",h=_g;break;case"focusout":v="blur",h=_g;break;case"beforeblur":case"afterblur":h=_g;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Jj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=lte;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Nte;break;case Y_:case X_:case W_:h=dte;break;case K_:h=kte;break;case"scroll":case"scrollend":h=ite;break;case"wheel":h=Ete;break;case"copy":case"cut":case"paste":h=mte;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=tN;break;case"toggle":case"beforetoggle":h=Tte}var y=(t&4)!==0,w=!y&&(e==="scroll"||e==="scrollend"),x=y?m!==null?m+"Capture":null:m;y=[];for(var p=u,b;p!==null;){var j=p;if(b=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||b===null||x===null||(j=eu(p,x),j!=null&&y.push(ou(p,j,b))),w)break;p=p.return}0<y.length&&(m=new h(m,v,null,n,d),f.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==ux&&(v=n.relatedTarget||n.fromElement)&&(ko(v)||v[Il]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(v=n.relatedTarget||n.toElement,h=u,v=v?ko(v):null,v!==null&&(w=Lu(v),y=v.tag,v!==w||y!==5&&y!==27&&y!==6)&&(v=null)):(h=null,v=u),h!==v)){if(y=Jj,j="onMouseLeave",x="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=tN,j="onPointerLeave",x="onPointerEnter",p="pointer"),w=h==null?m:gc(h),b=v==null?m:gc(v),m=new y(j,p+"leave",h,n,d),m.target=w,m.relatedTarget=b,j=null,ko(d)===u&&(y=new y(x,p+"enter",v,n,d),y.target=b,y.relatedTarget=w,j=y),w=j,h&&v)t:{for(y=h,x=v,p=0,b=y;b;b=po(b))p++;for(b=0,j=x;j;j=po(j))b++;for(;0<p-b;)y=po(y),p--;for(;0<b-p;)x=po(x),b--;for(;p--;){if(y===x||x!==null&&y===x.alternate)break t;y=po(y),x=po(x)}y=null}else y=null;h!==null&&ZN(f,m,h,y,!1),v!==null&&w!==null&&ZN(f,w,v,y,!0)}}e:{if(m=u?gc(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var N=aN;else if(rN(m))if(U_)N=Ite;else{N=$te;var A=Pte}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&qv(u.elementType)&&(N=aN):N=Ote;if(N&&(N=N(e,u))){H_(f,N,n,d);break e}A&&A(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&cx(m,"number",m.value)}switch(A=u?gc(u):window,e){case"focusin":(rN(A)||A.contentEditable==="true")&&(Ao=A,fx=u,wc=null);break;case"focusout":wc=fx=Ao=null;break;case"mousedown":mx=!0;break;case"contextmenu":case"mouseup":case"dragend":mx=!1,uN(f,n,d);break;case"selectionchange":if(Fte)break;case"keydown":case"keyup":uN(f,n,d)}var k;if(Wv)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Eo?B_(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(I_&&n.locale!=="ko"&&(Eo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Eo&&(k=O_()):(ba=d,Yv="value"in ba?ba.value:ba.textContent,Eo=!0)),A=cm(u,C),0<A.length&&(C=new eN(C,e,null,n,d),f.push({event:C,listeners:A}),k?C.data=k:(k=F_(n),k!==null&&(C.data=k)))),(k=Mte?Rte(e,n):Dte(e,n))&&(C=cm(u,"onBeforeInput"),0<C.length&&(A=new eN("onBeforeInput","beforeinput",null,n,d),f.push({event:A,listeners:C}),A.data=k)),Nne(f,e,u,n,d)}L4(f,t)})}function ou(e,t,n){return{instance:e,listener:t,currentTarget:n}}function cm(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||i===null||(r=eu(e,n),r!=null&&s.unshift(ou(e,r,i)),r=eu(e,t),r!=null&&s.push(ou(e,r,i))),e.tag===3)return s;e=e.return}return[]}function po(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ZN(e,t,n,s,r){for(var i=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||u===null||(c=u,r?(u=eu(n,i),u!=null&&o.unshift(ou(n,u,c))):r||(u=eu(n,i),u!=null&&o.push(ou(n,u,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Ene=/\r\n?/g,Ane=/\u0000|\uFFFD/g;function YN(e){return(typeof e=="string"?e:""+e).replace(Ene,`
`).replace(Ane,"")}function P4(e,t){return t=YN(t),YN(e)===t}function Eh(){}function Ve(e,t,n,s,r,i){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||pl(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&pl(e,""+s);break;case"className":Ad(e,"class",s);break;case"tabIndex":Ad(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Ad(e,n,s);break;case"style":P_(e,s,i);break;case"data":if(t!=="object"){Ad(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Qd(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(t!=="input"&&Ve(e,t,"name",r.name,r,null),Ve(e,t,"formEncType",r.formEncType,r,null),Ve(e,t,"formMethod",r.formMethod,r,null),Ve(e,t,"formTarget",r.formTarget,r,null)):(Ve(e,t,"encType",r.encType,r,null),Ve(e,t,"method",r.method,r,null),Ve(e,t,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Qd(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=Eh);break;case"onScroll":s!=null&&Ae("scroll",e);break;case"onScrollEnd":s!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(W(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(W(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=Qd(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),Kd(e,"popover",s);break;case"xlinkActuate":hr(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":hr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":hr(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":hr(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":hr(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":hr(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":hr(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":hr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":hr(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Kd(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=rte.get(n)||n,Kd(e,n,s))}}function Ox(e,t,n,s,r,i){switch(n){case"style":P_(e,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(W(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(W(60));e.innerHTML=n}}break;case"children":typeof s=="string"?pl(e,s):(typeof s=="number"||typeof s=="bigint")&&pl(e,""+s);break;case"onScroll":s!=null&&Ae("scroll",e);break;case"onScrollEnd":s!=null&&Ae("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Eh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!__.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),i=e[jn]||null,i=i!=null?i[n]:null,typeof i=="function"&&e.removeEventListener(t,i,r),typeof s=="function")){typeof i!="function"&&i!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,r);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):Kd(e,n,s)}}}function Xt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var s=!1,r=!1,i;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(o!=null)switch(i){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(W(137,t));default:Ve(e,t,i,o,n,null)}}r&&Ve(e,t,"srcSet",n.srcSet,n,null),s&&Ve(e,t,"src",n.src,n,null);return;case"input":Ae("invalid",e);var l=i=o=r=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(d!=null)switch(s){case"name":r=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":i=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(W(137,t));break;default:Ve(e,t,s,d,n,null)}}D_(e,i,l,c,u,o,r,!1),Vf(e);return;case"select":Ae("invalid",e),s=o=i=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Ve(e,t,r,l,n,null)}t=i,n=o,e.multiple=!!s,t!=null?Vo(e,!!s,t,!1):n!=null&&Vo(e,!!s,n,!0);return;case"textarea":Ae("invalid",e),i=r=s=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":s=l;break;case"defaultValue":r=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(W(91));break;default:Ve(e,t,o,l,n,null)}z_(e,s,r,i),Vf(e);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ve(e,t,c,s,n,null)}return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(s=0;s<iu.length;s++)Ae(iu[s],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(W(137,t));default:Ve(e,t,u,s,n,null)}return;default:if(qv(t)){for(d in n)n.hasOwnProperty(d)&&(s=n[d],s!==void 0&&Ox(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Ve(e,t,l,s,n,null))}function Tne(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,o=null,l=null,c=null,u=null,d=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&f!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":c=f;default:s.hasOwnProperty(h)||Ve(e,t,h,null,s,f)}}for(var m in s){var h=s[m];if(f=n[m],s.hasOwnProperty(m)&&(h!=null||f!=null))switch(m){case"type":i=h;break;case"name":r=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":o=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(W(137,t));break;default:h!==f&&Ve(e,t,m,h,s,f)}}lx(e,o,l,c,u,d,i,r);return;case"select":h=o=l=m=null;for(i in n)if(c=n[i],n.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":h=c;default:s.hasOwnProperty(i)||Ve(e,t,i,null,s,c)}for(r in s)if(i=s[r],c=n[r],s.hasOwnProperty(r)&&(i!=null||c!=null))switch(r){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Ve(e,t,r,i,s,c)}t=l,n=o,s=h,m!=null?Vo(e,!!n,m,!1):!!s!=!!n&&(t!=null?Vo(e,!!n,t,!0):Vo(e,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ve(e,t,l,null,s,r)}for(o in s)if(r=s[o],i=n[o],s.hasOwnProperty(o)&&(r!=null||i!=null))switch(o){case"value":m=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(W(91));break;default:r!==i&&Ve(e,t,o,r,s,i)}L_(e,m,h);return;case"option":for(var v in n)if(m=n[v],n.hasOwnProperty(v)&&m!=null&&!s.hasOwnProperty(v))switch(v){case"selected":e.selected=!1;break;default:Ve(e,t,v,null,s,m)}for(c in s)if(m=s[c],h=n[c],s.hasOwnProperty(c)&&m!==h&&(m!=null||h!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ve(e,t,c,m,s,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in n)m=n[y],n.hasOwnProperty(y)&&m!=null&&!s.hasOwnProperty(y)&&Ve(e,t,y,null,s,m);for(u in s)if(m=s[u],h=n[u],s.hasOwnProperty(u)&&m!==h&&(m!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(W(137,t));break;default:Ve(e,t,u,m,s,h)}return;default:if(qv(t)){for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!==void 0&&!s.hasOwnProperty(w)&&Ox(e,t,w,void 0,s,m);for(d in s)m=s[d],h=n[d],!s.hasOwnProperty(d)||m===h||m===void 0&&h===void 0||Ox(e,t,d,m,s,h);return}}for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!s.hasOwnProperty(x)&&Ve(e,t,x,null,s,m);for(f in s)m=s[f],h=n[f],!s.hasOwnProperty(f)||m===h||m==null&&h==null||Ve(e,t,f,m,s,h)}var Ix=null,Bx=null;function um(e){return e.nodeType===9?e:e.ownerDocument}function XN(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $4(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Fx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tp=null;function _ne(){var e=window.event;return e&&e.type==="popstate"?e===tp?!1:(tp=e,!0):(tp=null,!1)}var O4=typeof setTimeout=="function"?setTimeout:void 0,Mne=typeof clearTimeout=="function"?clearTimeout:void 0,WN=typeof Promise=="function"?Promise:void 0,Rne=typeof queueMicrotask=="function"?queueMicrotask:typeof WN<"u"?function(e){return WN.resolve(null).then(e).catch(Dne)}:O4;function Dne(e){setTimeout(function(){throw e})}function Ja(e){return e==="head"}function KN(e,t){var n=t,s=0,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(0<s&&8>s){n=s;var o=e.ownerDocument;if(n&1&&Rc(o.documentElement),n&2&&Rc(o.body),n&4)for(n=o.head,Rc(n),o=n.firstChild;o;){var l=o.nextSibling,c=o.nodeName;o[Ou]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=l}}if(r===0){e.removeChild(i),fu(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:s=n.charCodeAt(0)-48;else s=0;n=i}while(n);fu(t)}function Hx(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Hx(n),Gv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Lne(e,t,n,s){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Ou])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Ss(e.nextSibling),e===null)break}return null}function zne(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ss(e.nextSibling),e===null))return null;return e}function Ux(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Pne(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Ss(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Vx=null;function QN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function I4(e,t,n){switch(t=um(n),e){case"html":if(e=t.documentElement,!e)throw Error(W(452));return e;case"head":if(e=t.head,!e)throw Error(W(453));return e;case"body":if(e=t.body,!e)throw Error(W(454));return e;default:throw Error(W(451))}}function Rc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Gv(e)}var us=new Map,JN=new Set;function dm(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Kr=Oe.d;Oe.d={f:$ne,r:One,D:Ine,C:Bne,L:Fne,m:Hne,X:Vne,S:Une,M:Gne};function $ne(){var e=Kr.f(),t=Sh();return e||t}function One(e){var t=Bl(e);t!==null&&t.tag===5&&t.type==="form"?RM(t):Kr.r(e)}var Ul=typeof document>"u"?null:document;function B4(e,t,n){var s=Ul;if(s&&typeof t=="string"&&t){var r=Qn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),JN.has(r)||(JN.add(r),e={rel:e,crossOrigin:n,href:t},s.querySelector(r)===null&&(t=s.createElement("link"),Xt(t,"link",e),Ot(t),s.head.appendChild(t)))}}function Ine(e){Kr.D(e),B4("dns-prefetch",e,null)}function Bne(e,t){Kr.C(e,t),B4("preconnect",e,t)}function Fne(e,t,n){Kr.L(e,t,n);var s=Ul;if(s&&e&&t){var r='link[rel="preload"][as="'+Qn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Qn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Qn(n.imageSizes)+'"]')):r+='[href="'+Qn(e)+'"]';var i=r;switch(t){case"style":i=Sl(e);break;case"script":i=Vl(e)}us.has(i)||(e=nt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),us.set(i,e),s.querySelector(r)!==null||t==="style"&&s.querySelector(Yu(i))||t==="script"&&s.querySelector(Xu(i))||(t=s.createElement("link"),Xt(t,"link",e),Ot(t),s.head.appendChild(t)))}}function Hne(e,t){Kr.m(e,t);var n=Ul;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Qn(s)+'"][href="'+Qn(e)+'"]',i=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Vl(e)}if(!us.has(i)&&(e=nt({rel:"modulepreload",href:e},t),us.set(i,e),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xu(i)))return}s=n.createElement("link"),Xt(s,"link",e),Ot(s),n.head.appendChild(s)}}}function Une(e,t,n){Kr.S(e,t,n);var s=Ul;if(s&&e){var r=Uo(s).hoistableStyles,i=Sl(e);t=t||"default";var o=r.get(i);if(!o){var l={loading:0,preload:null};if(o=s.querySelector(Yu(i)))l.loading=5;else{e=nt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=us.get(i))&&Ay(e,n);var c=o=s.createElement("link");Ot(c),Xt(c,"link",e),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,lf(o,t,s)}o={type:"stylesheet",instance:o,count:1,state:l},r.set(i,o)}}}function Vne(e,t){Kr.X(e,t);var n=Ul;if(n&&e){var s=Uo(n).hoistableScripts,r=Vl(e),i=s.get(r);i||(i=n.querySelector(Xu(r)),i||(e=nt({src:e,async:!0},t),(t=us.get(r))&&Ty(e,t),i=n.createElement("script"),Ot(i),Xt(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function Gne(e,t){Kr.M(e,t);var n=Ul;if(n&&e){var s=Uo(n).hoistableScripts,r=Vl(e),i=s.get(r);i||(i=n.querySelector(Xu(r)),i||(e=nt({src:e,async:!0,type:"module"},t),(t=us.get(r))&&Ty(e,t),i=n.createElement("script"),Ot(i),Xt(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function e1(e,t,n,s){var r=(r=Ea.current)?dm(r):null;if(!r)throw Error(W(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Sl(n.href),n=Uo(r).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Sl(n.href);var i=Uo(r).hoistableStyles,o=i.get(e);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,o),(i=r.querySelector(Yu(e)))&&!i._p&&(o.instance=i,o.state.loading=5),us.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},us.set(e,n),i||qne(r,e,n,o.state))),t&&s===null)throw Error(W(528,""));return o}if(t&&s!==null)throw Error(W(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Vl(n),n=Uo(r).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(W(444,e))}}function Sl(e){return'href="'+Qn(e)+'"'}function Yu(e){return'link[rel="stylesheet"]['+e+"]"}function F4(e){return nt({},e,{"data-precedence":e.precedence,precedence:null})}function qne(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Xt(t,"link",n),Ot(t),e.head.appendChild(t))}function Vl(e){return'[src="'+Qn(e)+'"]'}function Xu(e){return"script[async]"+e}function t1(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Qn(n.href)+'"]');if(s)return t.instance=s,Ot(s),s;var r=nt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ot(s),Xt(s,"style",r),lf(s,n.precedence,e),t.instance=s;case"stylesheet":r=Sl(n.href);var i=e.querySelector(Yu(r));if(i)return t.state.loading|=4,t.instance=i,Ot(i),i;s=F4(n),(r=us.get(r))&&Ay(s,r),i=(e.ownerDocument||e).createElement("link"),Ot(i);var o=i;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Xt(i,"link",s),t.state.loading|=4,lf(i,n.precedence,e),t.instance=i;case"script":return i=Vl(n.src),(r=e.querySelector(Xu(i)))?(t.instance=r,Ot(r),r):(s=n,(r=us.get(i))&&(s=nt({},n),Ty(s,r)),e=e.ownerDocument||e,r=e.createElement("script"),Ot(r),Xt(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(W(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,lf(s,n.precedence,e));return t.instance}function lf(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,i=r,o=0;o<s.length;o++){var l=s[o];if(l.dataset.precedence===t)i=l;else if(i!==r)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Ay(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ty(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var cf=null;function n1(e,t,n){if(cf===null){var s=new Map,r=cf=new Map;r.set(n,s)}else r=cf,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var i=n[r];if(!(i[Ou]||i[tn]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var o=i.getAttribute(t)||"";o=e+o;var l=s.get(o);l?l.push(i):s.set(o,[i])}}return s}function s1(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Zne(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function H4(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var lu=null;function Yne(){}function Xne(e,t,n){if(lu===null)throw Error(W(475));var s=lu;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Sl(n.href),i=e.querySelector(Yu(r));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=fm.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=i,Ot(i);return}i=e.ownerDocument||e,n=F4(n),(r=us.get(r))&&Ay(n,r),i=i.createElement("link"),Ot(i);var o=i;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Xt(i,"link",n),t.instance=i}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=fm.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function Wne(){if(lu===null)throw Error(W(475));var e=lu;return e.stylesheets&&e.count===0&&Gx(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Gx(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function fm(){if(this.count--,this.count===0){if(this.stylesheets)Gx(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var mm=null;function Gx(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,mm=new Map,t.forEach(Kne,e),mm=null,fm.call(e))}function Kne(e,t){if(!(t.state.loading&4)){var n=mm.get(e);if(n)var s=n.get(null);else{n=new Map,mm.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var o=r[i];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),s=o)}s&&n.set(null,s)}r=t.instance,o=r.getAttribute("data-precedence"),i=n.get(o)||s,i===s&&n.set(null,r),n.set(o,r),this.count++,s=fm.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),i?i.parentNode.insertBefore(r,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var cu={$$typeof:jr,Provider:null,Consumer:null,_currentValue:yi,_currentValue2:yi,_threadCount:0};function Qne(e,t,n,s,r,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ng(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ng(0),this.hiddenUpdates=Ng(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function U4(e,t,n,s,r,i,o,l,c,u,d,f){return e=new Qne(e,t,n,o,l,c,u,f),t=1,i===!0&&(t|=24),i=Ln(3,null,null,t),e.current=i,i.stateNode=e,t=sy(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:t},ay(i),e}function V4(e){return e?(e=Mo,e):Mo}function G4(e,t,n,s,r,i){r=V4(r),s.context===null?s.context=r:s.pendingContext=r,s=Aa(t),s.payload={element:n},i=i===void 0?null:i,i!==null&&(s.callback=i),n=Ta(e,s,t),n!==null&&(In(n,e,t),Sc(n,e,t))}function r1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function _y(e,t){r1(e,t),(e=e.alternate)&&r1(e,t)}function q4(e){if(e.tag===13){var t=Fl(e,67108864);t!==null&&In(t,e,67108864),_y(e,67108864)}}var hm=!0;function Jne(e,t,n,s){var r=ge.T;ge.T=null;var i=Oe.p;try{Oe.p=2,My(e,t,n,s)}finally{Oe.p=i,ge.T=r}}function ese(e,t,n,s){var r=ge.T;ge.T=null;var i=Oe.p;try{Oe.p=8,My(e,t,n,s)}finally{Oe.p=i,ge.T=r}}function My(e,t,n,s){if(hm){var r=qx(s);if(r===null)ep(e,t,s,gm,n),a1(e,s);else if(nse(r,e,t,n,s))s.stopPropagation();else if(a1(e,s),t&4&&-1<tse.indexOf(e)){for(;r!==null;){var i=Bl(r);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var o=oi(i.pendingLanes);if(o!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-$n(o);l.entanglements[1]|=c,o&=~c}ar(i),!(Ue&6)&&(am=Ys()+500,Zu(0))}}break;case 13:l=Fl(i,2),l!==null&&In(l,i,2),Sh(),_y(i,2)}if(i=qx(s),i===null&&ep(e,t,s,gm,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else ep(e,t,s,null,n)}}function qx(e){return e=Zv(e),Ry(e)}var gm=null;function Ry(e){if(gm=null,e=ko(e),e!==null){var t=Lu(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=x_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return gm=e,null}function Z4(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bee()){case w_:return 2;case j_:return 8;case Uf:case Fee:return 32;case N_:return 268435456;default:return 32}default:return 32}}var Zx=!1,Ra=null,Da=null,La=null,uu=new Map,du=new Map,pa=[],tse="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function a1(e,t){switch(e){case"focusin":case"focusout":Ra=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":uu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(t.pointerId)}}function lc(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Bl(t),t!==null&&q4(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function nse(e,t,n,s,r){switch(t){case"focusin":return Ra=lc(Ra,e,t,n,s,r),!0;case"dragenter":return Da=lc(Da,e,t,n,s,r),!0;case"mouseover":return La=lc(La,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return uu.set(i,lc(uu.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,du.set(i,lc(du.get(i)||null,e,t,n,s,r)),!0}return!1}function Y4(e){var t=ko(e.target);if(t!==null){var n=Lu(t);if(n!==null){if(t=n.tag,t===13){if(t=x_(n),t!==null){e.blockedOn=t,Xee(e.priority,function(){if(n.tag===13){var s=On();s=Uv(s);var r=Fl(n,s);r!==null&&In(r,n,s),_y(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qx(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);ux=s,n.target.dispatchEvent(s),ux=null}else return t=Bl(n),t!==null&&q4(t),e.blockedOn=n,!1;t.shift()}return!0}function i1(e,t,n){uf(e)&&n.delete(t)}function sse(){Zx=!1,Ra!==null&&uf(Ra)&&(Ra=null),Da!==null&&uf(Da)&&(Da=null),La!==null&&uf(La)&&(La=null),uu.forEach(i1),du.forEach(i1)}function Pd(e,t){e.blockedOn===t&&(e.blockedOn=null,Zx||(Zx=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,sse)))}var $d=null;function o1(e){$d!==e&&($d=e,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,function(){$d===e&&($d=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],r=e[t+2];if(typeof s!="function"){if(Ry(s||n)===null)continue;break}var i=Bl(n);i!==null&&(e.splice(t,3),t-=3,Cx(i,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function fu(e){function t(c){return Pd(c,e)}Ra!==null&&Pd(Ra,e),Da!==null&&Pd(Da,e),La!==null&&Pd(La,e),uu.forEach(t),du.forEach(t);for(var n=0;n<pa.length;n++){var s=pa[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<pa.length&&(n=pa[0],n.blockedOn===null);)Y4(n),n.blockedOn===null&&pa.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],i=n[s+1],o=r[jn]||null;if(typeof i=="function")o||o1(n);else if(o){var l=null;if(i&&i.hasAttribute("formAction")){if(r=i,o=i[jn]||null)l=o.formAction;else if(Ry(r)!==null)continue}else l=o.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),o1(n)}}}function Dy(e){this._internalRoot=e}Ah.prototype.render=Dy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));var n=t.current,s=On();G4(n,s,e,t,null,null)};Ah.prototype.unmount=Dy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;G4(e.current,2,null,e,null,null),Sh(),t[Il]=null}};function Ah(e){this._internalRoot=e}Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=A_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<pa.length&&t!==0&&t<pa[n].priority;n++);pa.splice(n,0,e),n===0&&Y4(e)}};var l1=g_.version;if(l1!=="19.1.0")throw Error(W(527,l1,"19.1.0"));Oe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=Dee(t),e=e!==null?v_(e):null,e=e===null?null:e.stateNode,e};var rse={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{zu=Od.inject(rse),Pn=Od}catch{}}mh.createRoot=function(e,t){if(!p_(e))throw Error(W(299));var n=!1,s="",r=UM,i=VM,o=GM,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=U4(e,1,!1,null,null,n,s,r,i,o,l,null),e[Il]=t.current,Ey(e),new Dy(t)};mh.hydrateRoot=function(e,t,n){if(!p_(e))throw Error(W(299));var s=!1,r="",i=UM,o=VM,l=GM,c=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),t=U4(e,1,!0,t,n??null,s,r,i,o,l,c,u),t.context=V4(null),n=t.current,s=On(),s=Uv(s),r=Aa(s),r.callback=null,Ta(n,r,s),n=s,t.current.lanes=n,$u(t,n),ar(t),e[Il]=t.current,Ey(e),new Ah(t)};mh.version="19.1.0";function X4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X4)}catch(e){console.error(e)}}X4(),f_.exports=mh;var ase=f_.exports;ase.createRoot(document.getElementById("root")).render(a.jsx(g.StrictMode,{children:a.jsx(z8,{showLoadingIndicator:!0,children:a.jsx($$,{children:a.jsx(_ee,{})})})}));export{Dl as a,Ui as b,ks as c,Vi as d,Gi as e,Wt as g,x0 as u};
