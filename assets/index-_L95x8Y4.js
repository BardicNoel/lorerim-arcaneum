var yR=Object.defineProperty;var bR=(e,t,n)=>t in e?yR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ge=(e,t,n)=>bR(e,typeof t!="symbol"?t+"":t,n);function wR(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function vx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jN={exports:{}},Gf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jR=Symbol.for("react.transitional.element"),NR=Symbol.for("react.fragment");function NN(e,t,n){var s=null;if(n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:jR,type:e,key:s,ref:t!==void 0?t:null,props:n}}Gf.Fragment=NR;Gf.jsx=NN;Gf.jsxs=NN;jN.exports=Gf;var a=jN.exports;const Lt={CONTENT:1,DROPDOWN:100,AUTOCOMPLETE:120,TOOLTIP:150,MODAL:200,DRAWER:202,HEADER:50,SIDEBAR:60,STICKY:40};var SN={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx=Symbol.for("react.transitional.element"),SR=Symbol.for("react.portal"),kR=Symbol.for("react.fragment"),CR=Symbol.for("react.strict_mode"),ER=Symbol.for("react.profiler"),_R=Symbol.for("react.consumer"),AR=Symbol.for("react.context"),TR=Symbol.for("react.forward_ref"),MR=Symbol.for("react.suspense"),RR=Symbol.for("react.memo"),kN=Symbol.for("react.lazy"),ly=Symbol.iterator;function DR(e){return e===null||typeof e!="object"?null:(e=ly&&e[ly]||e["@@iterator"],typeof e=="function"?e:null)}var CN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EN=Object.assign,_N={};function rl(e,t,n){this.props=e,this.context=t,this.refs=_N,this.updater=n||CN}rl.prototype.isReactComponent={};rl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function AN(){}AN.prototype=rl.prototype;function bx(e,t,n){this.props=e,this.context=t,this.refs=_N,this.updater=n||CN}var wx=bx.prototype=new AN;wx.constructor=bx;EN(wx,rl.prototype);wx.isPureReactComponent=!0;var cy=Array.isArray,et={H:null,A:null,T:null,S:null,V:null},TN=Object.prototype.hasOwnProperty;function jx(e,t,n,s,r,i){return n=i.ref,{$$typeof:yx,type:e,key:t,ref:n!==void 0?n:null,props:i}}function zR(e,t){return jx(e.type,t,void 0,void 0,void 0,e.props)}function Nx(e){return typeof e=="object"&&e!==null&&e.$$typeof===yx}function LR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var uy=/\/+/g;function eh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?LR(""+e.key):t.toString(36)}function dy(){}function $R(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(dy,dy):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Zi(e,t,n,s,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yx:case SR:o=!0;break;case kN:return o=e._init,Zi(o(e._payload),t,n,s,r)}}if(o)return r=r(e),o=s===""?"."+eh(e,0):s,cy(r)?(n="",o!=null&&(n=o.replace(uy,"$&/")+"/"),Zi(r,t,n,"",function(u){return u})):r!=null&&(Nx(r)&&(r=zR(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(uy,"$&/")+"/")+o)),t.push(r)),1;o=0;var l=s===""?".":s+":";if(cy(e))for(var c=0;c<e.length;c++)s=e[c],i=l+eh(s,c),o+=Zi(s,t,n,i,r);else if(c=DR(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,i=l+eh(s,c++),o+=Zi(s,t,n,i,r);else if(i==="object"){if(typeof e.then=="function")return Zi($R(e),t,n,s,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function Tu(e,t,n){if(e==null)return e;var s=[],r=0;return Zi(e,s,"","",function(i){return t.call(n,i,r++)}),s}function PR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fy=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function OR(){}Ne.Children={map:Tu,forEach:function(e,t,n){Tu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tu(e,function(){t++}),t},toArray:function(e){return Tu(e,function(t){return t})||[]},only:function(e){if(!Nx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=rl;Ne.Fragment=kR;Ne.Profiler=ER;Ne.PureComponent=bx;Ne.StrictMode=CR;Ne.Suspense=MR;Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=et;Ne.__COMPILER_RUNTIME={__proto__:null,c:function(e){return et.H.useMemoCache(e)}};Ne.cache=function(e){return function(){return e.apply(null,arguments)}};Ne.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=EN({},e.props),r=e.key,i=void 0;if(t!=null)for(o in t.ref!==void 0&&(i=void 0),t.key!==void 0&&(r=""+t.key),t)!TN.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(s[o]=t[o]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}return jx(e.type,r,void 0,void 0,i,s)};Ne.createContext=function(e){return e={$$typeof:AR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:_R,_context:e},e};Ne.createElement=function(e,t,n){var s,r={},i=null;if(t!=null)for(s in t.key!==void 0&&(i=""+t.key),t)TN.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(r[s]=t[s]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)r[s]===void 0&&(r[s]=o[s]);return jx(e,i,void 0,void 0,null,r)};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:TR,render:e}};Ne.isValidElement=Nx;Ne.lazy=function(e){return{$$typeof:kN,_payload:{_status:-1,_result:e},_init:PR}};Ne.memo=function(e,t){return{$$typeof:RR,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=et.T,n={};et.T=n;try{var s=e(),r=et.S;r!==null&&r(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(OR,fy)}catch(i){fy(i)}finally{et.T=t}};Ne.unstable_useCacheRefresh=function(){return et.H.useCacheRefresh()};Ne.use=function(e){return et.H.use(e)};Ne.useActionState=function(e,t,n){return et.H.useActionState(e,t,n)};Ne.useCallback=function(e,t){return et.H.useCallback(e,t)};Ne.useContext=function(e){return et.H.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e,t){return et.H.useDeferredValue(e,t)};Ne.useEffect=function(e,t,n){var s=et.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)};Ne.useId=function(){return et.H.useId()};Ne.useImperativeHandle=function(e,t,n){return et.H.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return et.H.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return et.H.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return et.H.useMemo(e,t)};Ne.useOptimistic=function(e,t){return et.H.useOptimistic(e,t)};Ne.useReducer=function(e,t,n){return et.H.useReducer(e,t,n)};Ne.useRef=function(e){return et.H.useRef(e)};Ne.useState=function(e){return et.H.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return et.H.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return et.H.useTransition()};Ne.version="19.1.0";SN.exports=Ne;var g=SN.exports;const $=vx(g),MN=wR({__proto__:null,default:$},[g]);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IR=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),my=e=>{const t=IR(e);return t.charAt(0).toUpperCase()+t.slice(1)},RN=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),HR=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...FR,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:RN("lucide",r),...!i&&!HR(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>g.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(e,t)=>{const n=g.forwardRef(({className:s,...r},i)=>g.createElement(UR,{ref:i,iconNode:t,className:RN(`lucide-${BR(my(e))}`,`lucide-${e}`,s),...r}));return n.displayName=my(e),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Eg=oe("arrow-left",VR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ZR=oe("arrow-right",qR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Na=oe("book-open",GR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],_o=oe("brain",YR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mc=oe("check",XR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],KR=oe("chef-hat",WR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_n=oe("chevron-down",QR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Sx=oe("chevron-left",JR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qc=oe("chevron-right",e4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],n4=oe("chevron-up",t4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ao=oe("circle-alert",s4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Id=oe("circle-check-big",r4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],i4=oe("circle-x",a4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kx=oe("circle",o4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Za=oe("clock",l4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],u4=oe("copy",c4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Cx=oe("droplets",d4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],m4=oe("ellipsis-vertical",f4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Sa=oe("external-link",h4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],al=oe("eye",g4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],DN=oe("file-text",p4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],il=oe("flame",x4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],Ex=oe("ghost",v4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ol=oe("grid-3x3",y4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],To=oe("hand",b4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Os=oe("heart",w4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],zN=oe("house",j4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Mo=oe("info",N4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],k4=oe("layout-grid",S4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],pi=oe("list",C4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],LN=oe("map",E4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],A4=oe("menu",_4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],M4=oe("message-square",T4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M5 12h14",key:"1ays0h"}]],Wl=oe("minus",R4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],z4=oe("monitor",D4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],$4=oe("moon",L4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],O4=oe("pen-line",P4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ia=oe("plus",B4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],xr=oe("rotate-ccw",I4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],F4=oe("search-x",H4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ro=oe("search",U4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_g=oe("settings",V4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Z4=oe("share-2",q4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],at=oe("shield",G4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],oa=oe("sparkles",Y4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ze=oe("star",X4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],hy=oe("sun",W4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],ti=oe("sword",K4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],$N=oe("tag",Q4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ss=oe("target",J4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],t3=oe("trash-2",e3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],s3=oe("trees",n3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],gy=oe("trending-down",r3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ag=oe("trending-up",a3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hc=oe("triangle-alert",i3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],l3=oe("user-check",o3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hd=oe("user",c3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],PN=oe("users",u3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],f3=oe("utensils",d3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],h3=oe("wine",m3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dt=oe("x",g3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],An=oe("zap",p3);var _x={};Object.defineProperty(_x,"__esModule",{value:!0});_x.parse=N3;_x.serialize=S3;const x3=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,v3=/^[\u0021-\u003A\u003C-\u007E]*$/,y3=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,b3=/^[\u0020-\u003A\u003D-\u007E]*$/,w3=Object.prototype.toString,j3=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function N3(e,t){const n=new j3,s=e.length;if(s<2)return n;const r=(t==null?void 0:t.decode)||k3;let i=0;do{const o=e.indexOf("=",i);if(o===-1)break;const l=e.indexOf(";",i),c=l===-1?s:l;if(o>c){i=e.lastIndexOf(";",o-1)+1;continue}const u=py(e,i,o),d=xy(e,o,u),f=e.slice(u,d);if(n[f]===void 0){let m=py(e,o+1,c),h=xy(e,c,m);const p=r(e.slice(m,h));n[f]=p}i=c+1}while(i<s);return n}function py(e,t,n){do{const s=e.charCodeAt(t);if(s!==32&&s!==9)return t}while(++t<n);return n}function xy(e,t,n){for(;t>n;){const s=e.charCodeAt(--t);if(s!==32&&s!==9)return t+1}return n}function S3(e,t,n){const s=(n==null?void 0:n.encode)||encodeURIComponent;if(!x3.test(e))throw new TypeError(`argument name is invalid: ${e}`);const r=s(t);if(!v3.test(r))throw new TypeError(`argument val is invalid: ${t}`);let i=e+"="+r;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!y3.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!b3.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!C3(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function k3(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function C3(e){return w3.call(e)==="[object Date]"}var vy="popstate";function E3(e={}){function t(r,i){let{pathname:o="/",search:l="",hash:c=""}=xi(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Tg("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){let o=r.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=r.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:gc(i))}function s(r,i){Gn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return A3(t,n,s,e)}function it(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _3(){return Math.random().toString(36).substring(2,10)}function yy(e,t){return{usr:e.state,key:e.key,idx:t}}function Tg(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?xi(t):t,state:n,key:t&&t.key||s||_3()}}function gc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function xi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function A3(e,t,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let b=d(),x=b==null?null:b-u;u=b,c&&c({action:l,location:v.location,delta:x})}function m(b,x){l="PUSH";let y=Tg(v.location,b,x);n&&n(y,b),u=d()+1;let w=yy(y,u),j=v.createHref(y);try{o.pushState(w,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(j)}i&&c&&c({action:l,location:v.location,delta:1})}function h(b,x){l="REPLACE";let y=Tg(v.location,b,x);n&&n(y,b),u=d();let w=yy(y,u),j=v.createHref(y);o.replaceState(w,"",j),i&&c&&c({action:l,location:v.location,delta:0})}function p(b){return T3(b)}let v={get action(){return l},get location(){return e(r,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(vy,f),c=b,()=>{r.removeEventListener(vy,f),c=null}},createHref(b){return t(r,b)},createURL:p,encodeLocation(b){let x=p(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:h,go(b){return o.go(b)}};return v}function T3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),it(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:gc(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function ON(e,t,n="/"){return M3(e,t,n,!1)}function M3(e,t,n,s){let r=typeof t=="string"?xi(t):t,i=vr(r.pathname||"/",n);if(i==null)return null;let o=BN(e);R3(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=U3(i);l=H3(o[c],u,s)}return l}function BN(e,t=[],n=[],s=""){let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(it(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let u=mr([s,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(it(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),BN(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:B3(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of IN(i.path))r(i,o,c)}),t}function IN(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=IN(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function R3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:I3(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var D3=/^:[\w-]+$/,z3=3,L3=2,$3=1,P3=10,O3=-2,by=e=>e==="*";function B3(e,t){let n=e.split("/"),s=n.length;return n.some(by)&&(s+=O3),t&&(s+=L3),n.filter(r=>!by(r)).reduce((r,i)=>r+(D3.test(i)?z3:i===""?$3:P3),s)}function I3(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function H3(e,t,n=!1){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Fd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!s[s.length-1].route.index&&(f=Fd({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:mr([i,f.pathname]),pathnameBase:G3(mr([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=mr([i,f.pathnameBase]))}return o}function Fd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=F3(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let p=l[m]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const h=l[m];return f&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function F3(e,t=!1,n=!0){Gn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function U3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function vr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function V3(e,t="/"){let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?xi(e):e;return{pathname:n?n.startsWith("/")?n:q3(n,t):t,search:Y3(s),hash:X3(r)}}function q3(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function th(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Z3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function HN(e){let t=Z3(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function FN(e,t,n,s=!1){let r;typeof e=="string"?r=xi(e):(r={...e},it(!r.pathname||!r.pathname.includes("?"),th("?","pathname","search",r)),it(!r.pathname||!r.pathname.includes("#"),th("#","pathname","hash",r)),it(!r.search||!r.search.includes("#"),th("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=n;else{let f=t.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=V3(r,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var mr=e=>e.join("/").replace(/\/\/+/g,"/"),G3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,X3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function W3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var UN=["POST","PUT","PATCH","DELETE"];new Set(UN);var K3=["GET",...UN];new Set(K3);var ll=g.createContext(null);ll.displayName="DataRouter";var Yf=g.createContext(null);Yf.displayName="DataRouterState";var VN=g.createContext({isTransitioning:!1});VN.displayName="ViewTransition";var Q3=g.createContext(new Map);Q3.displayName="Fetchers";var J3=g.createContext(null);J3.displayName="Await";var Bs=g.createContext(null);Bs.displayName="Navigation";var Zc=g.createContext(null);Zc.displayName="Location";var Is=g.createContext({outlet:null,matches:[],isDataRoute:!1});Is.displayName="Route";var Ax=g.createContext(null);Ax.displayName="RouteError";function eD(e,{relative:t}={}){it(Gc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=g.useContext(Bs),{hash:r,pathname:i,search:o}=Yc(e,{relative:t}),l=i;return n!=="/"&&(l=i==="/"?n:mr([n,i])),s.createHref({pathname:l,search:o,hash:r})}function Gc(){return g.useContext(Zc)!=null}function Ar(){return it(Gc(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Zc).location}var qN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ZN(e){g.useContext(Bs).static||g.useLayoutEffect(e)}function lt(){let{isDataRoute:e}=g.useContext(Is);return e?gD():tD()}function tD(){it(Gc(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(ll),{basename:t,navigator:n}=g.useContext(Bs),{matches:s}=g.useContext(Is),{pathname:r}=Ar(),i=JSON.stringify(HN(s)),o=g.useRef(!1);return ZN(()=>{o.current=!0}),g.useCallback((c,u={})=>{if(Gn(o.current,qN),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=FN(c,JSON.parse(i),r,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:mr([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,i,r,e])}var nD=g.createContext(null);function sD(e){let t=g.useContext(Is).outlet;return t&&g.createElement(nD.Provider,{value:e},t)}function Yc(e,{relative:t}={}){let{matches:n}=g.useContext(Is),{pathname:s}=Ar(),r=JSON.stringify(HN(n));return g.useMemo(()=>FN(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function rD(e,t){return GN(e,t)}function GN(e,t,n,s){var x;it(Gc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=g.useContext(Bs),{matches:i}=g.useContext(Is),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let y=d&&d.path||"";YN(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=Ar(),m;if(t){let y=typeof t=="string"?xi(t):t;it(u==="/"||((x=y.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),m=y}else m=f;let h=m.pathname||"/",p=h;if(u!=="/"){let y=u.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=ON(e,{pathname:p});Gn(d||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Gn(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=cD(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:mr([u,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:mr([u,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,s);return t&&b?g.createElement(Zc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function aD(){let e=hD(),t=W3(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:r},n):null,o)}var iD=g.createElement(aD,null),oD=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(Is.Provider,{value:this.props.routeContext},g.createElement(Ax.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lD({routeContext:e,match:t,children:n}){let s=g.useContext(ll);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Is.Provider,{value:e},n)}function cD(e,t=[],n=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let r=e,i=n==null?void 0:n.errors;if(i!=null){let c=r.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);it(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<r.length;c++){let u=r[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=n,m=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||m){o=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,u,d)=>{let f,m=!1,h=null,p=null;n&&(f=i&&u.route.id?i[u.route.id]:void 0,h=u.route.errorElement||iD,o&&(l<0&&d===0?(YN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,p=null):l===d&&(m=!0,p=u.route.hydrateFallbackElement||null)));let v=t.concat(r.slice(0,d+1)),b=()=>{let x;return f?x=h:m?x=p:u.route.Component?x=g.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,g.createElement(lD,{match:u,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?g.createElement(oD,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}function Tx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uD(e){let t=g.useContext(ll);return it(t,Tx(e)),t}function dD(e){let t=g.useContext(Yf);return it(t,Tx(e)),t}function fD(e){let t=g.useContext(Is);return it(t,Tx(e)),t}function Mx(e){let t=fD(e),n=t.matches[t.matches.length-1];return it(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function mD(){return Mx("useRouteId")}function hD(){var s;let e=g.useContext(Ax),t=dD("useRouteError"),n=Mx("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function gD(){let{router:e}=uD("useNavigate"),t=Mx("useNavigate"),n=g.useRef(!1);return ZN(()=>{n.current=!0}),g.useCallback(async(r,i={})=>{Gn(n.current,qN),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var wy={};function YN(e,t,n){!t&&!wy[e]&&(wy[e]=!0,Gn(!1,n))}g.memo(pD);function pD({routes:e,future:t,state:n}){return GN(e,void 0,n,t)}function xD(e){return sD(e.context)}function yt(e){it(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vD({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:i=!1}){it(!Gc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:r,static:i,future:{}}),[o,r,i]);typeof n=="string"&&(n=xi(n));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:m="default"}=n,h=g.useMemo(()=>{let p=vr(c,o);return p==null?null:{location:{pathname:p,search:u,hash:d,state:f,key:m},navigationType:s}},[o,c,u,d,f,m,s]);return Gn(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:g.createElement(Bs.Provider,{value:l},g.createElement(Zc.Provider,{children:t,value:h}))}function yD({children:e,location:t}){return rD(Mg(e),t)}function Mg(e,t=[]){let n=[];return g.Children.forEach(e,(s,r)=>{if(!g.isValidElement(s))return;let i=[...t,r];if(s.type===g.Fragment){n.push.apply(n,Mg(s.props.children,i));return}it(s.type===yt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),it(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Mg(s.props.children,i)),n.push(o)}),n}var xd="get",vd="application/x-www-form-urlencoded";function Xf(e){return e!=null&&typeof e.tagName=="string"}function bD(e){return Xf(e)&&e.tagName.toLowerCase()==="button"}function wD(e){return Xf(e)&&e.tagName.toLowerCase()==="form"}function jD(e){return Xf(e)&&e.tagName.toLowerCase()==="input"}function ND(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function SD(e,t){return e.button===0&&(!t||t==="_self")&&!ND(e)}function Rg(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function kD(e,t){let n=Rg(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}var Mu=null;function CD(){if(Mu===null)try{new FormData(document.createElement("form"),0),Mu=!1}catch{Mu=!0}return Mu}var ED=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nh(e){return e!=null&&!ED.has(e)?(Gn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vd}"`),null):e}function _D(e,t){let n,s,r,i,o;if(wD(e)){let l=e.getAttribute("action");s=l?vr(l,t):null,n=e.getAttribute("method")||xd,r=nh(e.getAttribute("enctype"))||vd,i=new FormData(e)}else if(bD(e)||jD(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?vr(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||xd,r=nh(e.getAttribute("formenctype"))||nh(l.getAttribute("enctype"))||vd,i=new FormData(l,e),!CD()){let{name:u,type:d,value:f}=e;if(d==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,f)}}else{if(Xf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=xd,s=null,r=vd,o=e}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:o}}function Rx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function AD(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TD(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function MD(e,t,n){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let o=await AD(i,n);return o.links?o.links():[]}return[]}));return LD(s.flat(1).filter(TD).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function jy(e,t,n,s,r,i){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{var f;let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function RD(e,t,{includeHydrateFallback:n}={}){return DD(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function DD(e){return[...new Set(e)]}function zD(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function LD(e,t){let n=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(zD(r));return n.has(i)||(n.add(i),s.push({key:i,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $D=new Set([100,101,204,205]);function PD(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&vr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function XN(){let e=g.useContext(ll);return Rx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function OD(){let e=g.useContext(Yf);return Rx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Dx=g.createContext(void 0);Dx.displayName="FrameworkContext";function WN(){let e=g.useContext(Dx);return Rx(e,"You must render this element inside a <HydratedRouter> element"),e}function BD(e,t){let n=g.useContext(Dx),[s,r]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,m=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let v=x=>{x.forEach(y=>{o(y.isIntersecting)})},b=new IntersectionObserver(v,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[e]),g.useEffect(()=>{if(s){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[s]);let h=()=>{r(!0)},p=()=>{r(!1),o(!1)};return n?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Sl(l,h),onBlur:Sl(c,p),onMouseEnter:Sl(u,h),onMouseLeave:Sl(d,p),onTouchStart:Sl(f,h)}]:[!1,m,{}]}function Sl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ID({page:e,...t}){let{router:n}=XN(),s=g.useMemo(()=>ON(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?g.createElement(FD,{page:e,matches:s,...t}):null}function HD(e){let{manifest:t,routeModules:n}=WN(),[s,r]=g.useState([]);return g.useEffect(()=>{let i=!1;return MD(e,t,n).then(o=>{i||r(o)}),()=>{i=!0}},[e,t,n]),s}function FD({page:e,matches:t,...n}){let s=Ar(),{manifest:r,routeModules:i}=WN(),{basename:o}=XN(),{loaderData:l,matches:c}=OD(),u=g.useMemo(()=>jy(e,t,c,r,s,"data"),[e,t,c,r,s]),d=g.useMemo(()=>jy(e,t,c,r,s,"assets"),[e,t,c,r,s]),f=g.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let p=new Set,v=!1;if(t.forEach(x=>{var w;let y=r.routes[x.route.id];!y||!y.hasLoader||(!u.some(j=>j.route.id===x.route.id)&&x.route.id in l&&((w=i[x.route.id])!=null&&w.shouldRevalidate)||y.hasClientLoader?v=!0:p.add(x.route.id))}),p.size===0)return[];let b=PD(e,o);return v&&p.size>0&&b.searchParams.set("_routes",t.filter(x=>p.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[o,l,s,r,u,t,e,i]),m=g.useMemo(()=>RD(d,r),[d,r]),h=HD(d);return g.createElement(g.Fragment,null,f.map(p=>g.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),m.map(p=>g.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:v})=>g.createElement("link",{key:p,...v})))}function UD(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var KN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KN&&(window.__reactRouterVersion="7.6.3")}catch{}function VD({basename:e,children:t,window:n}){let s=g.useRef();s.current==null&&(s.current=E3({window:n,v5Compat:!0}));let r=s.current,[i,o]=g.useState({action:r.action,location:r.location}),l=g.useCallback(c=>{g.startTransition(()=>o(c))},[o]);return g.useLayoutEffect(()=>r.listen(l),[r,l]),g.createElement(vD,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:r})}var QN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JN=g.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...m},h){let{basename:p}=g.useContext(Bs),v=typeof u=="string"&&QN.test(u),b,x=!1;if(typeof u=="string"&&v&&(b=u,KN))try{let C=new URL(window.location.href),_=u.startsWith("//")?new URL(C.protocol+u):new URL(u),P=vr(_.pathname,p);_.origin===C.origin&&P!=null?u=P+_.search+_.hash:x=!0}catch{Gn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=eD(u,{relative:r}),[w,j,N]=BD(s,m),S=YD(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:f});function k(C){t&&t(C),C.defaultPrevented||S(C)}let E=g.createElement("a",{...m,...N,href:b||y,onClick:x||i?t:k,ref:UD(h,j),target:c,"data-discover":!v&&n==="render"?"true":void 0});return w&&!v?g.createElement(g.Fragment,null,E,g.createElement(ID,{page:y})):E});JN.displayName="Link";var qD=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let f=Yc(o,{relative:u.relative}),m=Ar(),h=g.useContext(Yf),{navigator:p,basename:v}=g.useContext(Bs),b=h!=null&&e5(f)&&l===!0,x=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,y=m.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(y=y.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&v&&(w=vr(w,v)||w);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=y===x||!r&&y.startsWith(x)&&y.charAt(j)==="/",S=w!=null&&(w===x||!r&&w.startsWith(x)&&w.charAt(x.length)==="/"),k={isActive:N,isPending:S,isTransitioning:b},E=N?t:void 0,C;typeof s=="function"?C=s(k):C=[s,N?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let _=typeof i=="function"?i(k):i;return g.createElement(JN,{...u,"aria-current":E,className:C,ref:d,style:_,to:o,viewTransition:l},typeof c=="function"?c(k):c)});qD.displayName="NavLink";var ZD=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:i,method:o=xd,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...m},h)=>{let p=QD(),v=JD(l,{relative:u}),b=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&QN.test(l),y=w=>{if(c&&c(w),w.defaultPrevented)return;w.preventDefault();let j=w.nativeEvent.submitter,N=(j==null?void 0:j.getAttribute("formmethod"))||o;p(j||w.currentTarget,{fetcherKey:t,method:N,navigate:n,replace:r,state:i,relative:u,preventScrollReset:d,viewTransition:f})};return g.createElement("form",{ref:h,method:b,action:v,onSubmit:s?c:y,...m,"data-discover":!x&&e==="render"?"true":void 0})});ZD.displayName="Form";function GD(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e1(e){let t=g.useContext(ll);return it(t,GD(e)),t}function YD(e,{target:t,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:o}={}){let l=lt(),c=Ar(),u=Yc(e,{relative:i});return g.useCallback(d=>{if(SD(d,t)){d.preventDefault();let f=n!==void 0?n:gc(c)===gc(u);l(e,{replace:f,state:s,preventScrollReset:r,relative:i,viewTransition:o})}},[c,l,u,n,s,t,e,r,i,o])}function XD(e){Gn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(Rg(e)),n=g.useRef(!1),s=Ar(),r=g.useMemo(()=>kD(s.search,n.current?null:t.current),[s.search]),i=lt(),o=g.useCallback((l,c)=>{const u=Rg(typeof l=="function"?l(r):l);n.current=!0,i("?"+u,c)},[i,r]);return[r,o]}var WD=0,KD=()=>`__${String(++WD)}__`;function QD(){let{router:e}=e1("useSubmit"),{basename:t}=g.useContext(Bs),n=mD();return g.useCallback(async(s,r={})=>{let{action:i,method:o,encType:l,formData:c,body:u}=_D(s,t);if(r.navigate===!1){let d=r.fetcherKey||KD();await e.fetch(d,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await e.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}function JD(e,{relative:t}={}){let{basename:n}=g.useContext(Bs),s=g.useContext(Is);it(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Yc(e||".",{relative:t})},o=Ar();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:mr([n,i.pathname])),gc(i)}function e5(e,t={}){let n=g.useContext(VN);it(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=e1("useViewTransitionState"),r=Yc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=vr(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=vr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Fd(r.pathname,o)!=null||Fd(r.pathname,i)!=null}[...$D];var t1={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t5=g;function n1(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Pr(){}var Xt={d:{f:Pr,r:function(){throw Error(n1(522))},D:Pr,C:Pr,L:Pr,m:Pr,X:Pr,S:Pr,M:Pr},p:0,findDOMNode:null},n5=Symbol.for("react.portal");function s5(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n5,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}var Kl=t5.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Wf(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Xt;Jt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n1(299));return s5(e,t,null,n)};Jt.flushSync=function(e){var t=Kl.T,n=Xt.p;try{if(Kl.T=null,Xt.p=2,e)return e()}finally{Kl.T=t,Xt.p=n,Xt.d.f()}};Jt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Xt.d.C(e,t))};Jt.prefetchDNS=function(e){typeof e=="string"&&Xt.d.D(e)};Jt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,s=Wf(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,i=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Xt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:i}):n==="script"&&Xt.d.X(e,{crossOrigin:s,integrity:r,fetchPriority:i,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Jt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Wf(t.as,t.crossOrigin);Xt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Xt.d.M(e)};Jt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,s=Wf(n,t.crossOrigin);Xt.d.L(e,n,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Jt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Wf(t.as,t.crossOrigin);Xt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Xt.d.m(e)};Jt.requestFormReset=function(e){Xt.d.r(e)};Jt.unstable_batchedUpdates=function(e,t){return e(t)};Jt.useFormState=function(e,t,n){return Kl.H.useFormState(e,t,n)};Jt.useFormStatus=function(){return Kl.H.useHostTransitionStatus()};Jt.version="19.1.0";function s1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s1)}catch(e){console.error(e)}}s1(),t1.exports=Jt;var Kf=t1.exports;const r5=vx(Kf);function a5(){return"/lorerim-arcaneum/"}function fn(e){return`${a5()}${e}`}const Ny=e=>{let t;const n=new Set,s=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const m=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(h=>h(t,m))}},r=()=>t,l={setState:s,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(s,r,l);return l},i5=e=>e?Ny(e):Ny,o5=e=>e;function l5(e,t=o5){const n=$.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return $.useDebugValue(n),n}const Sy=e=>{const t=i5(e),n=s=>l5(t,s);return Object.assign(n,t),n},us=e=>e?Sy(e):Sy,vi=us((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(fn("data/perk-trees.json"));if(!s.ok)throw new Error(`Failed to fetch perk trees data: ${s.status}`);const i=await s.json();e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load perk trees",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),c5=Object.freeze(Object.defineProperty({__proto__:null,usePerkTreesStore:vi},Symbol.toStringTag,{value:"Module"}));function u5(){return vi.getState().data}function r1(e,t,n){var o;if(t.length===0)return 0;const r=u5().find(l=>l.treeId===e);if(!r)return 0;let i=0;for(const l of t){const c=r.perks.find(f=>f.edid===l);if(!c)continue;const u=n[l]||1,d=c.ranks.find(f=>f.rank===u);if(d&&(o=d.prerequisites)!=null&&o.skillLevel){const f=d.prerequisites.skillLevel.level;i=Math.max(i,f)}}return i}function Ru(e){const t={};for(const[n,s]of Object.entries(e.selected))if(s.length>0){const r=r1(n,s,e.ranks);r>0&&(t[n]=r)}return t}const ky={v:1,name:"",notes:"",race:null,stone:null,religion:null,traits:{regular:[],bonus:[]},traitLimits:{regular:2,bonus:1},skills:{major:[],minor:[]},perks:{selected:{},ranks:{}},skillLevels:{},equipment:[],userProgress:{unlocks:[]},destinyPath:[],attributeAssignments:{health:0,stamina:0,magicka:0,level:1,assignments:{}}},Gr=us((e,t)=>({build:ky,updateBuild:n=>e(s=>({build:{...s.build,...n}})),setBuild:n=>e({build:n}),resetBuild:()=>e({build:ky}),setAttributeAssignment:(n,s)=>{e(r=>{const i={...r.build.attributeAssignments.assignments},o={...r.build.attributeAssignments},l=i[n];return l&&(o[l]=Math.max(0,o[l]-5)),i[n]=s,o[s]+=5,{build:{...r.build,attributeAssignments:{...r.build.attributeAssignments,...o,assignments:i}}}})},clearAttributeAssignment:n=>{e(s=>{const r={...s.build.attributeAssignments.assignments},i={...s.build.attributeAssignments},o=r[n];return o&&(i[o]=Math.max(0,i[o]-5),delete r[n]),{build:{...s.build,attributeAssignments:{...s.build.attributeAssignments,...i,assignments:r}}}})},clearAllAttributeAssignments:()=>{e(n=>({build:{...n.build,attributeAssignments:{health:0,stamina:0,magicka:0,level:n.build.attributeAssignments.level,assignments:{}}}}))},updateAttributeLevel:n=>{e(s=>({build:{...s.build,attributeAssignments:{...s.build.attributeAssignments,level:Math.max(1,n)}}}))}}));function ht(){const e=Gr(U=>U.build.skills.major),t=Gr(U=>U.build.skills.minor),n=Gr(U=>U.build),s=Gr(U=>U.updateBuild),r=Gr(U=>U.resetBuild),i=U=>(e==null?void 0:e.includes(U))??!1,o=U=>(t==null?void 0:t.includes(U))??!1;return{build:n,majorSkills:e,minorSkills:t,hasMajorSkill:i,hasMinorSkill:o,addMajorSkill:U=>{console.log("addMajorSkill called:",{skillId:U});const X=e??[],Q=t??[];if(!i(U)&&X.length<3){const W=Q.filter(ye=>ye!==U),se={major:[...X,U],minor:W};console.log("addMajorSkill - updating build with new skills:",se),s({skills:se})}else console.log("addMajorSkill - skill already major or limit reached, skipping")},removeMajorSkill:U=>{const X=e??[],Q=t??[],W=X.filter(se=>se!==U);s({skills:{major:W,minor:Q}})},addMinorSkill:U=>{const X=e??[],Q=t??[];if(!o(U)&&Q.length<6){const W=X.filter(se=>se!==U);s({skills:{major:W,minor:[...Q,U]}})}},removeMinorSkill:U=>{const X=e??[],W=(t??[]).filter(se=>se!==U);s({skills:{major:X,minor:W}})},addPerk:(U,X)=>{var se;console.log("addPerk called:",{skillId:U,perkId:X});const Q=((se=n==null?void 0:n.perks)==null?void 0:se.selected)??{},W=Q[U]??[];if(W.includes(X))console.log("addPerk - perk already selected, skipping");else{const ye={...n==null?void 0:n.perks,selected:{...Q,[U]:[...W,X]}},ue=Ru(ye);console.log("addPerk - updating build with new perks:",ye),console.log("addPerk - calculated skill levels:",ue),s({perks:ye,skillLevels:ue})}},removePerk:(U,X)=>{var te;const Q=((te=n==null?void 0:n.perks)==null?void 0:te.selected)??{},se=(Q[U]??[]).filter($e=>$e!==X),ye={...n==null?void 0:n.perks,selected:{...Q,[U]:se}},ue=Ru(ye);s({perks:ye,skillLevels:ue})},setPerkRank:(U,X)=>{var ye;console.log("setPerkRank called:",{perkId:U,rank:X});const Q=((ye=n==null?void 0:n.perks)==null?void 0:ye.ranks)??{},W={...n==null?void 0:n.perks,ranks:{...Q,[U]:X}},se=Ru(W);console.log("setPerkRank - updating build with new ranks:",W),console.log("setPerkRank - calculated skill levels:",se),s({perks:W,skillLevels:se})},clearSkillPerks:U=>{var $e,vt;const X=(($e=n==null?void 0:n.perks)==null?void 0:$e.selected)??{},Q=((vt=n==null?void 0:n.perks)==null?void 0:vt.ranks)??{},{[U]:W,...se}=X,ye={...Q};W&&W.forEach(ps=>{delete ye[ps]});const ue={...n==null?void 0:n.perks,selected:se,ranks:ye},te=Ru(ue);s({perks:ue,skillLevels:te})},getSkillPerks:U=>{var X,Q;return((Q=(X=n==null?void 0:n.perks)==null?void 0:X.selected)==null?void 0:Q[U])??[]},getPerkRank:U=>{var X,Q;return((Q=(X=n==null?void 0:n.perks)==null?void 0:X.ranks)==null?void 0:Q[U])??0},getSkillLevel:U=>{var X;return((X=n==null?void 0:n.skillLevels)==null?void 0:X[U])??0},addTrait:U=>{const{regular:X=[],bonus:Q=[]}=(n==null?void 0:n.traits)??{regular:[],bonus:[]},{regular:W=2,bonus:se=1}=(n==null?void 0:n.traitLimits)??{regular:2,bonus:1};X.length<W?s({traits:{...n==null?void 0:n.traits,regular:[...X,U]}}):Q.length<se&&s({traits:{...n==null?void 0:n.traits,bonus:[...Q,U]}})},addRegularTrait:U=>{const{regular:X=[]}=(n==null?void 0:n.traits)??{regular:[]},{regular:Q=2}=(n==null?void 0:n.traitLimits)??{regular:2};X.length<Q&&s({traits:{...n==null?void 0:n.traits,regular:[...X,U]}})},addBonusTrait:U=>{const{bonus:X=[]}=(n==null?void 0:n.traits)??{bonus:[]},{bonus:Q=1}=(n==null?void 0:n.traitLimits)??{bonus:1};X.length<Q&&s({traits:{...n==null?void 0:n.traits,bonus:[...X,U]}})},removeTrait:U=>{const{regular:X=[],bonus:Q=[]}=(n==null?void 0:n.traits)??{regular:[],bonus:[]};s({traits:{regular:X.filter(W=>W!==U),bonus:Q.filter(W=>W!==U)}})},hasTrait:U=>{var X,Q,W,se;return(((Q=(X=n==null?void 0:n.traits)==null?void 0:X.regular)==null?void 0:Q.includes(U))??!1)||(((se=(W=n==null?void 0:n.traits)==null?void 0:W.bonus)==null?void 0:se.includes(U))??!1)},hasRegularTrait:U=>{var X,Q;return((Q=(X=n==null?void 0:n.traits)==null?void 0:X.regular)==null?void 0:Q.includes(U))??!1},hasBonusTrait:U=>{var X,Q;return((Q=(X=n==null?void 0:n.traits)==null?void 0:X.bonus)==null?void 0:Q.includes(U))??!1},setRace:U=>{s({race:U})},setBirthsign:U=>{s({stone:U})},setStone:U=>{s({stone:U})},setReligion:U=>{s({religion:U})},addEquipment:U=>{const X=(n==null?void 0:n.equipment)??[];X.includes(U)||s({equipment:[...X,U]})},removeEquipment:U=>{const X=(n==null?void 0:n.equipment)??[];s({equipment:X.filter(Q=>Q!==U)})},setBuildName:U=>{s({name:U})},setBuildNotes:U=>{s({notes:U})},getDestinyPath:()=>(n==null?void 0:n.destinyPath)??[],setDestinyPath:U=>{s({destinyPath:U})},updateBuild:s,clearBuild:()=>{s({name:"",notes:"",race:null,stone:null,religion:null,skills:{major:[],minor:[]},traits:{regular:[],bonus:[]},perks:{selected:{},ranks:{}},skillLevels:{},destinyPath:[]})},resetBuild:r,getSummary:()=>{var U,X,Q,W,se,ye,ue,te,$e;return{name:(n==null?void 0:n.name)||"Unnamed Character",race:(n==null?void 0:n.race)||"Not selected",stone:(n==null?void 0:n.stone)||"Not selected",religion:(n==null?void 0:n.religion)||"Not selected",traitCount:(((X=(U=n==null?void 0:n.traits)==null?void 0:U.regular)==null?void 0:X.length)??0)+(((W=(Q=n==null?void 0:n.traits)==null?void 0:Q.bonus)==null?void 0:W.length)??0),majorSkillCount:((ye=(se=n==null?void 0:n.skills)==null?void 0:se.major)==null?void 0:ye.length)??0,minorSkillCount:((te=(ue=n==null?void 0:n.skills)==null?void 0:ue.minor)==null?void 0:te.length)??0,equipmentCount:(($e=n==null?void 0:n.equipment)==null?void 0:$e.length)??0}},getRegularTraitLimit:()=>{var U;return((U=n==null?void 0:n.traitLimits)==null?void 0:U.regular)??2},getBonusTraitLimit:()=>{var U;return((U=n==null?void 0:n.traitLimits)==null?void 0:U.bonus)??1},getRegularTraitCount:()=>{var U,X;return((X=(U=n==null?void 0:n.traits)==null?void 0:U.regular)==null?void 0:X.length)??0},getBonusTraitCount:()=>{var U,X;return((X=(U=n==null?void 0:n.traits)==null?void 0:U.bonus)==null?void 0:X.length)??0},canAddRegularTrait:()=>{var U,X,Q;return(((X=(U=n==null?void 0:n.traits)==null?void 0:U.regular)==null?void 0:X.length)??0)<(((Q=n==null?void 0:n.traitLimits)==null?void 0:Q.regular)??2)},canAddBonusTrait:()=>{var U,X,Q;return(((X=(U=n==null?void 0:n.traits)==null?void 0:U.bonus)==null?void 0:X.length)??0)<(((Q=n==null?void 0:n.traitLimits)==null?void 0:Q.bonus)??1)},getTraitType:U=>{var X,Q,W,se;return(Q=(X=n==null?void 0:n.traits)==null?void 0:X.regular)!=null&&Q.includes(U)?"regular":(se=(W=n==null?void 0:n.traits)==null?void 0:W.bonus)!=null&&se.includes(U)?"bonus":null},isAllTraitsFull:()=>{var se,ye,ue,te,$e,vt;const U=((ye=(se=n==null?void 0:n.traits)==null?void 0:se.regular)==null?void 0:ye.length)??0,X=((te=(ue=n==null?void 0:n.traits)==null?void 0:ue.bonus)==null?void 0:te.length)??0,Q=(($e=n==null?void 0:n.traitLimits)==null?void 0:$e.regular)??2,W=((vt=n==null?void 0:n.traitLimits)==null?void 0:vt.bonus)??1;return U>=Q&&X>=W},addTraitToSlot:(U,X)=>{if(X==="regular"){const{regular:Q=[]}=(n==null?void 0:n.traits)??{regular:[]},{regular:W=2}=(n==null?void 0:n.traitLimits)??{regular:2};if(Q.length<W){const{bonus:se=[]}=(n==null?void 0:n.traits)??{bonus:[]},ye=se.filter(ue=>ue!==U);s({traits:{regular:[...Q,U],bonus:ye}})}}else{const{bonus:Q=[]}=(n==null?void 0:n.traits)??{bonus:[]},{bonus:W=1}=(n==null?void 0:n.traitLimits)??{bonus:1};if(Q.length<W){const{regular:se=[]}=(n==null?void 0:n.traits)??{regular:[]},ye=se.filter(ue=>ue!==U);s({traits:{regular:ye,bonus:[...Q,U]}})}}},isSlotAvailable:(U,X=0)=>{var Q,W,se,ye;return U==="regular"?(((W=(Q=n==null?void 0:n.traits)==null?void 0:Q.regular)==null?void 0:W.length)??0)<=X:(((ye=(se=n==null?void 0:n.traits)==null?void 0:se.bonus)==null?void 0:ye.length)??0)<=X}}}function Cy(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Qf(...e){return t=>{let n=!1;const s=e.map(r=>{const i=Cy(r,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():Cy(e[r],null)}}}}function Ie(...e){return g.useCallback(Qf(...e),e)}function Do(e){const t=f5(e),n=g.forwardRef((s,r)=>{const{children:i,...o}=s,l=g.Children.toArray(i),c=l.find(h5);if(c){const u=c.props.children,d=l.map(f=>f===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:f);return a.jsx(t,{...o,ref:r,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return a.jsx(t,{...o,ref:r,children:i})});return n.displayName=`${e}.Slot`,n}var d5=Do("Slot");function f5(e){const t=g.forwardRef((n,s)=>{const{children:r,...i}=n;if(g.isValidElement(r)){const o=p5(r),l=g5(i,r.props);return r.type!==g.Fragment&&(l.ref=s?Qf(s,o):o),g.cloneElement(r,l)}return g.Children.count(r)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var a1=Symbol("radix.slottable");function m5(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=a1,t}function h5(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===a1}function g5(e,t){const n={...t};for(const s in t){const r=e[s],i=t[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...e,...n}}function p5(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function i1(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=i1(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function o1(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=i1(e))&&(s&&(s+=" "),s+=t);return s}const Ey=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,_y=o1,Xc=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return _y(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=t,o=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],f=i==null?void 0:i[u];if(d===null)return null;const m=Ey(d)||Ey(f);return r[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:f,className:m,...h}=d;return Object.entries(h).every(p=>{let[v,b]=p;return Array.isArray(b)?b.includes({...i,...l}[v]):{...i,...l}[v]===b})?[...u,f,m]:u},[]);return _y(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},zx="-",x5=e=>{const t=y5(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(zx);return l[0]===""&&l.length!==1&&l.shift(),l1(l,t)||v5(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},l1=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?l1(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const i=e.join(zx);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Ay=/^\[(.+)\]$/,v5=e=>{if(Ay.test(e)){const t=Ay.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},y5=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)Dg(n[r],s,r,t);return s},Dg=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const i=r===""?t:Ty(t,r);i.classGroupId=n;return}if(typeof r=="function"){if(b5(r)){Dg(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,o])=>{Dg(o,Ty(t,i),n,s)})})},Ty=(e,t)=>{let n=e;return t.split(zx).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},b5=e=>e.isThemeGetter,w5=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return r(i,o),o},set(i,o){n.has(i)?n.set(i,o):r(i,o)}}},zg="!",Lg=":",j5=Lg.length,N5=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=r=>{const i=[];let o=0,l=0,c=0,u;for(let p=0;p<r.length;p++){let v=r[p];if(o===0&&l===0){if(v===Lg){i.push(r.slice(c,p)),c=p+j5;continue}if(v==="/"){u=p;continue}}v==="["?o++:v==="]"?o--:v==="("?l++:v===")"&&l--}const d=i.length===0?r:r.substring(c),f=S5(d),m=f!==d,h=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:h}};if(t){const r=t+Lg,i=s;s=o=>o.startsWith(r)?i(o.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=i=>n({className:i,parseClassName:r})}return s},S5=e=>e.endsWith(zg)?e.substring(0,e.length-1):e.startsWith(zg)?e.substring(1):e,k5=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let i=[];return s.forEach(o=>{o[0]==="["||t[o]?(r.push(...i.sort(),o),i=[]):i.push(o)}),r.push(...i.sort()),r}},C5=e=>({cache:w5(e.cacheSize),parseClassName:N5(e),sortModifiers:k5(e),...x5(e)}),E5=/\s+/,_5=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:i}=t,o=[],l=e.trim().split(E5);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:f,modifiers:m,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:v}=n(d);if(f){c=d+(c.length>0?" "+c:c);continue}let b=!!v,x=s(b?p.substring(0,v):p);if(!x){if(!b){c=d+(c.length>0?" "+c:c);continue}if(x=s(p),!x){c=d+(c.length>0?" "+c:c);continue}b=!1}const y=i(m).join(":"),w=h?y+zg:y,j=w+x;if(o.includes(j))continue;o.push(j);const N=r(x,b);for(let S=0;S<N.length;++S){const k=N[S];o.push(w+k)}c=d+(c.length>0?" "+c:c)}return c};function A5(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=c1(t))&&(s&&(s+=" "),s+=n);return s}const c1=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=c1(e[s]))&&(n&&(n+=" "),n+=t);return n};function T5(e,...t){let n,s,r,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return n=C5(u),s=n.cache.get,r=n.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=_5(c,n);return r(c,d),d}return function(){return i(A5.apply(null,arguments))}}const St=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},u1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,d1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,M5=/^\d+\/\d+$/,R5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,D5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,z5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,L5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Li=e=>M5.test(e),Se=e=>!!e&&!Number.isNaN(Number(e)),Or=e=>!!e&&Number.isInteger(Number(e)),sh=e=>e.endsWith("%")&&Se(e.slice(0,-1)),Qs=e=>R5.test(e),P5=()=>!0,O5=e=>D5.test(e)&&!z5.test(e),f1=()=>!1,B5=e=>L5.test(e),I5=e=>$5.test(e),H5=e=>!re(e)&&!ae(e),F5=e=>cl(e,g1,f1),re=e=>u1.test(e),Ma=e=>cl(e,p1,O5),rh=e=>cl(e,G5,Se),My=e=>cl(e,m1,f1),U5=e=>cl(e,h1,I5),Du=e=>cl(e,x1,B5),ae=e=>d1.test(e),kl=e=>ul(e,p1),V5=e=>ul(e,Y5),Ry=e=>ul(e,m1),q5=e=>ul(e,g1),Z5=e=>ul(e,h1),zu=e=>ul(e,x1,!0),cl=(e,t,n)=>{const s=u1.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},ul=(e,t,n=!1)=>{const s=d1.exec(e);return s?s[1]?t(s[1]):n:!1},m1=e=>e==="position"||e==="percentage",h1=e=>e==="image"||e==="url",g1=e=>e==="length"||e==="size"||e==="bg-size",p1=e=>e==="length",G5=e=>e==="number",Y5=e=>e==="family-name",x1=e=>e==="shadow",X5=()=>{const e=St("color"),t=St("font"),n=St("text"),s=St("font-weight"),r=St("tracking"),i=St("leading"),o=St("breakpoint"),l=St("container"),c=St("spacing"),u=St("radius"),d=St("shadow"),f=St("inset-shadow"),m=St("text-shadow"),h=St("drop-shadow"),p=St("blur"),v=St("perspective"),b=St("aspect"),x=St("ease"),y=St("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...j(),ae,re],S=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],E=()=>[ae,re,c],C=()=>[Li,"full","auto",...E()],_=()=>[Or,"none","subgrid",ae,re],P=()=>["auto",{span:["full",Or,ae,re]},Or,ae,re],D=()=>[Or,"auto",ae,re],z=()=>["auto","min","max","fr",ae,re],A=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],O=()=>["start","end","center","stretch","center-safe","end-safe"],T=()=>["auto",...E()],L=()=>[Li,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],M=()=>[e,ae,re],R=()=>[...j(),Ry,My,{position:[ae,re]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",q5,F5,{size:[ae,re]}],I=()=>[sh,kl,Ma],V=()=>["","none","full",u,ae,re],G=()=>["",Se,kl,Ma],J=()=>["solid","dashed","dotted","double"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[Se,sh,Ry,My],pe=()=>["","none",p,ae,re],fe=()=>["none",Se,ae,re],we=()=>["none",Se,ae,re],U=()=>[Se,ae,re],X=()=>[Li,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Qs],breakpoint:[Qs],color:[P5],container:[Qs],"drop-shadow":[Qs],ease:["in","out","in-out"],font:[H5],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Qs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Qs],shadow:[Qs],spacing:["px",Se],text:[Qs],"text-shadow":[Qs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Li,re,ae,b]}],container:["container"],columns:[{columns:[Se,re,ae,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[Or,"auto",ae,re]}],basis:[{basis:[Li,"full","auto",l,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Se,Li,"auto","initial","none",re]}],grow:[{grow:["",Se,ae,re]}],shrink:[{shrink:["",Se,ae,re]}],order:[{order:[Or,"first","last","none",ae,re]}],"grid-cols":[{"grid-cols":_()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":_()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...A(),"normal"]}],"justify-items":[{"justify-items":[...O(),"normal"]}],"justify-self":[{"justify-self":["auto",...O()]}],"align-content":[{content:["normal",...A()]}],"align-items":[{items:[...O(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...O(),{baseline:["","last"]}]}],"place-content":[{"place-content":A()}],"place-items":[{"place-items":[...O(),"baseline"]}],"place-self":[{"place-self":["auto",...O()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:L()}],w:[{w:[l,"screen",...L()]}],"min-w":[{"min-w":[l,"screen","none",...L()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...L()]}],h:[{h:["screen","lh",...L()]}],"min-h":[{"min-h":["screen","lh","none",...L()]}],"max-h":[{"max-h":["screen","lh",...L()]}],"font-size":[{text:["base",n,kl,Ma]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ae,rh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",sh,re]}],"font-family":[{font:[V5,re,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ae,re]}],"line-clamp":[{"line-clamp":[Se,"none",ae,rh]}],leading:[{leading:[i,...E()]}],"list-image":[{"list-image":["none",ae,re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ae,re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[Se,"from-font","auto",ae,Ma]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[Se,"auto",ae,re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae,re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae,re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Or,ae,re],radial:["",ae,re],conic:[Or,ae,re]},Z5,U5]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:V()}],"rounded-s":[{"rounded-s":V()}],"rounded-e":[{"rounded-e":V()}],"rounded-t":[{"rounded-t":V()}],"rounded-r":[{"rounded-r":V()}],"rounded-b":[{"rounded-b":V()}],"rounded-l":[{"rounded-l":V()}],"rounded-ss":[{"rounded-ss":V()}],"rounded-se":[{"rounded-se":V()}],"rounded-ee":[{"rounded-ee":V()}],"rounded-es":[{"rounded-es":V()}],"rounded-tl":[{"rounded-tl":V()}],"rounded-tr":[{"rounded-tr":V()}],"rounded-br":[{"rounded-br":V()}],"rounded-bl":[{"rounded-bl":V()}],"border-w":[{border:G()}],"border-w-x":[{"border-x":G()}],"border-w-y":[{"border-y":G()}],"border-w-s":[{"border-s":G()}],"border-w-e":[{"border-e":G()}],"border-w-t":[{"border-t":G()}],"border-w-r":[{"border-r":G()}],"border-w-b":[{"border-b":G()}],"border-w-l":[{"border-l":G()}],"divide-x":[{"divide-x":G()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":G()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Se,ae,re]}],"outline-w":[{outline:["",Se,kl,Ma]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",d,zu,Du]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",f,zu,Du]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[Se,Ma]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":G()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",m,zu,Du]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[Se,ae,re]}],"mix-blend":[{"mix-blend":[...ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Se]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[ae,re]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[Se]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ae,re]}],filter:[{filter:["","none",ae,re]}],blur:[{blur:pe()}],brightness:[{brightness:[Se,ae,re]}],contrast:[{contrast:[Se,ae,re]}],"drop-shadow":[{"drop-shadow":["","none",h,zu,Du]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",Se,ae,re]}],"hue-rotate":[{"hue-rotate":[Se,ae,re]}],invert:[{invert:["",Se,ae,re]}],saturate:[{saturate:[Se,ae,re]}],sepia:[{sepia:["",Se,ae,re]}],"backdrop-filter":[{"backdrop-filter":["","none",ae,re]}],"backdrop-blur":[{"backdrop-blur":pe()}],"backdrop-brightness":[{"backdrop-brightness":[Se,ae,re]}],"backdrop-contrast":[{"backdrop-contrast":[Se,ae,re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Se,ae,re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Se,ae,re]}],"backdrop-invert":[{"backdrop-invert":["",Se,ae,re]}],"backdrop-opacity":[{"backdrop-opacity":[Se,ae,re]}],"backdrop-saturate":[{"backdrop-saturate":[Se,ae,re]}],"backdrop-sepia":[{"backdrop-sepia":["",Se,ae,re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ae,re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Se,"initial",ae,re]}],ease:[{ease:["linear","initial",x,ae,re]}],delay:[{delay:[Se,ae,re]}],animate:[{animate:["none",y,ae,re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,ae,re]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:we()}],"scale-x":[{"scale-x":we()}],"scale-y":[{"scale-y":we()}],"scale-z":[{"scale-z":we()}],"scale-3d":["scale-3d"],skew:[{skew:U()}],"skew-x":[{"skew-x":U()}],"skew-y":[{"skew-y":U()}],transform:[{transform:[ae,re,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:X()}],"translate-x":[{"translate-x":X()}],"translate-y":[{"translate-y":X()}],"translate-z":[{"translate-z":X()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae,re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae,re]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[Se,kl,Ma,rh]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},W5=T5(X5);function H(...e){return W5(o1(e))}const K5=Xc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-base font-semibold transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-5 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-3 has-[>svg]:px-4",sm:"h-9 rounded-md gap-1.5 px-4 has-[>svg]:px-3.5 text-sm",lg:"h-12 rounded-md px-8 has-[>svg]:px-6 text-lg",icon:"size-11"}},defaultVariants:{variant:"default",size:"default"}});function q({className:e,variant:t,size:n,asChild:s=!1,...r}){const i=s?d5:"button";return a.jsx(i,{"data-slot":"button",className:H(K5({variant:t,size:n,className:e})),...r})}function ne(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function Q5(e,t){const n=g.createContext(t),s=i=>{const{children:o,...l}=i,c=g.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};s.displayName=e+"Provider";function r(i){const o=g.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,r]}function Rn(e,t=[]){let n=[];function s(i,o){const l=g.createContext(o),c=n.length;n=[...n,o];const u=f=>{var x;const{scope:m,children:h,...p}=f,v=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,b=g.useMemo(()=>p,Object.values(p));return a.jsx(v.Provider,{value:b,children:h})};u.displayName=i+"Provider";function d(f,m){var v;const h=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,p=g.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=n.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return r.scopeName=e,[s,J5(r,...t)]}function J5(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var $s=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},ez=MN[" useId ".trim().toString()]||(()=>{}),tz=0;function hr(e){const[t,n]=g.useState(ez());return $s(()=>{n(s=>s??String(tz++))},[e]),t?`radix-${t}`:""}var nz=MN[" useInsertionEffect ".trim().toString()]||$s;function Tr({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[r,i,o]=sz({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:r;{const d=g.useRef(e!==void 0);g.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const u=g.useCallback(d=>{var f;if(l){const m=rz(d)?d(e):d;m!==e&&((f=o.current)==null||f.call(o,m))}else i(d)},[l,e,i,o]);return[c,u]}function sz({defaultProp:e,onChange:t}){const[n,s]=g.useState(e),r=g.useRef(n),i=g.useRef(t);return nz(()=>{i.current=t},[t]),g.useEffect(()=>{var o;r.current!==n&&((o=i.current)==null||o.call(i,n),r.current=n)},[n,r]),[n,s,i]}function rz(e){return typeof e=="function"}var az=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=az.reduce((e,t)=>{const n=Do(`Primitive.${t}`),s=g.forwardRef((r,i)=>{const{asChild:o,...l}=r,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function v1(e,t){e&&Kf.flushSync(()=>e.dispatchEvent(t))}function Ut(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function iz(e,t=globalThis==null?void 0:globalThis.document){const n=Ut(e);g.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var oz="DismissableLayer",$g="dismissableLayer.update",lz="dismissableLayer.pointerDownOutside",cz="dismissableLayer.focusOutside",Dy,y1=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wc=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=g.useContext(y1),[d,f]=g.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=g.useState({}),p=Ie(t,k=>f(k)),v=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(b),y=d?v.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,j=y>=x,N=fz(k=>{const E=k.target,C=[...u.branches].some(_=>_.contains(E));!j||C||(r==null||r(k),o==null||o(k),k.defaultPrevented||l==null||l())},m),S=mz(k=>{const E=k.target;[...u.branches].some(_=>_.contains(E))||(i==null||i(k),o==null||o(k),k.defaultPrevented||l==null||l())},m);return iz(k=>{y===u.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),g.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Dy=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),zy(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Dy)}},[d,m,n,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),zy())},[d,u]),g.useEffect(()=>{const k=()=>h({});return document.addEventListener($g,k),()=>document.removeEventListener($g,k)},[]),a.jsx(je.div,{...c,ref:p,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:ne(e.onFocusCapture,S.onFocusCapture),onBlurCapture:ne(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:ne(e.onPointerDownCapture,N.onPointerDownCapture)})});Wc.displayName=oz;var uz="DismissableLayerBranch",dz=g.forwardRef((e,t)=>{const n=g.useContext(y1),s=g.useRef(null),r=Ie(t,s);return g.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(je.div,{...e,ref:r})});dz.displayName=uz;function fz(e,t=globalThis==null?void 0:globalThis.document){const n=Ut(e),s=g.useRef(!1),r=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){b1(lz,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=c,t.addEventListener("click",r.current,{once:!0})):c()}else t.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function mz(e,t=globalThis==null?void 0:globalThis.document){const n=Ut(e),s=g.useRef(!1);return g.useEffect(()=>{const r=i=>{i.target&&!s.current&&b1(cz,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function zy(){const e=new CustomEvent($g);document.dispatchEvent(e)}function b1(e,t,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?v1(r,i):r.dispatchEvent(i)}var ah="focusScope.autoFocusOnMount",ih="focusScope.autoFocusOnUnmount",Ly={bubbles:!1,cancelable:!0},hz="FocusScope",Lx=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=e,[l,c]=g.useState(null),u=Ut(r),d=Ut(i),f=g.useRef(null),m=Ie(t,v=>c(v)),h=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(s){let v=function(w){if(h.paused||!l)return;const j=w.target;l.contains(j)?f.current=j:Hr(f.current,{select:!0})},b=function(w){if(h.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||Hr(f.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const N of w)N.removedNodes.length>0&&Hr(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),y.disconnect()}}},[s,l,h.paused]),g.useEffect(()=>{if(l){Py.add(h);const v=document.activeElement;if(!l.contains(v)){const x=new CustomEvent(ah,Ly);l.addEventListener(ah,u),l.dispatchEvent(x),x.defaultPrevented||(gz(bz(w1(l)),{select:!0}),document.activeElement===v&&Hr(l))}return()=>{l.removeEventListener(ah,u),setTimeout(()=>{const x=new CustomEvent(ih,Ly);l.addEventListener(ih,d),l.dispatchEvent(x),x.defaultPrevented||Hr(v??document.body,{select:!0}),l.removeEventListener(ih,d),Py.remove(h)},0)}}},[l,u,d,h]);const p=g.useCallback(v=>{if(!n&&!s||h.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(b&&x){const y=v.currentTarget,[w,j]=pz(y);w&&j?!v.shiftKey&&x===j?(v.preventDefault(),n&&Hr(w,{select:!0})):v.shiftKey&&x===w&&(v.preventDefault(),n&&Hr(j,{select:!0})):x===y&&v.preventDefault()}},[n,s,h.paused]);return a.jsx(je.div,{tabIndex:-1,...o,ref:m,onKeyDown:p})});Lx.displayName=hz;function gz(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Hr(s,{select:t}),document.activeElement!==n)return}function pz(e){const t=w1(e),n=$y(t,e),s=$y(t.reverse(),e);return[n,s]}function w1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function $y(e,t){for(const n of e)if(!xz(n,{upTo:t}))return n}function xz(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function vz(e){return e instanceof HTMLInputElement&&"select"in e}function Hr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&vz(e)&&t&&e.select()}}var Py=yz();function yz(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Oy(e,t),e.unshift(t)},remove(t){var n;e=Oy(e,t),(n=e[0])==null||n.resume()}}}function Oy(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function bz(e){return e.filter(t=>t.tagName!=="A")}var wz="Portal",$x=g.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[r,i]=g.useState(!1);$s(()=>i(!0),[]);const o=n||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?r5.createPortal(a.jsx(je.div,{...s,ref:t}),o):null});$x.displayName=wz;function jz(e,t){return g.useReducer((n,s)=>t[n][s]??n,e)}var Gt=e=>{const{present:t,children:n}=e,s=Nz(t),r=typeof n=="function"?n({present:s.isPresent}):g.Children.only(n),i=Ie(s.ref,Sz(r));return typeof n=="function"||s.isPresent?g.cloneElement(r,{ref:i}):null};Gt.displayName="Presence";function Nz(e){const[t,n]=g.useState(),s=g.useRef(null),r=g.useRef(e),i=g.useRef("none"),o=e?"mounted":"unmounted",[l,c]=jz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=Lu(s.current);i.current=l==="mounted"?u:"none"},[l]),$s(()=>{const u=s.current,d=r.current;if(d!==e){const m=i.current,h=Lu(u);e?c("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,c]),$s(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=h=>{const v=Lu(s.current).includes(h.animationName);if(h.target===t&&v&&(c("ANIMATION_END"),!r.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=h=>{h.target===t&&(i.current=Lu(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function Lu(e){return(e==null?void 0:e.animationName)||"none"}function Sz(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var oh=0;function j1(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??By()),document.body.insertAdjacentElement("beforeend",e[1]??By()),oh++,()=>{oh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),oh--}},[])}function By(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ss=function(){return Ss=Object.assign||function(t){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ss.apply(this,arguments)};function N1(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}function kz(e,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,i;s<r;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var yd="right-scroll-bar-position",bd="width-before-scroll-bar",Cz="with-scroll-bars-hidden",Ez="--removed-body-scroll-bar-size";function lh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function _z(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=t,n.facade}var Az=typeof window<"u"?g.useLayoutEffect:g.useEffect,Iy=new WeakMap;function Tz(e,t){var n=_z(null,function(s){return e.forEach(function(r){return lh(r,s)})});return Az(function(){var s=Iy.get(n);if(s){var r=new Set(s),i=new Set(e),o=n.current;r.forEach(function(l){i.has(l)||lh(l,null)}),i.forEach(function(l){r.has(l)||lh(l,o)})}Iy.set(n,e)},[e]),n}function Mz(e){return e}function Rz(e,t){t===void 0&&(t=Mz);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,s);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){s=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return r}function Dz(e){e===void 0&&(e={});var t=Rz(null);return t.options=Ss({async:!0,ssr:!1},e),t}var S1=function(e){var t=e.sideCar,n=N1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return g.createElement(s,Ss({},n))};S1.isSideCarExport=!0;function zz(e,t){return e.useMedium(t),S1}var k1=Dz(),ch=function(){},Jf=g.forwardRef(function(e,t){var n=g.useRef(null),s=g.useState({onScrollCapture:ch,onWheelCapture:ch,onTouchMoveCapture:ch}),r=s[0],i=s[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,m=e.sideCar,h=e.noRelative,p=e.noIsolation,v=e.inert,b=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,w=e.gapMode,j=N1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,S=Tz([n,t]),k=Ss(Ss({},j),r);return g.createElement(g.Fragment,null,d&&g.createElement(N,{sideCar:k1,removeScrollBar:u,shards:f,noRelative:h,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:w}),o?g.cloneElement(g.Children.only(l),Ss(Ss({},k),{ref:S})):g.createElement(y,Ss({},k,{className:c,ref:S}),l))});Jf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jf.classNames={fullWidth:bd,zeroRight:yd};var Lz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $z(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Lz();return t&&e.setAttribute("nonce",t),e}function Pz(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Oz(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Bz=function(){var e=0,t=null;return{add:function(n){e==0&&(t=$z())&&(Pz(t,n),Oz(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Iz=function(){var e=Bz();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},C1=function(){var e=Iz(),t=function(n){var s=n.styles,r=n.dynamic;return e(s,r),null};return t},Hz={left:0,top:0,right:0,gap:0},uh=function(e){return parseInt(e||"",10)||0},Fz=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[uh(n),uh(s),uh(r)]},Uz=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Hz;var t=Fz(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},Vz=C1(),uo="data-scroll-locked",qz=function(e,t,n,s){var r=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Cz,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(uo,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yd,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(bd,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(yd," .").concat(yd,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(bd," .").concat(bd,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(uo,`] {
    `).concat(Ez,": ").concat(l,`px;
  }
`)},Hy=function(){var e=parseInt(document.body.getAttribute(uo)||"0",10);return isFinite(e)?e:0},Zz=function(){g.useEffect(function(){return document.body.setAttribute(uo,(Hy()+1).toString()),function(){var e=Hy()-1;e<=0?document.body.removeAttribute(uo):document.body.setAttribute(uo,e.toString())}},[])},Gz=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,r=s===void 0?"margin":s;Zz();var i=g.useMemo(function(){return Uz(r)},[r]);return g.createElement(Vz,{styles:qz(i,!t,r,n?"":"!important")})},Pg=!1;if(typeof window<"u")try{var $u=Object.defineProperty({},"passive",{get:function(){return Pg=!0,!0}});window.addEventListener("test",$u,$u),window.removeEventListener("test",$u,$u)}catch{Pg=!1}var $i=Pg?{passive:!1}:!1,Yz=function(e){return e.tagName==="TEXTAREA"},E1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Yz(e)&&n[t]==="visible")},Xz=function(e){return E1(e,"overflowY")},Wz=function(e){return E1(e,"overflowX")},Fy=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=_1(e,s);if(r){var i=A1(e,s),o=i[1],l=i[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},Kz=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},Qz=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},_1=function(e,t){return e==="v"?Xz(t):Wz(t)},A1=function(e,t){return e==="v"?Kz(t):Qz(t)},Jz=function(e,t){return e==="h"&&t==="rtl"?-1:1},eL=function(e,t,n,s,r){var i=Jz(e,window.getComputedStyle(t).direction),o=i*s,l=n.target,c=t.contains(l),u=!1,d=o>0,f=0,m=0;do{if(!l)break;var h=A1(e,l),p=h[0],v=h[1],b=h[2],x=v-b-i*p;(p||x)&&_1(e,l)&&(f+=x,m+=p);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(f)<1||!d&&Math.abs(m)<1)&&(u=!0),u},Pu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Uy=function(e){return[e.deltaX,e.deltaY]},Vy=function(e){return e&&"current"in e?e.current:e},tL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},nL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},sL=0,Pi=[];function rL(e){var t=g.useRef([]),n=g.useRef([0,0]),s=g.useRef(),r=g.useState(sL++)[0],i=g.useState(C1)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var v=kz([e.lockRef.current],(e.shards||[]).map(Vy),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=Pu(v),y=n.current,w="deltaX"in v?v.deltaX:y[0]-x[0],j="deltaY"in v?v.deltaY:y[1]-x[1],N,S=v.target,k=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in v&&k==="h"&&S.type==="range")return!1;var E=Fy(k,S);if(!E)return!0;if(E?N=k:(N=k==="v"?"h":"v",E=Fy(k,S)),!E)return!1;if(!s.current&&"changedTouches"in v&&(w||j)&&(s.current=N),!N)return!0;var C=s.current||N;return eL(C,b,v,C==="h"?w:j)},[]),c=g.useCallback(function(v){var b=v;if(!(!Pi.length||Pi[Pi.length-1]!==i)){var x="deltaY"in b?Uy(b):Pu(b),y=t.current.filter(function(N){return N.name===b.type&&(N.target===b.target||b.target===N.shadowParent)&&tL(N.delta,x)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(Vy).filter(Boolean).filter(function(N){return N.contains(b.target)}),j=w.length>0?l(b,w[0]):!o.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),u=g.useCallback(function(v,b,x,y){var w={name:v,delta:b,target:x,should:y,shadowParent:aL(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),d=g.useCallback(function(v){n.current=Pu(v),s.current=void 0},[]),f=g.useCallback(function(v){u(v.type,Uy(v),v.target,l(v,e.lockRef.current))},[]),m=g.useCallback(function(v){u(v.type,Pu(v),v.target,l(v,e.lockRef.current))},[]);g.useEffect(function(){return Pi.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,$i),document.addEventListener("touchmove",c,$i),document.addEventListener("touchstart",d,$i),function(){Pi=Pi.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,$i),document.removeEventListener("touchmove",c,$i),document.removeEventListener("touchstart",d,$i)}},[]);var h=e.removeScrollBar,p=e.inert;return g.createElement(g.Fragment,null,p?g.createElement(i,{styles:nL(r)}):null,h?g.createElement(Gz,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function aL(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const iL=zz(k1,rL);var Px=g.forwardRef(function(e,t){return g.createElement(Jf,Ss({},e,{ref:t,sideCar:iL}))});Px.classNames=Jf.classNames;var oL=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Oi=new WeakMap,Ou=new WeakMap,Bu={},dh=0,T1=function(e){return e&&(e.host||T1(e.parentNode))},lL=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=T1(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},cL=function(e,t,n,s){var r=lL(t,Array.isArray(e)?e:[e]);Bu[n]||(Bu[n]=new WeakMap);var i=Bu[n],o=[],l=new Set,c=new Set(r),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};r.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var h=m.getAttribute(s),p=h!==null&&h!=="false",v=(Oi.get(m)||0)+1,b=(i.get(m)||0)+1;Oi.set(m,v),i.set(m,b),o.push(m),v===1&&p&&Ou.set(m,!0),b===1&&m.setAttribute(n,"true"),p||m.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(t),l.clear(),dh++,function(){o.forEach(function(f){var m=Oi.get(f)-1,h=i.get(f)-1;Oi.set(f,m),i.set(f,h),m||(Ou.has(f)||f.removeAttribute(s),Ou.delete(f)),h||f.removeAttribute(n)}),dh--,dh||(Oi=new WeakMap,Oi=new WeakMap,Ou=new WeakMap,Bu={})}},M1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),r=oL(e);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),cL(s,r,n,"aria-hidden")):function(){return null}},em="Dialog",[R1,Uee]=Rn(em),[uL,ds]=R1(em),D1=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:r,onOpenChange:i,modal:o=!0}=e,l=g.useRef(null),c=g.useRef(null),[u,d]=Tr({prop:s,defaultProp:r??!1,onChange:i,caller:em});return a.jsx(uL,{scope:t,triggerRef:l,contentRef:c,contentId:hr(),titleId:hr(),descriptionId:hr(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:o,children:n})};D1.displayName=em;var z1="DialogTrigger",L1=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=ds(z1,n),i=Ie(t,r.triggerRef);return a.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Ix(r.open),...s,ref:i,onClick:ne(e.onClick,r.onOpenToggle)})});L1.displayName=z1;var Ox="DialogPortal",[dL,$1]=R1(Ox,{forceMount:void 0}),P1=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:r}=e,i=ds(Ox,t);return a.jsx(dL,{scope:t,forceMount:n,children:g.Children.map(s,o=>a.jsx(Gt,{present:n||i.open,children:a.jsx($x,{asChild:!0,container:r,children:o})}))})};P1.displayName=Ox;var Ud="DialogOverlay",O1=g.forwardRef((e,t)=>{const n=$1(Ud,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,i=ds(Ud,e.__scopeDialog);return i.modal?a.jsx(Gt,{present:s||i.open,children:a.jsx(mL,{...r,ref:t})}):null});O1.displayName=Ud;var fL=Do("DialogOverlay.RemoveScroll"),mL=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=ds(Ud,n);return a.jsx(Px,{as:fL,allowPinchZoom:!0,shards:[r.contentRef],children:a.jsx(je.div,{"data-state":Ix(r.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),ni="DialogContent",B1=g.forwardRef((e,t)=>{const n=$1(ni,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,i=ds(ni,e.__scopeDialog);return a.jsx(Gt,{present:s||i.open,children:i.modal?a.jsx(hL,{...r,ref:t}):a.jsx(gL,{...r,ref:t})})});B1.displayName=ni;var hL=g.forwardRef((e,t)=>{const n=ds(ni,e.__scopeDialog),s=g.useRef(null),r=Ie(t,n.contentRef,s);return g.useEffect(()=>{const i=s.current;if(i)return M1(i)},[]),a.jsx(I1,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ne(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ne(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ne(e.onFocusOutside,i=>i.preventDefault())})}),gL=g.forwardRef((e,t)=>{const n=ds(ni,e.__scopeDialog),s=g.useRef(!1),r=g.useRef(!1);return a.jsx(I1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),I1=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,...o}=e,l=ds(ni,n),c=g.useRef(null),u=Ie(t,c);return j1(),a.jsxs(a.Fragment,{children:[a.jsx(Lx,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:a.jsx(Wc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Ix(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(pL,{titleId:l.titleId}),a.jsx(vL,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Bx="DialogTitle",H1=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=ds(Bx,n);return a.jsx(je.h2,{id:r.titleId,...s,ref:t})});H1.displayName=Bx;var F1="DialogDescription",U1=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=ds(F1,n);return a.jsx(je.p,{id:r.descriptionId,...s,ref:t})});U1.displayName=F1;var V1="DialogClose",q1=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=ds(V1,n);return a.jsx(je.button,{type:"button",...s,ref:t,onClick:ne(e.onClick,()=>r.onOpenChange(!1))})});q1.displayName=V1;function Ix(e){return e?"open":"closed"}var Z1="DialogTitleWarning",[Vee,G1]=Q5(Z1,{contentName:ni,titleName:Bx,docsSlug:"dialog"}),pL=({titleId:e})=>{const t=G1(Z1),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},xL="DialogDescriptionWarning",vL=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${G1(xL).contentName}}.`;return g.useEffect(()=>{var i;const r=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},Y1=D1,yL=L1,X1=P1,Hx=O1,Fx=B1,Ux=H1,Vx=U1,bL=q1;const zo=Y1,W1=yL,wL=X1,K1=g.forwardRef(({className:e,...t},n)=>a.jsx(Hx,{className:H("fixed inset-0 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{zIndex:Lt.MODAL},...t,ref:n}));K1.displayName=Hx.displayName;const jL=Xc("fixed gap-4 border shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),si=g.forwardRef(({side:e="right",className:t,children:n,...s},r)=>a.jsxs(wL,{children:[a.jsx(K1,{}),a.jsxs(Fx,{ref:r,className:H(jL({side:e}),t),style:{zIndex:Lt.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[n,a.jsxs(bL,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(Dt,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));si.displayName=Fx.displayName;const Lo=({className:e,...t})=>a.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",e),...t});Lo.displayName="SheetHeader";const $o=g.forwardRef(({className:e,...t},n)=>a.jsx(Ux,{ref:n,className:H("text-lg font-semibold text-foreground",e),...t}));$o.displayName=Ux.displayName;const qx=g.forwardRef(({className:e,...t},n)=>a.jsx(Vx,{ref:n,className:H("text-sm text-muted-foreground",e),...t}));qx.displayName=Vx.displayName;function xe({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:H("bg-card text-card-foreground flex flex-col gap-8 rounded-xl border py-8 px-6 shadow-sm",e),...t})}function Te({className:e,action:t,children:n,...s}){return a.jsxs("div",{"data-slot":"card-header",className:H("flex flex-row items-start justify-between space-y-0",e),...s,children:[a.jsx("div",{className:"flex-1 flex flex-col space-y-3",children:n}),t&&a.jsx("div",{className:"ml-4 flex-shrink-0",children:t})]})}function Le({className:e,...t}){return a.jsx("div",{"data-slot":"card-title",className:H("text-xl font-bold leading-none",e),...t})}function Cs({className:e,...t}){return a.jsx("div",{"data-slot":"card-description",className:H("text-base text-muted-foreground",e),...t})}function ve({className:e,...t}){return a.jsx("div",{"data-slot":"card-content",className:H("pt-0",e),...t})}const Ts=g.forwardRef(({className:e,type:t,...n},s)=>a.jsx("input",{type:t,className:H("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));Ts.displayName="Input";var NL="Label",Q1=g.forwardRef((e,t)=>a.jsx(je.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Q1.displayName=NL;const SL=Xc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Vd=g.forwardRef(({className:e,children:t,...n},s)=>a.jsx(Q1,{ref:s,className:H(SL(),e),...n,children:t}));Vd.displayName="Label";function J1({name:e,notes:t,onNameChange:n,onNotesChange:s,className:r}){const[i,o]=g.useState(e),[l,c]=g.useState(t),u=g.useCallback((()=>{let h;return p=>{clearTimeout(h),h=setTimeout(()=>{n(p)},300)}})(),[n]),d=g.useCallback((()=>{let h;return p=>{clearTimeout(h),h=setTimeout(()=>{s(p)},300)}})(),[s]);g.useEffect(()=>{o(e)},[e]),g.useEffect(()=>{c(t)},[t]);const f=h=>{const p=h.target.value;o(p),u(p)},m=h=>{const p=h.target.value;c(p),d(p)};return a.jsxs(xe,{className:`mb-6 ${r||""}`,children:[a.jsx(Te,{children:a.jsx(Le,{children:"Basic Information"})}),a.jsxs(ve,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Vd,{htmlFor:"name",children:"Character Name"}),a.jsx(Ts,{id:"name",value:i,onChange:f,placeholder:"Enter character name..."})]}),a.jsxs("div",{children:[a.jsx(Vd,{htmlFor:"notes",children:"Notes"}),a.jsx("textarea",{id:"notes",value:l,onChange:m,placeholder:"Add character notes, roleplay details, or build explanations...",rows:4,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]})]})}const yi=us((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(fn("data/birthsigns.json"));if(!s.ok)throw new Error(`Failed to fetch birthsigns data: ${s.status}`);const i=(await s.json()).map(o=>{var l,c;return{...o,id:o.edid||o.name.toLowerCase().replace(/\s+/g,"-"),tags:[o.group,...((l=o.powers)==null?void 0:l.map(u=>u.name))||[],...((c=o.stat_modifications)==null?void 0:c.map(u=>u.stat))||[]].filter(u=>!!u)}});e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load birthsigns",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),kL=Object.freeze(Object.defineProperty({__proto__:null,useBirthsignsStore:yi},Symbol.toStringTag,{value:"Module"}));function CL(e){var s;const t=[],n=((s=e.description)==null?void 0:s.toLowerCase())||"";return(n.includes("damage")||n.includes("weapon"))&&t.push("Combat"),(n.includes("armor")||n.includes("defense"))&&t.push("Defensive"),(n.includes("magicka")||n.includes("spell")||n.includes("magic"))&&t.push("Magic"),(n.includes("regeneration")||n.includes("health")||n.includes("stamina"))&&t.push("Utility"),(n.includes("detect")||n.includes("stealth"))&&t.push("Stealth"),(n.includes("cost")||n.includes("less"))&&t.push("Cost Reduction"),(n.includes("increase")||n.includes("more"))&&t.push("Enhancement"),n.includes("resistance")&&t.push("Resistance"),[...new Set(t)]}const dl=us((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(fn("data/subclasses.json"));if(!s.ok)throw new Error(`Failed to fetch destiny nodes data: ${s.status}`);const i=(await s.json()).map((o,l)=>({...o,id:o.globalFormId||o.edid||`destiny-${l}`,nextBranches:o.nextBranches||[],levelRequirement:o.levelRequirement,lore:o.lore,tags:CL(o),prerequisites:Array.isArray(o.prerequisites)?o.prerequisites:[]}));e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load destiny nodes",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),EL=Object.freeze(Object.defineProperty({__proto__:null,useDestinyNodesStore:dl},Symbol.toStringTag,{value:"Module"})),yr=us((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(fn("data/playable-races.json"));if(!s.ok)throw new Error(`Failed to fetch races data: ${s.status}`);const i=(await s.json()).races.map(o=>({...o,id:o.id||o.edid||o.name.toLowerCase().replace(/\s+/g,"-"),tags:[o.category,...o.keywords||[]].filter(l=>!!l),name:o.name,edid:o.edid,description:o.description,category:o.category,source:o.source,startingStats:o.startingStats,physicalAttributes:o.physicalAttributes,skillBonuses:o.skillBonuses,racialSpells:o.racialSpells,keywords:o.keywords,flags:o.flags,regeneration:o.regeneration,combat:o.combat}));e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load races",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),_L=Object.freeze(Object.defineProperty({__proto__:null,useRacesStore:yr},Symbol.toStringTag,{value:"Module"})),AL={SHOW_FAVORED_RACES:!1,ENABLE_RACE_AUTOCOMPLETE:!1,SHOW_RACE_FILTERS:!1};function TL(e){return AL[e]}function rs(){return TL("SHOW_FAVORED_RACES")}const fl=us((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(fn("data/wintersun-religion-docs.json"));if(!s.ok)throw new Error(`Failed to fetch religions data: ${s.status}`);const i=(await s.json()).flatMap(o=>o.deities.map(l=>({...l,id:l.id||l.name,pantheon:o.type,type:l.type||o.type,tags:[o.type,...rs()?l.favoredRaces||[]:[],...l.tags||[]].filter(Boolean)})));e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load religions",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),ML=Object.freeze(Object.defineProperty({__proto__:null,useReligionsStore:fl},Symbol.toStringTag,{value:"Module"})),bi=us((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(fn("data/skills.json"));if(!s.ok)throw new Error(`Failed to fetch skills data: ${s.status}`);const i=(await s.json()).skills.map(o=>({...o,id:o.id||o.edid||o.name.toLowerCase().replace(/\s+/g,"-"),tags:[...o.metaTags||[],o.category].filter(l=>!!l)}));e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load skills",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),RL=Object.freeze(Object.defineProperty({__proto__:null,useSkillsStore:bi},Symbol.toStringTag,{value:"Module"})),wi=us((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(fn("data/traits.json"));if(!s.ok)throw new Error(`Failed to fetch traits data: ${s.status}`);const i=(await s.json()).traits.map(o=>{var l;return{...o,id:o.id||o.edid||o.name,tags:[o.category,...o.tags||[],...((l=o.effects)==null?void 0:l.map(c=>c.type))||[]].filter(c=>!!c)}});e({data:i,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load traits",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),DL=Object.freeze(Object.defineProperty({__proto__:null,useTraitsStore:wi},Symbol.toStringTag,{value:"Module"}));function ri(e){return e?e.replace(/\*\*\*(.*?)\*\*\*/g,"**$1**").replace(/<(\d+)>/g,"Level $1").replace(/\n+/g," ").trim():""}function ji(e,t,n){try{return e()}catch(s){return console.warn(`Failed to resolve ${n}:`,s),t}}function zL(e){return e?ji(()=>{const t=yr.getState().data;if(t.length===0)throw new Error("Races data not loaded yet. Please wait a moment and try again.");let n=t.find(s=>s.edid===e);return n||(n=t.find(s=>s.name.toLowerCase()===e.toLowerCase())),n||(n=t.find(s=>s.id===e)),n?{name:n.name,effects:n.description?ri(n.description):void 0}:(console.warn(`Race not found for ID: ${e}. Available races: ${t.map(s=>s.edid).join(", ")}`),{name:"Unknown Race"})},{name:"Unknown Race"},"race"):{name:"Not selected"}}function LL(e){return e?ji(()=>{const t=yi.getState().data;if(t.length===0)throw new Error("Birthsigns data not loaded yet. Please wait a moment and try again.");const n=t.find(s=>s.edid===e);return n?{name:n.name,effects:ri(n.description||"No effects")}:{name:"Unknown Birth Sign",effects:"No effects"}},{name:"Unknown Birth Sign",effects:"No effects"},"birth sign"):{name:"Not selected",effects:"No effects"}}function $L(e,t){return ji(()=>{const n=wi.getState().data;if(n.length===0)throw new Error("Traits data not loaded yet. Please wait a moment and try again.");const s=[];return e.forEach(r=>{const i=n.find(o=>o.edid===r);i&&s.push({name:i.name,effects:ri(i.description||"No effects"),type:"regular"})}),t.forEach(r=>{const i=n.find(o=>o.edid===r);i&&s.push({name:i.name,effects:ri(i.description||"No effects"),type:"bonus"})}),s},[],"traits")}function PL(e){return e?ji(()=>{const t=fl.getState().data;if(t.length===0)throw new Error("Religions data not loaded yet. Please wait a moment and try again.");const n=t.find(s=>s.id===e||s.name===e);return n?{name:n.name,effects:ri(n.type||"No effects")}:{name:"Unknown Religion",effects:"No effects"}},{name:"Unknown Religion",effects:"No effects"},"religion"):{name:"Not selected",effects:"No effects"}}function OL(e,t,n){return ji(()=>{const s=bi.getState().data;if(s.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");const r=i=>i.map(o=>{const l=s.find(u=>u.edid===o),c=n[o];return{name:(l==null?void 0:l.name)||"Unknown Skill",level:c||void 0}});return{major:r(e),minor:r(t),other:[]}},{major:[],minor:[],other:[]},"skills")}function BL(e,t){return ji(()=>{const n=bi.getState().data,s=vi.getState().data;if(n.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");if(s.length===0)throw new Error("Perk trees data not loaded yet. Please wait a moment and try again.");return Object.entries(e).map(([r,i])=>{const o=n.find(u=>u.edid===r),l=s.find(u=>u.treeId===r),c=i.map(u=>{var h,p,v;let d=l==null?void 0:l.perks.find(b=>b.edid===u);d||(d=l==null?void 0:l.perks.find(b=>b.name.toLowerCase()===u.toLowerCase())),d||console.warn(`Perk lookup fallback for ID: ${u}`);const f=t[u];d||console.warn(`Perk not found for ID: ${u} in skill: ${r}. Available perks: ${l==null?void 0:l.perks.map(b=>b.edid).join(", ")}`);const m=((v=(p=(h=d==null?void 0:d.ranks)==null?void 0:h[0])==null?void 0:p.description)==null?void 0:v.base)||"No effects";return{name:(d==null?void 0:d.name)||"Unknown Perk",effects:ri(m),rank:f||void 0}});return{skillName:(o==null?void 0:o.name)||"Unknown Skill",perks:c}}).filter(r=>r.perks.length>0)},[],"perks")}function IL(e){return e.length===0?[]:ji(()=>{const t=dl.getState().data;if(t.length===0)throw new Error("Destiny nodes data not loaded yet. Please wait a moment and try again.");return e.map(n=>{const s=t.find(r=>r.id===n||r.name===n);return{name:(s==null?void 0:s.name)||"Unknown Destiny",effects:s!=null&&s.description?ri(s.description):void 0}})},[],"destiny path")}function HL(e){const t=[],n=e.map(s=>s.name.toLowerCase());return n.some(s=>s.includes("one-handed")||s.includes("two-handed"))&&t.push("melee"),n.some(s=>s.includes("archery"))&&t.push("archery"),n.some(s=>s.includes("magic")||s.includes("destruction"))&&t.push("magic"),n.some(s=>s.includes("stealth")||s.includes("sneak"))&&t.push("stealth"),n.some(s=>s.includes("smithing")||s.includes("enchanting"))&&t.push("crafting"),t}function FL(e){const t=[],n=e.map(s=>s.name.toLowerCase());return n.some(s=>s.includes("warrior")||s.includes("combat"))&&t.push("warrior"),n.some(s=>s.includes("mage")||s.includes("magic"))&&t.push("mage"),n.some(s=>s.includes("thief")||s.includes("stealth"))&&t.push("thief"),n.some(s=>s.includes("archer")||s.includes("ranged"))&&t.push("archer"),t}function UL(e,t,n){const s=["lorerim"];if(e.name!=="Not selected"){const l=e.name.toLowerCase().replace(/\s+/g,"");s.push(l)}const r=[...t.major,...t.minor],i=HL(r);s.push(...i);const o=FL(n);return s.push(...o),s.slice(0,5)}function VL(e){const t=zL(e.race),n=LL(e.stone),s=PL(e.religion),r=$L(e.traits.regular,e.traits.bonus),i=OL(e.skills.major,e.skills.minor,e.skillLevels),o=BL(e.perks.selected,e.perks.ranks),l=IL(e.destinyPath),c=UL(t,i,r),u={level:e.attributeAssignments.level||1,health:e.attributeAssignments.health||0,stamina:e.attributeAssignments.stamina||0,magicka:e.attributeAssignments.magicka||0,totalPoints:(e.attributeAssignments.health||0)+(e.attributeAssignments.stamina||0)+(e.attributeAssignments.magicka||0)};return{name:e.name||"Unnamed Character",notes:e.notes||"",race:t,birthSign:n,traits:r,religion:s,skills:i,perks:o,destinyPath:l,tags:c,attributes:u}}function qL(e,t){const n=[];n.push(`** Build: ${e.name||"Unnamed Character"}**`),e.notes&&n.push(`*${e.notes}*`),n.push(""),t&&(n.push(`[Arcaneum Build Link](${t})`),n.push("")),n.push("__ Race__"),n.push(`${e.race.name}`),n.push(""),n.push("__ Birth Sign__"),n.push(`${e.birthSign.name}`),n.push(""),e.traits.length>0&&(n.push("__ Traits__"),e.traits.forEach(r=>{const i=r.type==="bonus"?" (Late Game)":"";n.push(`**${r.name}${i}**`)}),n.push("")),n.push("__ Religion__"),n.push(`${e.religion.name}`),n.push(""),n.push(`__ Attributes (Level ${e.attributes.level})__`);const s=[];if(e.attributes.health>0&&s.push(`Health: ${e.attributes.health}`),e.attributes.stamina>0&&s.push(`Stamina: ${e.attributes.stamina}`),e.attributes.magicka>0&&s.push(`Magicka: ${e.attributes.magicka}`),s.length>0?n.push(s.join(", ")):n.push("No attribute points assigned"),n.push(""),n.push("__ Skills__"),e.skills.major.length>0){const r=e.skills.major.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Major:** ${r}`)}if(e.skills.minor.length>0){const r=e.skills.minor.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Minor:** ${r}`)}if(e.skills.other.length>0){const r=e.skills.other.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Other:** ${r}`)}return n.push(""),e.perks.length>0&&(n.push("__ Perks__"),e.perks.forEach(r=>{n.push(`**${r.skillName}:**`),r.perks.forEach(i=>{const o=i.rank&&i.rank>1?` (Rank ${i.rank})`:"";n.push(` **${i.name}${o}**`)}),n.push("")})),e.destinyPath.length>0&&(n.push("__ Destiny Path__"),e.destinyPath.forEach(r=>{n.push(`**${r.name}**`),r.effects&&n.push(`${r.effects}`),n.push("")})),e.tags.length>0&&(n.push(""),n.push(e.tags.map(r=>`#${r}`).join(" "))),n.join(`
`)}function ZL(e,t){const n=[];n.push(`** Build: ${e.name||"Unnamed Character"}**`),e.notes&&n.push(`*${e.notes}*`),n.push(""),t&&(n.push(`[Arcaneum Build Link](${t})`),n.push("")),n.push("__ Race__"),n.push(`${e.race.name}`),n.push(""),n.push("__ Birth Sign__"),n.push(`${e.birthSign.name}`),n.push(""),e.traits.length>0&&(n.push("__ Traits__"),e.traits.forEach(r=>{const i=r.type==="bonus"?" (Late Game)":"";n.push(`**${r.name}${i}**`)}),n.push("")),n.push("__ Religion__"),n.push(`${e.religion.name}`),n.push(""),n.push(`__ Attributes (Level ${e.attributes.level})__`);const s=[];if(e.attributes.health>0&&s.push(`Health: ${e.attributes.health}`),e.attributes.stamina>0&&s.push(`Stamina: ${e.attributes.stamina}`),e.attributes.magicka>0&&s.push(`Magicka: ${e.attributes.magicka}`),s.length>0?n.push(s.join(", ")):n.push("No attribute points assigned"),n.push(""),n.push("__ Skills__"),e.skills.major.length>0){const r=e.skills.major.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Major:** ${r}`)}if(e.skills.minor.length>0){const r=e.skills.minor.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Minor:** ${r}`)}if(e.skills.other.length>0){const r=e.skills.other.map(i=>i.level?`${i.name} (Level ${i.level})`:i.name).join(", ");n.push(`**Other:** ${r}`)}return n.push(""),e.perks.length>0&&(n.push("__ Perks__"),e.perks.forEach(r=>{n.push(`**${r.skillName}:**`),r.perks.forEach(i=>{const o=i.rank&&i.rank>1?` (Rank ${i.rank})`:"";n.push(` **${i.name}${o}**`)}),n.push("")})),e.destinyPath.length>0&&(n.push("__ Destiny Path__"),e.destinyPath.forEach(r=>{n.push(`**${r.name}**`),r.effects&&n.push(`${r.effects}`),n.push("")})),e.tags.length>0&&(n.push(""),n.push(e.tags.map(r=>`#${r}`).join(" "))),n.join(`
`)}async function GL(e){try{await navigator.clipboard.writeText(e)}catch{const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")}catch{throw new Error("Failed to copy to clipboard")}finally{document.body.removeChild(n)}}}function YL({build:e,className:t}){const[n,s]=g.useState(!1),[r,i]=g.useState(null),[o,l]=g.useState(""),[c,u]=g.useState("names"),d=g.useCallback(async f=>{s(!0),i(null),l(""),u(f);try{const m=VL(e),h=window.location.href,p=f==="full"?ZL(m,h):qL(m,h);await GL(p),i(f),setTimeout(()=>i(null),2e3)}catch(m){console.error("Discord export failed:",m),l(m instanceof Error?m.message:"Export failed"),setTimeout(()=>l(""),3e3)}finally{s(!1)}},[e]);return a.jsxs("div",{className:H("relative",t),children:[a.jsxs("div",{className:"flex rounded-md border border-input bg-background",children:[a.jsx(q,{variant:n?"ghost":c==="names"?"default":"ghost",size:"sm",onClick:()=>d("names"),disabled:n,className:H("rounded-r-none border-r",c==="names"&&!n&&"bg-primary text-primary-foreground",r==="names"&&"bg-green-600 hover:bg-green-700 text-white",o&&"bg-red-600 hover:bg-red-700 text-white"),title:o||"Export build to Discord format (short form)","aria-label":"Export build to Discord format (short form)",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),a.jsx("span",{className:"ml-2",children:"Exporting..."})]}):r==="names"?a.jsxs(a.Fragment,{children:[a.jsx(mc,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Copied!"})]}):o?a.jsxs(a.Fragment,{children:[a.jsx(Ao,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Error"})]}):a.jsxs(a.Fragment,{children:[a.jsx(M4,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Export (short form)"})]})}),a.jsx(q,{variant:n?"ghost":c==="full"?"default":"ghost",size:"sm",onClick:()=>d("full"),disabled:n,className:H("rounded-l-none",c==="full"&&!n&&"bg-primary text-primary-foreground",r==="full"&&"bg-green-600 hover:bg-green-700 text-white",o&&"bg-red-600 hover:bg-red-700 text-white"),title:o||"Export build to Discord format (long form)","aria-label":"Export build to Discord format (long form)",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),a.jsx("span",{className:"ml-2",children:"Exporting..."})]}):r==="full"?a.jsxs(a.Fragment,{children:[a.jsx(mc,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Copied!"})]}):o?a.jsxs(a.Fragment,{children:[a.jsx(Ao,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Error"})]}):a.jsxs(a.Fragment,{children:[a.jsx(DN,{className:"w-4 h-4"}),a.jsx("span",{className:"ml-2",children:"Export (long form)"})]})})]}),o&&a.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-red-100 border border-red-300 rounded text-xs text-red-800 max-w-xs z-50",role:"alert","aria-live":"polite",children:o})]})}function XL({onReset:e,build:t,className:n}){return a.jsxs("div",{className:`flex flex-wrap gap-2 mb-6 ${n||""}`,children:[a.jsxs(q,{variant:"destructive",size:"sm",className:"text-destructive-foreground cursor-pointer hover:opacity-90",onClick:e,children:[a.jsx(xr,{className:"w-4 h-4 mr-2"}),"Reset Build"]}),a.jsx(YL,{build:t})]})}function WL({cards:e,className:t="",gap:n=16}){const[s,r]=g.useState(0),i=g.useRef(null);g.useCallback(()=>s<768?1:s<1024?2:s<1280?3:4,[s]),g.useEffect(()=>{const c=()=>{i.current&&r(i.current.offsetWidth)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const o=g.useCallback(()=>{const c=s<768?1:2,u=[];let d=[];return e.forEach((f,m)=>{f.size==="full"?(d.length>0&&(u.push(l(d,c)),d=[]),u.push(a.jsx("div",{id:f.id,style:{width:"100%",marginBottom:`${n}px`},children:f.component},f.id))):d.push(f)}),d.length>0&&u.push(l(d,c)),a.jsx(a.Fragment,{children:u})},[e,s,n]),l=g.useCallback((c,u)=>{var m;const d=Array.from({length:u},()=>[]),f=new Array(u).fill(0);return c.forEach(h=>{let p=0,v=1/0;for(let b=0;b<u;b++)f[b]<v&&(v=f[b],p=b);d[p].push(a.jsx("div",{id:h.id,style:{width:"100%",marginBottom:`${n}px`},children:h.component},h.id)),f[p]+=1}),a.jsx("div",{style:{display:"flex",width:"100%",marginBottom:`${n}px`},children:d.map((h,p)=>a.jsx("div",{style:{width:`calc(${100/u}% - ${n/2}px)`,marginRight:p<u-1?`${n}px`:0},children:h},p))},`group-${(m=c[0])==null?void 0:m.id}`)},[n]);return e.length===0?a.jsx("div",{className:`text-center py-12 ${t}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No build cards to display"})}):a.jsx("div",{ref:i,className:t,children:a.jsx("div",{style:{width:"100%"},children:o()})})}const KL=Xc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function K({className:e,variant:t,...n}){return a.jsx("div",{className:H(KL({variant:t}),e),...n})}const tm={traitLimit:{regular:"text-blue-600",bonus:"text-purple-600",warning:"text-yellow-600",error:"text-red-600"},summaryCard:{primary:"text-primary",secondary:"text-muted-foreground",accent:"text-accent"},backgrounds:{warning:"bg-yellow-50 dark:bg-yellow-950",info:"bg-blue-50 dark:bg-blue-950",error:"bg-red-50 dark:bg-red-950",success:"bg-green-50 dark:bg-green-950"},borders:{warning:"border-yellow-200 dark:border-yellow-800",info:"border-blue-200 dark:border-blue-800",error:"border-red-200 dark:border-red-800",success:"border-green-200 dark:border-green-800"}},fo={card:"p-6 space-y-4",section:"space-y-3",item:"space-y-2"};function QL(e){return tm.traitLimit[e]}function qy(e){return tm.summaryCard[e]}function JL(e){return tm.backgrounds[e]}function eS(e){return tm.borders[e]}function e$({title:e,items:t,layout:n="grid",className:s}){const r=o=>{switch(o){case"race":return a.jsx(Hd,{className:"h-4 w-4"});case"birthsign":return a.jsx(Ze,{className:"h-4 w-4"});case"religion":return a.jsx(Os,{className:"h-4 w-4"});case"traits":return a.jsx($N,{className:"h-4 w-4"});default:return null}},i=()=>{switch(n){case"grid":return"grid grid-cols-2 md:grid-cols-4 gap-4";case"list":return"space-y-3";default:return"grid grid-cols-2 md:grid-cols-4 gap-4"}};return a.jsxs(xe,{className:H(fo.card,s),children:[a.jsx(Te,{children:a.jsx(Le,{children:e})}),a.jsx(ve,{className:H(fo.section),children:a.jsx("div",{className:i(),children:t.map((o,l)=>a.jsxs("div",{className:H(fo.item,o.className),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.icon||r(o.type),a.jsxs("span",{className:H("font-medium text-sm",qy("primary")),children:[o.label,":"]})]}),a.jsx("div",{className:H("text-sm",qy("secondary")),children:o.value||"Not selected"})]},l))})})]})}function t$(e){return[{label:"Race",value:e.race||"Not selected",type:"race"},{label:"Birth Sign",value:e.stone||"Not selected",type:"birthsign"},{label:"Religion",value:e.religion||"Not selected",type:"religion"},{label:"Traits",value:`${e.traits.regular.length}/${e.traitLimits.regular} starting, ${e.traits.bonus.length}/${e.traitLimits.bonus} late game`,type:"traits"}]}function tS({build:e,title:t="Build Summary",layout:n="grid",className:s}){const r=t$(e);return a.jsx(e$,{title:t,items:r,layout:n,className:s})}function n$({open:e,title:t,message:n,variant:s="warning",confirmText:r="Confirm",cancelText:i="Cancel",onConfirm:o,onCancel:l,className:c}){if(!e)return null;const u=()=>{switch(s){case"warning":return a.jsx(hc,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"});case"info":return a.jsx(Mo,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"});case"error":return a.jsx(i4,{className:"h-5 w-5 text-red-600 dark:text-red-400"});case"success":return a.jsx(Id,{className:"h-5 w-5 text-green-600 dark:text-green-400"});default:return a.jsx(hc,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}},d=()=>{switch(s){case"error":return"destructive";case"success":return"default";default:return"default"}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:a.jsxs("div",{className:H("bg-white dark:bg-zinc-900 rounded-lg shadow-lg p-6 w-full max-w-xs space-y-4 border",eS(s),c),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[u(),a.jsx("span",{className:"font-semibold",children:t})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(q,{variant:"outline",size:"sm",onClick:l,children:i}),a.jsx(q,{variant:d(),size:"sm",onClick:o,children:r})]})]})})}function s$({open:e,title:t,message:n,variant:s="warning",confirmText:r,cancelText:i,onConfirm:o,onCancel:l,className:c}){return a.jsx(n$,{open:e,title:t,message:n,variant:s,confirmText:r,cancelText:i,onConfirm:o,onCancel:l,className:c})}function r$({open:e,onConfirm:t,onCancel:n}){return a.jsx(s$,{open:e,title:"Reset Build?",message:"This will clear all selections and start a new build. This action cannot be undone.",variant:"warning",confirmText:"Confirm Reset",cancelText:"Cancel",onConfirm:t,onCancel:n})}function a$({title:e,description:t,icon:n,variant:s="default",children:r,className:i}){const o=()=>{if(n)return n;switch(s){case"warning":return a.jsx(hc,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return a.jsx(Mo,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});default:return null}};return a.jsxs(xe,{className:H(fo.card,i),children:[a.jsxs(Te,{children:[a.jsxs(Le,{className:"flex items-center gap-2",children:[o(),e]}),t&&a.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),a.jsx(ve,{className:H(fo.section),children:r})]})}function Zy({label:e,value:t,onChange:n,min:s=0,max:r=10,currentCount:i,type:o="regular",className:l}){const c=()=>{switch(o){case"regular":return a.jsx(kx,{className:"h-4 w-4"});case"bonus":return a.jsx(Ze,{className:"h-4 w-4"});default:return null}},u=()=>QL(o);return a.jsxs("div",{className:H(fo.item,l),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c(),a.jsx(Vd,{htmlFor:`${o}-limit`,className:u(),children:e})]}),a.jsx(Ts,{id:`${o}-limit`,type:"number",min:s,max:r,value:t,onChange:d=>n(parseInt(d.target.value)||0),className:"mt-1"}),i!==void 0&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Currently selected: ",i]})]})}function Gy({type:e,title:t,message:n,className:s}){const r=()=>{switch(e){case"warning":return a.jsx(hc,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return a.jsx(Mo,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});case"error":return a.jsx(hc,{className:"h-4 w-4 text-red-600 dark:text-red-400"});case"success":return a.jsx(Mo,{className:"h-4 w-4 text-green-600 dark:text-green-400"});default:return null}};return a.jsxs("div",{className:H("flex items-start gap-2 p-4 rounded-lg border",JL(e),eS(e),s),children:[r(),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:t}),a.jsx("p",{className:"mt-1",children:n})]})]})}function i$({regularLimit:e,bonusLimit:t,onRegularLimitChange:n,onBonusLimitChange:s,currentRegularCount:r,currentBonusCount:i,className:o}){const l=e!==2||t!==1;return a.jsxs(a$,{title:"Trait Limits Configuration",description:"Configure the number of traits your character can have",icon:a.jsx(Mo,{className:"h-4 w-4 text-muted-foreground"}),className:o,children:[a.jsx(Gy,{type:"warning",title:"Default configuration is 2 starting + 1 late game traits.",message:"Increasing these limits requires corresponding MCM (Mod Configuration Menu) changes in-game. Make sure your MCM settings match these limits to avoid conflicts."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Zy,{label:"Starting Traits Limit",value:e,onChange:n,min:0,max:10,currentCount:r,type:"regular"}),a.jsx(Zy,{label:"Late Game Traits Limit",value:t,onChange:s,min:0,max:5,currentCount:i,type:"bonus"})]}),l&&a.jsx(Gy,{type:"info",title:`Custom limits detected: ${e} starting + ${t} late game traits.`,message:"Remember to update your MCM settings accordingly."})]})}const o$={magicResist:{name:"Magic Resist",isPercentage:!0,prefactor:1,threshold:150,weights:{health:0,magicka:1,stamina:0},description:"Reduces incoming magical damage",category:"survival"},magickaRegen:{name:"Magicka Regen",isPercentage:!0,prefactor:8,threshold:100,weights:{health:0,magicka:1,stamina:0},description:"Increases magicka regeneration rate",category:"magic"},diseaseResist:{name:"Disease Resist",isPercentage:!0,prefactor:4,threshold:100,weights:{health:.4,magicka:0,stamina:.6},description:"Reduces chance of contracting diseases",category:"survival"},poisonResist:{name:"Poison Resist",isPercentage:!0,prefactor:4,threshold:140,weights:{health:.6,magicka:0,stamina:.4},description:"Reduces poison damage and effects",category:"survival"},staminaRegen:{name:"Stamina Regen",isPercentage:!0,prefactor:8,threshold:100,weights:{health:0,magicka:0,stamina:1},description:"Increases stamina regeneration rate",category:"movement"},moveSpeed:{name:"Move Speed",isPercentage:!0,prefactor:.75,threshold:125,weights:{health:.2,magicka:0,stamina:.8},description:"Increases movement speed",category:"movement"},carryWeight:{name:"Carry Weight",isPercentage:!1,prefactor:4,threshold:110,weights:{health:.8,magicka:0,stamina:.2},description:"Increases maximum carry capacity",category:"survival"},rangedDamage:{name:"Ranged Damage",isPercentage:!0,prefactor:4,threshold:150,weights:{health:.2,magicka:0,stamina:.8},description:"Increases ranged weapon damage",category:"combat"},oneHandDamage:{name:"One-Hand Damage",isPercentage:!0,prefactor:4,threshold:150,weights:{health:.5,magicka:0,stamina:.5},description:"Increases one-handed weapon damage",category:"combat"},twoHandDamage:{name:"Two-Hand Damage",isPercentage:!0,prefactor:4,threshold:150,weights:{health:.8,magicka:0,stamina:.2},description:"Increases two-handed weapon damage",category:"combat"},unarmedDamage:{name:"Unarmed Damage",isPercentage:!1,prefactor:4.5,threshold:125,weights:{health:.5,magicka:0,stamina:.5},description:"Increases unarmed combat damage",category:"combat"}};class Yy{static calculateBaseAttributes(t,n){let s={health:100,stamina:100,magicka:100};if(t.race&&n.races){const r=n.races.find(i=>i.edid===t.race);r!=null&&r.startingStats&&(s={health:r.startingStats.health||100,stamina:r.startingStats.stamina||100,magicka:r.startingStats.magicka||100})}return s.health+=t.attributeAssignments.health||0,s.stamina+=t.attributeAssignments.stamina||0,s.magicka+=t.attributeAssignments.magicka||0,s}static calculateDerivedStat(t,n){const s=t.health*n.weights.health+t.magicka*n.weights.magicka+t.stamina*n.weights.stamina;if(s>n.threshold){const r=n.prefactor*Math.sqrt(s-n.threshold);return Math.floor(r)}return 0}static calculateAllDerivedStats(t,n){return Object.entries(n).map(([s,r])=>({name:r.name,value:this.calculateDerivedStat(t,r),isPercentage:r.isPercentage,formula:`${r.prefactor} * sqrt(weightedSum - ${r.threshold})`,description:r.description,category:r.category}))}static validateBaseAttributes(t){return t.health>=0&&t.stamina>=0&&t.magicka>=0&&t.health<=1e3&&t.stamina<=1e3&&t.magicka<=1e3}static getCalculationBreakdown(t,n){const s=t.health*n.weights.health+t.magicka*n.weights.magicka+t.stamina*n.weights.stamina,r=s-n.threshold,i=r>0?Math.floor(n.prefactor*Math.sqrt(r)):0;return{weightedSum:s,threshold:n.threshold,difference:r,prefactor:n.prefactor,result:i}}}function l$(){const{build:e}=ht(),{data:t}=yr();return g.useMemo(()=>{var o,l,c;const s={races:t},r=Yy.calculateBaseAttributes(e,s),i=Yy.calculateAllDerivedStats(r,o$);return{baseAttributes:r,derivedStats:i,sources:{race:e.race||"None",birthsign:e.stone||"None",traits:[...((o=e.traits)==null?void 0:o.regular)||[],...((l=e.traits)==null?void 0:l.bonus)||[]],equipment:e.equipment||[],religion:e.religion||"None",destinyPath:e.destinyPath||[],attributeAssignments:((c=e.attributeAssignments)==null?void 0:c.level)||0}}},[e,t])}function c$(){const{build:e,setAttributeAssignment:t,clearAttributeAssignment:n,clearAllAttributeAssignments:s,updateAttributeLevel:r}=Gr(),{data:i}=yr(),o=e.attributeAssignments,l=g.useMemo(()=>!e.race||i.length===0?null:i.find(p=>p.edid===e.race)||null,[e.race,i]),c=g.useMemo(()=>l!=null&&l.startingStats?{health:l.startingStats.health,stamina:l.startingStats.stamina,magicka:l.startingStats.magicka}:{health:100,stamina:100,magicka:100},[l]),u=g.useMemo(()=>{o.level;const p=o.health+o.stamina+o.magicka;return{health:{base:c.health,assigned:o.health,total:c.health+o.health,ratio:p>0?o.health/p*100:0},stamina:{base:c.stamina,assigned:o.stamina,total:c.stamina+o.stamina,ratio:p>0?o.stamina/p*100:0},magicka:{base:c.magicka,assigned:o.magicka,total:c.magicka+o.magicka,ratio:p>0?o.magicka/p*100:0}}},[o,c]),d=p=>p>0&&p<=o.level,f=p=>o.assignments[p]||null,m=()=>o.health+o.stamina+o.magicka,h=()=>{const p=Object.keys(o.assignments).map(Number),v=[];for(let b=2;b<=o.level;b++)p.includes(b)||v.push(b);return v};return{assignments:o,displayData:u,level:o.level,selectedRace:l,baseStats:c,setAttributeAssignment:t,clearAttributeAssignment:n,clearAllAttributeAssignments:s,updateAttributeLevel:r,canAssignAtLevel:d,getAssignmentAtLevel:f,getTotalAssignments:m,getUnassignedLevels:h}}const u$=Xc("",{variants:{variant:{h1:"scroll-m-20 text-5xl font-black tracking-tight text-balance lg:text-6xl",h2:"scroll-m-20 border-b pb-3 text-4xl font-bold tracking-tight first:mt-0 lg:text-5xl",h3:"scroll-m-20 text-3xl font-bold tracking-tight lg:text-4xl",h4:"scroll-m-20 text-2xl font-bold tracking-tight lg:text-3xl",h5:"scroll-m-20 text-xl font-bold tracking-tight lg:text-2xl",h6:"scroll-m-20 text-lg font-bold tracking-tight lg:text-xl",p:"text-lg leading-8 [&:not(:first-child)]:mt-6",blockquote:"mt-6 border-l-4 pl-6 italic text-lg",code:"bg-muted relative rounded px-[0.4rem] py-[0.3rem] font-mono text-base font-bold",lead:"text-muted-foreground text-2xl leading-8",large:"text-xl font-bold",small:"text-base font-semibold leading-none",muted:"text-muted-foreground text-base"}},defaultVariants:{variant:"p"}}),mn=g.forwardRef(({className:e,variant:t,as:n,...s},r)=>{const i=n||d$(t);return a.jsx(i,{className:H(u$({variant:t,className:e})),ref:r,...s})});mn.displayName="Typography";function d$(e){switch(e){case"h1":return"h1";case"h2":return"h2";case"h3":return"h3";case"h4":return"h4";case"h5":return"h5";case"h6":return"h6";case"blockquote":return"blockquote";case"code":return"code";case"lead":case"large":case"small":case"muted":case"p":default:return"p"}}const Ni=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"h1",as:"h1",className:e,ref:n,...t}));Ni.displayName="H1";const ea=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"h2",as:"h2",className:e,ref:n,...t}));ea.displayName="H2";const Ae=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"h3",as:"h3",className:e,ref:n,...t}));Ae.displayName="H3";const mo=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"h4",as:"h4",className:e,ref:n,...t}));mo.displayName="H4";const on=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"h5",as:"h5",className:e,ref:n,...t}));on.displayName="H5";const f$=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"h6",as:"h6",className:e,ref:n,...t}));f$.displayName="H6";const be=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"p",as:"p",className:e,ref:n,...t}));be.displayName="P";const m$=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"blockquote",as:"blockquote",className:e,ref:n,...t}));m$.displayName="Blockquote";const h$=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"code",as:"code",className:e,ref:n,...t}));h$.displayName="Code";const nS=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"lead",as:"p",className:e,ref:n,...t}));nS.displayName="Lead";const g$=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"large",as:"div",className:e,ref:n,...t}));g$.displayName="Large";const ho=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"small",as:"small",className:e,ref:n,...t}));ho.displayName="Small";const pc=g.forwardRef(({className:e,...t},n)=>a.jsx(mn,{variant:"muted",as:"p",className:e,ref:n,...t}));pc.displayName="Muted";function p$({level:e,assignments:t,onAssignmentChange:n,onClearAssignment:s,onClearAll:r,onUpdateAttributeLevel:i,className:o}){const l=b=>Object.values(t).filter(x=>x===b).length,c=l("health"),u=l("stamina"),d=l("magicka"),f=c+u+d,m=f+1,h=(b,x)=>{const y=l(b),w=x-y;if(w>0)for(let N=0;N<w;N++){const S=Math.max(2,f+2+N);n(S,b)}else if(w<0){for(let N=0;N<Math.abs(w);N++)for(let S=e;S>=2;S--)if(t[S]===b){s(S);break}}const j=f+w;i(j+1)},p=b=>{h(b,l(b)+1)},v=b=>{const x=l(b);x>0&&h(b,x-1)};return a.jsxs("div",{className:H("space-y-4",o),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(on,{className:"text-lg font-medium text-foreground",children:"Attribute Points"}),a.jsx("div",{className:"flex gap-2",children:a.jsxs(q,{variant:"outline",size:"sm",onClick:r,className:"text-xs",children:[a.jsx(xr,{className:"h-3 w-3 mr-1"}),"Clear All"]})})]}),a.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border",children:[a.jsxs("div",{className:"text-sm text-muted-foreground mb-3",children:["Character Level: ",m," (derived from ",f," attribute points)"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"flex flex-col items-center p-3 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-800",children:[a.jsx("div",{className:"font-medium text-red-700 dark:text-red-300 mb-3",children:"Health"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(q,{variant:"outline",size:"sm",onClick:()=>v("health"),disabled:c<=0,className:"h-8 w-8 p-0",children:a.jsx(Wl,{className:"h-4 w-4"})}),a.jsx(Ts,{type:"number",value:c,onChange:b=>{const x=parseInt(b.target.value)||0;x>=0&&h("health",x)},className:"w-16 text-center text-lg font-bold text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 border-red-300 dark:border-red-600 focus:border-red-500 focus:ring-red-500",min:0}),a.jsx(q,{variant:"outline",size:"sm",onClick:()=>p("health"),className:"h-8 w-8 p-0",children:a.jsx(ia,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[a.jsx("div",{className:"font-medium text-green-700 dark:text-green-300 mb-3",children:"Stamina"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(q,{variant:"outline",size:"sm",onClick:()=>v("stamina"),disabled:u<=0,className:"h-8 w-8 p-0",children:a.jsx(Wl,{className:"h-4 w-4"})}),a.jsx(Ts,{type:"number",value:u,onChange:b=>{const x=parseInt(b.target.value)||0;x>=0&&h("stamina",x)},className:"w-16 text-center text-lg font-bold text-green-700 dark:text-green-300 bg-white dark:bg-gray-800 border-green-300 dark:border-green-600 focus:border-green-500 focus:ring-green-500",min:0}),a.jsx(q,{variant:"outline",size:"sm",onClick:()=>p("stamina"),className:"h-8 w-8 p-0",children:a.jsx(ia,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300 mb-3",children:"Magicka"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(q,{variant:"outline",size:"sm",onClick:()=>v("magicka"),disabled:d<=0,className:"h-8 w-8 p-0",children:a.jsx(Wl,{className:"h-4 w-4"})}),a.jsx(Ts,{type:"number",value:d,onChange:b=>{const x=parseInt(b.target.value)||0;x>=0&&h("magicka",x)},className:"w-16 text-center text-lg font-bold text-blue-700 dark:text-blue-300 bg-white dark:bg-gray-800 border-blue-300 dark:border-blue-600 focus:border-blue-500 focus:ring-blue-500",min:0}),a.jsx(q,{variant:"outline",size:"sm",onClick:()=>p("magicka"),className:"h-8 w-8 p-0",children:a.jsx(ia,{className:"h-4 w-4"})})]})]})]})]})]})}const x$={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500"},v$={sm:"h-1.5",md:"h-2",lg:"h-3"};function fh({value:e,label:t,color:n="blue",size:s="md",showValue:r=!0,className:i,maxValue:o}){const l=o?Math.min(e/o*100,100):100;return a.jsxs("div",{className:H("space-y-1",i),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:t}),r&&a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),a.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:H("transition-all duration-300 ease-out",x$[n],v$[s]),style:{width:`${l}%`}})})]})}function y$({displayData:e,level:t,className:n,showRatios:s=!0,compact:r=!1,selectedRace:i}){return r?a.jsxs("div",{className:H("space-y-3",n),children:[a.jsx(on,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),i&&a.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Base stats from ",i.name]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Health"}),a.jsx("div",{className:"font-medium text-lg",children:e.health.total}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.health.assigned]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Stamina"}),a.jsx("div",{className:"font-medium text-lg",children:e.stamina.total}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.stamina.assigned]})]}),a.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Magicka"}),a.jsx("div",{className:"font-medium text-lg",children:e.magicka.total}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.magicka.assigned]})]})]}),s&&a.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Level ",t," "," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments"]})]}):a.jsxs("div",{className:H("space-y-4",n),children:[a.jsx(on,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(fh,{value:e.health.total,label:"Health",color:"red",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),a.jsx(fh,{value:e.stamina.total,label:"Stamina",color:"green",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),a.jsx(fh,{value:e.magicka.total,label:"Magicka",color:"blue",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)})]}),s&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Health"}),a.jsxs("div",{className:"text-muted-foreground",children:[e.health.ratio.toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Stamina"}),a.jsxs("div",{className:"text-muted-foreground",children:[e.stamina.ratio.toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Magicka"}),a.jsxs("div",{className:"text-muted-foreground",children:[e.magicka.ratio.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:["Level ",t," "," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments made"]})]})}function sS({className:e,showControls:t=!0,showSummary:n=!0,compact:s=!1}){const[r,i]=g.useState(!0),{assignments:o,displayData:l,level:c,selectedRace:u,setAttributeAssignment:d,clearAttributeAssignment:f,clearAllAttributeAssignments:m,updateAttributeLevel:h}=c$(),p=l$(),v=(j,N)=>{d(j,N)},b=j=>{f(j)},x=()=>{m()},y=p.derivedStats.reduce((j,N)=>(j[N.category]||(j[N.category]=[]),j[N.category].push(N),j),{}),w=["combat","survival","movement","magic"];return a.jsxs(xe,{className:H("w-full",e),children:[a.jsx(Te,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(Le,{className:"flex items-center gap-2",children:[a.jsx(_g,{className:"h-5 w-5"}),"Attributes & Derived Stats"]}),t&&a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>i(!r),children:r?a.jsx(n4,{className:"h-4 w-4"}):a.jsx(_n,{className:"h-4 w-4"})})]})}),a.jsxs(ve,{className:"space-y-6",children:[t&&r&&a.jsx(p$,{level:c,assignments:o.assignments,onAssignmentChange:v,onClearAssignment:b,onClearAll:x,onUpdateAttributeLevel:h}),n&&a.jsx(y$,{displayData:l,level:c,compact:s,selectedRace:u}),n&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"text-lg font-medium text-foreground",children:"Derived Stats"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map(j=>{const N=y[j];return!N||N.length===0?null:a.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[a.jsxs("div",{className:"text-sm font-medium mb-3 capitalize",children:[j," Stats"]}),a.jsx("div",{className:"space-y-2",children:N.map(S=>a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:S.name}),a.jsx("span",{className:"font-medium",children:S.isPercentage?`${S.value}%`:S.value})]},S.name))})]},j)})})]})]})]})}const wd=new Map;function b$(){wd.clear()}b$();function w$(e,t={}){if(!e)return[];const n=JSON.stringify({text:e,options:t});if(wd.has(n))return wd.get(n);let s=[{text:e,key:"0"}];return t.customPatterns&&t.customPatterns.length>0&&t.customPatterns.forEach((r,i)=>{const o=[];s.forEach(l=>{if(l.className)o.push(l);else{let c=0,u;const d=new RegExp(r.pattern,r.pattern.flags.includes("g")?r.pattern.flags:r.pattern.flags+"g");d.lastIndex=0;let f=0;for(;(u=d.exec(l.text))!==null;){u.index>c&&o.push({text:l.text.slice(c,u.index),key:`${l.key}-${f++}`});let m=u[0];const h=typeof r.className=="function"?r.className(u[0]):r.className;r.transform&&(m=r.transform(m)),o.push({text:m,className:h,key:`${l.key}-${f++}`}),c=d.lastIndex}c<l.text.length&&o.push({text:l.text.slice(c),key:`${l.key}-${f++}`})}}),s=o}),s=s.map((r,i)=>({...r,key:r.key||String(i)})),wd.set(n,s),s}const j$=["health","magicka","stamina","health regeneration","magicka regeneration","stamina regeneration"],N$=["one-handed","two-handed","archery","block","heavy armor","light armor","smithing","alchemy"];function rS(){return{highlightBrackets:!0,highlightAttributes:!0,highlightSkills:!0,highlightNumbers:!0,customPatterns:[{pattern:/\*\*\*([^*]+)\*\*\*/g,className:e=>{const n=e.slice(3,-3).match(/[+-]?\d+(?:\.\d+)?%?/);if(n){const s=parseFloat(n[0]),r=n[0].startsWith("+")||s>0,i=n[0].startsWith("-")||s<0;if(r)return"font-bold text-green-600 bg-skyrim-gold/10 px-1 py-0.5 rounded";if(i)return"font-bold text-red-600 bg-skyrim-gold/10 px-1 py-0.5 rounded"}return"font-bold text-skyrim-gold bg-skyrim-gold/10 px-1 py-0.5 rounded"},transform:e=>e.slice(3,-3)},{pattern:/<([^>]+)>/g,className:e=>{const t=e.slice(1,-1);if(!/^\d+$/.test(t))return"text-foreground"},transform:e=>{const t=e.match(/<([^>]+)>/);return t?t[1]:e.slice(1,-1)}},{pattern:/[+-]?\d+(?:\.\d+)?%?/g,className:e=>{const t=parseFloat(e),n=e.startsWith("+")||t>0,s=e.startsWith("-")||t<0,r=t===0;return n?"font-bold text-green-600":s?"font-bold text-red-600":r?"font-bold text-skyrim-gold":"font-bold text-green-600"}},{pattern:new RegExp(`\\b(${j$.join("|")})\\b`,"gi"),className:"font-semibold text-primary"},{pattern:new RegExp(`\\b(${N$.join("|")})\\b`,"gi"),className:"font-semibold text-primary"}]}}function ze({text:e,options:t,className:n="text-sm text-muted-foreground",as:s="div"}){const r=g.useMemo(()=>rS(),[]),i=g.useMemo(()=>e?w$(e,t||r):[],[e,t,r]);if(!e)return null;if(n.includes("line-clamp")){const l=n.match(/line-clamp-\d+/g)||[],c=n.replace(/line-clamp-\d+/g,"").trim();return a.jsx(s,{className:c,children:a.jsx("div",{className:`${l.join(" ")} overflow-hidden`,children:i.map(u=>a.jsx("span",{className:u.className,children:u.text},u.key))})})}return a.jsx(s,{className:n,children:i.map(l=>a.jsx("span",{className:l.className,children:l.text},l.key))})}const cn=({children:e,title:t,description:n,className:s=""})=>a.jsxs("div",{className:`container mx-auto p-6 space-y-6 ${s}`,children:[t&&a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:t}),n&&a.jsx(ze,{text:n,className:"text-muted-foreground mt-2 max-w-4xl",as:"p"})]})}),e]});function Zx(e){const t=e+"CollectionProvider",[n,s]=Rn(t),[r,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:b,children:x}=v,y=$.useRef(null),w=$.useRef(new Map).current;return a.jsx(r,{scope:b,itemMap:w,collectionRef:y,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Do(l),u=$.forwardRef((v,b)=>{const{scope:x,children:y}=v,w=i(l,x),j=Ie(b,w.collectionRef);return a.jsx(c,{ref:j,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",m=Do(d),h=$.forwardRef((v,b)=>{const{scope:x,children:y,...w}=v,j=$.useRef(null),N=Ie(b,j),S=i(d,x);return $.useEffect(()=>(S.itemMap.set(j,{ref:j,...w}),()=>void S.itemMap.delete(j))),a.jsx(m,{[f]:"",ref:N,children:y})});h.displayName=d;function p(v){const b=i(e+"CollectionConsumer",v);return $.useCallback(()=>{const y=b.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((S,k)=>w.indexOf(S.ref.current)-w.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:h},p,s]}var S$=g.createContext(void 0);function Kc(e){const t=g.useContext(S$);return e||t||"ltr"}var mh="rovingFocusGroup.onEntryFocus",k$={bubbles:!1,cancelable:!0},Qc="RovingFocusGroup",[Og,aS,C$]=Zx(Qc),[E$,nm]=Rn(Qc,[C$]),[_$,A$]=E$(Qc),iS=g.forwardRef((e,t)=>a.jsx(Og.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(Og.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(T$,{...e,ref:t})})}));iS.displayName=Qc;var T$=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,m=g.useRef(null),h=Ie(t,m),p=Kc(i),[v,b]=Tr({prop:o,defaultProp:l??null,onChange:c,caller:Qc}),[x,y]=g.useState(!1),w=Ut(u),j=aS(n),N=g.useRef(!1),[S,k]=g.useState(0);return g.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(mh,w),()=>E.removeEventListener(mh,w)},[w]),a.jsx(_$,{scope:n,orientation:s,dir:p,loop:r,currentTabStopId:v,onItemFocus:g.useCallback(E=>b(E),[b]),onItemShiftTab:g.useCallback(()=>y(!0),[]),onFocusableItemAdd:g.useCallback(()=>k(E=>E+1),[]),onFocusableItemRemove:g.useCallback(()=>k(E=>E-1),[]),children:a.jsx(je.div,{tabIndex:x||S===0?-1:0,"data-orientation":s,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:ne(e.onMouseDown,()=>{N.current=!0}),onFocus:ne(e.onFocus,E=>{const C=!N.current;if(E.target===E.currentTarget&&C&&!x){const _=new CustomEvent(mh,k$);if(E.currentTarget.dispatchEvent(_),!_.defaultPrevented){const P=j().filter(T=>T.focusable),D=P.find(T=>T.active),z=P.find(T=>T.id===v),O=[D,z,...P].filter(Boolean).map(T=>T.ref.current);cS(O,d)}}N.current=!1}),onBlur:ne(e.onBlur,()=>y(!1))})})}),oS="RovingFocusGroupItem",lS=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:i,children:o,...l}=e,c=hr(),u=i||c,d=A$(oS,n),f=d.currentTabStopId===u,m=aS(n),{onFocusableItemAdd:h,onFocusableItemRemove:p,currentTabStopId:v}=d;return g.useEffect(()=>{if(s)return h(),()=>p()},[s,h,p]),a.jsx(Og.ItemSlot,{scope:n,id:u,focusable:s,active:r,children:a.jsx(je.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:ne(e.onMouseDown,b=>{s?d.onItemFocus(u):b.preventDefault()}),onFocus:ne(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:ne(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=D$(b,d.orientation,d.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=m().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const j=w.indexOf(b.currentTarget);w=d.loop?z$(w,j+1):w.slice(j+1)}setTimeout(()=>cS(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});lS.displayName=oS;var M$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function R$(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function D$(e,t,n){const s=R$(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return M$[s]}function cS(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function z$(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var uS=iS,dS=lS,sm="Tabs",[L$,qee]=Rn(sm,[nm]),fS=nm(),[$$,Gx]=L$(sm),mS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Kc(l),[f,m]=Tr({prop:s,onChange:r,defaultProp:i??"",caller:sm});return a.jsx($$,{scope:n,baseId:hr(),value:f,onValueChange:m,orientation:o,dir:d,activationMode:c,children:a.jsx(je.div,{dir:d,"data-orientation":o,...u,ref:t})})});mS.displayName=sm;var hS="TabsList",gS=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...r}=e,i=Gx(hS,n),o=fS(n);return a.jsx(uS,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:a.jsx(je.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});gS.displayName=hS;var pS="TabsTrigger",xS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...i}=e,o=Gx(pS,n),l=fS(n),c=bS(o.baseId,s),u=wS(o.baseId,s),d=s===o.value;return a.jsx(dS,{asChild:!0,...l,focusable:!r,active:d,children:a.jsx(je.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...i,ref:t,onMouseDown:ne(e.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?o.onValueChange(s):f.preventDefault()}),onKeyDown:ne(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(s)}),onFocus:ne(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!r&&f&&o.onValueChange(s)})})})});xS.displayName=pS;var vS="TabsContent",yS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:r,children:i,...o}=e,l=Gx(vS,n),c=bS(l.baseId,s),u=wS(l.baseId,s),d=s===l.value,f=g.useRef(d);return g.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(Gt,{present:r||d,children:({present:m})=>a.jsx(je.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});yS.displayName=vS;function bS(e,t){return`${e}-trigger-${t}`}function wS(e,t){return`${e}-content-${t}`}var P$=mS,O$=gS,B$=xS,I$=yS;function Si({className:e,...t}){return a.jsx(P$,{"data-slot":"tabs",className:H("flex flex-col gap-2",e),...t})}function ki({className:e,...t}){return a.jsx(O$,{"data-slot":"tabs-list",className:H("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Vt({className:e,...t}){return a.jsx(B$,{"data-slot":"tabs-trigger",className:H("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Wt({className:e,...t}){return a.jsx(I$,{"data-slot":"tabs-content",className:H("flex-1 outline-none",e),...t})}const nn=[{label:"Build",value:"build",to:"/build"},{label:"Race",value:"race",to:"/build/race"},{label:"Birth Signs",value:"birth-signs",to:"/build/birth-signs"},{label:"Traits",value:"traits",to:"/build/traits"},{label:"Religion",value:"religions",to:"/build/religions"},{label:"Destiny",value:"destiny",to:"/build/destiny"},{label:"Perks",value:"perks",to:"/build/perks"}],H$=({currentPath:e})=>{var d;const t=lt(),n=nn.findIndex(f=>f.to===e),s=n>=0?n:0,r=f=>{const m=nn.find(h=>h.value===f);m&&t(m.to)},i=f=>{t(f.to)},o=()=>{s>0&&t(nn[s-1].to)},l=()=>{s<nn.length-1&&t(nn[s+1].to)},c=f=>{switch(f.key){case"ArrowLeft":f.preventDefault(),o();break;case"ArrowRight":f.preventDefault(),l();break;case"Home":f.preventDefault(),t(nn[0].to);break;case"End":f.preventDefault(),t(nn[nn.length-1].to);break}},u=((d=nn[s])==null?void 0:d.value)||"build";return a.jsx("div",{className:"bg-background border-b border-border shadow-sm sticky top-12 backdrop-blur-sm",style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},role:"navigation","aria-label":"Character build progress",onKeyDown:c,tabIndex:0,children:a.jsx("div",{style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx(q,{onClick:o,disabled:s===0,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to previous step: ${s>0?nn[s-1].label:"none"}`,children:a.jsx(Sx,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx(Si,{value:u,onValueChange:r,children:a.jsx(ki,{className:"flex w-full h-auto p-1 bg-muted relative",style:{backgroundColor:"hsl(var(--muted))",backgroundImage:"none"},role:"tablist","aria-label":"Character build steps",children:nn.map((f,m)=>a.jsxs(Vt,{value:f.value,onClick:()=>i(f),className:H("inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-xs font-medium whitespace-nowrap transition-[color,box-shadow] relative","data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm","dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30","text-foreground dark:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","cursor-pointer select-none"),style:{backgroundColor:u===f.value?"hsl(var(--background))":"transparent",backgroundImage:"none"},title:`Step ${m+1}: ${f.label}`,role:"tab","aria-selected":u===f.value,"aria-label":`Step ${m+1}: ${f.label}`,children:[a.jsx("span",{className:"hidden sm:inline",children:f.label}),a.jsx("span",{className:"sm:hidden",children:f.label.split(" ")[0]}),u===f.value&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-skyrim-gold rounded-b-md transition-all duration-200"})]},f.value))})})}),a.jsx(q,{onClick:l,disabled:s===nn.length-1,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to next step: ${s<nn.length-1?nn[s+1].label:"none"}`,children:a.jsx(qc,{className:"h-4 w-4"})})]})})})},F$=()=>{const e=Ar();return a.jsxs("div",{className:"flex flex-col min-h-full",children:[a.jsx(H$,{currentPath:e.pathname}),a.jsx("div",{className:"flex-grow",children:a.jsx(xD,{})})]})};function U$(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function jS(e){const[t,n]=g.useState(void 0);return $s(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var rm="Switch",[V$,Zee]=Rn(rm),[q$,Z$]=V$(rm),NS=g.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:r,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[m,h]=g.useState(null),p=Ie(t,w=>h(w)),v=g.useRef(!1),b=m?d||!!m.closest("form"):!0,[x,y]=Tr({prop:r,defaultProp:i??!1,onChange:u,caller:rm});return a.jsxs(q$,{scope:n,checked:x,disabled:l,children:[a.jsx(je.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":ES(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:p,onClick:ne(e.onClick,w=>{y(j=>!j),b&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),b&&a.jsx(CS,{control:m,bubbles:!v.current,name:s,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});NS.displayName=rm;var SS="SwitchThumb",kS=g.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,r=Z$(SS,n);return a.jsx(je.span,{"data-state":ES(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t})});kS.displayName=SS;var G$="SwitchBubbleInput",CS=g.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...r},i)=>{const o=g.useRef(null),l=Ie(o,i),c=U$(n),u=jS(t);return g.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&h){const p=new Event("click",{bubbles:s});h.call(d,n),d.dispatchEvent(p)}},[c,n,s]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:l,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});CS.displayName=G$;function ES(e){return e?"checked":"unchecked"}var _S=NS,Y$=kS;const AS=g.forwardRef(({className:e,...t},n)=>a.jsx(_S,{className:H("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-black data-[state=unchecked]:bg-gray-300",e),...t,ref:n,children:a.jsx(Y$,{className:H("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-sm ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));AS.displayName=_S.displayName;function fs({itemId:e,itemType:t,itemName:n,isInBuild:s=!1,className:r,onCheckedChange:i}){const{setRace:o,setStone:l,setReligion:c,addRegularTrait:u,addBonusTrait:d,removeTrait:f,addMajorSkill:m,removeMajorSkill:h,removeMinorSkill:p,addEquipment:v,removeEquipment:b,build:x}=ht(),w=s||(()=>{switch(t){case"race":return x.race===e;case"stone":return x.stone===e;case"religion":return x.religion===e;case"trait":return x.traits.regular.includes(e)||x.traits.bonus.includes(e);case"skill":return x.skills.major.includes(e)||x.skills.minor.includes(e);case"equipment":return x.equipment.includes(e);default:return!1}})(),j=S=>{if(i){i(S);return}switch(t){case"race":o(S?e:null);break;case"stone":l(S?e:null);break;case"religion":c(S?e:null);break;case"trait":S?x.traits.regular.length<2?u(e):x.traits.bonus.length<1&&d(e):f(e);break;case"skill":S?m(e):(h(e),p(e));break;case"equipment":S?v(e):b(e);break}},N=()=>w?`This ${t} is currently in your build`:`Add this ${t} to your character build`;return a.jsx("div",{className:H("flex items-center justify-center p-2 rounded-lg border transition-all duration-200 cursor-pointer hover:bg-muted/50",w?"border-[#d4af37] bg-[#d4af37]/20 shadow-md":"border-border",r),onClick:S=>{S.stopPropagation(),j(!w)},title:N(),children:a.jsx(AS,{checked:w,onCheckedChange:j,className:H("transition-all duration-200",w?"data-[state=checked]:bg-[#d4af37]":"")})})}function Fa({categories:e,onSelect:t,placeholder:n="Search categories...",className:s=""}){const[r,i]=g.useState(!1),[o,l]=g.useState(null),[c,u]=g.useState(""),[d,f]=g.useState(-1),m=g.useRef(null),h=g.useRef(null),p=e.length===1?e[0]:null;g.useEffect(()=>{const k=E=>{m.current&&!m.current.contains(E.target)&&(i(!1),l(null),f(-1))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const v=o||p?(o||p).options.filter(k=>String(k.label||"").toLowerCase().includes(c.toLowerCase())||String(k.description||"").toLowerCase().includes(c.toLowerCase())):e.flatMap(k=>k.options.filter(E=>String(E.label||"").toLowerCase().includes(c.toLowerCase())||String(E.description||"").toLowerCase().includes(c.toLowerCase()))),b=k=>{u(k),i(!0),f(-1)},x=k=>{var E;l(k),u(""),(E=h.current)==null||E.focus()},y=k=>{t(k),u(""),l(null),i(!1),f(-1)},w=k=>{k.key==="ArrowDown"?(k.preventDefault(),f(E=>Math.min(E+1,v.length-1))):k.key==="ArrowUp"?(k.preventDefault(),f(E=>Math.max(E-1,-1))):k.key==="Enter"?(k.preventDefault(),d>=0&&v[d]&&y(v[d])):k.key==="Escape"&&(i(!1),l(null),f(-1))},j=()=>{i(!0)},N=o||p,S=!p&&!o;return a.jsxs("div",{ref:m,className:`relative ${s}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Ts,{ref:h,type:"text",placeholder:N?N.placeholder:n,value:c,onChange:k=>b(k.target.value),onFocus:j,onKeyDown:w,className:"pl-10 pr-10"}),a.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>i(!r),children:a.jsx(_n,{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`})})]}),r&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",style:{zIndex:Lt.AUTOCOMPLETE+10},children:[S&&a.jsxs("div",{className:"p-2 border-b border-border",children:[a.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(k=>a.jsxs("button",{onClick:()=>x(k),className:"w-full text-left px-2 py-2 hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98] rounded text-sm flex items-center justify-between transition-all duration-200 cursor-pointer",children:[a.jsx("span",{children:k.name}),a.jsx(_n,{className:"h-4 w-4"})]},k.id))]}),a.jsx("div",{className:"p-2",children:v.length===0?a.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):v.map((k,E)=>a.jsxs("button",{onClick:()=>y(k),className:`w-full text-left px-2 py-2 rounded text-sm transition-all duration-200 cursor-pointer ${E===d?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"}`,children:[a.jsx("div",{className:"font-medium",children:k.label||"Unnamed Option"}),k.description&&a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:k.description})]},k.id))})]})]})}const X$=["top","right","bottom","left"],va=Math.min,bn=Math.max,qd=Math.round,Iu=Math.floor,Ms=e=>({x:e,y:e}),W$={left:"right",right:"left",bottom:"top",top:"bottom"},K$={start:"end",end:"start"};function Bg(e,t,n){return bn(e,va(t,n))}function br(e,t){return typeof e=="function"?e(t):e}function wr(e){return e.split("-")[0]}function ml(e){return e.split("-")[1]}function Yx(e){return e==="x"?"y":"x"}function Xx(e){return e==="y"?"height":"width"}const Q$=new Set(["top","bottom"]);function Es(e){return Q$.has(wr(e))?"y":"x"}function Wx(e){return Yx(Es(e))}function J$(e,t,n){n===void 0&&(n=!1);const s=ml(e),r=Wx(e),i=Xx(r);let o=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Zd(o)),[o,Zd(o)]}function eP(e){const t=Zd(e);return[Ig(e),t,Ig(t)]}function Ig(e){return e.replace(/start|end/g,t=>K$[t])}const Xy=["left","right"],Wy=["right","left"],tP=["top","bottom"],nP=["bottom","top"];function sP(e,t,n){switch(e){case"top":case"bottom":return n?t?Wy:Xy:t?Xy:Wy;case"left":case"right":return t?tP:nP;default:return[]}}function rP(e,t,n,s){const r=ml(e);let i=sP(wr(e),n==="start",s);return r&&(i=i.map(o=>o+"-"+r),t&&(i=i.concat(i.map(Ig)))),i}function Zd(e){return e.replace(/left|right|bottom|top/g,t=>W$[t])}function aP(e){return{top:0,right:0,bottom:0,left:0,...e}}function TS(e){return typeof e!="number"?aP(e):{top:e,right:e,bottom:e,left:e}}function Gd(e){const{x:t,y:n,width:s,height:r}=e;return{width:s,height:r,top:n,left:t,right:t+s,bottom:n+r,x:t,y:n}}function Ky(e,t,n){let{reference:s,floating:r}=e;const i=Es(t),o=Wx(t),l=Xx(o),c=wr(t),u=i==="y",d=s.x+s.width/2-r.width/2,f=s.y+s.height/2-r.height/2,m=s[l]/2-r[l]/2;let h;switch(c){case"top":h={x:d,y:s.y-r.height};break;case"bottom":h={x:d,y:s.y+s.height};break;case"right":h={x:s.x+s.width,y:f};break;case"left":h={x:s.x-r.width,y:f};break;default:h={x:s.x,y:s.y}}switch(ml(t)){case"start":h[o]-=m*(n&&u?-1:1);break;case"end":h[o]+=m*(n&&u?-1:1);break}return h}const iP=async(e,t,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:f}=Ky(u,s,c),m=s,h={},p=0;for(let v=0;v<l.length;v++){const{name:b,fn:x}=l[v],{x:y,y:w,data:j,reset:N}=await x({x:d,y:f,initialPlacement:s,placement:m,strategy:r,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,f=w??f,h={...h,[b]:{...h[b],...j}},N&&p<=50&&(p++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(u=N.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:r}):N.rects),{x:d,y:f}=Ky(u,m,c)),v=-1)}return{x:d,y:f,placement:m,strategy:r,middlewareData:h}};async function xc(e,t){var n;t===void 0&&(t={});const{x:s,y:r,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:h=0}=br(t,e),p=TS(h),b=l[m?f==="floating"?"reference":"floating":f],x=Gd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=f==="floating"?{x:s,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},N=Gd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(x.top-N.top+p.top)/j.y,bottom:(N.bottom-x.bottom+p.bottom)/j.y,left:(x.left-N.left+p.left)/j.x,right:(N.right-x.right+p.right)/j.x}}const oP=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:r,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=br(e,t)||{};if(u==null)return{};const f=TS(d),m={x:n,y:s},h=Wx(r),p=Xx(h),v=await o.getDimensions(u),b=h==="y",x=b?"top":"left",y=b?"bottom":"right",w=b?"clientHeight":"clientWidth",j=i.reference[p]+i.reference[h]-m[h]-i.floating[p],N=m[h]-i.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=S?S[w]:0;(!k||!await(o.isElement==null?void 0:o.isElement(S)))&&(k=l.floating[w]||i.floating[p]);const E=j/2-N/2,C=k/2-v[p]/2-1,_=va(f[x],C),P=va(f[y],C),D=_,z=k-v[p]-P,A=k/2-v[p]/2+E,O=Bg(D,A,z),T=!c.arrow&&ml(r)!=null&&A!==O&&i.reference[p]/2-(A<D?_:P)-v[p]/2<0,L=T?A<D?A-D:A-z:0;return{[h]:m[h]+L,data:{[h]:O,centerOffset:A-O-L,...T&&{alignmentOffset:L}},reset:T}}}),lP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...b}=br(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=wr(r),y=Es(l),w=wr(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=m||(w||!v?[Zd(l)]:eP(l)),S=p!=="none";!m&&S&&N.push(...rP(l,v,p,j));const k=[l,...N],E=await xc(t,b),C=[];let _=((s=i.flip)==null?void 0:s.overflows)||[];if(d&&C.push(E[x]),f){const A=J$(r,o,j);C.push(E[A[0]],E[A[1]])}if(_=[..._,{placement:r,overflows:C}],!C.every(A=>A<=0)){var P,D;const A=(((P=i.flip)==null?void 0:P.index)||0)+1,O=k[A];if(O&&(!(f==="alignment"?y!==Es(O):!1)||_.every(M=>M.overflows[0]>0&&Es(M.placement)===y)))return{data:{index:A,overflows:_},reset:{placement:O}};let T=(D=_.filter(L=>L.overflows[0]<=0).sort((L,M)=>L.overflows[1]-M.overflows[1])[0])==null?void 0:D.placement;if(!T)switch(h){case"bestFit":{var z;const L=(z=_.filter(M=>{if(S){const R=Es(M.placement);return R===y||R==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(R=>R>0).reduce((R,B)=>R+B,0)]).sort((M,R)=>M[1]-R[1])[0])==null?void 0:z[0];L&&(T=L);break}case"initialPlacement":T=l;break}if(r!==T)return{reset:{placement:T}}}return{}}}};function Qy(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Jy(e){return X$.some(t=>e[t]>=0)}const cP=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...r}=br(e,t);switch(s){case"referenceHidden":{const i=await xc(t,{...r,elementContext:"reference"}),o=Qy(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Jy(o)}}}case"escaped":{const i=await xc(t,{...r,altBoundary:!0}),o=Qy(i,n.floating);return{data:{escapedOffsets:o,escaped:Jy(o)}}}default:return{}}}}},MS=new Set(["left","top"]);async function uP(e,t){const{placement:n,platform:s,elements:r}=e,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),o=wr(n),l=ml(n),c=Es(n)==="y",u=MS.has(o)?-1:1,d=i&&c?-1:1,f=br(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof p=="number"&&(h=l==="end"?p*-1:p),c?{x:h*d,y:m*u}:{x:m*u,y:h*d}}const dP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:r,y:i,placement:o,middlewareData:l}=t,c=await uP(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:o}}}}},fP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:r}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x,y}=b;return{x,y}}},...c}=br(e,t),u={x:n,y:s},d=await xc(t,c),f=Es(wr(r)),m=Yx(f);let h=u[m],p=u[f];if(i){const b=m==="y"?"top":"left",x=m==="y"?"bottom":"right",y=h+d[b],w=h-d[x];h=Bg(y,h,w)}if(o){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",y=p+d[b],w=p-d[x];p=Bg(y,p,w)}const v=l.fn({...t,[m]:h,[f]:p});return{...v,data:{x:v.x-n,y:v.y-s,enabled:{[m]:i,[f]:o}}}}}},mP=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:r,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=br(e,t),d={x:n,y:s},f=Es(r),m=Yx(f);let h=d[m],p=d[f];const v=br(l,t),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=m==="y"?"height":"width",j=i.reference[m]-i.floating[w]+b.mainAxis,N=i.reference[m]+i.reference[w]-b.mainAxis;h<j?h=j:h>N&&(h=N)}if(u){var x,y;const w=m==="y"?"width":"height",j=MS.has(wr(r)),N=i.reference[f]-i.floating[w]+(j&&((x=o.offset)==null?void 0:x[f])||0)+(j?0:b.crossAxis),S=i.reference[f]+i.reference[w]+(j?0:((y=o.offset)==null?void 0:y[f])||0)-(j?b.crossAxis:0);p<N?p=N:p>S&&(p=S)}return{[m]:h,[f]:p}}}},hP=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:r,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=br(e,t),d=await xc(t,u),f=wr(r),m=ml(r),h=Es(r)==="y",{width:p,height:v}=i.floating;let b,x;f==="top"||f==="bottom"?(b=f,x=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,b=m==="end"?"top":"bottom");const y=v-d.top-d.bottom,w=p-d.left-d.right,j=va(v-d[b],y),N=va(p-d[x],w),S=!t.middlewareData.shift;let k=j,E=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(k=y),S&&!m){const _=bn(d.left,0),P=bn(d.right,0),D=bn(d.top,0),z=bn(d.bottom,0);h?E=p-2*(_!==0||P!==0?_+P:bn(d.left,d.right)):k=v-2*(D!==0||z!==0?D+z:bn(d.top,d.bottom))}await c({...t,availableWidth:E,availableHeight:k});const C=await o.getDimensions(l.floating);return p!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function am(){return typeof window<"u"}function hl(e){return RS(e)?(e.nodeName||"").toLowerCase():"#document"}function Nn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Hs(e){var t;return(t=(RS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function RS(e){return am()?e instanceof Node||e instanceof Nn(e).Node:!1}function ls(e){return am()?e instanceof Element||e instanceof Nn(e).Element:!1}function Ps(e){return am()?e instanceof HTMLElement||e instanceof Nn(e).HTMLElement:!1}function eb(e){return!am()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Nn(e).ShadowRoot}const gP=new Set(["inline","contents"]);function Jc(e){const{overflow:t,overflowX:n,overflowY:s,display:r}=cs(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!gP.has(r)}const pP=new Set(["table","td","th"]);function xP(e){return pP.has(hl(e))}const vP=[":popover-open",":modal"];function im(e){return vP.some(t=>{try{return e.matches(t)}catch{return!1}})}const yP=["transform","translate","scale","rotate","perspective"],bP=["transform","translate","scale","rotate","perspective","filter"],wP=["paint","layout","strict","content"];function Kx(e){const t=Qx(),n=ls(e)?cs(e):e;return yP.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||bP.some(s=>(n.willChange||"").includes(s))||wP.some(s=>(n.contain||"").includes(s))}function jP(e){let t=ya(e);for(;Ps(t)&&!Po(t);){if(Kx(t))return t;if(im(t))return null;t=ya(t)}return null}function Qx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const NP=new Set(["html","body","#document"]);function Po(e){return NP.has(hl(e))}function cs(e){return Nn(e).getComputedStyle(e)}function om(e){return ls(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ya(e){if(hl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||eb(e)&&e.host||Hs(e);return eb(t)?t.host:t}function DS(e){const t=ya(e);return Po(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ps(t)&&Jc(t)?t:DS(t)}function vc(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=DS(e),i=r===((s=e.ownerDocument)==null?void 0:s.body),o=Nn(r);if(i){const l=Hg(o);return t.concat(o,o.visualViewport||[],Jc(r)?r:[],l&&n?vc(l):[])}return t.concat(r,vc(r,[],n))}function Hg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function zS(e){const t=cs(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const r=Ps(e),i=r?e.offsetWidth:n,o=r?e.offsetHeight:s,l=qd(n)!==i||qd(s)!==o;return l&&(n=i,s=o),{width:n,height:s,$:l}}function Jx(e){return ls(e)?e:e.contextElement}function go(e){const t=Jx(e);if(!Ps(t))return Ms(1);const n=t.getBoundingClientRect(),{width:s,height:r,$:i}=zS(t);let o=(i?qd(n.width):n.width)/s,l=(i?qd(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const SP=Ms(0);function LS(e){const t=Nn(e);return!Qx()||!t.visualViewport?SP:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kP(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Nn(e)?!1:t}function ai(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=Jx(e);let o=Ms(1);t&&(s?ls(s)&&(o=go(s)):o=go(e));const l=kP(i,n,s)?LS(i):Ms(0);let c=(r.left+l.x)/o.x,u=(r.top+l.y)/o.y,d=r.width/o.x,f=r.height/o.y;if(i){const m=Nn(i),h=s&&ls(s)?Nn(s):s;let p=m,v=Hg(p);for(;v&&s&&h!==p;){const b=go(v),x=v.getBoundingClientRect(),y=cs(v),w=x.left+(v.clientLeft+parseFloat(y.paddingLeft))*b.x,j=x.top+(v.clientTop+parseFloat(y.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=w,u+=j,p=Nn(v),v=Hg(p)}}return Gd({width:d,height:f,x:c,y:u})}function e0(e,t){const n=om(e).scrollLeft;return t?t.left+n:ai(Hs(e)).left+n}function $S(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=s.left+t.scrollLeft-(n?0:e0(e,s)),i=s.top+t.scrollTop;return{x:r,y:i}}function CP(e){let{elements:t,rect:n,offsetParent:s,strategy:r}=e;const i=r==="fixed",o=Hs(s),l=t?im(t.floating):!1;if(s===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Ms(1);const d=Ms(0),f=Ps(s);if((f||!f&&!i)&&((hl(s)!=="body"||Jc(o))&&(c=om(s)),Ps(s))){const h=ai(s);u=go(s),d.x=h.x+s.clientLeft,d.y=h.y+s.clientTop}const m=o&&!f&&!i?$S(o,c,!0):Ms(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function EP(e){return Array.from(e.getClientRects())}function _P(e){const t=Hs(e),n=om(e),s=e.ownerDocument.body,r=bn(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=bn(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+e0(e);const l=-n.scrollTop;return cs(s).direction==="rtl"&&(o+=bn(t.clientWidth,s.clientWidth)-r),{width:r,height:i,x:o,y:l}}function AP(e,t){const n=Nn(e),s=Hs(e),r=n.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;const u=Qx();(!u||u&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l,y:c}}const TP=new Set(["absolute","fixed"]);function MP(e,t){const n=ai(e,!0,t==="fixed"),s=n.top+e.clientTop,r=n.left+e.clientLeft,i=Ps(e)?go(e):Ms(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=r*i.x,u=s*i.y;return{width:o,height:l,x:c,y:u}}function tb(e,t,n){let s;if(t==="viewport")s=AP(e,n);else if(t==="document")s=_P(Hs(e));else if(ls(t))s=MP(t,n);else{const r=LS(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Gd(s)}function PS(e,t){const n=ya(e);return n===t||!ls(n)||Po(n)?!1:cs(n).position==="fixed"||PS(n,t)}function RP(e,t){const n=t.get(e);if(n)return n;let s=vc(e,[],!1).filter(l=>ls(l)&&hl(l)!=="body"),r=null;const i=cs(e).position==="fixed";let o=i?ya(e):e;for(;ls(o)&&!Po(o);){const l=cs(o),c=Kx(o);!c&&l.position==="fixed"&&(r=null),(i?!c&&!r:!c&&l.position==="static"&&!!r&&TP.has(r.position)||Jc(o)&&!c&&PS(e,o))?s=s.filter(d=>d!==o):r=l,o=ya(o)}return t.set(e,s),s}function DP(e){let{element:t,boundary:n,rootBoundary:s,strategy:r}=e;const o=[...n==="clippingAncestors"?im(t)?[]:RP(t,this._c):[].concat(n),s],l=o[0],c=o.reduce((u,d)=>{const f=tb(t,d,r);return u.top=bn(f.top,u.top),u.right=va(f.right,u.right),u.bottom=va(f.bottom,u.bottom),u.left=bn(f.left,u.left),u},tb(t,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function zP(e){const{width:t,height:n}=zS(e);return{width:t,height:n}}function LP(e,t,n){const s=Ps(t),r=Hs(t),i=n==="fixed",o=ai(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Ms(0);function u(){c.x=e0(r)}if(s||!s&&!i)if((hl(t)!=="body"||Jc(r))&&(l=om(t)),s){const h=ai(t,!0,i,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else r&&u();i&&!s&&r&&u();const d=r&&!s&&!i?$S(r,l):Ms(0),f=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:f,y:m,width:o.width,height:o.height}}function hh(e){return cs(e).position==="static"}function nb(e,t){if(!Ps(e)||cs(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Hs(e)===n&&(n=n.ownerDocument.body),n}function OS(e,t){const n=Nn(e);if(im(e))return n;if(!Ps(e)){let r=ya(e);for(;r&&!Po(r);){if(ls(r)&&!hh(r))return r;r=ya(r)}return n}let s=nb(e,t);for(;s&&xP(s)&&hh(s);)s=nb(s,t);return s&&Po(s)&&hh(s)&&!Kx(s)?n:s||jP(e)||n}const $P=async function(e){const t=this.getOffsetParent||OS,n=this.getDimensions,s=await n(e.floating);return{reference:LP(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function PP(e){return cs(e).direction==="rtl"}const OP={convertOffsetParentRelativeRectToViewportRelativeRect:CP,getDocumentElement:Hs,getClippingRect:DP,getOffsetParent:OS,getElementRects:$P,getClientRects:EP,getDimensions:zP,getScale:go,isElement:ls,isRTL:PP};function BS(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function BP(e,t){let n=null,s;const r=Hs(e);function i(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:m,height:h}=u;if(l||t(),!m||!h)return;const p=Iu(f),v=Iu(r.clientWidth-(d+m)),b=Iu(r.clientHeight-(f+h)),x=Iu(d),w={rootMargin:-p+"px "+-v+"px "+-b+"px "+-x+"px",threshold:bn(0,va(1,c))||1};let j=!0;function N(S){const k=S[0].intersectionRatio;if(k!==c){if(!j)return o();k?o(!1,k):s=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!BS(u,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(N,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(N,w)}n.observe(e)}return o(!0),i}function IP(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=Jx(e),d=r||i?[...u?vc(u):[],...vc(t)]:[];d.forEach(x=>{r&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const f=u&&l?BP(u,n):null;let m=-1,h=null;o&&(h=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let p,v=c?ai(e):null;c&&b();function b(){const x=ai(e);v&&!BS(v,x)&&n(),v=x,p=requestAnimationFrame(b)}return n(),()=>{var x;d.forEach(y=>{r&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),f==null||f(),(x=h)==null||x.disconnect(),h=null,c&&cancelAnimationFrame(p)}}const HP=dP,FP=fP,UP=lP,VP=hP,qP=cP,sb=oP,ZP=mP,GP=(e,t,n)=>{const s=new Map,r={platform:OP,...n},i={...r.platform,_c:s};return iP(e,t,{...r,platform:i})};var YP=typeof document<"u",XP=function(){},jd=YP?g.useLayoutEffect:XP;function Yd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Yd(e[s],t[s]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i==="_owner"&&e.$$typeof)&&!Yd(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function IS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rb(e,t){const n=IS(e);return Math.round(t*n)/n}function gh(e){const t=g.useRef(e);return jd(()=>{t.current=e}),t}function WP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,h]=g.useState(s);Yd(m,s)||h(s);const[p,v]=g.useState(null),[b,x]=g.useState(null),y=g.useCallback(M=>{M!==S.current&&(S.current=M,v(M))},[]),w=g.useCallback(M=>{M!==k.current&&(k.current=M,x(M))},[]),j=i||p,N=o||b,S=g.useRef(null),k=g.useRef(null),E=g.useRef(d),C=c!=null,_=gh(c),P=gh(r),D=gh(u),z=g.useCallback(()=>{if(!S.current||!k.current)return;const M={placement:t,strategy:n,middleware:m};P.current&&(M.platform=P.current),GP(S.current,k.current,M).then(R=>{const B={...R,isPositioned:D.current!==!1};A.current&&!Yd(E.current,B)&&(E.current=B,Kf.flushSync(()=>{f(B)}))})},[m,t,n,P,D]);jd(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const A=g.useRef(!1);jd(()=>(A.current=!0,()=>{A.current=!1}),[]),jd(()=>{if(j&&(S.current=j),N&&(k.current=N),j&&N){if(_.current)return _.current(j,N,z);z()}},[j,N,z,_,C]);const O=g.useMemo(()=>({reference:S,floating:k,setReference:y,setFloating:w}),[y,w]),T=g.useMemo(()=>({reference:j,floating:N}),[j,N]),L=g.useMemo(()=>{const M={position:n,left:0,top:0};if(!T.floating)return M;const R=rb(T.floating,d.x),B=rb(T.floating,d.y);return l?{...M,transform:"translate("+R+"px, "+B+"px)",...IS(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:B}},[n,l,T.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:z,refs:O,elements:T,floatingStyles:L}),[d,z,O,T,L])}const KP=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:r}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?sb({element:s.current,padding:r}).fn(n):{}:s?sb({element:s,padding:r}).fn(n):{}}}},QP=(e,t)=>({...HP(e),options:[e,t]}),JP=(e,t)=>({...FP(e),options:[e,t]}),eO=(e,t)=>({...ZP(e),options:[e,t]}),tO=(e,t)=>({...UP(e),options:[e,t]}),nO=(e,t)=>({...VP(e),options:[e,t]}),sO=(e,t)=>({...qP(e),options:[e,t]}),rO=(e,t)=>({...KP(e),options:[e,t]});var aO="Arrow",HS=g.forwardRef((e,t)=>{const{children:n,width:s=10,height:r=5,...i}=e;return a.jsx(je.svg,{...i,ref:t,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});HS.displayName=aO;var iO=HS,t0="Popper",[FS,gl]=Rn(t0),[oO,US]=FS(t0),VS=e=>{const{__scopePopper:t,children:n}=e,[s,r]=g.useState(null);return a.jsx(oO,{scope:t,anchor:s,onAnchorChange:r,children:n})};VS.displayName=t0;var qS="PopperAnchor",ZS=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...r}=e,i=US(qS,n),o=g.useRef(null),l=Ie(t,o);return g.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:a.jsx(je.div,{...r,ref:l})});ZS.displayName=qS;var n0="PopperContent",[lO,cO]=FS(n0),GS=g.forwardRef((e,t)=>{var ee,pe,fe,we,U,X;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:h="optimized",onPlaced:p,...v}=e,b=US(n0,n),[x,y]=g.useState(null),w=Ie(t,Q=>y(Q)),[j,N]=g.useState(null),S=jS(j),k=(S==null?void 0:S.width)??0,E=(S==null?void 0:S.height)??0,C=s+(i!=="center"?"-"+i:""),_=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],D=P.length>0,z={padding:_,boundary:P.filter(dO),altBoundary:D},{refs:A,floatingStyles:O,placement:T,isPositioned:L,middlewareData:M}=WP({strategy:"fixed",placement:C,whileElementsMounted:(...Q)=>IP(...Q,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[QP({mainAxis:r+E,alignmentAxis:o}),c&&JP({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?eO():void 0,...z}),c&&tO({...z}),nO({...z,apply:({elements:Q,rects:W,availableWidth:se,availableHeight:ye})=>{const{width:ue,height:te}=W.reference,$e=Q.floating.style;$e.setProperty("--radix-popper-available-width",`${se}px`),$e.setProperty("--radix-popper-available-height",`${ye}px`),$e.setProperty("--radix-popper-anchor-width",`${ue}px`),$e.setProperty("--radix-popper-anchor-height",`${te}px`)}}),j&&rO({element:j,padding:l}),fO({arrowWidth:k,arrowHeight:E}),m&&sO({strategy:"referenceHidden",...z})]}),[R,B]=WS(T),F=Ut(p);$s(()=>{L&&(F==null||F())},[L,F]);const I=(ee=M.arrow)==null?void 0:ee.x,V=(pe=M.arrow)==null?void 0:pe.y,G=((fe=M.arrow)==null?void 0:fe.centerOffset)!==0,[J,ie]=g.useState();return $s(()=>{x&&ie(window.getComputedStyle(x).zIndex)},[x]),a.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:L?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(we=M.transformOrigin)==null?void 0:we.x,(U=M.transformOrigin)==null?void 0:U.y].join(" "),...((X=M.hide)==null?void 0:X.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(lO,{scope:n,placedSide:R,onArrowChange:N,arrowX:I,arrowY:V,shouldHideArrow:G,children:a.jsx(je.div,{"data-side":R,"data-align":B,...v,ref:w,style:{...v.style,animation:L?void 0:"none"}})})})});GS.displayName=n0;var YS="PopperArrow",uO={top:"bottom",right:"left",bottom:"top",left:"right"},XS=g.forwardRef(function(t,n){const{__scopePopper:s,...r}=t,i=cO(YS,s),o=uO[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(iO,{...r,ref:n,style:{...r.style,display:"block"}})})});XS.displayName=YS;function dO(e){return e!==null}var fO=e=>({name:"transformOrigin",options:e,fn(t){var b,x,y;const{placement:n,rects:s,middlewareData:r}=t,o=((b=r.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=WS(n),f={start:"0%",center:"50%",end:"100%"}[d],m=(((x=r.arrow)==null?void 0:x.x)??0)+l/2,h=(((y=r.arrow)==null?void 0:y.y)??0)+c/2;let p="",v="";return u==="bottom"?(p=o?f:`${m}px`,v=`${-c}px`):u==="top"?(p=o?f:`${m}px`,v=`${s.floating.height+c}px`):u==="right"?(p=`${-c}px`,v=o?f:`${h}px`):u==="left"&&(p=`${s.floating.width+c}px`,v=o?f:`${h}px`),{data:{x:p,y:v}}}});function WS(e){const[t,n="center"]=e.split("-");return[t,n]}var KS=VS,s0=ZS,r0=GS,a0=XS,Fg=["Enter"," "],mO=["ArrowDown","PageUp","Home"],QS=["ArrowUp","PageDown","End"],hO=[...mO,...QS],gO={ltr:[...Fg,"ArrowRight"],rtl:[...Fg,"ArrowLeft"]},pO={ltr:["ArrowLeft"],rtl:["ArrowRight"]},eu="Menu",[yc,xO,vO]=Zx(eu),[Ci,JS]=Rn(eu,[vO,gl,nm]),lm=gl(),e2=nm(),[yO,Ei]=Ci(eu),[bO,tu]=Ci(eu),t2=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:r,onOpenChange:i,modal:o=!0}=e,l=lm(t),[c,u]=g.useState(null),d=g.useRef(!1),f=Ut(i),m=Kc(r);return g.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),a.jsx(KS,{...l,children:a.jsx(yO,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:u,children:a.jsx(bO,{scope:t,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:o,children:s})})})};t2.displayName=eu;var wO="MenuAnchor",i0=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,r=lm(n);return a.jsx(s0,{...r,...s,ref:t})});i0.displayName=wO;var o0="MenuPortal",[jO,n2]=Ci(o0,{forceMount:void 0}),s2=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:r}=e,i=Ei(o0,t);return a.jsx(jO,{scope:t,forceMount:n,children:a.jsx(Gt,{present:n||i.open,children:a.jsx($x,{asChild:!0,container:r,children:s})})})};s2.displayName=o0;var Zn="MenuContent",[NO,l0]=Ci(Zn),r2=g.forwardRef((e,t)=>{const n=n2(Zn,e.__scopeMenu),{forceMount:s=n.forceMount,...r}=e,i=Ei(Zn,e.__scopeMenu),o=tu(Zn,e.__scopeMenu);return a.jsx(yc.Provider,{scope:e.__scopeMenu,children:a.jsx(Gt,{present:s||i.open,children:a.jsx(yc.Slot,{scope:e.__scopeMenu,children:o.modal?a.jsx(SO,{...r,ref:t}):a.jsx(kO,{...r,ref:t})})})})}),SO=g.forwardRef((e,t)=>{const n=Ei(Zn,e.__scopeMenu),s=g.useRef(null),r=Ie(t,s);return g.useEffect(()=>{const i=s.current;if(i)return M1(i)},[]),a.jsx(c0,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ne(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),kO=g.forwardRef((e,t)=>{const n=Ei(Zn,e.__scopeMenu);return a.jsx(c0,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),CO=Do("MenuContent.ScrollLock"),c0=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:h,disableOutsideScroll:p,...v}=e,b=Ei(Zn,n),x=tu(Zn,n),y=lm(n),w=e2(n),j=xO(n),[N,S]=g.useState(null),k=g.useRef(null),E=Ie(t,k,b.onContentChange),C=g.useRef(0),_=g.useRef(""),P=g.useRef(0),D=g.useRef(null),z=g.useRef("right"),A=g.useRef(0),O=p?Px:g.Fragment,T=p?{as:CO,allowPinchZoom:!0}:void 0,L=R=>{var ee,pe;const B=_.current+R,F=j().filter(fe=>!fe.disabled),I=document.activeElement,V=(ee=F.find(fe=>fe.ref.current===I))==null?void 0:ee.textValue,G=F.map(fe=>fe.textValue),J=OO(G,B,V),ie=(pe=F.find(fe=>fe.textValue===J))==null?void 0:pe.ref.current;(function fe(we){_.current=we,window.clearTimeout(C.current),we!==""&&(C.current=window.setTimeout(()=>fe(""),1e3))})(B),ie&&setTimeout(()=>ie.focus())};g.useEffect(()=>()=>window.clearTimeout(C.current),[]),j1();const M=g.useCallback(R=>{var F,I;return z.current===((F=D.current)==null?void 0:F.side)&&IO(R,(I=D.current)==null?void 0:I.area)},[]);return a.jsx(NO,{scope:n,searchRef:_,onItemEnter:g.useCallback(R=>{M(R)&&R.preventDefault()},[M]),onItemLeave:g.useCallback(R=>{var B;M(R)||((B=k.current)==null||B.focus(),S(null))},[M]),onTriggerLeave:g.useCallback(R=>{M(R)&&R.preventDefault()},[M]),pointerGraceTimerRef:P,onPointerGraceIntentChange:g.useCallback(R=>{D.current=R},[]),children:a.jsx(O,{...T,children:a.jsx(Lx,{asChild:!0,trapped:r,onMountAutoFocus:ne(i,R=>{var B;R.preventDefault(),(B=k.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(Wc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:h,children:a.jsx(uS,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:s,currentTabStopId:N,onCurrentTabStopIdChange:S,onEntryFocus:ne(c,R=>{x.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(r0,{role:"menu","aria-orientation":"vertical","data-state":b2(b.open),"data-radix-menu-content":"",dir:x.dir,...y,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:ne(v.onKeyDown,R=>{const F=R.target.closest("[data-radix-menu-content]")===R.currentTarget,I=R.ctrlKey||R.altKey||R.metaKey,V=R.key.length===1;F&&(R.key==="Tab"&&R.preventDefault(),!I&&V&&L(R.key));const G=k.current;if(R.target!==G||!hO.includes(R.key))return;R.preventDefault();const ie=j().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);QS.includes(R.key)&&ie.reverse(),$O(ie)}),onBlur:ne(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(C.current),_.current="")}),onPointerMove:ne(e.onPointerMove,bc(R=>{const B=R.target,F=A.current!==R.clientX;if(R.currentTarget.contains(B)&&F){const I=R.clientX>A.current?"right":"left";z.current=I,A.current=R.clientX}}))})})})})})})});r2.displayName=Zn;var EO="MenuGroup",u0=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return a.jsx(je.div,{role:"group",...s,ref:t})});u0.displayName=EO;var _O="MenuLabel",a2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return a.jsx(je.div,{...s,ref:t})});a2.displayName=_O;var Xd="MenuItem",ab="menu.itemSelect",cm=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...r}=e,i=g.useRef(null),o=tu(Xd,e.__scopeMenu),l=l0(Xd,e.__scopeMenu),c=Ie(t,i),u=g.useRef(!1),d=()=>{const f=i.current;if(!n&&f){const m=new CustomEvent(ab,{bubbles:!0,cancelable:!0});f.addEventListener(ab,h=>s==null?void 0:s(h),{once:!0}),v1(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(i2,{...r,ref:c,disabled:n,onClick:ne(e.onClick,d),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),u.current=!0},onPointerUp:ne(e.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:ne(e.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||Fg.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});cm.displayName=Xd;var i2=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...i}=e,o=l0(Xd,n),l=e2(n),c=g.useRef(null),u=Ie(t,c),[d,f]=g.useState(!1),[m,h]=g.useState("");return g.useEffect(()=>{const p=c.current;p&&h((p.textContent??"").trim())},[i.children]),a.jsx(yc.ItemSlot,{scope:n,disabled:s,textValue:r??m,children:a.jsx(dS,{asChild:!0,...l,focusable:!s,children:a.jsx(je.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:u,onPointerMove:ne(e.onPointerMove,bc(p=>{s?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ne(e.onPointerLeave,bc(p=>o.onItemLeave(p))),onFocus:ne(e.onFocus,()=>f(!0)),onBlur:ne(e.onBlur,()=>f(!1))})})})}),AO="MenuCheckboxItem",o2=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...r}=e;return a.jsx(f2,{scope:e.__scopeMenu,checked:n,children:a.jsx(cm,{role:"menuitemcheckbox","aria-checked":Wd(n)?"mixed":n,...r,ref:t,"data-state":f0(n),onSelect:ne(r.onSelect,()=>s==null?void 0:s(Wd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});o2.displayName=AO;var l2="MenuRadioGroup",[TO,MO]=Ci(l2,{value:void 0,onValueChange:()=>{}}),c2=g.forwardRef((e,t)=>{const{value:n,onValueChange:s,...r}=e,i=Ut(s);return a.jsx(TO,{scope:e.__scopeMenu,value:n,onValueChange:i,children:a.jsx(u0,{...r,ref:t})})});c2.displayName=l2;var u2="MenuRadioItem",d2=g.forwardRef((e,t)=>{const{value:n,...s}=e,r=MO(u2,e.__scopeMenu),i=n===r.value;return a.jsx(f2,{scope:e.__scopeMenu,checked:i,children:a.jsx(cm,{role:"menuitemradio","aria-checked":i,...s,ref:t,"data-state":f0(i),onSelect:ne(s.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});d2.displayName=u2;var d0="MenuItemIndicator",[f2,RO]=Ci(d0,{checked:!1}),m2=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...r}=e,i=RO(d0,n);return a.jsx(Gt,{present:s||Wd(i.checked)||i.checked===!0,children:a.jsx(je.span,{...r,ref:t,"data-state":f0(i.checked)})})});m2.displayName=d0;var DO="MenuSeparator",h2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return a.jsx(je.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});h2.displayName=DO;var zO="MenuArrow",g2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,r=lm(n);return a.jsx(a0,{...r,...s,ref:t})});g2.displayName=zO;var LO="MenuSub",[Gee,p2]=Ci(LO),Fl="MenuSubTrigger",x2=g.forwardRef((e,t)=>{const n=Ei(Fl,e.__scopeMenu),s=tu(Fl,e.__scopeMenu),r=p2(Fl,e.__scopeMenu),i=l0(Fl,e.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>d,[d]),g.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),a.jsx(i0,{asChild:!0,...u,children:a.jsx(i2,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":b2(n.open),...e,ref:Qf(t,r.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ne(e.onPointerMove,bc(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ne(e.onPointerLeave,bc(f=>{var h,p;d();const m=(h=n.content)==null?void 0:h.getBoundingClientRect();if(m){const v=(p=n.content)==null?void 0:p.dataset.side,b=v==="right",x=b?-5:5,y=m[b?"left":"right"],w=m[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:y,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:y,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ne(e.onKeyDown,f=>{var h;const m=i.searchRef.current!=="";e.disabled||m&&f.key===" "||gO[s.dir].includes(f.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),f.preventDefault())})})})});x2.displayName=Fl;var v2="MenuSubContent",y2=g.forwardRef((e,t)=>{const n=n2(Zn,e.__scopeMenu),{forceMount:s=n.forceMount,...r}=e,i=Ei(Zn,e.__scopeMenu),o=tu(Zn,e.__scopeMenu),l=p2(v2,e.__scopeMenu),c=g.useRef(null),u=Ie(t,c);return a.jsx(yc.Provider,{scope:e.__scopeMenu,children:a.jsx(Gt,{present:s||i.open,children:a.jsx(yc.Slot,{scope:e.__scopeMenu,children:a.jsx(c0,{id:l.contentId,"aria-labelledby":l.triggerId,...r,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ne(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ne(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ne(e.onKeyDown,d=>{var h;const f=d.currentTarget.contains(d.target),m=pO[o.dir].includes(d.key);f&&m&&(i.onOpenChange(!1),(h=l.trigger)==null||h.focus(),d.preventDefault())})})})})})});y2.displayName=v2;function b2(e){return e?"open":"closed"}function Wd(e){return e==="indeterminate"}function f0(e){return Wd(e)?"indeterminate":e?"checked":"unchecked"}function $O(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function PO(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function OO(e,t,n){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=PO(e,Math.max(i,0));r.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function BO(e,t){const{x:n,y:s}=e;let r=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,m=c.y;d>s!=m>s&&n<(f-u)*(s-d)/(m-d)+u&&(r=!r)}return r}function IO(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return BO(n,t)}function bc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var HO=t2,FO=i0,UO=s2,VO=r2,qO=u0,ZO=a2,GO=cm,YO=o2,XO=c2,WO=d2,KO=m2,QO=h2,JO=g2,e6=x2,t6=y2,um="DropdownMenu",[n6,Yee]=Rn(um,[JS]),en=JS(),[s6,w2]=n6(um),j2=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:r,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=en(t),u=g.useRef(null),[d,f]=Tr({prop:r,defaultProp:i??!1,onChange:o,caller:um});return a.jsx(s6,{scope:t,triggerId:hr(),triggerRef:u,contentId:hr(),open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),modal:l,children:a.jsx(HO,{...c,open:d,onOpenChange:f,dir:s,modal:l,children:n})})};j2.displayName=um;var N2="DropdownMenuTrigger",S2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=e,i=w2(N2,n),o=en(n);return a.jsx(FO,{asChild:!0,...o,children:a.jsx(je.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Qf(t,i.triggerRef),onPointerDown:ne(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ne(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});S2.displayName=N2;var r6="DropdownMenuPortal",k2=e=>{const{__scopeDropdownMenu:t,...n}=e,s=en(t);return a.jsx(UO,{...s,...n})};k2.displayName=r6;var C2="DropdownMenuContent",E2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=w2(C2,n),i=en(n),o=g.useRef(!1);return a.jsx(VO,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...s,ref:t,onCloseAutoFocus:ne(e.onCloseAutoFocus,l=>{var c;o.current||(c=r.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ne(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!r.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});E2.displayName=C2;var a6="DropdownMenuGroup",i6=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(qO,{...r,...s,ref:t})});i6.displayName=a6;var o6="DropdownMenuLabel",_2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(ZO,{...r,...s,ref:t})});_2.displayName=o6;var l6="DropdownMenuItem",A2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(GO,{...r,...s,ref:t})});A2.displayName=l6;var c6="DropdownMenuCheckboxItem",T2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(YO,{...r,...s,ref:t})});T2.displayName=c6;var u6="DropdownMenuRadioGroup",d6=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(XO,{...r,...s,ref:t})});d6.displayName=u6;var f6="DropdownMenuRadioItem",M2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(WO,{...r,...s,ref:t})});M2.displayName=f6;var m6="DropdownMenuItemIndicator",R2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(KO,{...r,...s,ref:t})});R2.displayName=m6;var h6="DropdownMenuSeparator",D2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(QO,{...r,...s,ref:t})});D2.displayName=h6;var g6="DropdownMenuArrow",p6=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(JO,{...r,...s,ref:t})});p6.displayName=g6;var x6="DropdownMenuSubTrigger",z2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(e6,{...r,...s,ref:t})});z2.displayName=x6;var v6="DropdownMenuSubContent",L2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=en(n);return a.jsx(t6,{...r,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});L2.displayName=v6;var y6=j2,b6=S2,w6=k2,$2=E2,P2=_2,O2=A2,B2=T2,I2=M2,H2=R2,F2=D2,U2=z2,V2=L2;const nu=y6,su=b6,j6=g.forwardRef(({className:e,inset:t,children:n,...s},r)=>a.jsxs(U2,{ref:r,className:H("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[n,a.jsx(qc,{className:"ml-auto h-4 w-4"})]}));j6.displayName=U2.displayName;const N6=g.forwardRef(({className:e,...t},n)=>a.jsx(V2,{ref:n,className:H("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Lt.DROPDOWN},...t}));N6.displayName=V2.displayName;const pl=g.forwardRef(({className:e,sideOffset:t=4,...n},s)=>a.jsx(w6,{children:a.jsx($2,{ref:s,sideOffset:t,className:H("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Lt.DROPDOWN},...n})}));pl.displayName=$2.displayName;const as=g.forwardRef(({className:e,inset:t,...n},s)=>a.jsx(O2,{ref:s,className:H("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));as.displayName=O2.displayName;const S6=g.forwardRef(({className:e,children:t,checked:n,...s},r)=>a.jsxs(B2,{ref:r,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(H2,{children:a.jsx(mc,{className:"h-4 w-4"})})}),t]}));S6.displayName=B2.displayName;const k6=g.forwardRef(({className:e,children:t,...n},s)=>a.jsxs(I2,{ref:s,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(H2,{children:a.jsx(kx,{className:"h-2 w-2 fill-current"})})}),t]}));k6.displayName=I2.displayName;const C6=g.forwardRef(({className:e,inset:t,...n},s)=>a.jsx(P2,{ref:s,className:H("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));C6.displayName=P2.displayName;const E6=g.forwardRef(({className:e,...t},n)=>a.jsx(F2,{ref:n,className:H("-mx-1 my-1 h-px bg-muted",e),...t}));E6.displayName=F2.displayName;function _6(e,[t,n]){return Math.min(n,Math.max(t,e))}function A6(e,t){return g.useReducer((n,s)=>t[n][s]??n,e)}var m0="ScrollArea",[q2,Xee]=Rn(m0),[T6,Wn]=q2(m0),Z2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:r,scrollHideDelay:i=600,...o}=e,[l,c]=g.useState(null),[u,d]=g.useState(null),[f,m]=g.useState(null),[h,p]=g.useState(null),[v,b]=g.useState(null),[x,y]=g.useState(0),[w,j]=g.useState(0),[N,S]=g.useState(!1),[k,E]=g.useState(!1),C=Ie(t,P=>c(P)),_=Kc(r);return a.jsx(T6,{scope:n,type:s,dir:_,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:N,onScrollbarXEnabledChange:S,scrollbarY:v,onScrollbarYChange:b,scrollbarYEnabled:k,onScrollbarYEnabledChange:E,onCornerWidthChange:y,onCornerHeightChange:j,children:a.jsx(je.div,{dir:_,...o,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});Z2.displayName=m0;var G2="ScrollAreaViewport",Y2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:r,...i}=e,o=Wn(G2,n),l=g.useRef(null),c=Ie(t,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(je.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});Y2.displayName=G2;var Fs="ScrollAreaScrollbar",h0=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Wn(Fs,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=r,l=e.orientation==="horizontal";return g.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),r.type==="hover"?a.jsx(M6,{...s,ref:t,forceMount:n}):r.type==="scroll"?a.jsx(R6,{...s,ref:t,forceMount:n}):r.type==="auto"?a.jsx(X2,{...s,ref:t,forceMount:n}):r.type==="always"?a.jsx(g0,{...s,ref:t}):null});h0.displayName=Fs;var M6=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Wn(Fs,e.__scopeScrollArea),[i,o]=g.useState(!1);return g.useEffect(()=>{const l=r.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[r.scrollArea,r.scrollHideDelay]),a.jsx(Gt,{present:n||i,children:a.jsx(X2,{"data-state":i?"visible":"hidden",...s,ref:t})})}),R6=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Wn(Fs,e.__scopeScrollArea),i=e.orientation==="horizontal",o=fm(()=>c("SCROLL_END"),100),[l,c]=A6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,r.scrollHideDelay,c]),g.useEffect(()=>{const u=r.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const h=u[d];f!==h&&(c("SCROLL"),o()),f=h};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[r.viewport,i,c,o]),a.jsx(Gt,{present:n||l!=="hidden",children:a.jsx(g0,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:ne(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ne(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),X2=g.forwardRef((e,t)=>{const n=Wn(Fs,e.__scopeScrollArea),{forceMount:s,...r}=e,[i,o]=g.useState(!1),l=e.orientation==="horizontal",c=fm(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Oo(n.viewport,c),Oo(n.content,c),a.jsx(Gt,{present:s||i,children:a.jsx(g0,{"data-state":i?"visible":"hidden",...r,ref:t})})}),g0=g.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,r=Wn(Fs,e.__scopeScrollArea),i=g.useRef(null),o=g.useRef(0),[l,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=ek(l.viewport,l.content),d={...s,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,h){return O6(m,o.current,l,h)}return n==="horizontal"?a.jsx(D6,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollLeft,h=ib(m,l,r.dir);i.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=f(m,r.dir))}}):n==="vertical"?a.jsx(z6,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollTop,h=ib(m,l);i.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=f(m))}}):null}),D6=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,i=Wn(Fs,e.__scopeScrollArea),[o,l]=g.useState(),c=g.useRef(null),u=Ie(t,c,i.onScrollbarXChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(K2,{"data-orientation":"horizontal",...r,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":dm(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),nk(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Qd(o.paddingLeft),paddingEnd:Qd(o.paddingRight)}})}})}),z6=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,i=Wn(Fs,e.__scopeScrollArea),[o,l]=g.useState(),c=g.useRef(null),u=Ie(t,c,i.onScrollbarYChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(K2,{"data-orientation":"vertical",...r,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":dm(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),nk(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Qd(o.paddingTop),paddingEnd:Qd(o.paddingBottom)}})}})}),[L6,W2]=q2(Fs),K2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:r,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=e,h=Wn(Fs,n),[p,v]=g.useState(null),b=Ie(t,C=>v(C)),x=g.useRef(null),y=g.useRef(""),w=h.viewport,j=s.content-s.viewport,N=Ut(d),S=Ut(c),k=fm(f,10);function E(C){if(x.current){const _=C.clientX-x.current.left,P=C.clientY-x.current.top;u({x:_,y:P})}}return g.useEffect(()=>{const C=_=>{const P=_.target;(p==null?void 0:p.contains(P))&&N(_,j)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[w,p,j,N]),g.useEffect(S,[s,S]),Oo(p,k),Oo(h.content,k),a.jsx(L6,{scope:n,scrollbar:p,hasThumb:r,onThumbChange:Ut(i),onThumbPointerUp:Ut(o),onThumbPositionChange:S,onThumbPointerDown:Ut(l),children:a.jsx(je.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:ne(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),x.current=p.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),E(C))}),onPointerMove:ne(e.onPointerMove,E),onPointerUp:ne(e.onPointerUp,C=>{const _=C.target;_.hasPointerCapture(C.pointerId)&&_.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,h.viewport&&(h.viewport.style.scrollBehavior=""),x.current=null})})})}),Kd="ScrollAreaThumb",Q2=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=W2(Kd,e.__scopeScrollArea);return a.jsx(Gt,{present:n||r.hasThumb,children:a.jsx($6,{ref:t,...s})})}),$6=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...r}=e,i=Wn(Kd,n),o=W2(Kd,n),{onThumbPositionChange:l}=o,c=Ie(t,f=>o.onThumbChange(f)),u=g.useRef(void 0),d=fm(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(d(),!u.current){const h=B6(f,l);u.current=h,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,d,l]),a.jsx(je.div,{"data-state":o.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ne(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,v=f.clientY-h.top;o.onThumbPointerDown({x:p,y:v})}),onPointerUp:ne(e.onPointerUp,o.onThumbPointerUp)})});Q2.displayName=Kd;var p0="ScrollAreaCorner",J2=g.forwardRef((e,t)=>{const n=Wn(p0,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?a.jsx(P6,{...e,ref:t}):null});J2.displayName=p0;var P6=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,r=Wn(p0,n),[i,o]=g.useState(0),[l,c]=g.useState(0),u=!!(i&&l);return Oo(r.scrollbarX,()=>{var f;const d=((f=r.scrollbarX)==null?void 0:f.offsetHeight)||0;r.onCornerHeightChange(d),c(d)}),Oo(r.scrollbarY,()=>{var f;const d=((f=r.scrollbarY)==null?void 0:f.offsetWidth)||0;r.onCornerWidthChange(d),o(d)}),u?a.jsx(je.div,{...s,ref:t,style:{width:i,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Qd(e){return e?parseInt(e,10):0}function ek(e,t){const n=e/t;return isNaN(n)?0:n}function dm(e){const t=ek(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function O6(e,t,n,s="ltr"){const r=dm(n),i=r/2,o=t||i,l=r-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=s==="ltr"?[0,d]:[d*-1,0];return tk([c,u],f)(e)}function ib(e,t,n="ltr"){const s=dm(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-r,o=t.content-t.viewport,l=i-s,c=n==="ltr"?[0,o]:[o*-1,0],u=_6(e,c);return tk([0,o],[0,l])(u)}function tk(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function nk(e,t){return e>0&&e<t}var B6=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function r(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&t(),n=i,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function fm(e,t){const n=Ut(e),s=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(s.current),[]),g.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function Oo(e,t){const n=Ut(t);$s(()=>{let s=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(s),r.unobserve(e)}}},[e,n])}var sk=Z2,I6=Y2,H6=J2;const ii=g.forwardRef(({className:e,children:t,...n},s)=>a.jsxs(sk,{ref:s,className:H("relative overflow-hidden",e),...n,children:[a.jsx(I6,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(rk,{}),a.jsx(H6,{})]}));ii.displayName=sk.displayName;const rk=g.forwardRef(({className:e,orientation:t="vertical",...n},s)=>a.jsx(h0,{ref:s,orientation:t,className:H("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:a.jsx(Q2,{className:"relative flex-1 rounded-full bg-border"})}));rk.displayName=h0.displayName;function F6({items:e,viewMode:t,onItemSelect:n,selectedItem:s,renderItemCard:r,className:i}){return a.jsxs("div",{className:`space-y-4 ${i}`,children:[t==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(o=>a.jsx("div",{onClick:()=>n(o),className:"cursor-pointer transition-transform hover:scale-[1.02] relative",children:r(o,(s==null?void 0:s.id)===o.id)},o.id))}):a.jsx(ii,{className:"h-[calc(100vh-300px)]",children:a.jsx("div",{className:"space-y-1 pr-4",children:e.map(o=>a.jsx("div",{onClick:()=>n(o),className:"cursor-pointer transition-colors hover:bg-muted/50 rounded-lg",children:r(o,(s==null?void 0:s.id)===o.id)},o.id))})}),e.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No items found matching your criteria."})})]})}function U6({categories:e,onSelect:t,className:n=""}){return a.jsx("div",{className:`flex flex-wrap gap-4 justify-start ${n}`,children:e.map(s=>a.jsx("div",{className:"flex-1 min-w-[180px]",children:a.jsx(Fa,{categories:[s],onSelect:t,placeholder:s.placeholder,className:"w-full"})},s.id))})}function V6({tags:e,onRemove:t,className:n=""}){return e.length===0?null:a.jsx("div",{className:`flex flex-wrap gap-2 ${n}`,children:e.map(s=>a.jsxs(K,{variant:"secondary",className:"flex items-center gap-1 px-3 py-1 text-sm",children:[a.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.category,":"]}),a.jsx("span",{children:s.label}),a.jsx("button",{onClick:()=>t(s.id),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:a.jsx(Dt,{className:"h-3 w-3"})})]},s.id))})}function ak({categories:e,onSelect:t,onCustomSearch:n,placeholder:s="Search by name, description, or abilities...",className:r=""}){const[i,o]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState(""),[f,m]=g.useState(-1),h=g.useRef(null),p=g.useRef(null),v=e.length===1?e[0]:null;g.useEffect(()=>{const _=P=>{h.current&&!h.current.contains(P.target)&&(o(!1),c(null),m(-1))};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const b=l||v?(l||v).options.filter(_=>_.label&&typeof _.label=="string"&&_.label.toLowerCase().includes(u.toLowerCase())||_.description&&typeof _.description=="string"&&_.description.toLowerCase().includes(u.toLowerCase())):e.flatMap(_=>_.options.filter(P=>P.label&&typeof P.label=="string"&&P.label.toLowerCase().includes(u.toLowerCase())||P.description&&typeof P.description=="string"&&P.description.toLowerCase().includes(u.toLowerCase()))),x=_=>{d(_),o(!0),m(-1)},y=_=>{var P;c(_),d(""),(P=p.current)==null||P.focus()},w=_=>{t(_),d(""),c(null),o(!1),m(-1)},j=()=>{u.trim()&&(n(u.trim()),d(""),c(null),o(!1),m(-1))},N=_=>{_.key==="ArrowDown"?(_.preventDefault(),m(P=>Math.min(P+1,b.length-1))):_.key==="ArrowUp"?(_.preventDefault(),m(P=>Math.max(P-1,-1))):_.key==="Enter"?(_.preventDefault(),f>=0&&b[f]?w(b[f]):u.trim()&&j()):_.key==="Escape"&&(o(!1),c(null),m(-1))},S=()=>{o(!0)},k=l||v,E=!v&&!l,C=u.trim()&&!b.some(_=>_.label&&typeof _.label=="string"&&_.label.toLowerCase()===u.toLowerCase());return a.jsxs("div",{ref:h,className:`relative ${r}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Ts,{ref:p,type:"text",placeholder:k?k.placeholder:s,value:u,onChange:_=>x(_.target.value),onFocus:S,onKeyDown:N,className:"pl-10 pr-20"}),C&&a.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:j,title:"Add custom search term",children:a.jsx(ia,{className:"h-4 w-4"})}),a.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>o(!i),children:a.jsx(_n,{className:`h-4 w-4 transition-transform ${i?"rotate-180":""}`})})]}),i&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto",style:{zIndex:Lt.AUTOCOMPLETE+10},children:[E&&a.jsxs("div",{className:"p-2 border-b border-border",children:[a.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(_=>a.jsxs("button",{onClick:()=>y(_),className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center justify-between",children:[a.jsx("span",{children:_.name}),a.jsx(_n,{className:"h-4 w-4"})]},_.id))]}),C&&a.jsx("div",{className:"p-2 border-b border-border",children:a.jsxs("button",{onClick:j,className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center gap-2",children:[a.jsx(ia,{className:"h-4 w-4 text-primary"}),a.jsxs("span",{className:"font-medium",children:['Search for "',u,'"']}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"(Custom search)"})]})}),a.jsx("div",{className:"p-2",children:b.length===0&&!C?a.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):b.map((_,P)=>a.jsxs("button",{onClick:()=>w(_),className:`w-full text-left px-2 py-2 rounded text-sm ${P===f?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[a.jsx("div",{className:"font-medium",children:_.label}),_.description&&a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:_.description})]},_.id))})]})]})}function ka({categories:e,onSelect:t,onCustomSearch:n,className:s=""}){const r=e.find(o=>o.id==="fuzzy-search"||o.id==="keywords"),i=e.filter(o=>o.id!=="fuzzy-search"&&o.id!=="keywords");return a.jsxs("div",{className:`flex flex-wrap gap-4 justify-start ${s}`,children:[r&&a.jsx("div",{className:"flex-1 min-w-[300px]",children:a.jsx(ak,{categories:[r],onSelect:t,onCustomSearch:n,placeholder:r.placeholder,className:"w-full"})}),i.map(o=>a.jsx("div",{className:"flex-shrink-0 min-w-[200px] max-w-[300px]",children:a.jsx(Fa,{categories:[o],onSelect:t,placeholder:o.placeholder,className:"w-full"})},o.id))]})}function q6({children:e,className:t=""}){return a.jsx("div",{className:`grid grid-cols-1 lg:grid-cols-6 gap-6 ${t}`,children:e})}function Z6({children:e,className:t=""}){return a.jsx("div",{className:`lg:col-span-5 ${t}`,children:e})}function G6({children:e,className:t=""}){return a.jsx("div",{className:`lg:col-span-1 ${t}`,children:a.jsx("div",{className:"sticky top-6",style:{zIndex:Lt.STICKY},children:e})})}function Y6({title:e="Select an Item",description:t="Choose an item from the list to view its details"}){return a.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 text-center",children:[a.jsx(ea,{className:"text-lg font-semibold mb-2",children:e}),a.jsx(be,{className:"text-muted-foreground",children:t})]})}function X6({searchCategories:e,selectedTags:t,viewMode:n="grid",onTagSelect:s,onTagRemove:r,onViewModeChange:i,children:o,className:l=""}){return a.jsxs("div",{className:`mb-8 space-y-4 ${l}`,children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(U6,{categories:e,onSelect:s,className:"w-full"})}),i&&a.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[a.jsx(q,{variant:n==="grid"?"default":"ghost",size:"sm",onClick:()=>i("grid"),className:"h-8 px-3",children:a.jsx(ol,{className:"h-4 w-4"})}),a.jsx(q,{variant:n==="list"?"default":"ghost",size:"sm",onClick:()=>i("list"),className:"h-8 px-3",children:a.jsx(pi,{className:"h-4 w-4"})})]})]}),a.jsx(V6,{tags:t,onRemove:r,className:"justify-start"}),o&&a.jsx("div",{className:"pt-4",children:o})]})}class Xe{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.output=="string"&&Array.isArray(t.ingredients)&&Array.isArray(t.effects)}static equals(t,n){return t.name===n.name}static addComputedProperties(t){const n=t.effects.length>0,s=t.effects.length,r=t.ingredients.length,i=r>3||s>2,o=r<=2&&s<=1,l=t.effects.reduce((m,h)=>m+h.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=this.determineDifficulty(t,{ingredientCount:r,effectCount:s,isComplex:i,isSimple:o}),d=this.generateTags(t,{hasEffects:n,effectCount:s,ingredientCount:r,isComplex:i,isSimple:o,difficulty:u}),f=this.createSearchableText(t,d);return{...t,hasEffects:n,effectCount:s,ingredientCount:r,isComplex:i,isSimple:o,totalMagnitude:l,maxDuration:c,tags:d,searchableText:f,difficulty:u}}static determineDifficulty(t,n){return n.isSimple?"Simple":n.isComplex?"Complex":"Moderate"}static generateTags(t,n){const s=[];return t.category&&s.push(t.category),s.push(n.difficulty),n.hasEffects&&s.push("Has Effects"),n.ingredientCount===1?s.push("Single Ingredient"):n.ingredientCount<=3?s.push("Few Ingredients"):s.push("Many Ingredients"),n.effectCount===1?s.push("Single Effect"):n.effectCount<=2?s.push("Few Effects"):s.push("Many Effects"),t.effects.forEach(r=>{s.push(r.name)}),t.ingredients.forEach(r=>{s.push(r)}),[...new Set(s)]}static createSearchableText(t,n){const s=t.ingredients.map(i=>typeof i=="string"?i:i&&typeof i=="object"&&(i.item||i.name||i.label||i.id)||String(i));return[t.name,t.output,t.description||"",...s,...t.effects.map(i=>i.name),...t.effects.map(i=>i.description),...n].join(" ").toLowerCase()}static filterByCategory(t,n){return t.filter(s=>s.category===n)}static filterByCategories(t,n){return n.length===0?t:t.filter(s=>s.category&&n.includes(s.category))}static filterByDifficulty(t,n){return t.filter(s=>s.difficulty===n)}static filterByDifficulties(t,n){return n.length===0?t:t.filter(s=>n.includes(s.difficulty))}static filterByIngredientCount(t,n,s){return t.filter(r=>{const i=r.ingredientCount;return!(n!==null&&i<n||s!==null&&i>s)})}static filterByMagnitude(t,n,s){return t.filter(r=>{const i=r.totalMagnitude;return!(n!==null&&i<n||s!==null&&i>s)})}static filterByEffectProperties(t,n,s){return t.filter(r=>!(n!==null&&r.hasEffects!==n||s!==null&&r.isComplex!==s))}static filterByIngredients(t,n){return n.length===0?t:t.filter(s=>n.some(r=>s.ingredients.some(i=>(typeof i=="string"?i:i.item||i.name||i.label||i.id||String(i)).toLowerCase().includes(r.toLowerCase()))))}static filterByEffects(t,n){return n.length===0?t:t.filter(s=>n.some(r=>s.effects.some(i=>i.name.toLowerCase().includes(r.toLowerCase()))))}static search(t,n){if(!n.trim())return[];const s=n.toLowerCase().trim(),r=[];for(const i of t){const o=this.calculateSearchScore(i,s);if(o>0){const l=this.getMatchedFields(i,s);r.push({recipe:i,score:o,matchedFields:l})}}return r.sort((i,o)=>o.score-i.score)}static calculateSearchScore(t,n){var i;let s=0;const r=n.toLowerCase();return t.name.toLowerCase()===r&&(s+=100),t.output.toLowerCase()===r&&(s+=100),t.name.toLowerCase().includes(r)&&(s+=50),t.output.toLowerCase().includes(r)&&(s+=50),(i=t.description)!=null&&i.toLowerCase().includes(r)&&(s+=30),t.ingredients.forEach(o=>{const l=typeof o=="string"?o:o.item||o.name||o.label||o.id||String(o);l.toLowerCase()===r&&(s+=40),l.toLowerCase().includes(r)&&(s+=20)}),t.effects.forEach(o=>{o.name.toLowerCase()===r&&(s+=40),o.name.toLowerCase().includes(r)&&(s+=20),o.description.toLowerCase().includes(r)&&(s+=15)}),t.tags.forEach(o=>{o.toLowerCase()===r&&(s+=25),o.toLowerCase().includes(r)&&(s+=10)}),s}static getMatchedFields(t,n){var i;const s=[],r=n.toLowerCase();return t.name.toLowerCase().includes(r)&&s.push("name"),t.output.toLowerCase().includes(r)&&s.push("output"),(i=t.description)!=null&&i.toLowerCase().includes(r)&&s.push("description"),t.ingredients.forEach(o=>{(typeof o=="string"?o:o.item||o.name||o.label||o.id||String(o)).toLowerCase().includes(r)&&s.push("ingredients")}),t.effects.forEach(o=>{(o.name.toLowerCase().includes(r)||o.description.toLowerCase().includes(r))&&s.push("effects")}),[...new Set(s)]}static sort(t,n,s="asc"){return[...t].sort((i,o)=>{let l=0;switch(n){case"name":l=i.name.localeCompare(o.name);break;case"category":l=(i.category||"").localeCompare(o.category||"");break;case"difficulty":l=this.compareDifficulties(i.difficulty,o.difficulty);break;case"ingredientCount":l=i.ingredientCount-o.ingredientCount;break;case"effectCount":l=i.effectCount-o.effectCount;break;case"magnitude":l=i.totalMagnitude-o.totalMagnitude;break;case"duration":l=i.maxDuration-o.maxDuration;break}return s==="asc"?l:-l})}static compareDifficulties(t,n){const s={Simple:1,Moderate:2,Complex:3};return(s[t]||0)-(s[n]||0)}static getUniqueCategories(t){const n=t.map(s=>s.category).filter(s=>!!s);return[...new Set(n)].sort()}static getUniqueDifficulties(t){const n=t.map(s=>s.difficulty);return[...new Set(n)].sort((s,r)=>this.compareDifficulties(s,r))}static getUniqueEffects(t){const n=t.flatMap(s=>s.effects.map(r=>r.name));return[...new Set(n)].sort()}static getUniqueIngredients(t){const n=t.flatMap(s=>s.ingredients.map(r=>typeof r=="string"?r:r&&typeof r=="object"&&(r.item||r.name||r.label||r.id)||String(r)));return[...new Set(n)].filter(s=>s&&s!=="[object Object]").sort()}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static applyFilters(t,n){let s=[...t];return n.searchTerm.trim()&&(s=this.search(s,n.searchTerm).map(i=>i.recipe)),n.categories.length>0&&(s=this.filterByCategories(s,n.categories)),n.difficulties.length>0&&(s=this.filterByDifficulties(s,n.difficulties)),n.ingredients.length>0&&(s=this.filterByIngredients(s,n.ingredients)),n.effects.length>0&&(s=this.filterByEffects(s,n.effects)),s=this.filterByEffectProperties(s,n.hasEffects,n.isComplex),s=this.filterByIngredientCount(s,n.minIngredientCount,n.maxIngredientCount),s=this.filterByMagnitude(s,n.minMagnitude,n.maxMagnitude),s}static getStatistics(t){const n=t.length,s=t.filter(j=>j.type==="food").length,r=t.filter(j=>j.type==="alcohol").length,i={};t.forEach(j=>{j.category&&(i[j.category]=(i[j.category]||0)+1)});const o={};t.forEach(j=>{o[j.difficulty]=(o[j.difficulty]||0)+1});const l={};t.forEach(j=>{j.effects.forEach(N=>{l[N.name]=(l[N.name]||0)+1})});const c=t.reduce((j,N)=>j+N.ingredientCount,0),u=t.reduce((j,N)=>j+N.effectCount,0),d=n>0?c/n:0,f=n>0?u/n:0,m=t.reduce((j,N)=>j+N.totalMagnitude,0),h=t.reduce((j,N)=>j+N.maxDuration,0),p=n>0?m/n:0,v=n>0?h/n:0,b={};t.forEach(j=>{j.ingredients.forEach(N=>{b[N]=(b[N]||0)+1})});const x=Object.entries(b).map(([j,N])=>({name:j,count:N})).sort((j,N)=>N.count-j.count).slice(0,10),y={};t.forEach(j=>{j.effects.forEach(N=>{y[N.name]=(y[N.name]||0)+1})});const w=Object.entries(y).map(([j,N])=>({name:j,count:N})).sort((j,N)=>N.count-j.count).slice(0,10);return{totalRecipes:n,foodRecipes:s,alcoholRecipes:r,recipesByCategory:i,recipesByDifficulty:o,recipesByEffect:l,averageIngredientCount:d,averageEffectCount:f,averageMagnitude:p,averageDuration:v,topEffects:w,topIngredients:x}}static getEffectComparisons(t,n){const s={};return n.forEach(r=>{r.effects.forEach(i=>{s[i.name]||(s[i.name]={magnitudeSum:0,durationSum:0,count:0}),s[i.name].magnitudeSum+=i.magnitude,s[i.name].durationSum+=i.duration,s[i.name].count+=1})}),t.effects.map(r=>{const i=s[r.name],o=i.count>0?i.magnitudeSum/i.count:0,l=i.count>0?i.durationSum/i.count:0,c=r.magnitude-o,u=r.duration-l;return{name:r.name,magnitude:{value:r.magnitude,mean:o,difference:c,percentage:o>0?c/o*100:0},duration:{value:r.duration,mean:l,difference:u,percentage:l>0?u/l*100:0}}})}}const Ia=class Ia{constructor(){Ge(this,"cache",null);Ge(this,"lastFetch",0);Ge(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return Ia.instance||(Ia.instance=new Ia),Ia.instance}async loadRecipes(){var t;if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const n=fn("data/cookbook-wiki.json"),s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch recipes: ${s.status} ${s.statusText}`);const r=await s.json(),i=[];if(console.log("RecipeDataProvider: Raw data keys:",Object.keys(r)),r.food&&Array.isArray(r.food)?(console.log("RecipeDataProvider: Found",r.food.length,"food recipes"),i.push(...r.food)):r.food&&typeof r.food=="object"&&(console.log("RecipeDataProvider: Food section is an object, checking for recipes property"),r.food.recipes&&Array.isArray(r.food.recipes)&&(console.log("RecipeDataProvider: Found",r.food.recipes.length,"food recipes in recipes property"),i.push(...r.food.recipes))),r.alcohol&&Array.isArray(r.alcohol)?(console.log("RecipeDataProvider: Found",r.alcohol.length,"alcohol recipes"),i.push(...r.alcohol)):r.alcohol&&typeof r.alcohol=="object"&&(console.log("RecipeDataProvider: Alcohol section is an object, checking for recipes property"),r.alcohol.recipes&&Array.isArray(r.alcohol.recipes)&&(console.log("RecipeDataProvider: Found",r.alcohol.recipes.length,"alcohol recipes in recipes property"),i.push(...r.alcohol.recipes))),i.length===0){console.log("RecipeDataProvider: No recipes found in food/alcohol sections, trying fallback");const u=((t=r.food)==null?void 0:t.recipes)||r.recipes||r;Array.isArray(u)&&(console.log("RecipeDataProvider: Found",u.length,"recipes in fallback data"),i.push(...u))}if(!Array.isArray(i)||i.length===0)throw new Error("RecipeDataProvider: No valid recipes found in data structure");const o=[];let l=0,c=0;for(const u of i)if(Xe.isValid(u)){const d=Xe.addComputedProperties(u);o.push(d),l++}else console.warn("RecipeDataProvider: Invalid recipe data:",u),c++;return this.cache=o,this.lastFetch=Date.now(),console.log(`RecipeDataProvider: Loaded ${l} valid recipes, ${c} invalid recipes`),o}catch(n){throw console.error("RecipeDataProvider: Error loading recipes:",n),n}}async getRecipeData(){console.log("RecipeDataProvider: getRecipeData called");const t=await this.loadRecipes();console.log("RecipeDataProvider: Getting statistics for",t.length,"recipes");const n=Xe.getStatistics(t),s={recipes:t,totalCount:n.totalRecipes,categories:Xe.getUniqueCategories(t),effects:Xe.getUniqueEffects(t),ingredients:Xe.getUniqueIngredients(t),lastUpdated:new Date().toISOString()};return console.log("RecipeDataProvider: getRecipeData result:",{recipesCount:s.recipes.length,totalCount:s.totalCount,categories:s.categories,effects:s.effects,ingredients:s.ingredients}),s}async getRecipeByName(t){return(await this.loadRecipes()).find(s=>s.name===t)||null}async getRecipesByCategory(t){const n=await this.loadRecipes();return Xe.filterByCategory(n,t)}async getRecipesByDifficulty(t){const n=await this.loadRecipes();return Xe.filterByDifficulty(n,t)}async getRecipesByIngredient(t){const n=await this.loadRecipes();return Xe.filterByIngredients(n,[t])}async getRecipesByEffect(t){const n=await this.loadRecipes();return Xe.filterByEffects(n,[t])}async searchRecipes(t){const n=await this.loadRecipes();return Xe.search(n,t).map(r=>r.recipe)}async getStatistics(){const t=await this.loadRecipes();return Xe.getStatistics(t)}clearCache(){this.cache=null,this.lastFetch=0,console.log("RecipeDataProvider: Cache cleared")}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isExpired:this.cache!==null&&Date.now()-this.lastFetch>=this.CACHE_DURATION,timeUntilExpiry:this.cache?Math.max(0,this.CACHE_DURATION-(Date.now()-this.lastFetch)):0}}};Ge(Ia,"instance");let Ug=Ia;const rr=us((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const r=await Ug.getInstance().loadRecipes();e({data:r,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load recipes",loading:!1})}}},getById:n=>t().data.find(r=>r.name===n),getByName:n=>t().data.find(r=>r.name===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l,c,u,d,f;return i.name.toLowerCase().includes(r)||i.output.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.category)==null?void 0:l.toLowerCase().includes(r))||((c=i.difficulty)==null?void 0:c.toLowerCase().includes(r))||((u=i.tags)==null?void 0:u.some(m=>m.toLowerCase().includes(r)))||((d=i.ingredients)==null?void 0:d.some(m=>m.toLowerCase().includes(r)))||((f=i.effects)==null?void 0:f.some(m=>{var h;return m.name.toLowerCase().includes(r)||((h=m.description)==null?void 0:h.toLowerCase().includes(r))}))})},getByCategory:n=>t().data.filter(r=>r.category===n),getByDifficulty:n=>t().data.filter(r=>r.difficulty===n),getByIngredient:n=>t().data.filter(r=>r.ingredients.some(i=>i.toLowerCase().includes(n.toLowerCase()))),getByEffect:n=>t().data.filter(r=>r.effects.some(i=>i.name.toLowerCase().includes(n.toLowerCase())))})),W6=Object.freeze(Object.defineProperty({__proto__:null,useRecipesStore:rr},Symbol.toStringTag,{value:"Module"}));class Ra{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.editorId=="string"&&typeof t.school=="string"&&typeof t.level=="string"&&typeof t.magickaCost=="number"&&Array.isArray(t.effects)}static equals(t,n){return t.editorId===n.editorId}static addComputedProperties(t){const n=t.effects.length>0,s=t.effects.length,r=t.effects.some(m=>m.area>0),i=t.effects.some(m=>m.duration>0),o=t.effects.every(m=>m.duration===0),l=t.effects.reduce((m,h)=>m+h.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=Math.max(...t.effects.map(m=>m.area),0),d=this.generateTags(t,{hasEffects:n,isAreaSpell:r,isDurationSpell:i,isInstantSpell:o}),f=this.createSearchableText(t,d);return{...t,hasEffects:n,effectCount:s,isAreaSpell:r,isDurationSpell:i,isInstantSpell:o,totalMagnitude:l,maxDuration:c,maxArea:u,tags:d,searchableText:f}}static generateTags(t,n){const s=[];return s.push(t.school),s.push(t.level),n.hasEffects&&s.push("Has Effects"),n.isAreaSpell&&s.push("Area Effect"),n.isDurationSpell&&s.push("Duration"),n.isInstantSpell&&s.push("Instant"),t.magickaCost===0?s.push("Free"):t.magickaCost<=50?s.push("Low Cost"):t.magickaCost<=150?s.push("Medium Cost"):s.push("High Cost"),t.effects.forEach(r=>{r.name.toLowerCase().includes("fire")&&s.push("Fire"),(r.name.toLowerCase().includes("frost")||r.name.toLowerCase().includes("ice"))&&s.push("Frost"),(r.name.toLowerCase().includes("shock")||r.name.toLowerCase().includes("lightning"))&&s.push("Shock"),(r.name.toLowerCase().includes("heal")||r.name.toLowerCase().includes("restore"))&&s.push("Healing"),(r.name.toLowerCase().includes("conjure")||r.name.toLowerCase().includes("summon"))&&s.push("Conjuration"),(r.name.toLowerCase().includes("fear")||r.name.toLowerCase().includes("calm"))&&s.push("Illusion"),(r.name.toLowerCase().includes("paralyze")||r.name.toLowerCase().includes("slow"))&&s.push("Control")}),[...new Set(s)]}static createSearchableText(t,n){return[t.name,t.school,t.level,t.description,...n,...t.effects.map(r=>r.name),...t.effects.map(r=>r.description)].join(" ").toLowerCase()}static filterBySchool(t,n){return t.filter(s=>s.school===n)}static filterByLevel(t,n){return t.filter(s=>s.level===n)}static filterBySchools(t,n){return n.length===0?t:t.filter(s=>n.includes(s.school))}static filterByLevels(t,n){return n.length===0?t:t.filter(s=>n.includes(s.level))}static filterByMagickaCost(t,n,s){return t.filter(r=>!(n!==null&&r.magickaCost<n||s!==null&&r.magickaCost>s))}static filterByMagnitude(t,n,s){return t.filter(r=>!(n!==null&&r.totalMagnitude<n||s!==null&&r.totalMagnitude>s))}static filterByEffectProperties(t,n,s,r){return t.filter(i=>!(n!==null&&i.hasEffects!==n||s!==null&&i.isAreaSpell!==s||r!==null&&i.isDurationSpell!==r))}static search(t,n){if(!n.trim())return t.map(i=>({spell:i,score:1,matchedFields:[]}));const s=n.toLowerCase(),r=[];return t.forEach(i=>{let o=0;const l=[];i.name.toLowerCase()===s?(o+=100,l.push("name")):i.name.toLowerCase().includes(s)&&(o+=50,l.push("name")),i.school.toLowerCase()===s?(o+=30,l.push("school")):i.school.toLowerCase().includes(s)&&(o+=15,l.push("school")),i.level.toLowerCase()===s?(o+=25,l.push("level")):i.level.toLowerCase().includes(s)&&(o+=10,l.push("level")),i.description.toLowerCase().includes(s)&&(o+=5,l.push("description")),i.tags.forEach(c=>{c.toLowerCase().includes(s)&&(o+=3,l.push("tags"))}),i.effects.forEach(c=>{c.name.toLowerCase().includes(s)&&(o+=8,l.push("effects")),c.description.toLowerCase().includes(s)&&(o+=4,l.push("effects"))}),o>0&&r.push({spell:i,score:o,matchedFields:[...new Set(l)]})}),r.sort((i,o)=>o.score-i.score)}static sort(t,n,s="asc"){return[...t].sort((i,o)=>{let l=0;switch(n){case"name":l=i.name.localeCompare(o.name);break;case"school":l=i.school.localeCompare(o.school);break;case"level":l=this.compareLevels(i.level,o.level);break;case"magickaCost":l=i.magickaCost-o.magickaCost;break;case"magnitude":l=i.totalMagnitude-o.totalMagnitude;break;case"duration":l=i.maxDuration-o.maxDuration;break}return s==="desc"?-l:l})}static compareLevels(t,n){const s=["Novice","Apprentice","Adept","Expert","Master"],r=s.indexOf(t),i=s.indexOf(n);return r===-1&&i===-1?0:r===-1?1:i===-1?-1:r-i}static getUniqueSchools(t){return[...new Set(t.map(n=>n.school))].sort()}static getUniqueLevels(t){const n=[...new Set(t.map(s=>s.level))];return this.sortLevels(n)}static sortLevels(t){const n=["Novice","Apprentice","Adept","Expert","Master"];return t.sort((s,r)=>{const i=n.indexOf(s),o=n.indexOf(r);return i===-1&&o===-1?0:i===-1?1:o===-1?-1:i-o})}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static applyFilters(t,n){let s=[...t];return n.schools.length>0&&(s=this.filterBySchools(s,n.schools)),n.levels.length>0&&(s=this.filterByLevels(s,n.levels)),s=this.filterByEffectProperties(s,n.hasEffects,n.isAreaSpell,n.isDurationSpell),s=this.filterByMagickaCost(s,n.minMagickaCost,n.maxMagickaCost),s=this.filterByMagnitude(s,n.minMagnitude,n.maxMagnitude),n.searchTerm&&(s=this.search(s,n.searchTerm).map(i=>i.spell)),s}static getStatistics(t){const n=this.getUniqueSchools(t),s=this.getUniqueLevels(t),r=this.getUniqueTags(t),i=t.length,o=t.filter(m=>m.hasEffects).length,l=t.filter(m=>m.isAreaSpell).length,c=t.filter(m=>m.isDurationSpell).length,u=t.filter(m=>m.magickaCost===0).length,d=t.length>0?t.reduce((m,h)=>m+h.magickaCost,0)/t.length:0,f=t.length>0?t.reduce((m,h)=>m+h.totalMagnitude,0)/t.length:0;return{totalSpells:i,spellsWithEffects:o,areaSpells:l,durationSpells:c,freeSpells:u,avgMagickaCost:Math.round(d),avgMagnitude:Math.round(f),schools:n,levels:s,tags:r}}}const Ha=class Ha{constructor(){Ge(this,"cache",null);Ge(this,"lastFetch",0);Ge(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return Ha.instance||(Ha.instance=new Ha),Ha.instance}async loadSpells(){if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const t=fn("data/player_spells.json"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch spells: ${n.status} ${n.statusText}`);const s=await n.json(),r=[];let i=0,o=0;for(const l of s)if(Ra.isValid(l)){const c=Ra.addComputedProperties(l);r.push(c),i++}else console.warn("SpellDataProvider: Invalid spell data:",l),o++;return this.cache=r,this.lastFetch=Date.now(),r}catch(t){throw console.error("SpellDataProvider: Error loading spells:",t),t}}async getSpellData(){console.log("SpellDataProvider: getSpellData called");const t=await this.loadSpells();console.log("SpellDataProvider: Getting statistics for",t.length,"spells");const n=Ra.getStatistics(t),s={spells:t,totalCount:n.totalSpells,schools:n.schools,levels:n.levels,lastUpdated:new Date().toISOString()};return console.log("SpellDataProvider: getSpellData result:",{spellsCount:s.spells.length,totalCount:s.totalCount,schools:s.schools,levels:s.levels}),s}async getSpellByEditorId(t){return(await this.loadSpells()).find(s=>s.editorId===t)||null}async getSpellsBySchool(t){const n=await this.loadSpells();return Ra.filterBySchool(n,t)}async getSpellsByLevel(t){const n=await this.loadSpells();return Ra.filterByLevel(n,t)}async searchSpells(t){const n=await this.loadSpells();return Ra.search(n,t).map(r=>r.spell)}async getStatistics(){const t=await this.loadSpells();return Ra.getStatistics(t)}clearCache(){console.log("SpellDataProvider: Clearing cache"),this.cache=null,this.lastFetch=0}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isValid:this.isCacheValid()}}};Ge(Ha,"instance");let Jd=Ha;const K6=Object.freeze(Object.defineProperty({__proto__:null,SpellDataProvider:Jd},Symbol.toStringTag,{value:"Module"})),Wi=us((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const r=await Jd.getInstance().loadSpells();e({data:r,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load spells",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),getByEditorId:n=>t().data.find(r=>r.editorId===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(i=>{var o,l,c,u,d;return i.name.toLowerCase().includes(r)||((o=i.description)==null?void 0:o.toLowerCase().includes(r))||((l=i.school)==null?void 0:l.toLowerCase().includes(r))||((c=i.level)==null?void 0:c.toLowerCase().includes(r))||((u=i.tags)==null?void 0:u.some(f=>f.toLowerCase().includes(r)))||((d=i.effects)==null?void 0:d.some(f=>{var m;return f.name.toLowerCase().includes(r)||((m=f.description)==null?void 0:m.toLowerCase().includes(r))}))})},getBySchool:n=>t().data.filter(r=>r.school===n),getByLevel:n=>t().data.filter(r=>r.level===n)}));function Q6(){const{data:e,loading:t,error:n}=bi();return{data:e.length>0?e:null,loading:t,error:n}}function J6(){const{data:e,loading:t,error:n}=wi();return{data:e.length>0?e:null,loading:t,error:n}}function ik(){const{data:e,loading:t,error:n}=fl();return{data:e.length>0?e:null,loading:t,error:n}}function e8(){const{data:e,loading:t,error:n}=yi();return{data:e.length>0?e:null,loading:t,error:n}}function t8(){const{data:e,loading:t,error:n}=dl();return{data:e.length>0?e:null,loading:t,error:n}}function x0(){const{data:e,loading:t,error:n}=vi();return{data:e.length>0?e:null,loading:t,error:n}}function he({children:e,className:t,expanded:n,onToggle:s,disableHover:r=!1,hideChevron:i=!1}){let o,l,c,u;$.Children.forEach(e,v=>{$.isValidElement(v)&&(v.type===he.Header&&(o=v),v.type===he.Summary&&(l=v),v.type===he.Footer&&(c=v),v.type===he.Details&&(u=v))});const[d,f]=g.useState(!1),m=n!==void 0?n:d,h=s||(()=>f(v=>!v)),p=r?"":"hover:shadow-md hover:scale-[1.02]";return a.jsxs("div",{className:H("rounded-lg border bg-background shadow-sm transition-all duration-200 flex flex-col",p,t),children:[o&&$.cloneElement(o,{onClick:h,expanded:m,hideChevron:i}),a.jsxs("div",{className:"flex-1",children:[l,m&&u]}),c]})}he.Header=function({children:t,className:n,onClick:s,expanded:r,hideChevron:i=!1}){const o=()=>{s==null||s()};return a.jsxs("div",{className:H("flex items-center gap-3 px-4 py-3 bg-muted/30 cursor-pointer select-none hover:bg-muted/50 transition-colors duration-200 rounded-t-lg",r&&"bg-muted/50",n),onClick:o,tabIndex:0,role:"button","aria-expanded":r,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),o())},children:[t,!i&&a.jsx("span",{className:H("ml-auto transition-transform duration-200 text-muted-foreground",r?"rotate-180":""),children:a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:a.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})})]})};he.Summary=function({children:t,className:n}){return a.jsx("div",{className:H("px-4 py-2 space-y-3",n),children:t})};he.Footer=function({children:t,className:n}){return a.jsx("div",{className:H("px-4 py-2",n),children:t})};he.Details=function({children:t,className:n}){return a.jsx("div",{className:H("px-4 py-4 space-y-4 bg-background rounded-b-lg",n),children:t})};const n8={race:{Human:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Elf:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Beast:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},religion:{Divine:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Daedric:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Tribunal:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Ancestor:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},trait:{},destiny:{}},s8={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},r8="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function ok({category:e,categoryType:t,size:n="md",className:s}){const i=n8[t][e]||r8;return a.jsx(K,{variant:"outline",className:H(i,s8[n],"font-medium transition-colors",s),children:e})}const ob={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-16 h-16","2xl":"w-16 h-16","3xl":"w-24 h-24","4xl":"w-32 h-32"},a8={sm:"text-sm",md:"text-lg",lg:"text-xl",xl:"text-2xl","2xl":"text-3xl","3xl":"text-3xl","4xl":"text-4xl"};function mm({imgSrc:e,alt:t,size:n="md",className:s,imageClassName:r,showBorder:i=!1}){const[o,l]=$.useState(!1);return!e||o?a.jsx("div",{className:H("bg-white dark:bg-white text-black dark:text-black rounded-full flex items-center justify-center font-bold",ob[n],s),children:a.jsx("span",{className:H(a8[n]),children:t.charAt(0)})}):a.jsxs("div",{className:H("rounded-full flex items-center justify-center relative","bg-white dark:bg-white",ob[n],s),children:[i&&a.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-black dark:border-white pointer-events-none"}),a.jsx("img",{src:e,alt:t,className:H(i?"w-3/4 h-3/4 object-contain":"w-full h-full object-contain",r),onError:()=>l(!0),loading:"lazy"})]})}function i8({isExpanded:e,onToggle:t,className:n,leftControls:s,header:r,collapsedContent:i,expandedContent:o,actionArea:l,children:c}){return c?a.jsx("div",{className:H("rounded-lg border bg-background shadow-sm transition-all",n),children:c}):a.jsxs("div",{className:H("rounded-lg border bg-background shadow-sm transition-all group",e?"ring-2 ring-skyrim-gold/60":"",n),children:[a.jsxs("div",{className:"flex items-start",children:[s&&a.jsx("div",{className:"mr-2 flex-shrink-0",children:s}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r&&a.jsx("div",{className:"flex-1 min-w-0",children:r}),a.jsxs("button",{type:"button",onClick:t,"aria-expanded":e,className:"ml-2 p-1 rounded hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-skyrim-gold",tabIndex:0,children:[a.jsx("span",{className:"sr-only",children:e?"Collapse":"Expand"}),a.jsx("svg",{className:H("h-4 w-4 transition-transform",e?"rotate-90":""),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:a.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})}),l&&a.jsx("div",{className:"ml-2 flex-shrink-0",children:l})]}),i&&a.jsx("div",{className:"mt-2",children:i}),e&&o&&a.jsx("div",{className:"mt-4",children:o})]})}function ru({options:e,onSelect:t,placeholder:n="Search...",className:s="",disabled:r=!1,searchQuery:i,onSearchQueryChange:o,renderOption:l,emptyMessage:c="No options found",maxHeight:u="max-h-96",showClearButton:d=!0,showToggleButton:f=!0}){const[m,h]=g.useState(!1),[p,v]=g.useState(""),[b,x]=g.useState(-1),y=g.useRef(null),w=g.useRef(null),j=i??p,N=o??v;g.useEffect(()=>{const z=A=>{y.current&&!y.current.contains(A.target)&&(h(!1),x(-1))};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const S=z=>{N(z),h(!0),x(-1)},k=z=>{t(z),N(""),h(!1),x(-1)},E=z=>{z.key==="ArrowDown"?(z.preventDefault(),x(A=>Math.min(A+1,e.length-1))):z.key==="ArrowUp"?(z.preventDefault(),x(A=>Math.max(A-1,-1))):z.key==="Enter"?(z.preventDefault(),b>=0&&e[b]&&k(e[b])):z.key==="Escape"&&(h(!1),x(-1))},C=()=>{h(!0)},_=()=>{var z;N(""),(z=w.current)==null||z.focus()},P=()=>{var z;h(!m),m||(z=w.current)==null||z.focus()},D=(z,A)=>a.jsxs("div",{className:"flex items-center gap-3",children:[z.icon&&a.jsx("div",{className:"flex-shrink-0",children:z.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium truncate",children:z.label}),z.badge&&a.jsx("div",{className:"flex-shrink-0",children:z.badge})]}),z.description&&a.jsx(ze,{text:z.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return a.jsxs("div",{ref:y,className:H("relative",s),children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Ts,{ref:w,type:"text",placeholder:n,value:j,onChange:z=>S(z.target.value),onFocus:C,onKeyDown:E,className:"pl-10 pr-20",disabled:r}),d&&j&&a.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted",onClick:_,disabled:r,children:a.jsx(Dt,{className:"h-4 w-4"})}),f&&a.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:P,disabled:r,children:a.jsx(_n,{className:H("h-4 w-4 transition-transform",m&&"rotate-180")})})]}),m&&a.jsx("div",{className:H("absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",u),style:{zIndex:Lt.AUTOCOMPLETE+10},children:a.jsx("div",{className:"p-2",children:e.length===0?a.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:c}):e.map((z,A)=>a.jsx("button",{onClick:()=>k(z),className:H("w-full text-left px-3 py-3 rounded-lg text-sm transition-all duration-200 cursor-pointer",A===b?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"),disabled:r,children:l?l(z,A===b):D(z)},z.id))})})]})}function lk(e="(max-width: 640px)"){const t=()=>typeof window>"u"||typeof window.matchMedia>"u"?!1:window.matchMedia(e).matches,[n,s]=g.useState(t);return g.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia>"u")return;const r=window.matchMedia(e),i=()=>s(r.matches);return s(r.matches),r.addEventListener("change",i),()=>{r.removeEventListener("change",i)}},[e]),n}function au({open:e,onOpenChange:t,title:n,description:s,side:r="right",className:i,mobileQuery:o="(max-width: 640px)",resetKey:l,children:c}){const u=lk(o),d=g.useRef(null);g.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[e,u]),g.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[l]);const f=H("flex flex-col",u?"inset-0 top-0 left-0 right-0 bottom-0 h-[100dvh] max-h-[100dvh] w-[100vw] p-0 rounded-none border-0 overflow-hidden":"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0 overflow-y-auto bg-background",i);return a.jsx(zo,{open:e,onOpenChange:t,children:a.jsxs(si,{side:u?"bottom":r,className:f,children:[(n||s)&&a.jsx("div",{className:H("sticky top-0 z-10 bg-background border-b","p-4"),children:a.jsxs(Lo,{className:"p-0",children:[n&&a.jsx($o,{children:n}),s&&a.jsx(qx,{children:s})]})}),a.jsx("div",{ref:d,className:H("flex-1 overflow-y-auto overscroll-contain",u?"p-4":"p-6"),children:c})]})})}const o8={Warrior:"Warrior.svg",Lady:"Lady.svg",Lord:"Lord.svg",Steed:"Steed.svg",Mage:"Mage.svg",Apprentice:"Apprentice.svg",Atronach:"Atronach.svg",Ritual:"Ritual.svg",Thief:"Thief.svg",Lover:"Lover.svg",Shadow:"Shadow.svg",Tower:"Tower.svg",Serpent:"Serpent.svg"};function v0({birthsignName:e,size:t="md",className:n}){const s=o8[e],r=s?fn(`assets/sign-avatar/${s}`):void 0;return a.jsx(mm,{imgSrc:r,alt:e,size:t,className:n,imageClassName:"scale-125"})}function jr(e){return Array.isArray?Array.isArray(e):dk(e)==="[object Array]"}function l8(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function c8(e){return e==null?"":l8(e)}function _s(e){return typeof e=="string"}function ck(e){return typeof e=="number"}function u8(e){return e===!0||e===!1||d8(e)&&dk(e)=="[object Boolean]"}function uk(e){return typeof e=="object"}function d8(e){return uk(e)&&e!==null}function wn(e){return e!=null}function ph(e){return!e.trim().length}function dk(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const f8="Incorrect 'index' type",m8=e=>`Invalid value for key ${e}`,h8=e=>`Pattern length exceeds max of ${e}.`,g8=e=>`Missing ${e} property in key`,p8=e=>`Property 'weight' in key '${e}' must be a positive integer`,lb=Object.prototype.hasOwnProperty;class x8{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(s=>{let r=fk(s);this._keys.push(r),this._keyMap[r.id]=r,n+=r.weight}),this._keys.forEach(s=>{s.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function fk(e){let t=null,n=null,s=null,r=1,i=null;if(_s(e)||jr(e))s=e,t=cb(e),n=Vg(e);else{if(!lb.call(e,"name"))throw new Error(g8("name"));const o=e.name;if(s=o,lb.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(p8(o));t=cb(o),n=Vg(o),i=e.getFn}return{path:t,id:n,weight:r,src:s,getFn:i}}function cb(e){return jr(e)?e:e.split(".")}function Vg(e){return jr(e)?e.join("."):e}function v8(e,t){let n=[],s=!1;const r=(i,o,l)=>{if(wn(i))if(!o[l])n.push(i);else{let c=o[l];const u=i[c];if(!wn(u))return;if(l===o.length-1&&(_s(u)||ck(u)||u8(u)))n.push(c8(u));else if(jr(u)){s=!0;for(let d=0,f=u.length;d<f;d+=1)r(u[d],o,l+1)}else o.length&&r(u,o,l+1)}};return r(e,_s(t)?t.split("."):t,0),s?n:n[0]}const y8={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},b8={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},w8={location:0,threshold:.6,distance:100},j8={useExtendedSearch:!1,getFn:v8,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var me={...b8,...y8,...w8,...j8};const N8=/[^ ]+/g;function S8(e=1,t=3){const n=new Map,s=Math.pow(10,t);return{get(r){const i=r.match(N8).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*e),l=parseFloat(Math.round(o*s)/s);return n.set(i,l),l},clear(){n.clear()}}}class y0{constructor({getFn:t=me.getFn,fieldNormWeight:n=me.fieldNormWeight}={}){this.norm=S8(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,_s(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();_s(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!wn(t)||ph(t))return;let s={v:t,i:n,n:this.norm.get(t)};this.records.push(s)}_addObject(t,n){let s={i:n,$:{}};this.keys.forEach((r,i)=>{let o=r.getFn?r.getFn(t):this.getFn(t,r.path);if(wn(o)){if(jr(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(wn(d))if(_s(d)&&!ph(d)){let f={v:d,i:u,n:this.norm.get(d)};l.push(f)}else jr(d)&&d.forEach((f,m)=>{c.push({nestedArrIndex:m,value:f})})}s.$[i]=l}else if(_s(o)&&!ph(o)){let l={v:o,n:this.norm.get(o)};s.$[i]=l}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function mk(e,t,{getFn:n=me.getFn,fieldNormWeight:s=me.fieldNormWeight}={}){const r=new y0({getFn:n,fieldNormWeight:s});return r.setKeys(e.map(fk)),r.setSources(t),r.create(),r}function k8(e,{getFn:t=me.getFn,fieldNormWeight:n=me.fieldNormWeight}={}){const{keys:s,records:r}=e,i=new y0({getFn:t,fieldNormWeight:n});return i.setKeys(s),i.setIndexRecords(r),i}function Hu(e,{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:r=me.distance,ignoreLocation:i=me.ignoreLocation}={}){const o=t/e.length;if(i)return o;const l=Math.abs(s-n);return r?o+l/r:l?1:o}function C8(e=[],t=me.minMatchCharLength){let n=[],s=-1,r=-1,i=0;for(let o=e.length;i<o;i+=1){let l=e[i];l&&s===-1?s=i:!l&&s!==-1&&(r=i-1,r-s+1>=t&&n.push([s,r]),s=-1)}return e[i-1]&&i-s>=t&&n.push([s,i-1]),n}const Ba=32;function E8(e,t,n,{location:s=me.location,distance:r=me.distance,threshold:i=me.threshold,findAllMatches:o=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,includeMatches:c=me.includeMatches,ignoreLocation:u=me.ignoreLocation}={}){if(t.length>Ba)throw new Error(h8(Ba));const d=t.length,f=e.length,m=Math.max(0,Math.min(s,f));let h=i,p=m;const v=l>1||c,b=v?Array(f):[];let x;for(;(x=e.indexOf(t,p))>-1;){let k=Hu(t,{currentLocation:x,expectedLocation:m,distance:r,ignoreLocation:u});if(h=Math.min(k,h),p=x+d,v){let E=0;for(;E<d;)b[x+E]=1,E+=1}}p=-1;let y=[],w=1,j=d+f;const N=1<<d-1;for(let k=0;k<d;k+=1){let E=0,C=j;for(;E<C;)Hu(t,{errors:k,currentLocation:m+C,expectedLocation:m,distance:r,ignoreLocation:u})<=h?E=C:j=C,C=Math.floor((j-E)/2+E);j=C;let _=Math.max(1,m-C+1),P=o?f:Math.min(m+C,f)+d,D=Array(P+2);D[P+1]=(1<<k)-1;for(let A=P;A>=_;A-=1){let O=A-1,T=n[e.charAt(O)];if(v&&(b[O]=+!!T),D[A]=(D[A+1]<<1|1)&T,k&&(D[A]|=(y[A+1]|y[A])<<1|1|y[A+1]),D[A]&N&&(w=Hu(t,{errors:k,currentLocation:O,expectedLocation:m,distance:r,ignoreLocation:u}),w<=h)){if(h=w,p=O,p<=m)break;_=Math.max(1,2*m-p)}}if(Hu(t,{errors:k+1,currentLocation:m,expectedLocation:m,distance:r,ignoreLocation:u})>h)break;y=D}const S={isMatch:p>=0,score:Math.max(.001,w)};if(v){const k=C8(b,l);k.length?c&&(S.indices=k):S.isMatch=!1}return S}function _8(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<s-n-1}return t}const ef=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class hk{constructor(t,{location:n=me.location,threshold:s=me.threshold,distance:r=me.distance,includeMatches:i=me.includeMatches,findAllMatches:o=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,isCaseSensitive:c=me.isCaseSensitive,ignoreDiacritics:u=me.ignoreDiacritics,ignoreLocation:d=me.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d},t=c?t:t.toLowerCase(),t=u?ef(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(h,p)=>{this.chunks.push({pattern:h,alphabet:_8(h),startIndex:p})},m=this.pattern.length;if(m>Ba){let h=0;const p=m%Ba,v=m-p;for(;h<v;)f(this.pattern.substr(h,Ba),h),h+=Ba;if(p){const b=m-Ba;f(this.pattern.substr(b),b)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r}=this.options;if(t=n?t:t.toLowerCase(),t=s?ef(t):t,this.pattern===t){let v={isMatch:!0,score:0};return r&&(v.indices=[[0,t.length-1]]),v}const{location:i,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:d}=this.options;let f=[],m=0,h=!1;this.chunks.forEach(({pattern:v,alphabet:b,startIndex:x})=>{const{isMatch:y,score:w,indices:j}=E8(t,v,b,{location:i+x,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:r,ignoreLocation:d});y&&(h=!0),m+=w,y&&j&&(f=[...f,...j])});let p={isMatch:h,score:h?m/this.chunks.length:1};return h&&r&&(p.indices=f),p}}class Ca{constructor(t){this.pattern=t}static isMultiMatch(t){return ub(t,this.multiRegex)}static isSingleMatch(t){return ub(t,this.singleRegex)}search(){}}function ub(e,t){const n=e.match(t);return n?n[1]:null}class A8 extends Ca{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class T8 extends Ca{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class M8 extends Ca{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class R8 extends Ca{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class D8 extends Ca{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class z8 extends Ca{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class gk extends Ca{constructor(t,{location:n=me.location,threshold:s=me.threshold,distance:r=me.distance,includeMatches:i=me.includeMatches,findAllMatches:o=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,isCaseSensitive:c=me.isCaseSensitive,ignoreDiacritics:u=me.ignoreDiacritics,ignoreLocation:d=me.ignoreLocation}={}){super(t),this._bitapSearch=new hk(t,{location:n,threshold:s,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class pk extends Ca{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,s;const r=[],i=this.pattern.length;for(;(s=t.indexOf(this.pattern,n))>-1;)n=s+i,r.push([s,n-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const qg=[A8,pk,M8,R8,z8,D8,T8,gk],db=qg.length,L8=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,$8="|";function P8(e,t={}){return e.split($8).map(n=>{let s=n.trim().split(L8).filter(i=>i&&!!i.trim()),r=[];for(let i=0,o=s.length;i<o;i+=1){const l=s[i];let c=!1,u=-1;for(;!c&&++u<db;){const d=qg[u];let f=d.isMultiMatch(l);f&&(r.push(new d(f,t)),c=!0)}if(!c)for(u=-1;++u<db;){const d=qg[u];let f=d.isSingleMatch(l);if(f){r.push(new d(f,t));break}}}return r})}const O8=new Set([gk.type,pk.type]);class B8{constructor(t,{isCaseSensitive:n=me.isCaseSensitive,ignoreDiacritics:s=me.ignoreDiacritics,includeMatches:r=me.includeMatches,minMatchCharLength:i=me.minMatchCharLength,ignoreLocation:o=me.ignoreLocation,findAllMatches:l=me.findAllMatches,location:c=me.location,threshold:u=me.threshold,distance:d=me.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r,minMatchCharLength:i,findAllMatches:l,ignoreLocation:o,location:c,threshold:u,distance:d},t=n?t:t.toLowerCase(),t=s?ef(t):t,this.pattern=t,this.query=P8(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r,ignoreDiacritics:i}=this.options;t=r?t:t.toLowerCase(),t=i?ef(t):t;let o=0,l=[],c=0;for(let u=0,d=n.length;u<d;u+=1){const f=n[u];l.length=0,o=0;for(let m=0,h=f.length;m<h;m+=1){const p=f[m],{isMatch:v,indices:b,score:x}=p.search(t);if(v){if(o+=1,c+=x,s){const y=p.constructor.type;O8.has(y)?l=[...l,...b]:l.push(b)}}else{c=0,o=0,l.length=0;break}}if(o){let m={isMatch:!0,score:c/o};return s&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const Zg=[];function I8(...e){Zg.push(...e)}function Gg(e,t){for(let n=0,s=Zg.length;n<s;n+=1){let r=Zg[n];if(r.condition(e,t))return new r(e,t)}return new hk(e,t)}const tf={AND:"$and",OR:"$or"},Yg={PATH:"$path",PATTERN:"$val"},Xg=e=>!!(e[tf.AND]||e[tf.OR]),H8=e=>!!e[Yg.PATH],F8=e=>!jr(e)&&uk(e)&&!Xg(e),fb=e=>({[tf.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function xk(e,t,{auto:n=!0}={}){const s=r=>{let i=Object.keys(r);const o=H8(r);if(!o&&i.length>1&&!Xg(r))return s(fb(r));if(F8(r)){const c=o?r[Yg.PATH]:i[0],u=o?r[Yg.PATTERN]:r[c];if(!_s(u))throw new Error(m8(c));const d={keyId:Vg(c),pattern:u};return n&&(d.searcher=Gg(u,t)),d}let l={children:[],operator:i[0]};return i.forEach(c=>{const u=r[c];jr(u)&&u.forEach(d=>{l.children.push(s(d))})}),l};return Xg(e)||(e=fb(e)),s(e)}function U8(e,{ignoreFieldNorm:t=me.ignoreFieldNorm}){e.forEach(n=>{let s=1;n.matches.forEach(({key:r,norm:i,score:o})=>{const l=r?r.weight:null;s*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:i))}),n.score=s})}function V8(e,t){const n=e.matches;t.matches=[],wn(n)&&n.forEach(s=>{if(!wn(s.indices)||!s.indices.length)return;const{indices:r,value:i}=s;let o={indices:r,value:i};s.key&&(o.key=s.key.src),s.idx>-1&&(o.refIndex=s.idx),t.matches.push(o)})}function q8(e,t){t.score=e.score}function Z8(e,t,{includeMatches:n=me.includeMatches,includeScore:s=me.includeScore}={}){const r=[];return n&&r.push(V8),s&&r.push(q8),e.map(i=>{const{idx:o}=i,l={item:t[o],refIndex:o};return r.length&&r.forEach(c=>{c(i,l)}),l})}class Kt{constructor(t,n={},s){this.options={...me,...n},this.options.useExtendedSearch,this._keyStore=new x8(this.options.keys),this.setCollection(t,s)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof y0))throw new Error(f8);this._myIndex=n||mk(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){wn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let s=0,r=this._docs.length;s<r;s+=1){const i=this._docs[s];t(i,s)&&(this.removeAt(s),s-=1,r-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:i,sortFn:o,ignoreFieldNorm:l}=this.options;let c=_s(t)?_s(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return U8(c,{ignoreFieldNorm:l}),i&&c.sort(o),ck(n)&&n>-1&&(c=c.slice(0,n)),Z8(c,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(t){const n=Gg(t,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:i,i:o,n:l})=>{if(!wn(i))return;const{isMatch:c,score:u,indices:d}=n.searchIn(i);c&&r.push({item:i,idx:o,matches:[{score:u,value:i,norm:l,indices:d}]})}),r}_searchLogical(t){const n=xk(t,this.options),s=(l,c,u)=>{if(!l.children){const{keyId:f,searcher:m}=l,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:m});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const d=[];for(let f=0,m=l.children.length;f<m;f+=1){const h=l.children[f],p=s(h,c,u);if(p.length)d.push(...p);else if(l.operator===tf.AND)return[]}return d},r=this._myIndex.records,i={},o=[];return r.forEach(({$:l,i:c})=>{if(wn(l)){let u=s(n,l,c);u.length&&(i[c]||(i[c]={idx:c,item:l,matches:[]},o.push(i[c])),u.forEach(({matches:d})=>{i[c].matches.push(...d)}))}}),o}_searchObjectList(t){const n=Gg(t,this.options),{keys:s,records:r}=this._myIndex,i=[];return r.forEach(({$:o,i:l})=>{if(!wn(o))return;let c=[];s.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:o[d],searcher:n}))}),c.length&&i.push({idx:l,item:o,matches:c})}),i}_findMatches({key:t,value:n,searcher:s}){if(!wn(n))return[];let r=[];if(jr(n))n.forEach(({v:i,i:o,n:l})=>{if(!wn(i))return;const{isMatch:c,score:u,indices:d}=s.searchIn(i);c&&r.push({score:u,key:t,value:i,idx:o,norm:l,indices:d})});else{const{v:i,n:o}=n,{isMatch:l,score:c,indices:u}=s.searchIn(i);l&&r.push({score:c,key:t,value:i,norm:o,indices:u})}return r}}Kt.version="7.1.0";Kt.createIndex=mk;Kt.parseIndex=k8;Kt.config=me;Kt.parseQuery=xk;I8(B8);function vk(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:l.description,group:l.group,statModifications:l.stat_modifications.map(d=>`${d.stat} ${d.type} ${d.value}${d.value_type==="percentage"?"%":""}`),skillBonuses:l.skill_bonuses.map(d=>`${d.stat} +${d.value}${d.value_type==="percentage"?"%":""}`),powers:l.powers.map(d=>`${d.name} ${d.description}`),conditionalEffects:((c=l.conditional_effects)==null?void 0:c.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],masteryEffects:((u=l.mastery_effects)==null?void 0:u.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],originalBirthsign:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"powers",weight:.2},{name:"statModifications",weight:.15},{name:"skillBonuses",weight:.15},{name:"conditionalEffects",weight:.1},{name:"masteryEffects",weight:.1},{name:"group",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Kt(n,s),[n,s]),i=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredBirthsigns:g.useMemo(()=>i.map(l=>l.item.originalBirthsign),[i]),searchResults:i,searchableBirthsigns:n}}function mb({birthsigns:e,onSelect:t,placeholder:n="Search birthsigns...",className:s=""}){const[r,i]=g.useState(""),{filteredBirthsigns:o}=vk(e,r),l=g.useMemo(()=>o.map(d=>({id:d.edid,label:d.name,description:d.description,category:d.group,icon:a.jsx(v0,{birthsignName:d.name,size:"md"}),badge:d.group&&a.jsx(K,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:d.group}),metadata:{originalBirthsign:d}})),[o]),c=d=>{const f=e.find(m=>m.edid===d.id);f&&t(f)},u=(d,f)=>a.jsxs("div",{className:"flex items-center gap-3",children:[d.icon&&a.jsx("div",{className:"flex-shrink-0",children:d.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:d.label}),d.badge&&a.jsx("div",{className:"flex-shrink-0",children:d.badge})]}),d.description&&a.jsx(ze,{text:d.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return a.jsx(ru,{options:l,onSelect:c,placeholder:n,className:s,renderOption:u,emptyMessage:"No birthsigns found",searchQuery:r,onSearchQueryChange:i})}function nf({item:e,originalBirthsign:t,isExpanded:n=!1,onToggle:s,onClick:r,className:i,showViewAllButton:o=!1,showToggle:l=!0,viewAllButtonText:c="View All",viewAllButtonRoute:u="/birthsigns"}){var S,k,E;const d=lt(),f=()=>{d(u)},m=C=>{C.target.closest("[data-no-click]")||r==null||r()},h=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Birthsign";e!=null&&e.description||t!=null&&t.description;const p=(e==null?void 0:e.category)||(t==null?void 0:t.group)||"";e!=null&&e.effects;const v=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"",b=()=>{if(!(t!=null&&t.stat_modifications))return{health:0,magicka:0,stamina:0};const C={health:0,magicka:0,stamina:0};return t.stat_modifications.forEach(_=>{const P=_.type==="bonus"?_.value:-_.value;_.stat.toLowerCase().includes("health")?C.health+=P:_.stat.toLowerCase().includes("magicka")?C.magicka+=P:_.stat.toLowerCase().includes("stamina")&&(C.stamina+=P)}),C},x=()=>{if(!t)return[];const C=[];return t.powers&&C.push(...t.powers.map(_=>({name:_.name,type:"power"}))),t.conditional_effects&&C.push(...t.conditional_effects.map(_=>({name:_.stat,type:"conditional"}))),t.mastery_effects&&C.push(...t.mastery_effects.map(_=>({name:_.stat,type:"mastery"}))),C},y=C=>{const _=C.toLowerCase();return _==="warrior"?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800":_==="mage"?"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800":_==="thief"?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":"bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30"},w=b(),j=x(),N=a.jsxs("div",{className:H("rounded-lg border bg-background shadow-sm transition-all",i),children:[a.jsxs("div",{className:"flex items-start justify-between p-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(v0,{birthsignName:h,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(Ae,{className:"text-primary font-semibold",children:h}),a.jsxs("div",{className:"flex items-center gap-2",children:[p&&a.jsx("div",{className:`inline-flex items-center justify-center px-2 py-1 border rounded-full text-xs font-medium w-16 ${y(p)}`,children:p}),(w.health!==0||w.magicka!==0||w.stamina!==0)&&a.jsxs("div",{className:"flex gap-1",children:[w.health!==0&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800 rounded-full text-xs font-medium",children:[a.jsx(Os,{className:"h-3 w-3"}),a.jsxs("span",{children:[w.health>0?"+":"",w.health]})]}),w.magicka!==0&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-full text-xs font-medium",children:[a.jsx(An,{className:"h-3 w-3"}),a.jsxs("span",{children:[w.magicka>0?"+":"",w.magicka]})]}),w.stamina!==0&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800 rounded-full text-xs font-medium",children:[a.jsx(at,{className:"h-3 w-3"}),a.jsxs("span",{children:[w.stamina>0?"+":"",w.stamina]})]})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[j.length>0&&a.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ze,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{children:[j.length," effects"]})]})}),o&&a.jsxs(q,{variant:"outline",size:"sm",onClick:f,className:"text-xs","data-no-click":!0,children:[a.jsx(Sa,{className:"h-3 w-3 mr-1"}),c]}),l&&a.jsx("div",{"data-no-click":!0,children:a.jsx(fs,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"stone",itemName:h})})]})]}),a.jsxs("div",{className:"space-y-3 px-4 pb-4",children:[a.jsx("div",{children:a.jsx(ze,{text:v})}),t&&a.jsxs("div",{className:"flex flex-wrap gap-2",children:[(S=t.powers)==null?void 0:S.slice(0,3).map((C,_)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(Ze,{className:"h-3 w-3"}),C.name]},_)),(k=t.conditional_effects)==null?void 0:k.slice(0,3).map((C,_)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-800 rounded-full text-xs font-medium",children:[a.jsx(at,{className:"h-3 w-3"}),C.stat]},`conditional-${_}`)),(E=t.mastery_effects)==null?void 0:E.slice(0,3).map((C,_)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-full text-xs font-medium",children:[a.jsx(Ze,{className:"h-3 w-3"}),C.stat]},`mastery-${_}`))]})]}),n&&t&&a.jsxs("div",{className:"space-y-4 px-4 pb-4",children:[t.stat_modifications&&t.stat_modifications.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(on,{className:"text-lg font-medium text-foreground",children:"Stat Modifications"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.stat_modifications.map((C,_)=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize",children:C.stat}),a.jsxs("span",{className:H("font-bold",C.type==="bonus"?"text-green-600":"text-red-600"),children:[C.type==="bonus"?"+":"-",C.value,C.value_type==="percentage"?"%":""]})]},_))})]}),t.skill_bonuses&&t.skill_bonuses.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(on,{className:"text-lg font-medium text-foreground",children:"Skill Bonuses"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.skill_bonuses.map((C,_)=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize",children:C.stat}),a.jsxs("span",{className:"font-bold text-green-600",children:["+",C.value,C.value_type==="percentage"?"%":""]})]},_))})]}),t.powers&&t.powers.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs(on,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[a.jsx(An,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),a.jsx("div",{className:"space-y-2",children:t.powers.map((C,_)=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Ze,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:C.name})]}),a.jsx(ze,{text:C.description}),(C.magnitude||C.duration)&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-2",children:[C.magnitude&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Magnitude:"})," ",C.magnitude]}),C.duration&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Duration:"})," ",C.duration,"s"]})]})]},_))})]}),t.conditional_effects&&t.conditional_effects.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs(on,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[a.jsx(at,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),a.jsx("div",{className:"space-y-2",children:t.conditional_effects.map((C,_)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsx("div",{className:"flex items-center gap-2 mb-1",children:a.jsx("span",{className:"font-medium text-sm capitalize",children:C.stat})}),a.jsx(ze,{text:C.description}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Condition:"})," ",C.condition]})]},_))})]}),t.mastery_effects&&t.mastery_effects.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs(on,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[a.jsx(Ze,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),a.jsx("div",{className:"space-y-2",children:t.mastery_effects.map((C,_)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Ze,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),a.jsx("div",{className:"text-sm font-medium capitalize",children:C.stat}),a.jsx(ze,{text:C.description}),C.condition&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Requirement:"})," ",C.condition]})]},_))})]})]})]});return r?a.jsx("div",{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:m,children:N}):N}function G8(e){const t=e.map(n=>n.group);return[...new Set(t)].sort()}function Y8(e){const t=e.flatMap(n=>[...n.stat_modifications.map(s=>s.stat),...n.skill_bonuses.map(s=>s.stat)]);return[...new Set(t)].sort()}var X8="Separator",hb="horizontal",W8=["horizontal","vertical"],yk=g.forwardRef((e,t)=>{const{decorative:n,orientation:s=hb,...r}=e,i=K8(s)?s:hb,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(je.div,{"data-orientation":i,...l,...r,ref:t})});yk.displayName=X8;function K8(e){return W8.includes(e)}var Q8=yk;function Yr({className:e,orientation:t="horizontal",decorative:n=!0,...s}){return a.jsx(Q8,{"data-slot":"separator",decorative:n,orientation:t,className:H("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}function J8({birthsign:e,title:t,maxDisplay:n,compact:s=!1,className:r}){var c,u,d,f;if(!e)return null;const i=e.powers.length>0,o=((c=e.conditional_effects)==null?void 0:c.length)>0,l=((u=e.mastery_effects)==null?void 0:u.length)>0;if(!i&&!o&&!l)return null;if(s){const m=[...e.powers.map(p=>({type:"power",data:p})),...((d=e.conditional_effects)==null?void 0:d.map(p=>({type:"conditional",data:p})))||[],...((f=e.mastery_effects)==null?void 0:f.map(p=>({type:"mastery",data:p})))||[]],h=n?m.slice(0,n):m;return a.jsxs("div",{className:H("flex flex-wrap gap-2",r),children:[h.map((p,v)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(Ze,{className:"h-3 w-3"}),p.data.name||p.data.stat]},v)),n&&m.length>n&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted text-muted-foreground border rounded-full text-xs font-medium",children:["+",m.length-n," more"]})]})}return a.jsxs(xe,{className:H("border-muted/50",r),children:[t&&a.jsx(Te,{className:"pb-3",children:a.jsx(Le,{className:"text-base",children:t})}),a.jsxs(ve,{className:"space-y-4",children:[i&&a.jsxs("div",{children:[a.jsxs(mo,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(An,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),a.jsx("div",{className:"space-y-2",children:e.powers.map((m,h)=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Ze,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:m.name})]}),a.jsx("div",{className:"border-t border-border my-2"}),a.jsx(ze,{text:m.description}),(m.magnitude||m.duration)&&a.jsxs("div",{className:"space-y-2 text-sm mt-2",children:[m.magnitude&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium min-w-[80px]",children:"Magnitude:"}),a.jsx("span",{children:m.magnitude})]}),m.duration&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium min-w-[80px]",children:"Duration:"}),a.jsxs("span",{children:[m.duration,"s"]})]})]})]},h))})]}),o&&a.jsxs("div",{children:[a.jsxs(mo,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(at,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),a.jsx("div",{className:"space-y-2",children:e.conditional_effects.map((m,h)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(K,{variant:"outline",className:"text-xs bg-purple-100 text-purple-800 border-purple-200",children:"Conditional"}),a.jsx("span",{className:"font-medium text-sm capitalize",children:m.stat})]}),a.jsx(ze,{text:m.description}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Condition:"})," ",m.condition]})]},h))})]}),l&&a.jsxs("div",{children:[a.jsxs(mo,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(Ze,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),a.jsx("div",{className:"space-y-2",children:e.mastery_effects.map((m,h)=>a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Ze,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),a.jsx("div",{className:"border-t border-border my-2"}),a.jsx("div",{className:"text-sm font-medium capitalize",children:m.stat}),a.jsx(ze,{text:m.description}),m.condition&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Requirement:"})," ",m.condition]})]},h))})]})]})]})}function eB({birthsign:e,title:t="Stat Modifications",className:n}){const s=e.stat_modifications.length>0,r=e.skill_bonuses.length>0;return!s&&!r?null:a.jsxs(xe,{className:H("border-muted/50",n),children:[a.jsx(Te,{className:"pb-3",children:a.jsx(Le,{className:"text-base",children:t})}),a.jsxs(ve,{className:"space-y-4",children:[s&&a.jsxs("div",{children:[a.jsx(mo,{className:"text-sm font-medium mb-2",children:"Attributes"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.stat_modifications.map((i,o)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:i.stat.replace(/_/g," ")}),a.jsxs(K,{variant:"outline",className:H("text-xs flex-shrink-0",i.type==="bonus"?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"),children:[i.type==="bonus"?"+":"-",i.value,i.value_type==="percentage"?"%":""]})]},o))})]}),r&&a.jsxs("div",{children:[a.jsx(mo,{className:"text-sm font-medium mb-2",children:"Skill Bonuses"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.skill_bonuses.map((i,o)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[a.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:i.stat.replace(/_/g," ")}),a.jsxs(K,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200 text-xs flex-shrink-0",children:["+",i.value,i.value_type==="percentage"?"%":""]})]},o))})]})]})]})}function tB({birthsign:e,isOpen:t,onOpenChange:n}){return e?a.jsx(au,{open:t,onOpenChange:n,side:"right",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(v0,{birthsignName:e.name,size:"4xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx(ea,{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"inline-flex items-center px-2 py-1 bg-skyrim-gold/10 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:e.group}),a.jsx(fs,{itemId:e.edid,itemType:"stone",itemName:e.name})]}),a.jsx(ze,{text:e.description})]})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(eB,{birthsign:e}),a.jsx(Yr,{}),a.jsx(J8,{birthsign:e,title:"Special Effects"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ae,{className:"text-lg font-semibold",children:"Game Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"EDID:"}),a.jsx("span",{className:"break-all",children:e.edid})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Form ID:"}),a.jsx("span",{className:"break-all",children:e.formid})]})]})]})]})]})}):null}function nB({children:e,columns:t=2,gap:n="md",className:s}){const r={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},i={sm:"gap-3",md:"gap-4",lg:"gap-6"};return a.jsx("div",{className:H("grid",r[t],i[n],s),children:e})}function sB({children:e,columns:t=2,gap:n="md",className:s}){const r={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"},i={sm:"gap-2",md:"gap-4",lg:"gap-6"};return a.jsx("div",{className:H("grid",r[t],i[n],s),children:e})}var hm="Collapsible",[rB,bk]=Rn(hm),[aB,b0]=rB(hm),wk=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:r,disabled:i,onOpenChange:o,...l}=e,[c,u]=Tr({prop:s,defaultProp:r??!1,onChange:o,caller:hm});return a.jsx(aB,{scope:n,disabled:i,contentId:hr(),open:c,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),children:a.jsx(je.div,{"data-state":j0(c),"data-disabled":i?"":void 0,...l,ref:t})})});wk.displayName=hm;var jk="CollapsibleTrigger",Nk=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,r=b0(jk,n);return a.jsx(je.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":j0(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:t,onClick:ne(e.onClick,r.onOpenToggle)})});Nk.displayName=jk;var w0="CollapsibleContent",Sk=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=b0(w0,e.__scopeCollapsible);return a.jsx(Gt,{present:n||r.open,children:({present:i})=>a.jsx(iB,{...s,ref:t,present:i})})});Sk.displayName=w0;var iB=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:r,...i}=e,o=b0(w0,n),[l,c]=g.useState(s),u=g.useRef(null),d=Ie(t,u),f=g.useRef(0),m=f.current,h=g.useRef(0),p=h.current,v=o.open||l,b=g.useRef(v),x=g.useRef(void 0);return g.useEffect(()=>{const y=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(y)},[]),$s(()=>{const y=u.current;if(y){x.current=x.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const w=y.getBoundingClientRect();f.current=w.height,h.current=w.width,b.current||(y.style.transitionDuration=x.current.transitionDuration,y.style.animationName=x.current.animationName),c(s)}},[o.open,s]),a.jsx(je.div,{"data-state":j0(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...i,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:v&&r})});function j0(e){return e?"open":"closed"}var oB=wk,lB=Nk,cB=Sk,ms="Accordion",uB=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[N0,dB,fB]=Zx(ms),[gm,Wee]=Rn(ms,[fB,bk]),S0=bk(),kk=$.forwardRef((e,t)=>{const{type:n,...s}=e,r=s,i=s;return a.jsx(N0.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?a.jsx(pB,{...i,ref:t}):a.jsx(gB,{...r,ref:t})})});kk.displayName=ms;var[Ck,mB]=gm(ms),[Ek,hB]=gm(ms,{collapsible:!1}),gB=$.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},collapsible:i=!1,...o}=e,[l,c]=Tr({prop:n,defaultProp:s??"",onChange:r,caller:ms});return a.jsx(Ck,{scope:e.__scopeAccordion,value:$.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:$.useCallback(()=>i&&c(""),[i,c]),children:a.jsx(Ek,{scope:e.__scopeAccordion,collapsible:i,children:a.jsx(_k,{...o,ref:t})})})}),pB=$.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...i}=e,[o,l]=Tr({prop:n,defaultProp:s??[],onChange:r,caller:ms}),c=$.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=$.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return a.jsx(Ck,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:a.jsx(Ek,{scope:e.__scopeAccordion,collapsible:!0,children:a.jsx(_k,{...i,ref:t})})})}),[xB,pm]=gm(ms),_k=$.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:r,orientation:i="vertical",...o}=e,l=$.useRef(null),c=Ie(l,t),u=dB(n),f=Kc(r)==="ltr",m=ne(e.onKeyDown,h=>{var E;if(!uB.includes(h.key))return;const p=h.target,v=u().filter(C=>{var _;return!((_=C.ref.current)!=null&&_.disabled)}),b=v.findIndex(C=>C.ref.current===p),x=v.length;if(b===-1)return;h.preventDefault();let y=b;const w=0,j=x-1,N=()=>{y=b+1,y>j&&(y=w)},S=()=>{y=b-1,y<w&&(y=j)};switch(h.key){case"Home":y=w;break;case"End":y=j;break;case"ArrowRight":i==="horizontal"&&(f?N():S());break;case"ArrowDown":i==="vertical"&&N();break;case"ArrowLeft":i==="horizontal"&&(f?S():N());break;case"ArrowUp":i==="vertical"&&S();break}const k=y%x;(E=v[k].ref.current)==null||E.focus()});return a.jsx(xB,{scope:n,disabled:s,direction:r,orientation:i,children:a.jsx(N0.Slot,{scope:n,children:a.jsx(je.div,{...o,"data-orientation":i,ref:c,onKeyDown:s?void 0:m})})})}),sf="AccordionItem",[vB,k0]=gm(sf),Ak=$.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...r}=e,i=pm(sf,n),o=mB(sf,n),l=S0(n),c=hr(),u=s&&o.value.includes(s)||!1,d=i.disabled||e.disabled;return a.jsx(vB,{scope:n,open:u,disabled:d,triggerId:c,children:a.jsx(oB,{"data-orientation":i.orientation,"data-state":Lk(u),...l,...r,ref:t,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(s):o.onItemClose(s)}})})});Ak.displayName=sf;var Tk="AccordionHeader",Mk=$.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=pm(ms,n),i=k0(Tk,n);return a.jsx(je.h3,{"data-orientation":r.orientation,"data-state":Lk(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:t})});Mk.displayName=Tk;var Wg="AccordionTrigger",Rk=$.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=pm(ms,n),i=k0(Wg,n),o=hB(Wg,n),l=S0(n);return a.jsx(N0.ItemSlot,{scope:n,children:a.jsx(lB,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...l,...s,ref:t})})});Rk.displayName=Wg;var Dk="AccordionContent",zk=$.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=pm(ms,n),i=k0(Dk,n),o=S0(n);return a.jsx(cB,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...o,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});zk.displayName=Dk;function Lk(e){return e?"open":"closed"}var yB=kk,bB=Ak,wB=Mk,$k=Rk,Pk=zk;const jB=yB,Ok=g.forwardRef(({className:e,...t},n)=>a.jsx(bB,{ref:n,className:H("border-b",e),...t}));Ok.displayName="AccordionItem";const Bk=g.forwardRef(({className:e,children:t,...n},s)=>a.jsx(wB,{className:"flex",children:a.jsxs($k,{ref:s,className:H("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,a.jsx(_n,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Bk.displayName=$k.displayName;const Ik=g.forwardRef(({className:e,children:t,...n},s)=>a.jsx(Pk,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:H("pb-4 pt-0",e),children:t})}));Ik.displayName=Pk.displayName;var NB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),SB="VisuallyHidden",Hk=g.forwardRef((e,t)=>a.jsx(je.span,{...e,ref:t,style:{...NB,...e.style}}));Hk.displayName=SB;var kB=Hk,[xm,Kee]=Rn("Tooltip",[gl]),C0=gl(),CB="TooltipProvider",gb="tooltip.open",[Qee,Fk]=xm(CB),Uk="Tooltip",[Jee,vm]=xm(Uk),Kg="TooltipTrigger",EB=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=vm(Kg,n),i=Fk(Kg,n),o=C0(n),l=g.useRef(null),c=Ie(t,l,r.onTriggerChange),u=g.useRef(!1),d=g.useRef(!1),f=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(s0,{asChild:!0,...o,children:a.jsx(je.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:c,onPointerMove:ne(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),d.current=!0)}),onPointerLeave:ne(e.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:ne(e.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ne(e.onFocus,()=>{u.current||r.onOpen()}),onBlur:ne(e.onBlur,r.onClose),onClick:ne(e.onClick,r.onClose)})})});EB.displayName=Kg;var _B="TooltipPortal",[ete,AB]=xm(_B,{forceMount:void 0}),Bo="TooltipContent",Vk=g.forwardRef((e,t)=>{const n=AB(Bo,e.__scopeTooltip),{forceMount:s=n.forceMount,side:r="top",...i}=e,o=vm(Bo,e.__scopeTooltip);return a.jsx(Gt,{present:s||o.open,children:o.disableHoverableContent?a.jsx(qk,{side:r,...i,ref:t}):a.jsx(TB,{side:r,...i,ref:t})})}),TB=g.forwardRef((e,t)=>{const n=vm(Bo,e.__scopeTooltip),s=Fk(Bo,e.__scopeTooltip),r=g.useRef(null),i=Ie(t,r),[o,l]=g.useState(null),{trigger:c,onClose:u}=n,d=r.current,{onPointerInTransitChange:f}=s,m=g.useCallback(()=>{l(null),f(!1)},[f]),h=g.useCallback((p,v)=>{const b=p.currentTarget,x={x:p.clientX,y:p.clientY},y=LB(x,b.getBoundingClientRect()),w=$B(x,y),j=PB(v.getBoundingClientRect()),N=BB([...w,...j]);l(N),f(!0)},[f]);return g.useEffect(()=>()=>m(),[m]),g.useEffect(()=>{if(c&&d){const p=b=>h(b,d),v=b=>h(b,c);return c.addEventListener("pointerleave",p),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",p),d.removeEventListener("pointerleave",v)}}},[c,d,h,m]),g.useEffect(()=>{if(o){const p=v=>{const b=v.target,x={x:v.clientX,y:v.clientY},y=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),w=!OB(x,o);y?m():w&&(m(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,d,o,u,m]),a.jsx(qk,{...e,ref:i})}),[MB,RB]=xm(Uk,{isInside:!1}),DB=m5("TooltipContent"),qk=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=vm(Bo,n),u=C0(n),{onClose:d}=c;return g.useEffect(()=>(document.addEventListener(gb,d),()=>document.removeEventListener(gb,d)),[d]),g.useEffect(()=>{if(c.trigger){const f=m=>{const h=m.target;h!=null&&h.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),a.jsx(Wc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:a.jsxs(r0,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(DB,{children:s}),a.jsx(MB,{scope:n,isInside:!0,children:a.jsx(kB,{id:c.contentId,role:"tooltip",children:r||s})})]})})});Vk.displayName=Bo;var Zk="TooltipArrow",zB=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=C0(n);return RB(Zk,n).isInside?null:a.jsx(a0,{...r,...s,ref:t})});zB.displayName=Zk;function LB(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,s,r,i)){case i:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function $B(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function PB(e){const{top:t,right:n,bottom:s,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:s},{x:r,y:s}]}function OB(e,t){const{x:n,y:s}=e;let r=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,m=c.y;d>s!=m>s&&n<(f-u)*(s-d)/(m-d)+u&&(r=!r)}return r}function BB(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),IB(t)}function IB(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const r=e[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const r=e[s];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Gk=Vk;const HB=g.forwardRef(({className:e,sideOffset:t=4,...n},s)=>a.jsx(Gk,{ref:s,sideOffset:t,className:H("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));HB.displayName=Gk.displayName;function Un({title:e,navigateTo:t,onNavigate:n,children:s,className:r,showHeaderButton:i=!0}){return a.jsxs(xe,{className:r,children:[a.jsx(Te,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Le,{className:"text-lg",children:e}),i&&a.jsxs(q,{variant:"outline",size:"sm",onClick:n,className:"text-sm whitespace-nowrap cursor-pointer",children:["View all ",t," "]})]})}),a.jsx(ve,{className:"space-y-4",children:s})]})}function Yk(e){var t,n,s,r,i,o;return{id:`religion-${e.name.toLowerCase().replace(/\s+/g,"-")}`,name:e.name,description:((t=e.tenet)==null?void 0:t.description)||"",tags:rs()?e.favoredRaces||[]:[],summary:((n=e.tenet)==null?void 0:n.description)||"",effects:[...((r=(s=e.tenet)==null?void 0:s.effects)==null?void 0:r.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[],...((o=(i=e.blessing)==null?void 0:i.effects)==null?void 0:o.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[]],associatedItems:[],imageUrl:void 0,category:e.type}}function pb(e){var t;return{...e,id:e.edid||e.name,name:e.name,description:e.description,tags:e.tags||[],summary:e.description,effects:[...((t=e.effects)==null?void 0:t.map(n=>({type:"positive",name:n.type,description:n.condition||n.type,value:n.value})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalTrait:e}}function Xk(e){var s,r,i,o,l,c,u,d;const t=[...((s=e.stat_modifications)==null?void 0:s.map(f=>({type:f.type==="bonus"?"positive":"negative",name:`${f.stat} ${f.type==="bonus"?"+":"-"}${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} ${f.type==="bonus"?"increased":"decreased"} by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((r=e.skill_bonuses)==null?void 0:r.map(f=>({type:"positive",name:`${f.stat} +${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} skill increased by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((i=e.powers)==null?void 0:i.map(f=>({type:"positive",name:f.name,description:f.description,value:f.magnitude||0,target:"power"})))||[],...((o=e.conditional_effects)==null?void 0:o.map(f=>({type:"neutral",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[],...((l=e.mastery_effects)==null?void 0:l.map(f=>({type:"positive",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[]],n=[e.group,...((c=e.stat_modifications)==null?void 0:c.map(f=>f.stat))||[],...((u=e.skill_bonuses)==null?void 0:u.map(f=>f.stat))||[],...((d=e.powers)==null?void 0:d.map(f=>f.name))||[]].filter((f,m,h)=>h.indexOf(f)===m);return{...e,id:e.id||e.edid,name:e.name,description:e.description,tags:n,summary:e.description,effects:t,associatedItems:[],imageUrl:void 0,category:e.group,originalBirthsign:e}}function FB(e){var s;const t=[{type:"positive",name:e.name,description:e.description||"",value:0,target:"destiny"}],n=[...e.tags||[],...((s=e.prerequisites)==null?void 0:s.map(r=>`Requires: ${r}`))||[]].filter((r,i,o)=>o.indexOf(r)===i);return{...e,id:e.id||e.edid,name:e.name,description:e.description||"",tags:n,summary:e.description||"",effects:t,associatedItems:[],imageUrl:e.icon,category:"Destiny",originalDestinyNode:e}}function UB(){const{data:e,loading:t,error:n,load:s}=yi();return{birthsigns:e,loading:t,error:n,refetch:s}}function Wk({className:e}){const{birthsigns:t}=UB(),{build:n,setStone:s}=ht(),r=lt(),i=n.stone?t.find(u=>u.edid===n.stone):null,o=u=>{s(u.edid)},l=()=>{r("/birth-signs")};if(!i)return a.jsxs(Un,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's birthsign"}),a.jsx(mb,{birthsigns:t,onSelect:o,placeholder:"Search for a birthsign...",className:"w-full"})]});const c=Xk(i);return a.jsxs(Un,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[a.jsx(mb,{birthsigns:t,onSelect:o,placeholder:`Birth Sign: Select a birthsign (${i.name})`,className:"w-full"}),a.jsx(nf,{item:c,originalBirthsign:i,isExpanded:!0,className:"border-0 shadow-none",showToggle:!1})]})}const VB={selectedTags:[],sortBy:"alphabetical",viewMode:"grid",expandedBirthsigns:new Set};function qB(e,t){switch(t.type){case"ADD_TAG":return e.selectedTags.some(n=>n.value===t.payload.value&&n.category===t.payload.category)?e:{...e,selectedTags:[...e.selectedTags,t.payload]};case"REMOVE_TAG":return{...e,selectedTags:e.selectedTags.filter(n=>n.id!==t.payload)};case"SET_SORT":return{...e,sortBy:t.payload};case"SET_VIEW_MODE":return{...e,viewMode:t.payload};case"TOGGLE_EXPANDED":{const n=new Set(e.expandedBirthsigns);return n.has(t.payload)?n.delete(t.payload):n.add(t.payload),{...e,expandedBirthsigns:n}}case"EXPAND_ALL":return{...e,expandedBirthsigns:new Set(t.payload)};case"COLLAPSE_ALL":return{...e,expandedBirthsigns:new Set};default:return e}}function ZB(e){const[t,n]=g.useReducer(qB,VB),s=g.useMemo(()=>{const b=G8(e),x=Y8(e);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"groups",name:"Birthsign Groups",placeholder:"Search by birthsign group...",options:b.map(y=>({id:`group-${y}`,label:y,value:y,category:"Birthsign Groups",description:`Birthsigns from ${y} group`}))},{id:"stats",name:"Stats & Skills",placeholder:"Search by stats and skills...",options:x.map(y=>({id:`stat-${y}`,label:y.replace(/_/g," ").replace(/\b\w/g,w=>w.toUpperCase()),value:y,category:"Stats & Skills",description:`Birthsigns that affect ${y}`}))}]},[e]),r=g.useMemo(()=>t.selectedTags.length===0?e:e.filter(b=>t.selectedTags.every(x=>{switch(x.category){case"Fuzzy Search":return!0;case"Birthsign Groups":return b.group===x.value;case"Stats & Skills":return[...b.stat_modifications.map(w=>w.stat),...b.skill_bonuses.map(w=>w.stat)].some(w=>w===x.value);default:return!0}})),[e,t.selectedTags]),i=g.useMemo(()=>t.selectedTags.filter(b=>b.category==="Fuzzy Search").map(b=>b.value).join(" "),[t.selectedTags]),{filteredBirthsigns:o}=vk(r,i),l=g.useMemo(()=>o.map(Xk),[o]),c=g.useMemo(()=>[...l].sort((b,x)=>{var y,w;switch(t.sortBy){case"alphabetical":return b.name.localeCompare(x.name);case"group":{const j=k=>{switch(k){case"Warrior":return 1;case"Mage":return 2;case"Thief":return 3;case"Serpent":return 4;case"Other":return 5;default:return 6}},N=j(b.category),S=j(x.category);return N!==S?N-S:b.name.localeCompare(x.name)}case"power-count":{const j=((y=b.effects)==null?void 0:y.filter(S=>S.target==="power").length)||0,N=((w=x.effects)==null?void 0:w.filter(S=>S.target==="power").length)||0;return j!==N?N-j:b.name.localeCompare(x.name)}default:return 0}}),[l,t.sortBy]),u=g.useCallback(b=>{n({type:"ADD_TAG",payload:b})},[]),d=g.useCallback(b=>{n({type:"REMOVE_TAG",payload:b})},[]),f=g.useCallback(b=>{n({type:"SET_SORT",payload:b})},[]),m=g.useCallback(b=>{n({type:"SET_VIEW_MODE",payload:b})},[]),h=g.useCallback(b=>{n({type:"TOGGLE_EXPANDED",payload:b})},[]),p=g.useCallback(b=>{n({type:"EXPAND_ALL",payload:b})},[]),v=g.useCallback(()=>{n({type:"COLLAPSE_ALL"})},[]);return{...t,addTag:u,removeTag:d,setSort:f,setViewMode:m,toggleExpanded:h,expandAll:p,collapseAll:v,searchCategories:s,fuzzySearchQuery:i,filteredBirthsigns:r,displayItems:l,sortedDisplayItems:c}}function GB(){const{data:e,loading:t,error:n}=e8(),s=e||[],{selectedTags:r,sortBy:i,viewMode:o,addTag:l,removeTag:c,setSort:u,setViewMode:d,searchCategories:f,filteredBirthsigns:m,displayItems:h,sortedDisplayItems:p}=ZB(s);g.useEffect(()=>{console.log("birthsigns",s),console.log("sortedDisplayItems",p),console.log("displayItems",h),console.log("filteredBirthsigns",m)},[s,p,h,m]);const[v,b]=g.useState(null),[x,y]=g.useState(!1),w=j=>{b(j),y(!0)};return t?a.jsx(cn,{title:"Birthsigns",description:"Choose your birthsign",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("p",{children:"Loading birthsigns..."})})}):n?a.jsx(cn,{title:"Birthsigns",description:"Choose your birthsign",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("p",{className:"text-red-500",children:["Error loading birthsigns: ",n]})})}):a.jsxs(cn,{title:"Birth Signs",description:"Choose your character's birthsign to gain unique abilities and bonuses based on the celestial constellations.",children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(ka,{categories:f,onSelect:j=>{let N;typeof j=="string"?N={id:`custom-${j}`,label:j,value:j,category:"Fuzzy Search"}:N={id:`${j.category}-${j.id}`,label:j.label,value:j.value,category:j.category},r.some(S=>S.value===N.value&&S.category===N.category)||l(N)},onCustomSearch:j=>{let N;typeof j=="string"?N={id:`custom-${j}`,label:j,value:j,category:"Fuzzy Search"}:N={id:`${j.category}-${j.id}`,label:j.label,value:j.value,category:j.category},r.some(S=>S.value===N.value&&S.category===N.category)||l(N)}})})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(q,{variant:o==="grid"?"default":"outline",size:"sm",onClick:()=>d("grid"),className:"flex items-center gap-2",children:[a.jsx(ol,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(q,{variant:o==="list"?"default":"outline",size:"sm",onClick:()=>d("list"),className:"flex items-center gap-2",children:[a.jsx(pi,{className:"h-4 w-4"}),"List"]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(nu,{children:[a.jsx(su,{asChild:!0,children:a.jsxs(q,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort:"," ",i==="alphabetical"?"A-Z":i==="group"?"Group":"Power Count",a.jsx(_n,{className:"h-4 w-4"})]})}),a.jsxs(pl,{align:"end",children:[a.jsx(as,{onClick:()=>u("alphabetical"),children:"Alphabetical"}),a.jsx(as,{onClick:()=>u("group"),children:"By Group"}),a.jsx(as,{onClick:()=>u("power-count"),children:"By Power Count"})]})]})})]}),a.jsx("div",{className:"my-4",children:r.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>r.forEach(j=>c(j.id)),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Dt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),r.map(j=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>c(j.id),title:"Click to remove",children:[j.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},j.id))]})}),o==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:p.map(j=>{const N=s.find(S=>S.id===j.id||S.edid===j.id);return N?a.jsx(nf,{originalBirthsign:N,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>w(N)},j.id):null})}):a.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:p.map(j=>{const N=s.find(S=>S.id===j.id||S.edid===j.id);return N?a.jsx(nf,{originalBirthsign:N,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>w(N)},j.id):null})}),p.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No birthsigns found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),a.jsx(tB,{birthsign:v,isOpen:x,onOpenChange:y})]})}class bs{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.id=="string"&&typeof t.name=="string"&&typeof t.description=="string"&&Array.isArray(t.tags)&&Array.isArray(t.prerequisites)}static equals(t,n){return t.id===n.id}static hasTag(t,n){return t.tags.includes(n)}static hasAnyTag(t,n){return n.some(s=>this.hasTag(t,s))}static hasAllTags(t,n){return n.every(s=>this.hasTag(t,s))}static filterByTag(t,n){return t.filter(s=>this.hasTag(s,n))}static filterByAnyTag(t,n){return t.filter(s=>this.hasAnyTag(s,n))}static filterByAllTags(t,n){return t.filter(s=>this.hasAllTags(s,n))}static isRootNode(t){return t.prerequisites.length===0}static getRootNodes(t){return t.filter(n=>this.isRootNode(n))}static isLeafNode(t,n){return!n.some(s=>s.prerequisites.includes(t.edid))}static getLeafNodes(t){return t.filter(n=>this.isLeafNode(n,t))}static getNextNodes(t,n){return n.filter(s=>s.prerequisites.includes(t.edid))}static getPrerequisiteNodes(t,n){return n.filter(s=>t.prerequisites.includes(s.edid))}static search(t,n){const s=n.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||r.description.toLowerCase().includes(s)||r.tags.some(i=>i.toLowerCase().includes(s)))}static sortByName(t){return[...t].sort((n,s)=>n.name.localeCompare(s.name))}static sortByPrerequisites(t){return[...t].sort((n,s)=>n.prerequisites.length-s.prerequisites.length)}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static getUniquePrerequisites(t){const n=t.flatMap(s=>s.prerequisites);return[...new Set(n)].sort()}}function Ea(e={}){const{includePrerequisites:t=!1,includeNextNodes:n=!1,filterByTags:s=[],searchTerm:r="",sortBy:i="name"}=e,{data:o,loading:l,error:c,reload:u}=t8(),d=o||[],f=c,m=g.useMemo(()=>bs.getRootNodes(d),[d]),h=g.useMemo(()=>[],[d]),p=g.useMemo(()=>bs.getUniqueTags(d),[d]),v=g.useMemo(()=>{let C=[...d];return s.length>0&&(C=bs.filterByAnyTag(C,s)),r&&(C=bs.search(C,r)),i==="name"?C=bs.sortByName(C):i==="prerequisites"&&(C=bs.sortByPrerequisites(C)),C},[d,s,r,i]),b=C=>d.find(_=>_.id===C),x=C=>d.find(_=>_.edid===C);return{nodes:d,rootNodes:m,filteredNodes:v,isLoading:l,error:f,categories:h,tags:p,refresh:()=>{u()},getNodeById:b,getNodeByName:C=>d.find(_=>_.name===C),getNodeByEdid:x,getNextNodes:C=>{const _=x(C);return _?bs.getNextNodes(_,d):[]},getPrerequisiteNodes:C=>{const _=x(C);return _?bs.getPrerequisiteNodes(_,d):[]},filterByCategory:C=>[],filterByTag:C=>bs.filterByTag(d,C),searchNodes:C=>bs.search(d,C)}}function E0(e={}){const{initialPath:t=[],validatePath:n=!0}=e,[s,r]=g.useState(t),{nodes:i,rootNodes:o}=Ea(),l=g.useMemo(()=>s.length>0?s[s.length-1]:null,[s]),c=g.useMemo(()=>s.length===0?o:i.filter(w=>w.prerequisites.length===0?!1:w.prerequisites.some(j=>s.some(N=>N.edid===j))),[s,i,o]),u=g.useMemo(()=>l?i.filter(w=>w.prerequisites.includes(l.edid)):o,[l,i,o]),d=g.useMemo(()=>l?i.filter(w=>l.prerequisites.includes(w.edid)):[],[l,i]),{isValidPath:f,pathErrors:m}=g.useMemo(()=>{if(!n||s.length===0)return{isValidPath:!0,pathErrors:[]};const w=[];for(let j=1;j<s.length;j++){const N=s[j],S=s.slice(0,j);!N.prerequisites.some(E=>S.some(C=>C.edid===E))&&N.prerequisites.length>0&&w.push(`${N.name} requires one of: ${N.prerequisites.join(", ")}`)}return{isValidPath:w.length===0,pathErrors:w}},[s,n]),h=g.useCallback(w=>{if(s.length>0){if(s[s.length-1],!w.prerequisites.some(N=>s.some(S=>S.edid===N))&&w.prerequisites.length>0)return!1}else if(w.prerequisites.length>0)return!1;return r(j=>[...j,w]),!0},[s]),p=g.useCallback(w=>{r(j=>j.slice(0,w+1))},[]),v=g.useCallback(w=>{r(w)},[]),b=g.useCallback(()=>{r([])},[]),x=g.useCallback(w=>{r(j=>j.slice(0,w+1))},[]),y=g.useCallback(()=>({startNode:s[0]||null,endNode:s[s.length-1]||null,totalNodes:s.length,pathString:s.map(w=>w.name).join("  ")}),[s]);return{currentPath:s,currentNode:l,availableNodes:c,rootNodes:o,isValidPath:f,pathErrors:m,addNodeToPath:h,removeNodeFromPath:p,setPath:v,clearPath:b,goToPathIndex:x,pathLength:s.length,isPathComplete:u.length===0,nextPossibleNodes:u,prerequisiteNodes:d,getPathSummary:y}}function ym(e={}){const{fromNode:t,maxDepth:n=10}=e,{nodes:s,rootNodes:r,isLoading:i,error:o}=Ea();return{possiblePaths:g.useMemo(()=>{if(i||o||!s.length)return[];const c=[],u=new Set,d=m=>s.filter(h=>h.prerequisites.includes(m)),f=(m,h=0)=>{if(h>=n)return;const p=m[m.length-1],v=d(p.edid);if(v.length===0){c.push({path:[...m],isComplete:!0,endNode:p});return}v.forEach(b=>{const x=m.map(y=>y.id).join("->")+"->"+b.id;u.has(x)||(u.add(x),f([...m,b],h+1))})};if(t){if(d(t.edid).length===0)return[];f([t])}else r.forEach(m=>{f([m])});return c},[s,r,t,n,i,o]),isLoading:i,error:o}}var xh,bm="HoverCard",[Kk,tte]=Rn(bm,[gl]),wm=gl(),[YB,_0]=Kk(bm),Qk=e=>{const{__scopeHoverCard:t,children:n,open:s,defaultOpen:r,onOpenChange:i,openDelay:o=700,closeDelay:l=300}=e,c=wm(t),u=g.useRef(0),d=g.useRef(0),f=g.useRef(!1),m=g.useRef(!1),[h,p]=Tr({prop:s,defaultProp:r??!1,onChange:i,caller:bm}),v=g.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>p(!0),o)},[o,p]),b=g.useCallback(()=>{clearTimeout(u.current),!f.current&&!m.current&&(d.current=window.setTimeout(()=>p(!1),l))},[l,p]),x=g.useCallback(()=>p(!1),[p]);return g.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),a.jsx(YB,{scope:t,open:h,onOpenChange:p,onOpen:v,onClose:b,onDismiss:x,hasSelectionRef:f,isPointerDownOnContentRef:m,children:a.jsx(KS,{...c,children:n})})};Qk.displayName=bm;var Jk="HoverCardTrigger",eC=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,...s}=e,r=_0(Jk,n),i=wm(n);return a.jsx(s0,{asChild:!0,...i,children:a.jsx(je.a,{"data-state":r.open?"open":"closed",...s,ref:t,onPointerEnter:ne(e.onPointerEnter,af(r.onOpen)),onPointerLeave:ne(e.onPointerLeave,af(r.onClose)),onFocus:ne(e.onFocus,r.onOpen),onBlur:ne(e.onBlur,r.onClose),onTouchStart:ne(e.onTouchStart,o=>o.preventDefault())})})});eC.displayName=Jk;var XB="HoverCardPortal",[nte,WB]=Kk(XB,{forceMount:void 0}),rf="HoverCardContent",tC=g.forwardRef((e,t)=>{const n=WB(rf,e.__scopeHoverCard),{forceMount:s=n.forceMount,...r}=e,i=_0(rf,e.__scopeHoverCard);return a.jsx(Gt,{present:s||i.open,children:a.jsx(KB,{"data-state":i.open?"open":"closed",...r,onPointerEnter:ne(e.onPointerEnter,af(i.onOpen)),onPointerLeave:ne(e.onPointerLeave,af(i.onClose)),ref:t})})});tC.displayName=rf;var KB=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,...l}=e,c=_0(rf,n),u=wm(n),d=g.useRef(null),f=Ie(t,d),[m,h]=g.useState(!1);return g.useEffect(()=>{if(m){const p=document.body;return xh=p.style.userSelect||p.style.webkitUserSelect,p.style.userSelect="none",p.style.webkitUserSelect="none",()=>{p.style.userSelect=xh,p.style.webkitUserSelect=xh}}},[m]),g.useEffect(()=>{if(d.current){const p=()=>{h(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var b;((b=document.getSelection())==null?void 0:b.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",p),()=>{document.removeEventListener("pointerup",p),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),g.useEffect(()=>{d.current&&eI(d.current).forEach(v=>v.setAttribute("tabindex","-1"))}),a.jsx(Wc,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:o,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:ne(i,p=>{p.preventDefault()}),onDismiss:c.onDismiss,children:a.jsx(r0,{...u,...l,onPointerDown:ne(l.onPointerDown,p=>{p.currentTarget.contains(p.target)&&h(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:{...l.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),QB="HoverCardArrow",JB=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,...s}=e,r=wm(n);return a.jsx(a0,{...r,...s,ref:t})});JB.displayName=QB;function af(e){return t=>t.pointerType==="touch"?void 0:e()}function eI(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var tI=Qk,nI=eC,nC=tC;const sC=tI,rC=nI,A0=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},r)=>a.jsx(nC,{ref:r,align:t,sideOffset:n,className:H("w-64 rounded-md dropdown-enhanced p-4 text-popover-foreground outline-none animate-in zoom-in-90 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-90 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Lt.TOOLTIP},...s}));A0.displayName=nC.displayName;function sI({node:e,allNodes:t,children:n,showPrerequisites:s=!0,showNextNodes:r=!0,showTags:i=!0,className:o=""}){const l=u=>t.filter(d=>d.prerequisites.includes(u)),c=u=>t.filter(d=>e.prerequisites.includes(d.name));return a.jsxs(sC,{children:[a.jsx(rC,{asChild:!0,children:n}),a.jsx(A0,{className:`w-80 p-0 ${o}`,children:a.jsxs(xe,{className:"border-0 shadow-none",children:[a.jsx(Te,{className:"pb-2",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("div",{className:"flex-1",children:a.jsx("h3",{className:"font-semibold text-lg text-foreground mb-1",children:e.name})}),e.icon&&a.jsx("div",{className:"w-8 h-8 ml-2",children:a.jsx("img",{src:e.icon,alt:e.name,className:"w-full h-full object-contain"})})]})}),a.jsxs(ve,{className:"pt-0 space-y-3",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),s&&e.prerequisites.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Prerequisites:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[c(e.name).map(u=>a.jsx(K,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:u.name},u.id)),e.prerequisites.filter(u=>!t.some(d=>d.name===u)).map((u,d)=>a.jsx(K,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500 border-gray-200",children:u},`missing-${d}`))]})]}),r&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Leads to:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[l(e.name).map(u=>a.jsx(K,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:u.name},u.id)),l(e.name).length===0&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"No further progression"})]})]}),i&&e.tags.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Tags:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((u,d)=>a.jsx(K,{variant:"secondary",className:"text-xs",children:u},d))})]}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[a.jsxs("p",{children:["ID: ",e.id]}),e.globalFormId&&a.jsxs("p",{children:["Form ID: ",e.globalFormId]})]})]})]})})]})}function aC({node:e,allNodes:t,variant:n="default",size:s="md",showHoverCard:r=!0,onClick:i,className:o=""}){const l={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},c=a.jsx(K,{variant:n,className:`
        ${l[s]} 
        ${i?"cursor-pointer hover:bg-muted/50":""} 
        ${o}
        rounded-full
      `,onClick:i,children:e.name});return r?a.jsx(sI,{node:e,allNodes:t,children:c}):c}function iC({path:e,allNodes:t,onBreadcrumbClick:n,variant:s="default",className:r=""}){if(e.length===0)return a.jsx("div",{className:`flex items-center gap-2 ${r}`,children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})});const i=s==="compact"?"sm":"md";return a.jsx("div",{className:`flex items-center gap-2 ${r}`,children:e.map((o,l)=>a.jsxs($.Fragment,{children:[a.jsx(aC,{node:o,allNodes:t,variant:l===e.length-1?"default":"outline",size:i,showHoverCard:!0,onClick:n?()=>n(l):void 0}),l<e.length-1&&a.jsx(qc,{className:"w-4 h-4 text-muted-foreground"})]},o.id))})}function rI({path:e,allNodes:t,selectedPathLength:n,isComplete:s,endNode:r,onPathClick:i,variant:o="default",className:l=""}){const c=o==="compact"?"sm":"md";return a.jsxs("div",{className:`p-3 border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer ${l}`,onClick:()=>i(e,n),children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("div",{className:"flex flex-wrap items-center gap-1",children:e.map((u,d)=>a.jsxs($.Fragment,{children:[a.jsx(aC,{node:u,allNodes:t,variant:"outline",size:c,showHoverCard:!0,onClick:f=>{f==null||f.stopPropagation(),i(e,d)},className:`
                   ${d===0&&n===0?"cursor-pointer":""}
                   ${s&&d===e.length-1?"bg-yellow-600 text-yellow-50 border-yellow-700":""}
                 `}),d<e.length-1&&a.jsx(qc,{className:"w-3 h-3 text-muted-foreground"})]},u.id))})}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsxs("span",{children:["Length: ",e.length," steps"]}),s&&a.jsxs("span",{children:[" Ends at: ",r.name]}),e.length>n&&a.jsxs("span",{children:[" ",e.length-n," more choices"]})]})]})}function Qg({possiblePaths:e,selectedPathLength:t,onPathClick:n,variant:s="default",className:r=""}){const{nodes:i}=Ea();return e.length===0?a.jsxs("div",{className:`text-center py-8 ${r}`,children:[a.jsx("p",{className:"text-muted-foreground",children:"No possible paths available."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You may have reached the end of available destiny paths."})]}):a.jsx("div",{className:`space-y-3 ${r}`,children:e.map((o,l)=>a.jsx(rI,{path:o.path,allNodes:i,selectedPathLength:t,isComplete:o.isComplete,endNode:o.endNode,onPathClick:n,variant:s},l))})}const oC=({navigate:e})=>{const{build:t,setDestinyPath:n}=ht(),{nodes:s,isLoading:r,error:i}=Ea(),o=$.useMemo(()=>t.destinyPath.map(y=>s.find(w=>w.id===y)).filter(y=>!!y),[t.destinyPath,s]),{isValidPath:l,pathErrors:c,setPath:u,clearPath:d,currentPath:f,currentNode:m}=E0({initialPath:o,validatePath:!0}),{possiblePaths:h}=ym({fromNode:m||void 0}),p=y=>{const w=y.map(j=>j.id);n(w)},v=(y,w)=>{let j;if(f.length===0)j=y.slice(0,w+1);else{if(w===0)return;const N=y.slice(1,w+1);j=[...f,...N]}u(j),p(j)},b=()=>{d(),n([])},x=y=>{const w=f.slice(0,y+1);u(w),p(w)};return a.jsxs(xe,{className:"mb-6",children:[a.jsx(Te,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(Le,{className:"text-lg",children:"Destiny"}),a.jsxs(q,{variant:"outline",size:"sm",onClick:()=>e("/destiny"),className:"text-sm whitespace-nowrap cursor-pointer",children:[a.jsx(Sa,{className:"w-4 h-4 mr-1"}),"View All"]})]})}),a.jsx(ve,{children:r?a.jsx("div",{className:"text-muted-foreground",children:"Loading destiny data..."}):i?a.jsx("div",{className:"text-destructive",children:i}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Selected Path"}),a.jsx(iC,{path:f,allNodes:s,variant:"compact",onBreadcrumbClick:x})]}),f.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Path Details (",f.length," nodes)"]}),a.jsxs(q,{variant:"outline",size:"sm",onClick:b,className:"text-xs",children:[a.jsx(xr,{className:"w-3 h-3 mr-1"}),"Clear Path"]})]}),a.jsx("div",{className:"space-y-2",children:f.map((y,w)=>a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium flex-shrink-0",children:w+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-sm text-foreground",children:y.name}),y.description&&a.jsx(FormattedText,{text:y.description,className:"text-xs text-muted-foreground mt-1",as:"p"})]})]})},y.id))})]}),h.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:f.length===0?"Choose Your Starting Point":"Continue Your Path"}),a.jsx(ii,{className:"h-[200px]",children:a.jsx("div",{className:"p-2",children:a.jsx(Qg,{possiblePaths:h,selectedPathLength:f.length,onPathClick:v,variant:"compact"})})})]}),!l&&c.length>0&&a.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(Ao,{className:"w-3 h-3"}),a.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),a.jsx("ul",{className:"space-y-0.5",children:c.map((y,w)=>a.jsxs("li",{children:[" ",y]},w))})]}),f.length===0&&h.length===0&&a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx("p",{className:"text-sm",children:"No destiny paths available"}),a.jsx(q,{variant:"outline",size:"sm",onClick:()=>e("/destiny"),className:"mt-2",children:"Browse All Destinies"})]})]})})]})};class pt{static getRaceById(t,n){return t.find(s=>s.edid===n)}static getRacesByCategory(t,n){return t.filter(s=>s.category===n)}static getUniqueCategories(t){return[...new Set(t.map(n=>n.category))]}static getUniqueTags(t){const n=t.flatMap(s=>[...s.keywords||[],...s.flags||[]]);return[...new Set(n)]}static filterByCategory(t,n){return n?t.filter(s=>s.category===n):t}static filterByTags(t,n){return n.length===0?t:t.filter(s=>n.some(r=>(s.keywords||[]).includes(r)||(s.flags||[]).includes(r)))}static filterByAnyTag(t,n){return n.length===0?t:t.filter(s=>n.some(r=>(s.keywords||[]).includes(r)||(s.flags||[]).includes(r)))}static search(t,n){if(!n.trim())return t;const s=n.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||(r.description||"").toLowerCase().includes(s)||(r.keywords||[]).some(i=>i.toLowerCase().includes(s))||(r.flags||[]).some(i=>i.toLowerCase().includes(s)))}static sortByName(t){return[...t].sort((n,s)=>n.name.localeCompare(s.name))}static sortByCategory(t){return[...t].sort((n,s)=>{const r=n.category.localeCompare(s.category);return r!==0?r:n.name.localeCompare(s.name)})}static transformToPlayerCreationItem(t){const n=[...t.keywords||[],...t.flags||[],t.category],s=[...(t.skillBonuses||[]).map(r=>({name:`${r.skill} +${r.bonus}`,type:"positive",description:`Provides ${r.bonus} bonus to ${r.skill}`,value:r.bonus,target:r.skill})),...(t.racialSpells||[]).map(r=>({name:r.name,type:"positive",description:r.description,target:"racial ability"}))];return{id:t.edid,name:t.name,description:t.description||"",tags:n,effects:s,associatedItems:[],imageUrl:void 0,category:t.category||""}}static getRelatedRaces(t,n){return n.filter(s=>s.edid!==t.edid&&s.category===t.category)}static calculateRaceStats(t){var n,s,r,i,o,l;return{totalHealth:((n=t.startingStats)==null?void 0:n.health)||0,totalMagicka:((s=t.startingStats)==null?void 0:s.magicka)||0,totalStamina:((r=t.startingStats)==null?void 0:r.stamina)||0,totalCarryWeight:((i=t.startingStats)==null?void 0:i.carryWeight)||0,skillBonusCount:((o=t.skillBonuses)==null?void 0:o.length)||0,racialSpellCount:((l=t.racialSpells)==null?void 0:l.length)||0}}static applyFilters(t,n){let s=[...t];return n.search&&(s=this.search(s,n.search)),n.type&&(s=this.filterByCategory(s,n.type)),n.tags.length>0&&(s=this.filterByTags(s,n.tags)),s}}class aI{static enrichRacesWithTags(t){t.forEach(n=>{})}static generateSearchCategories(t){const n=[...new Set(t.map(i=>i.category))],s=[...new Set(t.flatMap(i=>i.keywords.map(o=>o.edid)))],r=[...new Set(t.flatMap(i=>i.flags))];return[{id:"category",name:"Race Type",options:n},{id:"keywords",name:"Keywords",options:s},{id:"flags",name:"Flags",options:r}]}static validateRaceData(t){try{return!(!t.name||!t.edid||!t.category||!t.startingStats||typeof t.startingStats.health!="number"||typeof t.startingStats.magicka!="number"||typeof t.startingStats.stamina!="number"||typeof t.startingStats.carryWeight!="number"||!Array.isArray(t.skillBonuses)||!Array.isArray(t.racialSpells)||!Array.isArray(t.keywords)||!Array.isArray(t.flags))}catch{return!1}}static calculateRaceStats(t){const n=t.startingStats.health,s=t.startingStats.magicka,r=t.startingStats.stamina,i=t.startingStats.carryWeight,o=t.skillBonuses.length,l=t.racialSpells.length;return{totalHealth:n,totalMagicka:s,totalStamina:r,totalCarryWeight:i,skillBonusCount:o,racialSpellCount:l}}static calculatePowerLevel(t){const n=this.calculateRaceStats(t),s=(n.totalHealth+n.totalMagicka+n.totalStamina)/3,r=n.skillBonusCount*5+n.racialSpellCount*10;return Math.round(s+r)}static getDifficultyRating(t){const n=this.calculatePowerLevel(t);return n<50?1:n<70?2:n<90?3:n<110?4:5}static getPlaystyleSuggestions(t){const n=[],s=t.startingStats;return s.health>120&&(n.push("Tank"),n.push("Melee Fighter")),s.magicka>120&&(n.push("Mage"),n.push("Spellcaster")),s.stamina>120&&(n.push("Archer"),n.push("Rogue")),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("onehanded"))&&n.push("One-Handed Warrior"),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("destruction"))&&n.push("Destruction Mage"),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("sneak"))&&n.push("Stealth"),[...new Set(n)]}static formatRaceDescription(t){const n=this.calculateRaceStats(t),s=this.getPlaystyleSuggestions(t);let r=t.description;return s.length>0&&(r+=`

Recommended playstyles: ${s.join(", ")}`),r+=`

Starting Stats: Health ${n.totalHealth}, Magicka ${n.totalMagicka}, Stamina ${n.totalStamina}`,r+=`
Abilities: ${n.skillBonusCount} skill bonuses, ${n.racialSpellCount} racial spells`,r}}function xl(e={}){const{includeRelated:t=!1,categoryFilter:n="",searchTerm:s="",sortBy:r="name"}=e,{data:i,loading:o,error:l}=yr(),c=g.useMemo(()=>pt.getUniqueCategories(i),[i]),u=g.useMemo(()=>pt.getUniqueTags(i),[i]),d=g.useMemo(()=>i.filter(y=>!(n&&y.category!==n||s&&pt.search([y],s).length===0)),[i,n,s]),f=g.useMemo(()=>r==="name"?pt.sortByName(d):pt.sortByCategory(d),[d,r]);return{races:i,filteredRaces:f,isLoading:o,error:l,categories:c,tags:u,refresh:async()=>{await yr.getState().load()},getRaceById:y=>pt.getRaceById(i,y),getRacesByCategory:y=>pt.getRacesByCategory(i,y),filterByCategory:y=>pt.filterByCategory(i,y),filterByTag:y=>pt.filterByTags(i,[y]),searchRaces:y=>pt.search(i,y)}}const iI={Altmer:"altmer.svg",Argonian:"argonian.svg",Bosmer:"woodelf.svg",Breton:"breton.svg",Dunmer:"dunmer.svg",Imperial:"imperial.svg",Khajiit:"khajit.svg",Nord:"nord.svg",Orsimer:"orc.svg",Redguard:"redguard.svg"};function In({raceName:e,size:t="md",className:n}){const s=iI[e],r=s?fn(`assets/race-avatar/${s}`):void 0;return a.jsx(mm,{imgSrc:r,alt:e,size:t,className:n})}function ta({category:e,size:t="md",className:n}){return a.jsx(ok,{category:e,categoryType:"race",size:t,className:n})}const oI={ability:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"},trait:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},flag:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"},skill:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"}},lI={sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1"};function cI(e){const t=e.toLowerCase();return["destruction","restoration","alteration","illusion","conjuration","light armor","heavy armor","one-handed","two-handed","archery","block","smithing","enchanting","alchemy","speechcraft","sneak","lockpicking","pickpocket"].some(n=>t.includes(n))?"skill":["waterbreathing","night eye","claws","histskin","dragonskin","magic resistance","voice of the emperor","battle cry"].some(n=>t.includes(n))?"ability":["strong stomach","beast race","bleeds","natural"].some(n=>t.includes(n))?"trait":"flag"}function js({keyword:e,type:t,size:n="sm",className:s}){const r=t||cI(e),i=oI[r];return a.jsx(K,{variant:"outline",className:H(i.bg,i.text,i.border,lI[n],"font-medium",s),children:e})}const uI={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",purple:"bg-purple-500",orange:"bg-orange-500"},dI={sm:"h-1.5",md:"h-2",lg:"h-3"};function ar({value:e,maxValue:t,label:n,color:s="blue",size:r="md",showValue:i=!0,className:o}){const l=Math.min(e/t*100,100);return a.jsxs("div",{className:H("space-y-1",o),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:n}),i&&a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),a.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:H("transition-all duration-300 ease-out",uI[s],dI[r]),style:{width:`${l}%`}})})]})}function Io({effects:e,title:t="Effects",className:n,maxDisplay:s,compact:r=!1,showDescriptions:i=!0}){if(!e||e.length===0)return null;const o=s?e.slice(0,s):e,l=s&&e.length>s;return a.jsxs("div",{className:H("space-y-3",n),children:[t&&a.jsx(on,{className:"text-lg font-medium text-foreground",children:t}),r?a.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.map((c,u)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:c.description,children:[a.jsx(Ze,{className:"h-3 w-3 text-yellow-500"}),a.jsx("span",{className:"font-medium",children:c.name})]},u)),l&&a.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded text-xs text-muted-foreground",children:["+",e.length-s," more"]})]}):a.jsxs("div",{className:"space-y-3",children:[o.map((c,u)=>a.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-muted",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Ze,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h6",{className:"font-medium text-sm",children:c.name}),i&&c.description&&a.jsx(ze,{text:c.description,className:"text-xs text-muted-foreground mt-1 leading-relaxed"})]})]})},u)),l&&a.jsxs("div",{className:"text-center text-xs text-muted-foreground py-2",children:["+",e.length-s," more effects"]})]})]})}function iu({stats:e,regeneration:t,title:n="Stats",className:s,showRegeneration:r=!0,compact:i=!1}){return a.jsxs("div",{className:H("space-y-3",s),children:[a.jsx(on,{className:"text-lg font-medium text-foreground",children:n}),i&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Health"}),a.jsx("span",{className:"font-medium",children:e.health})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka"}),a.jsx("span",{className:"font-medium",children:e.magicka})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina"}),a.jsx("span",{className:"font-medium",children:e.stamina})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight"}),a.jsx("span",{className:"font-medium",children:e.carryWeight})]})]}),r&&t&&a.jsxs("div",{className:"space-y-2 mt-3",children:[a.jsx(on,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Health"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Magicka"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Stamina"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]}),!i&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ar,{value:e.health,maxValue:200,label:"Health",color:"red",size:"sm"}),a.jsx(ar,{value:e.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),a.jsx(ar,{value:e.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),r&&t&&a.jsxs("div",{className:"space-y-2 mt-3",children:[a.jsx(on,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Health"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Magicka"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),a.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[a.jsx("div",{className:"font-medium",children:"Stamina"}),a.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]})]})}function ou({item:e,className:t,showToggle:n=!0,isExpanded:s=!1,onToggle:r,disableHover:i=!1}){const o=e.originalRace;return a.jsxs(he,{className:t,expanded:s,onToggle:r,disableHover:i,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(In,{raceName:e.name,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(Ae,{className:"text-primary font-semibold",children:e.name}),e.category&&a.jsx(K,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:e.category})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:n&&a.jsx(fs,{itemId:(o==null?void 0:o.edid)||e.id,itemType:"race",itemName:e.name})})]})}),a.jsx(he.Summary,{children:a.jsx("div",{className:"line-clamp-2",children:a.jsx(ze,{text:e.summary||e.description,className:"text-sm text-muted-foreground line-clamp-2"})})}),a.jsxs(he.Details,{children:[a.jsx("div",{children:a.jsx(ze,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),(o==null?void 0:o.startingStats)&&a.jsx(iu,{stats:o.startingStats,regeneration:o.regeneration,title:"Starting Attributes",showRegeneration:!1,compact:!1}),(o==null?void 0:o.skillBonuses)&&o.skillBonuses.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Starting Skills"}),a.jsx("div",{className:"space-y-2",children:o.skillBonuses.map((l,c)=>a.jsxs("div",{className:"p-2 rounded bg-muted border text-sm flex items-center justify-between",children:[a.jsxs("span",{className:"font-medium",children:[l.skill," +",l.bonus]}),a.jsx(K,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},c))})]}),(o==null?void 0:o.racialSpells)&&o.racialSpells.length>0&&a.jsx(Io,{effects:o.racialSpells.map(l=>({name:l.name,description:l.description})),title:"Quirks",showDescriptions:!0})]})]})}function lC(e,t){const n=g.useMemo(()=>e.map(l=>({id:l.edid.toLowerCase().replace("race",""),name:l.name,description:l.description,category:l.category,abilities:l.racialSpells.map(c=>c.name),skills:l.skillBonuses.map(c=>c.skill),keywords:l.keywords.map(c=>c.edid),originalRace:l})),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"abilities",weight:.2},{name:"skills",weight:.1},{name:"keywords",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Kt(n,s),[n,s]),i=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredRaces:g.useMemo(()=>i.map(l=>l.item.originalRace),[i]),searchResults:i,searchableRaces:n}}function Ho({races:e,onSelect:t,placeholder:n="Search races...",className:s=""}){const[r,i]=g.useState(""),{filteredRaces:o}=lC(e,r),l=g.useMemo(()=>o.map(d=>({id:d.edid,label:d.name,description:d.description,category:d.category,icon:a.jsx(In,{raceName:d.name,size:"sm"}),badge:d.category&&a.jsx(K,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:d.category}),metadata:{originalRace:d}})),[o]),c=d=>{const f=e.find(m=>m.edid===d.id);f&&t(f)},u=(d,f)=>a.jsxs("div",{className:"flex items-center gap-3",children:[d.icon&&a.jsx("div",{className:"flex-shrink-0",children:d.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:d.label}),d.badge&&a.jsx("div",{className:"flex-shrink-0",children:d.badge})]}),d.description&&a.jsx(ze,{text:d.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return a.jsx(ru,{options:l,onSelect:c,placeholder:n,className:s,renderOption:u,emptyMessage:"No races found",searchQuery:r,onSearchQueryChange:i})}function jm({keywords:e,title:t="Keywords",className:n,maxDisplay:s,showCount:r=!0}){if(!e||e.length===0)return null;const i=s?e.slice(0,s):e,o=s&&e.length>s;return a.jsxs("div",{className:H("space-y-3",n),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[t&&a.jsx(on,{className:"text-lg font-medium text-foreground",children:t}),r&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.length," keyword",e.length!==1?"s":""]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.map((l,c)=>a.jsx(js,{keyword:l,size:"sm"},c)),o&&a.jsxs("span",{className:"text-xs text-muted-foreground px-2 py-1",children:["+",e.length-s," more"]})]})]})}function cC({item:e,originalRace:t,isExpanded:n=!1,onToggle:s,className:r,showViewAllButton:i=!1,showToggle:o=!0,viewAllButtonText:l="View All",viewAllButtonRoute:c="/race"}){const u=lt(),d=()=>{u(c)},f=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race",m=(e==null?void 0:e.description)||(t==null?void 0:t.description)||"",h=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"",p=(e==null?void 0:e.effects)||[],v=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"";return a.jsxs(i8,{isExpanded:n,onToggle:s||(()=>{}),className:r,children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(In,{raceName:f,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(Ae,{className:"text-primary font-semibold",children:f}),h&&a.jsx(ta,{category:h,size:"sm"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[p&&p.length>0&&a.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ze,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{children:[p.length," effects"]})]})}),i&&a.jsxs(q,{variant:"outline",size:"sm",onClick:d,className:"text-xs",children:[a.jsx(Sa,{className:"h-3 w-3 mr-1"}),l]}),o&&a.jsx(fs,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:f})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"line-clamp-2",children:a.jsx(be,{className:"text-sm text-muted-foreground",children:v})}),a.jsx(Io,{effects:p,maxDisplay:2,compact:!0})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{children:a.jsx(be,{className:"text-sm text-muted-foreground leading-relaxed",children:m})}),(t==null?void 0:t.startingStats)&&a.jsx(iu,{stats:t.startingStats,regeneration:t.regeneration,title:"Starting Stats"}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&a.jsx(Io,{effects:t.racialSpells.map(b=>({name:b.name,description:b.description})),title:"Racial Abilities"}),(t==null?void 0:t.keywords)&&t.keywords.length>0&&a.jsx(jm,{keywords:t.keywords.map(b=>b.edid),title:"Keywords"})]})]})}function xb({item:e,originalRace:t,className:n,onClick:s,showViewAllButton:r=!1,showToggle:i=!0,viewAllButtonText:o="View All",viewAllButtonRoute:l="/race"}){const c=lt(),u=m=>{m.stopPropagation(),c(l)},d=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race";e!=null&&e.description||t!=null&&t.description;const f=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"";return e!=null&&e.effects,e!=null&&e.summary||t!=null&&t.description,a.jsxs("div",{className:H("p-4 border rounded-lg bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",n),onClick:s,children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(In,{raceName:d,size:"2xl"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(Ae,{className:"text-primary font-semibold truncate",children:d}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f&&a.jsx(ta,{category:f,size:"sm"}),(t==null?void 0:t.startingStats)&&a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-red-500/20 text-red-700 dark:text-red-400 rounded-full text-xs font-medium whitespace-nowrap",children:[" ",t.startingStats.health]}),a.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-blue-500/20 text-blue-700 dark:text-blue-400 rounded-full text-xs font-medium whitespace-nowrap",children:[" ",t.startingStats.magicka]}),a.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-green-500/20 text-green-700 dark:text-green-400 rounded-full text-xs font-medium whitespace-nowrap",children:[" ",t.startingStats.stamina]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ze,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.racialSpells.length," effects"]})]}),i&&a.jsx("div",{onClick:m=>m.stopPropagation(),children:a.jsx(fs,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:d})})]})]}),a.jsxs("div",{className:"space-y-2",children:[(t==null?void 0:t.skillBonuses)&&t.skillBonuses.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-1 justify-items-center",children:t.skillBonuses.map((m,h)=>a.jsxs("div",{className:"px-2 py-1 bg-muted/50 text-muted-foreground rounded text-xs font-medium text-left w-full",children:[m.skill," +",m.bonus]},h))}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:t.racialSpells.map((m,h)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(Ze,{className:"h-3 w-3"}),m.name]},h))})]})]})]}),r&&a.jsxs(q,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:u,children:[a.jsx(Sa,{className:"h-4 w-4 mr-2"}),o]})]})}function fI({race:e,isOpen:t,onOpenChange:n}){return e?a.jsx(au,{open:t,onOpenChange:n,side:"right",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(In,{raceName:e.name,size:"4xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ta,{category:e.category,size:"sm"}),a.jsx(fs,{itemId:e.edid,itemType:"race",itemName:e.name})]}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description})]})]})}),a.jsxs("div",{className:"space-y-6",children:[e.startingStats&&a.jsxs("div",{children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Starting Stats"}),a.jsx(iu,{stats:e.startingStats,regeneration:e.regeneration,title:"",compact:!1})]}),e.skillBonuses&&e.skillBonuses.length>0&&a.jsxs("div",{children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Starting Skills"}),a.jsx("div",{className:"space-y-2",children:e.skillBonuses.map((s,r)=>a.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border flex items-center justify-between",children:[a.jsxs("span",{className:"font-medium",children:[s.skill," +",s.bonus]}),a.jsx(K,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},r))})]}),e.racialSpells&&e.racialSpells.length>0&&a.jsxs("div",{children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Racial Abilities"}),a.jsx(Io,{effects:e.racialSpells.map(s=>({name:s.name,description:s.description})),title:"",showDescriptions:!0})]}),e.keywords&&e.keywords.length>0&&a.jsxs("div",{children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Keywords"}),a.jsx(jm,{keywords:e.keywords.map(s=>s.edid),title:"",maxDisplay:10})]})]})]})}):null}function Nm(e){var t,n;return{...e,id:e.edid,name:e.name,description:e.description,tags:[e.category,...Array.isArray(e.flags)?e.flags:[]],summary:e.description.length>100?`${e.description.substring(0,100)}...`:e.description,effects:[...((t=e.skillBonuses)==null?void 0:t.map(s=>({type:"positive",name:s.skill,description:`+${s.bonus} to ${s.skill}`,value:s.bonus,target:s.skill})))||[],...((n=e.racialSpells)==null?void 0:n.map(s=>({type:"positive",name:s.name,description:s.description})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalRace:e}}function mI({className:e,allRaces:t}){const{build:n,setRace:s}=ht(),r=lt(),[i,o]=g.useState(!0),l=n.race?t.find(m=>m.edid===n.race):null,c=m=>{s(m.edid)},u=()=>{r("/race")},d=()=>{o(!i)};if(!l)return a.jsxs(Un,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),a.jsx(Ho,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=Nm(l);return a.jsxs(Un,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx(Ho,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),a.jsx(ou,{item:f,isExpanded:i,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}function uC(){const[e,t]=g.useState(null),[n,s]=g.useState("grid"),[r,i]=g.useState([]),o=g.useCallback(f=>{t(f)},[]),l=g.useCallback(f=>{s(f)},[]),c=g.useCallback(f=>{i(m=>m.includes(f)?m.filter(h=>h!==f):[...m,f])},[]),u=g.useCallback(()=>{i([])},[]),d=g.useCallback(f=>{i(f)},[]);return{selectedRace:e,viewMode:n,expandedSections:r,setSelectedRace:o,setViewMode:l,toggleExpandedSection:c,clearExpandedSections:u,expandAllSections:d}}function Sm({races:e}){const[t,n]=g.useState(""),[s,r]=g.useState({search:"",type:"",tags:[]}),i=g.useMemo(()=>pt.getUniqueCategories(e),[e]),o=g.useMemo(()=>pt.getUniqueTags(e),[e]),l=g.useMemo(()=>{let p=e;return t.trim()&&(p=pt.search(p,t)),s.type&&(p=pt.filterByCategory(p,s.type)),s.tags.length>0&&(p=pt.filterByTags(p,s.tags)),pt.sortByName(p)},[e,t,s]),c=g.useCallback(p=>{n(p),r(v=>({...v,search:p}))},[]),u=g.useCallback(p=>{r(p),n(p.search)},[]),d=g.useCallback(()=>{n(""),r({search:"",type:"",tags:[]})},[]),f=g.useCallback(p=>{r(v=>({...v,tags:v.tags.includes(p)?v.tags:[...v.tags,p]}))},[]),m=g.useCallback(p=>{r(v=>({...v,tags:v.tags.filter(b=>b!==p)}))},[]),h=g.useCallback(p=>{r(v=>({...v,type:p}))},[]);return{searchQuery:t,activeFilters:s,filteredRaces:l,categories:i,tags:o,setSearchQuery:c,setFilters:u,clearFilters:d,addTagFilter:f,removeTagFilter:m,setCategoryFilter:h}}function dC({races:e,selectedRaceId:t}){const n=g.useMemo(()=>e.map(u=>pt.transformToPlayerCreationItem(u)),[e]),s=g.useMemo(()=>aI.generateSearchCategories(e),[e]),r=g.useMemo(()=>t&&pt.getRaceById(e,t)||null,[e,t]),i=g.useMemo(()=>r?pt.calculateRaceStats(r):null,[r]),o=g.useMemo(()=>e.length,[e]),l=g.useMemo(()=>{const u=e.reduce((d,f)=>(d[f.category]=(d[f.category]||0)+1,d),{});return Object.entries(u).map(([d,f])=>({category:d,count:f}))},[e]),c=g.useMemo(()=>{const u=e.reduce((d,f)=>{var m;return f.keywords.forEach(h=>{d[h.edid]=(d[h.edid]||0)+1}),(m=f.flags)==null||m.forEach(h=>{d[h]=(d[h]||0)+1}),d},{});return Object.entries(u).map(([d,f])=>({tag:d,count:f})).sort((d,f)=>f.count-d.count)},[e]);return{transformedRaces:n,searchCategories:s,raceStats:i,selectedRaceDetails:r,totalRaces:o,categoriesWithCounts:l,tagsWithCounts:c}}function fC({raceId:e,allRaces:t}){const n=g.useMemo(()=>pt.getRaceById(t,e)||null,[t,e]),s=g.useMemo(()=>n?pt.getRelatedRaces(n,t):[],[n,t]),r=g.useMemo(()=>{if(!n||s.length===0)return null;const u=s[0];return{selectedRace:n,comparedRace:u,differences:{stats:{health:{selected:n.startingStats.health,compared:u.startingStats.health,difference:n.startingStats.health-u.startingStats.health},magicka:{selected:n.startingStats.magicka,compared:u.startingStats.magicka,difference:n.startingStats.magicka-u.startingStats.magicka},stamina:{selected:n.startingStats.stamina,compared:u.startingStats.stamina,difference:n.startingStats.stamina-u.startingStats.stamina},carryWeight:{selected:n.startingStats.carryWeight,compared:u.startingStats.carryWeight,difference:n.startingStats.carryWeight-u.startingStats.carryWeight}},skills:n.skillBonuses.map(d=>{const f=u.skillBonuses.find(m=>m.skill===d.skill);return{skill:d.skill,selected:d.bonus,compared:(f==null?void 0:f.bonus)||0,difference:d.bonus-((f==null?void 0:f.bonus)||0)}}),spells:{selected:n.racialSpells.map(d=>d.name),compared:u.racialSpells.map(d=>d.name),unique:n.racialSpells.filter(d=>!u.racialSpells.some(f=>f.name===d.name)).map(d=>d.name)}}}},[n,s]),i=g.useMemo(()=>s.length>0,[s]),o=g.useMemo(()=>s.length,[s]);return{race:n,relatedRaces:s,raceComparison:r,isLoading:!1,error:null,hasRelatedRaces:i,relatedRacesCount:o}}function mC({className:e}){const{races:t}=xl(),{build:n,setRace:s}=ht(),r=lt(),[i,o]=g.useState(!0),l=n.race?t.find(m=>m.edid===n.race):null,c=m=>{s(m.edid)},u=()=>{r("/build/race")},d=()=>{o(!i)};if(!l)return a.jsxs(Un,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),a.jsx(Ho,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=Nm(l);return a.jsxs(Un,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[a.jsx(Ho,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),a.jsx(ou,{item:f,isExpanded:i,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}function hC(){const{build:e}=ht(),{races:t,isLoading:n,error:s}=xl(),{viewMode:r,setViewMode:i}=uC(),{filteredRaces:o}=Sm({races:t}),c=(()=>{const S=[...new Set(t.flatMap(C=>C.keywords.map(_=>_.edid)))],k=[...new Set(t.flatMap(C=>C.skillBonuses.map(_=>_.skill)))],E=[...new Set(t.map(C=>C.category))];return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:S.map(C=>({id:`keyword-${C}`,label:C,value:C,category:"Fuzzy Search",description:`Races with ${C} keyword`}))},{id:"skill-bonuses",name:"Skill Bonuses",placeholder:"Search by skill...",options:k.map(C=>({id:`skill-${C}`,label:C,value:C,category:"Skill Bonuses",description:`Races with ${C} bonus`}))},{id:"categories",name:"Race Categories",placeholder:"Filter by category...",options:E.map(C=>({id:`category-${C}`,label:C,value:C,category:"Race Categories",description:`${C} races`}))}]})(),[u,d]=g.useState([]),f=S=>{let k;typeof S=="string"?k={id:`custom-${S}`,label:S,value:S,category:"Fuzzy Search"}:k={id:`${S.category}-${S.id}`,label:S.label,value:S.value,category:S.category},u.some(E=>E.value===k.value&&E.category===k.category)||d(E=>[...E,k])},m=S=>{d(k=>k.filter(E=>E.id!==S))},h=o.filter(S=>u.length===0?!0:u.every(k=>{switch(k.category){case"Fuzzy Search":return!0;case"Race Categories":return S.category===k.value;case"Skill Bonuses":return S.skillBonuses.some(E=>E.skill===k.value);case"Keywords":return S.keywords.some(E=>E.edid===k.value);default:return!0}})),p=u.filter(S=>S.category==="Fuzzy Search").map(S=>S.value).join(" "),{filteredRaces:v}=lC(h,p),b=v.map(S=>({...Nm(S),originalRace:S})),[x,y]=g.useState(null),[w,j]=g.useState(!1),N=S=>{y(S),j(!0)};return n?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading races..."})]})}):s?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:s}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsxs(cn,{title:"Races",description:"Choose your character's race. Each race has unique abilities, starting attributes, and racial traits that will shape your journey through Tamriel.",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(ka,{categories:c,onSelect:f,onCustomSearch:f})}),a.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[a.jsx(q,{variant:r==="list"?"default":"ghost",size:"sm",onClick:()=>i("list"),className:"h-8 px-3",title:"List view",children:a.jsx(pi,{className:"h-4 w-4"})}),a.jsx(q,{variant:r==="grid"?"default":"ghost",size:"sm",onClick:()=>i("grid"),className:"h-8 px-3",title:"Grid view",children:a.jsx(ol,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"my-4",children:u.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>d([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Dt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),u.map(S=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(S.id),title:"Click to remove",children:[S.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},S.id))]})}),r==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full",children:b.map(S=>{var E;const k=e.race===((E=S.originalRace)==null?void 0:E.edid);return a.jsx(xb,{item:S,originalRace:S.originalRace,onClick:()=>N(S.originalRace),className:H(k&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}):a.jsx("div",{className:"flex flex-col gap-4 w-full",children:b.map(S=>{var E;const k=e.race===((E=S.originalRace)==null?void 0:E.edid);return a.jsx(xb,{item:S,originalRace:S.originalRace,onClick:()=>N(S.originalRace),className:H(k&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}),b.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No races found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),a.jsx(fI,{race:x,isOpen:w,onOpenChange:j})]})}function hI({initialFilters:e,onFiltersChange:t,onSearch:n,onTagSelect:s,onTagRemove:r}={}){const[i,o]=g.useState(e||{search:"",selectedFilters:{},selectedTags:[]});return g.useEffect(()=>{e&&o(e)},[e]),{filters:i,handleSearch:f=>{const m={...i,search:f};o(m),n==null||n(f)},handleTagSelect:f=>{const m={id:`${f.category}-${f.id}`,label:f.label,value:f.value,category:f.category};if(!i.selectedTags.some(p=>p.id===m.id)){const p={...i,selectedTags:[...i.selectedTags,m]};o(p),s==null||s(m),t==null||t(p)}},handleTagRemove:f=>{const m={...i,selectedTags:i.selectedTags.filter(h=>h.id!==f)};o(m),r==null||r(f),t==null||t(m)},updateFilters:f=>{o(f),t==null||t(f)}}}function gI({className:e}){const{races:t,isLoading:n,error:s,categories:r,tags:i}=xl(),{searchQuery:o,setSearchQuery:l,filteredRaces:c}=Sm({races:t}),u=$.useMemo(()=>c.map(w=>Nm(w)),[c]),d=$.useMemo(()=>[{id:"categories",name:"Categories",placeholder:"Search by category...",options:(r||[]).map(w=>({id:w,label:w,value:w,category:"categories",description:`Race category: ${w}`}))},{id:"tags",name:"Tags",placeholder:"Search by tags...",options:(i||[]).map(w=>({id:w,label:w,value:w,category:"tags",description:`Race tag: ${w}`}))}],[r,i]),{filters:f,handleSearch:m,handleTagSelect:h,handleTagRemove:p}=hI({onSearch:l,onFiltersChange:w=>{}});$.useEffect(()=>{o!==f.search&&m(o)},[o,m,f.search]);const[v,b]=$.useState(null),x=w=>{const j=t.find(N=>N.edid===w.id);return j?a.jsx(cC,{item:w,originalRace:j,isExpanded:!1,showToggle:!0,className:"h-full"},j.edid):null},y=w=>{const j=t.find(N=>N.edid===w.id);return j?a.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:j.name}),a.jsx("p",{className:"text-muted-foreground mb-4",children:j.description}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Category:"})," ",j.category]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Health:"})," ",j.startingStats.health]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Magicka:"})," ",j.startingStats.magicka]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Stamina:"})," ",j.startingStats.stamina]})]})]}):null};return n?a.jsx("div",{className:H("container mx-auto p-6",e),children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((w,j)=>a.jsx("div",{className:"h-64 bg-gray-200 rounded"},j))})]})}):s?a.jsx("div",{className:H("container mx-auto p-6",e),children:a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[a.jsx("strong",{children:"Error:"})," ",s]})}):a.jsxs("div",{className:H("container mx-auto p-6",e),children:[a.jsx(X6,{searchCategories:d,selectedTags:f.selectedTags,viewMode:"grid",onTagSelect:h,onTagRemove:p,className:"mb-6"}),a.jsxs(q6,{children:[a.jsx(Z6,{children:a.jsx(F6,{items:u,viewMode:"grid",onItemSelect:b,selectedItem:v,renderItemCard:x})}),a.jsx(G6,{children:v?y(v):a.jsx(Y6,{title:"Select a Race",description:"Choose a race from the list to view its details"})})]})]})}function pI({className:e,selectedRace:t,onRaceSelect:n,onRaceClear:s,showSearch:r=!0,showComparison:i=!1,maxDisplayRaces:o=3}){const{races:l,isLoading:c,error:u}=xl(),{filteredRaces:d}=Sm({races:l});dC({races:l,selectedRaceId:(t==null?void 0:t.edid)||null});const[f,m]=$.useState(!1);return c?a.jsx("div",{className:H("p-4 border rounded-lg",e),children:a.jsxs("div",{className:"animate-pulse space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),a.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})}):u?a.jsx("div",{className:H("p-4 border rounded-lg",e),children:a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-3 py-2 rounded text-sm",children:[a.jsx("strong",{children:"Error:"})," ",u]})}):a.jsxs("div",{className:H("border rounded-lg overflow-hidden",e),children:[a.jsxs("div",{className:"p-4 bg-muted/50 border-b",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Ae,{className:"text-lg font-semibold",children:"Race Selection"}),t&&a.jsx(q,{variant:"ghost",size:"sm",onClick:s,className:"text-muted-foreground hover:text-foreground",children:a.jsx(Dt,{className:"h-4 w-4"})})]}),t&&a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx(K,{variant:"secondary",children:t.category}),a.jsxs(be,{className:"text-sm text-muted-foreground",children:[t.startingStats.health," HP, ",t.startingStats.magicka," MP, ",t.startingStats.stamina," SP"]})]})]}),a.jsx("div",{className:"p-4",children:t?a.jsxs("div",{className:"space-y-4",children:[a.jsx(ou,{item:{id:t.edid,name:t.name,description:t.description,summary:t.description,category:t.category,effects:[],tags:[],originalRace:t},isExpanded:!0,showToggle:!1,className:"border-0 shadow-none"}),i&&a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx(be,{className:"text-sm font-medium mb-2",children:"Compare with:"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.filter(h=>h.edid!==t.edid).slice(0,4).map(h=>a.jsx(q,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(h),className:"justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-xs",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))})]})]}):a.jsxs("div",{className:"space-y-4",children:[r&&a.jsxs("div",{children:[a.jsx(be,{className:"text-sm font-medium mb-2",children:"Search for a race:"}),a.jsx(Ho,{races:d,onSelect:n,placeholder:"Type to search races...",className:"w-full"})]}),a.jsxs("div",{children:[a.jsx(be,{className:"text-sm font-medium mb-2",children:"Quick select:"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.slice(0,o).map(h=>a.jsx(q,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(h),className:"justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-xs",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))}),l.length>o&&a.jsxs(q,{variant:"ghost",size:"sm",onClick:()=>m(!f),className:"mt-2 w-full",children:[a.jsx(_n,{className:H("h-4 w-4 transition-transform",f&&"rotate-180")}),"Show ",l.length-o," more races"]})]}),f&&a.jsx("div",{className:"space-y-2",children:l.slice(o).map(h=>a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>n==null?void 0:n(h),className:"w-full justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-xs",children:h.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))})]})})]})}function xI({raceId:e,className:t}){const n=lt(),{race:s,relatedRaces:r}=fC(e);return xl(),s?a.jsxs("div",{className:H("container mx-auto p-6",t),children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs(q,{variant:"ghost",onClick:()=>n("/races"),className:"mb-4",children:[a.jsx(Eg,{className:"h-4 w-4 mr-2"}),"Back to Races"]}),a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx(In,{raceName:s.name,size:"xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Ni,{className:"text-3xl font-bold",children:s.name}),a.jsx(ta,{category:s.category,size:"lg"})]}),a.jsx(be,{className:"text-lg text-muted-foreground mb-4",children:s.description}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(PN,{className:"h-4 w-4"}),a.jsx("span",{children:"Playable Race"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ze,{className:"h-4 w-4"}),a.jsxs("span",{children:[s.keywords.length," Keywords"]})]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(ea,{className:"text-xl font-semibold mb-4",children:"Statistics"}),a.jsx(iu,{stats:s.startingStats,regeneration:s.regeneration,title:"Starting Stats",compact:!1,showRegeneration:!0})]}),s.racialSpells.length>0&&a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(ea,{className:"text-xl font-semibold mb-4",children:"Racial Abilities"}),a.jsx(Io,{effects:s.racialSpells.map(i=>({name:i.name,description:i.description})),title:"Racial Spells",showDescriptions:!0,compact:!1})]}),s.keywords.length>0&&a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(ea,{className:"text-xl font-semibold mb-4",children:"Keywords"}),a.jsx(jm,{keywords:s.keywords.map(i=>i.edid),title:"Race Keywords",showCount:!0})]}),a.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[a.jsx(ea,{className:"text-xl font-semibold mb-4",children:"Additional Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Ae,{className:"text-lg font-medium mb-2",children:"Description"}),a.jsx(be,{className:"text-muted-foreground",children:s.description})]}),s.racialSpells.length>0&&a.jsxs("div",{children:[a.jsx(Ae,{className:"text-lg font-medium mb-2",children:"Racial Spells"}),a.jsx("div",{className:"space-y-2",children:s.racialSpells.map((i,o)=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded",children:[a.jsx("div",{className:"font-medium",children:i.name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:i.description})]},o))})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(q,{className:"w-full",size:"sm",children:"Add to Character Build"}),a.jsx(q,{variant:"outline",className:"w-full",size:"sm",children:"Compare with Other Races"}),a.jsxs(q,{variant:"outline",className:"w-full",size:"sm",children:[a.jsx(Sa,{className:"h-4 w-4 mr-2"}),"View in Wiki"]})]})]}),a.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Race Summary"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Category:"}),a.jsx(K,{variant:"secondary",children:s.category})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Health:"}),a.jsx("span",{className:"font-medium",children:s.startingStats.health})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka:"}),a.jsx("span",{className:"font-medium",children:s.startingStats.magicka})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina:"}),a.jsx("span",{className:"font-medium",children:s.startingStats.stamina})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight:"}),a.jsx("span",{className:"font-medium",children:s.startingStats.carryWeight})]})]})]}),r.length>0&&a.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Related Races"}),a.jsx("div",{className:"space-y-2",children:r.slice(0,3).map(i=>a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>n(`/races/${i.edid}`),className:"w-full justify-start text-left h-auto p-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(In,{raceName:i.name,size:"sm"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm",children:i.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:i.category})]})]})},i.edid))})]})]})]})]}):a.jsxs("div",{className:H("container mx-auto p-6",t),children:[a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[a.jsx("strong",{children:"Error:"})," ","Race not found"]}),a.jsxs(q,{variant:"outline",onClick:()=>n("/races"),className:"mt-4",children:[a.jsx(Eg,{className:"h-4 w-4 mr-2"}),"Back to Races"]})]})}function vI(){const{races:e,isLoading:t,error:n,categories:s,tags:r}=xl(),{selectedRace:i,setSelectedRace:o,viewMode:l,setViewMode:c,expandedSections:u}=uC(),{searchQuery:d,setSearchQuery:f,activeFilters:m,clearFilters:h,filteredRaces:p}=Sm({races:e}),{transformedRaces:v,searchCategories:b,categoriesWithCounts:x}=dC({races:e,selectedRaceId:i}),{race:y,relatedRaces:w,raceComparison:j}=fC({raceId:i||"",allRaces:e}),[N,S]=$.useState(!1),[k,E]=$.useState("overview");if(t)return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Loading..."}),a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]});if(n)return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Error"}),a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[a.jsx("strong",{children:"Error:"})," ",n]})]});const C=e[0];return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Races MVA Demo - Model View Adapter Architecture"}),a.jsxs(Si,{value:k,onValueChange:E,className:"mb-6",children:[a.jsxs(ki,{children:[a.jsx(Vt,{value:"overview",children:"Overview"}),a.jsx(Vt,{value:"adapters",children:"Adapters"}),a.jsx(Vt,{value:"components",children:"Components"}),a.jsx(Vt,{value:"views",children:"Views"})]}),a.jsx(Wt,{value:"overview",className:"space-y-6",children:a.jsxs(xe,{children:[a.jsxs(Te,{children:[a.jsx(Le,{children:"MVA Architecture Overview"}),a.jsx(Cs,{children:"This demo showcases the Model-View-Adapter pattern implementation for the Races feature."})]}),a.jsx(ve,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Model Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Data management and business logic"}),a.jsx(K,{variant:"outline",className:"mt-2",children:"RaceModel"})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Adapter Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"State management and data transformation"}),a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.jsx(K,{variant:"outline",children:"useRaceData"}),a.jsx(K,{variant:"outline",children:"useRaceState"}),a.jsx(K,{variant:"outline",children:"useRaceFilters"})]})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"View Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"UI components and presentation"}),a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.jsx(K,{variant:"outline",children:"RaceCard"}),a.jsx(K,{variant:"outline",children:"RacePageView"})]})]})]})})]})}),a.jsx(Wt,{value:"adapters",className:"space-y-6",children:a.jsxs(xe,{children:[a.jsxs(Te,{children:[a.jsx(Le,{children:"Adapter State Demo"}),a.jsx(Cs,{children:"Interactive demonstration of adapter state management"})]}),a.jsx(ve,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"State Management (useRaceState)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Selected Race:"}),a.jsx(K,{variant:i?"default":"secondary",children:i||"None"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"View Mode:"}),a.jsxs("div",{className:"flex border rounded",children:[a.jsx(q,{variant:l==="grid"?"default":"ghost",size:"sm",onClick:()=>c("grid"),children:"Grid"}),a.jsx(q,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),children:"List"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Expanded Sections:"}),a.jsx(K,{variant:"outline",children:u.length})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Filters (useRaceFilters)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Search Query:"}),a.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),className:"px-2 py-1 border rounded text-sm",placeholder:"Search races..."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Active Filters:"}),a.jsx(K,{variant:"outline",children:m.tags.length+(m.type?1:0)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Filtered Results:"}),a.jsxs(K,{variant:"outline",children:[p.length," of ",e.length]})]}),a.jsx(q,{size:"sm",onClick:h,children:"Clear Filters"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Computed Data (useRaceComputed)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Transformed Races:"}),a.jsx(K,{variant:"outline",children:v.length})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Search Categories:"}),a.jsx(K,{variant:"outline",children:b.length})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Categories with Counts:"}),a.jsx(K,{variant:"outline",children:Object.keys(x).length})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Detail View (useRaceDetail)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Selected Race Details:"}),a.jsx(K,{variant:y?"default":"secondary",children:(y==null?void 0:y.name)||"None"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Related Races:"}),a.jsx(K,{variant:"outline",children:w.length})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"Comparison Available:"}),a.jsx(K,{variant:j?"default":"secondary",children:j?"Yes":"No"})]})]})]})]})})]})}),a.jsxs(Wt,{value:"components",className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Atomic & Composition Components"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Data Summary"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Total Races:"})," ",e.length]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Categories:"})," ",s.join(", ")]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Total Tags:"})," ",r.length]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Sample Race: ",C==null?void 0:C.name]}),C&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-gray-600 text-sm",children:C.description}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Category:"})," ",C.category]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Keywords:"})," ",C.keywords.length]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAvatar Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),a.jsx(In,{raceName:(C==null?void 0:C.name)||"Nord",size:"sm"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),a.jsx(In,{raceName:(C==null?void 0:C.name)||"Nord",size:"lg"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),a.jsx(In,{raceName:(C==null?void 0:C.name)||"Nord",size:"2xl"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Extra Large"}),a.jsx(In,{raceName:(C==null?void 0:C.name)||"Nord",size:"xl"})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Uses generic EntityAvatar with race-specific configuration"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CategoryBadge Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),a.jsx(ta,{category:"Human",size:"sm"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),a.jsx(ta,{category:"Elf",size:"md"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),a.jsx(ta,{category:"Beast",size:"lg"})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Uses generic CategoryBadge with race-specific styling"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"KeywordTag Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Auto-detected types:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(js,{keyword:"destruction"}),a.jsx(js,{keyword:"waterbreathing"}),a.jsx(js,{keyword:"strong stomach"}),a.jsx(js,{keyword:"custom_flag"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Explicit types:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(js,{keyword:"alteration",type:"skill"}),a.jsx(js,{keyword:"night eye",type:"ability"}),a.jsx(js,{keyword:"beast race",type:"trait"}),a.jsx(js,{keyword:"magic",type:"flag"})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Auto-detects keyword types or accepts explicit type prop"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"StatBar Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(ar,{value:C.startingStats.health,maxValue:200,label:"Health",color:"red",size:"md"}),a.jsx(ar,{value:C.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"md"}),a.jsx(ar,{value:C.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"md"})]}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Progress bars with configurable colors, sizes, and labels"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceStatsDisplay Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&a.jsx(iu,{stats:C.startingStats,regeneration:C.regeneration,title:"Sample Stats",compact:!0}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Composition component that displays race statistics"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceEffectsDisplay Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&C.racialSpells.length>0&&a.jsx(Io,{effects:C.racialSpells.map(_=>({name:_.name,description:_.description})),title:"Racial Abilities",maxDisplay:3}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Composition component for displaying race effects/abilities"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceKeywordsDisplay Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&C.keywords.length>0&&a.jsx(jm,{keywords:C.keywords.map(_=>_.edid),title:"Race Keywords",maxDisplay:6}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Composition component that uses KeywordTag atomic components"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceCard Composition Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&a.jsx(cC,{originalRace:C,isExpanded:!0,showToggle:!1,className:"max-w-2xl"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Main composition component that orchestrates all atomic components"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAutocomplete Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ho,{races:e.slice(0,5),onSelect:_=>console.log("Selected:",_.name),placeholder:"Search for a race...",className:"w-full"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Search and selection component for races"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAccordion Component"}),a.jsxs("div",{className:"space-y-4",children:[C&&a.jsx(ou,{item:{id:C.edid,name:C.name,description:C.description,summary:C.description,category:C.category,effects:[],tags:[],originalRace:C},isExpanded:N,onToggle:()=>S(!N),showToggle:!0,className:"border-0 shadow-none"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Accordion-style race display for player creation (click to expand/collapse)"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceSelectionCard Component"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(mI,{allRaces:e.slice(0,5),className:"max-w-2xl"}),a.jsx("div",{className:"text-xs text-gray-500",children:a.jsx("p",{children:"Complete race selection interface for player creation"})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sample Races with All Components"}),a.jsx("div",{className:"space-y-4",children:e.slice(0,2).map(_=>a.jsxs("div",{className:"border rounded p-4",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[a.jsx(In,{raceName:_.name,size:"2xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:_.name}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx(ta,{category:_.category,size:"sm"})})]})]}),a.jsx("p",{className:"text-sm mb-3",children:_.description}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[a.jsx(ar,{value:_.startingStats.health,maxValue:200,label:"Health",color:"red",size:"sm"}),a.jsx(ar,{value:_.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),a.jsx(ar,{value:_.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.keywords.slice(0,5).map((P,D)=>a.jsx(js,{keyword:P.edid},D)),_.keywords.length>5&&a.jsxs("span",{className:"text-xs text-gray-500",children:["+",_.keywords.length-5," more"]})]})]},_.edid))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"View Components Demo"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceQuickSelectorView"}),a.jsx(pI,{selectedRace:i?e.find(_=>_.edid===i):void 0,onRaceSelect:_=>o(_.edid),onRaceClear:()=>o(null),showSearch:!0,showComparison:!0,maxDisplayRaces:3,className:"max-w-md"}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:a.jsx("p",{children:"Compact selection interface for embedded contexts"})})]}),i&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceDetailView"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx(xI,{raceId:i,className:"p-4"})}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:a.jsx("p",{children:"Detailed race view with rich information display"})})]})]})]})]})]}),a.jsxs(Wt,{value:"views",className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"View Components"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(Te,{children:[a.jsx(Le,{children:"RacePageView"}),a.jsx(Cs,{children:"Main page view with full functionality"})]}),a.jsx(ve,{children:a.jsx(hC,{className:"border rounded-lg p-4"})})]}),a.jsxs(xe,{children:[a.jsxs(Te,{children:[a.jsx(Le,{children:"RaceReferenceView"}),a.jsx(Cs,{children:"Browse/search interface"})]}),a.jsx(ve,{children:a.jsx(gI,{className:"border rounded-lg p-4"})})]})]})]})]})]})}function yI(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u,d,f,m,h,p,v,b;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:((c=l.tenet)==null?void 0:c.description)||"",type:l.type,favoredRaces:rs()?l.favoredRaces||[]:[],tenetEffects:((d=(u=l.tenet)==null?void 0:u.effects)==null?void 0:d.map(x=>`${x.effectName} ${x.effectDescription}`))||[],blessingEffects:((m=(f=l.blessing)==null?void 0:f.effects)==null?void 0:m.map(x=>`${x.effectName} ${x.effectDescription}`))||[],followerPowers:((p=(h=l.boon1)==null?void 0:h.effects)==null?void 0:p.map(x=>`${x.effectName} ${x.effectDescription}`))||[],devoteePowers:((b=(v=l.boon2)==null?void 0:v.effects)==null?void 0:b.map(x=>`${x.effectName} ${x.effectDescription}`))||[],originalReligion:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"tenetEffects",weight:.2},{name:"blessingEffects",weight:.2},{name:"followerPowers",weight:.15},{name:"devoteePowers",weight:.15},...rs()?[{name:"favoredRaces",weight:.1}]:[],{name:"type",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Kt(n,s),[n,s]),i=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredReligions:g.useMemo(()=>i.map(l=>l.item.originalReligion),[i]),searchResults:i,searchableReligions:n}}function bI(e){var t,n,s,r;return{id:e.name.toLowerCase().replace(/\s+/g,"-"),name:e.name,type:e.type,description:((t=e.tenet)==null?void 0:t.description)||"",tenetDescription:((n=e.tenet)==null?void 0:n.description)||"",followerPower:((s=e.boon1)==null?void 0:s.spellName)||"",devoteePower:((r=e.boon2)==null?void 0:r.spellName)||"",favoredRaces:e.favoredRaces||[],worshipRestrictions:e.worshipRestrictions||[],originalReligion:e}}function wI(e){return e.map(bI)}function jI(e,t){return e.find(n=>n.name.toLowerCase().replace(/\s+/g,"-")===t)}const NI={};function wc({religionName:e,size:t="2xl",className:n}){const s=NI[e],r=s?fn(`assets/religion-avatar/${s}`):void 0;return a.jsx(mm,{imgSrc:r,alt:e,size:t,className:n})}function SI(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function kI({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=e.replace(/<mag>/g,t.toString()).replace(/<magnitude>/g,t.toString()).replace(/<dur>/g,n.toString()).replace(/<duration>/g,n.toString()).replace(/<area>/g,s.toString());return r=r.replace(/\b(magnitude|mag)\b/gi,t.toString()).replace(/\b(duration|dur)\b/gi,n.toString()).replace(/\b(area)\b/gi,s.toString()),a.jsx(ze,{text:r,className:"text-sm text-muted-foreground"})}function CI({religion:e,className:t,onClick:n,showToggle:s=!0}){var o;const r=e.blessing,i=((o=r==null?void 0:r.effects)==null?void 0:o.length)||0;return!r||i===0?null:a.jsxs("div",{className:H("p-4 border rounded-2xl bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",t),onClick:n,children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(wc,{religionName:e.name,size:"2xl"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs(Ae,{className:"text-lg font-semibold text-primary truncate",children:["Blessing of ",e.name]}),a.jsxs(be,{className:"text-sm text-muted-foreground mt-1",children:[i," effect",i!==1?"s":""]})]}),s&&a.jsx("div",{onClick:l=>l.stopPropagation(),children:a.jsx(fs,{itemId:`blessing-${e.name}`,itemType:"religion",itemName:`Blessing of ${e.name}`})})]}),a.jsx("div",{className:"space-y-2",children:r.effects.filter(l=>l.effectType!=="1"&&l.effectType!=="3").slice(0,2).map((l,c)=>a.jsx("div",{className:"flex items-start gap-2 p-2 bg-muted/30 rounded-lg",children:a.jsxs("div",{className:"flex-1",children:[a.jsx(be,{className:"font-medium text-sm mb-1",children:l.effectName}),a.jsx(kI,{description:l.effectDescription,magnitude:l.magnitude,duration:l.duration,area:l.area}),(l.duration>0||l.area>0)&&a.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[l.duration>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Za,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",SI(l.duration)]})]}),l.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",l.area]})]})]})]})},c))}),i>2&&a.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:a.jsxs(be,{className:"text-xs text-muted-foreground",children:["+",i-2," more effect",i-2!==1?"s":""]})})]})}const EI={Restoration:a.jsx(Os,{className:"h-4 w-4 text-green-500"}),Destruction:a.jsx(il,{className:"h-4 w-4 text-red-500"}),Alteration:a.jsx(at,{className:"h-4 w-4 text-blue-500"}),Illusion:a.jsx(_o,{className:"h-4 w-4 text-purple-500"}),Conjuration:a.jsx(An,{className:"h-4 w-4 text-purple-500"}),Enchanting:a.jsx(Na,{className:"h-4 w-4 text-blue-500"}),Alchemy:a.jsx(Cx,{className:"h-4 w-4 text-green-500"}),"Light Armor":a.jsx(at,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":a.jsx(at,{className:"h-4 w-4 text-gray-500"}),"One-Handed":a.jsx(ti,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":a.jsx(ti,{className:"h-4 w-4 text-red-500"}),Archery:a.jsx(ss,{className:"h-4 w-4 text-green-500"}),Block:a.jsx(at,{className:"h-4 w-4 text-yellow-500"}),Smithing:a.jsx(at,{className:"h-4 w-4 text-gray-500"}),Speechcraft:a.jsx(_o,{className:"h-4 w-4 text-blue-500"}),Sneak:a.jsx(al,{className:"h-4 w-4 text-purple-500"}),Lockpicking:a.jsx(To,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:a.jsx(To,{className:"h-4 w-4 text-purple-500"})};function _I(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function AI({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=e.replace(/<mag>/g,t.toString()).replace(/<magnitude>/g,t.toString()).replace(/<dur>/g,n.toString()).replace(/<duration>/g,n.toString()).replace(/<area>/g,s.toString());return r=r.replace(/\b(magnitude|mag)\b/gi,t.toString()).replace(/\b(duration|dur)\b/gi,n.toString()).replace(/\b(area)\b/gi,s.toString()),a.jsx(ze,{text:r,className:"text-sm text-muted-foreground"})}function TI(e){return EI[e]||a.jsx(Ze,{className:"h-4 w-4 text-gray-500"})}function MI({religion:e,isOpen:t,onOpenChange:n}){var i,o;if(!e)return null;const s=e.blessing,r=((i=s==null?void 0:s.effects)==null?void 0:i.length)||0;return!s||r===0?null:a.jsx(au,{isOpen:t,onOpenChange:n,title:`Blessing of ${e.name}`,description:"Divine blessing granted to worshippers",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(wc,{religionName:e.name,size:"lg"}),a.jsxs("div",{children:[a.jsxs(Ae,{className:"text-xl font-semibold",children:["Blessing of ",e.name]}),a.jsxs(be,{className:"text-sm text-muted-foreground",children:[r," effect",r!==1?"s":""]})]})]}),a.jsx(fs,{itemId:`blessing-${e.name}`,itemType:"religion",itemName:`Blessing of ${e.name}`})]}),a.jsxs("div",{children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Blessing Effects"}),a.jsx("div",{className:"space-y-3",children:s.effects.filter(l=>l.effectType!=="1"&&l.effectType!=="3").map((l,c)=>a.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wc,{religionName:e.name,size:"sm"}),l.effectType&&TI(l.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(be,{className:"font-medium text-sm mb-2",children:l.effectName}),a.jsx(AI,{description:l.effectDescription,magnitude:l.magnitude,duration:l.duration,area:l.area}),l.duration>0&&a.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[a.jsx(Za,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",_I(l.duration)]})]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:l.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",l.area]})]})})]})]})},c))})]}),a.jsxs("div",{className:"pt-4 border-t border-border",children:[a.jsxs(Ae,{className:"text-lg font-semibold mb-3",children:["About ",e.name]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(be,{className:"text-sm font-medium mb-1",children:"Religion Type"}),a.jsx(be,{className:"text-sm text-muted-foreground",children:e.type})]}),((o=e.tenet)==null?void 0:o.description)&&a.jsxs("div",{children:[a.jsx(be,{className:"text-sm font-medium mb-1",children:"Tenets"}),a.jsx(be,{className:"text-sm text-muted-foreground",children:e.tenet.description})]}),e.favoredRaces&&e.favoredRaces.length>0&&a.jsxs("div",{children:[a.jsx(be,{className:"text-sm font-medium mb-1",children:"Favored Races"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.favoredRaces.map((l,c)=>a.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-md",children:l},c))})]})]})]})]})})}function gC({category:e,size:t="md",className:n}){return a.jsx(ok,{category:e,categoryType:"religion",size:t,className:n})}function pC({item:e,originalReligion:t,className:n,onClick:s,showViewAllButton:r=!1,showToggle:i=!0,viewAllButtonText:o="View All",viewAllButtonRoute:l="/religions",onOpenDetails:c}){var x,y,w,j,N,S,k,E,C,_,P,D,z,A,O,T;const u=lt(),d=L=>{L.stopPropagation(),u(l)},f=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Religion",m=(e==null?void 0:e.description)||((x=t==null?void 0:t.tenet)==null?void 0:x.description)||"",h=(e==null?void 0:e.category)||(t==null?void 0:t.type)||"";e!=null&&e.effects,e!=null&&e.summary||(y=t==null?void 0:t.tenet)!=null&&y.description;const p=(((j=(w=t==null?void 0:t.blessing)==null?void 0:w.effects)==null?void 0:j.length)||0)+(((S=(N=t==null?void 0:t.tenet)==null?void 0:N.effects)==null?void 0:S.length)||0)+(((E=(k=t==null?void 0:t.boon1)==null?void 0:k.effects)==null?void 0:E.length)||0)+(((_=(C=t==null?void 0:t.boon2)==null?void 0:C.effects)==null?void 0:_.length)||0),v=((z=(D=(P=t==null?void 0:t.blessing)==null?void 0:P.effects)==null?void 0:D[0])==null?void 0:z.effectName)||"Blessing",b=(T=(O=(A=t==null?void 0:t.tenet)==null?void 0:A.effects)==null?void 0:O[0])!=null&&T.effectDescription?t.tenet.effects[0].effectDescription.split(".").filter(L=>L.trim().length>0).slice(0,4).map(L=>({id:L.trim(),title:L.trim(),short:L.trim(),full:L.trim()})):[];return a.jsxs("div",{className:H("p-4 border rounded-2xl bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",n),onClick:L=>{if(console.log("ReligionCard clicked, onOpenDetails:",!!c),s&&s(),c){const M=(t==null?void 0:t.name)||(e==null?void 0:e.id)||"";console.log("Calling onOpenDetails with id:",M),c(M)}},children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(wc,{religionName:f,size:"2xl"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(Ae,{className:"text-lg font-semibold text-primary truncate",children:f}),h&&a.jsx(gC,{category:h,size:"sm",className:"mt-1"})]}),i&&a.jsx("div",{onClick:L=>L.stopPropagation(),children:a.jsx(fs,{itemId:(t==null?void 0:t.name)||(e==null?void 0:e.id)||"",itemType:"religion",itemName:f})})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[p>0&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded-full text-xs",children:[a.jsx(Ze,{className:"h-3 w-3 text-yellow-500"}),a.jsxs("span",{className:"font-medium",children:[p," effects"]})]}),(t==null?void 0:t.favoredRaces)&&t.favoredRaces.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[t.favoredRaces.slice(0,2).map((L,M)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[a.jsx(Ze,{className:"h-3 w-3"}),L]},M)),t.favoredRaces.length>2&&a.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded-full text-xs font-medium",children:["+",t.favoredRaces.length-2]})]})]}),m&&a.jsx("div",{className:"mb-3",children:a.jsx("div",{className:"text-sm text-muted-foreground leading-relaxed",children:m})}),a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/30 rounded-lg",children:[a.jsx(Os,{className:"h-4 w-4 text-red-500"}),a.jsx("span",{className:"text-sm font-medium",children:v})]})}),b.length>0&&a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"space-y-1",children:[b.slice(0,4).map((L,M)=>a.jsxs("div",{className:"flex items-start gap-2 p-2 bg-muted/30 rounded-lg text-xs",children:[a.jsx(at,{className:"h-3 w-3 text-blue-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-muted-foreground leading-relaxed",children:L.title})]},M)),b.length>4&&a.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded-full text-xs font-medium text-center",children:["+",b.length-4," more tenets"]})]})}),r&&a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(q,{variant:"outline",size:"sm",onClick:d,children:a.jsx(Sa,{className:"h-4 w-4"})})})]})}const RI={Restoration:a.jsx(Os,{className:"h-4 w-4 text-green-500"}),Destruction:a.jsx(il,{className:"h-4 w-4 text-red-500"}),Alteration:a.jsx(at,{className:"h-4 w-4 text-blue-500"}),Illusion:a.jsx(_o,{className:"h-4 w-4 text-purple-500"}),Conjuration:a.jsx(An,{className:"h-4 w-4 text-purple-500"}),Enchanting:a.jsx(Na,{className:"h-4 w-4 text-blue-500"}),Alchemy:a.jsx(Cx,{className:"h-4 w-4 text-green-500"}),"Light Armor":a.jsx(at,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":a.jsx(at,{className:"h-4 w-4 text-gray-500"}),"One-Handed":a.jsx(ti,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":a.jsx(ti,{className:"h-4 w-4 text-red-500"}),Archery:a.jsx(ss,{className:"h-4 w-4 text-green-500"}),Block:a.jsx(at,{className:"h-4 w-4 text-yellow-500"}),Smithing:a.jsx(at,{className:"h-4 w-4 text-gray-500"}),Speechcraft:a.jsx(_o,{className:"h-4 w-4 text-blue-500"}),Sneak:a.jsx(al,{className:"h-4 w-4 text-purple-500"}),Lockpicking:a.jsx(To,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:a.jsx(To,{className:"h-4 w-4 text-purple-500"})};function vh(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function yh({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=e.replace(/<[^>]*>/g,"");r=r.replace(/<mag>/g,t.toString()),r=r.replace(/<magnitude>/g,t.toString()),r=r.replace(/<dur>/g,n.toString()),r=r.replace(/<duration>/g,n.toString()),s>0&&(r=r.replace(/<area>/g,s.toString())),r=r.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const i=r.split(/(<[^>]+>)/g);return a.jsx(be,{className:"text-sm text-muted-foreground",children:i.map((o,l)=>{if(o.startsWith("<")&&o.endsWith(">")){const c=o.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:c},l)}return o})})}function xC({religion:e,isOpen:t,onOpenChange:n}){var r,i;if(!e)return null;const s=o=>RI[o]||a.jsx(Ze,{className:"h-4 w-4 text-skyrim-gold"});return a.jsx(au,{open:t,onOpenChange:n,side:"right",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(wc,{religionName:e.name,size:"4xl"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.type&&a.jsx(gC,{category:e.type,size:"sm"}),a.jsx(fs,{itemId:e.name,itemType:"religion",itemName:e.name})]}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:((r=e.tenet)==null?void 0:r.description)||"A divine faith with unique blessings and tenets."})]})]})}),a.jsxs("div",{className:"space-y-6",children:[e.favoredRaces&&e.favoredRaces.length>0&&a.jsxs("div",{children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Favored Races"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.favoredRaces.map((o,l)=>a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg border border-border",children:[a.jsx(Ze,{className:"h-4 w-4 text-skyrim-gold"}),a.jsx("span",{className:"text-sm font-medium",children:o})]},l))})]}),e.worshipRestrictions&&e.worshipRestrictions.length>0&&a.jsxs("div",{children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Worship Restrictions"}),a.jsx("div",{className:"space-y-2",children:e.worshipRestrictions.map((o,l)=>a.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Dt,{className:"h-4 w-4 text-red-500 mt-0.5"}),a.jsx(be,{className:"text-sm text-muted-foreground",children:o})]})},l))})]}),e.blessing&&e.blessing.effects.length>0&&a.jsxs("div",{children:[a.jsxs(Ae,{className:"text-lg font-semibold mb-3",children:["Blessing of ",e.name]}),a.jsx("div",{className:"space-y-3",children:e.blessing.effects.filter(o=>o.effectType!=="1"&&o.effectType!=="3").map((o,l)=>a.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Os,{className:"h-4 w-4 text-red-500"}),o.effectType&&s(o.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(be,{className:"font-medium text-sm mb-2",children:o.effectName}),a.jsx(yh,{description:o.effectDescription,magnitude:o.magnitude,duration:o.duration,area:o.area}),o.duration>0&&a.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[a.jsx(Za,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",vh(o.duration)]})]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:o.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",o.area]})]})})]})]})},l))})]}),((i=e.tenet)==null?void 0:i.effects)&&e.tenet.effects.length>0&&a.jsxs("div",{children:[a.jsxs(Ae,{className:"text-lg font-semibold mb-3",children:["Tenets of ",e.name]}),a.jsx("div",{className:"space-y-3",children:e.tenet.effects.map((o,l)=>o.effectDescription.split(".").filter(u=>u.trim().length>0).map((u,d)=>a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-muted/50 rounded-lg border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(at,{className:"h-4 w-4 text-blue-500"}),o.targetAttribute&&s(o.targetAttribute)]}),a.jsx("div",{className:"flex-1",children:a.jsx(be,{className:"text-sm text-muted-foreground",children:u.trim()+"."})})]},`${l}-${d}`)))})]}),(e.boon1||e.boon2)&&a.jsxs("div",{children:[a.jsxs(Ae,{className:"text-lg font-semibold mb-3",children:["Boons of ",e.name]}),a.jsxs("div",{className:"space-y-4",children:[e.boon1&&e.boon1.effects.length>0&&a.jsxs("div",{children:[a.jsx(Ae,{className:"text-md font-medium mb-2",children:"Follower Boon"}),a.jsx("div",{className:"space-y-3",children:e.boon1.effects.map((o,l)=>a.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(An,{className:"h-4 w-4 text-yellow-500"}),o.effectType&&s(o.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(be,{className:"font-medium text-sm mb-2",children:o.effectName}),a.jsx(yh,{description:o.effectDescription,magnitude:o.magnitude,duration:o.duration,area:o.area}),o.duration>0&&a.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[a.jsx(Za,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",vh(o.duration)]})]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:o.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",o.area]})]})})]})]})},l))})]}),e.boon2&&e.boon2.effects.length>0&&a.jsxs("div",{children:[a.jsx(Ae,{className:"text-md font-medium mb-2",children:"Devotee Boon"}),a.jsx("div",{className:"space-y-3",children:e.boon2.effects.map((o,l)=>a.jsx("div",{className:"p-4 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-4 w-4 text-purple-500"}),o.effectType&&s(o.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(be,{className:"font-medium text-sm mb-2",children:o.effectName}),a.jsx(yh,{description:o.effectDescription,magnitude:o.magnitude,duration:o.duration,area:o.area}),o.duration>0&&a.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[a.jsx(Za,{className:"h-3 w-3"}),a.jsxs("span",{children:["Lasts for ",vh(o.duration)]})]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:o.area>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),a.jsxs("span",{children:["Area: ",o.area]})]})})]})]})},l))})]})]})]})]})]})})}function vb({religions:e,selectedDeityId:t,onDeitySelect:n,placeholder:s="Search for a deity to follow...",className:r,disabled:i=!1}){const[o,l]=g.useState(""),{filteredReligions:c}=yI(e,o),u=g.useMemo(()=>wI(c),[c]),d=p=>{const v={Divine:"bg-blue-100 text-blue-800 border-blue-200","Daedric Prince":"bg-red-100 text-red-800 border-red-200",Tribunal:"bg-purple-100 text-purple-800 border-purple-200",Ancestor:"bg-green-100 text-green-800 border-green-200","Nordic Deity":"bg-orange-100 text-orange-800 border-orange-200","Yokudan Deity":"bg-yellow-100 text-yellow-800 border-yellow-200","Khajiiti Deity":"bg-indigo-100 text-indigo-800 border-indigo-200",Deity:"bg-gray-100 text-gray-800 border-gray-200"};return a.jsx(K,{variant:"outline",className:H("text-xs font-medium",v[p]||v.Deity),children:p})},f=g.useMemo(()=>u.map(p=>({id:p.id,label:p.name,description:p.tenetDescription,category:p.type,badge:d(p.type),metadata:{originalReligion:p.originalReligion,favoredRaces:p.favoredRaces}})),[u]),m=p=>{n(p.id)},h=(p,v)=>{var b;return a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium",children:p.label}),p.badge]}),p.description&&a.jsx(ze,{text:p.description,className:"text-sm text-muted-foreground line-clamp-2 mb-1"}),rs()&&((b=p.metadata)==null?void 0:b.favoredRaces)&&p.metadata.favoredRaces.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ze,{className:"h-3 w-3 text-skyrim-gold"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["Favors: ",p.metadata.favoredRaces.join(", ")]})]})]})})};return a.jsx(ru,{options:f,onSelect:m,placeholder:s,className:r,disabled:i,renderOption:h,emptyMessage:"No deity found.",searchQuery:o,onSearchQueryChange:l})}function bh({text:e,className:t="text-sm text-muted-foreground"}){if(!e)return null;let n=e.replace(/<[^>]*>/g,"");n=n.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const s=n.split(/(<[^>]+>)/g);return a.jsx("div",{className:t,children:s.map((r,i)=>{if(r.startsWith("<")&&r.endsWith(">")){const o=r.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:o},i)}return r})})}function DI({description:e}){if(!e)return null;const t=e.split(/(<[^>]+>)/g);return a.jsx(be,{className:"text-xs text-muted-foreground",children:t.map((n,s)=>{if(n.startsWith("<")&&n.endsWith(">")){const r=n.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:r},s)}return n})})}function wh({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=e.replace(/<[^>]*>/g,"");r=r.replace(/<mag>/g,t.toString()),r=r.replace(/<magnitude>/g,t.toString()),r=r.replace(/<dur>/g,n.toString()),r=r.replace(/<duration>/g,n.toString()),s>0&&(r=r.replace(/<area>/g,s.toString())),r=r.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const i=r.split(/(<[^>]+>)/g);return a.jsx(be,{className:"text-xs text-muted-foreground",children:i.map((o,l)=>{if(o.startsWith("<")&&o.endsWith(">")){const c=o.slice(1,-1);return a.jsx("span",{className:"font-bold italic text-skyrim-gold",children:c},l)}return o})})}function jh(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function Nh(e){const t=[/<mag>/g,/<magnitude>/g],n=[/<dur>/g,/<duration>/g],s=t.some(i=>i.test(e)),r=n.some(i=>i.test(e));return{hasMagnitude:s,hasDuration:r}}const zI={Restoration:a.jsx(Os,{className:"h-4 w-4 text-green-500"}),Destruction:a.jsx(il,{className:"h-4 w-4 text-red-500"}),Alteration:a.jsx(at,{className:"h-4 w-4 text-blue-500"}),Illusion:a.jsx(_o,{className:"h-4 w-4 text-purple-500"}),Conjuration:a.jsx(An,{className:"h-4 w-4 text-purple-500"}),Enchanting:a.jsx(Na,{className:"h-4 w-4 text-blue-500"}),Alchemy:a.jsx(Cx,{className:"h-4 w-4 text-green-500"}),"Light Armor":a.jsx(at,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":a.jsx(at,{className:"h-4 w-4 text-gray-500"}),"One-Handed":a.jsx(ti,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":a.jsx(ti,{className:"h-4 w-4 text-red-500"}),Archery:a.jsx(ss,{className:"h-4 w-4 text-green-500"}),Block:a.jsx(at,{className:"h-4 w-4 text-yellow-500"}),Smithing:a.jsx(at,{className:"h-4 w-4 text-gray-500"}),Speechcraft:a.jsx(_o,{className:"h-4 w-4 text-blue-500"}),Sneak:a.jsx(al,{className:"h-4 w-4 text-purple-500"}),Lockpicking:a.jsx(To,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:a.jsx(To,{className:"h-4 w-4 text-purple-500"})},LI={Divine:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Daedric:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Aedric:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Tribal:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Ancestral:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},yb={sm:"text-xs px-2 py-0.5"};function $I({item:e,originalReligion:t,isExpanded:n=!1,onToggle:s,className:r,showBlessings:i=!0,showTenets:o=!0,showBoons:l=!0,showFavoredRaces:c=!0,disableHover:u,showToggle:d}){var h,p,v,b,x,y,w,j;const f=N=>{switch(N){case"positive":return a.jsx(ia,{className:"h-4 w-4 text-green-500"});case"negative":return a.jsx(Wl,{className:"h-4 w-4 text-red-500"});case"neutral":return a.jsx(kx,{className:"h-4 w-4 text-blue-500"})}},m=N=>zI[N]||a.jsx(Ze,{className:"h-4 w-4 text-skyrim-gold"});return a.jsxs(he,{expanded:n,onToggle:s,className:r,disableHover:u,children:[a.jsxs(he.Header,{children:[d&&a.jsx(fs,{itemId:e.id,itemType:"religion",itemName:e.name}),a.jsx("div",{className:"flex-1",children:a.jsx(Ae,{className:"text-primary font-semibold",children:e.name})}),e.category&&a.jsx(K,{variant:"outline",className:H(LI[e.category]||"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",yb.sm,"font-medium transition-colors"),children:e.category}),rs()&&c&&t&&Array.isArray(t.favoredRaces)&&t.favoredRaces.length>0&&a.jsx("div",{className:"flex items-center gap-1",children:t.favoredRaces.map((N,S)=>a.jsxs(K,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20",yb.sm,"font-medium transition-colors"),children:[a.jsx(Ze,{className:"h-3 w-3 mr-1"}),"Favors ",N]},S))})]}),a.jsxs(he.Summary,{children:[a.jsx("div",{className:"line-clamp-2",children:a.jsx(bh,{text:e.summary||e.description,className:"text-sm text-muted-foreground"})}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[(h=e.effects)==null?void 0:h.slice(0,2).map((N,S)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:N.description,children:[f(N.type),a.jsx("span",{className:"font-medium",children:N.name})]},S)),rs()&&c&&((p=t==null?void 0:t.favoredRaces)==null?void 0:p.slice(0,2).map((N,S)=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",children:[a.jsx(Ze,{className:"h-3 w-3 text-skyrim-gold"}),a.jsx("span",{className:"font-medium",children:N})]},`race-${S}`)))]})]}),a.jsxs(he.Details,{children:[e.description&&a.jsx("div",{children:a.jsx(bh,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),rs()&&c&&Array.isArray(t==null?void 0:t.favoredRaces)&&t.favoredRaces.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Favored Races"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:t.favoredRaces.map((N,S)=>a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg border border-border",children:[a.jsx(Ze,{className:"h-4 w-4 text-skyrim-gold"}),a.jsx("span",{className:"text-sm font-medium",children:N})]},S))})]}),Array.isArray(t==null?void 0:t.worshipRestrictions)&&t.worshipRestrictions.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Worship Restrictions"}),a.jsx("div",{className:"space-y-2",children:t.worshipRestrictions.map((N,S)=>a.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Wl,{className:"h-4 w-4 text-red-500 mt-0.5"}),a.jsx(bh,{text:N,className:"text-sm text-muted-foreground"})]})},S))})]}),i&&Array.isArray((v=t==null?void 0:t.blessing)==null?void 0:v.effects)&&t.blessing.effects.length>0&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Blessing of ",e.name]}),a.jsx("div",{className:"space-y-3",children:t.blessing.effects.filter(N=>N.effectType!=="1"&&N.effectType!=="3").map((N,S)=>{const{hasDuration:k}=Nh(N.effectDescription);return a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.effectType&&m(N.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(be,{className:"font-medium text-sm mb-1",children:N.effectName}),a.jsx(wh,{description:N.effectDescription,magnitude:N.magnitude,duration:N.duration,area:N.area}),k&&N.duration>0&&a.jsxs(be,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for ",jh(N.duration),"."]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:N.area>0&&a.jsxs("span",{children:["Area: ",N.area]})})]})]})},S)})})]}),o&&Array.isArray((b=t==null?void 0:t.tenet)==null?void 0:b.effects)&&t.tenet.effects.length>0&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Tenets of ",e.name]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.tenet.effects.map((N,S)=>N.effectDescription.split(".").filter(E=>E.trim().length>0).map((E,C)=>a.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.targetAttribute&&m(N.targetAttribute)]}),a.jsx("div",{className:"flex-1",children:a.jsx(DI,{description:E.trim()+"."})})]},`${S}-${C}`)))})]}),l&&(Array.isArray((x=t==null?void 0:t.boon1)==null?void 0:x.effects)&&t.boon1.effects.length>0||Array.isArray((y=t==null?void 0:t.boon2)==null?void 0:y.effects)&&t.boon2.effects.length>0)&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Boons of ",e.name]}),a.jsxs("div",{className:"space-y-4",children:[Array.isArray((w=t==null?void 0:t.boon1)==null?void 0:w.effects)&&t.boon1.effects.length>0&&a.jsxs("div",{children:[a.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Follower Boon"}),a.jsx("div",{className:"space-y-3",children:t.boon1.effects.map((N,S)=>{const{hasDuration:k}=Nh(N.effectDescription);return a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.effectType&&m(N.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(be,{className:"font-medium text-sm mb-1",children:N.effectName}),a.jsx(wh,{description:N.effectDescription,magnitude:N.magnitude,duration:N.duration,area:N.area}),k&&N.duration>0&&a.jsxs(be,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",jh(N.duration),"."]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:N.area>0&&a.jsxs("span",{children:["Area: ",N.area]})})]})]})},S)})})]}),Array.isArray((j=t==null?void 0:t.boon2)==null?void 0:j.effects)&&t.boon2.effects.length>0&&a.jsxs("div",{children:[a.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Devotee Boon"}),a.jsx("div",{className:"space-y-3",children:t.boon2.effects.map((N,S)=>{const{hasDuration:k}=Nh(N.effectDescription);return a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),N.effectType&&m(N.effectType)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx(be,{className:"font-medium text-sm mb-1",children:N.effectName}),a.jsx(wh,{description:N.effectDescription,magnitude:N.magnitude,duration:N.duration,area:N.area}),k&&N.duration>0&&a.jsxs(be,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",jh(N.duration),"."]}),a.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:N.area>0&&a.jsxs("span",{children:["Area: ",N.area]})})]})]})},S)})})]})]})]})]})]})}function PI(){const{data:e,loading:t,error:n}=ik();return{religions:e||[],loading:t,error:n}}function vC({className:e}){const{religions:t,loading:n,error:s}=PI(),{build:r,setReligion:i}=ht(),o=lt(),[l,c]=g.useState(!0),u=r.religion?jI(t,r.religion):null,d=()=>{o("/build/religions")},f=()=>{c(!l)};if(n)return a.jsx(Un,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading religions..."})});if(s)return a.jsx(Un,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:a.jsxs("div",{className:"text-sm text-destructive",children:["Error loading religions: ",s]})});if(!u)return a.jsxs(Un,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's religion"}),a.jsx(vb,{religions:t,selectedDeityId:r.religion,onDeitySelect:i,placeholder:"Search for a religion...",className:"w-full"})]});const m=Yk(u);return a.jsxs(Un,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[a.jsx(vb,{religions:t,selectedDeityId:r.religion,onDeitySelect:i,placeholder:`Religion: Select a religion (${u.name})`,className:"w-full"}),a.jsx($I,{item:m,originalReligion:u,isExpanded:l,onToggle:f,className:"border-0 shadow-none",disableHover:!0,showToggle:!1,showBlessings:!1,showTenets:!0,showBoons:!0,showFavoredRaces:rs()})]})}function yC({level:e,size:t="sm"}){const n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return e<=0?null:a.jsxs(K,{variant:"secondary",className:H("bg-blue-100 text-blue-800 border-blue-200",n[t]),children:["Min: Level ",e]})}function OI({name:e,description:t,category:n,assignmentType:s,perkCount:r,level:i,onSelect:o,onMajorClick:l,onMinorClick:c,canAssignMajor:u,canAssignMinor:d,className:f}){const m=p=>{p.stopPropagation(),l(p)},h=p=>{p.stopPropagation(),c(p)};return a.jsxs("div",{className:H("p-4 border rounded-lg hover:bg-muted/50 transition-colors",f),onClick:o,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(km,{skillName:e,size:"2xl",className:"flex-shrink-0"}),a.jsx("h3",{className:"font-semibold text-lg cursor-pointer",children:e})]}),a.jsx(BI,{type:s})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:t}),a.jsxs("div",{className:"flex gap-2 flex-wrap mb-4",children:[a.jsx(II,{category:n}),a.jsx(HI,{count:r}),typeof i=="number"&&i>0&&a.jsx(yC,{level:i})]}),a.jsxs("div",{className:"flex gap-2","data-assignment-control":!0,children:[a.jsx(q,{size:"sm",variant:s==="major"?"default":"outline",onClick:m,disabled:!u&&s!=="major",className:H("flex-1 text-xs",s==="major"&&"bg-yellow-600 hover:bg-yellow-700 text-white border-yellow-500"),children:s==="major"?"Remove Major":"Major"}),a.jsx(q,{size:"sm",variant:s==="minor"?"default":"outline",onClick:h,disabled:!d&&s!=="minor",className:H("flex-1 text-xs",s==="minor"&&"bg-gray-500 hover:bg-gray-600 text-white border-gray-400"),children:s==="minor"?"Remove Minor":"Minor"})]})]})}function BI({type:e,size:t="sm"}){const n={major:"bg-yellow-600 text-white hover:bg-yellow-700 border-yellow-500",minor:"bg-gray-500 text-white hover:bg-gray-600 border-gray-400",none:"bg-gray-100 text-gray-800 border border-gray-300"},s={major:"Major",minor:"Minor",none:"Unassigned"},r={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return a.jsx(K,{className:H(n[e],r[t]),children:s[e]})}function II({category:e,size:t="sm"}){const n={Combat:"bg-red-100 text-red-800 border-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200"},s={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return a.jsx(K,{variant:"outline",className:H(n[e]||"bg-gray-100 text-gray-800 border-gray-300",s[t]),children:e})}function HI({count:e,size:t="sm"}){const n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return a.jsxs(K,{variant:"secondary",className:H("bg-purple-100 text-purple-800 border-purple-200",n[t]),children:[e," Perks"]})}function FI(){return a.jsx("div",{className:"container mx-auto p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Loading Skills..."}),a.jsx("p",{className:"text-muted-foreground",children:"Initializing skill and perk data..."})]})})}function UI({error:e}){return a.jsx("div",{className:"container mx-auto p-6",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(Ao,{className:"h-12 w-12 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Error Loading Skills"}),a.jsx("p",{className:"text-muted-foreground",children:e})]})})}const VI={Alchemy:"alchemy.svg",Alteration:"alteration.svg",Block:"block.svg",Conjuration:"conjuration.svg",Destruction:"destruction.svg",Enchanting:"enchanting.svg",Evasion:"evasion.svg",Finesse:"finesse.svg","Heavy Armor":"heavyarmor.svg",Illusion:"illusion.svg",Marksman:"marksman.svg","One-handed":"one-handed.svg",Restoration:"restoration.svg",Smithing:"smithing.svg",Sneak:"sneak.svg",Speech:"speech.svg","Two-handed":"two-handed.svg",Wayfarer:"wayfarer.svg"};function km({skillName:e,size:t="md",className:n}){const s=VI[e],r=s?fn(`assets/skills/${s}`):void 0;return a.jsx(mm,{imgSrc:r,alt:e,size:t,className:n,showBorder:!0})}function qI({skills:e,onSkillSelect:t,onAssignMajor:n,onAssignMinor:s,onRemoveAssignment:r,selectedSkillId:i,className:o}){return a.jsx("div",{className:H("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",o),children:e.map(l=>a.jsx(OI,{name:l.name,description:l.description,category:l.category,assignmentType:l.assignmentType,perkCount:l.perkCount,level:l.level,canAssignMajor:l.canAssignMajor,canAssignMinor:l.canAssignMinor,onSelect:()=>t(l.id),onMajorClick:c=>{c.preventDefault(),n(l.id)},onMinorClick:c=>{c.preventDefault(),s(l.id)},className:i===l.id?"ring-2 ring-primary bg-primary/5":""},l.id))})}function ZI({query:e,onQueryChange:t,placeholder:n="Search skills...",className:s}){return a.jsx("div",{className:H("mb-6",s),children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Ts,{placeholder:n,value:e,onChange:r=>t(r.target.value),className:"pl-10"})]})})}function tn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,s;n<e.length;n++)(s=tn(e[n]))!==""&&(t+=(t&&" ")+s);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var bC={exports:{}},wC={},jC={exports:{}},NC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=g;function GI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var YI=typeof Object.is=="function"?Object.is:GI,XI=Fo.useState,WI=Fo.useEffect,KI=Fo.useLayoutEffect,QI=Fo.useDebugValue;function JI(e,t){var n=t(),s=XI({inst:{value:n,getSnapshot:t}}),r=s[0].inst,i=s[1];return KI(function(){r.value=n,r.getSnapshot=t,Sh(r)&&i({inst:r})},[e,n,t]),WI(function(){return Sh(r)&&i({inst:r}),e(function(){Sh(r)&&i({inst:r})})},[e]),QI(n),n}function Sh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!YI(e,n)}catch{return!0}}function e9(e,t){return t()}var t9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?e9:JI;NC.useSyncExternalStore=Fo.useSyncExternalStore!==void 0?Fo.useSyncExternalStore:t9;jC.exports=NC;var n9=jC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm=g,s9=n9;function r9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var a9=typeof Object.is=="function"?Object.is:r9,i9=s9.useSyncExternalStore,o9=Cm.useRef,l9=Cm.useEffect,c9=Cm.useMemo,u9=Cm.useDebugValue;wC.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=o9(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=c9(function(){function c(h){if(!u){if(u=!0,d=h,h=s(h),r!==void 0&&o.hasValue){var p=o.value;if(r(p,h))return f=p}return f=h}if(p=f,a9(d,h))return p;var v=s(h);return r!==void 0&&r(p,v)?(d=h,p):(d=h,f=v)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,s,r]);var l=i9(e,i[0],i[1]);return l9(function(){o.hasValue=!0,o.value=l},[l]),u9(l),l};bC.exports=wC;var d9=bC.exports;const f9=vx(d9),m9={},bb=e=>{let t;const n=new Set,s=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const h=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(p=>p(t,h))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(m9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},h9=e=>e?bb(e):bb,{useDebugValue:g9}=$,{useSyncExternalStoreWithSelector:p9}=f9,x9=e=>e;function SC(e,t=x9,n){const s=p9(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return g9(s),s}const wb=(e,t)=>{const n=h9(e),s=(r,i=t)=>SC(n,r,i);return Object.assign(s,n),s},v9=(e,t)=>e?wb(e,t):wb;function un(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var y9={value:()=>{}};function Em(){for(var e=0,t=arguments.length,n={},s;e<t;++e){if(!(s=arguments[e]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new Nd(n)}function Nd(e){this._=e}function b9(e,t){return e.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}Nd.prototype=Em.prototype={constructor:Nd,on:function(e,t){var n=this._,s=b9(e+"",n),r,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((r=(e=s[i]).type)&&(r=w9(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(r=(e=s[i]).type)n[r]=jb(n[r],e.name,t);else if(t==null)for(r in n)n[r]=jb(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Nd(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,i;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],s=0,r=i.length;s<r;++s)i[s].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)}};function w9(e,t){for(var n=0,s=e.length,r;n<s;++n)if((r=e[n]).name===t)return r.value}function jb(e,t,n){for(var s=0,r=e.length;s<r;++s)if(e[s].name===t){e[s]=y9,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}var Jg="http://www.w3.org/1999/xhtml";const Nb={svg:"http://www.w3.org/2000/svg",xhtml:Jg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _m(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Nb.hasOwnProperty(t)?{space:Nb[t],local:e}:e}function j9(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Jg&&t.documentElement.namespaceURI===Jg?t.createElement(e):t.createElementNS(n,e)}}function N9(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kC(e){var t=_m(e);return(t.local?N9:j9)(t)}function S9(){}function T0(e){return e==null?S9:function(){return this.querySelector(e)}}function k9(e){typeof e!="function"&&(e=T0(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,l=s[r]=new Array(o),c,u,d=0;d<o;++d)(c=i[d])&&(u=e.call(c,c.__data__,d,i))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new Tn(s,this._parents)}function C9(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function E9(){return[]}function CC(e){return e==null?E9:function(){return this.querySelectorAll(e)}}function _9(e){return function(){return C9(e.apply(this,arguments))}}function A9(e){typeof e=="function"?e=_9(e):e=CC(e);for(var t=this._groups,n=t.length,s=[],r=[],i=0;i<n;++i)for(var o=t[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(s.push(e.call(c,c.__data__,u,o)),r.push(c));return new Tn(s,r)}function EC(e){return function(){return this.matches(e)}}function _C(e){return function(t){return t.matches(e)}}var T9=Array.prototype.find;function M9(e){return function(){return T9.call(this.children,e)}}function R9(){return this.firstElementChild}function D9(e){return this.select(e==null?R9:M9(typeof e=="function"?e:_C(e)))}var z9=Array.prototype.filter;function L9(){return Array.from(this.children)}function $9(e){return function(){return z9.call(this.children,e)}}function P9(e){return this.selectAll(e==null?L9:$9(typeof e=="function"?e:_C(e)))}function O9(e){typeof e!="function"&&(e=EC(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,l=s[r]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new Tn(s,this._parents)}function AC(e){return new Array(e.length)}function B9(){return new Tn(this._enter||this._groups.map(AC),this._parents)}function of(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}of.prototype={constructor:of,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function I9(e){return function(){return e}}function H9(e,t,n,s,r,i){for(var o=0,l,c=t.length,u=i.length;o<u;++o)(l=t[o])?(l.__data__=i[o],s[o]=l):n[o]=new of(e,i[o]);for(;o<c;++o)(l=t[o])&&(r[o]=l)}function F9(e,t,n,s,r,i,o){var l,c,u=new Map,d=t.length,f=i.length,m=new Array(d),h;for(l=0;l<d;++l)(c=t[l])&&(m[l]=h=o.call(c,c.__data__,l,t)+"",u.has(h)?r[l]=c:u.set(h,c));for(l=0;l<f;++l)h=o.call(e,i[l],l,i)+"",(c=u.get(h))?(s[l]=c,c.__data__=i[l],u.delete(h)):n[l]=new of(e,i[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(m[l])===c&&(r[l]=c)}function U9(e){return e.__data__}function V9(e,t){if(!arguments.length)return Array.from(this,U9);var n=t?F9:H9,s=this._parents,r=this._groups;typeof e!="function"&&(e=I9(e));for(var i=r.length,o=new Array(i),l=new Array(i),c=new Array(i),u=0;u<i;++u){var d=s[u],f=r[u],m=f.length,h=q9(e.call(d,d&&d.__data__,u,s)),p=h.length,v=l[u]=new Array(p),b=o[u]=new Array(p),x=c[u]=new Array(m);n(d,f,v,b,x,h,t);for(var y=0,w=0,j,N;y<p;++y)if(j=v[y]){for(y>=w&&(w=y+1);!(N=b[w])&&++w<p;);j._next=N||null}}return o=new Tn(o,s),o._enter=l,o._exit=c,o}function q9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Z9(){return new Tn(this._exit||this._groups.map(AC),this._parents)}function G9(e,t,n){var s=this.enter(),r=this,i=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),s&&r?s.merge(r).order():r}function Y9(e){for(var t=e.selection?e.selection():e,n=this._groups,s=t._groups,r=n.length,i=s.length,o=Math.min(r,i),l=new Array(r),c=0;c<o;++c)for(var u=n[c],d=s[c],f=u.length,m=l[c]=new Array(f),h,p=0;p<f;++p)(h=u[p]||d[p])&&(m[p]=h);for(;c<r;++c)l[c]=n[c];return new Tn(l,this._parents)}function X9(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s=e[t],r=s.length-1,i=s[r],o;--r>=0;)(o=s[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function W9(e){e||(e=K9);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,s=n.length,r=new Array(s),i=0;i<s;++i){for(var o=n[i],l=o.length,c=r[i]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new Tn(r,this._parents).order()}function K9(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Q9(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function J9(){return Array.from(this)}function e7(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,i=s.length;r<i;++r){var o=s[r];if(o)return o}return null}function t7(){let e=0;for(const t of this)++e;return e}function n7(){return!this.node()}function s7(e){for(var t=this._groups,n=0,s=t.length;n<s;++n)for(var r=t[n],i=0,o=r.length,l;i<o;++i)(l=r[i])&&e.call(l,l.__data__,i,r);return this}function r7(e){return function(){this.removeAttribute(e)}}function a7(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i7(e,t){return function(){this.setAttribute(e,t)}}function o7(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function l7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function c7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function u7(e,t){var n=_m(e);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((t==null?n.local?a7:r7:typeof t=="function"?n.local?c7:l7:n.local?o7:i7)(n,t))}function TC(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function d7(e){return function(){this.style.removeProperty(e)}}function f7(e,t,n){return function(){this.style.setProperty(e,t,n)}}function m7(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function h7(e,t,n){return arguments.length>1?this.each((t==null?d7:typeof t=="function"?m7:f7)(e,t,n??"")):Uo(this.node(),e)}function Uo(e,t){return e.style.getPropertyValue(t)||TC(e).getComputedStyle(e,null).getPropertyValue(t)}function g7(e){return function(){delete this[e]}}function p7(e,t){return function(){this[e]=t}}function x7(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function v7(e,t){return arguments.length>1?this.each((t==null?g7:typeof t=="function"?x7:p7)(e,t)):this.node()[e]}function MC(e){return e.trim().split(/^|\s+/)}function M0(e){return e.classList||new RC(e)}function RC(e){this._node=e,this._names=MC(e.getAttribute("class")||"")}RC.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function DC(e,t){for(var n=M0(e),s=-1,r=t.length;++s<r;)n.add(t[s])}function zC(e,t){for(var n=M0(e),s=-1,r=t.length;++s<r;)n.remove(t[s])}function y7(e){return function(){DC(this,e)}}function b7(e){return function(){zC(this,e)}}function w7(e,t){return function(){(t.apply(this,arguments)?DC:zC)(this,e)}}function j7(e,t){var n=MC(e+"");if(arguments.length<2){for(var s=M0(this.node()),r=-1,i=n.length;++r<i;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?w7:t?y7:b7)(n,t))}function N7(){this.textContent=""}function S7(e){return function(){this.textContent=e}}function k7(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function C7(e){return arguments.length?this.each(e==null?N7:(typeof e=="function"?k7:S7)(e)):this.node().textContent}function E7(){this.innerHTML=""}function _7(e){return function(){this.innerHTML=e}}function A7(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function T7(e){return arguments.length?this.each(e==null?E7:(typeof e=="function"?A7:_7)(e)):this.node().innerHTML}function M7(){this.nextSibling&&this.parentNode.appendChild(this)}function R7(){return this.each(M7)}function D7(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function z7(){return this.each(D7)}function L7(e){var t=typeof e=="function"?e:kC(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function $7(){return null}function P7(e,t){var n=typeof e=="function"?e:kC(e),s=t==null?$7:typeof t=="function"?t:T0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function O7(){var e=this.parentNode;e&&e.removeChild(this)}function B7(){return this.each(O7)}function I7(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function H7(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function F7(e){return this.select(e?H7:I7)}function U7(e){return arguments.length?this.property("__data__",e):this.node().__data__}function V7(e){return function(t){e.call(this,t,this.__data__)}}function q7(e){return e.trim().split(/^|\s+/).map(function(t){var n="",s=t.indexOf(".");return s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),{type:t,name:n}})}function Z7(e){return function(){var t=this.__on;if(t){for(var n=0,s=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++s]=i;++s?t.length=s:delete this.__on}}}function G7(e,t,n){return function(){var s=this.__on,r,i=V7(t);if(s){for(var o=0,l=s.length;o<l;++o)if((r=s[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},s?s.push(r):this.__on=[r]}}function Y7(e,t,n){var s=q7(e+""),r,i=s.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(r=0,d=l[c];r<i;++r)if((o=s[r]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?G7:Z7,r=0;r<i;++r)this.each(l(s[r],t,n));return this}function LC(e,t,n){var s=TC(e),r=s.CustomEvent;typeof r=="function"?r=new r(t,n):(r=s.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function X7(e,t){return function(){return LC(this,e,t)}}function W7(e,t){return function(){return LC(this,e,t.apply(this,arguments))}}function K7(e,t){return this.each((typeof t=="function"?W7:X7)(e,t))}function*Q7(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,i=s.length,o;r<i;++r)(o=s[r])&&(yield o)}var $C=[null];function Tn(e,t){this._groups=e,this._parents=t}function lu(){return new Tn([[document.documentElement]],$C)}function J7(){return this}Tn.prototype=lu.prototype={constructor:Tn,select:k9,selectAll:A9,selectChild:D9,selectChildren:P9,filter:O9,data:V9,enter:B9,exit:Z9,join:G9,merge:Y9,selection:J7,order:X9,sort:W9,call:Q9,nodes:J9,node:e7,size:t7,empty:n7,each:s7,attr:u7,style:h7,property:v7,classed:j7,text:C7,html:T7,raise:R7,lower:z7,append:L7,insert:P7,remove:B7,clone:F7,datum:U7,on:Y7,dispatch:K7,[Symbol.iterator]:Q7};function ts(e){return typeof e=="string"?new Tn([[document.querySelector(e)]],[document.documentElement]):new Tn([[e]],$C)}function eH(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ns(e,t){if(e=eH(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const tH={passive:!1},jc={capture:!0,passive:!1};function kh(e){e.stopImmediatePropagation()}function po(e){e.preventDefault(),e.stopImmediatePropagation()}function PC(e){var t=e.document.documentElement,n=ts(e).on("dragstart.drag",po,jc);"onselectstart"in t?n.on("selectstart.drag",po,jc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function OC(e,t){var n=e.document.documentElement,s=ts(e).on("dragstart.drag",null);t&&(s.on("click.drag",po,jc),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Fu=e=>()=>e;function ep(e,{sourceEvent:t,subject:n,target:s,identifier:r,active:i,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}ep.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function nH(e){return!e.ctrlKey&&!e.button}function sH(){return this.parentNode}function rH(e,t){return t??{x:e.x,y:e.y}}function aH(){return navigator.maxTouchPoints||"ontouchstart"in this}function iH(){var e=nH,t=sH,n=rH,s=aH,r={},i=Em("start","drag","end"),o=0,l,c,u,d,f=0;function m(j){j.on("mousedown.drag",h).filter(s).on("touchstart.drag",b).on("touchmove.drag",x,tH).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(j,N){if(!(d||!e.call(this,j,N))){var S=w(this,t.call(this,j,N),j,N,"mouse");S&&(ts(j.view).on("mousemove.drag",p,jc).on("mouseup.drag",v,jc),PC(j.view),kh(j),u=!1,l=j.clientX,c=j.clientY,S("start",j))}}function p(j){if(po(j),!u){var N=j.clientX-l,S=j.clientY-c;u=N*N+S*S>f}r.mouse("drag",j)}function v(j){ts(j.view).on("mousemove.drag mouseup.drag",null),OC(j.view,u),po(j),r.mouse("end",j)}function b(j,N){if(e.call(this,j,N)){var S=j.changedTouches,k=t.call(this,j,N),E=S.length,C,_;for(C=0;C<E;++C)(_=w(this,k,j,N,S[C].identifier,S[C]))&&(kh(j),_("start",j,S[C]))}}function x(j){var N=j.changedTouches,S=N.length,k,E;for(k=0;k<S;++k)(E=r[N[k].identifier])&&(po(j),E("drag",j,N[k]))}function y(j){var N=j.changedTouches,S=N.length,k,E;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),k=0;k<S;++k)(E=r[N[k].identifier])&&(kh(j),E("end",j,N[k]))}function w(j,N,S,k,E,C){var _=i.copy(),P=Ns(C||S,N),D,z,A;if((A=n.call(j,new ep("beforestart",{sourceEvent:S,target:m,identifier:E,active:o,x:P[0],y:P[1],dx:0,dy:0,dispatch:_}),k))!=null)return D=A.x-P[0]||0,z=A.y-P[1]||0,function O(T,L,M){var R=P,B;switch(T){case"start":r[E]=O,B=o++;break;case"end":delete r[E],--o;case"drag":P=Ns(M||L,N),B=o;break}_.call(T,j,new ep(T,{sourceEvent:L,subject:A,target:m,identifier:E,active:B,x:P[0]+D,y:P[1]+z,dx:P[0]-R[0],dy:P[1]-R[1],dispatch:_}),k)}}return m.filter=function(j){return arguments.length?(e=typeof j=="function"?j:Fu(!!j),m):e},m.container=function(j){return arguments.length?(t=typeof j=="function"?j:Fu(j),m):t},m.subject=function(j){return arguments.length?(n=typeof j=="function"?j:Fu(j),m):n},m.touchable=function(j){return arguments.length?(s=typeof j=="function"?j:Fu(!!j),m):s},m.on=function(){var j=i.on.apply(i,arguments);return j===i?m:j},m.clickDistance=function(j){return arguments.length?(f=(j=+j)*j,m):Math.sqrt(f)},m}function R0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function BC(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function cu(){}var Nc=.7,lf=1/Nc,xo="\\s*([+-]?\\d+)\\s*",Sc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oH=/^#([0-9a-f]{3,8})$/,lH=new RegExp(`^rgb\\(${xo},${xo},${xo}\\)$`),cH=new RegExp(`^rgb\\(${Rs},${Rs},${Rs}\\)$`),uH=new RegExp(`^rgba\\(${xo},${xo},${xo},${Sc}\\)$`),dH=new RegExp(`^rgba\\(${Rs},${Rs},${Rs},${Sc}\\)$`),fH=new RegExp(`^hsl\\(${Sc},${Rs},${Rs}\\)$`),mH=new RegExp(`^hsla\\(${Sc},${Rs},${Rs},${Sc}\\)$`),Sb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R0(cu,kc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kb,formatHex:kb,formatHex8:hH,formatHsl:gH,formatRgb:Cb,toString:Cb});function kb(){return this.rgb().formatHex()}function hH(){return this.rgb().formatHex8()}function gH(){return IC(this).formatHsl()}function Cb(){return this.rgb().formatRgb()}function kc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=oH.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Eb(t):n===3?new ln(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Uu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Uu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lH.exec(e))?new ln(t[1],t[2],t[3],1):(t=cH.exec(e))?new ln(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=uH.exec(e))?Uu(t[1],t[2],t[3],t[4]):(t=dH.exec(e))?Uu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fH.exec(e))?Tb(t[1],t[2]/100,t[3]/100,1):(t=mH.exec(e))?Tb(t[1],t[2]/100,t[3]/100,t[4]):Sb.hasOwnProperty(e)?Eb(Sb[e]):e==="transparent"?new ln(NaN,NaN,NaN,0):null}function Eb(e){return new ln(e>>16&255,e>>8&255,e&255,1)}function Uu(e,t,n,s){return s<=0&&(e=t=n=NaN),new ln(e,t,n,s)}function pH(e){return e instanceof cu||(e=kc(e)),e?(e=e.rgb(),new ln(e.r,e.g,e.b,e.opacity)):new ln}function tp(e,t,n,s){return arguments.length===1?pH(e):new ln(e,t,n,s??1)}function ln(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}R0(ln,tp,BC(cu,{brighter(e){return e=e==null?lf:Math.pow(lf,e),new ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nc:Math.pow(Nc,e),new ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ln(Ga(this.r),Ga(this.g),Ga(this.b),cf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_b,formatHex:_b,formatHex8:xH,formatRgb:Ab,toString:Ab}));function _b(){return`#${Ua(this.r)}${Ua(this.g)}${Ua(this.b)}`}function xH(){return`#${Ua(this.r)}${Ua(this.g)}${Ua(this.b)}${Ua((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ab(){const e=cf(this.opacity);return`${e===1?"rgb(":"rgba("}${Ga(this.r)}, ${Ga(this.g)}, ${Ga(this.b)}${e===1?")":`, ${e})`}`}function cf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ga(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ua(e){return e=Ga(e),(e<16?"0":"")+e.toString(16)}function Tb(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ns(e,t,n,s)}function IC(e){if(e instanceof ns)return new ns(e.h,e.s,e.l,e.opacity);if(e instanceof cu||(e=kc(e)),!e)return new ns;if(e instanceof ns)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),i=Math.max(t,n,s),o=NaN,l=i-r,c=(i+r)/2;return l?(t===i?o=(n-s)/l+(n<s)*6:n===i?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+r:2-i-r,o*=60):l=c>0&&c<1?0:o,new ns(o,l,c,e.opacity)}function vH(e,t,n,s){return arguments.length===1?IC(e):new ns(e,t,n,s??1)}function ns(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}R0(ns,vH,BC(cu,{brighter(e){return e=e==null?lf:Math.pow(lf,e),new ns(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nc:Math.pow(Nc,e),new ns(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new ln(Ch(e>=240?e-240:e+120,r,s),Ch(e,r,s),Ch(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new ns(Mb(this.h),Vu(this.s),Vu(this.l),cf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cf(this.opacity);return`${e===1?"hsl(":"hsla("}${Mb(this.h)}, ${Vu(this.s)*100}%, ${Vu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Mb(e){return e=(e||0)%360,e<0?e+360:e}function Vu(e){return Math.max(0,Math.min(1,e||0))}function Ch(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const HC=e=>()=>e;function yH(e,t){return function(n){return e+n*t}}function bH(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function wH(e){return(e=+e)==1?FC:function(t,n){return n-t?bH(t,n,e):HC(isNaN(t)?n:t)}}function FC(e,t){var n=t-e;return n?yH(e,n):HC(isNaN(e)?t:e)}const Rb=function e(t){var n=wH(t);function s(r,i){var o=n((r=tp(r)).r,(i=tp(i)).r),l=n(r.g,i.g),c=n(r.b,i.b),u=FC(r.opacity,i.opacity);return function(d){return r.r=o(d),r.g=l(d),r.b=c(d),r.opacity=u(d),r+""}}return s.gamma=e,s}(1);function Ur(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var np=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Eh=new RegExp(np.source,"g");function jH(e){return function(){return e}}function NH(e){return function(t){return e(t)+""}}function SH(e,t){var n=np.lastIndex=Eh.lastIndex=0,s,r,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=np.exec(e))&&(r=Eh.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:Ur(s,r)})),n=Eh.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?NH(c[0].x):jH(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var Db=180/Math.PI,sp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function UC(e,t,n,s,r,i){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*s)&&(n-=e*c,s-=t*c),(l=Math.sqrt(n*n+s*s))&&(n/=l,s/=l,c/=l),e*s<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Db,skewX:Math.atan(c)*Db,scaleX:o,scaleY:l}}var qu;function kH(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?sp:UC(t.a,t.b,t.c,t.d,t.e,t.f)}function CH(e){return e==null||(qu||(qu=document.createElementNS("http://www.w3.org/2000/svg","g")),qu.setAttribute("transform",e),!(e=qu.transform.baseVal.consolidate()))?sp:(e=e.matrix,UC(e.a,e.b,e.c,e.d,e.e,e.f))}function VC(e,t,n,s){function r(u){return u.length?u.pop()+" ":""}function i(u,d,f,m,h,p){if(u!==f||d!==m){var v=h.push("translate(",null,t,null,n);p.push({i:v-4,x:Ur(u,f)},{i:v-2,x:Ur(d,m)})}else(f||m)&&h.push("translate("+f+t+m+n)}function o(u,d,f,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:f.push(r(f)+"rotate(",null,s)-2,x:Ur(u,d)})):d&&f.push(r(f)+"rotate("+d+s)}function l(u,d,f,m){u!==d?m.push({i:f.push(r(f)+"skewX(",null,s)-2,x:Ur(u,d)}):d&&f.push(r(f)+"skewX("+d+s)}function c(u,d,f,m,h,p){if(u!==f||d!==m){var v=h.push(r(h)+"scale(",null,",",null,")");p.push({i:v-4,x:Ur(u,f)},{i:v-2,x:Ur(d,m)})}else(f!==1||m!==1)&&h.push(r(h)+"scale("+f+","+m+")")}return function(u,d){var f=[],m=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,f,m),o(u.rotate,d.rotate,f,m),l(u.skewX,d.skewX,f,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,m),u=d=null,function(h){for(var p=-1,v=m.length,b;++p<v;)f[(b=m[p]).i]=b.x(h);return f.join("")}}}var EH=VC(kH,"px, ","px)","deg)"),_H=VC(CH,", ",")",")"),AH=1e-12;function zb(e){return((e=Math.exp(e))+1/e)/2}function TH(e){return((e=Math.exp(e))-1/e)/2}function MH(e){return((e=Math.exp(2*e))-1)/(e+1)}const RH=function e(t,n,s){function r(i,o){var l=i[0],c=i[1],u=i[2],d=o[0],f=o[1],m=o[2],h=d-l,p=f-c,v=h*h+p*p,b,x;if(v<AH)x=Math.log(m/u)/t,b=function(k){return[l+k*h,c+k*p,u*Math.exp(t*k*x)]};else{var y=Math.sqrt(v),w=(m*m-u*u+s*v)/(2*u*n*y),j=(m*m-u*u-s*v)/(2*m*n*y),N=Math.log(Math.sqrt(w*w+1)-w),S=Math.log(Math.sqrt(j*j+1)-j);x=(S-N)/t,b=function(k){var E=k*x,C=zb(N),_=u/(n*y)*(C*MH(t*E+N)-TH(N));return[l+_*h,c+_*p,u*C/zb(t*E+N)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return r.rho=function(i){var o=Math.max(.001,+i),l=o*o,c=l*l;return e(o,l,c)},r}(Math.SQRT2,2,4);var Vo=0,Ul=0,Cl=0,qC=1e3,uf,Vl,df=0,oi=0,Am=0,Cc=typeof performance=="object"&&performance.now?performance:Date,ZC=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function D0(){return oi||(ZC(DH),oi=Cc.now()+Am)}function DH(){oi=0}function ff(){this._call=this._time=this._next=null}ff.prototype=GC.prototype={constructor:ff,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?D0():+n)+(t==null?0:+t),!this._next&&Vl!==this&&(Vl?Vl._next=this:uf=this,Vl=this),this._call=e,this._time=n,rp()},stop:function(){this._call&&(this._call=null,this._time=1/0,rp())}};function GC(e,t,n){var s=new ff;return s.restart(e,t,n),s}function zH(){D0(),++Vo;for(var e=uf,t;e;)(t=oi-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vo}function Lb(){oi=(df=Cc.now())+Am,Vo=Ul=0;try{zH()}finally{Vo=0,$H(),oi=0}}function LH(){var e=Cc.now(),t=e-df;t>qC&&(Am-=t,df=e)}function $H(){for(var e,t=uf,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:uf=n);Vl=e,rp(s)}function rp(e){if(!Vo){Ul&&(Ul=clearTimeout(Ul));var t=e-oi;t>24?(e<1/0&&(Ul=setTimeout(Lb,e-Cc.now()-Am)),Cl&&(Cl=clearInterval(Cl))):(Cl||(df=Cc.now(),Cl=setInterval(LH,qC)),Vo=1,ZC(Lb))}}function $b(e,t,n){var s=new ff;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,n),s}var PH=Em("start","end","cancel","interrupt"),OH=[],YC=0,Pb=1,ap=2,Sd=3,Ob=4,ip=5,kd=6;function Tm(e,t,n,s,r,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;BH(e,n,{name:t,index:s,group:r,on:PH,tween:OH,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:YC})}function z0(e,t){var n=hs(e,t);if(n.state>YC)throw new Error("too late; already scheduled");return n}function Us(e,t){var n=hs(e,t);if(n.state>Sd)throw new Error("too late; already running");return n}function hs(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function BH(e,t,n){var s=e.__transition,r;s[t]=n,n.timer=GC(i,0,n.time);function i(u){n.state=Pb,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var d,f,m,h;if(n.state!==Pb)return c();for(d in s)if(h=s[d],h.name===n.name){if(h.state===Sd)return $b(o);h.state===Ob?(h.state=kd,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete s[d]):+d<t&&(h.state=kd,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete s[d])}if($b(function(){n.state===Sd&&(n.state=Ob,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=ap,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ap){for(n.state=Sd,r=new Array(m=n.tween.length),d=0,f=-1;d<m;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function l(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=ip,1),f=-1,m=r.length;++f<m;)r[f].call(e,d);n.state===ip&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=kd,n.timer.stop(),delete s[t];for(var u in s)return;delete e.__transition}}function Cd(e,t){var n=e.__transition,s,r,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((s=n[o]).name!==t){i=!1;continue}r=s.state>ap&&s.state<ip,s.state=kd,s.timer.stop(),s.on.call(r?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[o]}i&&delete e.__transition}}function IH(e){return this.each(function(){Cd(this,e)})}function HH(e,t){var n,s;return function(){var r=Us(this,e),i=r.tween;if(i!==n){s=n=i;for(var o=0,l=s.length;o<l;++o)if(s[o].name===t){s=s.slice(),s.splice(o,1);break}}r.tween=s}}function FH(e,t,n){var s,r;if(typeof n!="function")throw new Error;return function(){var i=Us(this,e),o=i.tween;if(o!==s){r=(s=o).slice();for(var l={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=l;break}c===u&&r.push(l)}i.tween=r}}function UH(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s=hs(this.node(),n).tween,r=0,i=s.length,o;r<i;++r)if((o=s[r]).name===e)return o.value;return null}return this.each((t==null?HH:FH)(n,e,t))}function L0(e,t,n){var s=e._id;return e.each(function(){var r=Us(this,s);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return hs(r,s).value[t]}}function XC(e,t){var n;return(typeof t=="number"?Ur:t instanceof kc?Rb:(n=kc(t))?(t=n,Rb):SH)(e,t)}function VH(e){return function(){this.removeAttribute(e)}}function qH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ZH(e,t,n){var s,r=n+"",i;return function(){var o=this.getAttribute(e);return o===r?null:o===s?i:i=t(s=o,n)}}function GH(e,t,n){var s,r=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===s?i:i=t(s=o,n)}}function YH(e,t,n){var s,r,i;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,l)))}}function XH(e,t,n){var s,r,i;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,l)))}}function WH(e,t){var n=_m(e),s=n==="transform"?_H:XC;return this.attrTween(e,typeof t=="function"?(n.local?XH:YH)(n,s,L0(this,"attr."+e,t)):t==null?(n.local?qH:VH)(n):(n.local?GH:ZH)(n,s,t))}function KH(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function QH(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function JH(e,t){var n,s;function r(){var i=t.apply(this,arguments);return i!==s&&(n=(s=i)&&QH(e,i)),n}return r._value=t,r}function eF(e,t){var n,s;function r(){var i=t.apply(this,arguments);return i!==s&&(n=(s=i)&&KH(e,i)),n}return r._value=t,r}function tF(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var s=_m(e);return this.tween(n,(s.local?JH:eF)(s,t))}function nF(e,t){return function(){z0(this,e).delay=+t.apply(this,arguments)}}function sF(e,t){return t=+t,function(){z0(this,e).delay=t}}function rF(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nF:sF)(t,e)):hs(this.node(),t).delay}function aF(e,t){return function(){Us(this,e).duration=+t.apply(this,arguments)}}function iF(e,t){return t=+t,function(){Us(this,e).duration=t}}function oF(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?aF:iF)(t,e)):hs(this.node(),t).duration}function lF(e,t){if(typeof t!="function")throw new Error;return function(){Us(this,e).ease=t}}function cF(e){var t=this._id;return arguments.length?this.each(lF(t,e)):hs(this.node(),t).ease}function uF(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Us(this,e).ease=n}}function dF(e){if(typeof e!="function")throw new Error;return this.each(uF(this._id,e))}function fF(e){typeof e!="function"&&(e=EC(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,l=s[r]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new Nr(s,this._parents,this._name,this._id)}function mF(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,s=t.length,r=n.length,i=Math.min(s,r),o=new Array(s),l=0;l<i;++l)for(var c=t[l],u=n[l],d=c.length,f=o[l]=new Array(d),m,h=0;h<d;++h)(m=c[h]||u[h])&&(f[h]=m);for(;l<s;++l)o[l]=t[l];return new Nr(o,this._parents,this._name,this._id)}function hF(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function gF(e,t,n){var s,r,i=hF(t)?z0:Us;return function(){var o=i(this,e),l=o.on;l!==s&&(r=(s=l).copy()).on(t,n),o.on=r}}function pF(e,t){var n=this._id;return arguments.length<2?hs(this.node(),n).on.on(e):this.each(gF(n,e,t))}function xF(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function vF(){return this.on("end.remove",xF(this._id))}function yF(e){var t=this._name,n=this._id;typeof e!="function"&&(e=T0(e));for(var s=this._groups,r=s.length,i=new Array(r),o=0;o<r;++o)for(var l=s[o],c=l.length,u=i[o]=new Array(c),d,f,m=0;m<c;++m)(d=l[m])&&(f=e.call(d,d.__data__,m,l))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f,Tm(u[m],t,n,m,u,hs(d,n)));return new Nr(i,this._parents,t,n)}function bF(e){var t=this._name,n=this._id;typeof e!="function"&&(e=CC(e));for(var s=this._groups,r=s.length,i=[],o=[],l=0;l<r;++l)for(var c=s[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var m=e.call(d,d.__data__,f,c),h,p=hs(d,n),v=0,b=m.length;v<b;++v)(h=m[v])&&Tm(h,t,n,v,m,p);i.push(m),o.push(d)}return new Nr(i,o,t,n)}var wF=lu.prototype.constructor;function jF(){return new wF(this._groups,this._parents)}function NF(e,t){var n,s,r;return function(){var i=Uo(this,e),o=(this.style.removeProperty(e),Uo(this,e));return i===o?null:i===n&&o===s?r:r=t(n=i,s=o)}}function WC(e){return function(){this.style.removeProperty(e)}}function SF(e,t,n){var s,r=n+"",i;return function(){var o=Uo(this,e);return o===r?null:o===s?i:i=t(s=o,n)}}function kF(e,t,n){var s,r,i;return function(){var o=Uo(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Uo(this,e))),o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,l))}}function CF(e,t){var n,s,r,i="style."+t,o="end."+i,l;return function(){var c=Us(this,e),u=c.on,d=c.value[i]==null?l||(l=WC(t)):void 0;(u!==n||r!==d)&&(s=(n=u).copy()).on(o,r=d),c.on=s}}function EF(e,t,n){var s=(e+="")=="transform"?EH:XC;return t==null?this.styleTween(e,NF(e,s)).on("end.style."+e,WC(e)):typeof t=="function"?this.styleTween(e,kF(e,s,L0(this,"style."+e,t))).each(CF(this._id,e)):this.styleTween(e,SF(e,s,t),n).on("end.style."+e,null)}function _F(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function AF(e,t,n){var s,r;function i(){var o=t.apply(this,arguments);return o!==r&&(s=(r=o)&&_F(e,o,n)),s}return i._value=t,i}function TF(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,AF(e,t,n??""))}function MF(e){return function(){this.textContent=e}}function RF(e){return function(){var t=e(this);this.textContent=t??""}}function DF(e){return this.tween("text",typeof e=="function"?RF(L0(this,"text",e)):MF(e==null?"":e+""))}function zF(e){return function(t){this.textContent=e.call(this,t)}}function LF(e){var t,n;function s(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&zF(r)),t}return s._value=e,s}function $F(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,LF(e))}function PF(){for(var e=this._name,t=this._id,n=KC(),s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=hs(c,t);Tm(c,e,n,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Nr(s,this._parents,e,n)}function OF(){var e,t,n=this,s=n._id,r=n.size();return new Promise(function(i,o){var l={value:o},c={value:function(){--r===0&&i()}};n.each(function(){var u=Us(this,s),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),r===0&&i()})}var BF=0;function Nr(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function KC(){return++BF}var Js=lu.prototype;Nr.prototype={constructor:Nr,select:yF,selectAll:bF,selectChild:Js.selectChild,selectChildren:Js.selectChildren,filter:fF,merge:mF,selection:jF,transition:PF,call:Js.call,nodes:Js.nodes,node:Js.node,size:Js.size,empty:Js.empty,each:Js.each,on:pF,attr:WH,attrTween:tF,style:EF,styleTween:TF,text:DF,textTween:$F,remove:vF,tween:UH,delay:rF,duration:oF,ease:cF,easeVarying:dF,end:OF,[Symbol.iterator]:Js[Symbol.iterator]};function IF(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var HF={time:null,delay:0,duration:250,ease:IF};function FF(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function UF(e){var t,n;e instanceof Nr?(t=e._id,e=e._name):(t=KC(),(n=HF).time=D0(),e=e==null?null:e+"");for(var s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&Tm(c,e,t,u,o,n||FF(c,t));return new Nr(s,this._parents,e,t)}lu.prototype.interrupt=IH;lu.prototype.transition=UF;const Zu=e=>()=>e;function VF(e,{sourceEvent:t,target:n,transform:s,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:r}})}function or(e,t,n){this.k=e,this.x=t,this.y=n}or.prototype={constructor:or,scale:function(e){return e===1?this:new or(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new or(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var la=new or(1,0,0);or.prototype;function _h(e){e.stopImmediatePropagation()}function El(e){e.preventDefault(),e.stopImmediatePropagation()}function qF(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ZF(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bb(){return this.__zoom||la}function GF(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function YF(){return navigator.maxTouchPoints||"ontouchstart"in this}function XF(e,t,n){var s=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function WF(){var e=qF,t=ZF,n=XF,s=GF,r=YF,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=RH,u=Em("start","zoom","end"),d,f,m,h=500,p=150,v=0,b=10;function x(A){A.property("__zoom",Bb).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",_).filter(r).on("touchstart.zoom",P).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(A,O,T,L){var M=A.selection?A.selection():A;M.property("__zoom",Bb),A!==M?N(A,O,T,L):M.interrupt().each(function(){S(this,arguments).event(L).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},x.scaleBy=function(A,O,T,L){x.scaleTo(A,function(){var M=this.__zoom.k,R=typeof O=="function"?O.apply(this,arguments):O;return M*R},T,L)},x.scaleTo=function(A,O,T,L){x.transform(A,function(){var M=t.apply(this,arguments),R=this.__zoom,B=T==null?j(M):typeof T=="function"?T.apply(this,arguments):T,F=R.invert(B),I=typeof O=="function"?O.apply(this,arguments):O;return n(w(y(R,I),B,F),M,o)},T,L)},x.translateBy=function(A,O,T,L){x.transform(A,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),o)},null,L)},x.translateTo=function(A,O,T,L,M){x.transform(A,function(){var R=t.apply(this,arguments),B=this.__zoom,F=L==null?j(R):typeof L=="function"?L.apply(this,arguments):L;return n(la.translate(F[0],F[1]).scale(B.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof T=="function"?-T.apply(this,arguments):-T),R,o)},L,M)};function y(A,O){return O=Math.max(i[0],Math.min(i[1],O)),O===A.k?A:new or(O,A.x,A.y)}function w(A,O,T){var L=O[0]-T[0]*A.k,M=O[1]-T[1]*A.k;return L===A.x&&M===A.y?A:new or(A.k,L,M)}function j(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function N(A,O,T,L){A.on("start.zoom",function(){S(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(L).end()}).tween("zoom",function(){var M=this,R=arguments,B=S(M,R).event(L),F=t.apply(M,R),I=T==null?j(F):typeof T=="function"?T.apply(M,R):T,V=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),G=M.__zoom,J=typeof O=="function"?O.apply(M,R):O,ie=c(G.invert(I).concat(V/G.k),J.invert(I).concat(V/J.k));return function(ee){if(ee===1)ee=J;else{var pe=ie(ee),fe=V/pe[2];ee=new or(fe,I[0]-pe[0]*fe,I[1]-pe[1]*fe)}B.zoom(null,ee)}})}function S(A,O,T){return!T&&A.__zooming||new k(A,O)}function k(A,O){this.that=A,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(A,O),this.taps=0}k.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,O){return this.mouse&&A!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var O=ts(this.that).datum();u.call(A,this.that,new VF(A,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),O)}};function E(A,...O){if(!e.apply(this,arguments))return;var T=S(this,O).event(A),L=this.__zoom,M=Math.max(i[0],Math.min(i[1],L.k*Math.pow(2,s.apply(this,arguments)))),R=Ns(A);if(T.wheel)(T.mouse[0][0]!==R[0]||T.mouse[0][1]!==R[1])&&(T.mouse[1]=L.invert(T.mouse[0]=R)),clearTimeout(T.wheel);else{if(L.k===M)return;T.mouse=[R,L.invert(R)],Cd(this),T.start()}El(A),T.wheel=setTimeout(B,p),T.zoom("mouse",n(w(y(L,M),T.mouse[0],T.mouse[1]),T.extent,o));function B(){T.wheel=null,T.end()}}function C(A,...O){if(m||!e.apply(this,arguments))return;var T=A.currentTarget,L=S(this,O,!0).event(A),M=ts(A.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",V,!0),R=Ns(A,T),B=A.clientX,F=A.clientY;PC(A.view),_h(A),L.mouse=[R,this.__zoom.invert(R)],Cd(this),L.start();function I(G){if(El(G),!L.moved){var J=G.clientX-B,ie=G.clientY-F;L.moved=J*J+ie*ie>v}L.event(G).zoom("mouse",n(w(L.that.__zoom,L.mouse[0]=Ns(G,T),L.mouse[1]),L.extent,o))}function V(G){M.on("mousemove.zoom mouseup.zoom",null),OC(G.view,L.moved),El(G),L.event(G).end()}}function _(A,...O){if(e.apply(this,arguments)){var T=this.__zoom,L=Ns(A.changedTouches?A.changedTouches[0]:A,this),M=T.invert(L),R=T.k*(A.shiftKey?.5:2),B=n(w(y(T,R),L,M),t.apply(this,O),o);El(A),l>0?ts(this).transition().duration(l).call(N,B,L,A):ts(this).call(x.transform,B,L,A)}}function P(A,...O){if(e.apply(this,arguments)){var T=A.touches,L=T.length,M=S(this,O,A.changedTouches.length===L).event(A),R,B,F,I;for(_h(A),B=0;B<L;++B)F=T[B],I=Ns(F,this),I=[I,this.__zoom.invert(I),F.identifier],M.touch0?!M.touch1&&M.touch0[2]!==I[2]&&(M.touch1=I,M.taps=0):(M.touch0=I,R=!0,M.taps=1+!!d);d&&(d=clearTimeout(d)),R&&(M.taps<2&&(f=I[0],d=setTimeout(function(){d=null},h)),Cd(this),M.start())}}function D(A,...O){if(this.__zooming){var T=S(this,O).event(A),L=A.changedTouches,M=L.length,R,B,F,I;for(El(A),R=0;R<M;++R)B=L[R],F=Ns(B,this),T.touch0&&T.touch0[2]===B.identifier?T.touch0[0]=F:T.touch1&&T.touch1[2]===B.identifier&&(T.touch1[0]=F);if(B=T.that.__zoom,T.touch1){var V=T.touch0[0],G=T.touch0[1],J=T.touch1[0],ie=T.touch1[1],ee=(ee=J[0]-V[0])*ee+(ee=J[1]-V[1])*ee,pe=(pe=ie[0]-G[0])*pe+(pe=ie[1]-G[1])*pe;B=y(B,Math.sqrt(ee/pe)),F=[(V[0]+J[0])/2,(V[1]+J[1])/2],I=[(G[0]+ie[0])/2,(G[1]+ie[1])/2]}else if(T.touch0)F=T.touch0[0],I=T.touch0[1];else return;T.zoom("touch",n(w(B,F,I),T.extent,o))}}function z(A,...O){if(this.__zooming){var T=S(this,O).event(A),L=A.changedTouches,M=L.length,R,B;for(_h(A),m&&clearTimeout(m),m=setTimeout(function(){m=null},h),R=0;R<M;++R)B=L[R],T.touch0&&T.touch0[2]===B.identifier?delete T.touch0:T.touch1&&T.touch1[2]===B.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(B=Ns(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<b)){var F=ts(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return x.wheelDelta=function(A){return arguments.length?(s=typeof A=="function"?A:Zu(+A),x):s},x.filter=function(A){return arguments.length?(e=typeof A=="function"?A:Zu(!!A),x):e},x.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:Zu(!!A),x):r},x.extent=function(A){return arguments.length?(t=typeof A=="function"?A:Zu([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),x):t},x.scaleExtent=function(A){return arguments.length?(i[0]=+A[0],i[1]=+A[1],x):[i[0],i[1]]},x.translateExtent=function(A){return arguments.length?(o[0][0]=+A[0][0],o[1][0]=+A[1][0],o[0][1]=+A[0][1],o[1][1]=+A[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(A){return arguments.length?(n=A,x):n},x.duration=function(A){return arguments.length?(l=+A,x):l},x.interpolate=function(A){return arguments.length?(c=A,x):c},x.on=function(){var A=u.on.apply(u,arguments);return A===u?x:A},x.clickDistance=function(A){return arguments.length?(v=(A=+A)*A,x):Math.sqrt(v)},x.tapDistance=function(A){return arguments.length?(b=+A,x):b},x}const Mm=g.createContext(null),KF=Mm.Provider,Sr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},QC=Sr.error001();function ot(e,t){const n=g.useContext(Mm);if(n===null)throw new Error(QC);return SC(n,e,t)}const $t=()=>{const e=g.useContext(Mm);if(e===null)throw new Error(QC);return g.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},QF=e=>e.userSelectionActive?"none":"all";function JC({position:e,children:t,className:n,style:s,...r}){const i=ot(QF),o=`${e}`.split("-");return $.createElement("div",{className:tn(["react-flow__panel",n,...o]),style:{...s,pointerEvents:i},...r},t)}function JF({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:$.createElement(JC,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},$.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const eU=({x:e,y:t,label:n,labelStyle:s={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=g.useRef(null),[m,h]=g.useState({x:0,y:0,width:0,height:0}),p=tn(["react-flow__edge-textwrapper",u]);return g.useEffect(()=>{if(f.current){const v=f.current.getBBox();h({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:$.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:p,visibility:m.width?"visible":"hidden",...d},r&&$.createElement("rect",{width:m.width+2*o[0],x:-o[0],y:-o[1],height:m.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),$.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:f,style:s},n),c)};var tU=g.memo(eU);const $0=e=>({width:e.offsetWidth,height:e.offsetHeight}),qo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),P0=(e={x:0,y:0},t)=>({x:qo(e.x,t[0][0],t[1][0]),y:qo(e.y,t[0][1],t[1][1])}),Ib=(e,t,n)=>e<t?qo(Math.abs(e-t),1,50)/50:e>n?-qo(Math.abs(e-n),1,50)/50:0,eE=(e,t)=>{const n=Ib(e.x,35,t.width-35)*20,s=Ib(e.y,35,t.height-35)*20;return[n,s]},tE=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},nU=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),O0=({x:e,y:t,width:n,height:s})=>({x:e,y:t,x2:e+n,y2:t+s}),sU=({x:e,y:t,x2:n,y2:s})=>({x:e,y:t,width:n-e,height:s-t}),Hb=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),op=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),s=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*s)},rU=e=>Vn(e.width)&&Vn(e.height)&&Vn(e.x)&&Vn(e.y),Vn=e=>!isNaN(e)&&isFinite(e),ft=Symbol.for("internals"),nE=["Enter"," ","Escape"],aU=(e,t)=>{},iU=e=>"nativeEvent"in e;function lp(e){var r,i;const t=iU(e)?e.nativeEvent:e,n=((i=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const sE=e=>"clientX"in e,ca=(e,t)=>{var i,o;const n=sE(e),s=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,r=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:s-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},mf=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},uu=({id:e,path:t,labelX:n,labelY:s,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h=20})=>$.createElement($.Fragment,null,$.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),h&&$.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&Vn(n)&&Vn(s)?$.createElement(tU,{x:n,y:s,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);uu.displayName="BaseEdge";function _l(e,t,n){return n===void 0?n:s=>{const r=t().edges.find(i=>i.id===e);r&&n(s,{...r})}}function rE({sourceX:e,sourceY:t,targetX:n,targetY:s}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,o=Math.abs(s-t)/2,l=s<t?s+o:s-o;return[i,l,r,o]}function aE({sourceX:e,sourceY:t,targetX:n,targetY:s,sourceControlX:r,sourceControlY:i,targetControlX:o,targetControlY:l}){const c=e*.125+r*.375+o*.375+n*.125,u=t*.125+i*.375+l*.375+s*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var li;(function(e){e.Strict="strict",e.Loose="loose"})(li||(li={}));var Va;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Va||(Va={}));var Ec;(function(e){e.Partial="partial",e.Full="full"})(Ec||(Ec={}));var Xr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Xr||(Xr={}));var hf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(hf||(hf={}));var le;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(le||(le={}));function Fb({pos:e,x1:t,y1:n,x2:s,y2:r}){return e===le.Left||e===le.Right?[.5*(t+s),n]:[t,.5*(n+r)]}function iE({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:i=le.Top}){const[o,l]=Fb({pos:n,x1:e,y1:t,x2:s,y2:r}),[c,u]=Fb({pos:i,x1:s,y1:r,x2:e,y2:t}),[d,f,m,h]=aE({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${s},${r}`,d,f,m,h]}const B0=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:r=le.Bottom,targetPosition:i=le.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:v})=>{const[b,x,y]=iE({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:s,targetPosition:i});return $.createElement(uu,{path:b,labelX:x,labelY:y,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:v})});B0.displayName="SimpleBezierEdge";const Ub={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}},oU=({source:e,sourcePosition:t=le.Bottom,target:n})=>t===le.Left||t===le.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Vb=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function lU({source:e,sourcePosition:t=le.Bottom,target:n,targetPosition:s=le.Top,center:r,offset:i}){const o=Ub[t],l=Ub[s],c={x:e.x+o.x*i,y:e.y+o.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},d=oU({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",m=d[f];let h=[],p,v;const b={x:0,y:0},x={x:0,y:0},[y,w,j,N]=rE({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[f]*l[f]===-1){p=r.x??y,v=r.y??w;const k=[{x:p,y:c.y},{x:p,y:u.y}],E=[{x:c.x,y:v},{x:u.x,y:v}];o[f]===m?h=f==="x"?k:E:h=f==="x"?E:k}else{const k=[{x:c.x,y:u.y}],E=[{x:u.x,y:c.y}];if(f==="x"?h=o.x===m?E:k:h=o.y===m?k:E,t===s){const z=Math.abs(e[f]-n[f]);if(z<=i){const A=Math.min(i-1,i-z);o[f]===m?b[f]=(c[f]>e[f]?-1:1)*A:x[f]=(u[f]>n[f]?-1:1)*A}}if(t!==s){const z=f==="x"?"y":"x",A=o[f]===l[z],O=c[z]>u[z],T=c[z]<u[z];(o[f]===1&&(!A&&O||A&&T)||o[f]!==1&&(!A&&T||A&&O))&&(h=f==="x"?k:E)}const C={x:c.x+b.x,y:c.y+b.y},_={x:u.x+x.x,y:u.y+x.y},P=Math.max(Math.abs(C.x-h[0].x),Math.abs(_.x-h[0].x)),D=Math.max(Math.abs(C.y-h[0].y),Math.abs(_.y-h[0].y));P>=D?(p=(C.x+_.x)/2,v=h[0].y):(p=h[0].x,v=(C.y+_.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...h,{x:u.x+x.x,y:u.y+x.y},n],p,v,j,N]}function cU(e,t,n,s){const r=Math.min(Vb(e,t)/2,Vb(t,n)/2,s),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+r*u},${o}Q ${i},${o} ${i},${o+r*d}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${o+r*c}Q ${i},${o} ${i+r*l},${o}`}function cp({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:i=le.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,m,h,p]=lU({source:{x:e,y:t},sourcePosition:n,target:{x:s,y:r},targetPosition:i,center:{x:l,y:c},offset:u});return[d.reduce((b,x,y)=>{let w="";return y>0&&y<d.length-1?w=cU(d[y-1],x,d[y+1],o):w=`${y===0?"M":"L"}${x.x} ${x.y}`,b+=w,b},""),f,m,h,p]}const Rm=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=le.Bottom,targetPosition:m=le.Top,markerEnd:h,markerStart:p,pathOptions:v,interactionWidth:b})=>{const[x,y,w]=cp({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:s,targetPosition:m,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return $.createElement(uu,{path:x,labelX:y,labelY:w,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:p,interactionWidth:b})});Rm.displayName="SmoothStepEdge";const I0=g.memo(e=>{var t;return $.createElement(Rm,{...e,pathOptions:g.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});I0.displayName="StepEdge";function uU({sourceX:e,sourceY:t,targetX:n,targetY:s}){const[r,i,o,l]=rE({sourceX:e,sourceY:t,targetX:n,targetY:s});return[`M ${e},${t}L ${n},${s}`,r,i,o,l]}const H0=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h})=>{const[p,v,b]=uU({sourceX:e,sourceY:t,targetX:n,targetY:s});return $.createElement(uu,{path:p,labelX:v,labelY:b,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h})});H0.displayName="StraightEdge";function Gu(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function qb({pos:e,x1:t,y1:n,x2:s,y2:r,c:i}){switch(e){case le.Left:return[t-Gu(t-s,i),n];case le.Right:return[t+Gu(s-t,i),n];case le.Top:return[t,n-Gu(n-r,i)];case le.Bottom:return[t,n+Gu(r-n,i)]}}function oE({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:i=le.Top,curvature:o=.25}){const[l,c]=qb({pos:n,x1:e,y1:t,x2:s,y2:r,c:o}),[u,d]=qb({pos:i,x1:s,y1:r,x2:e,y2:t,c:o}),[f,m,h,p]=aE({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${s},${r}`,f,m,h,p]}const gf=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:r=le.Bottom,targetPosition:i=le.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,pathOptions:v,interactionWidth:b})=>{const[x,y,w]=oE({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:s,targetPosition:i,curvature:v==null?void 0:v.curvature});return $.createElement(uu,{path:x,labelX:y,labelY:w,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:b})});gf.displayName="BezierEdge";const F0=g.createContext(null),dU=F0.Provider;F0.Consumer;const fU=()=>g.useContext(F0),mU=e=>"id"in e&&"source"in e&&"target"in e,hU=({source:e,sourceHandle:t,target:n,targetHandle:s})=>`reactflow__edge-${e}${t||""}-${n}${s||""}`,up=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(s=>`${s}=${e[s]}`).join("&")}`,gU=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),U0=(e,t)=>{if(!e.source||!e.target)return t;let n;return mU(e)?n={...e}:n={...e,id:hU(e)},gU(n,t)?t:t.concat(n)},dp=({x:e,y:t},[n,s,r],i,[o,l])=>{const c={x:(e-n)/r,y:(t-s)/r};return i?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},lE=({x:e,y:t},[n,s,r])=>({x:e*r+n,y:t*r+s}),vo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],s=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-s};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-s}:r}},V0=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((s,r)=>{const{x:i,y:o}=vo(r,t).positionAbsolute;return nU(s,O0({x:i,y:o,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return sU(n)},cE=(e,t,[n,s,r]=[0,0,1],i=!1,o=!1,l=[0,0])=>{const c={x:(t.x-n)/r,y:(t.y-s)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(d=>{const{width:f,height:m,selectable:h=!0,hidden:p=!1}=d;if(o&&!h||p)return!1;const{positionAbsolute:v}=vo(d,l),b={x:v.x,y:v.y,width:f||0,height:m||0},x=op(c,b),y=typeof f>"u"||typeof m>"u"||f===null||m===null,w=i&&x>0,j=(f||0)*(m||0);(y||w||x>=j||d.dragging)&&u.push(d)}),u},uE=(e,t)=>{const n=e.map(s=>s.id);return t.filter(s=>n.includes(s.source)||n.includes(s.target))},dE=(e,t,n,s,r,i=.1)=>{const o=t/(e.width*(1+i)),l=n/(e.height*(1+i)),c=Math.min(o,l),u=qo(c,s,r),d=e.x+e.width/2,f=e.y+e.height/2,m=t/2-d*u,h=n/2-f*u;return{x:m,y:h,zoom:u}},La=(e,t=0)=>e.transition().duration(t);function Zb(e,t,n,s){return(t[n]||[]).reduce((r,i)=>{var o,l;return`${e.id}-${i.id}-${n}`!==s&&r.push({id:i.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),r},[])}function pU(e,t,n,s,r,i){const{x:o,y:l}=ca(e),u=t.elementsFromPoint(o,l).find(p=>p.classList.contains("react-flow__handle"));if(u){const p=u.getAttribute("data-nodeid");if(p){const v=q0(void 0,u),b=u.getAttribute("data-handleid"),x=i({nodeId:p,id:b,type:v});if(x){const y=r.find(w=>w.nodeId===p&&w.type===v&&w.id===b);return{handle:{id:b,type:v,nodeId:p,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:x}}}}let d=[],f=1/0;if(r.forEach(p=>{const v=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);if(v<=s){const b=i(p);v<=f&&(v<f?d=[{handle:p,validHandleResult:b}]:v===f&&d.push({handle:p,validHandleResult:b}),f=v)}}),!d.length)return{handle:null,validHandleResult:fE()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:p})=>p.isValid),h=d.some(({handle:p})=>p.type==="target");return d.find(({handle:p,validHandleResult:v})=>h?p.type==="target":m?v.isValid:!0)||d[0]}const xU={source:null,target:null,sourceHandle:null,targetHandle:null},fE=()=>({handleDomNode:null,isValid:!1,connection:xU,endHandle:null});function mE(e,t,n,s,r,i,o){const l=r==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...fE(),handleDomNode:c};if(c){const d=q0(void 0,c),f=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),p=c.classList.contains("connectableend"),v={source:l?f:n,sourceHandle:l?m:s,target:l?n:f,targetHandle:l?s:m};u.connection=v,h&&p&&(t===li.Strict?l&&d==="source"||!l&&d==="target":f!==n||m!==s)&&(u.endHandle={nodeId:f,handleId:m,type:d},u.isValid=i(v))}return u}function vU({nodes:e,nodeId:t,handleId:n,handleType:s}){return e.reduce((r,i)=>{if(i[ft]){const{handleBounds:o}=i[ft];let l=[],c=[];o&&(l=Zb(i,o,"source",`${t}-${n}-${s}`),c=Zb(i,o,"target",`${t}-${n}-${s}`)),r.push(...l,...c)}return r},[])}function q0(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ah(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function yU(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function hE({event:e,handleId:t,nodeId:n,onConnect:s,isTarget:r,getState:i,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=tE(e.target),{connectionMode:f,domNode:m,autoPanOnConnect:h,connectionRadius:p,onConnectStart:v,panBy:b,getNodes:x,cancelConnection:y}=i();let w=0,j;const{x:N,y:S}=ca(e),k=d==null?void 0:d.elementFromPoint(N,S),E=q0(c,k),C=m==null?void 0:m.getBoundingClientRect();if(!C||!E)return;let _,P=ca(e,C),D=!1,z=null,A=!1,O=null;const T=vU({nodes:x(),nodeId:n,handleId:t,handleType:E}),L=()=>{if(!h)return;const[B,F]=eE(P,C);b({x:B,y:F}),w=requestAnimationFrame(L)};o({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:E,connectionStartHandle:{nodeId:n,handleId:t,type:E},connectionEndHandle:null}),v==null||v(e,{nodeId:n,handleId:t,handleType:E});function M(B){const{transform:F}=i();P=ca(B,C);const{handle:I,validHandleResult:V}=pU(B,d,dp(P,F,!1,[1,1]),p,T,G=>mE(G,f,n,t,r?"target":"source",l,d));if(j=I,D||(L(),D=!0),O=V.handleDomNode,z=V.connection,A=V.isValid,o({connectionPosition:j&&A?lE({x:j.x,y:j.y},F):P,connectionStatus:yU(!!j,A),connectionEndHandle:V.endHandle}),!j&&!A&&!O)return Ah(_);z.source!==z.target&&O&&(Ah(_),_=O,O.classList.add("connecting","react-flow__handle-connecting"),O.classList.toggle("valid",A),O.classList.toggle("react-flow__handle-valid",A))}function R(B){var F,I;(j||O)&&z&&A&&(s==null||s(z)),(I=(F=i()).onConnectEnd)==null||I.call(F,B),c&&(u==null||u(B)),Ah(_),y(),cancelAnimationFrame(w),D=!1,A=!1,z=null,O=null,d.removeEventListener("mousemove",M),d.removeEventListener("mouseup",R),d.removeEventListener("touchmove",M),d.removeEventListener("touchend",R)}d.addEventListener("mousemove",M),d.addEventListener("mouseup",R),d.addEventListener("touchmove",M),d.addEventListener("touchend",R)}const Gb=()=>!0,bU=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),wU=(e,t,n)=>s=>{const{connectionStartHandle:r,connectionEndHandle:i,connectionClickStartHandle:o}=s;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},gE=g.forwardRef(({type:e="source",position:t=le.Top,isValidConnection:n,isConnectable:s=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...m},h)=>{var C,_;const p=o||null,v=e==="target",b=$t(),x=fU(),{connectOnClick:y,noPanClassName:w}=ot(bU,un),{connecting:j,clickConnecting:N}=ot(wU(x,p,e),un);x||(_=(C=b.getState()).onError)==null||_.call(C,"010",Sr.error010());const S=P=>{const{defaultEdgeOptions:D,onConnect:z,hasDefaultEdges:A}=b.getState(),O={...D,...P};if(A){const{edges:T,setEdges:L}=b.getState();L(U0(O,T))}z==null||z(O),l==null||l(O)},k=P=>{if(!x)return;const D=sE(P);r&&(D&&P.button===0||!D)&&hE({event:P,handleId:p,nodeId:x,onConnect:S,isTarget:v,getState:b.getState,setState:b.setState,isValidConnection:n||b.getState().isValidConnection||Gb}),D?d==null||d(P):f==null||f(P)},E=P=>{const{onClickConnectStart:D,onClickConnectEnd:z,connectionClickStartHandle:A,connectionMode:O,isValidConnection:T}=b.getState();if(!x||!A&&!r)return;if(!A){D==null||D(P,{nodeId:x,handleId:p,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:x,type:e,handleId:p}});return}const L=tE(P.target),M=n||T||Gb,{connection:R,isValid:B}=mE({nodeId:x,id:p,type:e},O,A.nodeId,A.handleId||null,A.type,M,L);B&&S(R),z==null||z(P),b.setState({connectionClickStartHandle:null})};return $.createElement("div",{"data-handleid":p,"data-nodeid":x,"data-handlepos":t,"data-id":`${x}-${p}-${e}`,className:tn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,u,{source:!v,target:v,connectable:s,connectablestart:r,connectableend:i,connecting:N,connectionindicator:s&&(r&&!j||i&&j)}]),onMouseDown:k,onTouchStart:k,onClick:y?E:void 0,ref:h,...m},c)});gE.displayName="Handle";var Zo=g.memo(gE);const pE=({data:e,isConnectable:t,targetPosition:n=le.Top,sourcePosition:s=le.Bottom})=>$.createElement($.Fragment,null,$.createElement(Zo,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,$.createElement(Zo,{type:"source",position:s,isConnectable:t}));pE.displayName="DefaultNode";var fp=g.memo(pE);const xE=({data:e,isConnectable:t,sourcePosition:n=le.Bottom})=>$.createElement($.Fragment,null,e==null?void 0:e.label,$.createElement(Zo,{type:"source",position:n,isConnectable:t}));xE.displayName="InputNode";var vE=g.memo(xE);const yE=({data:e,isConnectable:t,targetPosition:n=le.Top})=>$.createElement($.Fragment,null,$.createElement(Zo,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);yE.displayName="OutputNode";var bE=g.memo(yE);const Z0=()=>null;Z0.displayName="GroupNode";const jU=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Yu=e=>e.id;function NU(e,t){return un(e.selectedNodes.map(Yu),t.selectedNodes.map(Yu))&&un(e.selectedEdges.map(Yu),t.selectedEdges.map(Yu))}const wE=g.memo(({onSelectionChange:e})=>{const t=$t(),{selectedNodes:n,selectedEdges:s}=ot(jU,NU);return g.useEffect(()=>{const r={nodes:n,edges:s};e==null||e(r),t.getState().onSelectionChange.forEach(i=>i(r))},[n,s,e]),null});wE.displayName="SelectionListener";const SU=e=>!!e.onSelectionChange;function kU({onSelectionChange:e}){const t=ot(SU);return e||t?$.createElement(wE,{onSelectionChange:e}):null}const CU=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Bi(e,t){g.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ce(e,t,n){g.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const EU=({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:r,onConnectStart:i,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:m,edgesUpdatable:h,elevateNodesOnSelect:p,minZoom:v,maxZoom:b,nodeExtent:x,onNodesChange:y,onEdgesChange:w,elementsSelectable:j,connectionMode:N,snapGrid:S,snapToGrid:k,translateExtent:E,connectOnClick:C,defaultEdgeOptions:_,fitView:P,fitViewOptions:D,onNodesDelete:z,onEdgesDelete:A,onNodeDrag:O,onNodeDragStart:T,onNodeDragStop:L,onSelectionDrag:M,onSelectionDragStart:R,onSelectionDragStop:B,noPanClassName:F,nodeOrigin:I,rfId:V,autoPanOnConnect:G,autoPanOnNodeDrag:J,onError:ie,connectionRadius:ee,isValidConnection:pe,nodeDragThreshold:fe})=>{const{setNodes:we,setEdges:U,setDefaultNodesAndEdges:X,setMinZoom:Q,setMaxZoom:W,setTranslateExtent:se,setNodeExtent:ye,reset:ue}=ot(CU,un),te=$t();return g.useEffect(()=>{const $e=s==null?void 0:s.map(vt=>({...vt,..._}));return X(n,$e),()=>{ue()}},[]),Ce("defaultEdgeOptions",_,te.setState),Ce("connectionMode",N,te.setState),Ce("onConnect",r,te.setState),Ce("onConnectStart",i,te.setState),Ce("onConnectEnd",o,te.setState),Ce("onClickConnectStart",l,te.setState),Ce("onClickConnectEnd",c,te.setState),Ce("nodesDraggable",u,te.setState),Ce("nodesConnectable",d,te.setState),Ce("nodesFocusable",f,te.setState),Ce("edgesFocusable",m,te.setState),Ce("edgesUpdatable",h,te.setState),Ce("elementsSelectable",j,te.setState),Ce("elevateNodesOnSelect",p,te.setState),Ce("snapToGrid",k,te.setState),Ce("snapGrid",S,te.setState),Ce("onNodesChange",y,te.setState),Ce("onEdgesChange",w,te.setState),Ce("connectOnClick",C,te.setState),Ce("fitViewOnInit",P,te.setState),Ce("fitViewOnInitOptions",D,te.setState),Ce("onNodesDelete",z,te.setState),Ce("onEdgesDelete",A,te.setState),Ce("onNodeDrag",O,te.setState),Ce("onNodeDragStart",T,te.setState),Ce("onNodeDragStop",L,te.setState),Ce("onSelectionDrag",M,te.setState),Ce("onSelectionDragStart",R,te.setState),Ce("onSelectionDragStop",B,te.setState),Ce("noPanClassName",F,te.setState),Ce("nodeOrigin",I,te.setState),Ce("rfId",V,te.setState),Ce("autoPanOnConnect",G,te.setState),Ce("autoPanOnNodeDrag",J,te.setState),Ce("onError",ie,te.setState),Ce("connectionRadius",ee,te.setState),Ce("isValidConnection",pe,te.setState),Ce("nodeDragThreshold",fe,te.setState),Bi(e,we),Bi(t,U),Bi(v,Q),Bi(b,W),Bi(E,se),Bi(x,ye),null},Yb={display:"none"},_U={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},jE="react-flow__node-desc",NE="react-flow__edge-desc",AU="react-flow__aria-live",TU=e=>e.ariaLiveMessage;function MU({rfId:e}){const t=ot(TU);return $.createElement("div",{id:`${AU}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:_U},t)}function RU({rfId:e,disableKeyboardA11y:t}){return $.createElement($.Fragment,null,$.createElement("div",{id:`${jE}-${e}`,style:Yb},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),$.createElement("div",{id:`${NE}-${e}`,style:Yb},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&$.createElement(MU,{rfId:e}))}var _c=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,s]=g.useState(!1),r=g.useRef(!1),i=g.useRef(new Set([])),[o,l]=g.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,m)=>f.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return g.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&lp(h))return!1;const v=Wb(h.code,l);i.current.add(h[v]),Xb(o,i.current,!1)&&(h.preventDefault(),s(!0))},f=h=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&lp(h))return!1;const v=Wb(h.code,l);Xb(o,i.current,!0)?(s(!1),i.current.clear()):i.current.delete(h[v]),h.key==="Meta"&&i.current.clear(),r.current=!1},m=()=>{i.current.clear(),s(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",m)}}},[e,s]),n};function Xb(e,t,n){return e.filter(s=>n||s.length===t.size).some(s=>s.every(r=>t.has(r)))}function Wb(e,t){return t.includes(e)?"code":"key"}function SE(e,t,n,s){var l,c;const r=e.parentNode||e.parentId;if(!r)return n;const i=t.get(r),o=vo(i,s);return SE(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((l=i[ft])==null?void 0:l.z)??0)>(n.z??0)?((c=i[ft])==null?void 0:c.z)??0:n.z??0},s)}function kE(e,t,n){e.forEach(s=>{var i;const r=s.parentNode||s.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[s.id]){const{x:o,y:l,z:c}=SE(s,e,{...s.position,z:((i=s[ft])==null?void 0:i.z)??0},t);s.positionAbsolute={x:o,y:l},s[ft].z=c,n!=null&&n[s.id]&&(s[ft].isParent=!0)}})}function Th(e,t,n,s){const r=new Map,i={},o=s?1e3:0;return e.forEach(l=>{var h;const c=(Vn(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(i[f]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,ft,{enumerable:!1,value:{handleBounds:m||(h=u==null?void 0:u[ft])==null?void 0:h.handleBounds,z:c}}),r.set(l.id,d)}),kE(r,n,i),r}function CE(e,t={}){const{getNodes:n,width:s,height:r,minZoom:i,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),m=t.initial&&!u&&d;if(l&&c&&(m||!t.initial)){const p=n().filter(b=>{var y;const x=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(y=t.nodes)!=null&&y.length?x&&t.nodes.some(w=>w.id===b.id):x}),v=p.every(b=>b.width&&b.height);if(p.length>0&&v){const b=V0(p,f),{x,y,zoom:w}=dE(b,s,r,t.minZoom??i,t.maxZoom??o,t.padding??.1),j=la.translate(x,y).scale(w);return typeof t.duration=="number"&&t.duration>0?l.transform(La(c,t.duration),j):l.transform(c,j),!0}}return!1}function DU(e,t){return e.forEach(n=>{const s=t.get(n.id);s&&t.set(s.id,{...s,[ft]:s[ft],selected:n.selected})}),new Map(t)}function zU(e,t){return t.map(n=>{const s=e.find(r=>r.id===n.id);return s&&(n.selected=s.selected),n})}function Xu({changedNodes:e,changedEdges:t,get:n,set:s}){const{nodeInternals:r,edges:i,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&s({nodeInternals:DU(e,r)}),o==null||o(e)),t!=null&&t.length&&(u&&s({edges:zU(t,i)}),l==null||l(t))}const Ii=()=>{},LU={zoomIn:Ii,zoomOut:Ii,zoomTo:Ii,getZoom:()=>1,setViewport:Ii,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ii,fitBounds:Ii,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},$U=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),PU=()=>{const e=$t(),{d3Zoom:t,d3Selection:n}=ot($U,un);return g.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(La(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(La(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,i)=>t.scaleTo(La(n,i==null?void 0:i.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{const[o,l,c]=e.getState().transform,u=la.translate(r.x??o,r.y??l).scale(r.zoom??c);t.transform(La(n,i==null?void 0:i.duration),u)},getViewport:()=>{const[r,i,o]=e.getState().transform;return{x:r,y:i,zoom:o}},fitView:r=>CE(e.getState,r),setCenter:(r,i,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=l/2-r*d,m=c/2-i*d,h=la.translate(f,m).scale(d);t.transform(La(n,o==null?void 0:o.duration),h)},fitBounds:(r,i)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:m}=dE(r,o,l,c,u,(i==null?void 0:i.padding)??.1),h=la.translate(d,f).scale(m);t.transform(La(n,i==null?void 0:i.duration),h)},project:r=>{const{transform:i,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),dp(r,i,o,l)},screenToFlowPosition:r=>{const{transform:i,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return r;const{x:u,y:d}=c.getBoundingClientRect(),f={x:r.x-u,y:r.y-d};return dp(f,i,o,l)},flowToScreenPosition:r=>{const{transform:i,domNode:o}=e.getState();if(!o)return r;const{x:l,y:c}=o.getBoundingClientRect(),u=lE(r,i);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:LU,[t,n])};function G0(){const e=PU(),t=$t(),n=g.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),s=g.useCallback(v=>t.getState().nodeInternals.get(v),[]),r=g.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(b=>({...b}))},[]),i=g.useCallback(v=>{const{edges:b=[]}=t.getState();return b.find(x=>x.id===v)},[]),o=g.useCallback(v=>{const{getNodes:b,setNodes:x,hasDefaultNodes:y,onNodesChange:w}=t.getState(),j=b(),N=typeof v=="function"?v(j):v;if(y)x(N);else if(w){const S=N.length===0?j.map(k=>({type:"remove",id:k.id})):N.map(k=>({item:k,type:"reset"}));w(S)}},[]),l=g.useCallback(v=>{const{edges:b=[],setEdges:x,hasDefaultEdges:y,onEdgesChange:w}=t.getState(),j=typeof v=="function"?v(b):v;if(y)x(j);else if(w){const N=j.length===0?b.map(S=>({type:"remove",id:S.id})):j.map(S=>({item:S,type:"reset"}));w(N)}},[]),c=g.useCallback(v=>{const b=Array.isArray(v)?v:[v],{getNodes:x,setNodes:y,hasDefaultNodes:w,onNodesChange:j}=t.getState();if(w){const S=[...x(),...b];y(S)}else if(j){const N=b.map(S=>({item:S,type:"add"}));j(N)}},[]),u=g.useCallback(v=>{const b=Array.isArray(v)?v:[v],{edges:x=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:j}=t.getState();if(w)y([...x,...b]);else if(j){const N=b.map(S=>({item:S,type:"add"}));j(N)}},[]),d=g.useCallback(()=>{const{getNodes:v,edges:b=[],transform:x}=t.getState(),[y,w,j]=x;return{nodes:v().map(N=>({...N})),edges:b.map(N=>({...N})),viewport:{x:y,y:w,zoom:j}}},[]),f=g.useCallback(({nodes:v,edges:b})=>{const{nodeInternals:x,getNodes:y,edges:w,hasDefaultNodes:j,hasDefaultEdges:N,onNodesDelete:S,onEdgesDelete:k,onNodesChange:E,onEdgesChange:C}=t.getState(),_=(v||[]).map(O=>O.id),P=(b||[]).map(O=>O.id),D=y().reduce((O,T)=>{const L=T.parentNode||T.parentId,M=!_.includes(T.id)&&L&&O.find(B=>B.id===L);return(typeof T.deletable=="boolean"?T.deletable:!0)&&(_.includes(T.id)||M)&&O.push(T),O},[]),z=w.filter(O=>typeof O.deletable=="boolean"?O.deletable:!0),A=z.filter(O=>P.includes(O.id));if(D||A){const O=uE(D,z),T=[...A,...O],L=T.reduce((M,R)=>(M.includes(R.id)||M.push(R.id),M),[]);if((N||j)&&(N&&t.setState({edges:w.filter(M=>!L.includes(M.id))}),j&&(D.forEach(M=>{x.delete(M.id)}),t.setState({nodeInternals:new Map(x)}))),L.length>0&&(k==null||k(T),C&&C(L.map(M=>({id:M,type:"remove"})))),D.length>0&&(S==null||S(D),E)){const M=D.map(R=>({id:R.id,type:"remove"}));E(M)}}},[]),m=g.useCallback(v=>{const b=rU(v),x=b?null:t.getState().nodeInternals.get(v.id);return!b&&!x?[null,null,b]:[b?v:Hb(x),x,b]},[]),h=g.useCallback((v,b=!0,x)=>{const[y,w,j]=m(v);return y?(x||t.getState().getNodes()).filter(N=>{if(!j&&(N.id===w.id||!N.positionAbsolute))return!1;const S=Hb(N),k=op(S,y);return b&&k>0||k>=y.width*y.height}):[]},[]),p=g.useCallback((v,b,x=!0)=>{const[y]=m(v);if(!y)return!1;const w=op(y,b);return x&&w>0||w>=y.width*y.height},[]);return g.useMemo(()=>({...e,getNodes:n,getNode:s,getEdges:r,getEdge:i,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:p}),[e,n,s,r,i,o,l,c,u,d,f,h,p])}const OU={actInsideInputWithModifier:!1};var BU=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=$t(),{deleteElements:s}=G0(),r=_c(e,OU),i=_c(t);g.useEffect(()=>{if(r){const{edges:o,getNodes:l}=n.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);s({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),g.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function IU(e){const t=$t();g.useEffect(()=>{let n;const s=()=>{var i,o;if(!e.current)return;const r=$0(e.current);(r.height===0||r.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",Sr.error004())),t.setState({width:r.width||500,height:r.height||500})};return s(),window.addEventListener("resize",s),e.current&&(n=new ResizeObserver(()=>s()),n.observe(e.current)),()=>{window.removeEventListener("resize",s),n&&e.current&&n.unobserve(e.current)}},[])}const Y0={position:"absolute",width:"100%",height:"100%",top:0,left:0},HU=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Wu=e=>({x:e.x,y:e.y,zoom:e.k}),Hi=(e,t)=>e.target.closest(`.${t}`),Kb=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Qb=e=>{const t=e.ctrlKey&&mf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},FU=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),UU=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:s,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Va.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:m,translateExtent:h,minZoom:p,maxZoom:v,zoomActivationKeyCode:b,preventScrolling:x=!0,children:y,noWheelClassName:w,noPanClassName:j})=>{const N=g.useRef(),S=$t(),k=g.useRef(!1),E=g.useRef(!1),C=g.useRef(null),_=g.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:D,d3ZoomHandler:z,userSelectionActive:A}=ot(FU,un),O=_c(b),T=g.useRef(0),L=g.useRef(!1),M=g.useRef();return IU(C),g.useEffect(()=>{if(C.current){const R=C.current.getBoundingClientRect(),B=WF().scaleExtent([p,v]).translateExtent(h),F=ts(C.current).call(B),I=la.translate(m.x,m.y).scale(qo(m.zoom,p,v)),V=[[0,0],[R.width,R.height]],G=B.constrain()(I,V,h);B.transform(F,G),B.wheelDelta(Qb),S.setState({d3Zoom:B,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:C.current.closest(".react-flow")})}},[]),g.useEffect(()=>{D&&P&&(o&&!O&&!A?D.on("wheel.zoom",R=>{if(Hi(R,w))return!1;R.preventDefault(),R.stopImmediatePropagation();const B=D.property("__zoom").k||1;if(R.ctrlKey&&i){const pe=Ns(R),fe=Qb(R),we=B*Math.pow(2,fe);P.scaleTo(D,we,pe,R);return}const F=R.deltaMode===1?20:1;let I=c===Va.Vertical?0:R.deltaX*F,V=c===Va.Horizontal?0:R.deltaY*F;!mf()&&R.shiftKey&&c!==Va.Vertical&&(I=R.deltaY*F,V=0),P.translateBy(D,-(I/B)*l,-(V/B)*l,{internal:!0});const G=Wu(D.property("__zoom")),{onViewportChangeStart:J,onViewportChange:ie,onViewportChangeEnd:ee}=S.getState();clearTimeout(M.current),L.current||(L.current=!0,t==null||t(R,G),J==null||J(G)),L.current&&(e==null||e(R,G),ie==null||ie(G),M.current=setTimeout(()=>{n==null||n(R,G),ee==null||ee(G),L.current=!1},150))},{passive:!1}):typeof z<"u"&&D.on("wheel.zoom",function(R,B){if(!x&&R.type==="wheel"&&!R.ctrlKey||Hi(R,w))return null;R.preventDefault(),z.call(this,R,B)},{passive:!1}))},[A,o,c,D,P,z,O,i,x,w,t,e,n]),g.useEffect(()=>{P&&P.on("start",R=>{var I,V;if(!R.sourceEvent||R.sourceEvent.internal)return null;T.current=(I=R.sourceEvent)==null?void 0:I.button;const{onViewportChangeStart:B}=S.getState(),F=Wu(R.transform);k.current=!0,_.current=F,((V=R.sourceEvent)==null?void 0:V.type)==="mousedown"&&S.setState({paneDragging:!0}),B==null||B(F),t==null||t(R.sourceEvent,F)})},[P,t]),g.useEffect(()=>{P&&(A&&!k.current?P.on("zoom",null):A||P.on("zoom",R=>{var F;const{onViewportChange:B}=S.getState();if(S.setState({transform:[R.transform.x,R.transform.y,R.transform.k]}),E.current=!!(s&&Kb(f,T.current??0)),(e||B)&&!((F=R.sourceEvent)!=null&&F.internal)){const I=Wu(R.transform);B==null||B(I),e==null||e(R.sourceEvent,I)}}))},[A,P,e,f,s]),g.useEffect(()=>{P&&P.on("end",R=>{if(!R.sourceEvent||R.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=S.getState();if(k.current=!1,S.setState({paneDragging:!1}),s&&Kb(f,T.current??0)&&!E.current&&s(R.sourceEvent),E.current=!1,(n||B)&&HU(_.current,R.transform)){const F=Wu(R.transform);_.current=F,clearTimeout(N.current),N.current=setTimeout(()=>{B==null||B(F),n==null||n(R.sourceEvent,F)},o?150:0)}})},[P,o,f,n,s]),g.useEffect(()=>{P&&P.filter(R=>{const B=O||r,F=i&&R.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&R.button===1&&R.type==="mousedown"&&(Hi(R,"react-flow__node")||Hi(R,"react-flow__edge")))return!0;if(!f&&!B&&!o&&!u&&!i||A||!u&&R.type==="dblclick"||Hi(R,w)&&R.type==="wheel"||Hi(R,j)&&(R.type!=="wheel"||o&&R.type==="wheel"&&!O)||!i&&R.ctrlKey&&R.type==="wheel"||!B&&!o&&!F&&R.type==="wheel"||!f&&(R.type==="mousedown"||R.type==="touchstart")||Array.isArray(f)&&!f.includes(R.button)&&R.type==="mousedown")return!1;const I=Array.isArray(f)&&f.includes(R.button)||!R.button||R.button<=1;return(!R.ctrlKey||R.type==="wheel")&&I})},[A,P,r,i,o,u,f,d,O]),$.createElement("div",{className:"react-flow__renderer",ref:C,style:Y0},y)},VU=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function qU(){const{userSelectionActive:e,userSelectionRect:t}=ot(VU,un);return e&&t?$.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Jb(e,t){const n=t.parentNode||t.parentId,s=e.find(r=>r.id===n);if(s){const r=t.position.x+t.width-s.width,i=t.position.y+t.height-s.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(s.style={...s.style},s.style.width=s.style.width??s.width,s.style.height=s.style.height??s.height,r>0&&(s.style.width+=r),i>0&&(s.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);s.position.x=s.position.x-o,s.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);s.position.y=s.position.y-o,s.style.height+=o,t.position.y=0}s.width=s.style.width,s.height=s.style.height}}}function EE(e,t){if(e.some(s=>s.type==="reset"))return e.filter(s=>s.type==="reset").map(s=>s.item);const n=e.filter(s=>s.type==="add").map(s=>s.item);return t.reduce((s,r)=>{const i=e.filter(l=>l.id===r.id);if(i.length===0)return s.push(r),s;const o={...r};for(const l of i)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&Jb(s,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&Jb(s,o);break}case"remove":return s}return s.push(o),s},n)}function _E(e,t){return EE(e,t)}function ZU(e,t){return EE(e,t)}const Vr=(e,t)=>({id:e,type:"select",selected:t});function Ki(e,t){return e.reduce((n,s)=>{const r=t.includes(s.id);return!s.selected&&r?(s.selected=!0,n.push(Vr(s.id,!0))):s.selected&&!r&&(s.selected=!1,n.push(Vr(s.id,!1))),n},[])}const Mh=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},GU=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),AE=g.memo(({isSelecting:e,selectionMode:t=Ec.Full,panOnDrag:n,onSelectionStart:s,onSelectionEnd:r,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const m=g.useRef(null),h=$t(),p=g.useRef(0),v=g.useRef(0),b=g.useRef(),{userSelectionActive:x,elementsSelectable:y,dragging:w}=ot(GU,un),j=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,v.current=0},N=z=>{i==null||i(z),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},S=z=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){z.preventDefault();return}o==null||o(z)},k=l?z=>l(z):void 0,E=z=>{const{resetSelectedElements:A,domNode:O}=h.getState();if(b.current=O==null?void 0:O.getBoundingClientRect(),!y||!e||z.button!==0||z.target!==m.current||!b.current)return;const{x:T,y:L}=ca(z,b.current);A(),h.setState({userSelectionRect:{width:0,height:0,startX:T,startY:L,x:T,y:L}}),s==null||s(z)},C=z=>{const{userSelectionRect:A,nodeInternals:O,edges:T,transform:L,onNodesChange:M,onEdgesChange:R,nodeOrigin:B,getNodes:F}=h.getState();if(!e||!b.current||!A)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const I=ca(z,b.current),V=A.startX??0,G=A.startY??0,J={...A,x:I.x<V?I.x:V,y:I.y<G?I.y:G,width:Math.abs(I.x-V),height:Math.abs(I.y-G)},ie=F(),ee=cE(O,J,L,t===Ec.Partial,!0,B),pe=uE(ee,T).map(we=>we.id),fe=ee.map(we=>we.id);if(p.current!==fe.length){p.current=fe.length;const we=Ki(ie,fe);we.length&&(M==null||M(we))}if(v.current!==pe.length){v.current=pe.length;const we=Ki(T,pe);we.length&&(R==null||R(we))}h.setState({userSelectionRect:J})},_=z=>{if(z.button!==0)return;const{userSelectionRect:A}=h.getState();!x&&A&&z.target===m.current&&(N==null||N(z)),h.setState({nodesSelectionActive:p.current>0}),j(),r==null||r(z)},P=z=>{x&&(h.setState({nodesSelectionActive:p.current>0}),r==null||r(z)),j()},D=y&&(e||x);return $.createElement("div",{className:tn(["react-flow__pane",{dragging:w,selection:e}]),onClick:D?void 0:Mh(N,m),onContextMenu:Mh(S,m),onWheel:Mh(k,m),onMouseEnter:D?void 0:c,onMouseDown:D?E:void 0,onMouseMove:D?C:u,onMouseUp:D?_:void 0,onMouseLeave:D?P:d,ref:m,style:Y0},f,$.createElement(qU,null))});AE.displayName="Pane";function TE(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const s=t.get(n);return s?s.selected?!0:TE(s,t):!1}function ew(e,t,n){let s=e;do{if(s!=null&&s.matches(t))return!0;if(s===n.current)return!1;s=s.parentElement}while(s);return!1}function YU(e,t,n,s){return Array.from(e.values()).filter(r=>(r.selected||r.id===s)&&(!r.parentNode||r.parentId||!TE(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var i,o;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=r.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((o=r.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function XU(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function ME(e,t,n,s,r=[0,0],i){const o=XU(e,e.extent||s);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:m,y:h}=vo(f,r).positionAbsolute;l=f&&Vn(m)&&Vn(h)&&Vn(f.width)&&Vn(f.height)?[[m+e.width*r[0],h+e.height*r[1]],[m+f.width-e.width+e.width*r[0],h+f.height-e.height+e.height*r[1]]]:l}else i==null||i("005",Sr.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:m,y:h}=vo(f,r).positionAbsolute;l=[[e.extent[0][0]+m,e.extent[0][1]+h],[e.extent[1][0]+m,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const f=n.get(c);u=vo(f,r).positionAbsolute}const d=l&&l!=="parent"?P0(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function Rh({nodeId:e,dragItems:t,nodeInternals:n}){const s=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?s.find(r=>r.id===e):s[0],s]}const tw=(e,t,n,s)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const i=Array.from(r),o=t.getBoundingClientRect(),l={x:o.width*s[0],y:o.height*s[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/n,y:(u.top-o.top-l.y)/n,...$0(c)}})};function Al(e,t,n){return n===void 0?n:s=>{const r=t().nodeInternals.get(e);r&&n(s,{...r})}}function mp({id:e,store:t,unselect:n=!1,nodeRef:s}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",Sr.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=s==null?void 0:s.current)==null?void 0:d.blur()})):r([e])}function WU(){const e=$t();return g.useCallback(({sourceEvent:n})=>{const{transform:s,snapGrid:r,snapToGrid:i}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,c={x:(o-s[0])/s[2],y:(l-s[1])/s[2]};return{xSnapped:i?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:i?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function Dh(e){return(t,n,s)=>e==null?void 0:e(t,s)}function RE({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:s,nodeId:r,isSelectable:i,selectNodesOnDrag:o}){const l=$t(),[c,u]=g.useState(!1),d=g.useRef([]),f=g.useRef({x:null,y:null}),m=g.useRef(0),h=g.useRef(null),p=g.useRef({x:0,y:0}),v=g.useRef(null),b=g.useRef(!1),x=g.useRef(!1),y=g.useRef(!1),w=WU();return g.useEffect(()=>{if(e!=null&&e.current){const j=ts(e.current),N=({x:E,y:C})=>{const{nodeInternals:_,onNodeDrag:P,onSelectionDrag:D,updateNodePositions:z,nodeExtent:A,snapGrid:O,snapToGrid:T,nodeOrigin:L,onError:M}=l.getState();f.current={x:E,y:C};let R=!1,B={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&A){const I=V0(d.current,L);B=O0(I)}if(d.current=d.current.map(I=>{const V={x:E-I.distance.x,y:C-I.distance.y};T&&(V.x=O[0]*Math.round(V.x/O[0]),V.y=O[1]*Math.round(V.y/O[1]));const G=[[A[0][0],A[0][1]],[A[1][0],A[1][1]]];d.current.length>1&&A&&!I.extent&&(G[0][0]=I.positionAbsolute.x-B.x+A[0][0],G[1][0]=I.positionAbsolute.x+(I.width??0)-B.x2+A[1][0],G[0][1]=I.positionAbsolute.y-B.y+A[0][1],G[1][1]=I.positionAbsolute.y+(I.height??0)-B.y2+A[1][1]);const J=ME(I,V,_,G,L,M);return R=R||I.position.x!==J.position.x||I.position.y!==J.position.y,I.position=J.position,I.positionAbsolute=J.positionAbsolute,I}),!R)return;z(d.current,!0,!0),u(!0);const F=r?P:Dh(D);if(F&&v.current){const[I,V]=Rh({nodeId:r,dragItems:d.current,nodeInternals:_});F(v.current,I,V)}},S=()=>{if(!h.current)return;const[E,C]=eE(p.current,h.current);if(E!==0||C!==0){const{transform:_,panBy:P}=l.getState();f.current.x=(f.current.x??0)-E/_[2],f.current.y=(f.current.y??0)-C/_[2],P({x:E,y:C})&&N(f.current)}m.current=requestAnimationFrame(S)},k=E=>{var L;const{nodeInternals:C,multiSelectionActive:_,nodesDraggable:P,unselectNodesAndEdges:D,onNodeDragStart:z,onSelectionDragStart:A}=l.getState();x.current=!0;const O=r?z:Dh(A);(!o||!i)&&!_&&r&&((L=C.get(r))!=null&&L.selected||D()),r&&i&&o&&mp({id:r,store:l,nodeRef:e});const T=w(E);if(f.current=T,d.current=YU(C,P,T,r),O&&d.current){const[M,R]=Rh({nodeId:r,dragItems:d.current,nodeInternals:C});O(E.sourceEvent,M,R)}};if(t)j.on(".drag",null);else{const E=iH().on("start",C=>{const{domNode:_,nodeDragThreshold:P}=l.getState();P===0&&k(C),y.current=!1;const D=w(C);f.current=D,h.current=(_==null?void 0:_.getBoundingClientRect())||null,p.current=ca(C.sourceEvent,h.current)}).on("drag",C=>{var z,A;const _=w(C),{autoPanOnNodeDrag:P,nodeDragThreshold:D}=l.getState();if(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!b.current&&x.current&&P&&(b.current=!0,S()),!x.current){const O=_.xSnapped-(((z=f==null?void 0:f.current)==null?void 0:z.x)??0),T=_.ySnapped-(((A=f==null?void 0:f.current)==null?void 0:A.y)??0);Math.sqrt(O*O+T*T)>D&&k(C)}(f.current.x!==_.xSnapped||f.current.y!==_.ySnapped)&&d.current&&x.current&&(v.current=C.sourceEvent,p.current=ca(C.sourceEvent,h.current),N(_))}}).on("end",C=>{if(!(!x.current||y.current)&&(u(!1),b.current=!1,x.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:_,nodeInternals:P,onNodeDragStop:D,onSelectionDragStop:z}=l.getState(),A=r?D:Dh(z);if(_(d.current,!1,!1),A){const[O,T]=Rh({nodeId:r,dragItems:d.current,nodeInternals:P});A(C.sourceEvent,O,T)}}}).filter(C=>{const _=C.target;return!C.button&&(!n||!ew(_,`.${n}`,e))&&(!s||ew(_,s,e))});return j.call(E),()=>{j.on(".drag",null)}}}},[e,t,n,s,i,l,r,o,w]),c}function DE(){const e=$t();return g.useCallback(n=>{const{nodeInternals:s,nodeExtent:r,updateNodePositions:i,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(y=>y.selected&&(y.draggable||d&&typeof y.draggable>"u")),m=l?c[0]:5,h=l?c[1]:5,p=n.isShiftPressed?4:1,v=n.x*m*p,b=n.y*h*p,x=f.map(y=>{if(y.positionAbsolute){const w={x:y.positionAbsolute.x+v,y:y.positionAbsolute.y+b};l&&(w.x=c[0]*Math.round(w.x/c[0]),w.y=c[1]*Math.round(w.y/c[1]));const{positionAbsolute:j,position:N}=ME(y,w,s,r,void 0,u);y.position=N,y.positionAbsolute=j}return y});i(x,!0,!1)},[])}const yo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Tl=e=>{const t=({id:n,type:s,data:r,xPos:i,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:h,onContextMenu:p,onDoubleClick:v,style:b,className:x,isDraggable:y,isSelectable:w,isConnectable:j,isFocusable:N,selectNodesOnDrag:S,sourcePosition:k,targetPosition:E,hidden:C,resizeObserver:_,dragHandle:P,zIndex:D,isParent:z,noDragClassName:A,noPanClassName:O,initialized:T,disableKeyboardA11y:L,ariaLabel:M,rfId:R,hasHandleBounds:B})=>{const F=$t(),I=g.useRef(null),V=g.useRef(null),G=g.useRef(k),J=g.useRef(E),ie=g.useRef(s),ee=w||y||d||f||m||h,pe=DE(),fe=Al(n,F.getState,f),we=Al(n,F.getState,m),U=Al(n,F.getState,h),X=Al(n,F.getState,p),Q=Al(n,F.getState,v),W=ue=>{const{nodeDragThreshold:te}=F.getState();if(w&&(!S||!y||te>0)&&mp({id:n,store:F,nodeRef:I}),d){const $e=F.getState().nodeInternals.get(n);$e&&d(ue,{...$e})}},se=ue=>{if(!lp(ue)&&!L)if(nE.includes(ue.key)&&w){const te=ue.key==="Escape";mp({id:n,store:F,unselect:te,nodeRef:I})}else y&&u&&Object.prototype.hasOwnProperty.call(yo,ue.key)&&(F.setState({ariaLiveMessage:`Moved selected node ${ue.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),pe({x:yo[ue.key].x,y:yo[ue.key].y,isShiftPressed:ue.shiftKey}))};g.useEffect(()=>()=>{V.current&&(_==null||_.unobserve(V.current),V.current=null)},[]),g.useEffect(()=>{if(I.current&&!C){const ue=I.current;(!T||!B||V.current!==ue)&&(V.current&&(_==null||_.unobserve(V.current)),_==null||_.observe(ue),V.current=ue)}},[C,T,B]),g.useEffect(()=>{const ue=ie.current!==s,te=G.current!==k,$e=J.current!==E;I.current&&(ue||te||$e)&&(ue&&(ie.current=s),te&&(G.current=k),$e&&(J.current=E),F.getState().updateNodeDimensions([{id:n,nodeElement:I.current,forceUpdate:!0}]))},[n,s,k,E]);const ye=RE({nodeRef:I,disabled:C||!y,noDragClassName:A,handleSelector:P,nodeId:n,isSelectable:w,selectNodesOnDrag:S});return C?null:$.createElement("div",{className:tn(["react-flow__node",`react-flow__node-${s}`,{[O]:y},x,{selected:u,selectable:w,parent:z,dragging:ye}]),ref:I,style:{zIndex:D,transform:`translate(${l}px,${c}px)`,pointerEvents:ee?"all":"none",visibility:T?"visible":"hidden",...b},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:fe,onMouseMove:we,onMouseLeave:U,onContextMenu:X,onClick:W,onDoubleClick:Q,onKeyDown:N?se:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":L?void 0:`${jE}-${R}`,"aria-label":M},$.createElement(dU,{value:n},$.createElement(e,{id:n,data:r,type:s,xPos:i,yPos:o,selected:u,isConnectable:j,sourcePosition:k,targetPosition:E,dragging:ye,dragHandle:P,zIndex:D})))};return t.displayName="NodeWrapper",g.memo(t)};const KU=e=>{const t=e.getNodes().filter(n=>n.selected);return{...V0(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function QU({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const s=$t(),{width:r,height:i,x:o,y:l,transformString:c,userSelectionActive:u}=ot(KU,un),d=DE(),f=g.useRef(null);if(g.useEffect(()=>{var p;n||(p=f.current)==null||p.focus({preventScroll:!0})},[n]),RE({nodeRef:f}),u||!r||!i)return null;const m=e?p=>{const v=s.getState().getNodes().filter(b=>b.selected);e(p,v)}:void 0,h=p=>{Object.prototype.hasOwnProperty.call(yo,p.key)&&d({x:yo[p.key].x,y:yo[p.key].y,isShiftPressed:p.shiftKey})};return $.createElement("div",{className:tn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},$.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:r,height:i,top:l,left:o}}))}var JU=g.memo(QU);const eV=e=>e.nodesSelectionActive,zE=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:h,onSelectionStart:p,onSelectionEnd:v,multiSelectionKeyCode:b,panActivationKeyCode:x,zoomActivationKeyCode:y,elementsSelectable:w,zoomOnScroll:j,zoomOnPinch:N,panOnScroll:S,panOnScrollSpeed:k,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:_,defaultViewport:P,translateExtent:D,minZoom:z,maxZoom:A,preventScrolling:O,onSelectionContextMenu:T,noWheelClassName:L,noPanClassName:M,disableKeyboardA11y:R})=>{const B=ot(eV),F=_c(f),I=_c(x),V=I||_,G=I||S,J=F||m&&V!==!0;return BU({deleteKeyCode:l,multiSelectionKeyCode:b}),$.createElement(UU,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:i,elementsSelectable:w,zoomOnScroll:j,zoomOnPinch:N,panOnScroll:G,panOnScrollSpeed:k,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:!F&&V,defaultViewport:P,translateExtent:D,minZoom:z,maxZoom:A,zoomActivationKeyCode:y,preventScrolling:O,noWheelClassName:L,noPanClassName:M},$.createElement(AE,{onSelectionStart:p,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:V,isSelecting:!!J,selectionMode:h},e,B&&$.createElement(JU,{onSelectionContextMenu:T,noPanClassName:M,disableKeyboardA11y:R})))};zE.displayName="FlowRenderer";var tV=g.memo(zE);function nV(e){return ot(g.useCallback(n=>e?cE(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function sV(e){const t={input:Tl(e.input||vE),default:Tl(e.default||fp),output:Tl(e.output||bE),group:Tl(e.group||Z0)},n={},s=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,i)=>(r[i]=Tl(e[i]||fp),r),n);return{...t,...s}}const rV=({x:e,y:t,width:n,height:s,origin:r})=>!n||!s?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-s*r[1]},aV=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),LE=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:s,elementsSelectable:r,updateNodeDimensions:i,onError:o}=ot(aV,un),l=nV(e.onlyRenderVisibleElements),c=g.useRef(),u=g.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const m=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));i(m)});return c.current=d,d},[]);return g.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),$.createElement("div",{className:"react-flow__nodes",style:Y0},l.map(d=>{var N,S,k;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",Sr.error003(f)),f="default");const m=e.nodeTypes[f]||e.nodeTypes.default,h=!!(d.draggable||t&&typeof d.draggable>"u"),p=!!(d.selectable||r&&typeof d.selectable>"u"),v=!!(d.connectable||n&&typeof d.connectable>"u"),b=!!(d.focusable||s&&typeof d.focusable>"u"),x=e.nodeExtent?P0(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,y=(x==null?void 0:x.x)??0,w=(x==null?void 0:x.y)??0,j=rV({x:y,y:w,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return $.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||le.Bottom,targetPosition:d.targetPosition||le.Top,hidden:d.hidden,xPos:y,yPos:w,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:h,isSelectable:p,isConnectable:v,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((N=d[ft])==null?void 0:N.z)??0,isParent:!!((S=d[ft])!=null&&S.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((k=d[ft])!=null&&k.handleBounds)})}))};LE.displayName="NodeRenderer";var iV=g.memo(LE);const oV=(e,t,n)=>n===le.Left?e-t:n===le.Right?e+t:e,lV=(e,t,n)=>n===le.Top?e-t:n===le.Bottom?e+t:e,nw="react-flow__edgeupdater",sw=({position:e,centerX:t,centerY:n,radius:s=10,onMouseDown:r,onMouseEnter:i,onMouseOut:o,type:l})=>$.createElement("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:o,className:tn([nw,`${nw}-${l}`]),cx:oV(t,s,e),cy:lV(n,s,e),r:s,stroke:"transparent",fill:"transparent"}),cV=()=>!0;var Fi=e=>{const t=({id:n,className:s,type:r,data:i,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:b,source:x,target:y,sourceX:w,sourceY:j,targetX:N,targetY:S,sourcePosition:k,targetPosition:E,elementsSelectable:C,hidden:_,sourceHandleId:P,targetHandleId:D,onContextMenu:z,onMouseEnter:A,onMouseMove:O,onMouseLeave:T,reconnectRadius:L,onReconnect:M,onReconnectStart:R,onReconnectEnd:B,markerEnd:F,markerStart:I,rfId:V,ariaLabel:G,isFocusable:J,isReconnectable:ie,pathOptions:ee,interactionWidth:pe,disableKeyboardA11y:fe})=>{const we=g.useRef(null),[U,X]=g.useState(!1),[Q,W]=g.useState(!1),se=$t(),ye=g.useMemo(()=>`url('#${up(I,V)}')`,[I,V]),ue=g.useMemo(()=>`url('#${up(F,V)}')`,[F,V]);if(_)return null;const te=At=>{var zn;const{edges:Pt,addSelectedEdges:xs,unselectNodesAndEdges:Xs,multiSelectionActive:Ws}=se.getState(),Jn=Pt.find(Ta=>Ta.id===n);Jn&&(C&&(se.setState({nodesSelectionActive:!1}),Jn.selected&&Ws?(Xs({nodes:[],edges:[Jn]}),(zn=we.current)==null||zn.blur()):xs([n])),o&&o(At,Jn))},$e=_l(n,se.getState,l),vt=_l(n,se.getState,z),ps=_l(n,se.getState,A),zr=_l(n,se.getState,O),Dn=_l(n,se.getState,T),Kn=(At,Pt)=>{if(At.button!==0)return;const{edges:xs,isValidConnection:Xs}=se.getState(),Ws=Pt?y:x,Jn=(Pt?D:P)||null,zn=Pt?"target":"source",Ta=Xs||cV,de=Pt,Me=xs.find(He=>He.id===n);W(!0),R==null||R(At,Me,zn);const Be=He=>{W(!1),B==null||B(He,Me,zn)};hE({event:At,handleId:Jn,nodeId:Ws,onConnect:He=>M==null?void 0:M(Me,He),isTarget:de,getState:se.getState,setState:se.setState,isValidConnection:Ta,edgeUpdaterType:zn,onReconnectEnd:Be})},Zs=At=>Kn(At,!0),Gs=At=>Kn(At,!1),Ys=()=>X(!0),Qn=()=>X(!1),Lr=!C&&!o,$r=At=>{var Pt;if(!fe&&nE.includes(At.key)&&C){const{unselectNodesAndEdges:xs,addSelectedEdges:Xs,edges:Ws}=se.getState();At.key==="Escape"?((Pt=we.current)==null||Pt.blur(),xs({edges:[Ws.find(zn=>zn.id===n)]})):Xs([n])}};return $.createElement("g",{className:tn(["react-flow__edge",`react-flow__edge-${r}`,s,{selected:c,animated:u,inactive:Lr,updating:U}]),onClick:te,onDoubleClick:$e,onContextMenu:vt,onMouseEnter:ps,onMouseMove:zr,onMouseLeave:Dn,onKeyDown:J?$r:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":G===null?void 0:G||`Edge from ${x} to ${y}`,"aria-describedby":J?`${NE}-${V}`:void 0,ref:we},!Q&&$.createElement(e,{id:n,source:x,target:y,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,data:i,style:b,sourceX:w,sourceY:j,targetX:N,targetY:S,sourcePosition:k,targetPosition:E,sourceHandleId:P,targetHandleId:D,markerStart:ye,markerEnd:ue,pathOptions:ee,interactionWidth:pe}),ie&&$.createElement($.Fragment,null,(ie==="source"||ie===!0)&&$.createElement(sw,{position:k,centerX:w,centerY:j,radius:L,onMouseDown:Zs,onMouseEnter:Ys,onMouseOut:Qn,type:"source"}),(ie==="target"||ie===!0)&&$.createElement(sw,{position:E,centerX:N,centerY:S,radius:L,onMouseDown:Gs,onMouseEnter:Ys,onMouseOut:Qn,type:"target"})))};return t.displayName="EdgeWrapper",g.memo(t)};function uV(e){const t={default:Fi(e.default||gf),straight:Fi(e.bezier||H0),step:Fi(e.step||I0),smoothstep:Fi(e.step||Rm),simplebezier:Fi(e.simplebezier||B0)},n={},s=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,i)=>(r[i]=Fi(e[i]||gf),r),n);return{...t,...s}}function rw(e,t,n=null){const s=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case le.Top:return{x:s+i/2,y:r};case le.Right:return{x:s+i,y:r+o/2};case le.Bottom:return{x:s+i/2,y:r+o};case le.Left:return{x:s,y:r+o/2}}}function aw(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const dV=(e,t,n,s,r,i)=>{const o=rw(n,e,t),l=rw(i,s,r);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function fV({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:s,targetWidth:r,targetHeight:i,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+s,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=O0({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*m)>0}function iw(e){var s,r,i,o,l;const t=((s=e==null?void 0:e[ft])==null?void 0:s.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const mV=[{level:0,isMaxLevel:!0,edges:[]}];function hV(e,t,n=!1){let s=-1;const r=e.reduce((o,l)=>{var d,f;const c=Vn(l.zIndex);let u=c?l.zIndex:0;if(n){const m=t.get(l.target),h=t.get(l.source),p=l.selected||(m==null?void 0:m.selected)||(h==null?void 0:h.selected),v=Math.max(((d=h==null?void 0:h[ft])==null?void 0:d.z)||0,((f=m==null?void 0:m[ft])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(p?v:0)}return o[u]?o[u].push(l):o[u]=[l],s=u>s?u:s,o},{}),i=Object.entries(r).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===s}});return i.length===0?mV:i}function gV(e,t,n){const s=ot(g.useCallback(r=>e?r.edges.filter(i=>{const o=t.get(i.source),l=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&fV({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return hV(s,t,n)}const pV=({color:e="none",strokeWidth:t=1})=>$.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),xV=({color:e="none",strokeWidth:t=1})=>$.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ow={[hf.Arrow]:pV,[hf.ArrowClosed]:xV};function vV(e){const t=$t();return g.useMemo(()=>{var r,i;return Object.prototype.hasOwnProperty.call(ow,e)?ow[e]:((i=(r=t.getState()).onError)==null||i.call(r,"009",Sr.error009(e)),null)},[e])}const yV=({id:e,type:t,color:n,width:s=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=vV(t);return c?$.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${s}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},$.createElement(c,{color:n,strokeWidth:o})):null},bV=({defaultColor:e,rfId:t})=>n=>{const s=[];return n.edges.reduce((r,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=up(o,t);s.includes(l)||(r.push({id:l,color:o.color||e,...o}),s.push(l))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))},$E=({defaultColor:e,rfId:t})=>{const n=ot(g.useCallback(bV({defaultColor:e,rfId:t}),[e,t]),(s,r)=>!(s.length!==r.length||s.some((i,o)=>i.id!==r[o].id)));return $.createElement("defs",null,n.map(s=>$.createElement(yV,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};$E.displayName="MarkerDefinitions";var wV=g.memo($E);const jV=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),PE=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:s,edgeTypes:r,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:p,reconnectRadius:v,children:b,disableKeyboardA11y:x})=>{const{edgesFocusable:y,edgesUpdatable:w,elementsSelectable:j,width:N,height:S,connectionMode:k,nodeInternals:E,onError:C}=ot(jV,un),_=gV(t,E,n);return N?$.createElement($.Fragment,null,_.map(({level:P,edges:D,isMaxLevel:z})=>$.createElement("svg",{key:P,style:{zIndex:P},width:N,height:S,className:"react-flow__edges react-flow__container"},z&&$.createElement(wV,{defaultColor:e,rfId:s}),$.createElement("g",null,D.map(A=>{const[O,T,L]=iw(E.get(A.source)),[M,R,B]=iw(E.get(A.target));if(!L||!B)return null;let F=A.type||"default";r[F]||(C==null||C("011",Sr.error011(F)),F="default");const I=r[F]||r.default,V=k===li.Strict?R.target:(R.target??[]).concat(R.source??[]),G=aw(T.source,A.sourceHandle),J=aw(V,A.targetHandle),ie=(G==null?void 0:G.position)||le.Bottom,ee=(J==null?void 0:J.position)||le.Top,pe=!!(A.focusable||y&&typeof A.focusable>"u"),fe=A.reconnectable||A.updatable,we=typeof m<"u"&&(fe||w&&typeof fe>"u");if(!G||!J)return C==null||C("008",Sr.error008(G,A)),null;const{sourceX:U,sourceY:X,targetX:Q,targetY:W}=dV(O,G,ie,M,J,ee);return $.createElement(I,{key:A.id,id:A.id,className:tn([A.className,i]),type:F,data:A.data,selected:!!A.selected,animated:!!A.animated,hidden:!!A.hidden,label:A.label,labelStyle:A.labelStyle,labelShowBg:A.labelShowBg,labelBgStyle:A.labelBgStyle,labelBgPadding:A.labelBgPadding,labelBgBorderRadius:A.labelBgBorderRadius,style:A.style,source:A.source,target:A.target,sourceHandleId:A.sourceHandle,targetHandleId:A.targetHandle,markerEnd:A.markerEnd,markerStart:A.markerStart,sourceX:U,sourceY:X,targetX:Q,targetY:W,sourcePosition:ie,targetPosition:ee,elementsSelectable:j,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:p,reconnectRadius:v,rfId:s,ariaLabel:A.ariaLabel,isFocusable:pe,isReconnectable:we,pathOptions:"pathOptions"in A?A.pathOptions:void 0,interactionWidth:A.interactionWidth,disableKeyboardA11y:x})})))),b):null};PE.displayName="EdgeRenderer";var NV=g.memo(PE);const SV=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function kV({children:e}){const t=ot(SV);return $.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function CV(e){const t=G0(),n=g.useRef(!1);g.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const EV={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top},OE=({nodeId:e,handleType:t,style:n,type:s=Xr.Bezier,CustomComponent:r,connectionStatus:i})=>{var S,k,E;const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=ot(g.useCallback(C=>({fromNode:C.nodeInternals.get(e),handleId:C.connectionHandleId,toX:(C.connectionPosition.x-C.transform[0])/C.transform[2],toY:(C.connectionPosition.y-C.transform[1])/C.transform[2],connectionMode:C.connectionMode}),[e]),un),f=(S=o==null?void 0:o[ft])==null?void 0:S.handleBounds;let m=f==null?void 0:f[t];if(d===li.Loose&&(m=m||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!m)return null;const h=l?m.find(C=>C.id===l):m[0],p=h?h.x+h.width/2:(o.width??0)/2,v=h?h.y+h.height/2:o.height??0,b=(((k=o.positionAbsolute)==null?void 0:k.x)??0)+p,x=(((E=o.positionAbsolute)==null?void 0:E.y)??0)+v,y=h==null?void 0:h.position,w=y?EV[y]:null;if(!y||!w)return null;if(r)return $.createElement(r,{connectionLineType:s,connectionLineStyle:n,fromNode:o,fromHandle:h,fromX:b,fromY:x,toX:c,toY:u,fromPosition:y,toPosition:w,connectionStatus:i});let j="";const N={sourceX:b,sourceY:x,sourcePosition:y,targetX:c,targetY:u,targetPosition:w};return s===Xr.Bezier?[j]=oE(N):s===Xr.Step?[j]=cp({...N,borderRadius:0}):s===Xr.SmoothStep?[j]=cp(N):s===Xr.SimpleBezier?[j]=iE(N):j=`M${b},${x} ${c},${u}`,$.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};OE.displayName="ConnectionLine";const _V=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function AV({containerStyle:e,style:t,type:n,component:s}){const{nodeId:r,handleType:i,nodesConnectable:o,width:l,height:c,connectionStatus:u}=ot(_V,un);return!(r&&i&&l&&o)?null:$.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},$.createElement("g",{className:tn(["react-flow__connection",u])},$.createElement(OE,{nodeId:r,handleType:i,style:t,type:n,CustomComponent:s,connectionStatus:u})))}function lw(e,t){return g.useRef(null),$t(),g.useMemo(()=>t(e),[e])}const BE=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:s,onMoveEnd:r,onInit:i,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:v,onSelectionEnd:b,connectionLineType:x,connectionLineStyle:y,connectionLineComponent:w,connectionLineContainerStyle:j,selectionKeyCode:N,selectionOnDrag:S,selectionMode:k,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:_,deleteKeyCode:P,onlyRenderVisibleElements:D,elementsSelectable:z,selectNodesOnDrag:A,defaultViewport:O,translateExtent:T,minZoom:L,maxZoom:M,preventScrolling:R,defaultMarkerColor:B,zoomOnScroll:F,zoomOnPinch:I,panOnScroll:V,panOnScrollSpeed:G,panOnScrollMode:J,zoomOnDoubleClick:ie,panOnDrag:ee,onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:we,onPaneMouseLeave:U,onPaneScroll:X,onPaneContextMenu:Q,onEdgeContextMenu:W,onEdgeMouseEnter:se,onEdgeMouseMove:ye,onEdgeMouseLeave:ue,onReconnect:te,onReconnectStart:$e,onReconnectEnd:vt,reconnectRadius:ps,noDragClassName:zr,noWheelClassName:Dn,noPanClassName:Kn,elevateEdgesOnSelect:Zs,disableKeyboardA11y:Gs,nodeOrigin:Ys,nodeExtent:Qn,rfId:Lr})=>{const $r=lw(e,sV),At=lw(t,uV);return CV(i),$.createElement(tV,{onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:we,onPaneMouseLeave:U,onPaneContextMenu:Q,onPaneScroll:X,deleteKeyCode:P,selectionKeyCode:N,selectionOnDrag:S,selectionMode:k,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:_,elementsSelectable:z,onMove:n,onMoveStart:s,onMoveEnd:r,zoomOnScroll:F,zoomOnPinch:I,zoomOnDoubleClick:ie,panOnScroll:V,panOnScrollSpeed:G,panOnScrollMode:J,panOnDrag:ee,defaultViewport:O,translateExtent:T,minZoom:L,maxZoom:M,onSelectionContextMenu:p,preventScrolling:R,noDragClassName:zr,noWheelClassName:Dn,noPanClassName:Kn,disableKeyboardA11y:Gs},$.createElement(kV,null,$.createElement(NV,{edgeTypes:At,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:D,onEdgeContextMenu:W,onEdgeMouseEnter:se,onEdgeMouseMove:ye,onEdgeMouseLeave:ue,onReconnect:te,onReconnectStart:$e,onReconnectEnd:vt,reconnectRadius:ps,defaultMarkerColor:B,noPanClassName:Kn,elevateEdgesOnSelect:!!Zs,disableKeyboardA11y:Gs,rfId:Lr},$.createElement(AV,{style:y,type:x,component:w,containerStyle:j})),$.createElement("div",{className:"react-flow__edgelabel-renderer"}),$.createElement(iV,{nodeTypes:$r,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,selectNodesOnDrag:A,onlyRenderVisibleElements:D,noPanClassName:Kn,noDragClassName:zr,disableKeyboardA11y:Gs,nodeOrigin:Ys,nodeExtent:Qn,rfId:Lr})))};BE.displayName="GraphView";var TV=g.memo(BE);const hp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Br={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:hp,nodeExtent:hp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:li.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:aU,isValidConnection:void 0},MV=()=>v9((e,t)=>({...Br,setNodes:n=>{const{nodeInternals:s,nodeOrigin:r,elevateNodesOnSelect:i}=t();e({nodeInternals:Th(n,s,r,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:s={}}=t();e({edges:n.map(r=>({...s,...r}))})},setDefaultNodesAndEdges:(n,s)=>{const r=typeof n<"u",i=typeof s<"u",o=r?Th(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?s:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:s,nodeInternals:r,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((v,b)=>{const x=r.get(b.id);if(x!=null&&x.hidden)r.set(x.id,{...x,[ft]:{...x[ft],handleBounds:void 0}});else if(x){const y=$0(b.nodeElement);!!(y.width&&y.height&&(x.width!==y.width||x.height!==y.height||b.forceUpdate))&&(r.set(x.id,{...x,[ft]:{...x[ft],handleBounds:{source:tw(".source",b.nodeElement,m,u),target:tw(".target",b.nodeElement,m,u)}},...y}),v.push({id:x.id,type:"dimensions",dimensions:y}))}return v},[]);kE(r,u);const p=o||i&&!o&&CE(t,{initial:!0,...l});e({nodeInternals:new Map(r),fitViewOnInitDone:p}),(h==null?void 0:h.length)>0&&(s==null||s(h))},updateNodePositions:(n,s=!0,r=!1)=>{const{triggerNodeChanges:i}=t(),o=n.map(l=>{const c={id:l.id,type:"position",dragging:r};return s&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});i(o)},triggerNodeChanges:n=>{const{onNodesChange:s,nodeInternals:r,hasDefaultNodes:i,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(i){const u=_E(n,l()),d=Th(u,r,o,c);e({nodeInternals:d})}s==null||s(n)}},addSelectedNodes:n=>{const{multiSelectionActive:s,edges:r,getNodes:i}=t();let o,l=null;s?o=n.map(c=>Vr(c,!0)):(o=Ki(i(),n),l=Ki(r,[])),Xu({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:s,edges:r,getNodes:i}=t();let o,l=null;s?o=n.map(c=>Vr(c,!0)):(o=Ki(r,n),l=Ki(i(),[])),Xu({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:s}={})=>{const{edges:r,getNodes:i}=t(),o=n||i(),l=s||r,c=o.map(d=>(d.selected=!1,Vr(d.id,!1))),u=l.map(d=>Vr(d.id,!1));Xu({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:s,maxZoom:r}=t();s==null||s.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:s,minZoom:r}=t();s==null||s.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var s;(s=t().d3Zoom)==null||s.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:s}=t(),i=s().filter(l=>l.selected).map(l=>Vr(l.id,!1)),o=n.filter(l=>l.selected).map(l=>Vr(l.id,!1));Xu({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:s}=t();s.forEach(r=>{r.positionAbsolute=P0(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(s)})},panBy:n=>{const{transform:s,width:r,height:i,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!n.x&&!n.y)return!1;const u=la.translate(s[0]+n.x,s[1]+n.y).scale(s[2]),d=[[0,0],[r,i]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(l,f),s[0]!==f.x||s[1]!==f.y||s[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Br.connectionNodeId,connectionHandleId:Br.connectionHandleId,connectionHandleType:Br.connectionHandleType,connectionStatus:Br.connectionStatus,connectionStartHandle:Br.connectionStartHandle,connectionEndHandle:Br.connectionEndHandle}),reset:()=>e({...Br})}),Object.is),IE=({children:e})=>{const t=g.useRef(null);return t.current||(t.current=MV()),$.createElement(KF,{value:t.current},e)};IE.displayName="ReactFlowProvider";const HE=({children:e})=>g.useContext(Mm)?$.createElement($.Fragment,null,e):$.createElement(IE,null,e);HE.displayName="ReactFlowWrapper";const RV={input:vE,default:fp,output:bE,group:Z0},DV={default:gf,straight:H0,step:I0,smoothstep:Rm,simplebezier:B0},zV=[0,0],LV=[15,15],$V={x:0,y:0,zoom:1},PV={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},X0=g.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,className:r,nodeTypes:i=RV,edgeTypes:o=DV,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:h,onConnectStart:p,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:x,onNodeMouseEnter:y,onNodeMouseMove:w,onNodeMouseLeave:j,onNodeContextMenu:N,onNodeDoubleClick:S,onNodeDragStart:k,onNodeDrag:E,onNodeDragStop:C,onNodesDelete:_,onEdgesDelete:P,onSelectionChange:D,onSelectionDragStart:z,onSelectionDrag:A,onSelectionDragStop:O,onSelectionContextMenu:T,onSelectionStart:L,onSelectionEnd:M,connectionMode:R=li.Strict,connectionLineType:B=Xr.Bezier,connectionLineStyle:F,connectionLineComponent:I,connectionLineContainerStyle:V,deleteKeyCode:G="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:ie=!1,selectionMode:ee=Ec.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:fe=mf()?"Meta":"Control",zoomActivationKeyCode:we=mf()?"Meta":"Control",snapToGrid:U=!1,snapGrid:X=LV,onlyRenderVisibleElements:Q=!1,selectNodesOnDrag:W=!0,nodesDraggable:se,nodesConnectable:ye,nodesFocusable:ue,nodeOrigin:te=zV,edgesFocusable:$e,edgesUpdatable:vt,elementsSelectable:ps,defaultViewport:zr=$V,minZoom:Dn=.5,maxZoom:Kn=2,translateExtent:Zs=hp,preventScrolling:Gs=!0,nodeExtent:Ys,defaultMarkerColor:Qn="#b1b1b7",zoomOnScroll:Lr=!0,zoomOnPinch:$r=!0,panOnScroll:At=!1,panOnScrollSpeed:Pt=.5,panOnScrollMode:xs=Va.Free,zoomOnDoubleClick:Xs=!0,panOnDrag:Ws=!0,onPaneClick:Jn,onPaneMouseEnter:zn,onPaneMouseMove:Ta,onPaneMouseLeave:de,onPaneScroll:Me,onPaneContextMenu:Be,children:Re,onEdgeContextMenu:He,onEdgeDoubleClick:Ft,onEdgeMouseEnter:Ot,onEdgeMouseMove:vs,onEdgeMouseLeave:pn,onEdgeUpdate:Ks,onEdgeUpdateStart:ys,onEdgeUpdateEnd:Ln,onReconnect:zi,onReconnectStart:Au,onReconnectEnd:XM,reconnectRadius:WM=10,edgeUpdaterRadius:KM=10,onNodesChange:QM,onEdgesChange:JM,noDragClassName:eR="nodrag",noWheelClassName:tR="nowheel",noPanClassName:ay="nopan",fitView:nR=!1,fitViewOptions:sR,connectOnClick:rR=!0,attributionPosition:aR,proOptions:iR,defaultEdgeOptions:oR,elevateNodesOnSelect:lR=!0,elevateEdgesOnSelect:cR=!1,disableKeyboardA11y:iy=!1,autoPanOnConnect:uR=!0,autoPanOnNodeDrag:dR=!0,connectionRadius:fR=20,isValidConnection:mR,onError:hR,style:gR,id:oy,nodeDragThreshold:pR,...xR},vR)=>{const Jm=oy||"1";return $.createElement("div",{...xR,style:{...gR,...PV},ref:vR,className:tn(["react-flow",r]),"data-testid":"rf__wrapper",id:oy},$.createElement(HE,null,$.createElement(TV,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:y,onNodeMouseMove:w,onNodeMouseLeave:j,onNodeContextMenu:N,onNodeDoubleClick:S,nodeTypes:i,edgeTypes:o,connectionLineType:B,connectionLineStyle:F,connectionLineComponent:I,connectionLineContainerStyle:V,selectionKeyCode:J,selectionOnDrag:ie,selectionMode:ee,deleteKeyCode:G,multiSelectionKeyCode:fe,panActivationKeyCode:pe,zoomActivationKeyCode:we,onlyRenderVisibleElements:Q,selectNodesOnDrag:W,defaultViewport:zr,translateExtent:Zs,minZoom:Dn,maxZoom:Kn,preventScrolling:Gs,zoomOnScroll:Lr,zoomOnPinch:$r,zoomOnDoubleClick:Xs,panOnScroll:At,panOnScrollSpeed:Pt,panOnScrollMode:xs,panOnDrag:Ws,onPaneClick:Jn,onPaneMouseEnter:zn,onPaneMouseMove:Ta,onPaneMouseLeave:de,onPaneScroll:Me,onPaneContextMenu:Be,onSelectionContextMenu:T,onSelectionStart:L,onSelectionEnd:M,onEdgeContextMenu:He,onEdgeDoubleClick:Ft,onEdgeMouseEnter:Ot,onEdgeMouseMove:vs,onEdgeMouseLeave:pn,onReconnect:zi??Ks,onReconnectStart:Au??ys,onReconnectEnd:XM??Ln,reconnectRadius:WM??KM,defaultMarkerColor:Qn,noDragClassName:eR,noWheelClassName:tR,noPanClassName:ay,elevateEdgesOnSelect:cR,rfId:Jm,disableKeyboardA11y:iy,nodeOrigin:te,nodeExtent:Ys}),$.createElement(EU,{nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:h,onConnectStart:p,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:x,nodesDraggable:se,nodesConnectable:ye,nodesFocusable:ue,edgesFocusable:$e,edgesUpdatable:vt,elementsSelectable:ps,elevateNodesOnSelect:lR,minZoom:Dn,maxZoom:Kn,nodeExtent:Ys,onNodesChange:QM,onEdgesChange:JM,snapToGrid:U,snapGrid:X,connectionMode:R,translateExtent:Zs,connectOnClick:rR,defaultEdgeOptions:oR,fitView:nR,fitViewOptions:sR,onNodesDelete:_,onEdgesDelete:P,onNodeDragStart:k,onNodeDrag:E,onNodeDragStop:C,onSelectionDrag:A,onSelectionDragStart:z,onSelectionDragStop:O,noPanClassName:ay,nodeOrigin:te,rfId:Jm,autoPanOnConnect:uR,autoPanOnNodeDrag:dR,onError:hR,connectionRadius:fR,isValidConnection:mR,nodeDragThreshold:pR}),$.createElement(kU,{onSelectionChange:D}),Re,$.createElement(JF,{proOptions:iR,position:aR}),$.createElement(RU,{rfId:Jm,disableKeyboardA11y:iy})))});X0.displayName="ReactFlow";function FE(e){return t=>{const[n,s]=g.useState(t),r=g.useCallback(i=>s(o=>e(i,o)),[]);return[n,s,r]}}const UE=FE(_E),VE=FE(ZU);function OV(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}function BV(){return $.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},$.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function IV(){return $.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},$.createElement("path",{d:"M0 0h32v4.2H0z"}))}function HV(){return $.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},$.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function FV(){return $.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},$.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function UV(){return $.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},$.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ql=({children:e,className:t,...n})=>$.createElement("button",{type:"button",className:tn(["react-flow__controls-button",t]),...n},e);ql.displayName="ControlButton";const VV=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),qE=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:s=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const m=$t(),[h,p]=g.useState(!1),{isInteractive:v,minZoomReached:b,maxZoomReached:x}=ot(VV,OV),{zoomIn:y,zoomOut:w,fitView:j}=G0();if(g.useEffect(()=>{p(!0)},[]),!h)return null;const N=()=>{y(),i==null||i()},S=()=>{w(),o==null||o()},k=()=>{j(r),l==null||l()},E=()=>{m.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c==null||c(!v)};return $.createElement(JC,{className:tn(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&$.createElement($.Fragment,null,$.createElement(ql,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},$.createElement(BV,null)),$.createElement(ql,{onClick:S,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},$.createElement(IV,null))),n&&$.createElement(ql,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},$.createElement(HV,null)),s&&$.createElement(ql,{className:"react-flow__controls-interactive",onClick:E,title:"toggle interactivity","aria-label":"toggle interactivity"},v?$.createElement(UV,null):$.createElement(FV,null)),d)};qE.displayName="Controls";var ZE=g.memo(qE);function qV(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var is;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(is||(is={}));function ZV({color:e,dimensions:t,lineWidth:n}){return $.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function GV({color:e,radius:t}){return $.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const YV={[is.Dots]:"#91919a",[is.Lines]:"#eee",[is.Cross]:"#e2e2e2"},XV={[is.Dots]:1,[is.Lines]:1,[is.Cross]:6},WV=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function GE({id:e,variant:t=is.Dots,gap:n=20,size:s,lineWidth:r=1,offset:i=2,color:o,style:l,className:c}){const u=g.useRef(null),{transform:d,patternId:f}=ot(WV,qV),m=o||YV[t],h=s||XV[t],p=t===is.Dots,v=t===is.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*d[2]||1,b[1]*d[2]||1],y=h*d[2],w=v?[y,y]:x,j=p?[y/i,y/i]:[w[0]/i,w[1]/i];return $.createElement("svg",{className:tn(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},$.createElement("pattern",{id:f+e,x:d[0]%x[0],y:d[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},p?$.createElement(GV,{color:m,radius:y/i}):$.createElement(ZV,{dimensions:w,color:m,lineWidth:r})),$.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}GE.displayName="Background";var YE=g.memo(GE);function KV(e){if(!e||typeof e!="object")throw new Error("Invalid perk tree data");const t=e;if(!t.treeId||!t.treeName||!t.perks||!Array.isArray(t.perks))throw new Error("Invalid perk tree structure");return t}function XE(e){try{return{success:!0,data:KV(e)}}catch(t){return{success:!1,error:t}}}const QV={nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120,fallbackSpacing:100};async function WE(e){try{const t=fn(`data/perk-positions/${e}-positions.json`);console.log("Attempting to load positions from:",t);const n=await fetch(t);if(console.log("Response status:",n.status,n.statusText),!n.ok)return console.warn(`No saved positions found for tree ${e} at ${t}`),null;const s=await n.json();return console.log("Successfully loaded positions for tree:",e),s}catch(t){return console.warn(`Failed to load saved positions for tree ${e}:`,t),null}}function JV(e,t){const n=new Map;e.forEach(o=>{const l=t==null?void 0:t.positions.find(c=>c.perkId===o.edid);n.set(o.edid,{perk:o,depth:-1,children:o.connections.children,parents:o.connections.parents,savedPosition:l})});const r=e.filter(o=>o.connections.parents.length===0).map(o=>({id:o.edid,depth:0})),i=new Set;for(;r.length>0;){const{id:o,depth:l}=r.shift();if(i.has(o))continue;i.add(o);const c=n.get(o);c&&((c.depth===-1||l<c.depth)&&(c.depth=l),c.children.forEach(u=>{n.has(u)&&!i.has(u)&&r.push({id:u,depth:l+1})}))}return n}function eq(e,t){const n=new Map,s=new Map;e.forEach(i=>{const o=i.depth;s.has(o)||s.set(o,[]),s.get(o).push(i)});const r=Math.max(...s.keys());return s.forEach((i,o)=>{const l=t.padding+(r-o)*t.verticalSpacing,c=(i.length-1)*t.horizontalSpacing,u=t.padding+(t.gridScaleX-c)/2;i.forEach((d,f)=>{const m=u+f*t.horizontalSpacing;n.set(d.perk.edid,{x:m,y:l})})}),n}function tq(e,t,n){t.positions.forEach(s=>{const r=e.get(s.perkId);r&&(r.savedPosition=s,r.calculatedPosition={x:s.x,y:s.y})})}function nq(e,t,n={}){const s={...QV,...n},r=JV(e.perks,t);t&&tq(r,t);const i=eq(r,s),o=new Map;return r.forEach((l,c)=>{if(l.calculatedPosition)o.set(c,l.calculatedPosition);else{const u=i.get(c);u?o.set(c,u):o.set(c,{x:s.padding,y:s.padding})}}),o}function sq(e,t){const n=Array.from(t.entries()).map(([s,r])=>({perkId:s,x:r.x,y:r.y,gridX:r.gridX,gridY:r.gridY,horizontal:r.horizontal,vertical:r.vertical}));return{treeId:e.treeId,treeName:e.treeName,positions:n,version:"1.0.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}function cw(e,t){const n=new Map;return t.positions.forEach(s=>{n.set(s.perkId,{x:s.x,y:s.y,gridX:s.gridX,gridY:s.gridY,horizontal:s.horizontal,vertical:s.vertical})}),n}function rq(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`${e.treeId}-positions.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}const aq=({data:e,selected:t,onTogglePerk:n,onRankChange:s})=>{var u,d,f,m,h;const r=e.totalRanks,i=r>1?(e.currentRank||0)>0:e.selected||t,o=p=>{if(p.preventDefault(),p.stopPropagation(),(e.totalRanks||1)>1){const b=e.currentRank||0,x=e.totalRanks||1,y=b>=x?0:b+1;s&&s(e.edid,y)}else n&&n(e.edid)},l=()=>{const p={padding:"8px 12px",borderRadius:"6px",border:"2px solid",fontSize:"12px",fontWeight:"500",minWidth:"140px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"};return e.hasNoPosition?{...p,borderColor:"#ef4444",borderStyle:"dashed",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 1px rgba(239, 68, 68, 0.3)"}:i?{...p,borderColor:"#d4af37",backgroundColor:"rgba(212, 175, 55, 0.15)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 2px rgba(212, 175, 55, 0.4), 0 2px 4px rgba(212, 175, 55, 0.2)",transform:"scale(1.02)"}:e.isRoot?{...p,borderColor:"hsl(var(--border))",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"}:{...p,borderColor:"hsl(var(--border))"}},c=((d=(u=e.ranks[0])==null?void 0:u.description)==null?void 0:d.base)||"";return a.jsxs(sC,{children:[a.jsx(rC,{asChild:!0,children:a.jsxs("div",{style:l(),onClick:o,onMouseDown:p=>p.stopPropagation(),children:[!e.isRoot&&a.jsx(Zo,{type:"target",position:le.Bottom}),a.jsx("div",{className:"font-medium",children:e.name}),r>1&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.currentRank||0,"/",r," ranks"]}),e.hasChildren&&a.jsx(Zo,{type:"source",position:le.Top})]})}),a.jsx(A0,{className:"w-80 bg-background border border-border shadow-lg",style:{zIndex:Lt.TOOLTIP},children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:e.name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:c}),typeof((h=(m=(f=e.ranks[0])==null?void 0:f.prerequisites)==null?void 0:m.skillLevel)==null?void 0:h.level)=="number"&&e.ranks[0].prerequisites.skillLevel.level>0&&a.jsxs("div",{className:"text-xs text-blue-700 font-medium pt-1",children:["Min. Level: ",e.ranks[0].prerequisites.skillLevel.level]}),r>1&&a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[a.jsx("strong",{children:"Ranks:"})," ",e.currentRank||0,"/",r,a.jsx("br",{}),a.jsx("em",{children:"Click to cycle through ranks"})]})]})})]})},KE=g.memo(aq);function iq({categories:e,selectedCategory:t,onCategorySelect:n,className:s}){return a.jsx("div",{className:H("mb-6",s),children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(q,{variant:t===null?"default":"outline",size:"sm",onClick:()=>n(null),children:"All Categories"}),e.map(r=>a.jsx(q,{variant:t===r?"default":"outline",size:"sm",onClick:()=>n(r),children:r},r))]})})}function zh({skills:e,onSelect:t,placeholder:n="Search skills...",className:s="",disabled:r=!1}){const[i,o]=g.useState(""),l=g.useMemo(()=>{if(!i.trim())return e;const f=i.toLowerCase();return e.filter(m=>m.name.toLowerCase().includes(f)||m.description.toLowerCase().includes(f)||m.category.toLowerCase().includes(f)||m.keyAbilities.some(h=>h.toLowerCase().includes(f))||m.metaTags.some(h=>h.toLowerCase().includes(f)))},[e,i]),c=g.useMemo(()=>l.map(f=>{var m;return{id:f.edid,label:f.name,description:f.description,category:f.category,badge:f.category&&a.jsx(K,{variant:"outline",className:"text-xs",children:f.category}),metadata:{originalSkill:f,keyAbilitiesCount:((m=f.keyAbilities)==null?void 0:m.length)||0,scaling:f.scaling}}}),[l]),u=f=>{const m=e.find(h=>h.edid===f.id);m&&t(m)},d=(f,m)=>{var h,p;return a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(km,{skillName:f.label,size:"sm",className:"flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:f.label}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.badge&&a.jsx("div",{className:"flex-shrink-0",children:f.badge}),((h=f.metadata)==null?void 0:h.keyAbilitiesCount)&&f.metadata.keyAbilitiesCount>0&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.metadata.keyAbilitiesCount," ability",f.metadata.keyAbilitiesCount!==1?"s":""]})]}),f.description&&a.jsx(ze,{text:f.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"}),((p=f.metadata)==null?void 0:p.scaling)&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("strong",{children:"Scaling:"})," ",f.metadata.scaling]})]})]})};return a.jsx(ru,{options:c,onSelect:u,placeholder:n,className:s,disabled:r,renderOption:d,emptyMessage:"No skills found",searchQuery:i,onSearchQueryChange:o})}function oq(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const QE=$.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),du=()=>{const e=$.useContext(QE);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};oq(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function lq(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function cq(){return W0(/^Mac/)}function uq(){return W0(/^iPhone/)}function uw(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function dq(){return W0(/^iPad/)||cq()&&navigator.maxTouchPoints>1}function JE(){return uq()||dq()}function W0(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const fq=24,mq=typeof window<"u"?g.useLayoutEffect:g.useEffect;function dw(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const Lh=typeof document<"u"&&window.visualViewport;function fw(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function e_(e){for(fw(e)&&(e=e.parentElement);e&&!fw(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const hq=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Ku=0,$h;function gq(e={}){let{isDisabled:t}=e;mq(()=>{if(!t)return Ku++,Ku===1&&JE()&&($h=pq()),()=>{Ku--,Ku===0&&($h==null||$h())}},[t])}function pq(){let e,t=0,n=f=>{e=e_(f.target),!(e===document.documentElement&&e===document.body)&&(t=f.changedTouches[0].pageY)},s=f=>{if(!e||e===document.documentElement||e===document.body){f.preventDefault();return}let m=f.changedTouches[0].pageY,h=e.scrollTop,p=e.scrollHeight-e.clientHeight;p!==0&&((h<=0&&m>t||h>=p&&m<t)&&f.preventDefault(),t=m)},r=f=>{let m=f.target;gp(m)&&m!==document.activeElement&&(f.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},i=f=>{let m=f.target;gp(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",Lh&&(Lh.height<window.innerHeight?requestAnimationFrame(()=>{mw(m)}):Lh.addEventListener("resize",()=>mw(m),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=dw(xq(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=dw(Ml(document,"touchstart",n,{passive:!1,capture:!0}),Ml(document,"touchmove",s,{passive:!1,capture:!0}),Ml(document,"touchend",r,{passive:!1,capture:!0}),Ml(document,"focus",i,!0),Ml(window,"scroll",o));return()=>{u(),d(),window.scrollTo(l,c)}}function xq(e,t,n){let s=e.style[t];return e.style[t]=n,()=>{e.style[t]=s}}function Ml(e,t,n,s){return e.addEventListener(t,n,s),()=>{e.removeEventListener(t,n,s)}}function mw(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=e_(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let s=n.getBoundingClientRect().top,r=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom;const o=n.getBoundingClientRect().bottom+fq;i>o&&(n.scrollTop+=r-s)}e=n.parentElement}}function gp(e){return e instanceof HTMLInputElement&&!hq.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function vq(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function yq(...e){return t=>e.forEach(n=>vq(n,t))}function t_(...e){return g.useCallback(yq(...e),e)}const n_=new WeakMap;function kt(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let s={};Object.entries(t).forEach(([r,i])=>{if(r.startsWith("--")){e.style.setProperty(r,i);return}s[r]=e.style[r],e.style[r]=i}),!n&&n_.set(e,s)}function bq(e,t){if(!e||!(e instanceof HTMLElement))return;let n=n_.get(e);n&&(e.style[t]=n[t])}const bt=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Qu(e,t){if(!e)return null;const n=window.getComputedStyle(e),s=n.transform||n.webkitTransform||n.mozTransform;let r=s.match(/^matrix3d\((.+)\)$/);return r?parseFloat(r[1].split(", ")[bt(t)?13:12]):(r=s.match(/^matrix\((.+)\)$/),r?parseFloat(r[1].split(", ")[bt(t)?5:4]):null)}function wq(e){return 8*(Math.log(e+1)-2)}function Ph(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function jq(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const rt={DURATION:.5,EASE:[.32,.72,0,1]},s_=.4,Nq=.25,Sq=100,r_=8,Da=16,pp=26,Oh="vaul-dragging";function a_(e){const t=$.useRef(e);return $.useEffect(()=>{t.current=e}),$.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function kq({defaultProp:e,onChange:t}){const n=$.useState(e),[s]=n,r=$.useRef(s),i=a_(t);return $.useEffect(()=>{r.current!==s&&(i(s),r.current=s)},[s,r,i]),n}function i_({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,r]=kq({defaultProp:t,onChange:n}),i=e!==void 0,o=i?e:s,l=a_(n),c=$.useCallback(u=>{if(i){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else r(u)},[i,e,r,l]);return[o,c]}function Cq({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:s,overlayRef:r,fadeFromIndex:i,onSnapPointChange:o,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[d,f]=i_({prop:e,defaultProp:n==null?void 0:n[0],onChange:t}),[m,h]=$.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);$.useEffect(()=>{function k(){h({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const p=$.useMemo(()=>d===(n==null?void 0:n[n.length-1])||null,[n,d]),v=$.useMemo(()=>{var k;return(k=n==null?void 0:n.findIndex(E=>E===d))!=null?k:null},[n,d]),b=n&&n.length>0&&(i||i===0)&&!Number.isNaN(i)&&n[i]===d||!n,x=$.useMemo(()=>{const k=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var E;return(E=n==null?void 0:n.map(C=>{const _=typeof C=="string";let P=0;if(_&&(P=parseInt(C,10)),bt(l)){const z=_?P:m?C*k.height:0;return m?l==="bottom"?k.height-z:-k.height+z:z}const D=_?P:m?C*k.width:0;return m?l==="right"?k.width-D:-k.width+D:D}))!=null?E:[]},[n,m,c]),y=$.useMemo(()=>v!==null?x==null?void 0:x[v]:null,[x,v]),w=$.useCallback(k=>{var E;const C=(E=x==null?void 0:x.findIndex(_=>_===k))!=null?E:null;o(C),kt(s.current,{transition:`transform ${rt.DURATION}s cubic-bezier(${rt.EASE.join(",")})`,transform:bt(l)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`}),x&&C!==x.length-1&&i!==void 0&&C!==i&&C<i?kt(r.current,{transition:`opacity ${rt.DURATION}s cubic-bezier(${rt.EASE.join(",")})`,opacity:"0"}):kt(r.current,{transition:`opacity ${rt.DURATION}s cubic-bezier(${rt.EASE.join(",")})`,opacity:"1"}),f(n==null?void 0:n[Math.max(C,0)])},[s.current,n,x,i,r,f]);$.useEffect(()=>{if(d||e){var k;const E=(k=n==null?void 0:n.findIndex(C=>C===e||C===d))!=null?k:-1;x&&E!==-1&&typeof x[E]=="number"&&w(x[E])}},[d,e,n,x,w]);function j({draggedDistance:k,closeDrawer:E,velocity:C,dismissible:_}){if(i===void 0)return;const P=l==="bottom"||l==="right"?(y??0)-k:(y??0)+k,D=v===i-1,z=v===0,A=k>0;if(D&&kt(r.current,{transition:`opacity ${rt.DURATION}s cubic-bezier(${rt.EASE.join(",")})`}),!u&&C>2&&!A){_?E():w(x[0]);return}if(!u&&C>2&&A&&x&&n){w(x[n.length-1]);return}const O=x==null?void 0:x.reduce((L,M)=>typeof L!="number"||typeof M!="number"?L:Math.abs(M-P)<Math.abs(L-P)?M:L),T=bt(l)?window.innerHeight:window.innerWidth;if(C>s_&&Math.abs(k)<T*.4){const L=A?1:-1;if(L>0&&p&&n){w(x[n.length-1]);return}if(z&&L<0&&_&&E(),v===null)return;w(x[v+L]);return}w(O)}function N({draggedDistance:k}){if(y===null)return;const E=l==="bottom"||l==="right"?y-k:y+k;(l==="bottom"||l==="right")&&E<x[x.length-1]||(l==="top"||l==="left")&&E>x[x.length-1]||kt(s.current,{transform:bt(l)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})}function S(k,E){if(!n||typeof v!="number"||!x||i===void 0)return null;const C=v===i-1;if(v>=i&&E)return 0;if(C&&!E)return 1;if(!b&&!C)return null;const P=C?v+1:v-1,D=C?x[P]-x[P-1]:x[P+1]-x[P],z=k/Math.abs(D);return C?1-z:z}return{isLastSnapPoint:p,activeSnapPoint:d,shouldFade:b,getPercentageDragged:S,setActiveSnapPoint:f,activeSnapPointIndex:v,onRelease:j,onDrag:N,snapPointsOffset:x}}const Eq=()=>()=>{};function _q(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:s,noBodyStyles:r}=du(),i=$.useRef(null),o=g.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-pp)/window.innerWidth}$.useEffect(()=>{if(t&&n){i.current&&clearTimeout(i.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;jq(s&&!r?Ph(document.body,{background:"black"}):Eq,Ph(c,{transformOrigin:bt(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${rt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${rt.EASE.join(",")})`}));const u=Ph(c,{borderRadius:`${r_}px`,overflow:"hidden",...bt(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),i.current=window.setTimeout(()=>{o?document.body.style.background=o:document.body.style.removeProperty("background")},rt.DURATION*1e3)}}},[t,n,o])}let Rl=null;function Aq({isOpen:e,modal:t,nested:n,hasBeenOpened:s,preventScrollRestoration:r,noBodyStyles:i}){const[o,l]=$.useState(()=>typeof window<"u"?window.location.href:""),c=$.useRef(0),u=$.useCallback(()=>{if(uw()&&Rl===null&&e&&!i){Rl={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const h=m-window.innerHeight;h&&c.current>=m&&(document.body.style.top=`${-(c.current+h)}px`)}),300)}},[e]),d=$.useCallback(()=>{if(uw()&&Rl!==null&&!i){const f=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Rl),window.requestAnimationFrame(()=>{if(r&&o!==window.location.href){l(window.location.href);return}window.scrollTo(m,f)}),Rl=null}},[o]);return $.useEffect(()=>{function f(){c.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),$.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||d()}},[t,d]),$.useEffect(()=>{n||!s||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{d()},500)):d())},[e,s,o,t,n,u,d]),{restorePositionSetting:d}}function Tq({open:e,onOpenChange:t,children:n,onDrag:s,onRelease:r,snapPoints:i,shouldScaleBackground:o=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=Nq,scrollLockTimeout:u=Sq,dismissible:d=!0,handleOnly:f=!1,fadeFromIndex:m=i&&i.length-1,activeSnapPoint:h,setActiveSnapPoint:p,fixed:v,modal:b=!0,onClose:x,nested:y,noBodyStyles:w=!1,direction:j="bottom",defaultOpen:N=!1,disablePreventScroll:S=!0,snapToSequentialPoint:k=!1,preventScrollRestoration:E=!1,repositionInputs:C=!0,onAnimationEnd:_,container:P,autoFocus:D=!1}){var z,A;const[O=!1,T]=i_({defaultProp:N,prop:e,onChange:de=>{t==null||t(de),!de&&!y&&Ys(),setTimeout(()=>{_==null||_(de)},rt.DURATION*1e3),de&&!b&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),de||(document.body.style.pointerEvents="auto")}}),[L,M]=$.useState(!1),[R,B]=$.useState(!1),[F,I]=$.useState(!1),V=$.useRef(null),G=$.useRef(null),J=$.useRef(null),ie=$.useRef(null),ee=$.useRef(null),pe=$.useRef(!1),fe=$.useRef(null),we=$.useRef(0),U=$.useRef(!1),X=$.useRef(!N),Q=$.useRef(0),W=$.useRef(null),se=$.useRef(((z=W.current)==null?void 0:z.getBoundingClientRect().height)||0),ye=$.useRef(((A=W.current)==null?void 0:A.getBoundingClientRect().width)||0),ue=$.useRef(0),te=$.useCallback(de=>{i&&de===Dn.length-1&&(G.current=new Date)},[]),{activeSnapPoint:$e,activeSnapPointIndex:vt,setActiveSnapPoint:ps,onRelease:zr,snapPointsOffset:Dn,onDrag:Kn,shouldFade:Zs,getPercentageDragged:Gs}=Cq({snapPoints:i,activeSnapPointProp:h,setActiveSnapPointProp:p,drawerRef:W,fadeFromIndex:m,overlayRef:V,onSnapPointChange:te,direction:j,container:P,snapToSequentialPoint:k});gq({isDisabled:!O||R||!b||F||!L||!C||!S});const{restorePositionSetting:Ys}=Aq({isOpen:O,modal:b,nested:y??!1,hasBeenOpened:L,preventScrollRestoration:E,noBodyStyles:w});function Qn(){return(window.innerWidth-pp)/window.innerWidth}function Lr(de){var Me,Be;!d&&!i||W.current&&!W.current.contains(de.target)||(se.current=((Me=W.current)==null?void 0:Me.getBoundingClientRect().height)||0,ye.current=((Be=W.current)==null?void 0:Be.getBoundingClientRect().width)||0,B(!0),J.current=new Date,JE()&&window.addEventListener("touchend",()=>pe.current=!1,{once:!0}),de.target.setPointerCapture(de.pointerId),we.current=bt(j)?de.pageY:de.pageX)}function $r(de,Me){var Be;let Re=de;const He=(Be=window.getSelection())==null?void 0:Be.toString(),Ft=W.current?Qu(W.current,j):null,Ot=new Date;if(Re.tagName==="SELECT"||Re.hasAttribute("data-vaul-no-drag")||Re.closest("[data-vaul-no-drag]"))return!1;if(j==="right"||j==="left")return!0;if(G.current&&Ot.getTime()-G.current.getTime()<500)return!1;if(Ft!==null&&(j==="bottom"?Ft>0:Ft<0))return!0;if(He&&He.length>0)return!1;if(ee.current&&Ot.getTime()-ee.current.getTime()<u&&Ft===0||Me)return ee.current=Ot,!1;for(;Re;){if(Re.scrollHeight>Re.clientHeight){if(Re.scrollTop!==0)return ee.current=new Date,!1;if(Re.getAttribute("role")==="dialog")return!0}Re=Re.parentNode}return!0}function At(de){if(W.current&&R){const Me=j==="bottom"||j==="right"?1:-1,Be=(we.current-(bt(j)?de.pageY:de.pageX))*Me,Re=Be>0,He=i&&!d&&!Re;if(He&&vt===0)return;const Ft=Math.abs(Be),Ot=document.querySelector("[data-vaul-drawer-wrapper]"),vs=j==="bottom"||j==="top"?se.current:ye.current;let pn=Ft/vs;const Ks=Gs(Ft,Re);if(Ks!==null&&(pn=Ks),He&&pn>=1||!pe.current&&!$r(de.target,Re))return;if(W.current.classList.add(Oh),pe.current=!0,kt(W.current,{transition:"none"}),kt(V.current,{transition:"none"}),i&&Kn({draggedDistance:Be}),Re&&!i){const Ln=wq(Be),zi=Math.min(Ln*-1,0)*Me;kt(W.current,{transform:bt(j)?`translate3d(0, ${zi}px, 0)`:`translate3d(${zi}px, 0, 0)`});return}const ys=1-pn;if((Zs||m&&vt===m-1)&&(s==null||s(de,pn),kt(V.current,{opacity:`${ys}`,transition:"none"},!0)),Ot&&V.current&&o){const Ln=Math.min(Qn()+pn*(1-Qn()),1),zi=8-pn*8,Au=Math.max(0,14-pn*14);kt(Ot,{borderRadius:`${zi}px`,transform:bt(j)?`scale(${Ln}) translate3d(0, ${Au}px, 0)`:`scale(${Ln}) translate3d(${Au}px, 0, 0)`,transition:"none"},!0)}if(!i){const Ln=Ft*Me;kt(W.current,{transform:bt(j)?`translate3d(0, ${Ln}px, 0)`:`translate3d(${Ln}px, 0, 0)`})}}}$.useEffect(()=>{window.requestAnimationFrame(()=>{X.current=!0})},[]),$.useEffect(()=>{var de;function Me(){if(!W.current||!C)return;const Be=document.activeElement;if(gp(Be)||U.current){var Re;const He=((Re=window.visualViewport)==null?void 0:Re.height)||0,Ft=window.innerHeight;let Ot=Ft-He;const vs=W.current.getBoundingClientRect().height||0,pn=vs>Ft*.8;ue.current||(ue.current=vs);const Ks=W.current.getBoundingClientRect().top;if(Math.abs(Q.current-Ot)>60&&(U.current=!U.current),i&&i.length>0&&Dn&&vt){const ys=Dn[vt]||0;Ot+=ys}if(Q.current=Ot,vs>He||U.current){const ys=W.current.getBoundingClientRect().height;let Ln=ys;ys>He&&(Ln=He-(pn?Ks:pp)),v?W.current.style.height=`${ys-Math.max(Ot,0)}px`:W.current.style.height=`${Math.max(Ln,He-Ks)}px`}else lq()||(W.current.style.height=`${ue.current}px`);i&&i.length>0&&!U.current?W.current.style.bottom="0px":W.current.style.bottom=`${Math.max(Ot,0)}px`}}return(de=window.visualViewport)==null||de.addEventListener("resize",Me),()=>{var Be;return(Be=window.visualViewport)==null?void 0:Be.removeEventListener("resize",Me)}},[vt,i,Dn]);function Pt(de){Xs(),x==null||x(),de||T(!1),setTimeout(()=>{i&&ps(i[0])},rt.DURATION*1e3)}function xs(){if(!W.current)return;const de=document.querySelector("[data-vaul-drawer-wrapper]"),Me=Qu(W.current,j);kt(W.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${rt.DURATION}s cubic-bezier(${rt.EASE.join(",")})`}),kt(V.current,{transition:`opacity ${rt.DURATION}s cubic-bezier(${rt.EASE.join(",")})`,opacity:"1"}),o&&Me&&Me>0&&O&&kt(de,{borderRadius:`${r_}px`,overflow:"hidden",...bt(j)?{transform:`scale(${Qn()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Qn()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${rt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${rt.EASE.join(",")})`},!0)}function Xs(){!R||!W.current||(W.current.classList.remove(Oh),pe.current=!1,B(!1),ie.current=new Date)}function Ws(de){if(!R||!W.current)return;W.current.classList.remove(Oh),pe.current=!1,B(!1),ie.current=new Date;const Me=Qu(W.current,j);if(!de||!$r(de.target,!1)||!Me||Number.isNaN(Me)||J.current===null)return;const Be=ie.current.getTime()-J.current.getTime(),Re=we.current-(bt(j)?de.pageY:de.pageX),He=Math.abs(Re)/Be;if(He>.05&&(I(!0),setTimeout(()=>{I(!1)},200)),i){zr({draggedDistance:Re*(j==="bottom"||j==="right"?1:-1),closeDrawer:Pt,velocity:He,dismissible:d}),r==null||r(de,!0);return}if(j==="bottom"||j==="right"?Re>0:Re<0){xs(),r==null||r(de,!0);return}if(He>s_){Pt(),r==null||r(de,!1);return}var Ft;const Ot=Math.min((Ft=W.current.getBoundingClientRect().height)!=null?Ft:0,window.innerHeight);var vs;const pn=Math.min((vs=W.current.getBoundingClientRect().width)!=null?vs:0,window.innerWidth),Ks=j==="left"||j==="right";if(Math.abs(Me)>=(Ks?pn:Ot)*c){Pt(),r==null||r(de,!1);return}r==null||r(de,!0),xs()}$.useEffect(()=>(O&&(kt(document.documentElement,{scrollBehavior:"auto"}),G.current=new Date),()=>{bq(document.documentElement,"scrollBehavior")}),[O]);function Jn(de){const Me=de?(window.innerWidth-Da)/window.innerWidth:1,Be=de?-Da:0;fe.current&&window.clearTimeout(fe.current),kt(W.current,{transition:`transform ${rt.DURATION}s cubic-bezier(${rt.EASE.join(",")})`,transform:bt(j)?`scale(${Me}) translate3d(0, ${Be}px, 0)`:`scale(${Me}) translate3d(${Be}px, 0, 0)`}),!de&&W.current&&(fe.current=setTimeout(()=>{const Re=Qu(W.current,j);kt(W.current,{transition:"none",transform:bt(j)?`translate3d(0, ${Re}px, 0)`:`translate3d(${Re}px, 0, 0)`})},500))}function zn(de,Me){if(Me<0)return;const Be=(window.innerWidth-Da)/window.innerWidth,Re=Be+Me*(1-Be),He=-Da+Me*Da;kt(W.current,{transform:bt(j)?`scale(${Re}) translate3d(0, ${He}px, 0)`:`scale(${Re}) translate3d(${He}px, 0, 0)`,transition:"none"})}function Ta(de,Me){const Be=bt(j)?window.innerHeight:window.innerWidth,Re=Me?(Be-Da)/Be:1,He=Me?-Da:0;Me&&kt(W.current,{transition:`transform ${rt.DURATION}s cubic-bezier(${rt.EASE.join(",")})`,transform:bt(j)?`scale(${Re}) translate3d(0, ${He}px, 0)`:`scale(${Re}) translate3d(${He}px, 0, 0)`})}return $.useEffect(()=>{b||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[b]),$.createElement(Y1,{defaultOpen:N,onOpenChange:de=>{!d&&!de||(de?M(!0):Pt(!0),T(de))},open:O},$.createElement(QE.Provider,{value:{activeSnapPoint:$e,snapPoints:i,setActiveSnapPoint:ps,drawerRef:W,overlayRef:V,onOpenChange:t,onPress:Lr,onRelease:Ws,onDrag:At,dismissible:d,shouldAnimate:X,handleOnly:f,isOpen:O,isDragging:R,shouldFade:Zs,closeDrawer:Pt,onNestedDrag:zn,onNestedOpenChange:Jn,onNestedRelease:Ta,keyboardIsOpen:U,modal:b,snapPointsOffset:Dn,activeSnapPointIndex:vt,direction:j,shouldScaleBackground:o,setBackgroundColorOnScale:l,noBodyStyles:w,container:P,autoFocus:D}},n))}const o_=$.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:s,onRelease:r,shouldFade:i,isOpen:o,modal:l,shouldAnimate:c}=du(),u=t_(t,n),d=s&&s.length>0;if(!l)return null;const f=$.useCallback(m=>r(m),[r]);return $.createElement(Hx,{onMouseUp:f,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":o&&d?"true":"false","data-vaul-snap-points-overlay":o&&i?"true":"false","data-vaul-animate":c!=null&&c.current?"true":"false",...e})});o_.displayName="Drawer.Overlay";const K0=$.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...s},r){const{drawerRef:i,onPress:o,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:d,activeSnapPointIndex:f,modal:m,isOpen:h,direction:p,snapPoints:v,container:b,handleOnly:x,shouldAnimate:y,autoFocus:w}=du(),[j,N]=$.useState(!1),S=t_(r,i),k=$.useRef(null),E=$.useRef(null),C=$.useRef(!1),_=v&&v.length>0;_q();const P=(z,A,O=0)=>{if(C.current)return!0;const T=Math.abs(z.y),L=Math.abs(z.x),M=L>T,R=["bottom","right"].includes(A)?1:-1;if(A==="left"||A==="right"){if(!(z.x*R<0)&&L>=0&&L<=O)return M}else if(!(z.y*R<0)&&T>=0&&T<=O)return!M;return C.current=!0,!0};$.useEffect(()=>{_&&window.requestAnimationFrame(()=>{N(!0)})},[]);function D(z){k.current=null,C.current=!1,l(z)}return $.createElement(Fx,{"data-vaul-drawer-direction":p,"data-vaul-drawer":"","data-vaul-delayed-snap-points":j?"true":"false","data-vaul-snap-points":h&&_?"true":"false","data-vaul-custom-container":b?"true":"false","data-vaul-animate":y!=null&&y.current?"true":"false",...s,ref:S,style:d&&d.length>0?{"--snap-point-height":`${d[f??0]}px`,...t}:t,onPointerDown:z=>{x||(s.onPointerDown==null||s.onPointerDown.call(s,z),k.current={x:z.pageX,y:z.pageY},o(z))},onOpenAutoFocus:z=>{n==null||n(z),w||z.preventDefault()},onPointerDownOutside:z=>{if(e==null||e(z),!m||z.defaultPrevented){z.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:z=>{if(!m){z.preventDefault();return}},onPointerMove:z=>{if(E.current=z,x||(s.onPointerMove==null||s.onPointerMove.call(s,z),!k.current))return;const A=z.pageY-k.current.y,O=z.pageX-k.current.x,T=z.pointerType==="touch"?10:2;P({x:O,y:A},p,T)?c(z):(Math.abs(O)>T||Math.abs(A)>T)&&(k.current=null)},onPointerUp:z=>{s.onPointerUp==null||s.onPointerUp.call(s,z),k.current=null,C.current=!1,l(z)},onPointerOut:z=>{s.onPointerOut==null||s.onPointerOut.call(s,z),D(E.current)},onContextMenu:z=>{s.onContextMenu==null||s.onContextMenu.call(s,z),E.current&&D(E.current)}})});K0.displayName="Drawer.Content";const Mq=250,Rq=120,Dq=$.forwardRef(function({preventCycle:e=!1,children:t,...n},s){const{closeDrawer:r,isDragging:i,snapPoints:o,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:d,isOpen:f,onPress:m,onDrag:h}=du(),p=$.useRef(null),v=$.useRef(!1);function b(){if(v.current){w();return}window.setTimeout(()=>{x()},Rq)}function x(){if(i||e||v.current){w();return}if(w(),!o||o.length===0){u||r();return}if(l===o[o.length-1]&&u){r();return}const N=o.findIndex(k=>k===l);if(N===-1)return;const S=o[N+1];c(S)}function y(){p.current=window.setTimeout(()=>{v.current=!0},Mq)}function w(){p.current&&window.clearTimeout(p.current),v.current=!1}return $.createElement("div",{onClick:b,onPointerCancel:w,onPointerDown:j=>{d&&m(j),y()},onPointerMove:j=>{d&&h(j)},ref:s,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},$.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});Dq.displayName="Drawer.Handle";function zq(e){const t=du(),{container:n=t.container,...s}=e;return $.createElement(X1,{container:n,...s})}const Mr={Root:Tq,Content:K0,Overlay:o_,Portal:zq,Title:Ux,Description:Vx},l_=({shouldScaleBackground:e=!0,...t})=>a.jsx(Mr.Root,{shouldScaleBackground:e,...t});l_.displayName="Drawer";const c_=Mr.Portal,Q0=g.forwardRef(({className:e,...t},n)=>a.jsx(Mr.Overlay,{ref:n,className:H("fixed inset-0 bg-background/80 backdrop-blur-sm",e),style:{zIndex:Lt.MODAL},...t}));Q0.displayName=Mr.Overlay.displayName;const Lq=g.forwardRef(({className:e,children:t,fullHeight:n=!1,...s},r)=>a.jsxs(c_,{children:[a.jsx(Q0,{}),a.jsxs(Mr.Content,{ref:r,className:H(n?"fixed inset-x-0 bottom-0 z-50 flex h-[100dvh] max-h-[100dvh] w-full bg-background":"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),style:{zIndex:Lt.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[!n&&a.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));Lq.displayName="DrawerContent";const u_=({className:e,...t})=>a.jsx("div",{className:H("grid gap-1.5 p-4 text-center sm:text-left",e),...t});u_.displayName="DrawerHeader";const d_=({className:e,...t})=>a.jsx("div",{className:H("mt-auto flex flex-col gap-2 p-4",e),...t});d_.displayName="DrawerFooter";const f_=g.forwardRef(({className:e,...t},n)=>a.jsx(Mr.Title,{ref:n,className:H("text-lg font-semibold leading-none tracking-tight",e),...t}));f_.displayName=Mr.Title.displayName;const m_=g.forwardRef(({className:e,...t},n)=>a.jsx(Mr.Description,{ref:n,className:H("text-sm text-muted-foreground",e),...t}));m_.displayName=Mr.Description.displayName;function $q(e,t){const n=new Map;return t.forEach(s=>{var o;const r=s.treeId,i=((o=s.perks)==null?void 0:o.length)||0;n.set(r,i)}),n}function J0(){const{data:e,loading:t,error:n,reload:s}=Q6(),{data:r,loading:i,error:o,reload:l}=x0(),c=t||i,u=n||o;return{skills:g.useMemo(()=>{if(!e||!r)return[];const m=$q(e,r);return e.map(h=>({id:h.edid,name:h.name,category:h.category,description:h.description,keyAbilities:h.keyAbilities||[],metaTags:h.metaTags||[],assignmentType:"none",canAssignMajor:!0,canAssignMinor:!0,level:0,totalPerks:m.get(h.edid)||0,selectedPerksCount:0,selectedPerks:[],isSelected:!1}))},[e,r]),perkTrees:r||[],loading:c,error:u,refreshSkills:async()=>{await Promise.all([s(),l()])}}}function Pq(){var b;const{skills:e,loading:t,error:n}=J0(),{build:s,addMajorSkill:r,addMinorSkill:i,removeMajorSkill:o,removeMinorSkill:l}=ht(),c=g.useMemo(()=>e.map(x=>{var E,C;const y=s.skills.major.includes(x.id),w=s.skills.minor.includes(x.id),N=(((C=(E=s.perks)==null?void 0:E.selected)==null?void 0:C[x.id])||[]).length,S=!y&&s.skills.major.length<3,k=!w&&s.skills.minor.length<6;return{...x,isMajor:y,isMinor:w,selectedPerksCount:N,canAssignMajor:S,canAssignMinor:k}}),[e,s.skills.major,s.skills.minor,(b=s.perks)==null?void 0:b.selected]),u=g.useMemo(()=>c.filter(x=>x.isMajor),[c]),d=g.useMemo(()=>c.filter(x=>x.isMinor),[c]),f=g.useMemo(()=>c.filter(x=>!x.isMajor&&!x.isMinor),[c]);return{skills:c,selectedMajorSkills:u,selectedMinorSkills:d,availableSkills:f,loading:t,error:n,handleMajorSkillSelect:x=>{r(x.id)},handleMinorSkillSelect:x=>{i(x.id)},handleMajorSkillRemove:x=>{o(x)},handleMinorSkillRemove:x=>{l(x)}}}function Oq(e){const[t,n]=g.useState(""),[s,r]=g.useState(null),i=g.useMemo(()=>e.filter(c=>{const u=c.name.toLowerCase().includes(t.toLowerCase())||c.description.toLowerCase().includes(t.toLowerCase())||c.category.toLowerCase().includes(t.toLowerCase())||c.keyAbilities.some(f=>f.toLowerCase().includes(t.toLowerCase()))||c.metaTags.some(f=>f.toLowerCase().includes(t.toLowerCase())),d=!s||c.category===s;return u&&d}),[e,t,s]),o=g.useMemo(()=>{const c=new Set(e.map(u=>u.category));return Array.from(c).sort()},[e]);return{searchQuery:t,setSearchQuery:n,selectedCategory:s,setSelectedCategory:r,filteredSkills:i,categories:o,clearFilters:()=>{n(""),r(null)}}}function ev(e){const{data:t,loading:n,error:s}=x0(),{getSkillPerks:r,getPerkRank:i,addPerk:o,removePerk:l,setPerkRank:c,clearSkillPerks:u}=ht(),d=g.useMemo(()=>!e||!t?null:t.find(y=>y.treeId===e)||null,[e,t]),f=g.useMemo(()=>e?r(e):[],[e,r]),m=g.useMemo(()=>{if(!e||!d)return{};const x={};return d.perks.forEach(y=>{x[y.edid]=i(y.edid)}),x},[e,d,i]),h=g.useMemo(()=>{if(!d)return[];const x=[];return d.perks.forEach(y=>{if(y.isRoot){x.push(y.edid);return}(y.connections.parents||[]).every(N=>f.includes(N))&&x.push(y.edid)}),x},[d,f]);return{perkTrees:t||[],selectedPerkTree:d,selectedPerks:f,perkRanks:m,availablePerks:h,loading:n,error:s,handlePerkSelect:x=>{if(!e)return;f.includes(x)?l(e,x):o(e,x)},handlePerkRankChange:(x,y)=>{c(x,y),y===0?f.includes(x)&&l(e,x):f.includes(x)||o(e,x)},handleResetPerks:()=>{e&&u(e)}}}function h_(){var T,L,M,R,B,F;const{skills:e,loading:t,error:n,refreshSkills:s}=J0(),{build:r,addMajorSkill:i,addMinorSkill:o,removeMajorSkill:l,removeMinorSkill:c}=ht(),{searchQuery:u,setSearchQuery:d,selectedCategory:f,setSelectedCategory:m,filteredSkills:h,categories:p,clearFilters:v}=Oq(e),b=g.useMemo(()=>h.map(I=>{var ee,pe,fe;const V=((pe=(ee=r.perks)==null?void 0:ee.selected)==null?void 0:pe[I.id])||[],G=V.length,J=I.totalPerks??0,ie=r1(I.id,V,((fe=r.perks)==null?void 0:fe.ranks)||{});return{...I,selectedPerksCount:G,level:ie,assignmentType:r.skills.major.includes(I.id)?"major":r.skills.minor.includes(I.id)?"minor":"none",canAssignMajor:!r.skills.major.includes(I.id)&&r.skills.major.length<3,canAssignMinor:!r.skills.minor.includes(I.id)&&r.skills.minor.length<6,perkCount:`${G}/${J}`}}),[h,r.skills.major,r.skills.minor,(T=r.perks)==null?void 0:T.selected,(L=r.perks)==null?void 0:L.ranks]),x=g.useMemo(()=>({majorCount:r.skills.major.length,minorCount:r.skills.minor.length,majorLimit:3,minorLimit:6,canAssignMajor:r.skills.major.length<3,canAssignMinor:r.skills.minor.length<6,totalSkills:b.length,totalPerks:b.reduce((I,V)=>I+(V.selectedPerksCount||0),0),totalPerkRanks:0}),[b,r.skills.major,r.skills.minor]),y=g.useCallback(I=>{i(I)},[i]),w=g.useCallback(I=>{o(I)},[o]),j=g.useCallback(I=>{l(I),c(I)},[l,c]),[N,S]=g.useState(null),k=g.useCallback(I=>{S(I)},[]),E=g.useMemo(()=>N&&b.find(I=>I.id===N)||null,[N,b]),{selectedPerkTree:C,handleResetPerks:_}=ev(N),P=g.useMemo(()=>{var I;return!E||!((I=r.perks)!=null&&I.selected)?[]:r.perks.selected[E.id]||[]},[E,(M=r.perks)==null?void 0:M.selected]),D=g.useMemo(()=>{var I;return!E||!((I=r.perks)!=null&&I.ranks)?{}:r.perks.ranks[E.id]||{}},[E,(R=r.perks)==null?void 0:R.ranks]),z=g.useMemo(()=>C?C.perks||[]:[],[C]),A=g.useCallback(I=>{var J,ie;if(!E)return;const V=((ie=(J=r.perks)==null?void 0:J.selected)==null?void 0:ie[E.id])||[];V.includes(I)?(V.filter(ee=>ee!==I),console.log("Remove perk:",I,"from skill:",E.id)):([...V],console.log("Add perk:",I,"to skill:",E.id))},[E,(B=r.perks)==null?void 0:B.selected]),O=g.useCallback((I,V)=>{var J,ie;if(!E)return;({...((ie=(J=r.perks)==null?void 0:J.ranks)==null?void 0:ie[E.id])||{}},console.log("Update perk rank:",I,"to",V,"for skill:",E.id))},[E,(F=r.perks)==null?void 0:F.ranks]);return{skills:b,skillSummary:x,selectedSkill:E,selectedSkillId:N,perkTree:C,selectedPerks:P,perkRanks:D,availablePerks:z,loading:t,error:n,searchQuery:u,setSearchQuery:d,selectedCategory:f,setSelectedCategory:m,categories:p,clearFilters:v,onAssignMajor:y,onAssignMinor:w,onRemoveAssignment:j,onSkillSelect:k,onPerkSelect:A,onPerkRankChange:O,onResetPerks:_,refreshSkills:s}}function Bq(e){const t=new Set,n=[],s=(r,i)=>{if(t.has(r))return;t.add(r),i.push(e.find(l=>l.edid===r));const o=e.find(l=>l.edid===r);o.connection.children.forEach(l=>{e.some(c=>c.edid===l)&&s(l,i)}),o.connection.parents.forEach(l=>{e.some(c=>c.edid===l)&&s(l,i)})};return e.forEach(r=>{if(!t.has(r.edid)){const i=[];s(r.edid,i),n.push(i)}}),n}function Iq(e,t){try{if(e.length===0)return[];const r=Bq(e).map(l=>Hq(l)).map(l=>Fq(l,t)),i=Vq(r,t);return g_(i,t)}catch{return e.map(s=>({id:s.edid,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0}))}}function Hq(e){const t=new Map;e.forEach(l=>{t.set(l.edid,{perk:l,depth:-1,children:l.connection.children,parents:l.connection.parents,x:0,y:0,width:0})});const n=[];t.forEach((l,c)=>{l.parents.length===0&&n.push(c)});const s=n.map(l=>({id:l,depth:0})),r=new Set;for(;s.length>0;){const{id:l,depth:c}=s.shift();if(r.has(l))continue;r.add(l);const u=t.get(l);u&&((u.depth===-1||c<u.depth)&&(u.depth=c),u.children.forEach(d=>{t.has(d)&&!r.has(d)&&s.push({id:d,depth:c+1})}))}let i=!0,o=0;for(;i&&o<10;)i=!1,o++,t.forEach((l,c)=>{if(l.parents.length>1){const u=l.parents.map(d=>{const f=t.get(d);return f?f.depth:-1}).filter(d=>d!==-1);if(u.length>0){const f=Math.min(...u)+1;l.depth!==f&&(l.depth=f,i=!0)}}});return t.forEach((l,c)=>{l.children.forEach(u=>{const d=t.get(u);if(d&&d.depth<=l.depth){const f=l.depth+1;d.depth=f}})}),{nodes:t,roots:n}}function Fq(e,t){const{nodes:n,roots:s}=e,r=[];if(n.forEach((f,m)=>{r.push({id:m,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0,children:f.children})}),r.some(f=>{try{return xp(f.id,n,t,new Set),!1}catch{return!0}}))return r.forEach(f=>{const m=n.get(f.id);if(m&&m.perk){const h=m.perk.position.x*t.gridScaleX,p=-m.perk.position.y*t.gridScaleY;f.x=h,f.y=p,f.originalX=h,f.originalY=p}}),Uq(r,t),r;const o=r.filter(f=>!r.some(h=>{var p;return h.id!==f.id&&((p=h.children)==null?void 0:p.includes(f.id))}));o.forEach(f=>{f.y=0,f.originalY=0});const l=new Set,c=o.map(f=>({node:f,depth:0}));for(;c.length>0;){const{node:f,depth:m}=c.shift();l.has(f.id)||(l.add(f.id),m>0&&(f.y=-m*t.verticalSpacing,f.originalY=f.y),f.children&&f.children.forEach(h=>{const p=r.find(v=>v.id===h);p&&!l.has(h)&&c.push({node:p,depth:m+1})}))}const u=new Map;return r.forEach(f=>{const m=Math.round(f.y/t.verticalSpacing);u.has(m)||u.set(m,[]),u.get(m).push(f)}),Array.from(u.keys()).sort((f,m)=>m-f).forEach(f=>{u.get(f).forEach(h=>{if(h.children){const p=new Map;h.children.forEach(v=>{const b=r.find(x=>x.id===v);if(b){const x=r.filter(y=>{var w;return((w=y.children)==null?void 0:w.includes(v))&&Math.abs(y.y-b.y)===t.verticalSpacing});x.length>0&&x.some(y=>y.id===h.id)&&(p.has(h.id)||p.set(h.id,[]),p.get(h.id).push(b))}}),p.forEach((v,b)=>{if(v.length>0){const x=r.find(y=>y.id===b);if(x){const y=v.map(k=>{const E=xp(k.id,n,t);return{child:k,subtreeWidth:E}}),w=y.reduce((k,{subtreeWidth:E})=>k+E,0),j=(v.length-1)*t.horizontalSpacing,N=w+j;let S=x.x-N/2;y.forEach(({child:k,subtreeWidth:E})=>{k.x=S+E/2,k.originalX=k.x,S+=E+t.horizontalSpacing})}}})}})}),g_(r,t),r}function g_(e,t){const r=t.horizontalSpacing*.4,i=new Map;e.forEach(o=>{i.set(o.id,{x:o.x,y:o.y})});for(let o=0;o<5;o++){let l=0;for(let c=0;c<e.length;c++)for(let u=c+1;u<e.length;u++){const d=e[c],f=e[u],m=d.x+t.nodeWidth*.5,h=d.y+t.nodeHeight*.5,p=f.x+t.nodeWidth*.5,v=f.y+t.nodeHeight*.5,b=p-m,x=v-h,y=Math.sqrt(b*b+x*x);if(y<r&&y>0){const w=b/y*.03,j=x/y*.03;d.x-=w,d.y-=j,f.x+=w,f.y+=j,l++}}if(l===0)break}return e.forEach(o=>{const l=i.get(o.id);if(!l)return;const c=l.x-o.x,u=l.y-o.y,d=o.x+c*.02,f=o.y+u*.02,h=Math.round(l.y/t.verticalSpacing)*t.verticalSpacing,p=Math.max(f,h);o.x=d,o.y=p,o.originalX=d,o.originalY=p}),e}function Uq(e,t){const r=t.nodeHeight*.8,i=50,o=new Map;e.forEach(u=>{o.set(u.id,{x:u.x,y:u.y})});let l=0,c=1;for(;c>0&&l<i;){l++,c=0;for(let u=0;u<e.length;u++)for(let d=u+1;d<e.length;d++){const f=e[u],m=e[d],h=Math.max(0,Math.min(f.x+t.nodeWidth,m.x+t.nodeWidth)-Math.max(f.x,m.x)),p=Math.max(0,Math.min(f.y+t.nodeHeight,m.y+t.nodeHeight)-Math.max(f.y,m.y)),v=f.y+t.nodeHeight*.5,b=m.y+t.nodeHeight*.5,x=Math.abs(b-v),y=x<r;if(h>0&&p>0||y){c++;let w=0;h>0&&p>0?w=p*.08:y&&(w=(r-x)*.08),f.y<m.y?(f.y-=w,m.y+=w):(f.y+=w,m.y-=w)}}if(c===0)break}return e.forEach(u=>{const d=o.get(u.id);if(!d)return;const f=d.y-u.y,m=u.y+f*.03;u.y=m,u.originalY=m}),e}function Vq(e,t){const n=[],s=e.map(c=>{const u=Math.max(...c.map(w=>w.y)),d=c.filter(w=>Math.abs(w.y-u)<1),f=d.map(w=>w.x),m=Math.min(...f),h=Math.max(...f),p=h-m,v=f.reduce((w,j)=>w+j,0)/f.length,b=Math.min(...c.map(w=>w.x)),x=Math.max(...c.map(w=>w.x+w.width)),y=x-b;return{treeNodes:c,rootNodes:d,minRootX:m,maxRootX:h,rootWidth:p,rootCenterX:v,minX:b,maxX:x,treeWidth:y}}),r=Math.min(...s.map(c=>c.minRootX)),o=Math.max(...s.map(c=>c.maxRootX))-r;let l=0;return s.forEach(c=>{const u=o>0?c.rootWidth/o:1,d=c.minRootX-r;l-c.minX+d*u,c.treeNodes.forEach(f=>{const h=(f.x-c.minRootX)*u,p=l+h;n.push({...f,x:p,originalX:p})}),l+=c.treeWidth*u+t.horizontalSpacing}),n}function xp(e,t,n,s=new Set){if(s.has(e))throw new Error(`Circular reference detected for perkId: ${e}`);const r=t.get(e);if(!r)return n.nodeWidth;s.add(e);const i=r.children||[],o=i.map(c=>xp(c,t,n,new Set(s)));if(o.length===0)return n.nodeWidth;let l=0;return o.forEach((c,u)=>{l+=c,u<i.length-1&&(l+=n.horizontalSpacing)}),Math.max(l,n.nodeWidth)}function qq(e){return e.perks.map(t=>({edid:t.edid,name:t.name,position:t.position,connection:t.connections}))}const Zq={perkNode:e=>a.jsx(KE,{...e,onTogglePerk:e.data.onTogglePerk,onRankChange:e.data.onRankChange})};function Gq({tree:e,onTogglePerk:t,onRankChange:n,selectedPerks:s}){const[r,i]=$.useState(null),[o,l]=$.useState(null),[c,u]=$.useState(!1),d=$.useCallback((_,P)=>{},[]),f=g.useMemo(()=>{if(!e)return null;const _=XE(e);return _.success?_.data:(console.error("Invalid perk tree data:",_.error),null)},[e]);$.useEffect(()=>{if(!f){l(null);return}console.log("Loading saved positions for tree:",f.treeId),u(!0),WE(f.treeId).then(_=>{console.log("Loaded saved positions:",_?"Found":"Not found"),l(_)}).catch(_=>{console.warn("Failed to load saved positions:",_),l(null)}).finally(()=>{u(!1)})},[f==null?void 0:f.treeId]);const m=g.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),h=g.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),p=g.useMemo(()=>{if(!f)return[];if(console.log("Layout decision:",{hasSavedPositions:!!o,isLoadingPositions:c,treeId:f.treeId}),o&&!c){console.log("Using preset positions for tree:",f.treeId);const _=nq(f,o,h);return Array.from(_.entries()).map(([P,D])=>({id:P,x:D.x,y:D.y,width:h.nodeWidth||140,height:h.nodeHeight||80,originalX:D.x,originalY:D.y}))}else{console.log("Using fallback layout algorithm for tree:",f.treeId);const _=qq(f);return Iq(_,m)}},[f,m,o,c,h]),v=g.useMemo(()=>!f||p.length===0?[]:f.perks.map(_=>{const P=_.edid,D=p.find(M=>M.id===P),z=D?{x:D.x,y:D.y}:{x:0,y:0},A=_.connections.children.length>0,O=_.connections.parents.length===0,T=s.find(M=>M.edid===P);return{id:P,type:"perkNode",position:z,draggable:!0,data:{..._,selected:T!==void 0,currentRank:(T==null?void 0:T.currentRank)||0,hasChildren:A,isRoot:O,onTogglePerk:t,onRankChange:n}}}),[f,p,s,t,n]),b=g.useMemo(()=>{if(!f)return[];const _=[];return f.perks.forEach(P=>{const D=P.edid;P.connections.children.length>0&&P.connections.children.forEach(z=>{if(z===D)return;f.perks.some(O=>O.edid===z)&&_.push({id:`${D}-${z}`,source:D,target:z,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),_},[f]),[x,y,w]=UE(v),[j,N,S]=VE(b);$.useEffect(()=>{y(v)},[v,y]),$.useEffect(()=>{N(b)},[b,N]),$.useEffect(()=>{f&&x.length>0&&r&&setTimeout(()=>{r.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[f==null?void 0:f.treeId,r]);const k=g.useCallback(_=>N(P=>U0(_,P)),[N]),E=g.useCallback(_=>{_.stopPropagation()},[]),C=g.useCallback(_=>{_.stopPropagation()},[]);return f?a.jsxs("div",{className:"w-full h-full bg-background rounded-lg border",style:{zIndex:1},onMouseDown:_=>_.stopPropagation(),onTouchStart:_=>_.stopPropagation(),children:[a.jsx("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-1",children:a.jsx("div",{className:"bg-primary text-primary-foreground px-2 py-1 rounded text-xs font-medium",children:c?"Loading Positions...":o?"Positioned Tree":"Algorithm v2"})}),a.jsxs(X0,{nodes:x,edges:j,onNodesChange:w,onEdgesChange:S,onConnect:k,onInit:i,nodeTypes:Zq,nodesDraggable:!1,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},onNodeDragStop:d,onMouseDown:E,onTouchStart:C,panOnDrag:!0,panOnScroll:!1,preventScrolling:!0,children:[a.jsx(YE,{}),a.jsx(ZE,{})]})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20 rounded-lg",children:a.jsx("p",{className:"text-muted-foreground",children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function p_({open:e,onOpenChange:t,selectedSkill:n,skillName:s,perkTree:r,skills:i,onSkillSelect:o,onReset:l}){var j,N;console.log("SkillPerkTreeDrawer props:",{open:e,selectedSkill:n,skillName:s,perkTree:r?"Found":"Not found",skillsCount:i.length});const{selectedPerks:c,perkRanks:u,handlePerkSelect:d,handlePerkRankChange:f,handleResetPerks:m}=ev(n),h=$.useMemo(()=>r?r.perks.filter(S=>c.includes(S.edid)).map(S=>({...S,selected:!0,currentRank:u[S.edid]||1})):[],[r,c,u]),p=$.useCallback(S=>{d(S)},[d]),v=$.useCallback((S,k)=>{f(S,k)},[f]),b=()=>{m(),l()},x=()=>{t(!1)},y=[{id:"skills",name:"Skills",placeholder:"Search skills...",options:i.map(S=>({id:S.id,label:S.name,value:S.id,category:"Skills",description:`${S.selectedPerks}/${S.totalPerks} perks selected`}))}],w=S=>{o(S.value)};return n?a.jsxs(l_,{open:e,onOpenChange:t,shouldScaleBackground:!1,dismissible:!0,children:[console.log("Drawer render - open:",e),a.jsxs(c_,{children:[a.jsx(Q0,{}),a.jsxs(K0,{className:"fixed inset-x-0 bottom-0 z-50 mt-24 flex flex-col rounded-t-[10px] border bg-background h-[85vh] bg-card border-t shadow-lg !bg-card","data-vaul-no-drag":!0,style:{backgroundColor:"hsl(var(--card))",zIndex:Lt.DRAWER},children:[console.log("Drawer content render - zIndex:",Lt.DRAWER),a.jsx(u_,{className:"border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-64",children:a.jsx(Fa,{categories:y,onSelect:w,placeholder:"Search skills..."})}),a.jsxs("div",{className:"flex items-center gap-3",children:[s&&a.jsx(km,{skillName:s,size:"lg",className:"flex-shrink-0"}),a.jsxs("div",{children:[a.jsx(f_,{className:"text-xl",children:s||(r==null?void 0:r.treeName)||"Skill Perks"}),a.jsxs(m_,{className:"flex items-center gap-2",children:[a.jsxs("span",{children:[c.length," perks selected"]}),((j=i.find(S=>S.id===n))==null?void 0:j.level)&&a.jsxs("span",{className:"text-blue-600 font-medium",children:[" Min: Level"," ",(N=i.find(S=>S.id===n))==null?void 0:N.level]})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(q,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-2",children:[a.jsx(xr,{className:"h-4 w-4"}),"Reset Perks"]}),a.jsx(q,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:a.jsx(Dt,{className:"h-4 w-4"})})]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",style:{height:"400px"},children:a.jsx("div",{className:"h-full w-full bg-muted/20 rounded",children:r?a.jsx(Gq,{tree:r,onTogglePerk:p,onRankChange:v,selectedPerks:h}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"text-muted-foreground",children:n?"Loading perk tree...":"No skill selected"})})})}),a.jsx(d_,{className:"border-t",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on perk nodes to select/deselect them"}),a.jsx(q,{variant:"outline",onClick:x,children:"Close"})]})})]})]})]}):null}function Yq({skills:e,loading:t,error:n,searchQuery:s,onSearchChange:r,selectedCategory:i,onCategorySelect:o,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:v}){var w;const[b,x]=g.useState(!1);if(t)return a.jsx(FI,{});if(n)return a.jsx(UI,{error:n});const y=e.map(j=>({edid:j.id,name:j.name,category:j.category,description:j.description,scaling:"",keyAbilities:[],metaTags:[],totalPerks:j.totalPerks,selectedPerks:j.selectedPerksCount,level:j.level,isMajor:j.assignmentType==="major",isMinor:j.assignmentType==="minor"}));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsx(Te,{children:a.jsxs(Le,{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Build Summary"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(K,{variant:"outline",className:"bg-yellow-50 text-yellow-800 border-yellow-300",children:[v.majorCount,"/",v.majorLimit," Major"]}),a.jsxs(K,{variant:"outline",className:"bg-gray-50 text-gray-800 border-gray-300",children:[v.minorCount,"/",v.minorLimit," Minor"]})]})]})}),a.jsx(ve,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Total Skills"}),a.jsx("p",{className:"font-semibold",children:v.totalSkills})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Selected Perks"}),a.jsx("p",{className:"font-semibold",children:v.totalPerks})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Perk Ranks"}),a.jsx("p",{className:"font-semibold",children:v.totalPerkRanks})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Available Major"}),a.jsx("p",{className:"font-semibold text-yellow-600",children:v.majorLimit-v.majorCount})]})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(ZI,{query:s,onQueryChange:r}),a.jsx(iq,{categories:l,selectedCategory:i,onCategorySelect:o})]}),a.jsx(Yr,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Available Skills"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.length," skills found"]})]}),a.jsx(qI,{skills:e,onSkillSelect:j=>{console.log("Skill selected:",j),console.log("Setting perkTreeOpen to true"),u(j),x(!0)},onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,selectedSkillId:c||void 0})]}),a.jsx(p_,{open:b,onOpenChange:x,selectedSkill:c,skillName:c?(w=e.find(j=>j.id===c))==null?void 0:w.name:void 0,perkTree:p||void 0,skills:y,onSkillSelect:u,onReset:h}),a.jsx(xe,{className:"bg-muted/50",children:a.jsxs(ve,{className:"pt-6",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"How to Assign Skills"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Major Skills (0-3)"}),a.jsx("p",{children:"Your primary skills that level up faster and start at a higher level."})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Minor Skills (0-6)"}),a.jsx("p",{children:"Secondary skills that provide additional benefits and customization."})]})]})]})})]})}function x_({className:e}){var P;const{selectedMajorSkills:t,selectedMinorSkills:n,availableSkills:s,handleMajorSkillSelect:r,handleMinorSkillSelect:i,handleMajorSkillRemove:o,handleMinorSkillRemove:l}=Pq(),{build:c,getSkillLevel:u,getSkillPerks:d}=ht(),{skills:f}=J0(),m=lt(),[h,p]=g.useState(null),[v,b]=g.useState(!1),x=()=>{m("/skills")},y=D=>{console.log("Opening perk tree for skill:",D),p(D),b(!0)},w=D=>{p(D.edid),b(!0)},j=g.useMemo(()=>{const D=t.map(O=>O.id),z=n.map(O=>O.id),A=[...D,...z];return f.filter(O=>d(O.id).length>0&&!A.includes(O.id))},[f,t,n,d]),N=g.useMemo(()=>{const D=t.map(T=>T.id),z=n.map(T=>T.id),A=[...D,...z],O=j.map(T=>T.id);return f.filter(T=>!A.includes(T.id)&&!O.includes(T.id)).map(T=>({name:T.name,edid:T.id,category:T.category,description:T.description,scaling:"",keyAbilities:T.keyAbilities||[],metaTags:T.metaTags||[]}))},[f,t,n,j]),S=D=>({name:D.name,edid:D.id,category:D.category,description:D.description,scaling:D.scaling||"",keyAbilities:D.keyAbilities||[],metaTags:D.metaTags||[]}),k=g.useMemo(()=>{const D=t.map(O=>O.id),z=n.map(O=>O.id),A=[...D,...z];return f.filter(O=>{const T=d(O.id);return A.includes(O.id)&&T.length===0})},[f,t,n,d]),E=f.map(D=>{d(D.id);const z=u(D.id),A=c.skills.major.includes(D.id),O=c.skills.minor.includes(D.id),T=!A&&c.skills.major.length<3,L=!O&&c.skills.minor.length<6;return{...D,isMajor:A,isMinor:O,canAssignMajor:T,canAssignMinor:L,level:z}}),{selectedPerkTree:C}=ev(h),_=(D,z)=>{const A=u(D.id||D.edid),O=d(D.id||D.edid),T=D.totalPerks||0,L=D.id||D.edid;let M="cursor-pointer transition-all hover:shadow-md ",R="text-xs ";switch(z){case"major":M+="bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",R+="bg-yellow-100 text-yellow-800 border-yellow-300";break;case"minor":M+="bg-gray-50/50 border-gray-300 shadow-gray-300/20",R+="bg-gray-100 text-gray-800 border-gray-300";break;case"perked":M+="bg-blue-50/50 border-blue-500 shadow-blue-500/20",R+="bg-blue-100 text-blue-800 border-blue-300";break;case"assigned":M+="bg-orange-50/50 border-orange-500 shadow-orange-500/20",R+="bg-orange-100 text-orange-800 border-orange-300";break}return a.jsx(xe,{className:M,onClick:()=>y(L),children:a.jsx(ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(km,{skillName:D.name,size:"2xl",className:"flex-shrink-0"}),a.jsx("h5",{className:"font-medium text-sm text-foreground",children:D.name}),a.jsx(qc,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(ze,{text:D.description,className:"text-xs text-muted-foreground line-clamp-2 mb-3",as:"p"}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx(yC,{level:A,size:"sm"}),a.jsxs(K,{variant:"outline",className:R,children:[O.length,"/",T," perks"]}),z==="major"&&a.jsx(K,{variant:"outline",className:"text-xs bg-yellow-100 text-yellow-800 border-yellow-300",children:"Major"}),z==="minor"&&a.jsx(K,{variant:"outline",className:"text-xs bg-gray-100 text-gray-800 border-gray-300",children:"Minor"}),z==="perked"&&a.jsx(K,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800 border-blue-300",children:"Perked"}),z==="assigned"&&a.jsx(K,{variant:"outline",className:"text-xs bg-orange-100 text-orange-800 border-orange-300",children:"Assigned"})]})]}),(z==="major"||z==="minor")&&a.jsx(q,{size:"sm",variant:"ghost",onClick:B=>{B.stopPropagation(),z==="major"?o(L):l(L)},className:`${z==="major"?"text-yellow-600 hover:text-yellow-700 hover:bg-yellow-100":"text-gray-600 hover:text-gray-700 hover:bg-gray-100"}`,children:a.jsx(Dt,{className:"h-4 w-4"})})]})})},L)};return a.jsxs(a.Fragment,{children:[a.jsxs(Un,{title:"Skills & Perks",navigateTo:"skills",onNavigate:x,className:e,children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Major Skills"}),t.length<3&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(K,{variant:"outline",className:"text-xs",children:[t.length,"/3"]})}),a.jsx(zh,{skills:s.map(S),onSelect:D=>{const z=s.find(A=>A.id===D.edid);z&&r(z)},placeholder:"Select major skill...",className:"w-full"})]}),t.length>0&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:t.map(D=>_(D,"major"))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Minor Skills"}),n.length<6&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(K,{variant:"outline",className:"text-xs",children:[n.length,"/6"]})}),a.jsx(zh,{skills:s.map(S),onSelect:D=>{const z=s.find(A=>A.id===D.edid);z&&i(z)},placeholder:"Select minor skill...",className:"w-full"})]}),n.length>0&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:n.map(D=>_(D,"minor"))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Other Perked Skills"}),a.jsx("div",{className:"space-y-2",children:a.jsx(zh,{skills:N,onSelect:w,placeholder:"Select skill to add perks...",className:"w-full"})}),j.length>0&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:j.map(D=>_(D,"perked"))})]}),k.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Assigned Skills (No Perks)"}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:k.map(D=>_(D,"assigned"))})]})]}),a.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on any skill card to view and manage its perk tree. Skill levels show the minimum level required based on your perk selections."})})]}),a.jsx(p_,{open:v,onOpenChange:b,selectedSkill:h,skillName:h?(P=f.find(D=>D.id===h))==null?void 0:P.name:void 0,perkTree:C||void 0,skills:E,onSkillSelect:p,onReset:()=>{}})]})}function Xq({item:e,className:t,allTraitIds:n,disableHover:s=!1}){e.originalTrait;const{hasRegularTrait:r,hasBonusTrait:i,addRegularTrait:o,addBonusTrait:l,removeTrait:c,canAddRegularTrait:u,canAddBonusTrait:d,build:f}=ht(),h=r(e.id)?"primary":i(e.id)?"secondary":"none",p=y=>{h===y?c(e.id):(c(e.id),y==="primary"&&u()?o(e.id):y==="secondary"&&d()&&l(e.id))},v=!u()&&h!=="primary",b=!d()&&h!=="secondary",x=()=>h==="primary"?"border-yellow-500 bg-yellow-50/50 shadow-yellow-500/20":h==="secondary"?"border-gray-400 bg-gray-50/50 shadow-gray-400/20":"";return g.useEffect(()=>{var y,w;if(n){const j=((y=f==null?void 0:f.traits)==null?void 0:y.regular)||[],N=((w=f==null?void 0:f.traits)==null?void 0:w.bonus)||[];[...j,...N].filter(E=>!n.includes(E)).forEach(E=>c(E))}},[n,f==null?void 0:f.traits,c]),a.jsxs(he,{expanded:!0,className:H(t,x()),disableHover:s,hideChevron:!0,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(An,{className:"h-4 w-4 text-black"}),a.jsx(Ae,{className:"text-primary font-semibold",children:e.name})]})}),a.jsx(he.Summary,{children:a.jsx(ze,{text:e.description,className:"text-base text-muted-foreground"})}),a.jsx(he.Footer,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(q,{size:"sm",variant:h==="primary"?"default":"outline",disabled:v,className:H("flex-1 text-xs",h==="primary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:y=>{y.stopPropagation(),p("primary")},children:h==="primary"?"Remove Trait":"Starting Trait"}),a.jsx(q,{size:"sm",variant:h==="secondary"?"default":"outline",disabled:b,className:H("flex-1 text-xs",h==="secondary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:y=>{y.stopPropagation(),p("secondary")},children:h==="secondary"?"Remove Trait":"Late Game Trait"})]})})]})}function v_(e,t){const n=g.useMemo(()=>e.map(l=>{var c;return{id:l.id||l.name,name:l.name,description:l.description||"",category:l.category||"",effects:((c=l.effects)==null?void 0:c.map(u=>`${u.type} ${u.description||""} ${u.value}`))||[],tags:l.tags||[],originalTrait:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"effects",weight:.2},{name:"tags",weight:.15},{name:"category",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Kt(n,s),[n,s]),i=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredTraits:g.useMemo(()=>i.map(l=>l.item.originalTrait),[i]),searchResults:i,searchableTraits:n}}function Bh({traits:e,onSelect:t,placeholder:n="Search traits...",className:s="",disabled:r=!1}){const[i,o]=g.useState(""),{filteredTraits:l}=v_(e,i),c=g.useMemo(()=>l.map(f=>({id:f.edid,label:f.name,description:f.description,category:f.category,badge:f.category&&a.jsx(K,{variant:"outline",className:"text-xs",children:f.category}),metadata:{originalTrait:f,effectsCount:f.effects.length}})),[l]),u=f=>{const m=e.find(h=>h.edid===f.id);m&&t(m)},d=(f,m)=>{var h;return a.jsx("div",{className:"flex items-start gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:f.label}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.badge&&a.jsx("div",{className:"flex-shrink-0",children:f.badge}),((h=f.metadata)==null?void 0:h.effectsCount)&&f.metadata.effectsCount>0&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.metadata.effectsCount," effect",f.metadata.effectsCount!==1?"s":""]})]}),f.description&&a.jsx(ze,{text:f.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]})})};return a.jsx(ru,{options:c,onSelect:u,placeholder:n,className:s,disabled:r,renderOption:d,emptyMessage:"No traits found",searchQuery:i,onSearchQueryChange:o})}function y_(e){const t=e.map(n=>n.category).filter(Boolean);return[...new Set(t)].sort()}function Wq(e){const t=e.flatMap(n=>{var s;return((s=n.effects)==null?void 0:s.map(r=>r.type))||[]});return[...new Set(t)].sort()}function b_(e){const t=e.flatMap(n=>n.tags||[]);return[...new Set(t)].sort()}function Kq(){const[e,t]=g.useState({search:"",category:"",tags:[]}),{data:n,loading:s,error:r}=wi(),i=g.useMemo(()=>n.filter(u=>{var d;if(e.search){const f=e.search.toLowerCase();if(![u.name,u.description,u.category,...u.tags||[],...((d=u.effects)==null?void 0:d.map(h=>h.type))||[]].join(" ").toLowerCase().includes(f))return!1}return!(e.category&&u.category!==e.category||e.tags.length>0&&!e.tags.some(m=>{var h,p;return((h=u.tags)==null?void 0:h.includes(m))||u.category===m||((p=u.effects)==null?void 0:p.some(v=>v.type===m))}))}),[n,e]),o=g.useMemo(()=>y_(n),[n]),l=g.useMemo(()=>Wq(n),[n]),c=g.useMemo(()=>b_(n),[n]);return{traits:i,allTraits:n,loading:s,error:r,filters:e,setFilters:t,allCategories:o,allEffectTypes:l,allTags:c}}function w_({className:e}){const{allTraits:t}=Kq(),{build:n,addTraitToSlot:s,removeTrait:r,getRegularTraitLimit:i,getBonusTraitLimit:o}=ht(),l=lt();i(),o();const c=n.traits.regular.map(p=>t.find(v=>v.edid===p)).filter(Boolean),u=n.traits.bonus.map(p=>t.find(v=>v.edid===p)).filter(Boolean),d=(p,v)=>{s(p.edid,v)},f=p=>{r(p)},m=()=>{l("/traits")},h=t.filter(p=>!n.traits.regular.includes(p.edid)&&!n.traits.bonus.includes(p.edid));return a.jsx(Un,{title:"Traits",navigateTo:"traits",onNavigate:m,className:e,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Starting"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K,{variant:"outline",className:"text-xs",children:"Slot 1"}),c[0]&&a.jsx(K,{variant:"default",className:"text-xs",children:"Starting"})]}),c[0]?a.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:c[0].name}),a.jsx(ze,{text:c[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>f(c[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:a.jsx(Dt,{className:"h-3 w-3"})})]}):a.jsx(Bh,{traits:h,onSelect:p=>d(p,"regular"),placeholder:"Select starting trait...",className:"w-full"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K,{variant:"outline",className:"text-xs",children:"Slot 2"}),c[1]&&a.jsx(K,{variant:"default",className:"text-xs",children:"Starting"})]}),c[1]?a.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:c[1].name}),a.jsx(ze,{text:c[1].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>f(c[1].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:a.jsx(Dt,{className:"h-3 w-3"})})]}):a.jsx(Bh,{traits:h,onSelect:p=>d(p,"regular"),placeholder:"Select starting trait...",className:"w-full"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-foreground",children:"Late Game"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K,{variant:"outline",className:"text-xs",children:"Slot 1"}),u[0]&&a.jsx(K,{variant:"secondary",className:"text-xs",children:"Late Game"})]}),u[0]?a.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-gray-50/50 border-gray-400 shadow-gray-400/20",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:u[0].name}),a.jsx(ze,{text:u[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>f(u[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:a.jsx(Dt,{className:"h-3 w-3"})})]}):a.jsx(Bh,{traits:h,onSelect:p=>d(p,"bonus"),placeholder:"Select late game trait...",className:"w-full"})]})]})]})})}const Qq=()=>{const{build:e,resetBuild:t,getSummary:n,setBuildName:s,setBuildNotes:r}=ht(),i=lt(),o=n(),[l,c]=g.useState(!1),u=()=>{navigator.clipboard.writeText(window.location.href)},d=()=>{confirm("Are you sure you want to reset your character build? This cannot be undone.")&&t()},f=()=>{c(!1),i("/build")},m=h=>{c(!1),i(`/build#${h}`),setTimeout(()=>{const p=document.getElementById(h);p==null||p.scrollIntoView({behavior:"smooth",block:"start"})},100)};return a.jsx("div",{className:"fixed bottom-4 right-4",style:{zIndex:Lt.MODAL+1},children:a.jsxs(zo,{open:l,onOpenChange:c,children:[a.jsx(W1,{asChild:!0,children:a.jsx(q,{size:"lg",className:`h-12 w-12 rounded-full shadow-lg transition-opacity duration-200 ${l?"opacity-0 pointer-events-none":"opacity-100"}`,style:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))"},children:a.jsx(Hd,{className:"h-5 w-5"})})}),a.jsx(si,{side:"right",className:"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0",children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs(Lo,{className:"p-6 pb-4 border-b",children:[a.jsxs($o,{className:"flex items-center gap-2",children:[a.jsx(Hd,{className:"h-5 w-5"}),o.name||"Character Build"]}),a.jsx(qx,{children:"Quick reference and editing for your character build"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[a.jsx(J1,{name:e.name,notes:e.notes,onNameChange:s,onNotesChange:r,className:"mb-0"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(mC,{}),a.jsx(Wk,{}),a.jsx(w_,{}),a.jsx(vC,{})]}),a.jsx(sS,{showControls:!0,showSummary:!0,compact:!1}),a.jsx(x_,{}),a.jsx(oC,{navigate:i}),a.jsx(tS,{build:e})]}),a.jsxs("div",{className:"p-6 pt-4 border-t bg-muted/50",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(q,{onClick:f,className:"flex-1",children:[a.jsx(Sa,{className:"w-4 h-4 mr-2"}),"Full Build Page"]}),a.jsxs(q,{variant:"outline",onClick:u,children:[a.jsx(u4,{className:"w-4 h-4 mr-2"}),"Share"]}),a.jsxs(q,{variant:"destructive",onClick:d,children:[a.jsx(t3,{className:"w-4 h-4 mr-2"}),"Reset"]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Quick Navigation:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[!e.race&&a.jsx(q,{variant:"outline",size:"sm",onClick:()=>m("race"),children:"Race"}),!e.stone&&a.jsx(q,{variant:"outline",size:"sm",onClick:()=>m("birthsign"),children:"Birthsign"}),e.traits.regular.length===0&&e.traits.bonus.length===0&&a.jsx(q,{variant:"outline",size:"sm",onClick:()=>m("traits"),children:"Traits"}),!e.religion&&a.jsx(q,{variant:"outline",size:"sm",onClick:()=>m("religion"),children:"Religion"}),e.skills.major.length===0&&e.skills.minor.length===0&&a.jsx(q,{variant:"outline",size:"sm",onClick:()=>m("skills"),children:"Skills"}),e.destinyPath.length===0&&a.jsx(q,{variant:"outline",size:"sm",onClick:()=>m("destiny"),children:"Destiny"})]})]})]})]})})]})})},hw=e=>btoa(unescape(encodeURIComponent(JSON.stringify(e)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),gw=e=>{try{const t=e.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(escape(atob(t))))}catch{return null}},Jq=()=>{const e=Gr(s=>s.build),t=Gr(s=>s.setBuild),n=g.useRef(!1);g.useEffect(()=>{if(n.current)return;const s=window.location.hash,[r,i]=s.split("?"),l=new URLSearchParams(i||"").get("b");if(console.log("URL Sync - Hydrating from URL:",{hash:s,encodedBuild:l}),l){const c=gw(l);console.log("URL Sync - Decoded build:",c),(c==null?void 0:c.v)===1?(console.log("URL Sync - Setting build from URL"),t(c)):console.warn("Invalid or outdated build schema in URL")}else console.log("URL Sync - No build parameter found in URL");n.current=!0},[t]),g.useEffect(()=>{const s={v:1,name:"Test",perks:{selected:{archery:["archery_01"]},ranks:{archery_01:1}}},r=hw(s),i=gw(r);console.log("URL Sync - Test encoding/decoding:",{testBuild:s,encoded:r,decoded:i,matches:JSON.stringify(s)===JSON.stringify(i)})},[]),g.useEffect(()=>{if(!n.current)return;console.log("URL Sync - Build state changed:",e);const s=hw(e),r=window.location.hash,[i,o]=r.split("?"),l=new URLSearchParams(o||"");l.set("b",s);const c=`${i}?${l.toString()}`;console.log("URL Sync - Updating URL:",c),window.history.replaceState(null,"",c)},[e.v,e.name,e.race,e.stone,e.religion,e.traits,e.skills,e.perks,e.equipment,e.destinyPath])},j_=g.forwardRef(({className:e,collapsed:t,...n},s)=>a.jsx("aside",{ref:s,"data-collapsed":t?"":void 0,className:H("flex flex-col bg-card border-r border-skyrim-gold/20 h-[calc(100vh-3rem)] sticky top-12 transition-all duration-300 ease-in-out",t?"w-0 overflow-hidden opacity-0":"w-64 opacity-100",e),...n}));j_.displayName="Sidebar";const N_=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:H("flex-1 flex flex-col justify-start overflow-y-auto px-2 py-2",e),...t}));N_.displayName="SidebarContent";const S_=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:H("mb-2",e),...t}));S_.displayName="SidebarGroup";const k_=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:H("px-3 py-2 border-b border-skyrim-gold/20 flex items-center gap-2 min-h-[48px]",e),...t}));k_.displayName="SidebarHeader";const C_=g.forwardRef(({className:e,...t},n)=>a.jsx("ul",{ref:n,className:H("flex flex-col gap-0.5 list-none p-0 m-0",e),...t}));C_.displayName="SidebarMenu";const E_=g.forwardRef(({className:e,asChild:t,isActive:n,...s},r)=>{const i=t?"span":"button";return a.jsx(i,{ref:r,"data-active":n?"":void 0,className:H("group flex items-center w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out","hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] hover:border-l-4","active:scale-[0.98] active:bg-skyrim-gold/25","cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",n?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent",e),tabIndex:0,...s})});E_.displayName="SidebarMenuButton";const __=g.forwardRef(({className:e,...t},n)=>a.jsx("li",{ref:n,className:H("relative flex items-stretch",e),...t}));__.displayName="SidebarMenuItem";const A_=g.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:e,...t}));A_.displayName="SidebarRail";function eZ(e={}){const{autoLoad:t=!0,refreshOnMount:n=!1}=e,{data:s,loading:r,error:i,load:o}=rr(),l=g.useCallback(async()=>{t&&s.length===0&&await o()},[t,s.length,o]),c=g.useCallback(async()=>{await o()},[o]),u=g.useCallback(()=>{},[]);g.useEffect(()=>{t&&s.length===0&&l()},[t,s.length,l]),g.useEffect(()=>{n&&c()},[n,c]);const d=s.length,f=[...new Set(s.map(N=>N.category).filter(Boolean))],m=[...new Set(s.flatMap(N=>N.effects.map(S=>S.name)))],h=[...new Set(s.flatMap(N=>N.ingredients))],p=new Date().toISOString(),v=s.length>0?{recipes:s,totalCount:d,categories:f,effects:m,ingredients:h,lastUpdated:p}:null,b=g.useCallback(N=>rr.getState().getByName(N),[]),x=g.useCallback(N=>rr.getState().getByCategory(N),[]),y=g.useCallback(N=>rr.getState().getByDifficulty(N),[]),w=g.useCallback(N=>rr.getState().getByIngredient(N),[]),j=g.useCallback(N=>rr.getState().getByEffect(N),[]);return{recipes:s,recipeData:v,loading:r,error:i,totalCount:d,categories:f,effects:m,ingredients:h,lastUpdated:p,loadRecipes:l,refresh:c,clearError:u,getRecipeByName:b,getRecipesByCategory:x,getRecipesByDifficulty:y,getRecipesByIngredient:w,getRecipesByEffect:j}}function tZ(e,t={}){const{initialFilters:n={},enableSearch:s=!0,enableSorting:r=!0}=t,i=Array.isArray(e)?e:[],[o,l]=g.useState({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null,...n}),[c,u]=g.useState([]),[d,f]=g.useState("name"),[m,h]=g.useState("asc"),p=g.useCallback(M=>{c.some(R=>R.value===M.value&&R.category===M.category)||u(R=>[...R,M])},[c]),v=g.useCallback(M=>{u(R=>R.filter(B=>B.id!==M))},[]),b=g.useCallback(()=>{u([])},[]),x=g.useCallback(M=>{l(R=>({...R,searchTerm:M}))},[]),y=g.useCallback(M=>{l(R=>({...R,categories:M}))},[]),w=g.useCallback(M=>{l(R=>({...R,effects:M}))},[]),j=g.useCallback(M=>{l(R=>({...R,ingredients:M}))},[]),N=g.useCallback(M=>{l(R=>({...R,difficulties:M}))},[]),S=g.useCallback(M=>{l(R=>({...R,hasEffects:M}))},[]),k=g.useCallback(M=>{l(R=>({...R,isComplex:M}))},[]),E=g.useCallback((M,R)=>{l(B=>({...B,minIngredientCount:M,maxIngredientCount:R}))},[]),C=g.useCallback((M,R)=>{l(B=>({...B,minMagnitude:M,maxMagnitude:R}))},[]),_=g.useCallback(()=>{l({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null}),u([])},[]),P=g.useCallback(()=>{l(M=>({...M,searchTerm:""}))},[]),D=g.useCallback(M=>{h(M)},[]),z=g.useCallback(()=>{h(M=>M==="asc"?"desc":"asc")},[]),A=g.useMemo(()=>{let M=Xe.applyFilters(i,o);if(c.length>0){const R=c.reduce((B,F)=>{switch(F.category){case"categories":B.categories.push(F.value);break;case"effects":B.effects.push(F.value);break;case"ingredients":B.ingredients.push(F.value);break;case"difficulties":B.difficulties.push(F.value);break}return B},{categories:[],effects:[],ingredients:[],difficulties:[]});R.categories.length>0&&(M=Xe.filterByCategories(M,R.categories)),R.effects.length>0&&(M=Xe.filterByEffects(M,R.effects)),R.ingredients.length>0&&(M=Xe.filterByIngredients(M,R.ingredients)),R.difficulties.length>0&&(M=Xe.filterByDifficulties(M,R.difficulties))}return r&&(M=Xe.sort(M,d,m)),M},[i,o,c,r,d,m]),O=g.useMemo(()=>!s||!o.searchTerm.trim()?[]:Xe.search(i,o.searchTerm),[i,o.searchTerm,s]),T=g.useMemo(()=>o.searchTerm.trim()!==""||o.categories.length>0||o.effects.length>0||o.ingredients.length>0||o.difficulties.length>0||o.hasEffects!==null||o.isComplex!==null||o.minIngredientCount!==null||o.maxIngredientCount!==null||o.minMagnitude!==null||o.maxMagnitude!==null||c.length>0,[o,c]),L=g.useMemo(()=>{let M=0;return o.searchTerm.trim()&&M++,o.categories.length>0&&(M+=o.categories.length),o.effects.length>0&&(M+=o.effects.length),o.ingredients.length>0&&(M+=o.ingredients.length),o.difficulties.length>0&&(M+=o.difficulties.length),o.hasEffects!==null&&M++,o.isComplex!==null&&M++,(o.minIngredientCount!==null||o.maxIngredientCount!==null)&&M++,(o.minMagnitude!==null||o.maxMagnitude!==null)&&M++,M+=c.length,M},[o,c]);return{filters:o,searchTerm:o.searchTerm,selectedTags:c,setSelectedTags:u,addTagFilter:p,removeTagFilter:v,clearAllTags:b,filteredRecipes:A,searchResults:O,hasActiveFilters:T,filterCount:L,setSearchTerm:x,setCategories:y,setEffects:w,setIngredients:j,setDifficulties:N,setHasEffects:S,setIsComplex:k,setIngredientCountRange:E,setMagnitudeRange:C,clearFilters:_,clearSearch:P,sortBy:d,sortOrder:m,setSortBy:f,setSortOrder:D,toggleSortOrder:z}}function nZ(e,t={}){const{enableStatistics:n=!0,enableGrouping:s=!0}=t,r=Array.isArray(e)?e:[],i=g.useMemo(()=>n?Xe.getStatistics(r):{totalRecipes:0,recipesByCategory:{},recipesByDifficulty:{},recipesByEffect:{},averageIngredientCount:0,averageEffectCount:0,mostCommonIngredients:[],mostCommonEffects:[]},[r,n]),o=g.useMemo(()=>{if(!s)return{};const w={};return r.forEach(j=>{const N=j.category||"Uncategorized";w[N]||(w[N]=[]),w[N].push(j)}),w},[r,s]),l=g.useMemo(()=>{if(!s)return{};const w={};return r.forEach(j=>{const N=j.difficulty;w[N]||(w[N]=[]),w[N].push(j)}),w},[r,s]),c=g.useMemo(()=>{if(!s)return{};const w={};return r.forEach(j=>{j.effects.forEach(N=>{w[N.name]||(w[N.name]=[]),w[N.name].push(j)})}),w},[r,s]),u=g.useMemo(()=>{if(!s)return{};const w={};return r.forEach(j=>{j.ingredients.forEach(N=>{w[N]||(w[N]=[]),w[N].push(j)})}),w},[r,s]),d=g.useMemo(()=>Xe.getUniqueCategories(r),[r]),f=g.useMemo(()=>Xe.getUniqueDifficulties(r),[r]),m=g.useMemo(()=>Xe.getUniqueEffects(r),[r]),h=g.useMemo(()=>Xe.getUniqueIngredients(r),[r]),p=g.useMemo(()=>[{name:"Recipe Categories",options:d},{name:"Effects",options:m},{name:"Ingredients",options:h},{name:"Difficulty",options:f}],[d,m,h,f]),v=g.useMemo(()=>(w,j)=>{const N=w.ingredientCount-j.ingredientCount,S=w.effectCount-j.effectCount,k=w.totalMagnitude-j.totalMagnitude,E=w.maxDuration-j.maxDuration,C=new Set(w.ingredients),_=new Set(j.ingredients),P=[...C].filter(R=>_.has(R)),D=[...C].filter(R=>!_.has(R)),z=[..._].filter(R=>!C.has(R)),A=new Set(w.effects.map(R=>R.name)),O=new Set(j.effects.map(R=>R.name)),T=[...A].filter(R=>O.has(R)),L=[...A].filter(R=>!O.has(R)),M=[...O].filter(R=>!A.has(R));return{recipe1:w,recipe2:j,differences:{ingredientCount:{difference:N,percentage:j.ingredientCount>0?N/j.ingredientCount*100:0},effectCount:{difference:S,percentage:j.effectCount>0?S/j.effectCount*100:0},magnitude:{difference:k,percentage:j.totalMagnitude>0?k/j.totalMagnitude*100:0},duration:{difference:E,percentage:j.maxDuration>0?E/j.maxDuration*100:0},ingredients:{added:D,removed:z,common:P},effects:{added:L,removed:M,common:T}}}},[]),b=g.useMemo(()=>w=>{if(w.ingredientCount===0)return 0;const j=w.totalMagnitude*w.maxDuration,N=w.ingredientCount;return j/N},[]),x=g.useMemo(()=>w=>{let j=0;switch(j+=w.ingredientCount*.3,j+=w.effectCount*.4,j+=w.effects.reduce((N,S)=>N+S.magnitude*S.duration*.1,0),w.difficulty){case"Simple":j+=1;break;case"Moderate":j+=2;break;case"Complex":j+=3;break}return Math.round(j*10)/10},[]),y=g.useMemo(()=>w=>Xe.getEffectComparisons(w,r),[r]);return{statistics:i,recipesByCategory:o,recipesByDifficulty:l,recipesByEffect:c,recipesByIngredient:u,availableCategories:d,availableDifficulties:f,availableEffects:m,availableIngredients:h,searchCategories:p,compareRecipes:v,getRecipeEfficiency:b,getRecipeComplexity:x,getEffectComparisons:y}}function tv({recipe:e,variant:t="default",onClick:n,isSelected:s=!1,showEffects:r=!0,showIngredients:i=!0,effectComparisons:o=[]}){const l=()=>{n==null||n()},c=b=>typeof b=="string"?b:b&&typeof b=="object"?b.item?b.item:b.name?b.name:b.label?b.label:b.id?b.id:"Unknown Ingredient":String(b||""),u=b=>typeof b=="string"?b:typeof b=="number"?b.toString():b&&typeof b=="object"?b.name?b.name:b.label?b.label:b.id?b.id:b.item?b.item:b.category?b.category:c(b):String(b||""),d=b=>a.jsx(ia,{className:"h-4 w-4 text-green-500"}),f=b=>{if(typeof b=="string")return{name:b,count:1};if(b&&typeof b=="object"){const x=c(b),y=b.count||b.amount||1;return{name:x,count:y}}return{name:String(b||""),count:1}},m=b=>u(b.description||""),h=()=>a.jsxs(xe,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[a.jsx(Te,{className:"pb-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-medium truncate",children:u(e.name)}),a.jsx("div",{className:"flex gap-1",children:e.category&&a.jsx(K,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),a.jsx(ve,{className:"pt-0",children:a.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.ingredientCount," ingredients  ",e.effectCount," effects"]})})]}),p=()=>a.jsxs(xe,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[a.jsx(Te,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium truncate",children:u(e.name)}),e.description&&a.jsx(ze,{text:u(e.description),className:"text-sm text-muted-foreground mt-1 line-clamp-2",as:"p"})]}),a.jsx("div",{className:"flex flex-col gap-1 ml-2",children:e.category&&a.jsx(K,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),a.jsx(ve,{className:"pt-0",children:a.jsxs("div",{className:"space-y-2",children:[i&&e.ingredients.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:["Ingredients (",e.ingredientCount,")"]}),a.jsx("div",{className:"space-y-1",children:e.ingredients.map((b,x)=>{const{name:y,count:w}=f(b);return a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:y}),a.jsxs("span",{className:"font-medium",children:["",w]})]},x)})})]}),r&&e.effects.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:["Effects (",e.effectCount,")"]}),a.jsx("div",{className:"space-y-2",children:e.effects.map((b,x)=>a.jsx("div",{className:"p-2 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-2",children:[d(),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-xs mb-1",children:u(b.name)}),a.jsx("div",{className:"text-xs text-muted-foreground",children:a.jsx(ze,{text:m(b),className:"text-xs text-muted-foreground"})})]})]})},x))})]}),!1]})})]}),v=()=>a.jsxs(xe,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[a.jsx(Te,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium",children:u(e.name)}),e.description&&a.jsx(ze,{text:u(e.description),className:"text-sm text-muted-foreground mt-1",as:"p"})]}),a.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[e.category&&a.jsx(K,{variant:"secondary",className:"text-xs",children:u(e.category)}),e.type&&a.jsx(K,{variant:"outline",className:"text-xs",children:u(e.type)})]})]})}),a.jsx(ve,{className:"pt-0",children:a.jsxs("div",{className:"space-y-3",children:[i&&e.ingredients.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Ingredients"}),a.jsx("div",{className:"space-y-2",children:e.ingredients.map((b,x)=>{const{name:y,count:w}=f(b);return a.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-lg",children:[a.jsx("span",{className:"text-sm",children:y}),a.jsxs("span",{className:"font-medium text-sm",children:["",w]})]},x)})})]}),r&&e.effects.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-3",children:"Effects"}),a.jsx("div",{className:"space-y-3",children:e.effects.map((b,x)=>a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-start gap-3",children:[d(),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-sm mb-1",children:u(b.name)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:a.jsx(ze,{text:m(b),className:"text-sm text-muted-foreground"})})]})]})},x))})]}),!1,a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t",children:[a.jsxs("span",{children:["Total Magnitude: ",e.totalMagnitude]}),a.jsxs("span",{children:["Max Duration: ",e.maxDuration,"s"]})]})]})})]});switch(t){case"compact":return h();case"detailed":return v();default:return p()}}function sZ({recipes:e,variant:t="default",columns:n=3,onRecipeClick:s,selectedRecipes:r=[],showEffects:i=!0,showIngredients:o=!0,className:l,getEffectComparisons:c}){const u=()=>{const f="grid gap-4";switch(n){case 1:return`${f} grid-cols-1`;case 2:return`${f} grid-cols-1 sm:grid-cols-2`;case 3:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`;case 4:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4`;default:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`}},d=f=>{s==null||s(f)};return e.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"No recipes found"})})}):a.jsx("div",{className:u(),children:e.map(f=>a.jsx(tv,{recipe:f,variant:t,onClick:()=>d(f),isSelected:r.includes(f.name),showEffects:i,showIngredients:o,effectComparisons:(c==null?void 0:c(f))||[]},f.name))})}function rZ({recipes:e,variant:t="default",onRecipeClick:n,selectedRecipes:s=[],showEffects:r=!0,showIngredients:i=!0,className:o,getEffectComparisons:l}){const c=u=>{n==null||n(u)};return e.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"No recipes found"})})}):a.jsx("div",{className:`space-y-3 ${o||""}`,children:e.map(u=>a.jsx(tv,{recipe:u,variant:t,onClick:()=>c(u),isSelected:s.includes(u.name),showEffects:r,showIngredients:i,effectComparisons:(l==null?void 0:l(u))||[]},u.name))})}function aZ({currentMode:e,onModeChange:t,className:n}){return a.jsxs("div",{className:`flex border rounded-lg p-1 bg-muted ${n||""}`,children:[a.jsx(q,{variant:e==="list"?"default":"ghost",size:"sm",onClick:()=>t("list"),className:"h-8 px-3",title:"List view",children:a.jsx(pi,{className:"h-4 w-4"})}),a.jsx(q,{variant:e==="grid"?"default":"ghost",size:"sm",onClick:()=>t("grid"),className:"h-8 px-3",title:"Grid view",children:a.jsx(ol,{className:"h-4 w-4"})})]})}function iZ({statistics:e,className:t}){const{totalRecipes:n,foodRecipes:s,alcoholRecipes:r,recipesByCategory:i,recipesByDifficulty:o,averageIngredientCount:l,averageEffectCount:c,averageMagnitude:u,averageDuration:d,topEffects:f,topIngredients:m}=e,h=[{title:"Total Recipes",value:n,icon:KR,description:"All available recipes",color:"text-blue-600"},{title:"Food Recipes",value:s,icon:f3,description:"Culinary recipes",color:"text-green-600"},{title:"Alcohol Recipes",value:r,icon:h3,description:"Beverage recipes",color:"text-purple-600"},{title:"Avg Ingredients",value:l.toFixed(1),icon:ss,description:"Per recipe",color:"text-orange-600"},{title:"Avg Effects",value:c.toFixed(1),icon:An,description:"Per recipe",color:"text-yellow-600"},{title:"Avg Magnitude",value:u.toFixed(1),icon:Ag,description:"Effect strength",color:"text-red-600"}];return a.jsxs("div",{className:`space-y-6 ${t||""}`,children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(p=>{const v=p.icon;return a.jsxs(xe,{children:[a.jsxs(Te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Le,{className:"text-sm font-medium",children:p.title}),a.jsx(v,{className:`h-4 w-4 ${p.color}`})]}),a.jsxs(ve,{children:[a.jsx("div",{className:"text-2xl font-bold",children:p.value}),a.jsx("p",{className:"text-xs text-muted-foreground",children:p.description})]})]},p.title)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(xe,{children:[a.jsx(Te,{children:a.jsxs(Le,{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-4 w-4"}),"Recipe Categories"]})}),a.jsx(ve,{children:a.jsxs("div",{className:"space-y-2",children:[Object.entries(i).sort(([,p],[,v])=>v-p).slice(0,8).map(([p,v])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:p}),a.jsx(K,{variant:"secondary",className:"text-xs",children:v})]},p)),Object.keys(i).length>8&&a.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["+",Object.keys(i).length-8," more categories"]})]})})]}),a.jsxs(xe,{children:[a.jsx(Te,{children:a.jsxs(Le,{className:"flex items-center gap-2",children:[a.jsx(Za,{className:"h-4 w-4"}),"Recipe Difficulties"]})}),a.jsx(ve,{children:a.jsx("div",{className:"space-y-2",children:Object.entries(o).sort(([,p],[,v])=>v-p).map(([p,v])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:p}),a.jsx(K,{variant:p==="Simple"?"default":p==="Moderate"?"secondary":"destructive",className:"text-xs",children:v})]},p))})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(xe,{children:[a.jsx(Te,{children:a.jsxs(Le,{className:"flex items-center gap-2",children:[a.jsx(An,{className:"h-4 w-4"}),"Most Common Effects"]})}),a.jsx(ve,{children:a.jsx("div",{className:"space-y-2",children:f.slice(0,8).map((p,v)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:p.name}),a.jsxs(K,{variant:"outline",className:"text-xs",children:[p.count," recipes"]})]},p.name))})})]}),a.jsxs(xe,{children:[a.jsx(Te,{children:a.jsxs(Le,{className:"flex items-center gap-2",children:[a.jsx(ss,{className:"h-4 w-4"}),"Most Common Ingredients"]})}),a.jsx(ve,{children:a.jsx("div",{className:"space-y-2",children:m.slice(0,8).map((p,v)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:p.name}),a.jsxs(K,{variant:"outline",className:"text-xs",children:[p.count," recipes"]})]},p.name))})})]})]})]})}function oZ({recipes:e,className:t}){const n=$.useMemo(()=>{const l=new Map;return e.forEach(c=>{c.effects.forEach(u=>{const d=u.name||"Unknown Effect",f=u.magnitude||0,m=u.duration||0;l.has(d)||l.set(d,{name:d,count:0,averageMagnitude:0,averageDuration:0,totalMagnitude:0,totalDuration:0,recipes:[]});const h=l.get(d);h.count++,h.totalMagnitude+=f,h.totalDuration+=m,h.recipes.includes(c.name)||h.recipes.push(c.name)})}),l.forEach(c=>{c.averageMagnitude=c.totalMagnitude/c.count,c.averageDuration=c.totalDuration/c.count}),Array.from(l.values()).sort((c,u)=>u.count-c.count)},[e]),s=$.useMemo(()=>{if(n.length===0)return{magnitude:0,duration:0};const l=n.reduce((u,d)=>u+d.averageMagnitude,0),c=n.reduce((u,d)=>u+d.averageDuration,0);return{magnitude:l/n.length,duration:c/n.length}},[n]),r=(l,c)=>{const d=(l-c)/c*100;return d>20?"text-green-600":d>10?"text-green-500":d<-20?"text-red-600":d<-10?"text-red-500":"text-muted-foreground"},i=(l,c)=>{const d=(l-c)/c*100;return d>10?a.jsx(Ag,{className:"h-4 w-4 text-green-500"}):d<-10?a.jsx(gy,{className:"h-4 w-4 text-red-500"}):null},o=(l,c)=>{const u=l-c,d=u/c*100,f=u>=0?"+":"";return`${f}${u.toFixed(1)} (${f}${d.toFixed(1)}%)`};return n.length===0?a.jsxs(xe,{className:t,children:[a.jsx(Te,{children:a.jsx(Le,{className:"text-lg",children:"Food Effect Meta Analysis"})}),a.jsx(ve,{children:a.jsx("p",{className:"text-muted-foreground",children:"No effects found to analyze."})})]}):a.jsxs(xe,{className:t,children:[a.jsxs(Te,{children:[a.jsx(Le,{className:"text-lg",children:"Food Effect Meta Analysis"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Analysis of ",n.length," unique effects across ",e.length," recipes"]})]}),a.jsx(ve,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:s.magnitude.toFixed(1)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Magnitude"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold",children:[s.duration.toFixed(1),"s"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Duration"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"font-medium text-sm",children:"Effect Analysis"}),n.slice(0,10).map(l=>a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[a.jsx("div",{className:"flex items-start justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ia,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{className:"font-medium text-sm",children:l.name}),a.jsxs(K,{variant:"secondary",className:"text-xs",children:[l.count," recipes"]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Magnitude:"}),a.jsx("span",{className:"font-medium",children:l.averageMagnitude.toFixed(1)}),i(l.averageMagnitude,s.magnitude)]}),a.jsx("div",{className:H("text-xs",r(l.averageMagnitude,s.magnitude)),children:o(l.averageMagnitude,s.magnitude)})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),a.jsxs("span",{className:"font-medium",children:[l.averageDuration.toFixed(1),"s"]}),i(l.averageDuration,s.duration)]}),a.jsx("div",{className:H("text-xs",r(l.averageDuration,s.duration)),children:o(l.averageDuration,s.duration)})]})]}),l.recipes.length>0&&a.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:a.jsxs("div",{className:"text-xs text-muted-foreground mb-1",children:["Found in: ",l.recipes.slice(0,3).join(", "),l.recipes.length>3&&` +${l.recipes.length-3} more`]})})]},l.name)),n.length>10&&a.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing top 10 effects of ",n.length," total"]})]}),a.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"Legend"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ag,{className:"h-3 w-3 text-green-500"}),a.jsx("span",{children:"Above average (+10%+)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gy,{className:"h-3 w-3 text-red-500"}),a.jsx("span",{children:"Below average (-10%+)"})]})]})]})]})})]})}function lZ(e,t){return{filteredRecipes:g.useMemo(()=>{if(!t.trim())return e;const r=t.toLowerCase().trim().split(/\s+/);return e.filter(i=>{const o=[i.name,i.output,i.description||"",...i.ingredients.map(l=>typeof l=="string"?l:l&&typeof l=="object"&&(l.name||l.label||l.id)||String(l)),...i.effects.map(l=>l.name),...i.effects.map(l=>l.description),i.category||"",i.difficulty||"",i.type||"",...i.tags].join(" ").toLowerCase();return r.every(l=>o.includes(l))})},[e,t]),searchQuery:t.trim()}}function cZ(){const{recipes:e,loading:t,error:n}=eZ(),{filteredRecipes:s}=tZ(e),{statistics:r,availableCategories:i,availableEffects:o,availableIngredients:l,getEffectComparisons:c}=nZ(e),[u,d]=g.useState("grid"),m=(()=>{try{if(!e||e.length===0)return console.warn("No recipes loaded for search categories"),[];const N=l||[],S=o||[],k=i||[];return console.log("Using pre-computed ingredients:",N.slice(0,10),`(total: ${N.length})`),[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, ingredients, effects, or description...",options:[]},{id:"ingredients",name:"Ingredients",placeholder:"Filter by ingredient...",options:N.map(E=>({id:`ingredient-${E}`,label:E,value:E,category:"Ingredients",description:`Recipes with ${E}`}))},{id:"effects",name:"Effects",placeholder:"Filter by effect...",options:S.map(E=>({id:`effect-${E}`,label:E,value:E,category:"Effects",description:`Recipes with ${E} effect`}))},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:k.map(E=>({id:`category-${E}`,label:E,value:E,category:"Categories",description:`${E} recipes`}))}]}catch(N){return console.error("Error generating search categories:",N),[]}})(),[h,p]=g.useState([]),v=N=>{let S;typeof N=="string"?S={id:`custom-${N}`,label:N,value:N,category:"Fuzzy Search"}:S={id:`${N.category}-${N.id}`,label:N.label,value:N.value,category:N.category},h.some(k=>k.value===S.value&&k.category===S.category)||p(k=>[...k,S])},b=N=>{p(S=>S.filter(k=>k.id!==N))},x=s.filter(N=>h.length===0?!0:h.every(S=>{switch(S.category){case"Fuzzy Search":return!0;case"Categories":return N.category===S.value;case"Ingredients":return N.ingredients.some(k=>typeof k=="string"?k===S.value:k&&typeof k=="object"?k.item===S.value||k.name===S.value||k.label===S.value||k.id===S.value:!1);case"Effects":return N.effects.some(k=>k.name===S.value);default:return!0}})),y=h.filter(N=>N.category==="Fuzzy Search").map(N=>N.value).join(" "),{filteredRecipes:w}=lZ(x,y),j=N=>{console.log("Recipe clicked:",N.name)};return t?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading recipes..."})]})}):n?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-2",children:"Error loading recipes"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Cookbook"}),a.jsxs("p",{className:"text-muted-foreground",children:["Browse and search through ",r.totalRecipes," recipes"]})]})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(ka,{categories:m,onSelect:v,onCustomSearch:v})}),a.jsx(aZ,{currentMode:u,onModeChange:d})]}),a.jsx("div",{className:"my-4",children:h.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>p([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Dt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),h.map(N=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>b(N.id),title:"Click to remove",children:[N.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},N.id))]})}),a.jsxs(Si,{defaultValue:"recipes",className:"w-full",children:[a.jsxs(ki,{className:"mb-4",children:[a.jsx(Vt,{value:"recipes",children:"Recipes"}),a.jsx(Vt,{value:"statistics",children:"Statistics"}),a.jsx(Vt,{value:"meta",children:"Meta Analysis"})]}),a.jsx(Wt,{value:"recipes",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-xl font-semibold",children:["Recipes (",w.length,")"]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",w.length," of ",e.length," recipes"]})]}),u==="grid"&&a.jsx(sZ,{recipes:w,variant:"default",columns:3,onRecipeClick:j,showEffects:!0,showIngredients:!0,getEffectComparisons:c}),u==="list"&&a.jsx(rZ,{recipes:w,variant:"default",onRecipeClick:j,showEffects:!0,showIngredients:!0,getEffectComparisons:c})]})}),a.jsx(Wt,{value:"statistics",children:a.jsx(iZ,{statistics:r})}),a.jsx(Wt,{value:"meta",children:a.jsx(oZ,{recipes:e})})]})]})}function uZ(){return a.jsx(cn,{title:"Cookbook Reference",description:"Browse and search all available recipes. Find the perfect dish for your character's needs.",children:a.jsx(cZ,{})})}function dZ({path:e,className:t=""}){return e.length===0?a.jsxs("div",{className:`space-y-2 ${t}`,children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Selected Path"}),a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})})]}):a.jsxs("div",{className:`space-y-2 ${t}`,children:[a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Selected Path (",e.length," nodes)"]}),a.jsx("div",{className:"space-y-2",children:e.map((n,s)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium",children:s+1}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-sm",children:n.name}),n.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:n.description})]})]}),a.jsx(K,{variant:"secondary",className:s===e.length-1?"bg-yellow-600 text-yellow-50":"bg-blue-500",children:s===e.length-1?"Current":"Selected"})]},n.id))})]})}function fZ({stepIndex:e,totalSteps:t,title:n,onBack:s,onOverview:r,onClear:i,canBack:o}){const l=t>0?`${e+1} of ${t}`:"Start";return a.jsx("header",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[a.jsx("div",{className:"flex items-center space-x-2",children:o&&a.jsxs(q,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0",children:[a.jsx(Sx,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Go back"})]})}),a.jsxs("div",{className:"flex flex-col items-center flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-foreground truncate max-w-[200px]",children:n}),a.jsx("div",{className:"text-xs text-muted-foreground",children:l})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(q,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0",children:[a.jsx(LN,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Path overview"})]}),a.jsxs(nu,{children:[a.jsx(su,{asChild:!0,children:a.jsxs(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[a.jsx(m4,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"More options"})]})}),a.jsx(pl,{align:"end",children:a.jsx(as,{onClick:i,children:"Clear Path"})})]})]})]})})}function mZ({step:e,onChange:t}){return a.jsxs(xe,{className:"border-primary/20 bg-primary/5 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-primary"}),a.jsx(Te,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),a.jsx(Le,{className:"text-base font-medium text-primary",children:e.name})]}),a.jsxs(q,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:[a.jsx(O4,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Change step"})]})]})}),a.jsxs(ve,{className:"pt-0",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e.summary}),e.meta.tags&&e.meta.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:e.meta.tags.map(n=>a.jsx(K,{variant:"secondary",className:"text-xs",children:n},n))}),e.meta.levelRequirement&&a.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Level ",e.meta.levelRequirement," required"]})]})]})}function hZ({choice:e,onOpenDetails:t,onSelect:n}){return a.jsxs(xe,{className:"hover:shadow-md transition-shadow border-2 border-dashed border-muted hover:border-primary/50",children:[a.jsx(Te,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-muted-foreground/30 rounded-full"}),a.jsx(Le,{className:"text-base font-medium",children:e.name})]}),a.jsxs(q,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground",children:[a.jsx(Mo,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"View details"})]})]})}),a.jsxs(ve,{className:"pt-0",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:e.description||"No description available"}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map(s=>a.jsx(K,{variant:"outline",className:"text-xs",children:s},s))}),e.levelRequirement&&a.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:["Level ",e.levelRequirement," required"]}),a.jsxs(q,{onClick:n,className:"w-full",size:"sm",children:[a.jsx(mc,{className:"h-4 w-4 mr-2"}),"Select"]})]})]})}function gZ({canBack:e,canNext:t,onBack:n,onOverview:s}){return a.jsx("div",{className:"sticky bottom-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-t",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[a.jsxs(q,{variant:"outline",size:"sm",onClick:n,disabled:!e,className:"flex items-center space-x-2",children:[a.jsx(Sx,{className:"h-4 w-4"}),a.jsx("span",{children:"Back"})]}),a.jsx("div",{className:"flex-1 flex justify-center",children:a.jsxs(q,{variant:"ghost",size:"sm",onClick:s,className:"flex items-center space-x-2",children:[a.jsx(LN,{className:"h-4 w-4"}),a.jsx("span",{children:"Path Overview"})]})}),a.jsx(q,{variant:"outline",size:"sm",disabled:!t,className:"flex items-center space-x-2 opacity-50",children:a.jsx("span",{children:"Next"})})]})})}function pZ({open:e,steps:t,currentIndex:n,onJump:s,onClear:r,onClose:i}){return t.length===0?a.jsx(zo,{open:e,onOpenChange:i,children:a.jsxs(si,{side:"bottom",className:"h-[80vh]",children:[a.jsx(Lo,{children:a.jsx($o,{children:"Path Overview"})}),a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"No destiny path selected yet"}),a.jsx(q,{onClick:i,children:"Start Building"})]})]})}):a.jsx(zo,{open:e,onOpenChange:i,children:a.jsxs(si,{side:"bottom",className:"h-[80vh]",children:[a.jsx(Lo,{className:"flex flex-row items-center justify-between px-0",children:a.jsx($o,{className:"flex-1 min-w-0",children:"Path Overview"})}),a.jsx(ii,{className:"flex-1 mt-6",children:a.jsx("div",{className:"space-y-2",children:t.map((o,l)=>a.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${l===n?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>s(l),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(K,{variant:l===n?"default":"secondary",children:l+1}),a.jsx("h3",{className:"font-medium text-sm",children:o.name})]}),a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:o.summary}),o.meta.tags&&o.meta.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[o.meta.tags.slice(0,3).map(c=>a.jsx(K,{variant:"outline",className:"text-xs",children:c},c)),o.meta.tags.length>3&&a.jsxs(K,{variant:"outline",className:"text-xs",children:["+",o.meta.tags.length-3]})]})]}),l===n&&a.jsx("div",{className:"ml-2",children:a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})})]})},o.id))})}),a.jsxs("div",{className:"mt-4 pt-4 border-t space-y-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground text-center",children:"Tap any step to jump to that point in your path"}),a.jsxs(q,{variant:"outline",size:"sm",onClick:r,className:"w-full text-destructive hover:text-destructive border-destructive/20 hover:border-destructive/40",children:[a.jsx(xr,{className:"h-4 w-4 mr-2"}),"Restart Path"]})]})]})})}function xZ({open:e,choice:t,onSelect:n,onClose:s}){return t?a.jsx(zo,{open:e,onOpenChange:s,children:a.jsxs(si,{side:"bottom",className:"h-[90vh]",children:[a.jsxs(Lo,{className:"flex flex-row items-center justify-between",children:[a.jsx($o,{className:"text-left",children:t.name}),a.jsx(q,{variant:"ghost",size:"sm",onClick:s,children:a.jsx(Dt,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto mt-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t.description||"No description available"})]}),t.tags&&t.tags.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(r=>a.jsx(K,{variant:"secondary",className:"text-xs",children:r},r))})]}),t.levelRequirement&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Requirements"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Level ",t.levelRequirement," required"]})]}),t.prerequisites&&t.prerequisites.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm mb-2",children:"Prerequisites"}),a.jsx("div",{className:"space-y-1",children:t.prerequisites.map(r=>a.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",r]},r))})]}),t.lore&&a.jsxs(a.Fragment,{children:[a.jsx(Yr,{}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("h3",{className:"font-medium text-sm",children:"Lore"})]}),a.jsx("p",{className:"text-sm text-muted-foreground italic",children:t.lore})]})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[a.jsxs(q,{onClick:n,className:"w-full",size:"lg",children:[a.jsx(mc,{className:"h-4 w-4 mr-2"}),"Select This Destiny"]}),a.jsx(q,{variant:"outline",onClick:s,className:"w-full",children:"Close"})]})]})}):null}function vZ({steps:e,onRestart:t,onShare:n}){return a.jsxs(xe,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/20",children:[a.jsx(Te,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Id,{className:"h-5 w-5 text-green-600"}),a.jsx(Le,{className:"text-base text-green-800 dark:text-green-200",children:"Destiny Path Complete!"})]})}),a.jsxs(ve,{className:"pt-0",children:[a.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 mb-4",children:["You have successfully built a destiny path with ",e.length," steps."]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-medium text-sm mb-2 text-green-800 dark:text-green-200",children:"Your Path:"}),a.jsx("div",{className:"space-y-1",children:e.map((s,r)=>a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(K,{variant:"outline",className:"text-xs",children:r+1}),a.jsx("span",{className:"text-green-700 dark:text-green-300",children:s.name})]},s.id))})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(q,{variant:"outline",size:"sm",onClick:t,className:"flex-1",children:[a.jsx(xr,{className:"h-4 w-4 mr-2"}),"Start Over"]}),a.jsxs(q,{variant:"outline",size:"sm",onClick:n,className:"flex-1",children:[a.jsx(Z4,{className:"h-4 w-4 mr-2"}),"Share Path"]})]})]})]})}function T_(e){const{filterType:t,currentPath:n=[]}=e,{nodes:s,rootNodes:r}=Ea(),[i,o]=g.useState([]),{possiblePaths:l}=ym({fromNode:n.length>0?n[n.length-1]:void 0}),c=g.useMemo(()=>{if(t!=="build-path"||n.length===0)return s;const b=new Set,x=new Set,y=j=>{x.has(j)||(x.add(j),b.add(j),s.forEach(N=>{N.prerequisites.includes(j)&&y(N.edid)}))},w=n[n.length-1];return y(w.edid),s.filter(j=>b.has(j.edid))},[t,n,s,r]),u=g.useMemo(()=>{if(t==="build-path"){const b=new Set,x=new Set;l.forEach(j=>{j.path.forEach(N=>{b.add(N.edid)}),j.path.length>0&&x.add(j.path[j.path.length-1].edid)});const y=s.filter(j=>b.has(j.edid)),w=s.filter(j=>x.has(j.edid));return[{id:"includes-node",name:"Includes Node",placeholder:"Filter paths that include this node...",options:y.map(j=>{const N=l.filter(S=>S.path.some(k=>k.edid===j.edid)).length;return{id:`includes-${j.id}`,label:j.name,value:j.edid,category:"Includes Node",description:`${N} path${N!==1?"s":""} include ${j.name}`}})},{id:"ends-with-node",name:"Ends With Node",placeholder:"Filter paths that end with this node...",options:w.map(j=>{const N=l.filter(S=>S.path.length>0&&S.path[S.path.length-1].edid===j.edid).length;return{id:`ends-${j.id}`,label:j.name,value:j.edid,category:"Ends With Node",description:`${N} path${N!==1?"s":""} end with ${j.name}`}})}]}else{const b=[...new Set(s.flatMap(y=>y.tags))],x=[...new Set(s.flatMap(y=>y.prerequisites))];return[{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:b.map(y=>({id:`tag-${y}`,label:y,value:y,category:"Tags",description:`Nodes with ${y} tag`}))},{id:"prerequisites",name:"Prerequisites",placeholder:"Filter by prerequisite...",options:x.map(y=>{const w=s.find(j=>j.edid===y);return{id:`prereq-${y}`,label:w?w.name:y,value:y,category:"Prerequisites",description:`Nodes requiring ${w?w.name:y}`}})}]}},[t,c,s,l]),d=g.useCallback(b=>{o(x=>x.some(w=>w.type===b.type&&w.nodeName===b.nodeName)?x:[...x,b])},[]),f=g.useCallback(b=>{o(x=>x.filter(y=>y.id!==b))},[]),m=g.useCallback(()=>{o([])},[]),h=g.useCallback(()=>u.flatMap(b=>b.options),[u]),p=g.useCallback(b=>c.some(x=>x.id===b.id),[c]),v=g.useMemo(()=>t!=="build-path"||i.length===0?l.map(b=>b.path):l.map(b=>b.path).filter(b=>i.every(x=>{switch(x.type){case"includes-node":return b.some(y=>y.edid===x.nodeName||y.edid===x.nodeId);case"ends-with-node":return b.length>0&&(b[b.length-1].edid===x.nodeName||b[b.length-1].edid===x.nodeId);default:return!0}})),[t,i,l]);return{selectedFilters:i,searchCategories:u,addFilter:d,removeFilter:f,clearFilters:m,filteredPaths:v,availableNodes:c,getFilterOptions:h,isNodeAvailable:p}}function M_({searchCategories:e,selectedFilters:t,onFilterSelect:n,onFilterRemove:s,onClearFilters:r,className:i=""}){const o=e.find(d=>d.id==="includes-node"),l=e.find(d=>d.id==="ends-with-node"),c=e.find(d=>d.id==="tags"),u=e.find(d=>d.id==="prerequisites");return a.jsxs("div",{className:`space-y-4 ${i}`,children:[a.jsxs("div",{className:"flex flex-wrap gap-4",children:[o&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Includes"}),a.jsx(Fa,{categories:[o],onSelect:n,placeholder:o.placeholder,className:"w-full"})]}),l&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Ends With"}),a.jsx(Fa,{categories:[l],onSelect:n,placeholder:l.placeholder,className:"w-full"})]}),c&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx(Fa,{categories:[c],onSelect:n,placeholder:c.placeholder,className:"w-full"})]}),u&&a.jsxs("div",{className:"space-y-2 max-w-sm",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Prerequisites"}),a.jsx(Fa,{categories:[u],onSelect:n,placeholder:u.placeholder,className:"w-full"})]})]}),t.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Active Filters"}),a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:r,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Dt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),t.map(d=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>s(d.id),title:"Click to remove",children:[a.jsx("span",{className:"text-xs opacity-70 mr-1",children:d.type==="includes-node"?"Includes:":d.type==="ends-with-node"?"Ends:":d.type==="tags"?"Tag:":"Prereq:"}),d.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},d.id))]})]})]})}function yZ({onPathChange:e,onPathComplete:t,className:n="",compact:s=!1}){var E,C;const{currentPath:r,currentNode:i,isValidPath:o,pathErrors:l,setPath:c,clearPath:u,goToPathIndex:d,isPathComplete:f,getPathSummary:m}=E0(),{possiblePaths:h}=ym({fromNode:i||void 0}),{nodes:p}=Ea(),v=T_({filterType:"build-path",currentPath:r}),b=v.selectedFilters.length>0?v.filteredPaths:h.map(_=>_.path),x=_=>{if(typeof _=="string")return;let P,D;if(_.category==="Includes Node")P="includes-node",D=_.id.replace(/^includes-/,"");else if(_.category==="Ends With Node")P="ends-with-node",D=_.id.replace(/^ends-/,"");else return;const z={id:_.id,type:P,nodeName:_.value,nodeId:D,label:_.label};v.addFilter(z)},y=_=>{v.removeFilter(_)},w=()=>{v.clearFilters()},j=(_,P)=>{let D;if(r.length===0)D=_.slice(0,P+1);else{if(P===0)return;const z=_.slice(1,P+1);D=[...r,...z]}c(D),e==null||e(D),f&&(t==null||t(D))},N=_=>{d(_),e==null||e(r)},S=()=>{u(),e==null||e([])},k=m();return s?a.jsxs("div",{className:`space-y-4 ${n}`,children:[a.jsx(dZ,{path:r}),r.length>0&&a.jsx("div",{className:"flex justify-end",children:a.jsxs(q,{variant:"outline",size:"sm",onClick:S,className:"text-xs",children:[a.jsx(xr,{className:"w-3 h-3 mr-1"}),"Clear Path"]})}),b.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Possible Remaining Paths"}),a.jsx(ii,{className:"h-[200px]",children:a.jsx("div",{className:"p-4",children:a.jsx(Qg,{possiblePaths:b.map(_=>({path:_,isComplete:!1,endNode:_[_.length-1]})),selectedPathLength:r.length,onPathClick:j,variant:"compact"})})})]}),!o&&l.length>0&&a.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(Ao,{className:"w-3 h-3"}),a.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),a.jsx("ul",{className:"space-y-0.5",children:l.map((_,P)=>a.jsxs("li",{children:[" ",_]},P))})]})]}):a.jsxs("div",{className:`space-y-6 ${n}`,children:[a.jsxs(xe,{children:[a.jsx(Te,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(Le,{className:"flex items-center gap-2",children:[a.jsx(Id,{className:"w-5 h-5 text-primary"}),"Destiny Path Builder"]}),a.jsx("div",{className:"flex items-center gap-2",children:r.length>0&&a.jsxs(q,{variant:"outline",size:"sm",onClick:S,className:"flex items-center gap-1",children:[a.jsx(xr,{className:"w-4 h-4"}),"Clear Path"]})})]})}),a.jsxs(ve,{children:[a.jsx(iC,{path:r,allNodes:p,onBreadcrumbClick:N,className:"mb-4"}),r.length>0&&a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{children:["Path Length: ",r.length]}),a.jsx("span",{children:""}),a.jsxs("span",{children:["Start: ",(E=k.startNode)==null?void 0:E.name]}),a.jsx("span",{children:""}),a.jsxs("span",{children:["Current: ",(C=k.endNode)==null?void 0:C.name]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx(K,{variant:"default",className:"text-xs",children:"Complete"})]})]}),!o&&l.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[a.jsx(Ao,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Path Validation Errors:"})]}),a.jsx("ul",{className:"text-sm space-y-1",children:l.map((_,P)=>a.jsxs("li",{className:"text-destructive",children:[" ",_]},P))})]})]})]}),r.length>0&&a.jsxs(xe,{children:[a.jsx(Te,{children:a.jsx(Le,{className:"text-lg",children:"Current Path"})}),a.jsx(ve,{children:a.jsx("div",{className:"space-y-2",children:r.map((_,P)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50",children:[a.jsx(K,{variant:"outline",className:"text-xs",children:P+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:_.name}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:_.description})]})]},_.id))})})]}),a.jsxs(xe,{children:[a.jsxs(Te,{children:[a.jsx(Le,{className:"text-lg",children:r.length===0?"Choose Your Starting Point":"Possible Paths"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:r.length===0?"Select a root destiny node to begin your path":b.length===0?v.selectedFilters.length>0?"No paths match your current filters":"You have reached the end of this destiny path":v.selectedFilters.length>0?`Showing ${b.length} filtered paths from your current position`:`Explore ${b.length} possible paths from your current position`})]}),a.jsxs(ve,{className:"h-[600px] p-0",children:[a.jsx("div",{className:"p-6 pb-6",children:a.jsx(M_,{searchCategories:v.searchCategories,selectedFilters:v.selectedFilters,onFilterSelect:x,onFilterRemove:y,onClearFilters:w})}),b.length===0?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[v.selectedFilters.length>0?a.jsx(F4,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}):a.jsx(Id,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg font-medium",children:v.selectedFilters.length>0?"No paths match your filters":"Path Complete!"}),a.jsx("p",{className:"text-sm",children:v.selectedFilters.length>0?"Try adjusting your filters to see more paths.":"You've reached the end of this destiny path."})]}):a.jsx(ii,{className:"h-[calc(600px-200px)]",children:a.jsx("div",{className:"p-6 pt-4",children:a.jsx(Qg,{possiblePaths:b.map(_=>({path:_,isComplete:!1,endNode:_[_.length-1]})),selectedPathLength:r.length,onPathClick:j})})})]})]})]})}function bZ({item:e,originalNode:t,allNodes:n}){const s=r=>n.filter(i=>i.prerequisites.includes(r)).map(i=>i.name);return a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t&&t.prerequisites.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Prereq:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:t.prerequisites.map((r,i)=>a.jsx(K,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:r},i))})]}),t&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Leads to:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[s(t.name).map((r,i)=>a.jsx(K,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:r},i)),s(t.name).length===0&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"Terminal"})]})]}),e.tags.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Tags:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((r,i)=>a.jsx(K,{variant:"secondary",className:"text-xs",children:r},i))})]})]})}function wZ({items:e,allNodes:t}){return a.jsx(ii,{className:"h-[calc(100vh-500px)]",children:a.jsx(jB,{type:"single",collapsible:!0,className:"w-full",children:e.map(n=>a.jsxs(Ok,{value:n.id,children:[a.jsx(Bk,{className:"text-left hover:no-underline",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-bold text-base text-foreground truncate hover:underline",children:n.name}),a.jsx("div",{className:"text-base text-muted-foreground truncate",children:n.description})]})}),a.jsx(Ik,{children:a.jsx(bZ,{item:n,originalNode:t.find(s=>s.id===n.id),allNodes:t})})]},n.id))})})}const Ih=us((e,t)=>({steps:[],currentIndex:-1,nextChoices:[],selectChoice:n=>{const{steps:s,currentIndex:r,nextChoices:i}=t(),o=i.find(c=>c.edid===n);if(!o)return;const l={id:o.edid,name:o.name,summary:o.description||"",meta:{tags:o.tags||[],levelRequirement:o.levelRequirement,lore:o.lore},node:o};e(c=>{const u=[...c.steps],d=c.currentIndex+1;return d<u.length&&u.splice(d,u.length-d),u.push(l),{steps:u,currentIndex:d,nextChoices:[]}})},jumpTo:n=>{const{steps:s}=t();n<0||n>=s.length||e(r=>({currentIndex:n,steps:r.steps.slice(0,n+1),nextChoices:[]}))},clear:()=>{e({steps:[],currentIndex:-1,nextChoices:[]})},setNextChoices:n=>{e({nextChoices:n})},hydrateFromQuery:n=>{try{const s=atob(n),r=JSON.parse(s);r.steps&&Array.isArray(r.steps)&&e({steps:r.steps,currentIndex:r.currentIndex||r.steps.length-1,nextChoices:r.nextChoices||[]})}catch(s){console.warn("Failed to hydrate from query:",s)}},toQuery:()=>{const{steps:n,currentIndex:s,nextChoices:r}=t(),i={steps:n,currentIndex:s,nextChoices:r.map(o=>o.edid)};try{return btoa(JSON.stringify(i))}catch(o){return console.warn("Failed to serialize to query:",o),""}}}));function jZ(){const{steps:e,currentIndex:t,nextChoices:n,selectChoice:s,jumpTo:r,clear:i}=Ih(),o=t>=0&&t<e.length?e[t]:null,l=e.length,c=n.length===0,{nodes:u,rootNodes:d}=Ea(),[f,m]=g.useState(!1),[h,p]=g.useState(!1),[v,b]=g.useState(null),[x,y]=g.useState(!1);g.useEffect(()=>{const{setNextChoices:E}=Ih.getState();if(t===-1)E(d);else if(o){const C=u.filter(_=>{var P;return(P=_.prerequisites)==null?void 0:P.includes(o.node.edid)});E(C)}else E([])},[t,o,u,d]);const w=E=>{s(E),p(!1),b(null)},j=E=>{b(E),p(!0)},N=()=>{t>0&&r(t-1)},S=E=>{r(E),m(!1)},k=()=>{i(),m(!1)};return a.jsxs("div",{className:"flex min-h-screen flex-col bg-background",children:[a.jsx(fZ,{stepIndex:t,totalSteps:l,title:(o==null?void 0:o.name)??"Start Destiny",onBack:N,onOverview:()=>m(!0),onClear:k,canBack:t>0}),a.jsxs("main",{className:"flex-1 px-3 py-2 space-y-4",children:[o&&a.jsxs("div",{className:"space-y-2 p-3 rounded-lg bg-muted/20",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-px flex-1 bg-border"}),a.jsx("span",{className:"text-xs font-medium text-muted-foreground px-2",children:"CURRENT STEP"}),a.jsx("div",{className:"h-px flex-1 bg-border"})]}),a.jsx(mZ,{step:o,onChange:()=>y(!0)})]}),o&&!c&&n.length>0&&a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-px h-6 bg-primary/30"})}),!c&&n.length>0&&a.jsxs("section",{"aria-label":"Next choices",className:"space-y-3 p-3 rounded-lg bg-background border border-border",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-px flex-1 bg-border"}),a.jsx("span",{className:"text-xs font-medium text-muted-foreground px-2",children:t===-1?"CHOOSE STARTING DESTINY":"CHOOSE NEXT STEP"}),a.jsx("div",{className:"h-px flex-1 bg-border"})]}),a.jsxs("div",{className:"space-y-2",children:[n.slice(0,3).map(E=>a.jsx(hZ,{choice:E,onOpenDetails:()=>j(E),onSelect:()=>w(E.edid)},E.edid)),n.length>3&&a.jsx("div",{className:"text-center py-2",children:a.jsxs("span",{className:"text-sm text-muted-foreground",children:["+",n.length-3," more choices available"]})})]})]}),c&&l>0&&a.jsx(vZ,{steps:e,onRestart:()=>i(),onShare:()=>{console.log("Share path:",Ih.getState().toQuery())}}),l===0&&n.length===0&&a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"No destiny paths available. Please check your prerequisites."})})]}),a.jsx(gZ,{canBack:t>0,canNext:!1,onBack:N,onOverview:()=>m(!0)}),a.jsx(pZ,{open:f,steps:e,currentIndex:t,onJump:S,onClear:k,onClose:()=>m(!1)}),a.jsx(xZ,{open:h,choice:v,onSelect:()=>v&&w(v.edid),onClose:()=>{p(!1),b(null)}})]})}function NZ(e){return lk("(min-width: 1024px)")?a.jsx(yZ,{...e}):a.jsx(jZ,{})}function SZ({items:e,filters:t=[]}){const[n,s]=g.useState(null),[r,i]=g.useState("grid"),[o,l]=g.useState({search:"",selectedFilters:{},selectedTags:[]}),c=g.useMemo(()=>{let p=e;if(o.search){const v=o.search.toLowerCase();p=p.filter(b=>b.name.toLowerCase().includes(v)||b.description.toLowerCase().includes(v)||b.tags.some(x=>x.toLowerCase().includes(v)))}return o.selectedTags.length>0&&(p=p.filter(v=>o.selectedTags.some(b=>v.tags.includes(b.value)||v.category===b.value||v.name.toLowerCase().includes(b.value.toLowerCase())))),p},[e,o]),u=g.useMemo(()=>t.length===0?[]:t.map(p=>({...p,options:p.options.map(v=>({...v,count:e.filter(b=>b.tags.includes(v.value)||b.category===v.value).length}))})),[t,e]),d=g.useCallback(p=>{s(p)},[]),f=g.useCallback(p=>{l(p)},[]),m=g.useCallback(p=>{l(v=>({...v,search:p}))},[]),h=g.useCallback(p=>{i(p)},[]);return{selectedItem:n,viewMode:r,currentFilters:o,filteredItems:c,filtersWithCounts:u,handleItemSelect:d,handleFiltersChange:f,handleSearch:m,handleViewModeChange:h,setSelectedItem:s}}function kZ(){const{nodes:e,isLoading:t,error:n}=Ea(),{currentPath:s,setPath:r}=E0({validatePath:!0});ym({fromNode:s.length>0?s[s.length-1]:void 0});const i=T_({filterType:"reference"}),l=g.useMemo(()=>i.selectedFilters.length===0?e:e.filter(h=>i.selectedFilters.every(p=>{var v,b;switch(p.type){case"tags":return(v=h.tags)==null?void 0:v.includes(p.nodeName);case"prerequisites":return(b=h.prerequisites)==null?void 0:b.includes(p.nodeName);default:return!0}})),[e,i.selectedFilters]).map(h=>FB(h));SZ({items:l,filters:[]});const c=h=>{if(typeof h=="string")return;let p,v;if(h.category==="Tags")p="tags",v=h.id.replace(/^tag-/,"");else if(h.category==="Prerequisites")p="prerequisites",v=h.id.replace(/^prereq-/,"");else return;const b={id:h.id,type:p,nodeName:h.value,nodeId:v,label:h.label};i.addFilter(b)},u=h=>{i.removeFilter(h)},d=()=>{i.clearFilters()},f=h=>{r(h)},m=h=>{r(h)};return t?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading destiny data..."})]})}):n?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:n}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsx(cn,{title:"Destiny",description:"Plan your character's destiny through the perk tree. Each node represents a powerful ability or enhancement that will shape your journey.",children:a.jsx("div",{className:"mb-6",children:a.jsxs(Si,{defaultValue:"path",className:"w-full",children:[a.jsxs(ki,{className:"grid w-full grid-cols-2",children:[a.jsx(Vt,{value:"path",children:"Path Builder"}),a.jsx(Vt,{value:"reference",children:"Reference"})]}),a.jsxs(Wt,{value:"reference",className:"space-y-4",children:[a.jsx(M_,{searchCategories:i.searchCategories,selectedFilters:i.selectedFilters,onFilterSelect:c,onFilterRemove:u,onClearFilters:d}),a.jsx("div",{className:"w-full",children:a.jsx(wZ,{items:l,allNodes:e})})]}),a.jsx(Wt,{value:"path",className:"space-y-4",children:a.jsx(NZ,{onPathChange:f,onPathComplete:m})})]})})})}function R_(e){var t,n,s,r,i,o,l,c,u,d,f,m,h,p;return{name:e.name,type:e.type||e.pantheon||"Unknown",blessing:{spellId:((t=e.blessing)==null?void 0:t.spellId)||"",spellName:((n=e.blessing)==null?void 0:n.spellName)||"",effects:((s=e.blessing)==null?void 0:s.effects)||[]},boon1:{spellId:((r=e.boon1)==null?void 0:r.spellId)||"",spellName:((i=e.boon1)==null?void 0:i.spellName)||"",effects:((o=e.boon1)==null?void 0:o.effects)||[]},boon2:{spellId:((l=e.boon2)==null?void 0:l.spellId)||"",spellName:((c=e.boon2)==null?void 0:c.spellName)||"",effects:((u=e.boon2)==null?void 0:u.effects)||[]},tenet:{spellId:((d=e.tenet)==null?void 0:d.spellId)||"",spellName:((f=e.tenet)==null?void 0:f.spellName)||"",header:((m=e.tenet)==null?void 0:m.header)||"",description:((h=e.tenet)==null?void 0:h.description)||"",effects:((p=e.tenet)==null?void 0:p.effects)||[]},favoredRaces:e.favoredRaces||[],worshipRestrictions:e.worshipRestrictions||[]}}function CZ(){const{data:e,loading:t,error:n}=ik(),[s,r]=g.useState(null),[i,o]=g.useState(null),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,m]=g.useState("alphabetical"),[h,p]=g.useState("grid"),[v,b]=g.useState("religions"),x=g.useMemo(()=>(e||[]).map(Yk),[e]),y=g.useMemo(()=>(e||[]).map(R_),[e]),w=g.useMemo(()=>y.filter(D=>D.blessing&&D.blessing.effects.length>0),[y]),j=()=>{const D=[...new Set((e||[]).map(A=>A.pantheon).filter(Boolean))],z=[...new Set(x.flatMap(A=>A.tags))];return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"pantheons",name:"Pantheons",placeholder:"Search by pantheon...",options:D.map(A=>({id:`pantheon-${A}`,label:A,value:A,category:"Pantheons",description:`Religions from ${A} pantheon`}))},...rs()?[{id:"favored-races",name:"Favored Races",placeholder:"Search by favored race...",options:z.map(A=>({id:`race-${A}`,label:A,value:A,category:"Favored Races",description:`Religions that favor ${A}`}))}]:[],{id:"religion-types",name:"Religion Types",placeholder:"Search by religion type...",options:[{id:"divine",label:"Divine",value:"Divine",category:"Religion Types",description:"Divine religions"},{id:"daedric",label:"Daedric",value:"Daedric",category:"Religion Types",description:"Daedric religions"},{id:"tribunal",label:"Tribunal",value:"Tribunal",category:"Religion Types",description:"Tribunal religions"},{id:"ancestor",label:"Ancestor",value:"Ancestor",category:"Religion Types",description:"Ancestor religions"}]}]},[N,S]=g.useState([]),k=g.useMemo(()=>{let D=y;return N.length>0&&(D=D.filter(z=>N.every(A=>{var O;return A.category==="Pantheons"?z.pantheon===A.value:A.category==="Favored Races"?(O=z.favoredRaces)==null?void 0:O.includes(A.value):A.category==="Religion Types"?z.type===A.value:!0}))),D.sort((z,A)=>{if(f==="alphabetical")return z.name.localeCompare(A.name);if(f==="divine-type"){const O=M=>{switch(M){case"Divine":return 1;case"Daedric":return 2;case"Tribunal":return 3;case"Ancestor":return 4;default:return 5}},T=O(z.type),L=O(A.type);return T!==L?T-L:z.name.localeCompare(A.name)}return 0}),D},[y,N,f]),E=D=>{const z=typeof D=="string"?{id:D,label:D,value:D,category:"Custom"}:{id:D.id,label:D.label,value:D.value,category:D.category};S(A=>[...A,z])},C=D=>{S(z=>z.filter(A=>A.id!==D))},_=D=>{console.log("handleReligionClick called with id:",D);const z=y.find(A=>A.name===D);console.log("Found religion:",z),z&&(r(z),c(!0),console.log("Religion sheet should now be open"))},P=D=>{o(D),d(!0)};return t?a.jsx(cn,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-lg",children:"Loading religions..."})})}):n?a.jsx(cn,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-lg text-red-500",children:["Error loading religions: ",n]})})}):a.jsxs(cn,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Religions"}),a.jsx("p",{className:"text-muted-foreground",children:"Choose your character's faith and divine blessings"})]})}),a.jsxs(sB,{children:[a.jsx("div",{className:"flex-1",children:a.jsx(ka,{categories:j(),onSelect:E,onCustomSearch:E})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(nu,{children:[a.jsx(su,{asChild:!0,children:a.jsxs(q,{variant:"outline",size:"sm",children:["Sort: ",f==="alphabetical"?"A-Z":"Type",a.jsx(_n,{className:"ml-2 h-4 w-4"})]})}),a.jsxs(pl,{children:[a.jsx(as,{onClick:()=>m("alphabetical"),children:"Alphabetical (A-Z)"}),a.jsx(as,{onClick:()=>m("divine-type"),children:"Religion Type"})]})]}),a.jsxs("div",{className:"flex items-center gap-1 border rounded-md p-1",children:[a.jsx(q,{variant:h==="grid"?"default":"ghost",size:"sm",onClick:()=>p("grid"),children:a.jsx(ol,{className:"h-4 w-4"})}),a.jsx(q,{variant:h==="list"?"default":"ghost",size:"sm",onClick:()=>p("list"),children:a.jsx(pi,{className:"h-4 w-4"})})]})]})]}),N.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>S([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Dt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),N.map(D=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>C(D.id),title:"Click to remove",children:[D.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},D.id))]}),a.jsxs(Si,{value:v,onValueChange:D=>b(D),children:[a.jsxs(ki,{className:"grid w-full grid-cols-2",children:[a.jsxs(Vt,{value:"religions",children:["Religions (",k.length,")"]}),a.jsxs(Vt,{value:"blessings",children:["Blessings (",w.length,")"]})]}),a.jsxs(Wt,{value:"religions",className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"text-sm text-muted-foreground",children:[k.length," religion",k.length!==1?"s":""," found"]})}),a.jsx("div",{className:h==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:k.map(D=>a.jsx(pC,{originalReligion:D,onOpenDetails:_,showToggle:!0,className:h==="list"?"w-full":"h-full"},D.name))}),k.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-lg text-muted-foreground",children:"No religions found matching your criteria"}),a.jsx(q,{variant:"outline",onClick:()=>S([]),className:"mt-4",children:"Clear filters"})]})]}),a.jsxs(Wt,{value:"blessings",className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"text-sm text-muted-foreground",children:[w.length," blessing",w.length!==1?"s":""," found"]})}),a.jsx("div",{className:h==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:w.map(D=>a.jsx(CI,{religion:D,onClick:()=>P(D),showToggle:!1,className:h==="list"?"w-full":"h-full"},D.name))}),w.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-lg text-muted-foreground",children:"No blessings found matching your criteria"}),a.jsx(q,{variant:"outline",onClick:()=>S([]),className:"mt-4",children:"Clear filters"})]})]})]})]}),a.jsx(xC,{religion:s,isOpen:l,onOpenChange:c}),a.jsx(MI,{religion:i,isOpen:u,onOpenChange:d})]})}const EZ="modulepreload",_Z=function(e){return"/lorerim-arcaneum/"+e},pw={},er=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=_Z(c),c in pw)return;pw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":EZ,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function xw(e){return e.map(t=>({id:`skill-${t.id}`,type:"skill",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...t.keyAbilities||[],...t.metaTags||[],t.scaling||""],originalData:t,url:`/build/perks?skill=${t.id}`}))}function vw(e){return e.map(t=>({id:`race-${t.id}`,type:"race",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.source||"",...t.tags||[],...t.keywords||[]],originalData:t,url:"/races"}))}function yw(e){return e.map(t=>{var n;return{id:`trait-${t.id}`,type:"trait",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...((n=t.effects)==null?void 0:n.map(s=>s.description||s.type))||[]],originalData:t,url:"/traits"}})}function bw(e){const t=[];return e.forEach(n=>{var s,r,i,o,l,c,u,d,f,m,h,p,v,b,x;t.push({id:`religion-${n.id||n.name}`,type:"religion",name:n.name,description:((s=n.tenet)==null?void 0:s.description)||"",category:n.type||n.pantheon||"",tags:n.tags||[],searchableText:[n.name,((r=n.tenet)==null?void 0:r.description)||"",n.type||"",n.pantheon||"",...n.tags||[],...rs()?n.favoredRaces||[]:[],...n.worshipRestrictions||[],...((o=(i=n.tenet)==null?void 0:i.effects)==null?void 0:o.map(y=>y.effectName))||[],...((c=(l=n.blessing)==null?void 0:l.effects)==null?void 0:c.map(y=>y.effectName))||[],...((d=(u=n.boon1)==null?void 0:u.effects)==null?void 0:d.map(y=>y.effectName))||[],...((m=(f=n.boon2)==null?void 0:f.effects)==null?void 0:m.map(y=>y.effectName))||[]],originalData:n,url:"/religions"}),n.blessing&&n.blessing.effects.length>0&&t.push({id:`blessing-${n.id||n.name}`,type:"blessing",name:`Blessing of ${n.name}`,description:((h=n.blessing.effects[0])==null?void 0:h.effectDescription)||"",category:"Blessing",tags:n.tags||[],searchableText:[`Blessing of ${n.name}`,n.name,((p=n.blessing.effects[0])==null?void 0:p.effectDescription)||"",((v=n.blessing.effects[0])==null?void 0:v.effectName)||"",...((b=n.blessing.effects)==null?void 0:b.map(y=>y.effectName))||[],...((x=n.blessing.effects)==null?void 0:x.map(y=>y.effectDescription))||[],...n.tags||[],"blessing","divine","worship"],originalData:{...n,blessingOnly:!0},url:"/religions?tab=blessings"})}),t}function ww(e){return e.map(t=>{var n,s;return{id:`birthsign-${t.id||t.edid}`,type:"birthsign",name:t.name,description:t.description,category:t.group,tags:t.tags||[],searchableText:[t.name,t.description||"",t.group||"",...t.tags||[],...((n=t.powers)==null?void 0:n.map(r=>r.name||r.description))||[],...((s=t.stat_modifications)==null?void 0:s.map(r=>r.stat))||[]],originalData:t,url:"/birthsigns"}})}function jw(e){return e.map(t=>({id:`destiny-${t.id}`,type:"destiny",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.lore||"",...t.tags||[],...t.prerequisites||[]],originalData:t,url:"/destiny"}))}function Nw(e){return e.map(t=>{var n;return{id:`perk-${t.treeId||t.id}`,type:"perk",name:t.treeName||t.name,description:t.treeDescription||t.description,category:t.category,tags:t.tags||[],searchableText:[t.treeName||t.name,t.treeDescription||t.description||"",t.category||"",...t.tags||[],...((n=t.perks)==null?void 0:n.map(s=>s.name))||[]],originalData:t,url:"/build/perks"}})}function Sw(e){return e.map(t=>{var n,s,r,i,o,l;return{id:`perk-ref-${t.edid}`,type:"perk-reference",name:t.name,description:((s=(n=t.ranks[0])==null?void 0:n.description)==null?void 0:s.base)||"",category:t.category,tags:t.tags,searchableText:[t.name,((i=(r=t.ranks[0])==null?void 0:r.description)==null?void 0:i.base)||"",((l=(o=t.ranks[0])==null?void 0:o.description)==null?void 0:l.subtext)||"",t.skillTreeName,t.category,...t.tags,...t.prerequisites,t.isRoot?"root perk":"branch perk",t.totalRanks>1?"multi-rank":"single-rank"],originalData:t,url:`/perk-references?skill=${t.skillTree}&perk=${t.edid}`}})}function kw(e){return e.map(t=>({id:`spell-${t.editorId}`,type:"spell",name:t.name,description:t.description,category:t.school,tags:t.tags,searchableText:[t.name,t.description||"",t.school||"",t.level||"",t.tome||"",...t.tags,...t.effects.map(n=>n.name),...t.effects.map(n=>n.description),t.isAreaSpell?"area spell":"",t.isDurationSpell?"duration spell":"",t.isInstantSpell?"instant spell":"",`magicka cost ${t.magickaCost}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`,`area ${t.maxArea}`].filter(Boolean),originalData:t,url:`/spells?spell=${t.editorId}`}))}function Cw(e){return e.map(t=>({id:`recipe-${t.name}`,type:"recipe",name:t.name,description:t.description,category:t.category,tags:t.tags,searchableText:[t.name,t.description||"",t.category||"",t.output||"",t.difficulty||"",t.type||"",...t.tags,...t.ingredients.map(n=>typeof n=="string"?n:n.name||n.item||""),...t.effects.map(n=>n.name),...t.effects.map(n=>n.description),`ingredients ${t.ingredientCount}`,`effects ${t.effectCount}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`].filter(Boolean),originalData:t,url:`/cookbook?recipe=${encodeURIComponent(t.name)}`}))}function AZ(e){return{id:e.item.id,name:e.item.name,description:e.item.description||"",summary:e.item.description||"",tags:e.item.tags,category:e.item.category,imageUrl:void 0,effects:[],associatedItems:[],originalSearchResult:e}}function TZ(e){return e.map(t=>{var n,s;return{field:t.key||"unknown",snippet:t.value,startIndex:((n=t.indices[0])==null?void 0:n[0])||0,endIndex:((s=t.indices[0])==null?void 0:s[1])||0}})}class MZ{constructor(){Ge(this,"searchIndex",null);Ge(this,"isIndexing",!1);Ge(this,"allSearchableItems",[]);Ge(this,"indexedStores",new Set);Ge(this,"fuseOptions",{keys:[{name:"name",weight:.8},{name:"description",weight:.6},{name:"category",weight:.4},{name:"tags",weight:.5},{name:"searchableText",weight:.3}],threshold:.6,includeMatches:!0,includeScore:!0,minMatchCharLength:2,ignoreLocation:!0,useExtendedSearch:!1,findAllMatches:!0});Ge(this,"transformSkillsToSearchable",xw);Ge(this,"transformRacesToSearchable",vw);Ge(this,"transformTraitsToSearchable",yw);Ge(this,"transformReligionsToSearchable",bw);Ge(this,"transformBirthsignsToSearchable",ww);Ge(this,"transformDestinyNodesToSearchable",jw);Ge(this,"transformPerkTreesToSearchable",Nw);Ge(this,"transformPerkReferencesToSearchable",Sw);Ge(this,"transformRecipesToSearchable",Cw);Ge(this,"transformSpellsToSearchable",kw)}async addToIndex(t,n){this.indexedStores.has(t)||(this.allSearchableItems.push(...n),this.indexedStores.add(t),this.searchIndex=new Kt(this.allSearchableItems,this.fuseOptions))}hasIndexedData(){return this.allSearchableItems.length>0}rebuildSearchIndex(){this.allSearchableItems.length>0&&(this.searchIndex=new Kt(this.allSearchableItems,this.fuseOptions))}async buildSearchIndex(){if(!this.isIndexing){this.isIndexing=!0;try{const{useSkillsStore:t}=await er(async()=>{const{useSkillsStore:N}=await Promise.resolve().then(()=>RL);return{useSkillsStore:N}},[]),{useRacesStore:n}=await er(async()=>{const{useRacesStore:N}=await Promise.resolve().then(()=>_L);return{useRacesStore:N}},void 0),{useTraitsStore:s}=await er(async()=>{const{useTraitsStore:N}=await Promise.resolve().then(()=>DL);return{useTraitsStore:N}},void 0),{useReligionsStore:r}=await er(async()=>{const{useReligionsStore:N}=await Promise.resolve().then(()=>ML);return{useReligionsStore:N}},void 0),{useBirthsignsStore:i}=await er(async()=>{const{useBirthsignsStore:N}=await Promise.resolve().then(()=>kL);return{useBirthsignsStore:N}},void 0),{useDestinyNodesStore:o}=await er(async()=>{const{useDestinyNodesStore:N}=await Promise.resolve().then(()=>EL);return{useDestinyNodesStore:N}},void 0),{usePerkTreesStore:l}=await er(async()=>{const{usePerkTreesStore:N}=await Promise.resolve().then(()=>c5);return{usePerkTreesStore:N}},void 0),{useRecipesStore:c}=await er(async()=>{const{useRecipesStore:N}=await Promise.resolve().then(()=>W6);return{useRecipesStore:N}},void 0),{SpellDataProvider:u}=await er(async()=>{const{SpellDataProvider:N}=await Promise.resolve().then(()=>K6);return{SpellDataProvider:N}},void 0),d=t.getState().data,f=n.getState().data,m=s.getState().data,h=r.getState().data,p=i.getState().data,v=o.getState().data,b=l.getState().data,x=c.getState().data,w=await u.getInstance().loadSpells();if(!(d!=null&&d.length)||!(f!=null&&f.length)||!(m!=null&&m.length)||!(h!=null&&h.length)||!(p!=null&&p.length)||!(v!=null&&v.length)||!(b!=null&&b.length)||!(x!=null&&x.length)||!(w!=null&&w.length))throw console.log("Stores not loaded yet, cannot build search index"),new Error("Store data not available - stores must be loaded before building search index");const j=[...xw(d),...vw(f),...yw(m),...bw(h),...ww(p),...jw(v),...Nw(b),...Cw(x),...kw(w)];this.allSearchableItems=j,this.searchIndex=new Kt(j,this.fuseOptions)}catch(t){throw console.error("Failed to build search index:",t),t}finally{this.isIndexing=!1}}}async addPerkReferencesToIndex(t){if(this.indexedStores.has("perk-references"))return;const n=Sw(t);this.allSearchableItems.push(...n),this.indexedStores.add("perk-references"),this.searchIndex=new Kt(this.allSearchableItems,this.fuseOptions)}search(t,n){if(!this.searchIndex)return[];if(!t.trim()||t.trim()==="*"){let o=this.allSearchableItems;return n&&(o=this.applyFilters(o,n)),o.map(l=>({item:l,score:1,matches:[],highlights:[]}))}if(!this.searchIndex)return console.warn("Search index not ready, returning empty results"),[];const s=this.searchIndex.search(t);let r=s;return n&&(r=s.filter(o=>{const l=o.item;return this.applyFilters([l],n).length>0})),r.map(o=>({item:o.item,score:o.score||0,matches:[...o.matches||[]],highlights:TZ([...o.matches||[]])}))}applyFilters(t,n){return t.filter(s=>{var r,i,o,l,c,u,d;if(n.types.length>0&&!n.types.includes(s.type)||n.categories.length>0&&s.category&&!n.categories.includes(s.category))return!1;if(n.tags.length>0){const f=s.tags.map(p=>p.toLowerCase());if(!n.tags.map(p=>p.toLowerCase()).some(p=>f.some(v=>v.includes(p)||p.includes(v))))return!1}if(s.type==="skill"&&((r=n.skillCategories)!=null&&r.length)&&(!s.category||!n.skillCategories.includes(s.category))||s.type==="race"&&((i=n.raceTypes)!=null&&i.length)&&(!s.category||!n.raceTypes.includes(s.category))||s.type==="trait"&&((o=n.traitTypes)!=null&&o.length)&&(!s.category||!n.traitTypes.includes(s.category))||s.type==="religion"&&((l=n.religionTypes)!=null&&l.length)&&(!s.category||!n.religionTypes.includes(s.category))||s.type==="birthsign"&&((c=n.birthsignGroups)!=null&&c.length)&&(!s.category||!n.birthsignGroups.includes(s.category))||s.type==="spell"&&((u=n.spellSchools)!=null&&u.length)&&(!s.category||!n.spellSchools.includes(s.category)))return!1;if(s.type==="spell"&&((d=n.spellLevels)!=null&&d.length)){const f=s.originalData;if(!f.level||!n.spellLevels.includes(f.level))return!1}return!0})}getAvailableFilters(){const t=new Map,n=new Map,s=new Map;return this.allSearchableItems.forEach(r=>{const i=t.get(r.type)||0;if(t.set(r.type,i+1),r.category){const o=n.get(r.category)||0;n.set(r.category,o+1)}r.tags.forEach(o=>{const l=s.get(o)||0;s.set(o,l+1)})}),{types:Array.from(t.entries()).map(([r,i])=>({value:r,label:r.charAt(0).toUpperCase()+r.slice(1),count:i})),categories:Array.from(n.entries()).map(([r,i])=>({value:r,label:r,count:i})),tags:Array.from(s.entries()).map(([r,i])=>({value:r,label:r,count:i}))}}getSearchableItems(){return this.allSearchableItems}isReady(){return this.searchIndex!==null&&!this.isIndexing}isLoading(){return this.isIndexing}}const RZ={skill:{label:"Skill",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},race:{label:"Race",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},trait:{label:"Trait",icon:"",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},religion:{label:"Religion",icon:"",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},birthsign:{label:"Birthsign",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},destiny:{label:"Destiny",icon:"",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},perk:{label:"Perk",icon:"",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"}};function DZ({type:e,className:t,variant:n="default"}){const s=RZ[e]||{label:e.charAt(0).toUpperCase()+e.slice(1),icon:"",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return n==="default"?a.jsxs(K,{className:H("inline-flex items-center gap-1 px-2 py-1 text-xs font-medium",s.color,t),children:[a.jsx("span",{children:s.icon}),a.jsx("span",{children:s.label})]}):a.jsxs(K,{variant:n,className:H("inline-flex items-center gap-1",t),children:[a.jsx("span",{children:s.icon}),a.jsx("span",{children:s.label})]})}function zZ({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){return a.jsxs(he,{className:H("transition-all hover:shadow-md",t),expanded:n,onToggle:s,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(DZ,{type:e.type})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-sm truncate",children:e.name}),e.category&&a.jsx(K,{variant:"outline",className:"text-xs",children:e.category})]})})]})}),a.jsxs(he.Summary,{children:[e.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((i,o)=>a.jsx(K,{variant:"secondary",className:"text-xs",children:i},`${i}-${o}`)),e.tags.length>3&&a.jsxs(K,{variant:"secondary",className:"text-xs",children:["+",e.tags.length-3]})]})]}),a.jsxs(he.Details,{children:[e.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"All Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((i,o)=>a.jsx(K,{variant:"secondary",className:"text-xs",children:i},`${i}-${o}`))})]}),e.description&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]})]})}function _i(e,t){return e?e.find(s=>{const r=!!s.id&&s.id===t.id,i=!!s.edid&&s.edid===t.edid,o=!!s.treeId&&s.treeId===t.treeId,l=!!s.name&&s.name===t.name;return r||i||o||l}):void 0}function LZ({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=yi(l=>l.data),o=_i(i,e.originalData);return o?a.jsx(nf,{originalBirthsign:o,isExpanded:n,onToggle:s,className:t,showToggle:!1}):(console.error("Birthsign not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalBirthsignsInStore:i.length,firstFewBirthsigns:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function $Z({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=dl(l=>l.data),o=_i(i,e.originalData);return o?a.jsxs(he,{className:t,expanded:n,onToggle:s,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.icon?a.jsx("img",{src:o.icon,alt:o.name,className:"w-6 h-6 object-contain"}):a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:o.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:o.name}),o.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),a.jsx(he.Summary,{children:o.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.description})}),a.jsxs(he.Details,{children:[o.effects&&o.effects.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Effects"}),a.jsx("div",{className:"space-y-1",children:o.effects.map((l,c)=>a.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",l]},c))})]}),o.tags&&o.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((l,c)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]})]})]}):(console.error("Destiny node not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalDestinyNodesInStore:i.length,firstFewDestinyNodes:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}class PZ{constructor(t){Ge(this,"perkNodes",[]);this.perkNodes=this.transformPerkTrees(t)}transformPerkTrees(t){const n=[];return t.forEach(s=>{s.perks.forEach(r=>{var o,l,c,u,d;const i={...r,skillTree:s.treeId,skillTreeName:s.treeName,isRoot:r.isRoot||!1,hasChildren:(((l=(o=r.connections)==null?void 0:o.children)==null?void 0:l.length)||0)>0,prerequisites:((c=r.connections)==null?void 0:c.parents)||[],connections:{parents:((u=r.connections)==null?void 0:u.parents)||[],children:((d=r.connections)==null?void 0:d.children)||[]},searchableText:this.generateSearchableText(r,s),tags:this.generateTags(r,s),category:this.determineCategory(s.treeName),minLevel:this.calculateMinLevel(r)};n.push(i)})}),n}calculateMinLevel(t){var s,r;let n=0;if(t.ranks&&t.ranks.length>0&&t.ranks.forEach(i=>{var o,l;(l=(o=i.prerequisites)==null?void 0:o.skillLevel)!=null&&l.level&&(n=Math.max(n,i.prerequisites.skillLevel.level))}),n===0)if(t.isRoot)n=1;else{const i=((r=(s=t.connections)==null?void 0:s.parents)==null?void 0:r.length)||0;n=Math.max(1,i*5)}return n}generateSearchableText(t,n){var r,i;return[t.name,(r=t.ranks)==null?void 0:r.map(o=>{var l;return(l=o.description)==null?void 0:l.base}).join(" "),(i=t.ranks)==null?void 0:i.map(o=>{var l;return(l=o.description)==null?void 0:l.subtext}).join(" "),n.treeName,this.determineCategory(n.treeName)].filter(Boolean).join(" ").toLowerCase()}generateTags(t,n){var i,o,l,c;const s=[n.treeName,this.determineCategory(n.treeName),t.isRoot?"root":"branch",t.totalRanks>1?"multi-rank":"single-rank"];((o=(i=t.connections)==null?void 0:i.parents)==null?void 0:o.length)>0&&s.push("has-prerequisites"),((c=(l=t.connections)==null?void 0:l.children)==null?void 0:c.length)>0&&s.push("has-children");const r=this.calculateMinLevel(t);return r>0&&s.push(`level-${r}+`),s}determineCategory(t){return{Alchemy:"Magic",Alteration:"Magic",Conjuration:"Magic",Destruction:"Magic",Illusion:"Magic",Restoration:"Magic",Archery:"Combat",Block:"Combat","Heavy Armor":"Combat","One Handed":"Combat",Smithing:"Combat","Two Handed":"Combat","Light Armor":"Stealth",Lockpicking:"Stealth",Pickpocket:"Stealth",Sneak:"Stealth",Speech:"Stealth",Enchanting:"Crafting"}[t]||"Other"}getAllPerks(){return this.perkNodes}getPerksBySkill(t){return this.perkNodes.filter(n=>n.skillTree===t)}getPerksByCategory(t){return this.perkNodes.filter(n=>n.category===t)}getPerksByPrerequisite(t){return this.perkNodes.filter(n=>n.prerequisites.includes(t))}getRootPerks(){return this.perkNodes.filter(t=>t.isRoot)}getMultiRankPerks(){return this.perkNodes.filter(t=>t.totalRanks>1)}searchPerks(t){const n=t.toLowerCase();return this.perkNodes.filter(s=>s.searchableText.includes(n)||s.name.toLowerCase().includes(n)||s.tags.some(r=>r.toLowerCase().includes(n)))}}function D_(){const{data:e,loading:t,error:n}=x0(),s=g.useMemo(()=>e?new PZ(e):null,[e]),r=g.useMemo(()=>(s==null?void 0:s.getAllPerks())||[],[s]);return{dataProvider:s,allPerks:r,loading:t,error:n}}function Dm(){const{dataProvider:e,allPerks:t,loading:n,error:s}=D_(),r=g.useMemo(()=>{const h=new Map;return t.forEach(p=>{h.has(p.skillTree)||h.set(p.skillTree,{id:p.skillTree,name:p.skillTreeName,count:0});const v=h.get(p.skillTree);v.count++}),Array.from(h.values()).sort((p,v)=>p.name.localeCompare(v.name))},[t]),i=g.useMemo(()=>{const h=new Map;return t.forEach(p=>{h.has(p.category)||h.set(p.category,{name:p.category,count:0});const v=h.get(p.category);v.count++}),Array.from(h.values()).sort((p,v)=>p.name.localeCompare(v.name))},[t]),o=g.useMemo(()=>{const h=new Set;return t.forEach(p=>{p.tags.forEach(v=>h.add(v))}),Array.from(h).sort()},[t]),l=g.useMemo(()=>t.filter(h=>h.isRoot),[t]),c=g.useMemo(()=>t.filter(h=>h.totalRanks>1),[t]),u=g.useMemo(()=>t.filter(h=>h.totalRanks===1),[t]),d=g.useMemo(()=>h=>(e==null?void 0:e.getPerksBySkill(h))||[],[e]),f=g.useMemo(()=>h=>(e==null?void 0:e.getPerksByCategory(h))||[],[e]),m=g.useMemo(()=>h=>(e==null?void 0:e.searchPerks(h))||[],[e]);return{allPerks:t,skillTrees:r,categories:i,tags:o,rootPerks:l,multiRankPerks:c,singleRankPerks:u,getPerksBySkill:d,getPerksByCategory:f,searchPerks:m,loading:n,error:s,dataProvider:e}}const OZ={skill:{Alchemy:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Alteration:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Archery:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200",Block:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Conjuration:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Destruction:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Enchanting:"bg-indigo-100 text-indigo-800 border-indigo-200 hover:bg-indigo-200","Heavy Armor":"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",Illusion:"bg-pink-100 text-pink-800 border-pink-200 hover:bg-pink-200","Light Armor":"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200",Lockpicking:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200","One-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Pickpocket:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Restoration:"bg-teal-100 text-teal-800 border-teal-200 hover:bg-teal-200",Smithing:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Sneak:"bg-slate-100 text-slate-800 border-slate-200 hover:bg-slate-200",Speech:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200","Two-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200"},category:{Combat:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Crafting:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Survival:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Social:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200"},rank:{"1 rank":"bg-blue-100 text-blue-800 border-blue-200","2 ranks":"bg-green-100 text-green-800 border-green-200","3 ranks":"bg-purple-100 text-purple-800 border-purple-200","4 ranks":"bg-orange-100 text-orange-800 border-orange-200","5 ranks":"bg-red-100 text-red-800 border-red-200"},availability:{Available:"bg-green-100 text-green-800 border-green-200",Unavailable:"bg-red-100 text-red-800 border-red-200","Prerequisites Met":"bg-blue-100 text-blue-800 border-blue-200","Prerequisites Missing":"bg-gray-100 text-gray-800 border-gray-200"},level:{"Level 1+":"bg-green-100 text-green-800 border-green-200","Level 5+":"bg-blue-100 text-blue-800 border-blue-200","Level 10+":"bg-purple-100 text-purple-800 border-purple-200","Level 15+":"bg-orange-100 text-orange-800 border-orange-200","Level 20+":"bg-red-100 text-red-800 border-red-200","Level 25+":"bg-indigo-100 text-indigo-800 border-indigo-200","Level 30+":"bg-pink-100 text-pink-800 border-pink-200","Level 35+":"bg-teal-100 text-teal-800 border-teal-200","Level 40+":"bg-cyan-100 text-cyan-800 border-cyan-200","Level 45+":"bg-emerald-100 text-emerald-800 border-emerald-200","Level 50+":"bg-amber-100 text-amber-800 border-amber-200"},root:{Root:"bg-gold-100 text-gold-800 border-gold-200 hover:bg-gold-200"}},BZ={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},IZ="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function Ui({label:e,type:t,size:n="md",className:s}){const i=OZ[t][e]||IZ;return a.jsx(K,{variant:"outline",className:H(i,BZ[n],"font-medium transition-colors",s),children:e})}function vp({item:e,className:t,isExpanded:n=!1,onToggle:s,disableHover:r=!1,viewMode:i="grid"}){const o=e.originalPerk,{allPerks:l}=Dm();if(!o)return null;const u=(d=>d.map(f=>{const m=l.find(h=>h.edid===f);return(m==null?void 0:m.name)||f}))(o.prerequisites);return a.jsxs(he,{className:t,expanded:n,onToggle:s,disableHover:r,children:[a.jsxs(he.Header,{children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:e.name.charAt(0)})}),a.jsx("div",{className:"flex-1 min-w-0",children:i==="grid"?a.jsxs("div",{className:"space-y-1",children:[a.jsx(Ae,{className:"text-primary font-semibold truncate",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.skillTreeName&&a.jsx(Ui,{label:o.skillTreeName,type:"skill",size:"sm"}),o.totalRanks>1&&a.jsx(Ui,{label:`${o.totalRanks} ranks`,type:"rank",size:"sm"}),o.minLevel&&a.jsx(Ui,{label:`Level ${o.minLevel}+`,type:"level",size:"sm"})]})]}):a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx(Ae,{className:"text-primary font-semibold truncate",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.skillTreeName&&a.jsx(Ui,{label:o.skillTreeName,type:"skill",size:"sm"}),o.totalRanks>1&&a.jsx(Ui,{label:`${o.totalRanks} ranks`,type:"rank",size:"sm"}),o.minLevel&&a.jsx(Ui,{label:`Level ${o.minLevel}+`,type:"level",size:"sm"})]})]})})]}),a.jsxs(he.Summary,{children:[a.jsx(be,{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((d,f)=>a.jsx(K,{variant:"outline",className:"text-xs",children:d},f)),e.tags.length>3&&a.jsxs(ho,{className:"text-muted-foreground",children:["+",e.tags.length-3," more"]})]})]}),a.jsxs(he.Details,{children:[o.prerequisites&&o.prerequisites.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Prerequisites"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:u.map((d,f)=>a.jsx(K,{variant:"secondary",className:"text-xs",children:d},f))})]}),o.ranks&&o.ranks.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Perk Ranks"}),a.jsx("div",{className:"space-y-2",children:o.ranks.map((d,f)=>{var m;return a.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[a.jsx("div",{className:"flex items-center justify-between mb-1",children:a.jsxs("span",{className:"font-medium text-sm",children:["Rank ",f+1]})}),((m=d.description)==null?void 0:m.base)&&a.jsx(be,{className:"text-sm text-muted-foreground",children:d.description.base})]},f)})})]}),e.tags.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((d,f)=>a.jsx(K,{variant:"outline",className:"text-xs",children:d},f))})]})]})]})}function z_(e,t){var o,l,c,u,d,f;const n=((l=(o=t.perks)==null?void 0:o.selected)==null?void 0:l[e.skillTree])||[],s=((u=(c=t.perks)==null?void 0:c.ranks)==null?void 0:u[e.skillTree])||{},r=n.includes(e.edid),i=s[e.edid]||0;return{id:e.edid,name:e.name,description:((f=(d=e.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",category:e.category,tags:e.tags,isSelected:r,originalPerk:e,skillTree:e.skillTree,skillTreeName:e.skillTreeName,isRoot:e.isRoot,hasChildren:e.hasChildren,prerequisites:e.prerequisites,connections:e.connections,totalRanks:e.totalRanks,currentRank:i,isAvailable:e.isRoot||e.prerequisites.every(m=>n.includes(m)),minLevel:e.minLevel}}function HZ({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const{build:i}=ht(),{allPerks:o}=Dm(),l=e.originalData,c=o.find(f=>f.edid===(l==null?void 0:l.edid));if(!c)return console.warn("Perk reference not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData}),null;const d={...z_(c,i),originalPerk:c};return a.jsx(vp,{item:d,className:t,isExpanded:n,onToggle:s,viewMode:r})}function FZ({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){var c;const i=vi(u=>u.data),o=_i(i,e.originalData);if(!o)return console.error("Perk tree not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalPerkTreesInStore:i.length,firstFewPerkTrees:i.slice(0,3).map(u=>({treeId:u.treeId,treeName:u.treeName||u.name}))}),null;const l=((c=o.perks)==null?void 0:c.length)||0;return a.jsxs(he,{className:t,expanded:n,onToggle:s,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:(o.treeName||o.name).charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:o.treeName||o.name}),o.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),a.jsxs(he.Summary,{children:[o.treeDescription&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.treeDescription}),l>0&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[a.jsx("span",{className:"font-medium",children:"Perks:"})," ",l," total"]})]}),a.jsxs(he.Details,{children:[o.perks&&o.perks.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Sample Perks"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.perks.slice(0,6).map((u,d)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:u.name},`${u.edid}-${d}`)),o.perks.length>6&&a.jsxs("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded text-muted-foreground",children:["+",o.perks.length-6," more"]})]})]}),o.tags&&o.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((u,d)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-secondary text-secondary-foreground rounded",children:u},`${u}-${d}`))})]})]})]})}function UZ({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=yr(c=>c.data),o=_i(i,e.originalData);if(!o)return console.error("Race not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalRacesInStore:i.length,firstFewRaces:i.slice(0,3).map(c=>({edid:c.edid,name:c.name}))}),null;const l={id:o.id||o.edid||o.name,name:o.name,description:o.description||"",summary:o.description||"",category:o.category||"",tags:o.tags||[],type:"race",effects:[]};return a.jsx("div",{className:t,children:a.jsx(ou,{item:{...l,originalRace:o},isExpanded:n,onToggle:s,showToggle:!1,disableHover:!1,className:"w-full"})})}function VZ({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=fl(h=>h.data),[o,l]=g.useState(null),[c,u]=g.useState(!1),d=_i(i,e.originalData);if(!d)return console.error("Religion not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalReligionsInStore:i.length,firstFewReligions:i.slice(0,3).map(h=>({id:h.id,name:h.name}))}),null;const f=R_(d),m=h=>{l(f),u(!0)};return a.jsxs("div",{className:t,children:[a.jsx(pC,{originalReligion:f,className:"w-full",onOpenDetails:m,showToggle:!0}),a.jsx(xC,{religion:o,isOpen:c,onClose:()=>u(!1)})]})}function qZ({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=bi(l=>l.data),o=_i(i,e.originalData);return o?a.jsxs(he,{className:t,expanded:n,onToggle:s,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:o.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:o.name}),o.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),a.jsxs(he.Summary,{children:[o.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.description}),o.keyAbilities&&o.keyAbilities.length>0&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[a.jsx("span",{className:"font-medium",children:"Key abilities:"})," ",o.keyAbilities.slice(0,2).join(", "),o.keyAbilities.length>2&&"..."]})]}),a.jsxs(he.Details,{children:[o.tags&&o.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((l,c)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),o.keyAbilities&&o.keyAbilities.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Key Abilities"}),a.jsx("div",{className:"space-y-1",children:o.keyAbilities.map((l,c)=>a.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",l]},c))})]})]})]}):(console.error("Skill not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalSkillsInStore:i.length,firstFewSkills:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function ZZ({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const i=wi(l=>l.data),o=_i(i,e.originalData);return o?a.jsxs(he,{className:t,expanded:n,onToggle:s,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:o.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-primary",children:o.name}),o.category&&a.jsx("span",{className:"text-sm text-muted-foreground",children:o.category})]})]})}),a.jsx(he.Summary,{children:o.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.description})}),a.jsxs(he.Details,{children:[o.tags&&o.tags.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:o.tags.map((l,c)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),o.description&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:o.description})]})]})]}):(console.error("Trait not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalTraitsInStore:i.length,firstFewTraits:i.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}const GZ={Destruction:il,Restoration:Os,Conjuration:Ex,Illusion:al,Alteration:at,"":oa},YZ={Novice:"bg-green-100 text-green-800 border-green-200",Apprentice:"bg-blue-100 text-blue-800 border-blue-200",Adept:"bg-purple-100 text-purple-800 border-purple-200",Expert:"bg-orange-100 text-orange-800 border-orange-200",Master:"bg-red-100 text-red-800 border-red-200"};function XZ({spell:e,className:t,isExpanded:n=!1,onToggle:s,disableHover:r=!1}){var l;const i=GZ[e.school]||oa,o=()=>{s==null||s()};return a.jsxs(he,{className:t,expanded:n,onToggle:o,disableHover:r,children:[a.jsx(he.Header,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(i,{className:"w-5 h-5 text-muted-foreground"}),a.jsx("h3",{className:"text-primary font-semibold text-lg",children:e.name}),a.jsx("span",{className:"ml-auto transition-transform duration-200 text-muted-foreground",children:a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 8l4 4 4-4"})})})]})}),a.jsx(he.Summary,{children:a.jsxs("div",{className:"px-4 py-2 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 7v14"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"})]}),a.jsx("span",{children:e.school})]}),a.jsx(K,{variant:"secondary",className:YZ[e.level]||"",children:e.level})]}),a.jsx(ze,{text:e.description,className:"text-sm text-muted-foreground mb-3",as:"p"})]})}),a.jsx(he.Details,{children:a.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[e.hasEffects&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Effects"}),a.jsx("div",{className:"space-y-2",children:e.effects.map((c,u)=>a.jsxs("div",{className:"p-2 rounded bg-muted border text-sm",children:[a.jsx(ze,{text:c.description,className:"text-muted-foreground mb-2",as:"p"}),a.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[c.magnitude>0&&a.jsxs("span",{children:["Magnitude: ",c.magnitude]}),c.duration>0&&a.jsxs("span",{children:["Duration: ",c.duration,"s"]}),c.area>0&&a.jsxs("span",{children:["Area: ",c.area,"ft"]})]})]},u))})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Statistics"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Magicka Cost:"}),a.jsxs("span",{className:"font-medium",children:[e.magickaCost," MP"]})]}),e.totalMagnitude>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Magnitude:"}),a.jsx("span",{className:"font-medium",children:e.totalMagnitude})]}),e.maxDuration>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Max Duration:"}),a.jsxs("span",{className:"font-medium",children:[e.maxDuration,"s"]})]}),e.maxArea>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Max Area:"}),a.jsxs("span",{className:"font-medium",children:[e.maxArea,"ft"]})]})]})]}),(e.tome||((l=e.vendors)==null?void 0:l.length))&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Additional Info"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[e.tome&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Tome:"}),a.jsx("span",{children:e.tome})]}),e.vendors&&e.vendors.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Vendors:"}),a.jsx("span",{children:e.vendors.join(", ")})]})]})]}),e.tags&&e.tags.length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((c,u)=>a.jsx(K,{variant:"outline",className:"text-xs",children:c},u))})]})]})})]})}const WZ=({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="card"})=>{const i=e.originalData;if(!i)return console.warn("SpellSearchCard: Missing spell data for item:",e),a.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[a.jsx("h3",{className:"font-semibold",children:"Spell not found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});if(!i.name||!i.editorId)return console.warn("SpellSearchCard: Invalid spell data structure:",i),a.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[a.jsx("h3",{className:"font-semibold",children:"Invalid spell data"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const o=$.useCallback(()=>{s&&s()},[s]);return a.jsx(XZ,{spell:i,isExpanded:n,onToggle:o,className:t})},KZ=({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"})=>{const i=e.originalData;if(!i||!i.name)return console.warn("RecipeSearchCard: Missing or invalid recipe data for item:",e),a.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[a.jsx("h3",{className:"font-semibold",children:"Recipe not found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const o=Xe.addComputedProperties(i),l=$.useCallback(()=>{s&&s()},[s]);return a.jsx(tv,{recipe:o,variant:r==="list"?"compact":"default",isSelected:!1,onClick:l,showEffects:!0,showIngredients:!0,className:t})};function Ew({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){switch(e.type){case"race":return a.jsx(UZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"skill":return a.jsx(qZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"trait":return a.jsx(ZZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"birthsign":return a.jsx(LZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"destiny":return a.jsx($Z,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"religion":return a.jsx(VZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"perk":return a.jsx(FZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"spell":return a.jsx(WZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"perk-reference":return a.jsx(HZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"recipe":return a.jsx(KZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});default:return a.jsx(zZ,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r})}}function QZ({item:e}){return a.jsx("div",{className:`w-full border-2 rounded-lg p-4 ${e.color} transition-all duration-200 hover:shadow-lg`,style:{minHeight:`${e.height}px`},"data-testid":`test-card-${e.id}`,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:e.title}),a.jsxs("span",{className:"text-xs text-gray-500",children:["#",e.id.slice(-6)]})]}),a.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((t,n)=>a.jsx("span",{className:"px-2 py-1 text-xs bg-white/50 rounded-full text-gray-700 border",children:t},n))}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Height: ",e.height,"px"]})]})})}const _w={Alteration:s3,Conjuration:Ex,Destruction:il,Illusion:al,Restoration:Os,Mysticism:oa},JZ={Alteration:"bg-blue-500 text-white",Conjuration:"bg-purple-500 text-white",Destruction:"bg-red-500 text-white",Illusion:"bg-indigo-500 text-white",Restoration:"bg-green-500 text-white",Mysticism:"bg-yellow-500 text-white"},Aw={Novice:1,Apprentice:2,Adept:3,Expert:4,Master:5},eG={sm:"w-6 h-6 text-sm",md:"w-8 h-8 text-base",lg:"w-10 h-10 text-lg",xl:"w-12 h-12 text-xl","2xl":"w-16 h-16 text-2xl"},tG={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"};let Hh=null;function nG(){return Hh||(Hh=new MZ),Hh}function nv(){const[e,t]=g.useState(!1),[n,s]=g.useState(!1),[r,i]=g.useState(null),o=bi(N=>N.data),l=yr(N=>N.data),c=wi(N=>N.data),u=fl(N=>N.data),d=yi(N=>N.data),f=dl(N=>N.data),m=vi(N=>N.data),h=rr(N=>N.data),p=Wi(N=>N.data),{allPerks:v}=D_(),b=nG(),x=g.useCallback(async(N,S,k)=>{if(S!=null&&S.length)try{const E=k(S);await b.addToIndex(N,E)}catch(E){console.error(`Failed to index ${N}:`,E)}},[b]);g.useEffect(()=>{o!=null&&o.length&&x("skills",o,b.transformSkillsToSearchable)},[o,x]),g.useEffect(()=>{l!=null&&l.length&&x("races",l,b.transformRacesToSearchable)},[l,x]),g.useEffect(()=>{c!=null&&c.length&&x("traits",c,b.transformTraitsToSearchable)},[c,x]),g.useEffect(()=>{u!=null&&u.length&&x("religions",u,b.transformReligionsToSearchable)},[u,x]),g.useEffect(()=>{d!=null&&d.length&&x("birthsigns",d,b.transformBirthsignsToSearchable)},[d,x]),g.useEffect(()=>{f!=null&&f.length&&x("destinyNodes",f,b.transformDestinyNodesToSearchable)},[f,x]),g.useEffect(()=>{m!=null&&m.length&&x("perkTrees",m,b.transformPerkTreesToSearchable)},[m,x]),g.useEffect(()=>{h!=null&&h.length&&x("recipes",h,b.transformRecipesToSearchable)},[h,x]),g.useEffect(()=>{v!=null&&v.length&&x("perk-references",v,b.transformPerkReferencesToSearchable)},[v,x]),g.useEffect(()=>{p!=null&&p.length&&x("spells",p,b.transformSpellsToSearchable)},[p,x]),g.useEffect(()=>{((o==null?void 0:o.length)||(l==null?void 0:l.length)||(c==null?void 0:c.length)||(u==null?void 0:u.length)||(d==null?void 0:d.length)||(f==null?void 0:f.length)||(m==null?void 0:m.length)||(h==null?void 0:h.length)||(v==null?void 0:v.length)||(p==null?void 0:p.length))&&b.hasIndexedData()&&(b.rebuildSearchIndex(),t(!0))},[o,l,c,u,d,f,m,h,v,p,b]);const y=g.useCallback((N,S)=>N.trim()?b.search(N,S):[],[b]),w=g.useCallback(()=>b.getAvailableFilters(),[b]),j=g.useCallback(()=>b.getSearchableItems(),[b]);return{isReady:e,isIndexing:n,error:r,search:y,getAvailableFilters:w,getSearchableItems:j}}function Fh(e,t){return e.length!==t.length?!1:e.every((n,s)=>n===t[s])}function Tw(e){var t,n,s;return{tags:((t=e.get("tags"))==null?void 0:t.split(",").filter(Boolean))||[],types:((n=e.get("types"))==null?void 0:n.split(",").filter(Boolean))||[],categories:((s=e.get("categories"))==null?void 0:s.split(",").filter(Boolean))||[],viewMode:e.get("view")||"grid"}}function sv(){const[e,t]=XD(),n=g.useRef(!1),s=g.useRef(""),r=g.useRef(null),i=Tw(e),[o,l]=g.useState({types:i.types,categories:i.categories,tags:i.tags}),[c,u]=g.useState(i.viewMode);g.useEffect(()=>{if(n.current)return;const v=e.toString();if(v===s.current)return;s.current=v;const b=Tw(e);Fh(b.types,o.types)||l(x=>({...x,types:b.types})),Fh(b.categories,o.categories)||l(x=>({...x,categories:b.categories})),Fh(b.tags,o.tags)||l(x=>({...x,tags:b.tags})),b.viewMode!==c&&u(b.viewMode)},[e,o.types,o.categories,o.tags,c]),g.useEffect(()=>{r.current&&clearTimeout(r.current),n.current=!0;const v=new URLSearchParams;o.types.length>0&&v.set("types",o.types.join(",")),o.categories.length>0&&v.set("categories",o.categories.join(",")),o.tags.length>0&&v.set("tags",o.tags.join(",")),c!=="grid"&&v.set("view",c),t(v,{replace:!0}),r.current=setTimeout(()=>{n.current=!1},10)},[o,c,t]),g.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]);const d=g.useCallback(v=>{l(b=>({...b,...v}))},[]),f=g.useCallback(v=>{l(b=>({...b,tags:b.tags.includes(v)?b.tags:[...b.tags,v]}))},[]),m=g.useCallback(v=>{l(b=>({...b,tags:b.tags.filter(x=>x!==v)}))},[]),h=g.useCallback(()=>{l({types:[],categories:[],tags:[]})},[]),p=g.useCallback(v=>{u(v)},[]);return{activeFilters:o,setActiveFilters:d,addTag:f,removeTag:m,clearFilters:h,viewMode:c,setViewMode:p}}function rv(){const{search:e,getAvailableFilters:t,isReady:n,getSearchableItems:s}=nv(),{activeFilters:r}=sv(),i=g.useMemo(()=>s().length,[s]),o=g.useMemo(()=>{if(!n)return[];if(!(r.tags.length>0||r.types.length>0||r.categories.length>0))return s().map(p=>({item:p,score:1,matches:[],highlights:[]}));const d=r.tags.join(" "),f={...r,tags:[]};return e(d||"*",f)},[n,e,r,s]),l=g.useMemo(()=>n?t():{types:[],categories:[],tags:[]},[n,t,i]),c=g.useMemo(()=>{const u={};return o.forEach(d=>{const f=d.item.type;u[f]=(u[f]||0)+1,d.item.category&&(u[`category:${d.item.category}`]=(u[`category:${d.item.category}`]||0)+1),d.item.tags.forEach(m=>{u[`tag:${m}`]=(u[`tag:${m}`]||0)+1})}),u},[o]);return{searchResults:o,availableFilters:l,resultCounts:c}}function sG(){const{searchResults:e,resultCounts:t}=rv();sv();const n=g.useMemo(()=>e,[e]),s=g.useMemo(()=>rG(n,"relevance"),[n]),r=g.useMemo(()=>s.map(AZ),[s]),i=g.useMemo(()=>e.length,[e]),o=g.useMemo(()=>{const l={};return e.forEach(c=>{const u=c.item.type;l[u]||(l[u]=[]),l[u].push(c)}),l},[e]);return{filteredResults:n,sortedResults:s,playerCreationItems:r,resultCounts:t,totalResults:i,resultsByType:o}}function rG(e,t){const n=[...e];switch(t){case"relevance":return n;case"name":return n.sort((s,r)=>s.item.name.localeCompare(r.item.name));case"type":return n.sort((s,r)=>{const i=s.item.type.localeCompare(r.item.type);return i!==0?i:s.item.name.localeCompare(r.item.name)});default:return n}}function aG({activeFilters:e,onFiltersChange:t,onClearFilters:n,availableFilters:s,resultCount:r,onTagSelect:i,onTagRemove:o,selectedTags:l,className:c}){const u=e.types.length>0||e.categories.length>0||e.tags.length>0,d=h=>{const p=e.types.includes(h)?e.types.filter(v=>v!==h):[...e.types,h];t({types:p})},m=[{id:"fuzzy-search",name:"Search All",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:(s.categories||[]).filter(h=>h&&typeof h.label=="string").map(h=>({id:`category-${h.value}`,label:String(h.label),value:h.value,category:"Categories",description:`${h.count} item${h.count!==1?"s":""}`}))},{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:(s.tags||[]).filter(h=>h&&typeof h.label=="string").map(h=>({id:`tag-${h.value}`,label:String(h.label),value:h.value,category:"Tags",description:`${h.count} item${h.count!==1?"s":""}`}))}];return a.jsxs("div",{className:H("space-y-4",c),children:[a.jsx("div",{className:"space-y-2",children:a.jsx(ka,{categories:m,onSelect:i,onCustomSearch:i})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("span",{className:"text-sm font-medium",children:"Record Types"})}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.types.map(h=>a.jsxs(q,{variant:e.types.includes(h.value)?"default":"outline",size:"sm",onClick:()=>d(h.value),className:"text-xs",children:[h.label,a.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",h.count,")"]})]},h.value))})]}),l.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Active Filters"}),a.jsx(q,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Clear All"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>a.jsxs(K,{variant:"secondary",className:"text-xs",children:[h.category,": ",h.label,a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>o(h.id),className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",children:a.jsx(Dt,{className:"h-3 w-3"})})]},h.id))})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[a.jsxs("span",{children:[r," result",r!==1?"s":""," found"]}),u&&a.jsx(q,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Clear Filters"})]})]})}function L_({items:e,keyExtractor:t,renderItem:n,loadMore:s,hasMore:r=!0,columns:i=3,gap:o=12,maxColumnWidth:l,className:c=""}){const[u,d]=g.useState(0),f=g.useRef(null),m=g.useCallback(()=>l&&u>0?Math.max(1,Math.floor(u/l)):i,[i,l,u]);g.useEffect(()=>{const p=()=>{f.current&&d(f.current.offsetWidth)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),g.useEffect(()=>{var b;if(!s||!r)return;const p=new IntersectionObserver(x=>{x.forEach(y=>{y.isIntersecting&&s&&s()})},{threshold:.1}),v=(b=f.current)==null?void 0:b.lastElementChild;return v&&p.observe(v),()=>p.disconnect()},[s,r,e.length]);const h=g.useCallback(()=>{const p=m(),v=Array.from({length:p},()=>[]);return e.forEach((b,x)=>{const y=x%p,w=t(b);v[y].push(a.jsx("div",{style:{width:"100%",marginBottom:`${o}px`},children:n(b)},w))}),v.map((b,x)=>a.jsx("div",{style:{width:`calc(${100/p}% - ${o/2}px)`,marginRight:x<p-1?`${o}px`:0},children:b},x))},[e,t,n,m,o]);return e.length===0?a.jsx("div",{className:`text-center py-12 ${c}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No items to display"})}):a.jsx("div",{ref:f,className:c,children:a.jsx("div",{style:{display:"flex",width:"100%"},children:h()})})}function iG({items:e,className:t,viewMode:n="grid",onViewModeChange:s}){const[r,i]=g.useState(new Set);g.useEffect(()=>{if(n==="grid"){const l=new Set(e.map(c=>c.id));i(l)}},[n,e]);const o=l=>{if(n==="grid")return;const c=new Set(r);c.has(l)?c.delete(l):c.add(l),i(c)};return e.length===0?a.jsx("div",{className:`text-center py-12 ${t}`,children:a.jsx("p",{className:"text-muted-foreground",children:"No results found"})}):a.jsxs("div",{className:t,children:[s&&a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.length," result",e.length!==1?"s":""," found"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(q,{variant:n==="grid"?"default":"outline",size:"sm",onClick:()=>s("grid"),className:"flex items-center gap-2",children:[a.jsx(k4,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(q,{variant:n==="list"?"default":"outline",size:"sm",onClick:()=>s("list"),className:"flex items-center gap-2",children:[a.jsx(pi,{className:"h-4 w-4"}),"List"]})]})]}),n==="grid"?a.jsx(L_,{items:e,keyExtractor:l=>l.id,renderItem:l=>a.jsx(Ew,{item:l,isExpanded:!0,onToggle:()=>{},viewMode:"grid"}),columns:3,gap:16,maxColumnWidth:400}):a.jsx("div",{className:"space-y-2",children:e.map(l=>{const c=r.has(l.id);return a.jsx(Ew,{item:l,isExpanded:c,onToggle:()=>o(l.id),viewMode:"list"},l.id)})})]})}function oG({className:e,placeholder:t="Search skills, races, traits, religions..."}){const n=lt(),{isReady:s}=nv(),{availableFilters:r}=rv(),o=[{id:"fuzzy-search",name:"Search All",placeholder:t,options:r.types.map(c=>({id:`type-${c.value}`,label:c.label,value:c.value,category:"Search All",description:`${c.count} ${c.label}${c.count!==1?"s":""}`}))}],l=c=>{if(typeof c=="string")n(`/search?tags=${encodeURIComponent(c)}`);else if(c.id.startsWith("type-")){const u=c.value;n(`/search?types=${encodeURIComponent(u)}`)}else n(`/search?tags=${encodeURIComponent(c.value)}`)};return s?a.jsx("div",{className:H("flex items-center gap-2",e),children:a.jsx("div",{className:"flex-1",children:a.jsx(ak,{categories:o,onSelect:l,onCustomSearch:l,placeholder:t})})}):a.jsx("div",{className:H("flex items-center gap-2",e),children:a.jsx("div",{className:"flex-1 h-10 bg-muted animate-pulse rounded-md"})})}function Uh({title:e,description:t,children:n}){return a.jsxs("div",{className:"bg-background",children:[a.jsx("div",{className:"border-b border-border bg-card/50",children:a.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a.jsx(Ni,{className:"text-3xl font-bold text-primary mb-2",children:e}),t&&a.jsx(be,{className:"text-muted-foreground max-w-2xl",children:t})]})}),a.jsx("div",{className:"container mx-auto px-4 py-6",children:n})]})}function lG(){const{isReady:e,isIndexing:t,error:n}=nv(),{activeFilters:s,setActiveFilters:r,clearFilters:i,addTag:o,removeTag:l}=sv(),{availableFilters:c,searchResults:u}=rv(),{totalResults:d}=sG(),[f,m]=g.useState([]),[h,p]=g.useState("grid");g.useEffect(()=>{const N=[];s.tags.forEach(S=>{N.push({id:`custom-${S}`,label:S,value:S,category:"Search All"})}),s.categories.forEach(S=>{N.push({id:`category-${S}`,label:S,value:S,category:"Categories"})}),m(N)},[s.tags,s.categories]);const v=N=>{let S;typeof N=="string"?S={id:`custom-${N}`,label:N,value:N,category:"Search All"}:S={id:`${N.category}-${N.id}`,label:N.label,value:N.value,category:N.category},f.some(k=>k.value===S.value&&k.category===S.category)||(m(k=>[...k,S]),S.category==="Categories"?r({categories:[...s.categories,S.value]}):S.category==="Tags"?r({tags:[...s.tags,S.value]}):o(S.value))},b=N=>{const S=f.find(k=>k.id===N);S&&(m(k=>k.filter(E=>E.id!==N)),S.category==="Categories"?r({categories:s.categories.filter(k=>k!==S.value)}):S.category==="Tags"?r({tags:s.tags.filter(k=>k!==S.value)}):l(S.value))},x=()=>{m([]),i()},y=N=>{p(N)};if(!e)return a.jsx(Uh,{title:"Search",description:"Building search index...",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[t?a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}):null,a.jsx("p",{className:"text-muted-foreground",children:t?"Building search index...":"Loading search..."})]})})});if(n)return a.jsx(Uh,{title:"Search",description:"Error loading search",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-destructive mb-4",children:["Failed to load search: ",n]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"text-primary hover:underline",children:"Try again"})]})})});const w=f.length>0?"Search Results":"Search",j=f.length>0?`Found ${d} result${d!==1?"s":""} for ${f.length} filter${f.length!==1?"s":""}`:"Search across all skills, races, traits, religions, birthsigns, destiny nodes, and perk references";return a.jsxs(Uh,{title:w,description:j,children:[a.jsx("div",{className:"mb-6",children:a.jsx(aG,{activeFilters:s,onFiltersChange:r,onClearFilters:x,availableFilters:c,resultCount:d,onTagSelect:v,onTagRemove:b,selectedTags:f})}),a.jsx("div",{className:"w-full",children:a.jsx(iG,{items:u.map(N=>N.item),viewMode:h,onViewModeChange:y})})]})}function cG(){return a.jsx(lG,{})}const Mw=["bg-red-100 border-red-300","bg-blue-100 border-blue-300","bg-green-100 border-green-300","bg-yellow-100 border-yellow-300","bg-purple-100 border-purple-300","bg-pink-100 border-pink-300","bg-indigo-100 border-indigo-300","bg-gray-100 border-gray-300"],Rw=["Mystical Artifact","Ancient Scroll","Enchanted Weapon","Potion of Power","Crystal Shard","Runic Tablet","Magical Tome","Arcane Relic","Divine Essence","Ethereal Fragment"],Dw=["A powerful artifact imbued with ancient magic.","Scroll containing forgotten spells and rituals.","Weapon blessed by the gods themselves.","Brew that grants temporary supernatural abilities.","Crystal that resonates with magical energy.","Tablet inscribed with mysterious runes.","Book of forbidden knowledge and power.","Relic from a bygone era of magic.","Essence of divine power and wisdom.","Fragment of pure ethereal energy."],uG=["magic","ancient","powerful","rare","legendary","enchanted","divine","mystical","forbidden","sacred"];function zw(e){const t=[];for(let n=0;n<e;n++){const s=`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r=Math.floor(Math.random()*200)+100,i=Mw[Math.floor(Math.random()*Mw.length)],o=Rw[Math.floor(Math.random()*Rw.length)],l=Dw[Math.floor(Math.random()*Dw.length)],c=[],u=Math.floor(Math.random()*3)+1,d=[...uG].sort(()=>.5-Math.random());c.push(...d.slice(0,u)),t.push({id:s,title:o,description:l,height:r,color:i,tags:c})}return t}function dG(){const[e,t]=$.useState(()=>zw(50)),[n,s]=$.useState(!1),[r,i]=$.useState(!0),o=$.useCallback(async()=>{if(n||!r)return;s(!0),await new Promise(d=>setTimeout(d,500));const u=zw(20);t(d=>[...d,...u]),e.length+u.length>=200&&i(!1),s(!1)},[n,r,e.length]),l=u=>u.id,c=u=>a.jsx(QZ,{item:u});return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"VirtualMasonryGrid Demo"}),a.jsxs("p",{className:"text-muted-foreground",children:["Testing InfiniteGrid implementation with ",e.length," items"]}),n&&a.jsx("div",{className:"mt-2 text-sm text-blue-600",children:"Loading more items..."}),!r&&a.jsx("div",{className:"mt-2 text-sm text-green-600",children:"All items loaded (200 total)"})]}),a.jsx(L_,{items:e,keyExtractor:l,renderItem:c,loadMore:o,hasMore:r,columns:3,gap:16,className:"min-h-screen"})]})}function $_(){const[e,t]=g.useState({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[n,s]=g.useState({skills:[],categories:[],prerequisites:[],tags:[]});g.useCallback(h=>{s(h)},[]);const r=g.useCallback(h=>{t(p=>({...p,skills:[...p.skills,h]}))},[]),i=g.useCallback(h=>{t(p=>({...p,skills:p.skills.filter(v=>v!==h)}))},[]);g.useCallback(h=>{t(p=>({...p,categories:[...p.categories,h]}))},[]),g.useCallback(h=>{t(p=>({...p,categories:p.categories.filter(v=>v!==h)}))},[]),g.useCallback(h=>{t(p=>({...p,prerequisites:[...p.prerequisites,h]}))},[]),g.useCallback(h=>{t(p=>({...p,prerequisites:p.prerequisites.filter(v=>v!==h)}))},[]),g.useCallback(h=>{t(p=>({...p,tags:[...p.tags,h]}))},[]);const o=g.useCallback(h=>{t(p=>({...p,tags:p.tags.filter(v=>v!==h)}))},[]);g.useCallback(h=>{t(p=>({...p,rankLevel:h}))},[]),g.useCallback(h=>{t(p=>({...p,rootOnly:h}))},[]);const l=g.useCallback(h=>{t(p=>({...p,minLevel:h}))},[]),c=g.useCallback(h=>{t(p=>({...p,searchQuery:h}))},[]),u=g.useCallback(()=>{t({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0})},[]),d=g.useMemo(()=>{const h=[];return e.skills.forEach(p=>{const v=n.skills.find(b=>b.id===p);v&&h.push({id:`skill-${p}`,type:"skill",value:p,label:v.name})}),e.categories.forEach(p=>{h.push({id:`category-${p}`,type:"category",value:p,label:p})}),e.prerequisites.forEach(p=>{h.push({id:`prerequisite-${p}`,type:"prerequisite",value:p,label:p})}),e.tags.forEach(p=>{h.push({id:`tag-${p}`,type:"tag",value:p,label:p})}),e.rankLevel!=="all"&&h.push({id:"rank-level",type:"rankLevel",value:e.rankLevel,label:e.rankLevel==="single"?"Single Rank":"Multi Rank"}),e.rootOnly&&h.push({id:"root-only",type:"rootOnly",value:"true",label:"Root Perks Only"}),e.minLevel!==void 0&&h.push({id:"min-level",type:"minLevel",value:e.minLevel.toString(),label:`Level ${e.minLevel}+`}),h},[e,n]);g.useMemo(()=>{const h=[];return n.skills.forEach(p=>{h.push({id:`skill-${p.id}`,label:p.name,value:p.id,category:"Skills",type:"skill"})}),n.tags.forEach(p=>{h.push({id:`tag-${p}`,label:p,value:p,category:"Tags",type:"tag"})}),h},[n]);const f=g.useCallback(h=>{if(typeof h=="string")c(h);else if(`${h.category}${h.id}`,h.label,h.value,h.category,h.category==="Skill Trees")r(h.value);else if(h.category==="Minimum Level"){const p=parseInt(h.value);isNaN(p)||l(p)}else h.category==="Fuzzy Search"&&c(h.value)},[r,c,l]),m=g.useCallback(h=>{const p=d.find(v=>v.id===h);if(p)p.type==="skill"?i(p.value):p.type==="tag"?o(p.value):p.type==="minLevel"&&l(void 0);else if(h.startsWith("custom-")){const v=h.replace("custom-","");e.searchQuery===v&&c("")}},[d,i,o,l,e.searchQuery,c]);return{selectedTags:[...d.map(h=>({id:h.id,label:h.label,value:h.value,category:h.type})),...e.searchQuery?[{id:`custom-${e.searchQuery}`,label:e.searchQuery,value:e.searchQuery,category:"Fuzzy Search"}]:[]],viewMode:"grid",searchQuery:e.searchQuery,onTagSelect:f,onTagRemove:m,onClearTags:u,onViewModeChange:()=>{},onSearchChange:c}}class fG{constructor(t,n){Ge(this,"perkNodes");Ge(this,"buildState");this.perkNodes=t,this.buildState=n}transformToPlayerCreationItem(t){var o,l,c,u,d,f;const n=((l=(o=this.buildState.perks)==null?void 0:o.selected)==null?void 0:l[t.skillTree])||[],s=((u=(c=this.buildState.perks)==null?void 0:c.ranks)==null?void 0:u[t.skillTree])||{},r=n.includes(t.edid),i=s[t.edid]||0;return{id:t.edid,name:t.name,description:((f=(d=t.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",category:t.category,tags:t.tags,isSelected:r,originalPerk:t,skillTree:t.skillTree,skillTreeName:t.skillTreeName,isRoot:t.isRoot,hasChildren:t.hasChildren,prerequisites:t.prerequisites,connections:t.connections,totalRanks:t.totalRanks,currentRank:i,isAvailable:this.isPerkAvailable(t),minLevel:t.minLevel}}isPerkAvailable(t){var s,r;if(t.isRoot)return!0;const n=((r=(s=this.buildState.perks)==null?void 0:s.selected)==null?void 0:r[t.skillTree])||[];return t.prerequisites.every(i=>n.includes(i))}applyFilters(t,n){let s=[...t];if(!n)return s;if(n.skills&&n.skills.length>0&&(s=s.filter(r=>n.skills.includes(r.skillTree))),n.categories&&n.categories.length>0&&(s=s.filter(r=>n.categories.includes(r.category))),n.prerequisites&&n.prerequisites.length>0&&(s=s.filter(r=>n.prerequisites.some(i=>r.prerequisites.includes(i)))),n.tags&&n.tags.length>0&&(s=s.filter(r=>n.tags.some(i=>r.tags.includes(i)))),n.minLevel!==void 0&&(s=s.filter(r=>(r.minLevel||0)>=n.minLevel)),n.rankLevel!=="all"&&(s=s.filter(r=>n.rankLevel==="single"?r.totalRanks===1:n.rankLevel==="multi"?r.totalRanks>1:!0)),n.rootOnly&&(s=s.filter(r=>r.isRoot)),n.searchQuery&&n.searchQuery.trim()){const r=n.searchQuery.trim(),i=s.map(u=>{var d,f;return{id:u.edid,name:u.name,description:((f=(d=u.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",searchableText:u.searchableText,tags:u.tags,category:u.category,skillTree:u.skillTreeName,originalNode:u}}),o={keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0};s=new Kt(i,o).search(r).map(u=>u.item.originalNode)}return s}getAvailableFilters(t){const n=new Set,s=new Set,r=new Set,i=new Set;return t.forEach(o=>{n.add(o.skillTree),s.add(o.category),o.tags.forEach(l=>r.add(l)),o.prerequisites.forEach(l=>i.add(l))}),{skills:Array.from(n),categories:Array.from(s),tags:Array.from(r),prerequisites:Array.from(i)}}sortPerks(t,n="name"){const s=[...t];switch(n){case"name":return s.sort((r,i)=>r.name.localeCompare(i.name));case"skill":return s.sort((r,i)=>r.skillTreeName.localeCompare(i.skillTreeName));case"category":return s.sort((r,i)=>r.category.localeCompare(i.category));case"rank":return s.sort((r,i)=>i.totalRanks-r.totalRanks);case"prerequisites":return s.sort((r,i)=>r.prerequisites.length-i.prerequisites.length);default:return s}}}function mG(e,t){const{build:n}=ht(),s=g.useMemo(()=>new fG(e,n),[e,n]),r=g.useMemo(()=>s.applyFilters(e,t||{skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[s,e,t]),i=g.useMemo(()=>r.map(l=>s.transformToPlayerCreationItem(l)),[r,s]),o=g.useMemo(()=>s.getAvailableFilters(e),[s,e]);return{model:s,filteredNodes:r,perkItems:i,availableFilters:o}}function hG(){const{allPerks:e,skillTrees:t,categories:n,tags:s,loading:r,error:i}=Dm(),{selectedTags:o,searchQuery:l}=$_(),c=g.useMemo(()=>{const v=o.filter(w=>w.category==="skill").map(w=>w.value),b=o.filter(w=>w.category==="tag").map(w=>w.value),x=o.filter(w=>w.category==="minLevel").map(w=>parseInt(w.value)).find(w=>!isNaN(w));return{skills:v,categories:[],prerequisites:[],tags:b,rankLevel:"all",rootOnly:!1,searchQuery:l||"",minLevel:x}},[o,l]),{filteredNodes:u,perkItems:d,availableFilters:f}=mG(e,c),m=g.useMemo(()=>{const v=[...new Set(e.map(y=>y.skillTreeName))],b=[...new Set(e.flatMap(y=>y.tags))],x=[...new Set(e.map(y=>y.minLevel||0))].sort((y,w)=>y-w);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:b.map(y=>({id:`keyword-${y}`,label:y,value:y,category:"Fuzzy Search",description:`Perks with ${y} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:v.map(y=>({id:`skill-${y}`,label:y,value:y,category:"Skill Trees",description:`Perks from ${y} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:x.map(y=>({id:`level-${y}`,label:`Level ${y}+`,value:y.toString(),category:"Minimum Level",description:`Perks requiring level ${y} or higher`}))}]},[e]),h=g.useMemo(()=>({totalPerks:e.length,filteredPerks:u.length,rootPerks:e.filter(v=>v.isRoot).length,multiRankPerks:e.filter(v=>v.totalRanks>1).length,singleRankPerks:e.filter(v=>v.totalRanks===1).length,skills:t.length,categories:n.length,tags:s.length}),[e,u,t,n,s]),p=g.useMemo(()=>{const v=new Map;return d.forEach(b=>{v.has(b.skillTree)||v.set(b.skillTree,[]),v.get(b.skillTree).push(b)}),Array.from(v.entries()).map(([b,x])=>{var y;return{skillId:b,skillName:((y=x[0])==null?void 0:y.skillTreeName)||b,perks:x,count:x.length}}).sort((b,x)=>b.skillName.localeCompare(x.skillName))},[d]);return g.useMemo(()=>{const v=new Map;return d.forEach(b=>{v.has(b.category||"")||v.set(b.category||"",[]),v.get(b.category||"").push(b)}),Array.from(v.entries()).map(([b,x])=>({category:b,perks:x,count:x.length})).sort((b,x)=>(b.category||"").localeCompare(x.category||""))},[d]),g.useMemo(()=>d.filter(v=>v.isSelected),[d]),g.useMemo(()=>d.filter(v=>v.isAvailable),[d]),g.useMemo(()=>d.filter(v=>v.isRoot),[d]),g.useMemo(()=>d.filter(v=>v.totalRanks>1),[d]),g.useMemo(()=>d.filter(v=>v.totalRanks===1),[d]),g.useMemo(()=>(v,b="name")=>{const x=[...v];switch(b){case"name":return x.sort((y,w)=>y.name.localeCompare(w.name));case"skill":return x.sort((y,w)=>y.skillTreeName.localeCompare(w.skillTreeName));case"category":return x.sort((y,w)=>(y.category||"").localeCompare(w.category||""));case"rank":return x.sort((y,w)=>w.totalRanks-y.totalRanks);case"prerequisites":return x.sort((y,w)=>y.prerequisites.length-w.prerequisites.length);case"selected":return x.sort((y,w)=>Number(w.isSelected)-Number(y.isSelected));default:return x}},[]),{filteredItems:d,groupedItems:Object.fromEntries(p.map(v=>[v.skillId,v.perks])),stats:{totalPerks:h.totalPerks,skillTrees:h.skills,multiRank:h.multiRankPerks,singleRank:h.singleRankPerks,withPrerequisites:e.filter(v=>v.prerequisites&&v.prerequisites.length>0).length},searchCategories:m,availableFilters:f,isLoading:r,error:i}}function gG(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u;return{id:l.edid,name:l.name,description:((u=(c=l.ranks[0])==null?void 0:c.description)==null?void 0:u.base)||"",searchableText:l.searchableText,tags:l.tags,category:l.category,skillTree:l.skillTreeName,originalPerk:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Kt(n,s),[n,s]),i=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredPerks:g.useMemo(()=>i.map(l=>l.item.originalPerk),[i]),searchResults:i,searchablePerks:n}}function pG(){const e=lt(),{build:t}=ht(),{allPerks:n,loading:s,error:r}=Dm(),[i,o]=g.useState("list"),c=(()=>{const S=[...new Set(n.map(C=>C.skillTreeName))],k=[...new Set(n.flatMap(C=>C.tags))],E=[...new Set(n.map(C=>C.minLevel||0))].sort((C,_)=>C-_);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:k.map(C=>({id:`keyword-${C}`,label:C,value:C,category:"Fuzzy Search",description:`Perks with ${C} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:S.map(C=>({id:`skill-${C}`,label:C,value:C,category:"Skill Trees",description:`Perks from ${C} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:E.map(C=>({id:`level-${C}`,label:`Level ${C}+`,value:C.toString(),category:"Minimum Level",description:`Perks requiring level ${C} or higher`}))}]})(),[u,d]=g.useState([]),f=S=>{let k;typeof S=="string"?k={id:`custom-${S}`,label:S,value:S,category:"Fuzzy Search"}:k={id:`${S.category}-${S.id}`,label:S.label,value:S.value,category:S.category},u.some(E=>E.value===k.value&&E.category===k.category)||d(E=>[...E,k])},m=S=>{d(k=>k.filter(E=>E.id!==S))},h=n.filter(S=>u.length===0?!0:u.every(k=>{switch(k.category){case"Fuzzy Search":return!0;case"Skill Trees":return S.skillTreeName===k.value;case"Minimum Level":const E=parseInt(k.value);return!isNaN(E)&&(S.minLevel||0)>=E;default:return!0}})),p=u.filter(S=>S.category==="Fuzzy Search").map(S=>S.value).join(" "),{filteredPerks:v}=gG(h,p),b=v.map(S=>({...z_(S,t),originalPerk:S})),[x,y]=g.useState(new Set),w=S=>{const k=new Set(x);if(i==="grid"){const C=b.findIndex(A=>A.id===S),P=Math.floor(C/3)*3,D=Math.min(P+3,b.length);b.slice(P,D).some(A=>k.has(A.id))?b.slice(P,D).forEach(A=>{k.delete(A.id)}):b.slice(P,D).forEach(A=>{k.add(A.id)})}else k.has(S)?k.delete(S):k.add(S);y(k)},j=()=>{d([])},N=S=>{o(S),y(new Set)};return s?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading perk data..."})]})}):r?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:r}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsx(cn,{title:"Perk References",description:"Browse and search all available perks. Find the perfect abilities for your character build.",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs(q,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"flex items-center gap-2",children:[a.jsx(Eg,{className:"h-4 w-4"}),"Back"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(ka,{categories:c,onSelect:f,onCustomSearch:f,className:"w-full"}),u.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:j,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx("svg",{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Clear All"]}),u.map(S=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(S.id),title:"Click to remove",children:[S.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},S.id))]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm text-muted-foreground",children:[b.length," perk",b.length!==1?"s":""," found"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(q,{variant:i==="grid"?"default":"outline",size:"sm",onClick:()=>N("grid"),className:"flex items-center gap-2",children:[a.jsx(ol,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(q,{variant:i==="list"?"default":"outline",size:"sm",onClick:()=>N("list"),className:"flex items-center gap-2",children:[a.jsx(pi,{className:"h-4 w-4"}),"List"]})]})]}),i==="grid"?a.jsx(nB,{columns:3,gap:"md",children:b.map(S=>a.jsx(vp,{item:S,isExpanded:x.has(S.id),onToggle:()=>w(S.id),viewMode:"grid"},S.id))}):a.jsx("div",{className:"space-y-2",children:b.map(S=>a.jsx(vp,{item:S,isExpanded:x.has(S.id),onToggle:()=>w(S.id),viewMode:"list"},S.id))})]})})}function Lw(){const{skills:e,loading:t,error:n,searchQuery:s,setSearchQuery:r,selectedCategory:i,setSelectedCategory:o,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:v}=h_(),{filteredItems:b,groupedItems:x,stats:y,isLoading:w,error:j,searchCategories:N}=hG(),{selectedTags:S,viewMode:k,searchQuery:E,onTagSelect:C,onTagRemove:_,onClearTags:P,onViewModeChange:D,onSearchChange:z}=$_();return t||w?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading data..."})]})}):n||j?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:n||j}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsx(cn,{title:"Skills & Perks",description:"Manage your character's skills and browse all available perks.",children:a.jsx("div",{className:"mb-6",children:a.jsxs(Si,{defaultValue:"builder",className:"w-full",children:[a.jsxs(ki,{className:"grid w-full grid-cols-2",children:[a.jsx(Vt,{value:"builder",children:"Perk Builder"}),a.jsx(Vt,{value:"reference",children:"Perk References"})]}),a.jsx(Wt,{value:"builder",className:"space-y-4",children:a.jsx(Yq,{skills:e,loading:t,error:n,searchQuery:s,onSearchChange:r,selectedCategory:i,onCategorySelect:o,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:v})}),a.jsx(Wt,{value:"reference",className:"space-y-4",children:a.jsx(pG,{items:b,groupedItems:x,stats:y,searchCategories:N,selectedTags:S,viewMode:k,searchQuery:E,onTagSelect:C,onTagRemove:_,onClearTags:P,onViewModeChange:D,onSearchChange:z})})]})})})}function Z(e,t,n){function s(l,c){var u;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(u=l._zod).traits??(u.traits=new Set),l._zod.traits.add(e),t(l,c);for(const d in o.prototype)d in l||Object.defineProperty(l,d,{value:o.prototype[d].bind(l)});l._zod.constr=o,l._zod.def=c}const r=(n==null?void 0:n.Parent)??Object;class i extends r{}Object.defineProperty(i,"name",{value:e});function o(l){var c;const u=n!=null&&n.Parent?new i:this;s(u,l),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:l=>{var c,u;return n!=null&&n.Parent&&l instanceof n.Parent?!0:(u=(c=l==null?void 0:l._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class Ac extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const P_={};function ci(e){return P_}function xG(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,r])=>t.indexOf(+s)===-1).map(([s,r])=>r)}function vG(e,t){return typeof t=="bigint"?t.toString():t}function O_(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function av(e){return e==null}function iv(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function yG(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,r=n>s?n:s,i=Number.parseInt(e.toFixed(r).replace(".","")),o=Number.parseInt(t.toFixed(r).replace(".",""));return i%o/10**r}function Ke(e,t,n){Object.defineProperty(e,t,{get(){{const s=n();return e[t]=s,s}},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function ov(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Dl(e){return JSON.stringify(e)}const B_=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function yp(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const bG=O_(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function bp(e){if(yp(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(yp(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const wG=new Set(["string","number","symbol"]);function zm(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ai(e,t,n){const s=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(s._zod.parent=e),s}function ce(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function jG(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const NG={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function SG(e,t){const n={},s=e._zod.def;for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(n[r]=s.shape[r])}return Ai(e,{...e._zod.def,shape:n,checks:[]})}function kG(e,t){const n={...e._zod.def.shape},s=e._zod.def;for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&delete n[r]}return Ai(e,{...e._zod.def,shape:n,checks:[]})}function CG(e,t){if(!bp(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return ov(this,"shape",s),s},checks:[]};return Ai(e,n)}function EG(e,t){return Ai(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return ov(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function _G(e,t,n){const s=t._zod.def.shape,r={...s};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(r[i]=e?new e({type:"optional",innerType:s[i]}):s[i])}else for(const i in s)r[i]=e?new e({type:"optional",innerType:s[i]}):s[i];return Ai(t,{...t._zod.def,shape:r,checks:[]})}function AG(e,t,n){const s=t._zod.def.shape,r={...s};if(n)for(const i in n){if(!(i in r))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(r[i]=new e({type:"nonoptional",innerType:s[i]}))}else for(const i in s)r[i]=new e({type:"nonoptional",innerType:s[i]});return Ai(t,{...t._zod.def,shape:r,checks:[]})}function Ql(e,t=0){var n;for(let s=t;s<e.issues.length;s++)if(((n=e.issues[s])==null?void 0:n.continue)!==!0)return!0;return!1}function lv(e,t){return t.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(e),n})}function Ju(e){return typeof e=="string"?e:e==null?void 0:e.message}function ui(e,t,n){var r,i,o,l,c,u;const s={...e,path:e.path??[]};if(!e.message){const d=Ju((o=(i=(r=e.inst)==null?void 0:r._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??Ju((l=t==null?void 0:t.error)==null?void 0:l.call(t,e))??Ju((c=n.customError)==null?void 0:c.call(n,e))??Ju((u=n.localeError)==null?void 0:u.call(n,e))??"Invalid input";s.message=d}return delete s.inst,delete s.continue,t!=null&&t.reportInput||delete s.input,s}function cv(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Tc(...e){const[t,n,s]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:s}:{...t}}const I_=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,vG,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},H_=Z("$ZodError",I_),F_=Z("$ZodError",I_,{Parent:Error});function TG(e,t=n=>n.message){const n={},s=[];for(const r of e.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):s.push(t(r));return{formErrors:s,fieldErrors:n}}function MG(e,t){const n=t||function(i){return i.message},s={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>r({issues:l}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)s._errors.push(n(o));else{let l=s,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return r(e),s}const RG=e=>(t,n,s,r)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new Ac;if(o.issues.length){const l=new((r==null?void 0:r.Err)??e)(o.issues.map(c=>ui(c,i,ci())));throw B_(l,r==null?void 0:r.callee),l}return o.value},DG=e=>async(t,n,s,r)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const l=new((r==null?void 0:r.Err)??e)(o.issues.map(c=>ui(c,i,ci())));throw B_(l,r==null?void 0:r.callee),l}return o.value},U_=e=>(t,n,s)=>{const r=s?{...s,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new Ac;return i.issues.length?{success:!1,error:new(e??H_)(i.issues.map(o=>ui(o,r,ci())))}:{success:!0,data:i.value}},zG=U_(F_),V_=e=>async(t,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},r);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>ui(o,r,ci())))}:{success:!0,data:i.value}},LG=V_(F_),$G=/^[cC][^\s-]{8,}$/,PG=/^[0-9a-z]+$/,OG=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,BG=/^[0-9a-vA-V]{20}$/,IG=/^[A-Za-z0-9]{27}$/,HG=/^[a-zA-Z0-9_-]{21}$/,FG=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,UG=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,$w=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,VG=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,qG="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function ZG(){return new RegExp(qG,"u")}const GG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,YG=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,XG=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,WG=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,KG=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,q_=/^[A-Za-z0-9_-]*$/,QG=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,JG=/^\+(?:[0-9]){6,14}[0-9]$/,Z_="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",eY=new RegExp(`^${Z_}$`);function G_(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function tY(e){return new RegExp(`^${G_(e)}$`)}function nY(e){const t=G_({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const s=`${t}(?:${n.join("|")})`;return new RegExp(`^${Z_}T(?:${s})$`)}const sY=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},rY=/^\d+$/,aY=/^-?\d+(?:\.\d+)?/i,iY=/true|false/i,oY=/^[^A-Z]*$/,lY=/^[^a-z]*$/,hn=Z("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Y_={number:"number",bigint:"bigint",object:"date"},X_=Z("$ZodCheckLessThan",(e,t)=>{hn.init(e,t);const n=Y_[typeof t.value];e._zod.onattach.push(s=>{const r=s._zod.bag,i=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:n,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),W_=Z("$ZodCheckGreaterThan",(e,t)=>{hn.init(e,t);const n=Y_[typeof t.value];e._zod.onattach.push(s=>{const r=s._zod.bag,i=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:n,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),cY=Z("$ZodCheckMultipleOf",(e,t)=>{hn.init(e,t),e._zod.onattach.push(n=>{var s;(s=n._zod.bag).multipleOf??(s.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):yG(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),uY=Z("$ZodCheckNumberFormat",(e,t)=>{var o;hn.init(e,t),t.format=t.format||"float64";const n=(o=t.format)==null?void 0:o.includes("int"),s=n?"int":"number",[r,i]=NG[t.format];e._zod.onattach.push(l=>{const c=l._zod.bag;c.format=t.format,c.minimum=r,c.maximum=i,n&&(c.pattern=rY)}),e._zod.check=l=>{const c=l.value;if(n){if(!Number.isInteger(c)){l.issues.push({expected:s,format:t.format,code:"invalid_type",input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}c<r&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),c>i&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:e})}}),dY=Z("$ZodCheckMaxLength",(e,t)=>{var n;hn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!av(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const r=s.value;if(r.length<=t.maximum)return;const o=cv(r);s.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),fY=Z("$ZodCheckMinLength",(e,t)=>{var n;hn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!av(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const r=s.value;if(r.length>=t.minimum)return;const o=cv(r);s.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),mY=Z("$ZodCheckLengthEquals",(e,t)=>{var n;hn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!av(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=s=>{const r=s.value,i=r.length;if(i===t.length)return;const o=cv(r),l=i>t.length;s.issues.push({origin:o,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),Lm=Z("$ZodCheckStringFormat",(e,t)=>{var n,s;hn.init(e,t),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),hY=Z("$ZodCheckRegex",(e,t)=>{Lm.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),gY=Z("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=oY),Lm.init(e,t)}),pY=Z("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=lY),Lm.init(e,t)}),xY=Z("$ZodCheckIncludes",(e,t)=>{hn.init(e,t);const n=zm(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=s,e._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),vY=Z("$ZodCheckStartsWith",(e,t)=>{hn.init(e,t);const n=new RegExp(`^${zm(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),yY=Z("$ZodCheckEndsWith",(e,t)=>{hn.init(e,t);const n=new RegExp(`.*${zm(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),bY=Z("$ZodCheckOverwrite",(e,t)=>{hn.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class wY{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(o=>o),r=Math.min(...s.map(o=>o.length-o.trimStart().length)),i=s.map(o=>o.slice(r)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,n=this==null?void 0:this.args,r=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...n,r.join(`
`))}}const jY={major:4,minor:0,patch:5},mt=Z("$ZodType",(e,t)=>{var r;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=jY;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const i of s)for(const o of i._zod.onattach)o(e);if(s.length===0)(n=e._zod).deferred??(n.deferred=[]),(r=e._zod.deferred)==null||r.push(()=>{e._zod.run=e._zod.parse});else{const i=(o,l,c)=>{let u=Ql(o),d;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(o))continue}else if(u)continue;const m=o.issues.length,h=f._zod.check(o);if(h instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Ac;if(d||h instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await h,o.issues.length!==m&&(u||(u=Ql(o,m)))});else{if(o.issues.length===m)continue;u||(u=Ql(o,m))}}return d?d.then(()=>o):o};e._zod.run=(o,l)=>{const c=e._zod.parse(o,l);if(c instanceof Promise){if(l.async===!1)throw new Ac;return c.then(u=>i(u,s,l))}return i(c,s,l)}}e["~standard"]={validate:i=>{var o;try{const l=zG(e,i);return l.success?{value:l.data}:{issues:(o=l.error)==null?void 0:o.issues}}catch{return LG(e,i).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),uv=Z("$ZodString",(e,t)=>{var n;mt.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??sY(e._zod.bag),e._zod.parse=(s,r)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),nt=Z("$ZodStringFormat",(e,t)=>{Lm.init(e,t),uv.init(e,t)}),NY=Z("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=UG),nt.init(e,t)}),SY=Z("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=$w(s))}else t.pattern??(t.pattern=$w());nt.init(e,t)}),kY=Z("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=VG),nt.init(e,t)}),CY=Z("$ZodURL",(e,t)=>{nt.init(e,t),e._zod.check=n=>{try{const s=n.value,r=new URL(s),i=r.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:QG.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!s.endsWith("/")&&i.endsWith("/")?n.value=i.slice(0,-1):n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),EY=Z("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=ZG()),nt.init(e,t)}),_Y=Z("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=HG),nt.init(e,t)}),AY=Z("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=$G),nt.init(e,t)}),TY=Z("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=PG),nt.init(e,t)}),MY=Z("$ZodULID",(e,t)=>{t.pattern??(t.pattern=OG),nt.init(e,t)}),RY=Z("$ZodXID",(e,t)=>{t.pattern??(t.pattern=BG),nt.init(e,t)}),DY=Z("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=IG),nt.init(e,t)}),zY=Z("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=nY(t)),nt.init(e,t)}),LY=Z("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=eY),nt.init(e,t)}),$Y=Z("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=tY(t)),nt.init(e,t)}),PY=Z("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=FG),nt.init(e,t)}),OY=Z("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=GG),nt.init(e,t),e._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv4"})}),BY=Z("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=YG),nt.init(e,t),e._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),IY=Z("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=XG),nt.init(e,t)}),HY=Z("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=WG),nt.init(e,t),e._zod.check=n=>{const[s,r]=n.value.split("/");try{if(!r)throw new Error;const i=Number(r);if(`${i}`!==r)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function K_(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const FY=Z("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=KG),nt.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{K_(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function UY(e){if(!q_.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return K_(n)}const VY=Z("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=q_),nt.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{UY(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),qY=Z("$ZodE164",(e,t)=>{t.pattern??(t.pattern=JG),nt.init(e,t)});function ZY(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[s]=n;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const GY=Z("$ZodJWT",(e,t)=>{nt.init(e,t),e._zod.check=n=>{ZY(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Q_=Z("$ZodNumber",(e,t)=>{mt.init(e,t),e._zod.pattern=e._zod.bag.pattern??aY,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const i=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...i?{received:i}:{}}),n}}),YY=Z("$ZodNumber",(e,t)=>{uY.init(e,t),Q_.init(e,t)}),XY=Z("$ZodBoolean",(e,t)=>{mt.init(e,t),e._zod.pattern=iY,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),n}}),WY=Z("$ZodUnknown",(e,t)=>{mt.init(e,t),e._zod.parse=n=>n}),KY=Z("$ZodNever",(e,t)=>{mt.init(e,t),e._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function Pw(e,t,n){e.issues.length&&t.issues.push(...lv(n,e.issues)),t.value[n]=e.value}const QY=Z("$ZodArray",(e,t)=>{mt.init(e,t),e._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),n;n.value=Array(r.length);const i=[];for(let o=0;o<r.length;o++){const l=r[o],c=t.element._zod.run({value:l,issues:[]},s);c instanceof Promise?i.push(c.then(u=>Pw(u,n,o))):Pw(c,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function ed(e,t,n){e.issues.length&&t.issues.push(...lv(n,e.issues)),t.value[n]=e.value}function Ow(e,t,n,s){e.issues.length?s[n]===void 0?n in s?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...lv(n,e.issues)):e.value===void 0?n in s&&(t.value[n]=void 0):t.value[n]=e.value}const JY=Z("$ZodObject",(e,t)=>{mt.init(e,t);const n=O_(()=>{const f=Object.keys(t.shape);for(const h of f)if(!(t.shape[h]instanceof mt))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const m=jG(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});Ke(e._zod,"propValues",()=>{const f=t.shape,m={};for(const h in f){const p=f[h]._zod;if(p.values){m[h]??(m[h]=new Set);for(const v of p.values)m[h].add(v)}}return m});const s=f=>{const m=new wY(["shape","payload","ctx"]),h=n.value,p=y=>{const w=Dl(y);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};m.write("const input = payload.value;");const v=Object.create(null);let b=0;for(const y of h.keys)v[y]=`key_${b++}`;m.write("const newResult = {}");for(const y of h.keys)if(h.optionalKeys.has(y)){const w=v[y];m.write(`const ${w} = ${p(y)};`);const j=Dl(y);m.write(`
        if (${w}.issues.length) {
          if (input[${j}] === undefined) {
            if (${j} in input) {
              newResult[${j}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${w}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${j}, ...iss.path] : [${j}],
              }))
            );
          }
        } else if (${w}.value === undefined) {
          if (${j} in input) newResult[${j}] = undefined;
        } else {
          newResult[${j}] = ${w}.value;
        }
        `)}else{const w=v[y];m.write(`const ${w} = ${p(y)};`),m.write(`
          if (${w}.issues.length) payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Dl(y)}, ...iss.path] : [${Dl(y)}]
          })));`),m.write(`newResult[${Dl(y)}] = ${w}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const x=m.compile();return(y,w)=>x(f,y,w)};let r;const i=yp,o=!P_.jitless,c=o&&bG.value,u=t.catchall;let d;e._zod.parse=(f,m)=>{d??(d=n.value);const h=f.value;if(!i(h))return f.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),f;const p=[];if(o&&c&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)r||(r=s(t.shape)),f=r(f,m);else{f.value={};const w=d.shape;for(const j of d.keys){const N=w[j],S=N._zod.run({value:h[j],issues:[]},m),k=N._zod.optin==="optional"&&N._zod.optout==="optional";S instanceof Promise?p.push(S.then(E=>k?Ow(E,f,j,h):ed(E,f,j))):k?Ow(S,f,j,h):ed(S,f,j)}}if(!u)return p.length?Promise.all(p).then(()=>f):f;const v=[],b=d.keySet,x=u._zod,y=x.def.type;for(const w of Object.keys(h)){if(b.has(w))continue;if(y==="never"){v.push(w);continue}const j=x.run({value:h[w],issues:[]},m);j instanceof Promise?p.push(j.then(N=>ed(N,f,w))):ed(j,f,w)}return v.length&&f.issues.push({code:"unrecognized_keys",keys:v,input:h,inst:e}),p.length?Promise.all(p).then(()=>f):f}});function Bw(e,t,n,s){for(const r of e)if(r.issues.length===0)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(r=>r.issues.map(i=>ui(i,s,ci())))}),t}const eX=Z("$ZodUnion",(e,t)=>{mt.init(e,t),Ke(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),Ke(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),Ke(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),Ke(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${n.map(s=>iv(s.source)).join("|")})$`)}}),e._zod.parse=(n,s)=>{let r=!1;const i=[];for(const o of t.options){const l=o._zod.run({value:n.value,issues:[]},s);if(l instanceof Promise)i.push(l),r=!0;else{if(l.issues.length===0)return l;i.push(l)}}return r?Promise.all(i).then(o=>Bw(o,n,e,s)):Bw(i,n,e,s)}}),tX=Z("$ZodIntersection",(e,t)=>{mt.init(e,t),e._zod.parse=(n,s)=>{const r=n.value,i=t.left._zod.run({value:r,issues:[]},s),o=t.right._zod.run({value:r,issues:[]},s);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,u])=>Iw(n,c,u)):Iw(n,i,o)}});function wp(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(bp(e)&&bp(t)){const n=Object.keys(t),s=Object.keys(e).filter(i=>n.indexOf(i)!==-1),r={...e,...t};for(const i of s){const o=wp(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};r[i]=o.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<e.length;s++){const r=e[s],i=t[s],o=wp(r,i);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Iw(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Ql(e))return e;const s=wp(t.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const nX=Z("$ZodEnum",(e,t)=>{mt.init(e,t);const n=xG(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(s=>wG.has(typeof s)).map(s=>typeof s=="string"?zm(s):s.toString()).join("|")})$`),e._zod.parse=(s,r)=>{const i=s.value;return e._zod.values.has(i)||s.issues.push({code:"invalid_value",values:n,input:i,inst:e}),s}}),sX=Z("$ZodTransform",(e,t)=>{mt.init(e,t),e._zod.parse=(n,s)=>{const r=t.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(o=>(n.value=o,n));if(r instanceof Promise)throw new Ac;return n.value=r,n}}),rX=Z("$ZodOptional",(e,t)=>{mt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Ke(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Ke(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${iv(n.source)})?$`):void 0}),e._zod.parse=(n,s)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,s):n.value===void 0?n:t.innerType._zod.run(n,s)}),aX=Z("$ZodNullable",(e,t)=>{mt.init(e,t),Ke(e._zod,"optin",()=>t.innerType._zod.optin),Ke(e._zod,"optout",()=>t.innerType._zod.optout),Ke(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${iv(n.source)}|null)$`):void 0}),Ke(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,s)=>n.value===null?n:t.innerType._zod.run(n,s)}),iX=Z("$ZodDefault",(e,t)=>{mt.init(e,t),e._zod.optin="optional",Ke(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>Hw(i,t)):Hw(r,t)}});function Hw(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const oX=Z("$ZodPrefault",(e,t)=>{mt.init(e,t),e._zod.optin="optional",Ke(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,s))}),lX=Z("$ZodNonOptional",(e,t)=>{mt.init(e,t),Ke(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>Fw(i,e)):Fw(r,e)}});function Fw(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const cX=Z("$ZodCatch",(e,t)=>{mt.init(e,t),e._zod.optin="optional",Ke(e._zod,"optout",()=>t.innerType._zod.optout),Ke(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(o=>ui(o,s,ci()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(i=>ui(i,s,ci()))},input:n.value}),n.issues=[]),n)}}),uX=Z("$ZodPipe",(e,t)=>{mt.init(e,t),Ke(e._zod,"values",()=>t.in._zod.values),Ke(e._zod,"optin",()=>t.in._zod.optin),Ke(e._zod,"optout",()=>t.out._zod.optout),Ke(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,s)=>{const r=t.in._zod.run(n,s);return r instanceof Promise?r.then(i=>Uw(i,t,s)):Uw(r,t,s)}});function Uw(e,t,n){return Ql(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const dX=Z("$ZodReadonly",(e,t)=>{mt.init(e,t),Ke(e._zod,"propValues",()=>t.innerType._zod.propValues),Ke(e._zod,"values",()=>t.innerType._zod.values),Ke(e._zod,"optin",()=>t.innerType._zod.optin),Ke(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(Vw):Vw(r)}});function Vw(e){return e.value=Object.freeze(e.value),e}const fX=Z("$ZodCustom",(e,t)=>{hn.init(e,t),mt.init(e,t),e._zod.parse=(n,s)=>n,e._zod.check=n=>{const s=n.value,r=t.fn(s);if(r instanceof Promise)return r.then(i=>qw(i,n,s,e));qw(r,n,s,e)}});function qw(e,t,n,s){if(!e){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),t.issues.push(Tc(r))}}class mX{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const s=n[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const s={...this.get(n)??{}};return delete s.id,{...s,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function hX(){return new mX}const td=hX();function gX(e,t){return new e({type:"string",...ce(t)})}function pX(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ce(t)})}function Zw(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ce(t)})}function xX(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ce(t)})}function vX(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ce(t)})}function yX(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ce(t)})}function bX(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ce(t)})}function wX(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ce(t)})}function jX(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ce(t)})}function NX(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ce(t)})}function SX(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ce(t)})}function kX(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ce(t)})}function CX(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ce(t)})}function EX(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ce(t)})}function _X(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ce(t)})}function AX(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ce(t)})}function TX(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ce(t)})}function MX(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ce(t)})}function RX(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ce(t)})}function DX(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ce(t)})}function zX(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ce(t)})}function LX(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ce(t)})}function $X(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ce(t)})}function PX(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ce(t)})}function OX(e,t){return new e({type:"string",format:"date",check:"string_format",...ce(t)})}function BX(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ce(t)})}function IX(e,t){return new e({type:"string",format:"duration",check:"string_format",...ce(t)})}function HX(e,t){return new e({type:"number",checks:[],...ce(t)})}function FX(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...ce(t)})}function UX(e,t){return new e({type:"boolean",...ce(t)})}function VX(e){return new e({type:"unknown"})}function qX(e,t){return new e({type:"never",...ce(t)})}function Gw(e,t){return new X_({check:"less_than",...ce(t),value:e,inclusive:!1})}function Vh(e,t){return new X_({check:"less_than",...ce(t),value:e,inclusive:!0})}function Yw(e,t){return new W_({check:"greater_than",...ce(t),value:e,inclusive:!1})}function qh(e,t){return new W_({check:"greater_than",...ce(t),value:e,inclusive:!0})}function Xw(e,t){return new cY({check:"multiple_of",...ce(t),value:e})}function J_(e,t){return new dY({check:"max_length",...ce(t),maximum:e})}function pf(e,t){return new fY({check:"min_length",...ce(t),minimum:e})}function eA(e,t){return new mY({check:"length_equals",...ce(t),length:e})}function ZX(e,t){return new hY({check:"string_format",format:"regex",...ce(t),pattern:e})}function GX(e){return new gY({check:"string_format",format:"lowercase",...ce(e)})}function YX(e){return new pY({check:"string_format",format:"uppercase",...ce(e)})}function XX(e,t){return new xY({check:"string_format",format:"includes",...ce(t),includes:e})}function WX(e,t){return new vY({check:"string_format",format:"starts_with",...ce(t),prefix:e})}function KX(e,t){return new yY({check:"string_format",format:"ends_with",...ce(t),suffix:e})}function fu(e){return new bY({check:"overwrite",tx:e})}function QX(e){return fu(t=>t.normalize(e))}function JX(){return fu(e=>e.trim())}function eW(){return fu(e=>e.toLowerCase())}function tW(){return fu(e=>e.toUpperCase())}function nW(e,t,n){return new e({type:"array",element:t,...ce(n)})}function sW(e,t,n){return new e({type:"custom",check:"custom",fn:t,...ce(n)})}const rW=Z("ZodISODateTime",(e,t)=>{zY.init(e,t),ct.init(e,t)});function aW(e){return PX(rW,e)}const iW=Z("ZodISODate",(e,t)=>{LY.init(e,t),ct.init(e,t)});function oW(e){return OX(iW,e)}const lW=Z("ZodISOTime",(e,t)=>{$Y.init(e,t),ct.init(e,t)});function cW(e){return BX(lW,e)}const uW=Z("ZodISODuration",(e,t)=>{PY.init(e,t),ct.init(e,t)});function dW(e){return IX(uW,e)}const fW=(e,t)=>{H_.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>MG(e,n)},flatten:{value:n=>TG(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},$m=Z("ZodError",fW,{Parent:Error}),mW=RG($m),hW=DG($m),gW=U_($m),pW=V_($m),Nt=Z("ZodType",(e,t)=>(mt.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),e.clone=(n,s)=>Ai(e,n,s),e.brand=()=>e,e.register=(n,s)=>(n.add(e,s),e),e.parse=(n,s)=>mW(e,n,s,{callee:e.parse}),e.safeParse=(n,s)=>gW(e,n,s),e.parseAsync=async(n,s)=>hW(e,n,s,{callee:e.parseAsync}),e.safeParseAsync=async(n,s)=>pW(e,n,s),e.spa=e.safeParseAsync,e.refine=(n,s)=>e.check(cK(n,s)),e.superRefine=n=>e.check(uK(n)),e.overwrite=n=>e.check(fu(n)),e.optional=()=>Jw(e),e.nullable=()=>ej(e),e.nullish=()=>Jw(ej(e)),e.nonoptional=n=>tK(e,n),e.array=()=>di(e),e.or=n=>VW([e,n]),e.and=n=>ZW(e,n),e.transform=n=>tj(e,XW(n)),e.default=n=>QW(e,n),e.prefault=n=>eK(e,n),e.catch=n=>sK(e,n),e.pipe=n=>tj(e,n),e.readonly=()=>iK(e),e.describe=n=>{const s=e.clone();return td.add(s,{description:n}),s},Object.defineProperty(e,"description",{get(){var n;return(n=td.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return td.get(e);const s=e.clone();return td.add(s,n[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),tA=Z("_ZodString",(e,t)=>{uv.init(e,t),Nt.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...s)=>e.check(ZX(...s)),e.includes=(...s)=>e.check(XX(...s)),e.startsWith=(...s)=>e.check(WX(...s)),e.endsWith=(...s)=>e.check(KX(...s)),e.min=(...s)=>e.check(pf(...s)),e.max=(...s)=>e.check(J_(...s)),e.length=(...s)=>e.check(eA(...s)),e.nonempty=(...s)=>e.check(pf(1,...s)),e.lowercase=s=>e.check(GX(s)),e.uppercase=s=>e.check(YX(s)),e.trim=()=>e.check(JX()),e.normalize=(...s)=>e.check(QX(...s)),e.toLowerCase=()=>e.check(eW()),e.toUpperCase=()=>e.check(tW())}),xW=Z("ZodString",(e,t)=>{uv.init(e,t),tA.init(e,t),e.email=n=>e.check(pX(vW,n)),e.url=n=>e.check(wX(yW,n)),e.jwt=n=>e.check($X(zW,n)),e.emoji=n=>e.check(jX(bW,n)),e.guid=n=>e.check(Zw(Ww,n)),e.uuid=n=>e.check(xX(nd,n)),e.uuidv4=n=>e.check(vX(nd,n)),e.uuidv6=n=>e.check(yX(nd,n)),e.uuidv7=n=>e.check(bX(nd,n)),e.nanoid=n=>e.check(NX(wW,n)),e.guid=n=>e.check(Zw(Ww,n)),e.cuid=n=>e.check(SX(jW,n)),e.cuid2=n=>e.check(kX(NW,n)),e.ulid=n=>e.check(CX(SW,n)),e.base64=n=>e.check(DX(MW,n)),e.base64url=n=>e.check(zX(RW,n)),e.xid=n=>e.check(EX(kW,n)),e.ksuid=n=>e.check(_X(CW,n)),e.ipv4=n=>e.check(AX(EW,n)),e.ipv6=n=>e.check(TX(_W,n)),e.cidrv4=n=>e.check(MX(AW,n)),e.cidrv6=n=>e.check(RX(TW,n)),e.e164=n=>e.check(LX(DW,n)),e.datetime=n=>e.check(aW(n)),e.date=n=>e.check(oW(n)),e.time=n=>e.check(cW(n)),e.duration=n=>e.check(dW(n))});function Qt(e){return gX(xW,e)}const ct=Z("ZodStringFormat",(e,t)=>{nt.init(e,t),tA.init(e,t)}),vW=Z("ZodEmail",(e,t)=>{kY.init(e,t),ct.init(e,t)}),Ww=Z("ZodGUID",(e,t)=>{NY.init(e,t),ct.init(e,t)}),nd=Z("ZodUUID",(e,t)=>{SY.init(e,t),ct.init(e,t)}),yW=Z("ZodURL",(e,t)=>{CY.init(e,t),ct.init(e,t)}),bW=Z("ZodEmoji",(e,t)=>{EY.init(e,t),ct.init(e,t)}),wW=Z("ZodNanoID",(e,t)=>{_Y.init(e,t),ct.init(e,t)}),jW=Z("ZodCUID",(e,t)=>{AY.init(e,t),ct.init(e,t)}),NW=Z("ZodCUID2",(e,t)=>{TY.init(e,t),ct.init(e,t)}),SW=Z("ZodULID",(e,t)=>{MY.init(e,t),ct.init(e,t)}),kW=Z("ZodXID",(e,t)=>{RY.init(e,t),ct.init(e,t)}),CW=Z("ZodKSUID",(e,t)=>{DY.init(e,t),ct.init(e,t)}),EW=Z("ZodIPv4",(e,t)=>{OY.init(e,t),ct.init(e,t)}),_W=Z("ZodIPv6",(e,t)=>{BY.init(e,t),ct.init(e,t)}),AW=Z("ZodCIDRv4",(e,t)=>{IY.init(e,t),ct.init(e,t)}),TW=Z("ZodCIDRv6",(e,t)=>{HY.init(e,t),ct.init(e,t)}),MW=Z("ZodBase64",(e,t)=>{FY.init(e,t),ct.init(e,t)}),RW=Z("ZodBase64URL",(e,t)=>{VY.init(e,t),ct.init(e,t)}),DW=Z("ZodE164",(e,t)=>{qY.init(e,t),ct.init(e,t)}),zW=Z("ZodJWT",(e,t)=>{GY.init(e,t),ct.init(e,t)}),nA=Z("ZodNumber",(e,t)=>{Q_.init(e,t),Nt.init(e,t),e.gt=(s,r)=>e.check(Yw(s,r)),e.gte=(s,r)=>e.check(qh(s,r)),e.min=(s,r)=>e.check(qh(s,r)),e.lt=(s,r)=>e.check(Gw(s,r)),e.lte=(s,r)=>e.check(Vh(s,r)),e.max=(s,r)=>e.check(Vh(s,r)),e.int=s=>e.check(Kw(s)),e.safe=s=>e.check(Kw(s)),e.positive=s=>e.check(Yw(0,s)),e.nonnegative=s=>e.check(qh(0,s)),e.negative=s=>e.check(Gw(0,s)),e.nonpositive=s=>e.check(Vh(0,s)),e.multipleOf=(s,r)=>e.check(Xw(s,r)),e.step=(s,r)=>e.check(Xw(s,r)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function qa(e){return HX(nA,e)}const LW=Z("ZodNumberFormat",(e,t)=>{YY.init(e,t),nA.init(e,t)});function Kw(e){return FX(LW,e)}const $W=Z("ZodBoolean",(e,t)=>{XY.init(e,t),Nt.init(e,t)});function PW(e){return UX($W,e)}const OW=Z("ZodUnknown",(e,t)=>{WY.init(e,t),Nt.init(e,t)});function Qw(){return VX(OW)}const BW=Z("ZodNever",(e,t)=>{KY.init(e,t),Nt.init(e,t)});function IW(e){return qX(BW,e)}const HW=Z("ZodArray",(e,t)=>{QY.init(e,t),Nt.init(e,t),e.element=t.element,e.min=(n,s)=>e.check(pf(n,s)),e.nonempty=n=>e.check(pf(1,n)),e.max=(n,s)=>e.check(J_(n,s)),e.length=(n,s)=>e.check(eA(n,s)),e.unwrap=()=>e.element});function di(e,t){return nW(HW,e,t)}const FW=Z("ZodObject",(e,t)=>{JY.init(e,t),Nt.init(e,t),Ke(e,"shape",()=>t.shape),e.keyof=()=>GW(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Qw()}),e.loose=()=>e.clone({...e._zod.def,catchall:Qw()}),e.strict=()=>e.clone({...e._zod.def,catchall:IW()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>CG(e,n),e.merge=n=>EG(e,n),e.pick=n=>SG(e,n),e.omit=n=>kG(e,n),e.partial=(...n)=>_G(sA,e,n[0]),e.required=(...n)=>AG(rA,e,n[0])});function Rr(e,t){const n={type:"object",get shape(){return ov(this,"shape",{...e}),this.shape},...ce(t)};return new FW(n)}const UW=Z("ZodUnion",(e,t)=>{eX.init(e,t),Nt.init(e,t),e.options=t.options});function VW(e,t){return new UW({type:"union",options:e,...ce(t)})}const qW=Z("ZodIntersection",(e,t)=>{tX.init(e,t),Nt.init(e,t)});function ZW(e,t){return new qW({type:"intersection",left:e,right:t})}const jp=Z("ZodEnum",(e,t)=>{nX.init(e,t),Nt.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(s,r)=>{const i={};for(const o of s)if(n.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new jp({...t,checks:[],...ce(r),entries:i})},e.exclude=(s,r)=>{const i={...t.entries};for(const o of s)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new jp({...t,checks:[],...ce(r),entries:i})}});function GW(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new jp({type:"enum",entries:n,...ce(t)})}const YW=Z("ZodTransform",(e,t)=>{sX.init(e,t),Nt.init(e,t),e._zod.parse=(n,s)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(Tc(i,n.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=e),o.continue??(o.continue=!0),n.issues.push(Tc(o))}};const r=t.transform(n.value,n);return r instanceof Promise?r.then(i=>(n.value=i,n)):(n.value=r,n)}});function XW(e){return new YW({type:"transform",transform:e})}const sA=Z("ZodOptional",(e,t)=>{rX.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Jw(e){return new sA({type:"optional",innerType:e})}const WW=Z("ZodNullable",(e,t)=>{aX.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ej(e){return new WW({type:"nullable",innerType:e})}const KW=Z("ZodDefault",(e,t)=>{iX.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function QW(e,t){return new KW({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const JW=Z("ZodPrefault",(e,t)=>{oX.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function eK(e,t){return new JW({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const rA=Z("ZodNonOptional",(e,t)=>{lX.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tK(e,t){return new rA({type:"nonoptional",innerType:e,...ce(t)})}const nK=Z("ZodCatch",(e,t)=>{cX.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function sK(e,t){return new nK({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const rK=Z("ZodPipe",(e,t)=>{uX.init(e,t),Nt.init(e,t),e.in=t.in,e.out=t.out});function tj(e,t){return new rK({type:"pipe",in:e,out:t})}const aK=Z("ZodReadonly",(e,t)=>{dX.init(e,t),Nt.init(e,t)});function iK(e){return new aK({type:"readonly",innerType:e})}const oK=Z("ZodCustom",(e,t)=>{fX.init(e,t),Nt.init(e,t)});function lK(e){const t=new hn({check:"custom"});return t._zod.check=e,t}function cK(e,t={}){return sW(oK,e,t)}function uK(e){const t=lK(n=>(n.addIssue=s=>{if(typeof s=="string")n.issues.push(Tc(s,n.value,t._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(Tc(r))}},e(n.value,n)));return t}const dK=Rr({type:Qt(),id:Qt()}),fK=Rr({skill:Qt(),level:qa()}),mK=Rr({skillLevel:fK.optional(),items:di(dK).optional()}),hK=Rr({base:Qt(),subtext:Qt()}),gK=Rr({rank:qa(),edid:Qt(),name:Qt(),description:hK,prerequisites:mK}),pK=Rr({x:qa(),y:qa(),horizontal:qa(),vertical:qa()}),xK=Rr({parents:di(Qt()),children:di(Qt())}),vK=Rr({edid:Qt(),name:Qt(),ranks:di(gK),totalRanks:qa(),connections:xK,isRoot:PW(),position:pK}),yK=Rr({treeId:Qt(),treeName:Qt(),treeDescription:Qt(),category:Qt(),perks:di(vK)});di(yK);function bK(e){return e.length===0?{minX:0,maxX:0,minY:0,maxY:0}:e.reduce((t,n)=>({minX:Math.min(t.minX,n.x),maxX:Math.max(t.maxX,n.x),minY:Math.min(t.minY,n.y),maxY:Math.max(t.maxY,n.y)}),{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0})}const wK=(e,t)=>({perkNode:n=>a.jsx(KE,{...n,onTogglePerk:e,onRankChange:t})}),Zh={cellWidth:240,cellHeight:140,nodeWidth:140,nodeHeight:80,gridGap:40,padding:80};function jK(e,t,n){const{x:s,y:r,horizontal:i,vertical:o}=e,l=t.maxX-s+t.minX,c=-i,u=t.maxY-r+t.minY,d=-o,f=(l-t.minX)*n.cellWidth+(l-t.minX)*n.gridGap+n.padding+n.cellWidth/2,m=(u-t.minY)*n.cellHeight+(u-t.minY)*n.gridGap+n.padding+n.cellHeight/2,h=c*(n.cellWidth/2-n.nodeWidth/2),p=d*(n.cellHeight/2-n.nodeHeight/2),v=f+h,b=m+p;return{x:v,y:b,gridX:l,gridY:u,horizontal:c,vertical:d}}function NK(e,t,n,s){const r=e-s.padding,i=t-s.padding,o=Math.floor(r/(s.cellWidth+s.gridGap)),l=Math.floor(i/(s.cellHeight+s.gridGap)),c=o*s.cellWidth+o*s.gridGap+s.padding+s.cellWidth/2,u=l*s.cellHeight+l*s.gridGap+s.padding+s.cellHeight/2,d=e-c,f=t-u,m=s.cellWidth/2-s.nodeWidth/2,h=s.cellHeight/2-s.nodeHeight/2,p=Math.max(-1,Math.min(1,d/m)),v=Math.max(-1,Math.min(1,f/h)),b=n.maxX-o+n.minX,x=n.maxY-l+n.minY,y=-p,w=-v;return{x:e,y:t,gridX:b,gridY:x,horizontal:y,vertical:w}}function SK(e,t,n){const s=Math.ceil(Math.sqrt(t)),r=Math.floor(e/s),i=e%s,o=i*(n.cellWidth+n.gridGap)+n.padding+n.cellWidth/2,l=r*(n.cellHeight+n.gridGap)+n.padding+n.cellHeight/2;return{x:o,y:l,gridX:i,gridY:r,horizontal:0,vertical:0}}function kK({tree:e,onTogglePerk:t,onRankChange:n,selectedPerks:s,className:r}){const[i,o]=$.useState(null),[l,c]=g.useState(new Map),[u,d]=g.useState(!1),[f,m]=g.useState(!1),[h,p]=g.useState(null),v=g.useMemo(()=>{if(!e)return null;const T=XE(e);return T.success?T.data:(console.error("Invalid perk tree data:",T.error),null)},[e]);$.useEffect(()=>{if(!v){c(new Map);return}console.log("Loading saved positions for tree:",v.treeId),console.log("Tree perks count:",v.perks.length),console.log("Tree perks:",v.perks.map(T=>({edid:T.edid,name:T.name}))),d(!0),WE(v.treeId).then(T=>{if(console.log("Loaded saved positions:",T?"Found":"Not found"),T){const L=cw(v.treeId,T);console.log("Loaded positions count:",L.size),console.log("Loaded positions keys:",Array.from(L.keys())),c(L)}else c(new Map)}).catch(T=>{console.warn("Failed to load saved positions:",T),c(new Map)}).finally(()=>{d(!1)})},[v==null?void 0:v.treeId]);const b=g.useMemo(()=>wK(t,n),[t,n]),x=g.useMemo(()=>{if(!v||u)return new Map;const T=new Map,L=v.perks.map(B=>B.position).filter(B=>B!==void 0);let M={minX:0,maxX:0,minY:0,maxY:0};L.length>0&&(M=bK(L)),p(M);let R=0;return v.perks.forEach(B=>{const F=l.get(B.edid);if(F){T.set(B.edid,F);return}if(B.position){const V=jK(B.position,M,Zh);T.set(B.edid,V);return}const I=SK(R,v.perks.length,Zh);T.set(B.edid,I),R++}),T},[v,l,u]),y=g.useMemo(()=>{if(!v)return{saved:0,avif:0,default:0,total:0};let T=0,L=0,M=0;const R=v.perks.find(I=>I.edid==="LoreRimTrapper_Rank1"),B=v.perks.find(I=>I.edid==="LoreRimTrapper_Rank2"),F=v.perks.find(I=>I.edid==="LoreRimTrapper_Rank3");if(R){console.log("Found Trapper perk:",R);const I=l.get("LoreRimTrapper_Rank1");console.log("Trapper saved position:",I),console.log("Trapper embedded position:",R.position),console.log("Trapper connections:",R.connections)}else console.log("Trapper perk NOT found in tree!");if(B){console.log("Found Poisoned Clamps perk:",B);const I=l.get("LoreRimTrapper_Rank2");console.log("Poisoned Clamps saved position:",I),console.log("Poisoned Clamps embedded position:",B.position),console.log("Poisoned Clamps connections:",B.connections)}else console.log("Poisoned Clamps perk NOT found in tree!");if(F){console.log("Found Salt on the Wound perk:",F);const I=l.get("LoreRimTrapper_Rank3");console.log("Salt on the Wound saved position:",I),console.log("Salt on the Wound embedded position:",F.position)}else console.log("Salt on the Wound perk NOT found in tree!");return v.perks.forEach(I=>{l.get(I.edid)?T++:I.position?L++:M++}),{saved:T,avif:L,default:M,total:v.perks.length}},[v,l]),w=g.useMemo(()=>{if(!v||u)return[];const T=v.perks.map(L=>{var V,G,J,ie;const M=L.edid,R=x.get(M)||{x:0,y:0},B=((G=(V=L.connections)==null?void 0:V.children)==null?void 0:G.length)>0||!1,F=((ie=(J=L.connections)==null?void 0:J.parents)==null?void 0:ie.length)===0||!1,I=!l.get(M)&&!L.position;return M.includes("LoreRimTrapper")&&(console.log(`Node ${M} position:`,R),console.log(`Node ${M} hasChildren:`,B),console.log(`Node ${M} isRoot:`,F),console.log(`Node ${M} hasNoPosition:`,I)),{id:M,type:"perkNode",position:{x:R.x,y:R.y},draggable:f||I,data:{...L,selected:!1,hasChildren:B,isRoot:F,hasNoPosition:I}}});return console.log("Total nodes created:",T.length),console.log("Trapper-related nodes:",T.filter(L=>L.id.includes("LoreRimTrapper"))),T},[v,x,f,u,l]),j=g.useMemo(()=>{var M,R,B;if(!v)return[];const T=[],L=v.perks.find(F=>F.edid==="LoreRimTrapper_Rank1");return L&&(console.log("Trapper children connections:",(M=L.connections)==null?void 0:M.children),(B=(R=L.connections)==null?void 0:R.children)==null||B.forEach(F=>{const I=v.perks.some(V=>V.edid===F);console.log(`Trapper child ${F} exists:`,I)})),v.perks.forEach(F=>{var V;const I=F.edid;(V=F.connections)!=null&&V.children&&F.connections.children.forEach(G=>{if(G===I)return;v.perks.some(ie=>ie.edid===G)&&T.push({id:`${I}-${G}`,source:I,target:G,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),console.log("Total edges created:",T.length),console.log("Edge connections:",T.map(F=>`${F.source} -> ${F.target}`)),T},[v]),[N,S,k]=UE(w),[E,C,_]=VE(j);$.useEffect(()=>{S(w)},[w,S]),$.useEffect(()=>{v&&S(T=>T.map(L=>{const M=s.find(B=>B.edid===L.id),R=M!==void 0;return{...L,draggable:f,data:{...L.data,selected:R,currentRank:(M==null?void 0:M.currentRank)||0}}}))},[s,S,v,f]),$.useEffect(()=>{C(j)},[j,C]),$.useEffect(()=>{v&&N.length>0&&i&&setTimeout(()=>{i.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[v==null?void 0:v.treeId,i]);const P=g.useCallback(T=>C(L=>U0(T,L)),[C]),D=g.useCallback((T,L)=>{if(!f||!h)return;const M=NK(L.position.x,L.position.y,h,Zh),R=new Map(l);R.set(L.id,M),c(R)},[f,l,h]),z=g.useCallback(()=>{if(!v)return;const T=sq(v,x);rq(T)},[v,x]),A=g.useCallback(T=>{var R;const L=(R=T.target.files)==null?void 0:R[0];if(!L||!v)return;const M=new FileReader;M.onload=B=>{var F;try{const I=JSON.parse((F=B.target)==null?void 0:F.result);if(I.treeId===v.treeId){const V=cw(v.treeId,I);c(V)}else alert("Position file does not match current tree!")}catch(I){alert("Error loading position file!"),console.error("Error loading positions:",I)}},M.readAsText(L)},[v]),O=g.useCallback(()=>{m(!f)},[f]);return v?a.jsxs("div",{className:`w-full h-full bg-background rounded-lg border overflow-auto ${r||""}`,children:[a.jsx("div",{className:"p-4 border-b bg-muted/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Experimental AVIF Grid Canvas (Mirrored + Enhanced Spacing)"}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Bottom-up tree with left-right mirroring using enhanced grid spacing",l.size>0&&!u&&a.jsx("span",{className:"text-green-600 ml-2",children:" Using saved positions"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 text-xs text-blue-600",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),"Loading positions..."]}),!u&&y.total>0&&a.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 text-xs bg-muted/30 rounded border",children:[a.jsxs("span",{className:"text-green-600",children:["Saved: ",y.saved]}),a.jsxs("span",{className:"text-blue-600",children:["AVIF: ",y.avif]}),a.jsxs("span",{className:"text-red-600",children:["Default: ",y.default]}),a.jsxs("span",{className:"text-muted-foreground",children:["Total: ",y.total]})]}),a.jsx("button",{onClick:O,className:`px-3 py-1 text-xs rounded border ${f?"bg-blue-500 text-white border-blue-500":"bg-background text-foreground border-border hover:bg-muted"}`,children:f?"Exit Edit":"Edit Mode"}),a.jsx("button",{onClick:z,className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted",children:"Save Positions"}),a.jsxs("label",{className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted cursor-pointer",children:["Load Positions",a.jsx("input",{type:"file",accept:".json",onChange:A,className:"hidden"})]})]})]})}),a.jsx("div",{className:"w-full h-full min-h-[400px]",style:{zIndex:Lt.CONTENT},children:a.jsxs(X0,{nodes:N,edges:E,onNodesChange:k,onEdgesChange:_,onConnect:P,onInit:o,onNodeDragStop:D,nodeTypes:b,nodesDraggable:f,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},style:{backgroundColor:"hsl(var(--background))"},children:[a.jsx(YE,{color:"hsl(var(--muted-foreground))",gap:20,size:1,style:{backgroundColor:"hsl(var(--background))"}}),a.jsx(ZE,{})]})})]}):a.jsx("div",{className:`flex items-center justify-center p-8 text-muted-foreground ${r||""}`,children:a.jsx("p",{children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function CK(){var m;const{skills:e,selectedSkill:t,perkTree:n,selectedPerks:s,availablePerks:r,onSkillSelect:i,onPerkSelect:o,onPerkRankChange:l,loading:c,error:u}=h_(),{build:d}=ht(),f=g.useMemo(()=>!n||!s.length?[]:s.map(h=>{var b,x;const p=n.perks.find(y=>y.edid===h);if(!p)return null;const v=((x=(b=d.perks)==null?void 0:b.ranks)==null?void 0:x[h])||0;return{...p,selectedRank:v}}).filter(Boolean),[n,s,(m=d.perks)==null?void 0:m.ranks]);return c?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Loading skills..."})}):u?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsxs("p",{className:"text-destructive",children:["Error loading skills: ",u]})}):a.jsx("div",{className:"container mx-auto p-6 space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Skills - Experimental AVIF Grid"}),a.jsx("p",{className:"text-muted-foreground",children:"Experimental perk tree visualization using AVIF coordinate system"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("label",{className:"text-sm font-medium",children:"Select Skill:"}),a.jsxs(nu,{children:[a.jsx(su,{asChild:!0,children:a.jsxs(q,{variant:"outline",className:"w-[300px] justify-between",children:[t?t.name:"Choose a skill to view its perk tree",a.jsx(_n,{className:"h-4 w-4"})]})}),a.jsx(pl,{className:"w-[300px] max-h-[400px] overflow-y-auto",children:e.map(h=>a.jsx(as,{onClick:()=>i(h.id),className:"cursor-pointer",children:h.name},h.id))})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:t?`${t.name} Perk Tree`:"Perk Tree"}),a.jsx("div",{className:"bg-background border rounded-lg h-[600px]",children:a.jsx(kK,{tree:n||void 0,onTogglePerk:o,onRankChange:l,selectedPerks:f,className:"h-full"})})]}),t&&n&&a.jsxs("div",{className:"bg-muted/20 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium mb-2",children:"Debug Information"}),a.jsxs("div",{className:"text-xs space-y-1 text-muted-foreground",children:[a.jsxs("p",{children:["Selected Skill: ",t.name]}),a.jsxs("p",{children:["Perk Tree: ",n.treeName]}),a.jsxs("p",{children:["Total Perks: ",n.perks.length]}),a.jsxs("p",{children:["Selected Perks: ",s.length]}),a.jsxs("p",{children:["Available Perks: ",r.length]}),a.jsxs("p",{children:["Perks with Position Data:"," ",n.perks.filter(h=>h.position).length]}),n.perks.length>0&&n.perks[0].position&&a.jsxs("p",{children:["Sample Position: X=",n.perks[0].position.x,", Y=",n.perks[0].position.y,", H=",n.perks[0].position.horizontal,", V=",n.perks[0].position.vertical]})]})]})]})]})})}function EK(e={}){const{autoLoad:t=!0,refreshOnMount:n=!1}=e,{data:s,loading:r,error:i,load:o}=Wi(),l=g.useCallback(async()=>{t&&s.length===0&&await o()},[t,s.length,o]),c=g.useCallback(async()=>{await o()},[o]),u=g.useCallback(()=>{},[]);g.useEffect(()=>{t&&s.length===0&&l()},[t,s.length,l]),g.useEffect(()=>{n&&c()},[n,c]);const d=s.length,f=[...new Set(s.map(y=>y.school).filter(Boolean))],m=[...new Set(s.map(y=>y.level).filter(Boolean))],h=new Date().toISOString(),p=s.length>0?{spells:s,totalCount:d,schools:f,levels:m,lastUpdated:h}:null,v=g.useCallback(y=>Wi.getState().getByEditorId(y),[]),b=g.useCallback(y=>Wi.getState().getBySchool(y),[]),x=g.useCallback(y=>Wi.getState().getByLevel(y),[]);return{spells:s,spellData:p,loading:r,error:i,totalCount:d,schools:f,levels:m,lastUpdated:h,loadSpells:l,refresh:c,clearError:u,getSpellByEditorId:v,getSpellsBySchool:b,getSpellsByLevel:x}}function _K(){const[e,t]=g.useState(null),[n,s]=g.useState("grid");return{selectedSpell:e,viewMode:n,setSelectedSpell:t,setViewMode:s}}const AK="bg-white dark:bg-white";function TK({school:e,size:t="md",className:n}){const s=_w[e]||_w.Mysticism;return a.jsx("div",{className:H("flex items-center justify-center rounded-full overflow-hidden",AK,eG[t],n),title:`${e} magic`,children:a.jsx(s,{className:"w-full h-full object-contain text-black dark:text-black"})})}const MK={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"};function aA({school:e,size:t="md",variant:n="default",className:s}){const r=JZ[e]||"bg-gray-500 text-white";return a.jsx("span",{className:H("inline-flex items-center rounded-full font-medium",tG[t],n==="default"?r:MK[n],s),children:e})}const RK={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},DK={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"},zK={Novice:"bg-gray-500 text-white",Apprentice:"bg-green-500 text-white",Adept:"bg-blue-500 text-white",Expert:"bg-purple-500 text-white",Master:"bg-yellow-500 text-black"},LK={Novice:1,Apprentice:2,Adept:3,Expert:4,Master:5};function iA({level:e,size:t="md",variant:n="default",className:s}){const r=zK[e]||"bg-gray-500 text-white";return a.jsx("span",{className:H("inline-flex items-center rounded-full font-medium",RK[t],n==="default"?r:DK[n],s),title:`Level ${LK[e]||0}`,children:e})}const $K={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},PK={default:"bg-primary text-primary-foreground",outline:"border border-border bg-background text-foreground",ghost:"bg-muted text-muted-foreground"},OK=e=>e===0?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":e<=25?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":e<=50?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":e<=100?"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400";function oA({cost:e,size:t="md",variant:n="default",showIcon:s=!0,className:r}){const i=OK(e),o=t==="sm"?"h-3 w-3":t==="lg"?"h-4 w-4":"h-3.5 w-3.5";return a.jsxs("span",{className:H("inline-flex items-center gap-1 rounded-full font-medium",$K[t],n==="default"?i:PK[n],r),title:`${e} Magicka`,children:[s&&a.jsx(An,{className:o}),e===0?"Free":e]})}function BK({stats:e,title:t="Spell Stats",compact:n=!1,className:s}){return!(e.duration!==void 0||e.area!==void 0||e.magnitude!==void 0)&&e.magickaCost===0?null:a.jsxs("div",{className:H("space-y-2",s),children:[t&&a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:t}),a.jsxs("div",{className:H("grid gap-2",n?"grid-cols-2":"grid-cols-1"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(An,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-medium",children:e.magickaCost===0?"Free":`${e.magickaCost} MP`})]}),e.duration!==void 0&&e.duration>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Za,{className:"h-4 w-4 text-blue-500"}),a.jsxs("span",{className:"font-medium",children:[e.duration,"s"]})]}),e.area!==void 0&&e.area>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(ss,{className:"h-4 w-4 text-green-500"}),a.jsxs("span",{className:"font-medium",children:[e.area,"ft"]})]}),e.magnitude!==void 0&&e.magnitude>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"h-4 w-4 text-purple-500 font-bold",children:""}),a.jsx("span",{className:"font-medium",children:e.magnitude})]})]})]})}function IK({tags:e,title:t="Tags",compact:n=!1,maxDisplay:s=5,className:r}){if(!e||e.length===0)return null;const i=e.slice(0,s),o=e.length>s;return a.jsxs("div",{className:H("space-y-2",r),children:[t&&a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a.jsx($N,{className:"h-4 w-4"}),t,e.length>1&&a.jsxs("span",{className:"text-xs text-muted-foreground/70",children:["(",e.length,")"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.map((l,c)=>a.jsx("span",{className:H("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium","bg-muted text-muted-foreground border border-border/50",n?"text-xs":"text-sm"),children:l},c)),o&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-muted/50 text-muted-foreground/70",children:["+",e.length-s]})]})]})}function lA({spell:e,onClick:t,className:n,compact:s=!1}){const r=(i,o)=>{var l,c,u;return i.replace(/<mag>/gi,((l=o.magnitude)==null?void 0:l.toString())||"0").replace(/<dur>/gi,((c=o.duration)==null?void 0:c.toString())||"0").replace(/<area>/gi,((u=o.area)==null?void 0:u.toString())||"0")};return a.jsxs(xe,{className:H("p-6 cursor-pointer hover:shadow-md transition-shadow",n),onClick:t,children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(TK,{school:e.school,size:"2xl"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(Ae,{className:"text-foreground font-semibold",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(aA,{school:e.school,size:"sm"}),a.jsx(iA,{level:e.level,size:"sm"}),a.jsx(oA,{cost:e.magickaCost,size:"sm"})]})]})]})}),e.effects&&e.effects.filter(i=>i.description).length>0&&a.jsxs("div",{children:[a.jsx(ho,{className:"text-muted-foreground mb-2",children:"Effects"}),a.jsx("div",{className:"space-y-2",children:e.effects.filter(i=>i.description).map((i,o)=>a.jsxs("div",{className:"p-2 rounded bg-muted border text-sm",children:[a.jsx(ze,{text:r(i.description,i),options:rS(),className:"text-muted-foreground"}),a.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground mt-1",children:[i.magnitude>0&&a.jsxs("span",{children:["Magnitude: ",i.magnitude]}),i.duration>0&&a.jsxs("span",{children:["Duration: ",i.duration,"s"]}),i.area>0&&a.jsxs("span",{children:["Area: ",i.area,"ft"]})]})]},o))})]})]})}const HK={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"};function FK({spells:e,variant:t="default",showEffects:n=!0,showTags:s=!0,columns:r=3,className:i="",onSpellClick:o}){return e.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No spells found"})}):a.jsx("div",{className:`grid gap-4 ${HK[r]} ${i}`,children:e.map((l,c)=>a.jsx(lA,{spell:l,onClick:()=>o==null?void 0:o(l),compact:t==="compact"},`${l.name}-${l.editorId}-${c}`))})}function UK({spells:e,variant:t="default",showEffects:n=!0,showTags:s=!0,className:r="",onSpellClick:i}){return e.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No spells found"})}):a.jsx("div",{className:`space-y-4 ${r}`,children:e.map((o,l)=>a.jsx(lA,{spell:o,onClick:()=>i==null?void 0:i(o),compact:t==="compact"},`${o.name}-${o.editorId}-${l}`))})}const VK={Destruction:il,Restoration:Os,Conjuration:Ex,Illusion:al,Alteration:at,"":oa};function qK({spell:e,isOpen:t,onOpenChange:n}){var r;if(!e)return null;const s=VK[e.school]||oa;return a.jsx(au,{open:t,onOpenChange:n,side:"right",title:e.name,description:`${e.school}  ${e.level}  ${e.magickaCost} MP`,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(s,{className:"w-16 h-16 text-muted-foreground"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(ea,{className:"text-2xl font-bold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(aA,{school:e.school,size:"sm"}),a.jsx(iA,{level:e.level,size:"sm"}),a.jsx(oA,{cost:e.magickaCost,size:"sm"})]}),a.jsx(ze,{text:e.description})]})]}),a.jsx(Yr,{}),a.jsx(BK,{stats:{magickaCost:e.magickaCost||0,duration:e.maxDuration&&e.maxDuration>0?e.maxDuration:void 0,area:e.maxArea&&e.maxArea>0?e.maxArea:void 0,magnitude:e.totalMagnitude&&e.totalMagnitude>0?e.totalMagnitude:void 0}}),a.jsx(Yr,{}),e.hasEffects&&a.jsxs("div",{children:[a.jsx(Ae,{className:"text-lg font-semibold mb-3",children:"Effects"}),a.jsx("div",{className:"space-y-2",children:e.effects.filter((i,o,l)=>{const c=i.name.replace(/\s*\(Single\)|\s*\(Dual\)/i,""),u=l.findIndex(d=>d.name.replace(/\s*\(Single\)|\s*\(Dual\)/i,"")===c&&d.magnitude===i.magnitude&&d.duration===i.duration);return o===u}).map((i,o)=>a.jsxs("div",{className:"p-3 rounded bg-muted border",children:[a.jsx("div",{className:"font-medium text-foreground mb-2",children:i.name}),i.description&&a.jsx(ze,{text:i.description,className:"text-sm text-muted-foreground mb-2"}),a.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[i.magnitude>0&&a.jsxs("span",{children:["Magnitude: ",i.magnitude]}),i.duration>0&&a.jsxs("span",{children:["Duration: ",i.duration,"s"]}),i.area>0&&a.jsxs("span",{children:["Area: ",i.area,"ft"]})]})]},o))})]}),e.tags&&e.tags.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(Yr,{}),a.jsx(IK,{tags:e.tags,title:"Tags",maxDisplay:20})]}),(e.tome||((r=e.vendors)==null?void 0:r.length)||e.halfCostPerk)&&a.jsxs(a.Fragment,{children:[a.jsx(Yr,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ae,{className:"text-lg font-semibold",children:"Additional Information"}),e.tome&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"w-4 h-4 text-muted-foreground"}),a.jsx(ho,{className:"text-muted-foreground",children:"Spell Tome"})]}),a.jsx(be,{className:"text-sm",children:e.tome})]}),e.vendors&&e.vendors.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(ho,{className:"text-muted-foreground",children:"Available From"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.vendors.map((i,o)=>a.jsx(K,{variant:"outline",className:"text-xs",children:i},o))})]}),e.halfCostPerk&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(An,{className:"w-4 h-4 text-muted-foreground"}),a.jsx(ho,{className:"text-muted-foreground",children:"Half Cost Perk"})]}),a.jsx(be,{className:"text-sm",children:e.halfCostPerkName})]})]})]}),a.jsx(Yr,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ae,{className:"text-lg font-semibold",children:"Game Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Editor ID:"}),a.jsx("span",{className:"break-all font-mono",children:e.editorId})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"School:"}),a.jsx("span",{children:e.school})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Level:"}),a.jsx("span",{children:e.level})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[a.jsx("span",{className:"font-medium min-w-[60px]",children:"Effects:"}),a.jsx("span",{children:e.effectCount})]})]})]})]})})}function ZK(){const{spells:e,loading:t,error:n}=EK(),{viewMode:s,setViewMode:r}=_K(),i=Array.isArray(e)?e:[],[o,l]=g.useState(null),[c,u]=g.useState(!1),[d,f]=g.useState("alphabetical"),m=N=>{l(N),u(!0)},h=g.useMemo(()=>{if(console.log("Generating search categories directly:",{safeSpellsLength:i.length,firstSpell:i[0]}),i.length===0)return[];const N=[...new Set(i.map(k=>k.school))],S=[...new Set(i.map(k=>k.level))];return console.log("Extracted categories:",{schools:N,levels:S}),[{id:"keywords",name:"Fuzzy Search",placeholder:"Search spells by name, school, level, or effects...",options:[]},{id:"schools",name:"Magic Schools",placeholder:"Filter by school...",options:N.map(k=>({id:`school-${k}`,label:k,value:k,category:"Magic Schools",description:`${k} spells`}))},{id:"levels",name:"Spell Levels",placeholder:"Filter by level...",options:S.map(k=>({id:`level-${k}`,label:k,value:k,category:"Spell Levels",description:`${k} spells`}))}]},[i]);g.useEffect(()=>{console.log("SpellPageView Debug:",{spellsLength:(e==null?void 0:e.length)||0,safeSpellsLength:i.length,loading:t,error:n,searchCategoriesLength:(h==null?void 0:h.length)||0,searchCategories:h})},[e,i,t,n,h]);const[p,v]=g.useState([]),b=N=>{let S;typeof N=="string"?S={id:`custom-${N}`,label:N,value:N,category:"Fuzzy Search"}:S={id:`${N.category}-${N.id}`,label:N.label,value:N.value,category:N.category},p.some(k=>k.value===S.value&&k.category===S.category)||v(k=>[...k,S])},x=N=>{v(S=>S.filter(k=>k.id!==N))},y=()=>{v([])},w=i.filter(N=>p.length===0?!0:p.every(S=>{switch(S.category){case"Magic Schools":return N.school===S.value;case"Spell Levels":return N.level===S.value;case"Fuzzy Search":const k=S.value.toLowerCase();return N.name.toLowerCase().includes(k)||N.school.toLowerCase().includes(k)||N.level.toLowerCase().includes(k)||N.effects.some(E=>E.description.toLowerCase().includes(k));default:return!0}})),j=g.useMemo(()=>[...w].sort((N,S)=>{switch(d){case"alphabetical":return N.name.localeCompare(S.name);case"school":const k=N.school.localeCompare(S.school);return k!==0?k:N.name.localeCompare(S.name);case"level":const E=Aw[N.level]||0,C=Aw[S.level]||0;return E!==C?E-C:N.name.localeCompare(S.name);default:return 0}}),[w,d]);return t?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading spells..."})]})}):n?a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("p",{className:"text-destructive mb-4",children:["Error loading spells: ",n]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded",children:["Debug: ",i.length," spells, ",h.length," search categories",h.length>0&&a.jsxs("div",{className:"mt-1",children:["Categories: ",h.map(N=>`${N.name}(${N.options.length})`).join(", ")]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-1",children:h.length>0?a.jsx(ka,{categories:h,onSelect:b,onCustomSearch:b}):a.jsxs("div",{className:"p-4 border border-dashed border-muted-foreground/20 rounded-lg text-center text-muted-foreground",children:["No search categories available. Spells loaded: ",i.length]})}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:d,onChange:N=>f(N.target.value),className:"appearance-none bg-background border border-border rounded-lg px-3 py-1.5 pr-8 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer",children:[a.jsx("option",{value:"alphabetical",children:"Sort: A-Z"}),a.jsx("option",{value:"school",children:"Sort: School"}),a.jsx("option",{value:"level",children:"Sort: Level"})]}),a.jsx(_n,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]}),a.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[a.jsx("button",{onClick:()=>r("grid"),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${s==="grid"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"Grid view",children:"Grid"}),a.jsx("button",{onClick:()=>r("list"),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${s==="list"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"List view",children:"List"})]})]}),p.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:y,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx("span",{className:"text-lg",children:""}),"Clear All"]}),p.map(N=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>x(N.id),title:"Click to remove",children:[N.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},N.id))]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.length," of ",i.length," spells"]}),a.jsx("div",{children:j.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No spells found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}):a.jsxs(a.Fragment,{children:[s==="grid"&&a.jsx(FK,{spells:j,variant:"default",columns:3,onSpellClick:m}),s==="list"&&a.jsx(UK,{spells:j,variant:"default",onSpellClick:m})]})}),a.jsx(qK,{spell:o,isOpen:c,onOpenChange:u})]})}function GK(){return a.jsx(cn,{title:"Spell Reference",description:"Browse and search all available spells. Find the perfect magic for your character build.",children:a.jsx(ZK,{})})}function YK(){const{data:e,loading:t,error:n,reload:s}=J6(),r=e||[],[i,o]=g.useState([]),[l,c]=g.useState("alphabetical");g.useMemo(()=>r.map(pb),[r]);const d=(()=>{const w=y_(r),j=b_(r);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Search by category...",options:w.map(N=>({id:`category-${N}`,label:N,value:N,category:"Categories",description:`Traits in ${N} category`}))},{id:"tags",name:"Tags",placeholder:"Search by tag...",options:j.map(N=>({id:`tag-${N}`,label:N,value:N,category:"Tags",description:`Traits tagged with ${N}`}))}]})(),f=w=>{let j;typeof w=="string"?j={id:`custom-${w}`,label:w,value:w,category:"Fuzzy Search"}:j={id:`${w.category}-${w.id}`,label:w.label,value:w.value,category:w.category},i.some(N=>N.value===j.value&&N.category===j.category)||o(N=>[...N,j])},m=w=>{o(j=>j.filter(N=>N.id!==w))},h=r.filter(w=>i.length===0?!0:i.every(j=>{var N;switch(j.category){case"Fuzzy Search":return!0;case"Categories":return w.category===j.value;case"Tags":return((N=w.tags)==null?void 0:N.some(S=>S===j.value))||!1;default:return!0}})),p=i.filter(w=>w.category==="Fuzzy Search").map(w=>w.value).join(" "),{filteredTraits:v}=v_(h,p),b=v.map(pb),x=r.map(w=>w.id||w.name),y=[...b].sort((w,j)=>{var N,S;switch(l){case"alphabetical":return w.name.localeCompare(j.name);case"category":const k=D=>{switch(D){case"Combat":return 1;case"Magic":return 2;case"Stealth":return 3;case"Social":return 4;case"Survival":return 5;default:return 6}},E=k(w.category),C=k(j.category);return E!==C?E-C:w.name.localeCompare(j.name);case"effect-count":const _=((N=w.effects)==null?void 0:N.length)||0,P=((S=j.effects)==null?void 0:S.length)||0;return _!==P?P-_:w.name.localeCompare(j.name);default:return 0}});return t?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading traits..."})]})}):n?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-destructive mb-4",children:n}),a.jsx("button",{onClick:()=>s(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):a.jsxs(cn,{title:"Traits",description:"Choose your character's traits. Traits provide unique abilities and modifiers that will shape your character's capabilities throughout their journey.",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(ka,{categories:d,onSelect:f,onCustomSearch:f})}),a.jsxs(nu,{children:[a.jsx(su,{asChild:!0,children:a.jsxs(q,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[a.jsx(_n,{className:"h-4 w-4"}),l==="alphabetical"?"A-Z":l==="category"?"Category":"Count"]})}),a.jsxs(pl,{align:"end",children:[a.jsx(as,{onClick:()=>c("alphabetical"),children:"Alphabetical"}),a.jsx(as,{onClick:()=>c("category"),children:"Category"}),a.jsx(as,{onClick:()=>c("effect-count"),children:"Effect Count"})]})]})]}),a.jsx("div",{className:"my-4",children:i.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("button",{onClick:()=>o([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[a.jsx(Dt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),i.map(w=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(w.id),title:"Click to remove",children:[w.label,a.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},w.id))]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:y.map(w=>a.jsx(Xq,{item:w,isExpanded:!0,className:"w-full",allTraitIds:x},w.id))}),y.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground",children:"No traits found matching your criteria."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]})}function XK(){const{build:e,updateBuild:t}=ht(),[n,s]=g.useState(e.traitLimits.regular),[r,i]=g.useState(e.traitLimits.bonus),o=g.useCallback(c=>{s(c),t({traitLimits:{...e.traitLimits,regular:c}})},[e.traitLimits,t]),l=g.useCallback(c=>{i(c),t({traitLimits:{...e.traitLimits,bonus:c}})},[e.traitLimits,t]);return{regularLimit:n,bonusLimit:r,handleRegularLimitChange:o,handleBonusLimitChange:l,currentRegularCount:e.traits.regular.length,currentBonusCount:e.traits.bonus.length}}function WK(){const{build:e,setBuildName:t,setBuildNotes:n,resetBuild:s}=ht(),[r,i]=g.useState(!1),o=XK(),l=lt(),c=[{id:"basic-info",component:a.jsx(J1,{name:e.name,notes:e.notes,onNameChange:t,onNotesChange:n}),size:"full"},{id:"race",component:a.jsx(mC,{}),size:"half"},{id:"birthsign",component:a.jsx(Wk,{}),size:"half"},{id:"trait",component:a.jsx(w_,{}),size:"half"},{id:"religion",component:a.jsx(vC,{}),size:"half"},{id:"attributes",component:a.jsx(sS,{}),size:"full"},{id:"skills",component:a.jsx(x_,{}),size:"full"},{id:"destiny",component:a.jsx(oC,{navigate:l}),size:"full"},{id:"summary",component:a.jsx(tS,{build:e}),size:"full"}];return a.jsxs(cn,{title:"Character Builder",children:[a.jsx(XL,{onReset:()=>i(!0),build:e}),a.jsx(r$,{open:r,onConfirm:()=>{s(),i(!1)},onCancel:()=>i(!1)}),a.jsxs(Si,{defaultValue:"build",className:"w-full",children:[a.jsxs(ki,{className:"mb-4",children:[a.jsx(Vt,{value:"build",children:"Build"}),a.jsx(Vt,{value:"config",children:"Config"})]}),a.jsx(Wt,{value:"build",children:a.jsx(WL,{cards:c,gap:16})}),a.jsx(Wt,{value:"config",children:a.jsx(i$,{regularLimit:o.regularLimit,bonusLimit:o.bonusLimit,onRegularLimitChange:o.handleRegularLimitChange,onBonusLimitChange:o.handleBonusLimitChange,currentRegularCount:o.currentRegularCount,currentBonusCount:o.currentBonusCount})})]})]})}function KK(){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(Ni,{children:"Crafting"}),a.jsx(pc,{children:"Plan your crafting recipes and material requirements"})]}),a.jsxs(xe,{children:[a.jsxs(Te,{children:[a.jsx(Le,{children:"Coming Soon"}),a.jsx(Cs,{children:"Crafting system is under development"})]}),a.jsx(ve,{children:a.jsx(pc,{children:"This section will help you plan and optimize your crafting projects."})})]})]})}function QK(){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(Ni,{children:"Equipment"}),a.jsx(pc,{children:"Browse and compare weapons, armor, and items"})]}),a.jsxs(xe,{children:[a.jsxs(Te,{children:[a.jsx(Le,{children:"Coming Soon"}),a.jsx(Cs,{children:"Equipment database is under development"})]}),a.jsx(ve,{children:a.jsx(pc,{children:"This section will provide a comprehensive database of all equipment in the game."})})]})]})}const JK=()=>{const{build:e,getSummary:t}=ht(),n=lt(),s=t();return!e.name&&!e.race?a.jsxs(xe,{className:"border-dashed border-2 border-muted",children:[a.jsxs(Te,{children:[a.jsx(Le,{className:"text-lg",children:"No Character Build"}),a.jsx(Cs,{children:"Start building your character to see it here"})]}),a.jsx(ve,{children:a.jsx(q,{onClick:()=>n("/build"),className:"w-full",children:"Create Character Build"})})]}):a.jsxs(xe,{children:[a.jsxs(Te,{children:[a.jsxs(Le,{className:"text-lg flex items-center justify-between",children:[a.jsx("span",{children:s.name}),a.jsx(q,{variant:"outline",size:"sm",onClick:()=>n("/build"),children:"Edit"})]}),a.jsx(Cs,{children:"Current character build status"})]}),a.jsxs(ve,{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Race:"}),a.jsx(K,{variant:"secondary",className:"ml-2",children:s.race})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Birth Sign:"}),a.jsx(K,{variant:"secondary",className:"ml-2",children:s.stone})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Religion:"}),a.jsx(K,{variant:"secondary",className:"ml-2",children:s.religion})]})]}),a.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[a.jsxs("span",{children:[s.traitCount," traits"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[s.majorSkillCount," major skills"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[s.minorSkillCount," minor skills"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[s.equipmentCount," equipment"]})]})]})]})};function eQ(){const e=lt(),t=()=>{e("/build")},n=[{name:"GigaPlanner",description:"Advanced build planner with detailed skill trees and optimization",url:"https://multidyls.github.io/GigaPlanner",icon:a.jsx(_g,{className:"h-5 w-5 text-primary"}),category:"Build Planning",author:"Multidyls"},{name:"Character Builder GPT",description:"AI-powered character creation assistant with personalized build recommendations",url:"https://chatgpt.com/g/g-68462f6313d48191bab174806a049ca4-lorerim-builds-wizard-v2?model=gpt-4o",icon:a.jsx(PN,{className:"h-5 w-5 text-primary"}),category:"AI Assistant",author:"Zoldyg"},{name:"Alchemy Calculator",description:"Comprehensive alchemy crafting and ingredient database with detailed recipes",url:"https://docs.google.com/spreadsheets/d/1zUVCaRlqHX_sER-kJR-ZLIAfsFbTj9FQCO-hMfnp4XA/edit?gid=2066962651#gid=2066962651",icon:a.jsx(oa,{className:"h-5 w-5 text-primary"}),category:"Crafting",author:"Rudy"},{name:"Spell Sheet Generator",description:"Lorerim Spell List Google Sheet",url:"https://docs.google.com/spreadsheets/d/1fvYHRfwAprpgEPaXyuteEx0ud9S572noYnlpVq6cJFs/edit?gid=915313506#gid=915313506",icon:a.jsx(Na,{className:"h-5 w-5 text-primary"}),category:"Spells",author:"ImmatureTurtles"},{name:"Weapons Discussion Hub",description:"Deep dive into weapon mechanics, damage calculations, and optimization strategies",url:"https://discord.com/channels/622647066719420427/1382033558754955354",icon:a.jsx(ti,{className:"h-5 w-5 text-primary"}),category:"Combat",author:"Deo"},{name:"Spin Wheel Tool",description:"Random build generator and challenge creator for fun playthroughs",url:"https://spinthewheel.app/YXGCPykcqJ",icon:a.jsx(xr,{className:"h-5 w-5 text-primary"}),category:"Fun",author:"Sora the Saint"}],s=r=>{r!=="#"&&window.open(r,"_blank","noopener,noreferrer")};return a.jsx("div",{className:"bg-background",children:a.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-12",children:[a.jsxs("div",{className:"text-left space-y-6",children:[a.jsx("div",{className:"flex items-center gap-3 mb-4 justify-start",children:a.jsx(Ni,{className:"text-4xl md:text-6xl font-bold text-foreground",children:"Lorerim Arcaneum"})}),a.jsx(nS,{className:"text-xl md:text-2xl text-muted-foreground",children:"A growing collection of Lorerim tools and resources. Build characters, explore mechanics, and contribute to the community."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Big thanks to Biggie Boss"})]}),a.jsx("div",{className:"max-w-md",children:a.jsx(JK,{})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[a.jsx(Hd,{className:"h-6 w-6 text-primary"}),"Character Building"]}),a.jsx("p",{className:"text-muted-foreground",children:"Create and customize your character from scratch"})]}),a.jsxs(xe,{className:"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card",onClick:t,children:[a.jsxs(Te,{children:[a.jsxs(Le,{className:"flex items-center gap-2 group-hover:text-primary transition-colors text-card-foreground",children:[a.jsx(oa,{className:"h-5 w-5"}),"Start Character Build"]}),a.jsx(Cs,{className:"text-muted-foreground",children:"Design your character with races, traits, birthsigns, and more"})]}),a.jsx(ve,{children:a.jsxs(q,{className:"w-full group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:["Begin Building",a.jsx(ZR,{className:"ml-2 h-4 w-4"})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/race"),children:a.jsxs(ve,{className:"p-4 text-center",children:[a.jsx(l3,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Races"})]})}),a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/birth-signs"),children:a.jsxs(ve,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:""}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Birthsigns"})]})}),a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/traits"),children:a.jsxs(ve,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:""}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Traits"})]})}),a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/perks"),children:a.jsxs(ve,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:""}),a.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Skills"})]})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[a.jsx(Ro,{className:"h-6 w-6 text-primary"}),"Quick Access"]}),a.jsx("p",{className:"text-muted-foreground",children:"Jump directly to specific tools and features"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/search"),children:a.jsx(ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ro,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-card-foreground",children:"Advanced Search"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Detailed search with filters"})]})]})})}),a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/spells"),children:a.jsx(ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(oa,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-card-foreground",children:"Spells"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Browse and search spells"})]})]})})}),a.jsx(xe,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/cookbook"),children:a.jsx(ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(DN,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-card-foreground",children:"Cookbook"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Crafting recipes & guides"})]})]})})})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[a.jsx(_g,{className:"h-6 w-6 text-primary"}),"Favorite Tools"]}),a.jsx("p",{className:"text-muted-foreground",children:"Discover the best external tools and resources for Lorerim theorycrafting"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((r,i)=>a.jsxs(xe,{className:"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card",onClick:()=>s(r.url),children:[a.jsxs(Te,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[r.icon,a.jsx(Le,{className:"text-lg group-hover:text-primary transition-colors text-card-foreground",children:r.name})]}),a.jsx(Sa,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-xs font-medium text-primary/80 bg-primary/10 px-2 py-1 rounded-full",children:r.category}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["by ",r.author]})]})]}),a.jsx(ve,{className:"pt-0",children:a.jsx(Cs,{className:"text-muted-foreground",children:r.description})})]},i))})]}),a.jsx("div",{className:"text-left pt-8 border-t border-border",children:a.jsx("p",{className:"text-muted-foreground",children:"Crafted by Bardic (Jeremy) Noel, with gratitude to Biggie Boss and the Lorerim community"})})]})})}function tQ(){const e=lt();return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:[a.jsx(Ni,{className:"text-4xl font-bold text-skyrim-gold mb-2",children:"Page Not Found"}),a.jsx(be,{className:"text-skyrim-gold/70 mb-6",children:"Sorry, the page you are looking for does not exist or is not ready yet."}),a.jsx(q,{variant:"default",onClick:()=>e("/"),children:"Return Home"})]})}const nQ=()=>a.jsxs(yD,{children:[a.jsx(yt,{path:"/",element:a.jsx(eQ,{})}),a.jsxs(yt,{path:"/build",element:a.jsx(F$,{}),children:[a.jsx(yt,{index:!0,element:a.jsx(WK,{})}),a.jsx(yt,{path:"race",element:a.jsx(hC,{})}),a.jsx(yt,{path:"birth-signs",element:a.jsx(GB,{})}),a.jsx(yt,{path:"traits",element:a.jsx(YK,{})}),a.jsx(yt,{path:"religions",element:a.jsx(CZ,{})}),a.jsx(yt,{path:"destiny",element:a.jsx(kZ,{})}),a.jsx(yt,{path:"perks",element:a.jsx(Lw,{})})]}),a.jsx(yt,{path:"/spells",element:a.jsx(GK,{})}),a.jsx(yt,{path:"/cookbook",element:a.jsx(uZ,{})}),a.jsx(yt,{path:"/search",element:a.jsx(cG,{})}),a.jsx(yt,{path:"/virtual-masonry-demo",element:a.jsx(dG,{})}),a.jsx(yt,{path:"/races-mva-demo",element:a.jsx(vI,{})}),a.jsx(yt,{path:"/skills-mva",element:a.jsx(Lw,{})}),a.jsx(yt,{path:"/skills-experimental",element:a.jsx(CK,{})}),a.jsx(yt,{path:"/equipment",element:a.jsx(QK,{})}),a.jsx(yt,{path:"/crafting",element:a.jsx(KK,{})}),a.jsx(yt,{path:"*",element:a.jsx(tQ,{})})]}),cA=g.createContext(void 0);function sQ({children:e}){const[t,n]=g.useState("system"),[s,r]=g.useState("dark"),[i,o]=g.useState(!1);return g.useEffect(()=>{const l=localStorage.getItem("theme");l&&["light","dark","system"].includes(l)&&n(l),o(!0)},[]),g.useEffect(()=>{i&&localStorage.setItem("theme",t);let l;t==="system"?l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":l=t,r(l);const c=document.documentElement;l==="dark"?c.classList.add("dark"):c.classList.remove("dark")},[t,i]),g.useEffect(()=>{const l=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>{if(t==="system"){const u=l.matches?"dark":"light";r(u);const d=document.documentElement;u==="dark"?d.classList.add("dark"):d.classList.remove("dark")}};return l.addEventListener("change",c),()=>l.removeEventListener("change",c)},[t]),a.jsx(cA.Provider,{value:{theme:t,setTheme:n,resolvedTheme:s},children:e})}function rQ(){const e=g.useContext(cA);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function aQ(){const{theme:e,setTheme:t}=rQ(),n=()=>{t(e==="light"?"dark":e==="dark"?"system":"light")},s=()=>{switch(e){case"light":return a.jsx(hy,{className:"h-4 w-4"});case"dark":return a.jsx($4,{className:"h-4 w-4"});case"system":return a.jsx(z4,{className:"h-4 w-4"});default:return a.jsx(hy,{className:"h-4 w-4"})}};return a.jsxs(q,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:n,title:`Current theme: ${e}. Click to cycle themes.`,children:[s(),a.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function iQ({sidebarCollapsed:e,onToggleSidebar:t,isMobile:n=!1,MobileDrawerTrigger:s}){return a.jsxs("header",{className:"sticky top-0 w-full h-12 flex items-center bg-background border-b border-skyrim-gold/20 px-2 shadow-sm backdrop-blur-sm",style:{zIndex:Lt.HEADER,backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:[n&&s?a.jsx("div",{className:"mr-2",children:a.jsx(s,{})}):a.jsx("button",{onClick:t,"aria-label":e?"Open sidebar":"Close sidebar",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 mr-2",children:a.jsx(A4,{className:"w-5 h-5 text-skyrim-gold transition-transform duration-200 group-hover:rotate-12"})}),a.jsx("span",{className:"text-skyrim-gold font-bold text-base tracking-tight select-none",children:"Lorerim Arcaneum"}),a.jsx("span",{className:"ml-2 text-xs text-skyrim-gold/60 select-none",children:"Theorycrafting Hub"}),a.jsx("div",{className:"flex-1 max-w-md mx-4",children:a.jsx(oG,{placeholder:"Search skills, races, traits...",className:"w-full"})}),a.jsx("div",{className:"ml-auto",children:a.jsx(aQ,{})})]})}const uA=[{label:"Character Build",items:[{to:"/build",label:"Build"},{to:"/build/race",label:"Race"},{to:"/build/birth-signs",label:"Birth Signs"},{to:"/build/traits",label:"Traits"},{to:"/build/religions",label:"Religion"},{to:"/build/destiny",label:"Destiny"},{to:"/build/perks",label:"Skills and Perks"}]},{label:"Docs",items:[{to:"/spells",label:"Spells"},{to:"/cookbook",label:"Food and Alcohol"}]}];function oQ({onNavigate:e}){const t=lt(),n=window.location.hash.replace(/^#\/?/,"/"),s=(r,i)=>{const o=window.location.hash,[l,c]=o.split("?"),d=new URLSearchParams(c||"").get("b");t(d?`${r}?b=${d}`:r),e(i)};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-4 border-b border-skyrim-gold/20",children:a.jsxs("button",{onClick:()=>s("/",!0),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[a.jsx(zN,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),a.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:uA.map(r=>a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:r.label}),a.jsx("div",{className:"space-y-1",children:r.items.map(i=>{const o=n===i.to;return a.jsx("button",{onClick:()=>s(i.to,!0),className:`w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] active:scale-[0.98] cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 ${o?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent"}`,children:i.label},i.to)})})]},r.label))}),a.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[a.jsx(be,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),a.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:" Settings"})]})]})}function lQ({collapsed:e,onNavigate:t}){const n=lt(),s=window.location.hash.replace(/^#\/?/,"/"),r=i=>{const o=window.location.hash,[l,c]=o.split("?"),d=new URLSearchParams(c||"").get("b");n(d?`${i}?b=${d}`:i)};return a.jsxs(j_,{collapsed:e,children:[a.jsx(k_,{children:!e&&a.jsxs("button",{onClick:()=>r("/"),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[a.jsx(zN,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),a.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),a.jsx(N_,{children:uA.map(i=>a.jsxs(S_,{children:[!e&&a.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:i.label}),a.jsx(C_,{children:i.items.map(o=>{const l=s===o.to;return a.jsx(__,{children:a.jsx(E_,{asChild:!0,isActive:l,onClick:()=>r(o.to),tabIndex:0,children:a.jsx("span",{className:"w-full text-left truncate",children:o.label})})},o.to)})})]},i.label))}),!e&&a.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[a.jsx(be,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),a.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:" Settings"})]}),a.jsx(A_,{})]})}function cQ({onNavigate:e}){const[t,n]=g.useState(!1),s=r=>{r&&n(!1)};return a.jsxs(zo,{open:t,onOpenChange:n,children:[a.jsx(W1,{asChild:!0,children:a.jsx("button",{"aria-label":"Open navigation menu",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:a.jsx("svg",{className:"w-5 h-5 text-skyrim-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),a.jsx(si,{side:"left",className:"p-0 w-80",children:a.jsx("div",{className:"flex flex-col h-full",children:a.jsx(oQ,{onNavigate:s})})})]})}function uQ(){const[e,t]=g.useState(!0),[n,s]=g.useState(!1);return Jq(),g.useEffect(()=>{const r=()=>s(window.innerWidth<768);return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),a.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[a.jsx(iQ,{sidebarCollapsed:e,onToggleSidebar:()=>t(r=>!r),isMobile:n,MobileDrawerTrigger:()=>a.jsx(cQ,{onNavigate:()=>{}})}),a.jsxs("div",{className:"flex flex-1",children:[!n&&a.jsx("div",{className:`transition-all duration-300 ease-in-out ${e?"w-0 overflow-hidden":"w-64"}`,style:{zIndex:Lt.SIDEBAR},children:a.jsx(lQ,{collapsed:e,onNavigate:r=>{r&&t(!0)}})}),a.jsx("main",{className:"flex-1 transition-all duration-300 ease-in-out min-w-0",children:a.jsx(nQ,{})})]}),a.jsx(Qq,{})]})}function dQ(){return a.jsx(VD,{children:a.jsx(uQ,{})})}function fQ({children:e,showLoadingIndicator:t=!1}){const[n,s]=g.useState(!0),[r,i]=g.useState(null),o=g.useRef(!1),l=yi(x=>x.load),c=dl(x=>x.load),u=vi(x=>x.load),d=yr(x=>x.load),f=rr(x=>x.load),m=fl(x=>x.load),h=bi(x=>x.load),p=Wi(x=>x.load),v=wi(x=>x.load),b=g.useCallback(async()=>{if(!o.current)try{s(!0),i(null),await Promise.all([l(),c(),u(),d(),f(),m(),h(),p(),v()]),o.current=!0,s(!1)}catch(x){console.error("Failed to initialize data:",x),i(x instanceof Error?x.message:"Failed to initialize data"),s(!1)}},[l,c,u,d,f,m,h,p,v]);return g.useEffect(()=>{b()},[b]),n&&t?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading data..."})]})}):r?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Failed to Load Data"}),a.jsx("p",{className:"text-sm",children:r})]}),a.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})}):a.jsx(a.Fragment,{children:e})}var dA={exports:{}},Pm={},fA={exports:{}},mA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,L){var M=T.length;T.push(L);e:for(;0<M;){var R=M-1>>>1,B=T[R];if(0<r(B,L))T[R]=L,T[M]=B,M=R;else break e}}function n(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var L=T[0],M=T.pop();if(M!==L){T[0]=M;e:for(var R=0,B=T.length,F=B>>>1;R<F;){var I=2*(R+1)-1,V=T[I],G=I+1,J=T[G];if(0>r(V,M))G<B&&0>r(J,V)?(T[R]=J,T[G]=M,R=G):(T[R]=V,T[I]=M,R=I);else if(G<B&&0>r(J,M))T[R]=J,T[G]=M,R=G;else break e}}return L}function r(T,L){var M=T.sortIndex-L.sortIndex;return M!==0?M:T.id-L.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,h=!1,p=!1,v=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function j(T){for(var L=n(u);L!==null;){if(L.callback===null)s(u);else if(L.startTime<=T)s(u),L.sortIndex=L.expirationTime,t(c,L);else break;L=n(u)}}function N(T){if(v=!1,j(T),!p)if(n(c)!==null)p=!0,S||(S=!0,D());else{var L=n(u);L!==null&&O(N,L.startTime-T)}}var S=!1,k=-1,E=5,C=-1;function _(){return b?!0:!(e.unstable_now()-C<E)}function P(){if(b=!1,S){var T=e.unstable_now();C=T;var L=!0;try{e:{p=!1,v&&(v=!1,y(k),k=-1),h=!0;var M=m;try{t:{for(j(T),f=n(c);f!==null&&!(f.expirationTime>T&&_());){var R=f.callback;if(typeof R=="function"){f.callback=null,m=f.priorityLevel;var B=R(f.expirationTime<=T);if(T=e.unstable_now(),typeof B=="function"){f.callback=B,j(T),L=!0;break t}f===n(c)&&s(c),j(T)}else s(c);f=n(c)}if(f!==null)L=!0;else{var F=n(u);F!==null&&O(N,F.startTime-T),L=!1}}break e}finally{f=null,m=M,h=!1}L=void 0}}finally{L?D():S=!1}}}var D;if(typeof w=="function")D=function(){w(P)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,A=z.port2;z.port1.onmessage=P,D=function(){A.postMessage(null)}}else D=function(){x(P,0)};function O(T,L){k=x(function(){T(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(T){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var M=m;m=L;try{return T()}finally{m=M}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(T,L){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var M=m;m=T;try{return L()}finally{m=M}},e.unstable_scheduleCallback=function(T,L,M){var R=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?R+M:R):M=R,T){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=M+B,T={id:d++,callback:L,priorityLevel:T,startTime:M,expirationTime:B,sortIndex:-1},M>R?(T.sortIndex=M,t(u,T),n(c)===null&&T===n(u)&&(v?(y(k),k=-1):v=!0,O(N,M-R))):(T.sortIndex=B,t(c,T),p||h||(p=!0,S||(S=!0,D()))),T},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(T){var L=m;return function(){var M=m;m=L;try{return T.apply(this,arguments)}finally{m=M}}}})(mA);fA.exports=mA;var mQ=fA.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _t=mQ,hA=g,hQ=Kf;function Y(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function gA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function pA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nj(e){if(mu(e)!==e)throw Error(Y(188))}function gQ(e){var t=e.alternate;if(!t){if(t=mu(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return nj(r),e;if(i===s)return nj(r),t;i=i.sibling}throw Error(Y(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==s)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function xA(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=xA(e),t!==null)return t;e=e.sibling}return null}var Qe=Object.assign,pQ=Symbol.for("react.element"),sd=Symbol.for("react.transitional.element"),Zl=Symbol.for("react.portal"),Qi=Symbol.for("react.fragment"),vA=Symbol.for("react.strict_mode"),Np=Symbol.for("react.profiler"),xQ=Symbol.for("react.provider"),yA=Symbol.for("react.consumer"),lr=Symbol.for("react.context"),dv=Symbol.for("react.forward_ref"),Sp=Symbol.for("react.suspense"),kp=Symbol.for("react.suspense_list"),fv=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),Cp=Symbol.for("react.activity"),vQ=Symbol.for("react.memo_cache_sentinel"),sj=Symbol.iterator;function zl(e){return e===null||typeof e!="object"?null:(e=sj&&e[sj]||e["@@iterator"],typeof e=="function"?e:null)}var yQ=Symbol.for("react.client.reference");function Ep(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===yQ?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qi:return"Fragment";case Np:return"Profiler";case vA:return"StrictMode";case Sp:return"Suspense";case kp:return"SuspenseList";case Cp:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Zl:return"Portal";case lr:return(e.displayName||"Context")+".Provider";case yA:return(e._context.displayName||"Context")+".Consumer";case dv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fv:return t=e.displayName||null,t!==null?t:Ep(e.type)||"Memo";case qr:t=e._payload,e=e._init;try{return Ep(e(t))}catch{}}return null}var Gl=Array.isArray,ge=hA.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oe=hQ.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ya={pending:!1,data:null,method:null,action:null},_p=[],Ji=-1;function Vs(e){return{current:e}}function zt(e){0>Ji||(e.current=_p[Ji],_p[Ji]=null,Ji--)}function tt(e,t){Ji++,_p[Ji]=e.current,e.current=t}var Ds=Vs(null),Mc=Vs(null),ua=Vs(null),xf=Vs(null);function vf(e,t){switch(tt(ua,t),tt(Mc,e),tt(Ds,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?lN(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=lN(t),e=$M(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}zt(Ds),tt(Ds,e)}function Go(){zt(Ds),zt(Mc),zt(ua)}function Ap(e){e.memoizedState!==null&&tt(xf,e);var t=Ds.current,n=$M(t,e.type);t!==n&&(tt(Mc,e),tt(Ds,n))}function yf(e){Mc.current===e&&(zt(Ds),zt(Mc)),xf.current===e&&(zt(xf),Hc._currentValue=Ya)}var Tp=Object.prototype.hasOwnProperty,mv=_t.unstable_scheduleCallback,Gh=_t.unstable_cancelCallback,bQ=_t.unstable_shouldYield,wQ=_t.unstable_requestPaint,zs=_t.unstable_now,jQ=_t.unstable_getCurrentPriorityLevel,bA=_t.unstable_ImmediatePriority,wA=_t.unstable_UserBlockingPriority,bf=_t.unstable_NormalPriority,NQ=_t.unstable_LowPriority,jA=_t.unstable_IdlePriority,SQ=_t.log,kQ=_t.unstable_setDisableYieldValue,hu=null,Sn=null;function na(e){if(typeof SQ=="function"&&kQ(e),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(hu,e)}catch{}}var kn=Math.clz32?Math.clz32:_Q,CQ=Math.log,EQ=Math.LN2;function _Q(e){return e>>>=0,e===0?32:31-(CQ(e)/EQ|0)|0}var rd=256,ad=4194304;function $a(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Om(e,t,n){var s=e.pendingLanes;if(s===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var l=s&134217727;return l!==0?(s=l&~i,s!==0?r=$a(s):(o&=l,o!==0?r=$a(o):n||(n=l&~e,n!==0&&(r=$a(n))))):(l=s&~i,l!==0?r=$a(l):o!==0?r=$a(o):n||(n=s&~e,n!==0&&(r=$a(n)))),r===0?0:t!==0&&t!==r&&!(t&i)&&(i=r&-r,n=t&-t,i>=n||i===32&&(n&4194048)!==0)?t:r}function gu(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function AQ(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NA(){var e=rd;return rd<<=1,!(rd&4194048)&&(rd=256),e}function SA(){var e=ad;return ad<<=1,!(ad&62914560)&&(ad=4194304),e}function Yh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pu(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function TQ(e,t,n,s,r,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var d=31-kn(n),f=1<<d;l[d]=0,c[d]=-1;var m=u[d];if(m!==null)for(u[d]=null,d=0;d<m.length;d++){var h=m[d];h!==null&&(h.lane&=-536870913)}n&=~f}s!==0&&kA(e,s,0),i!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=i&~(o&~t))}function kA(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-kn(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194090}function CA(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-kn(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}function hv(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function gv(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function EA(){var e=Oe.p;return e!==0?e:(e=window.event,e===void 0?32:ZM(e.type))}function MQ(e,t){var n=Oe.p;try{return Oe.p=e,t()}finally{Oe.p=n}}var _a=Math.random().toString(36).slice(2),qt="__reactFiber$"+_a,dn="__reactProps$"+_a,vl="__reactContainer$"+_a,Mp="__reactEvents$"+_a,RQ="__reactListeners$"+_a,DQ="__reactHandles$"+_a,rj="__reactResources$"+_a,xu="__reactMarker$"+_a;function pv(e){delete e[qt],delete e[dn],delete e[Mp],delete e[RQ],delete e[DQ]}function eo(e){var t=e[qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vl]||n[qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dN(e);e!==null;){if(n=e[qt])return n;e=dN(e)}return t}e=n,n=e.parentNode}return null}function yl(e){if(e=e[qt]||e[vl]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Yl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(Y(33))}function bo(e){var t=e[rj];return t||(t=e[rj]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Mt(e){e[xu]=!0}var _A=new Set,AA={};function Ti(e,t){Yo(e,t),Yo(e+"Capture",t)}function Yo(e,t){for(AA[e]=t,e=0;e<t.length;e++)_A.add(t[e])}var zQ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),aj={},ij={};function LQ(e){return Tp.call(ij,e)?!0:Tp.call(aj,e)?!1:zQ.test(e)?ij[e]=!0:(aj[e]=!0,!1)}function Ed(e,t,n){if(LQ(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function id(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function tr(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}var Xh,oj;function Gi(e){if(Xh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xh=t&&t[1]||"",oj=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xh+e+oj}var Wh=!1;function Kh(e,t){if(!e||Wh)return"";Wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(h){var m=h}Reflect.construct(e,[],f)}else{try{f.call()}catch(h){m=h}e.call(f.prototype)}}else{try{throw Error()}catch(h){m=h}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),o=i[0],l=i[1];if(o&&l){var c=o.split(`
`),u=l.split(`
`);for(r=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(s===c.length||r===u.length)for(s=c.length-1,r=u.length-1;1<=s&&0<=r&&c[s]!==u[r];)r--;for(;1<=s&&0<=r;s--,r--)if(c[s]!==u[r]){if(s!==1||r!==1)do if(s--,r--,0>r||c[s]!==u[r]){var d=`
`+c[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=s&&0<=r);break}}}finally{Wh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Gi(n):""}function $Q(e){switch(e.tag){case 26:case 27:case 5:return Gi(e.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 15:return Kh(e.type,!1);case 11:return Kh(e.type.render,!1);case 1:return Kh(e.type,!0);case 31:return Gi("Activity");default:return""}}function lj(e){try{var t="";do t+=$Q(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Pn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function TA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PQ(e){var t=TA(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wf(e){e._valueTracker||(e._valueTracker=PQ(e))}function MA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=TA(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function jf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var OQ=/[\n"\\]/g;function Hn(e){return e.replace(OQ,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Rp(e,t,n,s,r,i,o,l){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Pn(t)):e.value!==""+Pn(t)&&(e.value=""+Pn(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?Dp(e,o,Pn(t)):n!=null?Dp(e,o,Pn(n)):s!=null&&e.removeAttribute("value"),r==null&&i!=null&&(e.defaultChecked=!!i),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Pn(l):e.removeAttribute("name")}function RA(e,t,n,s,r,i,o,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||t!=null))return;n=n!=null?""+Pn(n):"",t=t!=null?""+Pn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function Dp(e,t,n){t==="number"&&jf(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wo(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Pn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function DA(e,t,n){if(t!=null&&(t=""+Pn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Pn(n):""}function zA(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(Y(92));if(Gl(s)){if(1<s.length)throw Error(Y(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=Pn(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function Xo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var BQ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cj(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||BQ.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function LA(e,t,n){if(t!=null&&typeof t!="object")throw Error(Y(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&n[r]!==s&&cj(e,r,s)}else for(var i in t)t.hasOwnProperty(i)&&cj(e,i,t[i])}function xv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IQ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HQ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _d(e){return HQ.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var zp=null;function vv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var to=null,jo=null;function uj(e){var t=yl(e);if(t&&(e=t.stateNode)){var n=e[dn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Rp(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Hn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=s[dn]||null;if(!r)throw Error(Y(90));Rp(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&MA(s)}break e;case"textarea":DA(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&wo(e,!!n.multiple,t,!1)}}}var Qh=!1;function $A(e,t,n){if(Qh)return e(t,n);Qh=!0;try{var s=e(t);return s}finally{if(Qh=!1,(to!==null||jo!==null)&&(Ym(),to&&(t=to,e=jo,jo=to=null,uj(t),e)))for(t=0;t<e.length;t++)uj(e[t])}}function Rc(e,t){var n=e.stateNode;if(n===null)return null;var s=n[dn]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lp=!1;if(kr)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){Lp=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{Lp=!1}var sa=null,yv=null,Ad=null;function PA(){if(Ad)return Ad;var e,t=yv,n=t.length,s,r="value"in sa?sa.value:sa.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===r[i-s];s++);return Ad=r.slice(e,1<s?1-s:void 0)}function Td(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function od(){return!0}function dj(){return!1}function gn(e){function t(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?od:dj,this.isPropagationStopped=dj,this}return Qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),t}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bm=gn(Mi),vu=Qe({},Mi,{view:0,detail:0}),FQ=gn(vu),Jh,eg,$l,Im=Qe({},vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$l&&($l&&e.type==="mousemove"?(Jh=e.screenX-$l.screenX,eg=e.screenY-$l.screenY):eg=Jh=0,$l=e),Jh)},movementY:function(e){return"movementY"in e?e.movementY:eg}}),fj=gn(Im),UQ=Qe({},Im,{dataTransfer:0}),VQ=gn(UQ),qQ=Qe({},vu,{relatedTarget:0}),tg=gn(qQ),ZQ=Qe({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),GQ=gn(ZQ),YQ=Qe({},Mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),XQ=gn(YQ),WQ=Qe({},Mi,{data:0}),mj=gn(WQ),KQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eJ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=JQ[e])?!!t[e]:!1}function bv(){return eJ}var tJ=Qe({},vu,{key:function(e){if(e.key){var t=KQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Td(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?QQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bv,charCode:function(e){return e.type==="keypress"?Td(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Td(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nJ=gn(tJ),sJ=Qe({},Im,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hj=gn(sJ),rJ=Qe({},vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bv}),aJ=gn(rJ),iJ=Qe({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),oJ=gn(iJ),lJ=Qe({},Im,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cJ=gn(lJ),uJ=Qe({},Mi,{newState:0,oldState:0}),dJ=gn(uJ),fJ=[9,13,27,32],wv=kr&&"CompositionEvent"in window,Jl=null;kr&&"documentMode"in document&&(Jl=document.documentMode);var mJ=kr&&"TextEvent"in window&&!Jl,OA=kr&&(!wv||Jl&&8<Jl&&11>=Jl),gj=" ",pj=!1;function BA(e,t){switch(e){case"keyup":return fJ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var no=!1;function hJ(e,t){switch(e){case"compositionend":return IA(t);case"keypress":return t.which!==32?null:(pj=!0,gj);case"textInput":return e=t.data,e===gj&&pj?null:e;default:return null}}function gJ(e,t){if(no)return e==="compositionend"||!wv&&BA(e,t)?(e=PA(),Ad=yv=sa=null,no=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return OA&&t.locale!=="ko"?null:t.data;default:return null}}var pJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pJ[e.type]:t==="textarea"}function HA(e,t,n,s){to?jo?jo.push(s):jo=[s]:to=s,t=If(t,"onChange"),0<t.length&&(n=new Bm("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var ec=null,Dc=null;function xJ(e){DM(e,0)}function Hm(e){var t=Yl(e);if(MA(t))return e}function vj(e,t){if(e==="change")return t}var FA=!1;if(kr){var ng;if(kr){var sg="oninput"in document;if(!sg){var yj=document.createElement("div");yj.setAttribute("oninput","return;"),sg=typeof yj.oninput=="function"}ng=sg}else ng=!1;FA=ng&&(!document.documentMode||9<document.documentMode)}function bj(){ec&&(ec.detachEvent("onpropertychange",UA),Dc=ec=null)}function UA(e){if(e.propertyName==="value"&&Hm(Dc)){var t=[];HA(t,Dc,e,vv(e)),$A(xJ,t)}}function vJ(e,t,n){e==="focusin"?(bj(),ec=t,Dc=n,ec.attachEvent("onpropertychange",UA)):e==="focusout"&&bj()}function yJ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hm(Dc)}function bJ(e,t){if(e==="click")return Hm(t)}function wJ(e,t){if(e==="input"||e==="change")return Hm(t)}function jJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mn=typeof Object.is=="function"?Object.is:jJ;function zc(e,t){if(Mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Tp.call(t,r)||!Mn(e[r],t[r]))return!1}return!0}function wj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jj(e,t){var n=wj(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wj(n)}}function VA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?VA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qA(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=jf(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=jf(e.document)}return t}function jv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var NJ=kr&&"documentMode"in document&&11>=document.documentMode,so=null,$p=null,tc=null,Pp=!1;function Nj(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pp||so==null||so!==jf(s)||(s=so,"selectionStart"in s&&jv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),tc&&zc(tc,s)||(tc=s,s=If($p,"onSelect"),0<s.length&&(t=new Bm("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=so)))}function za(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ro={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionrun:za("Transition","TransitionRun"),transitionstart:za("Transition","TransitionStart"),transitioncancel:za("Transition","TransitionCancel"),transitionend:za("Transition","TransitionEnd")},rg={},ZA={};kr&&(ZA=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function Ri(e){if(rg[e])return rg[e];if(!ro[e])return e;var t=ro[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ZA)return rg[e]=t[n];return e}var GA=Ri("animationend"),YA=Ri("animationiteration"),XA=Ri("animationstart"),SJ=Ri("transitionrun"),kJ=Ri("transitionstart"),CJ=Ri("transitioncancel"),WA=Ri("transitionend"),KA=new Map,Op="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Op.push("scrollEnd");function gs(e,t){KA.set(e,t),Ti(t,[e])}var Sj=new WeakMap;function Fn(e,t){if(typeof e=="object"&&e!==null){var n=Sj.get(e);return n!==void 0?n:(t={value:e,source:t,stack:lj(t)},Sj.set(e,t),t)}return{value:e,source:t,stack:lj(t)}}var $n=[],ao=0,Nv=0;function Fm(){for(var e=ao,t=Nv=ao=0;t<e;){var n=$n[t];$n[t++]=null;var s=$n[t];$n[t++]=null;var r=$n[t];$n[t++]=null;var i=$n[t];if($n[t++]=null,s!==null&&r!==null){var o=s.pending;o===null?r.next=r:(r.next=o.next,o.next=r),s.pending=r}i!==0&&QA(n,r,i)}}function Um(e,t,n,s){$n[ao++]=e,$n[ao++]=t,$n[ao++]=n,$n[ao++]=s,Nv|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Sv(e,t,n,s){return Um(e,t,n,s),Nf(e)}function bl(e,t){return Um(e,null,null,t),Nf(e)}function QA(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var r=!1,i=e.return;i!==null;)i.childLanes|=n,s=i.alternate,s!==null&&(s.childLanes|=n),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(r=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,r&&t!==null&&(r=31-kn(n),e=i.hiddenUpdates,s=e[r],s===null?e[r]=[t]:s.push(t),t.lane=n|536870912),i):null}function Nf(e){if(50<dc)throw dc=0,ax=null,Error(Y(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var io={};function EJ(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(e,t,n,s){return new EJ(e,t,n,s)}function kv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gr(e,t){var n=e.alternate;return n===null?(n=jn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function JA(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Md(e,t,n,s,r,i){var o=0;if(s=e,typeof e=="function")kv(e)&&(o=1);else if(typeof e=="string")o=Aee(e,n,Ds.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Cp:return e=jn(31,n,t,r),e.elementType=Cp,e.lanes=i,e;case Qi:return Xa(n.children,r,i,t);case vA:o=8,r|=24;break;case Np:return e=jn(12,n,t,r|2),e.elementType=Np,e.lanes=i,e;case Sp:return e=jn(13,n,t,r),e.elementType=Sp,e.lanes=i,e;case kp:return e=jn(19,n,t,r),e.elementType=kp,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xQ:case lr:o=10;break e;case yA:o=9;break e;case dv:o=11;break e;case fv:o=14;break e;case qr:o=16,s=null;break e}o=29,n=Error(Y(130,e===null?"null":typeof e,"")),s=null}return t=jn(o,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function Xa(e,t,n,s){return e=jn(7,e,s,t),e.lanes=n,e}function ag(e,t,n){return e=jn(6,e,null,t),e.lanes=n,e}function ig(e,t,n){return t=jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var oo=[],lo=0,Sf=null,kf=0,On=[],Bn=0,Wa=null,cr=1,ur="";function Pa(e,t){oo[lo++]=kf,oo[lo++]=Sf,Sf=e,kf=t}function eT(e,t,n){On[Bn++]=cr,On[Bn++]=ur,On[Bn++]=Wa,Wa=e;var s=cr;e=ur;var r=32-kn(s)-1;s&=~(1<<r),n+=1;var i=32-kn(t)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,cr=1<<32-kn(t)+r|n<<r|s,ur=i+e}else cr=1<<i|n<<r|s,ur=e}function Cv(e){e.return!==null&&(Pa(e,1),eT(e,1,0))}function Ev(e){for(;e===Sf;)Sf=oo[--lo],oo[lo]=null,kf=oo[--lo],oo[lo]=null;for(;e===Wa;)Wa=On[--Bn],On[Bn]=null,ur=On[--Bn],On[Bn]=null,cr=On[--Bn],On[Bn]=null}var Yt=null,ut=null,Pe=!1,Ka=null,ks=!1,Bp=Error(Y(519));function fi(e){var t=Error(Y(418,""));throw Lc(Fn(t,e)),Bp}function kj(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[qt]=e,t[dn]=s,n){case"dialog":Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":case"embed":Ee("load",t);break;case"video":case"audio":for(n=0;n<Oc.length;n++)Ee(Oc[n],t);break;case"source":Ee("error",t);break;case"img":case"image":case"link":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"input":Ee("invalid",t),RA(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),wf(t);break;case"select":Ee("invalid",t);break;case"textarea":Ee("invalid",t),zA(t,s.value,s.defaultValue,s.children),wf(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||LM(t.textContent,n)?(s.popover!=null&&(Ee("beforetoggle",t),Ee("toggle",t)),s.onScroll!=null&&Ee("scroll",t),s.onScrollEnd!=null&&Ee("scrollend",t),s.onClick!=null&&(t.onclick=Km),t=!0):t=!1,t||fi(e)}function Cj(e){for(Yt=e.return;Yt;)switch(Yt.tag){case 5:case 13:ks=!1;return;case 27:case 3:ks=!0;return;default:Yt=Yt.return}}function Pl(e){if(e!==Yt)return!1;if(!Pe)return Cj(e),Pe=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||dx(e.type,e.memoizedProps)),n=!n),n&&ut&&fi(e),Cj(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){ut=os(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}ut=null}}else t===27?(t=ut,Aa(e.type)?(e=hx,hx=null,ut=e):ut=t):ut=Yt?os(e.stateNode.nextSibling):null;return!0}function yu(){ut=Yt=null,Pe=!1}function Ej(){var e=Ka;return e!==null&&(an===null?an=e:an.push.apply(an,e),Ka=null),e}function Lc(e){Ka===null?Ka=[e]:Ka.push(e)}var Ip=Vs(null),Di=null,dr=null;function Wr(e,t,n){tt(Ip,t._currentValue),t._currentValue=n}function pr(e){e._currentValue=Ip.current,zt(Ip)}function Hp(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Fp(e,t,n,s){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var i=r.dependencies;if(i!==null){var o=r.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Hp(i.return,n,e),s||(o=null);break e}i=l.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(Y(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),Hp(o,n,e),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function bu(e,t,n,s){e=null;for(var r=t,i=!1;r!==null;){if(!i){if(r.flags&524288)i=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(Y(387));if(o=o.memoizedProps,o!==null){var l=r.type;Mn(r.pendingProps.value,o.value)||(e!==null?e.push(l):e=[l])}}else if(r===xf.current){if(o=r.alternate,o===null)throw Error(Y(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Hc):e=[Hc])}r=r.return}e!==null&&Fp(t,e,n,s),t.flags|=262144}function Cf(e){for(e=e.firstContext;e!==null;){if(!Mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function mi(e){Di=e,dr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Zt(e){return tT(Di,e)}function ld(e,t){return Di===null&&mi(e),tT(e,t)}function tT(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},dr===null){if(e===null)throw Error(Y(308));dr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else dr=dr.next=t;return n}var _J=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},AJ=_t.unstable_scheduleCallback,TJ=_t.unstable_NormalPriority,Ct={$$typeof:lr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _v(){return{controller:new _J,data:new Map,refCount:0}}function wu(e){e.refCount--,e.refCount===0&&AJ(TJ,function(){e.controller.abort()})}var nc=null,Up=0,Wo=0,No=null;function MJ(e,t){if(nc===null){var n=nc=[];Up=0,Wo=Kv(),No={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Up++,t.then(_j,_j),t}function _j(){if(--Up===0&&nc!==null){No!==null&&(No.status="fulfilled");var e=nc;nc=null,Wo=0,No=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function RJ(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var Aj=ge.S;ge.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&MJ(e,t),Aj!==null&&Aj(e,t)};var Qa=Vs(null);function Av(){var e=Qa.current;return e!==null?e:We.pooledCache}function Rd(e,t){t===null?tt(Qa,Qa.current):tt(Qa,t.pool)}function nT(){var e=Av();return e===null?null:{parent:Ct._currentValue,pool:e}}var ju=Error(Y(460)),sT=Error(Y(474)),Vm=Error(Y(542)),Vp={then:function(){}};function Tj(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cd(){}function rT(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(cd,cd),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Rj(e),e;default:if(typeof t.status=="string")t.then(cd,cd);else{if(e=We,e!==null&&100<e.shellSuspendCounter)throw Error(Y(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=s}},function(s){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Rj(e),e}throw sc=t,ju}}var sc=null;function Mj(){if(sc===null)throw Error(Y(459));var e=sc;return sc=null,e}function Rj(e){if(e===ju||e===Vm)throw Error(Y(483))}var Zr=!1;function Tv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function da(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function fa(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ue&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=Nf(e),QA(e,null,n),t}return Um(e,s,t,n),Nf(e)}function rc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,CA(e,n)}}function og(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Zp=!1;function ac(){if(Zp){var e=No;if(e!==null)throw e}}function ic(e,t,n,s){Zp=!1;var r=e.updateQueue;Zr=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane&-536870913,h=m!==l.lane;if(h?(De&m)===m:(s&m)===m){m!==0&&m===Wo&&(Zp=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var p=e,v=l;m=t;var b=n;switch(v.tag){case 1:if(p=v.payload,typeof p=="function"){f=p.call(b,f,m);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,m=typeof p=="function"?p.call(b,f,m):p,m==null)break e;f=Qe({},f,m);break e;case 2:Zr=!0}}m=l.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[m]:h.push(m))}else h={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);d===null&&(c=f),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,i===null&&(r.shared.lanes=0),ja|=o,e.lanes=o,e.memoizedState=f}}function aT(e,t){if(typeof e!="function")throw Error(Y(191,e));e.call(t)}function iT(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)aT(n[e],t)}var Ko=Vs(null),Ef=Vs(0);function Dj(e,t){e=_r,tt(Ef,e),tt(Ko,t),_r=e|t.baseLanes}function Gp(){tt(Ef,_r),tt(Ko,Ko.current)}function Mv(){_r=Ef.current,zt(Ko),zt(Ef)}var ba=0,ke=null,qe=null,wt=null,_f=!1,So=!1,hi=!1,Af=0,$c=0,ko=null,DJ=0;function gt(){throw Error(Y(321))}function Rv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mn(e[n],t[n]))return!1;return!0}function Dv(e,t,n,s,r,i){return ba=i,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ge.H=e===null||e.memoizedState===null?PT:OT,hi=!1,i=n(s,r),hi=!1,So&&(i=lT(t,n,s,r)),oT(e),i}function oT(e){ge.H=Tf;var t=qe!==null&&qe.next!==null;if(ba=0,wt=qe=ke=null,_f=!1,$c=0,ko=null,t)throw Error(Y(300));e===null||Rt||(e=e.dependencies,e!==null&&Cf(e)&&(Rt=!0))}function lT(e,t,n,s){ke=e;var r=0;do{if(So&&(ko=null),$c=0,So=!1,25<=r)throw Error(Y(301));if(r+=1,wt=qe=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}ge.H=IJ,i=t(n,s)}while(So);return i}function zJ(){var e=ge.H,t=e.useState()[0];return t=typeof t.then=="function"?Nu(t):t,e=e.useState()[0],(qe!==null?qe.memoizedState:null)!==e&&(ke.flags|=1024),t}function zv(){var e=Af!==0;return Af=0,e}function Lv(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function $v(e){if(_f){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}_f=!1}ba=0,wt=qe=ke=null,So=!1,$c=Af=0,ko=null}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?ke.memoizedState=wt=e:wt=wt.next=e,wt}function jt(){if(qe===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var t=wt===null?ke.memoizedState:wt.next;if(t!==null)wt=t,qe=e;else{if(e===null)throw ke.alternate===null?Error(Y(467)):Error(Y(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},wt===null?ke.memoizedState=wt=e:wt=wt.next=e}return wt}function Pv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nu(e){var t=$c;return $c+=1,ko===null&&(ko=[]),e=rT(ko,e,t),t=ke,(wt===null?t.memoizedState:wt.next)===null&&(t=t.alternate,ge.H=t===null||t.memoizedState===null?PT:OT),e}function qm(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Nu(e);if(e.$$typeof===lr)return Zt(e)}throw Error(Y(438,String(e)))}function Ov(e){var t=null,n=ke.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=ke.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Pv(),ke.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=vQ;return t.index++,n}function Cr(e,t){return typeof t=="function"?t(e):t}function Dd(e){var t=jt();return Bv(t,qe,e)}function Bv(e,t,n){var s=e.queue;if(s===null)throw Error(Y(311));s.lastRenderedReducer=n;var r=e.baseQueue,i=s.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}t.baseQueue=r=i,s.pending=null}if(i=e.baseState,r===null)e.memoizedState=i;else{t=r.next;var l=o=null,c=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(De&f)===f:(ba&f)===f){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Wo&&(d=!0);else if((ba&m)===m){u=u.next,m===Wo&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=f,o=i):c=c.next=f,ke.lanes|=m,ja|=m;f=u.action,hi&&n(i,f),i=u.hasEagerState?u.eagerState:n(i,f)}else m={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=m,o=i):c=c.next=m,ke.lanes|=f,ja|=f;u=u.next}while(u!==null&&u!==t);if(c===null?o=i:c.next=l,!Mn(i,e.memoizedState)&&(Rt=!0,d&&(n=No,n!==null)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,s.lastRenderedState=i}return r===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function lg(e){var t=jt(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=e(i,o.action),o=o.next;while(o!==r);Mn(i,t.memoizedState)||(Rt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function cT(e,t,n){var s=ke,r=jt(),i=Pe;if(i){if(n===void 0)throw Error(Y(407));n=n()}else n=t();var o=!Mn((qe||r).memoizedState,n);o&&(r.memoizedState=n,Rt=!0),r=r.queue;var l=fT.bind(null,s,r,e);if(Su(2048,8,l,[e]),r.getSnapshot!==t||o||wt!==null&&wt.memoizedState.tag&1){if(s.flags|=2048,Qo(9,Zm(),dT.bind(null,s,r,n,t),null),We===null)throw Error(Y(349));i||ba&124||uT(s,t,n)}return n}function uT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t=Pv(),ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function dT(e,t,n,s){t.value=n,t.getSnapshot=s,mT(t)&&hT(e)}function fT(e,t,n){return n(function(){mT(t)&&hT(e)})}function mT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mn(e,n)}catch{return!0}}function hT(e){var t=bl(e,2);t!==null&&En(t,e,2)}function Yp(e){var t=sn();if(typeof e=="function"){var n=e;if(e=n(),hi){na(!0);try{n()}finally{na(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:e},t}function gT(e,t,n,s){return e.baseState=n,Bv(e,qe,typeof s=="function"?s:Cr)}function LJ(e,t,n,s,r){if(Gm(e))throw Error(Y(485));if(e=t.action,e!==null){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){i.listeners.push(o)}};ge.T!==null?n(!0):i.isTransition=!1,s(i),n=t.pending,n===null?(i.next=t.pending=i,pT(t,i)):(i.next=n.next,t.pending=n.next=i)}}function pT(e,t){var n=t.action,s=t.payload,r=e.state;if(t.isTransition){var i=ge.T,o={};ge.T=o;try{var l=n(r,s),c=ge.S;c!==null&&c(o,l),zj(e,t,l)}catch(u){Xp(e,t,u)}finally{ge.T=i}}else try{i=n(r,s),zj(e,t,i)}catch(u){Xp(e,t,u)}}function zj(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Lj(e,t,s)},function(s){return Xp(e,t,s)}):Lj(e,t,n)}function Lj(e,t,n){t.status="fulfilled",t.value=n,xT(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,pT(e,n)))}function Xp(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,xT(t),t=t.next;while(t!==s)}e.action=null}function xT(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function vT(e,t){return t}function $j(e,t){if(Pe){var n=We.formState;if(n!==null){e:{var s=ke;if(Pe){if(ut){t:{for(var r=ut,i=ks;r.nodeType!==8;){if(!i){r=null;break t}if(r=os(r.nextSibling),r===null){r=null;break t}}i=r.data,r=i==="F!"||i==="F"?r:null}if(r){ut=os(r.nextSibling),s=r.data==="F!";break e}}fi(s)}s=!1}s&&(t=n[0])}}return n=sn(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vT,lastRenderedState:t},n.queue=s,n=zT.bind(null,ke,s),s.dispatch=n,s=Yp(!1),i=Uv.bind(null,ke,!1,s.queue),s=sn(),r={state:t,dispatch:null,action:e,pending:null},s.queue=r,n=LJ.bind(null,ke,r,i,n),r.dispatch=n,s.memoizedState=e,[t,n,!1]}function Pj(e){var t=jt();return yT(t,qe,e)}function yT(e,t,n){if(t=Bv(e,t,vT)[0],e=Dd(Cr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Nu(t)}catch(o){throw o===ju?Vm:o}else s=t;t=jt();var r=t.queue,i=r.dispatch;return n!==t.memoizedState&&(ke.flags|=2048,Qo(9,Zm(),$J.bind(null,r,n),null)),[s,i,e]}function $J(e,t){e.action=t}function Oj(e){var t=jt(),n=qe;if(n!==null)return yT(t,n,e);jt(),t=t.memoizedState,n=jt();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function Qo(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},t=ke.updateQueue,t===null&&(t=Pv(),ke.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Zm(){return{destroy:void 0,resource:void 0}}function bT(){return jt().memoizedState}function zd(e,t,n,s){var r=sn();s=s===void 0?null:s,ke.flags|=e,r.memoizedState=Qo(1|t,Zm(),n,s)}function Su(e,t,n,s){var r=jt();s=s===void 0?null:s;var i=r.memoizedState.inst;qe!==null&&s!==null&&Rv(s,qe.memoizedState.deps)?r.memoizedState=Qo(t,i,n,s):(ke.flags|=e,r.memoizedState=Qo(1|t,i,n,s))}function Bj(e,t){zd(8390656,8,e,t)}function wT(e,t){Su(2048,8,e,t)}function jT(e,t){return Su(4,2,e,t)}function NT(e,t){return Su(4,4,e,t)}function ST(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kT(e,t,n){n=n!=null?n.concat([e]):null,Su(4,4,ST.bind(null,t,e),n)}function Iv(){}function CT(e,t){var n=jt();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&Rv(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function ET(e,t){var n=jt();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&Rv(t,s[1]))return s[0];if(s=e(),hi){na(!0);try{e()}finally{na(!1)}}return n.memoizedState=[s,t],s}function Hv(e,t,n){return n===void 0||ba&1073741824?e.memoizedState=t:(e.memoizedState=n,e=xM(),ke.lanes|=e,ja|=e,n)}function _T(e,t,n,s){return Mn(n,t)?n:Ko.current!==null?(e=Hv(e,n,s),Mn(e,t)||(Rt=!0),e):ba&42?(e=xM(),ke.lanes|=e,ja|=e,t):(Rt=!0,e.memoizedState=n)}function AT(e,t,n,s,r){var i=Oe.p;Oe.p=i!==0&&8>i?i:8;var o=ge.T,l={};ge.T=l,Uv(e,!1,t,n);try{var c=r(),u=ge.S;if(u!==null&&u(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=RJ(c,s);oc(e,t,d,Cn(e))}else oc(e,t,s,Cn(e))}catch(f){oc(e,t,{then:function(){},status:"rejected",reason:f},Cn())}finally{Oe.p=i,ge.T=o}}function PJ(){}function Wp(e,t,n,s){if(e.tag!==5)throw Error(Y(476));var r=TT(e).queue;AT(e,r,t,Ya,n===null?PJ:function(){return MT(e),n(s)})}function TT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ya,baseState:Ya,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:Ya},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function MT(e){var t=TT(e).next.queue;oc(e,t,{},Cn())}function Fv(){return Zt(Hc)}function RT(){return jt().memoizedState}function DT(){return jt().memoizedState}function OJ(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Cn();e=da(n);var s=fa(t,e,n);s!==null&&(En(s,t,n),rc(s,t,n)),t={cache:_v()},e.payload=t;return}t=t.return}}function BJ(e,t,n){var s=Cn();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Gm(e)?LT(t,n):(n=Sv(e,t,n,s),n!==null&&(En(n,e,s),$T(n,t,s)))}function zT(e,t,n){var s=Cn();oc(e,t,n,s)}function oc(e,t,n,s){var r={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gm(e))LT(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(r.hasEagerState=!0,r.eagerState=l,Mn(l,o))return Um(e,t,r,0),We===null&&Fm(),!1}catch{}finally{}if(n=Sv(e,t,r,s),n!==null)return En(n,e,s),$T(n,t,s),!0}return!1}function Uv(e,t,n,s){if(s={lane:2,revertLane:Kv(),action:s,hasEagerState:!1,eagerState:null,next:null},Gm(e)){if(t)throw Error(Y(479))}else t=Sv(e,n,s,2),t!==null&&En(t,e,2)}function Gm(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function LT(e,t){So=_f=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $T(e,t,n){if(n&4194048){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,CA(e,n)}}var Tf={readContext:Zt,use:qm,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},PT={readContext:Zt,use:qm,useCallback:function(e,t){return sn().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:Bj,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,zd(4194308,4,ST.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zd(4194308,4,e,t)},useInsertionEffect:function(e,t){zd(4,2,e,t)},useMemo:function(e,t){var n=sn();t=t===void 0?null:t;var s=e();if(hi){na(!0);try{e()}finally{na(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=sn();if(n!==void 0){var r=n(t);if(hi){na(!0);try{n(t)}finally{na(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=BJ.bind(null,ke,e),[s.memoizedState,e]},useRef:function(e){var t=sn();return e={current:e},t.memoizedState=e},useState:function(e){e=Yp(e);var t=e.queue,n=zT.bind(null,ke,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Iv,useDeferredValue:function(e,t){var n=sn();return Hv(n,e,t)},useTransition:function(){var e=Yp(!1);return e=AT.bind(null,ke,e.queue,!0,!1),sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=ke,r=sn();if(Pe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),We===null)throw Error(Y(349));De&124||uT(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Bj(fT.bind(null,s,i,e),[e]),s.flags|=2048,Qo(9,Zm(),dT.bind(null,s,i,n,t),null),n},useId:function(){var e=sn(),t=We.identifierPrefix;if(Pe){var n=ur,s=cr;n=(s&~(1<<32-kn(s)-1)).toString(32)+n,t=""+t+"R"+n,n=Af++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=DJ++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Fv,useFormState:$j,useActionState:$j,useOptimistic:function(e){var t=sn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Uv.bind(null,ke,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ov,useCacheRefresh:function(){return sn().memoizedState=OJ.bind(null,ke)}},OT={readContext:Zt,use:qm,useCallback:CT,useContext:Zt,useEffect:wT,useImperativeHandle:kT,useInsertionEffect:jT,useLayoutEffect:NT,useMemo:ET,useReducer:Dd,useRef:bT,useState:function(){return Dd(Cr)},useDebugValue:Iv,useDeferredValue:function(e,t){var n=jt();return _T(n,qe.memoizedState,e,t)},useTransition:function(){var e=Dd(Cr)[0],t=jt().memoizedState;return[typeof e=="boolean"?e:Nu(e),t]},useSyncExternalStore:cT,useId:RT,useHostTransitionStatus:Fv,useFormState:Pj,useActionState:Pj,useOptimistic:function(e,t){var n=jt();return gT(n,qe,e,t)},useMemoCache:Ov,useCacheRefresh:DT},IJ={readContext:Zt,use:qm,useCallback:CT,useContext:Zt,useEffect:wT,useImperativeHandle:kT,useInsertionEffect:jT,useLayoutEffect:NT,useMemo:ET,useReducer:lg,useRef:bT,useState:function(){return lg(Cr)},useDebugValue:Iv,useDeferredValue:function(e,t){var n=jt();return qe===null?Hv(n,e,t):_T(n,qe.memoizedState,e,t)},useTransition:function(){var e=lg(Cr)[0],t=jt().memoizedState;return[typeof e=="boolean"?e:Nu(e),t]},useSyncExternalStore:cT,useId:RT,useHostTransitionStatus:Fv,useFormState:Oj,useActionState:Oj,useOptimistic:function(e,t){var n=jt();return qe!==null?gT(n,qe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ov,useCacheRefresh:DT},Co=null,Pc=0;function ud(e){var t=Pc;return Pc+=1,Co===null&&(Co=[]),rT(Co,e,t)}function Ol(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function dd(e,t){throw t.$$typeof===pQ?Error(Y(525)):(e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ij(e){var t=e._init;return t(e._payload)}function BT(e){function t(x,y){if(e){var w=x.deletions;w===null?(x.deletions=[y],x.flags|=16):w.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function s(x){for(var y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function r(x,y){return x=gr(x,y),x.index=0,x.sibling=null,x}function i(x,y,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<y?(x.flags|=67108866,y):w):(x.flags|=67108866,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function l(x,y,w,j){return y===null||y.tag!==6?(y=ag(w,x.mode,j),y.return=x,y):(y=r(y,w),y.return=x,y)}function c(x,y,w,j){var N=w.type;return N===Qi?d(x,y,w.props.children,j,w.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===qr&&Ij(N)===y.type)?(y=r(y,w.props),Ol(y,w),y.return=x,y):(y=Md(w.type,w.key,w.props,null,x.mode,j),Ol(y,w),y.return=x,y)}function u(x,y,w,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=ig(w,x.mode,j),y.return=x,y):(y=r(y,w.children||[]),y.return=x,y)}function d(x,y,w,j,N){return y===null||y.tag!==7?(y=Xa(w,x.mode,j,N),y.return=x,y):(y=r(y,w),y.return=x,y)}function f(x,y,w){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=ag(""+y,x.mode,w),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case sd:return w=Md(y.type,y.key,y.props,null,x.mode,w),Ol(w,y),w.return=x,w;case Zl:return y=ig(y,x.mode,w),y.return=x,y;case qr:var j=y._init;return y=j(y._payload),f(x,y,w)}if(Gl(y)||zl(y))return y=Xa(y,x.mode,w,null),y.return=x,y;if(typeof y.then=="function")return f(x,ud(y),w);if(y.$$typeof===lr)return f(x,ld(x,y),w);dd(x,y)}return null}function m(x,y,w,j){var N=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return N!==null?null:l(x,y,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case sd:return w.key===N?c(x,y,w,j):null;case Zl:return w.key===N?u(x,y,w,j):null;case qr:return N=w._init,w=N(w._payload),m(x,y,w,j)}if(Gl(w)||zl(w))return N!==null?null:d(x,y,w,j,null);if(typeof w.then=="function")return m(x,y,ud(w),j);if(w.$$typeof===lr)return m(x,y,ld(x,w),j);dd(x,w)}return null}function h(x,y,w,j,N){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return x=x.get(w)||null,l(y,x,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case sd:return x=x.get(j.key===null?w:j.key)||null,c(y,x,j,N);case Zl:return x=x.get(j.key===null?w:j.key)||null,u(y,x,j,N);case qr:var S=j._init;return j=S(j._payload),h(x,y,w,j,N)}if(Gl(j)||zl(j))return x=x.get(w)||null,d(y,x,j,N,null);if(typeof j.then=="function")return h(x,y,w,ud(j),N);if(j.$$typeof===lr)return h(x,y,w,ld(y,j),N);dd(y,j)}return null}function p(x,y,w,j){for(var N=null,S=null,k=y,E=y=0,C=null;k!==null&&E<w.length;E++){k.index>E?(C=k,k=null):C=k.sibling;var _=m(x,k,w[E],j);if(_===null){k===null&&(k=C);break}e&&k&&_.alternate===null&&t(x,k),y=i(_,y,E),S===null?N=_:S.sibling=_,S=_,k=C}if(E===w.length)return n(x,k),Pe&&Pa(x,E),N;if(k===null){for(;E<w.length;E++)k=f(x,w[E],j),k!==null&&(y=i(k,y,E),S===null?N=k:S.sibling=k,S=k);return Pe&&Pa(x,E),N}for(k=s(k);E<w.length;E++)C=h(k,x,E,w[E],j),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?E:C.key),y=i(C,y,E),S===null?N=C:S.sibling=C,S=C);return e&&k.forEach(function(P){return t(x,P)}),Pe&&Pa(x,E),N}function v(x,y,w,j){if(w==null)throw Error(Y(151));for(var N=null,S=null,k=y,E=y=0,C=null,_=w.next();k!==null&&!_.done;E++,_=w.next()){k.index>E?(C=k,k=null):C=k.sibling;var P=m(x,k,_.value,j);if(P===null){k===null&&(k=C);break}e&&k&&P.alternate===null&&t(x,k),y=i(P,y,E),S===null?N=P:S.sibling=P,S=P,k=C}if(_.done)return n(x,k),Pe&&Pa(x,E),N;if(k===null){for(;!_.done;E++,_=w.next())_=f(x,_.value,j),_!==null&&(y=i(_,y,E),S===null?N=_:S.sibling=_,S=_);return Pe&&Pa(x,E),N}for(k=s(k);!_.done;E++,_=w.next())_=h(k,x,E,_.value,j),_!==null&&(e&&_.alternate!==null&&k.delete(_.key===null?E:_.key),y=i(_,y,E),S===null?N=_:S.sibling=_,S=_);return e&&k.forEach(function(D){return t(x,D)}),Pe&&Pa(x,E),N}function b(x,y,w,j){if(typeof w=="object"&&w!==null&&w.type===Qi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case sd:e:{for(var N=w.key;y!==null;){if(y.key===N){if(N=w.type,N===Qi){if(y.tag===7){n(x,y.sibling),j=r(y,w.props.children),j.return=x,x=j;break e}}else if(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===qr&&Ij(N)===y.type){n(x,y.sibling),j=r(y,w.props),Ol(j,w),j.return=x,x=j;break e}n(x,y);break}else t(x,y);y=y.sibling}w.type===Qi?(j=Xa(w.props.children,x.mode,j,w.key),j.return=x,x=j):(j=Md(w.type,w.key,w.props,null,x.mode,j),Ol(j,w),j.return=x,x=j)}return o(x);case Zl:e:{for(N=w.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(x,y.sibling),j=r(y,w.children||[]),j.return=x,x=j;break e}else{n(x,y);break}else t(x,y);y=y.sibling}j=ig(w,x.mode,j),j.return=x,x=j}return o(x);case qr:return N=w._init,w=N(w._payload),b(x,y,w,j)}if(Gl(w))return p(x,y,w,j);if(zl(w)){if(N=zl(w),typeof N!="function")throw Error(Y(150));return w=N.call(w),v(x,y,w,j)}if(typeof w.then=="function")return b(x,y,ud(w),j);if(w.$$typeof===lr)return b(x,y,ld(x,w),j);dd(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,y!==null&&y.tag===6?(n(x,y.sibling),j=r(y,w),j.return=x,x=j):(n(x,y),j=ag(w,x.mode,j),j.return=x,x=j),o(x)):n(x,y)}return function(x,y,w,j){try{Pc=0;var N=b(x,y,w,j);return Co=null,N}catch(k){if(k===ju||k===Vm)throw k;var S=jn(29,k,null,x.mode);return S.lanes=j,S.return=x,S}finally{}}}var Jo=BT(!0),IT=BT(!1),Yn=Vs(null),Ls=null;function Kr(e){var t=e.alternate;tt(Et,Et.current&1),tt(Yn,e),Ls===null&&(t===null||Ko.current!==null||t.memoizedState!==null)&&(Ls=e)}function HT(e){if(e.tag===22){if(tt(Et,Et.current),tt(Yn,e),Ls===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Ls=e)}}else Qr()}function Qr(){tt(Et,Et.current),tt(Yn,Yn.current)}function fr(e){zt(Yn),Ls===e&&(Ls=null),zt(Et)}var Et=Vs(0);function Mf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||mx(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function cg(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Kp={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Cn(),r=da(s);r.payload=t,n!=null&&(r.callback=n),t=fa(e,r,s),t!==null&&(En(t,e,s),rc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Cn(),r=da(s);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=fa(e,r,s),t!==null&&(En(t,e,s),rc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Cn(),s=da(n);s.tag=2,t!=null&&(s.callback=t),t=fa(e,s,n),t!==null&&(En(t,e,n),rc(t,e,n))}};function Hj(e,t,n,s,r,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!zc(n,s)||!zc(r,i):!0}function Fj(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Kp.enqueueReplaceState(t,t.state,null)}function gi(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=Qe({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Rf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function FT(e){Rf(e)}function UT(e){console.error(e)}function VT(e){Rf(e)}function Df(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Uj(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Qp(e,t,n){return n=da(n),n.tag=3,n.payload={element:null},n.callback=function(){Df(e,t)},n}function qT(e){return e=da(e),e.tag=3,e}function ZT(e,t,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=s.value;e.payload=function(){return r(i)},e.callback=function(){Uj(t,n,s)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){Uj(t,n,s),typeof r!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function HJ(e,t,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&bu(t,n,r,!0),n=Yn.current,n!==null){switch(n.tag){case 13:return Ls===null?ix():n.alternate===null&&dt===0&&(dt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===Vp?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),bg(e,s,r)),!1;case 22:return n.flags|=65536,s===Vp?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),bg(e,s,r)),!1}throw Error(Y(435,n.tag))}return bg(e,s,r),ix(),!1}if(Pe)return t=Yn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==Bp&&(e=Error(Y(422),{cause:s}),Lc(Fn(e,n)))):(s!==Bp&&(t=Error(Y(423),{cause:s}),Lc(Fn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,s=Fn(s,n),r=Qp(e.stateNode,s,r),og(e,r),dt!==4&&(dt=2)),!1;var i=Error(Y(520),{cause:s});if(i=Fn(i,n),uc===null?uc=[i]:uc.push(i),dt!==4&&(dt=2),t===null)return!0;s=Fn(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Qp(n.stateNode,s,e),og(n,e),!1;case 1:if(t=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(ma===null||!ma.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,r=qT(r),ZT(r,e,n,s),og(n,r),!1}n=n.return}while(n!==null);return!1}var GT=Error(Y(461)),Rt=!1;function Bt(e,t,n,s){t.child=e===null?IT(t,null,n,s):Jo(t,e.child,n,s)}function Vj(e,t,n,s,r){n=n.render;var i=t.ref;if("ref"in s){var o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}else o=s;return mi(t),s=Dv(e,t,n,o,i,r),l=zv(),e!==null&&!Rt?(Lv(e,t,r),Er(e,t,r)):(Pe&&l&&Cv(t),t.flags|=1,Bt(e,t,s,r),t.child)}function qj(e,t,n,s,r){if(e===null){var i=n.type;return typeof i=="function"&&!kv(i)&&i.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=i,YT(e,t,i,s,r)):(e=Md(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!Vv(e,r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zc,n(o,s)&&e.ref===t.ref)return Er(e,t,r)}return t.flags|=1,e=gr(i,s),e.ref=t.ref,e.return=t,t.child=e}function YT(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(zc(i,s)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=s=i,Vv(e,r))e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,Er(e,t,r)}return Jp(e,t,n,s,r)}function XT(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if(t.flags&128){if(s=i!==null?i.baseLanes|n:n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;t.childLanes=i&~s}else t.childLanes=0,t.child=null;return Zj(e,t,s,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Rd(t,i!==null?i.cachePool:null),i!==null?Dj(t,i):Gp(),HT(t);else return t.lanes=t.childLanes=536870912,Zj(e,t,i!==null?i.baseLanes|n:n,n)}else i!==null?(Rd(t,i.cachePool),Dj(t,i),Qr(),t.memoizedState=null):(e!==null&&Rd(t,null),Gp(),Qr());return Bt(e,t,r,n),t.child}function Zj(e,t,n,s){var r=Av();return r=r===null?null:{parent:Ct._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&Rd(t,null),Gp(),HT(t),e!==null&&bu(e,t,s,!0),null}function Ld(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(Y(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Jp(e,t,n,s,r){return mi(t),n=Dv(e,t,n,s,void 0,r),s=zv(),e!==null&&!Rt?(Lv(e,t,r),Er(e,t,r)):(Pe&&s&&Cv(t),t.flags|=1,Bt(e,t,n,r),t.child)}function Gj(e,t,n,s,r,i){return mi(t),t.updateQueue=null,n=lT(t,s,n,r),oT(e),s=zv(),e!==null&&!Rt?(Lv(e,t,i),Er(e,t,i)):(Pe&&s&&Cv(t),t.flags|=1,Bt(e,t,n,i),t.child)}function Yj(e,t,n,s,r){if(mi(t),t.stateNode===null){var i=io,o=n.contextType;typeof o=="object"&&o!==null&&(i=Zt(o)),i=new n(s,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Kp,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=s,i.state=t.memoizedState,i.refs={},Tv(t),o=n.contextType,i.context=typeof o=="object"&&o!==null?Zt(o):io,i.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(cg(t,n,o,s),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(o=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),o!==i.state&&Kp.enqueueReplaceState(i,i.state,null),ic(t,s,i,r),ac(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){i=t.stateNode;var l=t.memoizedProps,c=gi(n,l);i.props=c;var u=i.context,d=n.contextType;o=io,typeof d=="object"&&d!==null&&(o=Zt(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||u!==o)&&Fj(t,i,s,o),Zr=!1;var m=t.memoizedState;i.state=m,ic(t,s,i,r),ac(),u=t.memoizedState,l||m!==u||Zr?(typeof f=="function"&&(cg(t,n,f,s),u=t.memoizedState),(c=Zr||Hj(t,n,c,s,m,u,o))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=u),i.props=s,i.state=u,i.context=o,s=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,qp(e,t),o=t.memoizedProps,d=gi(n,o),i.props=d,f=t.pendingProps,m=i.context,u=n.contextType,c=io,typeof u=="object"&&u!==null&&(c=Zt(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==f||m!==c)&&Fj(t,i,s,c),Zr=!1,m=t.memoizedState,i.state=m,ic(t,s,i,r),ac();var h=t.memoizedState;o!==f||m!==h||Zr||e!==null&&e.dependencies!==null&&Cf(e.dependencies)?(typeof l=="function"&&(cg(t,n,l,s),h=t.memoizedState),(d=Zr||Hj(t,n,d,s,m,h,c)||e!==null&&e.dependencies!==null&&Cf(e.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,h,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,h,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=h),i.props=s,i.state=h,i.context=c,s=d):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return i=s,Ld(e,t),s=(t.flags&128)!==0,i||s?(i=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&s?(t.child=Jo(t,e.child,null,r),t.child=Jo(t,null,n,r)):Bt(e,t,n,r),t.memoizedState=i.state,e=t.child):e=Er(e,t,r),e}function Xj(e,t,n,s){return yu(),t.flags|=256,Bt(e,t,n,s),t.child}var ug={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dg(e){return{baseLanes:e,cachePool:nT()}}function fg(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=qn),e}function WT(e,t,n){var s=t.pendingProps,r=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(Et.current&2)!==0),o&&(r=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(Pe){if(r?Kr(t):Qr(),Pe){var l=ut,c;if(c=l){e:{for(c=l,l=ks;c.nodeType!==8;){if(!l){l=null;break e}if(c=os(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:Wa!==null?{id:cr,overflow:ur}:null,retryLane:536870912,hydrationErrors:null},c=jn(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,Yt=t,ut=null,c=!0):c=!1}c||fi(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return mx(l)?t.lanes=32:t.lanes=536870912,null;fr(t)}return l=s.children,s=s.fallback,r?(Qr(),r=t.mode,l=zf({mode:"hidden",children:l},r),s=Xa(s,r,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,r=t.child,r.memoizedState=dg(n),r.childLanes=fg(e,o,n),t.memoizedState=ug,s):(Kr(t),ex(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(i)t.flags&256?(Kr(t),t.flags&=-257,t=mg(e,t,n)):t.memoizedState!==null?(Qr(),t.child=e.child,t.flags|=128,t=null):(Qr(),r=s.fallback,l=t.mode,s=zf({mode:"visible",children:s.children},l),r=Xa(r,l,n,null),r.flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,Jo(t,e.child,null,n),s=t.child,s.memoizedState=dg(n),s.childLanes=fg(e,o,n),t.memoizedState=ug,t=r);else if(Kr(t),mx(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var u=o.dgst;o=u,s=Error(Y(419)),s.stack="",s.digest=o,Lc({value:s,source:null,stack:null}),t=mg(e,t,n)}else if(Rt||bu(e,t,n,!1),o=(n&e.childLanes)!==0,Rt||o){if(o=We,o!==null&&(s=n&-n,s=s&42?1:hv(s),s=s&(o.suspendedLanes|n)?0:s,s!==0&&s!==c.retryLane))throw c.retryLane=s,bl(e,s),En(o,e,s),GT;l.data==="$?"||ix(),t=mg(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ut=os(l.nextSibling),Yt=t,Pe=!0,Ka=null,ks=!1,e!==null&&(On[Bn++]=cr,On[Bn++]=ur,On[Bn++]=Wa,cr=e.id,ur=e.overflow,Wa=t),t=ex(t,s.children),t.flags|=4096);return t}return r?(Qr(),r=s.fallback,l=t.mode,c=e.child,u=c.sibling,s=gr(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,u!==null?r=gr(u,r):(r=Xa(r,l,n,null),r.flags|=2),r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,l=e.child.memoizedState,l===null?l=dg(n):(c=l.cachePool,c!==null?(u=Ct._currentValue,c=c.parent!==u?{parent:u,pool:u}:c):c=nT(),l={baseLanes:l.baseLanes|n,cachePool:c}),r.memoizedState=l,r.childLanes=fg(e,o,n),t.memoizedState=ug,s):(Kr(t),n=e.child,e=n.sibling,n=gr(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function ex(e,t){return t=zf({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function zf(e,t){return e=jn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function mg(e,t,n){return Jo(t,e.child,null,n),e=ex(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wj(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Hp(e.return,t,n)}function hg(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function KT(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(Bt(e,t,s.children,n),s=Et.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wj(e,n,t);else if(e.tag===19)Wj(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(tt(Et,s),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Mf(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),hg(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Mf(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}hg(t,!0,n,null,i);break;case"together":hg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Er(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ja|=t.lanes,!(n&t.childLanes))if(e!==null){if(bu(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=gr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Vv(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Cf(e)))}function FJ(e,t,n){switch(t.tag){case 3:vf(t,t.stateNode.containerInfo),Wr(t,Ct,e.memoizedState.cache),yu();break;case 27:case 5:Ap(t);break;case 4:vf(t,t.stateNode.containerInfo);break;case 10:Wr(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Kr(t),t.flags|=128,null):n&t.child.childLanes?WT(e,t,n):(Kr(t),e=Er(e,t,n),e!==null?e.sibling:null);Kr(t);break;case 19:var r=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(bu(e,t,n,!1),s=(n&t.childLanes)!==0),r){if(s)return KT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),tt(Et,Et.current),s)break;return null;case 22:case 23:return t.lanes=0,XT(e,t,n);case 24:Wr(t,Ct,e.memoizedState.cache)}return Er(e,t,n)}function QT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Rt=!0;else{if(!Vv(e,n)&&!(t.flags&128))return Rt=!1,FJ(e,t,n);Rt=!!(e.flags&131072)}else Rt=!1,Pe&&t.flags&1048576&&eT(t,kf,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,r=s._init;if(s=r(s._payload),t.type=s,typeof s=="function")kv(s)?(e=gi(s,e),t.tag=1,t=Yj(null,t,s,e,n)):(t.tag=0,t=Jp(null,t,s,e,n));else{if(s!=null){if(r=s.$$typeof,r===dv){t.tag=11,t=Vj(null,t,s,e,n);break e}else if(r===fv){t.tag=14,t=qj(null,t,s,e,n);break e}}throw t=Ep(s)||s,Error(Y(306,t,""))}}return t;case 0:return Jp(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,r=gi(s,t.pendingProps),Yj(e,t,s,r,n);case 3:e:{if(vf(t,t.stateNode.containerInfo),e===null)throw Error(Y(387));s=t.pendingProps;var i=t.memoizedState;r=i.element,qp(e,t),ic(t,s,null,n);var o=t.memoizedState;if(s=o.cache,Wr(t,Ct,s),s!==i.cache&&Fp(t,[Ct],n,!0),ac(),s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=Xj(e,t,s,n);break e}else if(s!==r){r=Fn(Error(Y(424)),t),Lc(r),t=Xj(e,t,s,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ut=os(e.firstChild),Yt=t,Pe=!0,Ka=null,ks=!0,n=IT(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(yu(),s===r){t=Er(e,t,n);break e}Bt(e,t,s,n)}t=t.child}return t;case 26:return Ld(e,t),e===null?(n=mN(t.type,null,t.pendingProps,null))?t.memoizedState=n:Pe||(n=t.type,e=t.pendingProps,s=Hf(ua.current).createElement(n),s[qt]=t,s[dn]=e,Ht(s,n,e),Mt(s),t.stateNode=s):t.memoizedState=mN(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ap(t),e===null&&Pe&&(s=t.stateNode=OM(t.type,t.pendingProps,ua.current),Yt=t,ks=!0,r=ut,Aa(t.type)?(hx=r,ut=os(s.firstChild)):ut=r),Bt(e,t,t.pendingProps.children,n),Ld(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Pe&&((r=s=ut)&&(s=pee(s,t.type,t.pendingProps,ks),s!==null?(t.stateNode=s,Yt=t,ut=os(s.firstChild),ks=!1,r=!0):r=!1),r||fi(t)),Ap(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,dx(r,i)?s=null:o!==null&&dx(r,o)&&(t.flags|=32),t.memoizedState!==null&&(r=Dv(e,t,zJ,null,null,n),Hc._currentValue=r),Ld(e,t),Bt(e,t,s,n),t.child;case 6:return e===null&&Pe&&((e=n=ut)&&(n=xee(n,t.pendingProps,ks),n!==null?(t.stateNode=n,Yt=t,ut=null,e=!0):e=!1),e||fi(t)),null;case 13:return WT(e,t,n);case 4:return vf(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Jo(t,null,s,n):Bt(e,t,s,n),t.child;case 11:return Vj(e,t,t.type,t.pendingProps,n);case 7:return Bt(e,t,t.pendingProps,n),t.child;case 8:return Bt(e,t,t.pendingProps.children,n),t.child;case 12:return Bt(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,Wr(t,t.type,s.value),Bt(e,t,s.children,n),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,mi(t),r=Zt(r),s=s(r),t.flags|=1,Bt(e,t,s,n),t.child;case 14:return qj(e,t,t.type,t.pendingProps,n);case 15:return YT(e,t,t.type,t.pendingProps,n);case 19:return KT(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},e===null?(n=zf(s,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=gr(e.child,s),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return XT(e,t,n);case 24:return mi(t),s=Zt(Ct),e===null?(r=Av(),r===null&&(r=We,i=_v(),r.pooledCache=i,i.refCount++,i!==null&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:s,cache:r},Tv(t),Wr(t,Ct,r)):(e.lanes&n&&(qp(e,t),ic(t,null,null,n),ac()),r=e.memoizedState,i=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Wr(t,Ct,s)):(s=i.cache,Wr(t,Ct,s),s!==r.cache&&Fp(t,[Ct],n,!0))),Bt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(Y(156,t.tag))}function nr(e){e.flags|=4}function Kj(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!HM(t)){if(t=Yn.current,t!==null&&((De&4194048)===De?Ls!==null:(De&62914560)!==De&&!(De&536870912)||t!==Ls))throw sc=Vp,sT;e.flags|=8192}}function fd(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?SA():536870912,e.lanes|=t,el|=t)}function Bl(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function UJ(e,t,n){var s=t.pendingProps;switch(Ev(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return st(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),pr(Ct),Go(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Pl(t)?nr(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ej())),st(t),null;case 26:return n=t.memoizedState,e===null?(nr(t),n!==null?(st(t),Kj(t,n)):(st(t),t.flags&=-16777217)):n?n!==e.memoizedState?(nr(t),st(t),Kj(t,n)):(st(t),t.flags&=-16777217):(e.memoizedProps!==s&&nr(t),st(t),t.flags&=-16777217),null;case 27:yf(t),n=ua.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&nr(t);else{if(!s){if(t.stateNode===null)throw Error(Y(166));return st(t),null}e=Ds.current,Pl(t)?kj(t):(e=OM(r,s,n),t.stateNode=e,nr(t))}return st(t),null;case 5:if(yf(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&nr(t);else{if(!s){if(t.stateNode===null)throw Error(Y(166));return st(t),null}if(e=Ds.current,Pl(t))kj(t);else{switch(r=Hf(ua.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?r.createElement(n,{is:s.is}):r.createElement(n)}}e[qt]=t,e[dn]=s;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(Ht(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&nr(t)}}return st(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&nr(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Y(166));if(e=ua.current,Pl(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,r=Yt,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}e[qt]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||LM(e.nodeValue,n)),e||fi(t)}else e=Hf(e).createTextNode(s),e[qt]=t,t.stateNode=e}return st(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Pl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!r)throw Error(Y(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Y(317));r[qt]=t}else yu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;st(t),r=!1}else r=Ej(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(fr(t),t):(fr(t),null)}if(fr(t),t.flags&128)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool);var i=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),fd(t,t.updateQueue),st(t),null;case 4:return Go(),e===null&&Qv(t.stateNode.containerInfo),st(t),null;case 10:return pr(t.type),st(t),null;case 19:if(zt(Et),r=t.memoizedState,r===null)return st(t),null;if(s=(t.flags&128)!==0,i=r.rendering,i===null)if(s)Bl(r,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Mf(e),i!==null){for(t.flags|=128,Bl(r,!1),e=i.updateQueue,t.updateQueue=e,fd(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)JA(n,e),n=n.sibling;return tt(Et,Et.current&1|2),t.child}e=e.sibling}r.tail!==null&&zs()>$f&&(t.flags|=128,s=!0,Bl(r,!1),t.lanes=4194304)}else{if(!s)if(e=Mf(i),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,fd(t,e),Bl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!Pe)return st(t),null}else 2*zs()-r.renderingStartTime>$f&&n!==536870912&&(t.flags|=128,s=!0,Bl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(e=r.last,e!==null?e.sibling=i:t.child=i,r.last=i)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=zs(),t.sibling=null,e=Et.current,tt(Et,s?e&1|2:e&1),t):(st(t),null);case 22:case 23:return fr(t),Mv(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?n&536870912&&!(t.flags&128)&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),n=t.updateQueue,n!==null&&fd(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&zt(Qa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),pr(Ct),st(t),null;case 25:return null;case 30:return null}throw Error(Y(156,t.tag))}function VJ(e,t){switch(Ev(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pr(Ct),Go(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return yf(t),null;case 13:if(fr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));yu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return zt(Et),null;case 4:return Go(),null;case 10:return pr(t.type),null;case 22:case 23:return fr(t),Mv(),e!==null&&zt(Qa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return pr(Ct),null;case 25:return null;default:return null}}function JT(e,t){switch(Ev(t),t.tag){case 3:pr(Ct),Go();break;case 26:case 27:case 5:yf(t);break;case 4:Go();break;case 13:fr(t);break;case 19:zt(Et);break;case 10:pr(t.type);break;case 22:case 23:fr(t),Mv(),e!==null&&zt(Qa);break;case 24:pr(Ct)}}function ku(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&e)===e){s=void 0;var i=n.create,o=n.inst;s=i(),o.destroy=s}n=n.next}while(n!==r)}}catch(l){Ye(t,t.return,l)}}function wa(e,t,n){try{var s=t.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var i=r.next;s=i;do{if((s.tag&e)===e){var o=s.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,r=t;var c=n,u=l;try{u()}catch(d){Ye(r,c,d)}}}s=s.next}while(s!==i)}}catch(d){Ye(t,t.return,d)}}function eM(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{iT(t,n)}catch(s){Ye(e,e.return,s)}}}function tM(e,t,n){n.props=gi(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){Ye(e,t,s)}}function lc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof n=="function"?e.refCleanup=n(s):n.current=s}}catch(r){Ye(e,t,r)}}function As(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){Ye(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ye(e,t,r)}else n.current=null}function nM(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){Ye(e,e.return,r)}}function gg(e,t,n){try{var s=e.stateNode;dee(s,e.type,n,t),s[dn]=t}catch(r){Ye(e,e.return,r)}}function sM(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Aa(e.type)||e.tag===4}function pg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Aa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tx(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Km));else if(s!==4&&(s===27&&Aa(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(tx(e,t,n),e=e.sibling;e!==null;)tx(e,t,n),e=e.sibling}function Lf(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(s===27&&Aa(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Lf(e,t,n),e=e.sibling;e!==null;)Lf(e,t,n),e=e.sibling}function rM(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ht(t,s,n),t[qt]=e,t[dn]=n}catch(i){Ye(e,e.return,i)}}var ir=!1,xt=!1,xg=!1,Qj=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function qJ(e,t){if(e=e.containerInfo,cx=qf,e=qA(e),jv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var h;f!==n||r!==0&&f.nodeType!==3||(l=o+r),f!==i||s!==0&&f.nodeType!==3||(c=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)m=f,f=h;for(;;){if(f===e)break t;if(m===n&&++u===r&&(l=o),m===i&&++d===s&&(c=o),(h=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ux={focusedElem:e,selectionRange:n},qf=!1,Tt=t;Tt!==null;)if(t=Tt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Tt=e;else for(;Tt!==null;){switch(t=Tt,i=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&i!==null){e=void 0,n=t,r=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var p=gi(n.type,r,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(p,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(v){Ye(n,n.return,v)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)fx(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fx(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(Y(163))}if(e=t.sibling,e!==null){e.return=t.return,Tt=e;break}Tt=t.return}}function aM(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Ir(e,n),s&4&&ku(5,n);break;case 1:if(Ir(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(o){Ye(n,n.return,o)}else{var r=gi(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Ye(n,n.return,o)}}s&64&&eM(n),s&512&&lc(n,n.return);break;case 3:if(Ir(e,n),s&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{iT(e,t)}catch(o){Ye(n,n.return,o)}}break;case 27:t===null&&s&4&&rM(n);case 26:case 5:Ir(e,n),t===null&&s&4&&nM(n),s&512&&lc(n,n.return);break;case 12:Ir(e,n);break;case 13:Ir(e,n),s&4&&lM(e,n),s&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=eee.bind(null,n),vee(e,n))));break;case 22:if(s=n.memoizedState!==null||ir,!s){t=t!==null&&t.memoizedState!==null||xt,r=ir;var i=xt;ir=s,(xt=t)&&!i?Fr(e,n,(n.subtreeFlags&8772)!==0):Ir(e,n),ir=r,xt=i}break;case 30:break;default:Ir(e,n)}}function iM(e){var t=e.alternate;t!==null&&(e.alternate=null,iM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&pv(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Je=null,rn=!1;function sr(e,t,n){for(n=n.child;n!==null;)oM(e,t,n),n=n.sibling}function oM(e,t,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(hu,n)}catch{}switch(n.tag){case 26:xt||As(n,t),sr(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:xt||As(n,t);var s=Je,r=rn;Aa(n.type)&&(Je=n.stateNode,rn=!1),sr(e,t,n),fc(n.stateNode),Je=s,rn=r;break;case 5:xt||As(n,t);case 6:if(s=Je,r=rn,Je=null,sr(e,t,n),Je=s,rn=r,Je!==null)if(rn)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(n.stateNode)}catch(i){Ye(n,t,i)}else try{Je.removeChild(n.stateNode)}catch(i){Ye(n,t,i)}break;case 18:Je!==null&&(rn?(e=Je,uN(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Vc(e)):uN(Je,n.stateNode));break;case 4:s=Je,r=rn,Je=n.stateNode.containerInfo,rn=!0,sr(e,t,n),Je=s,rn=r;break;case 0:case 11:case 14:case 15:xt||wa(2,n,t),xt||wa(4,n,t),sr(e,t,n);break;case 1:xt||(As(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&tM(n,t,s)),sr(e,t,n);break;case 21:sr(e,t,n);break;case 22:xt=(s=xt)||n.memoizedState!==null,sr(e,t,n),xt=s;break;default:sr(e,t,n)}}function lM(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vc(e)}catch(n){Ye(t,t.return,n)}}function ZJ(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Qj),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Qj),t;default:throw Error(Y(435,e.tag))}}function vg(e,t){var n=ZJ(e);t.forEach(function(s){var r=tee.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}function xn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(Aa(l.type)){Je=l.stateNode,rn=!1;break e}break;case 5:Je=l.stateNode,rn=!1;break e;case 3:case 4:Je=l.stateNode.containerInfo,rn=!0;break e}l=l.return}if(Je===null)throw Error(Y(160));oM(i,o,r),Je=null,rn=!1,i=r.alternate,i!==null&&(i.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)cM(t,e),t=t.sibling}var es=null;function cM(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xn(t,e),vn(e),s&4&&(wa(3,e,e.return),ku(3,e),wa(5,e,e.return));break;case 1:xn(t,e),vn(e),s&512&&(xt||n===null||As(n,n.return)),s&64&&ir&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=es;if(xn(t,e),vn(e),s&512&&(xt||n===null||As(n,n.return)),s&4){var i=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":i=r.getElementsByTagName("title")[0],(!i||i[xu]||i[qt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),Ht(i,s,n),i[qt]=e,Mt(i),s=i;break e;case"link":var o=gN("link","href",r).get(s+(n.href||""));if(o){for(var l=0;l<o.length;l++)if(i=o[l],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(l,1);break t}}i=r.createElement(s),Ht(i,s,n),r.head.appendChild(i);break;case"meta":if(o=gN("meta","content",r).get(s+(n.content||""))){for(l=0;l<o.length;l++)if(i=o[l],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(l,1);break t}}i=r.createElement(s),Ht(i,s,n),r.head.appendChild(i);break;default:throw Error(Y(468,s))}i[qt]=e,Mt(i),s=i}e.stateNode=s}else pN(r,e.type,e.stateNode);else e.stateNode=hN(r,s,e.memoizedProps);else i!==s?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,s===null?pN(r,e.type,e.stateNode):hN(r,s,e.memoizedProps)):s===null&&e.stateNode!==null&&gg(e,e.memoizedProps,n.memoizedProps)}break;case 27:xn(t,e),vn(e),s&512&&(xt||n===null||As(n,n.return)),n!==null&&s&4&&gg(e,e.memoizedProps,n.memoizedProps);break;case 5:if(xn(t,e),vn(e),s&512&&(xt||n===null||As(n,n.return)),e.flags&32){r=e.stateNode;try{Xo(r,"")}catch(h){Ye(e,e.return,h)}}s&4&&e.stateNode!=null&&(r=e.memoizedProps,gg(e,r,n!==null?n.memoizedProps:r)),s&1024&&(xg=!0);break;case 6:if(xn(t,e),vn(e),s&4){if(e.stateNode===null)throw Error(Y(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(h){Ye(e,e.return,h)}}break;case 3:if(Od=null,r=es,es=Ff(t.containerInfo),xn(t,e),es=r,vn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Vc(t.containerInfo)}catch(h){Ye(e,e.return,h)}xg&&(xg=!1,uM(e));break;case 4:s=es,es=Ff(e.stateNode.containerInfo),xn(t,e),vn(e),es=s;break;case 12:xn(t,e),vn(e);break;case 13:xn(t,e),vn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Xv=zs()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,vg(e,s)));break;case 22:r=e.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=ir,d=xt;if(ir=u||r,xt=d||c,xn(t,e),xt=d,ir=u,vn(e),s&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||c||ir||xt||Oa(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){c=n=t;try{if(i=c.stateNode,r)o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var f=c.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(h){Ye(c,c.return,h)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(h){Ye(c,c.return,h)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,vg(e,n))));break;case 19:xn(t,e),vn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,vg(e,s)));break;case 30:break;case 21:break;default:xn(t,e),vn(e)}}function vn(e){var t=e.flags;if(t&2){try{for(var n,s=e.return;s!==null;){if(sM(s)){n=s;break}s=s.return}if(n==null)throw Error(Y(160));switch(n.tag){case 27:var r=n.stateNode,i=pg(e);Lf(e,i,r);break;case 5:var o=n.stateNode;n.flags&32&&(Xo(o,""),n.flags&=-33);var l=pg(e);Lf(e,l,o);break;case 3:case 4:var c=n.stateNode.containerInfo,u=pg(e);tx(e,u,c);break;default:throw Error(Y(161))}}catch(d){Ye(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uM(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;uM(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ir(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)aM(e,t.alternate,t),t=t.sibling}function Oa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:wa(4,t,t.return),Oa(t);break;case 1:As(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&tM(t,t.return,n),Oa(t);break;case 27:fc(t.stateNode);case 26:case 5:As(t,t.return),Oa(t);break;case 22:t.memoizedState===null&&Oa(t);break;case 30:Oa(t);break;default:Oa(t)}e=e.sibling}}function Fr(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,r=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Fr(r,i,n),ku(4,i);break;case 1:if(Fr(r,i,n),s=i,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){Ye(s,s.return,u)}if(s=i,r=s.updateQueue,r!==null){var l=s.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)aT(c[r],l)}catch(u){Ye(s,s.return,u)}}n&&o&64&&eM(i),lc(i,i.return);break;case 27:rM(i);case 26:case 5:Fr(r,i,n),n&&s===null&&o&4&&nM(i),lc(i,i.return);break;case 12:Fr(r,i,n);break;case 13:Fr(r,i,n),n&&o&4&&lM(r,i);break;case 22:i.memoizedState===null&&Fr(r,i,n),lc(i,i.return);break;case 30:break;default:Fr(r,i,n)}t=t.sibling}}function qv(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&wu(n))}function Zv(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wu(e))}function ws(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dM(e,t,n,s),t=t.sibling}function dM(e,t,n,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:ws(e,t,n,s),r&2048&&ku(9,t);break;case 1:ws(e,t,n,s);break;case 3:ws(e,t,n,s),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wu(e)));break;case 12:if(r&2048){ws(e,t,n,s),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,l=i.onPostCommit;typeof l=="function"&&l(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){Ye(t,t.return,c)}}else ws(e,t,n,s);break;case 13:ws(e,t,n,s);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,t.memoizedState!==null?i._visibility&2?ws(e,t,n,s):cc(e,t):i._visibility&2?ws(e,t,n,s):(i._visibility|=2,Yi(e,t,n,s,(t.subtreeFlags&10256)!==0)),r&2048&&qv(o,t);break;case 24:ws(e,t,n,s),r&2048&&Zv(t.alternate,t);break;default:ws(e,t,n,s)}}function Yi(e,t,n,s,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var i=e,o=t,l=n,c=s,u=o.flags;switch(o.tag){case 0:case 11:case 15:Yi(i,o,l,c,r),ku(8,o);break;case 23:break;case 22:var d=o.stateNode;o.memoizedState!==null?d._visibility&2?Yi(i,o,l,c,r):cc(i,o):(d._visibility|=2,Yi(i,o,l,c,r)),r&&u&2048&&qv(o.alternate,o);break;case 24:Yi(i,o,l,c,r),r&&u&2048&&Zv(o.alternate,o);break;default:Yi(i,o,l,c,r)}t=t.sibling}}function cc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,r=s.flags;switch(s.tag){case 22:cc(n,s),r&2048&&qv(s.alternate,s);break;case 24:cc(n,s),r&2048&&Zv(s.alternate,s);break;default:cc(n,s)}t=t.sibling}}var Xl=8192;function Vi(e){if(e.subtreeFlags&Xl)for(e=e.child;e!==null;)fM(e),e=e.sibling}function fM(e){switch(e.tag){case 26:Vi(e),e.flags&Xl&&e.memoizedState!==null&&Mee(es,e.memoizedState,e.memoizedProps);break;case 5:Vi(e);break;case 3:case 4:var t=es;es=Ff(e.stateNode.containerInfo),Vi(e),es=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Xl,Xl=16777216,Vi(e),Xl=t):Vi(e));break;default:Vi(e)}}function mM(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Il(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];Tt=s,gM(s,e)}mM(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)hM(e),e=e.sibling}function hM(e){switch(e.tag){case 0:case 11:case 15:Il(e),e.flags&2048&&wa(9,e,e.return);break;case 3:Il(e);break;case 12:Il(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,$d(e)):Il(e);break;default:Il(e)}}function $d(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];Tt=s,gM(s,e)}mM(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:wa(8,t,t.return),$d(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,$d(t));break;default:$d(t)}e=e.sibling}}function gM(e,t){for(;Tt!==null;){var n=Tt;switch(n.tag){case 0:case 11:case 15:wa(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:wu(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Tt=s;else e:for(n=e;Tt!==null;){s=Tt;var r=s.sibling,i=s.return;if(iM(s),s===n){Tt=null;break e}if(r!==null){r.return=i,Tt=r;break e}Tt=i}}}var GJ={getCacheForType:function(e){var t=Zt(Ct),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},YJ=typeof WeakMap=="function"?WeakMap:Map,Ue=0,We=null,_e=null,De=0,Fe=0,yn=null,ra=!1,wl=!1,Gv=!1,_r=0,dt=0,ja=0,Ja=0,Yv=0,qn=0,el=0,uc=null,an=null,nx=!1,Xv=0,$f=1/0,Pf=null,ma=null,It=0,ha=null,tl=null,Eo=0,sx=0,rx=null,pM=null,dc=0,ax=null;function Cn(){if(Ue&2&&De!==0)return De&-De;if(ge.T!==null){var e=Wo;return e!==0?e:Kv()}return EA()}function xM(){qn===0&&(qn=!(De&536870912)||Pe?NA():536870912);var e=Yn.current;return e!==null&&(e.flags|=32),qn}function En(e,t,n){(e===We&&(Fe===2||Fe===9)||e.cancelPendingCommit!==null)&&(nl(e,0),aa(e,De,qn,!1)),pu(e,n),(!(Ue&2)||e!==We)&&(e===We&&(!(Ue&2)&&(Ja|=n),dt===4&&aa(e,De,qn,!1)),qs(e))}function vM(e,t,n){if(Ue&6)throw Error(Y(327));var s=!n&&(t&124)===0&&(t&e.expiredLanes)===0||gu(e,t),r=s?KJ(e,t):yg(e,t,!0),i=s;do{if(r===0){wl&&!s&&aa(e,t,0,!1);break}else{if(n=e.current.alternate,i&&!XJ(n)){r=yg(e,t,!1),i=!1;continue}if(r===2){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var l=e;r=uc;var c=l.current.memoizedState.isDehydrated;if(c&&(nl(l,o).flags|=256),o=yg(l,o,!1),o!==2){if(Gv&&!c){l.errorRecoveryDisabledLanes|=i,Ja|=i,r=4;break e}i=an,an=r,i!==null&&(an===null?an=i:an.push.apply(an,i))}r=o}if(i=!1,r!==2)continue}}if(r===1){nl(e,0),aa(e,t,0,!0);break}e:{switch(s=e,i=r,i){case 0:case 1:throw Error(Y(345));case 4:if((t&4194048)!==t)break;case 6:aa(s,t,qn,!ra);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(Y(329))}if((t&62914560)===t&&(r=Xv+300-zs(),10<r)){if(aa(s,t,qn,!ra),Om(s,0,!0)!==0)break e;s.timeoutHandle=PM(Jj.bind(null,s,n,an,Pf,nx,t,qn,Ja,el,ra,i,2,-0,0),r);break e}Jj(s,n,an,Pf,nx,t,qn,Ja,el,ra,i,0,-0,0)}}break}while(!0);qs(e)}function Jj(e,t,n,s,r,i,o,l,c,u,d,f,m,h){if(e.timeoutHandle=-1,f=t.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(Ic={stylesheets:null,count:0,unsuspend:Tee},fM(t),f=Ree(),f!==null)){e.cancelPendingCommit=f(tN.bind(null,e,t,i,n,s,r,o,l,c,d,1,m,h)),aa(e,i,o,!u);return}tN(e,t,i,n,s,r,o,l,c)}function XJ(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Mn(i(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function aa(e,t,n,s){t&=~Yv,t&=~Ja,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var i=31-kn(r),o=1<<i;s[i]=-1,r&=~o}n!==0&&kA(e,n,t)}function Ym(){return Ue&6?!0:(Cu(0),!1)}function Wv(){if(_e!==null){if(Fe===0)var e=_e.return;else e=_e,dr=Di=null,$v(e),Co=null,Pc=0,e=_e;for(;e!==null;)JT(e.alternate,e),e=e.return;_e=null}}function nl(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,mee(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Wv(),We=e,_e=n=gr(e.current,null),De=t,Fe=0,yn=null,ra=!1,wl=gu(e,t),Gv=!1,el=qn=Yv=Ja=ja=dt=0,an=uc=null,nx=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var r=31-kn(s),i=1<<r;t|=e[r],s&=~i}return _r=t,Fm(),n}function yM(e,t){ke=null,ge.H=Tf,t===ju||t===Vm?(t=Mj(),Fe=3):t===sT?(t=Mj(),Fe=4):Fe=t===GT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,yn=t,_e===null&&(dt=1,Df(e,Fn(t,e.current)))}function bM(){var e=ge.H;return ge.H=Tf,e===null?Tf:e}function wM(){var e=ge.A;return ge.A=GJ,e}function ix(){dt=4,ra||(De&4194048)!==De&&Yn.current!==null||(wl=!0),!(ja&134217727)&&!(Ja&134217727)||We===null||aa(We,De,qn,!1)}function yg(e,t,n){var s=Ue;Ue|=2;var r=bM(),i=wM();(We!==e||De!==t)&&(Pf=null,nl(e,t)),t=!1;var o=dt;e:do try{if(Fe!==0&&_e!==null){var l=_e,c=yn;switch(Fe){case 8:Wv(),o=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(t=!0);var u=Fe;if(Fe=0,yn=null,co(e,l,c,u),n&&wl){o=0;break e}break;default:u=Fe,Fe=0,yn=null,co(e,l,c,u)}}WJ(),o=dt;break}catch(d){yM(e,d)}while(!0);return t&&e.shellSuspendCounter++,dr=Di=null,Ue=s,ge.H=r,ge.A=i,_e===null&&(We=null,De=0,Fm()),o}function WJ(){for(;_e!==null;)jM(_e)}function KJ(e,t){var n=Ue;Ue|=2;var s=bM(),r=wM();We!==e||De!==t?(Pf=null,$f=zs()+500,nl(e,t)):wl=gu(e,t);e:do try{if(Fe!==0&&_e!==null){t=_e;var i=yn;t:switch(Fe){case 1:Fe=0,yn=null,co(e,t,i,1);break;case 2:case 9:if(Tj(i)){Fe=0,yn=null,eN(t);break}t=function(){Fe!==2&&Fe!==9||We!==e||(Fe=7),qs(e)},i.then(t,t);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:Tj(i)?(Fe=0,yn=null,eN(t)):(Fe=0,yn=null,co(e,t,i,7));break;case 5:var o=null;switch(_e.tag){case 26:o=_e.memoizedState;case 5:case 27:var l=_e;if(!o||HM(o)){Fe=0,yn=null;var c=l.sibling;if(c!==null)_e=c;else{var u=l.return;u!==null?(_e=u,Xm(u)):_e=null}break t}}Fe=0,yn=null,co(e,t,i,5);break;case 6:Fe=0,yn=null,co(e,t,i,6);break;case 8:Wv(),dt=6;break e;default:throw Error(Y(462))}}QJ();break}catch(d){yM(e,d)}while(!0);return dr=Di=null,ge.H=s,ge.A=r,Ue=n,_e!==null?0:(We=null,De=0,Fm(),dt)}function QJ(){for(;_e!==null&&!bQ();)jM(_e)}function jM(e){var t=QT(e.alternate,e,_r);e.memoizedProps=e.pendingProps,t===null?Xm(e):_e=t}function eN(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Gj(n,t,t.pendingProps,t.type,void 0,De);break;case 11:t=Gj(n,t,t.pendingProps,t.type.render,t.ref,De);break;case 5:$v(t);default:JT(n,t),t=_e=JA(t,_r),t=QT(n,t,_r)}e.memoizedProps=e.pendingProps,t===null?Xm(e):_e=t}function co(e,t,n,s){dr=Di=null,$v(t),Co=null,Pc=0;var r=t.return;try{if(HJ(e,r,t,n,De)){dt=1,Df(e,Fn(n,e.current)),_e=null;return}}catch(i){if(r!==null)throw _e=r,i;dt=1,Df(e,Fn(n,e.current)),_e=null;return}t.flags&32768?(Pe||s===1?e=!0:wl||De&536870912?e=!1:(ra=e=!0,(s===2||s===9||s===3||s===6)&&(s=Yn.current,s!==null&&s.tag===13&&(s.flags|=16384))),NM(t,e)):Xm(t)}function Xm(e){var t=e;do{if(t.flags&32768){NM(t,ra);return}e=t.return;var n=UJ(t.alternate,t,_r);if(n!==null){_e=n;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);dt===0&&(dt=5)}function NM(e,t){do{var n=VJ(e.alternate,e);if(n!==null){n.flags&=32767,_e=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){_e=e;return}_e=e=n}while(e!==null);dt=6,_e=null}function tN(e,t,n,s,r,i,o,l,c){e.cancelPendingCommit=null;do Wm();while(It!==0);if(Ue&6)throw Error(Y(327));if(t!==null){if(t===e.current)throw Error(Y(177));if(i=t.lanes|t.childLanes,i|=Nv,TQ(e,n,i,o,l,c),e===We&&(_e=We=null,De=0),tl=t,ha=e,Eo=n,sx=i,rx=r,pM=s,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,nee(bf,function(){return _M(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,t.subtreeFlags&13878||s){s=ge.T,ge.T=null,r=Oe.p,Oe.p=2,o=Ue,Ue|=4;try{qJ(e,t,n)}finally{Ue=o,Oe.p=r,ge.T=s}}It=1,SM(),kM(),CM()}}function SM(){if(It===1){It=0;var e=ha,t=tl,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=ge.T,ge.T=null;var s=Oe.p;Oe.p=2;var r=Ue;Ue|=4;try{cM(t,e);var i=ux,o=qA(e.containerInfo),l=i.focusedElem,c=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&VA(l.ownerDocument.documentElement,l)){if(c!==null&&jv(l)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var h=m.getSelection(),p=l.textContent.length,v=Math.min(c.start,p),b=c.end===void 0?v:Math.min(c.end,p);!h.extend&&v>b&&(o=b,b=v,v=o);var x=jj(l,v),y=jj(l,b);if(x&&y&&(h.rangeCount!==1||h.anchorNode!==x.node||h.anchorOffset!==x.offset||h.focusNode!==y.node||h.focusOffset!==y.offset)){var w=f.createRange();w.setStart(x.node,x.offset),h.removeAllRanges(),v>b?(h.addRange(w),h.extend(y.node,y.offset)):(w.setEnd(y.node,y.offset),h.addRange(w))}}}}for(f=[],h=l;h=h.parentNode;)h.nodeType===1&&f.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var j=f[l];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}qf=!!cx,ux=cx=null}finally{Ue=r,Oe.p=s,ge.T=n}}e.current=t,It=2}}function kM(){if(It===2){It=0;var e=ha,t=tl,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=ge.T,ge.T=null;var s=Oe.p;Oe.p=2;var r=Ue;Ue|=4;try{aM(e,t.alternate,t)}finally{Ue=r,Oe.p=s,ge.T=n}}It=3}}function CM(){if(It===4||It===3){It=0,wQ();var e=ha,t=tl,n=Eo,s=pM;t.subtreeFlags&10256||t.flags&10256?It=5:(It=0,tl=ha=null,EM(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(ma=null),gv(n),t=t.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(hu,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=ge.T,r=Oe.p,Oe.p=2,ge.T=null;try{for(var i=e.onRecoverableError,o=0;o<s.length;o++){var l=s[o];i(l.value,{componentStack:l.stack})}}finally{ge.T=t,Oe.p=r}}Eo&3&&Wm(),qs(e),r=e.pendingLanes,n&4194090&&r&42?e===ax?dc++:(dc=0,ax=e):dc=0,Cu(0)}}function EM(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,wu(t)))}function Wm(e){return SM(),kM(),CM(),_M()}function _M(){if(It!==5)return!1;var e=ha,t=sx;sx=0;var n=gv(Eo),s=ge.T,r=Oe.p;try{Oe.p=32>n?32:n,ge.T=null,n=rx,rx=null;var i=ha,o=Eo;if(It=0,tl=ha=null,Eo=0,Ue&6)throw Error(Y(331));var l=Ue;if(Ue|=4,hM(i.current),dM(i,i.current,o,n),Ue=l,Cu(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(hu,i)}catch{}return!0}finally{Oe.p=r,ge.T=s,EM(e,t)}}function nN(e,t,n){t=Fn(n,t),t=Qp(e.stateNode,t,2),e=fa(e,t,2),e!==null&&(pu(e,2),qs(e))}function Ye(e,t,n){if(e.tag===3)nN(e,e,n);else for(;t!==null;){if(t.tag===3){nN(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ma===null||!ma.has(s))){e=Fn(n,e),n=qT(2),s=fa(t,n,2),s!==null&&(ZT(n,s,t,e),pu(s,2),qs(s));break}}t=t.return}}function bg(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new YJ;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(Gv=!0,r.add(n),e=JJ.bind(null,e,t,n),t.then(e,e))}function JJ(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,We===e&&(De&n)===n&&(dt===4||dt===3&&(De&62914560)===De&&300>zs()-Xv?!(Ue&2)&&nl(e,0):Yv|=n,el===De&&(el=0)),qs(e)}function AM(e,t){t===0&&(t=SA()),e=bl(e,t),e!==null&&(pu(e,t),qs(e))}function eee(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),AM(e,n)}function tee(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(Y(314))}s!==null&&s.delete(t),AM(e,n)}function nee(e,t){return mv(e,t)}var Of=null,Xi=null,ox=!1,Bf=!1,wg=!1,ei=0;function qs(e){e!==Xi&&e.next===null&&(Xi===null?Of=Xi=e:Xi=Xi.next=e),Bf=!0,ox||(ox=!0,ree())}function Cu(e,t){if(!wg&&Bf){wg=!0;do for(var n=!1,s=Of;s!==null;){if(e!==0){var r=s.pendingLanes;if(r===0)var i=0;else{var o=s.suspendedLanes,l=s.pingedLanes;i=(1<<31-kn(42|e)+1)-1,i&=r&~(o&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,sN(s,i))}else i=De,i=Om(s,s===We?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(i&3)||gu(s,i)||(n=!0,sN(s,i));s=s.next}while(n);wg=!1}}function see(){TM()}function TM(){Bf=ox=!1;var e=0;ei!==0&&(fee()&&(e=ei),ei=0);for(var t=zs(),n=null,s=Of;s!==null;){var r=s.next,i=MM(s,t);i===0?(s.next=null,n===null?Of=r:n.next=r,r===null&&(Xi=n)):(n=s,(e!==0||i&3)&&(Bf=!0)),s=r}Cu(e)}function MM(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var o=31-kn(i),l=1<<o,c=r[o];c===-1?(!(l&n)||l&s)&&(r[o]=AQ(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}if(t=We,n=De,n=Om(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,n===0||e===t&&(Fe===2||Fe===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Gh(s),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||gu(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&Gh(s),gv(n)){case 2:case 8:n=wA;break;case 32:n=bf;break;case 268435456:n=jA;break;default:n=bf}return s=RM.bind(null,e),n=mv(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&Gh(s),e.callbackPriority=2,e.callbackNode=null,2}function RM(e,t){if(It!==0&&It!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Wm()&&e.callbackNode!==n)return null;var s=De;return s=Om(e,e===We?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(vM(e,s,t),MM(e,zs()),e.callbackNode!=null&&e.callbackNode===n?RM.bind(null,e):null)}function sN(e,t){if(Wm())return null;vM(e,t,!0)}function ree(){hee(function(){Ue&6?mv(bA,see):TM()})}function Kv(){return ei===0&&(ei=NA()),ei}function rN(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_d(""+e)}function aN(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function aee(e,t,n,s,r){if(t==="submit"&&n&&n.stateNode===r){var i=rN((r[dn]||null).action),o=s.submitter;o&&(t=(t=o[dn]||null)?rN(t.formAction):o.getAttribute("formAction"),t!==null&&(i=t,o=null));var l=new Bm("action","action",null,s,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ei!==0){var c=o?aN(r,o):new FormData(r);Wp(n,{pending:!0,data:c,method:r.method,action:i},null,c)}}else typeof i=="function"&&(l.preventDefault(),c=o?aN(r,o):new FormData(r),Wp(n,{pending:!0,data:c,method:r.method,action:i},i,c))},currentTarget:r}]})}}for(var jg=0;jg<Op.length;jg++){var Ng=Op[jg],iee=Ng.toLowerCase(),oee=Ng[0].toUpperCase()+Ng.slice(1);gs(iee,"on"+oee)}gs(GA,"onAnimationEnd");gs(YA,"onAnimationIteration");gs(XA,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(SJ,"onTransitionRun");gs(kJ,"onTransitionStart");gs(CJ,"onTransitionCancel");gs(WA,"onTransitionEnd");Yo("onMouseEnter",["mouseout","mouseover"]);Yo("onMouseLeave",["mouseout","mouseover"]);Yo("onPointerEnter",["pointerout","pointerover"]);Yo("onPointerLeave",["pointerout","pointerover"]);Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lee=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oc));function DM(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;i=l,r.currentTarget=u;try{i(r)}catch(d){Rf(d)}r.currentTarget=null,i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;i=l,r.currentTarget=u;try{i(r)}catch(d){Rf(d)}r.currentTarget=null,i=c}}}}function Ee(e,t){var n=t[Mp];n===void 0&&(n=t[Mp]=new Set);var s=e+"__bubble";n.has(s)||(zM(t,e,2,!1),n.add(s))}function Sg(e,t,n){var s=0;t&&(s|=4),zM(n,e,s,t)}var md="_reactListening"+Math.random().toString(36).slice(2);function Qv(e){if(!e[md]){e[md]=!0,_A.forEach(function(n){n!=="selectionchange"&&(lee.has(n)||Sg(n,!1,e),Sg(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[md]||(t[md]=!0,Sg("selectionchange",!1,t))}}function zM(e,t,n,s){switch(ZM(t)){case 2:var r=Lee;break;case 8:r=$ee;break;default:r=ny}n=r.bind(null,t,n,e),r=void 0,!Lp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function kg(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===r)return;o=o.return}for(;l!==null;){if(o=eo(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){s=i=o;continue e}l=l.parentNode}}s=s.return}$A(function(){var u=i,d=vv(n),f=[];e:{var m=KA.get(e);if(m!==void 0){var h=Bm,p=e;switch(e){case"keypress":if(Td(n)===0)break e;case"keydown":case"keyup":h=nJ;break;case"focusin":p="focus",h=tg;break;case"focusout":p="blur",h=tg;break;case"beforeblur":case"afterblur":h=tg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=fj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=VQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=aJ;break;case GA:case YA:case XA:h=GQ;break;case WA:h=oJ;break;case"scroll":case"scrollend":h=FQ;break;case"wheel":h=cJ;break;case"copy":case"cut":case"paste":h=XQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=hj;break;case"toggle":case"beforetoggle":h=dJ}var v=(t&4)!==0,b=!v&&(e==="scroll"||e==="scrollend"),x=v?m!==null?m+"Capture":null:m;v=[];for(var y=u,w;y!==null;){var j=y;if(w=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||w===null||x===null||(j=Rc(y,x),j!=null&&v.push(Bc(y,j,w))),b)break;y=y.return}0<v.length&&(m=new h(m,p,null,n,d),f.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==zp&&(p=n.relatedTarget||n.fromElement)&&(eo(p)||p[vl]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?eo(p):null,p!==null&&(b=mu(p),v=p.tag,p!==b||v!==5&&v!==27&&v!==6)&&(p=null)):(h=null,p=u),h!==p)){if(v=fj,j="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=hj,j="onPointerLeave",x="onPointerEnter",y="pointer"),b=h==null?m:Yl(h),w=p==null?m:Yl(p),m=new v(j,y+"leave",h,n,d),m.target=b,m.relatedTarget=w,j=null,eo(d)===u&&(v=new v(x,y+"enter",p,n,d),v.target=w,v.relatedTarget=b,j=v),b=j,h&&p)t:{for(v=h,x=p,y=0,w=v;w;w=qi(w))y++;for(w=0,j=x;j;j=qi(j))w++;for(;0<y-w;)v=qi(v),y--;for(;0<w-y;)x=qi(x),w--;for(;y--;){if(v===x||x!==null&&v===x.alternate)break t;v=qi(v),x=qi(x)}v=null}else v=null;h!==null&&iN(f,m,h,v,!1),p!==null&&b!==null&&iN(f,b,p,v,!0)}}e:{if(m=u?Yl(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var N=vj;else if(xj(m))if(FA)N=wJ;else{N=yJ;var S=vJ}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&xv(u.elementType)&&(N=vj):N=bJ;if(N&&(N=N(e,u))){HA(f,N,n,d);break e}S&&S(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&Dp(m,"number",m.value)}switch(S=u?Yl(u):window,e){case"focusin":(xj(S)||S.contentEditable==="true")&&(so=S,$p=u,tc=null);break;case"focusout":tc=$p=so=null;break;case"mousedown":Pp=!0;break;case"contextmenu":case"mouseup":case"dragend":Pp=!1,Nj(f,n,d);break;case"selectionchange":if(NJ)break;case"keydown":case"keyup":Nj(f,n,d)}var k;if(wv)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else no?BA(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(OA&&n.locale!=="ko"&&(no||E!=="onCompositionStart"?E==="onCompositionEnd"&&no&&(k=PA()):(sa=d,yv="value"in sa?sa.value:sa.textContent,no=!0)),S=If(u,E),0<S.length&&(E=new mj(E,e,null,n,d),f.push({event:E,listeners:S}),k?E.data=k:(k=IA(n),k!==null&&(E.data=k)))),(k=mJ?hJ(e,n):gJ(e,n))&&(E=If(u,"onBeforeInput"),0<E.length&&(S=new mj("onBeforeInput","beforeinput",null,n,d),f.push({event:S,listeners:E}),S.data=k)),aee(f,e,u,n,d)}DM(f,t)})}function Bc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function If(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||i===null||(r=Rc(e,n),r!=null&&s.unshift(Bc(e,r,i)),r=Rc(e,t),r!=null&&s.push(Bc(e,r,i))),e.tag===3)return s;e=e.return}return[]}function qi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function iN(e,t,n,s,r){for(var i=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||u===null||(c=u,r?(u=Rc(n,i),u!=null&&o.unshift(Bc(n,u,c))):r||(u=Rc(n,i),u!=null&&o.push(Bc(n,u,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var cee=/\r\n?/g,uee=/\u0000|\uFFFD/g;function oN(e){return(typeof e=="string"?e:""+e).replace(cee,`
`).replace(uee,"")}function LM(e,t){return t=oN(t),oN(e)===t}function Km(){}function Ve(e,t,n,s,r,i){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Xo(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Xo(e,""+s);break;case"className":id(e,"class",s);break;case"tabIndex":id(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":id(e,n,s);break;case"style":LA(e,s,i);break;case"data":if(t!=="object"){id(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=_d(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(t!=="input"&&Ve(e,t,"name",r.name,r,null),Ve(e,t,"formEncType",r.formEncType,r,null),Ve(e,t,"formMethod",r.formMethod,r,null),Ve(e,t,"formTarget",r.formTarget,r,null)):(Ve(e,t,"encType",r.encType,r,null),Ve(e,t,"method",r.method,r,null),Ve(e,t,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=_d(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=Km);break;case"onScroll":s!=null&&Ee("scroll",e);break;case"onScrollEnd":s!=null&&Ee("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Y(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(Y(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=_d(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Ee("beforetoggle",e),Ee("toggle",e),Ed(e,"popover",s);break;case"xlinkActuate":tr(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":tr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":tr(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":tr(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":tr(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":tr(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":tr(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":tr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":tr(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Ed(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=IQ.get(n)||n,Ed(e,n,s))}}function lx(e,t,n,s,r,i){switch(n){case"style":LA(e,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Y(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(Y(60));e.innerHTML=n}}break;case"children":typeof s=="string"?Xo(e,s):(typeof s=="number"||typeof s=="bigint")&&Xo(e,""+s);break;case"onScroll":s!=null&&Ee("scroll",e);break;case"onScrollEnd":s!=null&&Ee("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Km);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!AA.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),i=e[dn]||null,i=i!=null?i[n]:null,typeof i=="function"&&e.removeEventListener(t,i,r),typeof s=="function")){typeof i!="function"&&i!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,r);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):Ed(e,n,s)}}}function Ht(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",e),Ee("load",e);var s=!1,r=!1,i;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(o!=null)switch(i){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,t));default:Ve(e,t,i,o,n,null)}}r&&Ve(e,t,"srcSet",n.srcSet,n,null),s&&Ve(e,t,"src",n.src,n,null);return;case"input":Ee("invalid",e);var l=i=o=r=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(d!=null)switch(s){case"name":r=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":i=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(Y(137,t));break;default:Ve(e,t,s,d,n,null)}}RA(e,i,l,c,u,o,r,!1),wf(e);return;case"select":Ee("invalid",e),s=o=i=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Ve(e,t,r,l,n,null)}t=i,n=o,e.multiple=!!s,t!=null?wo(e,!!s,t,!1):n!=null&&wo(e,!!s,n,!0);return;case"textarea":Ee("invalid",e),i=r=s=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":s=l;break;case"defaultValue":r=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Y(91));break;default:Ve(e,t,o,l,n,null)}zA(e,s,r,i),wf(e);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ve(e,t,c,s,n,null)}return;case"dialog":Ee("beforetoggle",e),Ee("toggle",e),Ee("cancel",e),Ee("close",e);break;case"iframe":case"object":Ee("load",e);break;case"video":case"audio":for(s=0;s<Oc.length;s++)Ee(Oc[s],e);break;case"image":Ee("error",e),Ee("load",e);break;case"details":Ee("toggle",e);break;case"embed":case"source":case"link":Ee("error",e),Ee("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,t));default:Ve(e,t,u,s,n,null)}return;default:if(xv(t)){for(d in n)n.hasOwnProperty(d)&&(s=n[d],s!==void 0&&lx(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Ve(e,t,l,s,n,null))}function dee(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,o=null,l=null,c=null,u=null,d=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&f!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":c=f;default:s.hasOwnProperty(h)||Ve(e,t,h,null,s,f)}}for(var m in s){var h=s[m];if(f=n[m],s.hasOwnProperty(m)&&(h!=null||f!=null))switch(m){case"type":i=h;break;case"name":r=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":o=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(Y(137,t));break;default:h!==f&&Ve(e,t,m,h,s,f)}}Rp(e,o,l,c,u,d,i,r);return;case"select":h=o=l=m=null;for(i in n)if(c=n[i],n.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":h=c;default:s.hasOwnProperty(i)||Ve(e,t,i,null,s,c)}for(r in s)if(i=s[r],c=n[r],s.hasOwnProperty(r)&&(i!=null||c!=null))switch(r){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Ve(e,t,r,i,s,c)}t=l,n=o,s=h,m!=null?wo(e,!!n,m,!1):!!s!=!!n&&(t!=null?wo(e,!!n,t,!0):wo(e,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ve(e,t,l,null,s,r)}for(o in s)if(r=s[o],i=n[o],s.hasOwnProperty(o)&&(r!=null||i!=null))switch(o){case"value":m=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(Y(91));break;default:r!==i&&Ve(e,t,o,r,s,i)}DA(e,m,h);return;case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&m!=null&&!s.hasOwnProperty(p))switch(p){case"selected":e.selected=!1;break;default:Ve(e,t,p,null,s,m)}for(c in s)if(m=s[c],h=n[c],s.hasOwnProperty(c)&&m!==h&&(m!=null||h!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ve(e,t,c,m,s,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!s.hasOwnProperty(v)&&Ve(e,t,v,null,s,m);for(u in s)if(m=s[u],h=n[u],s.hasOwnProperty(u)&&m!==h&&(m!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(Y(137,t));break;default:Ve(e,t,u,m,s,h)}return;default:if(xv(t)){for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!==void 0&&!s.hasOwnProperty(b)&&lx(e,t,b,void 0,s,m);for(d in s)m=s[d],h=n[d],!s.hasOwnProperty(d)||m===h||m===void 0&&h===void 0||lx(e,t,d,m,s,h);return}}for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!s.hasOwnProperty(x)&&Ve(e,t,x,null,s,m);for(f in s)m=s[f],h=n[f],!s.hasOwnProperty(f)||m===h||m==null&&h==null||Ve(e,t,f,m,s,h)}var cx=null,ux=null;function Hf(e){return e.nodeType===9?e:e.ownerDocument}function lN(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $M(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function dx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cg=null;function fee(){var e=window.event;return e&&e.type==="popstate"?e===Cg?!1:(Cg=e,!0):(Cg=null,!1)}var PM=typeof setTimeout=="function"?setTimeout:void 0,mee=typeof clearTimeout=="function"?clearTimeout:void 0,cN=typeof Promise=="function"?Promise:void 0,hee=typeof queueMicrotask=="function"?queueMicrotask:typeof cN<"u"?function(e){return cN.resolve(null).then(e).catch(gee)}:PM;function gee(e){setTimeout(function(){throw e})}function Aa(e){return e==="head"}function uN(e,t){var n=t,s=0,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(0<s&&8>s){n=s;var o=e.ownerDocument;if(n&1&&fc(o.documentElement),n&2&&fc(o.body),n&4)for(n=o.head,fc(n),o=n.firstChild;o;){var l=o.nextSibling,c=o.nodeName;o[xu]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=l}}if(r===0){e.removeChild(i),Vc(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:s=n.charCodeAt(0)-48;else s=0;n=i}while(n);Vc(t)}function fx(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fx(n),pv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function pee(e,t,n,s){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[xu])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=os(e.nextSibling),e===null)break}return null}function xee(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=os(e.nextSibling),e===null))return null;return e}function mx(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function vee(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function os(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var hx=null;function dN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function OM(e,t,n){switch(t=Hf(n),e){case"html":if(e=t.documentElement,!e)throw Error(Y(452));return e;case"head":if(e=t.head,!e)throw Error(Y(453));return e;case"body":if(e=t.body,!e)throw Error(Y(454));return e;default:throw Error(Y(451))}}function fc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);pv(e)}var Xn=new Map,fN=new Set;function Ff(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Dr=Oe.d;Oe.d={f:yee,r:bee,D:wee,C:jee,L:Nee,m:See,X:Cee,S:kee,M:Eee};function yee(){var e=Dr.f(),t=Ym();return e||t}function bee(e){var t=yl(e);t!==null&&t.tag===5&&t.type==="form"?MT(t):Dr.r(e)}var jl=typeof document>"u"?null:document;function BM(e,t,n){var s=jl;if(s&&typeof t=="string"&&t){var r=Hn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),fN.has(r)||(fN.add(r),e={rel:e,crossOrigin:n,href:t},s.querySelector(r)===null&&(t=s.createElement("link"),Ht(t,"link",e),Mt(t),s.head.appendChild(t)))}}function wee(e){Dr.D(e),BM("dns-prefetch",e,null)}function jee(e,t){Dr.C(e,t),BM("preconnect",e,t)}function Nee(e,t,n){Dr.L(e,t,n);var s=jl;if(s&&e&&t){var r='link[rel="preload"][as="'+Hn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Hn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Hn(n.imageSizes)+'"]')):r+='[href="'+Hn(e)+'"]';var i=r;switch(t){case"style":i=sl(e);break;case"script":i=Nl(e)}Xn.has(i)||(e=Qe({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Xn.set(i,e),s.querySelector(r)!==null||t==="style"&&s.querySelector(Eu(i))||t==="script"&&s.querySelector(_u(i))||(t=s.createElement("link"),Ht(t,"link",e),Mt(t),s.head.appendChild(t)))}}function See(e,t){Dr.m(e,t);var n=jl;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Hn(s)+'"][href="'+Hn(e)+'"]',i=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Nl(e)}if(!Xn.has(i)&&(e=Qe({rel:"modulepreload",href:e},t),Xn.set(i,e),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(_u(i)))return}s=n.createElement("link"),Ht(s,"link",e),Mt(s),n.head.appendChild(s)}}}function kee(e,t,n){Dr.S(e,t,n);var s=jl;if(s&&e){var r=bo(s).hoistableStyles,i=sl(e);t=t||"default";var o=r.get(i);if(!o){var l={loading:0,preload:null};if(o=s.querySelector(Eu(i)))l.loading=5;else{e=Qe({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Xn.get(i))&&Jv(e,n);var c=o=s.createElement("link");Mt(c),Ht(c,"link",e),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Pd(o,t,s)}o={type:"stylesheet",instance:o,count:1,state:l},r.set(i,o)}}}function Cee(e,t){Dr.X(e,t);var n=jl;if(n&&e){var s=bo(n).hoistableScripts,r=Nl(e),i=s.get(r);i||(i=n.querySelector(_u(r)),i||(e=Qe({src:e,async:!0},t),(t=Xn.get(r))&&ey(e,t),i=n.createElement("script"),Mt(i),Ht(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function Eee(e,t){Dr.M(e,t);var n=jl;if(n&&e){var s=bo(n).hoistableScripts,r=Nl(e),i=s.get(r);i||(i=n.querySelector(_u(r)),i||(e=Qe({src:e,async:!0,type:"module"},t),(t=Xn.get(r))&&ey(e,t),i=n.createElement("script"),Mt(i),Ht(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function mN(e,t,n,s){var r=(r=ua.current)?Ff(r):null;if(!r)throw Error(Y(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=sl(n.href),n=bo(r).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=sl(n.href);var i=bo(r).hoistableStyles,o=i.get(e);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,o),(i=r.querySelector(Eu(e)))&&!i._p&&(o.instance=i,o.state.loading=5),Xn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Xn.set(e,n),i||_ee(r,e,n,o.state))),t&&s===null)throw Error(Y(528,""));return o}if(t&&s!==null)throw Error(Y(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Nl(n),n=bo(r).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(Y(444,e))}}function sl(e){return'href="'+Hn(e)+'"'}function Eu(e){return'link[rel="stylesheet"]['+e+"]"}function IM(e){return Qe({},e,{"data-precedence":e.precedence,precedence:null})}function _ee(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Ht(t,"link",n),Mt(t),e.head.appendChild(t))}function Nl(e){return'[src="'+Hn(e)+'"]'}function _u(e){return"script[async]"+e}function hN(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Hn(n.href)+'"]');if(s)return t.instance=s,Mt(s),s;var r=Qe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Mt(s),Ht(s,"style",r),Pd(s,n.precedence,e),t.instance=s;case"stylesheet":r=sl(n.href);var i=e.querySelector(Eu(r));if(i)return t.state.loading|=4,t.instance=i,Mt(i),i;s=IM(n),(r=Xn.get(r))&&Jv(s,r),i=(e.ownerDocument||e).createElement("link"),Mt(i);var o=i;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Ht(i,"link",s),t.state.loading|=4,Pd(i,n.precedence,e),t.instance=i;case"script":return i=Nl(n.src),(r=e.querySelector(_u(i)))?(t.instance=r,Mt(r),r):(s=n,(r=Xn.get(i))&&(s=Qe({},n),ey(s,r)),e=e.ownerDocument||e,r=e.createElement("script"),Mt(r),Ht(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(Y(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,Pd(s,n.precedence,e));return t.instance}function Pd(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,i=r,o=0;o<s.length;o++){var l=s[o];if(l.dataset.precedence===t)i=l;else if(i!==r)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Jv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ey(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Od=null;function gN(e,t,n){if(Od===null){var s=new Map,r=Od=new Map;r.set(n,s)}else r=Od,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var i=n[r];if(!(i[xu]||i[qt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var o=i.getAttribute(t)||"";o=e+o;var l=s.get(o);l?l.push(i):s.set(o,[i])}}return s}function pN(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Aee(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function HM(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Ic=null;function Tee(){}function Mee(e,t,n){if(Ic===null)throw Error(Y(475));var s=Ic;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=sl(n.href),i=e.querySelector(Eu(r));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Uf.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=i,Mt(i);return}i=e.ownerDocument||e,n=IM(n),(r=Xn.get(r))&&Jv(n,r),i=i.createElement("link"),Mt(i);var o=i;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Ht(i,"link",n),t.instance=i}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=Uf.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function Ree(){if(Ic===null)throw Error(Y(475));var e=Ic;return e.stylesheets&&e.count===0&&gx(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&gx(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Uf(){if(this.count--,this.count===0){if(this.stylesheets)gx(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Vf=null;function gx(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Vf=new Map,t.forEach(Dee,e),Vf=null,Uf.call(e))}function Dee(e,t){if(!(t.state.loading&4)){var n=Vf.get(e);if(n)var s=n.get(null);else{n=new Map,Vf.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var o=r[i];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),s=o)}s&&n.set(null,s)}r=t.instance,o=r.getAttribute("data-precedence"),i=n.get(o)||s,i===s&&n.set(null,r),n.set(o,r),this.count++,s=Uf.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),i?i.parentNode.insertBefore(r,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Hc={$$typeof:lr,Provider:null,Consumer:null,_currentValue:Ya,_currentValue2:Ya,_threadCount:0};function zee(e,t,n,s,r,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yh(0),this.hiddenUpdates=Yh(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function FM(e,t,n,s,r,i,o,l,c,u,d,f){return e=new zee(e,t,n,o,l,c,u,f),t=1,i===!0&&(t|=24),i=jn(3,null,null,t),e.current=i,i.stateNode=e,t=_v(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:t},Tv(i),e}function UM(e){return e?(e=io,e):io}function VM(e,t,n,s,r,i){r=UM(r),s.context===null?s.context=r:s.pendingContext=r,s=da(t),s.payload={element:n},i=i===void 0?null:i,i!==null&&(s.callback=i),n=fa(e,s,t),n!==null&&(En(n,e,t),rc(n,e,t))}function xN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ty(e,t){xN(e,t),(e=e.alternate)&&xN(e,t)}function qM(e){if(e.tag===13){var t=bl(e,67108864);t!==null&&En(t,e,67108864),ty(e,67108864)}}var qf=!0;function Lee(e,t,n,s){var r=ge.T;ge.T=null;var i=Oe.p;try{Oe.p=2,ny(e,t,n,s)}finally{Oe.p=i,ge.T=r}}function $ee(e,t,n,s){var r=ge.T;ge.T=null;var i=Oe.p;try{Oe.p=8,ny(e,t,n,s)}finally{Oe.p=i,ge.T=r}}function ny(e,t,n,s){if(qf){var r=px(s);if(r===null)kg(e,t,s,Zf,n),vN(e,s);else if(Oee(r,e,t,n,s))s.stopPropagation();else if(vN(e,s),t&4&&-1<Pee.indexOf(e)){for(;r!==null;){var i=yl(r);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var o=$a(i.pendingLanes);if(o!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-kn(o);l.entanglements[1]|=c,o&=~c}qs(i),!(Ue&6)&&($f=zs()+500,Cu(0))}}break;case 13:l=bl(i,2),l!==null&&En(l,i,2),Ym(),ty(i,2)}if(i=px(s),i===null&&kg(e,t,s,Zf,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else kg(e,t,s,null,n)}}function px(e){return e=vv(e),sy(e)}var Zf=null;function sy(e){if(Zf=null,e=eo(e),e!==null){var t=mu(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=pA(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Zf=e,null}function ZM(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jQ()){case bA:return 2;case wA:return 8;case bf:case NQ:return 32;case jA:return 268435456;default:return 32}default:return 32}}var xx=!1,ga=null,pa=null,xa=null,Fc=new Map,Uc=new Map,Jr=[],Pee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vN(e,t){switch(e){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":Fc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(t.pointerId)}}function Hl(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=yl(t),t!==null&&qM(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Oee(e,t,n,s,r){switch(t){case"focusin":return ga=Hl(ga,e,t,n,s,r),!0;case"dragenter":return pa=Hl(pa,e,t,n,s,r),!0;case"mouseover":return xa=Hl(xa,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return Fc.set(i,Hl(Fc.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Uc.set(i,Hl(Uc.get(i)||null,e,t,n,s,r)),!0}return!1}function GM(e){var t=eo(e.target);if(t!==null){var n=mu(t);if(n!==null){if(t=n.tag,t===13){if(t=pA(n),t!==null){e.blockedOn=t,MQ(e.priority,function(){if(n.tag===13){var s=Cn();s=hv(s);var r=bl(n,s);r!==null&&En(r,n,s),ty(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=px(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);zp=s,n.target.dispatchEvent(s),zp=null}else return t=yl(n),t!==null&&qM(t),e.blockedOn=n,!1;t.shift()}return!0}function yN(e,t,n){Bd(e)&&n.delete(t)}function Bee(){xx=!1,ga!==null&&Bd(ga)&&(ga=null),pa!==null&&Bd(pa)&&(pa=null),xa!==null&&Bd(xa)&&(xa=null),Fc.forEach(yN),Uc.forEach(yN)}function hd(e,t){e.blockedOn===t&&(e.blockedOn=null,xx||(xx=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,Bee)))}var gd=null;function bN(e){gd!==e&&(gd=e,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,function(){gd===e&&(gd=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],r=e[t+2];if(typeof s!="function"){if(sy(s||n)===null)continue;break}var i=yl(n);i!==null&&(e.splice(t,3),t-=3,Wp(i,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Vc(e){function t(c){return hd(c,e)}ga!==null&&hd(ga,e),pa!==null&&hd(pa,e),xa!==null&&hd(xa,e),Fc.forEach(t),Uc.forEach(t);for(var n=0;n<Jr.length;n++){var s=Jr[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)GM(n),n.blockedOn===null&&Jr.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],i=n[s+1],o=r[dn]||null;if(typeof i=="function")o||bN(n);else if(o){var l=null;if(i&&i.hasAttribute("formAction")){if(r=i,o=i[dn]||null)l=o.formAction;else if(sy(r)!==null)continue}else l=o.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),bN(n)}}}function ry(e){this._internalRoot=e}Qm.prototype.render=ry.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));var n=t.current,s=Cn();VM(n,s,e,t,null,null)};Qm.prototype.unmount=ry.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;VM(e.current,2,null,e,null,null),Ym(),t[vl]=null}};function Qm(e){this._internalRoot=e}Qm.prototype.unstable_scheduleHydration=function(e){if(e){var t=EA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jr.length&&t!==0&&t<Jr[n].priority;n++);Jr.splice(n,0,e),n===0&&GM(e)}};var wN=hA.version;if(wN!=="19.1.0")throw Error(Y(527,wN,"19.1.0"));Oe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=gQ(t),e=e!==null?xA(e):null,e=e===null?null:e.stateNode,e};var Iee={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{hu=pd.inject(Iee),Sn=pd}catch{}}Pm.createRoot=function(e,t){if(!gA(e))throw Error(Y(299));var n=!1,s="",r=FT,i=UT,o=VT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=FM(e,1,!1,null,null,n,s,r,i,o,l,null),e[vl]=t.current,Qv(e),new ry(t)};Pm.hydrateRoot=function(e,t,n){if(!gA(e))throw Error(Y(299));var s=!1,r="",i=FT,o=UT,l=VT,c=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),t=FM(e,1,!0,t,n??null,s,r,i,o,l,c,u),t.context=UM(null),n=t.current,s=Cn(),s=hv(s),r=da(s),r.callback=null,fa(n,r,s),n=s,t.current.lanes=n,pu(t,n),qs(t),e[vl]=t.current,Qv(e),new Qm(t)};Pm.version="19.1.0";function YM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YM)}catch(e){console.error(e)}}YM(),dA.exports=Pm;var Hee=dA.exports;Hee.createRoot(document.getElementById("root")).render(a.jsx(g.StrictMode,{children:a.jsx(fQ,{showLoadingIndicator:!0,children:a.jsx(sQ,{children:a.jsx(dQ,{})})})}));
