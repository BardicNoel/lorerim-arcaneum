var iR=Object.defineProperty;var lR=(e,t,n)=>t in e?iR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ve=(e,t,n)=>lR(e,typeof t!="symbol"?t+"":t,n);function cR(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const a=Object.getOwnPropertyDescriptor(s,r);a&&Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function sx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vN={exports:{}},Rf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR=Symbol.for("react.transitional.element"),dR=Symbol.for("react.fragment");function bN(e,t,n){var s=null;if(n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:uR,type:e,key:s,ref:t!==void 0?t:null,props:n}}Rf.Fragment=dR;Rf.jsx=bN;Rf.jsxs=bN;vN.exports=Rf;var o=vN.exports;const Dt={CONTENT:1,DROPDOWN:100,AUTOCOMPLETE:120,TOOLTIP:150,MODAL:200,DRAWER:202,HEADER:50,SIDEBAR:60,STICKY:40};var wN={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx=Symbol.for("react.transitional.element"),fR=Symbol.for("react.portal"),mR=Symbol.for("react.fragment"),hR=Symbol.for("react.strict_mode"),gR=Symbol.for("react.profiler"),pR=Symbol.for("react.consumer"),xR=Symbol.for("react.context"),yR=Symbol.for("react.forward_ref"),vR=Symbol.for("react.suspense"),bR=Symbol.for("react.memo"),NN=Symbol.for("react.lazy"),nv=Symbol.iterator;function wR(e){return e===null||typeof e!="object"?null:(e=nv&&e[nv]||e["@@iterator"],typeof e=="function"?e:null)}var jN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SN=Object.assign,CN={};function Ui(e,t,n){this.props=e,this.context=t,this.refs=CN,this.updater=n||jN}Ui.prototype.isReactComponent={};Ui.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ui.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kN(){}kN.prototype=Ui.prototype;function ax(e,t,n){this.props=e,this.context=t,this.refs=CN,this.updater=n||jN}var ox=ax.prototype=new kN;ox.constructor=ax;SN(ox,Ui.prototype);ox.isPureReactComponent=!0;var sv=Array.isArray,Je={H:null,A:null,T:null,S:null,V:null},EN=Object.prototype.hasOwnProperty;function ix(e,t,n,s,r,a){return n=a.ref,{$$typeof:rx,type:e,key:t,ref:n!==void 0?n:null,props:a}}function NR(e,t){return ix(e.type,t,void 0,void 0,void 0,e.props)}function lx(e){return typeof e=="object"&&e!==null&&e.$$typeof===rx}function jR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rv=/\/+/g;function Im(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jR(""+e.key):t.toString(36)}function av(){}function SR(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(av,av):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function $o(e,t,n,s,r){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case rx:case fR:i=!0;break;case NN:return i=e._init,$o(i(e._payload),t,n,s,r)}}if(i)return r=r(e),i=s===""?"."+Im(e,0):s,sv(r)?(n="",i!=null&&(n=i.replace(rv,"$&/")+"/"),$o(r,t,n,"",function(u){return u})):r!=null&&(lx(r)&&(r=NR(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(rv,"$&/")+"/")+i)),t.push(r)),1;i=0;var l=s===""?".":s+":";if(sv(e))for(var c=0;c<e.length;c++)s=e[c],a=l+Im(s,c),i+=$o(s,t,n,a,r);else if(c=wR(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,a=l+Im(s,c++),i+=$o(s,t,n,a,r);else if(a==="object"){if(typeof e.then=="function")return $o(SR(e),t,n,s,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function hu(e,t,n){if(e==null)return e;var s=[],r=0;return $o(e,s,"","",function(a){return t.call(n,a,r++)}),s}function CR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ov=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function kR(){}Ne.Children={map:hu,forEach:function(e,t,n){hu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hu(e,function(){t++}),t},toArray:function(e){return hu(e,function(t){return t})||[]},only:function(e){if(!lx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=Ui;Ne.Fragment=mR;Ne.Profiler=gR;Ne.PureComponent=ax;Ne.StrictMode=hR;Ne.Suspense=vR;Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Je;Ne.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Je.H.useMemoCache(e)}};Ne.cache=function(e){return function(){return e.apply(null,arguments)}};Ne.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=SN({},e.props),r=e.key,a=void 0;if(t!=null)for(i in t.ref!==void 0&&(a=void 0),t.key!==void 0&&(r=""+t.key),t)!EN.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(s[i]=t[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];s.children=l}return ix(e.type,r,void 0,void 0,a,s)};Ne.createContext=function(e){return e={$$typeof:xR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:pR,_context:e},e};Ne.createElement=function(e,t,n){var s,r={},a=null;if(t!=null)for(s in t.key!==void 0&&(a=""+t.key),t)EN.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(r[s]=t[s]);var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)r[s]===void 0&&(r[s]=i[s]);return ix(e,a,void 0,void 0,null,r)};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:yR,render:e}};Ne.isValidElement=lx;Ne.lazy=function(e){return{$$typeof:NN,_payload:{_status:-1,_result:e},_init:CR}};Ne.memo=function(e,t){return{$$typeof:bR,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=Je.T,n={};Je.T=n;try{var s=e(),r=Je.S;r!==null&&r(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(kR,ov)}catch(a){ov(a)}finally{Je.T=t}};Ne.unstable_useCacheRefresh=function(){return Je.H.useCacheRefresh()};Ne.use=function(e){return Je.H.use(e)};Ne.useActionState=function(e,t,n){return Je.H.useActionState(e,t,n)};Ne.useCallback=function(e,t){return Je.H.useCallback(e,t)};Ne.useContext=function(e){return Je.H.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e,t){return Je.H.useDeferredValue(e,t)};Ne.useEffect=function(e,t,n){var s=Je.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)};Ne.useId=function(){return Je.H.useId()};Ne.useImperativeHandle=function(e,t,n){return Je.H.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return Je.H.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return Je.H.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Je.H.useMemo(e,t)};Ne.useOptimistic=function(e,t){return Je.H.useOptimistic(e,t)};Ne.useReducer=function(e,t,n){return Je.H.useReducer(e,t,n)};Ne.useRef=function(e){return Je.H.useRef(e)};Ne.useState=function(e){return Je.H.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return Je.H.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return Je.H.useTransition()};Ne.version="19.1.0";wN.exports=Ne;var g=wN.exports;const L=sx(g),_N=cR({__proto__:null,default:L},[g]);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_R=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),iv=e=>{const t=_R(e);return t.charAt(0).toUpperCase()+t.slice(1)},AN=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),AR=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:a,iconNode:i,...l},c)=>g.createElement("svg",{ref:c,...MR,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:AN("lucide",r),...!a&&!AR(l)&&{"aria-hidden":"true"},...l},[...i.map(([u,d])=>g.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(e,t)=>{const n=g.forwardRef(({className:s,...r},a)=>g.createElement(TR,{ref:a,iconNode:t,className:AN(`lucide-${ER(iv(e))}`,`lucide-${e}`,s),...r}));return n.displayName=iv(e),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cg=oe("arrow-left",RR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],zR=oe("arrow-right",DR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],MN=oe("book-open",LR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],lv=oe("brain",$R);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ug=oe("check",PR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],BR=oe("chef-hat",OR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vn=oe("chevron-down",IR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],UR=oe("chevron-left",HR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Dc=oe("chevron-right",FR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],qR=oe("chevron-up",VR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pi=oe("circle-alert",ZR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dg=oe("circle-check-big",GR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],XR=oe("circle-x",YR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Df=oe("circle",WR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],QR=oe("clock",KR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],e4=oe("copy",JR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],n4=oe("crosshair",t4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],r4=oe("droplets",s4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ga=oe("external-link",a4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cx=oe("eye",o4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],TN=oe("file-text",i4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],RN=oe("flame",l4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],u4=oe("ghost",c4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Fi=oe("grid-3x3",d4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],cv=oe("hand",f4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],zc=oe("heart",m4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],DN=oe("house",h4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ec=oe("info",g4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],x4=oe("layout-grid",p4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],oo=oe("list",y4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],b4=oe("lock",v4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],N4=oe("maximize-2",w4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],S4=oe("menu",j4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],k4=oe("message-square",C4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],_4=oe("minimize-2",E4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M5 12h14",key:"1ays0h"}]],$l=oe("minus",A4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],T4=oe("monitor",M4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],D4=oe("moon",R4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Qr=oe("plus",z4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],xi=oe("rotate-ccw",L4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],P4=oe("scroll",$4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],B4=oe("search-x",O4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yi=oe("search",I4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zN=oe("settings",H4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],es=oe("shield",U4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],tc=oe("sparkles",F4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ye=oe("star",V4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],uv=oe("sun",q4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],fg=oe("sword",Z4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Y4=oe("tag",G4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Cd=oe("target",X4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],K4=oe("trash-2",W4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],dv=oe("trending-down",Q4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],mg=oe("trending-up",J4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nc=oe("triangle-alert",e3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],n3=oe("user-check",t3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pl=oe("user",s3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],a3=oe("users",r3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],i3=oe("utensils",o3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],c3=oe("wine",l3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],d3=oe("wrench",u3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qt=oe("x",f3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ca=oe("zap",m3);var ux={};Object.defineProperty(ux,"__esModule",{value:!0});ux.parse=b3;ux.serialize=w3;const h3=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,g3=/^[\u0021-\u003A\u003C-\u007E]*$/,p3=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,x3=/^[\u0020-\u003A\u003D-\u007E]*$/,y3=Object.prototype.toString,v3=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function b3(e,t){const n=new v3,s=e.length;if(s<2)return n;const r=(t==null?void 0:t.decode)||N3;let a=0;do{const i=e.indexOf("=",a);if(i===-1)break;const l=e.indexOf(";",a),c=l===-1?s:l;if(i>c){a=e.lastIndexOf(";",i-1)+1;continue}const u=fv(e,a,i),d=mv(e,i,u),f=e.slice(u,d);if(n[f]===void 0){let m=fv(e,i+1,c),h=mv(e,c,m);const p=r(e.slice(m,h));n[f]=p}a=c+1}while(a<s);return n}function fv(e,t,n){do{const s=e.charCodeAt(t);if(s!==32&&s!==9)return t}while(++t<n);return n}function mv(e,t,n){for(;t>n;){const s=e.charCodeAt(--t);if(s!==32&&s!==9)return t+1}return n}function w3(e,t,n){const s=(n==null?void 0:n.encode)||encodeURIComponent;if(!h3.test(e))throw new TypeError(`argument name is invalid: ${e}`);const r=s(t);if(!g3.test(r))throw new TypeError(`argument val is invalid: ${t}`);let a=e+"="+r;if(!n)return a;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);a+="; Max-Age="+n.maxAge}if(n.domain){if(!p3.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);a+="; Domain="+n.domain}if(n.path){if(!x3.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);a+="; Path="+n.path}if(n.expires){if(!j3(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.partitioned&&(a+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return a}function N3(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function j3(e){return y3.call(e)==="[object Date]"}var hv="popstate";function S3(e={}){function t(r,a){let{pathname:i="/",search:l="",hash:c=""}=io(r.location.hash.substring(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),hg("",{pathname:i,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){let i=r.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=r.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof a=="string"?a:sc(a))}function s(r,a){qn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return k3(t,n,s,e)}function rt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function C3(){return Math.random().toString(36).substring(2,10)}function gv(e,t){return{usr:e.state,key:e.key,idx:t}}function hg(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?io(t):t,state:n,key:t&&t.key||s||C3()}}function sc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function io(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function k3(e,t,n,s={}){let{window:r=document.defaultView,v5Compat:a=!1}=s,i=r.history,l="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){l="POP";let b=d(),x=b==null?null:b-u;u=b,c&&c({action:l,location:y.location,delta:x})}function m(b,x){l="PUSH";let w=hg(y.location,b,x);n&&n(w,b),u=d()+1;let v=gv(w,u),N=y.createHref(w);try{i.pushState(v,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(N)}a&&c&&c({action:l,location:y.location,delta:1})}function h(b,x){l="REPLACE";let w=hg(y.location,b,x);n&&n(w,b),u=d();let v=gv(w,u),N=y.createHref(w);i.replaceState(v,"",N),a&&c&&c({action:l,location:y.location,delta:0})}function p(b){return E3(b)}let y={get action(){return l},get location(){return e(r,i)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(hv,f),c=b,()=>{r.removeEventListener(hv,f),c=null}},createHref(b){return t(r,b)},createURL:p,encodeLocation(b){let x=p(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:h,go(b){return i.go(b)}};return y}function E3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),rt(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:sc(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function LN(e,t,n="/"){return _3(e,t,n,!1)}function _3(e,t,n,s){let r=typeof t=="string"?io(t):t,a=hr(r.pathname||"/",n);if(a==null)return null;let i=$N(e);A3(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=I3(a);l=O3(i[c],u,s)}return l}function $N(e,t=[],n=[],s=""){let r=(a,i,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(rt(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let u=cr([s,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(rt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),$N(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:$3(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,i);else for(let c of PN(a.path))r(a,i,c)}),t}function PN(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return r?[a,""]:[a];let i=PN(s.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),r&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function A3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:P3(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var M3=/^:[\w-]+$/,T3=3,R3=2,D3=1,z3=10,L3=-2,pv=e=>e==="*";function $3(e,t){let n=e.split("/"),s=n.length;return n.some(pv)&&(s+=L3),t&&(s+=R3),n.filter(r=>!pv(r)).reduce((r,a)=>r+(M3.test(a)?T3:a===""?D3:z3),s)}function P3(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function O3(e,t,n=!1){let{routesMeta:s}=e,r={},a="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=kd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!s[s.length-1].route.index&&(f=kd({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(r,f.params),i.push({params:r,pathname:cr([a,f.pathname]),pathnameBase:V3(cr([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=cr([a,f.pathnameBase]))}return i}function kd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=B3(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let a=r[0],i=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let p=l[m]||"";i=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const h=l[m];return f&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function B3(e,t=!1,n=!0){qn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function I3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function hr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function H3(e,t="/"){let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?io(e):e;return{pathname:n?n.startsWith("/")?n:U3(n,t):t,search:q3(s),hash:Z3(r)}}function U3(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Hm(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function F3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ON(e){let t=F3(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function BN(e,t,n,s=!1){let r;typeof e=="string"?r=io(e):(r={...e},rt(!r.pathname||!r.pathname.includes("?"),Hm("?","pathname","search",r)),rt(!r.pathname||!r.pathname.includes("#"),Hm("#","pathname","hash",r)),rt(!r.search||!r.search.includes("#"),Hm("#","search","hash",r)));let a=e===""||r.pathname==="",i=a?"/":r.pathname,l;if(i==null)l=n;else{let f=t.length-1;if(!s&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=H3(r,l),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var cr=e=>e.join("/").replace(/\/\/+/g,"/"),V3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function G3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var IN=["POST","PUT","PATCH","DELETE"];new Set(IN);var Y3=["GET",...IN];new Set(Y3);var Vi=g.createContext(null);Vi.displayName="DataRouter";var zf=g.createContext(null);zf.displayName="DataRouterState";var HN=g.createContext({isTransitioning:!1});HN.displayName="ViewTransition";var X3=g.createContext(new Map);X3.displayName="Fetchers";var W3=g.createContext(null);W3.displayName="Await";var Ds=g.createContext(null);Ds.displayName="Navigation";var Lc=g.createContext(null);Lc.displayName="Location";var zs=g.createContext({outlet:null,matches:[],isDataRoute:!1});zs.displayName="Route";var dx=g.createContext(null);dx.displayName="RouteError";function K3(e,{relative:t}={}){rt($c(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=g.useContext(Ds),{hash:r,pathname:a,search:i}=Pc(e,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:cr([n,a])),s.createHref({pathname:l,search:i,hash:r})}function $c(){return g.useContext(Lc)!=null}function Sr(){return rt($c(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Lc).location}var UN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FN(e){g.useContext(Ds).static||g.useLayoutEffect(e)}function dt(){let{isDataRoute:e}=g.useContext(zs);return e?fD():Q3()}function Q3(){rt($c(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Vi),{basename:t,navigator:n}=g.useContext(Ds),{matches:s}=g.useContext(zs),{pathname:r}=Sr(),a=JSON.stringify(ON(s)),i=g.useRef(!1);return FN(()=>{i.current=!0}),g.useCallback((c,u={})=>{if(qn(i.current,UN),!i.current)return;if(typeof c=="number"){n.go(c);return}let d=BN(c,JSON.parse(a),r,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:cr([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,a,r,e])}var J3=g.createContext(null);function eD(e){let t=g.useContext(zs).outlet;return t&&g.createElement(J3.Provider,{value:e},t)}function Pc(e,{relative:t}={}){let{matches:n}=g.useContext(zs),{pathname:s}=Sr(),r=JSON.stringify(ON(n));return g.useMemo(()=>BN(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function tD(e,t){return VN(e,t)}function VN(e,t,n,s){var x;rt($c(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=g.useContext(Ds),{matches:a}=g.useContext(zs),i=a[a.length-1],l=i?i.params:{},c=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let w=d&&d.path||"";qN(c,!d||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=Sr(),m;if(t){let w=typeof t=="string"?io(t):t;rt(u==="/"||((x=w.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),m=w}else m=f;let h=m.pathname||"/",p=h;if(u!=="/"){let w=u.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=LN(e,{pathname:p});qn(d||y!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),qn(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=oD(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:cr([u,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:cr([u,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,n,s);return t&&b?g.createElement(Lc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function nD(){let e=dD(),t=G3(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:r},n):null,i)}var sD=g.createElement(nD,null),rD=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(zs.Provider,{value:this.props.routeContext},g.createElement(dx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aD({routeContext:e,match:t,children:n}){let s=g.useContext(Vi);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(zs.Provider,{value:e},n)}function oD(e,t=[],n=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let r=e,a=n==null?void 0:n.errors;if(a!=null){let c=r.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);rt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let i=!1,l=-1;if(n)for(let c=0;c<r.length;c++){let u=r[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=n,m=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||m){i=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,u,d)=>{let f,m=!1,h=null,p=null;n&&(f=a&&u.route.id?a[u.route.id]:void 0,h=u.route.errorElement||sD,i&&(l<0&&d===0?(qN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,p=null):l===d&&(m=!0,p=u.route.hydrateFallbackElement||null)));let y=t.concat(r.slice(0,d+1)),b=()=>{let x;return f?x=h:m?x=p:u.route.Component?x=g.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,g.createElement(aD,{match:u,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?g.createElement(rD,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}function fx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iD(e){let t=g.useContext(Vi);return rt(t,fx(e)),t}function lD(e){let t=g.useContext(zf);return rt(t,fx(e)),t}function cD(e){let t=g.useContext(zs);return rt(t,fx(e)),t}function mx(e){let t=cD(e),n=t.matches[t.matches.length-1];return rt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function uD(){return mx("useRouteId")}function dD(){var s;let e=g.useContext(dx),t=lD("useRouteError"),n=mx("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function fD(){let{router:e}=iD("useNavigate"),t=mx("useNavigate"),n=g.useRef(!1);return FN(()=>{n.current=!0}),g.useCallback(async(r,a={})=>{qn(n.current,UN),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...a}))},[e,t])}var xv={};function qN(e,t,n){!t&&!xv[e]&&(xv[e]=!0,qn(!1,n))}g.memo(mD);function mD({routes:e,future:t,state:n}){return VN(e,void 0,n,t)}function hD(e){return eD(e.context)}function xt(e){rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gD({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:a=!1}){rt(!$c(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:i,navigator:r,static:a,future:{}}),[i,r,a]);typeof n=="string"&&(n=io(n));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:m="default"}=n,h=g.useMemo(()=>{let p=hr(c,i);return p==null?null:{location:{pathname:p,search:u,hash:d,state:f,key:m},navigationType:s}},[i,c,u,d,f,m,s]);return qn(h!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:g.createElement(Ds.Provider,{value:l},g.createElement(Lc.Provider,{children:t,value:h}))}function pD({children:e,location:t}){return tD(gg(e),t)}function gg(e,t=[]){let n=[];return g.Children.forEach(e,(s,r)=>{if(!g.isValidElement(s))return;let a=[...t,r];if(s.type===g.Fragment){n.push.apply(n,gg(s.props.children,a));return}rt(s.type===xt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let i={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=gg(s.props.children,a)),n.push(i)}),n}var nd="get",sd="application/x-www-form-urlencoded";function Lf(e){return e!=null&&typeof e.tagName=="string"}function xD(e){return Lf(e)&&e.tagName.toLowerCase()==="button"}function yD(e){return Lf(e)&&e.tagName.toLowerCase()==="form"}function vD(e){return Lf(e)&&e.tagName.toLowerCase()==="input"}function bD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wD(e,t){return e.button===0&&(!t||t==="_self")&&!bD(e)}function pg(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function ND(e,t){let n=pg(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(a=>{n.append(r,a)})}),n}var gu=null;function jD(){if(gu===null)try{new FormData(document.createElement("form"),0),gu=!1}catch{gu=!0}return gu}var SD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Um(e){return e!=null&&!SD.has(e)?(qn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sd}"`),null):e}function CD(e,t){let n,s,r,a,i;if(yD(e)){let l=e.getAttribute("action");s=l?hr(l,t):null,n=e.getAttribute("method")||nd,r=Um(e.getAttribute("enctype"))||sd,a=new FormData(e)}else if(xD(e)||vD(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?hr(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||nd,r=Um(e.getAttribute("formenctype"))||Um(l.getAttribute("enctype"))||sd,a=new FormData(l,e),!jD()){let{name:u,type:d,value:f}=e;if(d==="image"){let m=u?`${u}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else u&&a.append(u,f)}}else{if(Lf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=nd,s=null,r=sd,i=e}return a&&r==="text/plain"&&(i=a,a=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:a,body:i}}function hx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function kD(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ED(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function _D(e,t,n){let s=await Promise.all(e.map(async r=>{let a=t.routes[r.route.id];if(a){let i=await kD(a,n);return i.links?i.links():[]}return[]}));return RD(s.flat(1).filter(ED).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function yv(e,t,n,s,r,a){let i=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,u)=>i(c,u)||l(c,u)):a==="data"?t.filter((c,u)=>{var f;let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function AD(e,t,{includeHydrateFallback:n}={}){return MD(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function MD(e){return[...new Set(e)]}function TD(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function RD(e,t){let n=new Set;return new Set(t),e.reduce((s,r)=>{let a=JSON.stringify(TD(r));return n.has(a)||(n.add(a),s.push({key:a,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var DD=new Set([100,101,204,205]);function zD(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&hr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function ZN(){let e=g.useContext(Vi);return hx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function LD(){let e=g.useContext(zf);return hx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var gx=g.createContext(void 0);gx.displayName="FrameworkContext";function GN(){let e=g.useContext(gx);return hx(e,"You must render this element inside a <HydratedRouter> element"),e}function $D(e,t){let n=g.useContext(gx),[s,r]=g.useState(!1),[a,i]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,m=g.useRef(null);g.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let y=x=>{x.forEach(w=>{i(w.isIntersecting)})},b=new IntersectionObserver(y,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[e]),g.useEffect(()=>{if(s){let y=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(y)}}},[s]);let h=()=>{r(!0)},p=()=>{r(!1),i(!1)};return n?e!=="intent"?[a,m,{}]:[a,m,{onFocus:ul(l,h),onBlur:ul(c,p),onMouseEnter:ul(u,h),onMouseLeave:ul(d,p),onTouchStart:ul(f,h)}]:[!1,m,{}]}function ul(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function PD({page:e,...t}){let{router:n}=ZN(),s=g.useMemo(()=>LN(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?g.createElement(BD,{page:e,matches:s,...t}):null}function OD(e){let{manifest:t,routeModules:n}=GN(),[s,r]=g.useState([]);return g.useEffect(()=>{let a=!1;return _D(e,t,n).then(i=>{a||r(i)}),()=>{a=!0}},[e,t,n]),s}function BD({page:e,matches:t,...n}){let s=Sr(),{manifest:r,routeModules:a}=GN(),{basename:i}=ZN(),{loaderData:l,matches:c}=LD(),u=g.useMemo(()=>yv(e,t,c,r,s,"data"),[e,t,c,r,s]),d=g.useMemo(()=>yv(e,t,c,r,s,"assets"),[e,t,c,r,s]),f=g.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let p=new Set,y=!1;if(t.forEach(x=>{var v;let w=r.routes[x.route.id];!w||!w.hasLoader||(!u.some(N=>N.route.id===x.route.id)&&x.route.id in l&&((v=a[x.route.id])!=null&&v.shouldRevalidate)||w.hasClientLoader?y=!0:p.add(x.route.id))}),p.size===0)return[];let b=zD(e,i);return y&&p.size>0&&b.searchParams.set("_routes",t.filter(x=>p.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[i,l,s,r,u,t,e,a]),m=g.useMemo(()=>AD(d,r),[d,r]),h=OD(d);return g.createElement(g.Fragment,null,f.map(p=>g.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),m.map(p=>g.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:y})=>g.createElement("link",{key:p,...y})))}function ID(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var YN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YN&&(window.__reactRouterVersion="7.6.3")}catch{}function HD({basename:e,children:t,window:n}){let s=g.useRef();s.current==null&&(s.current=S3({window:n,v5Compat:!0}));let r=s.current,[a,i]=g.useState({action:r.action,location:r.location}),l=g.useCallback(c=>{g.startTransition(()=>i(c))},[i]);return g.useLayoutEffect(()=>r.listen(l),[r,l]),g.createElement(gD,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:r})}var XN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WN=g.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:r,reloadDocument:a,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...m},h){let{basename:p}=g.useContext(Ds),y=typeof u=="string"&&XN.test(u),b,x=!1;if(typeof u=="string"&&y&&(b=u,YN))try{let k=new URL(window.location.href),_=u.startsWith("//")?new URL(k.protocol+u):new URL(u),P=hr(_.pathname,p);_.origin===k.origin&&P!=null?u=P+_.search+_.hash:x=!0}catch{qn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=K3(u,{relative:r}),[v,N,j]=$D(s,m),S=qD(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:f});function C(k){t&&t(k),k.defaultPrevented||S(k)}let E=g.createElement("a",{...m,...j,href:b||w,onClick:x||a?t:C,ref:ID(h,N),target:c,"data-discover":!y&&n==="render"?"true":void 0});return v&&!y?g.createElement(g.Fragment,null,E,g.createElement(PD,{page:w})):E});WN.displayName="Link";var UD=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:r=!1,style:a,to:i,viewTransition:l,children:c,...u},d){let f=Pc(i,{relative:u.relative}),m=Sr(),h=g.useContext(zf),{navigator:p,basename:y}=g.useContext(Ds),b=h!=null&&KD(f)&&l===!0,x=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,w=m.pathname,v=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(w=w.toLowerCase(),v=v?v.toLowerCase():null,x=x.toLowerCase()),v&&y&&(v=hr(v,y)||v);const N=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=w===x||!r&&w.startsWith(x)&&w.charAt(N)==="/",S=v!=null&&(v===x||!r&&v.startsWith(x)&&v.charAt(x.length)==="/"),C={isActive:j,isPending:S,isTransitioning:b},E=j?t:void 0,k;typeof s=="function"?k=s(C):k=[s,j?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let _=typeof a=="function"?a(C):a;return g.createElement(WN,{...u,"aria-current":E,className:k,ref:d,style:_,to:i,viewTransition:l},typeof c=="function"?c(C):c)});UD.displayName="NavLink";var FD=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:a,method:i=nd,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...m},h)=>{let p=XD(),y=WD(l,{relative:u}),b=i.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&XN.test(l),w=v=>{if(c&&c(v),v.defaultPrevented)return;v.preventDefault();let N=v.nativeEvent.submitter,j=(N==null?void 0:N.getAttribute("formmethod"))||i;p(N||v.currentTarget,{fetcherKey:t,method:j,navigate:n,replace:r,state:a,relative:u,preventScrollReset:d,viewTransition:f})};return g.createElement("form",{ref:h,method:b,action:y,onSubmit:s?c:w,...m,"data-discover":!x&&e==="render"?"true":void 0})});FD.displayName="Form";function VD(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KN(e){let t=g.useContext(Vi);return rt(t,VD(e)),t}function qD(e,{target:t,replace:n,state:s,preventScrollReset:r,relative:a,viewTransition:i}={}){let l=dt(),c=Sr(),u=Pc(e,{relative:a});return g.useCallback(d=>{if(wD(d,t)){d.preventDefault();let f=n!==void 0?n:sc(c)===sc(u);l(e,{replace:f,state:s,preventScrollReset:r,relative:a,viewTransition:i})}},[c,l,u,n,s,t,e,r,a,i])}function ZD(e){qn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(pg(e)),n=g.useRef(!1),s=Sr(),r=g.useMemo(()=>ND(s.search,n.current?null:t.current),[s.search]),a=dt(),i=g.useCallback((l,c)=>{const u=pg(typeof l=="function"?l(r):l);n.current=!0,a("?"+u,c)},[a,r]);return[r,i]}var GD=0,YD=()=>`__${String(++GD)}__`;function XD(){let{router:e}=KN("useSubmit"),{basename:t}=g.useContext(Ds),n=uD();return g.useCallback(async(s,r={})=>{let{action:a,method:i,encType:l,formData:c,body:u}=CD(s,t);if(r.navigate===!1){let d=r.fetcherKey||YD();await e.fetch(d,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||i,formEncType:r.encType||l,flushSync:r.flushSync})}else await e.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||i,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}function WD(e,{relative:t}={}){let{basename:n}=g.useContext(Ds),s=g.useContext(zs);rt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),a={...Pc(e||".",{relative:t})},i=Sr();if(e==null){a.search=i.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();a.search=d?`?${d}`:""}}return(!e||e===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:cr([n,a.pathname])),sc(a)}function KD(e,t={}){let n=g.useContext(HN);rt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=KN("useViewTransitionState"),r=Pc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=hr(n.currentLocation.pathname,s)||n.currentLocation.pathname,i=hr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return kd(r.pathname,i)!=null||kd(r.pathname,a)!=null}[...DD];var QN={exports:{}},Qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QD=g;function JN(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Tr(){}var Yt={d:{f:Tr,r:function(){throw Error(JN(522))},D:Tr,C:Tr,L:Tr,m:Tr,X:Tr,S:Tr,M:Tr},p:0,findDOMNode:null},JD=Symbol.for("react.portal");function e5(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:JD,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}var Ol=QD.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function $f(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Yt;Qt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(JN(299));return e5(e,t,null,n)};Qt.flushSync=function(e){var t=Ol.T,n=Yt.p;try{if(Ol.T=null,Yt.p=2,e)return e()}finally{Ol.T=t,Yt.p=n,Yt.d.f()}};Qt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Yt.d.C(e,t))};Qt.prefetchDNS=function(e){typeof e=="string"&&Yt.d.D(e)};Qt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,s=$f(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Yt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:a}):n==="script"&&Yt.d.X(e,{crossOrigin:s,integrity:r,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Qt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=$f(t.as,t.crossOrigin);Yt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Yt.d.M(e)};Qt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,s=$f(n,t.crossOrigin);Yt.d.L(e,n,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Qt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=$f(t.as,t.crossOrigin);Yt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Yt.d.m(e)};Qt.requestFormReset=function(e){Yt.d.r(e)};Qt.unstable_batchedUpdates=function(e,t){return e(t)};Qt.useFormState=function(e,t,n){return Ol.H.useFormState(e,t,n)};Qt.useFormStatus=function(){return Ol.H.useHostTransitionStatus()};Qt.version="19.1.0";function ej(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ej)}catch(e){console.error(e)}}ej(),QN.exports=Qt;var Pf=QN.exports;const t5=sx(Pf);function n5(){return"/lorerim-arcaneum/"}function is(e){return`${n5()}${e}`}const vv=e=>{let t;const n=new Set,s=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const m=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(h=>h(t,m))}},r=()=>t,l={setState:s,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(s,r,l);return l},s5=e=>e?vv(e):vv,r5=e=>e;function a5(e,t=r5){const n=L.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return L.useDebugValue(n),n}const bv=e=>{const t=s5(e),n=s=>a5(t,s);return Object.assign(n,t),n},Ls=e=>e?bv(e):bv,lo=Ls((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(is("data/perk-trees.json"));if(!s.ok)throw new Error(`Failed to fetch perk trees data: ${s.status}`);const a=await s.json();e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load perk trees",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),o5=Object.freeze(Object.defineProperty({__proto__:null,usePerkTreesStore:lo},Symbol.toStringTag,{value:"Module"}));function i5(){return lo.getState().data}function tj(e,t,n){var i;if(t.length===0)return 0;const r=i5().find(l=>l.treeId===e);if(!r)return 0;let a=0;for(const l of t){const c=r.perks.find(f=>f.edid===l);if(!c)continue;const u=n[l]||1,d=c.ranks.find(f=>f.rank===u);if(d&&(i=d.prerequisites)!=null&&i.skillLevel){const f=d.prerequisites.skillLevel.level;a=Math.max(a,f)}}return a}function pu(e){const t={};for(const[n,s]of Object.entries(e.selected))if(s.length>0){const r=tj(n,s,e.ranks);r>0&&(t[n]=r)}return t}const wv={v:1,name:"",notes:"",race:null,stone:null,religion:null,traits:{regular:[],bonus:[]},traitLimits:{regular:2,bonus:1},skills:{major:[],minor:[]},perks:{selected:{},ranks:{}},skillLevels:{},equipment:[],userProgress:{unlocks:[]},destinyPath:[],attributeAssignments:{health:0,stamina:0,magicka:0,level:1,assignments:{}}},Hr=Ls((e,t)=>({build:wv,updateBuild:n=>e(s=>({build:{...s.build,...n}})),setBuild:n=>e({build:n}),resetBuild:()=>e({build:wv}),setAttributeAssignment:(n,s)=>{e(r=>{const a={...r.build.attributeAssignments.assignments},i={...r.build.attributeAssignments},l=a[n];return l&&(i[l]=Math.max(0,i[l]-5)),a[n]=s,i[s]+=5,{build:{...r.build,attributeAssignments:{...r.build.attributeAssignments,...i,assignments:a}}}})},clearAttributeAssignment:n=>{e(s=>{const r={...s.build.attributeAssignments.assignments},a={...s.build.attributeAssignments},i=r[n];return i&&(a[i]=Math.max(0,a[i]-5),delete r[n]),{build:{...s.build,attributeAssignments:{...s.build.attributeAssignments,...a,assignments:r}}}})},clearAllAttributeAssignments:()=>{e(n=>({build:{...n.build,attributeAssignments:{health:0,stamina:0,magicka:0,level:n.build.attributeAssignments.level,assignments:{}}}}))},updateAttributeLevel:n=>{e(s=>({build:{...s.build,attributeAssignments:{...s.build.attributeAssignments,level:Math.max(1,n)}}}))}}));function wt(){const e=Hr(F=>F.build.skills.major),t=Hr(F=>F.build.skills.minor),n=Hr(F=>F.build),s=Hr(F=>F.updateBuild),r=Hr(F=>F.resetBuild),a=F=>(e==null?void 0:e.includes(F))??!1,i=F=>(t==null?void 0:t.includes(F))??!1;return{build:n,majorSkills:e,minorSkills:t,hasMajorSkill:a,hasMinorSkill:i,addMajorSkill:F=>{console.log("addMajorSkill called:",{skillId:F});const Y=e??[],Q=t??[];if(!a(F)&&Y.length<3){const W=Q.filter(ye=>ye!==F),se={major:[...Y,F],minor:W};console.log("addMajorSkill - updating build with new skills:",se),s({skills:se})}else console.log("addMajorSkill - skill already major or limit reached, skipping")},removeMajorSkill:F=>{const Y=e??[],Q=t??[],W=Y.filter(se=>se!==F);s({skills:{major:W,minor:Q}})},addMinorSkill:F=>{const Y=e??[],Q=t??[];if(!i(F)&&Q.length<6){const W=Y.filter(se=>se!==F);s({skills:{major:W,minor:[...Q,F]}})}},removeMinorSkill:F=>{const Y=e??[],W=(t??[]).filter(se=>se!==F);s({skills:{major:Y,minor:W}})},addPerk:(F,Y)=>{var se;console.log("addPerk called:",{skillId:F,perkId:Y});const Q=((se=n==null?void 0:n.perks)==null?void 0:se.selected)??{},W=Q[F]??[];if(W.includes(Y))console.log("addPerk - perk already selected, skipping");else{const ye={...n==null?void 0:n.perks,selected:{...Q,[F]:[...W,Y]}},ue=pu(ye);console.log("addPerk - updating build with new perks:",ye),console.log("addPerk - calculated skill levels:",ue),s({perks:ye,skillLevels:ue})}},removePerk:(F,Y)=>{var ne;const Q=((ne=n==null?void 0:n.perks)==null?void 0:ne.selected)??{},se=(Q[F]??[]).filter(Re=>Re!==Y),ye={...n==null?void 0:n.perks,selected:{...Q,[F]:se}},ue=pu(ye);s({perks:ye,skillLevels:ue})},setPerkRank:(F,Y)=>{var ye;console.log("setPerkRank called:",{perkId:F,rank:Y});const Q=((ye=n==null?void 0:n.perks)==null?void 0:ye.ranks)??{},W={...n==null?void 0:n.perks,ranks:{...Q,[F]:Y}},se=pu(W);console.log("setPerkRank - updating build with new ranks:",W),console.log("setPerkRank - calculated skill levels:",se),s({perks:W,skillLevels:se})},clearSkillPerks:F=>{var Re,pt;const Y=((Re=n==null?void 0:n.perks)==null?void 0:Re.selected)??{},Q=((pt=n==null?void 0:n.perks)==null?void 0:pt.ranks)??{},{[F]:W,...se}=Y,ye={...Q};W&&W.forEach(fs=>{delete ye[fs]});const ue={...n==null?void 0:n.perks,selected:se,ranks:ye},ne=pu(ue);s({perks:ue,skillLevels:ne})},getSkillPerks:F=>{var Y,Q;return((Q=(Y=n==null?void 0:n.perks)==null?void 0:Y.selected)==null?void 0:Q[F])??[]},getPerkRank:F=>{var Y,Q;return((Q=(Y=n==null?void 0:n.perks)==null?void 0:Y.ranks)==null?void 0:Q[F])??0},getSkillLevel:F=>{var Y;return((Y=n==null?void 0:n.skillLevels)==null?void 0:Y[F])??0},addTrait:F=>{const{regular:Y=[],bonus:Q=[]}=(n==null?void 0:n.traits)??{regular:[],bonus:[]},{regular:W=2,bonus:se=1}=(n==null?void 0:n.traitLimits)??{regular:2,bonus:1};Y.length<W?s({traits:{...n==null?void 0:n.traits,regular:[...Y,F]}}):Q.length<se&&s({traits:{...n==null?void 0:n.traits,bonus:[...Q,F]}})},addRegularTrait:F=>{const{regular:Y=[]}=(n==null?void 0:n.traits)??{regular:[]},{regular:Q=2}=(n==null?void 0:n.traitLimits)??{regular:2};Y.length<Q&&s({traits:{...n==null?void 0:n.traits,regular:[...Y,F]}})},addBonusTrait:F=>{const{bonus:Y=[]}=(n==null?void 0:n.traits)??{bonus:[]},{bonus:Q=1}=(n==null?void 0:n.traitLimits)??{bonus:1};Y.length<Q&&s({traits:{...n==null?void 0:n.traits,bonus:[...Y,F]}})},removeTrait:F=>{const{regular:Y=[],bonus:Q=[]}=(n==null?void 0:n.traits)??{regular:[],bonus:[]};s({traits:{regular:Y.filter(W=>W!==F),bonus:Q.filter(W=>W!==F)}})},hasTrait:F=>{var Y,Q,W,se;return(((Q=(Y=n==null?void 0:n.traits)==null?void 0:Y.regular)==null?void 0:Q.includes(F))??!1)||(((se=(W=n==null?void 0:n.traits)==null?void 0:W.bonus)==null?void 0:se.includes(F))??!1)},hasRegularTrait:F=>{var Y,Q;return((Q=(Y=n==null?void 0:n.traits)==null?void 0:Y.regular)==null?void 0:Q.includes(F))??!1},hasBonusTrait:F=>{var Y,Q;return((Q=(Y=n==null?void 0:n.traits)==null?void 0:Y.bonus)==null?void 0:Q.includes(F))??!1},setRace:F=>{s({race:F})},setBirthsign:F=>{s({stone:F})},setStone:F=>{s({stone:F})},setReligion:F=>{s({religion:F})},addEquipment:F=>{const Y=(n==null?void 0:n.equipment)??[];Y.includes(F)||s({equipment:[...Y,F]})},removeEquipment:F=>{const Y=(n==null?void 0:n.equipment)??[];s({equipment:Y.filter(Q=>Q!==F)})},setBuildName:F=>{s({name:F})},setBuildNotes:F=>{s({notes:F})},getDestinyPath:()=>(n==null?void 0:n.destinyPath)??[],setDestinyPath:F=>{s({destinyPath:F})},updateBuild:s,clearBuild:()=>{s({name:"",notes:"",race:null,stone:null,religion:null,skills:{major:[],minor:[]},traits:{regular:[],bonus:[]},perks:{selected:{},ranks:{}},skillLevels:{},destinyPath:[]})},resetBuild:r,getSummary:()=>{var F,Y,Q,W,se,ye,ue,ne,Re;return{name:(n==null?void 0:n.name)||"Unnamed Character",race:(n==null?void 0:n.race)||"Not selected",stone:(n==null?void 0:n.stone)||"Not selected",religion:(n==null?void 0:n.religion)||"Not selected",traitCount:(((Y=(F=n==null?void 0:n.traits)==null?void 0:F.regular)==null?void 0:Y.length)??0)+(((W=(Q=n==null?void 0:n.traits)==null?void 0:Q.bonus)==null?void 0:W.length)??0),majorSkillCount:((ye=(se=n==null?void 0:n.skills)==null?void 0:se.major)==null?void 0:ye.length)??0,minorSkillCount:((ne=(ue=n==null?void 0:n.skills)==null?void 0:ue.minor)==null?void 0:ne.length)??0,equipmentCount:((Re=n==null?void 0:n.equipment)==null?void 0:Re.length)??0}},getRegularTraitLimit:()=>{var F;return((F=n==null?void 0:n.traitLimits)==null?void 0:F.regular)??2},getBonusTraitLimit:()=>{var F;return((F=n==null?void 0:n.traitLimits)==null?void 0:F.bonus)??1},getRegularTraitCount:()=>{var F,Y;return((Y=(F=n==null?void 0:n.traits)==null?void 0:F.regular)==null?void 0:Y.length)??0},getBonusTraitCount:()=>{var F,Y;return((Y=(F=n==null?void 0:n.traits)==null?void 0:F.bonus)==null?void 0:Y.length)??0},canAddRegularTrait:()=>{var F,Y,Q;return(((Y=(F=n==null?void 0:n.traits)==null?void 0:F.regular)==null?void 0:Y.length)??0)<(((Q=n==null?void 0:n.traitLimits)==null?void 0:Q.regular)??2)},canAddBonusTrait:()=>{var F,Y,Q;return(((Y=(F=n==null?void 0:n.traits)==null?void 0:F.bonus)==null?void 0:Y.length)??0)<(((Q=n==null?void 0:n.traitLimits)==null?void 0:Q.bonus)??1)},getTraitType:F=>{var Y,Q,W,se;return(Q=(Y=n==null?void 0:n.traits)==null?void 0:Y.regular)!=null&&Q.includes(F)?"regular":(se=(W=n==null?void 0:n.traits)==null?void 0:W.bonus)!=null&&se.includes(F)?"bonus":null},isAllTraitsFull:()=>{var se,ye,ue,ne,Re,pt;const F=((ye=(se=n==null?void 0:n.traits)==null?void 0:se.regular)==null?void 0:ye.length)??0,Y=((ne=(ue=n==null?void 0:n.traits)==null?void 0:ue.bonus)==null?void 0:ne.length)??0,Q=((Re=n==null?void 0:n.traitLimits)==null?void 0:Re.regular)??2,W=((pt=n==null?void 0:n.traitLimits)==null?void 0:pt.bonus)??1;return F>=Q&&Y>=W},addTraitToSlot:(F,Y)=>{if(Y==="regular"){const{regular:Q=[]}=(n==null?void 0:n.traits)??{regular:[]},{regular:W=2}=(n==null?void 0:n.traitLimits)??{regular:2};if(Q.length<W){const{bonus:se=[]}=(n==null?void 0:n.traits)??{bonus:[]},ye=se.filter(ue=>ue!==F);s({traits:{regular:[...Q,F],bonus:ye}})}}else{const{bonus:Q=[]}=(n==null?void 0:n.traits)??{bonus:[]},{bonus:W=1}=(n==null?void 0:n.traitLimits)??{bonus:1};if(Q.length<W){const{regular:se=[]}=(n==null?void 0:n.traits)??{regular:[]},ye=se.filter(ue=>ue!==F);s({traits:{regular:ye,bonus:[...Q,F]}})}}},isSlotAvailable:(F,Y=0)=>{var Q,W,se,ye;return F==="regular"?(((W=(Q=n==null?void 0:n.traits)==null?void 0:Q.regular)==null?void 0:W.length)??0)<=Y:(((ye=(se=n==null?void 0:n.traits)==null?void 0:se.bonus)==null?void 0:ye.length)??0)<=Y}}}function nj(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=nj(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function sj(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=nj(e))&&(s&&(s+=" "),s+=t);return s}const Nv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,jv=sj,qi=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return jv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:a}=t,i=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],f=a==null?void 0:a[u];if(d===null)return null;const m=Nv(d)||Nv(f);return r[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:f,className:m,...h}=d;return Object.entries(h).every(p=>{let[y,b]=p;return Array.isArray(b)?b.includes({...a,...l}[y]):{...a,...l}[y]===b})?[...u,f,m]:u},[]);return jv(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)},px="-",l5=e=>{const t=u5(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(px);return l[0]===""&&l.length!==1&&l.shift(),rj(l,t)||c5(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},rj=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?rj(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const a=e.join(px);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},Sv=/^\[(.+)\]$/,c5=e=>{if(Sv.test(e)){const t=Sv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},u5=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)xg(n[r],s,r,t);return s},xg=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const a=r===""?t:Cv(t,r);a.classGroupId=n;return}if(typeof r=="function"){if(d5(r)){xg(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([a,i])=>{xg(i,Cv(t,a),n,s)})})},Cv=(e,t)=>{let n=e;return t.split(px).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},d5=e=>e.isThemeGetter,f5=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(a,i)=>{n.set(a,i),t++,t>e&&(t=0,s=n,n=new Map)};return{get(a){let i=n.get(a);if(i!==void 0)return i;if((i=s.get(a))!==void 0)return r(a,i),i},set(a,i){n.has(a)?n.set(a,i):r(a,i)}}},yg="!",vg=":",m5=vg.length,h5=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=r=>{const a=[];let i=0,l=0,c=0,u;for(let p=0;p<r.length;p++){let y=r[p];if(i===0&&l===0){if(y===vg){a.push(r.slice(c,p)),c=p+m5;continue}if(y==="/"){u=p;continue}}y==="["?i++:y==="]"?i--:y==="("?l++:y===")"&&l--}const d=a.length===0?r:r.substring(c),f=g5(d),m=f!==d,h=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:h}};if(t){const r=t+vg,a=s;s=i=>i.startsWith(r)?a(i.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=a=>n({className:a,parseClassName:r})}return s},g5=e=>e.endsWith(yg)?e.substring(0,e.length-1):e.startsWith(yg)?e.substring(1):e,p5=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let a=[];return s.forEach(i=>{i[0]==="["||t[i]?(r.push(...a.sort(),i),a=[]):a.push(i)}),r.push(...a.sort()),r}},x5=e=>({cache:f5(e.cacheSize),parseClassName:h5(e),sortModifiers:p5(e),...l5(e)}),y5=/\s+/,v5=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:a}=t,i=[],l=e.trim().split(y5);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:f,modifiers:m,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:y}=n(d);if(f){c=d+(c.length>0?" "+c:c);continue}let b=!!y,x=s(b?p.substring(0,y):p);if(!x){if(!b){c=d+(c.length>0?" "+c:c);continue}if(x=s(p),!x){c=d+(c.length>0?" "+c:c);continue}b=!1}const w=a(m).join(":"),v=h?w+yg:w,N=v+x;if(i.includes(N))continue;i.push(N);const j=r(x,b);for(let S=0;S<j.length;++S){const C=j[S];i.push(v+C)}c=d+(c.length>0?" "+c:c)}return c};function b5(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=aj(t))&&(s&&(s+=" "),s+=n);return s}const aj=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=aj(e[s]))&&(n&&(n+=" "),n+=t);return n};function w5(e,...t){let n,s,r,a=i;function i(c){const u=t.reduce((d,f)=>f(d),e());return n=x5(u),s=n.cache.get,r=n.cache.set,a=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=v5(c,n);return r(c,d),d}return function(){return a(b5.apply(null,arguments))}}const jt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},oj=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ij=/^\((?:(\w[\w-]*):)?(.+)\)$/i,N5=/^\d+\/\d+$/,j5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,S5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,C5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,k5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,E5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Co=e=>N5.test(e),je=e=>!!e&&!Number.isNaN(Number(e)),Rr=e=>!!e&&Number.isInteger(Number(e)),Fm=e=>e.endsWith("%")&&je(e.slice(0,-1)),Gs=e=>j5.test(e),_5=()=>!0,A5=e=>S5.test(e)&&!C5.test(e),lj=()=>!1,M5=e=>k5.test(e),T5=e=>E5.test(e),R5=e=>!re(e)&&!ae(e),D5=e=>Zi(e,dj,lj),re=e=>oj.test(e),ja=e=>Zi(e,fj,A5),Vm=e=>Zi(e,O5,je),kv=e=>Zi(e,cj,lj),z5=e=>Zi(e,uj,T5),xu=e=>Zi(e,mj,M5),ae=e=>ij.test(e),dl=e=>Gi(e,fj),L5=e=>Gi(e,B5),Ev=e=>Gi(e,cj),$5=e=>Gi(e,dj),P5=e=>Gi(e,uj),yu=e=>Gi(e,mj,!0),Zi=(e,t,n)=>{const s=oj.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},Gi=(e,t,n=!1)=>{const s=ij.exec(e);return s?s[1]?t(s[1]):n:!1},cj=e=>e==="position"||e==="percentage",uj=e=>e==="image"||e==="url",dj=e=>e==="length"||e==="size"||e==="bg-size",fj=e=>e==="length",O5=e=>e==="number",B5=e=>e==="family-name",mj=e=>e==="shadow",I5=()=>{const e=jt("color"),t=jt("font"),n=jt("text"),s=jt("font-weight"),r=jt("tracking"),a=jt("leading"),i=jt("breakpoint"),l=jt("container"),c=jt("spacing"),u=jt("radius"),d=jt("shadow"),f=jt("inset-shadow"),m=jt("text-shadow"),h=jt("drop-shadow"),p=jt("blur"),y=jt("perspective"),b=jt("aspect"),x=jt("ease"),w=jt("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...N(),ae,re],S=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],E=()=>[ae,re,c],k=()=>[Co,"full","auto",...E()],_=()=>[Rr,"none","subgrid",ae,re],P=()=>["auto",{span:["full",Rr,ae,re]},Rr,ae,re],O=()=>[Rr,"auto",ae,re],$=()=>["auto","min","max","fr",ae,re],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],D=()=>["start","end","center","stretch","center-safe","end-safe"],A=()=>["auto",...E()],z=()=>[Co,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],T=()=>[e,ae,re],R=()=>[...N(),Ev,kv,{position:[ae,re]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],U=()=>["auto","cover","contain",$5,D5,{size:[ae,re]}],I=()=>[Fm,dl,ja],q=()=>["","none","full",u,ae,re],G=()=>["",je,dl,ja],J=()=>["solid","dashed","dotted","double"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[je,Fm,Ev,kv],pe=()=>["","none",p,ae,re],fe=()=>["none",je,ae,re],ve=()=>["none",je,ae,re],F=()=>[je,ae,re],Y=()=>[Co,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Gs],breakpoint:[Gs],color:[_5],container:[Gs],"drop-shadow":[Gs],ease:["in","out","in-out"],font:[R5],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Gs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Gs],shadow:[Gs],spacing:["px",je],text:[Gs],"text-shadow":[Gs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Co,re,ae,b]}],container:["container"],columns:[{columns:[je,re,ae,l]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[Rr,"auto",ae,re]}],basis:[{basis:[Co,"full","auto",l,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[je,Co,"auto","initial","none",re]}],grow:[{grow:["",je,ae,re]}],shrink:[{shrink:["",je,ae,re]}],order:[{order:[Rr,"first","last","none",ae,re]}],"grid-cols":[{"grid-cols":_()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":_()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...D(),"normal"]}],"justify-self":[{"justify-self":["auto",...D()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...D(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...D(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...D(),"baseline"]}],"place-self":[{"place-self":["auto",...D()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:A()}],mx:[{mx:A()}],my:[{my:A()}],ms:[{ms:A()}],me:[{me:A()}],mt:[{mt:A()}],mr:[{mr:A()}],mb:[{mb:A()}],ml:[{ml:A()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[l,"screen",...z()]}],"min-w":[{"min-w":[l,"screen","none",...z()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",n,dl,ja]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ae,Vm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fm,re]}],"font-family":[{font:[L5,re,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ae,re]}],"line-clamp":[{"line-clamp":[je,"none",ae,Vm]}],leading:[{leading:[a,...E()]}],"list-image":[{"list-image":["none",ae,re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ae,re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[je,"from-font","auto",ae,ja]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[je,"auto",ae,re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae,re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae,re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:U()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Rr,ae,re],radial:["",ae,re],conic:[Rr,ae,re]},P5,z5]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:G()}],"border-w-x":[{"border-x":G()}],"border-w-y":[{"border-y":G()}],"border-w-s":[{"border-s":G()}],"border-w-e":[{"border-e":G()}],"border-w-t":[{"border-t":G()}],"border-w-r":[{"border-r":G()}],"border-w-b":[{"border-b":G()}],"border-w-l":[{"border-l":G()}],"divide-x":[{"divide-x":G()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":G()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[je,ae,re]}],"outline-w":[{outline:["",je,dl,ja]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",d,yu,xu]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",f,yu,xu]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[je,ja]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":G()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",m,yu,xu]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[je,ae,re]}],"mix-blend":[{"mix-blend":[...ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[je]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[ae,re]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[je]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:U()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ae,re]}],filter:[{filter:["","none",ae,re]}],blur:[{blur:pe()}],brightness:[{brightness:[je,ae,re]}],contrast:[{contrast:[je,ae,re]}],"drop-shadow":[{"drop-shadow":["","none",h,yu,xu]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",je,ae,re]}],"hue-rotate":[{"hue-rotate":[je,ae,re]}],invert:[{invert:["",je,ae,re]}],saturate:[{saturate:[je,ae,re]}],sepia:[{sepia:["",je,ae,re]}],"backdrop-filter":[{"backdrop-filter":["","none",ae,re]}],"backdrop-blur":[{"backdrop-blur":pe()}],"backdrop-brightness":[{"backdrop-brightness":[je,ae,re]}],"backdrop-contrast":[{"backdrop-contrast":[je,ae,re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",je,ae,re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[je,ae,re]}],"backdrop-invert":[{"backdrop-invert":["",je,ae,re]}],"backdrop-opacity":[{"backdrop-opacity":[je,ae,re]}],"backdrop-saturate":[{"backdrop-saturate":[je,ae,re]}],"backdrop-sepia":[{"backdrop-sepia":["",je,ae,re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ae,re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[je,"initial",ae,re]}],ease:[{ease:["linear","initial",x,ae,re]}],delay:[{delay:[je,ae,re]}],animate:[{animate:["none",w,ae,re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,ae,re]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[ae,re,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Y()}],"translate-x":[{"translate-x":Y()}],"translate-y":[{"translate-y":Y()}],"translate-z":[{"translate-z":Y()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae,re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae,re]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[je,dl,ja,Vm]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},H5=w5(I5);function H(...e){return H5(sj(e))}const U5=qi("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function X({className:e,variant:t,...n}){return o.jsx("div",{className:H(U5({variant:t}),e),...n})}function _v(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Of(...e){return t=>{let n=!1;const s=e.map(r=>{const a=_v(r,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<s.length;r++){const a=s[r];typeof a=="function"?a():_v(e[r],null)}}}}function $e(...e){return g.useCallback(Of(...e),e)}function vi(e){const t=V5(e),n=g.forwardRef((s,r)=>{const{children:a,...i}=s,l=g.Children.toArray(a),c=l.find(Z5);if(c){const u=c.props.children,d=l.map(f=>f===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:f);return o.jsx(t,{...i,ref:r,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return o.jsx(t,{...i,ref:r,children:a})});return n.displayName=`${e}.Slot`,n}var F5=vi("Slot");function V5(e){const t=g.forwardRef((n,s)=>{const{children:r,...a}=n;if(g.isValidElement(r)){const i=Y5(r),l=G5(a,r.props);return r.type!==g.Fragment&&(l.ref=s?Of(s,i):i),g.cloneElement(r,l)}return g.Children.count(r)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var hj=Symbol("radix.slottable");function q5(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=hj,t}function Z5(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hj}function G5(e,t){const n={...t};for(const s in t){const r=e[s],a=t[s];/^on[A-Z]/.test(s)?r&&a?n[s]=(...l)=>{const c=a(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...a}:s==="className"&&(n[s]=[r,a].filter(Boolean).join(" "))}return{...e,...n}}function Y5(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const X5=qi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-base font-semibold transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-5 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-3 has-[>svg]:px-4",sm:"h-9 rounded-md gap-1.5 px-4 has-[>svg]:px-3.5 text-sm",lg:"h-12 rounded-md px-8 has-[>svg]:px-6 text-lg",icon:"size-11"}},defaultVariants:{variant:"default",size:"default"}});function K({className:e,variant:t,size:n,asChild:s=!1,...r}){const a=s?F5:"button";return o.jsx(a,{"data-slot":"button",className:H(X5({variant:t,size:n,className:e})),...r})}function te(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function W5(e,t){const n=g.createContext(t),s=a=>{const{children:i,...l}=a,c=g.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:i})};s.displayName=e+"Provider";function r(a){const i=g.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[s,r]}function un(e,t=[]){let n=[];function s(a,i){const l=g.createContext(i),c=n.length;n=[...n,i];const u=f=>{var x;const{scope:m,children:h,...p}=f,y=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,b=g.useMemo(()=>p,Object.values(p));return o.jsx(y.Provider,{value:b,children:h})};u.displayName=a+"Provider";function d(f,m){var y;const h=((y=m==null?void 0:m[e])==null?void 0:y[c])||l,p=g.useContext(h);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,d]}const r=()=>{const a=n.map(i=>g.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return r.scopeName=e,[s,K5(r,...t)]}function K5(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const i=s.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var Ts=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},Q5=_N[" useId ".trim().toString()]||(()=>{}),J5=0;function ur(e){const[t,n]=g.useState(Q5());return Ts(()=>{n(s=>s??String(J5++))},[e]),t?`radix-${t}`:""}var ez=_N[" useInsertionEffect ".trim().toString()]||Ts;function Yn({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[r,a,i]=tz({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:r;{const d=g.useRef(e!==void 0);g.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const u=g.useCallback(d=>{var f;if(l){const m=nz(d)?d(e):d;m!==e&&((f=i.current)==null||f.call(i,m))}else a(d)},[l,e,a,i]);return[c,u]}function tz({defaultProp:e,onChange:t}){const[n,s]=g.useState(e),r=g.useRef(n),a=g.useRef(t);return ez(()=>{a.current=t},[t]),g.useEffect(()=>{var i;r.current!==n&&((i=a.current)==null||i.call(a,n),r.current=n)},[n,r]),[n,s,a]}function nz(e){return typeof e=="function"}var sz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=sz.reduce((e,t)=>{const n=vi(`Primitive.${t}`),s=g.forwardRef((r,a)=>{const{asChild:i,...l}=r,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function gj(e,t){e&&Pf.flushSync(()=>e.dispatchEvent(t))}function Ht(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function rz(e,t=globalThis==null?void 0:globalThis.document){const n=Ht(e);g.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var az="DismissableLayer",bg="dismissableLayer.update",oz="dismissableLayer.pointerDownOutside",iz="dismissableLayer.focusOutside",Av,pj=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Oc=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,u=g.useContext(pj),[d,f]=g.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=g.useState({}),p=$e(t,C=>f(C)),y=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(b),w=d?y.indexOf(d):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,N=w>=x,j=uz(C=>{const E=C.target,k=[...u.branches].some(_=>_.contains(E));!N||k||(r==null||r(C),i==null||i(C),C.defaultPrevented||l==null||l())},m),S=dz(C=>{const E=C.target;[...u.branches].some(_=>_.contains(E))||(a==null||a(C),i==null||i(C),C.defaultPrevented||l==null||l())},m);return rz(C=>{w===u.layers.size-1&&(s==null||s(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),g.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Av=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Mv(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Av)}},[d,m,n,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Mv())},[d,u]),g.useEffect(()=>{const C=()=>h({});return document.addEventListener(bg,C),()=>document.removeEventListener(bg,C)},[]),o.jsx(xe.div,{...c,ref:p,style:{pointerEvents:v?N?"auto":"none":void 0,...e.style},onFocusCapture:te(e.onFocusCapture,S.onFocusCapture),onBlurCapture:te(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:te(e.onPointerDownCapture,j.onPointerDownCapture)})});Oc.displayName=az;var lz="DismissableLayerBranch",cz=g.forwardRef((e,t)=>{const n=g.useContext(pj),s=g.useRef(null),r=$e(t,s);return g.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(xe.div,{...e,ref:r})});cz.displayName=lz;function uz(e,t=globalThis==null?void 0:globalThis.document){const n=Ht(e),s=g.useRef(!1),r=g.useRef(()=>{});return g.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){xj(oz,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=c,t.addEventListener("click",r.current,{once:!0})):c()}else t.removeEventListener("click",r.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function dz(e,t=globalThis==null?void 0:globalThis.document){const n=Ht(e),s=g.useRef(!1);return g.useEffect(()=>{const r=a=>{a.target&&!s.current&&xj(iz,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Mv(){const e=new CustomEvent(bg);document.dispatchEvent(e)}function xj(e,t,n,{discrete:s}){const r=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?gj(r,a):r.dispatchEvent(a)}var qm="focusScope.autoFocusOnMount",Zm="focusScope.autoFocusOnUnmount",Tv={bubbles:!1,cancelable:!0},fz="FocusScope",xx=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...i}=e,[l,c]=g.useState(null),u=Ht(r),d=Ht(a),f=g.useRef(null),m=$e(t,y=>c(y)),h=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(s){let y=function(v){if(h.paused||!l)return;const N=v.target;l.contains(N)?f.current=N:Lr(f.current,{select:!0})},b=function(v){if(h.paused||!l)return;const N=v.relatedTarget;N!==null&&(l.contains(N)||Lr(f.current,{select:!0}))},x=function(v){if(document.activeElement===document.body)for(const j of v)j.removedNodes.length>0&&Lr(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const w=new MutationObserver(x);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),w.disconnect()}}},[s,l,h.paused]),g.useEffect(()=>{if(l){Dv.add(h);const y=document.activeElement;if(!l.contains(y)){const x=new CustomEvent(qm,Tv);l.addEventListener(qm,u),l.dispatchEvent(x),x.defaultPrevented||(mz(yz(yj(l)),{select:!0}),document.activeElement===y&&Lr(l))}return()=>{l.removeEventListener(qm,u),setTimeout(()=>{const x=new CustomEvent(Zm,Tv);l.addEventListener(Zm,d),l.dispatchEvent(x),x.defaultPrevented||Lr(y??document.body,{select:!0}),l.removeEventListener(Zm,d),Dv.remove(h)},0)}}},[l,u,d,h]);const p=g.useCallback(y=>{if(!n&&!s||h.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(b&&x){const w=y.currentTarget,[v,N]=hz(w);v&&N?!y.shiftKey&&x===N?(y.preventDefault(),n&&Lr(v,{select:!0})):y.shiftKey&&x===v&&(y.preventDefault(),n&&Lr(N,{select:!0})):x===w&&y.preventDefault()}},[n,s,h.paused]);return o.jsx(xe.div,{tabIndex:-1,...i,ref:m,onKeyDown:p})});xx.displayName=fz;function mz(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Lr(s,{select:t}),document.activeElement!==n)return}function hz(e){const t=yj(e),n=Rv(t,e),s=Rv(t.reverse(),e);return[n,s]}function yj(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Rv(e,t){for(const n of e)if(!gz(n,{upTo:t}))return n}function gz(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function pz(e){return e instanceof HTMLInputElement&&"select"in e}function Lr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&pz(e)&&t&&e.select()}}var Dv=xz();function xz(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=zv(e,t),e.unshift(t)},remove(t){var n;e=zv(e,t),(n=e[0])==null||n.resume()}}}function zv(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function yz(e){return e.filter(t=>t.tagName!=="A")}var vz="Portal",yx=g.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[r,a]=g.useState(!1);Ts(()=>a(!0),[]);const i=n||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?t5.createPortal(o.jsx(xe.div,{...s,ref:t}),i):null});yx.displayName=vz;function bz(e,t){return g.useReducer((n,s)=>t[n][s]??n,e)}var Zt=e=>{const{present:t,children:n}=e,s=wz(t),r=typeof n=="function"?n({present:s.isPresent}):g.Children.only(n),a=$e(s.ref,Nz(r));return typeof n=="function"||s.isPresent?g.cloneElement(r,{ref:a}):null};Zt.displayName="Presence";function wz(e){const[t,n]=g.useState(),s=g.useRef(null),r=g.useRef(e),a=g.useRef("none"),i=e?"mounted":"unmounted",[l,c]=bz(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=vu(s.current);a.current=l==="mounted"?u:"none"},[l]),Ts(()=>{const u=s.current,d=r.current;if(d!==e){const m=a.current,h=vu(u);e?c("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,c]),Ts(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=h=>{const y=vu(s.current).includes(h.animationName);if(h.target===t&&y&&(c("ANIMATION_END"),!r.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=h=>{h.target===t&&(a.current=vu(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function vu(e){return(e==null?void 0:e.animationName)||"none"}function Nz(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Gm=0;function vj(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Lv()),document.body.insertAdjacentElement("beforeend",e[1]??Lv()),Gm++,()=>{Gm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Gm--}},[])}function Lv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var bs=function(){return bs=Object.assign||function(t){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},bs.apply(this,arguments)};function bj(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}function jz(e,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,a;s<r;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var rd="right-scroll-bar-position",ad="width-before-scroll-bar",Sz="with-scroll-bars-hidden",Cz="--removed-body-scroll-bar-size";function Ym(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function kz(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=t,n.facade}var Ez=typeof window<"u"?g.useLayoutEffect:g.useEffect,$v=new WeakMap;function _z(e,t){var n=kz(null,function(s){return e.forEach(function(r){return Ym(r,s)})});return Ez(function(){var s=$v.get(n);if(s){var r=new Set(s),a=new Set(e),i=n.current;r.forEach(function(l){a.has(l)||Ym(l,null)}),a.forEach(function(l){r.has(l)||Ym(l,i)})}$v.set(n,e)},[e]),n}function Az(e){return e}function Mz(e,t){t===void 0&&(t=Az);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,s);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(s=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){s=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(a),i=n}var c=function(){var d=i;i=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return r}function Tz(e){e===void 0&&(e={});var t=Mz(null);return t.options=bs({async:!0,ssr:!1},e),t}var wj=function(e){var t=e.sideCar,n=bj(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return g.createElement(s,bs({},n))};wj.isSideCarExport=!0;function Rz(e,t){return e.useMedium(t),wj}var Nj=Tz(),Xm=function(){},Bf=g.forwardRef(function(e,t){var n=g.useRef(null),s=g.useState({onScrollCapture:Xm,onWheelCapture:Xm,onTouchMoveCapture:Xm}),r=s[0],a=s[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,m=e.sideCar,h=e.noRelative,p=e.noIsolation,y=e.inert,b=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,v=e.gapMode,N=bj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,S=_z([n,t]),C=bs(bs({},N),r);return g.createElement(g.Fragment,null,d&&g.createElement(j,{sideCar:Nj,removeScrollBar:u,shards:f,noRelative:h,noIsolation:p,inert:y,setCallbacks:a,allowPinchZoom:!!b,lockRef:n,gapMode:v}),i?g.cloneElement(g.Children.only(l),bs(bs({},C),{ref:S})):g.createElement(w,bs({},C,{className:c,ref:S}),l))});Bf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bf.classNames={fullWidth:ad,zeroRight:rd};var Dz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zz(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Dz();return t&&e.setAttribute("nonce",t),e}function Lz(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function $z(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Pz=function(){var e=0,t=null;return{add:function(n){e==0&&(t=zz())&&(Lz(t,n),$z(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Oz=function(){var e=Pz();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},jj=function(){var e=Oz(),t=function(n){var s=n.styles,r=n.dynamic;return e(s,r),null};return t},Bz={left:0,top:0,right:0,gap:0},Wm=function(e){return parseInt(e||"",10)||0},Iz=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[Wm(n),Wm(s),Wm(r)]},Hz=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Bz;var t=Iz(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},Uz=jj(),ei="data-scroll-locked",Fz=function(e,t,n,s){var r=e.left,a=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Sz,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(ei,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rd,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(ad,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(rd," .").concat(rd,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(ad," .").concat(ad,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(ei,`] {
    `).concat(Cz,": ").concat(l,`px;
  }
`)},Pv=function(){var e=parseInt(document.body.getAttribute(ei)||"0",10);return isFinite(e)?e:0},Vz=function(){g.useEffect(function(){return document.body.setAttribute(ei,(Pv()+1).toString()),function(){var e=Pv()-1;e<=0?document.body.removeAttribute(ei):document.body.setAttribute(ei,e.toString())}},[])},qz=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,r=s===void 0?"margin":s;Vz();var a=g.useMemo(function(){return Hz(r)},[r]);return g.createElement(Uz,{styles:Fz(a,!t,r,n?"":"!important")})},wg=!1;if(typeof window<"u")try{var bu=Object.defineProperty({},"passive",{get:function(){return wg=!0,!0}});window.addEventListener("test",bu,bu),window.removeEventListener("test",bu,bu)}catch{wg=!1}var ko=wg?{passive:!1}:!1,Zz=function(e){return e.tagName==="TEXTAREA"},Sj=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Zz(e)&&n[t]==="visible")},Gz=function(e){return Sj(e,"overflowY")},Yz=function(e){return Sj(e,"overflowX")},Ov=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=Cj(e,s);if(r){var a=kj(e,s),i=a[1],l=a[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},Xz=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},Wz=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},Cj=function(e,t){return e==="v"?Gz(t):Yz(t)},kj=function(e,t){return e==="v"?Xz(t):Wz(t)},Kz=function(e,t){return e==="h"&&t==="rtl"?-1:1},Qz=function(e,t,n,s,r){var a=Kz(e,window.getComputedStyle(t).direction),i=a*s,l=n.target,c=t.contains(l),u=!1,d=i>0,f=0,m=0;do{if(!l)break;var h=kj(e,l),p=h[0],y=h[1],b=h[2],x=y-b-a*p;(p||x)&&Cj(e,l)&&(f+=x,m+=p);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(f)<1||!d&&Math.abs(m)<1)&&(u=!0),u},wu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Bv=function(e){return[e.deltaX,e.deltaY]},Iv=function(e){return e&&"current"in e?e.current:e},Jz=function(e,t){return e[0]===t[0]&&e[1]===t[1]},eL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},tL=0,Eo=[];function nL(e){var t=g.useRef([]),n=g.useRef([0,0]),s=g.useRef(),r=g.useState(tL++)[0],a=g.useState(jj)[0],i=g.useRef(e);g.useEffect(function(){i.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var y=jz([e.lockRef.current],(e.shards||[]).map(Iv),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var x=wu(y),w=n.current,v="deltaX"in y?y.deltaX:w[0]-x[0],N="deltaY"in y?y.deltaY:w[1]-x[1],j,S=y.target,C=Math.abs(v)>Math.abs(N)?"h":"v";if("touches"in y&&C==="h"&&S.type==="range")return!1;var E=Ov(C,S);if(!E)return!0;if(E?j=C:(j=C==="v"?"h":"v",E=Ov(C,S)),!E)return!1;if(!s.current&&"changedTouches"in y&&(v||N)&&(s.current=j),!j)return!0;var k=s.current||j;return Qz(k,b,y,k==="h"?v:N)},[]),c=g.useCallback(function(y){var b=y;if(!(!Eo.length||Eo[Eo.length-1]!==a)){var x="deltaY"in b?Bv(b):wu(b),w=t.current.filter(function(j){return j.name===b.type&&(j.target===b.target||b.target===j.shadowParent)&&Jz(j.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var v=(i.current.shards||[]).map(Iv).filter(Boolean).filter(function(j){return j.contains(b.target)}),N=v.length>0?l(b,v[0]):!i.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),u=g.useCallback(function(y,b,x,w){var v={name:y,delta:b,target:x,should:w,shadowParent:sL(x)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(N){return N!==v})},1)},[]),d=g.useCallback(function(y){n.current=wu(y),s.current=void 0},[]),f=g.useCallback(function(y){u(y.type,Bv(y),y.target,l(y,e.lockRef.current))},[]),m=g.useCallback(function(y){u(y.type,wu(y),y.target,l(y,e.lockRef.current))},[]);g.useEffect(function(){return Eo.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ko),document.addEventListener("touchmove",c,ko),document.addEventListener("touchstart",d,ko),function(){Eo=Eo.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,ko),document.removeEventListener("touchmove",c,ko),document.removeEventListener("touchstart",d,ko)}},[]);var h=e.removeScrollBar,p=e.inert;return g.createElement(g.Fragment,null,p?g.createElement(a,{styles:eL(r)}):null,h?g.createElement(qz,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function sL(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const rL=Rz(Nj,nL);var vx=g.forwardRef(function(e,t){return g.createElement(Bf,bs({},e,{ref:t,sideCar:rL}))});vx.classNames=Bf.classNames;var aL=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},_o=new WeakMap,Nu=new WeakMap,ju={},Km=0,Ej=function(e){return e&&(e.host||Ej(e.parentNode))},oL=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=Ej(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},iL=function(e,t,n,s){var r=oL(t,Array.isArray(e)?e:[e]);ju[n]||(ju[n]=new WeakMap);var a=ju[n],i=[],l=new Set,c=new Set(r),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};r.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var h=m.getAttribute(s),p=h!==null&&h!=="false",y=(_o.get(m)||0)+1,b=(a.get(m)||0)+1;_o.set(m,y),a.set(m,b),i.push(m),y===1&&p&&Nu.set(m,!0),b===1&&m.setAttribute(n,"true"),p||m.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(t),l.clear(),Km++,function(){i.forEach(function(f){var m=_o.get(f)-1,h=a.get(f)-1;_o.set(f,m),a.set(f,h),m||(Nu.has(f)||f.removeAttribute(s),Nu.delete(f)),h||f.removeAttribute(n)}),Km--,Km||(_o=new WeakMap,_o=new WeakMap,Nu=new WeakMap,ju={})}},_j=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),r=aL(e);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),iL(s,r,n,"aria-hidden")):function(){return null}},If="Dialog",[Aj,bee]=un(If),[lL,ls]=Aj(If),Mj=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:r,onOpenChange:a,modal:i=!0}=e,l=g.useRef(null),c=g.useRef(null),[u,d]=Yn({prop:s,defaultProp:r??!1,onChange:a,caller:If});return o.jsx(lL,{scope:t,triggerRef:l,contentRef:c,contentId:ur(),titleId:ur(),descriptionId:ur(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:i,children:n})};Mj.displayName=If;var Tj="DialogTrigger",Rj=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=ls(Tj,n),a=$e(t,r.triggerRef);return o.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Nx(r.open),...s,ref:a,onClick:te(e.onClick,r.onOpenToggle)})});Rj.displayName=Tj;var bx="DialogPortal",[cL,Dj]=Aj(bx,{forceMount:void 0}),zj=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:r}=e,a=ls(bx,t);return o.jsx(cL,{scope:t,forceMount:n,children:g.Children.map(s,i=>o.jsx(Zt,{present:n||a.open,children:o.jsx(yx,{asChild:!0,container:r,children:i})}))})};zj.displayName=bx;var Ed="DialogOverlay",Lj=g.forwardRef((e,t)=>{const n=Dj(Ed,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,a=ls(Ed,e.__scopeDialog);return a.modal?o.jsx(Zt,{present:s||a.open,children:o.jsx(dL,{...r,ref:t})}):null});Lj.displayName=Ed;var uL=vi("DialogOverlay.RemoveScroll"),dL=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=ls(Ed,n);return o.jsx(vx,{as:uL,allowPinchZoom:!0,shards:[r.contentRef],children:o.jsx(xe.div,{"data-state":Nx(r.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Ya="DialogContent",$j=g.forwardRef((e,t)=>{const n=Dj(Ya,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,a=ls(Ya,e.__scopeDialog);return o.jsx(Zt,{present:s||a.open,children:a.modal?o.jsx(fL,{...r,ref:t}):o.jsx(mL,{...r,ref:t})})});$j.displayName=Ya;var fL=g.forwardRef((e,t)=>{const n=ls(Ya,e.__scopeDialog),s=g.useRef(null),r=$e(t,n.contentRef,s);return g.useEffect(()=>{const a=s.current;if(a)return _j(a)},[]),o.jsx(Pj,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:te(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:te(e.onFocusOutside,a=>a.preventDefault())})}),mL=g.forwardRef((e,t)=>{const n=ls(Ya,e.__scopeDialog),s=g.useRef(!1),r=g.useRef(!1);return o.jsx(Pj,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&r.current&&a.preventDefault()}})}),Pj=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:a,...i}=e,l=ls(Ya,n),c=g.useRef(null),u=$e(t,c);return vj(),o.jsxs(o.Fragment,{children:[o.jsx(xx,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:a,children:o.jsx(Oc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Nx(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(hL,{titleId:l.titleId}),o.jsx(pL,{contentRef:c,descriptionId:l.descriptionId})]})]})}),wx="DialogTitle",Oj=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=ls(wx,n);return o.jsx(xe.h2,{id:r.titleId,...s,ref:t})});Oj.displayName=wx;var Bj="DialogDescription",Ij=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=ls(Bj,n);return o.jsx(xe.p,{id:r.descriptionId,...s,ref:t})});Ij.displayName=Bj;var Hj="DialogClose",Uj=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=ls(Hj,n);return o.jsx(xe.button,{type:"button",...s,ref:t,onClick:te(e.onClick,()=>r.onOpenChange(!1))})});Uj.displayName=Hj;function Nx(e){return e?"open":"closed"}var Fj="DialogTitleWarning",[wee,Vj]=W5(Fj,{contentName:Ya,titleName:wx,docsSlug:"dialog"}),hL=({titleId:e})=>{const t=Vj(Fj),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},gL="DialogDescriptionWarning",pL=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Vj(gL).contentName}}.`;return g.useEffect(()=>{var a;const r=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},qj=Mj,xL=Rj,Zj=zj,jx=Lj,Sx=$j,Cx=Oj,kx=Ij,yL=Uj;const Ex=qj,Gj=xL,vL=Zj,Yj=g.forwardRef(({className:e,...t},n)=>o.jsx(jx,{className:H("fixed inset-0 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{zIndex:Dt.MODAL},...t,ref:n}));Yj.displayName=jx.displayName;const bL=qi("fixed gap-4 border shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Hf=g.forwardRef(({side:e="right",className:t,children:n,...s},r)=>o.jsxs(vL,{children:[o.jsx(Yj,{}),o.jsxs(Sx,{ref:r,className:H(bL({side:e}),t),style:{zIndex:Dt.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[n,o.jsxs(yL,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(qt,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Hf.displayName=Sx.displayName;const _x=({className:e,...t})=>o.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",e),...t});_x.displayName="SheetHeader";const Ax=g.forwardRef(({className:e,...t},n)=>o.jsx(Cx,{ref:n,className:H("text-lg font-semibold text-foreground",e),...t}));Ax.displayName=Cx.displayName;const Mx=g.forwardRef(({className:e,...t},n)=>o.jsx(kx,{ref:n,className:H("text-sm text-muted-foreground",e),...t}));Mx.displayName=kx.displayName;const wL=()=>{const{build:e,resetBuild:t,getSummary:n,getRegularTraitLimit:s,getBonusTraitLimit:r}=wt(),a=dt(),i=n(),[l,c]=g.useState(!1),u=e.name||e.race||e.traits.regular.length>0||e.traits.bonus.length>0||e.stone||e.religion||e.skills.major.length>0||e.skills.minor.length>0||e.equipment.length>0,d=()=>{navigator.clipboard.writeText(window.location.href)},f=()=>{confirm("Are you sure you want to reset your character build? This cannot be undone.")&&t()},m=b=>{c(!1),a(b)},h=s(),p=r(),y=h+p;return o.jsx("div",{className:"fixed bottom-4 right-4",style:{zIndex:Dt.MODAL+1},children:o.jsxs(Ex,{open:l,onOpenChange:c,children:[o.jsx(Gj,{asChild:!0,children:o.jsx(K,{size:"lg",className:`h-12 w-12 rounded-full shadow-lg transition-opacity duration-200 ${l?"opacity-0 pointer-events-none":"opacity-100"}`,style:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))"},children:o.jsx(Pl,{className:"h-5 w-5"})})}),o.jsxs(Hf,{side:"right",className:"w-[400px] sm:w-[540px] p-6",children:[o.jsxs(_x,{children:[o.jsxs(Ax,{className:"flex items-center gap-2",children:[o.jsx(Pl,{className:"h-5 w-5"}),u?i.name:"Character Build"]}),o.jsx(Mx,{children:u?"Your current character build status":"Create and manage your character build"})]}),o.jsx("div",{className:"mt-6 space-y-6",children:u?o.jsxs(o.Fragment,{children:[e.race&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Race"}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[o.jsx("span",{className:"font-medium",children:i.race}),o.jsx(X,{variant:"secondary",className:"bg-blue-500",children:"Selected"})]})]}),e.stone&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Birth Sign"}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[o.jsx("span",{className:"font-medium",children:i.stone}),o.jsx(X,{variant:"secondary",className:"bg-purple-500",children:"Selected"})]})]}),e.religion&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Religion"}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[o.jsx("span",{className:"font-medium",children:i.religion}),o.jsx(X,{variant:"secondary",className:"bg-orange-500",children:"Selected"})]})]}),(e.traits.regular.length>0||e.traits.bonus.length>0)&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h3",{className:"text-sm font-medium text-muted-foreground",children:["Traits (",e.traits.regular.length+e.traits.bonus.length,"/",y,")"]}),o.jsxs("div",{className:"space-y-2",children:[e.traits.regular.map(b=>o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),o.jsx("span",{className:"text-muted-foreground",children:"Starting"})]},`regular-${b}`)),e.traits.bonus.map(b=>o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),o.jsx("span",{className:"text-muted-foreground",children:"Late Game"})]},`bonus-${b}`))]})]}),(e.skills.major.length>0||e.skills.minor.length>0)&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Skills"}),o.jsxs("div",{className:"space-y-2",children:[e.skills.major.length>0&&o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-medium",children:"Major Skills"}),o.jsx(X,{variant:"outline",children:e.skills.major.length})]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.skills.major.map(b=>o.jsx(X,{variant:"secondary",className:"bg-red-500 text-xs",children:b},b))})]}),e.skills.minor.length>0&&o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-medium",children:"Minor Skills"}),o.jsx(X,{variant:"outline",children:e.skills.minor.length})]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.skills.minor.map(b=>o.jsx(X,{variant:"secondary",className:"bg-blue-500 text-xs",children:b},b))})]})]})]}),e.equipment.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h3",{className:"text-sm font-medium text-muted-foreground",children:["Equipment (",e.equipment.length,")"]}),o.jsx("div",{className:"space-y-2",children:e.equipment.map(b=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[o.jsx("span",{className:"font-medium",children:b}),o.jsx(X,{variant:"secondary",className:"bg-gray-500",children:"Equipped"})]},b))})]})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Pl,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Character Build"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"Start building your character by selecting a race, traits, and other options."})]})}),o.jsx("div",{className:"mt-8 space-y-3",children:u?o.jsxs(o.Fragment,{children:[o.jsxs(K,{onClick:()=>m("/build"),className:"w-full",children:[o.jsx(Ga,{className:"w-4 h-4 mr-2"}),"Edit Build"]}),o.jsxs(K,{variant:"outline",onClick:d,className:"w-full",children:[o.jsx(e4,{className:"w-4 h-4 mr-2"}),"Copy Share URL"]}),o.jsxs(K,{variant:"destructive",onClick:f,className:"w-full",children:[o.jsx(K4,{className:"w-4 h-4 mr-2"}),"Reset Build"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(K,{onClick:()=>m("/build"),className:"w-full",children:[o.jsx(Ga,{className:"w-4 h-4 mr-2"}),"Create Character Build"]}),o.jsx(K,{variant:"outline",onClick:()=>m("/race"),className:"w-full",children:"Browse Races"}),o.jsx(K,{variant:"outline",onClick:()=>m("/traits"),className:"w-full",children:"Browse Traits"})]})})]})]})})},Hv=e=>btoa(unescape(encodeURIComponent(JSON.stringify(e)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),Uv=e=>{try{const t=e.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(escape(atob(t))))}catch{return null}},NL=()=>{const e=Hr(s=>s.build),t=Hr(s=>s.setBuild),n=g.useRef(!1);g.useEffect(()=>{if(n.current)return;const s=window.location.hash,[r,a]=s.split("?"),l=new URLSearchParams(a||"").get("b");if(console.log("URL Sync - Hydrating from URL:",{hash:s,encodedBuild:l}),l){const c=Uv(l);console.log("URL Sync - Decoded build:",c),(c==null?void 0:c.v)===1?(console.log("URL Sync - Setting build from URL"),t(c)):console.warn("Invalid or outdated build schema in URL")}else console.log("URL Sync - No build parameter found in URL");n.current=!0},[t]),g.useEffect(()=>{const s={v:1,name:"Test",perks:{selected:{archery:["archery_01"]},ranks:{archery_01:1}}},r=Hv(s),a=Uv(r);console.log("URL Sync - Test encoding/decoding:",{testBuild:s,encoded:r,decoded:a,matches:JSON.stringify(s)===JSON.stringify(a)})},[]),g.useEffect(()=>{if(!n.current)return;console.log("URL Sync - Build state changed:",e);const s=Hv(e),r=window.location.hash,[a,i]=r.split("?"),l=new URLSearchParams(i||"");l.set("b",s);const c=`${a}?${l.toString()}`;console.log("URL Sync - Updating URL:",c),window.history.replaceState(null,"",c)},[e.v,e.name,e.race,e.stone,e.religion,e.traits,e.skills,e.perks,e.equipment,e.destinyPath])},Xj=g.forwardRef(({className:e,collapsed:t,...n},s)=>o.jsx("aside",{ref:s,"data-collapsed":t?"":void 0,className:H("flex flex-col bg-card border-r border-skyrim-gold/20 h-[calc(100vh-3rem)] sticky top-12 transition-all duration-300",t?"w-0 overflow-hidden":"w-64",e),...n}));Xj.displayName="Sidebar";const Wj=g.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:H("flex-1 flex flex-col justify-start overflow-y-auto px-2 py-2",e),...t}));Wj.displayName="SidebarContent";const Kj=g.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:H("mb-2",e),...t}));Kj.displayName="SidebarGroup";const Qj=g.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:H("px-3 py-2 border-b border-skyrim-gold/20 flex items-center gap-2 min-h-[48px]",e),...t}));Qj.displayName="SidebarHeader";const Jj=g.forwardRef(({className:e,...t},n)=>o.jsx("ul",{ref:n,className:H("flex flex-col gap-0.5 list-none p-0 m-0",e),...t}));Jj.displayName="SidebarMenu";const eS=g.forwardRef(({className:e,asChild:t,isActive:n,...s},r)=>{const a=t?"span":"button";return o.jsx(a,{ref:r,"data-active":n?"":void 0,className:H("group flex items-center w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out","hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] hover:border-l-4","active:scale-[0.98] active:bg-skyrim-gold/25","cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",n?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent",e),tabIndex:0,...s})});eS.displayName="SidebarMenuButton";const tS=g.forwardRef(({className:e,...t},n)=>o.jsx("li",{ref:n,className:H("relative flex items-stretch",e),...t}));tS.displayName="SidebarMenuItem";const nS=g.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:e,...t}));nS.displayName="SidebarRail";const jL=qi("",{variants:{variant:{h1:"scroll-m-20 text-5xl font-black tracking-tight text-balance lg:text-6xl",h2:"scroll-m-20 border-b pb-3 text-4xl font-bold tracking-tight first:mt-0 lg:text-5xl",h3:"scroll-m-20 text-3xl font-bold tracking-tight lg:text-4xl",h4:"scroll-m-20 text-2xl font-bold tracking-tight lg:text-3xl",h5:"scroll-m-20 text-xl font-bold tracking-tight lg:text-2xl",h6:"scroll-m-20 text-lg font-bold tracking-tight lg:text-xl",p:"text-lg leading-8 [&:not(:first-child)]:mt-6",blockquote:"mt-6 border-l-4 pl-6 italic text-lg",code:"bg-muted relative rounded px-[0.4rem] py-[0.3rem] font-mono text-base font-bold",lead:"text-muted-foreground text-2xl leading-8",large:"text-xl font-bold",small:"text-base font-semibold leading-none",muted:"text-muted-foreground text-base"}},defaultVariants:{variant:"p"}}),dn=g.forwardRef(({className:e,variant:t,as:n,...s},r)=>{const a=n||SL(t);return o.jsx(a,{className:H(jL({variant:t,className:e})),ref:r,...s})});dn.displayName="Typography";function SL(e){switch(e){case"h1":return"h1";case"h2":return"h2";case"h3":return"h3";case"h4":return"h4";case"h5":return"h5";case"h6":return"h6";case"blockquote":return"blockquote";case"code":return"code";case"lead":case"large":case"small":case"muted":case"p":default:return"p"}}const co=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h1",as:"h1",className:e,ref:n,...t}));co.displayName="H1";const za=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h2",as:"h2",className:e,ref:n,...t}));za.displayName="H2";const gt=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h3",as:"h3",className:e,ref:n,...t}));gt.displayName="H3";const ti=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h4",as:"h4",className:e,ref:n,...t}));ti.displayName="H4";const Ut=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h5",as:"h5",className:e,ref:n,...t}));Ut.displayName="H5";const CL=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h6",as:"h6",className:e,ref:n,...t}));CL.displayName="H6";const Xe=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"p",as:"p",className:e,ref:n,...t}));Xe.displayName="P";const kL=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"blockquote",as:"blockquote",className:e,ref:n,...t}));kL.displayName="Blockquote";const EL=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"code",as:"code",className:e,ref:n,...t}));EL.displayName="Code";const sS=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"lead",as:"p",className:e,ref:n,...t}));sS.displayName="Lead";const _L=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"large",as:"div",className:e,ref:n,...t}));_L.displayName="Large";const rS=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"small",as:"small",className:e,ref:n,...t}));rS.displayName="Small";const rc=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"muted",as:"p",className:e,ref:n,...t}));rc.displayName="Muted";const od=new Map;function AL(){od.clear()}AL();function ML(e,t={}){if(!e)return[];const n=JSON.stringify({text:e,options:t});if(od.has(n))return od.get(n);let s=[{text:e,key:"0"}];return t.customPatterns&&t.customPatterns.length>0&&t.customPatterns.forEach((r,a)=>{const i=[];s.forEach(l=>{if(l.className)i.push(l);else{let c=0,u;const d=new RegExp(r.pattern,r.pattern.flags.includes("g")?r.pattern.flags:r.pattern.flags+"g");d.lastIndex=0;let f=0;for(;(u=d.exec(l.text))!==null;){u.index>c&&i.push({text:l.text.slice(c,u.index),key:`${l.key}-${f++}`});let m=u[0];const h=typeof r.className=="function"?r.className(u[0]):r.className;r.transform&&(m=r.transform(m)),i.push({text:m,className:h,key:`${l.key}-${f++}`}),c=d.lastIndex}c<l.text.length&&i.push({text:l.text.slice(c),key:`${l.key}-${f++}`})}}),s=i}),s=s.map((r,a)=>({...r,key:r.key||String(a)})),od.set(n,s),s}const TL=["health","magicka","stamina","health regeneration","magicka regeneration","stamina regeneration"],RL=["one-handed","two-handed","archery","block","heavy armor","light armor","smithing","alchemy"];function DL(){return{highlightBrackets:!0,highlightAttributes:!0,highlightSkills:!0,highlightNumbers:!0,customPatterns:[{pattern:/\*\*\*([^*]+)\*\*\*/g,className:e=>{const n=e.slice(3,-3).match(/[+-]?\d+(?:\.\d+)?%?/);if(n){const s=parseFloat(n[0]),r=n[0].startsWith("+")||s>0,a=n[0].startsWith("-")||s<0;if(r)return"font-bold text-green-600 bg-skyrim-gold/10 px-1 py-0.5 rounded";if(a)return"font-bold text-red-600 bg-skyrim-gold/10 px-1 py-0.5 rounded"}return"font-bold text-skyrim-gold bg-skyrim-gold/10 px-1 py-0.5 rounded"},transform:e=>e.slice(3,-3)},{pattern:/<([^>]+)>/g,className:e=>{const t=e.slice(1,-1);if(!/^\d+$/.test(t))return"text-foreground"},transform:e=>{const t=e.match(/<([^>]+)>/);return t?t[1]:e.slice(1,-1)}},{pattern:/[+-]?\d+(?:\.\d+)?%?/g,className:e=>{const t=parseFloat(e),n=e.startsWith("+")||t>0,s=e.startsWith("-")||t<0,r=t===0;return n?"font-bold text-green-600":s?"font-bold text-red-600":r?"font-bold text-skyrim-gold":"font-bold text-green-600"}},{pattern:new RegExp(`\\b(${TL.join("|")})\\b`,"gi"),className:"font-semibold text-primary"},{pattern:new RegExp(`\\b(${RL.join("|")})\\b`,"gi"),className:"font-semibold text-primary"}]}}function Be({text:e,options:t,className:n="text-sm text-muted-foreground",as:s="div"}){const r=g.useMemo(()=>DL(),[]),a=g.useMemo(()=>e?ML(e,t||r):[],[e,t,r]);if(!e)return null;if(n.includes("line-clamp")){const l=n.match(/line-clamp-\d+/g)||[],c=n.replace(/line-clamp-\d+/g,"").trim();return o.jsx(s,{className:c,children:o.jsx("div",{className:`${l.join(" ")} overflow-hidden`,children:a.map(u=>o.jsx("span",{className:u.className,children:u.text},u.key))})})}return o.jsx(s,{className:n,children:a.map(l=>o.jsx("span",{className:l.className,children:l.text},l.key))})}const Un=({children:e,title:t,description:n,className:s=""})=>o.jsxs("div",{className:`container mx-auto p-6 space-y-6 ${s}`,children:[t&&o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:t}),n&&o.jsx(Be,{text:n,className:"text-muted-foreground mt-2 max-w-4xl",as:"p"})]})}),e]});function Tx(e){const t=e+"CollectionProvider",[n,s]=un(t),[r,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=y=>{const{scope:b,children:x}=y,w=L.useRef(null),v=L.useRef(new Map).current;return o.jsx(r,{scope:b,itemMap:v,collectionRef:w,children:x})};i.displayName=t;const l=e+"CollectionSlot",c=vi(l),u=L.forwardRef((y,b)=>{const{scope:x,children:w}=y,v=a(l,x),N=$e(b,v.collectionRef);return o.jsx(c,{ref:N,children:w})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",m=vi(d),h=L.forwardRef((y,b)=>{const{scope:x,children:w,...v}=y,N=L.useRef(null),j=$e(b,N),S=a(d,x);return L.useEffect(()=>(S.itemMap.set(N,{ref:N,...v}),()=>void S.itemMap.delete(N))),o.jsx(m,{[f]:"",ref:j,children:w})});h.displayName=d;function p(y){const b=a(e+"CollectionConsumer",y);return L.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((S,C)=>v.indexOf(S.ref.current)-v.indexOf(C.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:i,Slot:u,ItemSlot:h},p,s]}var zL=g.createContext(void 0);function Yi(e){const t=g.useContext(zL);return e||t||"ltr"}var Qm="rovingFocusGroup.onEntryFocus",LL={bubbles:!1,cancelable:!0},Bc="RovingFocusGroup",[Ng,aS,$L]=Tx(Bc),[PL,Xi]=un(Bc,[$L]),[OL,BL]=PL(Bc),oS=g.forwardRef((e,t)=>o.jsx(Ng.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(Ng.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(IL,{...e,ref:t})})}));oS.displayName=Bc;var IL=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,m=g.useRef(null),h=$e(t,m),p=Yi(a),[y,b]=Yn({prop:i,defaultProp:l??null,onChange:c,caller:Bc}),[x,w]=g.useState(!1),v=Ht(u),N=aS(n),j=g.useRef(!1),[S,C]=g.useState(0);return g.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(Qm,v),()=>E.removeEventListener(Qm,v)},[v]),o.jsx(OL,{scope:n,orientation:s,dir:p,loop:r,currentTabStopId:y,onItemFocus:g.useCallback(E=>b(E),[b]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:g.useCallback(()=>C(E=>E-1),[]),children:o.jsx(xe.div,{tabIndex:x||S===0?-1:0,"data-orientation":s,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:te(e.onMouseDown,()=>{j.current=!0}),onFocus:te(e.onFocus,E=>{const k=!j.current;if(E.target===E.currentTarget&&k&&!x){const _=new CustomEvent(Qm,LL);if(E.currentTarget.dispatchEvent(_),!_.defaultPrevented){const P=N().filter(A=>A.focusable),O=P.find(A=>A.active),$=P.find(A=>A.id===y),D=[O,$,...P].filter(Boolean).map(A=>A.ref.current);cS(D,d)}}j.current=!1}),onBlur:te(e.onBlur,()=>w(!1))})})}),iS="RovingFocusGroupItem",lS=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:a,children:i,...l}=e,c=ur(),u=a||c,d=BL(iS,n),f=d.currentTabStopId===u,m=aS(n),{onFocusableItemAdd:h,onFocusableItemRemove:p,currentTabStopId:y}=d;return g.useEffect(()=>{if(s)return h(),()=>p()},[s,h,p]),o.jsx(Ng.ItemSlot,{scope:n,id:u,focusable:s,active:r,children:o.jsx(xe.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:te(e.onMouseDown,b=>{s?d.onItemFocus(u):b.preventDefault()}),onFocus:te(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:te(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=FL(b,d.orientation,d.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let v=m().filter(N=>N.focusable).map(N=>N.ref.current);if(x==="last")v.reverse();else if(x==="prev"||x==="next"){x==="prev"&&v.reverse();const N=v.indexOf(b.currentTarget);v=d.loop?VL(v,N+1):v.slice(N+1)}setTimeout(()=>cS(v))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:y!=null}):i})})});lS.displayName=iS;var HL={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function UL(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function FL(e,t,n){const s=UL(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return HL[s]}function cS(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function VL(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Rx=oS,Dx=lS,Uf="Tabs",[qL,Nee]=un(Uf,[Xi]),uS=Xi(),[ZL,zx]=qL(Uf),dS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:a,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Yi(l),[f,m]=Yn({prop:s,onChange:r,defaultProp:a??"",caller:Uf});return o.jsx(ZL,{scope:n,baseId:ur(),value:f,onValueChange:m,orientation:i,dir:d,activationMode:c,children:o.jsx(xe.div,{dir:d,"data-orientation":i,...u,ref:t})})});dS.displayName=Uf;var fS="TabsList",mS=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...r}=e,a=zx(fS,n),i=uS(n);return o.jsx(Rx,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:s,children:o.jsx(xe.div,{role:"tablist","aria-orientation":a.orientation,...r,ref:t})})});mS.displayName=fS;var hS="TabsTrigger",gS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...a}=e,i=zx(hS,n),l=uS(n),c=yS(i.baseId,s),u=vS(i.baseId,s),d=s===i.value;return o.jsx(Dx,{asChild:!0,...l,focusable:!r,active:d,children:o.jsx(xe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...a,ref:t,onMouseDown:te(e.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?i.onValueChange(s):f.preventDefault()}),onKeyDown:te(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(s)}),onFocus:te(e.onFocus,()=>{const f=i.activationMode!=="manual";!d&&!r&&f&&i.onValueChange(s)})})})});gS.displayName=hS;var pS="TabsContent",xS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:r,children:a,...i}=e,l=zx(pS,n),c=yS(l.baseId,s),u=vS(l.baseId,s),d=s===l.value,f=g.useRef(d);return g.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx(Zt,{present:r||d,children:({present:m})=>o.jsx(xe.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&a})})});xS.displayName=pS;function yS(e,t){return`${e}-trigger-${t}`}function vS(e,t){return`${e}-content-${t}`}var GL=dS,YL=mS,XL=gS,WL=xS;function Wi({className:e,...t}){return o.jsx(GL,{"data-slot":"tabs",className:H("flex flex-col gap-2",e),...t})}function Ki({className:e,...t}){return o.jsx(YL,{"data-slot":"tabs-list",className:H("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function an({className:e,...t}){return o.jsx(XL,{"data-slot":"tabs-trigger",className:H("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function wn({className:e,...t}){return o.jsx(WL,{"data-slot":"tabs-content",className:H("flex-1 outline-none",e),...t})}const tn=[{label:"Build",value:"build",to:"/build"},{label:"Race",value:"race",to:"/build/race"},{label:"Birth Signs",value:"birth-signs",to:"/build/birth-signs"},{label:"Traits",value:"traits",to:"/build/traits"},{label:"Religion",value:"religions",to:"/build/religions"},{label:"Destiny",value:"destiny",to:"/build/destiny"},{label:"Perks",value:"perks",to:"/build/perks"}],KL=({currentPath:e})=>{var d;const t=dt(),n=tn.findIndex(f=>f.to===e),s=n>=0?n:0,r=f=>{const m=tn.find(h=>h.value===f);m&&t(m.to)},a=f=>{t(f.to)},i=()=>{s>0&&t(tn[s-1].to)},l=()=>{s<tn.length-1&&t(tn[s+1].to)},c=f=>{switch(f.key){case"ArrowLeft":f.preventDefault(),i();break;case"ArrowRight":f.preventDefault(),l();break;case"Home":f.preventDefault(),t(tn[0].to);break;case"End":f.preventDefault(),t(tn[tn.length-1].to);break}},u=((d=tn[s])==null?void 0:d.value)||"build";return o.jsx("div",{className:"bg-background border-b border-border shadow-sm sticky top-12 backdrop-blur-sm",style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},role:"navigation","aria-label":"Character build progress",onKeyDown:c,tabIndex:0,children:o.jsx("div",{style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:o.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[o.jsx(K,{onClick:i,disabled:s===0,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to previous step: ${s>0?tn[s-1].label:"none"}`,children:o.jsx(UR,{className:"h-4 w-4"})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx(Wi,{value:u,onValueChange:r,children:o.jsx(Ki,{className:"flex w-full h-auto p-1 bg-muted relative",style:{backgroundColor:"hsl(var(--muted))",backgroundImage:"none"},role:"tablist","aria-label":"Character build steps",children:tn.map((f,m)=>o.jsxs(an,{value:f.value,onClick:()=>a(f),className:H("inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-xs font-medium whitespace-nowrap transition-[color,box-shadow] relative","data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm","dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30","text-foreground dark:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","cursor-pointer select-none"),style:{backgroundColor:u===f.value?"hsl(var(--background))":"transparent",backgroundImage:"none"},title:`Step ${m+1}: ${f.label}`,role:"tab","aria-selected":u===f.value,"aria-label":`Step ${m+1}: ${f.label}`,children:[o.jsx("span",{className:"hidden sm:inline",children:f.label}),o.jsx("span",{className:"sm:hidden",children:f.label.split(" ")[0]}),u===f.value&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-skyrim-gold rounded-b-md transition-all duration-200"})]},f.value))})})}),o.jsx(K,{onClick:l,disabled:s===tn.length-1,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to next step: ${s<tn.length-1?tn[s+1].label:"none"}`,children:o.jsx(Dc,{className:"h-4 w-4"})})]})})})},QL=()=>{const e=Sr();return o.jsxs("div",{className:"flex flex-col min-h-full",children:[o.jsx(KL,{currentPath:e.pathname}),o.jsx("div",{className:"flex-grow",children:o.jsx(hD,{})})]})};function JL(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function bS(e){const[t,n]=g.useState(void 0);return Ts(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var Ff="Switch",[e$,jee]=un(Ff),[t$,n$]=e$(Ff),wS=g.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:r,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[m,h]=g.useState(null),p=$e(t,v=>h(v)),y=g.useRef(!1),b=m?d||!!m.closest("form"):!0,[x,w]=Yn({prop:r,defaultProp:a??!1,onChange:u,caller:Ff});return o.jsxs(t$,{scope:n,checked:x,disabled:l,children:[o.jsx(xe.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":CS(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:p,onClick:te(e.onClick,v=>{w(N=>!N),b&&(y.current=v.isPropagationStopped(),y.current||v.stopPropagation())})}),b&&o.jsx(SS,{control:m,bubbles:!y.current,name:s,value:c,checked:x,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});wS.displayName=Ff;var NS="SwitchThumb",jS=g.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,r=n$(NS,n);return o.jsx(xe.span,{"data-state":CS(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t})});jS.displayName=NS;var s$="SwitchBubbleInput",SS=g.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...r},a)=>{const i=g.useRef(null),l=$e(i,a),c=JL(n),u=bS(t);return g.useEffect(()=>{const d=i.current;if(!d)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&h){const p=new Event("click",{bubbles:s});h.call(d,n),d.dispatchEvent(p)}},[c,n,s]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:l,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});SS.displayName=s$;function CS(e){return e?"checked":"unchecked"}var kS=wS,r$=jS;const Vf=g.forwardRef(({className:e,...t},n)=>o.jsx(kS,{className:H("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-black data-[state=unchecked]:bg-gray-300",e),...t,ref:n,children:o.jsx(r$,{className:H("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-sm ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Vf.displayName=kS.displayName;function pa({itemId:e,itemType:t,itemName:n,isInBuild:s=!1,className:r,onCheckedChange:a}){const{setRace:i,setStone:l,setReligion:c,addRegularTrait:u,addBonusTrait:d,removeTrait:f,addMajorSkill:m,removeMajorSkill:h,removeMinorSkill:p,addEquipment:y,removeEquipment:b,build:x}=wt(),v=s||(()=>{switch(t){case"race":return x.race===e;case"stone":return x.stone===e;case"religion":return x.religion===e;case"trait":return x.traits.regular.includes(e)||x.traits.bonus.includes(e);case"skill":return x.skills.major.includes(e)||x.skills.minor.includes(e);case"equipment":return x.equipment.includes(e);default:return!1}})(),N=S=>{if(a){a(S);return}switch(t){case"race":i(S?e:null);break;case"stone":l(S?e:null);break;case"religion":c(S?e:null);break;case"trait":S?x.traits.regular.length<2?u(e):x.traits.bonus.length<1&&d(e):f(e);break;case"skill":S?m(e):(h(e),p(e));break;case"equipment":S?y(e):b(e);break}},j=()=>v?`This ${t} is currently in your build`:`Add this ${t} to your character build`;return o.jsx("div",{className:H("flex items-center justify-center p-2 rounded-lg border transition-all duration-200 cursor-pointer hover:bg-muted/50",v?"border-[#d4af37] bg-[#d4af37]/20 shadow-md":"border-border",r),onClick:S=>{S.stopPropagation(),N(!v)},title:j(),children:o.jsx(Vf,{checked:v,onCheckedChange:N,className:H("transition-all duration-200",v?"data-[state=checked]:bg-[#d4af37]":"")})})}const Cs=g.forwardRef(({className:e,type:t,...n},s)=>o.jsx("input",{type:t,className:H("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));Cs.displayName="Input";function La({categories:e,onSelect:t,placeholder:n="Search categories...",className:s=""}){const[r,a]=g.useState(!1),[i,l]=g.useState(null),[c,u]=g.useState(""),[d,f]=g.useState(-1),m=g.useRef(null),h=g.useRef(null),p=e.length===1?e[0]:null;g.useEffect(()=>{const C=E=>{m.current&&!m.current.contains(E.target)&&(a(!1),l(null),f(-1))};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const y=i||p?(i||p).options.filter(C=>String(C.label||"").toLowerCase().includes(c.toLowerCase())||String(C.description||"").toLowerCase().includes(c.toLowerCase())):e.flatMap(C=>C.options.filter(E=>String(E.label||"").toLowerCase().includes(c.toLowerCase())||String(E.description||"").toLowerCase().includes(c.toLowerCase()))),b=C=>{u(C),a(!0),f(-1)},x=C=>{var E;l(C),u(""),(E=h.current)==null||E.focus()},w=C=>{t(C),u(""),l(null),a(!1),f(-1)},v=C=>{C.key==="ArrowDown"?(C.preventDefault(),f(E=>Math.min(E+1,y.length-1))):C.key==="ArrowUp"?(C.preventDefault(),f(E=>Math.max(E-1,-1))):C.key==="Enter"?(C.preventDefault(),d>=0&&y[d]&&w(y[d])):C.key==="Escape"&&(a(!1),l(null),f(-1))},N=()=>{a(!0)},j=i||p,S=!p&&!i;return o.jsxs("div",{ref:m,className:`relative ${s}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx(yi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(Cs,{ref:h,type:"text",placeholder:j?j.placeholder:n,value:c,onChange:C=>b(C.target.value),onFocus:N,onKeyDown:v,className:"pl-10 pr-10"}),o.jsx(K,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>a(!r),children:o.jsx(Vn,{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`})})]}),r&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",style:{zIndex:Dt.AUTOCOMPLETE+10},children:[S&&o.jsxs("div",{className:"p-2 border-b border-border",children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(C=>o.jsxs("button",{onClick:()=>x(C),className:"w-full text-left px-2 py-2 hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98] rounded text-sm flex items-center justify-between transition-all duration-200 cursor-pointer",children:[o.jsx("span",{children:C.name}),o.jsx(Vn,{className:"h-4 w-4"})]},C.id))]}),o.jsx("div",{className:"p-2",children:y.length===0?o.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):y.map((C,E)=>o.jsxs("button",{onClick:()=>w(C),className:`w-full text-left px-2 py-2 rounded text-sm transition-all duration-200 cursor-pointer ${E===d?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"}`,children:[o.jsx("div",{className:"font-medium",children:C.label||"Unnamed Option"}),C.description&&o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:C.description})]},C.id))})]})]})}function be({className:e,...t}){return o.jsx("div",{"data-slot":"card",className:H("bg-card text-card-foreground flex flex-col gap-8 rounded-xl border py-8 px-6 shadow-sm",e),...t})}function Te({className:e,action:t,children:n,...s}){return o.jsxs("div",{"data-slot":"card-header",className:H("flex flex-row items-start justify-between space-y-0",e),...s,children:[o.jsx("div",{className:"flex-1 flex flex-col space-y-3",children:n}),t&&o.jsx("div",{className:"ml-4 flex-shrink-0",children:t})]})}function Fe({className:e,...t}){return o.jsx("div",{"data-slot":"card-title",className:H("text-xl font-bold leading-none",e),...t})}function nr({className:e,...t}){return o.jsx("div",{"data-slot":"card-description",className:H("text-base text-muted-foreground",e),...t})}function we({className:e,...t}){return o.jsx("div",{"data-slot":"card-content",className:H("pt-0",e),...t})}const a$=["top","right","bottom","left"],ua=Math.min,yn=Math.max,_d=Math.round,Su=Math.floor,ks=e=>({x:e,y:e}),o$={left:"right",right:"left",bottom:"top",top:"bottom"},i$={start:"end",end:"start"};function jg(e,t,n){return yn(e,ua(t,n))}function gr(e,t){return typeof e=="function"?e(t):e}function pr(e){return e.split("-")[0]}function Qi(e){return e.split("-")[1]}function Lx(e){return e==="x"?"y":"x"}function $x(e){return e==="y"?"height":"width"}const l$=new Set(["top","bottom"]);function Ns(e){return l$.has(pr(e))?"y":"x"}function Px(e){return Lx(Ns(e))}function c$(e,t,n){n===void 0&&(n=!1);const s=Qi(e),r=Px(e),a=$x(r);let i=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Ad(i)),[i,Ad(i)]}function u$(e){const t=Ad(e);return[Sg(e),t,Sg(t)]}function Sg(e){return e.replace(/start|end/g,t=>i$[t])}const Fv=["left","right"],Vv=["right","left"],d$=["top","bottom"],f$=["bottom","top"];function m$(e,t,n){switch(e){case"top":case"bottom":return n?t?Vv:Fv:t?Fv:Vv;case"left":case"right":return t?d$:f$;default:return[]}}function h$(e,t,n,s){const r=Qi(e);let a=m$(pr(e),n==="start",s);return r&&(a=a.map(i=>i+"-"+r),t&&(a=a.concat(a.map(Sg)))),a}function Ad(e){return e.replace(/left|right|bottom|top/g,t=>o$[t])}function g$(e){return{top:0,right:0,bottom:0,left:0,...e}}function ES(e){return typeof e!="number"?g$(e):{top:e,right:e,bottom:e,left:e}}function Md(e){const{x:t,y:n,width:s,height:r}=e;return{width:s,height:r,top:n,left:t,right:t+s,bottom:n+r,x:t,y:n}}function qv(e,t,n){let{reference:s,floating:r}=e;const a=Ns(t),i=Px(t),l=$x(i),c=pr(t),u=a==="y",d=s.x+s.width/2-r.width/2,f=s.y+s.height/2-r.height/2,m=s[l]/2-r[l]/2;let h;switch(c){case"top":h={x:d,y:s.y-r.height};break;case"bottom":h={x:d,y:s.y+s.height};break;case"right":h={x:s.x+s.width,y:f};break;case"left":h={x:s.x-r.width,y:f};break;default:h={x:s.x,y:s.y}}switch(Qi(t)){case"start":h[i]-=m*(n&&u?-1:1);break;case"end":h[i]+=m*(n&&u?-1:1);break}return h}const p$=async(e,t,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:f}=qv(u,s,c),m=s,h={},p=0;for(let y=0;y<l.length;y++){const{name:b,fn:x}=l[y],{x:w,y:v,data:N,reset:j}=await x({x:d,y:f,initialPlacement:s,placement:m,strategy:r,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});d=w??d,f=v??f,h={...h,[b]:{...h[b],...N}},j&&p<=50&&(p++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:r}):j.rects),{x:d,y:f}=qv(u,m,c)),y=-1)}return{x:d,y:f,placement:m,strategy:r,middlewareData:h}};async function ac(e,t){var n;t===void 0&&(t={});const{x:s,y:r,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:h=0}=gr(t,e),p=ES(h),b=l[m?f==="floating"?"reference":"floating":f],x=Md(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=f==="floating"?{x:s,y:r,width:i.floating.width,height:i.floating.height}:i.reference,v=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),N=await(a.isElement==null?void 0:a.isElement(v))?await(a.getScale==null?void 0:a.getScale(v))||{x:1,y:1}:{x:1,y:1},j=Md(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:v,strategy:c}):w);return{top:(x.top-j.top+p.top)/N.y,bottom:(j.bottom-x.bottom+p.bottom)/N.y,left:(x.left-j.left+p.left)/N.x,right:(j.right-x.right+p.right)/N.x}}const x$=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:r,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=gr(e,t)||{};if(u==null)return{};const f=ES(d),m={x:n,y:s},h=Px(r),p=$x(h),y=await i.getDimensions(u),b=h==="y",x=b?"top":"left",w=b?"bottom":"right",v=b?"clientHeight":"clientWidth",N=a.reference[p]+a.reference[h]-m[h]-a.floating[p],j=m[h]-a.reference[h],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let C=S?S[v]:0;(!C||!await(i.isElement==null?void 0:i.isElement(S)))&&(C=l.floating[v]||a.floating[p]);const E=N/2-j/2,k=C/2-y[p]/2-1,_=ua(f[x],k),P=ua(f[w],k),O=_,$=C-y[p]-P,M=C/2-y[p]/2+E,D=jg(O,M,$),A=!c.arrow&&Qi(r)!=null&&M!==D&&a.reference[p]/2-(M<O?_:P)-y[p]/2<0,z=A?M<O?M-O:M-$:0;return{[h]:m[h]+z,data:{[h]:D,centerOffset:M-D-z,...A&&{alignmentOffset:z}},reset:A}}}),y$=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:r,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:y=!0,...b}=gr(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=pr(r),w=Ns(l),v=pr(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(v||!y?[Ad(l)]:u$(l)),S=p!=="none";!m&&S&&j.push(...h$(l,y,p,N));const C=[l,...j],E=await ac(t,b),k=[];let _=((s=a.flip)==null?void 0:s.overflows)||[];if(d&&k.push(E[x]),f){const M=c$(r,i,N);k.push(E[M[0]],E[M[1]])}if(_=[..._,{placement:r,overflows:k}],!k.every(M=>M<=0)){var P,O;const M=(((P=a.flip)==null?void 0:P.index)||0)+1,D=C[M];if(D&&(!(f==="alignment"?w!==Ns(D):!1)||_.every(T=>T.overflows[0]>0&&Ns(T.placement)===w)))return{data:{index:M,overflows:_},reset:{placement:D}};let A=(O=_.filter(z=>z.overflows[0]<=0).sort((z,T)=>z.overflows[1]-T.overflows[1])[0])==null?void 0:O.placement;if(!A)switch(h){case"bestFit":{var $;const z=($=_.filter(T=>{if(S){const R=Ns(T.placement);return R===w||R==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(R=>R>0).reduce((R,B)=>R+B,0)]).sort((T,R)=>T[1]-R[1])[0])==null?void 0:$[0];z&&(A=z);break}case"initialPlacement":A=l;break}if(r!==A)return{reset:{placement:A}}}return{}}}};function Zv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Gv(e){return a$.some(t=>e[t]>=0)}const v$=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...r}=gr(e,t);switch(s){case"referenceHidden":{const a=await ac(t,{...r,elementContext:"reference"}),i=Zv(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Gv(i)}}}case"escaped":{const a=await ac(t,{...r,altBoundary:!0}),i=Zv(a,n.floating);return{data:{escapedOffsets:i,escaped:Gv(i)}}}default:return{}}}}},_S=new Set(["left","top"]);async function b$(e,t){const{placement:n,platform:s,elements:r}=e,a=await(s.isRTL==null?void 0:s.isRTL(r.floating)),i=pr(n),l=Qi(n),c=Ns(n)==="y",u=_S.has(i)?-1:1,d=a&&c?-1:1,f=gr(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof p=="number"&&(h=l==="end"?p*-1:p),c?{x:h*d,y:m*u}:{x:m*u,y:h*d}}const w$=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:r,y:a,placement:i,middlewareData:l}=t,c=await b$(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:a+c.y,data:{...c,placement:i}}}}},N$=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:r}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:b=>{let{x,y:w}=b;return{x,y:w}}},...c}=gr(e,t),u={x:n,y:s},d=await ac(t,c),f=Ns(pr(r)),m=Lx(f);let h=u[m],p=u[f];if(a){const b=m==="y"?"top":"left",x=m==="y"?"bottom":"right",w=h+d[b],v=h-d[x];h=jg(w,h,v)}if(i){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=p+d[b],v=p-d[x];p=jg(w,p,v)}const y=l.fn({...t,[m]:h,[f]:p});return{...y,data:{x:y.x-n,y:y.y-s,enabled:{[m]:a,[f]:i}}}}}},j$=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:r,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=gr(e,t),d={x:n,y:s},f=Ns(r),m=Lx(f);let h=d[m],p=d[f];const y=gr(l,t),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const v=m==="y"?"height":"width",N=a.reference[m]-a.floating[v]+b.mainAxis,j=a.reference[m]+a.reference[v]-b.mainAxis;h<N?h=N:h>j&&(h=j)}if(u){var x,w;const v=m==="y"?"width":"height",N=_S.has(pr(r)),j=a.reference[f]-a.floating[v]+(N&&((x=i.offset)==null?void 0:x[f])||0)+(N?0:b.crossAxis),S=a.reference[f]+a.reference[v]+(N?0:((w=i.offset)==null?void 0:w[f])||0)-(N?b.crossAxis:0);p<j?p=j:p>S&&(p=S)}return{[m]:h,[f]:p}}}},S$=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:r,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=gr(e,t),d=await ac(t,u),f=pr(r),m=Qi(r),h=Ns(r)==="y",{width:p,height:y}=a.floating;let b,x;f==="top"||f==="bottom"?(b=f,x=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,b=m==="end"?"top":"bottom");const w=y-d.top-d.bottom,v=p-d.left-d.right,N=ua(y-d[b],w),j=ua(p-d[x],v),S=!t.middlewareData.shift;let C=N,E=j;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=v),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(C=w),S&&!m){const _=yn(d.left,0),P=yn(d.right,0),O=yn(d.top,0),$=yn(d.bottom,0);h?E=p-2*(_!==0||P!==0?_+P:yn(d.left,d.right)):C=y-2*(O!==0||$!==0?O+$:yn(d.top,d.bottom))}await c({...t,availableWidth:E,availableHeight:C});const k=await i.getDimensions(l.floating);return p!==k.width||y!==k.height?{reset:{rects:!0}}:{}}}};function qf(){return typeof window<"u"}function Ji(e){return AS(e)?(e.nodeName||"").toLowerCase():"#document"}function Nn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $s(e){var t;return(t=(AS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function AS(e){return qf()?e instanceof Node||e instanceof Nn(e).Node:!1}function as(e){return qf()?e instanceof Element||e instanceof Nn(e).Element:!1}function Rs(e){return qf()?e instanceof HTMLElement||e instanceof Nn(e).HTMLElement:!1}function Yv(e){return!qf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Nn(e).ShadowRoot}const C$=new Set(["inline","contents"]);function Ic(e){const{overflow:t,overflowX:n,overflowY:s,display:r}=os(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!C$.has(r)}const k$=new Set(["table","td","th"]);function E$(e){return k$.has(Ji(e))}const _$=[":popover-open",":modal"];function Zf(e){return _$.some(t=>{try{return e.matches(t)}catch{return!1}})}const A$=["transform","translate","scale","rotate","perspective"],M$=["transform","translate","scale","rotate","perspective","filter"],T$=["paint","layout","strict","content"];function Ox(e){const t=Bx(),n=as(e)?os(e):e;return A$.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||M$.some(s=>(n.willChange||"").includes(s))||T$.some(s=>(n.contain||"").includes(s))}function R$(e){let t=da(e);for(;Rs(t)&&!bi(t);){if(Ox(t))return t;if(Zf(t))return null;t=da(t)}return null}function Bx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const D$=new Set(["html","body","#document"]);function bi(e){return D$.has(Ji(e))}function os(e){return Nn(e).getComputedStyle(e)}function Gf(e){return as(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function da(e){if(Ji(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Yv(e)&&e.host||$s(e);return Yv(t)?t.host:t}function MS(e){const t=da(e);return bi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Rs(t)&&Ic(t)?t:MS(t)}function oc(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=MS(e),a=r===((s=e.ownerDocument)==null?void 0:s.body),i=Nn(r);if(a){const l=Cg(i);return t.concat(i,i.visualViewport||[],Ic(r)?r:[],l&&n?oc(l):[])}return t.concat(r,oc(r,[],n))}function Cg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function TS(e){const t=os(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const r=Rs(e),a=r?e.offsetWidth:n,i=r?e.offsetHeight:s,l=_d(n)!==a||_d(s)!==i;return l&&(n=a,s=i),{width:n,height:s,$:l}}function Ix(e){return as(e)?e:e.contextElement}function ni(e){const t=Ix(e);if(!Rs(t))return ks(1);const n=t.getBoundingClientRect(),{width:s,height:r,$:a}=TS(t);let i=(a?_d(n.width):n.width)/s,l=(a?_d(n.height):n.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const z$=ks(0);function RS(e){const t=Nn(e);return!Bx()||!t.visualViewport?z$:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function L$(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Nn(e)?!1:t}function Xa(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=Ix(e);let i=ks(1);t&&(s?as(s)&&(i=ni(s)):i=ni(e));const l=L$(a,n,s)?RS(a):ks(0);let c=(r.left+l.x)/i.x,u=(r.top+l.y)/i.y,d=r.width/i.x,f=r.height/i.y;if(a){const m=Nn(a),h=s&&as(s)?Nn(s):s;let p=m,y=Cg(p);for(;y&&s&&h!==p;){const b=ni(y),x=y.getBoundingClientRect(),w=os(y),v=x.left+(y.clientLeft+parseFloat(w.paddingLeft))*b.x,N=x.top+(y.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=v,u+=N,p=Nn(y),y=Cg(p)}}return Md({width:d,height:f,x:c,y:u})}function Hx(e,t){const n=Gf(e).scrollLeft;return t?t.left+n:Xa($s(e)).left+n}function DS(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=s.left+t.scrollLeft-(n?0:Hx(e,s)),a=s.top+t.scrollTop;return{x:r,y:a}}function $$(e){let{elements:t,rect:n,offsetParent:s,strategy:r}=e;const a=r==="fixed",i=$s(s),l=t?Zf(t.floating):!1;if(s===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=ks(1);const d=ks(0),f=Rs(s);if((f||!f&&!a)&&((Ji(s)!=="body"||Ic(i))&&(c=Gf(s)),Rs(s))){const h=Xa(s);u=ni(s),d.x=h.x+s.clientLeft,d.y=h.y+s.clientTop}const m=i&&!f&&!a?DS(i,c,!0):ks(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function P$(e){return Array.from(e.getClientRects())}function O$(e){const t=$s(e),n=Gf(e),s=e.ownerDocument.body,r=yn(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=yn(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-n.scrollLeft+Hx(e);const l=-n.scrollTop;return os(s).direction==="rtl"&&(i+=yn(t.clientWidth,s.clientWidth)-r),{width:r,height:a,x:i,y:l}}function B$(e,t){const n=Nn(e),s=$s(e),r=n.visualViewport;let a=s.clientWidth,i=s.clientHeight,l=0,c=0;if(r){a=r.width,i=r.height;const u=Bx();(!u||u&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:a,height:i,x:l,y:c}}const I$=new Set(["absolute","fixed"]);function H$(e,t){const n=Xa(e,!0,t==="fixed"),s=n.top+e.clientTop,r=n.left+e.clientLeft,a=Rs(e)?ni(e):ks(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=r*a.x,u=s*a.y;return{width:i,height:l,x:c,y:u}}function Xv(e,t,n){let s;if(t==="viewport")s=B$(e,n);else if(t==="document")s=O$($s(e));else if(as(t))s=H$(t,n);else{const r=RS(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Md(s)}function zS(e,t){const n=da(e);return n===t||!as(n)||bi(n)?!1:os(n).position==="fixed"||zS(n,t)}function U$(e,t){const n=t.get(e);if(n)return n;let s=oc(e,[],!1).filter(l=>as(l)&&Ji(l)!=="body"),r=null;const a=os(e).position==="fixed";let i=a?da(e):e;for(;as(i)&&!bi(i);){const l=os(i),c=Ox(i);!c&&l.position==="fixed"&&(r=null),(a?!c&&!r:!c&&l.position==="static"&&!!r&&I$.has(r.position)||Ic(i)&&!c&&zS(e,i))?s=s.filter(d=>d!==i):r=l,i=da(i)}return t.set(e,s),s}function F$(e){let{element:t,boundary:n,rootBoundary:s,strategy:r}=e;const i=[...n==="clippingAncestors"?Zf(t)?[]:U$(t,this._c):[].concat(n),s],l=i[0],c=i.reduce((u,d)=>{const f=Xv(t,d,r);return u.top=yn(f.top,u.top),u.right=ua(f.right,u.right),u.bottom=ua(f.bottom,u.bottom),u.left=yn(f.left,u.left),u},Xv(t,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function V$(e){const{width:t,height:n}=TS(e);return{width:t,height:n}}function q$(e,t,n){const s=Rs(t),r=$s(t),a=n==="fixed",i=Xa(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=ks(0);function u(){c.x=Hx(r)}if(s||!s&&!a)if((Ji(t)!=="body"||Ic(r))&&(l=Gf(t)),s){const h=Xa(t,!0,a,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else r&&u();a&&!s&&r&&u();const d=r&&!s&&!a?DS(r,l):ks(0),f=i.left+l.scrollLeft-c.x-d.x,m=i.top+l.scrollTop-c.y-d.y;return{x:f,y:m,width:i.width,height:i.height}}function Jm(e){return os(e).position==="static"}function Wv(e,t){if(!Rs(e)||os(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return $s(e)===n&&(n=n.ownerDocument.body),n}function LS(e,t){const n=Nn(e);if(Zf(e))return n;if(!Rs(e)){let r=da(e);for(;r&&!bi(r);){if(as(r)&&!Jm(r))return r;r=da(r)}return n}let s=Wv(e,t);for(;s&&E$(s)&&Jm(s);)s=Wv(s,t);return s&&bi(s)&&Jm(s)&&!Ox(s)?n:s||R$(e)||n}const Z$=async function(e){const t=this.getOffsetParent||LS,n=this.getDimensions,s=await n(e.floating);return{reference:q$(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function G$(e){return os(e).direction==="rtl"}const Y$={convertOffsetParentRelativeRectToViewportRelativeRect:$$,getDocumentElement:$s,getClippingRect:F$,getOffsetParent:LS,getElementRects:Z$,getClientRects:P$,getDimensions:V$,getScale:ni,isElement:as,isRTL:G$};function $S(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function X$(e,t){let n=null,s;const r=$s(e);function a(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:f,width:m,height:h}=u;if(l||t(),!m||!h)return;const p=Su(f),y=Su(r.clientWidth-(d+m)),b=Su(r.clientHeight-(f+h)),x=Su(d),v={rootMargin:-p+"px "+-y+"px "+-b+"px "+-x+"px",threshold:yn(0,ua(1,c))||1};let N=!0;function j(S){const C=S[0].intersectionRatio;if(C!==c){if(!N)return i();C?i(!1,C):s=setTimeout(()=>{i(!1,1e-7)},1e3)}C===1&&!$S(u,e.getBoundingClientRect())&&i(),N=!1}try{n=new IntersectionObserver(j,{...v,root:r.ownerDocument})}catch{n=new IntersectionObserver(j,v)}n.observe(e)}return i(!0),a}function W$(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=Ix(e),d=r||a?[...u?oc(u):[],...oc(t)]:[];d.forEach(x=>{r&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const f=u&&l?X$(u,n):null;let m=-1,h=null;i&&(h=new ResizeObserver(x=>{let[w]=x;w&&w.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var v;(v=h)==null||v.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let p,y=c?Xa(e):null;c&&b();function b(){const x=Xa(e);y&&!$S(y,x)&&n(),y=x,p=requestAnimationFrame(b)}return n(),()=>{var x;d.forEach(w=>{r&&w.removeEventListener("scroll",n),a&&w.removeEventListener("resize",n)}),f==null||f(),(x=h)==null||x.disconnect(),h=null,c&&cancelAnimationFrame(p)}}const K$=w$,Q$=N$,J$=y$,eP=S$,tP=v$,Kv=x$,nP=j$,sP=(e,t,n)=>{const s=new Map,r={platform:Y$,...n},a={...r.platform,_c:s};return p$(e,t,{...r,platform:a})};var rP=typeof document<"u",aP=function(){},id=rP?g.useLayoutEffect:aP;function Td(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Td(e[s],t[s]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,r[s]))return!1;for(s=n;s--!==0;){const a=r[s];if(!(a==="_owner"&&e.$$typeof)&&!Td(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function PS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Qv(e,t){const n=PS(e);return Math.round(t*n)/n}function eh(e){const t=g.useRef(e);return id(()=>{t.current=e}),t}function oP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,h]=g.useState(s);Td(m,s)||h(s);const[p,y]=g.useState(null),[b,x]=g.useState(null),w=g.useCallback(T=>{T!==S.current&&(S.current=T,y(T))},[]),v=g.useCallback(T=>{T!==C.current&&(C.current=T,x(T))},[]),N=a||p,j=i||b,S=g.useRef(null),C=g.useRef(null),E=g.useRef(d),k=c!=null,_=eh(c),P=eh(r),O=eh(u),$=g.useCallback(()=>{if(!S.current||!C.current)return;const T={placement:t,strategy:n,middleware:m};P.current&&(T.platform=P.current),sP(S.current,C.current,T).then(R=>{const B={...R,isPositioned:O.current!==!1};M.current&&!Td(E.current,B)&&(E.current=B,Pf.flushSync(()=>{f(B)}))})},[m,t,n,P,O]);id(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(T=>({...T,isPositioned:!1})))},[u]);const M=g.useRef(!1);id(()=>(M.current=!0,()=>{M.current=!1}),[]),id(()=>{if(N&&(S.current=N),j&&(C.current=j),N&&j){if(_.current)return _.current(N,j,$);$()}},[N,j,$,_,k]);const D=g.useMemo(()=>({reference:S,floating:C,setReference:w,setFloating:v}),[w,v]),A=g.useMemo(()=>({reference:N,floating:j}),[N,j]),z=g.useMemo(()=>{const T={position:n,left:0,top:0};if(!A.floating)return T;const R=Qv(A.floating,d.x),B=Qv(A.floating,d.y);return l?{...T,transform:"translate("+R+"px, "+B+"px)",...PS(A.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:B}},[n,l,A.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:$,refs:D,elements:A,floatingStyles:z}),[d,$,D,A,z])}const iP=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:r}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?Kv({element:s.current,padding:r}).fn(n):{}:s?Kv({element:s,padding:r}).fn(n):{}}}},lP=(e,t)=>({...K$(e),options:[e,t]}),cP=(e,t)=>({...Q$(e),options:[e,t]}),uP=(e,t)=>({...nP(e),options:[e,t]}),dP=(e,t)=>({...J$(e),options:[e,t]}),fP=(e,t)=>({...eP(e),options:[e,t]}),mP=(e,t)=>({...tP(e),options:[e,t]}),hP=(e,t)=>({...iP(e),options:[e,t]});var gP="Arrow",OS=g.forwardRef((e,t)=>{const{children:n,width:s=10,height:r=5,...a}=e;return o.jsx(xe.svg,{...a,ref:t,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});OS.displayName=gP;var pP=OS,Ux="Popper",[BS,el]=un(Ux),[xP,IS]=BS(Ux),HS=e=>{const{__scopePopper:t,children:n}=e,[s,r]=g.useState(null);return o.jsx(xP,{scope:t,anchor:s,onAnchorChange:r,children:n})};HS.displayName=Ux;var US="PopperAnchor",FS=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...r}=e,a=IS(US,n),i=g.useRef(null),l=$e(t,i);return g.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:o.jsx(xe.div,{...r,ref:l})});FS.displayName=US;var Fx="PopperContent",[yP,vP]=BS(Fx),VS=g.forwardRef((e,t)=>{var ee,pe,fe,ve,F,Y;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:h="optimized",onPlaced:p,...y}=e,b=IS(Fx,n),[x,w]=g.useState(null),v=$e(t,Q=>w(Q)),[N,j]=g.useState(null),S=bS(N),C=(S==null?void 0:S.width)??0,E=(S==null?void 0:S.height)??0,k=s+(a!=="center"?"-"+a:""),_=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],O=P.length>0,$={padding:_,boundary:P.filter(wP),altBoundary:O},{refs:M,floatingStyles:D,placement:A,isPositioned:z,middlewareData:T}=oP({strategy:"fixed",placement:k,whileElementsMounted:(...Q)=>W$(...Q,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[lP({mainAxis:r+E,alignmentAxis:i}),c&&cP({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?uP():void 0,...$}),c&&dP({...$}),fP({...$,apply:({elements:Q,rects:W,availableWidth:se,availableHeight:ye})=>{const{width:ue,height:ne}=W.reference,Re=Q.floating.style;Re.setProperty("--radix-popper-available-width",`${se}px`),Re.setProperty("--radix-popper-available-height",`${ye}px`),Re.setProperty("--radix-popper-anchor-width",`${ue}px`),Re.setProperty("--radix-popper-anchor-height",`${ne}px`)}}),N&&hP({element:N,padding:l}),NP({arrowWidth:C,arrowHeight:E}),m&&mP({strategy:"referenceHidden",...$})]}),[R,B]=GS(A),U=Ht(p);Ts(()=>{z&&(U==null||U())},[z,U]);const I=(ee=T.arrow)==null?void 0:ee.x,q=(pe=T.arrow)==null?void 0:pe.y,G=((fe=T.arrow)==null?void 0:fe.centerOffset)!==0,[J,ie]=g.useState();return Ts(()=>{x&&ie(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:z?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(ve=T.transformOrigin)==null?void 0:ve.x,(F=T.transformOrigin)==null?void 0:F.y].join(" "),...((Y=T.hide)==null?void 0:Y.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(yP,{scope:n,placedSide:R,onArrowChange:j,arrowX:I,arrowY:q,shouldHideArrow:G,children:o.jsx(xe.div,{"data-side":R,"data-align":B,...y,ref:v,style:{...y.style,animation:z?void 0:"none"}})})})});VS.displayName=Fx;var qS="PopperArrow",bP={top:"bottom",right:"left",bottom:"top",left:"right"},ZS=g.forwardRef(function(t,n){const{__scopePopper:s,...r}=t,a=vP(qS,s),i=bP[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(pP,{...r,ref:n,style:{...r.style,display:"block"}})})});ZS.displayName=qS;function wP(e){return e!==null}var NP=e=>({name:"transformOrigin",options:e,fn(t){var b,x,w;const{placement:n,rects:s,middlewareData:r}=t,i=((b=r.arrow)==null?void 0:b.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,d]=GS(n),f={start:"0%",center:"50%",end:"100%"}[d],m=(((x=r.arrow)==null?void 0:x.x)??0)+l/2,h=(((w=r.arrow)==null?void 0:w.y)??0)+c/2;let p="",y="";return u==="bottom"?(p=i?f:`${m}px`,y=`${-c}px`):u==="top"?(p=i?f:`${m}px`,y=`${s.floating.height+c}px`):u==="right"?(p=`${-c}px`,y=i?f:`${h}px`):u==="left"&&(p=`${s.floating.width+c}px`,y=i?f:`${h}px`),{data:{x:p,y}}}});function GS(e){const[t,n="center"]=e.split("-");return[t,n]}var YS=HS,Vx=FS,qx=VS,Zx=ZS,kg=["Enter"," "],jP=["ArrowDown","PageUp","Home"],XS=["ArrowUp","PageDown","End"],SP=[...jP,...XS],CP={ltr:[...kg,"ArrowRight"],rtl:[...kg,"ArrowLeft"]},kP={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Hc="Menu",[ic,EP,_P]=Tx(Hc),[uo,WS]=un(Hc,[_P,el,Xi]),Yf=el(),KS=Xi(),[AP,fo]=uo(Hc),[MP,Uc]=uo(Hc),QS=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:r,onOpenChange:a,modal:i=!0}=e,l=Yf(t),[c,u]=g.useState(null),d=g.useRef(!1),f=Ht(a),m=Yi(r);return g.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),o.jsx(YS,{...l,children:o.jsx(AP,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:u,children:o.jsx(MP,{scope:t,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:i,children:s})})})};QS.displayName=Hc;var TP="MenuAnchor",Gx=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,r=Yf(n);return o.jsx(Vx,{...r,...s,ref:t})});Gx.displayName=TP;var Yx="MenuPortal",[RP,JS]=uo(Yx,{forceMount:void 0}),e2=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:r}=e,a=fo(Yx,t);return o.jsx(RP,{scope:t,forceMount:n,children:o.jsx(Zt,{present:n||a.open,children:o.jsx(yx,{asChild:!0,container:r,children:s})})})};e2.displayName=Yx;var Fn="MenuContent",[DP,Xx]=uo(Fn),t2=g.forwardRef((e,t)=>{const n=JS(Fn,e.__scopeMenu),{forceMount:s=n.forceMount,...r}=e,a=fo(Fn,e.__scopeMenu),i=Uc(Fn,e.__scopeMenu);return o.jsx(ic.Provider,{scope:e.__scopeMenu,children:o.jsx(Zt,{present:s||a.open,children:o.jsx(ic.Slot,{scope:e.__scopeMenu,children:i.modal?o.jsx(zP,{...r,ref:t}):o.jsx(LP,{...r,ref:t})})})})}),zP=g.forwardRef((e,t)=>{const n=fo(Fn,e.__scopeMenu),s=g.useRef(null),r=$e(t,s);return g.useEffect(()=>{const a=s.current;if(a)return _j(a)},[]),o.jsx(Wx,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:te(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),LP=g.forwardRef((e,t)=>{const n=fo(Fn,e.__scopeMenu);return o.jsx(Wx,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),$P=vi("MenuContent.ScrollLock"),Wx=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:h,disableOutsideScroll:p,...y}=e,b=fo(Fn,n),x=Uc(Fn,n),w=Yf(n),v=KS(n),N=EP(n),[j,S]=g.useState(null),C=g.useRef(null),E=$e(t,C,b.onContentChange),k=g.useRef(0),_=g.useRef(""),P=g.useRef(0),O=g.useRef(null),$=g.useRef("right"),M=g.useRef(0),D=p?vx:g.Fragment,A=p?{as:$P,allowPinchZoom:!0}:void 0,z=R=>{var ee,pe;const B=_.current+R,U=N().filter(fe=>!fe.disabled),I=document.activeElement,q=(ee=U.find(fe=>fe.ref.current===I))==null?void 0:ee.textValue,G=U.map(fe=>fe.textValue),J=YP(G,B,q),ie=(pe=U.find(fe=>fe.textValue===J))==null?void 0:pe.ref.current;(function fe(ve){_.current=ve,window.clearTimeout(k.current),ve!==""&&(k.current=window.setTimeout(()=>fe(""),1e3))})(B),ie&&setTimeout(()=>ie.focus())};g.useEffect(()=>()=>window.clearTimeout(k.current),[]),vj();const T=g.useCallback(R=>{var U,I;return $.current===((U=O.current)==null?void 0:U.side)&&WP(R,(I=O.current)==null?void 0:I.area)},[]);return o.jsx(DP,{scope:n,searchRef:_,onItemEnter:g.useCallback(R=>{T(R)&&R.preventDefault()},[T]),onItemLeave:g.useCallback(R=>{var B;T(R)||((B=C.current)==null||B.focus(),S(null))},[T]),onTriggerLeave:g.useCallback(R=>{T(R)&&R.preventDefault()},[T]),pointerGraceTimerRef:P,onPointerGraceIntentChange:g.useCallback(R=>{O.current=R},[]),children:o.jsx(D,{...A,children:o.jsx(xx,{asChild:!0,trapped:r,onMountAutoFocus:te(a,R=>{var B;R.preventDefault(),(B=C.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:o.jsx(Oc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:h,children:o.jsx(Rx,{asChild:!0,...v,dir:x.dir,orientation:"vertical",loop:s,currentTabStopId:j,onCurrentTabStopIdChange:S,onEntryFocus:te(c,R=>{x.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(qx,{role:"menu","aria-orientation":"vertical","data-state":x2(b.open),"data-radix-menu-content":"",dir:x.dir,...w,...y,ref:E,style:{outline:"none",...y.style},onKeyDown:te(y.onKeyDown,R=>{const U=R.target.closest("[data-radix-menu-content]")===R.currentTarget,I=R.ctrlKey||R.altKey||R.metaKey,q=R.key.length===1;U&&(R.key==="Tab"&&R.preventDefault(),!I&&q&&z(R.key));const G=C.current;if(R.target!==G||!SP.includes(R.key))return;R.preventDefault();const ie=N().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);XS.includes(R.key)&&ie.reverse(),ZP(ie)}),onBlur:te(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(k.current),_.current="")}),onPointerMove:te(e.onPointerMove,lc(R=>{const B=R.target,U=M.current!==R.clientX;if(R.currentTarget.contains(B)&&U){const I=R.clientX>M.current?"right":"left";$.current=I,M.current=R.clientX}}))})})})})})})});t2.displayName=Fn;var PP="MenuGroup",Kx=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return o.jsx(xe.div,{role:"group",...s,ref:t})});Kx.displayName=PP;var OP="MenuLabel",n2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return o.jsx(xe.div,{...s,ref:t})});n2.displayName=OP;var Rd="MenuItem",Jv="menu.itemSelect",Xf=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...r}=e,a=g.useRef(null),i=Uc(Rd,e.__scopeMenu),l=Xx(Rd,e.__scopeMenu),c=$e(t,a),u=g.useRef(!1),d=()=>{const f=a.current;if(!n&&f){const m=new CustomEvent(Jv,{bubbles:!0,cancelable:!0});f.addEventListener(Jv,h=>s==null?void 0:s(h),{once:!0}),gj(f,m),m.defaultPrevented?u.current=!1:i.onClose()}};return o.jsx(s2,{...r,ref:c,disabled:n,onClick:te(e.onClick,d),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),u.current=!0},onPointerUp:te(e.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:te(e.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||kg.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Xf.displayName=Rd;var s2=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...a}=e,i=Xx(Rd,n),l=KS(n),c=g.useRef(null),u=$e(t,c),[d,f]=g.useState(!1),[m,h]=g.useState("");return g.useEffect(()=>{const p=c.current;p&&h((p.textContent??"").trim())},[a.children]),o.jsx(ic.ItemSlot,{scope:n,disabled:s,textValue:r??m,children:o.jsx(Dx,{asChild:!0,...l,focusable:!s,children:o.jsx(xe.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:u,onPointerMove:te(e.onPointerMove,lc(p=>{s?i.onItemLeave(p):(i.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:te(e.onPointerLeave,lc(p=>i.onItemLeave(p))),onFocus:te(e.onFocus,()=>f(!0)),onBlur:te(e.onBlur,()=>f(!1))})})})}),BP="MenuCheckboxItem",r2=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...r}=e;return o.jsx(c2,{scope:e.__scopeMenu,checked:n,children:o.jsx(Xf,{role:"menuitemcheckbox","aria-checked":Dd(n)?"mixed":n,...r,ref:t,"data-state":Jx(n),onSelect:te(r.onSelect,()=>s==null?void 0:s(Dd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});r2.displayName=BP;var a2="MenuRadioGroup",[IP,HP]=uo(a2,{value:void 0,onValueChange:()=>{}}),o2=g.forwardRef((e,t)=>{const{value:n,onValueChange:s,...r}=e,a=Ht(s);return o.jsx(IP,{scope:e.__scopeMenu,value:n,onValueChange:a,children:o.jsx(Kx,{...r,ref:t})})});o2.displayName=a2;var i2="MenuRadioItem",l2=g.forwardRef((e,t)=>{const{value:n,...s}=e,r=HP(i2,e.__scopeMenu),a=n===r.value;return o.jsx(c2,{scope:e.__scopeMenu,checked:a,children:o.jsx(Xf,{role:"menuitemradio","aria-checked":a,...s,ref:t,"data-state":Jx(a),onSelect:te(s.onSelect,()=>{var i;return(i=r.onValueChange)==null?void 0:i.call(r,n)},{checkForDefaultPrevented:!1})})})});l2.displayName=i2;var Qx="MenuItemIndicator",[c2,UP]=uo(Qx,{checked:!1}),u2=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...r}=e,a=UP(Qx,n);return o.jsx(Zt,{present:s||Dd(a.checked)||a.checked===!0,children:o.jsx(xe.span,{...r,ref:t,"data-state":Jx(a.checked)})})});u2.displayName=Qx;var FP="MenuSeparator",d2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return o.jsx(xe.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});d2.displayName=FP;var VP="MenuArrow",f2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,r=Yf(n);return o.jsx(Zx,{...r,...s,ref:t})});f2.displayName=VP;var qP="MenuSub",[See,m2]=uo(qP),_l="MenuSubTrigger",h2=g.forwardRef((e,t)=>{const n=fo(_l,e.__scopeMenu),s=Uc(_l,e.__scopeMenu),r=m2(_l,e.__scopeMenu),a=Xx(_l,e.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},d=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>d,[d]),g.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(Gx,{asChild:!0,...u,children:o.jsx(s2,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":x2(n.open),...e,ref:Of(t,r.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:te(e.onPointerMove,lc(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:te(e.onPointerLeave,lc(f=>{var h,p;d();const m=(h=n.content)==null?void 0:h.getBoundingClientRect();if(m){const y=(p=n.content)==null?void 0:p.dataset.side,b=y==="right",x=b?-5:5,w=m[b?"left":"right"],v=m[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:w,y:m.top},{x:v,y:m.top},{x:v,y:m.bottom},{x:w,y:m.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:te(e.onKeyDown,f=>{var h;const m=a.searchRef.current!=="";e.disabled||m&&f.key===" "||CP[s.dir].includes(f.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),f.preventDefault())})})})});h2.displayName=_l;var g2="MenuSubContent",p2=g.forwardRef((e,t)=>{const n=JS(Fn,e.__scopeMenu),{forceMount:s=n.forceMount,...r}=e,a=fo(Fn,e.__scopeMenu),i=Uc(Fn,e.__scopeMenu),l=m2(g2,e.__scopeMenu),c=g.useRef(null),u=$e(t,c);return o.jsx(ic.Provider,{scope:e.__scopeMenu,children:o.jsx(Zt,{present:s||a.open,children:o.jsx(ic.Slot,{scope:e.__scopeMenu,children:o.jsx(Wx,{id:l.contentId,"aria-labelledby":l.triggerId,...r,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;i.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:te(e.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:te(e.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:te(e.onKeyDown,d=>{var h;const f=d.currentTarget.contains(d.target),m=kP[i.dir].includes(d.key);f&&m&&(a.onOpenChange(!1),(h=l.trigger)==null||h.focus(),d.preventDefault())})})})})})});p2.displayName=g2;function x2(e){return e?"open":"closed"}function Dd(e){return e==="indeterminate"}function Jx(e){return Dd(e)?"indeterminate":e?"checked":"unchecked"}function ZP(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function GP(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function YP(e,t,n){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=GP(e,Math.max(a,0));r.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function XP(e,t){const{x:n,y:s}=e;let r=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,d=l.y,f=c.x,m=c.y;d>s!=m>s&&n<(f-u)*(s-d)/(m-d)+u&&(r=!r)}return r}function WP(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return XP(n,t)}function lc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var KP=QS,QP=Gx,JP=e2,eO=t2,tO=Kx,nO=n2,sO=Xf,rO=r2,aO=o2,oO=l2,iO=u2,lO=d2,cO=f2,uO=h2,dO=p2,Wf="DropdownMenu",[fO,Cee]=un(Wf,[WS]),Jt=WS(),[mO,y2]=fO(Wf),v2=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:r,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=Jt(t),u=g.useRef(null),[d,f]=Yn({prop:r,defaultProp:a??!1,onChange:i,caller:Wf});return o.jsx(mO,{scope:t,triggerId:ur(),triggerRef:u,contentId:ur(),open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),modal:l,children:o.jsx(KP,{...c,open:d,onOpenChange:f,dir:s,modal:l,children:n})})};v2.displayName=Wf;var b2="DropdownMenuTrigger",w2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=e,a=y2(b2,n),i=Jt(n);return o.jsx(QP,{asChild:!0,...i,children:o.jsx(xe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Of(t,a.triggerRef),onPointerDown:te(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:te(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});w2.displayName=b2;var hO="DropdownMenuPortal",N2=e=>{const{__scopeDropdownMenu:t,...n}=e,s=Jt(t);return o.jsx(JP,{...s,...n})};N2.displayName=hO;var j2="DropdownMenuContent",S2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=y2(j2,n),a=Jt(n),i=g.useRef(!1);return o.jsx(eO,{id:r.contentId,"aria-labelledby":r.triggerId,...a,...s,ref:t,onCloseAutoFocus:te(e.onCloseAutoFocus,l=>{var c;i.current||(c=r.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:te(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!r.modal||d)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});S2.displayName=j2;var gO="DropdownMenuGroup",pO=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(tO,{...r,...s,ref:t})});pO.displayName=gO;var xO="DropdownMenuLabel",C2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(nO,{...r,...s,ref:t})});C2.displayName=xO;var yO="DropdownMenuItem",k2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(sO,{...r,...s,ref:t})});k2.displayName=yO;var vO="DropdownMenuCheckboxItem",E2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(rO,{...r,...s,ref:t})});E2.displayName=vO;var bO="DropdownMenuRadioGroup",wO=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(aO,{...r,...s,ref:t})});wO.displayName=bO;var NO="DropdownMenuRadioItem",_2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(oO,{...r,...s,ref:t})});_2.displayName=NO;var jO="DropdownMenuItemIndicator",A2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(iO,{...r,...s,ref:t})});A2.displayName=jO;var SO="DropdownMenuSeparator",M2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(lO,{...r,...s,ref:t})});M2.displayName=SO;var CO="DropdownMenuArrow",kO=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(cO,{...r,...s,ref:t})});kO.displayName=CO;var EO="DropdownMenuSubTrigger",T2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(uO,{...r,...s,ref:t})});T2.displayName=EO;var _O="DropdownMenuSubContent",R2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Jt(n);return o.jsx(dO,{...r,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});R2.displayName=_O;var AO=v2,MO=w2,TO=N2,D2=S2,z2=C2,L2=k2,$2=E2,P2=_2,O2=A2,B2=M2,I2=T2,H2=R2;const e0=AO,t0=MO,RO=g.forwardRef(({className:e,inset:t,children:n,...s},r)=>o.jsxs(I2,{ref:r,className:H("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[n,o.jsx(Dc,{className:"ml-auto h-4 w-4"})]}));RO.displayName=I2.displayName;const DO=g.forwardRef(({className:e,...t},n)=>o.jsx(H2,{ref:n,className:H("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Dt.DROPDOWN},...t}));DO.displayName=H2.displayName;const Kf=g.forwardRef(({className:e,sideOffset:t=4,...n},s)=>o.jsx(TO,{children:o.jsx(D2,{ref:s,sideOffset:t,className:H("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Dt.DROPDOWN},...n})}));Kf.displayName=D2.displayName;const dr=g.forwardRef(({className:e,inset:t,...n},s)=>o.jsx(L2,{ref:s,className:H("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));dr.displayName=L2.displayName;const zO=g.forwardRef(({className:e,children:t,checked:n,...s},r)=>o.jsxs($2,{ref:r,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(O2,{children:o.jsx(ug,{className:"h-4 w-4"})})}),t]}));zO.displayName=$2.displayName;const LO=g.forwardRef(({className:e,children:t,...n},s)=>o.jsxs(P2,{ref:s,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(O2,{children:o.jsx(Df,{className:"h-2 w-2 fill-current"})})}),t]}));LO.displayName=P2.displayName;const $O=g.forwardRef(({className:e,inset:t,...n},s)=>o.jsx(z2,{ref:s,className:H("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));$O.displayName=z2.displayName;const PO=g.forwardRef(({className:e,...t},n)=>o.jsx(B2,{ref:n,className:H("-mx-1 my-1 h-px bg-muted",e),...t}));PO.displayName=B2.displayName;function OO(e,[t,n]){return Math.min(n,Math.max(t,e))}function BO(e,t){return g.useReducer((n,s)=>t[n][s]??n,e)}var n0="ScrollArea",[U2,kee]=un(n0),[IO,Xn]=U2(n0),F2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:r,scrollHideDelay:a=600,...i}=e,[l,c]=g.useState(null),[u,d]=g.useState(null),[f,m]=g.useState(null),[h,p]=g.useState(null),[y,b]=g.useState(null),[x,w]=g.useState(0),[v,N]=g.useState(0),[j,S]=g.useState(!1),[C,E]=g.useState(!1),k=$e(t,P=>c(P)),_=Yi(r);return o.jsx(IO,{scope:n,type:s,dir:_,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:j,onScrollbarXEnabledChange:S,scrollbarY:y,onScrollbarYChange:b,scrollbarYEnabled:C,onScrollbarYEnabledChange:E,onCornerWidthChange:w,onCornerHeightChange:N,children:o.jsx(xe.div,{dir:_,...i,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});F2.displayName=n0;var V2="ScrollAreaViewport",q2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:r,...a}=e,i=Xn(V2,n),l=g.useRef(null),c=$e(t,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(xe.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});q2.displayName=V2;var Ps="ScrollAreaScrollbar",s0=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Xn(Ps,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=r,l=e.orientation==="horizontal";return g.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),r.type==="hover"?o.jsx(HO,{...s,ref:t,forceMount:n}):r.type==="scroll"?o.jsx(UO,{...s,ref:t,forceMount:n}):r.type==="auto"?o.jsx(Z2,{...s,ref:t,forceMount:n}):r.type==="always"?o.jsx(r0,{...s,ref:t}):null});s0.displayName=Ps;var HO=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Xn(Ps,e.__scopeScrollArea),[a,i]=g.useState(!1);return g.useEffect(()=>{const l=r.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[r.scrollArea,r.scrollHideDelay]),o.jsx(Zt,{present:n||a,children:o.jsx(Z2,{"data-state":a?"visible":"hidden",...s,ref:t})})}),UO=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Xn(Ps,e.__scopeScrollArea),a=e.orientation==="horizontal",i=Jf(()=>c("SCROLL_END"),100),[l,c]=BO("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,r.scrollHideDelay,c]),g.useEffect(()=>{const u=r.viewport,d=a?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const h=u[d];f!==h&&(c("SCROLL"),i()),f=h};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[r.viewport,a,c,i]),o.jsx(Zt,{present:n||l!=="hidden",children:o.jsx(r0,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:te(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:te(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Z2=g.forwardRef((e,t)=>{const n=Xn(Ps,e.__scopeScrollArea),{forceMount:s,...r}=e,[a,i]=g.useState(!1),l=e.orientation==="horizontal",c=Jf(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:d)}},10);return wi(n.viewport,c),wi(n.content,c),o.jsx(Zt,{present:s||a,children:o.jsx(r0,{"data-state":a?"visible":"hidden",...r,ref:t})})}),r0=g.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,r=Xn(Ps,e.__scopeScrollArea),a=g.useRef(null),i=g.useRef(0),[l,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=K2(l.viewport,l.content),d={...s,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function f(m,h){return YO(m,i.current,l,h)}return n==="horizontal"?o.jsx(FO,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&a.current){const m=r.viewport.scrollLeft,h=eb(m,l,r.dir);a.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=f(m,r.dir))}}):n==="vertical"?o.jsx(VO,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&a.current){const m=r.viewport.scrollTop,h=eb(m,l);a.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=f(m))}}):null}),FO=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,a=Xn(Ps,e.__scopeScrollArea),[i,l]=g.useState(),c=g.useRef(null),u=$e(t,c,a.onScrollbarXChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Y2,{"data-orientation":"horizontal",...r,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Qf(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),J2(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ld(i.paddingLeft),paddingEnd:Ld(i.paddingRight)}})}})}),VO=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,a=Xn(Ps,e.__scopeScrollArea),[i,l]=g.useState(),c=g.useRef(null),u=$e(t,c,a.onScrollbarYChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Y2,{"data-orientation":"vertical",...r,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Qf(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),J2(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ld(i.paddingTop),paddingEnd:Ld(i.paddingBottom)}})}})}),[qO,G2]=U2(Ps),Y2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:r,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=e,h=Xn(Ps,n),[p,y]=g.useState(null),b=$e(t,k=>y(k)),x=g.useRef(null),w=g.useRef(""),v=h.viewport,N=s.content-s.viewport,j=Ht(d),S=Ht(c),C=Jf(f,10);function E(k){if(x.current){const _=k.clientX-x.current.left,P=k.clientY-x.current.top;u({x:_,y:P})}}return g.useEffect(()=>{const k=_=>{const P=_.target;(p==null?void 0:p.contains(P))&&j(_,N)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[v,p,N,j]),g.useEffect(S,[s,S]),wi(p,C),wi(h.content,C),o.jsx(qO,{scope:n,scrollbar:p,hasThumb:r,onThumbChange:Ht(a),onThumbPointerUp:Ht(i),onThumbPositionChange:S,onThumbPointerDown:Ht(l),children:o.jsx(xe.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:te(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),x.current=p.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),E(k))}),onPointerMove:te(e.onPointerMove,E),onPointerUp:te(e.onPointerUp,k=>{const _=k.target;_.hasPointerCapture(k.pointerId)&&_.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=w.current,h.viewport&&(h.viewport.style.scrollBehavior=""),x.current=null})})})}),zd="ScrollAreaThumb",X2=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=G2(zd,e.__scopeScrollArea);return o.jsx(Zt,{present:n||r.hasThumb,children:o.jsx(ZO,{ref:t,...s})})}),ZO=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...r}=e,a=Xn(zd,n),i=G2(zd,n),{onThumbPositionChange:l}=i,c=$e(t,f=>i.onThumbChange(f)),u=g.useRef(void 0),d=Jf(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const f=a.viewport;if(f){const m=()=>{if(d(),!u.current){const h=XO(f,l);u.current=h,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[a.viewport,d,l]),o.jsx(xe.div,{"data-state":i.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:te(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,y=f.clientY-h.top;i.onThumbPointerDown({x:p,y})}),onPointerUp:te(e.onPointerUp,i.onThumbPointerUp)})});X2.displayName=zd;var a0="ScrollAreaCorner",W2=g.forwardRef((e,t)=>{const n=Xn(a0,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?o.jsx(GO,{...e,ref:t}):null});W2.displayName=a0;var GO=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,r=Xn(a0,n),[a,i]=g.useState(0),[l,c]=g.useState(0),u=!!(a&&l);return wi(r.scrollbarX,()=>{var f;const d=((f=r.scrollbarX)==null?void 0:f.offsetHeight)||0;r.onCornerHeightChange(d),c(d)}),wi(r.scrollbarY,()=>{var f;const d=((f=r.scrollbarY)==null?void 0:f.offsetWidth)||0;r.onCornerWidthChange(d),i(d)}),u?o.jsx(xe.div,{...s,ref:t,style:{width:a,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ld(e){return e?parseInt(e,10):0}function K2(e,t){const n=e/t;return isNaN(n)?0:n}function Qf(e){const t=K2(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function YO(e,t,n,s="ltr"){const r=Qf(n),a=r/2,i=t||a,l=r-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=s==="ltr"?[0,d]:[d*-1,0];return Q2([c,u],f)(e)}function eb(e,t,n="ltr"){const s=Qf(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-r,i=t.content-t.viewport,l=a-s,c=n==="ltr"?[0,i]:[i*-1,0],u=OO(e,c);return Q2([0,i],[0,l])(u)}function Q2(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function J2(e,t){return e>0&&e<t}var XO=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function r(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function Jf(e,t){const n=Ht(e),s=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(s.current),[]),g.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function wi(e,t){const n=Ht(t);Ts(()=>{let s=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(s),r.unobserve(e)}}},[e,n])}var eC=F2,WO=q2,KO=W2;const Ni=g.forwardRef(({className:e,children:t,...n},s)=>o.jsxs(eC,{ref:s,className:H("relative overflow-hidden",e),...n,children:[o.jsx(WO,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(tC,{}),o.jsx(KO,{})]}));Ni.displayName=eC.displayName;const tC=g.forwardRef(({className:e,orientation:t="vertical",...n},s)=>o.jsx(s0,{ref:s,orientation:t,className:H("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(X2,{className:"relative flex-1 rounded-full bg-border"})}));tC.displayName=s0.displayName;function QO({items:e,viewMode:t,onItemSelect:n,selectedItem:s,renderItemCard:r,className:a}){return o.jsxs("div",{className:`space-y-4 ${a}`,children:[t==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(i=>o.jsx("div",{onClick:()=>n(i),className:"cursor-pointer transition-transform hover:scale-[1.02] relative",children:r(i,(s==null?void 0:s.id)===i.id)},i.id))}):o.jsx(Ni,{className:"h-[calc(100vh-300px)]",children:o.jsx("div",{className:"space-y-1 pr-4",children:e.map(i=>o.jsx("div",{onClick:()=>n(i),className:"cursor-pointer transition-colors hover:bg-muted/50 rounded-lg",children:r(i,(s==null?void 0:s.id)===i.id)},i.id))})}),e.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-muted-foreground",children:"No items found matching your criteria."})})]})}function JO({categories:e,onSelect:t,className:n=""}){return o.jsx("div",{className:`flex flex-wrap gap-4 justify-start ${n}`,children:e.map(s=>o.jsx("div",{className:"flex-1 min-w-[180px]",children:o.jsx(La,{categories:[s],onSelect:t,placeholder:s.placeholder,className:"w-full"})},s.id))})}function e6({tags:e,onRemove:t,className:n=""}){return e.length===0?null:o.jsx("div",{className:`flex flex-wrap gap-2 ${n}`,children:e.map(s=>o.jsxs(X,{variant:"secondary",className:"flex items-center gap-1 px-3 py-1 text-sm",children:[o.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.category,":"]}),o.jsx("span",{children:s.label}),o.jsx("button",{onClick:()=>t(s.id),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:o.jsx(qt,{className:"h-3 w-3"})})]},s.id))})}function nC({categories:e,onSelect:t,onCustomSearch:n,placeholder:s="Search by name, description, or abilities...",className:r=""}){const[a,i]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState(""),[f,m]=g.useState(-1),h=g.useRef(null),p=g.useRef(null),y=e.length===1?e[0]:null;g.useEffect(()=>{const _=P=>{h.current&&!h.current.contains(P.target)&&(i(!1),c(null),m(-1))};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const b=l||y?(l||y).options.filter(_=>_.label&&typeof _.label=="string"&&_.label.toLowerCase().includes(u.toLowerCase())||_.description&&typeof _.description=="string"&&_.description.toLowerCase().includes(u.toLowerCase())):e.flatMap(_=>_.options.filter(P=>P.label&&typeof P.label=="string"&&P.label.toLowerCase().includes(u.toLowerCase())||P.description&&typeof P.description=="string"&&P.description.toLowerCase().includes(u.toLowerCase()))),x=_=>{d(_),i(!0),m(-1)},w=_=>{var P;c(_),d(""),(P=p.current)==null||P.focus()},v=_=>{t(_),d(""),c(null),i(!1),m(-1)},N=()=>{u.trim()&&(n(u.trim()),d(""),c(null),i(!1),m(-1))},j=_=>{_.key==="ArrowDown"?(_.preventDefault(),m(P=>Math.min(P+1,b.length-1))):_.key==="ArrowUp"?(_.preventDefault(),m(P=>Math.max(P-1,-1))):_.key==="Enter"?(_.preventDefault(),f>=0&&b[f]?v(b[f]):u.trim()&&N()):_.key==="Escape"&&(i(!1),c(null),m(-1))},S=()=>{i(!0)},C=l||y,E=!y&&!l,k=u.trim()&&!b.some(_=>_.label&&typeof _.label=="string"&&_.label.toLowerCase()===u.toLowerCase());return o.jsxs("div",{ref:h,className:`relative ${r}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx(yi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(Cs,{ref:p,type:"text",placeholder:C?C.placeholder:s,value:u,onChange:_=>x(_.target.value),onFocus:S,onKeyDown:j,className:"pl-10 pr-20"}),k&&o.jsx(K,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:N,title:"Add custom search term",children:o.jsx(Qr,{className:"h-4 w-4"})}),o.jsx(K,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>i(!a),children:o.jsx(Vn,{className:`h-4 w-4 transition-transform ${a?"rotate-180":""}`})})]}),a&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto",style:{zIndex:Dt.AUTOCOMPLETE+10},children:[E&&o.jsxs("div",{className:"p-2 border-b border-border",children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(_=>o.jsxs("button",{onClick:()=>w(_),className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center justify-between",children:[o.jsx("span",{children:_.name}),o.jsx(Vn,{className:"h-4 w-4"})]},_.id))]}),k&&o.jsx("div",{className:"p-2 border-b border-border",children:o.jsxs("button",{onClick:N,className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center gap-2",children:[o.jsx(Qr,{className:"h-4 w-4 text-primary"}),o.jsxs("span",{className:"font-medium",children:['Search for "',u,'"']}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"(Custom search)"})]})}),o.jsx("div",{className:"p-2",children:b.length===0&&!k?o.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):b.map((_,P)=>o.jsxs("button",{onClick:()=>v(_),className:`w-full text-left px-2 py-2 rounded text-sm ${P===f?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[o.jsx("div",{className:"font-medium",children:_.label}),_.description&&o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:_.description})]},_.id))})]})]})}function xa({categories:e,onSelect:t,onCustomSearch:n,className:s=""}){const r=e.find(i=>i.id==="fuzzy-search"||i.id==="keywords"),a=e.filter(i=>i.id!=="fuzzy-search"&&i.id!=="keywords");return o.jsxs("div",{className:`flex flex-wrap gap-4 justify-start ${s}`,children:[r&&o.jsx("div",{className:"flex-1 min-w-[300px]",children:o.jsx(nC,{categories:[r],onSelect:t,onCustomSearch:n,placeholder:r.placeholder,className:"w-full"})}),a.map(i=>o.jsx("div",{className:"flex-shrink-0 min-w-[200px] max-w-[300px]",children:o.jsx(La,{categories:[i],onSelect:t,placeholder:i.placeholder,className:"w-full"})},i.id))]})}function t6({children:e,className:t=""}){return o.jsx("div",{className:`grid grid-cols-1 lg:grid-cols-6 gap-6 ${t}`,children:e})}function n6({children:e,className:t=""}){return o.jsx("div",{className:`lg:col-span-5 ${t}`,children:e})}function s6({children:e,className:t=""}){return o.jsx("div",{className:`lg:col-span-1 ${t}`,children:o.jsx("div",{className:"sticky top-6",style:{zIndex:Dt.STICKY},children:e})})}function r6({title:e="Select an Item",description:t="Choose an item from the list to view its details"}){return o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 text-center",children:[o.jsx(za,{className:"text-lg font-semibold mb-2",children:e}),o.jsx(Xe,{className:"text-muted-foreground",children:t})]})}function a6({searchCategories:e,selectedTags:t,viewMode:n="grid",onTagSelect:s,onTagRemove:r,onViewModeChange:a,children:i,className:l=""}){return o.jsxs("div",{className:`mb-8 space-y-4 ${l}`,children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(JO,{categories:e,onSelect:s,className:"w-full"})}),a&&o.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[o.jsx(K,{variant:n==="grid"?"default":"ghost",size:"sm",onClick:()=>a("grid"),className:"h-8 px-3",children:o.jsx(Fi,{className:"h-4 w-4"})}),o.jsx(K,{variant:n==="list"?"default":"ghost",size:"sm",onClick:()=>a("list"),className:"h-8 px-3",children:o.jsx(oo,{className:"h-4 w-4"})})]})]}),o.jsx(e6,{tags:t,onRemove:r,className:"justify-start"}),i&&o.jsx("div",{className:"pt-4",children:i})]})}const mo=Ls((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(is("data/birthsigns.json"));if(!s.ok)throw new Error(`Failed to fetch birthsigns data: ${s.status}`);const a=(await s.json()).map(i=>{var l,c;return{...i,id:i.edid||i.name.toLowerCase().replace(/\s+/g,"-"),tags:[i.group,...((l=i.powers)==null?void 0:l.map(u=>u.name))||[],...((c=i.stat_modifications)==null?void 0:c.map(u=>u.stat))||[]].filter(u=>!!u)}});e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load birthsigns",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),o6=Object.freeze(Object.defineProperty({__proto__:null,useBirthsignsStore:mo},Symbol.toStringTag,{value:"Module"}));function i6(e){var s;const t=[],n=((s=e.description)==null?void 0:s.toLowerCase())||"";return(n.includes("damage")||n.includes("weapon"))&&t.push("Combat"),(n.includes("armor")||n.includes("defense"))&&t.push("Defensive"),(n.includes("magicka")||n.includes("spell")||n.includes("magic"))&&t.push("Magic"),(n.includes("regeneration")||n.includes("health")||n.includes("stamina"))&&t.push("Utility"),(n.includes("detect")||n.includes("stealth"))&&t.push("Stealth"),(n.includes("cost")||n.includes("less"))&&t.push("Cost Reduction"),(n.includes("increase")||n.includes("more"))&&t.push("Enhancement"),n.includes("resistance")&&t.push("Resistance"),[...new Set(t)]}const tl=Ls((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(is("data/subclasses.json"));if(!s.ok)throw new Error(`Failed to fetch destiny nodes data: ${s.status}`);const a=(await s.json()).map((i,l)=>({...i,id:i.globalFormId||i.edid||`destiny-${l}`,nextBranches:i.nextBranches||[],levelRequirement:i.levelRequirement,lore:i.lore,tags:i6(i),prerequisites:Array.isArray(i.prerequisites)?i.prerequisites:[]}));e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load destiny nodes",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),l6=Object.freeze(Object.defineProperty({__proto__:null,useDestinyNodesStore:tl},Symbol.toStringTag,{value:"Module"})),fa=Ls((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(is("data/playable-races.json"));if(!s.ok)throw new Error(`Failed to fetch races data: ${s.status}`);const a=(await s.json()).races.map(i=>({...i,id:i.id||i.edid||i.name.toLowerCase().replace(/\s+/g,"-"),tags:[i.category,...i.keywords||[]].filter(l=>!!l),name:i.name,edid:i.edid,description:i.description,category:i.category,source:i.source,startingStats:i.startingStats,physicalAttributes:i.physicalAttributes,skillBonuses:i.skillBonuses,racialSpells:i.racialSpells,keywords:i.keywords,flags:i.flags,regeneration:i.regeneration,combat:i.combat}));e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load races",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),c6=Object.freeze(Object.defineProperty({__proto__:null,useRacesStore:fa},Symbol.toStringTag,{value:"Module"}));class Ze{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.output=="string"&&Array.isArray(t.ingredients)&&Array.isArray(t.effects)}static equals(t,n){return t.name===n.name}static addComputedProperties(t){const n=t.effects.length>0,s=t.effects.length,r=t.ingredients.length,a=r>3||s>2,i=r<=2&&s<=1,l=t.effects.reduce((m,h)=>m+h.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=this.determineDifficulty(t,{ingredientCount:r,effectCount:s,isComplex:a,isSimple:i}),d=this.generateTags(t,{hasEffects:n,effectCount:s,ingredientCount:r,isComplex:a,isSimple:i,difficulty:u}),f=this.createSearchableText(t,d);return{...t,hasEffects:n,effectCount:s,ingredientCount:r,isComplex:a,isSimple:i,totalMagnitude:l,maxDuration:c,tags:d,searchableText:f,difficulty:u}}static determineDifficulty(t,n){return n.isSimple?"Simple":n.isComplex?"Complex":"Moderate"}static generateTags(t,n){const s=[];return t.category&&s.push(t.category),s.push(n.difficulty),n.hasEffects&&s.push("Has Effects"),n.ingredientCount===1?s.push("Single Ingredient"):n.ingredientCount<=3?s.push("Few Ingredients"):s.push("Many Ingredients"),n.effectCount===1?s.push("Single Effect"):n.effectCount<=2?s.push("Few Effects"):s.push("Many Effects"),t.effects.forEach(r=>{s.push(r.name)}),t.ingredients.forEach(r=>{s.push(r)}),[...new Set(s)]}static createSearchableText(t,n){const s=t.ingredients.map(a=>typeof a=="string"?a:a&&typeof a=="object"&&(a.item||a.name||a.label||a.id)||String(a));return[t.name,t.output,t.description||"",...s,...t.effects.map(a=>a.name),...t.effects.map(a=>a.description),...n].join(" ").toLowerCase()}static filterByCategory(t,n){return t.filter(s=>s.category===n)}static filterByCategories(t,n){return n.length===0?t:t.filter(s=>s.category&&n.includes(s.category))}static filterByDifficulty(t,n){return t.filter(s=>s.difficulty===n)}static filterByDifficulties(t,n){return n.length===0?t:t.filter(s=>n.includes(s.difficulty))}static filterByIngredientCount(t,n,s){return t.filter(r=>{const a=r.ingredientCount;return!(n!==null&&a<n||s!==null&&a>s)})}static filterByMagnitude(t,n,s){return t.filter(r=>{const a=r.totalMagnitude;return!(n!==null&&a<n||s!==null&&a>s)})}static filterByEffectProperties(t,n,s){return t.filter(r=>!(n!==null&&r.hasEffects!==n||s!==null&&r.isComplex!==s))}static filterByIngredients(t,n){return n.length===0?t:t.filter(s=>n.some(r=>s.ingredients.some(a=>(typeof a=="string"?a:a.item||a.name||a.label||a.id||String(a)).toLowerCase().includes(r.toLowerCase()))))}static filterByEffects(t,n){return n.length===0?t:t.filter(s=>n.some(r=>s.effects.some(a=>a.name.toLowerCase().includes(r.toLowerCase()))))}static search(t,n){if(!n.trim())return[];const s=n.toLowerCase().trim(),r=[];for(const a of t){const i=this.calculateSearchScore(a,s);if(i>0){const l=this.getMatchedFields(a,s);r.push({recipe:a,score:i,matchedFields:l})}}return r.sort((a,i)=>i.score-a.score)}static calculateSearchScore(t,n){var a;let s=0;const r=n.toLowerCase();return t.name.toLowerCase()===r&&(s+=100),t.output.toLowerCase()===r&&(s+=100),t.name.toLowerCase().includes(r)&&(s+=50),t.output.toLowerCase().includes(r)&&(s+=50),(a=t.description)!=null&&a.toLowerCase().includes(r)&&(s+=30),t.ingredients.forEach(i=>{const l=typeof i=="string"?i:i.item||i.name||i.label||i.id||String(i);l.toLowerCase()===r&&(s+=40),l.toLowerCase().includes(r)&&(s+=20)}),t.effects.forEach(i=>{i.name.toLowerCase()===r&&(s+=40),i.name.toLowerCase().includes(r)&&(s+=20),i.description.toLowerCase().includes(r)&&(s+=15)}),t.tags.forEach(i=>{i.toLowerCase()===r&&(s+=25),i.toLowerCase().includes(r)&&(s+=10)}),s}static getMatchedFields(t,n){var a;const s=[],r=n.toLowerCase();return t.name.toLowerCase().includes(r)&&s.push("name"),t.output.toLowerCase().includes(r)&&s.push("output"),(a=t.description)!=null&&a.toLowerCase().includes(r)&&s.push("description"),t.ingredients.forEach(i=>{(typeof i=="string"?i:i.item||i.name||i.label||i.id||String(i)).toLowerCase().includes(r)&&s.push("ingredients")}),t.effects.forEach(i=>{(i.name.toLowerCase().includes(r)||i.description.toLowerCase().includes(r))&&s.push("effects")}),[...new Set(s)]}static sort(t,n,s="asc"){return[...t].sort((a,i)=>{let l=0;switch(n){case"name":l=a.name.localeCompare(i.name);break;case"category":l=(a.category||"").localeCompare(i.category||"");break;case"difficulty":l=this.compareDifficulties(a.difficulty,i.difficulty);break;case"ingredientCount":l=a.ingredientCount-i.ingredientCount;break;case"effectCount":l=a.effectCount-i.effectCount;break;case"magnitude":l=a.totalMagnitude-i.totalMagnitude;break;case"duration":l=a.maxDuration-i.maxDuration;break}return s==="asc"?l:-l})}static compareDifficulties(t,n){const s={Simple:1,Moderate:2,Complex:3};return(s[t]||0)-(s[n]||0)}static getUniqueCategories(t){const n=t.map(s=>s.category).filter(s=>!!s);return[...new Set(n)].sort()}static getUniqueDifficulties(t){const n=t.map(s=>s.difficulty);return[...new Set(n)].sort((s,r)=>this.compareDifficulties(s,r))}static getUniqueEffects(t){const n=t.flatMap(s=>s.effects.map(r=>r.name));return[...new Set(n)].sort()}static getUniqueIngredients(t){const n=t.flatMap(s=>s.ingredients.map(r=>typeof r=="string"?r:r&&typeof r=="object"&&(r.item||r.name||r.label||r.id)||String(r)));return[...new Set(n)].filter(s=>s&&s!=="[object Object]").sort()}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static applyFilters(t,n){let s=[...t];return n.searchTerm.trim()&&(s=this.search(s,n.searchTerm).map(a=>a.recipe)),n.categories.length>0&&(s=this.filterByCategories(s,n.categories)),n.difficulties.length>0&&(s=this.filterByDifficulties(s,n.difficulties)),n.ingredients.length>0&&(s=this.filterByIngredients(s,n.ingredients)),n.effects.length>0&&(s=this.filterByEffects(s,n.effects)),s=this.filterByEffectProperties(s,n.hasEffects,n.isComplex),s=this.filterByIngredientCount(s,n.minIngredientCount,n.maxIngredientCount),s=this.filterByMagnitude(s,n.minMagnitude,n.maxMagnitude),s}static getStatistics(t){const n=t.length,s=t.filter(N=>N.type==="food").length,r=t.filter(N=>N.type==="alcohol").length,a={};t.forEach(N=>{N.category&&(a[N.category]=(a[N.category]||0)+1)});const i={};t.forEach(N=>{i[N.difficulty]=(i[N.difficulty]||0)+1});const l={};t.forEach(N=>{N.effects.forEach(j=>{l[j.name]=(l[j.name]||0)+1})});const c=t.reduce((N,j)=>N+j.ingredientCount,0),u=t.reduce((N,j)=>N+j.effectCount,0),d=n>0?c/n:0,f=n>0?u/n:0,m=t.reduce((N,j)=>N+j.totalMagnitude,0),h=t.reduce((N,j)=>N+j.maxDuration,0),p=n>0?m/n:0,y=n>0?h/n:0,b={};t.forEach(N=>{N.ingredients.forEach(j=>{b[j]=(b[j]||0)+1})});const x=Object.entries(b).map(([N,j])=>({name:N,count:j})).sort((N,j)=>j.count-N.count).slice(0,10),w={};t.forEach(N=>{N.effects.forEach(j=>{w[j.name]=(w[j.name]||0)+1})});const v=Object.entries(w).map(([N,j])=>({name:N,count:j})).sort((N,j)=>j.count-N.count).slice(0,10);return{totalRecipes:n,foodRecipes:s,alcoholRecipes:r,recipesByCategory:a,recipesByDifficulty:i,recipesByEffect:l,averageIngredientCount:d,averageEffectCount:f,averageMagnitude:p,averageDuration:y,topEffects:v,topIngredients:x}}static getEffectComparisons(t,n){const s={};return n.forEach(r=>{r.effects.forEach(a=>{s[a.name]||(s[a.name]={magnitudeSum:0,durationSum:0,count:0}),s[a.name].magnitudeSum+=a.magnitude,s[a.name].durationSum+=a.duration,s[a.name].count+=1})}),t.effects.map(r=>{const a=s[r.name],i=a.count>0?a.magnitudeSum/a.count:0,l=a.count>0?a.durationSum/a.count:0,c=r.magnitude-i,u=r.duration-l;return{name:r.name,magnitude:{value:r.magnitude,mean:i,difference:c,percentage:i>0?c/i*100:0},duration:{value:r.duration,mean:l,difference:u,percentage:l>0?u/l*100:0}}})}}const Ra=class Ra{constructor(){Ve(this,"cache",null);Ve(this,"lastFetch",0);Ve(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return Ra.instance||(Ra.instance=new Ra),Ra.instance}async loadRecipes(){var t;if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const n=is("data/cookbook-wiki.json"),s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch recipes: ${s.status} ${s.statusText}`);const r=await s.json(),a=[];if(console.log("RecipeDataProvider: Raw data keys:",Object.keys(r)),r.food&&Array.isArray(r.food)?(console.log("RecipeDataProvider: Found",r.food.length,"food recipes"),a.push(...r.food)):r.food&&typeof r.food=="object"&&(console.log("RecipeDataProvider: Food section is an object, checking for recipes property"),r.food.recipes&&Array.isArray(r.food.recipes)&&(console.log("RecipeDataProvider: Found",r.food.recipes.length,"food recipes in recipes property"),a.push(...r.food.recipes))),r.alcohol&&Array.isArray(r.alcohol)?(console.log("RecipeDataProvider: Found",r.alcohol.length,"alcohol recipes"),a.push(...r.alcohol)):r.alcohol&&typeof r.alcohol=="object"&&(console.log("RecipeDataProvider: Alcohol section is an object, checking for recipes property"),r.alcohol.recipes&&Array.isArray(r.alcohol.recipes)&&(console.log("RecipeDataProvider: Found",r.alcohol.recipes.length,"alcohol recipes in recipes property"),a.push(...r.alcohol.recipes))),a.length===0){console.log("RecipeDataProvider: No recipes found in food/alcohol sections, trying fallback");const u=((t=r.food)==null?void 0:t.recipes)||r.recipes||r;Array.isArray(u)&&(console.log("RecipeDataProvider: Found",u.length,"recipes in fallback data"),a.push(...u))}if(!Array.isArray(a)||a.length===0)throw new Error("RecipeDataProvider: No valid recipes found in data structure");const i=[];let l=0,c=0;for(const u of a)if(Ze.isValid(u)){const d=Ze.addComputedProperties(u);i.push(d),l++}else console.warn("RecipeDataProvider: Invalid recipe data:",u),c++;return this.cache=i,this.lastFetch=Date.now(),console.log(`RecipeDataProvider: Loaded ${l} valid recipes, ${c} invalid recipes`),i}catch(n){throw console.error("RecipeDataProvider: Error loading recipes:",n),n}}async getRecipeData(){console.log("RecipeDataProvider: getRecipeData called");const t=await this.loadRecipes();console.log("RecipeDataProvider: Getting statistics for",t.length,"recipes");const n=Ze.getStatistics(t),s={recipes:t,totalCount:n.totalRecipes,categories:Ze.getUniqueCategories(t),effects:Ze.getUniqueEffects(t),ingredients:Ze.getUniqueIngredients(t),lastUpdated:new Date().toISOString()};return console.log("RecipeDataProvider: getRecipeData result:",{recipesCount:s.recipes.length,totalCount:s.totalCount,categories:s.categories,effects:s.effects,ingredients:s.ingredients}),s}async getRecipeByName(t){return(await this.loadRecipes()).find(s=>s.name===t)||null}async getRecipesByCategory(t){const n=await this.loadRecipes();return Ze.filterByCategory(n,t)}async getRecipesByDifficulty(t){const n=await this.loadRecipes();return Ze.filterByDifficulty(n,t)}async getRecipesByIngredient(t){const n=await this.loadRecipes();return Ze.filterByIngredients(n,[t])}async getRecipesByEffect(t){const n=await this.loadRecipes();return Ze.filterByEffects(n,[t])}async searchRecipes(t){const n=await this.loadRecipes();return Ze.search(n,t).map(r=>r.recipe)}async getStatistics(){const t=await this.loadRecipes();return Ze.getStatistics(t)}clearCache(){this.cache=null,this.lastFetch=0,console.log("RecipeDataProvider: Cache cleared")}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isExpired:this.cache!==null&&Date.now()-this.lastFetch>=this.CACHE_DURATION,timeUntilExpiry:this.cache?Math.max(0,this.CACHE_DURATION-(Date.now()-this.lastFetch)):0}}};Ve(Ra,"instance");let Eg=Ra;const Js=Ls((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const r=await Eg.getInstance().loadRecipes();e({data:r,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load recipes",loading:!1})}}},getById:n=>t().data.find(r=>r.name===n),getByName:n=>t().data.find(r=>r.name===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l,c,u,d,f;return a.name.toLowerCase().includes(r)||a.output.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.category)==null?void 0:l.toLowerCase().includes(r))||((c=a.difficulty)==null?void 0:c.toLowerCase().includes(r))||((u=a.tags)==null?void 0:u.some(m=>m.toLowerCase().includes(r)))||((d=a.ingredients)==null?void 0:d.some(m=>m.toLowerCase().includes(r)))||((f=a.effects)==null?void 0:f.some(m=>{var h;return m.name.toLowerCase().includes(r)||((h=m.description)==null?void 0:h.toLowerCase().includes(r))}))})},getByCategory:n=>t().data.filter(r=>r.category===n),getByDifficulty:n=>t().data.filter(r=>r.difficulty===n),getByIngredient:n=>t().data.filter(r=>r.ingredients.some(a=>a.toLowerCase().includes(n.toLowerCase()))),getByEffect:n=>t().data.filter(r=>r.effects.some(a=>a.name.toLowerCase().includes(n.toLowerCase())))})),u6=Object.freeze(Object.defineProperty({__proto__:null,useRecipesStore:Js},Symbol.toStringTag,{value:"Module"})),d6={SHOW_FAVORED_RACES:!1,ENABLE_RACE_AUTOCOMPLETE:!1,SHOW_RACE_FILTERS:!1};function f6(e){return d6[e]}function Xt(){return f6("SHOW_FAVORED_RACES")}const nl=Ls((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(is("data/wintersun-religion-docs.json"));if(!s.ok)throw new Error(`Failed to fetch religions data: ${s.status}`);const a=(await s.json()).flatMap(i=>i.deities.map(l=>({...l,id:l.id||l.name,pantheon:i.type,type:l.type||i.type,tags:[i.type,...Xt()?l.favoredRaces||[]:[],...l.tags||[]].filter(Boolean)})));e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load religions",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),m6=Object.freeze(Object.defineProperty({__proto__:null,useReligionsStore:nl},Symbol.toStringTag,{value:"Module"})),ho=Ls((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(is("data/skills.json"));if(!s.ok)throw new Error(`Failed to fetch skills data: ${s.status}`);const a=(await s.json()).skills.map(i=>({...i,id:i.id||i.edid||i.name.toLowerCase().replace(/\s+/g,"-"),tags:[...i.metaTags||[],i.category].filter(l=>!!l)}));e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load skills",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),h6=Object.freeze(Object.defineProperty({__proto__:null,useSkillsStore:ho},Symbol.toStringTag,{value:"Module"}));class Sa{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.editorId=="string"&&typeof t.school=="string"&&typeof t.level=="string"&&typeof t.magickaCost=="number"&&Array.isArray(t.effects)}static equals(t,n){return t.editorId===n.editorId}static addComputedProperties(t){const n=t.effects.length>0,s=t.effects.length,r=t.effects.some(m=>m.area>0),a=t.effects.some(m=>m.duration>0),i=t.effects.every(m=>m.duration===0),l=t.effects.reduce((m,h)=>m+h.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=Math.max(...t.effects.map(m=>m.area),0),d=this.generateTags(t,{hasEffects:n,isAreaSpell:r,isDurationSpell:a,isInstantSpell:i}),f=this.createSearchableText(t,d);return{...t,hasEffects:n,effectCount:s,isAreaSpell:r,isDurationSpell:a,isInstantSpell:i,totalMagnitude:l,maxDuration:c,maxArea:u,tags:d,searchableText:f}}static generateTags(t,n){const s=[];return s.push(t.school),s.push(t.level),n.hasEffects&&s.push("Has Effects"),n.isAreaSpell&&s.push("Area Effect"),n.isDurationSpell&&s.push("Duration"),n.isInstantSpell&&s.push("Instant"),t.magickaCost===0?s.push("Free"):t.magickaCost<=50?s.push("Low Cost"):t.magickaCost<=150?s.push("Medium Cost"):s.push("High Cost"),t.effects.forEach(r=>{r.name.toLowerCase().includes("fire")&&s.push("Fire"),(r.name.toLowerCase().includes("frost")||r.name.toLowerCase().includes("ice"))&&s.push("Frost"),(r.name.toLowerCase().includes("shock")||r.name.toLowerCase().includes("lightning"))&&s.push("Shock"),(r.name.toLowerCase().includes("heal")||r.name.toLowerCase().includes("restore"))&&s.push("Healing"),(r.name.toLowerCase().includes("conjure")||r.name.toLowerCase().includes("summon"))&&s.push("Conjuration"),(r.name.toLowerCase().includes("fear")||r.name.toLowerCase().includes("calm"))&&s.push("Illusion"),(r.name.toLowerCase().includes("paralyze")||r.name.toLowerCase().includes("slow"))&&s.push("Control")}),[...new Set(s)]}static createSearchableText(t,n){return[t.name,t.school,t.level,t.description,...n,...t.effects.map(r=>r.name),...t.effects.map(r=>r.description)].join(" ").toLowerCase()}static filterBySchool(t,n){return t.filter(s=>s.school===n)}static filterByLevel(t,n){return t.filter(s=>s.level===n)}static filterBySchools(t,n){return n.length===0?t:t.filter(s=>n.includes(s.school))}static filterByLevels(t,n){return n.length===0?t:t.filter(s=>n.includes(s.level))}static filterByMagickaCost(t,n,s){return t.filter(r=>!(n!==null&&r.magickaCost<n||s!==null&&r.magickaCost>s))}static filterByMagnitude(t,n,s){return t.filter(r=>!(n!==null&&r.totalMagnitude<n||s!==null&&r.totalMagnitude>s))}static filterByEffectProperties(t,n,s,r){return t.filter(a=>!(n!==null&&a.hasEffects!==n||s!==null&&a.isAreaSpell!==s||r!==null&&a.isDurationSpell!==r))}static search(t,n){if(!n.trim())return t.map(a=>({spell:a,score:1,matchedFields:[]}));const s=n.toLowerCase(),r=[];return t.forEach(a=>{let i=0;const l=[];a.name.toLowerCase()===s?(i+=100,l.push("name")):a.name.toLowerCase().includes(s)&&(i+=50,l.push("name")),a.school.toLowerCase()===s?(i+=30,l.push("school")):a.school.toLowerCase().includes(s)&&(i+=15,l.push("school")),a.level.toLowerCase()===s?(i+=25,l.push("level")):a.level.toLowerCase().includes(s)&&(i+=10,l.push("level")),a.description.toLowerCase().includes(s)&&(i+=5,l.push("description")),a.tags.forEach(c=>{c.toLowerCase().includes(s)&&(i+=3,l.push("tags"))}),a.effects.forEach(c=>{c.name.toLowerCase().includes(s)&&(i+=8,l.push("effects")),c.description.toLowerCase().includes(s)&&(i+=4,l.push("effects"))}),i>0&&r.push({spell:a,score:i,matchedFields:[...new Set(l)]})}),r.sort((a,i)=>i.score-a.score)}static sort(t,n,s="asc"){return[...t].sort((a,i)=>{let l=0;switch(n){case"name":l=a.name.localeCompare(i.name);break;case"school":l=a.school.localeCompare(i.school);break;case"level":l=this.compareLevels(a.level,i.level);break;case"magickaCost":l=a.magickaCost-i.magickaCost;break;case"magnitude":l=a.totalMagnitude-i.totalMagnitude;break;case"duration":l=a.maxDuration-i.maxDuration;break}return s==="desc"?-l:l})}static compareLevels(t,n){const s=["Novice","Apprentice","Adept","Expert","Master"],r=s.indexOf(t),a=s.indexOf(n);return r===-1&&a===-1?0:r===-1?1:a===-1?-1:r-a}static getUniqueSchools(t){return[...new Set(t.map(n=>n.school))].sort()}static getUniqueLevels(t){const n=[...new Set(t.map(s=>s.level))];return this.sortLevels(n)}static sortLevels(t){const n=["Novice","Apprentice","Adept","Expert","Master"];return t.sort((s,r)=>{const a=n.indexOf(s),i=n.indexOf(r);return a===-1&&i===-1?0:a===-1?1:i===-1?-1:a-i})}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static applyFilters(t,n){let s=[...t];return n.schools.length>0&&(s=this.filterBySchools(s,n.schools)),n.levels.length>0&&(s=this.filterByLevels(s,n.levels)),s=this.filterByEffectProperties(s,n.hasEffects,n.isAreaSpell,n.isDurationSpell),s=this.filterByMagickaCost(s,n.minMagickaCost,n.maxMagickaCost),s=this.filterByMagnitude(s,n.minMagnitude,n.maxMagnitude),n.searchTerm&&(s=this.search(s,n.searchTerm).map(a=>a.spell)),s}static getStatistics(t){const n=this.getUniqueSchools(t),s=this.getUniqueLevels(t),r=this.getUniqueTags(t),a=t.length,i=t.filter(m=>m.hasEffects).length,l=t.filter(m=>m.isAreaSpell).length,c=t.filter(m=>m.isDurationSpell).length,u=t.filter(m=>m.magickaCost===0).length,d=t.length>0?t.reduce((m,h)=>m+h.magickaCost,0)/t.length:0,f=t.length>0?t.reduce((m,h)=>m+h.totalMagnitude,0)/t.length:0;return{totalSpells:a,spellsWithEffects:i,areaSpells:l,durationSpells:c,freeSpells:u,avgMagickaCost:Math.round(d),avgMagnitude:Math.round(f),schools:n,levels:s,tags:r}}}const Da=class Da{constructor(){Ve(this,"cache",null);Ve(this,"lastFetch",0);Ve(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return Da.instance||(Da.instance=new Da),Da.instance}async loadSpells(){if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const t=is("data/player_spells.json"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch spells: ${n.status} ${n.statusText}`);const s=await n.json(),r=[];let a=0,i=0;for(const l of s)if(Sa.isValid(l)){const c=Sa.addComputedProperties(l);r.push(c),a++}else console.warn("SpellDataProvider: Invalid spell data:",l),i++;return this.cache=r,this.lastFetch=Date.now(),r}catch(t){throw console.error("SpellDataProvider: Error loading spells:",t),t}}async getSpellData(){console.log("SpellDataProvider: getSpellData called");const t=await this.loadSpells();console.log("SpellDataProvider: Getting statistics for",t.length,"spells");const n=Sa.getStatistics(t),s={spells:t,totalCount:n.totalSpells,schools:n.schools,levels:n.levels,lastUpdated:new Date().toISOString()};return console.log("SpellDataProvider: getSpellData result:",{spellsCount:s.spells.length,totalCount:s.totalCount,schools:s.schools,levels:s.levels}),s}async getSpellByEditorId(t){return(await this.loadSpells()).find(s=>s.editorId===t)||null}async getSpellsBySchool(t){const n=await this.loadSpells();return Sa.filterBySchool(n,t)}async getSpellsByLevel(t){const n=await this.loadSpells();return Sa.filterByLevel(n,t)}async searchSpells(t){const n=await this.loadSpells();return Sa.search(n,t).map(r=>r.spell)}async getStatistics(){const t=await this.loadSpells();return Sa.getStatistics(t)}clearCache(){console.log("SpellDataProvider: Clearing cache"),this.cache=null,this.lastFetch=0}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isValid:this.isCacheValid()}}};Ve(Da,"instance");let $d=Da;const g6=Object.freeze(Object.defineProperty({__proto__:null,SpellDataProvider:$d},Symbol.toStringTag,{value:"Module"})),Io=Ls((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const r=await $d.getInstance().loadSpells();e({data:r,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load spells",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),getByEditorId:n=>t().data.find(r=>r.editorId===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l,c,u,d;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.school)==null?void 0:l.toLowerCase().includes(r))||((c=a.level)==null?void 0:c.toLowerCase().includes(r))||((u=a.tags)==null?void 0:u.some(f=>f.toLowerCase().includes(r)))||((d=a.effects)==null?void 0:d.some(f=>{var m;return f.name.toLowerCase().includes(r)||((m=f.description)==null?void 0:m.toLowerCase().includes(r))}))})},getBySchool:n=>t().data.filter(r=>r.school===n),getByLevel:n=>t().data.filter(r=>r.level===n)})),go=Ls((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(is("data/traits.json"));if(!s.ok)throw new Error(`Failed to fetch traits data: ${s.status}`);const a=(await s.json()).traits.map(i=>{var l;return{...i,id:i.id||i.edid||i.name,tags:[i.category,...i.tags||[],...((l=i.effects)==null?void 0:l.map(c=>c.type))||[]].filter(c=>!!c)}});e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load traits",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),p6=Object.freeze(Object.defineProperty({__proto__:null,useTraitsStore:go},Symbol.toStringTag,{value:"Module"}));function x6(){const{data:e,loading:t,error:n}=ho();return{data:e.length>0?e:null,loading:t,error:n}}function y6(){const{data:e,loading:t,error:n}=go();return{data:e.length>0?e:null,loading:t,error:n}}function sC(){const{data:e,loading:t,error:n}=nl();return{data:e.length>0?e:null,loading:t,error:n}}function v6(){const{data:e,loading:t,error:n}=mo();return{data:e.length>0?e:null,loading:t,error:n}}function b6(){const{data:e,loading:t,error:n}=tl();return{data:e.length>0?e:null,loading:t,error:n}}function o0(){const{data:e,loading:t,error:n}=lo();return{data:e.length>0?e:null,loading:t,error:n}}function he({children:e,className:t,expanded:n,onToggle:s,disableHover:r=!1,hideChevron:a=!1}){let i,l,c,u;L.Children.forEach(e,y=>{L.isValidElement(y)&&(y.type===he.Header&&(i=y),y.type===he.Summary&&(l=y),y.type===he.Footer&&(c=y),y.type===he.Details&&(u=y))});const[d,f]=g.useState(!1),m=n!==void 0?n:d,h=s||(()=>f(y=>!y)),p=r?"":"hover:shadow-md hover:scale-[1.02]";return o.jsxs("div",{className:H("rounded-lg border bg-background shadow-sm transition-all duration-200 flex flex-col",p,t),children:[i&&L.cloneElement(i,{onClick:h,expanded:m,hideChevron:a}),o.jsxs("div",{className:"flex-1",children:[l,m&&u]}),c]})}he.Header=function({children:t,className:n,onClick:s,expanded:r,hideChevron:a=!1}){const i=()=>{s==null||s()};return o.jsxs("div",{className:H("flex items-center gap-3 px-4 py-3 bg-muted/30 cursor-pointer select-none hover:bg-muted/50 transition-colors duration-200 rounded-t-lg",r&&"bg-muted/50",n),onClick:i,tabIndex:0,role:"button","aria-expanded":r,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),i())},children:[t,!a&&o.jsx("span",{className:H("ml-auto transition-transform duration-200 text-muted-foreground",r?"rotate-180":""),children:o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:o.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})})]})};he.Summary=function({children:t,className:n}){return o.jsx("div",{className:H("px-4 py-2 space-y-3",n),children:t})};he.Footer=function({children:t,className:n}){return o.jsx("div",{className:H("px-4 py-2",n),children:t})};he.Details=function({children:t,className:n}){return o.jsx("div",{className:H("px-4 py-4 space-y-4 bg-background rounded-b-lg",n),children:t})};const w6={race:{Human:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Elf:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Beast:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},religion:{},trait:{},destiny:{}},N6={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},j6="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function S6({category:e,categoryType:t,size:n="md",className:s}){const a=w6[t][e]||j6;return o.jsx(X,{variant:"outline",className:H(a,N6[n],"font-medium transition-colors",s),children:e})}var C6="Label",rC=g.forwardRef((e,t)=>o.jsx(xe.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));rC.displayName=C6;const k6=qi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),cc=g.forwardRef(({className:e,children:t,...n},s)=>o.jsx(rC,{ref:s,className:H(k6(),e),...n,children:t}));cc.displayName="Label";const em={traitLimit:{regular:"text-blue-600",bonus:"text-purple-600",warning:"text-yellow-600",error:"text-red-600"},summaryCard:{primary:"text-primary",secondary:"text-muted-foreground",accent:"text-accent"},backgrounds:{warning:"bg-yellow-50 dark:bg-yellow-950",info:"bg-blue-50 dark:bg-blue-950",error:"bg-red-50 dark:bg-red-950",success:"bg-green-50 dark:bg-green-950"},borders:{warning:"border-yellow-200 dark:border-yellow-800",info:"border-blue-200 dark:border-blue-800",error:"border-red-200 dark:border-red-800",success:"border-green-200 dark:border-green-800"}},si={card:"p-6 space-y-4",section:"space-y-3",item:"space-y-2"};function E6(e){return em.traitLimit[e]}function tb(e){return em.summaryCard[e]}function _6(e){return em.backgrounds[e]}function aC(e){return em.borders[e]}function A6({title:e,description:t,icon:n,variant:s="default",children:r,className:a}){const i=()=>{if(n)return n;switch(s){case"warning":return o.jsx(nc,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return o.jsx(ec,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});default:return null}};return o.jsxs(be,{className:H(si.card,a),children:[o.jsxs(Te,{children:[o.jsxs(Fe,{className:"flex items-center gap-2",children:[i(),e]}),t&&o.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),o.jsx(we,{className:H(si.section),children:r})]})}function nb({label:e,value:t,onChange:n,min:s=0,max:r=10,currentCount:a,type:i="regular",className:l}){const c=()=>{switch(i){case"regular":return o.jsx(Df,{className:"h-4 w-4"});case"bonus":return o.jsx(Ye,{className:"h-4 w-4"});default:return null}},u=()=>E6(i);return o.jsxs("div",{className:H(si.item,l),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c(),o.jsx(cc,{htmlFor:`${i}-limit`,className:u(),children:e})]}),o.jsx(Cs,{id:`${i}-limit`,type:"number",min:s,max:r,value:t,onChange:d=>n(parseInt(d.target.value)||0),className:"mt-1"}),a!==void 0&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Currently selected: ",a]})]})}function sb({type:e,title:t,message:n,className:s}){const r=()=>{switch(e){case"warning":return o.jsx(nc,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return o.jsx(ec,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});case"error":return o.jsx(nc,{className:"h-4 w-4 text-red-600 dark:text-red-400"});case"success":return o.jsx(ec,{className:"h-4 w-4 text-green-600 dark:text-green-400"});default:return null}};return o.jsxs("div",{className:H("flex items-start gap-2 p-4 rounded-lg border",_6(e),aC(e),s),children:[r(),o.jsxs("div",{className:"text-sm",children:[o.jsx("strong",{children:t}),o.jsx("p",{className:"mt-1",children:n})]})]})}function M6({open:e,title:t,message:n,variant:s="warning",confirmText:r="Confirm",cancelText:a="Cancel",onConfirm:i,onCancel:l,className:c}){if(!e)return null;const u=()=>{switch(s){case"warning":return o.jsx(nc,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"});case"info":return o.jsx(ec,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"});case"error":return o.jsx(XR,{className:"h-5 w-5 text-red-600 dark:text-red-400"});case"success":return o.jsx(dg,{className:"h-5 w-5 text-green-600 dark:text-green-400"});default:return o.jsx(nc,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}},d=()=>{switch(s){case"error":return"destructive";case"success":return"default";default:return"default"}};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:o.jsxs("div",{className:H("bg-white dark:bg-zinc-900 rounded-lg shadow-lg p-6 w-full max-w-xs space-y-4 border",aC(s),c),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[u(),o.jsx("span",{className:"font-semibold",children:t})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(K,{variant:"outline",size:"sm",onClick:l,children:a}),o.jsx(K,{variant:d(),size:"sm",onClick:i,children:r})]})]})})}const T6={race:{Altmer:"altmer.svg",Argonian:"argonian.svg",Bosmer:"woodelf.svg",Breton:"breton.svg",Dunmer:"dunmer.svg",Imperial:"imperial.svg",Khajiit:"khajit.svg",Nord:"nord.svg",Orsimer:"orc.svg",Redguard:"redguard.svg"},religion:{},trait:{},destiny:{},birthsign:{Warrior:"Warrior.svg",Lady:"Lady.svg",Lord:"Lord.svg",Steed:"Steed.svg",Mage:"Mage.svg",Apprentice:"Apprentice.svg",Atronach:"Atronach.svg",Ritual:"Ritual.svg",Thief:"Thief.svg",Lover:"Lover.svg",Shadow:"Shadow.svg",Tower:"Tower.svg",Serpent:"Serpent.svg"}},rb={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-16 h-16","2xl":"w-16 h-16","3xl":"w-24 h-24","4xl":"w-32 h-32"},R6={sm:"text-sm",md:"text-lg",lg:"text-xl",xl:"text-2xl","2xl":"text-3xl","3xl":"text-3xl","4xl":"text-4xl"};function oC({entityName:e,entityType:t,size:n="md",className:s,imageClassName:r}){const i=T6[t][e],[l,c]=L.useState(!1);return!i||l?o.jsx("div",{className:H("bg-white dark:bg-white text-black dark:text-black rounded-full flex items-center justify-center font-bold",rb[n],s),children:o.jsx("span",{className:H(R6[n]),children:e.charAt(0)})}):o.jsx("div",{className:H("rounded-full overflow-hidden flex items-center justify-center","bg-white dark:bg-white",rb[n],s),children:o.jsx("img",{src:is(`assets/${t==="birthsign"?"sign-avatar":`${t}-avatar`}/${i}`),alt:`${e} avatar`,className:H("w-full h-full object-contain",r),onError:()=>c(!0),loading:"lazy"})})}function iC({isExpanded:e,onToggle:t,className:n,leftControls:s,header:r,collapsedContent:a,expandedContent:i,actionArea:l,children:c}){return c?o.jsx("div",{className:H("rounded-lg border bg-background shadow-sm transition-all",n),children:c}):o.jsxs("div",{className:H("rounded-lg border bg-background shadow-sm transition-all group",e?"ring-2 ring-skyrim-gold/60":"",n),children:[o.jsxs("div",{className:"flex items-start",children:[s&&o.jsx("div",{className:"mr-2 flex-shrink-0",children:s}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r&&o.jsx("div",{className:"flex-1 min-w-0",children:r}),o.jsxs("button",{type:"button",onClick:t,"aria-expanded":e,className:"ml-2 p-1 rounded hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-skyrim-gold",tabIndex:0,children:[o.jsx("span",{className:"sr-only",children:e?"Collapse":"Expand"}),o.jsx("svg",{className:H("h-4 w-4 transition-transform",e?"rotate-90":""),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:o.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})}),l&&o.jsx("div",{className:"ml-2 flex-shrink-0",children:l})]}),a&&o.jsx("div",{className:"mt-2",children:a}),e&&i&&o.jsx("div",{className:"mt-4",children:i})]})}function Fc({options:e,onSelect:t,placeholder:n="Search...",className:s="",disabled:r=!1,searchQuery:a,onSearchQueryChange:i,renderOption:l,emptyMessage:c="No options found",maxHeight:u="max-h-96",showClearButton:d=!0,showToggleButton:f=!0}){const[m,h]=g.useState(!1),[p,y]=g.useState(""),[b,x]=g.useState(-1),w=g.useRef(null),v=g.useRef(null),N=a??p,j=i??y;g.useEffect(()=>{const $=M=>{w.current&&!w.current.contains(M.target)&&(h(!1),x(-1))};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const S=$=>{j($),h(!0),x(-1)},C=$=>{t($),j(""),h(!1),x(-1)},E=$=>{$.key==="ArrowDown"?($.preventDefault(),x(M=>Math.min(M+1,e.length-1))):$.key==="ArrowUp"?($.preventDefault(),x(M=>Math.max(M-1,-1))):$.key==="Enter"?($.preventDefault(),b>=0&&e[b]&&C(e[b])):$.key==="Escape"&&(h(!1),x(-1))},k=()=>{h(!0)},_=()=>{var $;j(""),($=v.current)==null||$.focus()},P=()=>{var $;h(!m),m||($=v.current)==null||$.focus()},O=($,M)=>o.jsxs("div",{className:"flex items-center gap-3",children:[$.icon&&o.jsx("div",{className:"flex-shrink-0",children:$.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium truncate",children:$.label}),$.badge&&o.jsx("div",{className:"flex-shrink-0",children:$.badge})]}),$.description&&o.jsx(Be,{text:$.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return o.jsxs("div",{ref:w,className:H("relative",s),children:[o.jsxs("div",{className:"relative",children:[o.jsx(yi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(Cs,{ref:v,type:"text",placeholder:n,value:N,onChange:$=>S($.target.value),onFocus:k,onKeyDown:E,className:"pl-10 pr-20",disabled:r}),d&&N&&o.jsx(K,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted",onClick:_,disabled:r,children:o.jsx(qt,{className:"h-4 w-4"})}),f&&o.jsx(K,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:P,disabled:r,children:o.jsx(Vn,{className:H("h-4 w-4 transition-transform",m&&"rotate-180")})})]}),m&&o.jsx("div",{className:H("absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",u),style:{zIndex:Dt.AUTOCOMPLETE+10},children:o.jsx("div",{className:"p-2",children:e.length===0?o.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:c}):e.map(($,M)=>o.jsx("button",{onClick:()=>C($),className:H("w-full text-left px-3 py-3 rounded-lg text-sm transition-all duration-200 cursor-pointer",M===b?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"),disabled:r,children:l?l($,M===b):O($)},$.id))})})]})}function D6(e="(max-width: 640px)"){const t=()=>typeof window>"u"||typeof window.matchMedia>"u"?!1:window.matchMedia(e).matches,[n,s]=g.useState(t);return g.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia>"u")return;const r=window.matchMedia(e),a=()=>s(r.matches);return s(r.matches),r.addEventListener("change",a),()=>{r.removeEventListener("change",a)}},[e]),n}function lC({open:e,onOpenChange:t,title:n,description:s,side:r="right",className:a,mobileQuery:i="(max-width: 640px)",resetKey:l,children:c}){const u=D6(i),d=g.useRef(null);g.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[e,u]),g.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[l]);const f=H("flex flex-col",u?"inset-0 top-0 left-0 right-0 bottom-0 h-[100dvh] max-h-[100dvh] w-[100vw] p-0 rounded-none border-0 overflow-hidden":"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0 overflow-y-auto bg-background",a);return o.jsx(Ex,{open:e,onOpenChange:t,children:o.jsxs(Hf,{side:u?"bottom":r,className:f,children:[(n||s)&&o.jsx("div",{className:H("sticky top-0 z-10 bg-background border-b","p-4"),children:o.jsxs(_x,{className:"p-0",children:[n&&o.jsx(Ax,{children:n}),s&&o.jsx(Mx,{children:s})]})}),o.jsx("div",{ref:d,className:H("flex-1 overflow-y-auto overscroll-contain",u?"p-4":"p-6"),children:c})]})})}function z6({title:e,items:t,layout:n="grid",className:s}){const r=i=>{switch(i){case"race":return o.jsx(Pl,{className:"h-4 w-4"});case"birthsign":return o.jsx(Ye,{className:"h-4 w-4"});case"religion":return o.jsx(zc,{className:"h-4 w-4"});case"traits":return o.jsx(Y4,{className:"h-4 w-4"});default:return null}},a=()=>{switch(n){case"grid":return"grid grid-cols-2 md:grid-cols-4 gap-4";case"list":return"space-y-3";default:return"grid grid-cols-2 md:grid-cols-4 gap-4"}};return o.jsxs(be,{className:H(si.card,s),children:[o.jsx(Te,{children:o.jsx(Fe,{children:e})}),o.jsx(we,{className:H(si.section),children:o.jsx("div",{className:a(),children:t.map((i,l)=>o.jsxs("div",{className:H(si.item,i.className),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.icon||r(i.type),o.jsxs("span",{className:H("font-medium text-sm",tb("primary")),children:[i.label,":"]})]}),o.jsx("div",{className:H("text-sm",tb("secondary")),children:i.value||"Not selected"})]},l))})})]})}function L6(e){return[{label:"Race",value:e.race||"Not selected",type:"race"},{label:"Birth Sign",value:e.stone||"Not selected",type:"birthsign"},{label:"Religion",value:e.religion||"Not selected",type:"religion"},{label:"Traits",value:`${e.traits.regular.length}/${e.traitLimits.regular} starting, ${e.traits.bonus.length}/${e.traitLimits.bonus} late game`,type:"traits"}]}function i0({birthsignName:e,size:t="md",className:n}){return o.jsx(oC,{entityName:e,entityType:"birthsign",size:t,className:n,imageClassName:"scale-125"})}function xr(e){return Array.isArray?Array.isArray(e):dC(e)==="[object Array]"}function $6(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function P6(e){return e==null?"":$6(e)}function js(e){return typeof e=="string"}function cC(e){return typeof e=="number"}function O6(e){return e===!0||e===!1||B6(e)&&dC(e)=="[object Boolean]"}function uC(e){return typeof e=="object"}function B6(e){return uC(e)&&e!==null}function vn(e){return e!=null}function th(e){return!e.trim().length}function dC(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const I6="Incorrect 'index' type",H6=e=>`Invalid value for key ${e}`,U6=e=>`Pattern length exceeds max of ${e}.`,F6=e=>`Missing ${e} property in key`,V6=e=>`Property 'weight' in key '${e}' must be a positive integer`,ab=Object.prototype.hasOwnProperty;class q6{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(s=>{let r=fC(s);this._keys.push(r),this._keyMap[r.id]=r,n+=r.weight}),this._keys.forEach(s=>{s.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function fC(e){let t=null,n=null,s=null,r=1,a=null;if(js(e)||xr(e))s=e,t=ob(e),n=_g(e);else{if(!ab.call(e,"name"))throw new Error(F6("name"));const i=e.name;if(s=i,ab.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(V6(i));t=ob(i),n=_g(i),a=e.getFn}return{path:t,id:n,weight:r,src:s,getFn:a}}function ob(e){return xr(e)?e:e.split(".")}function _g(e){return xr(e)?e.join("."):e}function Z6(e,t){let n=[],s=!1;const r=(a,i,l)=>{if(vn(a))if(!i[l])n.push(a);else{let c=i[l];const u=a[c];if(!vn(u))return;if(l===i.length-1&&(js(u)||cC(u)||O6(u)))n.push(P6(u));else if(xr(u)){s=!0;for(let d=0,f=u.length;d<f;d+=1)r(u[d],i,l+1)}else i.length&&r(u,i,l+1)}};return r(e,js(t)?t.split("."):t,0),s?n:n[0]}const G6={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Y6={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},X6={location:0,threshold:.6,distance:100},W6={useExtendedSearch:!1,getFn:Z6,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var me={...Y6,...G6,...X6,...W6};const K6=/[^ ]+/g;function Q6(e=1,t=3){const n=new Map,s=Math.pow(10,t);return{get(r){const a=r.match(K6).length;if(n.has(a))return n.get(a);const i=1/Math.pow(a,.5*e),l=parseFloat(Math.round(i*s)/s);return n.set(a,l),l},clear(){n.clear()}}}class l0{constructor({getFn:t=me.getFn,fieldNormWeight:n=me.fieldNormWeight}={}){this.norm=Q6(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,js(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();js(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!vn(t)||th(t))return;let s={v:t,i:n,n:this.norm.get(t)};this.records.push(s)}_addObject(t,n){let s={i:n,$:{}};this.keys.forEach((r,a)=>{let i=r.getFn?r.getFn(t):this.getFn(t,r.path);if(vn(i)){if(xr(i)){let l=[];const c=[{nestedArrIndex:-1,value:i}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(vn(d))if(js(d)&&!th(d)){let f={v:d,i:u,n:this.norm.get(d)};l.push(f)}else xr(d)&&d.forEach((f,m)=>{c.push({nestedArrIndex:m,value:f})})}s.$[a]=l}else if(js(i)&&!th(i)){let l={v:i,n:this.norm.get(i)};s.$[a]=l}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function mC(e,t,{getFn:n=me.getFn,fieldNormWeight:s=me.fieldNormWeight}={}){const r=new l0({getFn:n,fieldNormWeight:s});return r.setKeys(e.map(fC)),r.setSources(t),r.create(),r}function J6(e,{getFn:t=me.getFn,fieldNormWeight:n=me.fieldNormWeight}={}){const{keys:s,records:r}=e,a=new l0({getFn:t,fieldNormWeight:n});return a.setKeys(s),a.setIndexRecords(r),a}function Cu(e,{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:r=me.distance,ignoreLocation:a=me.ignoreLocation}={}){const i=t/e.length;if(a)return i;const l=Math.abs(s-n);return r?i+l/r:l?1:i}function e8(e=[],t=me.minMatchCharLength){let n=[],s=-1,r=-1,a=0;for(let i=e.length;a<i;a+=1){let l=e[a];l&&s===-1?s=a:!l&&s!==-1&&(r=a-1,r-s+1>=t&&n.push([s,r]),s=-1)}return e[a-1]&&a-s>=t&&n.push([s,a-1]),n}const Ta=32;function t8(e,t,n,{location:s=me.location,distance:r=me.distance,threshold:a=me.threshold,findAllMatches:i=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,includeMatches:c=me.includeMatches,ignoreLocation:u=me.ignoreLocation}={}){if(t.length>Ta)throw new Error(U6(Ta));const d=t.length,f=e.length,m=Math.max(0,Math.min(s,f));let h=a,p=m;const y=l>1||c,b=y?Array(f):[];let x;for(;(x=e.indexOf(t,p))>-1;){let C=Cu(t,{currentLocation:x,expectedLocation:m,distance:r,ignoreLocation:u});if(h=Math.min(C,h),p=x+d,y){let E=0;for(;E<d;)b[x+E]=1,E+=1}}p=-1;let w=[],v=1,N=d+f;const j=1<<d-1;for(let C=0;C<d;C+=1){let E=0,k=N;for(;E<k;)Cu(t,{errors:C,currentLocation:m+k,expectedLocation:m,distance:r,ignoreLocation:u})<=h?E=k:N=k,k=Math.floor((N-E)/2+E);N=k;let _=Math.max(1,m-k+1),P=i?f:Math.min(m+k,f)+d,O=Array(P+2);O[P+1]=(1<<C)-1;for(let M=P;M>=_;M-=1){let D=M-1,A=n[e.charAt(D)];if(y&&(b[D]=+!!A),O[M]=(O[M+1]<<1|1)&A,C&&(O[M]|=(w[M+1]|w[M])<<1|1|w[M+1]),O[M]&j&&(v=Cu(t,{errors:C,currentLocation:D,expectedLocation:m,distance:r,ignoreLocation:u}),v<=h)){if(h=v,p=D,p<=m)break;_=Math.max(1,2*m-p)}}if(Cu(t,{errors:C+1,currentLocation:m,expectedLocation:m,distance:r,ignoreLocation:u})>h)break;w=O}const S={isMatch:p>=0,score:Math.max(.001,v)};if(y){const C=e8(b,l);C.length?c&&(S.indices=C):S.isMatch=!1}return S}function n8(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<s-n-1}return t}const Pd=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class hC{constructor(t,{location:n=me.location,threshold:s=me.threshold,distance:r=me.distance,includeMatches:a=me.includeMatches,findAllMatches:i=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,isCaseSensitive:c=me.isCaseSensitive,ignoreDiacritics:u=me.ignoreDiacritics,ignoreLocation:d=me.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:r,includeMatches:a,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d},t=c?t:t.toLowerCase(),t=u?Pd(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(h,p)=>{this.chunks.push({pattern:h,alphabet:n8(h),startIndex:p})},m=this.pattern.length;if(m>Ta){let h=0;const p=m%Ta,y=m-p;for(;h<y;)f(this.pattern.substr(h,Ta),h),h+=Ta;if(p){const b=m-Ta;f(this.pattern.substr(b),b)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r}=this.options;if(t=n?t:t.toLowerCase(),t=s?Pd(t):t,this.pattern===t){let y={isMatch:!0,score:0};return r&&(y.indices=[[0,t.length-1]]),y}const{location:a,distance:i,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:d}=this.options;let f=[],m=0,h=!1;this.chunks.forEach(({pattern:y,alphabet:b,startIndex:x})=>{const{isMatch:w,score:v,indices:N}=t8(t,y,b,{location:a+x,distance:i,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:r,ignoreLocation:d});w&&(h=!0),m+=v,w&&N&&(f=[...f,...N])});let p={isMatch:h,score:h?m/this.chunks.length:1};return h&&r&&(p.indices=f),p}}class ya{constructor(t){this.pattern=t}static isMultiMatch(t){return ib(t,this.multiRegex)}static isSingleMatch(t){return ib(t,this.singleRegex)}search(){}}function ib(e,t){const n=e.match(t);return n?n[1]:null}class s8 extends ya{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class r8 extends ya{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class a8 extends ya{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class o8 extends ya{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class i8 extends ya{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class l8 extends ya{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class gC extends ya{constructor(t,{location:n=me.location,threshold:s=me.threshold,distance:r=me.distance,includeMatches:a=me.includeMatches,findAllMatches:i=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,isCaseSensitive:c=me.isCaseSensitive,ignoreDiacritics:u=me.ignoreDiacritics,ignoreLocation:d=me.ignoreLocation}={}){super(t),this._bitapSearch=new hC(t,{location:n,threshold:s,distance:r,includeMatches:a,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class pC extends ya{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,s;const r=[],a=this.pattern.length;for(;(s=t.indexOf(this.pattern,n))>-1;)n=s+a,r.push([s,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const Ag=[s8,pC,a8,o8,l8,i8,r8,gC],lb=Ag.length,c8=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,u8="|";function d8(e,t={}){return e.split(u8).map(n=>{let s=n.trim().split(c8).filter(a=>a&&!!a.trim()),r=[];for(let a=0,i=s.length;a<i;a+=1){const l=s[a];let c=!1,u=-1;for(;!c&&++u<lb;){const d=Ag[u];let f=d.isMultiMatch(l);f&&(r.push(new d(f,t)),c=!0)}if(!c)for(u=-1;++u<lb;){const d=Ag[u];let f=d.isSingleMatch(l);if(f){r.push(new d(f,t));break}}}return r})}const f8=new Set([gC.type,pC.type]);class m8{constructor(t,{isCaseSensitive:n=me.isCaseSensitive,ignoreDiacritics:s=me.ignoreDiacritics,includeMatches:r=me.includeMatches,minMatchCharLength:a=me.minMatchCharLength,ignoreLocation:i=me.ignoreLocation,findAllMatches:l=me.findAllMatches,location:c=me.location,threshold:u=me.threshold,distance:d=me.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r,minMatchCharLength:a,findAllMatches:l,ignoreLocation:i,location:c,threshold:u,distance:d},t=n?t:t.toLowerCase(),t=s?Pd(t):t,this.pattern=t,this.query=d8(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r,ignoreDiacritics:a}=this.options;t=r?t:t.toLowerCase(),t=a?Pd(t):t;let i=0,l=[],c=0;for(let u=0,d=n.length;u<d;u+=1){const f=n[u];l.length=0,i=0;for(let m=0,h=f.length;m<h;m+=1){const p=f[m],{isMatch:y,indices:b,score:x}=p.search(t);if(y){if(i+=1,c+=x,s){const w=p.constructor.type;f8.has(w)?l=[...l,...b]:l.push(b)}}else{c=0,i=0,l.length=0;break}}if(i){let m={isMatch:!0,score:c/i};return s&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const Mg=[];function h8(...e){Mg.push(...e)}function Tg(e,t){for(let n=0,s=Mg.length;n<s;n+=1){let r=Mg[n];if(r.condition(e,t))return new r(e,t)}return new hC(e,t)}const Od={AND:"$and",OR:"$or"},Rg={PATH:"$path",PATTERN:"$val"},Dg=e=>!!(e[Od.AND]||e[Od.OR]),g8=e=>!!e[Rg.PATH],p8=e=>!xr(e)&&uC(e)&&!Dg(e),cb=e=>({[Od.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function xC(e,t,{auto:n=!0}={}){const s=r=>{let a=Object.keys(r);const i=g8(r);if(!i&&a.length>1&&!Dg(r))return s(cb(r));if(p8(r)){const c=i?r[Rg.PATH]:a[0],u=i?r[Rg.PATTERN]:r[c];if(!js(u))throw new Error(H6(c));const d={keyId:_g(c),pattern:u};return n&&(d.searcher=Tg(u,t)),d}let l={children:[],operator:a[0]};return a.forEach(c=>{const u=r[c];xr(u)&&u.forEach(d=>{l.children.push(s(d))})}),l};return Dg(e)||(e=cb(e)),s(e)}function x8(e,{ignoreFieldNorm:t=me.ignoreFieldNorm}){e.forEach(n=>{let s=1;n.matches.forEach(({key:r,norm:a,score:i})=>{const l=r?r.weight:null;s*=Math.pow(i===0&&l?Number.EPSILON:i,(l||1)*(t?1:a))}),n.score=s})}function y8(e,t){const n=e.matches;t.matches=[],vn(n)&&n.forEach(s=>{if(!vn(s.indices)||!s.indices.length)return;const{indices:r,value:a}=s;let i={indices:r,value:a};s.key&&(i.key=s.key.src),s.idx>-1&&(i.refIndex=s.idx),t.matches.push(i)})}function v8(e,t){t.score=e.score}function b8(e,t,{includeMatches:n=me.includeMatches,includeScore:s=me.includeScore}={}){const r=[];return n&&r.push(y8),s&&r.push(v8),e.map(a=>{const{idx:i}=a,l={item:t[i],refIndex:i};return r.length&&r.forEach(c=>{c(a,l)}),l})}class Wt{constructor(t,n={},s){this.options={...me,...n},this.options.useExtendedSearch,this._keyStore=new q6(this.options.keys),this.setCollection(t,s)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof l0))throw new Error(I6);this._myIndex=n||mC(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){vn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let s=0,r=this._docs.length;s<r;s+=1){const a=this._docs[s];t(a,s)&&(this.removeAt(s),s-=1,r-=1,n.push(a))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:a,sortFn:i,ignoreFieldNorm:l}=this.options;let c=js(t)?js(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return x8(c,{ignoreFieldNorm:l}),a&&c.sort(i),cC(n)&&n>-1&&(c=c.slice(0,n)),b8(c,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(t){const n=Tg(t,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:a,i,n:l})=>{if(!vn(a))return;const{isMatch:c,score:u,indices:d}=n.searchIn(a);c&&r.push({item:a,idx:i,matches:[{score:u,value:a,norm:l,indices:d}]})}),r}_searchLogical(t){const n=xC(t,this.options),s=(l,c,u)=>{if(!l.children){const{keyId:f,searcher:m}=l,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:m});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const d=[];for(let f=0,m=l.children.length;f<m;f+=1){const h=l.children[f],p=s(h,c,u);if(p.length)d.push(...p);else if(l.operator===Od.AND)return[]}return d},r=this._myIndex.records,a={},i=[];return r.forEach(({$:l,i:c})=>{if(vn(l)){let u=s(n,l,c);u.length&&(a[c]||(a[c]={idx:c,item:l,matches:[]},i.push(a[c])),u.forEach(({matches:d})=>{a[c].matches.push(...d)}))}}),i}_searchObjectList(t){const n=Tg(t,this.options),{keys:s,records:r}=this._myIndex,a=[];return r.forEach(({$:i,i:l})=>{if(!vn(i))return;let c=[];s.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:i[d],searcher:n}))}),c.length&&a.push({idx:l,item:i,matches:c})}),a}_findMatches({key:t,value:n,searcher:s}){if(!vn(n))return[];let r=[];if(xr(n))n.forEach(({v:a,i,n:l})=>{if(!vn(a))return;const{isMatch:c,score:u,indices:d}=s.searchIn(a);c&&r.push({score:u,key:t,value:a,idx:i,norm:l,indices:d})});else{const{v:a,n:i}=n,{isMatch:l,score:c,indices:u}=s.searchIn(a);l&&r.push({score:c,key:t,value:a,norm:i,indices:u})}return r}}Wt.version="7.1.0";Wt.createIndex=mC;Wt.parseIndex=J6;Wt.config=me;Wt.parseQuery=xC;h8(m8);function yC(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:l.description,group:l.group,statModifications:l.stat_modifications.map(d=>`${d.stat} ${d.type} ${d.value}${d.value_type==="percentage"?"%":""}`),skillBonuses:l.skill_bonuses.map(d=>`${d.stat} +${d.value}${d.value_type==="percentage"?"%":""}`),powers:l.powers.map(d=>`${d.name} ${d.description}`),conditionalEffects:((c=l.conditional_effects)==null?void 0:c.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],masteryEffects:((u=l.mastery_effects)==null?void 0:u.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],originalBirthsign:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"powers",weight:.2},{name:"statModifications",weight:.15},{name:"skillBonuses",weight:.15},{name:"conditionalEffects",weight:.1},{name:"masteryEffects",weight:.1},{name:"group",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Wt(n,s),[n,s]),a=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredBirthsigns:g.useMemo(()=>a.map(l=>l.item.originalBirthsign),[a]),searchResults:a,searchableBirthsigns:n}}function ub({birthsigns:e,onSelect:t,placeholder:n="Search birthsigns...",className:s=""}){const[r,a]=g.useState(""),{filteredBirthsigns:i}=yC(e,r),l=g.useMemo(()=>i.map(d=>({id:d.edid,label:d.name,description:d.description,category:d.group,icon:o.jsx(i0,{birthsignName:d.name,size:"md"}),badge:d.group&&o.jsx(X,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:d.group}),metadata:{originalBirthsign:d}})),[i]),c=d=>{const f=e.find(m=>m.edid===d.id);f&&t(f)},u=(d,f)=>o.jsxs("div",{className:"flex items-center gap-3",children:[d.icon&&o.jsx("div",{className:"flex-shrink-0",children:d.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:d.label}),d.badge&&o.jsx("div",{className:"flex-shrink-0",children:d.badge})]}),d.description&&o.jsx(Be,{text:d.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return o.jsx(Fc,{options:l,onSelect:c,placeholder:n,className:s,renderOption:u,emptyMessage:"No birthsigns found",searchQuery:r,onSearchQueryChange:a})}function Bd({item:e,originalBirthsign:t,isExpanded:n=!1,onToggle:s,onClick:r,className:a,showViewAllButton:i=!1,showToggle:l=!0,viewAllButtonText:c="View All",viewAllButtonRoute:u="/birthsigns"}){var S,C,E;const d=dt(),f=()=>{d(u)},m=k=>{k.target.closest("[data-no-click]")||r==null||r()},h=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Birthsign";e!=null&&e.description||t!=null&&t.description;const p=(e==null?void 0:e.category)||(t==null?void 0:t.group)||"";e!=null&&e.effects;const y=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"",b=()=>{if(!(t!=null&&t.stat_modifications))return{health:0,magicka:0,stamina:0};const k={health:0,magicka:0,stamina:0};return t.stat_modifications.forEach(_=>{const P=_.type==="bonus"?_.value:-_.value;_.stat.toLowerCase().includes("health")?k.health+=P:_.stat.toLowerCase().includes("magicka")?k.magicka+=P:_.stat.toLowerCase().includes("stamina")&&(k.stamina+=P)}),k},x=()=>{if(!t)return[];const k=[];return t.powers&&k.push(...t.powers.map(_=>({name:_.name,type:"power"}))),t.conditional_effects&&k.push(...t.conditional_effects.map(_=>({name:_.stat,type:"conditional"}))),t.mastery_effects&&k.push(...t.mastery_effects.map(_=>({name:_.stat,type:"mastery"}))),k},w=k=>{const _=k.toLowerCase();return _==="warrior"?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800":_==="mage"?"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800":_==="thief"?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":"bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30"},v=b(),N=x(),j=o.jsxs("div",{className:H("rounded-lg border bg-background shadow-sm transition-all",a),children:[o.jsxs("div",{className:"flex items-start justify-between p-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(i0,{birthsignName:h,size:"2xl"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(gt,{className:"text-primary font-semibold",children:h}),o.jsxs("div",{className:"flex items-center gap-2",children:[p&&o.jsx("div",{className:`inline-flex items-center justify-center px-2 py-1 border rounded-full text-xs font-medium w-16 ${w(p)}`,children:p}),(v.health!==0||v.magicka!==0||v.stamina!==0)&&o.jsxs("div",{className:"flex gap-1",children:[v.health!==0&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800 rounded-full text-xs font-medium",children:[o.jsx(zc,{className:"h-3 w-3"}),o.jsxs("span",{children:[v.health>0?"+":"",v.health]})]}),v.magicka!==0&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-full text-xs font-medium",children:[o.jsx(ca,{className:"h-3 w-3"}),o.jsxs("span",{children:[v.magicka>0?"+":"",v.magicka]})]}),v.stamina!==0&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800 rounded-full text-xs font-medium",children:[o.jsx(es,{className:"h-3 w-3"}),o.jsxs("span",{children:[v.stamina>0?"+":"",v.stamina]})]})]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[N.length>0&&o.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ye,{className:"h-3 w-3 text-yellow-500"}),o.jsxs("span",{children:[N.length," effects"]})]})}),i&&o.jsxs(K,{variant:"outline",size:"sm",onClick:f,className:"text-xs","data-no-click":!0,children:[o.jsx(Ga,{className:"h-3 w-3 mr-1"}),c]}),l&&o.jsx("div",{"data-no-click":!0,children:o.jsx(pa,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"stone",itemName:h})})]})]}),o.jsxs("div",{className:"space-y-3 px-4 pb-4",children:[o.jsx("div",{children:o.jsx(Be,{text:y})}),t&&o.jsxs("div",{className:"flex flex-wrap gap-2",children:[(S=t.powers)==null?void 0:S.slice(0,3).map((k,_)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[o.jsx(Ye,{className:"h-3 w-3"}),k.name]},_)),(C=t.conditional_effects)==null?void 0:C.slice(0,3).map((k,_)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-800 rounded-full text-xs font-medium",children:[o.jsx(es,{className:"h-3 w-3"}),k.stat]},`conditional-${_}`)),(E=t.mastery_effects)==null?void 0:E.slice(0,3).map((k,_)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-full text-xs font-medium",children:[o.jsx(Ye,{className:"h-3 w-3"}),k.stat]},`mastery-${_}`))]})]}),n&&t&&o.jsxs("div",{className:"space-y-4 px-4 pb-4",children:[t.stat_modifications&&t.stat_modifications.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ut,{className:"text-lg font-medium text-foreground",children:"Stat Modifications"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.stat_modifications.map((k,_)=>o.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[o.jsx("span",{className:"text-sm font-medium capitalize",children:k.stat}),o.jsxs("span",{className:H("font-bold",k.type==="bonus"?"text-green-600":"text-red-600"),children:[k.type==="bonus"?"+":"-",k.value,k.value_type==="percentage"?"%":""]})]},_))})]}),t.skill_bonuses&&t.skill_bonuses.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ut,{className:"text-lg font-medium text-foreground",children:"Skill Bonuses"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.skill_bonuses.map((k,_)=>o.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[o.jsx("span",{className:"text-sm font-medium capitalize",children:k.stat}),o.jsxs("span",{className:"font-bold text-green-600",children:["+",k.value,k.value_type==="percentage"?"%":""]})]},_))})]}),t.powers&&t.powers.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs(Ut,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[o.jsx(ca,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),o.jsx("div",{className:"space-y-2",children:t.powers.map((k,_)=>o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Ye,{className:"h-4 w-4 text-yellow-500"}),o.jsx("span",{className:"font-medium text-sm",children:k.name})]}),o.jsx(Be,{text:k.description}),(k.magnitude||k.duration)&&o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-2",children:[k.magnitude&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Magnitude:"})," ",k.magnitude]}),k.duration&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Duration:"})," ",k.duration,"s"]})]})]},_))})]}),t.conditional_effects&&t.conditional_effects.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs(Ut,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[o.jsx(es,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),o.jsx("div",{className:"space-y-2",children:t.conditional_effects.map((k,_)=>o.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[o.jsx("div",{className:"flex items-center gap-2 mb-1",children:o.jsx("span",{className:"font-medium text-sm capitalize",children:k.stat})}),o.jsx(Be,{text:k.description}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.jsx("strong",{children:"Condition:"})," ",k.condition]})]},_))})]}),t.mastery_effects&&t.mastery_effects.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs(Ut,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[o.jsx(Ye,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),o.jsx("div",{className:"space-y-2",children:t.mastery_effects.map((k,_)=>o.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Ye,{className:"h-4 w-4 text-yellow-500"}),o.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),o.jsx("div",{className:"text-sm font-medium capitalize",children:k.stat}),o.jsx(Be,{text:k.description}),k.condition&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.jsx("strong",{children:"Requirement:"})," ",k.condition]})]},_))})]})]})]});return r?o.jsx("div",{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:m,children:j}):j}function w8(e){const t=e.map(n=>n.group);return[...new Set(t)].sort()}function N8(e){const t=e.flatMap(n=>[...n.stat_modifications.map(s=>s.stat),...n.skill_bonuses.map(s=>s.stat)]);return[...new Set(t)].sort()}var j8="Separator",db="horizontal",S8=["horizontal","vertical"],vC=g.forwardRef((e,t)=>{const{decorative:n,orientation:s=db,...r}=e,a=C8(s)?s:db,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return o.jsx(xe.div,{"data-orientation":a,...l,...r,ref:t})});vC.displayName=j8;function C8(e){return S8.includes(e)}var k8=vC;function bC({className:e,orientation:t="horizontal",decorative:n=!0,...s}){return o.jsx(k8,{"data-slot":"separator",decorative:n,orientation:t,className:H("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}function E8({birthsign:e,title:t,maxDisplay:n,compact:s=!1,className:r}){var c,u,d,f;if(!e)return null;const a=e.powers.length>0,i=((c=e.conditional_effects)==null?void 0:c.length)>0,l=((u=e.mastery_effects)==null?void 0:u.length)>0;if(!a&&!i&&!l)return null;if(s){const m=[...e.powers.map(p=>({type:"power",data:p})),...((d=e.conditional_effects)==null?void 0:d.map(p=>({type:"conditional",data:p})))||[],...((f=e.mastery_effects)==null?void 0:f.map(p=>({type:"mastery",data:p})))||[]],h=n?m.slice(0,n):m;return o.jsxs("div",{className:H("flex flex-wrap gap-2",r),children:[h.map((p,y)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[o.jsx(Ye,{className:"h-3 w-3"}),p.data.name||p.data.stat]},y)),n&&m.length>n&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted text-muted-foreground border rounded-full text-xs font-medium",children:["+",m.length-n," more"]})]})}return o.jsxs(be,{className:H("border-muted/50",r),children:[t&&o.jsx(Te,{className:"pb-3",children:o.jsx(Fe,{className:"text-base",children:t})}),o.jsxs(we,{className:"space-y-4",children:[a&&o.jsxs("div",{children:[o.jsxs(ti,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[o.jsx(ca,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),o.jsx("div",{className:"space-y-2",children:e.powers.map((m,h)=>o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Ye,{className:"h-4 w-4 text-yellow-500"}),o.jsx("span",{className:"font-medium text-sm",children:m.name})]}),o.jsx("div",{className:"border-t border-border my-2"}),o.jsx(Be,{text:m.description}),(m.magnitude||m.duration)&&o.jsxs("div",{className:"space-y-2 text-sm mt-2",children:[m.magnitude&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium min-w-[80px]",children:"Magnitude:"}),o.jsx("span",{children:m.magnitude})]}),m.duration&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium min-w-[80px]",children:"Duration:"}),o.jsxs("span",{children:[m.duration,"s"]})]})]})]},h))})]}),i&&o.jsxs("div",{children:[o.jsxs(ti,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[o.jsx(es,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),o.jsx("div",{className:"space-y-2",children:e.conditional_effects.map((m,h)=>o.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(X,{variant:"outline",className:"text-xs bg-purple-100 text-purple-800 border-purple-200",children:"Conditional"}),o.jsx("span",{className:"font-medium text-sm capitalize",children:m.stat})]}),o.jsx(Be,{text:m.description}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.jsx("strong",{children:"Condition:"})," ",m.condition]})]},h))})]}),l&&o.jsxs("div",{children:[o.jsxs(ti,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[o.jsx(Ye,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),o.jsx("div",{className:"space-y-2",children:e.mastery_effects.map((m,h)=>o.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Ye,{className:"h-4 w-4 text-yellow-500"}),o.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),o.jsx("div",{className:"border-t border-border my-2"}),o.jsx("div",{className:"text-sm font-medium capitalize",children:m.stat}),o.jsx(Be,{text:m.description}),m.condition&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.jsx("strong",{children:"Requirement:"})," ",m.condition]})]},h))})]})]})]})}function _8({birthsign:e,title:t="Stat Modifications",className:n}){const s=e.stat_modifications.length>0,r=e.skill_bonuses.length>0;return!s&&!r?null:o.jsxs(be,{className:H("border-muted/50",n),children:[o.jsx(Te,{className:"pb-3",children:o.jsx(Fe,{className:"text-base",children:t})}),o.jsxs(we,{className:"space-y-4",children:[s&&o.jsxs("div",{children:[o.jsx(ti,{className:"text-sm font-medium mb-2",children:"Attributes"}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.stat_modifications.map((a,i)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[o.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:a.stat.replace(/_/g," ")}),o.jsxs(X,{variant:"outline",className:H("text-xs flex-shrink-0",a.type==="bonus"?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"),children:[a.type==="bonus"?"+":"-",a.value,a.value_type==="percentage"?"%":""]})]},i))})]}),r&&o.jsxs("div",{children:[o.jsx(ti,{className:"text-sm font-medium mb-2",children:"Skill Bonuses"}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.skill_bonuses.map((a,i)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[o.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:a.stat.replace(/_/g," ")}),o.jsxs(X,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200 text-xs flex-shrink-0",children:["+",a.value,a.value_type==="percentage"?"%":""]})]},i))})]})]})]})}function A8({birthsign:e,isOpen:t,onOpenChange:n}){return e?o.jsx(lC,{open:t,onOpenChange:n,side:"right",children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx(i0,{birthsignName:e.name,size:"4xl"}),o.jsxs("div",{className:"flex-1",children:[o.jsx(za,{className:"text-2xl font-bold mb-2",children:e.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"inline-flex items-center px-2 py-1 bg-skyrim-gold/10 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:e.group}),o.jsx(pa,{itemId:e.edid,itemType:"stone",itemName:e.name})]}),o.jsx(Be,{text:e.description})]})]})}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(_8,{birthsign:e}),o.jsx(bC,{}),o.jsx(E8,{birthsign:e,title:"Special Effects"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(gt,{className:"text-lg font-semibold",children:"Game Information"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[o.jsx("span",{className:"font-medium min-w-[60px]",children:"EDID:"}),o.jsx("span",{className:"break-all",children:e.edid})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[o.jsx("span",{className:"font-medium min-w-[60px]",children:"Form ID:"}),o.jsx("span",{className:"break-all",children:e.formid})]})]})]})]})]})}):null}function wC({children:e,columns:t=2,gap:n="md",className:s}){const r={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},a={sm:"gap-3",md:"gap-4",lg:"gap-6"};return o.jsx("div",{className:H("grid",r[t],a[n],s),children:e})}function M8({children:e,columns:t=2,gap:n="md",className:s}){const r={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"},a={sm:"gap-2",md:"gap-4",lg:"gap-6"};return o.jsx("div",{className:H("grid",r[t],a[n],s),children:e})}var tm="Collapsible",[T8,NC]=un(tm),[R8,c0]=T8(tm),jC=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:r,disabled:a,onOpenChange:i,...l}=e,[c,u]=Yn({prop:s,defaultProp:r??!1,onChange:i,caller:tm});return o.jsx(R8,{scope:n,disabled:a,contentId:ur(),open:c,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),children:o.jsx(xe.div,{"data-state":d0(c),"data-disabled":a?"":void 0,...l,ref:t})})});jC.displayName=tm;var SC="CollapsibleTrigger",CC=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,r=c0(SC,n);return o.jsx(xe.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":d0(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:t,onClick:te(e.onClick,r.onOpenToggle)})});CC.displayName=SC;var u0="CollapsibleContent",kC=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=c0(u0,e.__scopeCollapsible);return o.jsx(Zt,{present:n||r.open,children:({present:a})=>o.jsx(D8,{...s,ref:t,present:a})})});kC.displayName=u0;var D8=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:r,...a}=e,i=c0(u0,n),[l,c]=g.useState(s),u=g.useRef(null),d=$e(t,u),f=g.useRef(0),m=f.current,h=g.useRef(0),p=h.current,y=i.open||l,b=g.useRef(y),x=g.useRef(void 0);return g.useEffect(()=>{const w=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(w)},[]),Ts(()=>{const w=u.current;if(w){x.current=x.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const v=w.getBoundingClientRect();f.current=v.height,h.current=v.width,b.current||(w.style.transitionDuration=x.current.transitionDuration,w.style.animationName=x.current.animationName),c(s)}},[i.open,s]),o.jsx(xe.div,{"data-state":d0(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!y,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:y&&r})});function d0(e){return e?"open":"closed"}var z8=jC,L8=CC,$8=kC,cs="Accordion",P8=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[f0,O8,B8]=Tx(cs),[nm,Eee]=un(cs,[B8,NC]),m0=NC(),EC=L.forwardRef((e,t)=>{const{type:n,...s}=e,r=s,a=s;return o.jsx(f0.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?o.jsx(F8,{...a,ref:t}):o.jsx(U8,{...r,ref:t})})});EC.displayName=cs;var[_C,I8]=nm(cs),[AC,H8]=nm(cs,{collapsible:!1}),U8=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},collapsible:a=!1,...i}=e,[l,c]=Yn({prop:n,defaultProp:s??"",onChange:r,caller:cs});return o.jsx(_C,{scope:e.__scopeAccordion,value:L.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:L.useCallback(()=>a&&c(""),[a,c]),children:o.jsx(AC,{scope:e.__scopeAccordion,collapsible:a,children:o.jsx(MC,{...i,ref:t})})})}),F8=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...a}=e,[i,l]=Yn({prop:n,defaultProp:s??[],onChange:r,caller:cs}),c=L.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=L.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return o.jsx(_C,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:u,children:o.jsx(AC,{scope:e.__scopeAccordion,collapsible:!0,children:o.jsx(MC,{...a,ref:t})})})}),[V8,sm]=nm(cs),MC=L.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:r,orientation:a="vertical",...i}=e,l=L.useRef(null),c=$e(l,t),u=O8(n),f=Yi(r)==="ltr",m=te(e.onKeyDown,h=>{var E;if(!P8.includes(h.key))return;const p=h.target,y=u().filter(k=>{var _;return!((_=k.ref.current)!=null&&_.disabled)}),b=y.findIndex(k=>k.ref.current===p),x=y.length;if(b===-1)return;h.preventDefault();let w=b;const v=0,N=x-1,j=()=>{w=b+1,w>N&&(w=v)},S=()=>{w=b-1,w<v&&(w=N)};switch(h.key){case"Home":w=v;break;case"End":w=N;break;case"ArrowRight":a==="horizontal"&&(f?j():S());break;case"ArrowDown":a==="vertical"&&j();break;case"ArrowLeft":a==="horizontal"&&(f?S():j());break;case"ArrowUp":a==="vertical"&&S();break}const C=w%x;(E=y[C].ref.current)==null||E.focus()});return o.jsx(V8,{scope:n,disabled:s,direction:r,orientation:a,children:o.jsx(f0.Slot,{scope:n,children:o.jsx(xe.div,{...i,"data-orientation":a,ref:c,onKeyDown:s?void 0:m})})})}),Id="AccordionItem",[q8,h0]=nm(Id),TC=L.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...r}=e,a=sm(Id,n),i=I8(Id,n),l=m0(n),c=ur(),u=s&&i.value.includes(s)||!1,d=a.disabled||e.disabled;return o.jsx(q8,{scope:n,open:u,disabled:d,triggerId:c,children:o.jsx(z8,{"data-orientation":a.orientation,"data-state":PC(u),...l,...r,ref:t,disabled:d,open:u,onOpenChange:f=>{f?i.onItemOpen(s):i.onItemClose(s)}})})});TC.displayName=Id;var RC="AccordionHeader",DC=L.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=sm(cs,n),a=h0(RC,n);return o.jsx(xe.h3,{"data-orientation":r.orientation,"data-state":PC(a.open),"data-disabled":a.disabled?"":void 0,...s,ref:t})});DC.displayName=RC;var zg="AccordionTrigger",zC=L.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=sm(cs,n),a=h0(zg,n),i=H8(zg,n),l=m0(n);return o.jsx(f0.ItemSlot,{scope:n,children:o.jsx(L8,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":r.orientation,id:a.triggerId,...l,...s,ref:t})})});zC.displayName=zg;var LC="AccordionContent",$C=L.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=sm(cs,n),a=h0(LC,n),i=m0(n);return o.jsx($8,{role:"region","aria-labelledby":a.triggerId,"data-orientation":r.orientation,...i,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});$C.displayName=LC;function PC(e){return e?"open":"closed"}var Z8=EC,G8=TC,Y8=DC,OC=zC,BC=$C;const IC=Z8,g0=g.forwardRef(({className:e,...t},n)=>o.jsx(G8,{ref:n,className:H("border-b",e),...t}));g0.displayName="AccordionItem";const p0=g.forwardRef(({className:e,children:t,...n},s)=>o.jsx(Y8,{className:"flex",children:o.jsxs(OC,{ref:s,className:H("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,o.jsx(Vn,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));p0.displayName=OC.displayName;const x0=g.forwardRef(({className:e,children:t,...n},s)=>o.jsx(BC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:o.jsx("div",{className:H("pb-4 pt-0",e),children:t})}));x0.displayName=BC.displayName;function X8({children:e,title:t="Customize Display",description:n="Configure what information to show",defaultOpen:s=!1,className:r}){return o.jsx(IC,{type:"single",collapsible:!0,defaultValue:s?"customize-display":void 0,className:r,children:o.jsxs(g0,{value:"customize-display",className:"border-none",children:[o.jsx(p0,{className:"hover:no-underline",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zN,{className:"h-4 w-4"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium",children:t}),o.jsx("div",{className:"text-sm text-muted-foreground",children:n})]})]})}),o.jsx(x0,{children:o.jsx("div",{className:"space-y-4 pt-2",children:e})})]})})}var W8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),K8="VisuallyHidden",HC=g.forwardRef((e,t)=>o.jsx(xe.span,{...e,ref:t,style:{...W8,...e.style}}));HC.displayName=K8;var Q8=HC,[rm,_ee]=un("Tooltip",[el]),y0=el(),J8="TooltipProvider",fb="tooltip.open",[Aee,UC]=rm(J8),FC="Tooltip",[Mee,am]=rm(FC),Lg="TooltipTrigger",eB=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=am(Lg,n),a=UC(Lg,n),i=y0(n),l=g.useRef(null),c=$e(t,l,r.onTriggerChange),u=g.useRef(!1),d=g.useRef(!1),f=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(Vx,{asChild:!0,...i,children:o.jsx(xe.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:c,onPointerMove:te(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(r.onTriggerEnter(),d.current=!0)}),onPointerLeave:te(e.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:te(e.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:te(e.onFocus,()=>{u.current||r.onOpen()}),onBlur:te(e.onBlur,r.onClose),onClick:te(e.onClick,r.onClose)})})});eB.displayName=Lg;var tB="TooltipPortal",[Tee,nB]=rm(tB,{forceMount:void 0}),ji="TooltipContent",VC=g.forwardRef((e,t)=>{const n=nB(ji,e.__scopeTooltip),{forceMount:s=n.forceMount,side:r="top",...a}=e,i=am(ji,e.__scopeTooltip);return o.jsx(Zt,{present:s||i.open,children:i.disableHoverableContent?o.jsx(qC,{side:r,...a,ref:t}):o.jsx(sB,{side:r,...a,ref:t})})}),sB=g.forwardRef((e,t)=>{const n=am(ji,e.__scopeTooltip),s=UC(ji,e.__scopeTooltip),r=g.useRef(null),a=$e(t,r),[i,l]=g.useState(null),{trigger:c,onClose:u}=n,d=r.current,{onPointerInTransitChange:f}=s,m=g.useCallback(()=>{l(null),f(!1)},[f]),h=g.useCallback((p,y)=>{const b=p.currentTarget,x={x:p.clientX,y:p.clientY},w=lB(x,b.getBoundingClientRect()),v=cB(x,w),N=uB(y.getBoundingClientRect()),j=fB([...v,...N]);l(j),f(!0)},[f]);return g.useEffect(()=>()=>m(),[m]),g.useEffect(()=>{if(c&&d){const p=b=>h(b,d),y=b=>h(b,c);return c.addEventListener("pointerleave",p),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",p),d.removeEventListener("pointerleave",y)}}},[c,d,h,m]),g.useEffect(()=>{if(i){const p=y=>{const b=y.target,x={x:y.clientX,y:y.clientY},w=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),v=!dB(x,i);w?m():v&&(m(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,d,i,u,m]),o.jsx(qC,{...e,ref:a})}),[rB,aB]=rm(FC,{isInside:!1}),oB=q5("TooltipContent"),qC=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=am(ji,n),u=y0(n),{onClose:d}=c;return g.useEffect(()=>(document.addEventListener(fb,d),()=>document.removeEventListener(fb,d)),[d]),g.useEffect(()=>{if(c.trigger){const f=m=>{const h=m.target;h!=null&&h.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),o.jsx(Oc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:o.jsxs(qx,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(oB,{children:s}),o.jsx(rB,{scope:n,isInside:!0,children:o.jsx(Q8,{id:c.contentId,role:"tooltip",children:r||s})})]})})});VC.displayName=ji;var ZC="TooltipArrow",iB=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=y0(n);return aB(ZC,n).isInside?null:o.jsx(Zx,{...r,...s,ref:t})});iB.displayName=ZC;function lB(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,s,r,a)){case a:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function cB(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function uB(e){const{top:t,right:n,bottom:s,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:s},{x:r,y:s}]}function dB(e,t){const{x:n,y:s}=e;let r=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,d=l.y,f=c.x,m=c.y;d>s!=m>s&&n<(f-u)*(s-d)/(m-d)+u&&(r=!r)}return r}function fB(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),mB(t)}function mB(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const r=e[s];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(r.y-i.y)>=(a.y-i.y)*(r.x-i.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const r=e[s];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(r.y-i.y)>=(a.y-i.y)*(r.x-i.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var GC=VC;const hB=g.forwardRef(({className:e,sideOffset:t=4,...n},s)=>o.jsx(GC,{ref:s,sideOffset:t,className:H("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));hB.displayName=GC.displayName;function Bn({title:e,navigateTo:t,onNavigate:n,children:s,className:r,showHeaderButton:a=!0}){return o.jsxs(be,{className:r,children:[o.jsx(Te,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Fe,{className:"text-lg",children:e}),a&&o.jsxs(K,{variant:"outline",size:"sm",onClick:n,className:"text-sm whitespace-nowrap cursor-pointer",children:["View all ",t," "]})]})}),o.jsx(we,{className:"space-y-4",children:s})]})}function ku({title:e,description:t,checked:n,onCheckedChange:s,className:r,disabled:a=!1,onClick:i,showSwitch:l=!0}){const c=()=>{i?i():a||s(!n)};return o.jsxs("div",{className:H("flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm flex-1 min-h-[80px] cursor-pointer hover:bg-muted/50 transition-colors",a&&"opacity-50 cursor-not-allowed",r),onClick:c,children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(cc,{className:"text-base font-medium",children:e}),t&&o.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),l&&o.jsx(Vf,{checked:n,onCheckedChange:s,disabled:a})]})}function $g(e){var t,n,s,r,a,i;return{id:`religion-${e.name.toLowerCase().replace(/\s+/g,"-")}`,name:e.name,description:((t=e.tenet)==null?void 0:t.description)||"",tags:Xt()?e.favoredRaces||[]:[],summary:((n=e.tenet)==null?void 0:n.description)||"",effects:[...((r=(s=e.tenet)==null?void 0:s.effects)==null?void 0:r.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[],...((i=(a=e.blessing)==null?void 0:a.effects)==null?void 0:i.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[]],associatedItems:[],imageUrl:void 0,category:e.type}}function mb(e){var t;return{...e,id:e.edid||e.name,name:e.name,description:e.description,tags:e.tags||[],summary:e.description,effects:[...((t=e.effects)==null?void 0:t.map(n=>({type:"positive",name:n.type,description:n.condition||n.type,value:n.value})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalTrait:e}}function YC(e){var s,r,a,i,l,c,u,d;const t=[...((s=e.stat_modifications)==null?void 0:s.map(f=>({type:f.type==="bonus"?"positive":"negative",name:`${f.stat} ${f.type==="bonus"?"+":"-"}${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} ${f.type==="bonus"?"increased":"decreased"} by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((r=e.skill_bonuses)==null?void 0:r.map(f=>({type:"positive",name:`${f.stat} +${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} skill increased by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((a=e.powers)==null?void 0:a.map(f=>({type:"positive",name:f.name,description:f.description,value:f.magnitude||0,target:"power"})))||[],...((i=e.conditional_effects)==null?void 0:i.map(f=>({type:"neutral",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[],...((l=e.mastery_effects)==null?void 0:l.map(f=>({type:"positive",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[]],n=[e.group,...((c=e.stat_modifications)==null?void 0:c.map(f=>f.stat))||[],...((u=e.skill_bonuses)==null?void 0:u.map(f=>f.stat))||[],...((d=e.powers)==null?void 0:d.map(f=>f.name))||[]].filter((f,m,h)=>h.indexOf(f)===m);return{...e,id:e.id||e.edid,name:e.name,description:e.description,tags:n,summary:e.description,effects:t,associatedItems:[],imageUrl:void 0,category:e.group,originalBirthsign:e}}function gB(e){var s;const t=[{type:"positive",name:e.name,description:e.description||"",value:0,target:"destiny"}],n=[...e.tags||[],...((s=e.prerequisites)==null?void 0:s.map(r=>`Requires: ${r}`))||[]].filter((r,a,i)=>i.indexOf(r)===a);return{...e,id:e.id||e.edid,name:e.name,description:e.description||"",tags:n,summary:e.description||"",effects:t,associatedItems:[],imageUrl:e.icon,category:"Destiny",originalDestinyNode:e}}function pB(){const{data:e,loading:t,error:n,load:s}=mo();return{birthsigns:e,loading:t,error:n,refetch:s}}function xB({className:e}){const{birthsigns:t}=pB(),{build:n,setStone:s}=wt(),r=dt(),a=n.stone?t.find(u=>u.edid===n.stone):null,i=u=>{s(u.edid)},l=()=>{r("/birth-signs")};if(!a)return o.jsxs(Bn,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's birthsign"}),o.jsx(ub,{birthsigns:t,onSelect:i,placeholder:"Search for a birthsign...",className:"w-full"})]});const c=YC(a);return o.jsxs(Bn,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[o.jsx(ub,{birthsigns:t,onSelect:i,placeholder:`Birth Sign: Select a birthsign (${a.name})`,className:"w-full"}),o.jsx(Bd,{item:c,originalBirthsign:a,isExpanded:!0,className:"border-0 shadow-none",showToggle:!1})]})}const yB={selectedTags:[],sortBy:"alphabetical",viewMode:"grid",expandedBirthsigns:new Set};function vB(e,t){switch(t.type){case"ADD_TAG":return e.selectedTags.some(n=>n.value===t.payload.value&&n.category===t.payload.category)?e:{...e,selectedTags:[...e.selectedTags,t.payload]};case"REMOVE_TAG":return{...e,selectedTags:e.selectedTags.filter(n=>n.id!==t.payload)};case"SET_SORT":return{...e,sortBy:t.payload};case"SET_VIEW_MODE":return{...e,viewMode:t.payload};case"TOGGLE_EXPANDED":{const n=new Set(e.expandedBirthsigns);return n.has(t.payload)?n.delete(t.payload):n.add(t.payload),{...e,expandedBirthsigns:n}}case"EXPAND_ALL":return{...e,expandedBirthsigns:new Set(t.payload)};case"COLLAPSE_ALL":return{...e,expandedBirthsigns:new Set};default:return e}}function bB(e){const[t,n]=g.useReducer(vB,yB),s=g.useMemo(()=>{const b=w8(e),x=N8(e);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"groups",name:"Birthsign Groups",placeholder:"Search by birthsign group...",options:b.map(w=>({id:`group-${w}`,label:w,value:w,category:"Birthsign Groups",description:`Birthsigns from ${w} group`}))},{id:"stats",name:"Stats & Skills",placeholder:"Search by stats and skills...",options:x.map(w=>({id:`stat-${w}`,label:w.replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase()),value:w,category:"Stats & Skills",description:`Birthsigns that affect ${w}`}))}]},[e]),r=g.useMemo(()=>t.selectedTags.length===0?e:e.filter(b=>t.selectedTags.every(x=>{switch(x.category){case"Fuzzy Search":return!0;case"Birthsign Groups":return b.group===x.value;case"Stats & Skills":return[...b.stat_modifications.map(v=>v.stat),...b.skill_bonuses.map(v=>v.stat)].some(v=>v===x.value);default:return!0}})),[e,t.selectedTags]),a=g.useMemo(()=>t.selectedTags.filter(b=>b.category==="Fuzzy Search").map(b=>b.value).join(" "),[t.selectedTags]),{filteredBirthsigns:i}=yC(r,a),l=g.useMemo(()=>i.map(YC),[i]),c=g.useMemo(()=>[...l].sort((b,x)=>{var w,v;switch(t.sortBy){case"alphabetical":return b.name.localeCompare(x.name);case"group":{const N=C=>{switch(C){case"Warrior":return 1;case"Mage":return 2;case"Thief":return 3;case"Serpent":return 4;case"Other":return 5;default:return 6}},j=N(b.category),S=N(x.category);return j!==S?j-S:b.name.localeCompare(x.name)}case"power-count":{const N=((w=b.effects)==null?void 0:w.filter(S=>S.target==="power").length)||0,j=((v=x.effects)==null?void 0:v.filter(S=>S.target==="power").length)||0;return N!==j?j-N:b.name.localeCompare(x.name)}default:return 0}}),[l,t.sortBy]),u=g.useCallback(b=>{n({type:"ADD_TAG",payload:b})},[]),d=g.useCallback(b=>{n({type:"REMOVE_TAG",payload:b})},[]),f=g.useCallback(b=>{n({type:"SET_SORT",payload:b})},[]),m=g.useCallback(b=>{n({type:"SET_VIEW_MODE",payload:b})},[]),h=g.useCallback(b=>{n({type:"TOGGLE_EXPANDED",payload:b})},[]),p=g.useCallback(b=>{n({type:"EXPAND_ALL",payload:b})},[]),y=g.useCallback(()=>{n({type:"COLLAPSE_ALL"})},[]);return{...t,addTag:u,removeTag:d,setSort:f,setViewMode:m,toggleExpanded:h,expandAll:p,collapseAll:y,searchCategories:s,fuzzySearchQuery:a,filteredBirthsigns:r,displayItems:l,sortedDisplayItems:c}}function wB(){const{data:e,loading:t,error:n}=v6(),s=e||[],{selectedTags:r,sortBy:a,viewMode:i,addTag:l,removeTag:c,setSort:u,setViewMode:d,searchCategories:f,filteredBirthsigns:m,displayItems:h,sortedDisplayItems:p}=bB(s);g.useEffect(()=>{console.log("birthsigns",s),console.log("sortedDisplayItems",p),console.log("displayItems",h),console.log("filteredBirthsigns",m)},[s,p,h,m]);const[y,b]=g.useState(null),[x,w]=g.useState(!1),v=N=>{b(N),w(!0)};return t?o.jsx(Un,{title:"Birthsigns",description:"Choose your birthsign",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("p",{children:"Loading birthsigns..."})})}):n?o.jsx(Un,{title:"Birthsigns",description:"Choose your birthsign",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("p",{className:"text-red-500",children:["Error loading birthsigns: ",n]})})}):o.jsxs(Un,{title:"Birth Signs",description:"Choose your character's birthsign to gain unique abilities and bonuses based on the celestial constellations.",children:[o.jsx("div",{className:"flex items-center gap-4 mb-4",children:o.jsx("div",{className:"flex-1",children:o.jsx(xa,{categories:f,onSelect:N=>{let j;typeof N=="string"?j={id:`custom-${N}`,label:N,value:N,category:"Fuzzy Search"}:j={id:`${N.category}-${N.id}`,label:N.label,value:N.value,category:N.category},r.some(S=>S.value===j.value&&S.category===j.category)||l(j)},onCustomSearch:N=>{let j;typeof N=="string"?j={id:`custom-${N}`,label:N,value:N,category:"Fuzzy Search"}:j={id:`${N.category}-${N.id}`,label:N.label,value:N.value,category:N.category},r.some(S=>S.value===j.value&&S.category===j.category)||l(j)}})})}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(K,{variant:i==="grid"?"default":"outline",size:"sm",onClick:()=>d("grid"),className:"flex items-center gap-2",children:[o.jsx(Fi,{className:"h-4 w-4"}),"Grid"]}),o.jsxs(K,{variant:i==="list"?"default":"outline",size:"sm",onClick:()=>d("list"),className:"flex items-center gap-2",children:[o.jsx(oo,{className:"h-4 w-4"}),"List"]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(e0,{children:[o.jsx(t0,{asChild:!0,children:o.jsxs(K,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort:"," ",a==="alphabetical"?"A-Z":a==="group"?"Group":"Power Count",o.jsx(Vn,{className:"h-4 w-4"})]})}),o.jsxs(Kf,{align:"end",children:[o.jsx(dr,{onClick:()=>u("alphabetical"),children:"Alphabetical"}),o.jsx(dr,{onClick:()=>u("group"),children:"By Group"}),o.jsx(dr,{onClick:()=>u("power-count"),children:"By Power Count"})]})]})})]}),o.jsx("div",{className:"my-4",children:r.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:()=>r.forEach(N=>c(N.id)),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(qt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),r.map(N=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>c(N.id),title:"Click to remove",children:[N.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},N.id))]})}),i==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:p.map(N=>{const j=s.find(S=>S.id===N.id||S.edid===N.id);return j?o.jsx(Bd,{originalBirthsign:j,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>v(j)},N.id):null})}):o.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:p.map(N=>{const j=s.find(S=>S.id===N.id||S.edid===N.id);return j?o.jsx(Bd,{originalBirthsign:j,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>v(j)},N.id):null})}),p.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No birthsigns found matching your criteria."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),o.jsx(A8,{birthsign:y,isOpen:x,onOpenChange:w})]})}function NB(e={}){const{autoLoad:t=!0,refreshOnMount:n=!1}=e,{data:s,loading:r,error:a,load:i}=Js(),l=g.useCallback(async()=>{t&&s.length===0&&await i()},[t,s.length,i]),c=g.useCallback(async()=>{await i()},[i]),u=g.useCallback(()=>{},[]);g.useEffect(()=>{t&&s.length===0&&l()},[t,s.length,l]),g.useEffect(()=>{n&&c()},[n,c]);const d=s.length,f=[...new Set(s.map(j=>j.category).filter(Boolean))],m=[...new Set(s.flatMap(j=>j.effects.map(S=>S.name)))],h=[...new Set(s.flatMap(j=>j.ingredients))],p=new Date().toISOString(),y=s.length>0?{recipes:s,totalCount:d,categories:f,effects:m,ingredients:h,lastUpdated:p}:null,b=g.useCallback(j=>Js.getState().getByName(j),[]),x=g.useCallback(j=>Js.getState().getByCategory(j),[]),w=g.useCallback(j=>Js.getState().getByDifficulty(j),[]),v=g.useCallback(j=>Js.getState().getByIngredient(j),[]),N=g.useCallback(j=>Js.getState().getByEffect(j),[]);return{recipes:s,recipeData:y,loading:r,error:a,totalCount:d,categories:f,effects:m,ingredients:h,lastUpdated:p,loadRecipes:l,refresh:c,clearError:u,getRecipeByName:b,getRecipesByCategory:x,getRecipesByDifficulty:w,getRecipesByIngredient:v,getRecipesByEffect:N}}function jB(e,t={}){const{initialFilters:n={},enableSearch:s=!0,enableSorting:r=!0}=t,a=Array.isArray(e)?e:[],[i,l]=g.useState({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null,...n}),[c,u]=g.useState([]),[d,f]=g.useState("name"),[m,h]=g.useState("asc"),p=g.useCallback(T=>{c.some(R=>R.value===T.value&&R.category===T.category)||u(R=>[...R,T])},[c]),y=g.useCallback(T=>{u(R=>R.filter(B=>B.id!==T))},[]),b=g.useCallback(()=>{u([])},[]),x=g.useCallback(T=>{l(R=>({...R,searchTerm:T}))},[]),w=g.useCallback(T=>{l(R=>({...R,categories:T}))},[]),v=g.useCallback(T=>{l(R=>({...R,effects:T}))},[]),N=g.useCallback(T=>{l(R=>({...R,ingredients:T}))},[]),j=g.useCallback(T=>{l(R=>({...R,difficulties:T}))},[]),S=g.useCallback(T=>{l(R=>({...R,hasEffects:T}))},[]),C=g.useCallback(T=>{l(R=>({...R,isComplex:T}))},[]),E=g.useCallback((T,R)=>{l(B=>({...B,minIngredientCount:T,maxIngredientCount:R}))},[]),k=g.useCallback((T,R)=>{l(B=>({...B,minMagnitude:T,maxMagnitude:R}))},[]),_=g.useCallback(()=>{l({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null}),u([])},[]),P=g.useCallback(()=>{l(T=>({...T,searchTerm:""}))},[]),O=g.useCallback(T=>{h(T)},[]),$=g.useCallback(()=>{h(T=>T==="asc"?"desc":"asc")},[]),M=g.useMemo(()=>{let T=Ze.applyFilters(a,i);if(c.length>0){const R=c.reduce((B,U)=>{switch(U.category){case"categories":B.categories.push(U.value);break;case"effects":B.effects.push(U.value);break;case"ingredients":B.ingredients.push(U.value);break;case"difficulties":B.difficulties.push(U.value);break}return B},{categories:[],effects:[],ingredients:[],difficulties:[]});R.categories.length>0&&(T=Ze.filterByCategories(T,R.categories)),R.effects.length>0&&(T=Ze.filterByEffects(T,R.effects)),R.ingredients.length>0&&(T=Ze.filterByIngredients(T,R.ingredients)),R.difficulties.length>0&&(T=Ze.filterByDifficulties(T,R.difficulties))}return r&&(T=Ze.sort(T,d,m)),T},[a,i,c,r,d,m]),D=g.useMemo(()=>!s||!i.searchTerm.trim()?[]:Ze.search(a,i.searchTerm),[a,i.searchTerm,s]),A=g.useMemo(()=>i.searchTerm.trim()!==""||i.categories.length>0||i.effects.length>0||i.ingredients.length>0||i.difficulties.length>0||i.hasEffects!==null||i.isComplex!==null||i.minIngredientCount!==null||i.maxIngredientCount!==null||i.minMagnitude!==null||i.maxMagnitude!==null||c.length>0,[i,c]),z=g.useMemo(()=>{let T=0;return i.searchTerm.trim()&&T++,i.categories.length>0&&(T+=i.categories.length),i.effects.length>0&&(T+=i.effects.length),i.ingredients.length>0&&(T+=i.ingredients.length),i.difficulties.length>0&&(T+=i.difficulties.length),i.hasEffects!==null&&T++,i.isComplex!==null&&T++,(i.minIngredientCount!==null||i.maxIngredientCount!==null)&&T++,(i.minMagnitude!==null||i.maxMagnitude!==null)&&T++,T+=c.length,T},[i,c]);return{filters:i,searchTerm:i.searchTerm,selectedTags:c,setSelectedTags:u,addTagFilter:p,removeTagFilter:y,clearAllTags:b,filteredRecipes:M,searchResults:D,hasActiveFilters:A,filterCount:z,setSearchTerm:x,setCategories:w,setEffects:v,setIngredients:N,setDifficulties:j,setHasEffects:S,setIsComplex:C,setIngredientCountRange:E,setMagnitudeRange:k,clearFilters:_,clearSearch:P,sortBy:d,sortOrder:m,setSortBy:f,setSortOrder:O,toggleSortOrder:$}}function SB(e,t={}){const{enableStatistics:n=!0,enableGrouping:s=!0}=t,r=Array.isArray(e)?e:[],a=g.useMemo(()=>n?Ze.getStatistics(r):{totalRecipes:0,recipesByCategory:{},recipesByDifficulty:{},recipesByEffect:{},averageIngredientCount:0,averageEffectCount:0,mostCommonIngredients:[],mostCommonEffects:[]},[r,n]),i=g.useMemo(()=>{if(!s)return{};const v={};return r.forEach(N=>{const j=N.category||"Uncategorized";v[j]||(v[j]=[]),v[j].push(N)}),v},[r,s]),l=g.useMemo(()=>{if(!s)return{};const v={};return r.forEach(N=>{const j=N.difficulty;v[j]||(v[j]=[]),v[j].push(N)}),v},[r,s]),c=g.useMemo(()=>{if(!s)return{};const v={};return r.forEach(N=>{N.effects.forEach(j=>{v[j.name]||(v[j.name]=[]),v[j.name].push(N)})}),v},[r,s]),u=g.useMemo(()=>{if(!s)return{};const v={};return r.forEach(N=>{N.ingredients.forEach(j=>{v[j]||(v[j]=[]),v[j].push(N)})}),v},[r,s]),d=g.useMemo(()=>Ze.getUniqueCategories(r),[r]),f=g.useMemo(()=>Ze.getUniqueDifficulties(r),[r]),m=g.useMemo(()=>Ze.getUniqueEffects(r),[r]),h=g.useMemo(()=>Ze.getUniqueIngredients(r),[r]),p=g.useMemo(()=>[{name:"Recipe Categories",options:d},{name:"Effects",options:m},{name:"Ingredients",options:h},{name:"Difficulty",options:f}],[d,m,h,f]),y=g.useMemo(()=>(v,N)=>{const j=v.ingredientCount-N.ingredientCount,S=v.effectCount-N.effectCount,C=v.totalMagnitude-N.totalMagnitude,E=v.maxDuration-N.maxDuration,k=new Set(v.ingredients),_=new Set(N.ingredients),P=[...k].filter(R=>_.has(R)),O=[...k].filter(R=>!_.has(R)),$=[..._].filter(R=>!k.has(R)),M=new Set(v.effects.map(R=>R.name)),D=new Set(N.effects.map(R=>R.name)),A=[...M].filter(R=>D.has(R)),z=[...M].filter(R=>!D.has(R)),T=[...D].filter(R=>!M.has(R));return{recipe1:v,recipe2:N,differences:{ingredientCount:{difference:j,percentage:N.ingredientCount>0?j/N.ingredientCount*100:0},effectCount:{difference:S,percentage:N.effectCount>0?S/N.effectCount*100:0},magnitude:{difference:C,percentage:N.totalMagnitude>0?C/N.totalMagnitude*100:0},duration:{difference:E,percentage:N.maxDuration>0?E/N.maxDuration*100:0},ingredients:{added:O,removed:$,common:P},effects:{added:z,removed:T,common:A}}}},[]),b=g.useMemo(()=>v=>{if(v.ingredientCount===0)return 0;const N=v.totalMagnitude*v.maxDuration,j=v.ingredientCount;return N/j},[]),x=g.useMemo(()=>v=>{let N=0;switch(N+=v.ingredientCount*.3,N+=v.effectCount*.4,N+=v.effects.reduce((j,S)=>j+S.magnitude*S.duration*.1,0),v.difficulty){case"Simple":N+=1;break;case"Moderate":N+=2;break;case"Complex":N+=3;break}return Math.round(N*10)/10},[]),w=g.useMemo(()=>v=>Ze.getEffectComparisons(v,r),[r]);return{statistics:a,recipesByCategory:i,recipesByDifficulty:l,recipesByEffect:c,recipesByIngredient:u,availableCategories:d,availableDifficulties:f,availableEffects:m,availableIngredients:h,searchCategories:p,compareRecipes:y,getRecipeEfficiency:b,getRecipeComplexity:x,getEffectComparisons:w}}function v0({recipe:e,variant:t="default",onClick:n,isSelected:s=!1,showEffects:r=!0,showIngredients:a=!0,effectComparisons:i=[]}){const l=()=>{n==null||n()},c=b=>typeof b=="string"?b:b&&typeof b=="object"?b.item?b.item:b.name?b.name:b.label?b.label:b.id?b.id:"Unknown Ingredient":String(b||""),u=b=>typeof b=="string"?b:typeof b=="number"?b.toString():b&&typeof b=="object"?b.name?b.name:b.label?b.label:b.id?b.id:b.item?b.item:b.category?b.category:c(b):String(b||""),d=b=>o.jsx(Qr,{className:"h-4 w-4 text-green-500"}),f=b=>{if(typeof b=="string")return{name:b,count:1};if(b&&typeof b=="object"){const x=c(b),w=b.count||b.amount||1;return{name:x,count:w}}return{name:String(b||""),count:1}},m=b=>u(b.description||""),h=()=>o.jsxs(be,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[o.jsx(Te,{className:"pb-2",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-medium truncate",children:u(e.name)}),o.jsx("div",{className:"flex gap-1",children:e.category&&o.jsx(X,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),o.jsx(we,{className:"pt-0",children:o.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.ingredientCount," ingredients  ",e.effectCount," effects"]})})]}),p=()=>o.jsxs(be,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[o.jsx(Te,{className:"pb-3",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-medium truncate",children:u(e.name)}),e.description&&o.jsx(Be,{text:u(e.description),className:"text-sm text-muted-foreground mt-1 line-clamp-2",as:"p"})]}),o.jsx("div",{className:"flex flex-col gap-1 ml-2",children:e.category&&o.jsx(X,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),o.jsx(we,{className:"pt-0",children:o.jsxs("div",{className:"space-y-2",children:[a&&e.ingredients.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:["Ingredients (",e.ingredientCount,")"]}),o.jsx("div",{className:"space-y-1",children:e.ingredients.map((b,x)=>{const{name:w,count:v}=f(b);return o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-muted-foreground",children:w}),o.jsxs("span",{className:"font-medium",children:["",v]})]},x)})})]}),r&&e.effects.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:["Effects (",e.effectCount,")"]}),o.jsx("div",{className:"space-y-2",children:e.effects.map((b,x)=>o.jsx("div",{className:"p-2 bg-muted/50 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-2",children:[d(),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-xs mb-1",children:u(b.name)}),o.jsx("div",{className:"text-xs text-muted-foreground",children:o.jsx(Be,{text:m(b),className:"text-xs text-muted-foreground"})})]})]})},x))})]}),!1]})})]}),y=()=>o.jsxs(be,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[o.jsx(Te,{className:"pb-3",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-medium",children:u(e.name)}),e.description&&o.jsx(Be,{text:u(e.description),className:"text-sm text-muted-foreground mt-1",as:"p"})]}),o.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[e.category&&o.jsx(X,{variant:"secondary",className:"text-xs",children:u(e.category)}),e.type&&o.jsx(X,{variant:"outline",className:"text-xs",children:u(e.type)})]})]})}),o.jsx(we,{className:"pt-0",children:o.jsxs("div",{className:"space-y-3",children:[a&&e.ingredients.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-2",children:"Ingredients"}),o.jsx("div",{className:"space-y-2",children:e.ingredients.map((b,x)=>{const{name:w,count:v}=f(b);return o.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-lg",children:[o.jsx("span",{className:"text-sm",children:w}),o.jsxs("span",{className:"font-medium text-sm",children:["",v]})]},x)})})]}),r&&e.effects.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-3",children:"Effects"}),o.jsx("div",{className:"space-y-3",children:e.effects.map((b,x)=>o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-3",children:[d(),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-sm mb-1",children:u(b.name)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:o.jsx(Be,{text:m(b),className:"text-sm text-muted-foreground"})})]})]})},x))})]}),!1,o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t",children:[o.jsxs("span",{children:["Total Magnitude: ",e.totalMagnitude]}),o.jsxs("span",{children:["Max Duration: ",e.maxDuration,"s"]})]})]})})]});switch(t){case"compact":return h();case"detailed":return y();default:return p()}}function CB({recipes:e,variant:t="default",columns:n=3,onRecipeClick:s,selectedRecipes:r=[],showEffects:a=!0,showIngredients:i=!0,className:l,getEffectComparisons:c}){const u=()=>{const f="grid gap-4";switch(n){case 1:return`${f} grid-cols-1`;case 2:return`${f} grid-cols-1 sm:grid-cols-2`;case 3:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`;case 4:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4`;default:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`}},d=f=>{s==null||s(f)};return e.length===0?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"No recipes found"})})}):o.jsx("div",{className:u(),children:e.map(f=>o.jsx(v0,{recipe:f,variant:t,onClick:()=>d(f),isSelected:r.includes(f.name),showEffects:a,showIngredients:i,effectComparisons:(c==null?void 0:c(f))||[]},f.name))})}function kB({recipes:e,variant:t="default",onRecipeClick:n,selectedRecipes:s=[],showEffects:r=!0,showIngredients:a=!0,className:i,getEffectComparisons:l}){const c=u=>{n==null||n(u)};return e.length===0?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"No recipes found"})})}):o.jsx("div",{className:`space-y-3 ${i||""}`,children:e.map(u=>o.jsx(v0,{recipe:u,variant:t,onClick:()=>c(u),isSelected:s.includes(u.name),showEffects:r,showIngredients:a,effectComparisons:(l==null?void 0:l(u))||[]},u.name))})}function EB({currentMode:e,onModeChange:t,className:n}){return o.jsxs("div",{className:`flex border rounded-lg p-1 bg-muted ${n||""}`,children:[o.jsx(K,{variant:e==="list"?"default":"ghost",size:"sm",onClick:()=>t("list"),className:"h-8 px-3",title:"List view",children:o.jsx(oo,{className:"h-4 w-4"})}),o.jsx(K,{variant:e==="grid"?"default":"ghost",size:"sm",onClick:()=>t("grid"),className:"h-8 px-3",title:"Grid view",children:o.jsx(Fi,{className:"h-4 w-4"})})]})}function _B({statistics:e,className:t}){const{totalRecipes:n,foodRecipes:s,alcoholRecipes:r,recipesByCategory:a,recipesByDifficulty:i,averageIngredientCount:l,averageEffectCount:c,averageMagnitude:u,averageDuration:d,topEffects:f,topIngredients:m}=e,h=[{title:"Total Recipes",value:n,icon:BR,description:"All available recipes",color:"text-blue-600"},{title:"Food Recipes",value:s,icon:i3,description:"Culinary recipes",color:"text-green-600"},{title:"Alcohol Recipes",value:r,icon:c3,description:"Beverage recipes",color:"text-purple-600"},{title:"Avg Ingredients",value:l.toFixed(1),icon:Cd,description:"Per recipe",color:"text-orange-600"},{title:"Avg Effects",value:c.toFixed(1),icon:ca,description:"Per recipe",color:"text-yellow-600"},{title:"Avg Magnitude",value:u.toFixed(1),icon:mg,description:"Effect strength",color:"text-red-600"}];return o.jsxs("div",{className:`space-y-6 ${t||""}`,children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(p=>{const y=p.icon;return o.jsxs(be,{children:[o.jsxs(Te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Fe,{className:"text-sm font-medium",children:p.title}),o.jsx(y,{className:`h-4 w-4 ${p.color}`})]}),o.jsxs(we,{children:[o.jsx("div",{className:"text-2xl font-bold",children:p.value}),o.jsx("p",{className:"text-xs text-muted-foreground",children:p.description})]})]},p.title)})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(be,{children:[o.jsx(Te,{children:o.jsxs(Fe,{className:"flex items-center gap-2",children:[o.jsx(MN,{className:"h-4 w-4"}),"Recipe Categories"]})}),o.jsx(we,{children:o.jsxs("div",{className:"space-y-2",children:[Object.entries(a).sort(([,p],[,y])=>y-p).slice(0,8).map(([p,y])=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:p}),o.jsx(X,{variant:"secondary",className:"text-xs",children:y})]},p)),Object.keys(a).length>8&&o.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["+",Object.keys(a).length-8," more categories"]})]})})]}),o.jsxs(be,{children:[o.jsx(Te,{children:o.jsxs(Fe,{className:"flex items-center gap-2",children:[o.jsx(QR,{className:"h-4 w-4"}),"Recipe Difficulties"]})}),o.jsx(we,{children:o.jsx("div",{className:"space-y-2",children:Object.entries(i).sort(([,p],[,y])=>y-p).map(([p,y])=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:p}),o.jsx(X,{variant:p==="Simple"?"default":p==="Moderate"?"secondary":"destructive",className:"text-xs",children:y})]},p))})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(be,{children:[o.jsx(Te,{children:o.jsxs(Fe,{className:"flex items-center gap-2",children:[o.jsx(ca,{className:"h-4 w-4"}),"Most Common Effects"]})}),o.jsx(we,{children:o.jsx("div",{className:"space-y-2",children:f.slice(0,8).map((p,y)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:p.name}),o.jsxs(X,{variant:"outline",className:"text-xs",children:[p.count," recipes"]})]},p.name))})})]}),o.jsxs(be,{children:[o.jsx(Te,{children:o.jsxs(Fe,{className:"flex items-center gap-2",children:[o.jsx(Cd,{className:"h-4 w-4"}),"Most Common Ingredients"]})}),o.jsx(we,{children:o.jsx("div",{className:"space-y-2",children:m.slice(0,8).map((p,y)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:p.name}),o.jsxs(X,{variant:"outline",className:"text-xs",children:[p.count," recipes"]})]},p.name))})})]})]})]})}function AB({recipes:e,className:t}){const n=L.useMemo(()=>{const l=new Map;return e.forEach(c=>{c.effects.forEach(u=>{const d=u.name||"Unknown Effect",f=u.magnitude||0,m=u.duration||0;l.has(d)||l.set(d,{name:d,count:0,averageMagnitude:0,averageDuration:0,totalMagnitude:0,totalDuration:0,recipes:[]});const h=l.get(d);h.count++,h.totalMagnitude+=f,h.totalDuration+=m,h.recipes.includes(c.name)||h.recipes.push(c.name)})}),l.forEach(c=>{c.averageMagnitude=c.totalMagnitude/c.count,c.averageDuration=c.totalDuration/c.count}),Array.from(l.values()).sort((c,u)=>u.count-c.count)},[e]),s=L.useMemo(()=>{if(n.length===0)return{magnitude:0,duration:0};const l=n.reduce((u,d)=>u+d.averageMagnitude,0),c=n.reduce((u,d)=>u+d.averageDuration,0);return{magnitude:l/n.length,duration:c/n.length}},[n]),r=(l,c)=>{const d=(l-c)/c*100;return d>20?"text-green-600":d>10?"text-green-500":d<-20?"text-red-600":d<-10?"text-red-500":"text-muted-foreground"},a=(l,c)=>{const d=(l-c)/c*100;return d>10?o.jsx(mg,{className:"h-4 w-4 text-green-500"}):d<-10?o.jsx(dv,{className:"h-4 w-4 text-red-500"}):null},i=(l,c)=>{const u=l-c,d=u/c*100,f=u>=0?"+":"";return`${f}${u.toFixed(1)} (${f}${d.toFixed(1)}%)`};return n.length===0?o.jsxs(be,{className:t,children:[o.jsx(Te,{children:o.jsx(Fe,{className:"text-lg",children:"Food Effect Meta Analysis"})}),o.jsx(we,{children:o.jsx("p",{className:"text-muted-foreground",children:"No effects found to analyze."})})]}):o.jsxs(be,{className:t,children:[o.jsxs(Te,{children:[o.jsx(Fe,{className:"text-lg",children:"Food Effect Meta Analysis"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Analysis of ",n.length," unique effects across ",e.length," recipes"]})]}),o.jsx(we,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold",children:s.magnitude.toFixed(1)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Magnitude"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold",children:[s.duration.toFixed(1),"s"]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Duration"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-medium text-sm",children:"Effect Analysis"}),n.slice(0,10).map(l=>o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[o.jsx("div",{className:"flex items-start justify-between mb-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qr,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{className:"font-medium text-sm",children:l.name}),o.jsxs(X,{variant:"secondary",className:"text-xs",children:[l.count," recipes"]})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx("span",{className:"text-muted-foreground",children:"Magnitude:"}),o.jsx("span",{className:"font-medium",children:l.averageMagnitude.toFixed(1)}),a(l.averageMagnitude,s.magnitude)]}),o.jsx("div",{className:H("text-xs",r(l.averageMagnitude,s.magnitude)),children:i(l.averageMagnitude,s.magnitude)})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),o.jsxs("span",{className:"font-medium",children:[l.averageDuration.toFixed(1),"s"]}),a(l.averageDuration,s.duration)]}),o.jsx("div",{className:H("text-xs",r(l.averageDuration,s.duration)),children:i(l.averageDuration,s.duration)})]})]}),l.recipes.length>0&&o.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:o.jsxs("div",{className:"text-xs text-muted-foreground mb-1",children:["Found in: ",l.recipes.slice(0,3).join(", "),l.recipes.length>3&&` +${l.recipes.length-3} more`]})})]},l.name)),n.length>10&&o.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing top 10 effects of ",n.length," total"]})]}),o.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:"Legend"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mg,{className:"h-3 w-3 text-green-500"}),o.jsx("span",{children:"Above average (+10%+)"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dv,{className:"h-3 w-3 text-red-500"}),o.jsx("span",{children:"Below average (-10%+)"})]})]})]})]})})]})}function MB(e,t){return{filteredRecipes:g.useMemo(()=>{if(!t.trim())return e;const r=t.toLowerCase().trim().split(/\s+/);return e.filter(a=>{const i=[a.name,a.output,a.description||"",...a.ingredients.map(l=>typeof l=="string"?l:l&&typeof l=="object"&&(l.name||l.label||l.id)||String(l)),...a.effects.map(l=>l.name),...a.effects.map(l=>l.description),a.category||"",a.difficulty||"",a.type||"",...a.tags].join(" ").toLowerCase();return r.every(l=>i.includes(l))})},[e,t]),searchQuery:t.trim()}}function TB(){const{recipes:e,loading:t,error:n}=NB(),{filteredRecipes:s}=jB(e),{statistics:r,availableCategories:a,availableEffects:i,availableIngredients:l,getEffectComparisons:c}=SB(e),[u,d]=g.useState("grid"),m=(()=>{try{if(!e||e.length===0)return console.warn("No recipes loaded for search categories"),[];const j=l||[],S=i||[],C=a||[];return console.log("Using pre-computed ingredients:",j.slice(0,10),`(total: ${j.length})`),[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, ingredients, effects, or description...",options:[]},{id:"ingredients",name:"Ingredients",placeholder:"Filter by ingredient...",options:j.map(E=>({id:`ingredient-${E}`,label:E,value:E,category:"Ingredients",description:`Recipes with ${E}`}))},{id:"effects",name:"Effects",placeholder:"Filter by effect...",options:S.map(E=>({id:`effect-${E}`,label:E,value:E,category:"Effects",description:`Recipes with ${E} effect`}))},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:C.map(E=>({id:`category-${E}`,label:E,value:E,category:"Categories",description:`${E} recipes`}))}]}catch(j){return console.error("Error generating search categories:",j),[]}})(),[h,p]=g.useState([]),y=j=>{let S;typeof j=="string"?S={id:`custom-${j}`,label:j,value:j,category:"Fuzzy Search"}:S={id:`${j.category}-${j.id}`,label:j.label,value:j.value,category:j.category},h.some(C=>C.value===S.value&&C.category===S.category)||p(C=>[...C,S])},b=j=>{p(S=>S.filter(C=>C.id!==j))},x=s.filter(j=>h.length===0?!0:h.every(S=>{switch(S.category){case"Fuzzy Search":return!0;case"Categories":return j.category===S.value;case"Ingredients":return j.ingredients.some(C=>typeof C=="string"?C===S.value:C&&typeof C=="object"?C.item===S.value||C.name===S.value||C.label===S.value||C.id===S.value:!1);case"Effects":return j.effects.some(C=>C.name===S.value);default:return!0}})),w=h.filter(j=>j.category==="Fuzzy Search").map(j=>j.value).join(" "),{filteredRecipes:v}=MB(x,w),N=j=>{console.log("Recipe clicked:",j.name)};return t?o.jsx("div",{className:"flex items-center justify-center p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading recipes..."})]})}):n?o.jsx("div",{className:"flex items-center justify-center p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-2",children:"Error loading recipes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Cookbook"}),o.jsxs("p",{className:"text-muted-foreground",children:["Browse and search through ",r.totalRecipes," recipes"]})]})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(xa,{categories:m,onSelect:y,onCustomSearch:y})}),o.jsx(EB,{currentMode:u,onModeChange:d})]}),o.jsx("div",{className:"my-4",children:h.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:()=>p([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(qt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),h.map(j=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>b(j.id),title:"Click to remove",children:[j.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},j.id))]})}),o.jsxs(Wi,{defaultValue:"recipes",className:"w-full",children:[o.jsxs(Ki,{className:"mb-4",children:[o.jsx(an,{value:"recipes",children:"Recipes"}),o.jsx(an,{value:"statistics",children:"Statistics"}),o.jsx(an,{value:"meta",children:"Meta Analysis"})]}),o.jsx(wn,{value:"recipes",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Recipes (",v.length,")"]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",v.length," of ",e.length," recipes"]})]}),u==="grid"&&o.jsx(CB,{recipes:v,variant:"default",columns:3,onRecipeClick:N,showEffects:!0,showIngredients:!0,getEffectComparisons:c}),u==="list"&&o.jsx(kB,{recipes:v,variant:"default",onRecipeClick:N,showEffects:!0,showIngredients:!0,getEffectComparisons:c})]})}),o.jsx(wn,{value:"statistics",children:o.jsx(_B,{statistics:r})}),o.jsx(wn,{value:"meta",children:o.jsx(AB,{recipes:e})})]})]})}function RB(){return o.jsx(Un,{title:"Cookbook Reference",description:"Browse and search all available recipes. Find the perfect dish for your character's needs.",children:o.jsx(TB,{})})}var nh,om="HoverCard",[XC,Ree]=un(om,[el]),im=el(),[DB,b0]=XC(om),WC=e=>{const{__scopeHoverCard:t,children:n,open:s,defaultOpen:r,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=e,c=im(t),u=g.useRef(0),d=g.useRef(0),f=g.useRef(!1),m=g.useRef(!1),[h,p]=Yn({prop:s,defaultProp:r??!1,onChange:a,caller:om}),y=g.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>p(!0),i)},[i,p]),b=g.useCallback(()=>{clearTimeout(u.current),!f.current&&!m.current&&(d.current=window.setTimeout(()=>p(!1),l))},[l,p]),x=g.useCallback(()=>p(!1),[p]);return g.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),o.jsx(DB,{scope:t,open:h,onOpenChange:p,onOpen:y,onClose:b,onDismiss:x,hasSelectionRef:f,isPointerDownOnContentRef:m,children:o.jsx(YS,{...c,children:n})})};WC.displayName=om;var KC="HoverCardTrigger",QC=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,...s}=e,r=b0(KC,n),a=im(n);return o.jsx(Vx,{asChild:!0,...a,children:o.jsx(xe.a,{"data-state":r.open?"open":"closed",...s,ref:t,onPointerEnter:te(e.onPointerEnter,Ud(r.onOpen)),onPointerLeave:te(e.onPointerLeave,Ud(r.onClose)),onFocus:te(e.onFocus,r.onOpen),onBlur:te(e.onBlur,r.onClose),onTouchStart:te(e.onTouchStart,i=>i.preventDefault())})})});QC.displayName=KC;var zB="HoverCardPortal",[Dee,LB]=XC(zB,{forceMount:void 0}),Hd="HoverCardContent",JC=g.forwardRef((e,t)=>{const n=LB(Hd,e.__scopeHoverCard),{forceMount:s=n.forceMount,...r}=e,a=b0(Hd,e.__scopeHoverCard);return o.jsx(Zt,{present:s||a.open,children:o.jsx($B,{"data-state":a.open?"open":"closed",...r,onPointerEnter:te(e.onPointerEnter,Ud(a.onOpen)),onPointerLeave:te(e.onPointerLeave,Ud(a.onClose)),ref:t})})});JC.displayName=Hd;var $B=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:i,...l}=e,c=b0(Hd,n),u=im(n),d=g.useRef(null),f=$e(t,d),[m,h]=g.useState(!1);return g.useEffect(()=>{if(m){const p=document.body;return nh=p.style.userSelect||p.style.webkitUserSelect,p.style.userSelect="none",p.style.webkitUserSelect="none",()=>{p.style.userSelect=nh,p.style.webkitUserSelect=nh}}},[m]),g.useEffect(()=>{if(d.current){const p=()=>{h(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var b;((b=document.getSelection())==null?void 0:b.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",p),()=>{document.removeEventListener("pointerup",p),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),g.useEffect(()=>{d.current&&BB(d.current).forEach(y=>y.setAttribute("tabindex","-1"))}),o.jsx(Oc,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:te(a,p=>{p.preventDefault()}),onDismiss:c.onDismiss,children:o.jsx(qx,{...u,...l,onPointerDown:te(l.onPointerDown,p=>{p.currentTarget.contains(p.target)&&h(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:{...l.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),PB="HoverCardArrow",OB=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,...s}=e,r=im(n);return o.jsx(Zx,{...r,...s,ref:t})});OB.displayName=PB;function Ud(e){return t=>t.pointerType==="touch"?void 0:e()}function BB(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var IB=WC,HB=QC,ek=JC;const tk=IB,nk=HB,w0=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},r)=>o.jsx(ek,{ref:r,align:t,sideOffset:n,className:H("w-64 rounded-md dropdown-enhanced p-4 text-popover-foreground outline-none animate-in zoom-in-90 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-90 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Dt.TOOLTIP},...s}));w0.displayName=ek.displayName;function UB({node:e,allNodes:t,children:n,showPrerequisites:s=!0,showNextNodes:r=!0,showTags:a=!0,className:i=""}){const l=u=>t.filter(d=>d.prerequisites.includes(u)),c=u=>t.filter(d=>e.prerequisites.includes(d.name));return o.jsxs(tk,{children:[o.jsx(nk,{asChild:!0,children:n}),o.jsx(w0,{className:`w-80 p-0 ${i}`,children:o.jsxs(be,{className:"border-0 shadow-none",children:[o.jsx(Te,{className:"pb-2",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsx("h3",{className:"font-semibold text-lg text-foreground mb-1",children:e.name})}),e.icon&&o.jsx("div",{className:"w-8 h-8 ml-2",children:o.jsx("img",{src:e.icon,alt:e.name,className:"w-full h-full object-contain"})})]})}),o.jsxs(we,{className:"pt-0 space-y-3",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),s&&e.prerequisites.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Prerequisites:"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[c(e.name).map(u=>o.jsx(X,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:u.name},u.id)),e.prerequisites.filter(u=>!t.some(d=>d.name===u)).map((u,d)=>o.jsx(X,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500 border-gray-200",children:u},`missing-${d}`))]})]}),r&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Leads to:"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[l(e.name).map(u=>o.jsx(X,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:u.name},u.id)),l(e.name).length===0&&o.jsx("span",{className:"text-xs text-muted-foreground",children:"No further progression"})]})]}),a&&e.tags.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Tags:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((u,d)=>o.jsx(X,{variant:"secondary",className:"text-xs",children:u},d))})]}),o.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[o.jsxs("p",{children:["ID: ",e.id]}),e.globalFormId&&o.jsxs("p",{children:["Form ID: ",e.globalFormId]})]})]})]})})]})}function sk({node:e,allNodes:t,variant:n="default",size:s="md",showHoverCard:r=!0,onClick:a,className:i=""}){const l={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},c=o.jsx(X,{variant:n,className:`
        ${l[s]} 
        ${a?"cursor-pointer hover:bg-muted/50":""} 
        ${i}
        rounded-full
      `,onClick:a,children:e.name});return r?o.jsx(UB,{node:e,allNodes:t,children:c}):c}function rk({path:e,allNodes:t,onBreadcrumbClick:n,variant:s="default",className:r=""}){if(e.length===0)return o.jsx("div",{className:`flex items-center gap-2 ${r}`,children:o.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})});const a=s==="compact"?"sm":"md";return o.jsx("div",{className:`flex items-center gap-2 ${r}`,children:e.map((i,l)=>o.jsxs(L.Fragment,{children:[o.jsx(sk,{node:i,allNodes:t,variant:l===e.length-1?"default":"outline",size:a,showHoverCard:!0,onClick:n?()=>n(l):void 0}),l<e.length-1&&o.jsx(Dc,{className:"w-4 h-4 text-muted-foreground"})]},i.id))})}function FB({path:e,allNodes:t,selectedPathLength:n,isComplete:s,endNode:r,onPathClick:a,variant:i="default",className:l=""}){const c=i==="compact"?"sm":"md";return o.jsxs("div",{className:`p-3 border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer ${l}`,onClick:()=>a(e,n),children:[o.jsx("div",{className:"flex items-center gap-2 mb-2",children:o.jsx("div",{className:"flex flex-wrap items-center gap-1",children:e.map((u,d)=>o.jsxs(L.Fragment,{children:[o.jsx(sk,{node:u,allNodes:t,variant:"outline",size:c,showHoverCard:!0,onClick:f=>{f==null||f.stopPropagation(),a(e,d)},className:`
                   ${d===0&&n===0?"cursor-pointer":""}
                   ${s&&d===e.length-1?"bg-yellow-600 text-yellow-50 border-yellow-700":""}
                 `}),d<e.length-1&&o.jsx(Dc,{className:"w-3 h-3 text-muted-foreground"})]},u.id))})}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Length: ",e.length," steps"]}),s&&o.jsxs("span",{children:[" Ends at: ",r.name]}),e.length>n&&o.jsxs("span",{children:[" ",e.length-n," more choices"]})]})]})}function VB({path:e,className:t=""}){return e.length===0?o.jsxs("div",{className:`space-y-2 ${t}`,children:[o.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Selected Path"}),o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:o.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})})]}):o.jsxs("div",{className:`space-y-2 ${t}`,children:[o.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Selected Path (",e.length," nodes)"]}),o.jsx("div",{className:"space-y-2",children:e.map((n,s)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium",children:s+1}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-sm",children:n.name}),n.description&&o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:n.description})]})]}),o.jsx(X,{variant:"secondary",className:s===e.length-1?"bg-yellow-600 text-yellow-50":"bg-blue-500",children:s===e.length-1?"Current":"Selected"})]},n.id))})]})}class ps{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.id=="string"&&typeof t.name=="string"&&typeof t.description=="string"&&Array.isArray(t.tags)&&Array.isArray(t.prerequisites)}static equals(t,n){return t.id===n.id}static hasTag(t,n){return t.tags.includes(n)}static hasAnyTag(t,n){return n.some(s=>this.hasTag(t,s))}static hasAllTags(t,n){return n.every(s=>this.hasTag(t,s))}static filterByTag(t,n){return t.filter(s=>this.hasTag(s,n))}static filterByAnyTag(t,n){return t.filter(s=>this.hasAnyTag(s,n))}static filterByAllTags(t,n){return t.filter(s=>this.hasAllTags(s,n))}static isRootNode(t){return t.prerequisites.length===0}static getRootNodes(t){return t.filter(n=>this.isRootNode(n))}static isLeafNode(t,n){return!n.some(s=>s.prerequisites.includes(t.edid))}static getLeafNodes(t){return t.filter(n=>this.isLeafNode(n,t))}static getNextNodes(t,n){return n.filter(s=>s.prerequisites.includes(t.edid))}static getPrerequisiteNodes(t,n){return n.filter(s=>t.prerequisites.includes(s.edid))}static search(t,n){const s=n.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||r.description.toLowerCase().includes(s)||r.tags.some(a=>a.toLowerCase().includes(s)))}static sortByName(t){return[...t].sort((n,s)=>n.name.localeCompare(s.name))}static sortByPrerequisites(t){return[...t].sort((n,s)=>n.prerequisites.length-s.prerequisites.length)}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static getUniquePrerequisites(t){const n=t.flatMap(s=>s.prerequisites);return[...new Set(n)].sort()}}function po(e={}){const{includePrerequisites:t=!1,includeNextNodes:n=!1,filterByTags:s=[],searchTerm:r="",sortBy:a="name"}=e,{data:i,loading:l,error:c,reload:u}=b6(),d=i||[],f=c,m=g.useMemo(()=>ps.getRootNodes(d),[d]),h=g.useMemo(()=>[],[d]),p=g.useMemo(()=>ps.getUniqueTags(d),[d]),y=g.useMemo(()=>{let k=[...d];return s.length>0&&(k=ps.filterByAnyTag(k,s)),r&&(k=ps.search(k,r)),a==="name"?k=ps.sortByName(k):a==="prerequisites"&&(k=ps.sortByPrerequisites(k)),k},[d,s,r,a]),b=k=>d.find(_=>_.id===k),x=k=>d.find(_=>_.edid===k);return{nodes:d,rootNodes:m,filteredNodes:y,isLoading:l,error:f,categories:h,tags:p,refresh:()=>{u()},getNodeById:b,getNodeByName:k=>d.find(_=>_.name===k),getNodeByEdid:x,getNextNodes:k=>{const _=x(k);return _?ps.getNextNodes(_,d):[]},getPrerequisiteNodes:k=>{const _=x(k);return _?ps.getPrerequisiteNodes(_,d):[]},filterByCategory:k=>[],filterByTag:k=>ps.filterByTag(d,k),searchNodes:k=>ps.search(d,k)}}function lm(e={}){const{fromNode:t,maxDepth:n=10}=e,{nodes:s,rootNodes:r,isLoading:a,error:i}=po();return{possiblePaths:g.useMemo(()=>{if(a||i||!s.length)return[];const c=[],u=new Set,d=m=>s.filter(h=>h.prerequisites.includes(m)),f=(m,h=0)=>{if(h>=n)return;const p=m[m.length-1],y=d(p.edid);if(y.length===0){c.push({path:[...m],isComplete:!0,endNode:p});return}y.forEach(b=>{const x=m.map(w=>w.id).join("->")+"->"+b.id;u.has(x)||(u.add(x),f([...m,b],h+1))})};if(t){if(d(t.edid).length===0)return[];f([t])}else r.forEach(m=>{f([m])});return c},[s,r,t,n,a,i]),isLoading:a,error:i}}function ak(e){const{filterType:t,currentPath:n=[]}=e,{nodes:s,rootNodes:r}=po(),[a,i]=g.useState([]),{possiblePaths:l}=lm({fromNode:n.length>0?n[n.length-1]:void 0}),c=g.useMemo(()=>{if(t!=="build-path"||n.length===0)return s;const b=new Set,x=new Set,w=N=>{x.has(N)||(x.add(N),b.add(N),s.forEach(j=>{j.prerequisites.includes(N)&&w(j.edid)}))},v=n[n.length-1];return w(v.edid),s.filter(N=>b.has(N.edid))},[t,n,s,r]),u=g.useMemo(()=>{if(t==="build-path"){const b=new Set,x=new Set;l.forEach(N=>{N.path.forEach(j=>{b.add(j.edid)}),N.path.length>0&&x.add(N.path[N.path.length-1].edid)});const w=s.filter(N=>b.has(N.edid)),v=s.filter(N=>x.has(N.edid));return[{id:"includes-node",name:"Includes Node",placeholder:"Filter paths that include this node...",options:w.map(N=>{const j=l.filter(S=>S.path.some(C=>C.edid===N.edid)).length;return{id:`includes-${N.id}`,label:N.name,value:N.edid,category:"Includes Node",description:`${j} path${j!==1?"s":""} include ${N.name}`}})},{id:"ends-with-node",name:"Ends With Node",placeholder:"Filter paths that end with this node...",options:v.map(N=>{const j=l.filter(S=>S.path.length>0&&S.path[S.path.length-1].edid===N.edid).length;return{id:`ends-${N.id}`,label:N.name,value:N.edid,category:"Ends With Node",description:`${j} path${j!==1?"s":""} end with ${N.name}`}})}]}else{const b=[...new Set(s.flatMap(w=>w.tags))],x=[...new Set(s.flatMap(w=>w.prerequisites))];return[{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:b.map(w=>({id:`tag-${w}`,label:w,value:w,category:"Tags",description:`Nodes with ${w} tag`}))},{id:"prerequisites",name:"Prerequisites",placeholder:"Filter by prerequisite...",options:x.map(w=>{const v=s.find(N=>N.edid===w);return{id:`prereq-${w}`,label:v?v.name:w,value:w,category:"Prerequisites",description:`Nodes requiring ${v?v.name:w}`}})}]}},[t,c,s,l]),d=g.useCallback(b=>{i(x=>x.some(v=>v.type===b.type&&v.nodeName===b.nodeName)?x:[...x,b])},[]),f=g.useCallback(b=>{i(x=>x.filter(w=>w.id!==b))},[]),m=g.useCallback(()=>{i([])},[]),h=g.useCallback(()=>u.flatMap(b=>b.options),[u]),p=g.useCallback(b=>c.some(x=>x.id===b.id),[c]),y=g.useMemo(()=>t!=="build-path"||a.length===0?l.map(b=>b.path):l.map(b=>b.path).filter(b=>a.every(x=>{switch(x.type){case"includes-node":return b.some(w=>w.edid===x.nodeName||w.edid===x.nodeId);case"ends-with-node":return b.length>0&&(b[b.length-1].edid===x.nodeName||b[b.length-1].edid===x.nodeId);default:return!0}})),[t,a,l]);return{selectedFilters:a,searchCategories:u,addFilter:d,removeFilter:f,clearFilters:m,filteredPaths:y,availableNodes:c,getFilterOptions:h,isNodeAvailable:p}}function N0(e={}){const{initialPath:t=[],validatePath:n=!0}=e,[s,r]=g.useState(t),{nodes:a,rootNodes:i}=po(),l=g.useMemo(()=>s.length>0?s[s.length-1]:null,[s]),c=g.useMemo(()=>s.length===0?i:a.filter(v=>v.prerequisites.length===0?!1:v.prerequisites.some(N=>s.some(j=>j.edid===N))),[s,a,i]),u=g.useMemo(()=>l?a.filter(v=>v.prerequisites.includes(l.edid)):i,[l,a,i]),d=g.useMemo(()=>l?a.filter(v=>l.prerequisites.includes(v.edid)):[],[l,a]),{isValidPath:f,pathErrors:m}=g.useMemo(()=>{if(!n||s.length===0)return{isValidPath:!0,pathErrors:[]};const v=[];for(let N=1;N<s.length;N++){const j=s[N],S=s.slice(0,N);!j.prerequisites.some(E=>S.some(k=>k.edid===E))&&j.prerequisites.length>0&&v.push(`${j.name} requires one of: ${j.prerequisites.join(", ")}`)}return{isValidPath:v.length===0,pathErrors:v}},[s,n]),h=g.useCallback(v=>{if(s.length>0){if(s[s.length-1],!v.prerequisites.some(j=>s.some(S=>S.edid===j))&&v.prerequisites.length>0)return!1}else if(v.prerequisites.length>0)return!1;return r(N=>[...N,v]),!0},[s]),p=g.useCallback(v=>{r(N=>N.slice(0,v+1))},[]),y=g.useCallback(v=>{r(v)},[]),b=g.useCallback(()=>{r([])},[]),x=g.useCallback(v=>{r(N=>N.slice(0,v+1))},[]),w=g.useCallback(()=>({startNode:s[0]||null,endNode:s[s.length-1]||null,totalNodes:s.length,pathString:s.map(v=>v.name).join("  ")}),[s]);return{currentPath:s,currentNode:l,availableNodes:c,rootNodes:i,isValidPath:f,pathErrors:m,addNodeToPath:h,removeNodeFromPath:p,setPath:y,clearPath:b,goToPathIndex:x,pathLength:s.length,isPathComplete:u.length===0,nextPossibleNodes:u,prerequisiteNodes:d,getPathSummary:w}}function ok({searchCategories:e,selectedFilters:t,onFilterSelect:n,onFilterRemove:s,onClearFilters:r,className:a=""}){const i=e.find(d=>d.id==="includes-node"),l=e.find(d=>d.id==="ends-with-node"),c=e.find(d=>d.id==="tags"),u=e.find(d=>d.id==="prerequisites");return o.jsxs("div",{className:`space-y-4 ${a}`,children:[o.jsxs("div",{className:"flex flex-wrap gap-4",children:[i&&o.jsxs("div",{className:"space-y-2 max-w-sm",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Includes"}),o.jsx(La,{categories:[i],onSelect:n,placeholder:i.placeholder,className:"w-full"})]}),l&&o.jsxs("div",{className:"space-y-2 max-w-sm",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Ends With"}),o.jsx(La,{categories:[l],onSelect:n,placeholder:l.placeholder,className:"w-full"})]}),c&&o.jsxs("div",{className:"space-y-2 max-w-sm",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Tags"}),o.jsx(La,{categories:[c],onSelect:n,placeholder:c.placeholder,className:"w-full"})]}),u&&o.jsxs("div",{className:"space-y-2 max-w-sm",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Prerequisites"}),o.jsx(La,{categories:[u],onSelect:n,placeholder:u.placeholder,className:"w-full"})]})]}),t.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Active Filters"}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:r,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(qt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),t.map(d=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>s(d.id),title:"Click to remove",children:[o.jsx("span",{className:"text-xs opacity-70 mr-1",children:d.type==="includes-node"?"Includes:":d.type==="ends-with-node"?"Ends:":d.type==="tags"?"Tag:":"Prereq:"}),d.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},d.id))]})]})]})}function Pg({possiblePaths:e,selectedPathLength:t,onPathClick:n,variant:s="default",className:r=""}){const{nodes:a}=po();return e.length===0?o.jsxs("div",{className:`text-center py-8 ${r}`,children:[o.jsx("p",{className:"text-muted-foreground",children:"No possible paths available."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You may have reached the end of available destiny paths."})]}):o.jsx("div",{className:`space-y-3 ${r}`,children:e.map((i,l)=>o.jsx(FB,{path:i.path,allNodes:a,selectedPathLength:t,isComplete:i.isComplete,endNode:i.endNode,onPathClick:n,variant:s},l))})}function qB({onPathChange:e,onPathComplete:t,className:n="",compact:s=!1}){var E,k;const{currentPath:r,currentNode:a,isValidPath:i,pathErrors:l,setPath:c,clearPath:u,goToPathIndex:d,isPathComplete:f,getPathSummary:m}=N0(),{possiblePaths:h}=lm({fromNode:a||void 0}),{nodes:p}=po(),y=ak({filterType:"build-path",currentPath:r}),b=y.selectedFilters.length>0?y.filteredPaths:h.map(_=>_.path),x=_=>{if(typeof _=="string")return;let P,O;if(_.category==="Includes Node")P="includes-node",O=_.id.replace(/^includes-/,"");else if(_.category==="Ends With Node")P="ends-with-node",O=_.id.replace(/^ends-/,"");else return;const $={id:_.id,type:P,nodeName:_.value,nodeId:O,label:_.label};y.addFilter($)},w=_=>{y.removeFilter(_)},v=()=>{y.clearFilters()},N=(_,P)=>{let O;if(r.length===0)O=_.slice(0,P+1);else{if(P===0)return;const $=_.slice(1,P+1);O=[...r,...$]}c(O),e==null||e(O),f&&(t==null||t(O))},j=_=>{d(_),e==null||e(r)},S=()=>{u(),e==null||e([])},C=m();return s?o.jsxs("div",{className:`space-y-4 ${n}`,children:[o.jsx(VB,{path:r}),r.length>0&&o.jsx("div",{className:"flex justify-end",children:o.jsxs(K,{variant:"outline",size:"sm",onClick:S,className:"text-xs",children:[o.jsx(xi,{className:"w-3 h-3 mr-1"}),"Clear Path"]})}),b.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Possible Remaining Paths"}),o.jsx(Ni,{className:"h-[200px]",children:o.jsx("div",{className:"p-4",children:o.jsx(Pg,{possiblePaths:b.map(_=>({path:_,isComplete:!1,endNode:_[_.length-1]})),selectedPathLength:r.length,onPathClick:N,variant:"compact"})})})]}),!i&&l.length>0&&o.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx(pi,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),o.jsx("ul",{className:"space-y-0.5",children:l.map((_,P)=>o.jsxs("li",{children:[" ",_]},P))})]})]}):o.jsxs("div",{className:`space-y-6 ${n}`,children:[o.jsxs(be,{children:[o.jsx(Te,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Fe,{className:"flex items-center gap-2",children:[o.jsx(dg,{className:"w-5 h-5 text-primary"}),"Destiny Path Builder"]}),o.jsx("div",{className:"flex items-center gap-2",children:r.length>0&&o.jsxs(K,{variant:"outline",size:"sm",onClick:S,className:"flex items-center gap-1",children:[o.jsx(xi,{className:"w-4 h-4"}),"Clear Path"]})})]})}),o.jsxs(we,{children:[o.jsx(rk,{path:r,allNodes:p,onBreadcrumbClick:j,className:"mb-4"}),r.length>0&&o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("span",{children:["Path Length: ",r.length]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Start: ",(E=C.startNode)==null?void 0:E.name]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Current: ",(k=C.endNode)==null?void 0:k.name]}),f&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsx(X,{variant:"default",className:"text-xs",children:"Complete"})]})]}),!i&&l.length>0&&o.jsxs("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[o.jsx(pi,{className:"w-4 h-4"}),o.jsx("span",{className:"font-medium",children:"Path Validation Errors:"})]}),o.jsx("ul",{className:"text-sm space-y-1",children:l.map((_,P)=>o.jsxs("li",{className:"text-destructive",children:[" ",_]},P))})]})]})]}),r.length>0&&o.jsxs(be,{children:[o.jsx(Te,{children:o.jsx(Fe,{className:"text-lg",children:"Current Path"})}),o.jsx(we,{children:o.jsx("div",{className:"space-y-2",children:r.map((_,P)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50",children:[o.jsx(X,{variant:"outline",className:"text-xs",children:P+1}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:_.name}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:_.description})]})]},_.id))})})]}),o.jsxs(be,{children:[o.jsxs(Te,{children:[o.jsx(Fe,{className:"text-lg",children:r.length===0?"Choose Your Starting Point":"Possible Paths"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.length===0?"Select a root destiny node to begin your path":b.length===0?y.selectedFilters.length>0?"No paths match your current filters":"You have reached the end of this destiny path":y.selectedFilters.length>0?`Showing ${b.length} filtered paths from your current position`:`Explore ${b.length} possible paths from your current position`})]}),o.jsxs(we,{className:"h-[600px] p-0",children:[o.jsx("div",{className:"p-6 pb-6",children:o.jsx(ok,{searchCategories:y.searchCategories,selectedFilters:y.selectedFilters,onFilterSelect:x,onFilterRemove:w,onClearFilters:v})}),b.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[y.selectedFilters.length>0?o.jsx(B4,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}):o.jsx(dg,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg font-medium",children:y.selectedFilters.length>0?"No paths match your filters":"Path Complete!"}),o.jsx("p",{className:"text-sm",children:y.selectedFilters.length>0?"Try adjusting your filters to see more paths.":"You've reached the end of this destiny path."})]}):o.jsx(Ni,{className:"h-[calc(600px-200px)]",children:o.jsx("div",{className:"p-6 pt-4",children:o.jsx(Pg,{possiblePaths:b.map(_=>({path:_,isComplete:!1,endNode:_[_.length-1]})),selectedPathLength:r.length,onPathClick:N})})})]})]})]})}function ZB({item:e,originalNode:t,allNodes:n}){const s=r=>n.filter(a=>a.prerequisites.includes(r)).map(a=>a.name);return o.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t&&t.prerequisites.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Prereq:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:t.prerequisites.map((r,a)=>o.jsx(X,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:r},a))})]}),t&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Leads to:"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[s(t.name).map((r,a)=>o.jsx(X,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:r},a)),s(t.name).length===0&&o.jsx("span",{className:"text-xs text-muted-foreground",children:"Terminal"})]})]}),e.tags.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Tags:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((r,a)=>o.jsx(X,{variant:"secondary",className:"text-xs",children:r},a))})]})]})}function GB({items:e,allNodes:t}){return o.jsx(Ni,{className:"h-[calc(100vh-500px)]",children:o.jsx(IC,{type:"single",collapsible:!0,className:"w-full",children:e.map(n=>o.jsxs(g0,{value:n.id,children:[o.jsx(p0,{className:"text-left hover:no-underline",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-bold text-base text-foreground truncate hover:underline",children:n.name}),o.jsx("div",{className:"text-base text-muted-foreground truncate",children:n.description})]})}),o.jsx(x0,{children:o.jsx(ZB,{item:n,originalNode:t.find(s=>s.id===n.id),allNodes:t})})]},n.id))})})}const YB=({navigate:e})=>{const{build:t,setDestinyPath:n}=wt(),{nodes:s,isLoading:r,error:a}=po(),i=L.useMemo(()=>t.destinyPath.map(w=>s.find(v=>v.id===w)).filter(w=>!!w),[t.destinyPath,s]),{isValidPath:l,pathErrors:c,setPath:u,clearPath:d,currentPath:f,currentNode:m}=N0({initialPath:i,validatePath:!0}),{possiblePaths:h}=lm({fromNode:m||void 0}),p=w=>{const v=w.map(N=>N.id);n(v)},y=(w,v)=>{let N;if(f.length===0)N=w.slice(0,v+1);else{if(v===0)return;const j=w.slice(1,v+1);N=[...f,...j]}u(N),p(N)},b=()=>{d(),n([])},x=w=>{const v=f.slice(0,w+1);u(v),p(v)};return o.jsxs(be,{className:"mb-6",children:[o.jsx(Te,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(Fe,{className:"text-lg",children:"Destiny"}),o.jsxs(K,{variant:"outline",size:"sm",onClick:()=>e("/destiny"),className:"text-sm whitespace-nowrap cursor-pointer",children:[o.jsx(Ga,{className:"w-4 h-4 mr-1"}),"View All"]})]})}),o.jsx(we,{children:r?o.jsx("div",{className:"text-muted-foreground",children:"Loading destiny data..."}):a?o.jsx("div",{className:"text-destructive",children:a}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Selected Path"}),o.jsx(rk,{path:f,allNodes:s,variant:"compact",onBreadcrumbClick:x})]}),f.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Path Details (",f.length," nodes)"]}),o.jsxs(K,{variant:"outline",size:"sm",onClick:b,className:"text-xs",children:[o.jsx(xi,{className:"w-3 h-3 mr-1"}),"Clear Path"]})]}),o.jsx("div",{className:"space-y-2",children:f.map((w,v)=>o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium flex-shrink-0",children:v+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h5",{className:"font-medium text-sm text-foreground",children:w.name}),w.description&&o.jsx(FormattedText,{text:w.description,className:"text-xs text-muted-foreground mt-1",as:"p"})]})]})},w.id))})]}),h.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:f.length===0?"Choose Your Starting Point":"Continue Your Path"}),o.jsx(Ni,{className:"h-[200px]",children:o.jsx("div",{className:"p-2",children:o.jsx(Pg,{possiblePaths:h,selectedPathLength:f.length,onPathClick:y,variant:"compact"})})})]}),!l&&c.length>0&&o.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx(pi,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),o.jsx("ul",{className:"space-y-0.5",children:c.map((w,v)=>o.jsxs("li",{children:[" ",w]},v))})]}),f.length===0&&h.length===0&&o.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[o.jsx("p",{className:"text-sm",children:"No destiny paths available"}),o.jsx(K,{variant:"outline",size:"sm",onClick:()=>e("/destiny"),className:"mt-2",children:"Browse All Destinies"})]})]})})]})};function XB({items:e,filters:t=[]}){const[n,s]=g.useState(null),[r,a]=g.useState("grid"),[i,l]=g.useState({search:"",selectedFilters:{},selectedTags:[]}),c=g.useMemo(()=>{let p=e;if(i.search){const y=i.search.toLowerCase();p=p.filter(b=>b.name.toLowerCase().includes(y)||b.description.toLowerCase().includes(y)||b.tags.some(x=>x.toLowerCase().includes(y)))}return i.selectedTags.length>0&&(p=p.filter(y=>i.selectedTags.some(b=>y.tags.includes(b.value)||y.category===b.value||y.name.toLowerCase().includes(b.value.toLowerCase())))),p},[e,i]),u=g.useMemo(()=>t.length===0?[]:t.map(p=>({...p,options:p.options.map(y=>({...y,count:e.filter(b=>b.tags.includes(y.value)||b.category===y.value).length}))})),[t,e]),d=g.useCallback(p=>{s(p)},[]),f=g.useCallback(p=>{l(p)},[]),m=g.useCallback(p=>{l(y=>({...y,search:p}))},[]),h=g.useCallback(p=>{a(p)},[]);return{selectedItem:n,viewMode:r,currentFilters:i,filteredItems:c,filtersWithCounts:u,handleItemSelect:d,handleFiltersChange:f,handleSearch:m,handleViewModeChange:h,setSelectedItem:s}}function WB(){const{nodes:e,isLoading:t,error:n}=po(),{currentPath:s,setPath:r}=N0({validatePath:!0});lm({fromNode:s.length>0?s[s.length-1]:void 0});const a=ak({filterType:"reference"}),l=g.useMemo(()=>a.selectedFilters.length===0?e:e.filter(h=>a.selectedFilters.every(p=>{var y,b;switch(p.type){case"tags":return(y=h.tags)==null?void 0:y.includes(p.nodeName);case"prerequisites":return(b=h.prerequisites)==null?void 0:b.includes(p.nodeName);default:return!0}})),[e,a.selectedFilters]).map(h=>gB(h));XB({items:l,filters:[]});const c=h=>{if(typeof h=="string")return;let p,y;if(h.category==="Tags")p="tags",y=h.id.replace(/^tag-/,"");else if(h.category==="Prerequisites")p="prerequisites",y=h.id.replace(/^prereq-/,"");else return;const b={id:h.id,type:p,nodeName:h.value,nodeId:y,label:h.label};a.addFilter(b)},u=h=>{a.removeFilter(h)},d=()=>{a.clearFilters()},f=h=>{r(h)},m=h=>{r(h)};return t?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading destiny data..."})]})}):n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:n}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsx(Un,{title:"Destiny",description:"Plan your character's destiny through the perk tree. Each node represents a powerful ability or enhancement that will shape your journey.",children:o.jsx("div",{className:"mb-6",children:o.jsxs(Wi,{defaultValue:"path",className:"w-full",children:[o.jsxs(Ki,{className:"grid w-full grid-cols-2",children:[o.jsx(an,{value:"path",children:"Path Builder"}),o.jsx(an,{value:"reference",children:"Reference"})]}),o.jsxs(wn,{value:"reference",className:"space-y-4",children:[o.jsx(ok,{searchCategories:a.searchCategories,selectedFilters:a.selectedFilters,onFilterSelect:c,onFilterRemove:u,onClearFilters:d}),o.jsx("div",{className:"w-full",children:o.jsx(GB,{items:l,allNodes:e})})]}),o.jsx(wn,{value:"path",className:"space-y-4",children:o.jsx(qB,{onPathChange:f,onPathComplete:m})})]})})})}class mt{static getRaceById(t,n){return t.find(s=>s.edid===n)}static getRacesByCategory(t,n){return t.filter(s=>s.category===n)}static getUniqueCategories(t){return[...new Set(t.map(n=>n.category))]}static getUniqueTags(t){const n=t.flatMap(s=>[...s.keywords||[],...s.flags||[]]);return[...new Set(n)]}static filterByCategory(t,n){return n?t.filter(s=>s.category===n):t}static filterByTags(t,n){return n.length===0?t:t.filter(s=>n.some(r=>(s.keywords||[]).includes(r)||(s.flags||[]).includes(r)))}static filterByAnyTag(t,n){return n.length===0?t:t.filter(s=>n.some(r=>(s.keywords||[]).includes(r)||(s.flags||[]).includes(r)))}static search(t,n){if(!n.trim())return t;const s=n.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||(r.description||"").toLowerCase().includes(s)||(r.keywords||[]).some(a=>a.toLowerCase().includes(s))||(r.flags||[]).some(a=>a.toLowerCase().includes(s)))}static sortByName(t){return[...t].sort((n,s)=>n.name.localeCompare(s.name))}static sortByCategory(t){return[...t].sort((n,s)=>{const r=n.category.localeCompare(s.category);return r!==0?r:n.name.localeCompare(s.name)})}static transformToPlayerCreationItem(t){const n=[...t.keywords||[],...t.flags||[],t.category],s=[...(t.skillBonuses||[]).map(r=>({name:`${r.skill} +${r.bonus}`,type:"positive",description:`Provides ${r.bonus} bonus to ${r.skill}`,value:r.bonus,target:r.skill})),...(t.racialSpells||[]).map(r=>({name:r.name,type:"positive",description:r.description,target:"racial ability"}))];return{id:t.edid,name:t.name,description:t.description||"",tags:n,effects:s,associatedItems:[],imageUrl:void 0,category:t.category||""}}static getRelatedRaces(t,n){return n.filter(s=>s.edid!==t.edid&&s.category===t.category)}static calculateRaceStats(t){var n,s,r,a,i,l;return{totalHealth:((n=t.startingStats)==null?void 0:n.health)||0,totalMagicka:((s=t.startingStats)==null?void 0:s.magicka)||0,totalStamina:((r=t.startingStats)==null?void 0:r.stamina)||0,totalCarryWeight:((a=t.startingStats)==null?void 0:a.carryWeight)||0,skillBonusCount:((i=t.skillBonuses)==null?void 0:i.length)||0,racialSpellCount:((l=t.racialSpells)==null?void 0:l.length)||0}}static applyFilters(t,n){let s=[...t];return n.search&&(s=this.search(s,n.search)),n.type&&(s=this.filterByCategory(s,n.type)),n.tags.length>0&&(s=this.filterByTags(s,n.tags)),s}}class KB{static enrichRacesWithTags(t){t.forEach(n=>{})}static generateSearchCategories(t){const n=[...new Set(t.map(a=>a.category))],s=[...new Set(t.flatMap(a=>a.keywords.map(i=>i.edid)))],r=[...new Set(t.flatMap(a=>a.flags))];return[{id:"category",name:"Race Type",options:n},{id:"keywords",name:"Keywords",options:s},{id:"flags",name:"Flags",options:r}]}static validateRaceData(t){try{return!(!t.name||!t.edid||!t.category||!t.startingStats||typeof t.startingStats.health!="number"||typeof t.startingStats.magicka!="number"||typeof t.startingStats.stamina!="number"||typeof t.startingStats.carryWeight!="number"||!Array.isArray(t.skillBonuses)||!Array.isArray(t.racialSpells)||!Array.isArray(t.keywords)||!Array.isArray(t.flags))}catch{return!1}}static calculateRaceStats(t){const n=t.startingStats.health,s=t.startingStats.magicka,r=t.startingStats.stamina,a=t.startingStats.carryWeight,i=t.skillBonuses.length,l=t.racialSpells.length;return{totalHealth:n,totalMagicka:s,totalStamina:r,totalCarryWeight:a,skillBonusCount:i,racialSpellCount:l}}static calculatePowerLevel(t){const n=this.calculateRaceStats(t),s=(n.totalHealth+n.totalMagicka+n.totalStamina)/3,r=n.skillBonusCount*5+n.racialSpellCount*10;return Math.round(s+r)}static getDifficultyRating(t){const n=this.calculatePowerLevel(t);return n<50?1:n<70?2:n<90?3:n<110?4:5}static getPlaystyleSuggestions(t){const n=[],s=t.startingStats;return s.health>120&&(n.push("Tank"),n.push("Melee Fighter")),s.magicka>120&&(n.push("Mage"),n.push("Spellcaster")),s.stamina>120&&(n.push("Archer"),n.push("Rogue")),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("onehanded"))&&n.push("One-Handed Warrior"),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("destruction"))&&n.push("Destruction Mage"),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("sneak"))&&n.push("Stealth"),[...new Set(n)]}static formatRaceDescription(t){const n=this.calculateRaceStats(t),s=this.getPlaystyleSuggestions(t);let r=t.description;return s.length>0&&(r+=`

Recommended playstyles: ${s.join(", ")}`),r+=`

Starting Stats: Health ${n.totalHealth}, Magicka ${n.totalMagicka}, Stamina ${n.totalStamina}`,r+=`
Abilities: ${n.skillBonusCount} skill bonuses, ${n.racialSpellCount} racial spells`,r}}function sl(e={}){const{includeRelated:t=!1,categoryFilter:n="",searchTerm:s="",sortBy:r="name"}=e,{data:a,loading:i,error:l}=fa(),c=g.useMemo(()=>mt.getUniqueCategories(a),[a]),u=g.useMemo(()=>mt.getUniqueTags(a),[a]),d=g.useMemo(()=>a.filter(w=>!(n&&w.category!==n||s&&mt.search([w],s).length===0)),[a,n,s]),f=g.useMemo(()=>r==="name"?mt.sortByName(d):mt.sortByCategory(d),[d,r]);return{races:a,filteredRaces:f,isLoading:i,error:l,categories:c,tags:u,refresh:async()=>{await fa.getState().load()},getRaceById:w=>mt.getRaceById(a,w),getRacesByCategory:w=>mt.getRacesByCategory(a,w),filterByCategory:w=>mt.filterByCategory(a,w),filterByTag:w=>mt.filterByTags(a,[w]),searchRaces:w=>mt.search(a,w)}}function $n({raceName:e,size:t="md",className:n}){return o.jsx(oC,{entityName:e,entityType:"race",size:t,className:n})}function Gr({category:e,size:t="md",className:n}){return o.jsx(S6,{category:e,categoryType:"race",size:t,className:n})}const QB={ability:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"},trait:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},flag:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"},skill:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"}},JB={sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1"};function eI(e){const t=e.toLowerCase();return["destruction","restoration","alteration","illusion","conjuration","light armor","heavy armor","one-handed","two-handed","archery","block","smithing","enchanting","alchemy","speechcraft","sneak","lockpicking","pickpocket"].some(n=>t.includes(n))?"skill":["waterbreathing","night eye","claws","histskin","dragonskin","magic resistance","voice of the emperor","battle cry"].some(n=>t.includes(n))?"ability":["strong stomach","beast race","bleeds","natural"].some(n=>t.includes(n))?"trait":"flag"}function ys({keyword:e,type:t,size:n="sm",className:s}){const r=t||eI(e),a=QB[r];return o.jsx(X,{variant:"outline",className:H(a.bg,a.text,a.border,JB[n],"font-medium",s),children:e})}const tI={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",purple:"bg-purple-500",orange:"bg-orange-500"},nI={sm:"h-1.5",md:"h-2",lg:"h-3"};function er({value:e,maxValue:t,label:n,color:s="blue",size:r="md",showValue:a=!0,className:i}){const l=Math.min(e/t*100,100);return o.jsxs("div",{className:H("space-y-1",i),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:n}),a&&o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),o.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:H("transition-all duration-300 ease-out",tI[s],nI[r]),style:{width:`${l}%`}})})]})}function Si({effects:e,title:t="Effects",className:n,maxDisplay:s,compact:r=!1,showDescriptions:a=!0}){if(!e||e.length===0)return null;const i=s?e.slice(0,s):e,l=s&&e.length>s;return o.jsxs("div",{className:H("space-y-3",n),children:[t&&o.jsx(Ut,{className:"text-lg font-medium text-foreground",children:t}),r?o.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.map((c,u)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:c.description,children:[o.jsx(Ye,{className:"h-3 w-3 text-yellow-500"}),o.jsx("span",{className:"font-medium",children:c.name})]},u)),l&&o.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded text-xs text-muted-foreground",children:["+",e.length-s," more"]})]}):o.jsxs("div",{className:"space-y-3",children:[i.map((c,u)=>o.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-muted",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Ye,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h6",{className:"font-medium text-sm",children:c.name}),a&&c.description&&o.jsx(Be,{text:c.description,className:"text-xs text-muted-foreground mt-1 leading-relaxed"})]})]})},u)),l&&o.jsxs("div",{className:"text-center text-xs text-muted-foreground py-2",children:["+",e.length-s," more effects"]})]})]})}function Vc({stats:e,regeneration:t,title:n="Stats",className:s,showRegeneration:r=!0,compact:a=!1}){return o.jsxs("div",{className:H("space-y-3",s),children:[o.jsx(Ut,{className:"text-lg font-medium text-foreground",children:n}),a&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Health"}),o.jsx("span",{className:"font-medium",children:e.health})]}),o.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka"}),o.jsx("span",{className:"font-medium",children:e.magicka})]}),o.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina"}),o.jsx("span",{className:"font-medium",children:e.stamina})]}),o.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight"}),o.jsx("span",{className:"font-medium",children:e.carryWeight})]})]}),r&&t&&o.jsxs("div",{className:"space-y-2 mt-3",children:[o.jsx(Ut,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Health"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Magicka"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Stamina"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]}),!a&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(er,{value:e.health,maxValue:200,label:"Health",color:"red",size:"sm"}),o.jsx(er,{value:e.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),o.jsx(er,{value:e.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),r&&t&&o.jsxs("div",{className:"space-y-2 mt-3",children:[o.jsx(Ut,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Health"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Magicka"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Stamina"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]})]})}function qc({item:e,className:t,showToggle:n=!0,isExpanded:s=!1,onToggle:r,disableHover:a=!1}){const i=e.originalRace;return o.jsxs(he,{className:t,expanded:s,onToggle:r,disableHover:a,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start justify-between w-full",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx($n,{raceName:e.name,size:"2xl"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(gt,{className:"text-primary font-semibold",children:e.name}),e.category&&o.jsx(X,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:e.category})]})]}),o.jsx("div",{className:"flex items-center gap-3",children:n&&o.jsx(pa,{itemId:(i==null?void 0:i.edid)||e.id,itemType:"race",itemName:e.name})})]})}),o.jsx(he.Summary,{children:o.jsx("div",{className:"line-clamp-2",children:o.jsx(Be,{text:e.summary||e.description,className:"text-sm text-muted-foreground line-clamp-2"})})}),o.jsxs(he.Details,{children:[o.jsx("div",{children:o.jsx(Be,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),(i==null?void 0:i.startingStats)&&o.jsx(Vc,{stats:i.startingStats,regeneration:i.regeneration,title:"Starting Attributes",showRegeneration:!1,compact:!1}),(i==null?void 0:i.skillBonuses)&&i.skillBonuses.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Starting Skills"}),o.jsx("div",{className:"space-y-2",children:i.skillBonuses.map((l,c)=>o.jsxs("div",{className:"p-2 rounded bg-muted border text-sm flex items-center justify-between",children:[o.jsxs("span",{className:"font-medium",children:[l.skill," +",l.bonus]}),o.jsx(X,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},c))})]}),(i==null?void 0:i.racialSpells)&&i.racialSpells.length>0&&o.jsx(Si,{effects:i.racialSpells.map(l=>({name:l.name,description:l.description})),title:"Quirks",showDescriptions:!0})]})]})}function ik(e,t){const n=g.useMemo(()=>e.map(l=>({id:l.edid.toLowerCase().replace("race",""),name:l.name,description:l.description,category:l.category,abilities:l.racialSpells.map(c=>c.name),skills:l.skillBonuses.map(c=>c.skill),keywords:l.keywords.map(c=>c.edid),originalRace:l})),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"abilities",weight:.2},{name:"skills",weight:.1},{name:"keywords",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Wt(n,s),[n,s]),a=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredRaces:g.useMemo(()=>a.map(l=>l.item.originalRace),[a]),searchResults:a,searchableRaces:n}}function Ci({races:e,onSelect:t,placeholder:n="Search races...",className:s=""}){const[r,a]=g.useState(""),{filteredRaces:i}=ik(e,r),l=g.useMemo(()=>i.map(d=>({id:d.edid,label:d.name,description:d.description,category:d.category,icon:o.jsx($n,{raceName:d.name,size:"sm"}),badge:d.category&&o.jsx(X,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:d.category}),metadata:{originalRace:d}})),[i]),c=d=>{const f=e.find(m=>m.edid===d.id);f&&t(f)},u=(d,f)=>o.jsxs("div",{className:"flex items-center gap-3",children:[d.icon&&o.jsx("div",{className:"flex-shrink-0",children:d.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:d.label}),d.badge&&o.jsx("div",{className:"flex-shrink-0",children:d.badge})]}),d.description&&o.jsx(Be,{text:d.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return o.jsx(Fc,{options:l,onSelect:c,placeholder:n,className:s,renderOption:u,emptyMessage:"No races found",searchQuery:r,onSearchQueryChange:a})}function cm({keywords:e,title:t="Keywords",className:n,maxDisplay:s,showCount:r=!0}){if(!e||e.length===0)return null;const a=s?e.slice(0,s):e,i=s&&e.length>s;return o.jsxs("div",{className:H("space-y-3",n),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[t&&o.jsx(Ut,{className:"text-lg font-medium text-foreground",children:t}),r&&o.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.length," keyword",e.length!==1?"s":""]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.map((l,c)=>o.jsx(ys,{keyword:l,size:"sm"},c)),i&&o.jsxs("span",{className:"text-xs text-muted-foreground px-2 py-1",children:["+",e.length-s," more"]})]})]})}function lk({item:e,originalRace:t,isExpanded:n=!1,onToggle:s,className:r,showViewAllButton:a=!1,showToggle:i=!0,viewAllButtonText:l="View All",viewAllButtonRoute:c="/race"}){const u=dt(),d=()=>{u(c)},f=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race",m=(e==null?void 0:e.description)||(t==null?void 0:t.description)||"",h=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"",p=(e==null?void 0:e.effects)||[],y=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"";return o.jsxs(iC,{isExpanded:n,onToggle:s||(()=>{}),className:r,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx($n,{raceName:f,size:"2xl"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(gt,{className:"text-primary font-semibold",children:f}),h&&o.jsx(Gr,{category:h,size:"sm"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[p&&p.length>0&&o.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ye,{className:"h-3 w-3 text-yellow-500"}),o.jsxs("span",{children:[p.length," effects"]})]})}),a&&o.jsxs(K,{variant:"outline",size:"sm",onClick:d,className:"text-xs",children:[o.jsx(Ga,{className:"h-3 w-3 mr-1"}),l]}),i&&o.jsx(pa,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:f})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"line-clamp-2",children:o.jsx(Xe,{className:"text-sm text-muted-foreground",children:y})}),o.jsx(Si,{effects:p,maxDisplay:2,compact:!0})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsx(Xe,{className:"text-sm text-muted-foreground leading-relaxed",children:m})}),(t==null?void 0:t.startingStats)&&o.jsx(Vc,{stats:t.startingStats,regeneration:t.regeneration,title:"Starting Stats"}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&o.jsx(Si,{effects:t.racialSpells.map(b=>({name:b.name,description:b.description})),title:"Racial Abilities"}),(t==null?void 0:t.keywords)&&t.keywords.length>0&&o.jsx(cm,{keywords:t.keywords.map(b=>b.edid),title:"Keywords"})]})]})}function hb({item:e,originalRace:t,className:n,onClick:s,showViewAllButton:r=!1,showToggle:a=!0,viewAllButtonText:i="View All",viewAllButtonRoute:l="/race"}){const c=dt(),u=m=>{m.stopPropagation(),c(l)},d=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race";e!=null&&e.description||t!=null&&t.description;const f=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"";return e!=null&&e.effects,e!=null&&e.summary||t!=null&&t.description,o.jsxs("div",{className:H("p-4 border rounded-lg bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",n),onClick:s,children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx($n,{raceName:d,size:"2xl"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx(gt,{className:"text-primary font-semibold truncate",children:d}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f&&o.jsx(Gr,{category:f,size:"sm"}),(t==null?void 0:t.startingStats)&&o.jsxs("div",{className:"flex gap-1",children:[o.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-red-500/20 text-red-700 dark:text-red-400 rounded-full text-xs font-medium whitespace-nowrap",children:[" ",t.startingStats.health]}),o.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-blue-500/20 text-blue-700 dark:text-blue-400 rounded-full text-xs font-medium whitespace-nowrap",children:[" ",t.startingStats.magicka]}),o.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-green-500/20 text-green-700 dark:text-green-400 rounded-full text-xs font-medium whitespace-nowrap",children:[" ",t.startingStats.stamina]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ye,{className:"h-3 w-3 text-yellow-500"}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.racialSpells.length," effects"]})]}),a&&o.jsx("div",{onClick:m=>m.stopPropagation(),children:o.jsx(pa,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:d})})]})]}),o.jsxs("div",{className:"space-y-2",children:[(t==null?void 0:t.skillBonuses)&&t.skillBonuses.length>0&&o.jsx("div",{className:"grid grid-cols-3 gap-1 justify-items-center",children:t.skillBonuses.map((m,h)=>o.jsxs("div",{className:"px-2 py-1 bg-muted/50 text-muted-foreground rounded text-xs font-medium text-left w-full",children:[m.skill," +",m.bonus]},h))}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:t.racialSpells.map((m,h)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[o.jsx(Ye,{className:"h-3 w-3"}),m.name]},h))})]})]})]}),r&&o.jsxs(K,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:u,children:[o.jsx(Ga,{className:"h-4 w-4 mr-2"}),i]})]})}function sI({race:e,isOpen:t,onOpenChange:n}){return e?o.jsx(lC,{open:t,onOpenChange:n,side:"right",children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx($n,{raceName:e.name,size:"4xl"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Gr,{category:e.category,size:"sm"}),o.jsx(pa,{itemId:e.edid,itemType:"race",itemName:e.name})]}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description})]})]})}),o.jsxs("div",{className:"space-y-6",children:[e.startingStats&&o.jsxs("div",{children:[o.jsx(gt,{className:"text-lg font-semibold mb-3",children:"Starting Stats"}),o.jsx(Vc,{stats:e.startingStats,regeneration:e.regeneration,title:"",compact:!1})]}),e.skillBonuses&&e.skillBonuses.length>0&&o.jsxs("div",{children:[o.jsx(gt,{className:"text-lg font-semibold mb-3",children:"Starting Skills"}),o.jsx("div",{className:"space-y-2",children:e.skillBonuses.map((s,r)=>o.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border flex items-center justify-between",children:[o.jsxs("span",{className:"font-medium",children:[s.skill," +",s.bonus]}),o.jsx(X,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},r))})]}),e.racialSpells&&e.racialSpells.length>0&&o.jsxs("div",{children:[o.jsx(gt,{className:"text-lg font-semibold mb-3",children:"Racial Abilities"}),o.jsx(Si,{effects:e.racialSpells.map(s=>({name:s.name,description:s.description})),title:"",showDescriptions:!0})]}),e.keywords&&e.keywords.length>0&&o.jsxs("div",{children:[o.jsx(gt,{className:"text-lg font-semibold mb-3",children:"Keywords"}),o.jsx(cm,{keywords:e.keywords.map(s=>s.edid),title:"",maxDisplay:10})]})]})]})}):null}function um(e){var t,n;return{...e,id:e.edid,name:e.name,description:e.description,tags:[e.category,...Array.isArray(e.flags)?e.flags:[]],summary:e.description.length>100?`${e.description.substring(0,100)}...`:e.description,effects:[...((t=e.skillBonuses)==null?void 0:t.map(s=>({type:"positive",name:s.skill,description:`+${s.bonus} to ${s.skill}`,value:s.bonus,target:s.skill})))||[],...((n=e.racialSpells)==null?void 0:n.map(s=>({type:"positive",name:s.name,description:s.description})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalRace:e}}function rI({className:e,allRaces:t}){const{build:n,setRace:s}=wt(),r=dt(),[a,i]=g.useState(!0),l=n.race?t.find(m=>m.edid===n.race):null,c=m=>{s(m.edid)},u=()=>{r("/race")},d=()=>{i(!a)};if(!l)return o.jsxs(Bn,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),o.jsx(Ci,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=um(l);return o.jsxs(Bn,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[o.jsx(Ci,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),o.jsx(qc,{item:f,isExpanded:a,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}function ck(){const[e,t]=g.useState(null),[n,s]=g.useState("grid"),[r,a]=g.useState([]),i=g.useCallback(f=>{t(f)},[]),l=g.useCallback(f=>{s(f)},[]),c=g.useCallback(f=>{a(m=>m.includes(f)?m.filter(h=>h!==f):[...m,f])},[]),u=g.useCallback(()=>{a([])},[]),d=g.useCallback(f=>{a(f)},[]);return{selectedRace:e,viewMode:n,expandedSections:r,setSelectedRace:i,setViewMode:l,toggleExpandedSection:c,clearExpandedSections:u,expandAllSections:d}}function dm({races:e}){const[t,n]=g.useState(""),[s,r]=g.useState({search:"",type:"",tags:[]}),a=g.useMemo(()=>mt.getUniqueCategories(e),[e]),i=g.useMemo(()=>mt.getUniqueTags(e),[e]),l=g.useMemo(()=>{let p=e;return t.trim()&&(p=mt.search(p,t)),s.type&&(p=mt.filterByCategory(p,s.type)),s.tags.length>0&&(p=mt.filterByTags(p,s.tags)),mt.sortByName(p)},[e,t,s]),c=g.useCallback(p=>{n(p),r(y=>({...y,search:p}))},[]),u=g.useCallback(p=>{r(p),n(p.search)},[]),d=g.useCallback(()=>{n(""),r({search:"",type:"",tags:[]})},[]),f=g.useCallback(p=>{r(y=>({...y,tags:y.tags.includes(p)?y.tags:[...y.tags,p]}))},[]),m=g.useCallback(p=>{r(y=>({...y,tags:y.tags.filter(b=>b!==p)}))},[]),h=g.useCallback(p=>{r(y=>({...y,type:p}))},[]);return{searchQuery:t,activeFilters:s,filteredRaces:l,categories:a,tags:i,setSearchQuery:c,setFilters:u,clearFilters:d,addTagFilter:f,removeTagFilter:m,setCategoryFilter:h}}function uk({races:e,selectedRaceId:t}){const n=g.useMemo(()=>e.map(u=>mt.transformToPlayerCreationItem(u)),[e]),s=g.useMemo(()=>KB.generateSearchCategories(e),[e]),r=g.useMemo(()=>t&&mt.getRaceById(e,t)||null,[e,t]),a=g.useMemo(()=>r?mt.calculateRaceStats(r):null,[r]),i=g.useMemo(()=>e.length,[e]),l=g.useMemo(()=>{const u=e.reduce((d,f)=>(d[f.category]=(d[f.category]||0)+1,d),{});return Object.entries(u).map(([d,f])=>({category:d,count:f}))},[e]),c=g.useMemo(()=>{const u=e.reduce((d,f)=>{var m;return f.keywords.forEach(h=>{d[h.edid]=(d[h.edid]||0)+1}),(m=f.flags)==null||m.forEach(h=>{d[h]=(d[h]||0)+1}),d},{});return Object.entries(u).map(([d,f])=>({tag:d,count:f})).sort((d,f)=>f.count-d.count)},[e]);return{transformedRaces:n,searchCategories:s,raceStats:a,selectedRaceDetails:r,totalRaces:i,categoriesWithCounts:l,tagsWithCounts:c}}function dk({raceId:e,allRaces:t}){const n=g.useMemo(()=>mt.getRaceById(t,e)||null,[t,e]),s=g.useMemo(()=>n?mt.getRelatedRaces(n,t):[],[n,t]),r=g.useMemo(()=>{if(!n||s.length===0)return null;const u=s[0];return{selectedRace:n,comparedRace:u,differences:{stats:{health:{selected:n.startingStats.health,compared:u.startingStats.health,difference:n.startingStats.health-u.startingStats.health},magicka:{selected:n.startingStats.magicka,compared:u.startingStats.magicka,difference:n.startingStats.magicka-u.startingStats.magicka},stamina:{selected:n.startingStats.stamina,compared:u.startingStats.stamina,difference:n.startingStats.stamina-u.startingStats.stamina},carryWeight:{selected:n.startingStats.carryWeight,compared:u.startingStats.carryWeight,difference:n.startingStats.carryWeight-u.startingStats.carryWeight}},skills:n.skillBonuses.map(d=>{const f=u.skillBonuses.find(m=>m.skill===d.skill);return{skill:d.skill,selected:d.bonus,compared:(f==null?void 0:f.bonus)||0,difference:d.bonus-((f==null?void 0:f.bonus)||0)}}),spells:{selected:n.racialSpells.map(d=>d.name),compared:u.racialSpells.map(d=>d.name),unique:n.racialSpells.filter(d=>!u.racialSpells.some(f=>f.name===d.name)).map(d=>d.name)}}}},[n,s]),a=g.useMemo(()=>s.length>0,[s]),i=g.useMemo(()=>s.length,[s]);return{race:n,relatedRaces:s,raceComparison:r,isLoading:!1,error:null,hasRelatedRaces:a,relatedRacesCount:i}}function aI({className:e}){const{races:t}=sl(),{build:n,setRace:s}=wt(),r=dt(),[a,i]=g.useState(!0),l=n.race?t.find(m=>m.edid===n.race):null,c=m=>{s(m.edid)},u=()=>{r("/build/race")},d=()=>{i(!a)};if(!l)return o.jsxs(Bn,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),o.jsx(Ci,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=um(l);return o.jsxs(Bn,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[o.jsx(Ci,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),o.jsx(qc,{item:f,isExpanded:a,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}function fk(){const{build:e}=wt(),{races:t,isLoading:n,error:s}=sl(),{viewMode:r,setViewMode:a}=ck(),{filteredRaces:i}=dm({races:t}),c=(()=>{const S=[...new Set(t.flatMap(k=>k.keywords.map(_=>_.edid)))],C=[...new Set(t.flatMap(k=>k.skillBonuses.map(_=>_.skill)))],E=[...new Set(t.map(k=>k.category))];return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:S.map(k=>({id:`keyword-${k}`,label:k,value:k,category:"Fuzzy Search",description:`Races with ${k} keyword`}))},{id:"skill-bonuses",name:"Skill Bonuses",placeholder:"Search by skill...",options:C.map(k=>({id:`skill-${k}`,label:k,value:k,category:"Skill Bonuses",description:`Races with ${k} bonus`}))},{id:"categories",name:"Race Categories",placeholder:"Filter by category...",options:E.map(k=>({id:`category-${k}`,label:k,value:k,category:"Race Categories",description:`${k} races`}))}]})(),[u,d]=g.useState([]),f=S=>{let C;typeof S=="string"?C={id:`custom-${S}`,label:S,value:S,category:"Fuzzy Search"}:C={id:`${S.category}-${S.id}`,label:S.label,value:S.value,category:S.category},u.some(E=>E.value===C.value&&E.category===C.category)||d(E=>[...E,C])},m=S=>{d(C=>C.filter(E=>E.id!==S))},h=i.filter(S=>u.length===0?!0:u.every(C=>{switch(C.category){case"Fuzzy Search":return!0;case"Race Categories":return S.category===C.value;case"Skill Bonuses":return S.skillBonuses.some(E=>E.skill===C.value);case"Keywords":return S.keywords.some(E=>E.edid===C.value);default:return!0}})),p=u.filter(S=>S.category==="Fuzzy Search").map(S=>S.value).join(" "),{filteredRaces:y}=ik(h,p),b=y.map(S=>({...um(S),originalRace:S})),[x,w]=g.useState(null),[v,N]=g.useState(!1),j=S=>{w(S),N(!0)};return n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading races..."})]})}):s?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:s}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsxs(Un,{title:"Races",description:"Choose your character's race. Each race has unique abilities, starting attributes, and racial traits that will shape your journey through Tamriel.",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(xa,{categories:c,onSelect:f,onCustomSearch:f})}),o.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[o.jsx(K,{variant:r==="list"?"default":"ghost",size:"sm",onClick:()=>a("list"),className:"h-8 px-3",title:"List view",children:o.jsx(oo,{className:"h-4 w-4"})}),o.jsx(K,{variant:r==="grid"?"default":"ghost",size:"sm",onClick:()=>a("grid"),className:"h-8 px-3",title:"Grid view",children:o.jsx(Fi,{className:"h-4 w-4"})})]})]}),o.jsx("div",{className:"my-4",children:u.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:()=>d([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(qt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),u.map(S=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(S.id),title:"Click to remove",children:[S.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},S.id))]})}),r==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full",children:b.map(S=>{var E;const C=e.race===((E=S.originalRace)==null?void 0:E.edid);return o.jsx(hb,{item:S,originalRace:S.originalRace,onClick:()=>j(S.originalRace),className:H(C&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}):o.jsx("div",{className:"flex flex-col gap-4 w-full",children:b.map(S=>{var E;const C=e.race===((E=S.originalRace)==null?void 0:E.edid);return o.jsx(hb,{item:S,originalRace:S.originalRace,onClick:()=>j(S.originalRace),className:H(C&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}),b.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No races found matching your criteria."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),o.jsx(sI,{race:x,isOpen:v,onOpenChange:N})]})}function oI({initialFilters:e,onFiltersChange:t,onSearch:n,onTagSelect:s,onTagRemove:r}={}){const[a,i]=g.useState(e||{search:"",selectedFilters:{},selectedTags:[]});return g.useEffect(()=>{e&&i(e)},[e]),{filters:a,handleSearch:f=>{const m={...a,search:f};i(m),n==null||n(f)},handleTagSelect:f=>{const m={id:`${f.category}-${f.id}`,label:f.label,value:f.value,category:f.category};if(!a.selectedTags.some(p=>p.id===m.id)){const p={...a,selectedTags:[...a.selectedTags,m]};i(p),s==null||s(m),t==null||t(p)}},handleTagRemove:f=>{const m={...a,selectedTags:a.selectedTags.filter(h=>h.id!==f)};i(m),r==null||r(f),t==null||t(m)},updateFilters:f=>{i(f),t==null||t(f)}}}function iI({className:e}){const{races:t,isLoading:n,error:s,categories:r,tags:a}=sl(),{searchQuery:i,setSearchQuery:l,filteredRaces:c}=dm({races:t}),u=L.useMemo(()=>c.map(v=>um(v)),[c]),d=L.useMemo(()=>[{id:"categories",name:"Categories",placeholder:"Search by category...",options:(r||[]).map(v=>({id:v,label:v,value:v,category:"categories",description:`Race category: ${v}`}))},{id:"tags",name:"Tags",placeholder:"Search by tags...",options:(a||[]).map(v=>({id:v,label:v,value:v,category:"tags",description:`Race tag: ${v}`}))}],[r,a]),{filters:f,handleSearch:m,handleTagSelect:h,handleTagRemove:p}=oI({onSearch:l,onFiltersChange:v=>{}});L.useEffect(()=>{i!==f.search&&m(i)},[i,m,f.search]);const[y,b]=L.useState(null),x=v=>{const N=t.find(j=>j.edid===v.id);return N?o.jsx(lk,{item:v,originalRace:N,isExpanded:!1,showToggle:!0,className:"h-full"},N.edid):null},w=v=>{const N=t.find(j=>j.edid===v.id);return N?o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:N.name}),o.jsx("p",{className:"text-muted-foreground mb-4",children:N.description}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Category:"})," ",N.category]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Health:"})," ",N.startingStats.health]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Magicka:"})," ",N.startingStats.magicka]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Stamina:"})," ",N.startingStats.stamina]})]})]}):null};return n?o.jsx("div",{className:H("container mx-auto p-6",e),children:o.jsxs("div",{className:"animate-pulse space-y-6",children:[o.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((v,N)=>o.jsx("div",{className:"h-64 bg-gray-200 rounded"},N))})]})}):s?o.jsx("div",{className:H("container mx-auto p-6",e),children:o.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[o.jsx("strong",{children:"Error:"})," ",s]})}):o.jsxs("div",{className:H("container mx-auto p-6",e),children:[o.jsx(a6,{searchCategories:d,selectedTags:f.selectedTags,viewMode:"grid",onTagSelect:h,onTagRemove:p,className:"mb-6"}),o.jsxs(t6,{children:[o.jsx(n6,{children:o.jsx(QO,{items:u,viewMode:"grid",onItemSelect:b,selectedItem:y,renderItemCard:x})}),o.jsx(s6,{children:y?w(y):o.jsx(r6,{title:"Select a Race",description:"Choose a race from the list to view its details"})})]})]})}function lI({className:e,selectedRace:t,onRaceSelect:n,onRaceClear:s,showSearch:r=!0,showComparison:a=!1,maxDisplayRaces:i=3}){const{races:l,isLoading:c,error:u}=sl(),{filteredRaces:d}=dm({races:l});uk({races:l,selectedRaceId:(t==null?void 0:t.edid)||null});const[f,m]=L.useState(!1);return c?o.jsx("div",{className:H("p-4 border rounded-lg",e),children:o.jsxs("div",{className:"animate-pulse space-y-3",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),o.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})}):u?o.jsx("div",{className:H("p-4 border rounded-lg",e),children:o.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-3 py-2 rounded text-sm",children:[o.jsx("strong",{children:"Error:"})," ",u]})}):o.jsxs("div",{className:H("border rounded-lg overflow-hidden",e),children:[o.jsxs("div",{className:"p-4 bg-muted/50 border-b",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(gt,{className:"text-lg font-semibold",children:"Race Selection"}),t&&o.jsx(K,{variant:"ghost",size:"sm",onClick:s,className:"text-muted-foreground hover:text-foreground",children:o.jsx(qt,{className:"h-4 w-4"})})]}),t&&o.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[o.jsx(X,{variant:"secondary",children:t.category}),o.jsxs(Xe,{className:"text-sm text-muted-foreground",children:[t.startingStats.health," HP, ",t.startingStats.magicka," MP, ",t.startingStats.stamina," SP"]})]})]}),o.jsx("div",{className:"p-4",children:t?o.jsxs("div",{className:"space-y-4",children:[o.jsx(qc,{item:{id:t.edid,name:t.name,description:t.description,summary:t.description,category:t.category,effects:[],tags:[],originalRace:t},isExpanded:!0,showToggle:!1,className:"border-0 shadow-none"}),a&&o.jsxs("div",{className:"pt-4 border-t",children:[o.jsx(Xe,{className:"text-sm font-medium mb-2",children:"Compare with:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.filter(h=>h.edid!==t.edid).slice(0,4).map(h=>o.jsx(K,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(h),className:"justify-start text-left h-auto p-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-xs",children:h.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))})]})]}):o.jsxs("div",{className:"space-y-4",children:[r&&o.jsxs("div",{children:[o.jsx(Xe,{className:"text-sm font-medium mb-2",children:"Search for a race:"}),o.jsx(Ci,{races:d,onSelect:n,placeholder:"Type to search races...",className:"w-full"})]}),o.jsxs("div",{children:[o.jsx(Xe,{className:"text-sm font-medium mb-2",children:"Quick select:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.slice(0,i).map(h=>o.jsx(K,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(h),className:"justify-start text-left h-auto p-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-xs",children:h.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))}),l.length>i&&o.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>m(!f),className:"mt-2 w-full",children:[o.jsx(Vn,{className:H("h-4 w-4 transition-transform",f&&"rotate-180")}),"Show ",l.length-i," more races"]})]}),f&&o.jsx("div",{className:"space-y-2",children:l.slice(i).map(h=>o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>n==null?void 0:n(h),className:"w-full justify-start text-left h-auto p-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-xs",children:h.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))})]})})]})}function cI({raceId:e,className:t}){const n=dt(),{race:s,relatedRaces:r}=dk(e);return sl(),s?o.jsxs("div",{className:H("container mx-auto p-6",t),children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs(K,{variant:"ghost",onClick:()=>n("/races"),className:"mb-4",children:[o.jsx(cg,{className:"h-4 w-4 mr-2"}),"Back to Races"]}),o.jsxs("div",{className:"flex items-start gap-6",children:[o.jsx($n,{raceName:s.name,size:"xl"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(co,{className:"text-3xl font-bold",children:s.name}),o.jsx(Gr,{category:s.category,size:"lg"})]}),o.jsx(Xe,{className:"text-lg text-muted-foreground mb-4",children:s.description}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(a3,{className:"h-4 w-4"}),o.jsx("span",{children:"Playable Race"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ye,{className:"h-4 w-4"}),o.jsxs("span",{children:[s.keywords.length," Keywords"]})]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[o.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[o.jsx(za,{className:"text-xl font-semibold mb-4",children:"Statistics"}),o.jsx(Vc,{stats:s.startingStats,regeneration:s.regeneration,title:"Starting Stats",compact:!1,showRegeneration:!0})]}),s.racialSpells.length>0&&o.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[o.jsx(za,{className:"text-xl font-semibold mb-4",children:"Racial Abilities"}),o.jsx(Si,{effects:s.racialSpells.map(a=>({name:a.name,description:a.description})),title:"Racial Spells",showDescriptions:!0,compact:!1})]}),s.keywords.length>0&&o.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[o.jsx(za,{className:"text-xl font-semibold mb-4",children:"Keywords"}),o.jsx(cm,{keywords:s.keywords.map(a=>a.edid),title:"Race Keywords",showCount:!0})]}),o.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[o.jsx(za,{className:"text-xl font-semibold mb-4",children:"Additional Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(gt,{className:"text-lg font-medium mb-2",children:"Description"}),o.jsx(Xe,{className:"text-muted-foreground",children:s.description})]}),s.racialSpells.length>0&&o.jsxs("div",{children:[o.jsx(gt,{className:"text-lg font-medium mb-2",children:"Racial Spells"}),o.jsx("div",{className:"space-y-2",children:s.racialSpells.map((a,i)=>o.jsxs("div",{className:"p-3 bg-muted/50 rounded",children:[o.jsx("div",{className:"font-medium",children:a.name}),o.jsx("div",{className:"text-sm text-muted-foreground",children:a.description})]},i))})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[o.jsx(gt,{className:"text-lg font-semibold mb-3",children:"Quick Actions"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{className:"w-full",size:"sm",children:"Add to Character Build"}),o.jsx(K,{variant:"outline",className:"w-full",size:"sm",children:"Compare with Other Races"}),o.jsxs(K,{variant:"outline",className:"w-full",size:"sm",children:[o.jsx(Ga,{className:"h-4 w-4 mr-2"}),"View in Wiki"]})]})]}),o.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[o.jsx(gt,{className:"text-lg font-semibold mb-3",children:"Race Summary"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Category:"}),o.jsx(X,{variant:"secondary",children:s.category})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Health:"}),o.jsx("span",{className:"font-medium",children:s.startingStats.health})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka:"}),o.jsx("span",{className:"font-medium",children:s.startingStats.magicka})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina:"}),o.jsx("span",{className:"font-medium",children:s.startingStats.stamina})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight:"}),o.jsx("span",{className:"font-medium",children:s.startingStats.carryWeight})]})]})]}),r.length>0&&o.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[o.jsx(gt,{className:"text-lg font-semibold mb-3",children:"Related Races"}),o.jsx("div",{className:"space-y-2",children:r.slice(0,3).map(a=>o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>n(`/races/${a.edid}`),className:"w-full justify-start text-left h-auto p-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($n,{raceName:a.name,size:"sm"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm",children:a.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:a.category})]})]})},a.edid))})]})]})]})]}):o.jsxs("div",{className:H("container mx-auto p-6",t),children:[o.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[o.jsx("strong",{children:"Error:"})," ","Race not found"]}),o.jsxs(K,{variant:"outline",onClick:()=>n("/races"),className:"mt-4",children:[o.jsx(cg,{className:"h-4 w-4 mr-2"}),"Back to Races"]})]})}function uI(){const{races:e,isLoading:t,error:n,categories:s,tags:r}=sl(),{selectedRace:a,setSelectedRace:i,viewMode:l,setViewMode:c,expandedSections:u}=ck(),{searchQuery:d,setSearchQuery:f,activeFilters:m,clearFilters:h,filteredRaces:p}=dm({races:e}),{transformedRaces:y,searchCategories:b,categoriesWithCounts:x}=uk({races:e,selectedRaceId:a}),{race:w,relatedRaces:v,raceComparison:N}=dk({raceId:a||"",allRaces:e}),[j,S]=L.useState(!1),[C,E]=L.useState("overview");if(t)return o.jsxs("div",{className:"container mx-auto p-6",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Loading..."}),o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]});if(n)return o.jsxs("div",{className:"container mx-auto p-6",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Error"}),o.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[o.jsx("strong",{children:"Error:"})," ",n]})]});const k=e[0];return o.jsxs("div",{className:"container mx-auto p-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Races MVA Demo - Model View Adapter Architecture"}),o.jsxs(Wi,{value:C,onValueChange:E,className:"mb-6",children:[o.jsxs(Ki,{children:[o.jsx(an,{value:"overview",children:"Overview"}),o.jsx(an,{value:"adapters",children:"Adapters"}),o.jsx(an,{value:"components",children:"Components"}),o.jsx(an,{value:"views",children:"Views"})]}),o.jsx(wn,{value:"overview",className:"space-y-6",children:o.jsxs(be,{children:[o.jsxs(Te,{children:[o.jsx(Fe,{children:"MVA Architecture Overview"}),o.jsx(nr,{children:"This demo showcases the Model-View-Adapter pattern implementation for the Races feature."})]}),o.jsx(we,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Model Layer"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Data management and business logic"}),o.jsx(X,{variant:"outline",className:"mt-2",children:"RaceModel"})]}),o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Adapter Layer"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"State management and data transformation"}),o.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[o.jsx(X,{variant:"outline",children:"useRaceData"}),o.jsx(X,{variant:"outline",children:"useRaceState"}),o.jsx(X,{variant:"outline",children:"useRaceFilters"})]})]}),o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"View Layer"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"UI components and presentation"}),o.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[o.jsx(X,{variant:"outline",children:"RaceCard"}),o.jsx(X,{variant:"outline",children:"RacePageView"})]})]})]})})]})}),o.jsx(wn,{value:"adapters",className:"space-y-6",children:o.jsxs(be,{children:[o.jsxs(Te,{children:[o.jsx(Fe,{children:"Adapter State Demo"}),o.jsx(nr,{children:"Interactive demonstration of adapter state management"})]}),o.jsx(we,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-semibold",children:"State Management (useRaceState)"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Selected Race:"}),o.jsx(X,{variant:a?"default":"secondary",children:a||"None"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"View Mode:"}),o.jsxs("div",{className:"flex border rounded",children:[o.jsx(K,{variant:l==="grid"?"default":"ghost",size:"sm",onClick:()=>c("grid"),children:"Grid"}),o.jsx(K,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),children:"List"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Expanded Sections:"}),o.jsx(X,{variant:"outline",children:u.length})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-semibold",children:"Filters (useRaceFilters)"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Search Query:"}),o.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),className:"px-2 py-1 border rounded text-sm",placeholder:"Search races..."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Active Filters:"}),o.jsx(X,{variant:"outline",children:m.tags.length+(m.type?1:0)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Filtered Results:"}),o.jsxs(X,{variant:"outline",children:[p.length," of ",e.length]})]}),o.jsx(K,{size:"sm",onClick:h,children:"Clear Filters"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-semibold",children:"Computed Data (useRaceComputed)"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Transformed Races:"}),o.jsx(X,{variant:"outline",children:y.length})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Search Categories:"}),o.jsx(X,{variant:"outline",children:b.length})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Categories with Counts:"}),o.jsx(X,{variant:"outline",children:Object.keys(x).length})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-semibold",children:"Detail View (useRaceDetail)"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Selected Race Details:"}),o.jsx(X,{variant:w?"default":"secondary",children:(w==null?void 0:w.name)||"None"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Related Races:"}),o.jsx(X,{variant:"outline",children:v.length})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Comparison Available:"}),o.jsx(X,{variant:N?"default":"secondary",children:N?"Yes":"No"})]})]})]})]})})]})}),o.jsxs(wn,{value:"components",className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Atomic & Composition Components"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Data Summary"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Total Races:"})," ",e.length]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Categories:"})," ",s.join(", ")]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Total Tags:"})," ",r.length]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Sample Race: ",k==null?void 0:k.name]}),k&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-gray-600 text-sm",children:k.description}),o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Category:"})," ",k.category]}),o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Keywords:"})," ",k.keywords.length]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAvatar Component"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),o.jsx($n,{raceName:(k==null?void 0:k.name)||"Nord",size:"sm"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),o.jsx($n,{raceName:(k==null?void 0:k.name)||"Nord",size:"lg"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),o.jsx($n,{raceName:(k==null?void 0:k.name)||"Nord",size:"2xl"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Extra Large"}),o.jsx($n,{raceName:(k==null?void 0:k.name)||"Nord",size:"xl"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Uses generic EntityAvatar with race-specific configuration"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CategoryBadge Component"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),o.jsx(Gr,{category:"Human",size:"sm"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),o.jsx(Gr,{category:"Elf",size:"md"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),o.jsx(Gr,{category:"Beast",size:"lg"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Uses generic CategoryBadge with race-specific styling"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"KeywordTag Component"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Auto-detected types:"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(ys,{keyword:"destruction"}),o.jsx(ys,{keyword:"waterbreathing"}),o.jsx(ys,{keyword:"strong stomach"}),o.jsx(ys,{keyword:"custom_flag"})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Explicit types:"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(ys,{keyword:"alteration",type:"skill"}),o.jsx(ys,{keyword:"night eye",type:"ability"}),o.jsx(ys,{keyword:"beast race",type:"trait"}),o.jsx(ys,{keyword:"magic",type:"flag"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Auto-detects keyword types or accepts explicit type prop"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"StatBar Component"}),o.jsxs("div",{className:"space-y-4",children:[k&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(er,{value:k.startingStats.health,maxValue:200,label:"Health",color:"red",size:"md"}),o.jsx(er,{value:k.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"md"}),o.jsx(er,{value:k.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"md"})]}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Progress bars with configurable colors, sizes, and labels"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceStatsDisplay Component"}),o.jsxs("div",{className:"space-y-4",children:[k&&o.jsx(Vc,{stats:k.startingStats,regeneration:k.regeneration,title:"Sample Stats",compact:!0}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Composition component that displays race statistics"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceEffectsDisplay Component"}),o.jsxs("div",{className:"space-y-4",children:[k&&k.racialSpells.length>0&&o.jsx(Si,{effects:k.racialSpells.map(_=>({name:_.name,description:_.description})),title:"Racial Abilities",maxDisplay:3}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Composition component for displaying race effects/abilities"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceKeywordsDisplay Component"}),o.jsxs("div",{className:"space-y-4",children:[k&&k.keywords.length>0&&o.jsx(cm,{keywords:k.keywords.map(_=>_.edid),title:"Race Keywords",maxDisplay:6}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Composition component that uses KeywordTag atomic components"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceCard Composition Component"}),o.jsxs("div",{className:"space-y-4",children:[k&&o.jsx(lk,{originalRace:k,isExpanded:!0,showToggle:!1,className:"max-w-2xl"}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Main composition component that orchestrates all atomic components"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAutocomplete Component"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ci,{races:e.slice(0,5),onSelect:_=>console.log("Selected:",_.name),placeholder:"Search for a race...",className:"w-full"}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Search and selection component for races"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAccordion Component"}),o.jsxs("div",{className:"space-y-4",children:[k&&o.jsx(qc,{item:{id:k.edid,name:k.name,description:k.description,summary:k.description,category:k.category,effects:[],tags:[],originalRace:k},isExpanded:j,onToggle:()=>S(!j),showToggle:!0,className:"border-0 shadow-none"}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Accordion-style race display for player creation (click to expand/collapse)"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceSelectionCard Component"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(rI,{allRaces:e.slice(0,5),className:"max-w-2xl"}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Complete race selection interface for player creation"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sample Races with All Components"}),o.jsx("div",{className:"space-y-4",children:e.slice(0,2).map(_=>o.jsxs("div",{className:"border rounded p-4",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[o.jsx($n,{raceName:_.name,size:"2xl"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:_.name}),o.jsx("div",{className:"flex items-center gap-2 mt-1",children:o.jsx(Gr,{category:_.category,size:"sm"})})]})]}),o.jsx("p",{className:"text-sm mb-3",children:_.description}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[o.jsx(er,{value:_.startingStats.health,maxValue:200,label:"Health",color:"red",size:"sm"}),o.jsx(er,{value:_.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),o.jsx(er,{value:_.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.keywords.slice(0,5).map((P,O)=>o.jsx(ys,{keyword:P.edid},O)),_.keywords.length>5&&o.jsxs("span",{className:"text-xs text-gray-500",children:["+",_.keywords.length-5," more"]})]})]},_.edid))})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"View Components Demo"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceQuickSelectorView"}),o.jsx(lI,{selectedRace:a?e.find(_=>_.edid===a):void 0,onRaceSelect:_=>i(_.edid),onRaceClear:()=>i(null),showSearch:!0,showComparison:!0,maxDisplayRaces:3,className:"max-w-md"}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:o.jsx("p",{children:"Compact selection interface for embedded contexts"})})]}),a&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceDetailView"}),o.jsx("div",{className:"border rounded-lg overflow-hidden",children:o.jsx(cI,{raceId:a,className:"p-4"})}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:o.jsx("p",{children:"Detailed race view with rich information display"})})]})]})]})]})]}),o.jsxs(wn,{value:"views",className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"View Components"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(be,{children:[o.jsxs(Te,{children:[o.jsx(Fe,{children:"RacePageView"}),o.jsx(nr,{children:"Main page view with full functionality"})]}),o.jsx(we,{children:o.jsx(fk,{className:"border rounded-lg p-4"})})]}),o.jsxs(be,{children:[o.jsxs(Te,{children:[o.jsx(Fe,{children:"RaceReferenceView"}),o.jsx(nr,{children:"Browse/search interface"})]}),o.jsx(we,{children:o.jsx(iI,{className:"border rounded-lg p-4"})})]})]})]})]})]})}function sh({text:e,className:t="text-sm text-muted-foreground"}){if(!e)return null;let n=e.replace(/<[^>]*>/g,"");n=n.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const s=n.split(/(<[^>]+>)/g);return o.jsx("div",{className:t,children:s.map((r,a)=>{if(r.startsWith("<")&&r.endsWith(">")){const i=r.slice(1,-1);return o.jsx("span",{className:"font-bold italic text-skyrim-gold",children:i},a)}return r})})}function dI({description:e}){if(!e)return null;const t=e.split(/(<[^>]+>)/g);return o.jsx(Xe,{className:"text-xs text-muted-foreground",children:t.map((n,s)=>{if(n.startsWith("<")&&n.endsWith(">")){const r=n.slice(1,-1);return o.jsx("span",{className:"font-bold italic text-skyrim-gold",children:r},s)}return n})})}function rh({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=e.replace(/<[^>]*>/g,"");r=r.replace(/<mag>/g,t.toString()),r=r.replace(/<magnitude>/g,t.toString()),r=r.replace(/<dur>/g,n.toString()),r=r.replace(/<duration>/g,n.toString()),s>0&&(r=r.replace(/<area>/g,s.toString())),r=r.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const a=r.split(/(<[^>]+>)/g);return o.jsx(Xe,{className:"text-xs text-muted-foreground",children:a.map((i,l)=>{if(i.startsWith("<")&&i.endsWith(">")){const c=i.slice(1,-1);return o.jsx("span",{className:"font-bold italic text-skyrim-gold",children:c},l)}return i})})}function ah(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function oh(e){const t=[/<mag>/g,/<magnitude>/g],n=[/<dur>/g,/<duration>/g],s=t.some(a=>a.test(e)),r=n.some(a=>a.test(e));return{hasMagnitude:s,hasDuration:r}}const fI={Restoration:o.jsx(zc,{className:"h-4 w-4 text-green-500"}),Destruction:o.jsx(RN,{className:"h-4 w-4 text-red-500"}),Alteration:o.jsx(es,{className:"h-4 w-4 text-blue-500"}),Illusion:o.jsx(lv,{className:"h-4 w-4 text-purple-500"}),Conjuration:o.jsx(ca,{className:"h-4 w-4 text-purple-500"}),Enchanting:o.jsx(MN,{className:"h-4 w-4 text-blue-500"}),Alchemy:o.jsx(r4,{className:"h-4 w-4 text-green-500"}),"Light Armor":o.jsx(es,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":o.jsx(es,{className:"h-4 w-4 text-gray-500"}),"One-Handed":o.jsx(fg,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":o.jsx(fg,{className:"h-4 w-4 text-red-500"}),Archery:o.jsx(Cd,{className:"h-4 w-4 text-green-500"}),Block:o.jsx(es,{className:"h-4 w-4 text-yellow-500"}),Smithing:o.jsx(es,{className:"h-4 w-4 text-gray-500"}),Speechcraft:o.jsx(lv,{className:"h-4 w-4 text-blue-500"}),Sneak:o.jsx(cx,{className:"h-4 w-4 text-purple-500"}),Lockpicking:o.jsx(cv,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:o.jsx(cv,{className:"h-4 w-4 text-purple-500"})},mI={Divine:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Daedric:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Aedric:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Tribal:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Ancestral:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},gb={sm:"text-xs px-2 py-0.5"};function Fd({item:e,originalReligion:t,isExpanded:n=!1,onToggle:s,className:r,showBlessings:a=!0,showTenets:i=!0,showBoons:l=!0,showFavoredRaces:c=!0,disableHover:u,showToggle:d}){var h,p,y,b,x,w,v,N;const f=j=>{switch(j){case"positive":return o.jsx(Qr,{className:"h-4 w-4 text-green-500"});case"negative":return o.jsx($l,{className:"h-4 w-4 text-red-500"});case"neutral":return o.jsx(Df,{className:"h-4 w-4 text-blue-500"})}},m=j=>fI[j]||o.jsx(Ye,{className:"h-4 w-4 text-skyrim-gold"});return o.jsxs(he,{expanded:n,onToggle:s,className:r,disableHover:u,children:[o.jsxs(he.Header,{children:[d&&o.jsx(pa,{itemId:e.id,itemType:"religion",itemName:e.name}),o.jsx("div",{className:"flex-1",children:o.jsx(gt,{className:"text-primary font-semibold",children:e.name})}),e.category&&o.jsx(X,{variant:"outline",className:H(mI[e.category]||"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",gb.sm,"font-medium transition-colors"),children:e.category}),Xt()&&c&&t&&Array.isArray(t.favoredRaces)&&t.favoredRaces.length>0&&o.jsx("div",{className:"flex items-center gap-1",children:t.favoredRaces.map((j,S)=>o.jsxs(X,{variant:"outline",className:H("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20",gb.sm,"font-medium transition-colors"),children:[o.jsx(Ye,{className:"h-3 w-3 mr-1"}),"Favors ",j]},S))})]}),o.jsxs(he.Summary,{children:[o.jsx("div",{className:"line-clamp-2",children:o.jsx(sh,{text:e.summary||e.description,className:"text-sm text-muted-foreground"})}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[(h=e.effects)==null?void 0:h.slice(0,2).map((j,S)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:j.description,children:[f(j.type),o.jsx("span",{className:"font-medium",children:j.name})]},S)),Xt()&&c&&((p=t==null?void 0:t.favoredRaces)==null?void 0:p.slice(0,2).map((j,S)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",children:[o.jsx(Ye,{className:"h-3 w-3 text-skyrim-gold"}),o.jsx("span",{className:"font-medium",children:j})]},`race-${S}`)))]})]}),o.jsxs(he.Details,{children:[e.description&&o.jsx("div",{children:o.jsx(sh,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),Xt()&&c&&Array.isArray(t==null?void 0:t.favoredRaces)&&t.favoredRaces.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Favored Races"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.favoredRaces.map((j,S)=>o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg border border-border",children:[o.jsx(Ye,{className:"h-4 w-4 text-skyrim-gold"}),o.jsx("span",{className:"text-sm font-medium",children:j})]},S))})]}),Array.isArray(t==null?void 0:t.worshipRestrictions)&&t.worshipRestrictions.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Worship Restrictions"}),o.jsx("div",{className:"space-y-2",children:t.worshipRestrictions.map((j,S)=>o.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx($l,{className:"h-4 w-4 text-red-500 mt-0.5"}),o.jsx(sh,{text:j,className:"text-sm text-muted-foreground"})]})},S))})]}),a&&Array.isArray((y=t==null?void 0:t.blessing)==null?void 0:y.effects)&&t.blessing.effects.length>0&&o.jsxs("div",{children:[o.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Blessing of ",e.name]}),o.jsx("div",{className:"space-y-3",children:t.blessing.effects.filter(j=>j.effectType!=="1"&&j.effectType!=="3").map((j,S)=>{const{hasDuration:C}=oh(j.effectDescription);return o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.effectType&&m(j.effectType)]}),o.jsxs("div",{className:"flex-1",children:[o.jsx(Xe,{className:"font-medium text-sm mb-1",children:j.effectName}),o.jsx(rh,{description:j.effectDescription,magnitude:j.magnitude,duration:j.duration,area:j.area}),C&&j.duration>0&&o.jsxs(Xe,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for ",ah(j.duration),"."]}),o.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:j.area>0&&o.jsxs("span",{children:["Area: ",j.area]})})]})]})},S)})})]}),i&&Array.isArray((b=t==null?void 0:t.tenet)==null?void 0:b.effects)&&t.tenet.effects.length>0&&o.jsxs("div",{children:[o.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Tenets of ",e.name]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.tenet.effects.map((j,S)=>j.effectDescription.split(".").filter(E=>E.trim().length>0).map((E,k)=>o.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted/50 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.targetAttribute&&m(j.targetAttribute)]}),o.jsx("div",{className:"flex-1",children:o.jsx(dI,{description:E.trim()+"."})})]},`${S}-${k}`)))})]}),l&&(Array.isArray((x=t==null?void 0:t.boon1)==null?void 0:x.effects)&&t.boon1.effects.length>0||Array.isArray((w=t==null?void 0:t.boon2)==null?void 0:w.effects)&&t.boon2.effects.length>0)&&o.jsxs("div",{children:[o.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Boons of ",e.name]}),o.jsxs("div",{className:"space-y-4",children:[Array.isArray((v=t==null?void 0:t.boon1)==null?void 0:v.effects)&&t.boon1.effects.length>0&&o.jsxs("div",{children:[o.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Follower Boon"}),o.jsx("div",{className:"space-y-3",children:t.boon1.effects.map((j,S)=>{const{hasDuration:C}=oh(j.effectDescription);return o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.effectType&&m(j.effectType)]}),o.jsxs("div",{className:"flex-1",children:[o.jsx(Xe,{className:"font-medium text-sm mb-1",children:j.effectName}),o.jsx(rh,{description:j.effectDescription,magnitude:j.magnitude,duration:j.duration,area:j.area}),C&&j.duration>0&&o.jsxs(Xe,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",ah(j.duration),"."]}),o.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:j.area>0&&o.jsxs("span",{children:["Area: ",j.area]})})]})]})},S)})})]}),Array.isArray((N=t==null?void 0:t.boon2)==null?void 0:N.effects)&&t.boon2.effects.length>0&&o.jsxs("div",{children:[o.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Devotee Boon"}),o.jsx("div",{className:"space-y-3",children:t.boon2.effects.map((j,S)=>{const{hasDuration:C}=oh(j.effectDescription);return o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.effectType&&m(j.effectType)]}),o.jsxs("div",{className:"flex-1",children:[o.jsx(Xe,{className:"font-medium text-sm mb-1",children:j.effectName}),o.jsx(rh,{description:j.effectDescription,magnitude:j.magnitude,duration:j.duration,area:j.area}),C&&j.duration>0&&o.jsxs(Xe,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",ah(j.duration),"."]}),o.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:j.area>0&&o.jsxs("span",{children:["Area: ",j.area]})})]})]})},S)})})]})]})]})]})]})}function hI(){const{data:e,loading:t,error:n}=sC(),[s,r]=g.useState(new Set),[a,i]=g.useState("alphabetical"),[l,c]=g.useState("grid"),[u,d]=g.useState(!0),[f,m]=g.useState(!0),[h,p]=g.useState(!0),[y,b]=g.useState(Xt()),x=g.useMemo(()=>(e||[]).map($g),[e]),v=(()=>{const D=[...new Set((e||[]).map(z=>z.pantheon).filter(Boolean))],A=[...new Set(x.flatMap(z=>z.tags))];return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"pantheons",name:"Pantheons",placeholder:"Search by pantheon...",options:D.map(z=>({id:`pantheon-${z}`,label:z,value:z,category:"Pantheons",description:`Religions from ${z} pantheon`}))},...Xt()?[{id:"favored-races",name:"Favored Races",placeholder:"Search by favored race...",options:A.map(z=>({id:`race-${z}`,label:z,value:z,category:"Favored Races",description:`Religions that favor ${z}`}))}]:[]]})(),[N,j]=g.useState([]),S=D=>{let A;typeof D=="string"?A={id:`custom-${D}`,label:D,value:D,category:"Custom"}:A={id:D.id,label:D.label,value:D.value,category:D.category},N.find(z=>z.value===A.value)||j(z=>[...z,A])},C=D=>{j(A=>A.filter(z=>z.id!==D))},E=g.useMemo(()=>N.length===0?e||[]:(e||[]).filter(D=>N.every(A=>{var T,R,B;const z=A.value.toLowerCase();return!!((T=D.pantheon)!=null&&T.toLowerCase().includes(z)||(R=D.tags)!=null&&R.some(U=>U.toLowerCase().includes(z))||D.name.toLowerCase().includes(z)||(B=D.description)!=null&&B.toLowerCase().includes(z))})),[e,N]),k=g.useMemo(()=>{const D=[...E];switch(a){case"alphabetical":return D.sort((A,z)=>A.name.localeCompare(z.name));case"divine-type":return D.sort((A,z)=>{const T=U=>{switch(U==null?void 0:U.toLowerCase()){case"divine":return 1;case"daedric":return 2;case"yokudan":return 3;case"custom":return 4;default:return 5}},R=T(A.pantheon),B=T(z.pantheon);return R!==B?R-B:A.name.localeCompare(z.name)});default:return D}},[E,a]),_=g.useMemo(()=>k.map($g),[k]),P=D=>{r(A=>{const z=new Set(A);return z.has(D)?z.delete(D):z.add(D),z})},O=()=>{r(new Set(_.map(D=>D.id)))},$=()=>{r(new Set)},M=_.length>0&&_.every(D=>s.has(D.id));return _.some(D=>s.has(D.id)),t?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading religions..."})]})}):n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:n}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsxs(Un,{title:"Religions",description:"Choose your character's religion. Each deity offers unique blessings, tenets, and powers that will guide your spiritual journey through Tamriel.",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(xa,{categories:v,onSelect:S,onCustomSearch:S})}),o.jsxs(e0,{children:[o.jsx(t0,{asChild:!0,children:o.jsxs(K,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[o.jsx(Vn,{className:"h-4 w-4"}),a==="alphabetical"?"A-Z":"Type"]})}),o.jsxs(Kf,{align:"end",children:[o.jsx(dr,{onClick:()=>i("alphabetical"),children:"Alphabetical"}),o.jsx(dr,{onClick:()=>i("divine-type"),children:"Divine Type"})]})]}),o.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[o.jsx(K,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),className:"h-8 px-3",title:"List view",children:o.jsx(oo,{className:"h-4 w-4"})}),o.jsx(K,{variant:l==="grid"?"default":"ghost",size:"sm",onClick:()=>c("grid"),className:"h-8 px-3",title:"Grid view",children:o.jsx(Fi,{className:"h-4 w-4"})})]}),o.jsx(K,{variant:"outline",size:"sm",onClick:M?$:O,className:"flex items-center justify-center",title:M?"Collapse all accordions":"Expand all accordions",children:M?o.jsx(_4,{className:"h-4 w-4"}):o.jsx(N4,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"my-4",children:N.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:()=>j([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(qt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),N.map(D=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>C(D.id),title:"Click to remove",children:[D.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},D.id))]})}),_.length>0&&o.jsxs(X8,{children:[o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border bg-muted/30 border-border",children:[o.jsx(Vf,{checked:u&&f&&h&&y,onCheckedChange:D=>{d(D),m(D),p(D),b(D)}}),o.jsx("span",{className:"text-sm font-medium",children:"Toggle All"})]}),o.jsxs(M8,{columns:Xt()?4:3,children:[o.jsx(ku,{title:"Blessings",description:"Deity blessings and effects",checked:u,onCheckedChange:d}),o.jsx(ku,{title:"Tenets",description:"Religious tenets and rules",checked:f,onCheckedChange:m}),o.jsx(ku,{title:"Boons",description:"Follower and devotee powers",checked:h,onCheckedChange:p}),Xt()&&o.jsx(ku,{title:"Favored Races",description:"Races favored by this deity",checked:y,onCheckedChange:b})]})]}),l==="grid"?o.jsx(wC,{columns:3,gap:"md",className:"w-full mt-6",children:_.map(D=>{const A=e.find(T=>T.name===D.name),z=s.has(D.id);return o.jsx(Fd,{item:D,originalReligion:A,isExpanded:z,onToggle:()=>P(D.id),className:"w-full",showBlessings:u,showTenets:f,showBoons:h,showFavoredRaces:y},D.id)})}):o.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:_.map(D=>{const A=e.find(T=>T.name===D.name),z=s.has(D.id);return o.jsx(Fd,{item:D,originalReligion:A,isExpanded:z,onToggle:()=>P(D.id),className:"w-full",showBlessings:u,showTenets:f,showBoons:h,showFavoredRaces:y},D.id)})}),_.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No religions found matching your criteria."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]})}const gI="modulepreload",pI=function(e){return"/lorerim-arcaneum/"+e},pb={},Ys=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=pI(c),c in pb)return;pb[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":gI,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return r.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function xb(e){return e.map(t=>({id:`skill-${t.id}`,type:"skill",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...t.keyAbilities||[],...t.metaTags||[],t.scaling||""],originalData:t,url:`/build/perks?skill=${t.id}`}))}function yb(e){return e.map(t=>({id:`race-${t.id}`,type:"race",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.source||"",...t.tags||[],...t.keywords||[]],originalData:t,url:"/races"}))}function vb(e){return e.map(t=>{var n;return{id:`trait-${t.id}`,type:"trait",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...((n=t.effects)==null?void 0:n.map(s=>s.description||s.type))||[]],originalData:t,url:"/traits"}})}function bb(e){return e.map(t=>{var n,s,r,a,i,l,c,u,d,f;return{id:`religion-${t.id||t.name}`,type:"religion",name:t.name,description:((n=t.tenet)==null?void 0:n.description)||"",category:t.type||t.pantheon||"",tags:t.tags||[],searchableText:[t.name,((s=t.tenet)==null?void 0:s.description)||"",t.type||"",t.pantheon||"",...t.tags||[],...Xt()?t.favoredRaces||[]:[],...t.worshipRestrictions||[],...((a=(r=t.tenet)==null?void 0:r.effects)==null?void 0:a.map(m=>m.effectName))||[],...((l=(i=t.blessing)==null?void 0:i.effects)==null?void 0:l.map(m=>m.effectName))||[],...((u=(c=t.boon1)==null?void 0:c.effects)==null?void 0:u.map(m=>m.effectName))||[],...((f=(d=t.boon2)==null?void 0:d.effects)==null?void 0:f.map(m=>m.effectName))||[]],originalData:t,url:"/religions"}})}function wb(e){return e.map(t=>{var n,s;return{id:`birthsign-${t.id||t.edid}`,type:"birthsign",name:t.name,description:t.description,category:t.group,tags:t.tags||[],searchableText:[t.name,t.description||"",t.group||"",...t.tags||[],...((n=t.powers)==null?void 0:n.map(r=>r.name||r.description))||[],...((s=t.stat_modifications)==null?void 0:s.map(r=>r.stat))||[]],originalData:t,url:"/birthsigns"}})}function Nb(e){return e.map(t=>({id:`destiny-${t.id}`,type:"destiny",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.lore||"",...t.tags||[],...t.prerequisites||[]],originalData:t,url:"/destiny"}))}function jb(e){return e.map(t=>{var n;return{id:`perk-${t.treeId||t.id}`,type:"perk",name:t.treeName||t.name,description:t.treeDescription||t.description,category:t.category,tags:t.tags||[],searchableText:[t.treeName||t.name,t.treeDescription||t.description||"",t.category||"",...t.tags||[],...((n=t.perks)==null?void 0:n.map(s=>s.name))||[]],originalData:t,url:"/build/perks"}})}function Sb(e){return e.map(t=>{var n,s,r,a,i,l;return{id:`perk-ref-${t.edid}`,type:"perk-reference",name:t.name,description:((s=(n=t.ranks[0])==null?void 0:n.description)==null?void 0:s.base)||"",category:t.category,tags:t.tags,searchableText:[t.name,((a=(r=t.ranks[0])==null?void 0:r.description)==null?void 0:a.base)||"",((l=(i=t.ranks[0])==null?void 0:i.description)==null?void 0:l.subtext)||"",t.skillTreeName,t.category,...t.tags,...t.prerequisites,t.isRoot?"root perk":"branch perk",t.totalRanks>1?"multi-rank":"single-rank"],originalData:t,url:`/perk-references?skill=${t.skillTree}&perk=${t.edid}`}})}function Cb(e){return e.map(t=>({id:`spell-${t.editorId}`,type:"spell",name:t.name,description:t.description,category:t.school,tags:t.tags,searchableText:[t.name,t.description||"",t.school||"",t.level||"",t.tome||"",...t.tags,...t.effects.map(n=>n.name),...t.effects.map(n=>n.description),t.isAreaSpell?"area spell":"",t.isDurationSpell?"duration spell":"",t.isInstantSpell?"instant spell":"",`magicka cost ${t.magickaCost}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`,`area ${t.maxArea}`].filter(Boolean),originalData:t,url:`/spells?spell=${t.editorId}`}))}function kb(e){return e.map(t=>({id:`recipe-${t.name}`,type:"recipe",name:t.name,description:t.description,category:t.category,tags:t.tags,searchableText:[t.name,t.description||"",t.category||"",t.output||"",t.difficulty||"",t.type||"",...t.tags,...t.ingredients.map(n=>typeof n=="string"?n:n.name||n.item||""),...t.effects.map(n=>n.name),...t.effects.map(n=>n.description),`ingredients ${t.ingredientCount}`,`effects ${t.effectCount}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`].filter(Boolean),originalData:t,url:`/cookbook?recipe=${encodeURIComponent(t.name)}`}))}function xI(e){return{id:e.item.id,name:e.item.name,description:e.item.description||"",summary:e.item.description||"",tags:e.item.tags,category:e.item.category,imageUrl:void 0,effects:[],associatedItems:[],originalSearchResult:e}}function yI(e){return e.map(t=>{var n,s;return{field:t.key||"unknown",snippet:t.value,startIndex:((n=t.indices[0])==null?void 0:n[0])||0,endIndex:((s=t.indices[0])==null?void 0:s[1])||0}})}class vI{constructor(){Ve(this,"searchIndex",null);Ve(this,"isIndexing",!1);Ve(this,"allSearchableItems",[]);Ve(this,"indexedStores",new Set);Ve(this,"fuseOptions",{keys:[{name:"name",weight:.8},{name:"description",weight:.6},{name:"category",weight:.4},{name:"tags",weight:.5},{name:"searchableText",weight:.3}],threshold:.6,includeMatches:!0,includeScore:!0,minMatchCharLength:2,ignoreLocation:!0,useExtendedSearch:!1,findAllMatches:!0});Ve(this,"transformSkillsToSearchable",xb);Ve(this,"transformRacesToSearchable",yb);Ve(this,"transformTraitsToSearchable",vb);Ve(this,"transformReligionsToSearchable",bb);Ve(this,"transformBirthsignsToSearchable",wb);Ve(this,"transformDestinyNodesToSearchable",Nb);Ve(this,"transformPerkTreesToSearchable",jb);Ve(this,"transformPerkReferencesToSearchable",Sb);Ve(this,"transformRecipesToSearchable",kb);Ve(this,"transformSpellsToSearchable",Cb)}async addToIndex(t,n){this.indexedStores.has(t)||(this.allSearchableItems.push(...n),this.indexedStores.add(t),this.searchIndex=new Wt(this.allSearchableItems,this.fuseOptions))}hasIndexedData(){return this.allSearchableItems.length>0}rebuildSearchIndex(){this.allSearchableItems.length>0&&(this.searchIndex=new Wt(this.allSearchableItems,this.fuseOptions))}async buildSearchIndex(){if(!this.isIndexing){this.isIndexing=!0;try{const{useSkillsStore:t}=await Ys(async()=>{const{useSkillsStore:j}=await Promise.resolve().then(()=>h6);return{useSkillsStore:j}},[]),{useRacesStore:n}=await Ys(async()=>{const{useRacesStore:j}=await Promise.resolve().then(()=>c6);return{useRacesStore:j}},void 0),{useTraitsStore:s}=await Ys(async()=>{const{useTraitsStore:j}=await Promise.resolve().then(()=>p6);return{useTraitsStore:j}},void 0),{useReligionsStore:r}=await Ys(async()=>{const{useReligionsStore:j}=await Promise.resolve().then(()=>m6);return{useReligionsStore:j}},void 0),{useBirthsignsStore:a}=await Ys(async()=>{const{useBirthsignsStore:j}=await Promise.resolve().then(()=>o6);return{useBirthsignsStore:j}},void 0),{useDestinyNodesStore:i}=await Ys(async()=>{const{useDestinyNodesStore:j}=await Promise.resolve().then(()=>l6);return{useDestinyNodesStore:j}},void 0),{usePerkTreesStore:l}=await Ys(async()=>{const{usePerkTreesStore:j}=await Promise.resolve().then(()=>o5);return{usePerkTreesStore:j}},void 0),{useRecipesStore:c}=await Ys(async()=>{const{useRecipesStore:j}=await Promise.resolve().then(()=>u6);return{useRecipesStore:j}},void 0),{SpellDataProvider:u}=await Ys(async()=>{const{SpellDataProvider:j}=await Promise.resolve().then(()=>g6);return{SpellDataProvider:j}},void 0),d=t.getState().data,f=n.getState().data,m=s.getState().data,h=r.getState().data,p=a.getState().data,y=i.getState().data,b=l.getState().data,x=c.getState().data,v=await u.getInstance().loadSpells();if(!(d!=null&&d.length)||!(f!=null&&f.length)||!(m!=null&&m.length)||!(h!=null&&h.length)||!(p!=null&&p.length)||!(y!=null&&y.length)||!(b!=null&&b.length)||!(x!=null&&x.length)||!(v!=null&&v.length))throw console.log("Stores not loaded yet, cannot build search index"),new Error("Store data not available - stores must be loaded before building search index");const N=[...xb(d),...yb(f),...vb(m),...bb(h),...wb(p),...Nb(y),...jb(b),...kb(x),...Cb(v)];this.allSearchableItems=N,this.searchIndex=new Wt(N,this.fuseOptions)}catch(t){throw console.error("Failed to build search index:",t),t}finally{this.isIndexing=!1}}}async addPerkReferencesToIndex(t){if(this.indexedStores.has("perk-references"))return;const n=Sb(t);this.allSearchableItems.push(...n),this.indexedStores.add("perk-references"),this.searchIndex=new Wt(this.allSearchableItems,this.fuseOptions)}search(t,n){if(!this.searchIndex)return[];if(!t.trim()||t.trim()==="*"){let i=this.allSearchableItems;return n&&(i=this.applyFilters(i,n)),i.map(l=>({item:l,score:1,matches:[],highlights:[]}))}if(!this.searchIndex)return console.warn("Search index not ready, returning empty results"),[];const s=this.searchIndex.search(t);let r=s;return n&&(r=s.filter(i=>{const l=i.item;return this.applyFilters([l],n).length>0})),r.map(i=>({item:i.item,score:i.score||0,matches:[...i.matches||[]],highlights:yI([...i.matches||[]])}))}applyFilters(t,n){return t.filter(s=>{var r,a,i,l,c,u,d;if(n.types.length>0&&!n.types.includes(s.type)||n.categories.length>0&&s.category&&!n.categories.includes(s.category))return!1;if(n.tags.length>0){const f=s.tags.map(p=>p.toLowerCase());if(!n.tags.map(p=>p.toLowerCase()).some(p=>f.some(y=>y.includes(p)||p.includes(y))))return!1}if(s.type==="skill"&&((r=n.skillCategories)!=null&&r.length)&&(!s.category||!n.skillCategories.includes(s.category))||s.type==="race"&&((a=n.raceTypes)!=null&&a.length)&&(!s.category||!n.raceTypes.includes(s.category))||s.type==="trait"&&((i=n.traitTypes)!=null&&i.length)&&(!s.category||!n.traitTypes.includes(s.category))||s.type==="religion"&&((l=n.religionTypes)!=null&&l.length)&&(!s.category||!n.religionTypes.includes(s.category))||s.type==="birthsign"&&((c=n.birthsignGroups)!=null&&c.length)&&(!s.category||!n.birthsignGroups.includes(s.category))||s.type==="spell"&&((u=n.spellSchools)!=null&&u.length)&&(!s.category||!n.spellSchools.includes(s.category)))return!1;if(s.type==="spell"&&((d=n.spellLevels)!=null&&d.length)){const f=s.originalData;if(!f.level||!n.spellLevels.includes(f.level))return!1}return!0})}getAvailableFilters(){const t=new Map,n=new Map,s=new Map;return this.allSearchableItems.forEach(r=>{const a=t.get(r.type)||0;if(t.set(r.type,a+1),r.category){const i=n.get(r.category)||0;n.set(r.category,i+1)}r.tags.forEach(i=>{const l=s.get(i)||0;s.set(i,l+1)})}),{types:Array.from(t.entries()).map(([r,a])=>({value:r,label:r.charAt(0).toUpperCase()+r.slice(1),count:a})),categories:Array.from(n.entries()).map(([r,a])=>({value:r,label:r,count:a})),tags:Array.from(s.entries()).map(([r,a])=>({value:r,label:r,count:a}))}}getSearchableItems(){return this.allSearchableItems}isReady(){return this.searchIndex!==null&&!this.isIndexing}isLoading(){return this.isIndexing}}const bI={skill:{label:"Skill",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},race:{label:"Race",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},trait:{label:"Trait",icon:"",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},religion:{label:"Religion",icon:"",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},birthsign:{label:"Birthsign",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},destiny:{label:"Destiny",icon:"",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},perk:{label:"Perk",icon:"",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"}};function wI({type:e,className:t,variant:n="default"}){const s=bI[e]||{label:e.charAt(0).toUpperCase()+e.slice(1),icon:"",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return n==="default"?o.jsxs(X,{className:H("inline-flex items-center gap-1 px-2 py-1 text-xs font-medium",s.color,t),children:[o.jsx("span",{children:s.icon}),o.jsx("span",{children:s.label})]}):o.jsxs(X,{variant:n,className:H("inline-flex items-center gap-1",t),children:[o.jsx("span",{children:s.icon}),o.jsx("span",{children:s.label})]})}function NI({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){return o.jsxs(he,{className:H("transition-all hover:shadow-md",t),expanded:n,onToggle:s,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(wI,{type:e.type})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h4",{className:"font-medium text-sm truncate",children:e.name}),e.category&&o.jsx(X,{variant:"outline",className:"text-xs",children:e.category})]})})]})}),o.jsxs(he.Summary,{children:[e.description&&o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((a,i)=>o.jsx(X,{variant:"secondary",className:"text-xs",children:a},`${a}-${i}`)),e.tags.length>3&&o.jsxs(X,{variant:"secondary",className:"text-xs",children:["+",e.tags.length-3]})]})]}),o.jsxs(he.Details,{children:[e.tags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"All Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((a,i)=>o.jsx(X,{variant:"secondary",className:"text-xs",children:a},`${a}-${i}`))})]}),e.description&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]})]})}function xo(e,t){return e?e.find(s=>{const r=!!s.id&&s.id===t.id,a=!!s.edid&&s.edid===t.edid,i=!!s.treeId&&s.treeId===t.treeId,l=!!s.name&&s.name===t.name;return r||a||i||l}):void 0}function jI({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const a=mo(l=>l.data),i=xo(a,e.originalData);return i?o.jsx(Bd,{originalBirthsign:i,isExpanded:n,onToggle:s,className:t,showToggle:!1}):(console.error("Birthsign not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalBirthsignsInStore:a.length,firstFewBirthsigns:a.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function SI({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const a=tl(l=>l.data),i=xo(a,e.originalData);return i?o.jsxs(he,{className:t,expanded:n,onToggle:s,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:i.icon?o.jsx("img",{src:i.icon,alt:i.name,className:"w-6 h-6 object-contain"}):o.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:i.name.charAt(0)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-primary",children:i.name}),i.category&&o.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),o.jsx(he.Summary,{children:i.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.description})}),o.jsxs(he.Details,{children:[i.effects&&i.effects.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Effects"}),o.jsx("div",{className:"space-y-1",children:i.effects.map((l,c)=>o.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",l]},c))})]}),i.tags&&i.tags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((l,c)=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]})]})]}):(console.error("Destiny node not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalDestinyNodesInStore:a.length,firstFewDestinyNodes:a.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}class CI{constructor(t){Ve(this,"perkNodes",[]);this.perkNodes=this.transformPerkTrees(t)}transformPerkTrees(t){const n=[];return t.forEach(s=>{s.perks.forEach(r=>{var i,l,c,u,d;const a={...r,skillTree:s.treeId,skillTreeName:s.treeName,isRoot:r.isRoot||!1,hasChildren:(((l=(i=r.connections)==null?void 0:i.children)==null?void 0:l.length)||0)>0,prerequisites:((c=r.connections)==null?void 0:c.parents)||[],connections:{parents:((u=r.connections)==null?void 0:u.parents)||[],children:((d=r.connections)==null?void 0:d.children)||[]},searchableText:this.generateSearchableText(r,s),tags:this.generateTags(r,s),category:this.determineCategory(s.treeName),minLevel:this.calculateMinLevel(r)};n.push(a)})}),n}calculateMinLevel(t){var s,r;let n=0;if(t.ranks&&t.ranks.length>0&&t.ranks.forEach(a=>{var i,l;(l=(i=a.prerequisites)==null?void 0:i.skillLevel)!=null&&l.level&&(n=Math.max(n,a.prerequisites.skillLevel.level))}),n===0)if(t.isRoot)n=1;else{const a=((r=(s=t.connections)==null?void 0:s.parents)==null?void 0:r.length)||0;n=Math.max(1,a*5)}return n}generateSearchableText(t,n){var r,a;return[t.name,(r=t.ranks)==null?void 0:r.map(i=>{var l;return(l=i.description)==null?void 0:l.base}).join(" "),(a=t.ranks)==null?void 0:a.map(i=>{var l;return(l=i.description)==null?void 0:l.subtext}).join(" "),n.treeName,this.determineCategory(n.treeName)].filter(Boolean).join(" ").toLowerCase()}generateTags(t,n){var a,i,l,c;const s=[n.treeName,this.determineCategory(n.treeName),t.isRoot?"root":"branch",t.totalRanks>1?"multi-rank":"single-rank"];((i=(a=t.connections)==null?void 0:a.parents)==null?void 0:i.length)>0&&s.push("has-prerequisites"),((c=(l=t.connections)==null?void 0:l.children)==null?void 0:c.length)>0&&s.push("has-children");const r=this.calculateMinLevel(t);return r>0&&s.push(`level-${r}+`),s}determineCategory(t){return{Alchemy:"Magic",Alteration:"Magic",Conjuration:"Magic",Destruction:"Magic",Illusion:"Magic",Restoration:"Magic",Archery:"Combat",Block:"Combat","Heavy Armor":"Combat","One Handed":"Combat",Smithing:"Combat","Two Handed":"Combat","Light Armor":"Stealth",Lockpicking:"Stealth",Pickpocket:"Stealth",Sneak:"Stealth",Speech:"Stealth",Enchanting:"Crafting"}[t]||"Other"}getAllPerks(){return this.perkNodes}getPerksBySkill(t){return this.perkNodes.filter(n=>n.skillTree===t)}getPerksByCategory(t){return this.perkNodes.filter(n=>n.category===t)}getPerksByPrerequisite(t){return this.perkNodes.filter(n=>n.prerequisites.includes(t))}getRootPerks(){return this.perkNodes.filter(t=>t.isRoot)}getMultiRankPerks(){return this.perkNodes.filter(t=>t.totalRanks>1)}searchPerks(t){const n=t.toLowerCase();return this.perkNodes.filter(s=>s.searchableText.includes(n)||s.name.toLowerCase().includes(n)||s.tags.some(r=>r.toLowerCase().includes(n)))}}function mk(){const{data:e,loading:t,error:n}=o0(),s=g.useMemo(()=>e?new CI(e):null,[e]),r=g.useMemo(()=>(s==null?void 0:s.getAllPerks())||[],[s]);return{dataProvider:s,allPerks:r,loading:t,error:n}}function fm(){const{dataProvider:e,allPerks:t,loading:n,error:s}=mk(),r=g.useMemo(()=>{const h=new Map;return t.forEach(p=>{h.has(p.skillTree)||h.set(p.skillTree,{id:p.skillTree,name:p.skillTreeName,count:0});const y=h.get(p.skillTree);y.count++}),Array.from(h.values()).sort((p,y)=>p.name.localeCompare(y.name))},[t]),a=g.useMemo(()=>{const h=new Map;return t.forEach(p=>{h.has(p.category)||h.set(p.category,{name:p.category,count:0});const y=h.get(p.category);y.count++}),Array.from(h.values()).sort((p,y)=>p.name.localeCompare(y.name))},[t]),i=g.useMemo(()=>{const h=new Set;return t.forEach(p=>{p.tags.forEach(y=>h.add(y))}),Array.from(h).sort()},[t]),l=g.useMemo(()=>t.filter(h=>h.isRoot),[t]),c=g.useMemo(()=>t.filter(h=>h.totalRanks>1),[t]),u=g.useMemo(()=>t.filter(h=>h.totalRanks===1),[t]),d=g.useMemo(()=>h=>(e==null?void 0:e.getPerksBySkill(h))||[],[e]),f=g.useMemo(()=>h=>(e==null?void 0:e.getPerksByCategory(h))||[],[e]),m=g.useMemo(()=>h=>(e==null?void 0:e.searchPerks(h))||[],[e]);return{allPerks:t,skillTrees:r,categories:a,tags:i,rootPerks:l,multiRankPerks:c,singleRankPerks:u,getPerksBySkill:d,getPerksByCategory:f,searchPerks:m,loading:n,error:s,dataProvider:e}}const kI={skill:{Alchemy:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Alteration:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Archery:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200",Block:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Conjuration:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Destruction:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Enchanting:"bg-indigo-100 text-indigo-800 border-indigo-200 hover:bg-indigo-200","Heavy Armor":"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",Illusion:"bg-pink-100 text-pink-800 border-pink-200 hover:bg-pink-200","Light Armor":"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200",Lockpicking:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200","One-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Pickpocket:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Restoration:"bg-teal-100 text-teal-800 border-teal-200 hover:bg-teal-200",Smithing:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Sneak:"bg-slate-100 text-slate-800 border-slate-200 hover:bg-slate-200",Speech:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200","Two-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200"},category:{Combat:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Crafting:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Survival:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Social:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200"},rank:{"1 rank":"bg-blue-100 text-blue-800 border-blue-200","2 ranks":"bg-green-100 text-green-800 border-green-200","3 ranks":"bg-purple-100 text-purple-800 border-purple-200","4 ranks":"bg-orange-100 text-orange-800 border-orange-200","5 ranks":"bg-red-100 text-red-800 border-red-200"},availability:{Available:"bg-green-100 text-green-800 border-green-200",Unavailable:"bg-red-100 text-red-800 border-red-200","Prerequisites Met":"bg-blue-100 text-blue-800 border-blue-200","Prerequisites Missing":"bg-gray-100 text-gray-800 border-gray-200"},level:{"Level 1+":"bg-green-100 text-green-800 border-green-200","Level 5+":"bg-blue-100 text-blue-800 border-blue-200","Level 10+":"bg-purple-100 text-purple-800 border-purple-200","Level 15+":"bg-orange-100 text-orange-800 border-orange-200","Level 20+":"bg-red-100 text-red-800 border-red-200","Level 25+":"bg-indigo-100 text-indigo-800 border-indigo-200","Level 30+":"bg-pink-100 text-pink-800 border-pink-200","Level 35+":"bg-teal-100 text-teal-800 border-teal-200","Level 40+":"bg-cyan-100 text-cyan-800 border-cyan-200","Level 45+":"bg-emerald-100 text-emerald-800 border-emerald-200","Level 50+":"bg-amber-100 text-amber-800 border-amber-200"},root:{Root:"bg-gold-100 text-gold-800 border-gold-200 hover:bg-gold-200"}},EI={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},_I="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function Ao({label:e,type:t,size:n="md",className:s}){const a=kI[t][e]||_I;return o.jsx(X,{variant:"outline",className:H(a,EI[n],"font-medium transition-colors",s),children:e})}function Og({item:e,className:t,isExpanded:n=!1,onToggle:s,disableHover:r=!1,viewMode:a="grid"}){const i=e.originalPerk,{allPerks:l}=fm();if(!i)return null;const u=(d=>d.map(f=>{const m=l.find(h=>h.edid===f);return(m==null?void 0:m.name)||f}))(i.prerequisites);return o.jsxs(he,{className:t,expanded:n,onToggle:s,disableHover:r,children:[o.jsxs(he.Header,{children:[o.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:e.name.charAt(0)})}),o.jsx("div",{className:"flex-1 min-w-0",children:a==="grid"?o.jsxs("div",{className:"space-y-1",children:[o.jsx(gt,{className:"text-primary font-semibold truncate",children:e.name}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.skillTreeName&&o.jsx(Ao,{label:i.skillTreeName,type:"skill",size:"sm"}),i.totalRanks>1&&o.jsx(Ao,{label:`${i.totalRanks} ranks`,type:"rank",size:"sm"}),i.minLevel&&o.jsx(Ao,{label:`Level ${i.minLevel}+`,type:"level",size:"sm"})]})]}):o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx(gt,{className:"text-primary font-semibold truncate",children:e.name}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.skillTreeName&&o.jsx(Ao,{label:i.skillTreeName,type:"skill",size:"sm"}),i.totalRanks>1&&o.jsx(Ao,{label:`${i.totalRanks} ranks`,type:"rank",size:"sm"}),i.minLevel&&o.jsx(Ao,{label:`Level ${i.minLevel}+`,type:"level",size:"sm"})]})]})})]}),o.jsxs(he.Summary,{children:[o.jsx(Xe,{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((d,f)=>o.jsx(X,{variant:"outline",className:"text-xs",children:d},f)),e.tags.length>3&&o.jsxs(rS,{className:"text-muted-foreground",children:["+",e.tags.length-3," more"]})]})]}),o.jsxs(he.Details,{children:[i.prerequisites&&i.prerequisites.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Prerequisites"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:u.map((d,f)=>o.jsx(X,{variant:"secondary",className:"text-xs",children:d},f))})]}),i.ranks&&i.ranks.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Perk Ranks"}),o.jsx("div",{className:"space-y-2",children:i.ranks.map((d,f)=>{var m;return o.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[o.jsx("div",{className:"flex items-center justify-between mb-1",children:o.jsxs("span",{className:"font-medium text-sm",children:["Rank ",f+1]})}),((m=d.description)==null?void 0:m.base)&&o.jsx(Xe,{className:"text-sm text-muted-foreground",children:d.description.base})]},f)})})]}),e.tags.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((d,f)=>o.jsx(X,{variant:"outline",className:"text-xs",children:d},f))})]})]})]})}function hk(e,t){var i,l,c,u,d,f;const n=((l=(i=t.perks)==null?void 0:i.selected)==null?void 0:l[e.skillTree])||[],s=((u=(c=t.perks)==null?void 0:c.ranks)==null?void 0:u[e.skillTree])||{},r=n.includes(e.edid),a=s[e.edid]||0;return{id:e.edid,name:e.name,description:((f=(d=e.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",category:e.category,tags:e.tags,isSelected:r,originalPerk:e,skillTree:e.skillTree,skillTreeName:e.skillTreeName,isRoot:e.isRoot,hasChildren:e.hasChildren,prerequisites:e.prerequisites,connections:e.connections,totalRanks:e.totalRanks,currentRank:a,isAvailable:e.isRoot||e.prerequisites.every(m=>n.includes(m)),minLevel:e.minLevel}}function AI({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const{build:a}=wt(),{allPerks:i}=fm(),l=e.originalData,c=i.find(f=>f.edid===(l==null?void 0:l.edid));if(!c)return console.warn("Perk reference not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData}),null;const d={...hk(c,a),originalPerk:c};return o.jsx(Og,{item:d,className:t,isExpanded:n,onToggle:s,viewMode:r})}function MI({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){var c;const a=lo(u=>u.data),i=xo(a,e.originalData);if(!i)return console.error("Perk tree not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalPerkTreesInStore:a.length,firstFewPerkTrees:a.slice(0,3).map(u=>({treeId:u.treeId,treeName:u.treeName||u.name}))}),null;const l=((c=i.perks)==null?void 0:c.length)||0;return o.jsxs(he,{className:t,expanded:n,onToggle:s,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:(i.treeName||i.name).charAt(0)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-primary",children:i.treeName||i.name}),i.category&&o.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),o.jsxs(he.Summary,{children:[i.treeDescription&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.treeDescription}),l>0&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[o.jsx("span",{className:"font-medium",children:"Perks:"})," ",l," total"]})]}),o.jsxs(he.Details,{children:[i.perks&&i.perks.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Sample Perks"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.perks.slice(0,6).map((u,d)=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:u.name},`${u.edid}-${d}`)),i.perks.length>6&&o.jsxs("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded text-muted-foreground",children:["+",i.perks.length-6," more"]})]})]}),i.tags&&i.tags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((u,d)=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-secondary text-secondary-foreground rounded",children:u},`${u}-${d}`))})]})]})]})}function TI({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const a=fa(c=>c.data),i=xo(a,e.originalData);if(!i)return console.error("Race not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalRacesInStore:a.length,firstFewRaces:a.slice(0,3).map(c=>({edid:c.edid,name:c.name}))}),null;const l={id:i.id||i.edid||i.name,name:i.name,description:i.description||"",summary:i.description||"",category:i.category||"",tags:i.tags||[],type:"race",effects:[]};return o.jsx("div",{className:t,children:o.jsx(qc,{item:{...l,originalRace:i},isExpanded:n,onToggle:s,showToggle:!1,disableHover:!1,className:"w-full"})})}function RI({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){var u,d,f,m,h,p,y,b,x,w,v,N,j,S,C,E,k,_,P,O;const a=nl($=>$.data),i=xo(a,e.originalData);if(!i)return console.error("Religion not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalReligionsInStore:a.length,firstFewReligions:a.slice(0,3).map($=>({id:$.id,name:$.name}))}),null;const l={name:i.name,type:i.type||i.pantheon||"Unknown",blessing:{spellId:((u=i.blessing)==null?void 0:u.spellId)||"",spellName:((d=i.blessing)==null?void 0:d.spellName)||"",effects:((f=i.blessing)==null?void 0:f.effects)||[]},boon1:{spellId:((m=i.boon1)==null?void 0:m.spellId)||"",spellName:((h=i.boon1)==null?void 0:h.spellName)||"",effects:((p=i.boon1)==null?void 0:p.effects)||[]},boon2:{spellId:((y=i.boon2)==null?void 0:y.spellId)||"",spellName:((b=i.boon2)==null?void 0:b.spellName)||"",effects:((x=i.boon2)==null?void 0:x.effects)||[]},tenet:{spellId:((w=i.tenet)==null?void 0:w.spellId)||"",spellName:((v=i.tenet)==null?void 0:v.spellName)||"",header:((N=i.tenet)==null?void 0:N.header)||"",description:((j=i.tenet)==null?void 0:j.description)||"",effects:((S=i.tenet)==null?void 0:S.effects)||[]},favoredRaces:i.favoredRaces||[],worshipRestrictions:i.worshipRestrictions||[]},c={id:i.id||i.name,name:i.name,description:((C=i.tenet)==null?void 0:C.description)||"",category:i.type||i.pantheon||"",tags:i.favoredRaces||i.tags||[],type:"religion",summary:((E=i.tenet)==null?void 0:E.description)||"",effects:[...((_=(k=i.tenet)==null?void 0:k.effects)==null?void 0:_.map($=>({type:"positive",name:$.effectName,description:$.effectDescription,value:$.magnitude,target:$.targetAttribute||""})))||[],...((O=(P=i.blessing)==null?void 0:P.effects)==null?void 0:O.map($=>({type:"positive",name:$.effectName,description:$.effectDescription,value:$.magnitude,target:$.targetAttribute||""})))||[]]};return o.jsx("div",{className:t,children:o.jsx(Fd,{item:c,originalReligion:l,isExpanded:n,onToggle:s,className:"w-full",showBlessings:!0,showTenets:!0,showBoons:!0,showFavoredRaces:Xt(),disableHover:!1,showToggle:!1})})}function DI({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const a=ho(l=>l.data),i=xo(a,e.originalData);return i?o.jsxs(he,{className:t,expanded:n,onToggle:s,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:i.name.charAt(0)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-primary",children:i.name}),i.category&&o.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),o.jsxs(he.Summary,{children:[i.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.description}),i.keyAbilities&&i.keyAbilities.length>0&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[o.jsx("span",{className:"font-medium",children:"Key abilities:"})," ",i.keyAbilities.slice(0,2).join(", "),i.keyAbilities.length>2&&"..."]})]}),o.jsxs(he.Details,{children:[i.tags&&i.tags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((l,c)=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),i.keyAbilities&&i.keyAbilities.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Key Abilities"}),o.jsx("div",{className:"space-y-1",children:i.keyAbilities.map((l,c)=>o.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",l]},c))})]})]})]}):(console.error("Skill not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalSkillsInStore:a.length,firstFewSkills:a.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function zI({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const a=go(l=>l.data),i=xo(a,e.originalData);return i?o.jsxs(he,{className:t,expanded:n,onToggle:s,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:i.name.charAt(0)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-primary",children:i.name}),i.category&&o.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),o.jsx(he.Summary,{children:i.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.description})}),o.jsxs(he.Details,{children:[i.tags&&i.tags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((l,c)=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),i.description&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]})]})]}):(console.error("Trait not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalTraitsInStore:a.length,firstFewTraits:a.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}const LI={Destruction:RN,Restoration:zc,Conjuration:u4,Illusion:cx,Alteration:es,"":tc},$I={Novice:"bg-green-100 text-green-800 border-green-200",Apprentice:"bg-blue-100 text-blue-800 border-blue-200",Adept:"bg-purple-100 text-purple-800 border-purple-200",Expert:"bg-orange-100 text-orange-800 border-orange-200",Master:"bg-red-100 text-red-800 border-red-200"};function j0({spell:e,className:t,isExpanded:n=!1,onToggle:s,disableHover:r=!1}){var l;const a=LI[e.school]||tc,i=()=>{s==null||s()};return o.jsxs(he,{className:t,expanded:n,onToggle:i,disableHover:r,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(a,{className:"w-5 h-5 text-muted-foreground"}),o.jsx("h3",{className:"text-primary font-semibold text-lg",children:e.name}),o.jsx("span",{className:"ml-auto transition-transform duration-200 text-muted-foreground",children:o.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 8l4 4 4-4"})})})]})}),o.jsx(he.Summary,{children:o.jsxs("div",{className:"px-4 py-2 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 7v14"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"})]}),o.jsx("span",{children:e.school})]}),o.jsx(X,{variant:"secondary",className:$I[e.level]||"",children:e.level})]}),o.jsx(Be,{text:e.description,className:"text-sm text-muted-foreground mb-3",as:"p"})]})}),o.jsx(he.Details,{children:o.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[e.hasEffects&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Effects"}),o.jsx("div",{className:"space-y-2",children:e.effects.map((c,u)=>o.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-medium text-sm",children:c.name}),c.magnitude>0&&o.jsx(X,{variant:"outline",className:"text-xs",children:c.magnitude})]}),o.jsx(Be,{text:c.description,className:"text-sm text-muted-foreground",as:"p"}),o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-muted-foreground",children:[c.duration>0&&o.jsxs("span",{children:["Duration: ",c.duration,"s"]}),c.area>0&&o.jsxs("span",{children:["Area: ",c.area,"ft"]})]})]},u))})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Statistics"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Magicka Cost:"}),o.jsxs("span",{className:"font-medium",children:[e.magickaCost," MP"]})]}),e.totalMagnitude>0&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Total Magnitude:"}),o.jsx("span",{className:"font-medium",children:e.totalMagnitude})]}),e.maxDuration>0&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Max Duration:"}),o.jsxs("span",{className:"font-medium",children:[e.maxDuration,"s"]})]}),e.maxArea>0&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Max Area:"}),o.jsxs("span",{className:"font-medium",children:[e.maxArea,"ft"]})]})]})]}),(e.tome||((l=e.vendors)==null?void 0:l.length))&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Additional Info"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[e.tome&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-muted-foreground",children:"Tome:"}),o.jsx("span",{children:e.tome})]}),e.vendors&&e.vendors.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-muted-foreground",children:"Vendors:"}),o.jsx("span",{children:e.vendors.join(", ")})]})]})]}),e.tags&&e.tags.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((c,u)=>o.jsx(X,{variant:"outline",className:"text-xs",children:c},u))})]})]})})]})}const PI=({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="card"})=>{const a=e.originalData;if(!a)return console.warn("SpellSearchCard: Missing spell data for item:",e),o.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[o.jsx("h3",{className:"font-semibold",children:"Spell not found"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});if(!a.name||!a.editorId)return console.warn("SpellSearchCard: Invalid spell data structure:",a),o.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[o.jsx("h3",{className:"font-semibold",children:"Invalid spell data"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const i=L.useCallback(()=>{s&&s()},[s]);return o.jsx(j0,{spell:a,isExpanded:n,onToggle:i,className:t})},OI=({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"})=>{const a=e.originalData;if(!a||!a.name)return console.warn("RecipeSearchCard: Missing or invalid recipe data for item:",e),o.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[o.jsx("h3",{className:"font-semibold",children:"Recipe not found"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const i=Ze.addComputedProperties(a),l=L.useCallback(()=>{s&&s()},[s]);return o.jsx(v0,{recipe:i,variant:r==="list"?"compact":"default",isSelected:!1,onClick:l,showEffects:!0,showIngredients:!0,className:t})};function Eb({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){switch(e.type){case"race":return o.jsx(TI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"skill":return o.jsx(DI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"trait":return o.jsx(zI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"birthsign":return o.jsx(jI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"destiny":return o.jsx(SI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"religion":return o.jsx(RI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"perk":return o.jsx(MI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"spell":return o.jsx(PI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"perk-reference":return o.jsx(AI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"recipe":return o.jsx(OI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});default:return o.jsx(NI,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r})}}function BI({item:e}){return o.jsx("div",{className:`w-full border-2 rounded-lg p-4 ${e.color} transition-all duration-200 hover:shadow-lg`,style:{minHeight:`${e.height}px`},"data-testid":`test-card-${e.id}`,children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:e.title}),o.jsxs("span",{className:"text-xs text-gray-500",children:["#",e.id.slice(-6)]})]}),o.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((t,n)=>o.jsx("span",{className:"px-2 py-1 text-xs bg-white/50 rounded-full text-gray-700 border",children:t},n))}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Height: ",e.height,"px"]})]})})}const II={scaling:o.jsx(tc,{className:"h-4 w-4 text-skyrim-gold"}),ability:o.jsx(Ye,{className:"h-4 w-4 text-blue-500"}),combat:o.jsx(fg,{className:"h-4 w-4 text-red-500"}),magic:o.jsx(ca,{className:"h-4 w-4 text-blue-500"}),stealth:o.jsx(cx,{className:"h-4 w-4 text-green-500"}),crafting:o.jsx(d3,{className:"h-4 w-4 text-orange-500"}),healing:o.jsx(zc,{className:"h-4 w-4 text-red-400"}),protection:o.jsx(es,{className:"h-4 w-4 text-blue-400"}),damage:o.jsx(Cd,{className:"h-4 w-4 text-red-600"}),utility:o.jsx(P4,{className:"h-4 w-4 text-purple-500"}),movement:o.jsx(Df,{className:"h-4 w-4 text-cyan-500"}),social:o.jsx(n3,{className:"h-4 w-4 text-yellow-500"}),thievery:o.jsx(b4,{className:"h-4 w-4 text-green-600"}),ranged:o.jsx(n4,{className:"h-4 w-4 text-orange-400"})},HI={Combat:"",Magic:"",Stealth:""},UI={Combat:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200"},FI={sm:"text-xs px-2 py-0.5"};function VI({item:e,originalSkill:t,isExpanded:n=!1,onToggle:s,onSelect:r,className:a,showScaling:i=!0,showAbilities:l=!0,showTags:c=!0}){const u=HI[e.category||""]||"",d=UI[e.category||""]||"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",f=m=>II[m]||o.jsx(Ye,{className:"h-4 w-4 text-skyrim-gold"});return o.jsxs(iC,{isExpanded:n,onToggle:s||(()=>{}),className:a,children:[o.jsx("div",{className:"flex items-start gap-3",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1 cursor-pointer hover:bg-muted/50 p-1 rounded transition-colors",onClick:m=>{m.stopPropagation(),r==null||r()},children:[o.jsx("span",{className:"text-lg",children:u}),o.jsx(gt,{className:"text-base font-semibold",children:e.name}),o.jsx(pa,{itemId:e.id,itemType:"skill",itemName:e.name})]}),o.jsx(Xe,{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]})}),o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(X,{variant:"outline",className:H(d,FI.sm),children:e.category})}),l&&(t==null?void 0:t.keyAbilities)&&t.keyAbilities.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Ut,{className:"text-sm font-medium flex items-center gap-2",children:[f("ability"),"Key Abilities"]}),o.jsx("ul",{className:"space-y-1",children:t.keyAbilities.map((m,h)=>o.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[o.jsx("span",{className:"text-skyrim-gold mt-1",children:""}),o.jsx("span",{children:m})]},h))})]}),c&&(t==null?void 0:t.metaTags)&&t.metaTags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ut,{className:"text-sm font-medium",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:t.metaTags.map((m,h)=>o.jsx(X,{variant:"secondary",className:"text-xs px-2 py-0.5",children:m},h))})]})]})]})}function qI(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const gk=L.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Zc=()=>{const e=L.useContext(gk);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};qI(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function ZI(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function GI(){return S0(/^Mac/)}function YI(){return S0(/^iPhone/)}function _b(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function XI(){return S0(/^iPad/)||GI()&&navigator.maxTouchPoints>1}function pk(){return YI()||XI()}function S0(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const WI=24,KI=typeof window<"u"?g.useLayoutEffect:g.useEffect;function Ab(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const ih=typeof document<"u"&&window.visualViewport;function Mb(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function xk(e){for(Mb(e)&&(e=e.parentElement);e&&!Mb(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const QI=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Eu=0,lh;function JI(e={}){let{isDisabled:t}=e;KI(()=>{if(!t)return Eu++,Eu===1&&pk()&&(lh=e9()),()=>{Eu--,Eu===0&&(lh==null||lh())}},[t])}function e9(){let e,t=0,n=f=>{e=xk(f.target),!(e===document.documentElement&&e===document.body)&&(t=f.changedTouches[0].pageY)},s=f=>{if(!e||e===document.documentElement||e===document.body){f.preventDefault();return}let m=f.changedTouches[0].pageY,h=e.scrollTop,p=e.scrollHeight-e.clientHeight;p!==0&&((h<=0&&m>t||h>=p&&m<t)&&f.preventDefault(),t=m)},r=f=>{let m=f.target;Bg(m)&&m!==document.activeElement&&(f.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},a=f=>{let m=f.target;Bg(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",ih&&(ih.height<window.innerHeight?requestAnimationFrame(()=>{Tb(m)}):ih.addEventListener("resize",()=>Tb(m),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=Ab(t9(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=Ab(fl(document,"touchstart",n,{passive:!1,capture:!0}),fl(document,"touchmove",s,{passive:!1,capture:!0}),fl(document,"touchend",r,{passive:!1,capture:!0}),fl(document,"focus",a,!0),fl(window,"scroll",i));return()=>{u(),d(),window.scrollTo(l,c)}}function t9(e,t,n){let s=e.style[t];return e.style[t]=n,()=>{e.style[t]=s}}function fl(e,t,n,s){return e.addEventListener(t,n,s),()=>{e.removeEventListener(t,n,s)}}function Tb(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=xk(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let s=n.getBoundingClientRect().top,r=e.getBoundingClientRect().top,a=e.getBoundingClientRect().bottom;const i=n.getBoundingClientRect().bottom+WI;a>i&&(n.scrollTop+=r-s)}e=n.parentElement}}function Bg(e){return e instanceof HTMLInputElement&&!QI.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function n9(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function s9(...e){return t=>e.forEach(n=>n9(n,t))}function yk(...e){return g.useCallback(s9(...e),e)}const vk=new WeakMap;function St(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let s={};Object.entries(t).forEach(([r,a])=>{if(r.startsWith("--")){e.style.setProperty(r,a);return}s[r]=e.style[r],e.style[r]=a}),!n&&vk.set(e,s)}function r9(e,t){if(!e||!(e instanceof HTMLElement))return;let n=vk.get(e);n&&(e.style[t]=n[t])}const yt=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function _u(e,t){if(!e)return null;const n=window.getComputedStyle(e),s=n.transform||n.webkitTransform||n.mozTransform;let r=s.match(/^matrix3d\((.+)\)$/);return r?parseFloat(r[1].split(", ")[yt(t)?13:12]):(r=s.match(/^matrix\((.+)\)$/),r?parseFloat(r[1].split(", ")[yt(t)?5:4]):null)}function a9(e){return 8*(Math.log(e+1)-2)}function ch(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function o9(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const st={DURATION:.5,EASE:[.32,.72,0,1]},bk=.4,i9=.25,l9=100,wk=8,Ca=16,Ig=26,uh="vaul-dragging";function Nk(e){const t=L.useRef(e);return L.useEffect(()=>{t.current=e}),L.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function c9({defaultProp:e,onChange:t}){const n=L.useState(e),[s]=n,r=L.useRef(s),a=Nk(t);return L.useEffect(()=>{r.current!==s&&(a(s),r.current=s)},[s,r,a]),n}function jk({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,r]=c9({defaultProp:t,onChange:n}),a=e!==void 0,i=a?e:s,l=Nk(n),c=L.useCallback(u=>{if(a){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else r(u)},[a,e,r,l]);return[i,c]}function u9({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:s,overlayRef:r,fadeFromIndex:a,onSnapPointChange:i,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[d,f]=jk({prop:e,defaultProp:n==null?void 0:n[0],onChange:t}),[m,h]=L.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);L.useEffect(()=>{function C(){h({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]);const p=L.useMemo(()=>d===(n==null?void 0:n[n.length-1])||null,[n,d]),y=L.useMemo(()=>{var C;return(C=n==null?void 0:n.findIndex(E=>E===d))!=null?C:null},[n,d]),b=n&&n.length>0&&(a||a===0)&&!Number.isNaN(a)&&n[a]===d||!n,x=L.useMemo(()=>{const C=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var E;return(E=n==null?void 0:n.map(k=>{const _=typeof k=="string";let P=0;if(_&&(P=parseInt(k,10)),yt(l)){const $=_?P:m?k*C.height:0;return m?l==="bottom"?C.height-$:-C.height+$:$}const O=_?P:m?k*C.width:0;return m?l==="right"?C.width-O:-C.width+O:O}))!=null?E:[]},[n,m,c]),w=L.useMemo(()=>y!==null?x==null?void 0:x[y]:null,[x,y]),v=L.useCallback(C=>{var E;const k=(E=x==null?void 0:x.findIndex(_=>_===C))!=null?E:null;i(k),St(s.current,{transition:`transform ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,transform:yt(l)?`translate3d(0, ${C}px, 0)`:`translate3d(${C}px, 0, 0)`}),x&&k!==x.length-1&&a!==void 0&&k!==a&&k<a?St(r.current,{transition:`opacity ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,opacity:"0"}):St(r.current,{transition:`opacity ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,opacity:"1"}),f(n==null?void 0:n[Math.max(k,0)])},[s.current,n,x,a,r,f]);L.useEffect(()=>{if(d||e){var C;const E=(C=n==null?void 0:n.findIndex(k=>k===e||k===d))!=null?C:-1;x&&E!==-1&&typeof x[E]=="number"&&v(x[E])}},[d,e,n,x,v]);function N({draggedDistance:C,closeDrawer:E,velocity:k,dismissible:_}){if(a===void 0)return;const P=l==="bottom"||l==="right"?(w??0)-C:(w??0)+C,O=y===a-1,$=y===0,M=C>0;if(O&&St(r.current,{transition:`opacity ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`}),!u&&k>2&&!M){_?E():v(x[0]);return}if(!u&&k>2&&M&&x&&n){v(x[n.length-1]);return}const D=x==null?void 0:x.reduce((z,T)=>typeof z!="number"||typeof T!="number"?z:Math.abs(T-P)<Math.abs(z-P)?T:z),A=yt(l)?window.innerHeight:window.innerWidth;if(k>bk&&Math.abs(C)<A*.4){const z=M?1:-1;if(z>0&&p&&n){v(x[n.length-1]);return}if($&&z<0&&_&&E(),y===null)return;v(x[y+z]);return}v(D)}function j({draggedDistance:C}){if(w===null)return;const E=l==="bottom"||l==="right"?w-C:w+C;(l==="bottom"||l==="right")&&E<x[x.length-1]||(l==="top"||l==="left")&&E>x[x.length-1]||St(s.current,{transform:yt(l)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})}function S(C,E){if(!n||typeof y!="number"||!x||a===void 0)return null;const k=y===a-1;if(y>=a&&E)return 0;if(k&&!E)return 1;if(!b&&!k)return null;const P=k?y+1:y-1,O=k?x[P]-x[P-1]:x[P+1]-x[P],$=C/Math.abs(O);return k?1-$:$}return{isLastSnapPoint:p,activeSnapPoint:d,shouldFade:b,getPercentageDragged:S,setActiveSnapPoint:f,activeSnapPointIndex:y,onRelease:N,onDrag:j,snapPointsOffset:x}}const d9=()=>()=>{};function f9(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:s,noBodyStyles:r}=Zc(),a=L.useRef(null),i=g.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-Ig)/window.innerWidth}L.useEffect(()=>{if(t&&n){a.current&&clearTimeout(a.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;o9(s&&!r?ch(document.body,{background:"black"}):d9,ch(c,{transformOrigin:yt(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${st.DURATION}s`,transitionTimingFunction:`cubic-bezier(${st.EASE.join(",")})`}));const u=ch(c,{borderRadius:`${wk}px`,overflow:"hidden",...yt(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),a.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},st.DURATION*1e3)}}},[t,n,i])}let ml=null;function m9({isOpen:e,modal:t,nested:n,hasBeenOpened:s,preventScrollRestoration:r,noBodyStyles:a}){const[i,l]=L.useState(()=>typeof window<"u"?window.location.href:""),c=L.useRef(0),u=L.useCallback(()=>{if(_b()&&ml===null&&e&&!a){ml={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const h=m-window.innerHeight;h&&c.current>=m&&(document.body.style.top=`${-(c.current+h)}px`)}),300)}},[e]),d=L.useCallback(()=>{if(_b()&&ml!==null&&!a){const f=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,ml),window.requestAnimationFrame(()=>{if(r&&i!==window.location.href){l(window.location.href);return}window.scrollTo(m,f)}),ml=null}},[i]);return L.useEffect(()=>{function f(){c.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),L.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||d()}},[t,d]),L.useEffect(()=>{n||!s||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{d()},500)):d())},[e,s,i,t,n,u,d]),{restorePositionSetting:d}}function h9({open:e,onOpenChange:t,children:n,onDrag:s,onRelease:r,snapPoints:a,shouldScaleBackground:i=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=i9,scrollLockTimeout:u=l9,dismissible:d=!0,handleOnly:f=!1,fadeFromIndex:m=a&&a.length-1,activeSnapPoint:h,setActiveSnapPoint:p,fixed:y,modal:b=!0,onClose:x,nested:w,noBodyStyles:v=!1,direction:N="bottom",defaultOpen:j=!1,disablePreventScroll:S=!0,snapToSequentialPoint:C=!1,preventScrollRestoration:E=!1,repositionInputs:k=!0,onAnimationEnd:_,container:P,autoFocus:O=!1}){var $,M;const[D=!1,A]=jk({defaultProp:j,prop:e,onChange:de=>{t==null||t(de),!de&&!w&&Fs(),setTimeout(()=>{_==null||_(de)},st.DURATION*1e3),de&&!b&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),de||(document.body.style.pointerEvents="auto")}}),[z,T]=L.useState(!1),[R,B]=L.useState(!1),[U,I]=L.useState(!1),q=L.useRef(null),G=L.useRef(null),J=L.useRef(null),ie=L.useRef(null),ee=L.useRef(null),pe=L.useRef(!1),fe=L.useRef(null),ve=L.useRef(0),F=L.useRef(!1),Y=L.useRef(!j),Q=L.useRef(0),W=L.useRef(null),se=L.useRef((($=W.current)==null?void 0:$.getBoundingClientRect().height)||0),ye=L.useRef(((M=W.current)==null?void 0:M.getBoundingClientRect().width)||0),ue=L.useRef(0),ne=L.useCallback(de=>{a&&de===An.length-1&&(G.current=new Date)},[]),{activeSnapPoint:Re,activeSnapPointIndex:pt,setActiveSnapPoint:fs,onRelease:_r,snapPointsOffset:An,onDrag:Wn,shouldFade:Hs,getPercentageDragged:Us}=u9({snapPoints:a,activeSnapPointProp:h,setActiveSnapPointProp:p,drawerRef:W,fadeFromIndex:m,overlayRef:q,onSnapPointChange:ne,direction:N,container:P,snapToSequentialPoint:C});JI({isDisabled:!D||R||!b||U||!z||!k||!S});const{restorePositionSetting:Fs}=m9({isOpen:D,modal:b,nested:w??!1,hasBeenOpened:z,preventScrollRestoration:E,noBodyStyles:v});function Kn(){return(window.innerWidth-Ig)/window.innerWidth}function Ar(de){var _e,Le;!d&&!a||W.current&&!W.current.contains(de.target)||(se.current=((_e=W.current)==null?void 0:_e.getBoundingClientRect().height)||0,ye.current=((Le=W.current)==null?void 0:Le.getBoundingClientRect().width)||0,B(!0),J.current=new Date,pk()&&window.addEventListener("touchend",()=>pe.current=!1,{once:!0}),de.target.setPointerCapture(de.pointerId),ve.current=yt(N)?de.pageY:de.pageX)}function Mr(de,_e){var Le;let Ae=de;const Pe=(Le=window.getSelection())==null?void 0:Le.toString(),It=W.current?_u(W.current,N):null,$t=new Date;if(Ae.tagName==="SELECT"||Ae.hasAttribute("data-vaul-no-drag")||Ae.closest("[data-vaul-no-drag]"))return!1;if(N==="right"||N==="left")return!0;if(G.current&&$t.getTime()-G.current.getTime()<500)return!1;if(It!==null&&(N==="bottom"?It>0:It<0))return!0;if(Pe&&Pe.length>0)return!1;if(ee.current&&$t.getTime()-ee.current.getTime()<u&&It===0||_e)return ee.current=$t,!1;for(;Ae;){if(Ae.scrollHeight>Ae.clientHeight){if(Ae.scrollTop!==0)return ee.current=new Date,!1;if(Ae.getAttribute("role")==="dialog")return!0}Ae=Ae.parentNode}return!0}function _t(de){if(W.current&&R){const _e=N==="bottom"||N==="right"?1:-1,Le=(ve.current-(yt(N)?de.pageY:de.pageX))*_e,Ae=Le>0,Pe=a&&!d&&!Ae;if(Pe&&pt===0)return;const It=Math.abs(Le),$t=document.querySelector("[data-vaul-drawer-wrapper]"),hs=N==="bottom"||N==="top"?se.current:ye.current;let hn=It/hs;const Zs=Us(It,Ae);if(Zs!==null&&(hn=Zs),Pe&&hn>=1||!pe.current&&!Mr(de.target,Ae))return;if(W.current.classList.add(uh),pe.current=!0,St(W.current,{transition:"none"}),St(q.current,{transition:"none"}),a&&Wn({draggedDistance:Le}),Ae&&!a){const Tn=a9(Le),So=Math.min(Tn*-1,0)*_e;St(W.current,{transform:yt(N)?`translate3d(0, ${So}px, 0)`:`translate3d(${So}px, 0, 0)`});return}const gs=1-hn;if((Hs||m&&pt===m-1)&&(s==null||s(de,hn),St(q.current,{opacity:`${gs}`,transition:"none"},!0)),$t&&q.current&&i){const Tn=Math.min(Kn()+hn*(1-Kn()),1),So=8-hn*8,mu=Math.max(0,14-hn*14);St($t,{borderRadius:`${So}px`,transform:yt(N)?`scale(${Tn}) translate3d(0, ${mu}px, 0)`:`scale(${Tn}) translate3d(${mu}px, 0, 0)`,transition:"none"},!0)}if(!a){const Tn=It*_e;St(W.current,{transform:yt(N)?`translate3d(0, ${Tn}px, 0)`:`translate3d(${Tn}px, 0, 0)`})}}}L.useEffect(()=>{window.requestAnimationFrame(()=>{Y.current=!0})},[]),L.useEffect(()=>{var de;function _e(){if(!W.current||!k)return;const Le=document.activeElement;if(Bg(Le)||F.current){var Ae;const Pe=((Ae=window.visualViewport)==null?void 0:Ae.height)||0,It=window.innerHeight;let $t=It-Pe;const hs=W.current.getBoundingClientRect().height||0,hn=hs>It*.8;ue.current||(ue.current=hs);const Zs=W.current.getBoundingClientRect().top;if(Math.abs(Q.current-$t)>60&&(F.current=!F.current),a&&a.length>0&&An&&pt){const gs=An[pt]||0;$t+=gs}if(Q.current=$t,hs>Pe||F.current){const gs=W.current.getBoundingClientRect().height;let Tn=gs;gs>Pe&&(Tn=Pe-(hn?Zs:Ig)),y?W.current.style.height=`${gs-Math.max($t,0)}px`:W.current.style.height=`${Math.max(Tn,Pe-Zs)}px`}else ZI()||(W.current.style.height=`${ue.current}px`);a&&a.length>0&&!F.current?W.current.style.bottom="0px":W.current.style.bottom=`${Math.max($t,0)}px`}}return(de=window.visualViewport)==null||de.addEventListener("resize",_e),()=>{var Le;return(Le=window.visualViewport)==null?void 0:Le.removeEventListener("resize",_e)}},[pt,a,An]);function Lt(de){Vs(),x==null||x(),de||A(!1),setTimeout(()=>{a&&fs(a[0])},st.DURATION*1e3)}function ms(){if(!W.current)return;const de=document.querySelector("[data-vaul-drawer-wrapper]"),_e=_u(W.current,N);St(W.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`}),St(q.current,{transition:`opacity ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,opacity:"1"}),i&&_e&&_e>0&&D&&St(de,{borderRadius:`${wk}px`,overflow:"hidden",...yt(N)?{transform:`scale(${Kn()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Kn()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${st.DURATION}s`,transitionTimingFunction:`cubic-bezier(${st.EASE.join(",")})`},!0)}function Vs(){!R||!W.current||(W.current.classList.remove(uh),pe.current=!1,B(!1),ie.current=new Date)}function qs(de){if(!R||!W.current)return;W.current.classList.remove(uh),pe.current=!1,B(!1),ie.current=new Date;const _e=_u(W.current,N);if(!de||!Mr(de.target,!1)||!_e||Number.isNaN(_e)||J.current===null)return;const Le=ie.current.getTime()-J.current.getTime(),Ae=ve.current-(yt(N)?de.pageY:de.pageX),Pe=Math.abs(Ae)/Le;if(Pe>.05&&(I(!0),setTimeout(()=>{I(!1)},200)),a){_r({draggedDistance:Ae*(N==="bottom"||N==="right"?1:-1),closeDrawer:Lt,velocity:Pe,dismissible:d}),r==null||r(de,!0);return}if(N==="bottom"||N==="right"?Ae>0:Ae<0){ms(),r==null||r(de,!0);return}if(Pe>bk){Lt(),r==null||r(de,!1);return}var It;const $t=Math.min((It=W.current.getBoundingClientRect().height)!=null?It:0,window.innerHeight);var hs;const hn=Math.min((hs=W.current.getBoundingClientRect().width)!=null?hs:0,window.innerWidth),Zs=N==="left"||N==="right";if(Math.abs(_e)>=(Zs?hn:$t)*c){Lt(),r==null||r(de,!1);return}r==null||r(de,!0),ms()}L.useEffect(()=>(D&&(St(document.documentElement,{scrollBehavior:"auto"}),G.current=new Date),()=>{r9(document.documentElement,"scrollBehavior")}),[D]);function Qn(de){const _e=de?(window.innerWidth-Ca)/window.innerWidth:1,Le=de?-Ca:0;fe.current&&window.clearTimeout(fe.current),St(W.current,{transition:`transform ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,transform:yt(N)?`scale(${_e}) translate3d(0, ${Le}px, 0)`:`scale(${_e}) translate3d(${Le}px, 0, 0)`}),!de&&W.current&&(fe.current=setTimeout(()=>{const Ae=_u(W.current,N);St(W.current,{transition:"none",transform:yt(N)?`translate3d(0, ${Ae}px, 0)`:`translate3d(${Ae}px, 0, 0)`})},500))}function Mn(de,_e){if(_e<0)return;const Le=(window.innerWidth-Ca)/window.innerWidth,Ae=Le+_e*(1-Le),Pe=-Ca+_e*Ca;St(W.current,{transform:yt(N)?`scale(${Ae}) translate3d(0, ${Pe}px, 0)`:`scale(${Ae}) translate3d(${Pe}px, 0, 0)`,transition:"none"})}function Na(de,_e){const Le=yt(N)?window.innerHeight:window.innerWidth,Ae=_e?(Le-Ca)/Le:1,Pe=_e?-Ca:0;_e&&St(W.current,{transition:`transform ${st.DURATION}s cubic-bezier(${st.EASE.join(",")})`,transform:yt(N)?`scale(${Ae}) translate3d(0, ${Pe}px, 0)`:`scale(${Ae}) translate3d(${Pe}px, 0, 0)`})}return L.useEffect(()=>{b||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[b]),L.createElement(qj,{defaultOpen:j,onOpenChange:de=>{!d&&!de||(de?T(!0):Lt(!0),A(de))},open:D},L.createElement(gk.Provider,{value:{activeSnapPoint:Re,snapPoints:a,setActiveSnapPoint:fs,drawerRef:W,overlayRef:q,onOpenChange:t,onPress:Ar,onRelease:qs,onDrag:_t,dismissible:d,shouldAnimate:Y,handleOnly:f,isOpen:D,isDragging:R,shouldFade:Hs,closeDrawer:Lt,onNestedDrag:Mn,onNestedOpenChange:Qn,onNestedRelease:Na,keyboardIsOpen:F,modal:b,snapPointsOffset:An,activeSnapPointIndex:pt,direction:N,shouldScaleBackground:i,setBackgroundColorOnScale:l,noBodyStyles:v,container:P,autoFocus:O}},n))}const Sk=L.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:s,onRelease:r,shouldFade:a,isOpen:i,modal:l,shouldAnimate:c}=Zc(),u=yk(t,n),d=s&&s.length>0;if(!l)return null;const f=L.useCallback(m=>r(m),[r]);return L.createElement(jx,{onMouseUp:f,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":i&&d?"true":"false","data-vaul-snap-points-overlay":i&&a?"true":"false","data-vaul-animate":c!=null&&c.current?"true":"false",...e})});Sk.displayName="Drawer.Overlay";const C0=L.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...s},r){const{drawerRef:a,onPress:i,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:d,activeSnapPointIndex:f,modal:m,isOpen:h,direction:p,snapPoints:y,container:b,handleOnly:x,shouldAnimate:w,autoFocus:v}=Zc(),[N,j]=L.useState(!1),S=yk(r,a),C=L.useRef(null),E=L.useRef(null),k=L.useRef(!1),_=y&&y.length>0;f9();const P=($,M,D=0)=>{if(k.current)return!0;const A=Math.abs($.y),z=Math.abs($.x),T=z>A,R=["bottom","right"].includes(M)?1:-1;if(M==="left"||M==="right"){if(!($.x*R<0)&&z>=0&&z<=D)return T}else if(!($.y*R<0)&&A>=0&&A<=D)return!T;return k.current=!0,!0};L.useEffect(()=>{_&&window.requestAnimationFrame(()=>{j(!0)})},[]);function O($){C.current=null,k.current=!1,l($)}return L.createElement(Sx,{"data-vaul-drawer-direction":p,"data-vaul-drawer":"","data-vaul-delayed-snap-points":N?"true":"false","data-vaul-snap-points":h&&_?"true":"false","data-vaul-custom-container":b?"true":"false","data-vaul-animate":w!=null&&w.current?"true":"false",...s,ref:S,style:d&&d.length>0?{"--snap-point-height":`${d[f??0]}px`,...t}:t,onPointerDown:$=>{x||(s.onPointerDown==null||s.onPointerDown.call(s,$),C.current={x:$.pageX,y:$.pageY},i($))},onOpenAutoFocus:$=>{n==null||n($),v||$.preventDefault()},onPointerDownOutside:$=>{if(e==null||e($),!m||$.defaultPrevented){$.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:$=>{if(!m){$.preventDefault();return}},onPointerMove:$=>{if(E.current=$,x||(s.onPointerMove==null||s.onPointerMove.call(s,$),!C.current))return;const M=$.pageY-C.current.y,D=$.pageX-C.current.x,A=$.pointerType==="touch"?10:2;P({x:D,y:M},p,A)?c($):(Math.abs(D)>A||Math.abs(M)>A)&&(C.current=null)},onPointerUp:$=>{s.onPointerUp==null||s.onPointerUp.call(s,$),C.current=null,k.current=!1,l($)},onPointerOut:$=>{s.onPointerOut==null||s.onPointerOut.call(s,$),O(E.current)},onContextMenu:$=>{s.onContextMenu==null||s.onContextMenu.call(s,$),E.current&&O(E.current)}})});C0.displayName="Drawer.Content";const g9=250,p9=120,x9=L.forwardRef(function({preventCycle:e=!1,children:t,...n},s){const{closeDrawer:r,isDragging:a,snapPoints:i,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:d,isOpen:f,onPress:m,onDrag:h}=Zc(),p=L.useRef(null),y=L.useRef(!1);function b(){if(y.current){v();return}window.setTimeout(()=>{x()},p9)}function x(){if(a||e||y.current){v();return}if(v(),!i||i.length===0){u||r();return}if(l===i[i.length-1]&&u){r();return}const j=i.findIndex(C=>C===l);if(j===-1)return;const S=i[j+1];c(S)}function w(){p.current=window.setTimeout(()=>{y.current=!0},g9)}function v(){p.current&&window.clearTimeout(p.current),y.current=!1}return L.createElement("div",{onClick:b,onPointerCancel:v,onPointerDown:N=>{d&&m(N),w()},onPointerMove:N=>{d&&h(N)},ref:s,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},L.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});x9.displayName="Drawer.Handle";function y9(e){const t=Zc(),{container:n=t.container,...s}=e;return L.createElement(Zj,{container:n,...s})}const Cr={Root:h9,Content:C0,Overlay:Sk,Portal:y9,Title:Cx,Description:kx},Ck=({shouldScaleBackground:e=!0,...t})=>o.jsx(Cr.Root,{shouldScaleBackground:e,...t});Ck.displayName="Drawer";const kk=Cr.Portal,k0=g.forwardRef(({className:e,...t},n)=>o.jsx(Cr.Overlay,{ref:n,className:H("fixed inset-0 bg-background/80 backdrop-blur-sm",e),style:{zIndex:Dt.MODAL},...t}));k0.displayName=Cr.Overlay.displayName;const v9=g.forwardRef(({className:e,children:t,fullHeight:n=!1,...s},r)=>o.jsxs(kk,{children:[o.jsx(k0,{}),o.jsxs(Cr.Content,{ref:r,className:H(n?"fixed inset-x-0 bottom-0 z-50 flex h-[100dvh] max-h-[100dvh] w-full bg-background":"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),style:{zIndex:Dt.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[!n&&o.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));v9.displayName="DrawerContent";const Ek=({className:e,...t})=>o.jsx("div",{className:H("grid gap-1.5 p-4 text-center sm:text-left",e),...t});Ek.displayName="DrawerHeader";const _k=({className:e,...t})=>o.jsx("div",{className:H("mt-auto flex flex-col gap-2 p-4",e),...t});_k.displayName="DrawerFooter";const Ak=g.forwardRef(({className:e,...t},n)=>o.jsx(Cr.Title,{ref:n,className:H("text-lg font-semibold leading-none tracking-tight",e),...t}));Ak.displayName=Cr.Title.displayName;const Mk=g.forwardRef(({className:e,...t},n)=>o.jsx(Cr.Description,{ref:n,className:H("text-sm text-muted-foreground",e),...t}));Mk.displayName=Cr.Description.displayName;var Tk="Toggle",Rk=g.forwardRef((e,t)=>{const{pressed:n,defaultPressed:s,onPressedChange:r,...a}=e,[i,l]=Yn({prop:n,onChange:r,defaultProp:s??!1,caller:Tk});return o.jsx(xe.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:te(e.onClick,()=>{e.disabled||l(!i)})})});Rk.displayName=Tk;var va="ToggleGroup",[Dk,zee]=un(va,[Xi]),zk=Xi(),E0=L.forwardRef((e,t)=>{const{type:n,...s}=e;if(n==="single"){const r=s;return o.jsx(b9,{...r,ref:t})}if(n==="multiple"){const r=s;return o.jsx(w9,{...r,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${va}\``)});E0.displayName=va;var[Lk,$k]=Dk(va),b9=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...a}=e,[i,l]=Yn({prop:n,defaultProp:s??"",onChange:r,caller:va});return o.jsx(Lk,{scope:e.__scopeToggleGroup,type:"single",value:L.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:L.useCallback(()=>l(""),[l]),children:o.jsx(Pk,{...a,ref:t})})}),w9=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...a}=e,[i,l]=Yn({prop:n,defaultProp:s??[],onChange:r,caller:va}),c=L.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=L.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return o.jsx(Lk,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:u,children:o.jsx(Pk,{...a,ref:t})})});E0.displayName=va;var[N9,j9]=Dk(va),Pk=L.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:s=!1,rovingFocus:r=!0,orientation:a,dir:i,loop:l=!0,...c}=e,u=zk(n),d=Yi(i),f={role:"group",dir:d,...c};return o.jsx(N9,{scope:n,rovingFocus:r,disabled:s,children:r?o.jsx(Rx,{asChild:!0,...u,orientation:a,dir:d,loop:l,children:o.jsx(xe.div,{...f,ref:t})}):o.jsx(xe.div,{...f,ref:t})})}),Vd="ToggleGroupItem",Ok=L.forwardRef((e,t)=>{const n=$k(Vd,e.__scopeToggleGroup),s=j9(Vd,e.__scopeToggleGroup),r=zk(e.__scopeToggleGroup),a=n.value.includes(e.value),i=s.disabled||e.disabled,l={...e,pressed:a,disabled:i},c=L.useRef(null);return s.rovingFocus?o.jsx(Dx,{asChild:!0,...r,focusable:!i,active:a,ref:c,children:o.jsx(Rb,{...l,ref:t})}):o.jsx(Rb,{...l,ref:t})});Ok.displayName=Vd;var Rb=L.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:s,...r}=e,a=$k(Vd,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return o.jsx(Rk,{...l,...r,ref:t,onPressedChange:c=>{c?a.onItemActivate(s):a.onItemDeactivate(s)}})}),Bk=E0,Ik=Ok;const Hk=qi("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 cursor-pointer",{variants:{variant:{default:"bg-transparent hover:bg-muted hover:text-foreground data-[state=on]:bg-muted data-[state=on]:text-foreground",outline:"border border-input bg-background hover:bg-muted hover:text-foreground data-[state=on]:bg-muted data-[state=on]:text-foreground data-[state=on]:border-muted-foreground/20"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-8"}},defaultVariants:{variant:"default",size:"default"}}),S9=g.forwardRef(({className:e,variant:t,size:n,children:s,...r},a)=>o.jsx(Bk,{ref:a,className:H(Hk({variant:t,size:n}),e),...r,children:s}));S9.displayName=Bk.displayName;const C9=g.forwardRef(({className:e,variant:t,size:n,children:s,...r},a)=>o.jsx(Ik,{ref:a,className:H(Hk({variant:t,size:n}),e),...r,children:s}));C9.displayName=Ik.displayName;function k9({type:e,size:t="sm"}){const n={major:"bg-yellow-600 text-white hover:bg-yellow-700 border-yellow-500",minor:"bg-gray-500 text-white hover:bg-gray-600 border-gray-400",none:"bg-gray-100 text-gray-800 border border-gray-300"},s={major:"Major",minor:"Minor",none:"Unassigned"},r={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return o.jsx(X,{className:H(n[e],r[t]),children:s[e]})}function E9({category:e,size:t="sm"}){const n={Combat:"bg-red-100 text-red-800 border-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200"},s={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return o.jsx(X,{variant:"outline",className:H(n[e]||"bg-gray-100 text-gray-800 border-gray-300",s[t]),children:e})}function _9({count:e,size:t="sm"}){const n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return o.jsxs(X,{variant:"secondary",className:H("bg-purple-100 text-purple-800 border-purple-200",n[t]),children:[e," Perks"]})}function Uk({level:e,size:t="sm"}){const n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return e<=0?null:o.jsxs(X,{variant:"secondary",className:H("bg-blue-100 text-blue-800 border-blue-200",n[t]),children:["Min: Level ",e]})}function A9(){return o.jsx("div",{className:"container mx-auto p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Loading Skills..."}),o.jsx("p",{className:"text-muted-foreground",children:"Initializing skill and perk data..."})]})})}function M9({error:e}){return o.jsx("div",{className:"container mx-auto p-6",children:o.jsxs("div",{className:"text-center text-red-600",children:[o.jsx(pi,{className:"h-12 w-12 mx-auto mb-4"}),o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Error Loading Skills"}),o.jsx("p",{className:"text-muted-foreground",children:e})]})})}function T9({name:e,description:t,category:n,assignmentType:s,perkCount:r,level:a,onSelect:i,onMajorClick:l,onMinorClick:c,canAssignMajor:u,canAssignMinor:d,className:f}){const m=p=>{p.stopPropagation(),l(p)},h=p=>{p.stopPropagation(),c(p)};return o.jsxs("div",{className:H("p-4 border rounded-lg hover:bg-muted/50 transition-colors",f),onClick:i,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h3",{className:"font-semibold text-lg cursor-pointer",children:e}),o.jsx(k9,{type:s})]}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:t}),o.jsxs("div",{className:"flex gap-2 flex-wrap mb-4",children:[o.jsx(E9,{category:n}),o.jsx(_9,{count:r}),typeof a=="number"&&a>0&&o.jsx(Uk,{level:a})]}),o.jsxs("div",{className:"flex gap-2","data-assignment-control":!0,children:[o.jsx(K,{size:"sm",variant:s==="major"?"default":"outline",onClick:m,disabled:!u&&s!=="major",className:H("flex-1 text-xs",s==="major"&&"bg-yellow-600 hover:bg-yellow-700 text-white border-yellow-500"),children:s==="major"?"Remove Major":"Major"}),o.jsx(K,{size:"sm",variant:s==="minor"?"default":"outline",onClick:h,disabled:!d&&s!=="minor",className:H("flex-1 text-xs",s==="minor"&&"bg-gray-500 hover:bg-gray-600 text-white border-gray-400"),children:s==="minor"?"Remove Minor":"Minor"})]})]})}function R9({skills:e,onSkillSelect:t,onAssignMajor:n,onAssignMinor:s,onRemoveAssignment:r,selectedSkillId:a,className:i}){return o.jsx("div",{className:H("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",i),children:e.map(l=>o.jsx(T9,{name:l.name,description:l.description,category:l.category,assignmentType:l.assignmentType,perkCount:l.perkCount,level:l.level,canAssignMajor:l.canAssignMajor,canAssignMinor:l.canAssignMinor,onSelect:()=>t(l.id),onMajorClick:c=>{c.preventDefault(),n(l.id)},onMinorClick:c=>{c.preventDefault(),s(l.id)},className:a===l.id?"ring-2 ring-primary bg-primary/5":""},l.id))})}function D9({item:e,className:t,allTraitIds:n,disableHover:s=!1}){e.originalTrait;const{hasRegularTrait:r,hasBonusTrait:a,addRegularTrait:i,addBonusTrait:l,removeTrait:c,canAddRegularTrait:u,canAddBonusTrait:d,build:f}=wt(),h=r(e.id)?"primary":a(e.id)?"secondary":"none",p=w=>{h===w?c(e.id):(c(e.id),w==="primary"&&u()?i(e.id):w==="secondary"&&d()&&l(e.id))},y=!u()&&h!=="primary",b=!d()&&h!=="secondary",x=()=>h==="primary"?"border-yellow-500 bg-yellow-50/50 shadow-yellow-500/20":h==="secondary"?"border-gray-400 bg-gray-50/50 shadow-gray-400/20":"";return g.useEffect(()=>{var w,v;if(n){const N=((w=f==null?void 0:f.traits)==null?void 0:w.regular)||[],j=((v=f==null?void 0:f.traits)==null?void 0:v.bonus)||[];[...N,...j].filter(E=>!n.includes(E)).forEach(E=>c(E))}},[n,f==null?void 0:f.traits,c]),o.jsxs(he,{expanded:!0,className:H(t,x()),disableHover:s,hideChevron:!0,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ca,{className:"h-4 w-4 text-black"}),o.jsx(gt,{className:"text-primary font-semibold",children:e.name})]})}),o.jsx(he.Summary,{children:o.jsx(Be,{text:e.description,className:"text-base text-muted-foreground"})}),o.jsx(he.Footer,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(K,{size:"sm",variant:h==="primary"?"default":"outline",disabled:y,className:H("flex-1 text-xs",h==="primary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:w=>{w.stopPropagation(),p("primary")},children:h==="primary"?"Remove Trait":"Starting Trait"}),o.jsx(K,{size:"sm",variant:h==="secondary"?"default":"outline",disabled:b,className:H("flex-1 text-xs",h==="secondary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:w=>{w.stopPropagation(),p("secondary")},children:h==="secondary"?"Remove Trait":"Late Game Trait"})]})})]})}function en(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,s;n<e.length;n++)(s=en(e[n]))!==""&&(t+=(t&&" ")+s);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Fk={exports:{}},Vk={},qk={exports:{}},Zk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ki=g;function z9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var L9=typeof Object.is=="function"?Object.is:z9,$9=ki.useState,P9=ki.useEffect,O9=ki.useLayoutEffect,B9=ki.useDebugValue;function I9(e,t){var n=t(),s=$9({inst:{value:n,getSnapshot:t}}),r=s[0].inst,a=s[1];return O9(function(){r.value=n,r.getSnapshot=t,dh(r)&&a({inst:r})},[e,n,t]),P9(function(){return dh(r)&&a({inst:r}),e(function(){dh(r)&&a({inst:r})})},[e]),B9(n),n}function dh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!L9(e,n)}catch{return!0}}function H9(e,t){return t()}var U9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?H9:I9;Zk.useSyncExternalStore=ki.useSyncExternalStore!==void 0?ki.useSyncExternalStore:U9;qk.exports=Zk;var F9=qk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=g,V9=F9;function q9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Z9=typeof Object.is=="function"?Object.is:q9,G9=V9.useSyncExternalStore,Y9=mm.useRef,X9=mm.useEffect,W9=mm.useMemo,K9=mm.useDebugValue;Vk.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var a=Y9(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=W9(function(){function c(h){if(!u){if(u=!0,d=h,h=s(h),r!==void 0&&i.hasValue){var p=i.value;if(r(p,h))return f=p}return f=h}if(p=f,Z9(d,h))return p;var y=s(h);return r!==void 0&&r(p,y)?(d=h,p):(d=h,f=y)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,s,r]);var l=G9(e,a[0],a[1]);return X9(function(){i.hasValue=!0,i.value=l},[l]),K9(l),l};Fk.exports=Vk;var Q9=Fk.exports;const J9=sx(Q9),e7={},Db=e=>{let t;const n=new Set,s=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const h=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(p=>p(t,h))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(e7?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},t7=e=>e?Db(e):Db,{useDebugValue:n7}=L,{useSyncExternalStoreWithSelector:s7}=J9,r7=e=>e;function Gk(e,t=r7,n){const s=s7(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return n7(s),s}const zb=(e,t)=>{const n=t7(e),s=(r,a=t)=>Gk(n,r,a);return Object.assign(s,n),s},a7=(e,t)=>e?zb(e,t):zb;function ln(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var o7={value:()=>{}};function hm(){for(var e=0,t=arguments.length,n={},s;e<t;++e){if(!(s=arguments[e]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new ld(n)}function ld(e){this._=e}function i7(e,t){return e.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}ld.prototype=hm.prototype={constructor:ld,on:function(e,t){var n=this._,s=i7(e+"",n),r,a=-1,i=s.length;if(arguments.length<2){for(;++a<i;)if((r=(e=s[a]).type)&&(r=l7(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(r=(e=s[a]).type)n[r]=Lb(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Lb(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ld(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,a;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],s=0,r=a.length;s<r;++s)a[s].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],r=0,a=s.length;r<a;++r)s[r].value.apply(t,n)}};function l7(e,t){for(var n=0,s=e.length,r;n<s;++n)if((r=e[n]).name===t)return r.value}function Lb(e,t,n){for(var s=0,r=e.length;s<r;++s)if(e[s].name===t){e[s]=o7,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hg="http://www.w3.org/1999/xhtml";const $b={svg:"http://www.w3.org/2000/svg",xhtml:Hg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),$b.hasOwnProperty(t)?{space:$b[t],local:e}:e}function c7(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hg&&t.documentElement.namespaceURI===Hg?t.createElement(e):t.createElementNS(n,e)}}function u7(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yk(e){var t=gm(e);return(t.local?u7:c7)(t)}function d7(){}function _0(e){return e==null?d7:function(){return this.querySelector(e)}}function f7(e){typeof e!="function"&&(e=_0(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,l=s[r]=new Array(i),c,u,d=0;d<i;++d)(c=a[d])&&(u=e.call(c,c.__data__,d,a))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new En(s,this._parents)}function m7(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function h7(){return[]}function Xk(e){return e==null?h7:function(){return this.querySelectorAll(e)}}function g7(e){return function(){return m7(e.apply(this,arguments))}}function p7(e){typeof e=="function"?e=g7(e):e=Xk(e);for(var t=this._groups,n=t.length,s=[],r=[],a=0;a<n;++a)for(var i=t[a],l=i.length,c,u=0;u<l;++u)(c=i[u])&&(s.push(e.call(c,c.__data__,u,i)),r.push(c));return new En(s,r)}function Wk(e){return function(){return this.matches(e)}}function Kk(e){return function(t){return t.matches(e)}}var x7=Array.prototype.find;function y7(e){return function(){return x7.call(this.children,e)}}function v7(){return this.firstElementChild}function b7(e){return this.select(e==null?v7:y7(typeof e=="function"?e:Kk(e)))}var w7=Array.prototype.filter;function N7(){return Array.from(this.children)}function j7(e){return function(){return w7.call(this.children,e)}}function S7(e){return this.selectAll(e==null?N7:j7(typeof e=="function"?e:Kk(e)))}function C7(e){typeof e!="function"&&(e=Wk(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,l=s[r]=[],c,u=0;u<i;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&l.push(c);return new En(s,this._parents)}function Qk(e){return new Array(e.length)}function k7(){return new En(this._enter||this._groups.map(Qk),this._parents)}function qd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qd.prototype={constructor:qd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function E7(e){return function(){return e}}function _7(e,t,n,s,r,a){for(var i=0,l,c=t.length,u=a.length;i<u;++i)(l=t[i])?(l.__data__=a[i],s[i]=l):n[i]=new qd(e,a[i]);for(;i<c;++i)(l=t[i])&&(r[i]=l)}function A7(e,t,n,s,r,a,i){var l,c,u=new Map,d=t.length,f=a.length,m=new Array(d),h;for(l=0;l<d;++l)(c=t[l])&&(m[l]=h=i.call(c,c.__data__,l,t)+"",u.has(h)?r[l]=c:u.set(h,c));for(l=0;l<f;++l)h=i.call(e,a[l],l,a)+"",(c=u.get(h))?(s[l]=c,c.__data__=a[l],u.delete(h)):n[l]=new qd(e,a[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(m[l])===c&&(r[l]=c)}function M7(e){return e.__data__}function T7(e,t){if(!arguments.length)return Array.from(this,M7);var n=t?A7:_7,s=this._parents,r=this._groups;typeof e!="function"&&(e=E7(e));for(var a=r.length,i=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var d=s[u],f=r[u],m=f.length,h=R7(e.call(d,d&&d.__data__,u,s)),p=h.length,y=l[u]=new Array(p),b=i[u]=new Array(p),x=c[u]=new Array(m);n(d,f,y,b,x,h,t);for(var w=0,v=0,N,j;w<p;++w)if(N=y[w]){for(w>=v&&(v=w+1);!(j=b[v])&&++v<p;);N._next=j||null}}return i=new En(i,s),i._enter=l,i._exit=c,i}function R7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function D7(){return new En(this._exit||this._groups.map(Qk),this._parents)}function z7(e,t,n){var s=this.enter(),r=this,a=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?a.remove():n(a),s&&r?s.merge(r).order():r}function L7(e){for(var t=e.selection?e.selection():e,n=this._groups,s=t._groups,r=n.length,a=s.length,i=Math.min(r,a),l=new Array(r),c=0;c<i;++c)for(var u=n[c],d=s[c],f=u.length,m=l[c]=new Array(f),h,p=0;p<f;++p)(h=u[p]||d[p])&&(m[p]=h);for(;c<r;++c)l[c]=n[c];return new En(l,this._parents)}function $7(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s=e[t],r=s.length-1,a=s[r],i;--r>=0;)(i=s[r])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function P7(e){e||(e=O7);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,s=n.length,r=new Array(s),a=0;a<s;++a){for(var i=n[a],l=i.length,c=r[a]=new Array(l),u,d=0;d<l;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new En(r,this._parents).order()}function O7(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function B7(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function I7(){return Array.from(this)}function H7(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,a=s.length;r<a;++r){var i=s[r];if(i)return i}return null}function U7(){let e=0;for(const t of this)++e;return e}function F7(){return!this.node()}function V7(e){for(var t=this._groups,n=0,s=t.length;n<s;++n)for(var r=t[n],a=0,i=r.length,l;a<i;++a)(l=r[a])&&e.call(l,l.__data__,a,r);return this}function q7(e){return function(){this.removeAttribute(e)}}function Z7(e){return function(){this.removeAttributeNS(e.space,e.local)}}function G7(e,t){return function(){this.setAttribute(e,t)}}function Y7(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function X7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function W7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function K7(e,t){var n=gm(e);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((t==null?n.local?Z7:q7:typeof t=="function"?n.local?W7:X7:n.local?Y7:G7)(n,t))}function Jk(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Q7(e){return function(){this.style.removeProperty(e)}}function J7(e,t,n){return function(){this.style.setProperty(e,t,n)}}function eH(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function tH(e,t,n){return arguments.length>1?this.each((t==null?Q7:typeof t=="function"?eH:J7)(e,t,n??"")):Ei(this.node(),e)}function Ei(e,t){return e.style.getPropertyValue(t)||Jk(e).getComputedStyle(e,null).getPropertyValue(t)}function nH(e){return function(){delete this[e]}}function sH(e,t){return function(){this[e]=t}}function rH(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function aH(e,t){return arguments.length>1?this.each((t==null?nH:typeof t=="function"?rH:sH)(e,t)):this.node()[e]}function eE(e){return e.trim().split(/^|\s+/)}function A0(e){return e.classList||new tE(e)}function tE(e){this._node=e,this._names=eE(e.getAttribute("class")||"")}tE.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function nE(e,t){for(var n=A0(e),s=-1,r=t.length;++s<r;)n.add(t[s])}function sE(e,t){for(var n=A0(e),s=-1,r=t.length;++s<r;)n.remove(t[s])}function oH(e){return function(){nE(this,e)}}function iH(e){return function(){sE(this,e)}}function lH(e,t){return function(){(t.apply(this,arguments)?nE:sE)(this,e)}}function cH(e,t){var n=eE(e+"");if(arguments.length<2){for(var s=A0(this.node()),r=-1,a=n.length;++r<a;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?lH:t?oH:iH)(n,t))}function uH(){this.textContent=""}function dH(e){return function(){this.textContent=e}}function fH(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function mH(e){return arguments.length?this.each(e==null?uH:(typeof e=="function"?fH:dH)(e)):this.node().textContent}function hH(){this.innerHTML=""}function gH(e){return function(){this.innerHTML=e}}function pH(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xH(e){return arguments.length?this.each(e==null?hH:(typeof e=="function"?pH:gH)(e)):this.node().innerHTML}function yH(){this.nextSibling&&this.parentNode.appendChild(this)}function vH(){return this.each(yH)}function bH(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wH(){return this.each(bH)}function NH(e){var t=typeof e=="function"?e:Yk(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jH(){return null}function SH(e,t){var n=typeof e=="function"?e:Yk(e),s=t==null?jH:typeof t=="function"?t:_0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function CH(){var e=this.parentNode;e&&e.removeChild(this)}function kH(){return this.each(CH)}function EH(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _H(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function AH(e){return this.select(e?_H:EH)}function MH(e){return arguments.length?this.property("__data__",e):this.node().__data__}function TH(e){return function(t){e.call(this,t,this.__data__)}}function RH(e){return e.trim().split(/^|\s+/).map(function(t){var n="",s=t.indexOf(".");return s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),{type:t,name:n}})}function DH(e){return function(){var t=this.__on;if(t){for(var n=0,s=-1,r=t.length,a;n<r;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++s]=a;++s?t.length=s:delete this.__on}}}function zH(e,t,n){return function(){var s=this.__on,r,a=TH(t);if(s){for(var i=0,l=s.length;i<l;++i)if((r=s[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},s?s.push(r):this.__on=[r]}}function LH(e,t,n){var s=RH(e+""),r,a=s.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(r=0,d=l[c];r<a;++r)if((i=s[r]).type===d.type&&i.name===d.name)return d.value}return}for(l=t?zH:DH,r=0;r<a;++r)this.each(l(s[r],t,n));return this}function rE(e,t,n){var s=Jk(e),r=s.CustomEvent;typeof r=="function"?r=new r(t,n):(r=s.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function $H(e,t){return function(){return rE(this,e,t)}}function PH(e,t){return function(){return rE(this,e,t.apply(this,arguments))}}function OH(e,t){return this.each((typeof t=="function"?PH:$H)(e,t))}function*BH(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,a=s.length,i;r<a;++r)(i=s[r])&&(yield i)}var aE=[null];function En(e,t){this._groups=e,this._parents=t}function Gc(){return new En([[document.documentElement]],aE)}function IH(){return this}En.prototype=Gc.prototype={constructor:En,select:f7,selectAll:p7,selectChild:b7,selectChildren:S7,filter:C7,data:T7,enter:k7,exit:D7,join:z7,merge:L7,selection:IH,order:$7,sort:P7,call:B7,nodes:I7,node:H7,size:U7,empty:F7,each:V7,attr:K7,style:tH,property:aH,classed:cH,text:mH,html:xH,raise:vH,lower:wH,append:NH,insert:SH,remove:kH,clone:AH,datum:MH,on:LH,dispatch:OH,[Symbol.iterator]:BH};function ts(e){return typeof e=="string"?new En([[document.querySelector(e)]],[document.documentElement]):new En([[e]],aE)}function HH(e){let t;for(;t=e.sourceEvent;)e=t;return e}function vs(e,t){if(e=HH(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const UH={passive:!1},uc={capture:!0,passive:!1};function fh(e){e.stopImmediatePropagation()}function ri(e){e.preventDefault(),e.stopImmediatePropagation()}function oE(e){var t=e.document.documentElement,n=ts(e).on("dragstart.drag",ri,uc);"onselectstart"in t?n.on("selectstart.drag",ri,uc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function iE(e,t){var n=e.document.documentElement,s=ts(e).on("dragstart.drag",null);t&&(s.on("click.drag",ri,uc),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Au=e=>()=>e;function Ug(e,{sourceEvent:t,subject:n,target:s,identifier:r,active:a,x:i,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Ug.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function FH(e){return!e.ctrlKey&&!e.button}function VH(){return this.parentNode}function qH(e,t){return t??{x:e.x,y:e.y}}function ZH(){return navigator.maxTouchPoints||"ontouchstart"in this}function GH(){var e=FH,t=VH,n=qH,s=ZH,r={},a=hm("start","drag","end"),i=0,l,c,u,d,f=0;function m(N){N.on("mousedown.drag",h).filter(s).on("touchstart.drag",b).on("touchmove.drag",x,UH).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(N,j){if(!(d||!e.call(this,N,j))){var S=v(this,t.call(this,N,j),N,j,"mouse");S&&(ts(N.view).on("mousemove.drag",p,uc).on("mouseup.drag",y,uc),oE(N.view),fh(N),u=!1,l=N.clientX,c=N.clientY,S("start",N))}}function p(N){if(ri(N),!u){var j=N.clientX-l,S=N.clientY-c;u=j*j+S*S>f}r.mouse("drag",N)}function y(N){ts(N.view).on("mousemove.drag mouseup.drag",null),iE(N.view,u),ri(N),r.mouse("end",N)}function b(N,j){if(e.call(this,N,j)){var S=N.changedTouches,C=t.call(this,N,j),E=S.length,k,_;for(k=0;k<E;++k)(_=v(this,C,N,j,S[k].identifier,S[k]))&&(fh(N),_("start",N,S[k]))}}function x(N){var j=N.changedTouches,S=j.length,C,E;for(C=0;C<S;++C)(E=r[j[C].identifier])&&(ri(N),E("drag",N,j[C]))}function w(N){var j=N.changedTouches,S=j.length,C,E;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<S;++C)(E=r[j[C].identifier])&&(fh(N),E("end",N,j[C]))}function v(N,j,S,C,E,k){var _=a.copy(),P=vs(k||S,j),O,$,M;if((M=n.call(N,new Ug("beforestart",{sourceEvent:S,target:m,identifier:E,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:_}),C))!=null)return O=M.x-P[0]||0,$=M.y-P[1]||0,function D(A,z,T){var R=P,B;switch(A){case"start":r[E]=D,B=i++;break;case"end":delete r[E],--i;case"drag":P=vs(T||z,j),B=i;break}_.call(A,N,new Ug(A,{sourceEvent:z,subject:M,target:m,identifier:E,active:B,x:P[0]+O,y:P[1]+$,dx:P[0]-R[0],dy:P[1]-R[1],dispatch:_}),C)}}return m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Au(!!N),m):e},m.container=function(N){return arguments.length?(t=typeof N=="function"?N:Au(N),m):t},m.subject=function(N){return arguments.length?(n=typeof N=="function"?N:Au(N),m):n},m.touchable=function(N){return arguments.length?(s=typeof N=="function"?N:Au(!!N),m):s},m.on=function(){var N=a.on.apply(a,arguments);return N===a?m:N},m.clickDistance=function(N){return arguments.length?(f=(N=+N)*N,m):Math.sqrt(f)},m}function M0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function lE(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Yc(){}var dc=.7,Zd=1/dc,ai="\\s*([+-]?\\d+)\\s*",fc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YH=/^#([0-9a-f]{3,8})$/,XH=new RegExp(`^rgb\\(${ai},${ai},${ai}\\)$`),WH=new RegExp(`^rgb\\(${Es},${Es},${Es}\\)$`),KH=new RegExp(`^rgba\\(${ai},${ai},${ai},${fc}\\)$`),QH=new RegExp(`^rgba\\(${Es},${Es},${Es},${fc}\\)$`),JH=new RegExp(`^hsl\\(${fc},${Es},${Es}\\)$`),eU=new RegExp(`^hsla\\(${fc},${Es},${Es},${fc}\\)$`),Pb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};M0(Yc,mc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ob,formatHex:Ob,formatHex8:tU,formatHsl:nU,formatRgb:Bb,toString:Bb});function Ob(){return this.rgb().formatHex()}function tU(){return this.rgb().formatHex8()}function nU(){return cE(this).formatHsl()}function Bb(){return this.rgb().formatRgb()}function mc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=YH.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ib(t):n===3?new on(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Mu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Mu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=XH.exec(e))?new on(t[1],t[2],t[3],1):(t=WH.exec(e))?new on(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=KH.exec(e))?Mu(t[1],t[2],t[3],t[4]):(t=QH.exec(e))?Mu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=JH.exec(e))?Fb(t[1],t[2]/100,t[3]/100,1):(t=eU.exec(e))?Fb(t[1],t[2]/100,t[3]/100,t[4]):Pb.hasOwnProperty(e)?Ib(Pb[e]):e==="transparent"?new on(NaN,NaN,NaN,0):null}function Ib(e){return new on(e>>16&255,e>>8&255,e&255,1)}function Mu(e,t,n,s){return s<=0&&(e=t=n=NaN),new on(e,t,n,s)}function sU(e){return e instanceof Yc||(e=mc(e)),e?(e=e.rgb(),new on(e.r,e.g,e.b,e.opacity)):new on}function Fg(e,t,n,s){return arguments.length===1?sU(e):new on(e,t,n,s??1)}function on(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}M0(on,Fg,lE(Yc,{brighter(e){return e=e==null?Zd:Math.pow(Zd,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dc:Math.pow(dc,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new on(Ba(this.r),Ba(this.g),Ba(this.b),Gd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hb,formatHex:Hb,formatHex8:rU,formatRgb:Ub,toString:Ub}));function Hb(){return`#${$a(this.r)}${$a(this.g)}${$a(this.b)}`}function rU(){return`#${$a(this.r)}${$a(this.g)}${$a(this.b)}${$a((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ub(){const e=Gd(this.opacity);return`${e===1?"rgb(":"rgba("}${Ba(this.r)}, ${Ba(this.g)}, ${Ba(this.b)}${e===1?")":`, ${e})`}`}function Gd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ba(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $a(e){return e=Ba(e),(e<16?"0":"")+e.toString(16)}function Fb(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ns(e,t,n,s)}function cE(e){if(e instanceof ns)return new ns(e.h,e.s,e.l,e.opacity);if(e instanceof Yc||(e=mc(e)),!e)return new ns;if(e instanceof ns)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),a=Math.max(t,n,s),i=NaN,l=a-r,c=(a+r)/2;return l?(t===a?i=(n-s)/l+(n<s)*6:n===a?i=(s-t)/l+2:i=(t-n)/l+4,l/=c<.5?a+r:2-a-r,i*=60):l=c>0&&c<1?0:i,new ns(i,l,c,e.opacity)}function aU(e,t,n,s){return arguments.length===1?cE(e):new ns(e,t,n,s??1)}function ns(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}M0(ns,aU,lE(Yc,{brighter(e){return e=e==null?Zd:Math.pow(Zd,e),new ns(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dc:Math.pow(dc,e),new ns(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new on(mh(e>=240?e-240:e+120,r,s),mh(e,r,s),mh(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new ns(Vb(this.h),Tu(this.s),Tu(this.l),Gd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gd(this.opacity);return`${e===1?"hsl(":"hsla("}${Vb(this.h)}, ${Tu(this.s)*100}%, ${Tu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vb(e){return e=(e||0)%360,e<0?e+360:e}function Tu(e){return Math.max(0,Math.min(1,e||0))}function mh(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const uE=e=>()=>e;function oU(e,t){return function(n){return e+n*t}}function iU(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function lU(e){return(e=+e)==1?dE:function(t,n){return n-t?iU(t,n,e):uE(isNaN(t)?n:t)}}function dE(e,t){var n=t-e;return n?oU(e,n):uE(isNaN(e)?t:e)}const qb=function e(t){var n=lU(t);function s(r,a){var i=n((r=Fg(r)).r,(a=Fg(a)).r),l=n(r.g,a.g),c=n(r.b,a.b),u=dE(r.opacity,a.opacity);return function(d){return r.r=i(d),r.g=l(d),r.b=c(d),r.opacity=u(d),r+""}}return s.gamma=e,s}(1);function Pr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Vg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hh=new RegExp(Vg.source,"g");function cU(e){return function(){return e}}function uU(e){return function(t){return e(t)+""}}function dU(e,t){var n=Vg.lastIndex=hh.lastIndex=0,s,r,a,i=-1,l=[],c=[];for(e=e+"",t=t+"";(s=Vg.exec(e))&&(r=hh.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),l[i]?l[i]+=a:l[++i]=a),(s=s[0])===(r=r[0])?l[i]?l[i]+=r:l[++i]=r:(l[++i]=null,c.push({i,x:Pr(s,r)})),n=hh.lastIndex;return n<t.length&&(a=t.slice(n),l[i]?l[i]+=a:l[++i]=a),l.length<2?c[0]?uU(c[0].x):cU(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var Zb=180/Math.PI,qg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fE(e,t,n,s,r,a){var i,l,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*s)&&(n-=e*c,s-=t*c),(l=Math.sqrt(n*n+s*s))&&(n/=l,s/=l,c/=l),e*s<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*Zb,skewX:Math.atan(c)*Zb,scaleX:i,scaleY:l}}var Ru;function fU(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qg:fE(t.a,t.b,t.c,t.d,t.e,t.f)}function mU(e){return e==null||(Ru||(Ru=document.createElementNS("http://www.w3.org/2000/svg","g")),Ru.setAttribute("transform",e),!(e=Ru.transform.baseVal.consolidate()))?qg:(e=e.matrix,fE(e.a,e.b,e.c,e.d,e.e,e.f))}function mE(e,t,n,s){function r(u){return u.length?u.pop()+" ":""}function a(u,d,f,m,h,p){if(u!==f||d!==m){var y=h.push("translate(",null,t,null,n);p.push({i:y-4,x:Pr(u,f)},{i:y-2,x:Pr(d,m)})}else(f||m)&&h.push("translate("+f+t+m+n)}function i(u,d,f,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:f.push(r(f)+"rotate(",null,s)-2,x:Pr(u,d)})):d&&f.push(r(f)+"rotate("+d+s)}function l(u,d,f,m){u!==d?m.push({i:f.push(r(f)+"skewX(",null,s)-2,x:Pr(u,d)}):d&&f.push(r(f)+"skewX("+d+s)}function c(u,d,f,m,h,p){if(u!==f||d!==m){var y=h.push(r(h)+"scale(",null,",",null,")");p.push({i:y-4,x:Pr(u,f)},{i:y-2,x:Pr(d,m)})}else(f!==1||m!==1)&&h.push(r(h)+"scale("+f+","+m+")")}return function(u,d){var f=[],m=[];return u=e(u),d=e(d),a(u.translateX,u.translateY,d.translateX,d.translateY,f,m),i(u.rotate,d.rotate,f,m),l(u.skewX,d.skewX,f,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,m),u=d=null,function(h){for(var p=-1,y=m.length,b;++p<y;)f[(b=m[p]).i]=b.x(h);return f.join("")}}}var hU=mE(fU,"px, ","px)","deg)"),gU=mE(mU,", ",")",")"),pU=1e-12;function Gb(e){return((e=Math.exp(e))+1/e)/2}function xU(e){return((e=Math.exp(e))-1/e)/2}function yU(e){return((e=Math.exp(2*e))-1)/(e+1)}const vU=function e(t,n,s){function r(a,i){var l=a[0],c=a[1],u=a[2],d=i[0],f=i[1],m=i[2],h=d-l,p=f-c,y=h*h+p*p,b,x;if(y<pU)x=Math.log(m/u)/t,b=function(C){return[l+C*h,c+C*p,u*Math.exp(t*C*x)]};else{var w=Math.sqrt(y),v=(m*m-u*u+s*y)/(2*u*n*w),N=(m*m-u*u-s*y)/(2*m*n*w),j=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(N*N+1)-N);x=(S-j)/t,b=function(C){var E=C*x,k=Gb(j),_=u/(n*w)*(k*yU(t*E+j)-xU(j));return[l+_*h,c+_*p,u*k/Gb(t*E+j)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return r.rho=function(a){var i=Math.max(.001,+a),l=i*i,c=l*l;return e(i,l,c)},r}(Math.SQRT2,2,4);var _i=0,Al=0,hl=0,hE=1e3,Yd,Ml,Xd=0,Wa=0,pm=0,hc=typeof performance=="object"&&performance.now?performance:Date,gE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function T0(){return Wa||(gE(bU),Wa=hc.now()+pm)}function bU(){Wa=0}function Wd(){this._call=this._time=this._next=null}Wd.prototype=pE.prototype={constructor:Wd,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?T0():+n)+(t==null?0:+t),!this._next&&Ml!==this&&(Ml?Ml._next=this:Yd=this,Ml=this),this._call=e,this._time=n,Zg()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zg())}};function pE(e,t,n){var s=new Wd;return s.restart(e,t,n),s}function wU(){T0(),++_i;for(var e=Yd,t;e;)(t=Wa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_i}function Yb(){Wa=(Xd=hc.now())+pm,_i=Al=0;try{wU()}finally{_i=0,jU(),Wa=0}}function NU(){var e=hc.now(),t=e-Xd;t>hE&&(pm-=t,Xd=e)}function jU(){for(var e,t=Yd,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Yd=n);Ml=e,Zg(s)}function Zg(e){if(!_i){Al&&(Al=clearTimeout(Al));var t=e-Wa;t>24?(e<1/0&&(Al=setTimeout(Yb,e-hc.now()-pm)),hl&&(hl=clearInterval(hl))):(hl||(Xd=hc.now(),hl=setInterval(NU,hE)),_i=1,gE(Yb))}}function Xb(e,t,n){var s=new Wd;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,n),s}var SU=hm("start","end","cancel","interrupt"),CU=[],xE=0,Wb=1,Gg=2,cd=3,Kb=4,Yg=5,ud=6;function xm(e,t,n,s,r,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;kU(e,n,{name:t,index:s,group:r,on:SU,tween:CU,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:xE})}function R0(e,t){var n=us(e,t);if(n.state>xE)throw new Error("too late; already scheduled");return n}function Os(e,t){var n=us(e,t);if(n.state>cd)throw new Error("too late; already running");return n}function us(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function kU(e,t,n){var s=e.__transition,r;s[t]=n,n.timer=pE(a,0,n.time);function a(u){n.state=Wb,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,f,m,h;if(n.state!==Wb)return c();for(d in s)if(h=s[d],h.name===n.name){if(h.state===cd)return Xb(i);h.state===Kb?(h.state=ud,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete s[d]):+d<t&&(h.state=ud,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete s[d])}if(Xb(function(){n.state===cd&&(n.state=Kb,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Gg,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Gg){for(n.state=cd,r=new Array(m=n.tween.length),d=0,f=-1;d<m;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function l(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Yg,1),f=-1,m=r.length;++f<m;)r[f].call(e,d);n.state===Yg&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=ud,n.timer.stop(),delete s[t];for(var u in s)return;delete e.__transition}}function dd(e,t){var n=e.__transition,s,r,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((s=n[i]).name!==t){a=!1;continue}r=s.state>Gg&&s.state<Yg,s.state=ud,s.timer.stop(),s.on.call(r?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[i]}a&&delete e.__transition}}function EU(e){return this.each(function(){dd(this,e)})}function _U(e,t){var n,s;return function(){var r=Os(this,e),a=r.tween;if(a!==n){s=n=a;for(var i=0,l=s.length;i<l;++i)if(s[i].name===t){s=s.slice(),s.splice(i,1);break}}r.tween=s}}function AU(e,t,n){var s,r;if(typeof n!="function")throw new Error;return function(){var a=Os(this,e),i=a.tween;if(i!==s){r=(s=i).slice();for(var l={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=l;break}c===u&&r.push(l)}a.tween=r}}function MU(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s=us(this.node(),n).tween,r=0,a=s.length,i;r<a;++r)if((i=s[r]).name===e)return i.value;return null}return this.each((t==null?_U:AU)(n,e,t))}function D0(e,t,n){var s=e._id;return e.each(function(){var r=Os(this,s);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return us(r,s).value[t]}}function yE(e,t){var n;return(typeof t=="number"?Pr:t instanceof mc?qb:(n=mc(t))?(t=n,qb):dU)(e,t)}function TU(e){return function(){this.removeAttribute(e)}}function RU(e){return function(){this.removeAttributeNS(e.space,e.local)}}function DU(e,t,n){var s,r=n+"",a;return function(){var i=this.getAttribute(e);return i===r?null:i===s?a:a=t(s=i,n)}}function zU(e,t,n){var s,r=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===s?a:a=t(s=i,n)}}function LU(e,t,n){var s,r,a;return function(){var i,l=n(this),c;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=l+"",i===c?null:i===s&&c===r?a:(r=c,a=t(s=i,l)))}}function $U(e,t,n){var s,r,a;return function(){var i,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=l+"",i===c?null:i===s&&c===r?a:(r=c,a=t(s=i,l)))}}function PU(e,t){var n=gm(e),s=n==="transform"?gU:yE;return this.attrTween(e,typeof t=="function"?(n.local?$U:LU)(n,s,D0(this,"attr."+e,t)):t==null?(n.local?RU:TU)(n):(n.local?zU:DU)(n,s,t))}function OU(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function BU(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function IU(e,t){var n,s;function r(){var a=t.apply(this,arguments);return a!==s&&(n=(s=a)&&BU(e,a)),n}return r._value=t,r}function HU(e,t){var n,s;function r(){var a=t.apply(this,arguments);return a!==s&&(n=(s=a)&&OU(e,a)),n}return r._value=t,r}function UU(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var s=gm(e);return this.tween(n,(s.local?IU:HU)(s,t))}function FU(e,t){return function(){R0(this,e).delay=+t.apply(this,arguments)}}function VU(e,t){return t=+t,function(){R0(this,e).delay=t}}function qU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?FU:VU)(t,e)):us(this.node(),t).delay}function ZU(e,t){return function(){Os(this,e).duration=+t.apply(this,arguments)}}function GU(e,t){return t=+t,function(){Os(this,e).duration=t}}function YU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ZU:GU)(t,e)):us(this.node(),t).duration}function XU(e,t){if(typeof t!="function")throw new Error;return function(){Os(this,e).ease=t}}function WU(e){var t=this._id;return arguments.length?this.each(XU(t,e)):us(this.node(),t).ease}function KU(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Os(this,e).ease=n}}function QU(e){if(typeof e!="function")throw new Error;return this.each(KU(this._id,e))}function JU(e){typeof e!="function"&&(e=Wk(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,l=s[r]=[],c,u=0;u<i;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&l.push(c);return new yr(s,this._parents,this._name,this._id)}function eF(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,s=t.length,r=n.length,a=Math.min(s,r),i=new Array(s),l=0;l<a;++l)for(var c=t[l],u=n[l],d=c.length,f=i[l]=new Array(d),m,h=0;h<d;++h)(m=c[h]||u[h])&&(f[h]=m);for(;l<s;++l)i[l]=t[l];return new yr(i,this._parents,this._name,this._id)}function tF(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function nF(e,t,n){var s,r,a=tF(t)?R0:Os;return function(){var i=a(this,e),l=i.on;l!==s&&(r=(s=l).copy()).on(t,n),i.on=r}}function sF(e,t){var n=this._id;return arguments.length<2?us(this.node(),n).on.on(e):this.each(nF(n,e,t))}function rF(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function aF(){return this.on("end.remove",rF(this._id))}function oF(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_0(e));for(var s=this._groups,r=s.length,a=new Array(r),i=0;i<r;++i)for(var l=s[i],c=l.length,u=a[i]=new Array(c),d,f,m=0;m<c;++m)(d=l[m])&&(f=e.call(d,d.__data__,m,l))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f,xm(u[m],t,n,m,u,us(d,n)));return new yr(a,this._parents,t,n)}function iF(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xk(e));for(var s=this._groups,r=s.length,a=[],i=[],l=0;l<r;++l)for(var c=s[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var m=e.call(d,d.__data__,f,c),h,p=us(d,n),y=0,b=m.length;y<b;++y)(h=m[y])&&xm(h,t,n,y,m,p);a.push(m),i.push(d)}return new yr(a,i,t,n)}var lF=Gc.prototype.constructor;function cF(){return new lF(this._groups,this._parents)}function uF(e,t){var n,s,r;return function(){var a=Ei(this,e),i=(this.style.removeProperty(e),Ei(this,e));return a===i?null:a===n&&i===s?r:r=t(n=a,s=i)}}function vE(e){return function(){this.style.removeProperty(e)}}function dF(e,t,n){var s,r=n+"",a;return function(){var i=Ei(this,e);return i===r?null:i===s?a:a=t(s=i,n)}}function fF(e,t,n){var s,r,a;return function(){var i=Ei(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Ei(this,e))),i===c?null:i===s&&c===r?a:(r=c,a=t(s=i,l))}}function mF(e,t){var n,s,r,a="style."+t,i="end."+a,l;return function(){var c=Os(this,e),u=c.on,d=c.value[a]==null?l||(l=vE(t)):void 0;(u!==n||r!==d)&&(s=(n=u).copy()).on(i,r=d),c.on=s}}function hF(e,t,n){var s=(e+="")=="transform"?hU:yE;return t==null?this.styleTween(e,uF(e,s)).on("end.style."+e,vE(e)):typeof t=="function"?this.styleTween(e,fF(e,s,D0(this,"style."+e,t))).each(mF(this._id,e)):this.styleTween(e,dF(e,s,t),n).on("end.style."+e,null)}function gF(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function pF(e,t,n){var s,r;function a(){var i=t.apply(this,arguments);return i!==r&&(s=(r=i)&&gF(e,i,n)),s}return a._value=t,a}function xF(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,pF(e,t,n??""))}function yF(e){return function(){this.textContent=e}}function vF(e){return function(){var t=e(this);this.textContent=t??""}}function bF(e){return this.tween("text",typeof e=="function"?vF(D0(this,"text",e)):yF(e==null?"":e+""))}function wF(e){return function(t){this.textContent=e.call(this,t)}}function NF(e){var t,n;function s(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&wF(r)),t}return s._value=e,s}function jF(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,NF(e))}function SF(){for(var e=this._name,t=this._id,n=bE(),s=this._groups,r=s.length,a=0;a<r;++a)for(var i=s[a],l=i.length,c,u=0;u<l;++u)if(c=i[u]){var d=us(c,t);xm(c,e,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new yr(s,this._parents,e,n)}function CF(){var e,t,n=this,s=n._id,r=n.size();return new Promise(function(a,i){var l={value:i},c={value:function(){--r===0&&a()}};n.each(function(){var u=Os(this,s),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),r===0&&a()})}var kF=0;function yr(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function bE(){return++kF}var Xs=Gc.prototype;yr.prototype={constructor:yr,select:oF,selectAll:iF,selectChild:Xs.selectChild,selectChildren:Xs.selectChildren,filter:JU,merge:eF,selection:cF,transition:SF,call:Xs.call,nodes:Xs.nodes,node:Xs.node,size:Xs.size,empty:Xs.empty,each:Xs.each,on:sF,attr:PU,attrTween:UU,style:hF,styleTween:xF,text:bF,textTween:jF,remove:aF,tween:MU,delay:qU,duration:YU,ease:WU,easeVarying:QU,end:CF,[Symbol.iterator]:Xs[Symbol.iterator]};function EF(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _F={time:null,delay:0,duration:250,ease:EF};function AF(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function MF(e){var t,n;e instanceof yr?(t=e._id,e=e._name):(t=bE(),(n=_F).time=T0(),e=e==null?null:e+"");for(var s=this._groups,r=s.length,a=0;a<r;++a)for(var i=s[a],l=i.length,c,u=0;u<l;++u)(c=i[u])&&xm(c,e,t,u,i,n||AF(c,t));return new yr(s,this._parents,e,t)}Gc.prototype.interrupt=EU;Gc.prototype.transition=MF;const Du=e=>()=>e;function TF(e,{sourceEvent:t,target:n,transform:s,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:r}})}function sr(e,t,n){this.k=e,this.x=t,this.y=n}sr.prototype={constructor:sr,scale:function(e){return e===1?this:new sr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new sr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Jr=new sr(1,0,0);sr.prototype;function gh(e){e.stopImmediatePropagation()}function gl(e){e.preventDefault(),e.stopImmediatePropagation()}function RF(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function DF(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Qb(){return this.__zoom||Jr}function zF(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function LF(){return navigator.maxTouchPoints||"ontouchstart"in this}function $F(e,t,n){var s=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function PF(){var e=RF,t=DF,n=$F,s=zF,r=LF,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=vU,u=hm("start","zoom","end"),d,f,m,h=500,p=150,y=0,b=10;function x(M){M.property("__zoom",Qb).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",_).filter(r).on("touchstart.zoom",P).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(M,D,A,z){var T=M.selection?M.selection():M;T.property("__zoom",Qb),M!==T?j(M,D,A,z):T.interrupt().each(function(){S(this,arguments).event(z).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},x.scaleBy=function(M,D,A,z){x.scaleTo(M,function(){var T=this.__zoom.k,R=typeof D=="function"?D.apply(this,arguments):D;return T*R},A,z)},x.scaleTo=function(M,D,A,z){x.transform(M,function(){var T=t.apply(this,arguments),R=this.__zoom,B=A==null?N(T):typeof A=="function"?A.apply(this,arguments):A,U=R.invert(B),I=typeof D=="function"?D.apply(this,arguments):D;return n(v(w(R,I),B,U),T,i)},A,z)},x.translateBy=function(M,D,A,z){x.transform(M,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),i)},null,z)},x.translateTo=function(M,D,A,z,T){x.transform(M,function(){var R=t.apply(this,arguments),B=this.__zoom,U=z==null?N(R):typeof z=="function"?z.apply(this,arguments):z;return n(Jr.translate(U[0],U[1]).scale(B.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof A=="function"?-A.apply(this,arguments):-A),R,i)},z,T)};function w(M,D){return D=Math.max(a[0],Math.min(a[1],D)),D===M.k?M:new sr(D,M.x,M.y)}function v(M,D,A){var z=D[0]-A[0]*M.k,T=D[1]-A[1]*M.k;return z===M.x&&T===M.y?M:new sr(M.k,z,T)}function N(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function j(M,D,A,z){M.on("start.zoom",function(){S(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(z).end()}).tween("zoom",function(){var T=this,R=arguments,B=S(T,R).event(z),U=t.apply(T,R),I=A==null?N(U):typeof A=="function"?A.apply(T,R):A,q=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),G=T.__zoom,J=typeof D=="function"?D.apply(T,R):D,ie=c(G.invert(I).concat(q/G.k),J.invert(I).concat(q/J.k));return function(ee){if(ee===1)ee=J;else{var pe=ie(ee),fe=q/pe[2];ee=new sr(fe,I[0]-pe[0]*fe,I[1]-pe[1]*fe)}B.zoom(null,ee)}})}function S(M,D,A){return!A&&M.__zooming||new C(M,D)}function C(M,D){this.that=M,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,D),this.taps=0}C.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,D){return this.mouse&&M!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var D=ts(this.that).datum();u.call(M,this.that,new TF(M,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),D)}};function E(M,...D){if(!e.apply(this,arguments))return;var A=S(this,D).event(M),z=this.__zoom,T=Math.max(a[0],Math.min(a[1],z.k*Math.pow(2,s.apply(this,arguments)))),R=vs(M);if(A.wheel)(A.mouse[0][0]!==R[0]||A.mouse[0][1]!==R[1])&&(A.mouse[1]=z.invert(A.mouse[0]=R)),clearTimeout(A.wheel);else{if(z.k===T)return;A.mouse=[R,z.invert(R)],dd(this),A.start()}gl(M),A.wheel=setTimeout(B,p),A.zoom("mouse",n(v(w(z,T),A.mouse[0],A.mouse[1]),A.extent,i));function B(){A.wheel=null,A.end()}}function k(M,...D){if(m||!e.apply(this,arguments))return;var A=M.currentTarget,z=S(this,D,!0).event(M),T=ts(M.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",q,!0),R=vs(M,A),B=M.clientX,U=M.clientY;oE(M.view),gh(M),z.mouse=[R,this.__zoom.invert(R)],dd(this),z.start();function I(G){if(gl(G),!z.moved){var J=G.clientX-B,ie=G.clientY-U;z.moved=J*J+ie*ie>y}z.event(G).zoom("mouse",n(v(z.that.__zoom,z.mouse[0]=vs(G,A),z.mouse[1]),z.extent,i))}function q(G){T.on("mousemove.zoom mouseup.zoom",null),iE(G.view,z.moved),gl(G),z.event(G).end()}}function _(M,...D){if(e.apply(this,arguments)){var A=this.__zoom,z=vs(M.changedTouches?M.changedTouches[0]:M,this),T=A.invert(z),R=A.k*(M.shiftKey?.5:2),B=n(v(w(A,R),z,T),t.apply(this,D),i);gl(M),l>0?ts(this).transition().duration(l).call(j,B,z,M):ts(this).call(x.transform,B,z,M)}}function P(M,...D){if(e.apply(this,arguments)){var A=M.touches,z=A.length,T=S(this,D,M.changedTouches.length===z).event(M),R,B,U,I;for(gh(M),B=0;B<z;++B)U=A[B],I=vs(U,this),I=[I,this.__zoom.invert(I),U.identifier],T.touch0?!T.touch1&&T.touch0[2]!==I[2]&&(T.touch1=I,T.taps=0):(T.touch0=I,R=!0,T.taps=1+!!d);d&&(d=clearTimeout(d)),R&&(T.taps<2&&(f=I[0],d=setTimeout(function(){d=null},h)),dd(this),T.start())}}function O(M,...D){if(this.__zooming){var A=S(this,D).event(M),z=M.changedTouches,T=z.length,R,B,U,I;for(gl(M),R=0;R<T;++R)B=z[R],U=vs(B,this),A.touch0&&A.touch0[2]===B.identifier?A.touch0[0]=U:A.touch1&&A.touch1[2]===B.identifier&&(A.touch1[0]=U);if(B=A.that.__zoom,A.touch1){var q=A.touch0[0],G=A.touch0[1],J=A.touch1[0],ie=A.touch1[1],ee=(ee=J[0]-q[0])*ee+(ee=J[1]-q[1])*ee,pe=(pe=ie[0]-G[0])*pe+(pe=ie[1]-G[1])*pe;B=w(B,Math.sqrt(ee/pe)),U=[(q[0]+J[0])/2,(q[1]+J[1])/2],I=[(G[0]+ie[0])/2,(G[1]+ie[1])/2]}else if(A.touch0)U=A.touch0[0],I=A.touch0[1];else return;A.zoom("touch",n(v(B,U,I),A.extent,i))}}function $(M,...D){if(this.__zooming){var A=S(this,D).event(M),z=M.changedTouches,T=z.length,R,B;for(gh(M),m&&clearTimeout(m),m=setTimeout(function(){m=null},h),R=0;R<T;++R)B=z[R],A.touch0&&A.touch0[2]===B.identifier?delete A.touch0:A.touch1&&A.touch1[2]===B.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(B=vs(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<b)){var U=ts(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return x.wheelDelta=function(M){return arguments.length?(s=typeof M=="function"?M:Du(+M),x):s},x.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Du(!!M),x):e},x.touchable=function(M){return arguments.length?(r=typeof M=="function"?M:Du(!!M),x):r},x.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Du([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),x):t},x.scaleExtent=function(M){return arguments.length?(a[0]=+M[0],a[1]=+M[1],x):[a[0],a[1]]},x.translateExtent=function(M){return arguments.length?(i[0][0]=+M[0][0],i[1][0]=+M[1][0],i[0][1]=+M[0][1],i[1][1]=+M[1][1],x):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},x.constrain=function(M){return arguments.length?(n=M,x):n},x.duration=function(M){return arguments.length?(l=+M,x):l},x.interpolate=function(M){return arguments.length?(c=M,x):c},x.on=function(){var M=u.on.apply(u,arguments);return M===u?x:M},x.clickDistance=function(M){return arguments.length?(y=(M=+M)*M,x):Math.sqrt(y)},x.tapDistance=function(M){return arguments.length?(b=+M,x):b},x}const ym=g.createContext(null),OF=ym.Provider,vr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},wE=vr.error001();function at(e,t){const n=g.useContext(ym);if(n===null)throw new Error(wE);return Gk(n,e,t)}const zt=()=>{const e=g.useContext(ym);if(e===null)throw new Error(wE);return g.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},BF=e=>e.userSelectionActive?"none":"all";function NE({position:e,children:t,className:n,style:s,...r}){const a=at(BF),i=`${e}`.split("-");return L.createElement("div",{className:en(["react-flow__panel",n,...i]),style:{...s,pointerEvents:a},...r},t)}function IF({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:L.createElement(NE,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},L.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const HF=({x:e,y:t,label:n,labelStyle:s={},labelShowBg:r=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=g.useRef(null),[m,h]=g.useState({x:0,y:0,width:0,height:0}),p=en(["react-flow__edge-textwrapper",u]);return g.useEffect(()=>{if(f.current){const y=f.current.getBBox();h({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:L.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:p,visibility:m.width?"visible":"hidden",...d},r&&L.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:l,ry:l}),L.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:f,style:s},n),c)};var UF=g.memo(HF);const z0=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ai=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),L0=(e={x:0,y:0},t)=>({x:Ai(e.x,t[0][0],t[1][0]),y:Ai(e.y,t[0][1],t[1][1])}),Jb=(e,t,n)=>e<t?Ai(Math.abs(e-t),1,50)/50:e>n?-Ai(Math.abs(e-n),1,50)/50:0,jE=(e,t)=>{const n=Jb(e.x,35,t.width-35)*20,s=Jb(e.y,35,t.height-35)*20;return[n,s]},SE=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},FF=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),$0=({x:e,y:t,width:n,height:s})=>({x:e,y:t,x2:e+n,y2:t+s}),VF=({x:e,y:t,x2:n,y2:s})=>({x:e,y:t,width:n-e,height:s-t}),ew=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Xg=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),s=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*s)},qF=e=>In(e.width)&&In(e.height)&&In(e.x)&&In(e.y),In=e=>!isNaN(e)&&isFinite(e),ct=Symbol.for("internals"),CE=["Enter"," ","Escape"],ZF=(e,t)=>{},GF=e=>"nativeEvent"in e;function Wg(e){var r,a;const t=GF(e)?e.nativeEvent:e,n=((a=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:a[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const kE=e=>"clientX"in e,ea=(e,t)=>{var a,i;const n=kE(e),s=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,r=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:s-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Kd=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Xc=({id:e,path:t,labelX:n,labelY:s,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h=20})=>L.createElement(L.Fragment,null,L.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),h&&L.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&In(n)&&In(s)?L.createElement(UF,{x:n,y:s,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);Xc.displayName="BaseEdge";function pl(e,t,n){return n===void 0?n:s=>{const r=t().edges.find(a=>a.id===e);r&&n(s,{...r})}}function EE({sourceX:e,sourceY:t,targetX:n,targetY:s}){const r=Math.abs(n-e)/2,a=n<e?n+r:n-r,i=Math.abs(s-t)/2,l=s<t?s+i:s-i;return[a,l,r,i]}function _E({sourceX:e,sourceY:t,targetX:n,targetY:s,sourceControlX:r,sourceControlY:a,targetControlX:i,targetControlY:l}){const c=e*.125+r*.375+i*.375+n*.125,u=t*.125+a*.375+l*.375+s*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Ka;(function(e){e.Strict="strict",e.Loose="loose"})(Ka||(Ka={}));var Pa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Pa||(Pa={}));var gc;(function(e){e.Partial="partial",e.Full="full"})(gc||(gc={}));var Ur;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ur||(Ur={}));var Qd;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Qd||(Qd={}));var le;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(le||(le={}));function tw({pos:e,x1:t,y1:n,x2:s,y2:r}){return e===le.Left||e===le.Right?[.5*(t+s),n]:[t,.5*(n+r)]}function AE({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:a=le.Top}){const[i,l]=tw({pos:n,x1:e,y1:t,x2:s,y2:r}),[c,u]=tw({pos:a,x1:s,y1:r,x2:e,y2:t}),[d,f,m,h]=_E({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${l} ${c},${u} ${s},${r}`,d,f,m,h]}const P0=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:r=le.Bottom,targetPosition:a=le.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:y})=>{const[b,x,w]=AE({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:s,targetPosition:a});return L.createElement(Xc,{path:b,labelX:x,labelY:w,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:y})});P0.displayName="SimpleBezierEdge";const nw={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}},YF=({source:e,sourcePosition:t=le.Bottom,target:n})=>t===le.Left||t===le.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},sw=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function XF({source:e,sourcePosition:t=le.Bottom,target:n,targetPosition:s=le.Top,center:r,offset:a}){const i=nw[t],l=nw[s],c={x:e.x+i.x*a,y:e.y+i.y*a},u={x:n.x+l.x*a,y:n.y+l.y*a},d=YF({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",m=d[f];let h=[],p,y;const b={x:0,y:0},x={x:0,y:0},[w,v,N,j]=EE({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*l[f]===-1){p=r.x??w,y=r.y??v;const C=[{x:p,y:c.y},{x:p,y:u.y}],E=[{x:c.x,y},{x:u.x,y}];i[f]===m?h=f==="x"?C:E:h=f==="x"?E:C}else{const C=[{x:c.x,y:u.y}],E=[{x:u.x,y:c.y}];if(f==="x"?h=i.x===m?E:C:h=i.y===m?C:E,t===s){const $=Math.abs(e[f]-n[f]);if($<=a){const M=Math.min(a-1,a-$);i[f]===m?b[f]=(c[f]>e[f]?-1:1)*M:x[f]=(u[f]>n[f]?-1:1)*M}}if(t!==s){const $=f==="x"?"y":"x",M=i[f]===l[$],D=c[$]>u[$],A=c[$]<u[$];(i[f]===1&&(!M&&D||M&&A)||i[f]!==1&&(!M&&A||M&&D))&&(h=f==="x"?C:E)}const k={x:c.x+b.x,y:c.y+b.y},_={x:u.x+x.x,y:u.y+x.y},P=Math.max(Math.abs(k.x-h[0].x),Math.abs(_.x-h[0].x)),O=Math.max(Math.abs(k.y-h[0].y),Math.abs(_.y-h[0].y));P>=O?(p=(k.x+_.x)/2,y=h[0].y):(p=h[0].x,y=(k.y+_.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...h,{x:u.x+x.x,y:u.y+x.y},n],p,y,N,j]}function WF(e,t,n,s){const r=Math.min(sw(e,t)/2,sw(t,n)/2,s),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${a+r*u},${i}Q ${a},${i} ${a},${i+r*d}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${i+r*c}Q ${a},${i} ${a+r*l},${i}`}function Kg({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:a=le.Top,borderRadius:i=5,centerX:l,centerY:c,offset:u=20}){const[d,f,m,h,p]=XF({source:{x:e,y:t},sourcePosition:n,target:{x:s,y:r},targetPosition:a,center:{x:l,y:c},offset:u});return[d.reduce((b,x,w)=>{let v="";return w>0&&w<d.length-1?v=WF(d[w-1],x,d[w+1],i):v=`${w===0?"M":"L"}${x.x} ${x.y}`,b+=v,b},""),f,m,h,p]}const vm=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=le.Bottom,targetPosition:m=le.Top,markerEnd:h,markerStart:p,pathOptions:y,interactionWidth:b})=>{const[x,w,v]=Kg({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:s,targetPosition:m,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return L.createElement(Xc,{path:x,labelX:w,labelY:v,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:p,interactionWidth:b})});vm.displayName="SmoothStepEdge";const O0=g.memo(e=>{var t;return L.createElement(vm,{...e,pathOptions:g.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});O0.displayName="StepEdge";function KF({sourceX:e,sourceY:t,targetX:n,targetY:s}){const[r,a,i,l]=EE({sourceX:e,sourceY:t,targetX:n,targetY:s});return[`M ${e},${t}L ${n},${s}`,r,a,i,l]}const B0=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h})=>{const[p,y,b]=KF({sourceX:e,sourceY:t,targetX:n,targetY:s});return L.createElement(Xc,{path:p,labelX:y,labelY:b,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h})});B0.displayName="StraightEdge";function zu(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function rw({pos:e,x1:t,y1:n,x2:s,y2:r,c:a}){switch(e){case le.Left:return[t-zu(t-s,a),n];case le.Right:return[t+zu(s-t,a),n];case le.Top:return[t,n-zu(n-r,a)];case le.Bottom:return[t,n+zu(r-n,a)]}}function ME({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:a=le.Top,curvature:i=.25}){const[l,c]=rw({pos:n,x1:e,y1:t,x2:s,y2:r,c:i}),[u,d]=rw({pos:a,x1:s,y1:r,x2:e,y2:t,c:i}),[f,m,h,p]=_E({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${s},${r}`,f,m,h,p]}const Jd=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:r=le.Bottom,targetPosition:a=le.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,pathOptions:y,interactionWidth:b})=>{const[x,w,v]=ME({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:s,targetPosition:a,curvature:y==null?void 0:y.curvature});return L.createElement(Xc,{path:x,labelX:w,labelY:v,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:b})});Jd.displayName="BezierEdge";const I0=g.createContext(null),QF=I0.Provider;I0.Consumer;const JF=()=>g.useContext(I0),eV=e=>"id"in e&&"source"in e&&"target"in e,tV=({source:e,sourceHandle:t,target:n,targetHandle:s})=>`reactflow__edge-${e}${t||""}-${n}${s||""}`,Qg=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(s=>`${s}=${e[s]}`).join("&")}`,nV=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),H0=(e,t)=>{if(!e.source||!e.target)return t;let n;return eV(e)?n={...e}:n={...e,id:tV(e)},nV(n,t)?t:t.concat(n)},Jg=({x:e,y:t},[n,s,r],a,[i,l])=>{const c={x:(e-n)/r,y:(t-s)/r};return a?{x:i*Math.round(c.x/i),y:l*Math.round(c.y/l)}:c},TE=({x:e,y:t},[n,s,r])=>({x:e*r+n,y:t*r+s}),oi=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],s=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-s};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-s}:r}},U0=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((s,r)=>{const{x:a,y:i}=oi(r,t).positionAbsolute;return FF(s,$0({x:a,y:i,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return VF(n)},RE=(e,t,[n,s,r]=[0,0,1],a=!1,i=!1,l=[0,0])=>{const c={x:(t.x-n)/r,y:(t.y-s)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(d=>{const{width:f,height:m,selectable:h=!0,hidden:p=!1}=d;if(i&&!h||p)return!1;const{positionAbsolute:y}=oi(d,l),b={x:y.x,y:y.y,width:f||0,height:m||0},x=Xg(c,b),w=typeof f>"u"||typeof m>"u"||f===null||m===null,v=a&&x>0,N=(f||0)*(m||0);(w||v||x>=N||d.dragging)&&u.push(d)}),u},DE=(e,t)=>{const n=e.map(s=>s.id);return t.filter(s=>n.includes(s.source)||n.includes(s.target))},zE=(e,t,n,s,r,a=.1)=>{const i=t/(e.width*(1+a)),l=n/(e.height*(1+a)),c=Math.min(i,l),u=Ai(c,s,r),d=e.x+e.width/2,f=e.y+e.height/2,m=t/2-d*u,h=n/2-f*u;return{x:m,y:h,zoom:u}},Ea=(e,t=0)=>e.transition().duration(t);function aw(e,t,n,s){return(t[n]||[]).reduce((r,a)=>{var i,l;return`${e.id}-${a.id}-${n}`!==s&&r.push({id:a.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+a.y+a.height/2}),r},[])}function sV(e,t,n,s,r,a){const{x:i,y:l}=ea(e),u=t.elementsFromPoint(i,l).find(p=>p.classList.contains("react-flow__handle"));if(u){const p=u.getAttribute("data-nodeid");if(p){const y=F0(void 0,u),b=u.getAttribute("data-handleid"),x=a({nodeId:p,id:b,type:y});if(x){const w=r.find(v=>v.nodeId===p&&v.type===y&&v.id===b);return{handle:{id:b,type:y,nodeId:p,x:(w==null?void 0:w.x)||n.x,y:(w==null?void 0:w.y)||n.y},validHandleResult:x}}}}let d=[],f=1/0;if(r.forEach(p=>{const y=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);if(y<=s){const b=a(p);y<=f&&(y<f?d=[{handle:p,validHandleResult:b}]:y===f&&d.push({handle:p,validHandleResult:b}),f=y)}}),!d.length)return{handle:null,validHandleResult:LE()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:p})=>p.isValid),h=d.some(({handle:p})=>p.type==="target");return d.find(({handle:p,validHandleResult:y})=>h?p.type==="target":m?y.isValid:!0)||d[0]}const rV={source:null,target:null,sourceHandle:null,targetHandle:null},LE=()=>({handleDomNode:null,isValid:!1,connection:rV,endHandle:null});function $E(e,t,n,s,r,a,i){const l=r==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...LE(),handleDomNode:c};if(c){const d=F0(void 0,c),f=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),p=c.classList.contains("connectableend"),y={source:l?f:n,sourceHandle:l?m:s,target:l?n:f,targetHandle:l?s:m};u.connection=y,h&&p&&(t===Ka.Strict?l&&d==="source"||!l&&d==="target":f!==n||m!==s)&&(u.endHandle={nodeId:f,handleId:m,type:d},u.isValid=a(y))}return u}function aV({nodes:e,nodeId:t,handleId:n,handleType:s}){return e.reduce((r,a)=>{if(a[ct]){const{handleBounds:i}=a[ct];let l=[],c=[];i&&(l=aw(a,i,"source",`${t}-${n}-${s}`),c=aw(a,i,"target",`${t}-${n}-${s}`)),r.push(...l,...c)}return r},[])}function F0(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function ph(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function oV(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function PE({event:e,handleId:t,nodeId:n,onConnect:s,isTarget:r,getState:a,setState:i,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=SE(e.target),{connectionMode:f,domNode:m,autoPanOnConnect:h,connectionRadius:p,onConnectStart:y,panBy:b,getNodes:x,cancelConnection:w}=a();let v=0,N;const{x:j,y:S}=ea(e),C=d==null?void 0:d.elementFromPoint(j,S),E=F0(c,C),k=m==null?void 0:m.getBoundingClientRect();if(!k||!E)return;let _,P=ea(e,k),O=!1,$=null,M=!1,D=null;const A=aV({nodes:x(),nodeId:n,handleId:t,handleType:E}),z=()=>{if(!h)return;const[B,U]=jE(P,k);b({x:B,y:U}),v=requestAnimationFrame(z)};i({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:E,connectionStartHandle:{nodeId:n,handleId:t,type:E},connectionEndHandle:null}),y==null||y(e,{nodeId:n,handleId:t,handleType:E});function T(B){const{transform:U}=a();P=ea(B,k);const{handle:I,validHandleResult:q}=sV(B,d,Jg(P,U,!1,[1,1]),p,A,G=>$E(G,f,n,t,r?"target":"source",l,d));if(N=I,O||(z(),O=!0),D=q.handleDomNode,$=q.connection,M=q.isValid,i({connectionPosition:N&&M?TE({x:N.x,y:N.y},U):P,connectionStatus:oV(!!N,M),connectionEndHandle:q.endHandle}),!N&&!M&&!D)return ph(_);$.source!==$.target&&D&&(ph(_),_=D,D.classList.add("connecting","react-flow__handle-connecting"),D.classList.toggle("valid",M),D.classList.toggle("react-flow__handle-valid",M))}function R(B){var U,I;(N||D)&&$&&M&&(s==null||s($)),(I=(U=a()).onConnectEnd)==null||I.call(U,B),c&&(u==null||u(B)),ph(_),w(),cancelAnimationFrame(v),O=!1,M=!1,$=null,D=null,d.removeEventListener("mousemove",T),d.removeEventListener("mouseup",R),d.removeEventListener("touchmove",T),d.removeEventListener("touchend",R)}d.addEventListener("mousemove",T),d.addEventListener("mouseup",R),d.addEventListener("touchmove",T),d.addEventListener("touchend",R)}const ow=()=>!0,iV=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),lV=(e,t,n)=>s=>{const{connectionStartHandle:r,connectionEndHandle:a,connectionClickStartHandle:i}=s;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},OE=g.forwardRef(({type:e="source",position:t=le.Top,isValidConnection:n,isConnectable:s=!0,isConnectableStart:r=!0,isConnectableEnd:a=!0,id:i,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...m},h)=>{var k,_;const p=i||null,y=e==="target",b=zt(),x=JF(),{connectOnClick:w,noPanClassName:v}=at(iV,ln),{connecting:N,clickConnecting:j}=at(lV(x,p,e),ln);x||(_=(k=b.getState()).onError)==null||_.call(k,"010",vr.error010());const S=P=>{const{defaultEdgeOptions:O,onConnect:$,hasDefaultEdges:M}=b.getState(),D={...O,...P};if(M){const{edges:A,setEdges:z}=b.getState();z(H0(D,A))}$==null||$(D),l==null||l(D)},C=P=>{if(!x)return;const O=kE(P);r&&(O&&P.button===0||!O)&&PE({event:P,handleId:p,nodeId:x,onConnect:S,isTarget:y,getState:b.getState,setState:b.setState,isValidConnection:n||b.getState().isValidConnection||ow}),O?d==null||d(P):f==null||f(P)},E=P=>{const{onClickConnectStart:O,onClickConnectEnd:$,connectionClickStartHandle:M,connectionMode:D,isValidConnection:A}=b.getState();if(!x||!M&&!r)return;if(!M){O==null||O(P,{nodeId:x,handleId:p,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:x,type:e,handleId:p}});return}const z=SE(P.target),T=n||A||ow,{connection:R,isValid:B}=$E({nodeId:x,id:p,type:e},D,M.nodeId,M.handleId||null,M.type,T,z);B&&S(R),$==null||$(P),b.setState({connectionClickStartHandle:null})};return L.createElement("div",{"data-handleid":p,"data-nodeid":x,"data-handlepos":t,"data-id":`${x}-${p}-${e}`,className:en(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",v,u,{source:!y,target:y,connectable:s,connectablestart:r,connectableend:a,connecting:j,connectionindicator:s&&(r&&!N||a&&N)}]),onMouseDown:C,onTouchStart:C,onClick:w?E:void 0,ref:h,...m},c)});OE.displayName="Handle";var Mi=g.memo(OE);const BE=({data:e,isConnectable:t,targetPosition:n=le.Top,sourcePosition:s=le.Bottom})=>L.createElement(L.Fragment,null,L.createElement(Mi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,L.createElement(Mi,{type:"source",position:s,isConnectable:t}));BE.displayName="DefaultNode";var ep=g.memo(BE);const IE=({data:e,isConnectable:t,sourcePosition:n=le.Bottom})=>L.createElement(L.Fragment,null,e==null?void 0:e.label,L.createElement(Mi,{type:"source",position:n,isConnectable:t}));IE.displayName="InputNode";var HE=g.memo(IE);const UE=({data:e,isConnectable:t,targetPosition:n=le.Top})=>L.createElement(L.Fragment,null,L.createElement(Mi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);UE.displayName="OutputNode";var FE=g.memo(UE);const V0=()=>null;V0.displayName="GroupNode";const cV=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Lu=e=>e.id;function uV(e,t){return ln(e.selectedNodes.map(Lu),t.selectedNodes.map(Lu))&&ln(e.selectedEdges.map(Lu),t.selectedEdges.map(Lu))}const VE=g.memo(({onSelectionChange:e})=>{const t=zt(),{selectedNodes:n,selectedEdges:s}=at(cV,uV);return g.useEffect(()=>{const r={nodes:n,edges:s};e==null||e(r),t.getState().onSelectionChange.forEach(a=>a(r))},[n,s,e]),null});VE.displayName="SelectionListener";const dV=e=>!!e.onSelectionChange;function fV({onSelectionChange:e}){const t=at(dV);return e||t?L.createElement(VE,{onSelectionChange:e}):null}const mV=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Mo(e,t){g.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ce(e,t,n){g.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const hV=({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:r,onConnectStart:a,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:m,edgesUpdatable:h,elevateNodesOnSelect:p,minZoom:y,maxZoom:b,nodeExtent:x,onNodesChange:w,onEdgesChange:v,elementsSelectable:N,connectionMode:j,snapGrid:S,snapToGrid:C,translateExtent:E,connectOnClick:k,defaultEdgeOptions:_,fitView:P,fitViewOptions:O,onNodesDelete:$,onEdgesDelete:M,onNodeDrag:D,onNodeDragStart:A,onNodeDragStop:z,onSelectionDrag:T,onSelectionDragStart:R,onSelectionDragStop:B,noPanClassName:U,nodeOrigin:I,rfId:q,autoPanOnConnect:G,autoPanOnNodeDrag:J,onError:ie,connectionRadius:ee,isValidConnection:pe,nodeDragThreshold:fe})=>{const{setNodes:ve,setEdges:F,setDefaultNodesAndEdges:Y,setMinZoom:Q,setMaxZoom:W,setTranslateExtent:se,setNodeExtent:ye,reset:ue}=at(mV,ln),ne=zt();return g.useEffect(()=>{const Re=s==null?void 0:s.map(pt=>({...pt,..._}));return Y(n,Re),()=>{ue()}},[]),Ce("defaultEdgeOptions",_,ne.setState),Ce("connectionMode",j,ne.setState),Ce("onConnect",r,ne.setState),Ce("onConnectStart",a,ne.setState),Ce("onConnectEnd",i,ne.setState),Ce("onClickConnectStart",l,ne.setState),Ce("onClickConnectEnd",c,ne.setState),Ce("nodesDraggable",u,ne.setState),Ce("nodesConnectable",d,ne.setState),Ce("nodesFocusable",f,ne.setState),Ce("edgesFocusable",m,ne.setState),Ce("edgesUpdatable",h,ne.setState),Ce("elementsSelectable",N,ne.setState),Ce("elevateNodesOnSelect",p,ne.setState),Ce("snapToGrid",C,ne.setState),Ce("snapGrid",S,ne.setState),Ce("onNodesChange",w,ne.setState),Ce("onEdgesChange",v,ne.setState),Ce("connectOnClick",k,ne.setState),Ce("fitViewOnInit",P,ne.setState),Ce("fitViewOnInitOptions",O,ne.setState),Ce("onNodesDelete",$,ne.setState),Ce("onEdgesDelete",M,ne.setState),Ce("onNodeDrag",D,ne.setState),Ce("onNodeDragStart",A,ne.setState),Ce("onNodeDragStop",z,ne.setState),Ce("onSelectionDrag",T,ne.setState),Ce("onSelectionDragStart",R,ne.setState),Ce("onSelectionDragStop",B,ne.setState),Ce("noPanClassName",U,ne.setState),Ce("nodeOrigin",I,ne.setState),Ce("rfId",q,ne.setState),Ce("autoPanOnConnect",G,ne.setState),Ce("autoPanOnNodeDrag",J,ne.setState),Ce("onError",ie,ne.setState),Ce("connectionRadius",ee,ne.setState),Ce("isValidConnection",pe,ne.setState),Ce("nodeDragThreshold",fe,ne.setState),Mo(e,ve),Mo(t,F),Mo(y,Q),Mo(b,W),Mo(E,se),Mo(x,ye),null},iw={display:"none"},gV={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},qE="react-flow__node-desc",ZE="react-flow__edge-desc",pV="react-flow__aria-live",xV=e=>e.ariaLiveMessage;function yV({rfId:e}){const t=at(xV);return L.createElement("div",{id:`${pV}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:gV},t)}function vV({rfId:e,disableKeyboardA11y:t}){return L.createElement(L.Fragment,null,L.createElement("div",{id:`${qE}-${e}`,style:iw},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),L.createElement("div",{id:`${ZE}-${e}`,style:iw},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&L.createElement(yV,{rfId:e}))}var pc=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,s]=g.useState(!1),r=g.useRef(!1),a=g.useRef(new Set([])),[i,l]=g.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,m)=>f.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return g.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Wg(h))return!1;const y=cw(h.code,l);a.current.add(h[y]),lw(i,a.current,!1)&&(h.preventDefault(),s(!0))},f=h=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&Wg(h))return!1;const y=cw(h.code,l);lw(i,a.current,!0)?(s(!1),a.current.clear()):a.current.delete(h[y]),h.key==="Meta"&&a.current.clear(),r.current=!1},m=()=>{a.current.clear(),s(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",m)}}},[e,s]),n};function lw(e,t,n){return e.filter(s=>n||s.length===t.size).some(s=>s.every(r=>t.has(r)))}function cw(e,t){return t.includes(e)?"code":"key"}function GE(e,t,n,s){var l,c;const r=e.parentNode||e.parentId;if(!r)return n;const a=t.get(r),i=oi(a,s);return GE(a,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((l=a[ct])==null?void 0:l.z)??0)>(n.z??0)?((c=a[ct])==null?void 0:c.z)??0:n.z??0},s)}function YE(e,t,n){e.forEach(s=>{var a;const r=s.parentNode||s.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[s.id]){const{x:i,y:l,z:c}=GE(s,e,{...s.position,z:((a=s[ct])==null?void 0:a.z)??0},t);s.positionAbsolute={x:i,y:l},s[ct].z=c,n!=null&&n[s.id]&&(s[ct].isParent=!0)}})}function xh(e,t,n,s){const r=new Map,a={},i=s?1e3:0;return e.forEach(l=>{var h;const c=(In(l.zIndex)?l.zIndex:0)+(l.selected?i:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(a[f]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,ct,{enumerable:!1,value:{handleBounds:m||(h=u==null?void 0:u[ct])==null?void 0:h.handleBounds,z:c}}),r.set(l.id,d)}),YE(r,n,a),r}function XE(e,t={}){const{getNodes:n,width:s,height:r,minZoom:a,maxZoom:i,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),m=t.initial&&!u&&d;if(l&&c&&(m||!t.initial)){const p=n().filter(b=>{var w;const x=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(w=t.nodes)!=null&&w.length?x&&t.nodes.some(v=>v.id===b.id):x}),y=p.every(b=>b.width&&b.height);if(p.length>0&&y){const b=U0(p,f),{x,y:w,zoom:v}=zE(b,s,r,t.minZoom??a,t.maxZoom??i,t.padding??.1),N=Jr.translate(x,w).scale(v);return typeof t.duration=="number"&&t.duration>0?l.transform(Ea(c,t.duration),N):l.transform(c,N),!0}}return!1}function bV(e,t){return e.forEach(n=>{const s=t.get(n.id);s&&t.set(s.id,{...s,[ct]:s[ct],selected:n.selected})}),new Map(t)}function wV(e,t){return t.map(n=>{const s=e.find(r=>r.id===n.id);return s&&(n.selected=s.selected),n})}function $u({changedNodes:e,changedEdges:t,get:n,set:s}){const{nodeInternals:r,edges:a,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&s({nodeInternals:bV(e,r)}),i==null||i(e)),t!=null&&t.length&&(u&&s({edges:wV(t,a)}),l==null||l(t))}const To=()=>{},NV={zoomIn:To,zoomOut:To,zoomTo:To,getZoom:()=>1,setViewport:To,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:To,fitBounds:To,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},jV=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),SV=()=>{const e=zt(),{d3Zoom:t,d3Selection:n}=at(jV,ln);return g.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(Ea(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(Ea(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,a)=>t.scaleTo(Ea(n,a==null?void 0:a.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,a)=>{const[i,l,c]=e.getState().transform,u=Jr.translate(r.x??i,r.y??l).scale(r.zoom??c);t.transform(Ea(n,a==null?void 0:a.duration),u)},getViewport:()=>{const[r,a,i]=e.getState().transform;return{x:r,y:a,zoom:i}},fitView:r=>XE(e.getState,r),setCenter:(r,a,i)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=l/2-r*d,m=c/2-a*d,h=Jr.translate(f,m).scale(d);t.transform(Ea(n,i==null?void 0:i.duration),h)},fitBounds:(r,a)=>{const{width:i,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:m}=zE(r,i,l,c,u,(a==null?void 0:a.padding)??.1),h=Jr.translate(d,f).scale(m);t.transform(Ea(n,a==null?void 0:a.duration),h)},project:r=>{const{transform:a,snapToGrid:i,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Jg(r,a,i,l)},screenToFlowPosition:r=>{const{transform:a,snapToGrid:i,snapGrid:l,domNode:c}=e.getState();if(!c)return r;const{x:u,y:d}=c.getBoundingClientRect(),f={x:r.x-u,y:r.y-d};return Jg(f,a,i,l)},flowToScreenPosition:r=>{const{transform:a,domNode:i}=e.getState();if(!i)return r;const{x:l,y:c}=i.getBoundingClientRect(),u=TE(r,a);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:NV,[t,n])};function q0(){const e=SV(),t=zt(),n=g.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),s=g.useCallback(y=>t.getState().nodeInternals.get(y),[]),r=g.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(b=>({...b}))},[]),a=g.useCallback(y=>{const{edges:b=[]}=t.getState();return b.find(x=>x.id===y)},[]),i=g.useCallback(y=>{const{getNodes:b,setNodes:x,hasDefaultNodes:w,onNodesChange:v}=t.getState(),N=b(),j=typeof y=="function"?y(N):y;if(w)x(j);else if(v){const S=j.length===0?N.map(C=>({type:"remove",id:C.id})):j.map(C=>({item:C,type:"reset"}));v(S)}},[]),l=g.useCallback(y=>{const{edges:b=[],setEdges:x,hasDefaultEdges:w,onEdgesChange:v}=t.getState(),N=typeof y=="function"?y(b):y;if(w)x(N);else if(v){const j=N.length===0?b.map(S=>({type:"remove",id:S.id})):N.map(S=>({item:S,type:"reset"}));v(j)}},[]),c=g.useCallback(y=>{const b=Array.isArray(y)?y:[y],{getNodes:x,setNodes:w,hasDefaultNodes:v,onNodesChange:N}=t.getState();if(v){const S=[...x(),...b];w(S)}else if(N){const j=b.map(S=>({item:S,type:"add"}));N(j)}},[]),u=g.useCallback(y=>{const b=Array.isArray(y)?y:[y],{edges:x=[],setEdges:w,hasDefaultEdges:v,onEdgesChange:N}=t.getState();if(v)w([...x,...b]);else if(N){const j=b.map(S=>({item:S,type:"add"}));N(j)}},[]),d=g.useCallback(()=>{const{getNodes:y,edges:b=[],transform:x}=t.getState(),[w,v,N]=x;return{nodes:y().map(j=>({...j})),edges:b.map(j=>({...j})),viewport:{x:w,y:v,zoom:N}}},[]),f=g.useCallback(({nodes:y,edges:b})=>{const{nodeInternals:x,getNodes:w,edges:v,hasDefaultNodes:N,hasDefaultEdges:j,onNodesDelete:S,onEdgesDelete:C,onNodesChange:E,onEdgesChange:k}=t.getState(),_=(y||[]).map(D=>D.id),P=(b||[]).map(D=>D.id),O=w().reduce((D,A)=>{const z=A.parentNode||A.parentId,T=!_.includes(A.id)&&z&&D.find(B=>B.id===z);return(typeof A.deletable=="boolean"?A.deletable:!0)&&(_.includes(A.id)||T)&&D.push(A),D},[]),$=v.filter(D=>typeof D.deletable=="boolean"?D.deletable:!0),M=$.filter(D=>P.includes(D.id));if(O||M){const D=DE(O,$),A=[...M,...D],z=A.reduce((T,R)=>(T.includes(R.id)||T.push(R.id),T),[]);if((j||N)&&(j&&t.setState({edges:v.filter(T=>!z.includes(T.id))}),N&&(O.forEach(T=>{x.delete(T.id)}),t.setState({nodeInternals:new Map(x)}))),z.length>0&&(C==null||C(A),k&&k(z.map(T=>({id:T,type:"remove"})))),O.length>0&&(S==null||S(O),E)){const T=O.map(R=>({id:R.id,type:"remove"}));E(T)}}},[]),m=g.useCallback(y=>{const b=qF(y),x=b?null:t.getState().nodeInternals.get(y.id);return!b&&!x?[null,null,b]:[b?y:ew(x),x,b]},[]),h=g.useCallback((y,b=!0,x)=>{const[w,v,N]=m(y);return w?(x||t.getState().getNodes()).filter(j=>{if(!N&&(j.id===v.id||!j.positionAbsolute))return!1;const S=ew(j),C=Xg(S,w);return b&&C>0||C>=w.width*w.height}):[]},[]),p=g.useCallback((y,b,x=!0)=>{const[w]=m(y);if(!w)return!1;const v=Xg(w,b);return x&&v>0||v>=w.width*w.height},[]);return g.useMemo(()=>({...e,getNodes:n,getNode:s,getEdges:r,getEdge:a,setNodes:i,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:p}),[e,n,s,r,a,i,l,c,u,d,f,h,p])}const CV={actInsideInputWithModifier:!1};var kV=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=zt(),{deleteElements:s}=q0(),r=pc(e,CV),a=pc(t);g.useEffect(()=>{if(r){const{edges:i,getNodes:l}=n.getState(),c=l().filter(d=>d.selected),u=i.filter(d=>d.selected);s({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),g.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function EV(e){const t=zt();g.useEffect(()=>{let n;const s=()=>{var a,i;if(!e.current)return;const r=z0(e.current);(r.height===0||r.width===0)&&((i=(a=t.getState()).onError)==null||i.call(a,"004",vr.error004())),t.setState({width:r.width||500,height:r.height||500})};return s(),window.addEventListener("resize",s),e.current&&(n=new ResizeObserver(()=>s()),n.observe(e.current)),()=>{window.removeEventListener("resize",s),n&&e.current&&n.unobserve(e.current)}},[])}const Z0={position:"absolute",width:"100%",height:"100%",top:0,left:0},_V=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Pu=e=>({x:e.x,y:e.y,zoom:e.k}),Ro=(e,t)=>e.target.closest(`.${t}`),uw=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),dw=e=>{const t=e.ctrlKey&&Kd()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},AV=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),MV=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:s,zoomOnScroll:r=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Pa.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:m,translateExtent:h,minZoom:p,maxZoom:y,zoomActivationKeyCode:b,preventScrolling:x=!0,children:w,noWheelClassName:v,noPanClassName:N})=>{const j=g.useRef(),S=zt(),C=g.useRef(!1),E=g.useRef(!1),k=g.useRef(null),_=g.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:O,d3ZoomHandler:$,userSelectionActive:M}=at(AV,ln),D=pc(b),A=g.useRef(0),z=g.useRef(!1),T=g.useRef();return EV(k),g.useEffect(()=>{if(k.current){const R=k.current.getBoundingClientRect(),B=PF().scaleExtent([p,y]).translateExtent(h),U=ts(k.current).call(B),I=Jr.translate(m.x,m.y).scale(Ai(m.zoom,p,y)),q=[[0,0],[R.width,R.height]],G=B.constrain()(I,q,h);B.transform(U,G),B.wheelDelta(dw),S.setState({d3Zoom:B,d3Selection:U,d3ZoomHandler:U.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:k.current.closest(".react-flow")})}},[]),g.useEffect(()=>{O&&P&&(i&&!D&&!M?O.on("wheel.zoom",R=>{if(Ro(R,v))return!1;R.preventDefault(),R.stopImmediatePropagation();const B=O.property("__zoom").k||1;if(R.ctrlKey&&a){const pe=vs(R),fe=dw(R),ve=B*Math.pow(2,fe);P.scaleTo(O,ve,pe,R);return}const U=R.deltaMode===1?20:1;let I=c===Pa.Vertical?0:R.deltaX*U,q=c===Pa.Horizontal?0:R.deltaY*U;!Kd()&&R.shiftKey&&c!==Pa.Vertical&&(I=R.deltaY*U,q=0),P.translateBy(O,-(I/B)*l,-(q/B)*l,{internal:!0});const G=Pu(O.property("__zoom")),{onViewportChangeStart:J,onViewportChange:ie,onViewportChangeEnd:ee}=S.getState();clearTimeout(T.current),z.current||(z.current=!0,t==null||t(R,G),J==null||J(G)),z.current&&(e==null||e(R,G),ie==null||ie(G),T.current=setTimeout(()=>{n==null||n(R,G),ee==null||ee(G),z.current=!1},150))},{passive:!1}):typeof $<"u"&&O.on("wheel.zoom",function(R,B){if(!x&&R.type==="wheel"&&!R.ctrlKey||Ro(R,v))return null;R.preventDefault(),$.call(this,R,B)},{passive:!1}))},[M,i,c,O,P,$,D,a,x,v,t,e,n]),g.useEffect(()=>{P&&P.on("start",R=>{var I,q;if(!R.sourceEvent||R.sourceEvent.internal)return null;A.current=(I=R.sourceEvent)==null?void 0:I.button;const{onViewportChangeStart:B}=S.getState(),U=Pu(R.transform);C.current=!0,_.current=U,((q=R.sourceEvent)==null?void 0:q.type)==="mousedown"&&S.setState({paneDragging:!0}),B==null||B(U),t==null||t(R.sourceEvent,U)})},[P,t]),g.useEffect(()=>{P&&(M&&!C.current?P.on("zoom",null):M||P.on("zoom",R=>{var U;const{onViewportChange:B}=S.getState();if(S.setState({transform:[R.transform.x,R.transform.y,R.transform.k]}),E.current=!!(s&&uw(f,A.current??0)),(e||B)&&!((U=R.sourceEvent)!=null&&U.internal)){const I=Pu(R.transform);B==null||B(I),e==null||e(R.sourceEvent,I)}}))},[M,P,e,f,s]),g.useEffect(()=>{P&&P.on("end",R=>{if(!R.sourceEvent||R.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=S.getState();if(C.current=!1,S.setState({paneDragging:!1}),s&&uw(f,A.current??0)&&!E.current&&s(R.sourceEvent),E.current=!1,(n||B)&&_V(_.current,R.transform)){const U=Pu(R.transform);_.current=U,clearTimeout(j.current),j.current=setTimeout(()=>{B==null||B(U),n==null||n(R.sourceEvent,U)},i?150:0)}})},[P,i,f,n,s]),g.useEffect(()=>{P&&P.filter(R=>{const B=D||r,U=a&&R.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&R.button===1&&R.type==="mousedown"&&(Ro(R,"react-flow__node")||Ro(R,"react-flow__edge")))return!0;if(!f&&!B&&!i&&!u&&!a||M||!u&&R.type==="dblclick"||Ro(R,v)&&R.type==="wheel"||Ro(R,N)&&(R.type!=="wheel"||i&&R.type==="wheel"&&!D)||!a&&R.ctrlKey&&R.type==="wheel"||!B&&!i&&!U&&R.type==="wheel"||!f&&(R.type==="mousedown"||R.type==="touchstart")||Array.isArray(f)&&!f.includes(R.button)&&R.type==="mousedown")return!1;const I=Array.isArray(f)&&f.includes(R.button)||!R.button||R.button<=1;return(!R.ctrlKey||R.type==="wheel")&&I})},[M,P,r,a,i,u,f,d,D]),L.createElement("div",{className:"react-flow__renderer",ref:k,style:Z0},w)},TV=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function RV(){const{userSelectionActive:e,userSelectionRect:t}=at(TV,ln);return e&&t?L.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function fw(e,t){const n=t.parentNode||t.parentId,s=e.find(r=>r.id===n);if(s){const r=t.position.x+t.width-s.width,a=t.position.y+t.height-s.height;if(r>0||a>0||t.position.x<0||t.position.y<0){if(s.style={...s.style},s.style.width=s.style.width??s.width,s.style.height=s.style.height??s.height,r>0&&(s.style.width+=r),a>0&&(s.style.height+=a),t.position.x<0){const i=Math.abs(t.position.x);s.position.x=s.position.x-i,s.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);s.position.y=s.position.y-i,s.style.height+=i,t.position.y=0}s.width=s.style.width,s.height=s.style.height}}}function WE(e,t){if(e.some(s=>s.type==="reset"))return e.filter(s=>s.type==="reset").map(s=>s.item);const n=e.filter(s=>s.type==="add").map(s=>s.item);return t.reduce((s,r)=>{const a=e.filter(l=>l.id===r.id);if(a.length===0)return s.push(r),s;const i={...r};for(const l of a)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&fw(s,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&fw(s,i);break}case"remove":return s}return s.push(i),s},n)}function KE(e,t){return WE(e,t)}function DV(e,t){return WE(e,t)}const Or=(e,t)=>({id:e,type:"select",selected:t});function Ho(e,t){return e.reduce((n,s)=>{const r=t.includes(s.id);return!s.selected&&r?(s.selected=!0,n.push(Or(s.id,!0))):s.selected&&!r&&(s.selected=!1,n.push(Or(s.id,!1))),n},[])}const yh=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},zV=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),QE=g.memo(({isSelecting:e,selectionMode:t=gc.Full,panOnDrag:n,onSelectionStart:s,onSelectionEnd:r,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const m=g.useRef(null),h=zt(),p=g.useRef(0),y=g.useRef(0),b=g.useRef(),{userSelectionActive:x,elementsSelectable:w,dragging:v}=at(zV,ln),N=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,y.current=0},j=$=>{a==null||a($),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},S=$=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){$.preventDefault();return}i==null||i($)},C=l?$=>l($):void 0,E=$=>{const{resetSelectedElements:M,domNode:D}=h.getState();if(b.current=D==null?void 0:D.getBoundingClientRect(),!w||!e||$.button!==0||$.target!==m.current||!b.current)return;const{x:A,y:z}=ea($,b.current);M(),h.setState({userSelectionRect:{width:0,height:0,startX:A,startY:z,x:A,y:z}}),s==null||s($)},k=$=>{const{userSelectionRect:M,nodeInternals:D,edges:A,transform:z,onNodesChange:T,onEdgesChange:R,nodeOrigin:B,getNodes:U}=h.getState();if(!e||!b.current||!M)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const I=ea($,b.current),q=M.startX??0,G=M.startY??0,J={...M,x:I.x<q?I.x:q,y:I.y<G?I.y:G,width:Math.abs(I.x-q),height:Math.abs(I.y-G)},ie=U(),ee=RE(D,J,z,t===gc.Partial,!0,B),pe=DE(ee,A).map(ve=>ve.id),fe=ee.map(ve=>ve.id);if(p.current!==fe.length){p.current=fe.length;const ve=Ho(ie,fe);ve.length&&(T==null||T(ve))}if(y.current!==pe.length){y.current=pe.length;const ve=Ho(A,pe);ve.length&&(R==null||R(ve))}h.setState({userSelectionRect:J})},_=$=>{if($.button!==0)return;const{userSelectionRect:M}=h.getState();!x&&M&&$.target===m.current&&(j==null||j($)),h.setState({nodesSelectionActive:p.current>0}),N(),r==null||r($)},P=$=>{x&&(h.setState({nodesSelectionActive:p.current>0}),r==null||r($)),N()},O=w&&(e||x);return L.createElement("div",{className:en(["react-flow__pane",{dragging:v,selection:e}]),onClick:O?void 0:yh(j,m),onContextMenu:yh(S,m),onWheel:yh(C,m),onMouseEnter:O?void 0:c,onMouseDown:O?E:void 0,onMouseMove:O?k:u,onMouseUp:O?_:void 0,onMouseLeave:O?P:d,ref:m,style:Z0},f,L.createElement(RV,null))});QE.displayName="Pane";function JE(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const s=t.get(n);return s?s.selected?!0:JE(s,t):!1}function mw(e,t,n){let s=e;do{if(s!=null&&s.matches(t))return!0;if(s===n.current)return!1;s=s.parentElement}while(s);return!1}function LV(e,t,n,s){return Array.from(e.values()).filter(r=>(r.selected||r.id===s)&&(!r.parentNode||r.parentId||!JE(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var a,i;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=r.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((i=r.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function $V(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function e_(e,t,n,s,r=[0,0],a){const i=$V(e,e.extent||s);let l=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:m,y:h}=oi(f,r).positionAbsolute;l=f&&In(m)&&In(h)&&In(f.width)&&In(f.height)?[[m+e.width*r[0],h+e.height*r[1]],[m+f.width-e.width+e.width*r[0],h+f.height-e.height+e.height*r[1]]]:l}else a==null||a("005",vr.error005()),l=i;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:m,y:h}=oi(f,r).positionAbsolute;l=[[e.extent[0][0]+m,e.extent[0][1]+h],[e.extent[1][0]+m,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const f=n.get(c);u=oi(f,r).positionAbsolute}const d=l&&l!=="parent"?L0(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function vh({nodeId:e,dragItems:t,nodeInternals:n}){const s=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?s.find(r=>r.id===e):s[0],s]}const hw=(e,t,n,s)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const a=Array.from(r),i=t.getBoundingClientRect(),l={x:i.width*s[0],y:i.height*s[1]};return a.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-l.x)/n,y:(u.top-i.top-l.y)/n,...z0(c)}})};function xl(e,t,n){return n===void 0?n:s=>{const r=t().nodeInternals.get(e);r&&n(s,{...r})}}function tp({id:e,store:t,unselect:n=!1,nodeRef:s}){const{addSelectedNodes:r,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",vr.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=s==null?void 0:s.current)==null?void 0:d.blur()})):r([e])}function PV(){const e=zt();return g.useCallback(({sourceEvent:n})=>{const{transform:s,snapGrid:r,snapToGrid:a}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,c={x:(i-s[0])/s[2],y:(l-s[1])/s[2]};return{xSnapped:a?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:a?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function bh(e){return(t,n,s)=>e==null?void 0:e(t,s)}function t_({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:s,nodeId:r,isSelectable:a,selectNodesOnDrag:i}){const l=zt(),[c,u]=g.useState(!1),d=g.useRef([]),f=g.useRef({x:null,y:null}),m=g.useRef(0),h=g.useRef(null),p=g.useRef({x:0,y:0}),y=g.useRef(null),b=g.useRef(!1),x=g.useRef(!1),w=g.useRef(!1),v=PV();return g.useEffect(()=>{if(e!=null&&e.current){const N=ts(e.current),j=({x:E,y:k})=>{const{nodeInternals:_,onNodeDrag:P,onSelectionDrag:O,updateNodePositions:$,nodeExtent:M,snapGrid:D,snapToGrid:A,nodeOrigin:z,onError:T}=l.getState();f.current={x:E,y:k};let R=!1,B={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&M){const I=U0(d.current,z);B=$0(I)}if(d.current=d.current.map(I=>{const q={x:E-I.distance.x,y:k-I.distance.y};A&&(q.x=D[0]*Math.round(q.x/D[0]),q.y=D[1]*Math.round(q.y/D[1]));const G=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];d.current.length>1&&M&&!I.extent&&(G[0][0]=I.positionAbsolute.x-B.x+M[0][0],G[1][0]=I.positionAbsolute.x+(I.width??0)-B.x2+M[1][0],G[0][1]=I.positionAbsolute.y-B.y+M[0][1],G[1][1]=I.positionAbsolute.y+(I.height??0)-B.y2+M[1][1]);const J=e_(I,q,_,G,z,T);return R=R||I.position.x!==J.position.x||I.position.y!==J.position.y,I.position=J.position,I.positionAbsolute=J.positionAbsolute,I}),!R)return;$(d.current,!0,!0),u(!0);const U=r?P:bh(O);if(U&&y.current){const[I,q]=vh({nodeId:r,dragItems:d.current,nodeInternals:_});U(y.current,I,q)}},S=()=>{if(!h.current)return;const[E,k]=jE(p.current,h.current);if(E!==0||k!==0){const{transform:_,panBy:P}=l.getState();f.current.x=(f.current.x??0)-E/_[2],f.current.y=(f.current.y??0)-k/_[2],P({x:E,y:k})&&j(f.current)}m.current=requestAnimationFrame(S)},C=E=>{var z;const{nodeInternals:k,multiSelectionActive:_,nodesDraggable:P,unselectNodesAndEdges:O,onNodeDragStart:$,onSelectionDragStart:M}=l.getState();x.current=!0;const D=r?$:bh(M);(!i||!a)&&!_&&r&&((z=k.get(r))!=null&&z.selected||O()),r&&a&&i&&tp({id:r,store:l,nodeRef:e});const A=v(E);if(f.current=A,d.current=LV(k,P,A,r),D&&d.current){const[T,R]=vh({nodeId:r,dragItems:d.current,nodeInternals:k});D(E.sourceEvent,T,R)}};if(t)N.on(".drag",null);else{const E=GH().on("start",k=>{const{domNode:_,nodeDragThreshold:P}=l.getState();P===0&&C(k),w.current=!1;const O=v(k);f.current=O,h.current=(_==null?void 0:_.getBoundingClientRect())||null,p.current=ea(k.sourceEvent,h.current)}).on("drag",k=>{var $,M;const _=v(k),{autoPanOnNodeDrag:P,nodeDragThreshold:O}=l.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!b.current&&x.current&&P&&(b.current=!0,S()),!x.current){const D=_.xSnapped-((($=f==null?void 0:f.current)==null?void 0:$.x)??0),A=_.ySnapped-(((M=f==null?void 0:f.current)==null?void 0:M.y)??0);Math.sqrt(D*D+A*A)>O&&C(k)}(f.current.x!==_.xSnapped||f.current.y!==_.ySnapped)&&d.current&&x.current&&(y.current=k.sourceEvent,p.current=ea(k.sourceEvent,h.current),j(_))}}).on("end",k=>{if(!(!x.current||w.current)&&(u(!1),b.current=!1,x.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:_,nodeInternals:P,onNodeDragStop:O,onSelectionDragStop:$}=l.getState(),M=r?O:bh($);if(_(d.current,!1,!1),M){const[D,A]=vh({nodeId:r,dragItems:d.current,nodeInternals:P});M(k.sourceEvent,D,A)}}}).filter(k=>{const _=k.target;return!k.button&&(!n||!mw(_,`.${n}`,e))&&(!s||mw(_,s,e))});return N.call(E),()=>{N.on(".drag",null)}}}},[e,t,n,s,a,l,r,i,v]),c}function n_(){const e=zt();return g.useCallback(n=>{const{nodeInternals:s,nodeExtent:r,updateNodePositions:a,getNodes:i,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),m=l?c[0]:5,h=l?c[1]:5,p=n.isShiftPressed?4:1,y=n.x*m*p,b=n.y*h*p,x=f.map(w=>{if(w.positionAbsolute){const v={x:w.positionAbsolute.x+y,y:w.positionAbsolute.y+b};l&&(v.x=c[0]*Math.round(v.x/c[0]),v.y=c[1]*Math.round(v.y/c[1]));const{positionAbsolute:N,position:j}=e_(w,v,s,r,void 0,u);w.position=j,w.positionAbsolute=N}return w});a(x,!0,!1)},[])}const ii={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var yl=e=>{const t=({id:n,type:s,data:r,xPos:a,yPos:i,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:h,onContextMenu:p,onDoubleClick:y,style:b,className:x,isDraggable:w,isSelectable:v,isConnectable:N,isFocusable:j,selectNodesOnDrag:S,sourcePosition:C,targetPosition:E,hidden:k,resizeObserver:_,dragHandle:P,zIndex:O,isParent:$,noDragClassName:M,noPanClassName:D,initialized:A,disableKeyboardA11y:z,ariaLabel:T,rfId:R,hasHandleBounds:B})=>{const U=zt(),I=g.useRef(null),q=g.useRef(null),G=g.useRef(C),J=g.useRef(E),ie=g.useRef(s),ee=v||w||d||f||m||h,pe=n_(),fe=xl(n,U.getState,f),ve=xl(n,U.getState,m),F=xl(n,U.getState,h),Y=xl(n,U.getState,p),Q=xl(n,U.getState,y),W=ue=>{const{nodeDragThreshold:ne}=U.getState();if(v&&(!S||!w||ne>0)&&tp({id:n,store:U,nodeRef:I}),d){const Re=U.getState().nodeInternals.get(n);Re&&d(ue,{...Re})}},se=ue=>{if(!Wg(ue)&&!z)if(CE.includes(ue.key)&&v){const ne=ue.key==="Escape";tp({id:n,store:U,unselect:ne,nodeRef:I})}else w&&u&&Object.prototype.hasOwnProperty.call(ii,ue.key)&&(U.setState({ariaLiveMessage:`Moved selected node ${ue.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),pe({x:ii[ue.key].x,y:ii[ue.key].y,isShiftPressed:ue.shiftKey}))};g.useEffect(()=>()=>{q.current&&(_==null||_.unobserve(q.current),q.current=null)},[]),g.useEffect(()=>{if(I.current&&!k){const ue=I.current;(!A||!B||q.current!==ue)&&(q.current&&(_==null||_.unobserve(q.current)),_==null||_.observe(ue),q.current=ue)}},[k,A,B]),g.useEffect(()=>{const ue=ie.current!==s,ne=G.current!==C,Re=J.current!==E;I.current&&(ue||ne||Re)&&(ue&&(ie.current=s),ne&&(G.current=C),Re&&(J.current=E),U.getState().updateNodeDimensions([{id:n,nodeElement:I.current,forceUpdate:!0}]))},[n,s,C,E]);const ye=t_({nodeRef:I,disabled:k||!w,noDragClassName:M,handleSelector:P,nodeId:n,isSelectable:v,selectNodesOnDrag:S});return k?null:L.createElement("div",{className:en(["react-flow__node",`react-flow__node-${s}`,{[D]:w},x,{selected:u,selectable:v,parent:$,dragging:ye}]),ref:I,style:{zIndex:O,transform:`translate(${l}px,${c}px)`,pointerEvents:ee?"all":"none",visibility:A?"visible":"hidden",...b},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:fe,onMouseMove:ve,onMouseLeave:F,onContextMenu:Y,onClick:W,onDoubleClick:Q,onKeyDown:j?se:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":z?void 0:`${qE}-${R}`,"aria-label":T},L.createElement(QF,{value:n},L.createElement(e,{id:n,data:r,type:s,xPos:a,yPos:i,selected:u,isConnectable:N,sourcePosition:C,targetPosition:E,dragging:ye,dragHandle:P,zIndex:O})))};return t.displayName="NodeWrapper",g.memo(t)};const OV=e=>{const t=e.getNodes().filter(n=>n.selected);return{...U0(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function BV({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const s=zt(),{width:r,height:a,x:i,y:l,transformString:c,userSelectionActive:u}=at(OV,ln),d=n_(),f=g.useRef(null);if(g.useEffect(()=>{var p;n||(p=f.current)==null||p.focus({preventScroll:!0})},[n]),t_({nodeRef:f}),u||!r||!a)return null;const m=e?p=>{const y=s.getState().getNodes().filter(b=>b.selected);e(p,y)}:void 0,h=p=>{Object.prototype.hasOwnProperty.call(ii,p.key)&&d({x:ii[p.key].x,y:ii[p.key].y,isShiftPressed:p.shiftKey})};return L.createElement("div",{className:en(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},L.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:r,height:a,top:l,left:i}}))}var IV=g.memo(BV);const HV=e=>e.nodesSelectionActive,s_=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:h,onSelectionStart:p,onSelectionEnd:y,multiSelectionKeyCode:b,panActivationKeyCode:x,zoomActivationKeyCode:w,elementsSelectable:v,zoomOnScroll:N,zoomOnPinch:j,panOnScroll:S,panOnScrollSpeed:C,panOnScrollMode:E,zoomOnDoubleClick:k,panOnDrag:_,defaultViewport:P,translateExtent:O,minZoom:$,maxZoom:M,preventScrolling:D,onSelectionContextMenu:A,noWheelClassName:z,noPanClassName:T,disableKeyboardA11y:R})=>{const B=at(HV),U=pc(f),I=pc(x),q=I||_,G=I||S,J=U||m&&q!==!0;return kV({deleteKeyCode:l,multiSelectionKeyCode:b}),L.createElement(MV,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:v,zoomOnScroll:N,zoomOnPinch:j,panOnScroll:G,panOnScrollSpeed:C,panOnScrollMode:E,zoomOnDoubleClick:k,panOnDrag:!U&&q,defaultViewport:P,translateExtent:O,minZoom:$,maxZoom:M,zoomActivationKeyCode:w,preventScrolling:D,noWheelClassName:z,noPanClassName:T},L.createElement(QE,{onSelectionStart:p,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:q,isSelecting:!!J,selectionMode:h},e,B&&L.createElement(IV,{onSelectionContextMenu:A,noPanClassName:T,disableKeyboardA11y:R})))};s_.displayName="FlowRenderer";var UV=g.memo(s_);function FV(e){return at(g.useCallback(n=>e?RE(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function VV(e){const t={input:yl(e.input||HE),default:yl(e.default||ep),output:yl(e.output||FE),group:yl(e.group||V0)},n={},s=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,a)=>(r[a]=yl(e[a]||ep),r),n);return{...t,...s}}const qV=({x:e,y:t,width:n,height:s,origin:r})=>!n||!s?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-s*r[1]},ZV=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),r_=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:s,elementsSelectable:r,updateNodeDimensions:a,onError:i}=at(ZV,ln),l=FV(e.onlyRenderVisibleElements),c=g.useRef(),u=g.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const m=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));a(m)});return c.current=d,d},[]);return g.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),L.createElement("div",{className:"react-flow__nodes",style:Z0},l.map(d=>{var j,S,C;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",vr.error003(f)),f="default");const m=e.nodeTypes[f]||e.nodeTypes.default,h=!!(d.draggable||t&&typeof d.draggable>"u"),p=!!(d.selectable||r&&typeof d.selectable>"u"),y=!!(d.connectable||n&&typeof d.connectable>"u"),b=!!(d.focusable||s&&typeof d.focusable>"u"),x=e.nodeExtent?L0(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(x==null?void 0:x.x)??0,v=(x==null?void 0:x.y)??0,N=qV({x:w,y:v,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return L.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||le.Bottom,targetPosition:d.targetPosition||le.Top,hidden:d.hidden,xPos:w,yPos:v,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:h,isSelectable:p,isConnectable:y,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((j=d[ct])==null?void 0:j.z)??0,isParent:!!((S=d[ct])!=null&&S.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[ct])!=null&&C.handleBounds)})}))};r_.displayName="NodeRenderer";var GV=g.memo(r_);const YV=(e,t,n)=>n===le.Left?e-t:n===le.Right?e+t:e,XV=(e,t,n)=>n===le.Top?e-t:n===le.Bottom?e+t:e,gw="react-flow__edgeupdater",pw=({position:e,centerX:t,centerY:n,radius:s=10,onMouseDown:r,onMouseEnter:a,onMouseOut:i,type:l})=>L.createElement("circle",{onMouseDown:r,onMouseEnter:a,onMouseOut:i,className:en([gw,`${gw}-${l}`]),cx:YV(t,s,e),cy:XV(n,s,e),r:s,stroke:"transparent",fill:"transparent"}),WV=()=>!0;var Do=e=>{const t=({id:n,className:s,type:r,data:a,onClick:i,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:b,source:x,target:w,sourceX:v,sourceY:N,targetX:j,targetY:S,sourcePosition:C,targetPosition:E,elementsSelectable:k,hidden:_,sourceHandleId:P,targetHandleId:O,onContextMenu:$,onMouseEnter:M,onMouseMove:D,onMouseLeave:A,reconnectRadius:z,onReconnect:T,onReconnectStart:R,onReconnectEnd:B,markerEnd:U,markerStart:I,rfId:q,ariaLabel:G,isFocusable:J,isReconnectable:ie,pathOptions:ee,interactionWidth:pe,disableKeyboardA11y:fe})=>{const ve=g.useRef(null),[F,Y]=g.useState(!1),[Q,W]=g.useState(!1),se=zt(),ye=g.useMemo(()=>`url('#${Qg(I,q)}')`,[I,q]),ue=g.useMemo(()=>`url('#${Qg(U,q)}')`,[U,q]);if(_)return null;const ne=_t=>{var Mn;const{edges:Lt,addSelectedEdges:ms,unselectNodesAndEdges:Vs,multiSelectionActive:qs}=se.getState(),Qn=Lt.find(Na=>Na.id===n);Qn&&(k&&(se.setState({nodesSelectionActive:!1}),Qn.selected&&qs?(Vs({nodes:[],edges:[Qn]}),(Mn=ve.current)==null||Mn.blur()):ms([n])),i&&i(_t,Qn))},Re=pl(n,se.getState,l),pt=pl(n,se.getState,$),fs=pl(n,se.getState,M),_r=pl(n,se.getState,D),An=pl(n,se.getState,A),Wn=(_t,Lt)=>{if(_t.button!==0)return;const{edges:ms,isValidConnection:Vs}=se.getState(),qs=Lt?w:x,Qn=(Lt?O:P)||null,Mn=Lt?"target":"source",Na=Vs||WV,de=Lt,_e=ms.find(Pe=>Pe.id===n);W(!0),R==null||R(_t,_e,Mn);const Le=Pe=>{W(!1),B==null||B(Pe,_e,Mn)};PE({event:_t,handleId:Qn,nodeId:qs,onConnect:Pe=>T==null?void 0:T(_e,Pe),isTarget:de,getState:se.getState,setState:se.setState,isValidConnection:Na,edgeUpdaterType:Mn,onReconnectEnd:Le})},Hs=_t=>Wn(_t,!0),Us=_t=>Wn(_t,!1),Fs=()=>Y(!0),Kn=()=>Y(!1),Ar=!k&&!i,Mr=_t=>{var Lt;if(!fe&&CE.includes(_t.key)&&k){const{unselectNodesAndEdges:ms,addSelectedEdges:Vs,edges:qs}=se.getState();_t.key==="Escape"?((Lt=ve.current)==null||Lt.blur(),ms({edges:[qs.find(Mn=>Mn.id===n)]})):Vs([n])}};return L.createElement("g",{className:en(["react-flow__edge",`react-flow__edge-${r}`,s,{selected:c,animated:u,inactive:Ar,updating:F}]),onClick:ne,onDoubleClick:Re,onContextMenu:pt,onMouseEnter:fs,onMouseMove:_r,onMouseLeave:An,onKeyDown:J?Mr:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":G===null?void 0:G||`Edge from ${x} to ${w}`,"aria-describedby":J?`${ZE}-${q}`:void 0,ref:ve},!Q&&L.createElement(e,{id:n,source:x,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,data:a,style:b,sourceX:v,sourceY:N,targetX:j,targetY:S,sourcePosition:C,targetPosition:E,sourceHandleId:P,targetHandleId:O,markerStart:ye,markerEnd:ue,pathOptions:ee,interactionWidth:pe}),ie&&L.createElement(L.Fragment,null,(ie==="source"||ie===!0)&&L.createElement(pw,{position:C,centerX:v,centerY:N,radius:z,onMouseDown:Hs,onMouseEnter:Fs,onMouseOut:Kn,type:"source"}),(ie==="target"||ie===!0)&&L.createElement(pw,{position:E,centerX:j,centerY:S,radius:z,onMouseDown:Us,onMouseEnter:Fs,onMouseOut:Kn,type:"target"})))};return t.displayName="EdgeWrapper",g.memo(t)};function KV(e){const t={default:Do(e.default||Jd),straight:Do(e.bezier||B0),step:Do(e.step||O0),smoothstep:Do(e.step||vm),simplebezier:Do(e.simplebezier||P0)},n={},s=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,a)=>(r[a]=Do(e[a]||Jd),r),n);return{...t,...s}}function xw(e,t,n=null){const s=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case le.Top:return{x:s+a/2,y:r};case le.Right:return{x:s+a,y:r+i/2};case le.Bottom:return{x:s+a/2,y:r+i};case le.Left:return{x:s,y:r+i/2}}}function yw(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const QV=(e,t,n,s,r,a)=>{const i=xw(n,e,t),l=xw(a,s,r);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function JV({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:s,targetWidth:r,targetHeight:a,width:i,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+s,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=$0({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*m)>0}function vw(e){var s,r,a,i,l;const t=((s=e==null?void 0:e[ct])==null?void 0:s.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const eq=[{level:0,isMaxLevel:!0,edges:[]}];function tq(e,t,n=!1){let s=-1;const r=e.reduce((i,l)=>{var d,f;const c=In(l.zIndex);let u=c?l.zIndex:0;if(n){const m=t.get(l.target),h=t.get(l.source),p=l.selected||(m==null?void 0:m.selected)||(h==null?void 0:h.selected),y=Math.max(((d=h==null?void 0:h[ct])==null?void 0:d.z)||0,((f=m==null?void 0:m[ct])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(p?y:0)}return i[u]?i[u].push(l):i[u]=[l],s=u>s?u:s,i},{}),a=Object.entries(r).map(([i,l])=>{const c=+i;return{edges:l,level:c,isMaxLevel:c===s}});return a.length===0?eq:a}function nq(e,t,n){const s=at(g.useCallback(r=>e?r.edges.filter(a=>{const i=t.get(a.source),l=t.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&JV({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return tq(s,t,n)}const sq=({color:e="none",strokeWidth:t=1})=>L.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),rq=({color:e="none",strokeWidth:t=1})=>L.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),bw={[Qd.Arrow]:sq,[Qd.ArrowClosed]:rq};function aq(e){const t=zt();return g.useMemo(()=>{var r,a;return Object.prototype.hasOwnProperty.call(bw,e)?bw[e]:((a=(r=t.getState()).onError)==null||a.call(r,"009",vr.error009(e)),null)},[e])}const oq=({id:e,type:t,color:n,width:s=12.5,height:r=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=aq(t);return c?L.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${s}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:l,refX:"0",refY:"0"},L.createElement(c,{color:n,strokeWidth:i})):null},iq=({defaultColor:e,rfId:t})=>n=>{const s=[];return n.edges.reduce((r,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=Qg(i,t);s.includes(l)||(r.push({id:l,color:i.color||e,...i}),s.push(l))}}),r),[]).sort((r,a)=>r.id.localeCompare(a.id))},a_=({defaultColor:e,rfId:t})=>{const n=at(g.useCallback(iq({defaultColor:e,rfId:t}),[e,t]),(s,r)=>!(s.length!==r.length||s.some((a,i)=>a.id!==r[i].id)));return L.createElement("defs",null,n.map(s=>L.createElement(oq,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};a_.displayName="MarkerDefinitions";var lq=g.memo(a_);const cq=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),o_=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:s,edgeTypes:r,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:p,reconnectRadius:y,children:b,disableKeyboardA11y:x})=>{const{edgesFocusable:w,edgesUpdatable:v,elementsSelectable:N,width:j,height:S,connectionMode:C,nodeInternals:E,onError:k}=at(cq,ln),_=nq(t,E,n);return j?L.createElement(L.Fragment,null,_.map(({level:P,edges:O,isMaxLevel:$})=>L.createElement("svg",{key:P,style:{zIndex:P},width:j,height:S,className:"react-flow__edges react-flow__container"},$&&L.createElement(lq,{defaultColor:e,rfId:s}),L.createElement("g",null,O.map(M=>{const[D,A,z]=vw(E.get(M.source)),[T,R,B]=vw(E.get(M.target));if(!z||!B)return null;let U=M.type||"default";r[U]||(k==null||k("011",vr.error011(U)),U="default");const I=r[U]||r.default,q=C===Ka.Strict?R.target:(R.target??[]).concat(R.source??[]),G=yw(A.source,M.sourceHandle),J=yw(q,M.targetHandle),ie=(G==null?void 0:G.position)||le.Bottom,ee=(J==null?void 0:J.position)||le.Top,pe=!!(M.focusable||w&&typeof M.focusable>"u"),fe=M.reconnectable||M.updatable,ve=typeof m<"u"&&(fe||v&&typeof fe>"u");if(!G||!J)return k==null||k("008",vr.error008(G,M)),null;const{sourceX:F,sourceY:Y,targetX:Q,targetY:W}=QV(D,G,ie,T,J,ee);return L.createElement(I,{key:M.id,id:M.id,className:en([M.className,a]),type:U,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:F,sourceY:Y,targetX:Q,targetY:W,sourcePosition:ie,targetPosition:ee,elementsSelectable:N,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:p,reconnectRadius:y,rfId:s,ariaLabel:M.ariaLabel,isFocusable:pe,isReconnectable:ve,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:x})})))),b):null};o_.displayName="EdgeRenderer";var uq=g.memo(o_);const dq=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function fq({children:e}){const t=at(dq);return L.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function mq(e){const t=q0(),n=g.useRef(!1);g.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const hq={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top},i_=({nodeId:e,handleType:t,style:n,type:s=Ur.Bezier,CustomComponent:r,connectionStatus:a})=>{var S,C,E;const{fromNode:i,handleId:l,toX:c,toY:u,connectionMode:d}=at(g.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),ln),f=(S=i==null?void 0:i[ct])==null?void 0:S.handleBounds;let m=f==null?void 0:f[t];if(d===Ka.Loose&&(m=m||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!m)return null;const h=l?m.find(k=>k.id===l):m[0],p=h?h.x+h.width/2:(i.width??0)/2,y=h?h.y+h.height/2:i.height??0,b=(((C=i.positionAbsolute)==null?void 0:C.x)??0)+p,x=(((E=i.positionAbsolute)==null?void 0:E.y)??0)+y,w=h==null?void 0:h.position,v=w?hq[w]:null;if(!w||!v)return null;if(r)return L.createElement(r,{connectionLineType:s,connectionLineStyle:n,fromNode:i,fromHandle:h,fromX:b,fromY:x,toX:c,toY:u,fromPosition:w,toPosition:v,connectionStatus:a});let N="";const j={sourceX:b,sourceY:x,sourcePosition:w,targetX:c,targetY:u,targetPosition:v};return s===Ur.Bezier?[N]=ME(j):s===Ur.Step?[N]=Kg({...j,borderRadius:0}):s===Ur.SmoothStep?[N]=Kg(j):s===Ur.SimpleBezier?[N]=AE(j):N=`M${b},${x} ${c},${u}`,L.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:n})};i_.displayName="ConnectionLine";const gq=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function pq({containerStyle:e,style:t,type:n,component:s}){const{nodeId:r,handleType:a,nodesConnectable:i,width:l,height:c,connectionStatus:u}=at(gq,ln);return!(r&&a&&l&&i)?null:L.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},L.createElement("g",{className:en(["react-flow__connection",u])},L.createElement(i_,{nodeId:r,handleType:a,style:t,type:n,CustomComponent:s,connectionStatus:u})))}function ww(e,t){return g.useRef(null),zt(),g.useMemo(()=>t(e),[e])}const l_=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:s,onMoveEnd:r,onInit:a,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:y,onSelectionEnd:b,connectionLineType:x,connectionLineStyle:w,connectionLineComponent:v,connectionLineContainerStyle:N,selectionKeyCode:j,selectionOnDrag:S,selectionMode:C,multiSelectionKeyCode:E,panActivationKeyCode:k,zoomActivationKeyCode:_,deleteKeyCode:P,onlyRenderVisibleElements:O,elementsSelectable:$,selectNodesOnDrag:M,defaultViewport:D,translateExtent:A,minZoom:z,maxZoom:T,preventScrolling:R,defaultMarkerColor:B,zoomOnScroll:U,zoomOnPinch:I,panOnScroll:q,panOnScrollSpeed:G,panOnScrollMode:J,zoomOnDoubleClick:ie,panOnDrag:ee,onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:ve,onPaneMouseLeave:F,onPaneScroll:Y,onPaneContextMenu:Q,onEdgeContextMenu:W,onEdgeMouseEnter:se,onEdgeMouseMove:ye,onEdgeMouseLeave:ue,onReconnect:ne,onReconnectStart:Re,onReconnectEnd:pt,reconnectRadius:fs,noDragClassName:_r,noWheelClassName:An,noPanClassName:Wn,elevateEdgesOnSelect:Hs,disableKeyboardA11y:Us,nodeOrigin:Fs,nodeExtent:Kn,rfId:Ar})=>{const Mr=ww(e,VV),_t=ww(t,KV);return mq(a),L.createElement(UV,{onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:ve,onPaneMouseLeave:F,onPaneContextMenu:Q,onPaneScroll:Y,deleteKeyCode:P,selectionKeyCode:j,selectionOnDrag:S,selectionMode:C,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:E,panActivationKeyCode:k,zoomActivationKeyCode:_,elementsSelectable:$,onMove:n,onMoveStart:s,onMoveEnd:r,zoomOnScroll:U,zoomOnPinch:I,zoomOnDoubleClick:ie,panOnScroll:q,panOnScrollSpeed:G,panOnScrollMode:J,panOnDrag:ee,defaultViewport:D,translateExtent:A,minZoom:z,maxZoom:T,onSelectionContextMenu:p,preventScrolling:R,noDragClassName:_r,noWheelClassName:An,noPanClassName:Wn,disableKeyboardA11y:Us},L.createElement(fq,null,L.createElement(uq,{edgeTypes:_t,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:O,onEdgeContextMenu:W,onEdgeMouseEnter:se,onEdgeMouseMove:ye,onEdgeMouseLeave:ue,onReconnect:ne,onReconnectStart:Re,onReconnectEnd:pt,reconnectRadius:fs,defaultMarkerColor:B,noPanClassName:Wn,elevateEdgesOnSelect:!!Hs,disableKeyboardA11y:Us,rfId:Ar},L.createElement(pq,{style:w,type:x,component:v,containerStyle:N})),L.createElement("div",{className:"react-flow__edgelabel-renderer"}),L.createElement(GV,{nodeTypes:Mr,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,selectNodesOnDrag:M,onlyRenderVisibleElements:O,noPanClassName:Wn,noDragClassName:_r,disableKeyboardA11y:Us,nodeOrigin:Fs,nodeExtent:Kn,rfId:Ar})))};l_.displayName="GraphView";var xq=g.memo(l_);const np=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Dr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:np,nodeExtent:np,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ka.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:ZF,isValidConnection:void 0},yq=()=>a7((e,t)=>({...Dr,setNodes:n=>{const{nodeInternals:s,nodeOrigin:r,elevateNodesOnSelect:a}=t();e({nodeInternals:xh(n,s,r,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:s={}}=t();e({edges:n.map(r=>({...s,...r}))})},setDefaultNodesAndEdges:(n,s)=>{const r=typeof n<"u",a=typeof s<"u",i=r?xh(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:a?s:[],hasDefaultNodes:r,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:s,nodeInternals:r,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((y,b)=>{const x=r.get(b.id);if(x!=null&&x.hidden)r.set(x.id,{...x,[ct]:{...x[ct],handleBounds:void 0}});else if(x){const w=z0(b.nodeElement);!!(w.width&&w.height&&(x.width!==w.width||x.height!==w.height||b.forceUpdate))&&(r.set(x.id,{...x,[ct]:{...x[ct],handleBounds:{source:hw(".source",b.nodeElement,m,u),target:hw(".target",b.nodeElement,m,u)}},...w}),y.push({id:x.id,type:"dimensions",dimensions:w}))}return y},[]);YE(r,u);const p=i||a&&!i&&XE(t,{initial:!0,...l});e({nodeInternals:new Map(r),fitViewOnInitDone:p}),(h==null?void 0:h.length)>0&&(s==null||s(h))},updateNodePositions:(n,s=!0,r=!1)=>{const{triggerNodeChanges:a}=t(),i=n.map(l=>{const c={id:l.id,type:"position",dragging:r};return s&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});a(i)},triggerNodeChanges:n=>{const{onNodesChange:s,nodeInternals:r,hasDefaultNodes:a,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(a){const u=KE(n,l()),d=xh(u,r,i,c);e({nodeInternals:d})}s==null||s(n)}},addSelectedNodes:n=>{const{multiSelectionActive:s,edges:r,getNodes:a}=t();let i,l=null;s?i=n.map(c=>Or(c,!0)):(i=Ho(a(),n),l=Ho(r,[])),$u({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:s,edges:r,getNodes:a}=t();let i,l=null;s?i=n.map(c=>Or(c,!0)):(i=Ho(r,n),l=Ho(a(),[])),$u({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:s}={})=>{const{edges:r,getNodes:a}=t(),i=n||a(),l=s||r,c=i.map(d=>(d.selected=!1,Or(d.id,!1))),u=l.map(d=>Or(d.id,!1));$u({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:s,maxZoom:r}=t();s==null||s.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:s,minZoom:r}=t();s==null||s.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var s;(s=t().d3Zoom)==null||s.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:s}=t(),a=s().filter(l=>l.selected).map(l=>Or(l.id,!1)),i=n.filter(l=>l.selected).map(l=>Or(l.id,!1));$u({changedNodes:a,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:s}=t();s.forEach(r=>{r.positionAbsolute=L0(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(s)})},panBy:n=>{const{transform:s,width:r,height:a,d3Zoom:i,d3Selection:l,translateExtent:c}=t();if(!i||!l||!n.x&&!n.y)return!1;const u=Jr.translate(s[0]+n.x,s[1]+n.y).scale(s[2]),d=[[0,0],[r,a]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(l,f),s[0]!==f.x||s[1]!==f.y||s[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Dr.connectionNodeId,connectionHandleId:Dr.connectionHandleId,connectionHandleType:Dr.connectionHandleType,connectionStatus:Dr.connectionStatus,connectionStartHandle:Dr.connectionStartHandle,connectionEndHandle:Dr.connectionEndHandle}),reset:()=>e({...Dr})}),Object.is),c_=({children:e})=>{const t=g.useRef(null);return t.current||(t.current=yq()),L.createElement(OF,{value:t.current},e)};c_.displayName="ReactFlowProvider";const u_=({children:e})=>g.useContext(ym)?L.createElement(L.Fragment,null,e):L.createElement(c_,null,e);u_.displayName="ReactFlowWrapper";const vq={input:HE,default:ep,output:FE,group:V0},bq={default:Jd,straight:B0,step:O0,smoothstep:vm,simplebezier:P0},wq=[0,0],Nq=[15,15],jq={x:0,y:0,zoom:1},Sq={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},G0=g.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,className:r,nodeTypes:a=vq,edgeTypes:i=bq,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:h,onConnectStart:p,onConnectEnd:y,onClickConnectStart:b,onClickConnectEnd:x,onNodeMouseEnter:w,onNodeMouseMove:v,onNodeMouseLeave:N,onNodeContextMenu:j,onNodeDoubleClick:S,onNodeDragStart:C,onNodeDrag:E,onNodeDragStop:k,onNodesDelete:_,onEdgesDelete:P,onSelectionChange:O,onSelectionDragStart:$,onSelectionDrag:M,onSelectionDragStop:D,onSelectionContextMenu:A,onSelectionStart:z,onSelectionEnd:T,connectionMode:R=Ka.Strict,connectionLineType:B=Ur.Bezier,connectionLineStyle:U,connectionLineComponent:I,connectionLineContainerStyle:q,deleteKeyCode:G="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:ie=!1,selectionMode:ee=gc.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:fe=Kd()?"Meta":"Control",zoomActivationKeyCode:ve=Kd()?"Meta":"Control",snapToGrid:F=!1,snapGrid:Y=Nq,onlyRenderVisibleElements:Q=!1,selectNodesOnDrag:W=!0,nodesDraggable:se,nodesConnectable:ye,nodesFocusable:ue,nodeOrigin:ne=wq,edgesFocusable:Re,edgesUpdatable:pt,elementsSelectable:fs,defaultViewport:_r=jq,minZoom:An=.5,maxZoom:Wn=2,translateExtent:Hs=np,preventScrolling:Us=!0,nodeExtent:Fs,defaultMarkerColor:Kn="#b1b1b7",zoomOnScroll:Ar=!0,zoomOnPinch:Mr=!0,panOnScroll:_t=!1,panOnScrollSpeed:Lt=.5,panOnScrollMode:ms=Pa.Free,zoomOnDoubleClick:Vs=!0,panOnDrag:qs=!0,onPaneClick:Qn,onPaneMouseEnter:Mn,onPaneMouseMove:Na,onPaneMouseLeave:de,onPaneScroll:_e,onPaneContextMenu:Le,children:Ae,onEdgeContextMenu:Pe,onEdgeDoubleClick:It,onEdgeMouseEnter:$t,onEdgeMouseMove:hs,onEdgeMouseLeave:hn,onEdgeUpdate:Zs,onEdgeUpdateStart:gs,onEdgeUpdateEnd:Tn,onReconnect:So,onReconnectStart:mu,onReconnectEnd:PT,reconnectRadius:OT=10,edgeUpdaterRadius:BT=10,onNodesChange:IT,onEdgesChange:HT,noDragClassName:UT="nodrag",noWheelClassName:FT="nowheel",noPanClassName:Jy="nopan",fitView:VT=!1,fitViewOptions:qT,connectOnClick:ZT=!0,attributionPosition:GT,proOptions:YT,defaultEdgeOptions:XT,elevateNodesOnSelect:WT=!0,elevateEdgesOnSelect:KT=!1,disableKeyboardA11y:ev=!1,autoPanOnConnect:QT=!0,autoPanOnNodeDrag:JT=!0,connectionRadius:eR=20,isValidConnection:tR,onError:nR,style:sR,id:tv,nodeDragThreshold:rR,...aR},oR)=>{const Bm=tv||"1";return L.createElement("div",{...aR,style:{...sR,...Sq},ref:oR,className:en(["react-flow",r]),"data-testid":"rf__wrapper",id:tv},L.createElement(u_,null,L.createElement(xq,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:v,onNodeMouseLeave:N,onNodeContextMenu:j,onNodeDoubleClick:S,nodeTypes:a,edgeTypes:i,connectionLineType:B,connectionLineStyle:U,connectionLineComponent:I,connectionLineContainerStyle:q,selectionKeyCode:J,selectionOnDrag:ie,selectionMode:ee,deleteKeyCode:G,multiSelectionKeyCode:fe,panActivationKeyCode:pe,zoomActivationKeyCode:ve,onlyRenderVisibleElements:Q,selectNodesOnDrag:W,defaultViewport:_r,translateExtent:Hs,minZoom:An,maxZoom:Wn,preventScrolling:Us,zoomOnScroll:Ar,zoomOnPinch:Mr,zoomOnDoubleClick:Vs,panOnScroll:_t,panOnScrollSpeed:Lt,panOnScrollMode:ms,panOnDrag:qs,onPaneClick:Qn,onPaneMouseEnter:Mn,onPaneMouseMove:Na,onPaneMouseLeave:de,onPaneScroll:_e,onPaneContextMenu:Le,onSelectionContextMenu:A,onSelectionStart:z,onSelectionEnd:T,onEdgeContextMenu:Pe,onEdgeDoubleClick:It,onEdgeMouseEnter:$t,onEdgeMouseMove:hs,onEdgeMouseLeave:hn,onReconnect:So??Zs,onReconnectStart:mu??gs,onReconnectEnd:PT??Tn,reconnectRadius:OT??BT,defaultMarkerColor:Kn,noDragClassName:UT,noWheelClassName:FT,noPanClassName:Jy,elevateEdgesOnSelect:KT,rfId:Bm,disableKeyboardA11y:ev,nodeOrigin:ne,nodeExtent:Fs}),L.createElement(hV,{nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:h,onConnectStart:p,onConnectEnd:y,onClickConnectStart:b,onClickConnectEnd:x,nodesDraggable:se,nodesConnectable:ye,nodesFocusable:ue,edgesFocusable:Re,edgesUpdatable:pt,elementsSelectable:fs,elevateNodesOnSelect:WT,minZoom:An,maxZoom:Wn,nodeExtent:Fs,onNodesChange:IT,onEdgesChange:HT,snapToGrid:F,snapGrid:Y,connectionMode:R,translateExtent:Hs,connectOnClick:ZT,defaultEdgeOptions:XT,fitView:VT,fitViewOptions:qT,onNodesDelete:_,onEdgesDelete:P,onNodeDragStart:C,onNodeDrag:E,onNodeDragStop:k,onSelectionDrag:M,onSelectionDragStart:$,onSelectionDragStop:D,noPanClassName:Jy,nodeOrigin:ne,rfId:Bm,autoPanOnConnect:QT,autoPanOnNodeDrag:JT,onError:nR,connectionRadius:eR,isValidConnection:tR,nodeDragThreshold:rR}),L.createElement(fV,{onSelectionChange:O}),Ae,L.createElement(IF,{proOptions:YT,position:GT}),L.createElement(vV,{rfId:Bm,disableKeyboardA11y:ev})))});G0.displayName="ReactFlow";function d_(e){return t=>{const[n,s]=g.useState(t),r=g.useCallback(a=>s(i=>e(a,i)),[]);return[n,s,r]}}const f_=d_(KE),m_=d_(DV);function Cq(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}function kq(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},L.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Eq(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},L.createElement("path",{d:"M0 0h32v4.2H0z"}))}function _q(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},L.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Aq(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},L.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Mq(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},L.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Tl=({children:e,className:t,...n})=>L.createElement("button",{type:"button",className:en(["react-flow__controls-button",t]),...n},e);Tl.displayName="ControlButton";const Tq=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),h_=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:s=!0,fitViewOptions:r,onZoomIn:a,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const m=zt(),[h,p]=g.useState(!1),{isInteractive:y,minZoomReached:b,maxZoomReached:x}=at(Tq,Cq),{zoomIn:w,zoomOut:v,fitView:N}=q0();if(g.useEffect(()=>{p(!0)},[]),!h)return null;const j=()=>{w(),a==null||a()},S=()=>{v(),i==null||i()},C=()=>{N(r),l==null||l()},E=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c==null||c(!y)};return L.createElement(NE,{className:en(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&L.createElement(L.Fragment,null,L.createElement(Tl,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},L.createElement(kq,null)),L.createElement(Tl,{onClick:S,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},L.createElement(Eq,null))),n&&L.createElement(Tl,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},L.createElement(_q,null)),s&&L.createElement(Tl,{className:"react-flow__controls-interactive",onClick:E,title:"toggle interactivity","aria-label":"toggle interactivity"},y?L.createElement(Mq,null):L.createElement(Aq,null)),d)};h_.displayName="Controls";var g_=g.memo(h_);function Rq(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var ss;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ss||(ss={}));function Dq({color:e,dimensions:t,lineWidth:n}){return L.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function zq({color:e,radius:t}){return L.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Lq={[ss.Dots]:"#91919a",[ss.Lines]:"#eee",[ss.Cross]:"#e2e2e2"},$q={[ss.Dots]:1,[ss.Lines]:1,[ss.Cross]:6},Pq=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function p_({id:e,variant:t=ss.Dots,gap:n=20,size:s,lineWidth:r=1,offset:a=2,color:i,style:l,className:c}){const u=g.useRef(null),{transform:d,patternId:f}=at(Pq,Rq),m=i||Lq[t],h=s||$q[t],p=t===ss.Dots,y=t===ss.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*d[2]||1,b[1]*d[2]||1],w=h*d[2],v=y?[w,w]:x,N=p?[w/a,w/a]:[v[0]/a,v[1]/a];return L.createElement("svg",{className:en(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},L.createElement("pattern",{id:f+e,x:d[0]%x[0],y:d[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},p?L.createElement(zq,{color:m,radius:w/a}):L.createElement(Dq,{dimensions:v,color:m,lineWidth:r})),L.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}p_.displayName="Background";var x_=g.memo(p_);function Oq(e){if(!e||typeof e!="object")throw new Error("Invalid perk tree data");const t=e;if(!t.treeId||!t.treeName||!t.perks||!Array.isArray(t.perks))throw new Error("Invalid perk tree structure");return t}function y_(e){try{return{success:!0,data:Oq(e)}}catch(t){return{success:!1,error:t}}}const Bq={nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120,fallbackSpacing:100};async function v_(e){try{const t=is(`data/perk-positions/${e}-positions.json`);console.log("Attempting to load positions from:",t);const n=await fetch(t);if(console.log("Response status:",n.status,n.statusText),!n.ok)return console.warn(`No saved positions found for tree ${e} at ${t}`),null;const s=await n.json();return console.log("Successfully loaded positions for tree:",e),s}catch(t){return console.warn(`Failed to load saved positions for tree ${e}:`,t),null}}function Iq(e,t){const n=new Map;e.forEach(i=>{const l=t==null?void 0:t.positions.find(c=>c.perkId===i.edid);n.set(i.edid,{perk:i,depth:-1,children:i.connections.children,parents:i.connections.parents,savedPosition:l})});const r=e.filter(i=>i.connections.parents.length===0).map(i=>({id:i.edid,depth:0})),a=new Set;for(;r.length>0;){const{id:i,depth:l}=r.shift();if(a.has(i))continue;a.add(i);const c=n.get(i);c&&((c.depth===-1||l<c.depth)&&(c.depth=l),c.children.forEach(u=>{n.has(u)&&!a.has(u)&&r.push({id:u,depth:l+1})}))}return n}function Hq(e,t){const n=new Map,s=new Map;e.forEach(a=>{const i=a.depth;s.has(i)||s.set(i,[]),s.get(i).push(a)});const r=Math.max(...s.keys());return s.forEach((a,i)=>{const l=t.padding+(r-i)*t.verticalSpacing,c=(a.length-1)*t.horizontalSpacing,u=t.padding+(t.gridScaleX-c)/2;a.forEach((d,f)=>{const m=u+f*t.horizontalSpacing;n.set(d.perk.edid,{x:m,y:l})})}),n}function Uq(e,t,n){t.positions.forEach(s=>{const r=e.get(s.perkId);r&&(r.savedPosition=s,r.calculatedPosition={x:s.x,y:s.y})})}function Fq(e,t,n={}){const s={...Bq,...n},r=Iq(e.perks,t);t&&Uq(r,t);const a=Hq(r,s),i=new Map;return r.forEach((l,c)=>{if(l.calculatedPosition)i.set(c,l.calculatedPosition);else{const u=a.get(c);u?i.set(c,u):i.set(c,{x:s.padding,y:s.padding})}}),i}function Vq(e,t){const n=Array.from(t.entries()).map(([s,r])=>({perkId:s,x:r.x,y:r.y,gridX:r.gridX,gridY:r.gridY,horizontal:r.horizontal,vertical:r.vertical}));return{treeId:e.treeId,treeName:e.treeName,positions:n,version:"1.0.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}function Nw(e,t){const n=new Map;return t.positions.forEach(s=>{n.set(s.perkId,{x:s.x,y:s.y,gridX:s.gridX,gridY:s.gridY,horizontal:s.horizontal,vertical:s.vertical})}),n}function qq(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`${e.treeId}-positions.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}const Zq=({data:e,selected:t,onTogglePerk:n,onRankChange:s})=>{var u,d,f,m,h;const r=e.totalRanks,a=r>1?(e.currentRank||0)>0:e.selected||t,i=p=>{if(p.preventDefault(),p.stopPropagation(),(e.totalRanks||1)>1){const b=e.currentRank||0,x=e.totalRanks||1,w=b>=x?0:b+1;s&&s(e.edid,w)}else n&&n(e.edid)},l=()=>{const p={padding:"8px 12px",borderRadius:"6px",border:"2px solid",fontSize:"12px",fontWeight:"500",minWidth:"140px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"};return a?{...p,borderColor:"#d4af37",backgroundColor:"rgba(212, 175, 55, 0.15)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 2px rgba(212, 175, 55, 0.4), 0 2px 4px rgba(212, 175, 55, 0.2)",transform:"scale(1.02)"}:e.isRoot?{...p,borderColor:"hsl(var(--border))",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"}:{...p,borderColor:"hsl(var(--border))"}},c=((d=(u=e.ranks[0])==null?void 0:u.description)==null?void 0:d.base)||"";return o.jsxs(tk,{children:[o.jsx(nk,{asChild:!0,children:o.jsxs("div",{style:l(),onClick:i,onMouseDown:p=>p.stopPropagation(),children:[!e.isRoot&&o.jsx(Mi,{type:"target",position:le.Bottom}),o.jsx("div",{className:"font-medium",children:e.name}),r>1&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.currentRank||0,"/",r," ranks"]}),e.hasChildren&&o.jsx(Mi,{type:"source",position:le.Top})]})}),o.jsx(w0,{className:"w-80 bg-background border border-border shadow-lg",style:{zIndex:Dt.TOOLTIP},children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-semibold text-sm",children:e.name}),o.jsx("div",{className:"text-sm text-muted-foreground",children:c}),typeof((h=(m=(f=e.ranks[0])==null?void 0:f.prerequisites)==null?void 0:m.skillLevel)==null?void 0:h.level)=="number"&&e.ranks[0].prerequisites.skillLevel.level>0&&o.jsxs("div",{className:"text-xs text-blue-700 font-medium pt-1",children:["Min. Level: ",e.ranks[0].prerequisites.skillLevel.level]}),r>1&&o.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[o.jsx("strong",{children:"Ranks:"})," ",e.currentRank||0,"/",r,o.jsx("br",{}),o.jsx("em",{children:"Click to cycle through ranks"})]})]})})]})},b_=g.memo(Zq);let wh=null;function Gq(){return wh||(wh=new vI),wh}function Y0(){const[e,t]=g.useState(!1),[n,s]=g.useState(!1),[r,a]=g.useState(null),i=ho(j=>j.data),l=fa(j=>j.data),c=go(j=>j.data),u=nl(j=>j.data),d=mo(j=>j.data),f=tl(j=>j.data),m=lo(j=>j.data),h=Js(j=>j.data),p=Io(j=>j.data),{allPerks:y}=mk(),b=Gq(),x=g.useCallback(async(j,S,C)=>{if(S!=null&&S.length)try{const E=C(S);await b.addToIndex(j,E)}catch(E){console.error(`Failed to index ${j}:`,E)}},[b]);g.useEffect(()=>{i!=null&&i.length&&x("skills",i,b.transformSkillsToSearchable)},[i,x]),g.useEffect(()=>{l!=null&&l.length&&x("races",l,b.transformRacesToSearchable)},[l,x]),g.useEffect(()=>{c!=null&&c.length&&x("traits",c,b.transformTraitsToSearchable)},[c,x]),g.useEffect(()=>{u!=null&&u.length&&x("religions",u,b.transformReligionsToSearchable)},[u,x]),g.useEffect(()=>{d!=null&&d.length&&x("birthsigns",d,b.transformBirthsignsToSearchable)},[d,x]),g.useEffect(()=>{f!=null&&f.length&&x("destinyNodes",f,b.transformDestinyNodesToSearchable)},[f,x]),g.useEffect(()=>{m!=null&&m.length&&x("perkTrees",m,b.transformPerkTreesToSearchable)},[m,x]),g.useEffect(()=>{h!=null&&h.length&&x("recipes",h,b.transformRecipesToSearchable)},[h,x]),g.useEffect(()=>{y!=null&&y.length&&x("perk-references",y,b.transformPerkReferencesToSearchable)},[y,x]),g.useEffect(()=>{p!=null&&p.length&&x("spells",p,b.transformSpellsToSearchable)},[p,x]),g.useEffect(()=>{((i==null?void 0:i.length)||(l==null?void 0:l.length)||(c==null?void 0:c.length)||(u==null?void 0:u.length)||(d==null?void 0:d.length)||(f==null?void 0:f.length)||(m==null?void 0:m.length)||(h==null?void 0:h.length)||(y==null?void 0:y.length)||(p==null?void 0:p.length))&&b.hasIndexedData()&&(b.rebuildSearchIndex(),t(!0))},[i,l,c,u,d,f,m,h,y,p,b]);const w=g.useCallback((j,S)=>j.trim()?b.search(j,S):[],[b]),v=g.useCallback(()=>b.getAvailableFilters(),[b]),N=g.useCallback(()=>b.getSearchableItems(),[b]);return{isReady:e,isIndexing:n,error:r,search:w,getAvailableFilters:v,getSearchableItems:N}}function Nh(e,t){return e.length!==t.length?!1:e.every((n,s)=>n===t[s])}function jw(e){var t,n,s;return{tags:((t=e.get("tags"))==null?void 0:t.split(",").filter(Boolean))||[],types:((n=e.get("types"))==null?void 0:n.split(",").filter(Boolean))||[],categories:((s=e.get("categories"))==null?void 0:s.split(",").filter(Boolean))||[],viewMode:e.get("view")||"grid"}}function X0(){const[e,t]=ZD(),n=g.useRef(!1),s=g.useRef(""),r=g.useRef(null),a=jw(e),[i,l]=g.useState({types:a.types,categories:a.categories,tags:a.tags}),[c,u]=g.useState(a.viewMode);g.useEffect(()=>{if(n.current)return;const y=e.toString();if(y===s.current)return;s.current=y;const b=jw(e);Nh(b.types,i.types)||l(x=>({...x,types:b.types})),Nh(b.categories,i.categories)||l(x=>({...x,categories:b.categories})),Nh(b.tags,i.tags)||l(x=>({...x,tags:b.tags})),b.viewMode!==c&&u(b.viewMode)},[e,i.types,i.categories,i.tags,c]),g.useEffect(()=>{r.current&&clearTimeout(r.current),n.current=!0;const y=new URLSearchParams;i.types.length>0&&y.set("types",i.types.join(",")),i.categories.length>0&&y.set("categories",i.categories.join(",")),i.tags.length>0&&y.set("tags",i.tags.join(",")),c!=="grid"&&y.set("view",c),t(y,{replace:!0}),r.current=setTimeout(()=>{n.current=!1},10)},[i,c,t]),g.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]);const d=g.useCallback(y=>{l(b=>({...b,...y}))},[]),f=g.useCallback(y=>{l(b=>({...b,tags:b.tags.includes(y)?b.tags:[...b.tags,y]}))},[]),m=g.useCallback(y=>{l(b=>({...b,tags:b.tags.filter(x=>x!==y)}))},[]),h=g.useCallback(()=>{l({types:[],categories:[],tags:[]})},[]),p=g.useCallback(y=>{u(y)},[]);return{activeFilters:i,setActiveFilters:d,addTag:f,removeTag:m,clearFilters:h,viewMode:c,setViewMode:p}}function W0(){const{search:e,getAvailableFilters:t,isReady:n,getSearchableItems:s}=Y0(),{activeFilters:r}=X0(),a=g.useMemo(()=>s().length,[s]),i=g.useMemo(()=>{if(!n)return[];if(!(r.tags.length>0||r.types.length>0||r.categories.length>0))return s().map(p=>({item:p,score:1,matches:[],highlights:[]}));const d=r.tags.join(" "),f={...r,tags:[]};return e(d||"*",f)},[n,e,r,s]),l=g.useMemo(()=>n?t():{types:[],categories:[],tags:[]},[n,t,a]),c=g.useMemo(()=>{const u={};return i.forEach(d=>{const f=d.item.type;u[f]=(u[f]||0)+1,d.item.category&&(u[`category:${d.item.category}`]=(u[`category:${d.item.category}`]||0)+1),d.item.tags.forEach(m=>{u[`tag:${m}`]=(u[`tag:${m}`]||0)+1})}),u},[i]);return{searchResults:i,availableFilters:l,resultCounts:c}}function Yq(){const{searchResults:e,resultCounts:t}=W0();X0();const n=g.useMemo(()=>e,[e]),s=g.useMemo(()=>Xq(n,"relevance"),[n]),r=g.useMemo(()=>s.map(xI),[s]),a=g.useMemo(()=>e.length,[e]),i=g.useMemo(()=>{const l={};return e.forEach(c=>{const u=c.item.type;l[u]||(l[u]=[]),l[u].push(c)}),l},[e]);return{filteredResults:n,sortedResults:s,playerCreationItems:r,resultCounts:t,totalResults:a,resultsByType:i}}function Xq(e,t){const n=[...e];switch(t){case"relevance":return n;case"name":return n.sort((s,r)=>s.item.name.localeCompare(r.item.name));case"type":return n.sort((s,r)=>{const a=s.item.type.localeCompare(r.item.type);return a!==0?a:s.item.name.localeCompare(r.item.name)});default:return n}}function Wq({activeFilters:e,onFiltersChange:t,onClearFilters:n,availableFilters:s,resultCount:r,onTagSelect:a,onTagRemove:i,selectedTags:l,className:c}){const u=e.types.length>0||e.categories.length>0||e.tags.length>0,d=h=>{const p=e.types.includes(h)?e.types.filter(y=>y!==h):[...e.types,h];t({types:p})},m=[{id:"fuzzy-search",name:"Search All",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:(s.categories||[]).filter(h=>h&&typeof h.label=="string").map(h=>({id:`category-${h.value}`,label:String(h.label),value:h.value,category:"Categories",description:`${h.count} item${h.count!==1?"s":""}`}))},{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:(s.tags||[]).filter(h=>h&&typeof h.label=="string").map(h=>({id:`tag-${h.value}`,label:String(h.label),value:h.value,category:"Tags",description:`${h.count} item${h.count!==1?"s":""}`}))}];return o.jsxs("div",{className:H("space-y-4",c),children:[o.jsx("div",{className:"space-y-2",children:o.jsx(xa,{categories:m,onSelect:a,onCustomSearch:a})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("span",{className:"text-sm font-medium",children:"Record Types"})}),o.jsx("div",{className:"flex flex-wrap gap-2",children:s.types.map(h=>o.jsxs(K,{variant:e.types.includes(h.value)?"default":"outline",size:"sm",onClick:()=>d(h.value),className:"text-xs",children:[h.label,o.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",h.count,")"]})]},h.value))})]}),l.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium",children:"Active Filters"}),o.jsx(K,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Clear All"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>o.jsxs(X,{variant:"secondary",className:"text-xs",children:[h.category,": ",h.label,o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>i(h.id),className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",children:o.jsx(qt,{className:"h-3 w-3"})})]},h.id))})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[o.jsxs("span",{children:[r," result",r!==1?"s":""," found"]}),u&&o.jsx(K,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Clear Filters"})]})]})}function w_({items:e,keyExtractor:t,renderItem:n,loadMore:s,hasMore:r=!0,columns:a=3,gap:i=12,maxColumnWidth:l,className:c=""}){const[u,d]=g.useState(0),f=g.useRef(null),m=g.useCallback(()=>l&&u>0?Math.max(1,Math.floor(u/l)):a,[a,l,u]);g.useEffect(()=>{const p=()=>{f.current&&d(f.current.offsetWidth)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),g.useEffect(()=>{var b;if(!s||!r)return;const p=new IntersectionObserver(x=>{x.forEach(w=>{w.isIntersecting&&s&&s()})},{threshold:.1}),y=(b=f.current)==null?void 0:b.lastElementChild;return y&&p.observe(y),()=>p.disconnect()},[s,r,e.length]);const h=g.useCallback(()=>{const p=m(),y=Array.from({length:p},()=>[]);return e.forEach((b,x)=>{const w=x%p,v=t(b);y[w].push(o.jsx("div",{style:{width:"100%",marginBottom:`${i}px`},children:n(b)},v))}),y.map((b,x)=>o.jsx("div",{style:{width:`calc(${100/p}% - ${i/2}px)`,marginRight:x<p-1?`${i}px`:0},children:b},x))},[e,t,n,m,i]);return e.length===0?o.jsx("div",{className:`text-center py-12 ${c}`,children:o.jsx("p",{className:"text-muted-foreground",children:"No items to display"})}):o.jsx("div",{ref:f,className:c,children:o.jsx("div",{style:{display:"flex",width:"100%"},children:h()})})}function Kq({items:e,className:t,viewMode:n="grid",onViewModeChange:s}){const[r,a]=g.useState(new Set);g.useEffect(()=>{if(n==="grid"){const l=new Set(e.map(c=>c.id));a(l)}},[n,e]);const i=l=>{if(n==="grid")return;const c=new Set(r);c.has(l)?c.delete(l):c.add(l),a(c)};return e.length===0?o.jsx("div",{className:`text-center py-12 ${t}`,children:o.jsx("p",{className:"text-muted-foreground",children:"No results found"})}):o.jsxs("div",{className:t,children:[s&&o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.length," result",e.length!==1?"s":""," found"]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(K,{variant:n==="grid"?"default":"outline",size:"sm",onClick:()=>s("grid"),className:"flex items-center gap-2",children:[o.jsx(x4,{className:"h-4 w-4"}),"Grid"]}),o.jsxs(K,{variant:n==="list"?"default":"outline",size:"sm",onClick:()=>s("list"),className:"flex items-center gap-2",children:[o.jsx(oo,{className:"h-4 w-4"}),"List"]})]})]}),n==="grid"?o.jsx(w_,{items:e,keyExtractor:l=>l.id,renderItem:l=>o.jsx(Eb,{item:l,isExpanded:!0,onToggle:()=>{},viewMode:"grid"}),columns:3,gap:16,maxColumnWidth:400}):o.jsx("div",{className:"space-y-2",children:e.map(l=>{const c=r.has(l.id);return o.jsx(Eb,{item:l,isExpanded:c,onToggle:()=>i(l.id),viewMode:"list"},l.id)})})]})}function Qq({className:e,placeholder:t="Search skills, races, traits, religions..."}){const n=dt(),{isReady:s}=Y0(),{availableFilters:r}=W0(),i=[{id:"fuzzy-search",name:"Search All",placeholder:t,options:r.types.map(c=>({id:`type-${c.value}`,label:c.label,value:c.value,category:"Search All",description:`${c.count} ${c.label}${c.count!==1?"s":""}`}))}],l=c=>{if(typeof c=="string")n(`/search?tags=${encodeURIComponent(c)}`);else if(c.id.startsWith("type-")){const u=c.value;n(`/search?types=${encodeURIComponent(u)}`)}else n(`/search?tags=${encodeURIComponent(c.value)}`)};return s?o.jsx("div",{className:H("flex items-center gap-2",e),children:o.jsx("div",{className:"flex-1",children:o.jsx(nC,{categories:i,onSelect:l,onCustomSearch:l,placeholder:t})})}):o.jsx("div",{className:H("flex items-center gap-2",e),children:o.jsx("div",{className:"flex-1 h-10 bg-muted animate-pulse rounded-md"})})}function jh({title:e,description:t,children:n}){return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("div",{className:"border-b border-border bg-card/50",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsx(co,{className:"text-3xl font-bold text-primary mb-2",children:e}),t&&o.jsx(Xe,{className:"text-muted-foreground max-w-2xl",children:t})]})}),o.jsx("div",{className:"container mx-auto px-4 py-6",children:n})]})}function Jq(){const{isReady:e,isIndexing:t,error:n}=Y0(),{activeFilters:s,setActiveFilters:r,clearFilters:a,addTag:i,removeTag:l}=X0(),{availableFilters:c,searchResults:u}=W0(),{totalResults:d}=Yq(),[f,m]=g.useState([]),[h,p]=g.useState("grid");g.useEffect(()=>{const j=[];s.tags.forEach(S=>{j.push({id:`custom-${S}`,label:S,value:S,category:"Search All"})}),s.categories.forEach(S=>{j.push({id:`category-${S}`,label:S,value:S,category:"Categories"})}),m(j)},[s.tags,s.categories]);const y=j=>{let S;typeof j=="string"?S={id:`custom-${j}`,label:j,value:j,category:"Search All"}:S={id:`${j.category}-${j.id}`,label:j.label,value:j.value,category:j.category},f.some(C=>C.value===S.value&&C.category===S.category)||(m(C=>[...C,S]),S.category==="Categories"?r({categories:[...s.categories,S.value]}):S.category==="Tags"?r({tags:[...s.tags,S.value]}):i(S.value))},b=j=>{const S=f.find(C=>C.id===j);S&&(m(C=>C.filter(E=>E.id!==j)),S.category==="Categories"?r({categories:s.categories.filter(C=>C!==S.value)}):S.category==="Tags"?r({tags:s.tags.filter(C=>C!==S.value)}):l(S.value))},x=()=>{m([]),a()},w=j=>{p(j)};if(!e)return o.jsx(jh,{title:"Search",description:"Building search index...",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("div",{className:"text-center",children:[t?o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}):null,o.jsx("p",{className:"text-muted-foreground",children:t?"Building search index...":"Loading search..."})]})})});if(n)return o.jsx(jh,{title:"Search",description:"Error loading search",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("p",{className:"text-destructive mb-4",children:["Failed to load search: ",n]}),o.jsx("button",{onClick:()=>window.location.reload(),className:"text-primary hover:underline",children:"Try again"})]})})});const v=f.length>0?"Search Results":"Search",N=f.length>0?`Found ${d} result${d!==1?"s":""} for ${f.length} filter${f.length!==1?"s":""}`:"Search across all skills, races, traits, religions, birthsigns, destiny nodes, and perk references";return o.jsxs(jh,{title:v,description:N,children:[o.jsx("div",{className:"mb-6",children:o.jsx(Wq,{activeFilters:s,onFiltersChange:r,onClearFilters:x,availableFilters:c,resultCount:d,onTagSelect:y,onTagRemove:b,selectedTags:f})}),o.jsx("div",{className:"w-full",children:o.jsx(Kq,{items:u.map(j=>j.item),viewMode:h,onViewModeChange:w})})]})}function eZ(){return o.jsx(Jq,{})}const Sw=["bg-red-100 border-red-300","bg-blue-100 border-blue-300","bg-green-100 border-green-300","bg-yellow-100 border-yellow-300","bg-purple-100 border-purple-300","bg-pink-100 border-pink-300","bg-indigo-100 border-indigo-300","bg-gray-100 border-gray-300"],Cw=["Mystical Artifact","Ancient Scroll","Enchanted Weapon","Potion of Power","Crystal Shard","Runic Tablet","Magical Tome","Arcane Relic","Divine Essence","Ethereal Fragment"],kw=["A powerful artifact imbued with ancient magic.","Scroll containing forgotten spells and rituals.","Weapon blessed by the gods themselves.","Brew that grants temporary supernatural abilities.","Crystal that resonates with magical energy.","Tablet inscribed with mysterious runes.","Book of forbidden knowledge and power.","Relic from a bygone era of magic.","Essence of divine power and wisdom.","Fragment of pure ethereal energy."],tZ=["magic","ancient","powerful","rare","legendary","enchanted","divine","mystical","forbidden","sacred"];function Ew(e){const t=[];for(let n=0;n<e;n++){const s=`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r=Math.floor(Math.random()*200)+100,a=Sw[Math.floor(Math.random()*Sw.length)],i=Cw[Math.floor(Math.random()*Cw.length)],l=kw[Math.floor(Math.random()*kw.length)],c=[],u=Math.floor(Math.random()*3)+1,d=[...tZ].sort(()=>.5-Math.random());c.push(...d.slice(0,u)),t.push({id:s,title:i,description:l,height:r,color:a,tags:c})}return t}function nZ(){const[e,t]=L.useState(()=>Ew(50)),[n,s]=L.useState(!1),[r,a]=L.useState(!0),i=L.useCallback(async()=>{if(n||!r)return;s(!0),await new Promise(d=>setTimeout(d,500));const u=Ew(20);t(d=>[...d,...u]),e.length+u.length>=200&&a(!1),s(!1)},[n,r,e.length]),l=u=>u.id,c=u=>o.jsx(BI,{item:u});return o.jsxs("div",{className:"container mx-auto p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"VirtualMasonryGrid Demo"}),o.jsxs("p",{className:"text-muted-foreground",children:["Testing InfiniteGrid implementation with ",e.length," items"]}),n&&o.jsx("div",{className:"mt-2 text-sm text-blue-600",children:"Loading more items..."}),!r&&o.jsx("div",{className:"mt-2 text-sm text-green-600",children:"All items loaded (200 total)"})]}),o.jsx(w_,{items:e,keyExtractor:l,renderItem:c,loadMore:i,hasMore:r,columns:3,gap:16,className:"min-h-screen"})]})}function sZ(e,t){const n=new Map;return t.forEach(s=>{var i;const r=s.treeId,a=((i=s.perks)==null?void 0:i.length)||0;n.set(r,a)}),n}function K0(){const{data:e,loading:t,error:n,reload:s}=x6(),{data:r,loading:a,error:i,reload:l}=o0(),c=t||a,u=n||i;return{skills:g.useMemo(()=>{if(!e||!r)return[];const m=sZ(e,r);return e.map(h=>({id:h.edid,name:h.name,category:h.category,description:h.description,keyAbilities:h.keyAbilities||[],metaTags:h.metaTags||[],assignmentType:"none",canAssignMajor:!0,canAssignMinor:!0,level:0,totalPerks:m.get(h.edid)||0,selectedPerksCount:0,selectedPerks:[],isSelected:!1}))},[e,r]),perkTrees:r||[],loading:c,error:u,refreshSkills:async()=>{await Promise.all([s(),l()])}}}function rZ(){var b;const{skills:e,loading:t,error:n}=K0(),{build:s,addMajorSkill:r,addMinorSkill:a,removeMajorSkill:i,removeMinorSkill:l}=wt(),c=g.useMemo(()=>e.map(x=>{var E,k;const w=s.skills.major.includes(x.id),v=s.skills.minor.includes(x.id),j=(((k=(E=s.perks)==null?void 0:E.selected)==null?void 0:k[x.id])||[]).length,S=!w&&s.skills.major.length<3,C=!v&&s.skills.minor.length<6;return{...x,isMajor:w,isMinor:v,selectedPerksCount:j,canAssignMajor:S,canAssignMinor:C}}),[e,s.skills.major,s.skills.minor,(b=s.perks)==null?void 0:b.selected]),u=g.useMemo(()=>c.filter(x=>x.isMajor),[c]),d=g.useMemo(()=>c.filter(x=>x.isMinor),[c]),f=g.useMemo(()=>c.filter(x=>!x.isMajor&&!x.isMinor),[c]);return{skills:c,selectedMajorSkills:u,selectedMinorSkills:d,availableSkills:f,loading:t,error:n,handleMajorSkillSelect:x=>{r(x.id)},handleMinorSkillSelect:x=>{a(x.id)},handleMajorSkillRemove:x=>{i(x)},handleMinorSkillRemove:x=>{l(x)}}}function aZ(e){const[t,n]=g.useState(""),[s,r]=g.useState(null),a=g.useMemo(()=>e.filter(c=>{const u=c.name.toLowerCase().includes(t.toLowerCase())||c.description.toLowerCase().includes(t.toLowerCase())||c.category.toLowerCase().includes(t.toLowerCase())||c.keyAbilities.some(f=>f.toLowerCase().includes(t.toLowerCase()))||c.metaTags.some(f=>f.toLowerCase().includes(t.toLowerCase())),d=!s||c.category===s;return u&&d}),[e,t,s]),i=g.useMemo(()=>{const c=new Set(e.map(u=>u.category));return Array.from(c).sort()},[e]);return{searchQuery:t,setSearchQuery:n,selectedCategory:s,setSelectedCategory:r,filteredSkills:a,categories:i,clearFilters:()=>{n(""),r(null)}}}function Q0(e){const{data:t,loading:n,error:s}=o0(),{getSkillPerks:r,getPerkRank:a,addPerk:i,removePerk:l,setPerkRank:c,clearSkillPerks:u}=wt(),d=g.useMemo(()=>!e||!t?null:t.find(w=>w.treeId===e)||null,[e,t]),f=g.useMemo(()=>e?r(e):[],[e,r]),m=g.useMemo(()=>{if(!e||!d)return{};const x={};return d.perks.forEach(w=>{x[w.edid]=a(w.edid)}),x},[e,d,a]),h=g.useMemo(()=>{if(!d)return[];const x=[];return d.perks.forEach(w=>{if(w.isRoot){x.push(w.edid);return}(w.connections.parents||[]).every(j=>f.includes(j))&&x.push(w.edid)}),x},[d,f]);return{perkTrees:t||[],selectedPerkTree:d,selectedPerks:f,perkRanks:m,availablePerks:h,loading:n,error:s,handlePerkSelect:x=>{if(!e)return;f.includes(x)?l(e,x):i(e,x)},handlePerkRankChange:(x,w)=>{c(x,w),w===0?f.includes(x)&&l(e,x):f.includes(x)||i(e,x)},handleResetPerks:()=>{e&&u(e)}}}function N_(){var A,z,T,R,B,U;const{skills:e,loading:t,error:n,refreshSkills:s}=K0(),{build:r,addMajorSkill:a,addMinorSkill:i,removeMajorSkill:l,removeMinorSkill:c}=wt(),{searchQuery:u,setSearchQuery:d,selectedCategory:f,setSelectedCategory:m,filteredSkills:h,categories:p,clearFilters:y}=aZ(e),b=g.useMemo(()=>h.map(I=>{var ee,pe,fe;const q=((pe=(ee=r.perks)==null?void 0:ee.selected)==null?void 0:pe[I.id])||[],G=q.length,J=I.totalPerks??0,ie=tj(I.id,q,((fe=r.perks)==null?void 0:fe.ranks)||{});return{...I,selectedPerksCount:G,level:ie,assignmentType:r.skills.major.includes(I.id)?"major":r.skills.minor.includes(I.id)?"minor":"none",canAssignMajor:!r.skills.major.includes(I.id)&&r.skills.major.length<3,canAssignMinor:!r.skills.minor.includes(I.id)&&r.skills.minor.length<6,perkCount:`${G}/${J}`}}),[h,r.skills.major,r.skills.minor,(A=r.perks)==null?void 0:A.selected,(z=r.perks)==null?void 0:z.ranks]),x=g.useMemo(()=>({majorCount:r.skills.major.length,minorCount:r.skills.minor.length,majorLimit:3,minorLimit:6,canAssignMajor:r.skills.major.length<3,canAssignMinor:r.skills.minor.length<6,totalSkills:b.length,totalPerks:b.reduce((I,q)=>I+(q.selectedPerksCount||0),0),totalPerkRanks:0}),[b,r.skills.major,r.skills.minor]),w=g.useCallback(I=>{a(I)},[a]),v=g.useCallback(I=>{i(I)},[i]),N=g.useCallback(I=>{l(I),c(I)},[l,c]),[j,S]=g.useState(null),C=g.useCallback(I=>{S(I)},[]),E=g.useMemo(()=>j&&b.find(I=>I.id===j)||null,[j,b]),{selectedPerkTree:k,handleResetPerks:_}=Q0(j),P=g.useMemo(()=>{var I;return!E||!((I=r.perks)!=null&&I.selected)?[]:r.perks.selected[E.id]||[]},[E,(T=r.perks)==null?void 0:T.selected]),O=g.useMemo(()=>{var I;return!E||!((I=r.perks)!=null&&I.ranks)?{}:r.perks.ranks[E.id]||{}},[E,(R=r.perks)==null?void 0:R.ranks]),$=g.useMemo(()=>k?k.perks||[]:[],[k]),M=g.useCallback(I=>{var J,ie;if(!E)return;const q=((ie=(J=r.perks)==null?void 0:J.selected)==null?void 0:ie[E.id])||[];q.includes(I)?(q.filter(ee=>ee!==I),console.log("Remove perk:",I,"from skill:",E.id)):([...q],console.log("Add perk:",I,"to skill:",E.id))},[E,(B=r.perks)==null?void 0:B.selected]),D=g.useCallback((I,q)=>{var J,ie;if(!E)return;({...((ie=(J=r.perks)==null?void 0:J.ranks)==null?void 0:ie[E.id])||{}},console.log("Update perk rank:",I,"to",q,"for skill:",E.id))},[E,(U=r.perks)==null?void 0:U.ranks]);return{skills:b,skillSummary:x,selectedSkill:E,selectedSkillId:j,perkTree:k,selectedPerks:P,perkRanks:O,availablePerks:$,loading:t,error:n,searchQuery:u,setSearchQuery:d,selectedCategory:f,setSelectedCategory:m,categories:p,clearFilters:y,onAssignMajor:w,onAssignMinor:v,onRemoveAssignment:N,onSkillSelect:C,onPerkSelect:M,onPerkRankChange:D,onResetPerks:_,refreshSkills:s}}function oZ({query:e,onQueryChange:t,placeholder:n="Search skills...",className:s}){return o.jsx("div",{className:H("mb-6",s),children:o.jsxs("div",{className:"relative max-w-md",children:[o.jsx(yi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(Cs,{placeholder:n,value:e,onChange:r=>t(r.target.value),className:"pl-10"})]})})}function iZ({categories:e,selectedCategory:t,onCategorySelect:n,className:s}){return o.jsx("div",{className:H("mb-6",s),children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(K,{variant:t===null?"default":"outline",size:"sm",onClick:()=>n(null),children:"All Categories"}),e.map(r=>o.jsx(K,{variant:t===r?"default":"outline",size:"sm",onClick:()=>n(r),children:r},r))]})})}function Sh({skills:e,onSelect:t,placeholder:n="Search skills...",className:s="",disabled:r=!1}){const[a,i]=g.useState(""),l=g.useMemo(()=>{if(!a.trim())return e;const f=a.toLowerCase();return e.filter(m=>m.name.toLowerCase().includes(f)||m.description.toLowerCase().includes(f)||m.category.toLowerCase().includes(f)||m.keyAbilities.some(h=>h.toLowerCase().includes(f))||m.metaTags.some(h=>h.toLowerCase().includes(f)))},[e,a]),c=g.useMemo(()=>l.map(f=>{var m;return{id:f.edid,label:f.name,description:f.description,category:f.category,badge:f.category&&o.jsx(X,{variant:"outline",className:"text-xs",children:f.category}),metadata:{originalSkill:f,keyAbilitiesCount:((m=f.keyAbilities)==null?void 0:m.length)||0,scaling:f.scaling}}}),[l]),u=f=>{const m=e.find(h=>h.edid===f.id);m&&t(m)},d=(f,m)=>{var h,p;return o.jsx("div",{className:"flex items-start gap-3",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:f.label}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.badge&&o.jsx("div",{className:"flex-shrink-0",children:f.badge}),((h=f.metadata)==null?void 0:h.keyAbilitiesCount)&&f.metadata.keyAbilitiesCount>0&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.metadata.keyAbilitiesCount," ability",f.metadata.keyAbilitiesCount!==1?"s":""]})]}),f.description&&o.jsx(Be,{text:f.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"}),((p=f.metadata)==null?void 0:p.scaling)&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[o.jsx("strong",{children:"Scaling:"})," ",f.metadata.scaling]})]})})};return o.jsx(Fc,{options:c,onSelect:u,placeholder:n,className:s,disabled:r,renderOption:d,emptyMessage:"No skills found",searchQuery:a,onSearchQueryChange:i})}function lZ(e){const t=new Set,n=[],s=(r,a)=>{if(t.has(r))return;t.add(r),a.push(e.find(l=>l.edid===r));const i=e.find(l=>l.edid===r);i.connection.children.forEach(l=>{e.some(c=>c.edid===l)&&s(l,a)}),i.connection.parents.forEach(l=>{e.some(c=>c.edid===l)&&s(l,a)})};return e.forEach(r=>{if(!t.has(r.edid)){const a=[];s(r.edid,a),n.push(a)}}),n}function cZ(e,t){try{if(e.length===0)return[];const r=lZ(e).map(l=>uZ(l)).map(l=>dZ(l,t)),a=mZ(r,t);return j_(a,t)}catch{return e.map(s=>({id:s.edid,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0}))}}function uZ(e){const t=new Map;e.forEach(l=>{t.set(l.edid,{perk:l,depth:-1,children:l.connection.children,parents:l.connection.parents,x:0,y:0,width:0})});const n=[];t.forEach((l,c)=>{l.parents.length===0&&n.push(c)});const s=n.map(l=>({id:l,depth:0})),r=new Set;for(;s.length>0;){const{id:l,depth:c}=s.shift();if(r.has(l))continue;r.add(l);const u=t.get(l);u&&((u.depth===-1||c<u.depth)&&(u.depth=c),u.children.forEach(d=>{t.has(d)&&!r.has(d)&&s.push({id:d,depth:c+1})}))}let a=!0,i=0;for(;a&&i<10;)a=!1,i++,t.forEach((l,c)=>{if(l.parents.length>1){const u=l.parents.map(d=>{const f=t.get(d);return f?f.depth:-1}).filter(d=>d!==-1);if(u.length>0){const f=Math.min(...u)+1;l.depth!==f&&(l.depth=f,a=!0)}}});return t.forEach((l,c)=>{l.children.forEach(u=>{const d=t.get(u);if(d&&d.depth<=l.depth){const f=l.depth+1;d.depth=f}})}),{nodes:t,roots:n}}function dZ(e,t){const{nodes:n,roots:s}=e,r=[];if(n.forEach((f,m)=>{r.push({id:m,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0,children:f.children})}),r.some(f=>{try{return sp(f.id,n,t,new Set),!1}catch{return!0}}))return r.forEach(f=>{const m=n.get(f.id);if(m&&m.perk){const h=m.perk.position.x*t.gridScaleX,p=-m.perk.position.y*t.gridScaleY;f.x=h,f.y=p,f.originalX=h,f.originalY=p}}),fZ(r,t),r;const i=r.filter(f=>!r.some(h=>{var p;return h.id!==f.id&&((p=h.children)==null?void 0:p.includes(f.id))}));i.forEach(f=>{f.y=0,f.originalY=0});const l=new Set,c=i.map(f=>({node:f,depth:0}));for(;c.length>0;){const{node:f,depth:m}=c.shift();l.has(f.id)||(l.add(f.id),m>0&&(f.y=-m*t.verticalSpacing,f.originalY=f.y),f.children&&f.children.forEach(h=>{const p=r.find(y=>y.id===h);p&&!l.has(h)&&c.push({node:p,depth:m+1})}))}const u=new Map;return r.forEach(f=>{const m=Math.round(f.y/t.verticalSpacing);u.has(m)||u.set(m,[]),u.get(m).push(f)}),Array.from(u.keys()).sort((f,m)=>m-f).forEach(f=>{u.get(f).forEach(h=>{if(h.children){const p=new Map;h.children.forEach(y=>{const b=r.find(x=>x.id===y);if(b){const x=r.filter(w=>{var v;return((v=w.children)==null?void 0:v.includes(y))&&Math.abs(w.y-b.y)===t.verticalSpacing});x.length>0&&x.some(w=>w.id===h.id)&&(p.has(h.id)||p.set(h.id,[]),p.get(h.id).push(b))}}),p.forEach((y,b)=>{if(y.length>0){const x=r.find(w=>w.id===b);if(x){const w=y.map(C=>{const E=sp(C.id,n,t);return{child:C,subtreeWidth:E}}),v=w.reduce((C,{subtreeWidth:E})=>C+E,0),N=(y.length-1)*t.horizontalSpacing,j=v+N;let S=x.x-j/2;w.forEach(({child:C,subtreeWidth:E})=>{C.x=S+E/2,C.originalX=C.x,S+=E+t.horizontalSpacing})}}})}})}),j_(r,t),r}function j_(e,t){const r=t.horizontalSpacing*.4,a=new Map;e.forEach(i=>{a.set(i.id,{x:i.x,y:i.y})});for(let i=0;i<5;i++){let l=0;for(let c=0;c<e.length;c++)for(let u=c+1;u<e.length;u++){const d=e[c],f=e[u],m=d.x+t.nodeWidth*.5,h=d.y+t.nodeHeight*.5,p=f.x+t.nodeWidth*.5,y=f.y+t.nodeHeight*.5,b=p-m,x=y-h,w=Math.sqrt(b*b+x*x);if(w<r&&w>0){const v=b/w*.03,N=x/w*.03;d.x-=v,d.y-=N,f.x+=v,f.y+=N,l++}}if(l===0)break}return e.forEach(i=>{const l=a.get(i.id);if(!l)return;const c=l.x-i.x,u=l.y-i.y,d=i.x+c*.02,f=i.y+u*.02,h=Math.round(l.y/t.verticalSpacing)*t.verticalSpacing,p=Math.max(f,h);i.x=d,i.y=p,i.originalX=d,i.originalY=p}),e}function fZ(e,t){const r=t.nodeHeight*.8,a=50,i=new Map;e.forEach(u=>{i.set(u.id,{x:u.x,y:u.y})});let l=0,c=1;for(;c>0&&l<a;){l++,c=0;for(let u=0;u<e.length;u++)for(let d=u+1;d<e.length;d++){const f=e[u],m=e[d],h=Math.max(0,Math.min(f.x+t.nodeWidth,m.x+t.nodeWidth)-Math.max(f.x,m.x)),p=Math.max(0,Math.min(f.y+t.nodeHeight,m.y+t.nodeHeight)-Math.max(f.y,m.y)),y=f.y+t.nodeHeight*.5,b=m.y+t.nodeHeight*.5,x=Math.abs(b-y),w=x<r;if(h>0&&p>0||w){c++;let v=0;h>0&&p>0?v=p*.08:w&&(v=(r-x)*.08),f.y<m.y?(f.y-=v,m.y+=v):(f.y+=v,m.y-=v)}}if(c===0)break}return e.forEach(u=>{const d=i.get(u.id);if(!d)return;const f=d.y-u.y,m=u.y+f*.03;u.y=m,u.originalY=m}),e}function mZ(e,t){const n=[],s=e.map(c=>{const u=Math.max(...c.map(v=>v.y)),d=c.filter(v=>Math.abs(v.y-u)<1),f=d.map(v=>v.x),m=Math.min(...f),h=Math.max(...f),p=h-m,y=f.reduce((v,N)=>v+N,0)/f.length,b=Math.min(...c.map(v=>v.x)),x=Math.max(...c.map(v=>v.x+v.width)),w=x-b;return{treeNodes:c,rootNodes:d,minRootX:m,maxRootX:h,rootWidth:p,rootCenterX:y,minX:b,maxX:x,treeWidth:w}}),r=Math.min(...s.map(c=>c.minRootX)),i=Math.max(...s.map(c=>c.maxRootX))-r;let l=0;return s.forEach(c=>{const u=i>0?c.rootWidth/i:1,d=c.minRootX-r;l-c.minX+d*u,c.treeNodes.forEach(f=>{const h=(f.x-c.minRootX)*u,p=l+h;n.push({...f,x:p,originalX:p})}),l+=c.treeWidth*u+t.horizontalSpacing}),n}function sp(e,t,n,s=new Set){if(s.has(e))throw new Error(`Circular reference detected for perkId: ${e}`);const r=t.get(e);if(!r)return n.nodeWidth;s.add(e);const a=r.children||[],i=a.map(c=>sp(c,t,n,new Set(s)));if(i.length===0)return n.nodeWidth;let l=0;return i.forEach((c,u)=>{l+=c,u<a.length-1&&(l+=n.horizontalSpacing)}),Math.max(l,n.nodeWidth)}function hZ(e){return e.perks.map(t=>({edid:t.edid,name:t.name,position:t.position,connection:t.connections}))}const gZ={perkNode:e=>o.jsx(b_,{...e,onTogglePerk:e.data.onTogglePerk,onRankChange:e.data.onRankChange})};function pZ({tree:e,onTogglePerk:t,onRankChange:n,selectedPerks:s}){const[r,a]=L.useState(null),[i,l]=L.useState(null),[c,u]=L.useState(!1),d=L.useCallback((_,P)=>{},[]),f=g.useMemo(()=>{if(!e)return null;const _=y_(e);return _.success?_.data:(console.error("Invalid perk tree data:",_.error),null)},[e]);L.useEffect(()=>{if(!f){l(null);return}console.log("Loading saved positions for tree:",f.treeId),u(!0),v_(f.treeId).then(_=>{console.log("Loaded saved positions:",_?"Found":"Not found"),l(_)}).catch(_=>{console.warn("Failed to load saved positions:",_),l(null)}).finally(()=>{u(!1)})},[f==null?void 0:f.treeId]);const m=g.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),h=g.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),p=g.useMemo(()=>{if(!f)return[];if(console.log("Layout decision:",{hasSavedPositions:!!i,isLoadingPositions:c,treeId:f.treeId}),i&&!c){console.log("Using preset positions for tree:",f.treeId);const _=Fq(f,i,h);return Array.from(_.entries()).map(([P,O])=>({id:P,x:O.x,y:O.y,width:h.nodeWidth||140,height:h.nodeHeight||80,originalX:O.x,originalY:O.y}))}else{console.log("Using fallback layout algorithm for tree:",f.treeId);const _=hZ(f);return cZ(_,m)}},[f,m,i,c,h]),y=g.useMemo(()=>!f||p.length===0?[]:f.perks.map(_=>{const P=_.edid,O=p.find(T=>T.id===P),$=O?{x:O.x,y:O.y}:{x:0,y:0},M=_.connections.children.length>0,D=_.connections.parents.length===0,A=s.find(T=>T.edid===P);return{id:P,type:"perkNode",position:$,draggable:!0,data:{..._,selected:A!==void 0,currentRank:(A==null?void 0:A.currentRank)||0,hasChildren:M,isRoot:D,onTogglePerk:t,onRankChange:n}}}),[f,p,s,t,n]),b=g.useMemo(()=>{if(!f)return[];const _=[];return f.perks.forEach(P=>{const O=P.edid;P.connections.children.length>0&&P.connections.children.forEach($=>{if($===O)return;f.perks.some(D=>D.edid===$)&&_.push({id:`${O}-${$}`,source:O,target:$,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),_},[f]),[x,w,v]=f_(y),[N,j,S]=m_(b);L.useEffect(()=>{w(y)},[y,w]),L.useEffect(()=>{j(b)},[b,j]),L.useEffect(()=>{f&&x.length>0&&r&&setTimeout(()=>{r.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[f==null?void 0:f.treeId,r]);const C=g.useCallback(_=>j(P=>H0(_,P)),[j]),E=g.useCallback(_=>{_.stopPropagation()},[]),k=g.useCallback(_=>{_.stopPropagation()},[]);return f?o.jsxs("div",{className:"w-full h-full bg-background rounded-lg border",style:{zIndex:1},onMouseDown:_=>_.stopPropagation(),onTouchStart:_=>_.stopPropagation(),children:[o.jsx("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-1",children:o.jsx("div",{className:"bg-primary text-primary-foreground px-2 py-1 rounded text-xs font-medium",children:c?"Loading Positions...":i?"Positioned Tree":"Algorithm v2"})}),o.jsxs(G0,{nodes:x,edges:N,onNodesChange:v,onEdgesChange:S,onConnect:C,onInit:a,nodeTypes:gZ,nodesDraggable:!1,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},onNodeDragStop:d,onMouseDown:E,onTouchStart:k,panOnDrag:!0,panOnScroll:!1,preventScrolling:!0,children:[o.jsx(x_,{}),o.jsx(g_,{})]})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20 rounded-lg",children:o.jsx("p",{className:"text-muted-foreground",children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function S_({open:e,onOpenChange:t,selectedSkill:n,skillName:s,perkTree:r,skills:a,onSkillSelect:i,onReset:l}){var N,j;console.log("SkillPerkTreeDrawer props:",{open:e,selectedSkill:n,skillName:s,perkTree:r?"Found":"Not found",skillsCount:a.length});const{selectedPerks:c,perkRanks:u,handlePerkSelect:d,handlePerkRankChange:f,handleResetPerks:m}=Q0(n),h=L.useMemo(()=>r?r.perks.filter(S=>c.includes(S.edid)).map(S=>({...S,selected:!0,currentRank:u[S.edid]||1})):[],[r,c,u]),p=L.useCallback(S=>{d(S)},[d]),y=L.useCallback((S,C)=>{f(S,C)},[f]),b=()=>{m(),l()},x=()=>{t(!1)},w=[{id:"skills",name:"Skills",placeholder:"Search skills...",options:a.map(S=>({id:S.id,label:S.name,value:S.id,category:"Skills",description:`${S.selectedPerks}/${S.totalPerks} perks selected`}))}],v=S=>{i(S.value)};return n?o.jsxs(Ck,{open:e,onOpenChange:t,shouldScaleBackground:!1,dismissible:!0,children:[console.log("Drawer render - open:",e),o.jsxs(kk,{children:[o.jsx(k0,{}),o.jsxs(C0,{className:"fixed inset-x-0 bottom-0 z-50 mt-24 flex flex-col rounded-t-[10px] border bg-background h-[85vh] bg-card border-t shadow-lg !bg-card","data-vaul-no-drag":!0,style:{backgroundColor:"hsl(var(--card))",zIndex:Dt.DRAWER},children:[console.log("Drawer content render - zIndex:",Dt.DRAWER),o.jsx(Ek,{className:"border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-64",children:o.jsx(La,{categories:w,onSelect:v,placeholder:"Search skills..."})}),o.jsxs("div",{children:[o.jsx(Ak,{className:"text-xl",children:s||(r==null?void 0:r.treeName)||"Skill Perks"}),o.jsxs(Mk,{className:"flex items-center gap-2",children:[o.jsxs("span",{children:[c.length," perks selected"]}),((N=a.find(S=>S.id===n))==null?void 0:N.level)&&o.jsxs("span",{className:"text-blue-600 font-medium",children:[" Min: Level"," ",(j=a.find(S=>S.id===n))==null?void 0:j.level]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(K,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-2",children:[o.jsx(xi,{className:"h-4 w-4"}),"Reset Perks"]}),o.jsx(K,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:o.jsx(qt,{className:"h-4 w-4"})})]})]})}),o.jsx("div",{className:"flex-1 overflow-hidden",style:{height:"400px"},children:o.jsx("div",{className:"h-full w-full bg-muted/20 rounded",children:r?o.jsx(pZ,{tree:r,onTogglePerk:p,onRankChange:y,selectedPerks:h}):o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("p",{className:"text-muted-foreground",children:n?"Loading perk tree...":"No skill selected"})})})}),o.jsx(_k,{className:"border-t",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on perk nodes to select/deselect them"}),o.jsx(K,{variant:"outline",onClick:x,children:"Close"})]})})]})]})]}):null}function xZ({skills:e,loading:t,error:n,searchQuery:s,onSearchChange:r,selectedCategory:a,onCategorySelect:i,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:y}){var v;const[b,x]=g.useState(!1);if(t)return o.jsx(A9,{});if(n)return o.jsx(M9,{error:n});const w=e.map(N=>({edid:N.id,name:N.name,category:N.category,description:N.description,scaling:"",keyAbilities:[],metaTags:[],totalPerks:N.totalPerks,selectedPerks:N.selectedPerksCount,level:N.level,isMajor:N.assignmentType==="major",isMinor:N.assignmentType==="minor"}));return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(be,{children:[o.jsx(Te,{children:o.jsxs(Fe,{className:"flex items-center justify-between",children:[o.jsx("span",{children:"Build Summary"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(X,{variant:"outline",className:"bg-yellow-50 text-yellow-800 border-yellow-300",children:[y.majorCount,"/",y.majorLimit," Major"]}),o.jsxs(X,{variant:"outline",className:"bg-gray-50 text-gray-800 border-gray-300",children:[y.minorCount,"/",y.minorLimit," Minor"]})]})]})}),o.jsx(we,{children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Total Skills"}),o.jsx("p",{className:"font-semibold",children:y.totalSkills})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Selected Perks"}),o.jsx("p",{className:"font-semibold",children:y.totalPerks})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Perk Ranks"}),o.jsx("p",{className:"font-semibold",children:y.totalPerkRanks})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Available Major"}),o.jsx("p",{className:"font-semibold text-yellow-600",children:y.majorLimit-y.majorCount})]})]})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(oZ,{query:s,onQueryChange:r}),o.jsx(iZ,{categories:l,selectedCategory:a,onCategorySelect:i})]}),o.jsx(bC,{}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Available Skills"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.length," skills found"]})]}),o.jsx(R9,{skills:e,onSkillSelect:N=>{console.log("Skill selected:",N),console.log("Setting perkTreeOpen to true"),u(N),x(!0)},onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,selectedSkillId:c||void 0})]}),o.jsx(S_,{open:b,onOpenChange:x,selectedSkill:c,skillName:c?(v=e.find(N=>N.id===c))==null?void 0:v.name:void 0,perkTree:p||void 0,skills:w,onSkillSelect:u,onReset:h}),o.jsx(be,{className:"bg-muted/50",children:o.jsxs(we,{className:"pt-6",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"How to Assign Skills"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Major Skills (0-3)"}),o.jsx("p",{children:"Your primary skills that level up faster and start at a higher level."})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Minor Skills (0-6)"}),o.jsx("p",{children:"Secondary skills that provide additional benefits and customization."})]})]})]})})]})}function C_(){const[e,t]=g.useState({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[n,s]=g.useState({skills:[],categories:[],prerequisites:[],tags:[]});g.useCallback(h=>{s(h)},[]);const r=g.useCallback(h=>{t(p=>({...p,skills:[...p.skills,h]}))},[]),a=g.useCallback(h=>{t(p=>({...p,skills:p.skills.filter(y=>y!==h)}))},[]);g.useCallback(h=>{t(p=>({...p,categories:[...p.categories,h]}))},[]),g.useCallback(h=>{t(p=>({...p,categories:p.categories.filter(y=>y!==h)}))},[]),g.useCallback(h=>{t(p=>({...p,prerequisites:[...p.prerequisites,h]}))},[]),g.useCallback(h=>{t(p=>({...p,prerequisites:p.prerequisites.filter(y=>y!==h)}))},[]),g.useCallback(h=>{t(p=>({...p,tags:[...p.tags,h]}))},[]);const i=g.useCallback(h=>{t(p=>({...p,tags:p.tags.filter(y=>y!==h)}))},[]);g.useCallback(h=>{t(p=>({...p,rankLevel:h}))},[]),g.useCallback(h=>{t(p=>({...p,rootOnly:h}))},[]);const l=g.useCallback(h=>{t(p=>({...p,minLevel:h}))},[]),c=g.useCallback(h=>{t(p=>({...p,searchQuery:h}))},[]),u=g.useCallback(()=>{t({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0})},[]),d=g.useMemo(()=>{const h=[];return e.skills.forEach(p=>{const y=n.skills.find(b=>b.id===p);y&&h.push({id:`skill-${p}`,type:"skill",value:p,label:y.name})}),e.categories.forEach(p=>{h.push({id:`category-${p}`,type:"category",value:p,label:p})}),e.prerequisites.forEach(p=>{h.push({id:`prerequisite-${p}`,type:"prerequisite",value:p,label:p})}),e.tags.forEach(p=>{h.push({id:`tag-${p}`,type:"tag",value:p,label:p})}),e.rankLevel!=="all"&&h.push({id:"rank-level",type:"rankLevel",value:e.rankLevel,label:e.rankLevel==="single"?"Single Rank":"Multi Rank"}),e.rootOnly&&h.push({id:"root-only",type:"rootOnly",value:"true",label:"Root Perks Only"}),e.minLevel!==void 0&&h.push({id:"min-level",type:"minLevel",value:e.minLevel.toString(),label:`Level ${e.minLevel}+`}),h},[e,n]);g.useMemo(()=>{const h=[];return n.skills.forEach(p=>{h.push({id:`skill-${p.id}`,label:p.name,value:p.id,category:"Skills",type:"skill"})}),n.tags.forEach(p=>{h.push({id:`tag-${p}`,label:p,value:p,category:"Tags",type:"tag"})}),h},[n]);const f=g.useCallback(h=>{if(typeof h=="string")c(h);else if(`${h.category}${h.id}`,h.label,h.value,h.category,h.category==="Skill Trees")r(h.value);else if(h.category==="Minimum Level"){const p=parseInt(h.value);isNaN(p)||l(p)}else h.category==="Fuzzy Search"&&c(h.value)},[r,c,l]),m=g.useCallback(h=>{const p=d.find(y=>y.id===h);if(p)p.type==="skill"?a(p.value):p.type==="tag"?i(p.value):p.type==="minLevel"&&l(void 0);else if(h.startsWith("custom-")){const y=h.replace("custom-","");e.searchQuery===y&&c("")}},[d,a,i,l,e.searchQuery,c]);return{selectedTags:[...d.map(h=>({id:h.id,label:h.label,value:h.value,category:h.type})),...e.searchQuery?[{id:`custom-${e.searchQuery}`,label:e.searchQuery,value:e.searchQuery,category:"Fuzzy Search"}]:[]],viewMode:"grid",searchQuery:e.searchQuery,onTagSelect:f,onTagRemove:m,onClearTags:u,onViewModeChange:()=>{},onSearchChange:c}}class yZ{constructor(t,n){Ve(this,"perkNodes");Ve(this,"buildState");this.perkNodes=t,this.buildState=n}transformToPlayerCreationItem(t){var i,l,c,u,d,f;const n=((l=(i=this.buildState.perks)==null?void 0:i.selected)==null?void 0:l[t.skillTree])||[],s=((u=(c=this.buildState.perks)==null?void 0:c.ranks)==null?void 0:u[t.skillTree])||{},r=n.includes(t.edid),a=s[t.edid]||0;return{id:t.edid,name:t.name,description:((f=(d=t.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",category:t.category,tags:t.tags,isSelected:r,originalPerk:t,skillTree:t.skillTree,skillTreeName:t.skillTreeName,isRoot:t.isRoot,hasChildren:t.hasChildren,prerequisites:t.prerequisites,connections:t.connections,totalRanks:t.totalRanks,currentRank:a,isAvailable:this.isPerkAvailable(t),minLevel:t.minLevel}}isPerkAvailable(t){var s,r;if(t.isRoot)return!0;const n=((r=(s=this.buildState.perks)==null?void 0:s.selected)==null?void 0:r[t.skillTree])||[];return t.prerequisites.every(a=>n.includes(a))}applyFilters(t,n){let s=[...t];if(!n)return s;if(n.skills&&n.skills.length>0&&(s=s.filter(r=>n.skills.includes(r.skillTree))),n.categories&&n.categories.length>0&&(s=s.filter(r=>n.categories.includes(r.category))),n.prerequisites&&n.prerequisites.length>0&&(s=s.filter(r=>n.prerequisites.some(a=>r.prerequisites.includes(a)))),n.tags&&n.tags.length>0&&(s=s.filter(r=>n.tags.some(a=>r.tags.includes(a)))),n.minLevel!==void 0&&(s=s.filter(r=>(r.minLevel||0)>=n.minLevel)),n.rankLevel!=="all"&&(s=s.filter(r=>n.rankLevel==="single"?r.totalRanks===1:n.rankLevel==="multi"?r.totalRanks>1:!0)),n.rootOnly&&(s=s.filter(r=>r.isRoot)),n.searchQuery&&n.searchQuery.trim()){const r=n.searchQuery.trim(),a=s.map(u=>{var d,f;return{id:u.edid,name:u.name,description:((f=(d=u.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",searchableText:u.searchableText,tags:u.tags,category:u.category,skillTree:u.skillTreeName,originalNode:u}}),i={keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0};s=new Wt(a,i).search(r).map(u=>u.item.originalNode)}return s}getAvailableFilters(t){const n=new Set,s=new Set,r=new Set,a=new Set;return t.forEach(i=>{n.add(i.skillTree),s.add(i.category),i.tags.forEach(l=>r.add(l)),i.prerequisites.forEach(l=>a.add(l))}),{skills:Array.from(n),categories:Array.from(s),tags:Array.from(r),prerequisites:Array.from(a)}}sortPerks(t,n="name"){const s=[...t];switch(n){case"name":return s.sort((r,a)=>r.name.localeCompare(a.name));case"skill":return s.sort((r,a)=>r.skillTreeName.localeCompare(a.skillTreeName));case"category":return s.sort((r,a)=>r.category.localeCompare(a.category));case"rank":return s.sort((r,a)=>a.totalRanks-r.totalRanks);case"prerequisites":return s.sort((r,a)=>r.prerequisites.length-a.prerequisites.length);default:return s}}}function vZ(e,t){const{build:n}=wt(),s=g.useMemo(()=>new yZ(e,n),[e,n]),r=g.useMemo(()=>s.applyFilters(e,t||{skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[s,e,t]),a=g.useMemo(()=>r.map(l=>s.transformToPlayerCreationItem(l)),[r,s]),i=g.useMemo(()=>s.getAvailableFilters(e),[s,e]);return{model:s,filteredNodes:r,perkItems:a,availableFilters:i}}function bZ(){const{allPerks:e,skillTrees:t,categories:n,tags:s,loading:r,error:a}=fm(),{selectedTags:i,searchQuery:l}=C_(),c=g.useMemo(()=>{const y=i.filter(v=>v.category==="skill").map(v=>v.value),b=i.filter(v=>v.category==="tag").map(v=>v.value),x=i.filter(v=>v.category==="minLevel").map(v=>parseInt(v.value)).find(v=>!isNaN(v));return{skills:y,categories:[],prerequisites:[],tags:b,rankLevel:"all",rootOnly:!1,searchQuery:l||"",minLevel:x}},[i,l]),{filteredNodes:u,perkItems:d,availableFilters:f}=vZ(e,c),m=g.useMemo(()=>{const y=[...new Set(e.map(w=>w.skillTreeName))],b=[...new Set(e.flatMap(w=>w.tags))],x=[...new Set(e.map(w=>w.minLevel||0))].sort((w,v)=>w-v);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:b.map(w=>({id:`keyword-${w}`,label:w,value:w,category:"Fuzzy Search",description:`Perks with ${w} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:y.map(w=>({id:`skill-${w}`,label:w,value:w,category:"Skill Trees",description:`Perks from ${w} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:x.map(w=>({id:`level-${w}`,label:`Level ${w}+`,value:w.toString(),category:"Minimum Level",description:`Perks requiring level ${w} or higher`}))}]},[e]),h=g.useMemo(()=>({totalPerks:e.length,filteredPerks:u.length,rootPerks:e.filter(y=>y.isRoot).length,multiRankPerks:e.filter(y=>y.totalRanks>1).length,singleRankPerks:e.filter(y=>y.totalRanks===1).length,skills:t.length,categories:n.length,tags:s.length}),[e,u,t,n,s]),p=g.useMemo(()=>{const y=new Map;return d.forEach(b=>{y.has(b.skillTree)||y.set(b.skillTree,[]),y.get(b.skillTree).push(b)}),Array.from(y.entries()).map(([b,x])=>{var w;return{skillId:b,skillName:((w=x[0])==null?void 0:w.skillTreeName)||b,perks:x,count:x.length}}).sort((b,x)=>b.skillName.localeCompare(x.skillName))},[d]);return g.useMemo(()=>{const y=new Map;return d.forEach(b=>{y.has(b.category||"")||y.set(b.category||"",[]),y.get(b.category||"").push(b)}),Array.from(y.entries()).map(([b,x])=>({category:b,perks:x,count:x.length})).sort((b,x)=>(b.category||"").localeCompare(x.category||""))},[d]),g.useMemo(()=>d.filter(y=>y.isSelected),[d]),g.useMemo(()=>d.filter(y=>y.isAvailable),[d]),g.useMemo(()=>d.filter(y=>y.isRoot),[d]),g.useMemo(()=>d.filter(y=>y.totalRanks>1),[d]),g.useMemo(()=>d.filter(y=>y.totalRanks===1),[d]),g.useMemo(()=>(y,b="name")=>{const x=[...y];switch(b){case"name":return x.sort((w,v)=>w.name.localeCompare(v.name));case"skill":return x.sort((w,v)=>w.skillTreeName.localeCompare(v.skillTreeName));case"category":return x.sort((w,v)=>(w.category||"").localeCompare(v.category||""));case"rank":return x.sort((w,v)=>v.totalRanks-w.totalRanks);case"prerequisites":return x.sort((w,v)=>w.prerequisites.length-v.prerequisites.length);case"selected":return x.sort((w,v)=>Number(v.isSelected)-Number(w.isSelected));default:return x}},[]),{filteredItems:d,groupedItems:Object.fromEntries(p.map(y=>[y.skillId,y.perks])),stats:{totalPerks:h.totalPerks,skillTrees:h.skills,multiRank:h.multiRankPerks,singleRank:h.singleRankPerks,withPrerequisites:e.filter(y=>y.prerequisites&&y.prerequisites.length>0).length},searchCategories:m,availableFilters:f,isLoading:r,error:a}}function wZ(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u;return{id:l.edid,name:l.name,description:((u=(c=l.ranks[0])==null?void 0:c.description)==null?void 0:u.base)||"",searchableText:l.searchableText,tags:l.tags,category:l.category,skillTree:l.skillTreeName,originalPerk:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Wt(n,s),[n,s]),a=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredPerks:g.useMemo(()=>a.map(l=>l.item.originalPerk),[a]),searchResults:a,searchablePerks:n}}function NZ(){const e=dt(),{build:t}=wt(),{allPerks:n,loading:s,error:r}=fm(),[a,i]=g.useState("list"),c=(()=>{const S=[...new Set(n.map(k=>k.skillTreeName))],C=[...new Set(n.flatMap(k=>k.tags))],E=[...new Set(n.map(k=>k.minLevel||0))].sort((k,_)=>k-_);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:C.map(k=>({id:`keyword-${k}`,label:k,value:k,category:"Fuzzy Search",description:`Perks with ${k} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:S.map(k=>({id:`skill-${k}`,label:k,value:k,category:"Skill Trees",description:`Perks from ${k} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:E.map(k=>({id:`level-${k}`,label:`Level ${k}+`,value:k.toString(),category:"Minimum Level",description:`Perks requiring level ${k} or higher`}))}]})(),[u,d]=g.useState([]),f=S=>{let C;typeof S=="string"?C={id:`custom-${S}`,label:S,value:S,category:"Fuzzy Search"}:C={id:`${S.category}-${S.id}`,label:S.label,value:S.value,category:S.category},u.some(E=>E.value===C.value&&E.category===C.category)||d(E=>[...E,C])},m=S=>{d(C=>C.filter(E=>E.id!==S))},h=n.filter(S=>u.length===0?!0:u.every(C=>{switch(C.category){case"Fuzzy Search":return!0;case"Skill Trees":return S.skillTreeName===C.value;case"Minimum Level":const E=parseInt(C.value);return!isNaN(E)&&(S.minLevel||0)>=E;default:return!0}})),p=u.filter(S=>S.category==="Fuzzy Search").map(S=>S.value).join(" "),{filteredPerks:y}=wZ(h,p),b=y.map(S=>({...hk(S,t),originalPerk:S})),[x,w]=g.useState(new Set),v=S=>{const C=new Set(x);if(a==="grid"){const k=b.findIndex(M=>M.id===S),P=Math.floor(k/3)*3,O=Math.min(P+3,b.length);b.slice(P,O).some(M=>C.has(M.id))?b.slice(P,O).forEach(M=>{C.delete(M.id)}):b.slice(P,O).forEach(M=>{C.add(M.id)})}else C.has(S)?C.delete(S):C.add(S);w(C)},N=()=>{d([])},j=S=>{i(S),w(new Set)};return s?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading perk data..."})]})}):r?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:r}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsx(Un,{title:"Perk References",description:"Browse and search all available perks. Find the perfect abilities for your character build.",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"flex items-center gap-2",children:[o.jsx(cg,{className:"h-4 w-4"}),"Back"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(xa,{categories:c,onSelect:f,onCustomSearch:f,className:"w-full"}),u.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:N,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx("svg",{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Clear All"]}),u.map(S=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(S.id),title:"Click to remove",children:[S.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},S.id))]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("span",{className:"text-sm text-muted-foreground",children:[b.length," perk",b.length!==1?"s":""," found"]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(K,{variant:a==="grid"?"default":"outline",size:"sm",onClick:()=>j("grid"),className:"flex items-center gap-2",children:[o.jsx(Fi,{className:"h-4 w-4"}),"Grid"]}),o.jsxs(K,{variant:a==="list"?"default":"outline",size:"sm",onClick:()=>j("list"),className:"flex items-center gap-2",children:[o.jsx(oo,{className:"h-4 w-4"}),"List"]})]})]}),a==="grid"?o.jsx(wC,{columns:3,gap:"md",children:b.map(S=>o.jsx(Og,{item:S,isExpanded:x.has(S.id),onToggle:()=>v(S.id),viewMode:"grid"},S.id))}):o.jsx("div",{className:"space-y-2",children:b.map(S=>o.jsx(Og,{item:S,isExpanded:x.has(S.id),onToggle:()=>v(S.id),viewMode:"list"},S.id))})]})})}function _w(){const{skills:e,loading:t,error:n,searchQuery:s,setSearchQuery:r,selectedCategory:a,setSelectedCategory:i,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:y}=N_(),{filteredItems:b,groupedItems:x,stats:w,isLoading:v,error:N,searchCategories:j}=bZ(),{selectedTags:S,viewMode:C,searchQuery:E,onTagSelect:k,onTagRemove:_,onClearTags:P,onViewModeChange:O,onSearchChange:$}=C_();return t||v?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading data..."})]})}):n||N?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:n||N}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsx(Un,{title:"Skills & Perks",description:"Manage your character's skills and browse all available perks.",children:o.jsx("div",{className:"mb-6",children:o.jsxs(Wi,{defaultValue:"builder",className:"w-full",children:[o.jsxs(Ki,{className:"grid w-full grid-cols-2",children:[o.jsx(an,{value:"builder",children:"Perk Builder"}),o.jsx(an,{value:"reference",children:"Perk References"})]}),o.jsx(wn,{value:"builder",className:"space-y-4",children:o.jsx(xZ,{skills:e,loading:t,error:n,searchQuery:s,onSearchChange:r,selectedCategory:a,onCategorySelect:i,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:y})}),o.jsx(wn,{value:"reference",className:"space-y-4",children:o.jsx(NZ,{items:b,groupedItems:x,stats:w,searchCategories:j,selectedTags:S,viewMode:C,searchQuery:E,onTagSelect:k,onTagRemove:_,onClearTags:P,onViewModeChange:O,onSearchChange:$})})]})})})}function jZ({className:e}){var P;const{selectedMajorSkills:t,selectedMinorSkills:n,availableSkills:s,handleMajorSkillSelect:r,handleMinorSkillSelect:a,handleMajorSkillRemove:i,handleMinorSkillRemove:l}=rZ(),{build:c,getSkillLevel:u,getSkillPerks:d}=wt(),{skills:f}=K0(),m=dt(),[h,p]=g.useState(null),[y,b]=g.useState(!1),x=()=>{m("/skills")},w=O=>{console.log("Opening perk tree for skill:",O),p(O),b(!0)},v=O=>{p(O.edid),b(!0)},N=g.useMemo(()=>{const O=t.map(D=>D.id),$=n.map(D=>D.id),M=[...O,...$];return f.filter(D=>d(D.id).length>0&&!M.includes(D.id))},[f,t,n,d]),j=g.useMemo(()=>{const O=t.map(A=>A.id),$=n.map(A=>A.id),M=[...O,...$],D=N.map(A=>A.id);return f.filter(A=>!M.includes(A.id)&&!D.includes(A.id)).map(A=>({name:A.name,edid:A.id,category:A.category,description:A.description,scaling:"",keyAbilities:A.keyAbilities||[],metaTags:A.metaTags||[]}))},[f,t,n,N]),S=O=>({name:O.name,edid:O.id,category:O.category,description:O.description,scaling:O.scaling||"",keyAbilities:O.keyAbilities||[],metaTags:O.metaTags||[]}),C=g.useMemo(()=>{const O=t.map(D=>D.id),$=n.map(D=>D.id),M=[...O,...$];return f.filter(D=>{const A=d(D.id);return M.includes(D.id)&&A.length===0})},[f,t,n,d]),E=f.map(O=>{d(O.id);const $=u(O.id),M=c.skills.major.includes(O.id),D=c.skills.minor.includes(O.id),A=!M&&c.skills.major.length<3,z=!D&&c.skills.minor.length<6;return{...O,isMajor:M,isMinor:D,canAssignMajor:A,canAssignMinor:z,level:$}}),{selectedPerkTree:k}=Q0(h),_=(O,$)=>{const M=u(O.id||O.edid),D=d(O.id||O.edid),A=O.totalPerks||0,z=O.id||O.edid;let T="cursor-pointer transition-all hover:shadow-md ",R="text-xs ";switch($){case"major":T+="bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",R+="bg-yellow-100 text-yellow-800 border-yellow-300";break;case"minor":T+="bg-gray-50/50 border-gray-300 shadow-gray-300/20",R+="bg-gray-100 text-gray-800 border-gray-300";break;case"perked":T+="bg-blue-50/50 border-blue-500 shadow-blue-500/20",R+="bg-blue-100 text-blue-800 border-blue-300";break;case"assigned":T+="bg-orange-50/50 border-orange-500 shadow-orange-500/20",R+="bg-orange-100 text-orange-800 border-orange-300";break}return o.jsx(be,{className:T,onClick:()=>w(z),children:o.jsx(we,{className:"p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h5",{className:"font-medium text-sm text-foreground",children:O.name}),o.jsx(Dc,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(Be,{text:O.description,className:"text-xs text-muted-foreground line-clamp-2 mb-3",as:"p"}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx(Uk,{level:M,size:"sm"}),o.jsxs(X,{variant:"outline",className:R,children:[D.length,"/",A," perks"]}),$==="major"&&o.jsx(X,{variant:"outline",className:"text-xs bg-yellow-100 text-yellow-800 border-yellow-300",children:"Major"}),$==="minor"&&o.jsx(X,{variant:"outline",className:"text-xs bg-gray-100 text-gray-800 border-gray-300",children:"Minor"}),$==="perked"&&o.jsx(X,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800 border-blue-300",children:"Perked"}),$==="assigned"&&o.jsx(X,{variant:"outline",className:"text-xs bg-orange-100 text-orange-800 border-orange-300",children:"Assigned"})]})]}),($==="major"||$==="minor")&&o.jsx(K,{size:"sm",variant:"ghost",onClick:B=>{B.stopPropagation(),$==="major"?i(z):l(z)},className:`${$==="major"?"text-yellow-600 hover:text-yellow-700 hover:bg-yellow-100":"text-gray-600 hover:text-gray-700 hover:bg-gray-100"}`,children:o.jsx(qt,{className:"h-4 w-4"})})]})})},z)};return o.jsxs(o.Fragment,{children:[o.jsxs(Bn,{title:"Skills & Perks",navigateTo:"skills",onNavigate:x,className:e,children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Major Skills"}),t.length<3&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(X,{variant:"outline",className:"text-xs",children:[t.length,"/3"]})}),o.jsx(Sh,{skills:s.map(S),onSelect:O=>{const $=s.find(M=>M.id===O.edid);$&&r($)},placeholder:"Select major skill...",className:"w-full"})]}),t.length>0&&o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:t.map(O=>_(O,"major"))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Minor Skills"}),n.length<6&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(X,{variant:"outline",className:"text-xs",children:[n.length,"/6"]})}),o.jsx(Sh,{skills:s.map(S),onSelect:O=>{const $=s.find(M=>M.id===O.edid);$&&a($)},placeholder:"Select minor skill...",className:"w-full"})]}),n.length>0&&o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:n.map(O=>_(O,"minor"))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Other Perked Skills"}),o.jsx("div",{className:"space-y-2",children:o.jsx(Sh,{skills:j,onSelect:v,placeholder:"Select skill to add perks...",className:"w-full"})}),N.length>0&&o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:N.map(O=>_(O,"perked"))})]}),C.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Assigned Skills (No Perks)"}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:C.map(O=>_(O,"assigned"))})]})]}),o.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on any skill card to view and manage its perk tree. Skill levels show the minimum level required based on your perk selections."})})]}),o.jsx(S_,{open:y,onOpenChange:b,selectedSkill:h,skillName:h?(P=f.find(O=>O.id===h))==null?void 0:P.name:void 0,perkTree:k||void 0,skills:E,onSkillSelect:p,onReset:()=>{}})]})}function V(e,t,n){function s(l,c){var u;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(u=l._zod).traits??(u.traits=new Set),l._zod.traits.add(e),t(l,c);for(const d in i.prototype)d in l||Object.defineProperty(l,d,{value:i.prototype[d].bind(l)});l._zod.constr=i,l._zod.def=c}const r=(n==null?void 0:n.Parent)??Object;class a extends r{}Object.defineProperty(a,"name",{value:e});function i(l){var c;const u=n!=null&&n.Parent?new a:this;s(u,l),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(i,"init",{value:s}),Object.defineProperty(i,Symbol.hasInstance,{value:l=>{var c,u;return n!=null&&n.Parent&&l instanceof n.Parent?!0:(u=(c=l==null?void 0:l._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class xc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const k_={};function Qa(e){return k_}function SZ(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,r])=>t.indexOf(+s)===-1).map(([s,r])=>r)}function CZ(e,t){return typeof t=="bigint"?t.toString():t}function E_(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function J0(e){return e==null}function ey(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function kZ(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,r=n>s?n:s,a=Number.parseInt(e.toFixed(r).replace(".","")),i=Number.parseInt(t.toFixed(r).replace(".",""));return a%i/10**r}function We(e,t,n){Object.defineProperty(e,t,{get(){{const s=n();return e[t]=s,s}},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function ty(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function vl(e){return JSON.stringify(e)}const __=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function rp(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const EZ=E_(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function ap(e){if(rp(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(rp(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const _Z=new Set(["string","number","symbol"]);function bm(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yo(e,t,n){const s=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(s._zod.parent=e),s}function ce(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function AZ(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const MZ={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function TZ(e,t){const n={},s=e._zod.def;for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(n[r]=s.shape[r])}return yo(e,{...e._zod.def,shape:n,checks:[]})}function RZ(e,t){const n={...e._zod.def.shape},s=e._zod.def;for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&delete n[r]}return yo(e,{...e._zod.def,shape:n,checks:[]})}function DZ(e,t){if(!ap(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return ty(this,"shape",s),s},checks:[]};return yo(e,n)}function zZ(e,t){return yo(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return ty(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function LZ(e,t,n){const s=t._zod.def.shape,r={...s};if(n)for(const a in n){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(r[a]=e?new e({type:"optional",innerType:s[a]}):s[a])}else for(const a in s)r[a]=e?new e({type:"optional",innerType:s[a]}):s[a];return yo(t,{...t._zod.def,shape:r,checks:[]})}function $Z(e,t,n){const s=t._zod.def.shape,r={...s};if(n)for(const a in n){if(!(a in r))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(r[a]=new e({type:"nonoptional",innerType:s[a]}))}else for(const a in s)r[a]=new e({type:"nonoptional",innerType:s[a]});return yo(t,{...t._zod.def,shape:r,checks:[]})}function Bl(e,t=0){var n;for(let s=t;s<e.issues.length;s++)if(((n=e.issues[s])==null?void 0:n.continue)!==!0)return!0;return!1}function ny(e,t){return t.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(e),n})}function Ou(e){return typeof e=="string"?e:e==null?void 0:e.message}function Ja(e,t,n){var r,a,i,l,c,u;const s={...e,path:e.path??[]};if(!e.message){const d=Ou((i=(a=(r=e.inst)==null?void 0:r._zod.def)==null?void 0:a.error)==null?void 0:i.call(a,e))??Ou((l=t==null?void 0:t.error)==null?void 0:l.call(t,e))??Ou((c=n.customError)==null?void 0:c.call(n,e))??Ou((u=n.localeError)==null?void 0:u.call(n,e))??"Invalid input";s.message=d}return delete s.inst,delete s.continue,t!=null&&t.reportInput||delete s.input,s}function sy(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function yc(...e){const[t,n,s]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:s}:{...t}}const A_=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,CZ,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},M_=V("$ZodError",A_),T_=V("$ZodError",A_,{Parent:Error});function PZ(e,t=n=>n.message){const n={},s=[];for(const r of e.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):s.push(t(r));return{formErrors:s,fieldErrors:n}}function OZ(e,t){const n=t||function(a){return a.message},s={_errors:[]},r=a=>{for(const i of a.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(l=>r({issues:l}));else if(i.code==="invalid_key")r({issues:i.issues});else if(i.code==="invalid_element")r({issues:i.issues});else if(i.path.length===0)s._errors.push(n(i));else{let l=s,c=0;for(;c<i.path.length;){const u=i.path[c];c===i.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(i))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return r(e),s}const BZ=e=>(t,n,s,r)=>{const a=s?Object.assign(s,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},a);if(i instanceof Promise)throw new xc;if(i.issues.length){const l=new((r==null?void 0:r.Err)??e)(i.issues.map(c=>Ja(c,a,Qa())));throw __(l,r==null?void 0:r.callee),l}return i.value},IZ=e=>async(t,n,s,r)=>{const a=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},a);if(i instanceof Promise&&(i=await i),i.issues.length){const l=new((r==null?void 0:r.Err)??e)(i.issues.map(c=>Ja(c,a,Qa())));throw __(l,r==null?void 0:r.callee),l}return i.value},R_=e=>(t,n,s)=>{const r=s?{...s,async:!1}:{async:!1},a=t._zod.run({value:n,issues:[]},r);if(a instanceof Promise)throw new xc;return a.issues.length?{success:!1,error:new(e??M_)(a.issues.map(i=>Ja(i,r,Qa())))}:{success:!0,data:a.value}},HZ=R_(T_),D_=e=>async(t,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},r);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(i=>Ja(i,r,Qa())))}:{success:!0,data:a.value}},UZ=D_(T_),FZ=/^[cC][^\s-]{8,}$/,VZ=/^[0-9a-z]+$/,qZ=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ZZ=/^[0-9a-vA-V]{20}$/,GZ=/^[A-Za-z0-9]{27}$/,YZ=/^[a-zA-Z0-9_-]{21}$/,XZ=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,WZ=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Aw=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,KZ=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,QZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function JZ(){return new RegExp(QZ,"u")}const eG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tG=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,nG=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,sG=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rG=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,z_=/^[A-Za-z0-9_-]*$/,aG=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,oG=/^\+(?:[0-9]){6,14}[0-9]$/,L_="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",iG=new RegExp(`^${L_}$`);function $_(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function lG(e){return new RegExp(`^${$_(e)}$`)}function cG(e){const t=$_({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const s=`${t}(?:${n.join("|")})`;return new RegExp(`^${L_}T(?:${s})$`)}const uG=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},dG=/^\d+$/,fG=/^-?\d+(?:\.\d+)?/i,mG=/true|false/i,hG=/^[^A-Z]*$/,gG=/^[^a-z]*$/,fn=V("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),P_={number:"number",bigint:"bigint",object:"date"},O_=V("$ZodCheckLessThan",(e,t)=>{fn.init(e,t);const n=P_[typeof t.value];e._zod.onattach.push(s=>{const r=s._zod.bag,a=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<a&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:n,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),B_=V("$ZodCheckGreaterThan",(e,t)=>{fn.init(e,t);const n=P_[typeof t.value];e._zod.onattach.push(s=>{const r=s._zod.bag,a=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>a&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:n,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),pG=V("$ZodCheckMultipleOf",(e,t)=>{fn.init(e,t),e._zod.onattach.push(n=>{var s;(s=n._zod.bag).multipleOf??(s.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):kZ(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),xG=V("$ZodCheckNumberFormat",(e,t)=>{var i;fn.init(e,t),t.format=t.format||"float64";const n=(i=t.format)==null?void 0:i.includes("int"),s=n?"int":"number",[r,a]=MZ[t.format];e._zod.onattach.push(l=>{const c=l._zod.bag;c.format=t.format,c.minimum=r,c.maximum=a,n&&(c.pattern=dG)}),e._zod.check=l=>{const c=l.value;if(n){if(!Number.isInteger(c)){l.issues.push({expected:s,format:t.format,code:"invalid_type",input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}c<r&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),c>a&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:a,inst:e})}}),yG=V("$ZodCheckMaxLength",(e,t)=>{var n;fn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!J0(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const r=s.value;if(r.length<=t.maximum)return;const i=sy(r);s.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),vG=V("$ZodCheckMinLength",(e,t)=>{var n;fn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!J0(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const r=s.value;if(r.length>=t.minimum)return;const i=sy(r);s.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),bG=V("$ZodCheckLengthEquals",(e,t)=>{var n;fn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!J0(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=s=>{const r=s.value,a=r.length;if(a===t.length)return;const i=sy(r),l=a>t.length;s.issues.push({origin:i,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),wm=V("$ZodCheckStringFormat",(e,t)=>{var n,s;fn.init(e,t),e._zod.onattach.push(r=>{const a=r._zod.bag;a.format=t.format,t.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),wG=V("$ZodCheckRegex",(e,t)=>{wm.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),NG=V("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=hG),wm.init(e,t)}),jG=V("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=gG),wm.init(e,t)}),SG=V("$ZodCheckIncludes",(e,t)=>{fn.init(e,t);const n=bm(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=s,e._zod.onattach.push(r=>{const a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(s)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),CG=V("$ZodCheckStartsWith",(e,t)=>{fn.init(e,t);const n=new RegExp(`^${bm(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),kG=V("$ZodCheckEndsWith",(e,t)=>{fn.init(e,t);const n=new RegExp(`.*${bm(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),EG=V("$ZodCheckOverwrite",(e,t)=>{fn.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class _G{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(i=>i),r=Math.min(...s.map(i=>i.length-i.trimStart().length)),a=s.map(i=>i.slice(r)).map(i=>" ".repeat(this.indent*2)+i);for(const i of a)this.content.push(i)}compile(){const t=Function,n=this==null?void 0:this.args,r=[...((this==null?void 0:this.content)??[""]).map(a=>`  ${a}`)];return new t(...n,r.join(`
`))}}const AG={major:4,minor:0,patch:5},ut=V("$ZodType",(e,t)=>{var r;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=AG;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const a of s)for(const i of a._zod.onattach)i(e);if(s.length===0)(n=e._zod).deferred??(n.deferred=[]),(r=e._zod.deferred)==null||r.push(()=>{e._zod.run=e._zod.parse});else{const a=(i,l,c)=>{let u=Bl(i),d;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(i))continue}else if(u)continue;const m=i.issues.length,h=f._zod.check(i);if(h instanceof Promise&&(c==null?void 0:c.async)===!1)throw new xc;if(d||h instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await h,i.issues.length!==m&&(u||(u=Bl(i,m)))});else{if(i.issues.length===m)continue;u||(u=Bl(i,m))}}return d?d.then(()=>i):i};e._zod.run=(i,l)=>{const c=e._zod.parse(i,l);if(c instanceof Promise){if(l.async===!1)throw new xc;return c.then(u=>a(u,s,l))}return a(c,s,l)}}e["~standard"]={validate:a=>{var i;try{const l=HZ(e,a);return l.success?{value:l.data}:{issues:(i=l.error)==null?void 0:i.issues}}catch{return UZ(e,a).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),ry=V("$ZodString",(e,t)=>{var n;ut.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??uG(e._zod.bag),e._zod.parse=(s,r)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),tt=V("$ZodStringFormat",(e,t)=>{wm.init(e,t),ry.init(e,t)}),MG=V("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=WZ),tt.init(e,t)}),TG=V("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Aw(s))}else t.pattern??(t.pattern=Aw());tt.init(e,t)}),RG=V("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=KZ),tt.init(e,t)}),DG=V("$ZodURL",(e,t)=>{tt.init(e,t),e._zod.check=n=>{try{const s=n.value,r=new URL(s),a=r.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:aG.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!s.endsWith("/")&&a.endsWith("/")?n.value=a.slice(0,-1):n.value=a;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),zG=V("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=JZ()),tt.init(e,t)}),LG=V("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=YZ),tt.init(e,t)}),$G=V("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=FZ),tt.init(e,t)}),PG=V("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=VZ),tt.init(e,t)}),OG=V("$ZodULID",(e,t)=>{t.pattern??(t.pattern=qZ),tt.init(e,t)}),BG=V("$ZodXID",(e,t)=>{t.pattern??(t.pattern=ZZ),tt.init(e,t)}),IG=V("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=GZ),tt.init(e,t)}),HG=V("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=cG(t)),tt.init(e,t)}),UG=V("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=iG),tt.init(e,t)}),FG=V("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=lG(t)),tt.init(e,t)}),VG=V("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=XZ),tt.init(e,t)}),qG=V("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=eG),tt.init(e,t),e._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv4"})}),ZG=V("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=tG),tt.init(e,t),e._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),GG=V("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=nG),tt.init(e,t)}),YG=V("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=sG),tt.init(e,t),e._zod.check=n=>{const[s,r]=n.value.split("/");try{if(!r)throw new Error;const a=Number(r);if(`${a}`!==r)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function I_(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const XG=V("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=rG),tt.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{I_(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function WG(e){if(!z_.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return I_(n)}const KG=V("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=z_),tt.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{WG(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),QG=V("$ZodE164",(e,t)=>{t.pattern??(t.pattern=oG),tt.init(e,t)});function JG(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[s]=n;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const eY=V("$ZodJWT",(e,t)=>{tt.init(e,t),e._zod.check=n=>{JG(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),H_=V("$ZodNumber",(e,t)=>{ut.init(e,t),e._zod.pattern=e._zod.bag.pattern??fG,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const a=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...a?{received:a}:{}}),n}}),tY=V("$ZodNumber",(e,t)=>{xG.init(e,t),H_.init(e,t)}),nY=V("$ZodBoolean",(e,t)=>{ut.init(e,t),e._zod.pattern=mG,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),n}}),sY=V("$ZodUnknown",(e,t)=>{ut.init(e,t),e._zod.parse=n=>n}),rY=V("$ZodNever",(e,t)=>{ut.init(e,t),e._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function Mw(e,t,n){e.issues.length&&t.issues.push(...ny(n,e.issues)),t.value[n]=e.value}const aY=V("$ZodArray",(e,t)=>{ut.init(e,t),e._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),n;n.value=Array(r.length);const a=[];for(let i=0;i<r.length;i++){const l=r[i],c=t.element._zod.run({value:l,issues:[]},s);c instanceof Promise?a.push(c.then(u=>Mw(u,n,i))):Mw(c,n,i)}return a.length?Promise.all(a).then(()=>n):n}});function Bu(e,t,n){e.issues.length&&t.issues.push(...ny(n,e.issues)),t.value[n]=e.value}function Tw(e,t,n,s){e.issues.length?s[n]===void 0?n in s?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...ny(n,e.issues)):e.value===void 0?n in s&&(t.value[n]=void 0):t.value[n]=e.value}const oY=V("$ZodObject",(e,t)=>{ut.init(e,t);const n=E_(()=>{const f=Object.keys(t.shape);for(const h of f)if(!(t.shape[h]instanceof ut))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const m=AZ(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});We(e._zod,"propValues",()=>{const f=t.shape,m={};for(const h in f){const p=f[h]._zod;if(p.values){m[h]??(m[h]=new Set);for(const y of p.values)m[h].add(y)}}return m});const s=f=>{const m=new _G(["shape","payload","ctx"]),h=n.value,p=w=>{const v=vl(w);return`shape[${v}]._zod.run({ value: input[${v}], issues: [] }, ctx)`};m.write("const input = payload.value;");const y=Object.create(null);let b=0;for(const w of h.keys)y[w]=`key_${b++}`;m.write("const newResult = {}");for(const w of h.keys)if(h.optionalKeys.has(w)){const v=y[w];m.write(`const ${v} = ${p(w)};`);const N=vl(w);m.write(`
        if (${v}.issues.length) {
          if (input[${N}] === undefined) {
            if (${N} in input) {
              newResult[${N}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${v}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${N}, ...iss.path] : [${N}],
              }))
            );
          }
        } else if (${v}.value === undefined) {
          if (${N} in input) newResult[${N}] = undefined;
        } else {
          newResult[${N}] = ${v}.value;
        }
        `)}else{const v=y[w];m.write(`const ${v} = ${p(w)};`),m.write(`
          if (${v}.issues.length) payload.issues = payload.issues.concat(${v}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${vl(w)}, ...iss.path] : [${vl(w)}]
          })));`),m.write(`newResult[${vl(w)}] = ${v}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const x=m.compile();return(w,v)=>x(f,w,v)};let r;const a=rp,i=!k_.jitless,c=i&&EZ.value,u=t.catchall;let d;e._zod.parse=(f,m)=>{d??(d=n.value);const h=f.value;if(!a(h))return f.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),f;const p=[];if(i&&c&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)r||(r=s(t.shape)),f=r(f,m);else{f.value={};const v=d.shape;for(const N of d.keys){const j=v[N],S=j._zod.run({value:h[N],issues:[]},m),C=j._zod.optin==="optional"&&j._zod.optout==="optional";S instanceof Promise?p.push(S.then(E=>C?Tw(E,f,N,h):Bu(E,f,N))):C?Tw(S,f,N,h):Bu(S,f,N)}}if(!u)return p.length?Promise.all(p).then(()=>f):f;const y=[],b=d.keySet,x=u._zod,w=x.def.type;for(const v of Object.keys(h)){if(b.has(v))continue;if(w==="never"){y.push(v);continue}const N=x.run({value:h[v],issues:[]},m);N instanceof Promise?p.push(N.then(j=>Bu(j,f,v))):Bu(N,f,v)}return y.length&&f.issues.push({code:"unrecognized_keys",keys:y,input:h,inst:e}),p.length?Promise.all(p).then(()=>f):f}});function Rw(e,t,n,s){for(const r of e)if(r.issues.length===0)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(r=>r.issues.map(a=>Ja(a,s,Qa())))}),t}const iY=V("$ZodUnion",(e,t)=>{ut.init(e,t),We(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),We(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),We(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),We(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${n.map(s=>ey(s.source)).join("|")})$`)}}),e._zod.parse=(n,s)=>{let r=!1;const a=[];for(const i of t.options){const l=i._zod.run({value:n.value,issues:[]},s);if(l instanceof Promise)a.push(l),r=!0;else{if(l.issues.length===0)return l;a.push(l)}}return r?Promise.all(a).then(i=>Rw(i,n,e,s)):Rw(a,n,e,s)}}),lY=V("$ZodIntersection",(e,t)=>{ut.init(e,t),e._zod.parse=(n,s)=>{const r=n.value,a=t.left._zod.run({value:r,issues:[]},s),i=t.right._zod.run({value:r,issues:[]},s);return a instanceof Promise||i instanceof Promise?Promise.all([a,i]).then(([c,u])=>Dw(n,c,u)):Dw(n,a,i)}});function op(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(ap(e)&&ap(t)){const n=Object.keys(t),s=Object.keys(e).filter(a=>n.indexOf(a)!==-1),r={...e,...t};for(const a of s){const i=op(e[a],t[a]);if(!i.valid)return{valid:!1,mergeErrorPath:[a,...i.mergeErrorPath]};r[a]=i.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<e.length;s++){const r=e[s],a=t[s],i=op(r,a);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Dw(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Bl(e))return e;const s=op(t.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const cY=V("$ZodEnum",(e,t)=>{ut.init(e,t);const n=SZ(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(s=>_Z.has(typeof s)).map(s=>typeof s=="string"?bm(s):s.toString()).join("|")})$`),e._zod.parse=(s,r)=>{const a=s.value;return e._zod.values.has(a)||s.issues.push({code:"invalid_value",values:n,input:a,inst:e}),s}}),uY=V("$ZodTransform",(e,t)=>{ut.init(e,t),e._zod.parse=(n,s)=>{const r=t.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(i=>(n.value=i,n));if(r instanceof Promise)throw new xc;return n.value=r,n}}),dY=V("$ZodOptional",(e,t)=>{ut.init(e,t),e._zod.optin="optional",e._zod.optout="optional",We(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),We(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${ey(n.source)})?$`):void 0}),e._zod.parse=(n,s)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,s):n.value===void 0?n:t.innerType._zod.run(n,s)}),fY=V("$ZodNullable",(e,t)=>{ut.init(e,t),We(e._zod,"optin",()=>t.innerType._zod.optin),We(e._zod,"optout",()=>t.innerType._zod.optout),We(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${ey(n.source)}|null)$`):void 0}),We(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,s)=>n.value===null?n:t.innerType._zod.run(n,s)}),mY=V("$ZodDefault",(e,t)=>{ut.init(e,t),e._zod.optin="optional",We(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(a=>zw(a,t)):zw(r,t)}});function zw(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const hY=V("$ZodPrefault",(e,t)=>{ut.init(e,t),e._zod.optin="optional",We(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,s))}),gY=V("$ZodNonOptional",(e,t)=>{ut.init(e,t),We(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(a=>Lw(a,e)):Lw(r,e)}});function Lw(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const pY=V("$ZodCatch",(e,t)=>{ut.init(e,t),e._zod.optin="optional",We(e._zod,"optout",()=>t.innerType._zod.optout),We(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(a=>(n.value=a.value,a.issues.length&&(n.value=t.catchValue({...n,error:{issues:a.issues.map(i=>Ja(i,s,Qa()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(a=>Ja(a,s,Qa()))},input:n.value}),n.issues=[]),n)}}),xY=V("$ZodPipe",(e,t)=>{ut.init(e,t),We(e._zod,"values",()=>t.in._zod.values),We(e._zod,"optin",()=>t.in._zod.optin),We(e._zod,"optout",()=>t.out._zod.optout),We(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,s)=>{const r=t.in._zod.run(n,s);return r instanceof Promise?r.then(a=>$w(a,t,s)):$w(r,t,s)}});function $w(e,t,n){return Bl(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const yY=V("$ZodReadonly",(e,t)=>{ut.init(e,t),We(e._zod,"propValues",()=>t.innerType._zod.propValues),We(e._zod,"values",()=>t.innerType._zod.values),We(e._zod,"optin",()=>t.innerType._zod.optin),We(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(Pw):Pw(r)}});function Pw(e){return e.value=Object.freeze(e.value),e}const vY=V("$ZodCustom",(e,t)=>{fn.init(e,t),ut.init(e,t),e._zod.parse=(n,s)=>n,e._zod.check=n=>{const s=n.value,r=t.fn(s);if(r instanceof Promise)return r.then(a=>Ow(a,n,s,e));Ow(r,n,s,e)}});function Ow(e,t,n,s){if(!e){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),t.issues.push(yc(r))}}class bY{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const s=n[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const s={...this.get(n)??{}};return delete s.id,{...s,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function wY(){return new bY}const Iu=wY();function NY(e,t){return new e({type:"string",...ce(t)})}function jY(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ce(t)})}function Bw(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ce(t)})}function SY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ce(t)})}function CY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ce(t)})}function kY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ce(t)})}function EY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ce(t)})}function _Y(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ce(t)})}function AY(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ce(t)})}function MY(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ce(t)})}function TY(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ce(t)})}function RY(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ce(t)})}function DY(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ce(t)})}function zY(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ce(t)})}function LY(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ce(t)})}function $Y(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ce(t)})}function PY(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ce(t)})}function OY(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ce(t)})}function BY(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ce(t)})}function IY(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ce(t)})}function HY(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ce(t)})}function UY(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ce(t)})}function FY(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ce(t)})}function VY(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ce(t)})}function qY(e,t){return new e({type:"string",format:"date",check:"string_format",...ce(t)})}function ZY(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ce(t)})}function GY(e,t){return new e({type:"string",format:"duration",check:"string_format",...ce(t)})}function YY(e,t){return new e({type:"number",checks:[],...ce(t)})}function XY(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...ce(t)})}function WY(e,t){return new e({type:"boolean",...ce(t)})}function KY(e){return new e({type:"unknown"})}function QY(e,t){return new e({type:"never",...ce(t)})}function Iw(e,t){return new O_({check:"less_than",...ce(t),value:e,inclusive:!1})}function Ch(e,t){return new O_({check:"less_than",...ce(t),value:e,inclusive:!0})}function Hw(e,t){return new B_({check:"greater_than",...ce(t),value:e,inclusive:!1})}function kh(e,t){return new B_({check:"greater_than",...ce(t),value:e,inclusive:!0})}function Uw(e,t){return new pG({check:"multiple_of",...ce(t),value:e})}function U_(e,t){return new yG({check:"max_length",...ce(t),maximum:e})}function ef(e,t){return new vG({check:"min_length",...ce(t),minimum:e})}function F_(e,t){return new bG({check:"length_equals",...ce(t),length:e})}function JY(e,t){return new wG({check:"string_format",format:"regex",...ce(t),pattern:e})}function eX(e){return new NG({check:"string_format",format:"lowercase",...ce(e)})}function tX(e){return new jG({check:"string_format",format:"uppercase",...ce(e)})}function nX(e,t){return new SG({check:"string_format",format:"includes",...ce(t),includes:e})}function sX(e,t){return new CG({check:"string_format",format:"starts_with",...ce(t),prefix:e})}function rX(e,t){return new kG({check:"string_format",format:"ends_with",...ce(t),suffix:e})}function Wc(e){return new EG({check:"overwrite",tx:e})}function aX(e){return Wc(t=>t.normalize(e))}function oX(){return Wc(e=>e.trim())}function iX(){return Wc(e=>e.toLowerCase())}function lX(){return Wc(e=>e.toUpperCase())}function cX(e,t,n){return new e({type:"array",element:t,...ce(n)})}function uX(e,t,n){return new e({type:"custom",check:"custom",fn:t,...ce(n)})}const dX=V("ZodISODateTime",(e,t)=>{HG.init(e,t),ot.init(e,t)});function fX(e){return VY(dX,e)}const mX=V("ZodISODate",(e,t)=>{UG.init(e,t),ot.init(e,t)});function hX(e){return qY(mX,e)}const gX=V("ZodISOTime",(e,t)=>{FG.init(e,t),ot.init(e,t)});function pX(e){return ZY(gX,e)}const xX=V("ZodISODuration",(e,t)=>{VG.init(e,t),ot.init(e,t)});function yX(e){return GY(xX,e)}const vX=(e,t)=>{M_.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>OZ(e,n)},flatten:{value:n=>PZ(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},Nm=V("ZodError",vX,{Parent:Error}),bX=BZ(Nm),wX=IZ(Nm),NX=R_(Nm),jX=D_(Nm),Nt=V("ZodType",(e,t)=>(ut.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),e.clone=(n,s)=>yo(e,n,s),e.brand=()=>e,e.register=(n,s)=>(n.add(e,s),e),e.parse=(n,s)=>bX(e,n,s,{callee:e.parse}),e.safeParse=(n,s)=>NX(e,n,s),e.parseAsync=async(n,s)=>wX(e,n,s,{callee:e.parseAsync}),e.safeParseAsync=async(n,s)=>jX(e,n,s),e.spa=e.safeParseAsync,e.refine=(n,s)=>e.check(pW(n,s)),e.superRefine=n=>e.check(xW(n)),e.overwrite=n=>e.check(Wc(n)),e.optional=()=>Zw(e),e.nullable=()=>Gw(e),e.nullish=()=>Zw(Gw(e)),e.nonoptional=n=>lW(e,n),e.array=()=>eo(e),e.or=n=>KX([e,n]),e.and=n=>JX(e,n),e.transform=n=>Yw(e,nW(n)),e.default=n=>aW(e,n),e.prefault=n=>iW(e,n),e.catch=n=>uW(e,n),e.pipe=n=>Yw(e,n),e.readonly=()=>mW(e),e.describe=n=>{const s=e.clone();return Iu.add(s,{description:n}),s},Object.defineProperty(e,"description",{get(){var n;return(n=Iu.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Iu.get(e);const s=e.clone();return Iu.add(s,n[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),V_=V("_ZodString",(e,t)=>{ry.init(e,t),Nt.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...s)=>e.check(JY(...s)),e.includes=(...s)=>e.check(nX(...s)),e.startsWith=(...s)=>e.check(sX(...s)),e.endsWith=(...s)=>e.check(rX(...s)),e.min=(...s)=>e.check(ef(...s)),e.max=(...s)=>e.check(U_(...s)),e.length=(...s)=>e.check(F_(...s)),e.nonempty=(...s)=>e.check(ef(1,...s)),e.lowercase=s=>e.check(eX(s)),e.uppercase=s=>e.check(tX(s)),e.trim=()=>e.check(oX()),e.normalize=(...s)=>e.check(aX(...s)),e.toLowerCase=()=>e.check(iX()),e.toUpperCase=()=>e.check(lX())}),SX=V("ZodString",(e,t)=>{ry.init(e,t),V_.init(e,t),e.email=n=>e.check(jY(CX,n)),e.url=n=>e.check(_Y(kX,n)),e.jwt=n=>e.check(FY(HX,n)),e.emoji=n=>e.check(AY(EX,n)),e.guid=n=>e.check(Bw(Fw,n)),e.uuid=n=>e.check(SY(Hu,n)),e.uuidv4=n=>e.check(CY(Hu,n)),e.uuidv6=n=>e.check(kY(Hu,n)),e.uuidv7=n=>e.check(EY(Hu,n)),e.nanoid=n=>e.check(MY(_X,n)),e.guid=n=>e.check(Bw(Fw,n)),e.cuid=n=>e.check(TY(AX,n)),e.cuid2=n=>e.check(RY(MX,n)),e.ulid=n=>e.check(DY(TX,n)),e.base64=n=>e.check(IY(OX,n)),e.base64url=n=>e.check(HY(BX,n)),e.xid=n=>e.check(zY(RX,n)),e.ksuid=n=>e.check(LY(DX,n)),e.ipv4=n=>e.check($Y(zX,n)),e.ipv6=n=>e.check(PY(LX,n)),e.cidrv4=n=>e.check(OY($X,n)),e.cidrv6=n=>e.check(BY(PX,n)),e.e164=n=>e.check(UY(IX,n)),e.datetime=n=>e.check(fX(n)),e.date=n=>e.check(hX(n)),e.time=n=>e.check(pX(n)),e.duration=n=>e.check(yX(n))});function Kt(e){return NY(SX,e)}const ot=V("ZodStringFormat",(e,t)=>{tt.init(e,t),V_.init(e,t)}),CX=V("ZodEmail",(e,t)=>{RG.init(e,t),ot.init(e,t)}),Fw=V("ZodGUID",(e,t)=>{MG.init(e,t),ot.init(e,t)}),Hu=V("ZodUUID",(e,t)=>{TG.init(e,t),ot.init(e,t)}),kX=V("ZodURL",(e,t)=>{DG.init(e,t),ot.init(e,t)}),EX=V("ZodEmoji",(e,t)=>{zG.init(e,t),ot.init(e,t)}),_X=V("ZodNanoID",(e,t)=>{LG.init(e,t),ot.init(e,t)}),AX=V("ZodCUID",(e,t)=>{$G.init(e,t),ot.init(e,t)}),MX=V("ZodCUID2",(e,t)=>{PG.init(e,t),ot.init(e,t)}),TX=V("ZodULID",(e,t)=>{OG.init(e,t),ot.init(e,t)}),RX=V("ZodXID",(e,t)=>{BG.init(e,t),ot.init(e,t)}),DX=V("ZodKSUID",(e,t)=>{IG.init(e,t),ot.init(e,t)}),zX=V("ZodIPv4",(e,t)=>{qG.init(e,t),ot.init(e,t)}),LX=V("ZodIPv6",(e,t)=>{ZG.init(e,t),ot.init(e,t)}),$X=V("ZodCIDRv4",(e,t)=>{GG.init(e,t),ot.init(e,t)}),PX=V("ZodCIDRv6",(e,t)=>{YG.init(e,t),ot.init(e,t)}),OX=V("ZodBase64",(e,t)=>{XG.init(e,t),ot.init(e,t)}),BX=V("ZodBase64URL",(e,t)=>{KG.init(e,t),ot.init(e,t)}),IX=V("ZodE164",(e,t)=>{QG.init(e,t),ot.init(e,t)}),HX=V("ZodJWT",(e,t)=>{eY.init(e,t),ot.init(e,t)}),q_=V("ZodNumber",(e,t)=>{H_.init(e,t),Nt.init(e,t),e.gt=(s,r)=>e.check(Hw(s,r)),e.gte=(s,r)=>e.check(kh(s,r)),e.min=(s,r)=>e.check(kh(s,r)),e.lt=(s,r)=>e.check(Iw(s,r)),e.lte=(s,r)=>e.check(Ch(s,r)),e.max=(s,r)=>e.check(Ch(s,r)),e.int=s=>e.check(Vw(s)),e.safe=s=>e.check(Vw(s)),e.positive=s=>e.check(Hw(0,s)),e.nonnegative=s=>e.check(kh(0,s)),e.negative=s=>e.check(Iw(0,s)),e.nonpositive=s=>e.check(Ch(0,s)),e.multipleOf=(s,r)=>e.check(Uw(s,r)),e.step=(s,r)=>e.check(Uw(s,r)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Oa(e){return YY(q_,e)}const UX=V("ZodNumberFormat",(e,t)=>{tY.init(e,t),q_.init(e,t)});function Vw(e){return XY(UX,e)}const FX=V("ZodBoolean",(e,t)=>{nY.init(e,t),Nt.init(e,t)});function VX(e){return WY(FX,e)}const qX=V("ZodUnknown",(e,t)=>{sY.init(e,t),Nt.init(e,t)});function qw(){return KY(qX)}const ZX=V("ZodNever",(e,t)=>{rY.init(e,t),Nt.init(e,t)});function GX(e){return QY(ZX,e)}const YX=V("ZodArray",(e,t)=>{aY.init(e,t),Nt.init(e,t),e.element=t.element,e.min=(n,s)=>e.check(ef(n,s)),e.nonempty=n=>e.check(ef(1,n)),e.max=(n,s)=>e.check(U_(n,s)),e.length=(n,s)=>e.check(F_(n,s)),e.unwrap=()=>e.element});function eo(e,t){return cX(YX,e,t)}const XX=V("ZodObject",(e,t)=>{oY.init(e,t),Nt.init(e,t),We(e,"shape",()=>t.shape),e.keyof=()=>eW(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:qw()}),e.loose=()=>e.clone({...e._zod.def,catchall:qw()}),e.strict=()=>e.clone({...e._zod.def,catchall:GX()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>DZ(e,n),e.merge=n=>zZ(e,n),e.pick=n=>TZ(e,n),e.omit=n=>RZ(e,n),e.partial=(...n)=>LZ(Z_,e,n[0]),e.required=(...n)=>$Z(G_,e,n[0])});function kr(e,t){const n={type:"object",get shape(){return ty(this,"shape",{...e}),this.shape},...ce(t)};return new XX(n)}const WX=V("ZodUnion",(e,t)=>{iY.init(e,t),Nt.init(e,t),e.options=t.options});function KX(e,t){return new WX({type:"union",options:e,...ce(t)})}const QX=V("ZodIntersection",(e,t)=>{lY.init(e,t),Nt.init(e,t)});function JX(e,t){return new QX({type:"intersection",left:e,right:t})}const ip=V("ZodEnum",(e,t)=>{cY.init(e,t),Nt.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(s,r)=>{const a={};for(const i of s)if(n.has(i))a[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new ip({...t,checks:[],...ce(r),entries:a})},e.exclude=(s,r)=>{const a={...t.entries};for(const i of s)if(n.has(i))delete a[i];else throw new Error(`Key ${i} not found in enum`);return new ip({...t,checks:[],...ce(r),entries:a})}});function eW(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new ip({type:"enum",entries:n,...ce(t)})}const tW=V("ZodTransform",(e,t)=>{uY.init(e,t),Nt.init(e,t),e._zod.parse=(n,s)=>{n.addIssue=a=>{if(typeof a=="string")n.issues.push(yc(a,n.value,t));else{const i=a;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!0),n.issues.push(yc(i))}};const r=t.transform(n.value,n);return r instanceof Promise?r.then(a=>(n.value=a,n)):(n.value=r,n)}});function nW(e){return new tW({type:"transform",transform:e})}const Z_=V("ZodOptional",(e,t)=>{dY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Zw(e){return new Z_({type:"optional",innerType:e})}const sW=V("ZodNullable",(e,t)=>{fY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Gw(e){return new sW({type:"nullable",innerType:e})}const rW=V("ZodDefault",(e,t)=>{mY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function aW(e,t){return new rW({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const oW=V("ZodPrefault",(e,t)=>{hY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function iW(e,t){return new oW({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const G_=V("ZodNonOptional",(e,t)=>{gY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lW(e,t){return new G_({type:"nonoptional",innerType:e,...ce(t)})}const cW=V("ZodCatch",(e,t)=>{pY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function uW(e,t){return new cW({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const dW=V("ZodPipe",(e,t)=>{xY.init(e,t),Nt.init(e,t),e.in=t.in,e.out=t.out});function Yw(e,t){return new dW({type:"pipe",in:e,out:t})}const fW=V("ZodReadonly",(e,t)=>{yY.init(e,t),Nt.init(e,t)});function mW(e){return new fW({type:"readonly",innerType:e})}const hW=V("ZodCustom",(e,t)=>{vY.init(e,t),Nt.init(e,t)});function gW(e){const t=new fn({check:"custom"});return t._zod.check=e,t}function pW(e,t={}){return uX(hW,e,t)}function xW(e){const t=gW(n=>(n.addIssue=s=>{if(typeof s=="string")n.issues.push(yc(s,n.value,t._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(yc(r))}},e(n.value,n)));return t}const yW=kr({type:Kt(),id:Kt()}),vW=kr({skill:Kt(),level:Oa()}),bW=kr({skillLevel:vW.optional(),items:eo(yW).optional()}),wW=kr({base:Kt(),subtext:Kt()}),NW=kr({rank:Oa(),edid:Kt(),name:Kt(),description:wW,prerequisites:bW}),jW=kr({x:Oa(),y:Oa(),horizontal:Oa(),vertical:Oa()}),SW=kr({parents:eo(Kt()),children:eo(Kt())}),CW=kr({edid:Kt(),name:Kt(),ranks:eo(NW),totalRanks:Oa(),connections:SW,isRoot:VX(),position:jW}),kW=kr({treeId:Kt(),treeName:Kt(),treeDescription:Kt(),category:Kt(),perks:eo(CW)});eo(kW);function EW({skills:e,originalSkills:t,selectedSkill:n,onSkillSelect:s,className:r}){const[a,i]=g.useState(new Set),l=u=>{i(d=>{const f=new Set(d);return f.has(u)?f.delete(u):f.add(u),f})},c=u=>{s(u)};return o.jsx("div",{className:`space-y-2 ${r||""}`,children:e.map(u=>{const d=a.has(u.id),f=(n==null?void 0:n.id)===u.id,m=t.find(h=>h.id===u.id);return o.jsx("div",{className:`transition-colors ${f?"ring-2 ring-skyrim-gold bg-skyrim-gold/10":""}`,children:o.jsx(VI,{item:u,originalSkill:m,isExpanded:d,onToggle:()=>l(u.id),onSelect:()=>c(u.id),showScaling:!0,showAbilities:!0,showTags:!0})},u.id)})})}function _W(e){return e.length===0?{minX:0,maxX:0,minY:0,maxY:0}:e.reduce((t,n)=>({minX:Math.min(t.minX,n.x),maxX:Math.max(t.maxX,n.x),minY:Math.min(t.minY,n.y),maxY:Math.max(t.maxY,n.y)}),{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0})}const AW=(e,t)=>({perkNode:n=>o.jsx(b_,{...n,onTogglePerk:e,onRankChange:t})}),Xw={cellWidth:240,cellHeight:140,nodeWidth:140,nodeHeight:80,gridGap:40,padding:80};function MW(e,t,n){const{x:s,y:r,horizontal:a,vertical:i}=e,l=t.maxX-s+t.minX,c=-a,u=t.maxY-r+t.minY,d=-i,f=(l-t.minX)*n.cellWidth+(l-t.minX)*n.gridGap+n.padding+n.cellWidth/2,m=(u-t.minY)*n.cellHeight+(u-t.minY)*n.gridGap+n.padding+n.cellHeight/2,h=c*(n.cellWidth/2-n.nodeWidth/2),p=d*(n.cellHeight/2-n.nodeHeight/2),y=f+h,b=m+p;return{x:y,y:b,gridX:l,gridY:u,horizontal:c,vertical:d}}function TW(e,t,n,s){const r=e-s.padding,a=t-s.padding,i=Math.floor(r/(s.cellWidth+s.gridGap)),l=Math.floor(a/(s.cellHeight+s.gridGap)),c=i*s.cellWidth+i*s.gridGap+s.padding+s.cellWidth/2,u=l*s.cellHeight+l*s.gridGap+s.padding+s.cellHeight/2,d=e-c,f=t-u,m=s.cellWidth/2-s.nodeWidth/2,h=s.cellHeight/2-s.nodeHeight/2,p=Math.max(-1,Math.min(1,d/m)),y=Math.max(-1,Math.min(1,f/h));return{x:e,y:t,gridX:i,gridY:l,horizontal:p,vertical:y}}function RW({tree:e,onTogglePerk:t,onRankChange:n,selectedPerks:s,className:r}){const[a,i]=L.useState(null),[l,c]=g.useState(new Map),[u,d]=g.useState(!1),[f,m]=g.useState(!1),[h,p]=g.useState(null),y=g.useMemo(()=>{if(!e)return null;const D=y_(e);return D.success?D.data:(console.error("Invalid perk tree data:",D.error),null)},[e]);L.useEffect(()=>{if(!y){c(new Map);return}console.log("Loading saved positions for tree:",y.treeId),d(!0),v_(y.treeId).then(D=>{if(console.log("Loaded saved positions:",D?"Found":"Not found"),D){const A=Nw(y.treeId,D);c(A)}else c(new Map)}).catch(D=>{console.warn("Failed to load saved positions:",D),c(new Map)}).finally(()=>{d(!1)})},[y==null?void 0:y.treeId]);const b=g.useMemo(()=>AW(t,n),[t,n]),x=g.useMemo(()=>{if(!y||u)return new Map;const D=new Map,A=y.perks.map(T=>T.position).filter(T=>T!==void 0),z=_W(A);return p(z),y.perks.forEach(T=>{if(T.position){const R=l.get(T.edid);if(R)D.set(T.edid,R);else{const B=MW(T.position,z,Xw);D.set(T.edid,B)}}}),D},[y,l,u]),w=g.useMemo(()=>!y||u?[]:y.perks.map(A=>{var U,I,q,G;const z=A.edid,T=x.get(z)||{x:0,y:0},R=((I=(U=A.connections)==null?void 0:U.children)==null?void 0:I.length)>0||!1,B=((G=(q=A.connections)==null?void 0:q.parents)==null?void 0:G.length)===0||!1;return{id:z,type:"perkNode",position:{x:T.x,y:T.y},draggable:f,data:{...A,selected:!1,hasChildren:R,isRoot:B}}}),[y,x,f,u]),v=g.useMemo(()=>{if(!y)return[];const D=[];return y.perks.forEach(A=>{var T;const z=A.edid;(T=A.connections)!=null&&T.children&&A.connections.children.forEach(R=>{if(R===z)return;y.perks.some(U=>U.edid===R)&&D.push({id:`${z}-${R}`,source:z,target:R,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),D},[y]),[N,j,S]=f_(w),[C,E,k]=m_(v);L.useEffect(()=>{j(w)},[w,j]),L.useEffect(()=>{y&&j(D=>D.map(A=>{const z=s.find(R=>R.edid===A.id),T=z!==void 0;return{...A,draggable:f,data:{...A.data,selected:T,currentRank:(z==null?void 0:z.currentRank)||0}}}))},[s,j,y,f]),L.useEffect(()=>{E(v)},[v,E]),L.useEffect(()=>{y&&N.length>0&&a&&setTimeout(()=>{a.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[y==null?void 0:y.treeId,a]);const _=g.useCallback(D=>E(A=>H0(D,A)),[E]),P=g.useCallback((D,A)=>{if(!f||!h)return;const z=TW(A.position.x,A.position.y,h,Xw),T=new Map(l);T.set(A.id,z),c(T)},[f,l,h]),O=g.useCallback(()=>{if(!y)return;const D=new Map;y.perks.forEach(z=>{const T=l.get(z.edid),R=x.get(z.edid);T?D.set(z.edid,T):R&&D.set(z.edid,R)});const A=Vq(y,D);qq(A)},[y,l,x]),$=g.useCallback(D=>{var T;const A=(T=D.target.files)==null?void 0:T[0];if(!A||!y)return;const z=new FileReader;z.onload=R=>{var B;try{const U=JSON.parse((B=R.target)==null?void 0:B.result);if(U.treeId===y.treeId){const I=Nw(y.treeId,U);c(I)}else alert("Position file does not match current tree!")}catch(U){alert("Error loading position file!"),console.error("Error loading positions:",U)}},z.readAsText(A)},[y]),M=g.useCallback(()=>{m(!f)},[f]);return y?o.jsxs("div",{className:`w-full h-full bg-background rounded-lg border overflow-auto ${r||""}`,children:[o.jsx("div",{className:"p-4 border-b bg-muted/20",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Experimental AVIF Grid Canvas (Mirrored + Enhanced Spacing)"}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Bottom-up tree with left-right mirroring using enhanced grid spacing",l.size>0&&!u&&o.jsx("span",{className:"text-green-600 ml-2",children:" Using saved positions"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[u&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 text-xs text-blue-600",children:[o.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),"Loading positions..."]}),o.jsx("button",{onClick:M,className:`px-3 py-1 text-xs rounded border ${f?"bg-blue-500 text-white border-blue-500":"bg-background text-foreground border-border hover:bg-muted"}`,children:f?"Exit Edit":"Edit Mode"}),o.jsx("button",{onClick:O,className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted",children:"Save Positions"}),o.jsxs("label",{className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted cursor-pointer",children:["Load Positions",o.jsx("input",{type:"file",accept:".json",onChange:$,className:"hidden"})]})]})]})}),o.jsx("div",{className:"w-full h-full min-h-[400px]",style:{zIndex:Dt.CONTENT},children:o.jsxs(G0,{nodes:N,edges:C,onNodesChange:S,onEdgesChange:k,onConnect:_,onInit:i,onNodeDragStop:P,nodeTypes:b,nodesDraggable:f,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},style:{backgroundColor:"hsl(var(--background))"},children:[o.jsx(x_,{color:"hsl(var(--muted-foreground))",gap:20,size:1,style:{backgroundColor:"hsl(var(--background))"}}),o.jsx(g_,{})]})})]}):o.jsx("div",{className:`flex items-center justify-center p-8 text-muted-foreground ${r||""}`,children:o.jsx("p",{children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function DW(e){return{id:e.id,name:e.name,description:e.description,category:e.category,tags:[...e.metaTags,e.category.toLowerCase()],effects:[...e.keyAbilities.map(t=>({type:"positive",name:"Key Ability",description:t,target:"ability"}))],summary:e.description.length>100?`${e.description.substring(0,100)}...`:e.description,associatedItems:[],imageUrl:void 0}}function Ww(e){return e.map(DW)}function zW(){const{skills:e,selectedSkill:t,perkTree:n,selectedPerks:s,perkRanks:r,availablePerks:a,onSkillSelect:i,onPerkSelect:l,onPerkRankChange:c,isLoading:u,error:d}=N_(),f=g.useMemo(()=>Ww(e),[e]);return u?o.jsx("div",{className:"flex items-center justify-center p-8",children:o.jsx("p",{className:"text-muted-foreground",children:"Loading skills..."})}):d?o.jsx("div",{className:"flex items-center justify-center p-8",children:o.jsxs("p",{className:"text-destructive",children:["Error loading skills: ",d]})}):o.jsx("div",{className:"container mx-auto p-6 space-y-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Skills - Experimental AVIF Grid"}),o.jsx("p",{className:"text-muted-foreground",children:"Experimental perk tree visualization using AVIF coordinate system"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Skills"}),o.jsx(EW,{skills:f,originalSkills:e,selectedSkill:t?Ww([t])[0]:void 0,onSkillSelect:i})]})})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold mb-3",children:t?`${t.name} Perk Tree`:"Perk Tree"}),o.jsx("div",{className:"bg-background border rounded-lg h-[600px]",children:o.jsx(RW,{tree:n,selectedPerks:s,perkRanks:r,availablePerks:a,onPerkSelect:l,onPerkRankChange:c,className:"h-full"})})]}),t&&n&&o.jsxs("div",{className:"bg-muted/20 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-sm font-medium mb-2",children:"Debug Information"}),o.jsxs("div",{className:"text-xs space-y-1 text-muted-foreground",children:[o.jsxs("p",{children:["Selected Skill: ",t.name]}),o.jsxs("p",{children:["Perk Tree: ",n.treeName]}),o.jsxs("p",{children:["Total Perks: ",n.perks.length]}),o.jsxs("p",{children:["Selected Perks: ",s.length]}),o.jsxs("p",{children:["Available Perks: ",a.length]}),n.perks.length>0&&n.perks[0].position&&o.jsxs("p",{children:["Sample Position: X=",n.perks[0].position.x,", Y=",n.perks[0].position.y,", H=",n.perks[0].position.horizontal,", V=",n.perks[0].position.vertical]})]})]})]})})]})]})})}function LW(e={}){const{autoLoad:t=!0,refreshOnMount:n=!1}=e,{data:s,loading:r,error:a,load:i}=Io(),l=g.useCallback(async()=>{t&&s.length===0&&await i()},[t,s.length,i]),c=g.useCallback(async()=>{await i()},[i]),u=g.useCallback(()=>{},[]);g.useEffect(()=>{t&&s.length===0&&l()},[t,s.length,l]),g.useEffect(()=>{n&&c()},[n,c]);const d=s.length,f=[...new Set(s.map(w=>w.school).filter(Boolean))],m=[...new Set(s.map(w=>w.level).filter(Boolean))],h=new Date().toISOString(),p=s.length>0?{spells:s,totalCount:d,schools:f,levels:m,lastUpdated:h}:null,y=g.useCallback(w=>Io.getState().getByEditorId(w),[]),b=g.useCallback(w=>Io.getState().getBySchool(w),[]),x=g.useCallback(w=>Io.getState().getByLevel(w),[]);return{spells:s,spellData:p,loading:r,error:a,totalCount:d,schools:f,levels:m,lastUpdated:h,loadSpells:l,refresh:c,clearError:u,getSpellByEditorId:y,getSpellsBySchool:b,getSpellsByLevel:x}}function $W(){const[e,t]=g.useState(null),[n,s]=g.useState("grid");return{selectedSpell:e,viewMode:n,setSelectedSpell:t,setViewMode:s}}const PW={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"};function OW({spells:e,variant:t="default",showEffects:n=!0,showTags:s=!0,columns:r=3,className:a="",expandedCards:i=new Set,onToggleExpansion:l}){return e.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-muted-foreground",children:"No spells found"})}):o.jsx("div",{className:`grid gap-4 ${PW[r]} ${a}`,children:e.map((c,u)=>o.jsx(j0,{spell:c,isExpanded:i.has(`${c.name}-${c.editorId}-${u}`),onToggle:()=>l==null?void 0:l(`${c.name}-${c.editorId}-${u}`)},`${c.name}-${c.editorId}-${u}`))})}function BW({spells:e,variant:t="default",showEffects:n=!0,showTags:s=!0,className:r="",expandedCards:a=new Set,onToggleExpansion:i}){return e.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-muted-foreground",children:"No spells found"})}):o.jsx("div",{className:`space-y-4 ${r}`,children:e.map((l,c)=>o.jsx(j0,{spell:l,isExpanded:a.has(`${l.name}-${l.editorId}-${c}`),onToggle:()=>i==null?void 0:i(`${l.name}-${l.editorId}-${c}`)},`${l.name}-${l.editorId}-${c}`))})}const Kw={Novice:1,Apprentice:2,Adept:3,Expert:4,Master:5};function IW(){const{spells:e,loading:t,error:n}=LW(),{viewMode:s,setViewMode:r}=$W(),a=Array.isArray(e)?e:[],[i,l]=g.useState(new Set),[c,u]=g.useState("alphabetical"),d=v=>{l(N=>{const j=new Set(N);return j.has(v)?j.delete(v):j.add(v),j})},f=g.useMemo(()=>{if(console.log("Generating search categories directly:",{safeSpellsLength:a.length,firstSpell:a[0]}),a.length===0)return[];const v=[...new Set(a.map(j=>j.school))],N=[...new Set(a.map(j=>j.level))];return console.log("Extracted categories:",{schools:v,levels:N}),[{id:"keywords",name:"Fuzzy Search",placeholder:"Search spells by name, school, level, or effects...",options:[]},{id:"schools",name:"Magic Schools",placeholder:"Filter by school...",options:v.map(j=>({id:`school-${j}`,label:j,value:j,category:"Magic Schools",description:`${j} spells`}))},{id:"levels",name:"Spell Levels",placeholder:"Filter by level...",options:N.map(j=>({id:`level-${j}`,label:j,value:j,category:"Spell Levels",description:`${j} spells`}))}]},[a]);g.useEffect(()=>{console.log("SpellPageView Debug:",{spellsLength:(e==null?void 0:e.length)||0,safeSpellsLength:a.length,loading:t,error:n,searchCategoriesLength:(f==null?void 0:f.length)||0,searchCategories:f})},[e,a,t,n,f]);const[m,h]=g.useState([]),p=v=>{let N;typeof v=="string"?N={id:`custom-${v}`,label:v,value:v,category:"Fuzzy Search"}:N={id:`${v.category}-${v.id}`,label:v.label,value:v.value,category:v.category},m.some(j=>j.value===N.value&&j.category===N.category)||h(j=>[...j,N])},y=v=>{h(N=>N.filter(j=>j.id!==v))},b=()=>{h([])},x=a.filter(v=>m.length===0?!0:m.every(N=>{switch(N.category){case"Magic Schools":return v.school===N.value;case"Spell Levels":return v.level===N.value;case"Fuzzy Search":const j=N.value.toLowerCase();return v.name.toLowerCase().includes(j)||v.school.toLowerCase().includes(j)||v.level.toLowerCase().includes(j)||v.effects.some(S=>S.name.toLowerCase().includes(j));default:return!0}})),w=g.useMemo(()=>[...x].sort((v,N)=>{switch(c){case"alphabetical":return v.name.localeCompare(N.name);case"school":const j=v.school.localeCompare(N.school);return j!==0?j:v.name.localeCompare(N.name);case"level":const S=Kw[v.level]||0,C=Kw[N.level]||0;return S!==C?S-C:v.name.localeCompare(N.name);default:return 0}}),[x,c]);return t?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading spells..."})]})}):n?o.jsxs("div",{className:"text-center py-12",children:[o.jsxs("p",{className:"text-destructive mb-4",children:["Error loading spells: ",n]}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded",children:["Debug: ",a.length," spells, ",f.length," search categories",f.length>0&&o.jsxs("div",{className:"mt-1",children:["Categories: ",f.map(v=>`${v.name}(${v.options.length})`).join(", ")]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex-1",children:f.length>0?o.jsx(xa,{categories:f,onSelect:p,onCustomSearch:p}):o.jsxs("div",{className:"p-4 border border-dashed border-muted-foreground/20 rounded-lg text-center text-muted-foreground",children:["No search categories available. Spells loaded: ",a.length]})}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:c,onChange:v=>u(v.target.value),className:"appearance-none bg-background border border-border rounded-lg px-3 py-1.5 pr-8 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer",children:[o.jsx("option",{value:"alphabetical",children:"Sort: A-Z"}),o.jsx("option",{value:"school",children:"Sort: School"}),o.jsx("option",{value:"level",children:"Sort: Level"})]}),o.jsx(Vn,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]}),o.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[o.jsx("button",{onClick:()=>r("grid"),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${s==="grid"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"Grid view",children:"Grid"}),o.jsx("button",{onClick:()=>r("list"),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${s==="list"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"List view",children:"List"})]})]}),m.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:b,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx("span",{className:"text-lg",children:""}),"Clear All"]}),m.map(v=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>y(v.id),title:"Click to remove",children:[v.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},v.id))]})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[w.length," of ",a.length," spells"]}),o.jsx("div",{children:w.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No spells found matching your criteria."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}):o.jsxs(o.Fragment,{children:[s==="grid"&&o.jsx(OW,{spells:w,variant:"default",columns:3,expandedCards:i,onToggleExpansion:d}),s==="list"&&o.jsx(BW,{spells:w,variant:"default",expandedCards:i,onToggleExpansion:d})]})})]})}function HW(){return o.jsx(Un,{title:"Spell Reference",description:"Browse and search all available spells. Find the perfect magic for your character build.",children:o.jsx(IW,{})})}function Y_(e,t){const n=g.useMemo(()=>e.map(l=>{var c;return{id:l.id||l.name,name:l.name,description:l.description||"",category:l.category||"",effects:((c=l.effects)==null?void 0:c.map(u=>`${u.type} ${u.description||""} ${u.value}`))||[],tags:l.tags||[],originalTrait:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"effects",weight:.2},{name:"tags",weight:.15},{name:"category",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Wt(n,s),[n,s]),a=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredTraits:g.useMemo(()=>a.map(l=>l.item.originalTrait),[a]),searchResults:a,searchableTraits:n}}function X_(e){const t=e.map(n=>n.category).filter(Boolean);return[...new Set(t)].sort()}function UW(e){const t=e.flatMap(n=>{var s;return((s=n.effects)==null?void 0:s.map(r=>r.type))||[]});return[...new Set(t)].sort()}function W_(e){const t=e.flatMap(n=>n.tags||[]);return[...new Set(t)].sort()}function FW(){const[e,t]=g.useState({search:"",category:"",tags:[]}),{data:n,loading:s,error:r}=go(),a=g.useMemo(()=>n.filter(u=>{var d;if(e.search){const f=e.search.toLowerCase();if(![u.name,u.description,u.category,...u.tags||[],...((d=u.effects)==null?void 0:d.map(h=>h.type))||[]].join(" ").toLowerCase().includes(f))return!1}return!(e.category&&u.category!==e.category||e.tags.length>0&&!e.tags.some(m=>{var h,p;return((h=u.tags)==null?void 0:h.includes(m))||u.category===m||((p=u.effects)==null?void 0:p.some(y=>y.type===m))}))}),[n,e]),i=g.useMemo(()=>X_(n),[n]),l=g.useMemo(()=>UW(n),[n]),c=g.useMemo(()=>W_(n),[n]);return{traits:a,allTraits:n,loading:s,error:r,filters:e,setFilters:t,allCategories:i,allEffectTypes:l,allTags:c}}function VW(){const{data:e,loading:t,error:n,reload:s}=y6(),r=e||[],[a,i]=g.useState([]),[l,c]=g.useState("alphabetical");g.useMemo(()=>r.map(mb),[r]);const d=(()=>{const v=X_(r),N=W_(r);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Search by category...",options:v.map(j=>({id:`category-${j}`,label:j,value:j,category:"Categories",description:`Traits in ${j} category`}))},{id:"tags",name:"Tags",placeholder:"Search by tag...",options:N.map(j=>({id:`tag-${j}`,label:j,value:j,category:"Tags",description:`Traits tagged with ${j}`}))}]})(),f=v=>{let N;typeof v=="string"?N={id:`custom-${v}`,label:v,value:v,category:"Fuzzy Search"}:N={id:`${v.category}-${v.id}`,label:v.label,value:v.value,category:v.category},a.some(j=>j.value===N.value&&j.category===N.category)||i(j=>[...j,N])},m=v=>{i(N=>N.filter(j=>j.id!==v))},h=r.filter(v=>a.length===0?!0:a.every(N=>{var j;switch(N.category){case"Fuzzy Search":return!0;case"Categories":return v.category===N.value;case"Tags":return((j=v.tags)==null?void 0:j.some(S=>S===N.value))||!1;default:return!0}})),p=a.filter(v=>v.category==="Fuzzy Search").map(v=>v.value).join(" "),{filteredTraits:y}=Y_(h,p),b=y.map(mb),x=r.map(v=>v.id||v.name),w=[...b].sort((v,N)=>{var j,S;switch(l){case"alphabetical":return v.name.localeCompare(N.name);case"category":const C=O=>{switch(O){case"Combat":return 1;case"Magic":return 2;case"Stealth":return 3;case"Social":return 4;case"Survival":return 5;default:return 6}},E=C(v.category),k=C(N.category);return E!==k?E-k:v.name.localeCompare(N.name);case"effect-count":const _=((j=v.effects)==null?void 0:j.length)||0,P=((S=N.effects)==null?void 0:S.length)||0;return _!==P?P-_:v.name.localeCompare(N.name);default:return 0}});return t?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading traits..."})]})}):n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:n}),o.jsx("button",{onClick:()=>s(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsxs(Un,{title:"Traits",description:"Choose your character's traits. Traits provide unique abilities and modifiers that will shape your character's capabilities throughout their journey.",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(xa,{categories:d,onSelect:f,onCustomSearch:f})}),o.jsxs(e0,{children:[o.jsx(t0,{asChild:!0,children:o.jsxs(K,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[o.jsx(Vn,{className:"h-4 w-4"}),l==="alphabetical"?"A-Z":l==="category"?"Category":"Count"]})}),o.jsxs(Kf,{align:"end",children:[o.jsx(dr,{onClick:()=>c("alphabetical"),children:"Alphabetical"}),o.jsx(dr,{onClick:()=>c("category"),children:"Category"}),o.jsx(dr,{onClick:()=>c("effect-count"),children:"Effect Count"})]})]})]}),o.jsx("div",{className:"my-4",children:a.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:()=>i([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(qt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),a.map(v=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(v.id),title:"Click to remove",children:[v.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:""})]},v.id))]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:w.map(v=>o.jsx(D9,{item:v,isExpanded:!0,className:"w-full",allTraitIds:x},v.id))}),w.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No traits found matching your criteria."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]})}function qW(){const{data:e,loading:t,error:n}=sC();return{religions:e||[],loading:t,error:n}}function ZW(e){var t,n,s,r;return{id:e.name.toLowerCase().replace(/\s+/g,"-"),name:e.name,type:e.type,description:((t=e.tenet)==null?void 0:t.description)||"",tenetDescription:((n=e.tenet)==null?void 0:n.description)||"",followerPower:((s=e.boon1)==null?void 0:s.spellName)||"",devoteePower:((r=e.boon2)==null?void 0:r.spellName)||"",favoredRaces:e.favoredRaces||[],worshipRestrictions:e.worshipRestrictions||[],originalReligion:e}}function GW(e){return e.map(ZW)}function YW(e,t){return e.find(n=>n.name.toLowerCase().replace(/\s+/g,"-")===t)}function XW(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u,d,f,m,h,p,y,b;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:((c=l.tenet)==null?void 0:c.description)||"",type:l.type,favoredRaces:Xt()?l.favoredRaces||[]:[],tenetEffects:((d=(u=l.tenet)==null?void 0:u.effects)==null?void 0:d.map(x=>`${x.effectName} ${x.effectDescription}`))||[],blessingEffects:((m=(f=l.blessing)==null?void 0:f.effects)==null?void 0:m.map(x=>`${x.effectName} ${x.effectDescription}`))||[],followerPowers:((p=(h=l.boon1)==null?void 0:h.effects)==null?void 0:p.map(x=>`${x.effectName} ${x.effectDescription}`))||[],devoteePowers:((b=(y=l.boon2)==null?void 0:y.effects)==null?void 0:b.map(x=>`${x.effectName} ${x.effectDescription}`))||[],originalReligion:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"tenetEffects",weight:.2},{name:"blessingEffects",weight:.2},{name:"followerPowers",weight:.15},{name:"devoteePowers",weight:.15},...Xt()?[{name:"favoredRaces",weight:.1}]:[],{name:"type",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Wt(n,s),[n,s]),a=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredReligions:g.useMemo(()=>a.map(l=>l.item.originalReligion),[a]),searchResults:a,searchableReligions:n}}function Qw({religions:e,selectedDeityId:t,onDeitySelect:n,placeholder:s="Search for a deity to follow...",className:r,disabled:a=!1}){const[i,l]=g.useState(""),{filteredReligions:c}=XW(e,i),u=g.useMemo(()=>GW(c),[c]),d=p=>{const y={Divine:"bg-blue-100 text-blue-800 border-blue-200","Daedric Prince":"bg-red-100 text-red-800 border-red-200",Tribunal:"bg-purple-100 text-purple-800 border-purple-200",Ancestor:"bg-green-100 text-green-800 border-green-200","Nordic Deity":"bg-orange-100 text-orange-800 border-orange-200","Yokudan Deity":"bg-yellow-100 text-yellow-800 border-yellow-200","Khajiiti Deity":"bg-indigo-100 text-indigo-800 border-indigo-200",Deity:"bg-gray-100 text-gray-800 border-gray-200"};return o.jsx(X,{variant:"outline",className:H("text-xs font-medium",y[p]||y.Deity),children:p})},f=g.useMemo(()=>u.map(p=>({id:p.id,label:p.name,description:p.tenetDescription,category:p.type,badge:d(p.type),metadata:{originalReligion:p.originalReligion,favoredRaces:p.favoredRaces}})),[u]),m=p=>{n(p.id)},h=(p,y)=>{var b;return o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium",children:p.label}),p.badge]}),p.description&&o.jsx(Be,{text:p.description,className:"text-sm text-muted-foreground line-clamp-2 mb-1"}),Xt()&&((b=p.metadata)==null?void 0:b.favoredRaces)&&p.metadata.favoredRaces.length>0&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ye,{className:"h-3 w-3 text-skyrim-gold"}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["Favors: ",p.metadata.favoredRaces.join(", ")]})]})]})})};return o.jsx(Fc,{options:f,onSelect:m,placeholder:s,className:r,disabled:a,renderOption:h,emptyMessage:"No deity found.",searchQuery:i,onSearchQueryChange:l})}function WW({className:e}){const{religions:t,loading:n,error:s}=qW(),{build:r,setReligion:a}=wt(),i=dt(),[l,c]=g.useState(!0),u=r.religion?YW(t,r.religion):null,d=()=>{i("/build/religions")},f=()=>{c(!l)};if(n)return o.jsx(Bn,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:o.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading religions..."})});if(s)return o.jsx(Bn,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:o.jsxs("div",{className:"text-sm text-destructive",children:["Error loading religions: ",s]})});if(!u)return o.jsxs(Bn,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's religion"}),o.jsx(Qw,{religions:t,selectedDeityId:r.religion,onDeitySelect:a,placeholder:"Search for a religion...",className:"w-full"})]});const m=$g(u);return o.jsxs(Bn,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[o.jsx(Qw,{religions:t,selectedDeityId:r.religion,onDeitySelect:a,placeholder:`Religion: Select a religion (${u.name})`,className:"w-full"}),o.jsx(Fd,{item:m,originalReligion:u,isExpanded:l,onToggle:f,className:"border-0 shadow-none",disableHover:!0,showToggle:!1,showBlessings:!1,showTenets:!0,showBoons:!0,showFavoredRaces:Xt()})]})}function Eh({traits:e,onSelect:t,placeholder:n="Search traits...",className:s="",disabled:r=!1}){const[a,i]=g.useState(""),{filteredTraits:l}=Y_(e,a),c=g.useMemo(()=>l.map(f=>({id:f.edid,label:f.name,description:f.description,category:f.category,badge:f.category&&o.jsx(X,{variant:"outline",className:"text-xs",children:f.category}),metadata:{originalTrait:f,effectsCount:f.effects.length}})),[l]),u=f=>{const m=e.find(h=>h.edid===f.id);m&&t(m)},d=(f,m)=>{var h;return o.jsx("div",{className:"flex items-start gap-3",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:f.label}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.badge&&o.jsx("div",{className:"flex-shrink-0",children:f.badge}),((h=f.metadata)==null?void 0:h.effectsCount)&&f.metadata.effectsCount>0&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.metadata.effectsCount," effect",f.metadata.effectsCount!==1?"s":""]})]}),f.description&&o.jsx(Be,{text:f.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]})})};return o.jsx(Fc,{options:c,onSelect:u,placeholder:n,className:s,disabled:r,renderOption:d,emptyMessage:"No traits found",searchQuery:a,onSearchQueryChange:i})}function KW({className:e}){const{allTraits:t}=FW(),{build:n,addTraitToSlot:s,removeTrait:r,getRegularTraitLimit:a,getBonusTraitLimit:i}=wt(),l=dt();a(),i();const c=n.traits.regular.map(p=>t.find(y=>y.edid===p)).filter(Boolean),u=n.traits.bonus.map(p=>t.find(y=>y.edid===p)).filter(Boolean),d=(p,y)=>{s(p.edid,y)},f=p=>{r(p)},m=()=>{l("/traits")},h=t.filter(p=>!n.traits.regular.includes(p.edid)&&!n.traits.bonus.includes(p.edid));return o.jsx(Bn,{title:"Traits",navigateTo:"traits",onNavigate:m,className:e,children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Starting"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"outline",className:"text-xs",children:"Slot 1"}),c[0]&&o.jsx(X,{variant:"default",className:"text-xs",children:"Starting"})]}),c[0]?o.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-sm",children:c[0].name}),o.jsx(Be,{text:c[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>f(c[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:o.jsx(qt,{className:"h-3 w-3"})})]}):o.jsx(Eh,{traits:h,onSelect:p=>d(p,"regular"),placeholder:"Select starting trait...",className:"w-full"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"outline",className:"text-xs",children:"Slot 2"}),c[1]&&o.jsx(X,{variant:"default",className:"text-xs",children:"Starting"})]}),c[1]?o.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-sm",children:c[1].name}),o.jsx(Be,{text:c[1].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>f(c[1].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:o.jsx(qt,{className:"h-3 w-3"})})]}):o.jsx(Eh,{traits:h,onSelect:p=>d(p,"regular"),placeholder:"Select starting trait...",className:"w-full"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Late Game"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"outline",className:"text-xs",children:"Slot 1"}),u[0]&&o.jsx(X,{variant:"secondary",className:"text-xs",children:"Late Game"})]}),u[0]?o.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-gray-50/50 border-gray-400 shadow-gray-400/20",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-sm",children:u[0].name}),o.jsx(Be,{text:u[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>f(u[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:o.jsx(qt,{className:"h-3 w-3"})})]}):o.jsx(Eh,{traits:h,onSelect:p=>d(p,"bonus"),placeholder:"Select late game trait...",className:"w-full"})]})]})]})})}function QW({name:e,notes:t,onNameChange:n,onNotesChange:s,className:r}){return o.jsxs(be,{className:`mb-6 ${r||""}`,children:[o.jsx(Te,{children:o.jsx(Fe,{children:"Basic Information"})}),o.jsxs(we,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(cc,{htmlFor:"name",children:"Character Name"}),o.jsx(Cs,{id:"name",value:e,onChange:a=>n(a.target.value),placeholder:"Enter character name..."})]}),o.jsxs("div",{children:[o.jsx(cc,{htmlFor:"notes",children:"Notes"}),o.jsx("textarea",{id:"notes",value:t,onChange:a=>s(a.target.value),placeholder:"Add character notes, roleplay details, or build explanations...",rows:4,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]})]})}function to(e){return e?e.replace(/\*\*\*(.*?)\*\*\*/g,"**$1**").replace(/<(\d+)>/g,"Level $1").replace(/\n+/g," ").trim():""}function vo(e,t,n){try{return e()}catch(s){return console.warn(`Failed to resolve ${n}:`,s),t}}function JW(e){return e?vo(()=>{const t=fa.getState().data;if(t.length===0)throw new Error("Races data not loaded yet. Please wait a moment and try again.");let n=t.find(s=>s.edid===e);return n||(n=t.find(s=>s.name.toLowerCase()===e.toLowerCase())),n||(n=t.find(s=>s.id===e)),n?{name:n.name,effects:n.description?to(n.description):void 0}:(console.warn(`Race not found for ID: ${e}. Available races: ${t.map(s=>s.edid).join(", ")}`),{name:"Unknown Race"})},{name:"Unknown Race"},"race"):{name:"Not selected"}}function eK(e){return e?vo(()=>{const t=mo.getState().data;if(t.length===0)throw new Error("Birthsigns data not loaded yet. Please wait a moment and try again.");const n=t.find(s=>s.edid===e);return n?{name:n.name,effects:to(n.description||"No effects")}:{name:"Unknown Birth Sign",effects:"No effects"}},{name:"Unknown Birth Sign",effects:"No effects"},"birth sign"):{name:"Not selected",effects:"No effects"}}function tK(e,t){return vo(()=>{const n=go.getState().data;if(n.length===0)throw new Error("Traits data not loaded yet. Please wait a moment and try again.");const s=[];return e.forEach(r=>{const a=n.find(i=>i.edid===r);a&&s.push({name:a.name,effects:to(a.description||"No effects"),type:"regular"})}),t.forEach(r=>{const a=n.find(i=>i.edid===r);a&&s.push({name:a.name,effects:to(a.description||"No effects"),type:"bonus"})}),s},[],"traits")}function nK(e){return e?vo(()=>{const t=nl.getState().data;if(t.length===0)throw new Error("Religions data not loaded yet. Please wait a moment and try again.");const n=t.find(s=>s.id===e||s.name===e);return n?{name:n.name,effects:to(n.type||"No effects")}:{name:"Unknown Religion",effects:"No effects"}},{name:"Unknown Religion",effects:"No effects"},"religion"):{name:"Not selected",effects:"No effects"}}function sK(e,t,n){return vo(()=>{const s=ho.getState().data;if(s.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");const r=a=>a.map(i=>{const l=s.find(u=>u.edid===i),c=n[i];return{name:(l==null?void 0:l.name)||"Unknown Skill",level:c||void 0}});return{major:r(e),minor:r(t),other:[]}},{major:[],minor:[],other:[]},"skills")}function rK(e,t){return vo(()=>{const n=ho.getState().data,s=lo.getState().data;if(n.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");if(s.length===0)throw new Error("Perk trees data not loaded yet. Please wait a moment and try again.");return Object.entries(e).map(([r,a])=>{const i=n.find(u=>u.edid===r),l=s.find(u=>u.treeId===r),c=a.map(u=>{var h,p,y;let d=l==null?void 0:l.perks.find(b=>b.edid===u);d||(d=l==null?void 0:l.perks.find(b=>b.name.toLowerCase()===u.toLowerCase())),d||console.warn(`Perk lookup fallback for ID: ${u}`);const f=t[u];d||console.warn(`Perk not found for ID: ${u} in skill: ${r}. Available perks: ${l==null?void 0:l.perks.map(b=>b.edid).join(", ")}`);const m=((y=(p=(h=d==null?void 0:d.ranks)==null?void 0:h[0])==null?void 0:p.description)==null?void 0:y.base)||"No effects";return{name:(d==null?void 0:d.name)||"Unknown Perk",effects:to(m),rank:f||void 0}});return{skillName:(i==null?void 0:i.name)||"Unknown Skill",perks:c}}).filter(r=>r.perks.length>0)},[],"perks")}function aK(e){return e.length===0?[]:vo(()=>{const t=tl.getState().data;if(t.length===0)throw new Error("Destiny nodes data not loaded yet. Please wait a moment and try again.");return e.map(n=>{const s=t.find(r=>r.id===n||r.name===n);return{name:(s==null?void 0:s.name)||"Unknown Destiny",effects:s!=null&&s.description?to(s.description):void 0}})},[],"destiny path")}function oK(e){const t=[],n=e.map(s=>s.name.toLowerCase());return n.some(s=>s.includes("one-handed")||s.includes("two-handed"))&&t.push("melee"),n.some(s=>s.includes("archery"))&&t.push("archery"),n.some(s=>s.includes("magic")||s.includes("destruction"))&&t.push("magic"),n.some(s=>s.includes("stealth")||s.includes("sneak"))&&t.push("stealth"),n.some(s=>s.includes("smithing")||s.includes("enchanting"))&&t.push("crafting"),t}function iK(e){const t=[],n=e.map(s=>s.name.toLowerCase());return n.some(s=>s.includes("warrior")||s.includes("combat"))&&t.push("warrior"),n.some(s=>s.includes("mage")||s.includes("magic"))&&t.push("mage"),n.some(s=>s.includes("thief")||s.includes("stealth"))&&t.push("thief"),n.some(s=>s.includes("archer")||s.includes("ranged"))&&t.push("archer"),t}function lK(e,t,n){const s=["lorerim"];if(e.name!=="Not selected"){const l=e.name.toLowerCase().replace(/\s+/g,"");s.push(l)}const r=[...t.major,...t.minor],a=oK(r);s.push(...a);const i=iK(n);return s.push(...i),s.slice(0,5)}function cK(e){const t=JW(e.race),n=eK(e.stone),s=nK(e.religion),r=tK(e.traits.regular,e.traits.bonus),a=sK(e.skills.major,e.skills.minor,e.skillLevels),i=rK(e.perks.selected,e.perks.ranks),l=aK(e.destinyPath),c=lK(t,a,r),u={level:e.attributeAssignments.level||1,health:e.attributeAssignments.health||0,stamina:e.attributeAssignments.stamina||0,magicka:e.attributeAssignments.magicka||0,totalPoints:(e.attributeAssignments.health||0)+(e.attributeAssignments.stamina||0)+(e.attributeAssignments.magicka||0)};return{name:e.name||"Unnamed Character",notes:e.notes||"",race:t,birthSign:n,traits:r,religion:s,skills:a,perks:i,destinyPath:l,tags:c,attributes:u}}function uK(e,t){const n=[];n.push(`** Build: ${e.name||"Unnamed Character"}**`),e.notes&&n.push(`*${e.notes}*`),n.push(""),t&&(n.push(`[Arcaneum Build Link](${t})`),n.push("")),n.push("__ Race__"),n.push(`${e.race.name}`),n.push(""),n.push("__ Birth Sign__"),n.push(`${e.birthSign.name}`),n.push(""),e.traits.length>0&&(n.push("__ Traits__"),e.traits.forEach(r=>{const a=r.type==="bonus"?" (Late Game)":"";n.push(`**${r.name}${a}**`)}),n.push("")),n.push("__ Religion__"),n.push(`${e.religion.name}`),n.push(""),n.push(`__ Attributes (Level ${e.attributes.level})__`);const s=[];if(e.attributes.health>0&&s.push(`Health: ${e.attributes.health}`),e.attributes.stamina>0&&s.push(`Stamina: ${e.attributes.stamina}`),e.attributes.magicka>0&&s.push(`Magicka: ${e.attributes.magicka}`),s.length>0?n.push(s.join(", ")):n.push("No attribute points assigned"),n.push(""),n.push("__ Skills__"),e.skills.major.length>0){const r=e.skills.major.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Major:** ${r}`)}if(e.skills.minor.length>0){const r=e.skills.minor.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Minor:** ${r}`)}if(e.skills.other.length>0){const r=e.skills.other.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Other:** ${r}`)}return n.push(""),e.perks.length>0&&(n.push("__ Perks__"),e.perks.forEach(r=>{n.push(`**${r.skillName}:**`),r.perks.forEach(a=>{const i=a.rank&&a.rank>1?` (Rank ${a.rank})`:"";n.push(` **${a.name}${i}**`)}),n.push("")})),e.destinyPath.length>0&&(n.push("__ Destiny Path__"),e.destinyPath.forEach(r=>{n.push(`**${r.name}**`),r.effects&&n.push(`${r.effects}`),n.push("")})),e.tags.length>0&&(n.push(""),n.push(e.tags.map(r=>`#${r}`).join(" "))),n.join(`
`)}function dK(e,t){const n=[];n.push(`** Build: ${e.name||"Unnamed Character"}**`),e.notes&&n.push(`*${e.notes}*`),n.push(""),t&&(n.push(`[Arcaneum Build Link](${t})`),n.push("")),n.push("__ Race__"),n.push(`${e.race.name}`),n.push(""),n.push("__ Birth Sign__"),n.push(`${e.birthSign.name}`),n.push(""),e.traits.length>0&&(n.push("__ Traits__"),e.traits.forEach(r=>{const a=r.type==="bonus"?" (Late Game)":"";n.push(`**${r.name}${a}**`)}),n.push("")),n.push("__ Religion__"),n.push(`${e.religion.name}`),n.push(""),n.push(`__ Attributes (Level ${e.attributes.level})__`);const s=[];if(e.attributes.health>0&&s.push(`Health: ${e.attributes.health}`),e.attributes.stamina>0&&s.push(`Stamina: ${e.attributes.stamina}`),e.attributes.magicka>0&&s.push(`Magicka: ${e.attributes.magicka}`),s.length>0?n.push(s.join(", ")):n.push("No attribute points assigned"),n.push(""),n.push("__ Skills__"),e.skills.major.length>0){const r=e.skills.major.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Major:** ${r}`)}if(e.skills.minor.length>0){const r=e.skills.minor.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Minor:** ${r}`)}if(e.skills.other.length>0){const r=e.skills.other.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Other:** ${r}`)}return n.push(""),e.perks.length>0&&(n.push("__ Perks__"),e.perks.forEach(r=>{n.push(`**${r.skillName}:**`),r.perks.forEach(a=>{const i=a.rank&&a.rank>1?` (Rank ${a.rank})`:"";n.push(` **${a.name}${i}**`)}),n.push("")})),e.destinyPath.length>0&&(n.push("__ Destiny Path__"),e.destinyPath.forEach(r=>{n.push(`**${r.name}**`),r.effects&&n.push(`${r.effects}`),n.push("")})),e.tags.length>0&&(n.push(""),n.push(e.tags.map(r=>`#${r}`).join(" "))),n.join(`
`)}async function fK(e){try{await navigator.clipboard.writeText(e)}catch{const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")}catch{throw new Error("Failed to copy to clipboard")}finally{document.body.removeChild(n)}}}function mK({build:e,className:t}){const[n,s]=g.useState(!1),[r,a]=g.useState(null),[i,l]=g.useState(""),[c,u]=g.useState("names"),d=g.useCallback(async f=>{s(!0),a(null),l(""),u(f);try{const m=cK(e),h=window.location.href,p=f==="full"?dK(m,h):uK(m,h);await fK(p),a(f),setTimeout(()=>a(null),2e3)}catch(m){console.error("Discord export failed:",m),l(m instanceof Error?m.message:"Export failed"),setTimeout(()=>l(""),3e3)}finally{s(!1)}},[e]);return o.jsxs("div",{className:H("relative",t),children:[o.jsxs("div",{className:"flex rounded-md border border-input bg-background",children:[o.jsx(K,{variant:n?"ghost":c==="names"?"default":"ghost",size:"sm",onClick:()=>d("names"),disabled:n,className:H("rounded-r-none border-r",c==="names"&&!n&&"bg-primary text-primary-foreground",r==="names"&&"bg-green-600 hover:bg-green-700 text-white",i&&"bg-red-600 hover:bg-red-700 text-white"),title:i||"Export build to Discord format (short form)","aria-label":"Export build to Discord format (short form)",children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),o.jsx("span",{className:"ml-2",children:"Exporting..."})]}):r==="names"?o.jsxs(o.Fragment,{children:[o.jsx(ug,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Copied!"})]}):i?o.jsxs(o.Fragment,{children:[o.jsx(pi,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Error"})]}):o.jsxs(o.Fragment,{children:[o.jsx(k4,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Export (short form)"})]})}),o.jsx(K,{variant:n?"ghost":c==="full"?"default":"ghost",size:"sm",onClick:()=>d("full"),disabled:n,className:H("rounded-l-none",c==="full"&&!n&&"bg-primary text-primary-foreground",r==="full"&&"bg-green-600 hover:bg-green-700 text-white",i&&"bg-red-600 hover:bg-red-700 text-white"),title:i||"Export build to Discord format (long form)","aria-label":"Export build to Discord format (long form)",children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),o.jsx("span",{className:"ml-2",children:"Exporting..."})]}):r==="full"?o.jsxs(o.Fragment,{children:[o.jsx(ug,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Copied!"})]}):i?o.jsxs(o.Fragment,{children:[o.jsx(pi,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Error"})]}):o.jsxs(o.Fragment,{children:[o.jsx(TN,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Export (long form)"})]})})]}),i&&o.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-red-100 border border-red-300 rounded text-xs text-red-800 max-w-xs z-50",role:"alert","aria-live":"polite",children:i})]})}function hK({onReset:e,build:t,className:n}){return o.jsxs("div",{className:`flex flex-wrap gap-2 mb-6 ${n||""}`,children:[o.jsxs(K,{variant:"destructive",size:"sm",className:"text-destructive-foreground cursor-pointer hover:opacity-90",onClick:e,children:[o.jsx(xi,{className:"w-4 h-4 mr-2"}),"Reset Build"]}),o.jsx(mK,{build:t})]})}function gK({cards:e,className:t="",gap:n=16}){const[s,r]=g.useState(0),a=g.useRef(null);g.useCallback(()=>s<768?1:s<1024?2:s<1280?3:4,[s]),g.useEffect(()=>{const c=()=>{a.current&&r(a.current.offsetWidth)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const i=g.useCallback(()=>{const c=s<768?1:2,u=[];let d=[];return e.forEach((f,m)=>{f.size==="full"?(d.length>0&&(u.push(l(d,c)),d=[]),u.push(o.jsx("div",{style:{width:"100%",marginBottom:`${n}px`},children:f.component},f.id))):d.push(f)}),d.length>0&&u.push(l(d,c)),o.jsx(o.Fragment,{children:u})},[e,s,n]),l=g.useCallback((c,u)=>{var m;const d=Array.from({length:u},()=>[]),f=new Array(u).fill(0);return c.forEach(h=>{let p=0,y=1/0;for(let b=0;b<u;b++)f[b]<y&&(y=f[b],p=b);d[p].push(o.jsx("div",{style:{width:"100%",marginBottom:`${n}px`},children:h.component},h.id)),f[p]+=1}),o.jsx("div",{style:{display:"flex",width:"100%",marginBottom:`${n}px`},children:d.map((h,p)=>o.jsx("div",{style:{width:`calc(${100/u}% - ${n/2}px)`,marginRight:p<u-1?`${n}px`:0},children:h},p))},`group-${(m=c[0])==null?void 0:m.id}`)},[n]);return e.length===0?o.jsx("div",{className:`text-center py-12 ${t}`,children:o.jsx("p",{className:"text-muted-foreground",children:"No build cards to display"})}):o.jsx("div",{ref:a,className:t,children:o.jsx("div",{style:{width:"100%"},children:i()})})}function pK({build:e,title:t="Build Summary",layout:n="grid",className:s}){const r=L6(e);return o.jsx(z6,{title:t,items:r,layout:n,className:s})}function xK({open:e,title:t,message:n,variant:s="warning",confirmText:r,cancelText:a,onConfirm:i,onCancel:l,className:c}){return o.jsx(M6,{open:e,title:t,message:n,variant:s,confirmText:r,cancelText:a,onConfirm:i,onCancel:l,className:c})}function yK({open:e,onConfirm:t,onCancel:n}){return o.jsx(xK,{open:e,title:"Reset Build?",message:"This will clear all selections and start a new build. This action cannot be undone.",variant:"warning",confirmText:"Confirm Reset",cancelText:"Cancel",onConfirm:t,onCancel:n})}function vK({regularLimit:e,bonusLimit:t,onRegularLimitChange:n,onBonusLimitChange:s,currentRegularCount:r,currentBonusCount:a,className:i}){const l=e!==2||t!==1;return o.jsxs(A6,{title:"Trait Limits Configuration",description:"Configure the number of traits your character can have",icon:o.jsx(ec,{className:"h-4 w-4 text-muted-foreground"}),className:i,children:[o.jsx(sb,{type:"warning",title:"Default configuration is 2 starting + 1 late game traits.",message:"Increasing these limits requires corresponding MCM (Mod Configuration Menu) changes in-game. Make sure your MCM settings match these limits to avoid conflicts."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(nb,{label:"Starting Traits Limit",value:e,onChange:n,min:0,max:10,currentCount:r,type:"regular"}),o.jsx(nb,{label:"Late Game Traits Limit",value:t,onChange:s,min:0,max:5,currentCount:a,type:"bonus"})]}),l&&o.jsx(sb,{type:"info",title:`Custom limits detected: ${e} starting + ${t} late game traits.`,message:"Remember to update your MCM settings accordingly."})]})}function bK(){const{build:e,updateBuild:t}=wt(),[n,s]=g.useState(e.traitLimits.regular),[r,a]=g.useState(e.traitLimits.bonus),i=g.useCallback(c=>{s(c),t({traitLimits:{...e.traitLimits,regular:c}})},[e.traitLimits,t]),l=g.useCallback(c=>{a(c),t({traitLimits:{...e.traitLimits,bonus:c}})},[e.traitLimits,t]);return{regularLimit:n,bonusLimit:r,handleRegularLimitChange:i,handleBonusLimitChange:l,currentRegularCount:e.traits.regular.length,currentBonusCount:e.traits.bonus.length}}const wK={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500"},NK={sm:"h-1.5",md:"h-2",lg:"h-3"};function _h({value:e,label:t,color:n="blue",size:s="md",showValue:r=!0,className:a,maxValue:i}){const l=i?Math.min(e/i*100,100):100;return o.jsxs("div",{className:H("space-y-1",a),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:t}),r&&o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),o.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:H("transition-all duration-300 ease-out",wK[n],NK[s]),style:{width:`${l}%`}})})]})}function jK({displayData:e,level:t,className:n,showRatios:s=!0,compact:r=!1,selectedRace:a}){return r?o.jsxs("div",{className:H("space-y-3",n),children:[o.jsx(Ut,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),a&&o.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Base stats from ",a.name]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Health"}),o.jsx("div",{className:"font-medium text-lg",children:e.health.total}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.health.assigned]})]}),o.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Stamina"}),o.jsx("div",{className:"font-medium text-lg",children:e.stamina.total}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.stamina.assigned]})]}),o.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Magicka"}),o.jsx("div",{className:"font-medium text-lg",children:e.magicka.total}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.magicka.assigned]})]})]}),s&&o.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Level ",t," "," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments"]})]}):o.jsxs("div",{className:H("space-y-4",n),children:[o.jsx(Ut,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),a&&a.startingStats&&o.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[o.jsxs("p",{className:"font-medium mb-1",children:["Base Stats from ",a.name,":"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-medium",children:"Health"}),o.jsx("div",{className:"text-muted-foreground",children:a.startingStats.health})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-medium",children:"Stamina"}),o.jsx("div",{className:"text-muted-foreground",children:a.startingStats.stamina})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-medium",children:"Magicka"}),o.jsx("div",{className:"text-muted-foreground",children:a.startingStats.magicka})]})]})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(_h,{value:e.health.total,label:"Health",color:"red",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),o.jsx(_h,{value:e.stamina.total,label:"Stamina",color:"green",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),o.jsx(_h,{value:e.magicka.total,label:"Magicka",color:"blue",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)})]}),s&&o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Health"}),o.jsxs("div",{className:"text-muted-foreground",children:[e.health.ratio.toFixed(1),"%"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Stamina"}),o.jsxs("div",{className:"text-muted-foreground",children:[e.stamina.ratio.toFixed(1),"%"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Magicka"}),o.jsxs("div",{className:"text-muted-foreground",children:[e.magicka.ratio.toFixed(1),"%"]})]})]}),o.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:["Level ",t," "," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments made"]})]})}function SK({level:e,assignments:t,onAssignmentChange:n,onClearAssignment:s,onClearAll:r,onUpdateAttributeLevel:a,className:i}){const l=b=>Object.values(t).filter(x=>x===b).length,c=l("health"),u=l("stamina"),d=l("magicka"),f=c+u+d,m=f+1,h=(b,x)=>{const w=l(b),v=x-w;if(v>0)for(let j=0;j<v;j++){const S=Math.max(2,f+2+j);n(S,b)}else if(v<0){for(let j=0;j<Math.abs(v);j++)for(let S=e;S>=2;S--)if(t[S]===b){s(S);break}}const N=f+v;a(N+1)},p=b=>{h(b,l(b)+1)},y=b=>{const x=l(b);x>0&&h(b,x-1)};return o.jsxs("div",{className:H("space-y-4",i),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ut,{className:"text-lg font-medium text-foreground",children:"Attribute Points"}),o.jsx("div",{className:"flex gap-2",children:o.jsxs(K,{variant:"outline",size:"sm",onClick:r,className:"text-xs",children:[o.jsx(xi,{className:"h-3 w-3 mr-1"}),"Clear All"]})})]}),o.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border",children:[o.jsxs("div",{className:"text-sm text-muted-foreground mb-3",children:["Character Level: ",m," (derived from ",f," attribute points)"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"flex flex-col items-center p-3 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-800",children:[o.jsx("div",{className:"font-medium text-red-700 dark:text-red-300 mb-3",children:"Health"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(K,{variant:"outline",size:"sm",onClick:()=>y("health"),disabled:c<=0,className:"h-8 w-8 p-0",children:o.jsx($l,{className:"h-4 w-4"})}),o.jsx(Cs,{type:"number",value:c,onChange:b=>{const x=parseInt(b.target.value)||0;x>=0&&h("health",x)},className:"w-16 text-center text-lg font-bold text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 border-red-300 dark:border-red-600 focus:border-red-500 focus:ring-red-500",min:0}),o.jsx(K,{variant:"outline",size:"sm",onClick:()=>p("health"),className:"h-8 w-8 p-0",children:o.jsx(Qr,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex flex-col items-center p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[o.jsx("div",{className:"font-medium text-green-700 dark:text-green-300 mb-3",children:"Stamina"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(K,{variant:"outline",size:"sm",onClick:()=>y("stamina"),disabled:u<=0,className:"h-8 w-8 p-0",children:o.jsx($l,{className:"h-4 w-4"})}),o.jsx(Cs,{type:"number",value:u,onChange:b=>{const x=parseInt(b.target.value)||0;x>=0&&h("stamina",x)},className:"w-16 text-center text-lg font-bold text-green-700 dark:text-green-300 bg-white dark:bg-gray-800 border-green-300 dark:border-green-600 focus:border-green-500 focus:ring-green-500",min:0}),o.jsx(K,{variant:"outline",size:"sm",onClick:()=>p("stamina"),className:"h-8 w-8 p-0",children:o.jsx(Qr,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex flex-col items-center p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[o.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300 mb-3",children:"Magicka"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(K,{variant:"outline",size:"sm",onClick:()=>y("magicka"),disabled:d<=0,className:"h-8 w-8 p-0",children:o.jsx($l,{className:"h-4 w-4"})}),o.jsx(Cs,{type:"number",value:d,onChange:b=>{const x=parseInt(b.target.value)||0;x>=0&&h("magicka",x)},className:"w-16 text-center text-lg font-bold text-blue-700 dark:text-blue-300 bg-white dark:bg-gray-800 border-blue-300 dark:border-blue-600 focus:border-blue-500 focus:ring-blue-500",min:0}),o.jsx(K,{variant:"outline",size:"sm",onClick:()=>p("magicka"),className:"h-8 w-8 p-0",children:o.jsx(Qr,{className:"h-4 w-4"})})]})]})]})]})]})}function CK(){const{build:e,setAttributeAssignment:t,clearAttributeAssignment:n,clearAllAttributeAssignments:s,updateAttributeLevel:r}=Hr(),{data:a}=fa(),i=e.attributeAssignments,l=g.useMemo(()=>!e.race||a.length===0?null:a.find(p=>p.edid===e.race)||null,[e.race,a]),c=g.useMemo(()=>l!=null&&l.startingStats?{health:l.startingStats.health,stamina:l.startingStats.stamina,magicka:l.startingStats.magicka}:{health:100,stamina:100,magicka:100},[l]),u=g.useMemo(()=>{i.level;const p=i.health+i.stamina+i.magicka;return{health:{base:c.health,assigned:i.health,total:c.health+i.health,ratio:p>0?i.health/p*100:0},stamina:{base:c.stamina,assigned:i.stamina,total:c.stamina+i.stamina,ratio:p>0?i.stamina/p*100:0},magicka:{base:c.magicka,assigned:i.magicka,total:c.magicka+i.magicka,ratio:p>0?i.magicka/p*100:0}}},[i,c]),d=p=>p>0&&p<=i.level,f=p=>i.assignments[p]||null,m=()=>i.health+i.stamina+i.magicka,h=()=>{const p=Object.keys(i.assignments).map(Number),y=[];for(let b=2;b<=i.level;b++)p.includes(b)||y.push(b);return y};return{assignments:i,displayData:u,level:i.level,selectedRace:l,baseStats:c,setAttributeAssignment:t,clearAttributeAssignment:n,clearAllAttributeAssignments:s,updateAttributeLevel:r,canAssignAtLevel:d,getAssignmentAtLevel:f,getTotalAssignments:m,getUnassignedLevels:h}}function kK({className:e,showControls:t=!0,showSummary:n=!0,compact:s=!1}){const[r,a]=g.useState(!0),{assignments:i,displayData:l,level:c,selectedRace:u,setAttributeAssignment:d,clearAttributeAssignment:f,clearAllAttributeAssignments:m,updateAttributeLevel:h}=CK(),p=(x,w)=>{d(x,w)},y=x=>{f(x)},b=()=>{m()};return o.jsxs(be,{className:H("w-full",e),children:[o.jsx(Te,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Fe,{className:"flex items-center gap-2",children:[o.jsx(zN,{className:"h-5 w-5"}),"Attribute Assignments"]}),t&&o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>a(!r),children:r?o.jsx(qR,{className:"h-4 w-4"}):o.jsx(Vn,{className:"h-4 w-4"})})]})}),o.jsxs(we,{className:"space-y-4",children:[n&&o.jsx(jK,{displayData:l,level:c,compact:s,selectedRace:u}),t&&r&&o.jsx(SK,{level:c,assignments:i.assignments,onAssignmentChange:p,onClearAssignment:y,onClearAll:b,onUpdateAttributeLevel:h})]})]})}function EK(){const{build:e,setBuildName:t,setBuildNotes:n,resetBuild:s}=wt(),[r,a]=g.useState(!1),i=bK(),l=dt(),c=[{id:"basic-info",component:o.jsx(QW,{name:e.name,notes:e.notes,onNameChange:t,onNotesChange:n}),size:"full"},{id:"race",component:o.jsx(aI,{}),size:"half"},{id:"birthsign",component:o.jsx(xB,{}),size:"half"},{id:"trait",component:o.jsx(KW,{}),size:"half"},{id:"religion",component:o.jsx(WW,{}),size:"half"},{id:"attributes",component:o.jsx(kK,{}),size:"full"},{id:"skills",component:o.jsx(jZ,{}),size:"full"},{id:"destiny",component:o.jsx(YB,{navigate:l}),size:"full"},{id:"summary",component:o.jsx(pK,{build:e}),size:"full"}];return o.jsxs(Un,{title:"Character Builder",children:[o.jsx(hK,{onReset:()=>a(!0),build:e}),o.jsx(yK,{open:r,onConfirm:()=>{s(),a(!1)},onCancel:()=>a(!1)}),o.jsxs(Wi,{defaultValue:"build",className:"w-full",children:[o.jsxs(Ki,{className:"mb-4",children:[o.jsx(an,{value:"build",children:"Build"}),o.jsx(an,{value:"config",children:"Config"})]}),o.jsx(wn,{value:"build",children:o.jsx(gK,{cards:c,gap:16})}),o.jsx(wn,{value:"config",children:o.jsx(vK,{regularLimit:i.regularLimit,bonusLimit:i.bonusLimit,onRegularLimitChange:i.handleRegularLimitChange,onBonusLimitChange:i.handleBonusLimitChange,currentRegularCount:i.currentRegularCount,currentBonusCount:i.currentBonusCount})})]})]})}function _K(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx(co,{children:"Crafting"}),o.jsx(rc,{children:"Plan your crafting recipes and material requirements"})]}),o.jsxs(be,{children:[o.jsxs(Te,{children:[o.jsx(Fe,{children:"Coming Soon"}),o.jsx(nr,{children:"Crafting system is under development"})]}),o.jsx(we,{children:o.jsx(rc,{children:"This section will help you plan and optimize your crafting projects."})})]})]})}function AK(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx(co,{children:"Equipment"}),o.jsx(rc,{children:"Browse and compare weapons, armor, and items"})]}),o.jsxs(be,{children:[o.jsxs(Te,{children:[o.jsx(Fe,{children:"Coming Soon"}),o.jsx(nr,{children:"Equipment database is under development"})]}),o.jsx(we,{children:o.jsx(rc,{children:"This section will provide a comprehensive database of all equipment in the game."})})]})]})}const MK=()=>{const{build:e,getSummary:t}=wt(),n=dt(),s=t();return!e.name&&!e.race?o.jsxs(be,{className:"border-dashed border-2 border-muted",children:[o.jsxs(Te,{children:[o.jsx(Fe,{className:"text-lg",children:"No Character Build"}),o.jsx(nr,{children:"Start building your character to see it here"})]}),o.jsx(we,{children:o.jsx(K,{onClick:()=>n("/build"),className:"w-full",children:"Create Character Build"})})]}):o.jsxs(be,{children:[o.jsxs(Te,{children:[o.jsxs(Fe,{className:"text-lg flex items-center justify-between",children:[o.jsx("span",{children:s.name}),o.jsx(K,{variant:"outline",size:"sm",onClick:()=>n("/build"),children:"Edit"})]}),o.jsx(nr,{children:"Current character build status"})]}),o.jsxs(we,{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Race:"}),o.jsx(X,{variant:"secondary",className:"ml-2",children:s.race})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Birth Sign:"}),o.jsx(X,{variant:"secondary",className:"ml-2",children:s.stone})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Religion:"}),o.jsx(X,{variant:"secondary",className:"ml-2",children:s.religion})]})]}),o.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[o.jsxs("span",{children:[s.traitCount," traits"]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[s.majorSkillCount," major skills"]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[s.minorSkillCount," minor skills"]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[s.equipmentCount," equipment"]})]})]})]})};function TK(){const e=dt(),t=()=>{e("/build")};return o.jsx("div",{className:"min-h-screen bg-background",children:o.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-12",children:[o.jsxs("div",{className:"text-left space-y-6",children:[o.jsx("div",{className:"flex items-center gap-3 mb-4 justify-start",children:o.jsx(co,{className:"text-4xl md:text-6xl font-bold text-foreground",children:"Lorerim Arcaneum"})}),o.jsx(sS,{className:"text-xl md:text-2xl text-muted-foreground",children:"Your theorycrafting playground and reference hub for Lorerim players. Build characters, explore mechanics, and dive deep into the lore."})]}),o.jsx("div",{className:"max-w-md",children:o.jsx(MK,{})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[o.jsx(Pl,{className:"h-6 w-6 text-primary"}),"Character Building"]}),o.jsx("p",{className:"text-muted-foreground",children:"Create and customize your character from scratch"})]}),o.jsxs(be,{className:"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card",onClick:t,children:[o.jsxs(Te,{children:[o.jsxs(Fe,{className:"flex items-center gap-2 group-hover:text-primary transition-colors text-card-foreground",children:[o.jsx(tc,{className:"h-5 w-5"}),"Start Character Build"]}),o.jsx(nr,{className:"text-muted-foreground",children:"Design your character with races, traits, birthsigns, and more"})]}),o.jsx(we,{children:o.jsxs(K,{className:"w-full group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:["Begin Building",o.jsx(zR,{className:"ml-2 h-4 w-4"})]})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(be,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/race"),children:o.jsxs(we,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl mb-2",children:""}),o.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Races"})]})}),o.jsx(be,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/birth-signs"),children:o.jsxs(we,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl mb-2",children:""}),o.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Birthsigns"})]})}),o.jsx(be,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/traits"),children:o.jsxs(we,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl mb-2",children:""}),o.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Traits"})]})}),o.jsx(be,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/perks"),children:o.jsxs(we,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl mb-2",children:""}),o.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Skills"})]})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[o.jsx(yi,{className:"h-6 w-6 text-primary"}),"Quick Access"]}),o.jsx("p",{className:"text-muted-foreground",children:"Jump directly to specific tools and features"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(be,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/search"),children:o.jsx(we,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(yi,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-card-foreground",children:"Advanced Search"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Detailed search with filters"})]})]})})}),o.jsx(be,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/spells"),children:o.jsx(we,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(tc,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-card-foreground",children:"Spells"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Browse and search spells"})]})]})})}),o.jsx(be,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/cookbook"),children:o.jsx(we,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(TN,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-card-foreground",children:"Cookbook"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Crafting recipes & guides"})]})]})})})]})]})]}),o.jsx("div",{className:"text-left pt-8 border-t border-border",children:o.jsx("p",{className:"text-muted-foreground",children:"Built with  for the Lorerim community"})})]})})}function RK(){const e=dt();return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:[o.jsx(co,{className:"text-4xl font-bold text-skyrim-gold mb-2",children:"Page Not Found"}),o.jsx(Xe,{className:"text-skyrim-gold/70 mb-6",children:"Sorry, the page you are looking for does not exist or is not ready yet."}),o.jsx(K,{variant:"default",onClick:()=>e("/"),children:"Return Home"})]})}const DK=()=>o.jsxs(pD,{children:[o.jsx(xt,{path:"/",element:o.jsx(TK,{})}),o.jsxs(xt,{path:"/build",element:o.jsx(QL,{}),children:[o.jsx(xt,{index:!0,element:o.jsx(EK,{})}),o.jsx(xt,{path:"race",element:o.jsx(fk,{})}),o.jsx(xt,{path:"birth-signs",element:o.jsx(wB,{})}),o.jsx(xt,{path:"traits",element:o.jsx(VW,{})}),o.jsx(xt,{path:"religions",element:o.jsx(hI,{})}),o.jsx(xt,{path:"destiny",element:o.jsx(WB,{})}),o.jsx(xt,{path:"perks",element:o.jsx(_w,{})})]}),o.jsx(xt,{path:"/spells",element:o.jsx(HW,{})}),o.jsx(xt,{path:"/cookbook",element:o.jsx(RB,{})}),o.jsx(xt,{path:"/search",element:o.jsx(eZ,{})}),o.jsx(xt,{path:"/virtual-masonry-demo",element:o.jsx(nZ,{})}),o.jsx(xt,{path:"/races-mva-demo",element:o.jsx(uI,{})}),o.jsx(xt,{path:"/skills-mva",element:o.jsx(_w,{})}),o.jsx(xt,{path:"/skills-experimental",element:o.jsx(zW,{})}),o.jsx(xt,{path:"/equipment",element:o.jsx(AK,{})}),o.jsx(xt,{path:"/crafting",element:o.jsx(_K,{})}),o.jsx(xt,{path:"*",element:o.jsx(RK,{})})]}),K_=g.createContext(void 0);function zK({children:e}){const[t,n]=g.useState("system"),[s,r]=g.useState("dark");return g.useEffect(()=>{const a=localStorage.getItem("theme");a&&["light","dark","system"].includes(a)&&n(a)},[]),g.useEffect(()=>{localStorage.setItem("theme",t);let a;t==="system"?a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a=t,r(a);const i=document.documentElement;a==="dark"?i.classList.add("dark"):i.classList.remove("dark")},[t]),g.useEffect(()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),i=()=>{if(t==="system"){const l=a.matches?"dark":"light";r(l);const c=document.documentElement;l==="dark"?c.classList.add("dark"):c.classList.remove("dark")}};return a.addEventListener("change",i),()=>a.removeEventListener("change",i)},[t]),o.jsx(K_.Provider,{value:{theme:t,setTheme:n,resolvedTheme:s},children:e})}function LK(){const e=g.useContext(K_);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function $K(){const{theme:e,setTheme:t}=LK(),n=()=>{t(e==="light"?"dark":e==="dark"?"system":"light")},s=()=>{switch(e){case"light":return o.jsx(uv,{className:"h-4 w-4"});case"dark":return o.jsx(D4,{className:"h-4 w-4"});case"system":return o.jsx(T4,{className:"h-4 w-4"});default:return o.jsx(uv,{className:"h-4 w-4"})}};return o.jsxs(K,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:n,title:`Current theme: ${e}. Click to cycle themes.`,children:[s(),o.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function PK({sidebarCollapsed:e,onToggleSidebar:t,isMobile:n=!1,MobileDrawerTrigger:s}){return o.jsxs("header",{className:"sticky top-0 w-full h-12 flex items-center bg-background border-b border-skyrim-gold/20 px-2 shadow-sm backdrop-blur-sm",style:{zIndex:Dt.HEADER,backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:[n&&s?o.jsx("div",{className:"mr-2",children:o.jsx(s,{})}):o.jsx("button",{onClick:t,"aria-label":e?"Open sidebar":"Close sidebar",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 mr-2",children:o.jsx(S4,{className:"w-5 h-5 text-skyrim-gold transition-transform duration-200 group-hover:rotate-12"})}),o.jsx("span",{className:"text-skyrim-gold font-bold text-base tracking-tight select-none",children:"Lorerim Arcaneum"}),o.jsx("span",{className:"ml-2 text-xs text-skyrim-gold/60 select-none",children:"Theorycrafting Hub"}),o.jsx("div",{className:"flex-1 max-w-md mx-4",children:o.jsx(Qq,{placeholder:"Search skills, races, traits...",className:"w-full"})}),o.jsx("div",{className:"ml-auto",children:o.jsx($K,{})})]})}const Q_=[{label:"Character Build",items:[{to:"/build",label:"Build"},{to:"/build/race",label:"Race"},{to:"/build/birth-signs",label:"Birth Signs"},{to:"/build/traits",label:"Traits"},{to:"/build/religions",label:"Religion"},{to:"/build/destiny",label:"Destiny"},{to:"/build/perks",label:"Skills and Perks"}]},{label:"Docs",items:[{to:"/spells",label:"Spells"},{to:"/cookbook",label:"Food and Alcohol"}]}];function OK({onNavigate:e}){const t=dt(),n=window.location.hash.replace(/^#\/?/,"/"),s=(r,a)=>{const i=window.location.hash,[l,c]=i.split("?"),d=new URLSearchParams(c||"").get("b");t(d?`${r}?b=${d}`:r),e(a)};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-4 border-b border-skyrim-gold/20",children:o.jsxs("button",{onClick:()=>s("/",!0),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[o.jsx(DN,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),o.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:Q_.map(r=>o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:r.label}),o.jsx("div",{className:"space-y-1",children:r.items.map(a=>{const i=n===a.to;return o.jsx("button",{onClick:()=>s(a.to,!0),className:`w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] active:scale-[0.98] cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 ${i?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent"}`,children:a.label},a.to)})})]},r.label))}),o.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[o.jsx(Xe,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),o.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:" Settings"})]})]})}function BK({collapsed:e,onNavigate:t}){const n=dt(),s=window.location.hash.replace(/^#\/?/,"/"),r=a=>{const i=window.location.hash,[l,c]=i.split("?"),d=new URLSearchParams(c||"").get("b");n(d?`${a}?b=${d}`:a)};return o.jsxs(Xj,{collapsed:e,children:[o.jsx(Qj,{children:!e&&o.jsxs("button",{onClick:()=>r("/"),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[o.jsx(DN,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),o.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),o.jsx(Wj,{children:Q_.map(a=>o.jsxs(Kj,{children:[!e&&o.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:a.label}),o.jsx(Jj,{children:a.items.map(i=>{const l=s===i.to;return o.jsx(tS,{children:o.jsx(eS,{asChild:!0,isActive:l,onClick:()=>r(i.to),tabIndex:0,children:o.jsx("span",{className:"w-full text-left truncate",children:i.label})})},i.to)})})]},a.label))}),!e&&o.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[o.jsx(Xe,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),o.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:" Settings"})]}),o.jsx(nS,{})]})}function IK({onNavigate:e}){const[t,n]=g.useState(!1),s=r=>{r&&n(!1)};return o.jsxs(Ex,{open:t,onOpenChange:n,children:[o.jsx(Gj,{asChild:!0,children:o.jsx("button",{"aria-label":"Open navigation menu",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:o.jsx("svg",{className:"w-5 h-5 text-skyrim-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),o.jsx(Hf,{side:"left",className:"p-0 w-80",children:o.jsx("div",{className:"flex flex-col h-full",children:o.jsx(OK,{onNavigate:s})})})]})}function HK(){const[e,t]=g.useState(!0),[n,s]=g.useState(!1);return NL(),g.useEffect(()=>{const r=()=>s(window.innerWidth<768);return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),o.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[o.jsx(PK,{sidebarCollapsed:e,onToggleSidebar:()=>t(r=>!r),isMobile:n,MobileDrawerTrigger:()=>o.jsx(IK,{onNavigate:()=>{}})}),o.jsxs("div",{className:"flex flex-1",children:[!n&&o.jsx("div",{className:`transition-all duration-300 ease-in-out ${e?"w-0":"w-64"}`,style:{zIndex:Dt.SIDEBAR},children:o.jsx(BK,{collapsed:e,onNavigate:r=>{r&&t(!0)}})}),o.jsx("main",{className:"flex-1  transition-all duration-300 ease-in-out",children:o.jsx(DK,{})})]}),o.jsx(wL,{})]})}function UK(){return o.jsx(HD,{children:o.jsx(HK,{})})}function FK({children:e,showLoadingIndicator:t=!1}){const[n,s]=g.useState(!0),[r,a]=g.useState(null),i=g.useRef(!1),l=mo(x=>x.load),c=tl(x=>x.load),u=lo(x=>x.load),d=fa(x=>x.load),f=Js(x=>x.load),m=nl(x=>x.load),h=ho(x=>x.load),p=Io(x=>x.load),y=go(x=>x.load),b=g.useCallback(async()=>{if(!i.current)try{s(!0),a(null),await Promise.all([l(),c(),u(),d(),f(),m(),h(),p(),y()]),i.current=!0,s(!1)}catch(x){console.error("Failed to initialize data:",x),a(x instanceof Error?x.message:"Failed to initialize data"),s(!1)}},[l,c,u,d,f,m,h,p,y]);return g.useEffect(()=>{b()},[b]),n&&t?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading data..."})]})}):r?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-red-600 mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Failed to Load Data"}),o.jsx("p",{className:"text-sm",children:r})]}),o.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})}):o.jsx(o.Fragment,{children:e})}var J_={exports:{}},jm={},eA={exports:{}},tA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,z){var T=A.length;A.push(z);e:for(;0<T;){var R=T-1>>>1,B=A[R];if(0<r(B,z))A[R]=z,A[T]=B,T=R;else break e}}function n(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var z=A[0],T=A.pop();if(T!==z){A[0]=T;e:for(var R=0,B=A.length,U=B>>>1;R<U;){var I=2*(R+1)-1,q=A[I],G=I+1,J=A[G];if(0>r(q,T))G<B&&0>r(J,q)?(A[R]=J,A[G]=T,R=G):(A[R]=q,A[I]=T,R=I);else if(G<B&&0>r(J,T))A[R]=J,A[G]=T,R=G;else break e}}return z}function r(A,z){var T=A.sortIndex-z.sortIndex;return T!==0?T:A.id-z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,m=3,h=!1,p=!1,y=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function N(A){for(var z=n(u);z!==null;){if(z.callback===null)s(u);else if(z.startTime<=A)s(u),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(u)}}function j(A){if(y=!1,N(A),!p)if(n(c)!==null)p=!0,S||(S=!0,O());else{var z=n(u);z!==null&&D(j,z.startTime-A)}}var S=!1,C=-1,E=5,k=-1;function _(){return b?!0:!(e.unstable_now()-k<E)}function P(){if(b=!1,S){var A=e.unstable_now();k=A;var z=!0;try{e:{p=!1,y&&(y=!1,w(C),C=-1),h=!0;var T=m;try{t:{for(N(A),f=n(c);f!==null&&!(f.expirationTime>A&&_());){var R=f.callback;if(typeof R=="function"){f.callback=null,m=f.priorityLevel;var B=R(f.expirationTime<=A);if(A=e.unstable_now(),typeof B=="function"){f.callback=B,N(A),z=!0;break t}f===n(c)&&s(c),N(A)}else s(c);f=n(c)}if(f!==null)z=!0;else{var U=n(u);U!==null&&D(j,U.startTime-A),z=!1}}break e}finally{f=null,m=T,h=!1}z=void 0}}finally{z?O():S=!1}}}var O;if(typeof v=="function")O=function(){v(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,M=$.port2;$.port1.onmessage=P,O=function(){M.postMessage(null)}}else O=function(){x(P,0)};function D(A,z){C=x(function(){A(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(A){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var T=m;m=z;try{return A()}finally{m=T}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(A,z){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var T=m;m=A;try{return z()}finally{m=T}},e.unstable_scheduleCallback=function(A,z,T){var R=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?R+T:R):T=R,A){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=T+B,A={id:d++,callback:z,priorityLevel:A,startTime:T,expirationTime:B,sortIndex:-1},T>R?(A.sortIndex=T,t(u,A),n(c)===null&&A===n(u)&&(y?(w(C),C=-1):y=!0,D(j,T-R))):(A.sortIndex=B,t(c,A),p||h||(p=!0,S||(S=!0,O()))),A},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(A){var z=m;return function(){var T=m;m=z;try{return A.apply(this,arguments)}finally{m=T}}}})(tA);eA.exports=tA;var VK=eA.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et=VK,nA=g,qK=Pf;function Z(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function sA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jw(e){if(Kc(e)!==e)throw Error(Z(188))}function ZK(e){var t=e.alternate;if(!t){if(t=Kc(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Jw(r),e;if(a===s)return Jw(r),t;a=a.sibling}throw Error(Z(188))}if(n.return!==s.return)n=r,s=a;else{for(var i=!1,l=r.child;l;){if(l===n){i=!0,n=r,s=a;break}if(l===s){i=!0,s=r,n=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===n){i=!0,n=a,s=r;break}if(l===s){i=!0,s=a,n=r;break}l=l.sibling}if(!i)throw Error(Z(189))}}if(n.alternate!==s)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?e:t}function aA(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=aA(e),t!==null)return t;e=e.sibling}return null}var Ke=Object.assign,GK=Symbol.for("react.element"),Uu=Symbol.for("react.transitional.element"),Rl=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),oA=Symbol.for("react.strict_mode"),lp=Symbol.for("react.profiler"),YK=Symbol.for("react.provider"),iA=Symbol.for("react.consumer"),rr=Symbol.for("react.context"),ay=Symbol.for("react.forward_ref"),cp=Symbol.for("react.suspense"),up=Symbol.for("react.suspense_list"),oy=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),dp=Symbol.for("react.activity"),XK=Symbol.for("react.memo_cache_sentinel"),e1=Symbol.iterator;function bl(e){return e===null||typeof e!="object"?null:(e=e1&&e[e1]||e["@@iterator"],typeof e=="function"?e:null)}var WK=Symbol.for("react.client.reference");function fp(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===WK?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uo:return"Fragment";case lp:return"Profiler";case oA:return"StrictMode";case cp:return"Suspense";case up:return"SuspenseList";case dp:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Rl:return"Portal";case rr:return(e.displayName||"Context")+".Provider";case iA:return(e._context.displayName||"Context")+".Consumer";case ay:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oy:return t=e.displayName||null,t!==null?t:fp(e.type)||"Memo";case Br:t=e._payload,e=e._init;try{return fp(e(t))}catch{}}return null}var Dl=Array.isArray,ge=nA.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ze=qK.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ia={pending:!1,data:null,method:null,action:null},mp=[],Fo=-1;function Bs(e){return{current:e}}function Rt(e){0>Fo||(e.current=mp[Fo],mp[Fo]=null,Fo--)}function et(e,t){Fo++,mp[Fo]=e.current,e.current=t}var _s=Bs(null),vc=Bs(null),ta=Bs(null),tf=Bs(null);function nf(e,t){switch(et(ta,t),et(vc,e),et(_s,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?aN(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=aN(t),e=ST(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Rt(_s),et(_s,e)}function Ti(){Rt(_s),Rt(vc),Rt(ta)}function hp(e){e.memoizedState!==null&&et(tf,e);var t=_s.current,n=ST(t,e.type);t!==n&&(et(vc,e),et(_s,n))}function sf(e){vc.current===e&&(Rt(_s),Rt(vc)),tf.current===e&&(Rt(tf),Ac._currentValue=Ia)}var gp=Object.prototype.hasOwnProperty,iy=Et.unstable_scheduleCallback,Ah=Et.unstable_cancelCallback,KK=Et.unstable_shouldYield,QK=Et.unstable_requestPaint,As=Et.unstable_now,JK=Et.unstable_getCurrentPriorityLevel,lA=Et.unstable_ImmediatePriority,cA=Et.unstable_UserBlockingPriority,rf=Et.unstable_NormalPriority,eQ=Et.unstable_LowPriority,uA=Et.unstable_IdlePriority,tQ=Et.log,nQ=Et.unstable_setDisableYieldValue,Qc=null,jn=null;function Yr(e){if(typeof tQ=="function"&&nQ(e),jn&&typeof jn.setStrictMode=="function")try{jn.setStrictMode(Qc,e)}catch{}}var Sn=Math.clz32?Math.clz32:aQ,sQ=Math.log,rQ=Math.LN2;function aQ(e){return e>>>=0,e===0?32:31-(sQ(e)/rQ|0)|0}var Fu=256,Vu=4194304;function _a(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Sm(e,t,n){var s=e.pendingLanes;if(s===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=s&134217727;return l!==0?(s=l&~a,s!==0?r=_a(s):(i&=l,i!==0?r=_a(i):n||(n=l&~e,n!==0&&(r=_a(n))))):(l=s&~a,l!==0?r=_a(l):i!==0?r=_a(i):n||(n=s&~e,n!==0&&(r=_a(n)))),r===0?0:t!==0&&t!==r&&!(t&a)&&(a=r&-r,n=t&-t,a>=n||a===32&&(n&4194048)!==0)?t:r}function Jc(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function oQ(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dA(){var e=Fu;return Fu<<=1,!(Fu&4194048)&&(Fu=256),e}function fA(){var e=Vu;return Vu<<=1,!(Vu&62914560)&&(Vu=4194304),e}function Mh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function eu(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function iQ(e,t,n,s,r,a){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,u=e.hiddenUpdates;for(n=i&~n;0<n;){var d=31-Sn(n),f=1<<d;l[d]=0,c[d]=-1;var m=u[d];if(m!==null)for(u[d]=null,d=0;d<m.length;d++){var h=m[d];h!==null&&(h.lane&=-536870913)}n&=~f}s!==0&&mA(e,s,0),a!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=a&~(i&~t))}function mA(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Sn(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194090}function hA(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Sn(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}function ly(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function cy(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function gA(){var e=ze.p;return e!==0?e:(e=window.event,e===void 0?32:zT(e.type))}function lQ(e,t){var n=ze.p;try{return ze.p=e,t()}finally{ze.p=n}}var ba=Math.random().toString(36).slice(2),Ft="__reactFiber$"+ba,cn="__reactProps$"+ba,rl="__reactContainer$"+ba,pp="__reactEvents$"+ba,cQ="__reactListeners$"+ba,uQ="__reactHandles$"+ba,t1="__reactResources$"+ba,tu="__reactMarker$"+ba;function uy(e){delete e[Ft],delete e[cn],delete e[pp],delete e[cQ],delete e[uQ]}function Vo(e){var t=e[Ft];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rl]||n[Ft]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lN(e);e!==null;){if(n=e[Ft])return n;e=lN(e)}return t}e=n,n=e.parentNode}return null}function al(e){if(e=e[Ft]||e[rl]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function zl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(Z(33))}function li(e){var t=e[t1];return t||(t=e[t1]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Mt(e){e[tu]=!0}var pA=new Set,xA={};function bo(e,t){Ri(e,t),Ri(e+"Capture",t)}function Ri(e,t){for(xA[e]=t,e=0;e<t.length;e++)pA.add(t[e])}var dQ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),n1={},s1={};function fQ(e){return gp.call(s1,e)?!0:gp.call(n1,e)?!1:dQ.test(e)?s1[e]=!0:(n1[e]=!0,!1)}function fd(e,t,n){if(fQ(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function qu(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ws(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}var Th,r1;function Po(e){if(Th===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Th=t&&t[1]||"",r1=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Th+e+r1}var Rh=!1;function Dh(e,t){if(!e||Rh)return"";Rh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(h){var m=h}Reflect.construct(e,[],f)}else{try{f.call()}catch(h){m=h}e.call(f.prototype)}}else{try{throw Error()}catch(h){m=h}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=s.DetermineComponentFrameRoot(),i=a[0],l=a[1];if(i&&l){var c=i.split(`
`),u=l.split(`
`);for(r=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(s===c.length||r===u.length)for(s=c.length-1,r=u.length-1;1<=s&&0<=r&&c[s]!==u[r];)r--;for(;1<=s&&0<=r;s--,r--)if(c[s]!==u[r]){if(s!==1||r!==1)do if(s--,r--,0>r||c[s]!==u[r]){var d=`
`+c[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=s&&0<=r);break}}}finally{Rh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Po(n):""}function mQ(e){switch(e.tag){case 26:case 27:case 5:return Po(e.type);case 16:return Po("Lazy");case 13:return Po("Suspense");case 19:return Po("SuspenseList");case 0:case 15:return Dh(e.type,!1);case 11:return Dh(e.type.render,!1);case 1:return Dh(e.type,!0);case 31:return Po("Activity");default:return""}}function a1(e){try{var t="";do t+=mQ(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Dn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hQ(e){var t=yA(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(i){s=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function af(e){e._valueTracker||(e._valueTracker=hQ(e))}function vA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=yA(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function of(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var gQ=/[\n"\\]/g;function Pn(e){return e.replace(gQ,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function xp(e,t,n,s,r,a,i,l){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Dn(t)):e.value!==""+Dn(t)&&(e.value=""+Dn(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?yp(e,i,Dn(t)):n!=null?yp(e,i,Dn(n)):s!=null&&e.removeAttribute("value"),r==null&&a!=null&&(e.defaultChecked=!!a),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Dn(l):e.removeAttribute("name")}function bA(e,t,n,s,r,a,i,l){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.type=a),t!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||t!=null))return;n=n!=null?""+Dn(n):"",t=t!=null?""+Dn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i)}function yp(e,t,n){t==="number"&&of(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ci(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Dn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function wA(e,t,n){if(t!=null&&(t=""+Dn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Dn(n):""}function NA(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(Z(92));if(Dl(s)){if(1<s.length)throw Error(Z(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=Dn(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function Di(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var pQ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function o1(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||pQ.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function jA(e,t,n){if(t!=null&&typeof t!="object")throw Error(Z(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&n[r]!==s&&o1(e,r,s)}else for(var a in t)t.hasOwnProperty(a)&&o1(e,a,t[a])}function dy(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xQ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yQ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function md(e){return yQ.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var vp=null;function fy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qo=null,ui=null;function i1(e){var t=al(e);if(t&&(e=t.stateNode)){var n=e[cn]||null;e:switch(e=t.stateNode,t.type){case"input":if(xp(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Pn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=s[cn]||null;if(!r)throw Error(Z(90));xp(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&vA(s)}break e;case"textarea":wA(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ci(e,!!n.multiple,t,!1)}}}var zh=!1;function SA(e,t,n){if(zh)return e(t,n);zh=!0;try{var s=e(t);return s}finally{if(zh=!1,(qo!==null||ui!==null)&&(zm(),qo&&(t=qo,e=ui,ui=qo=null,i1(t),e)))for(t=0;t<e.length;t++)i1(e[t])}}function bc(e,t){var n=e.stateNode;if(n===null)return null;var s=n[cn]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Z(231,t,typeof n));return n}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bp=!1;if(br)try{var wl={};Object.defineProperty(wl,"passive",{get:function(){bp=!0}}),window.addEventListener("test",wl,wl),window.removeEventListener("test",wl,wl)}catch{bp=!1}var Xr=null,my=null,hd=null;function CA(){if(hd)return hd;var e,t=my,n=t.length,s,r="value"in Xr?Xr.value:Xr.textContent,a=r.length;for(e=0;e<n&&t[e]===r[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===r[a-s];s++);return hd=r.slice(e,1<s?1-s:void 0)}function gd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zu(){return!0}function l1(){return!1}function mn(e){function t(n,s,r,a,i){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Zu:l1,this.isPropagationStopped=l1,this}return Ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zu)},persist:function(){},isPersistent:Zu}),t}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cm=mn(wo),nu=Ke({},wo,{view:0,detail:0}),vQ=mn(nu),Lh,$h,Nl,km=Ke({},nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nl&&(Nl&&e.type==="mousemove"?(Lh=e.screenX-Nl.screenX,$h=e.screenY-Nl.screenY):$h=Lh=0,Nl=e),Lh)},movementY:function(e){return"movementY"in e?e.movementY:$h}}),c1=mn(km),bQ=Ke({},km,{dataTransfer:0}),wQ=mn(bQ),NQ=Ke({},nu,{relatedTarget:0}),Ph=mn(NQ),jQ=Ke({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),SQ=mn(jQ),CQ=Ke({},wo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kQ=mn(CQ),EQ=Ke({},wo,{data:0}),u1=mn(EQ),_Q={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=MQ[e])?!!t[e]:!1}function hy(){return TQ}var RQ=Ke({},nu,{key:function(e){if(e.key){var t=_Q[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?AQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hy,charCode:function(e){return e.type==="keypress"?gd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),DQ=mn(RQ),zQ=Ke({},km,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d1=mn(zQ),LQ=Ke({},nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hy}),$Q=mn(LQ),PQ=Ke({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),OQ=mn(PQ),BQ=Ke({},km,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),IQ=mn(BQ),HQ=Ke({},wo,{newState:0,oldState:0}),UQ=mn(HQ),FQ=[9,13,27,32],gy=br&&"CompositionEvent"in window,Il=null;br&&"documentMode"in document&&(Il=document.documentMode);var VQ=br&&"TextEvent"in window&&!Il,kA=br&&(!gy||Il&&8<Il&&11>=Il),f1=" ",m1=!1;function EA(e,t){switch(e){case"keyup":return FQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _A(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zo=!1;function qQ(e,t){switch(e){case"compositionend":return _A(t);case"keypress":return t.which!==32?null:(m1=!0,f1);case"textInput":return e=t.data,e===f1&&m1?null:e;default:return null}}function ZQ(e,t){if(Zo)return e==="compositionend"||!gy&&EA(e,t)?(e=CA(),hd=my=Xr=null,Zo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kA&&t.locale!=="ko"?null:t.data;default:return null}}var GQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!GQ[e.type]:t==="textarea"}function AA(e,t,n,s){qo?ui?ui.push(s):ui=[s]:qo=s,t=Cf(t,"onChange"),0<t.length&&(n=new Cm("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Hl=null,wc=null;function YQ(e){wT(e,0)}function Em(e){var t=zl(e);if(vA(t))return e}function g1(e,t){if(e==="change")return t}var MA=!1;if(br){var Oh;if(br){var Bh="oninput"in document;if(!Bh){var p1=document.createElement("div");p1.setAttribute("oninput","return;"),Bh=typeof p1.oninput=="function"}Oh=Bh}else Oh=!1;MA=Oh&&(!document.documentMode||9<document.documentMode)}function x1(){Hl&&(Hl.detachEvent("onpropertychange",TA),wc=Hl=null)}function TA(e){if(e.propertyName==="value"&&Em(wc)){var t=[];AA(t,wc,e,fy(e)),SA(YQ,t)}}function XQ(e,t,n){e==="focusin"?(x1(),Hl=t,wc=n,Hl.attachEvent("onpropertychange",TA)):e==="focusout"&&x1()}function WQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Em(wc)}function KQ(e,t){if(e==="click")return Em(t)}function QQ(e,t){if(e==="input"||e==="change")return Em(t)}function JQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _n=typeof Object.is=="function"?Object.is:JQ;function Nc(e,t){if(_n(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!gp.call(t,r)||!_n(e[r],t[r]))return!1}return!0}function y1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function v1(e,t){var n=y1(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=y1(n)}}function RA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?RA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function DA(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=of(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=of(e.document)}return t}function py(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var eJ=br&&"documentMode"in document&&11>=document.documentMode,Go=null,wp=null,Ul=null,Np=!1;function b1(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Np||Go==null||Go!==of(s)||(s=Go,"selectionStart"in s&&py(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ul&&Nc(Ul,s)||(Ul=s,s=Cf(wp,"onSelect"),0<s.length&&(t=new Cm("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Go)))}function ka(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yo={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionrun:ka("Transition","TransitionRun"),transitionstart:ka("Transition","TransitionStart"),transitioncancel:ka("Transition","TransitionCancel"),transitionend:ka("Transition","TransitionEnd")},Ih={},zA={};br&&(zA=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function No(e){if(Ih[e])return Ih[e];if(!Yo[e])return e;var t=Yo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zA)return Ih[e]=t[n];return e}var LA=No("animationend"),$A=No("animationiteration"),PA=No("animationstart"),tJ=No("transitionrun"),nJ=No("transitionstart"),sJ=No("transitioncancel"),OA=No("transitionend"),BA=new Map,jp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jp.push("scrollEnd");function ds(e,t){BA.set(e,t),bo(t,[e])}var w1=new WeakMap;function On(e,t){if(typeof e=="object"&&e!==null){var n=w1.get(e);return n!==void 0?n:(t={value:e,source:t,stack:a1(t)},w1.set(e,t),t)}return{value:e,source:t,stack:a1(t)}}var Rn=[],Xo=0,xy=0;function _m(){for(var e=Xo,t=xy=Xo=0;t<e;){var n=Rn[t];Rn[t++]=null;var s=Rn[t];Rn[t++]=null;var r=Rn[t];Rn[t++]=null;var a=Rn[t];if(Rn[t++]=null,s!==null&&r!==null){var i=s.pending;i===null?r.next=r:(r.next=i.next,i.next=r),s.pending=r}a!==0&&IA(n,r,a)}}function Am(e,t,n,s){Rn[Xo++]=e,Rn[Xo++]=t,Rn[Xo++]=n,Rn[Xo++]=s,xy|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function yy(e,t,n,s){return Am(e,t,n,s),lf(e)}function ol(e,t){return Am(e,null,null,t),lf(e)}function IA(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var r=!1,a=e.return;a!==null;)a.childLanes|=n,s=a.alternate,s!==null&&(s.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(r=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,r&&t!==null&&(r=31-Sn(n),e=a.hiddenUpdates,s=e[r],s===null?e[r]=[t]:s.push(t),t.lane=n|536870912),a):null}function lf(e){if(50<Ql)throw Ql=0,Vp=null,Error(Z(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Wo={};function rJ(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,n,s){return new rJ(e,t,n,s)}function vy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fr(e,t){var n=e.alternate;return n===null?(n=bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function HA(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function pd(e,t,n,s,r,a){var i=0;if(s=e,typeof e=="function")vy(e)&&(i=1);else if(typeof e=="string")i=oee(e,n,_s.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case dp:return e=bn(31,n,t,r),e.elementType=dp,e.lanes=a,e;case Uo:return Ha(n.children,r,a,t);case oA:i=8,r|=24;break;case lp:return e=bn(12,n,t,r|2),e.elementType=lp,e.lanes=a,e;case cp:return e=bn(13,n,t,r),e.elementType=cp,e.lanes=a,e;case up:return e=bn(19,n,t,r),e.elementType=up,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case YK:case rr:i=10;break e;case iA:i=9;break e;case ay:i=11;break e;case oy:i=14;break e;case Br:i=16,s=null;break e}i=29,n=Error(Z(130,e===null?"null":typeof e,"")),s=null}return t=bn(i,n,t,r),t.elementType=e,t.type=s,t.lanes=a,t}function Ha(e,t,n,s){return e=bn(7,e,s,t),e.lanes=n,e}function Hh(e,t,n){return e=bn(6,e,null,t),e.lanes=n,e}function Uh(e,t,n){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ko=[],Qo=0,cf=null,uf=0,zn=[],Ln=0,Ua=null,ar=1,or="";function Aa(e,t){Ko[Qo++]=uf,Ko[Qo++]=cf,cf=e,uf=t}function UA(e,t,n){zn[Ln++]=ar,zn[Ln++]=or,zn[Ln++]=Ua,Ua=e;var s=ar;e=or;var r=32-Sn(s)-1;s&=~(1<<r),n+=1;var a=32-Sn(t)+r;if(30<a){var i=r-r%5;a=(s&(1<<i)-1).toString(32),s>>=i,r-=i,ar=1<<32-Sn(t)+r|n<<r|s,or=a+e}else ar=1<<a|n<<r|s,or=e}function by(e){e.return!==null&&(Aa(e,1),UA(e,1,0))}function wy(e){for(;e===cf;)cf=Ko[--Qo],Ko[Qo]=null,uf=Ko[--Qo],Ko[Qo]=null;for(;e===Ua;)Ua=zn[--Ln],zn[Ln]=null,or=zn[--Ln],zn[Ln]=null,ar=zn[--Ln],zn[Ln]=null}var Gt=null,it=null,De=!1,Fa=null,ws=!1,Sp=Error(Z(519));function no(e){var t=Error(Z(418,""));throw jc(On(t,e)),Sp}function N1(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[Ft]=e,t[cn]=s,n){case"dialog":ke("cancel",t),ke("close",t);break;case"iframe":case"object":case"embed":ke("load",t);break;case"video":case"audio":for(n=0;n<kc.length;n++)ke(kc[n],t);break;case"source":ke("error",t);break;case"img":case"image":case"link":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"input":ke("invalid",t),bA(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),af(t);break;case"select":ke("invalid",t);break;case"textarea":ke("invalid",t),NA(t,s.value,s.defaultValue,s.children),af(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||jT(t.textContent,n)?(s.popover!=null&&(ke("beforetoggle",t),ke("toggle",t)),s.onScroll!=null&&ke("scroll",t),s.onScrollEnd!=null&&ke("scrollend",t),s.onClick!=null&&(t.onclick=Pm),t=!0):t=!1,t||no(e)}function j1(e){for(Gt=e.return;Gt;)switch(Gt.tag){case 5:case 13:ws=!1;return;case 27:case 3:ws=!0;return;default:Gt=Gt.return}}function jl(e){if(e!==Gt)return!1;if(!De)return j1(e),De=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Wp(e.type,e.memoizedProps)),n=!n),n&&it&&no(e),j1(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){it=rs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}it=null}}else t===27?(t=it,wa(e.type)?(e=Jp,Jp=null,it=e):it=t):it=Gt?rs(e.stateNode.nextSibling):null;return!0}function su(){it=Gt=null,De=!1}function S1(){var e=Fa;return e!==null&&(rn===null?rn=e:rn.push.apply(rn,e),Fa=null),e}function jc(e){Fa===null?Fa=[e]:Fa.push(e)}var Cp=Bs(null),jo=null,ir=null;function Fr(e,t,n){et(Cp,t._currentValue),t._currentValue=n}function mr(e){e._currentValue=Cp.current,Rt(Cp)}function kp(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ep(e,t,n,s){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){var i=r.child;a=a.firstContext;e:for(;a!==null;){var l=a;a=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),kp(a.return,n,e),s||(i=null);break e}a=l.next}}else if(r.tag===18){if(i=r.return,i===null)throw Error(Z(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),kp(i,n,e),i=null}else i=r.child;if(i!==null)i.return=r;else for(i=r;i!==null;){if(i===e){i=null;break}if(r=i.sibling,r!==null){r.return=i.return,i=r;break}i=i.return}r=i}}function ru(e,t,n,s){e=null;for(var r=t,a=!1;r!==null;){if(!a){if(r.flags&524288)a=!0;else if(r.flags&262144)break}if(r.tag===10){var i=r.alternate;if(i===null)throw Error(Z(387));if(i=i.memoizedProps,i!==null){var l=r.type;_n(r.pendingProps.value,i.value)||(e!==null?e.push(l):e=[l])}}else if(r===tf.current){if(i=r.alternate,i===null)throw Error(Z(387));i.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Ac):e=[Ac])}r=r.return}e!==null&&Ep(t,e,n,s),t.flags|=262144}function df(e){for(e=e.firstContext;e!==null;){if(!_n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function so(e){jo=e,ir=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Vt(e){return FA(jo,e)}function Gu(e,t){return jo===null&&so(e),FA(e,t)}function FA(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ir===null){if(e===null)throw Error(Z(308));ir=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ir=ir.next=t;return n}var aJ=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},oJ=Et.unstable_scheduleCallback,iJ=Et.unstable_NormalPriority,Ct={$$typeof:rr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ny(){return{controller:new aJ,data:new Map,refCount:0}}function au(e){e.refCount--,e.refCount===0&&oJ(iJ,function(){e.controller.abort()})}var Fl=null,_p=0,zi=0,di=null;function lJ(e,t){if(Fl===null){var n=Fl=[];_p=0,zi=qy(),di={status:"pending",value:void 0,then:function(s){n.push(s)}}}return _p++,t.then(C1,C1),t}function C1(){if(--_p===0&&Fl!==null){di!==null&&(di.status="fulfilled");var e=Fl;Fl=null,zi=0,di=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function cJ(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var k1=ge.S;ge.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&lJ(e,t),k1!==null&&k1(e,t)};var Va=Bs(null);function jy(){var e=Va.current;return e!==null?e:Ge.pooledCache}function xd(e,t){t===null?et(Va,Va.current):et(Va,t.pool)}function VA(){var e=jy();return e===null?null:{parent:Ct._currentValue,pool:e}}var ou=Error(Z(460)),qA=Error(Z(474)),Mm=Error(Z(542)),Ap={then:function(){}};function E1(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Yu(){}function ZA(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Yu,Yu),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,A1(e),e;default:if(typeof t.status=="string")t.then(Yu,Yu);else{if(e=Ge,e!==null&&100<e.shellSuspendCounter)throw Error(Z(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=s}},function(s){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,A1(e),e}throw Vl=t,ou}}var Vl=null;function _1(){if(Vl===null)throw Error(Z(459));var e=Vl;return Vl=null,e}function A1(e){if(e===ou||e===Mm)throw Error(Z(483))}var Ir=!1;function Sy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function sa(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ie&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=lf(e),IA(e,null,n),t}return Am(e,s,t,n),lf(e)}function ql(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,hA(e,n)}}function Fh(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?r=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?r=a=t:a=a.next=t}else r=a=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Tp=!1;function Zl(){if(Tp){var e=di;if(e!==null)throw e}}function Gl(e,t,n,s){Tp=!1;var r=e.updateQueue;Ir=!1;var a=r.firstBaseUpdate,i=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=r.baseState;i=0,d=u=c=null,l=a;do{var m=l.lane&-536870913,h=m!==l.lane;if(h?(Me&m)===m:(s&m)===m){m!==0&&m===zi&&(Tp=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var p=e,y=l;m=t;var b=n;switch(y.tag){case 1:if(p=y.payload,typeof p=="function"){f=p.call(b,f,m);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,m=typeof p=="function"?p.call(b,f,m):p,m==null)break e;f=Ke({},f,m);break e;case 2:Ir=!0}}m=l.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[m]:h.push(m))}else h={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,i|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);d===null&&(c=f),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,a===null&&(r.shared.lanes=0),ga|=i,e.lanes=i,e.memoizedState=f}}function GA(e,t){if(typeof e!="function")throw Error(Z(191,e));e.call(t)}function YA(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)GA(n[e],t)}var Li=Bs(null),ff=Bs(0);function M1(e,t){e=jr,et(ff,e),et(Li,t),jr=e|t.baseLanes}function Rp(){et(ff,jr),et(Li,Li.current)}function Cy(){jr=ff.current,Rt(Li),Rt(ff)}var ma=0,Se=null,Ue=null,vt=null,mf=!1,fi=!1,ro=!1,hf=0,Sc=0,mi=null,uJ=0;function ft(){throw Error(Z(321))}function ky(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_n(e[n],t[n]))return!1;return!0}function Ey(e,t,n,s,r,a){return ma=a,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ge.H=e===null||e.memoizedState===null?CM:kM,ro=!1,a=n(s,r),ro=!1,fi&&(a=WA(t,n,s,r)),XA(e),a}function XA(e){ge.H=gf;var t=Ue!==null&&Ue.next!==null;if(ma=0,vt=Ue=Se=null,mf=!1,Sc=0,mi=null,t)throw Error(Z(300));e===null||Tt||(e=e.dependencies,e!==null&&df(e)&&(Tt=!0))}function WA(e,t,n,s){Se=e;var r=0;do{if(fi&&(mi=null),Sc=0,fi=!1,25<=r)throw Error(Z(301));if(r+=1,vt=Ue=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}ge.H=xJ,a=t(n,s)}while(fi);return a}function dJ(){var e=ge.H,t=e.useState()[0];return t=typeof t.then=="function"?iu(t):t,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(Se.flags|=1024),t}function _y(){var e=hf!==0;return hf=0,e}function Ay(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function My(e){if(mf){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}mf=!1}ma=0,vt=Ue=Se=null,fi=!1,Sc=hf=0,mi=null}function nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Se.memoizedState=vt=e:vt=vt.next=e,vt}function bt(){if(Ue===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=vt===null?Se.memoizedState:vt.next;if(t!==null)vt=t,Ue=e;else{if(e===null)throw Se.alternate===null?Error(Z(467)):Error(Z(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},vt===null?Se.memoizedState=vt=e:vt=vt.next=e}return vt}function Ty(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function iu(e){var t=Sc;return Sc+=1,mi===null&&(mi=[]),e=ZA(mi,e,t),t=Se,(vt===null?t.memoizedState:vt.next)===null&&(t=t.alternate,ge.H=t===null||t.memoizedState===null?CM:kM),e}function Tm(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return iu(e);if(e.$$typeof===rr)return Vt(e)}throw Error(Z(438,String(e)))}function Ry(e){var t=null,n=Se.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=Se.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Ty(),Se.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=XK;return t.index++,n}function wr(e,t){return typeof t=="function"?t(e):t}function yd(e){var t=bt();return Dy(t,Ue,e)}function Dy(e,t,n){var s=e.queue;if(s===null)throw Error(Z(311));s.lastRenderedReducer=n;var r=e.baseQueue,a=s.pending;if(a!==null){if(r!==null){var i=r.next;r.next=a.next,a.next=i}t.baseQueue=r=a,s.pending=null}if(a=e.baseState,r===null)e.memoizedState=a;else{t=r.next;var l=i=null,c=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(Me&f)===f:(ma&f)===f){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===zi&&(d=!0);else if((ma&m)===m){u=u.next,m===zi&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=f,i=a):c=c.next=f,Se.lanes|=m,ga|=m;f=u.action,ro&&n(a,f),a=u.hasEagerState?u.eagerState:n(a,f)}else m={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=m,i=a):c=c.next=m,Se.lanes|=f,ga|=f;u=u.next}while(u!==null&&u!==t);if(c===null?i=a:c.next=l,!_n(a,e.memoizedState)&&(Tt=!0,d&&(n=di,n!==null)))throw n;e.memoizedState=a,e.baseState=i,e.baseQueue=c,s.lastRenderedState=a}return r===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Vh(e){var t=bt(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,a=t.memoizedState;if(r!==null){n.pending=null;var i=r=r.next;do a=e(a,i.action),i=i.next;while(i!==r);_n(a,t.memoizedState)||(Tt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function KA(e,t,n){var s=Se,r=bt(),a=De;if(a){if(n===void 0)throw Error(Z(407));n=n()}else n=t();var i=!_n((Ue||r).memoizedState,n);i&&(r.memoizedState=n,Tt=!0),r=r.queue;var l=eM.bind(null,s,r,e);if(lu(2048,8,l,[e]),r.getSnapshot!==t||i||vt!==null&&vt.memoizedState.tag&1){if(s.flags|=2048,$i(9,Rm(),JA.bind(null,s,r,n,t),null),Ge===null)throw Error(Z(349));a||ma&124||QA(s,t,n)}return n}function QA(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Se.updateQueue,t===null?(t=Ty(),Se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function JA(e,t,n,s){t.value=n,t.getSnapshot=s,tM(t)&&nM(e)}function eM(e,t,n){return n(function(){tM(t)&&nM(e)})}function tM(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_n(e,n)}catch{return!0}}function nM(e){var t=ol(e,2);t!==null&&kn(t,e,2)}function Dp(e){var t=nn();if(typeof e=="function"){var n=e;if(e=n(),ro){Yr(!0);try{n()}finally{Yr(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:e},t}function sM(e,t,n,s){return e.baseState=n,Dy(e,Ue,typeof s=="function"?s:wr)}function fJ(e,t,n,s,r){if(Dm(e))throw Error(Z(485));if(e=t.action,e!==null){var a={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){a.listeners.push(i)}};ge.T!==null?n(!0):a.isTransition=!1,s(a),n=t.pending,n===null?(a.next=t.pending=a,rM(t,a)):(a.next=n.next,t.pending=n.next=a)}}function rM(e,t){var n=t.action,s=t.payload,r=e.state;if(t.isTransition){var a=ge.T,i={};ge.T=i;try{var l=n(r,s),c=ge.S;c!==null&&c(i,l),T1(e,t,l)}catch(u){zp(e,t,u)}finally{ge.T=a}}else try{a=n(r,s),T1(e,t,a)}catch(u){zp(e,t,u)}}function T1(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){R1(e,t,s)},function(s){return zp(e,t,s)}):R1(e,t,n)}function R1(e,t,n){t.status="fulfilled",t.value=n,aM(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,rM(e,n)))}function zp(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,aM(t),t=t.next;while(t!==s)}e.action=null}function aM(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oM(e,t){return t}function D1(e,t){if(De){var n=Ge.formState;if(n!==null){e:{var s=Se;if(De){if(it){t:{for(var r=it,a=ws;r.nodeType!==8;){if(!a){r=null;break t}if(r=rs(r.nextSibling),r===null){r=null;break t}}a=r.data,r=a==="F!"||a==="F"?r:null}if(r){it=rs(r.nextSibling),s=r.data==="F!";break e}}no(s)}s=!1}s&&(t=n[0])}}return n=nn(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oM,lastRenderedState:t},n.queue=s,n=NM.bind(null,Se,s),s.dispatch=n,s=Dp(!1),a=Py.bind(null,Se,!1,s.queue),s=nn(),r={state:t,dispatch:null,action:e,pending:null},s.queue=r,n=fJ.bind(null,Se,r,a,n),r.dispatch=n,s.memoizedState=e,[t,n,!1]}function z1(e){var t=bt();return iM(t,Ue,e)}function iM(e,t,n){if(t=Dy(e,t,oM)[0],e=yd(wr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=iu(t)}catch(i){throw i===ou?Mm:i}else s=t;t=bt();var r=t.queue,a=r.dispatch;return n!==t.memoizedState&&(Se.flags|=2048,$i(9,Rm(),mJ.bind(null,r,n),null)),[s,a,e]}function mJ(e,t){e.action=t}function L1(e){var t=bt(),n=Ue;if(n!==null)return iM(t,n,e);bt(),t=t.memoizedState,n=bt();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function $i(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},t=Se.updateQueue,t===null&&(t=Ty(),Se.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Rm(){return{destroy:void 0,resource:void 0}}function lM(){return bt().memoizedState}function vd(e,t,n,s){var r=nn();s=s===void 0?null:s,Se.flags|=e,r.memoizedState=$i(1|t,Rm(),n,s)}function lu(e,t,n,s){var r=bt();s=s===void 0?null:s;var a=r.memoizedState.inst;Ue!==null&&s!==null&&ky(s,Ue.memoizedState.deps)?r.memoizedState=$i(t,a,n,s):(Se.flags|=e,r.memoizedState=$i(1|t,a,n,s))}function $1(e,t){vd(8390656,8,e,t)}function cM(e,t){lu(2048,8,e,t)}function uM(e,t){return lu(4,2,e,t)}function dM(e,t){return lu(4,4,e,t)}function fM(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mM(e,t,n){n=n!=null?n.concat([e]):null,lu(4,4,fM.bind(null,t,e),n)}function zy(){}function hM(e,t){var n=bt();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&ky(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function gM(e,t){var n=bt();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&ky(t,s[1]))return s[0];if(s=e(),ro){Yr(!0);try{e()}finally{Yr(!1)}}return n.memoizedState=[s,t],s}function Ly(e,t,n){return n===void 0||ma&1073741824?e.memoizedState=t:(e.memoizedState=n,e=aT(),Se.lanes|=e,ga|=e,n)}function pM(e,t,n,s){return _n(n,t)?n:Li.current!==null?(e=Ly(e,n,s),_n(e,t)||(Tt=!0),e):ma&42?(e=aT(),Se.lanes|=e,ga|=e,t):(Tt=!0,e.memoizedState=n)}function xM(e,t,n,s,r){var a=ze.p;ze.p=a!==0&&8>a?a:8;var i=ge.T,l={};ge.T=l,Py(e,!1,t,n);try{var c=r(),u=ge.S;if(u!==null&&u(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=cJ(c,s);Yl(e,t,d,Cn(e))}else Yl(e,t,s,Cn(e))}catch(f){Yl(e,t,{then:function(){},status:"rejected",reason:f},Cn())}finally{ze.p=a,ge.T=i}}function hJ(){}function Lp(e,t,n,s){if(e.tag!==5)throw Error(Z(476));var r=yM(e).queue;xM(e,r,t,Ia,n===null?hJ:function(){return vM(e),n(s)})}function yM(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ia,baseState:Ia,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:Ia},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function vM(e){var t=yM(e).next.queue;Yl(e,t,{},Cn())}function $y(){return Vt(Ac)}function bM(){return bt().memoizedState}function wM(){return bt().memoizedState}function gJ(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Cn();e=na(n);var s=sa(t,e,n);s!==null&&(kn(s,t,n),ql(s,t,n)),t={cache:Ny()},e.payload=t;return}t=t.return}}function pJ(e,t,n){var s=Cn();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Dm(e)?jM(t,n):(n=yy(e,t,n,s),n!==null&&(kn(n,e,s),SM(n,t,s)))}function NM(e,t,n){var s=Cn();Yl(e,t,n,s)}function Yl(e,t,n,s){var r={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dm(e))jM(t,r);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,n);if(r.hasEagerState=!0,r.eagerState=l,_n(l,i))return Am(e,t,r,0),Ge===null&&_m(),!1}catch{}finally{}if(n=yy(e,t,r,s),n!==null)return kn(n,e,s),SM(n,t,s),!0}return!1}function Py(e,t,n,s){if(s={lane:2,revertLane:qy(),action:s,hasEagerState:!1,eagerState:null,next:null},Dm(e)){if(t)throw Error(Z(479))}else t=yy(e,n,s,2),t!==null&&kn(t,e,2)}function Dm(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function jM(e,t){fi=mf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function SM(e,t,n){if(n&4194048){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,hA(e,n)}}var gf={readContext:Vt,use:Tm,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft},CM={readContext:Vt,use:Tm,useCallback:function(e,t){return nn().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:$1,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,vd(4194308,4,fM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vd(4194308,4,e,t)},useInsertionEffect:function(e,t){vd(4,2,e,t)},useMemo:function(e,t){var n=nn();t=t===void 0?null:t;var s=e();if(ro){Yr(!0);try{e()}finally{Yr(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=nn();if(n!==void 0){var r=n(t);if(ro){Yr(!0);try{n(t)}finally{Yr(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=pJ.bind(null,Se,e),[s.memoizedState,e]},useRef:function(e){var t=nn();return e={current:e},t.memoizedState=e},useState:function(e){e=Dp(e);var t=e.queue,n=NM.bind(null,Se,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:zy,useDeferredValue:function(e,t){var n=nn();return Ly(n,e,t)},useTransition:function(){var e=Dp(!1);return e=xM.bind(null,Se,e.queue,!0,!1),nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=Se,r=nn();if(De){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=t(),Ge===null)throw Error(Z(349));Me&124||QA(s,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,$1(eM.bind(null,s,a,e),[e]),s.flags|=2048,$i(9,Rm(),JA.bind(null,s,a,n,t),null),n},useId:function(){var e=nn(),t=Ge.identifierPrefix;if(De){var n=or,s=ar;n=(s&~(1<<32-Sn(s)-1)).toString(32)+n,t=""+t+"R"+n,n=hf++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=uJ++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:$y,useFormState:D1,useActionState:D1,useOptimistic:function(e){var t=nn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Py.bind(null,Se,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ry,useCacheRefresh:function(){return nn().memoizedState=gJ.bind(null,Se)}},kM={readContext:Vt,use:Tm,useCallback:hM,useContext:Vt,useEffect:cM,useImperativeHandle:mM,useInsertionEffect:uM,useLayoutEffect:dM,useMemo:gM,useReducer:yd,useRef:lM,useState:function(){return yd(wr)},useDebugValue:zy,useDeferredValue:function(e,t){var n=bt();return pM(n,Ue.memoizedState,e,t)},useTransition:function(){var e=yd(wr)[0],t=bt().memoizedState;return[typeof e=="boolean"?e:iu(e),t]},useSyncExternalStore:KA,useId:bM,useHostTransitionStatus:$y,useFormState:z1,useActionState:z1,useOptimistic:function(e,t){var n=bt();return sM(n,Ue,e,t)},useMemoCache:Ry,useCacheRefresh:wM},xJ={readContext:Vt,use:Tm,useCallback:hM,useContext:Vt,useEffect:cM,useImperativeHandle:mM,useInsertionEffect:uM,useLayoutEffect:dM,useMemo:gM,useReducer:Vh,useRef:lM,useState:function(){return Vh(wr)},useDebugValue:zy,useDeferredValue:function(e,t){var n=bt();return Ue===null?Ly(n,e,t):pM(n,Ue.memoizedState,e,t)},useTransition:function(){var e=Vh(wr)[0],t=bt().memoizedState;return[typeof e=="boolean"?e:iu(e),t]},useSyncExternalStore:KA,useId:bM,useHostTransitionStatus:$y,useFormState:L1,useActionState:L1,useOptimistic:function(e,t){var n=bt();return Ue!==null?sM(n,Ue,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ry,useCacheRefresh:wM},hi=null,Cc=0;function Xu(e){var t=Cc;return Cc+=1,hi===null&&(hi=[]),ZA(hi,e,t)}function Sl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Wu(e,t){throw t.$$typeof===GK?Error(Z(525)):(e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function P1(e){var t=e._init;return t(e._payload)}function EM(e){function t(x,w){if(e){var v=x.deletions;v===null?(x.deletions=[w],x.flags|=16):v.push(w)}}function n(x,w){if(!e)return null;for(;w!==null;)t(x,w),w=w.sibling;return null}function s(x){for(var w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function r(x,w){return x=fr(x,w),x.index=0,x.sibling=null,x}function a(x,w,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<w?(x.flags|=67108866,w):v):(x.flags|=67108866,w)):(x.flags|=1048576,w)}function i(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function l(x,w,v,N){return w===null||w.tag!==6?(w=Hh(v,x.mode,N),w.return=x,w):(w=r(w,v),w.return=x,w)}function c(x,w,v,N){var j=v.type;return j===Uo?d(x,w,v.props.children,N,v.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Br&&P1(j)===w.type)?(w=r(w,v.props),Sl(w,v),w.return=x,w):(w=pd(v.type,v.key,v.props,null,x.mode,N),Sl(w,v),w.return=x,w)}function u(x,w,v,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=Uh(v,x.mode,N),w.return=x,w):(w=r(w,v.children||[]),w.return=x,w)}function d(x,w,v,N,j){return w===null||w.tag!==7?(w=Ha(v,x.mode,N,j),w.return=x,w):(w=r(w,v),w.return=x,w)}function f(x,w,v){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Hh(""+w,x.mode,v),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Uu:return v=pd(w.type,w.key,w.props,null,x.mode,v),Sl(v,w),v.return=x,v;case Rl:return w=Uh(w,x.mode,v),w.return=x,w;case Br:var N=w._init;return w=N(w._payload),f(x,w,v)}if(Dl(w)||bl(w))return w=Ha(w,x.mode,v,null),w.return=x,w;if(typeof w.then=="function")return f(x,Xu(w),v);if(w.$$typeof===rr)return f(x,Gu(x,w),v);Wu(x,w)}return null}function m(x,w,v,N){var j=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return j!==null?null:l(x,w,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Uu:return v.key===j?c(x,w,v,N):null;case Rl:return v.key===j?u(x,w,v,N):null;case Br:return j=v._init,v=j(v._payload),m(x,w,v,N)}if(Dl(v)||bl(v))return j!==null?null:d(x,w,v,N,null);if(typeof v.then=="function")return m(x,w,Xu(v),N);if(v.$$typeof===rr)return m(x,w,Gu(x,v),N);Wu(x,v)}return null}function h(x,w,v,N,j){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return x=x.get(v)||null,l(w,x,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Uu:return x=x.get(N.key===null?v:N.key)||null,c(w,x,N,j);case Rl:return x=x.get(N.key===null?v:N.key)||null,u(w,x,N,j);case Br:var S=N._init;return N=S(N._payload),h(x,w,v,N,j)}if(Dl(N)||bl(N))return x=x.get(v)||null,d(w,x,N,j,null);if(typeof N.then=="function")return h(x,w,v,Xu(N),j);if(N.$$typeof===rr)return h(x,w,v,Gu(w,N),j);Wu(w,N)}return null}function p(x,w,v,N){for(var j=null,S=null,C=w,E=w=0,k=null;C!==null&&E<v.length;E++){C.index>E?(k=C,C=null):k=C.sibling;var _=m(x,C,v[E],N);if(_===null){C===null&&(C=k);break}e&&C&&_.alternate===null&&t(x,C),w=a(_,w,E),S===null?j=_:S.sibling=_,S=_,C=k}if(E===v.length)return n(x,C),De&&Aa(x,E),j;if(C===null){for(;E<v.length;E++)C=f(x,v[E],N),C!==null&&(w=a(C,w,E),S===null?j=C:S.sibling=C,S=C);return De&&Aa(x,E),j}for(C=s(C);E<v.length;E++)k=h(C,x,E,v[E],N),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?E:k.key),w=a(k,w,E),S===null?j=k:S.sibling=k,S=k);return e&&C.forEach(function(P){return t(x,P)}),De&&Aa(x,E),j}function y(x,w,v,N){if(v==null)throw Error(Z(151));for(var j=null,S=null,C=w,E=w=0,k=null,_=v.next();C!==null&&!_.done;E++,_=v.next()){C.index>E?(k=C,C=null):k=C.sibling;var P=m(x,C,_.value,N);if(P===null){C===null&&(C=k);break}e&&C&&P.alternate===null&&t(x,C),w=a(P,w,E),S===null?j=P:S.sibling=P,S=P,C=k}if(_.done)return n(x,C),De&&Aa(x,E),j;if(C===null){for(;!_.done;E++,_=v.next())_=f(x,_.value,N),_!==null&&(w=a(_,w,E),S===null?j=_:S.sibling=_,S=_);return De&&Aa(x,E),j}for(C=s(C);!_.done;E++,_=v.next())_=h(C,x,E,_.value,N),_!==null&&(e&&_.alternate!==null&&C.delete(_.key===null?E:_.key),w=a(_,w,E),S===null?j=_:S.sibling=_,S=_);return e&&C.forEach(function(O){return t(x,O)}),De&&Aa(x,E),j}function b(x,w,v,N){if(typeof v=="object"&&v!==null&&v.type===Uo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Uu:e:{for(var j=v.key;w!==null;){if(w.key===j){if(j=v.type,j===Uo){if(w.tag===7){n(x,w.sibling),N=r(w,v.props.children),N.return=x,x=N;break e}}else if(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Br&&P1(j)===w.type){n(x,w.sibling),N=r(w,v.props),Sl(N,v),N.return=x,x=N;break e}n(x,w);break}else t(x,w);w=w.sibling}v.type===Uo?(N=Ha(v.props.children,x.mode,N,v.key),N.return=x,x=N):(N=pd(v.type,v.key,v.props,null,x.mode,N),Sl(N,v),N.return=x,x=N)}return i(x);case Rl:e:{for(j=v.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(x,w.sibling),N=r(w,v.children||[]),N.return=x,x=N;break e}else{n(x,w);break}else t(x,w);w=w.sibling}N=Uh(v,x.mode,N),N.return=x,x=N}return i(x);case Br:return j=v._init,v=j(v._payload),b(x,w,v,N)}if(Dl(v))return p(x,w,v,N);if(bl(v)){if(j=bl(v),typeof j!="function")throw Error(Z(150));return v=j.call(v),y(x,w,v,N)}if(typeof v.then=="function")return b(x,w,Xu(v),N);if(v.$$typeof===rr)return b(x,w,Gu(x,v),N);Wu(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,w!==null&&w.tag===6?(n(x,w.sibling),N=r(w,v),N.return=x,x=N):(n(x,w),N=Hh(v,x.mode,N),N.return=x,x=N),i(x)):n(x,w)}return function(x,w,v,N){try{Cc=0;var j=b(x,w,v,N);return hi=null,j}catch(C){if(C===ou||C===Mm)throw C;var S=bn(29,C,null,x.mode);return S.lanes=N,S.return=x,S}finally{}}}var Pi=EM(!0),_M=EM(!1),Zn=Bs(null),Ms=null;function Vr(e){var t=e.alternate;et(kt,kt.current&1),et(Zn,e),Ms===null&&(t===null||Li.current!==null||t.memoizedState!==null)&&(Ms=e)}function AM(e){if(e.tag===22){if(et(kt,kt.current),et(Zn,e),Ms===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Ms=e)}}else qr()}function qr(){et(kt,kt.current),et(Zn,Zn.current)}function lr(e){Rt(Zn),Ms===e&&(Ms=null),Rt(kt)}var kt=Bs(0);function pf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Qp(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qh(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ke({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $p={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Cn(),r=na(s);r.payload=t,n!=null&&(r.callback=n),t=sa(e,r,s),t!==null&&(kn(t,e,s),ql(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Cn(),r=na(s);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=sa(e,r,s),t!==null&&(kn(t,e,s),ql(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Cn(),s=na(n);s.tag=2,t!=null&&(s.callback=t),t=sa(e,s,n),t!==null&&(kn(t,e,n),ql(t,e,n))}};function O1(e,t,n,s,r,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,i):t.prototype&&t.prototype.isPureReactComponent?!Nc(n,s)||!Nc(r,a):!0}function B1(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&$p.enqueueReplaceState(t,t.state,null)}function ao(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=Ke({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var xf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function MM(e){xf(e)}function TM(e){console.error(e)}function RM(e){xf(e)}function yf(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function I1(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Pp(e,t,n){return n=na(n),n.tag=3,n.payload={element:null},n.callback=function(){yf(e,t)},n}function DM(e){return e=na(e),e.tag=3,e}function zM(e,t,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var a=s.value;e.payload=function(){return r(a)},e.callback=function(){I1(t,n,s)}}var i=n.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){I1(t,n,s),typeof r!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function yJ(e,t,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&ru(t,n,r,!0),n=Zn.current,n!==null){switch(n.tag){case 13:return Ms===null?qp():n.alternate===null&&lt===0&&(lt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===Ap?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),ng(e,s,r)),!1;case 22:return n.flags|=65536,s===Ap?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),ng(e,s,r)),!1}throw Error(Z(435,n.tag))}return ng(e,s,r),qp(),!1}if(De)return t=Zn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==Sp&&(e=Error(Z(422),{cause:s}),jc(On(e,n)))):(s!==Sp&&(t=Error(Z(423),{cause:s}),jc(On(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,s=On(s,n),r=Pp(e.stateNode,s,r),Fh(e,r),lt!==4&&(lt=2)),!1;var a=Error(Z(520),{cause:s});if(a=On(a,n),Kl===null?Kl=[a]:Kl.push(a),lt!==4&&(lt=2),t===null)return!0;s=On(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Pp(n.stateNode,s,e),Fh(n,e),!1;case 1:if(t=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(ra===null||!ra.has(a))))return n.flags|=65536,r&=-r,n.lanes|=r,r=DM(r),zM(r,e,n,s),Fh(n,r),!1}n=n.return}while(n!==null);return!1}var LM=Error(Z(461)),Tt=!1;function Pt(e,t,n,s){t.child=e===null?_M(t,null,n,s):Pi(t,e.child,n,s)}function H1(e,t,n,s,r){n=n.render;var a=t.ref;if("ref"in s){var i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}else i=s;return so(t),s=Ey(e,t,n,i,a,r),l=_y(),e!==null&&!Tt?(Ay(e,t,r),Nr(e,t,r)):(De&&l&&by(t),t.flags|=1,Pt(e,t,s,r),t.child)}function U1(e,t,n,s,r){if(e===null){var a=n.type;return typeof a=="function"&&!vy(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,$M(e,t,a,s,r)):(e=pd(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Oy(e,r)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:Nc,n(i,s)&&e.ref===t.ref)return Nr(e,t,r)}return t.flags|=1,e=fr(a,s),e.ref=t.ref,e.return=t,t.child=e}function $M(e,t,n,s,r){if(e!==null){var a=e.memoizedProps;if(Nc(a,s)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=s=a,Oy(e,r))e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,Nr(e,t,r)}return Op(e,t,n,s,r)}function PM(e,t,n){var s=t.pendingProps,r=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if(t.flags&128){if(s=a!==null?a.baseLanes|n:n,e!==null){for(r=t.child=e.child,a=0;r!==null;)a=a|r.lanes|r.childLanes,r=r.sibling;t.childLanes=a&~s}else t.childLanes=0,t.child=null;return F1(e,t,s,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&xd(t,a!==null?a.cachePool:null),a!==null?M1(t,a):Rp(),AM(t);else return t.lanes=t.childLanes=536870912,F1(e,t,a!==null?a.baseLanes|n:n,n)}else a!==null?(xd(t,a.cachePool),M1(t,a),qr(),t.memoizedState=null):(e!==null&&xd(t,null),Rp(),qr());return Pt(e,t,r,n),t.child}function F1(e,t,n,s){var r=jy();return r=r===null?null:{parent:Ct._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&xd(t,null),Rp(),AM(t),e!==null&&ru(e,t,s,!0),null}function bd(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(Z(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Op(e,t,n,s,r){return so(t),n=Ey(e,t,n,s,void 0,r),s=_y(),e!==null&&!Tt?(Ay(e,t,r),Nr(e,t,r)):(De&&s&&by(t),t.flags|=1,Pt(e,t,n,r),t.child)}function V1(e,t,n,s,r,a){return so(t),t.updateQueue=null,n=WA(t,s,n,r),XA(e),s=_y(),e!==null&&!Tt?(Ay(e,t,a),Nr(e,t,a)):(De&&s&&by(t),t.flags|=1,Pt(e,t,n,a),t.child)}function q1(e,t,n,s,r){if(so(t),t.stateNode===null){var a=Wo,i=n.contextType;typeof i=="object"&&i!==null&&(a=Vt(i)),a=new n(s,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=$p,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=s,a.state=t.memoizedState,a.refs={},Sy(t),i=n.contextType,a.context=typeof i=="object"&&i!==null?Vt(i):Wo,a.state=t.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(qh(t,n,i,s),a.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(i=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),i!==a.state&&$p.enqueueReplaceState(a,a.state,null),Gl(t,s,a,r),Zl(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){a=t.stateNode;var l=t.memoizedProps,c=ao(n,l);a.props=c;var u=a.context,d=n.contextType;i=Wo,typeof d=="object"&&d!==null&&(i=Vt(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l||u!==i)&&B1(t,a,s,i),Ir=!1;var m=t.memoizedState;a.state=m,Gl(t,s,a,r),Zl(),u=t.memoizedState,l||m!==u||Ir?(typeof f=="function"&&(qh(t,n,f,s),u=t.memoizedState),(c=Ir||O1(t,n,c,s,m,u,i))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=u),a.props=s,a.state=u,a.context=i,s=c):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,Mp(e,t),i=t.memoizedProps,d=ao(n,i),a.props=d,f=t.pendingProps,m=a.context,u=n.contextType,c=Wo,typeof u=="object"&&u!==null&&(c=Vt(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||m!==c)&&B1(t,a,s,c),Ir=!1,m=t.memoizedState,a.state=m,Gl(t,s,a,r),Zl();var h=t.memoizedState;i!==f||m!==h||Ir||e!==null&&e.dependencies!==null&&df(e.dependencies)?(typeof l=="function"&&(qh(t,n,l,s),h=t.memoizedState),(d=Ir||O1(t,n,d,s,m,h,c)||e!==null&&e.dependencies!==null&&df(e.dependencies))?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,h,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,h,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=h),a.props=s,a.state=h,a.context=c,s=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return a=s,bd(e,t),s=(t.flags&128)!==0,a||s?(a=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,e!==null&&s?(t.child=Pi(t,e.child,null,r),t.child=Pi(t,null,n,r)):Pt(e,t,n,r),t.memoizedState=a.state,e=t.child):e=Nr(e,t,r),e}function Z1(e,t,n,s){return su(),t.flags|=256,Pt(e,t,n,s),t.child}var Zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gh(e){return{baseLanes:e,cachePool:VA()}}function Yh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Hn),e}function OM(e,t,n){var s=t.pendingProps,r=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(kt.current&2)!==0),i&&(r=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(De){if(r?Vr(t):qr(),De){var l=it,c;if(c=l){e:{for(c=l,l=ws;c.nodeType!==8;){if(!l){l=null;break e}if(c=rs(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:Ua!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},c=bn(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,Gt=t,it=null,c=!0):c=!1}c||no(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Qp(l)?t.lanes=32:t.lanes=536870912,null;lr(t)}return l=s.children,s=s.fallback,r?(qr(),r=t.mode,l=vf({mode:"hidden",children:l},r),s=Ha(s,r,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,r=t.child,r.memoizedState=Gh(n),r.childLanes=Yh(e,i,n),t.memoizedState=Zh,s):(Vr(t),Bp(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(a)t.flags&256?(Vr(t),t.flags&=-257,t=Xh(e,t,n)):t.memoizedState!==null?(qr(),t.child=e.child,t.flags|=128,t=null):(qr(),r=s.fallback,l=t.mode,s=vf({mode:"visible",children:s.children},l),r=Ha(r,l,n,null),r.flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,Pi(t,e.child,null,n),s=t.child,s.memoizedState=Gh(n),s.childLanes=Yh(e,i,n),t.memoizedState=Zh,t=r);else if(Vr(t),Qp(l)){if(i=l.nextSibling&&l.nextSibling.dataset,i)var u=i.dgst;i=u,s=Error(Z(419)),s.stack="",s.digest=i,jc({value:s,source:null,stack:null}),t=Xh(e,t,n)}else if(Tt||ru(e,t,n,!1),i=(n&e.childLanes)!==0,Tt||i){if(i=Ge,i!==null&&(s=n&-n,s=s&42?1:ly(s),s=s&(i.suspendedLanes|n)?0:s,s!==0&&s!==c.retryLane))throw c.retryLane=s,ol(e,s),kn(i,e,s),LM;l.data==="$?"||qp(),t=Xh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,it=rs(l.nextSibling),Gt=t,De=!0,Fa=null,ws=!1,e!==null&&(zn[Ln++]=ar,zn[Ln++]=or,zn[Ln++]=Ua,ar=e.id,or=e.overflow,Ua=t),t=Bp(t,s.children),t.flags|=4096);return t}return r?(qr(),r=s.fallback,l=t.mode,c=e.child,u=c.sibling,s=fr(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,u!==null?r=fr(u,r):(r=Ha(r,l,n,null),r.flags|=2),r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,l=e.child.memoizedState,l===null?l=Gh(n):(c=l.cachePool,c!==null?(u=Ct._currentValue,c=c.parent!==u?{parent:u,pool:u}:c):c=VA(),l={baseLanes:l.baseLanes|n,cachePool:c}),r.memoizedState=l,r.childLanes=Yh(e,i,n),t.memoizedState=Zh,s):(Vr(t),n=e.child,e=n.sibling,n=fr(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Bp(e,t){return t=vf({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function vf(e,t){return e=bn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Xh(e,t,n){return Pi(t,e.child,null,n),e=Bp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function G1(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),kp(e.return,t,n)}function Wh(e,t,n,s,r){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=r)}function BM(e,t,n){var s=t.pendingProps,r=s.revealOrder,a=s.tail;if(Pt(e,t,s.children,n),s=kt.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&G1(e,n,t);else if(e.tag===19)G1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(et(kt,s),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&pf(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Wh(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&pf(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Wh(t,!0,n,null,a);break;case"together":Wh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ga|=t.lanes,!(n&t.childLanes))if(e!==null){if(ru(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,n=fr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Oy(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&df(e)))}function vJ(e,t,n){switch(t.tag){case 3:nf(t,t.stateNode.containerInfo),Fr(t,Ct,e.memoizedState.cache),su();break;case 27:case 5:hp(t);break;case 4:nf(t,t.stateNode.containerInfo);break;case 10:Fr(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Vr(t),t.flags|=128,null):n&t.child.childLanes?OM(e,t,n):(Vr(t),e=Nr(e,t,n),e!==null?e.sibling:null);Vr(t);break;case 19:var r=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(ru(e,t,n,!1),s=(n&t.childLanes)!==0),r){if(s)return BM(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),et(kt,kt.current),s)break;return null;case 22:case 23:return t.lanes=0,PM(e,t,n);case 24:Fr(t,Ct,e.memoizedState.cache)}return Nr(e,t,n)}function IM(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Tt=!0;else{if(!Oy(e,n)&&!(t.flags&128))return Tt=!1,vJ(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,De&&t.flags&1048576&&UA(t,uf,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,r=s._init;if(s=r(s._payload),t.type=s,typeof s=="function")vy(s)?(e=ao(s,e),t.tag=1,t=q1(null,t,s,e,n)):(t.tag=0,t=Op(null,t,s,e,n));else{if(s!=null){if(r=s.$$typeof,r===ay){t.tag=11,t=H1(null,t,s,e,n);break e}else if(r===oy){t.tag=14,t=U1(null,t,s,e,n);break e}}throw t=fp(s)||s,Error(Z(306,t,""))}}return t;case 0:return Op(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,r=ao(s,t.pendingProps),q1(e,t,s,r,n);case 3:e:{if(nf(t,t.stateNode.containerInfo),e===null)throw Error(Z(387));s=t.pendingProps;var a=t.memoizedState;r=a.element,Mp(e,t),Gl(t,s,null,n);var i=t.memoizedState;if(s=i.cache,Fr(t,Ct,s),s!==a.cache&&Ep(t,[Ct],n,!0),Zl(),s=i.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=Z1(e,t,s,n);break e}else if(s!==r){r=On(Error(Z(424)),t),jc(r),t=Z1(e,t,s,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(it=rs(e.firstChild),Gt=t,De=!0,Fa=null,ws=!0,n=_M(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(su(),s===r){t=Nr(e,t,n);break e}Pt(e,t,s,n)}t=t.child}return t;case 26:return bd(e,t),e===null?(n=uN(t.type,null,t.pendingProps,null))?t.memoizedState=n:De||(n=t.type,e=t.pendingProps,s=kf(ta.current).createElement(n),s[Ft]=t,s[cn]=e,Bt(s,n,e),Mt(s),t.stateNode=s):t.memoizedState=uN(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return hp(t),e===null&&De&&(s=t.stateNode=kT(t.type,t.pendingProps,ta.current),Gt=t,ws=!0,r=it,wa(t.type)?(Jp=r,it=rs(s.firstChild)):it=r),Pt(e,t,t.pendingProps.children,n),bd(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&De&&((r=s=it)&&(s=GJ(s,t.type,t.pendingProps,ws),s!==null?(t.stateNode=s,Gt=t,it=rs(s.firstChild),ws=!1,r=!0):r=!1),r||no(t)),hp(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,Wp(r,a)?s=null:i!==null&&Wp(r,i)&&(t.flags|=32),t.memoizedState!==null&&(r=Ey(e,t,dJ,null,null,n),Ac._currentValue=r),bd(e,t),Pt(e,t,s,n),t.child;case 6:return e===null&&De&&((e=n=it)&&(n=YJ(n,t.pendingProps,ws),n!==null?(t.stateNode=n,Gt=t,it=null,e=!0):e=!1),e||no(t)),null;case 13:return OM(e,t,n);case 4:return nf(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Pi(t,null,s,n):Pt(e,t,s,n),t.child;case 11:return H1(e,t,t.type,t.pendingProps,n);case 7:return Pt(e,t,t.pendingProps,n),t.child;case 8:return Pt(e,t,t.pendingProps.children,n),t.child;case 12:return Pt(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,Fr(t,t.type,s.value),Pt(e,t,s.children,n),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,so(t),r=Vt(r),s=s(r),t.flags|=1,Pt(e,t,s,n),t.child;case 14:return U1(e,t,t.type,t.pendingProps,n);case 15:return $M(e,t,t.type,t.pendingProps,n);case 19:return BM(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},e===null?(n=vf(s,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=fr(e.child,s),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return PM(e,t,n);case 24:return so(t),s=Vt(Ct),e===null?(r=jy(),r===null&&(r=Ge,a=Ny(),r.pooledCache=a,a.refCount++,a!==null&&(r.pooledCacheLanes|=n),r=a),t.memoizedState={parent:s,cache:r},Sy(t),Fr(t,Ct,r)):(e.lanes&n&&(Mp(e,t),Gl(t,null,null,n),Zl()),r=e.memoizedState,a=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Fr(t,Ct,s)):(s=a.cache,Fr(t,Ct,s),s!==r.cache&&Ep(t,[Ct],n,!0))),Pt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(Z(156,t.tag))}function Ks(e){e.flags|=4}function Y1(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!AT(t)){if(t=Zn.current,t!==null&&((Me&4194048)===Me?Ms!==null:(Me&62914560)!==Me&&!(Me&536870912)||t!==Ms))throw Vl=Ap,qA;e.flags|=8192}}function Ku(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?fA():536870912,e.lanes|=t,Oi|=t)}function Cl(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function bJ(e,t,n){var s=t.pendingProps;switch(wy(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return nt(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),mr(Ct),Ti(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(jl(t)?Ks(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,S1())),nt(t),null;case 26:return n=t.memoizedState,e===null?(Ks(t),n!==null?(nt(t),Y1(t,n)):(nt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ks(t),nt(t),Y1(t,n)):(nt(t),t.flags&=-16777217):(e.memoizedProps!==s&&Ks(t),nt(t),t.flags&=-16777217),null;case 27:sf(t),n=ta.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ks(t);else{if(!s){if(t.stateNode===null)throw Error(Z(166));return nt(t),null}e=_s.current,jl(t)?N1(t):(e=kT(r,s,n),t.stateNode=e,Ks(t))}return nt(t),null;case 5:if(sf(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ks(t);else{if(!s){if(t.stateNode===null)throw Error(Z(166));return nt(t),null}if(e=_s.current,jl(t))N1(t);else{switch(r=kf(ta.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?r.createElement(n,{is:s.is}):r.createElement(n)}}e[Ft]=t,e[cn]=s;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(Bt(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ks(t)}}return nt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Ks(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Z(166));if(e=ta.current,jl(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,r=Gt,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}e[Ft]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||jT(e.nodeValue,n)),e||no(t)}else e=kf(e).createTextNode(s),e[Ft]=t,t.stateNode=e}return nt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=jl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!r)throw Error(Z(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Z(317));r[Ft]=t}else su(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nt(t),r=!1}else r=S1(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(lr(t),t):(lr(t),null)}if(lr(t),t.flags&128)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool);var a=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==r&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ku(t,t.updateQueue),nt(t),null;case 4:return Ti(),e===null&&Zy(t.stateNode.containerInfo),nt(t),null;case 10:return mr(t.type),nt(t),null;case 19:if(Rt(kt),r=t.memoizedState,r===null)return nt(t),null;if(s=(t.flags&128)!==0,a=r.rendering,a===null)if(s)Cl(r,!1);else{if(lt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=pf(e),a!==null){for(t.flags|=128,Cl(r,!1),e=a.updateQueue,t.updateQueue=e,Ku(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)HA(n,e),n=n.sibling;return et(kt,kt.current&1|2),t.child}e=e.sibling}r.tail!==null&&As()>wf&&(t.flags|=128,s=!0,Cl(r,!1),t.lanes=4194304)}else{if(!s)if(e=pf(a),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Ku(t,e),Cl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!De)return nt(t),null}else 2*As()-r.renderingStartTime>wf&&n!==536870912&&(t.flags|=128,s=!0,Cl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e!==null?e.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=As(),t.sibling=null,e=kt.current,et(kt,s?e&1|2:e&1),t):(nt(t),null);case 22:case 23:return lr(t),Cy(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?n&536870912&&!(t.flags&128)&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),n=t.updateQueue,n!==null&&Ku(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&Rt(Va),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),mr(Ct),nt(t),null;case 25:return null;case 30:return null}throw Error(Z(156,t.tag))}function wJ(e,t){switch(wy(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mr(Ct),Ti(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return sf(t),null;case 13:if(lr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));su()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(kt),null;case 4:return Ti(),null;case 10:return mr(t.type),null;case 22:case 23:return lr(t),Cy(),e!==null&&Rt(Va),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return mr(Ct),null;case 25:return null;default:return null}}function HM(e,t){switch(wy(t),t.tag){case 3:mr(Ct),Ti();break;case 26:case 27:case 5:sf(t);break;case 4:Ti();break;case 13:lr(t);break;case 19:Rt(kt);break;case 10:mr(t.type);break;case 22:case 23:lr(t),Cy(),e!==null&&Rt(Va);break;case 24:mr(Ct)}}function cu(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&e)===e){s=void 0;var a=n.create,i=n.inst;s=a(),i.destroy=s}n=n.next}while(n!==r)}}catch(l){qe(t,t.return,l)}}function ha(e,t,n){try{var s=t.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var a=r.next;s=a;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(l!==void 0){i.destroy=void 0,r=t;var c=n,u=l;try{u()}catch(d){qe(r,c,d)}}}s=s.next}while(s!==a)}}catch(d){qe(t,t.return,d)}}function UM(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{YA(t,n)}catch(s){qe(e,e.return,s)}}}function FM(e,t,n){n.props=ao(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){qe(e,t,s)}}function Xl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof n=="function"?e.refCleanup=n(s):n.current=s}}catch(r){qe(e,t,r)}}function Ss(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){qe(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){qe(e,t,r)}else n.current=null}function VM(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){qe(e,e.return,r)}}function Kh(e,t,n){try{var s=e.stateNode;UJ(s,e.type,n,t),s[cn]=t}catch(r){qe(e,e.return,r)}}function qM(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&wa(e.type)||e.tag===4}function Qh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&wa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ip(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Pm));else if(s!==4&&(s===27&&wa(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Ip(e,t,n),e=e.sibling;e!==null;)Ip(e,t,n),e=e.sibling}function bf(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(s===27&&wa(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(bf(e,t,n),e=e.sibling;e!==null;)bf(e,t,n),e=e.sibling}function ZM(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Bt(t,s,n),t[Ft]=e,t[cn]=n}catch(a){qe(e,e.return,a)}}var tr=!1,ht=!1,Jh=!1,X1=typeof WeakSet=="function"?WeakSet:Set,At=null;function NJ(e,t){if(e=e.containerInfo,Yp=Mf,e=DA(e),py(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var h;f!==n||r!==0&&f.nodeType!==3||(l=i+r),f!==a||s!==0&&f.nodeType!==3||(c=i+s),f.nodeType===3&&(i+=f.nodeValue.length),(h=f.firstChild)!==null;)m=f,f=h;for(;;){if(f===e)break t;if(m===n&&++u===r&&(l=i),m===a&&++d===s&&(c=i),(h=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xp={focusedElem:e,selectionRange:n},Mf=!1,At=t;At!==null;)if(t=At,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,At=e;else for(;At!==null;){switch(t=At,a=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,r=a.memoizedProps,a=a.memoizedState,s=n.stateNode;try{var p=ao(n.type,r,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(p,a),s.__reactInternalSnapshotBeforeUpdate=e}catch(y){qe(n,n.return,y)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Kp(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Kp(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(Z(163))}if(e=t.sibling,e!==null){e.return=t.return,At=e;break}At=t.return}}function GM(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:zr(e,n),s&4&&cu(5,n);break;case 1:if(zr(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(i){qe(n,n.return,i)}else{var r=ao(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){qe(n,n.return,i)}}s&64&&UM(n),s&512&&Xl(n,n.return);break;case 3:if(zr(e,n),s&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{YA(e,t)}catch(i){qe(n,n.return,i)}}break;case 27:t===null&&s&4&&ZM(n);case 26:case 5:zr(e,n),t===null&&s&4&&VM(n),s&512&&Xl(n,n.return);break;case 12:zr(e,n);break;case 13:zr(e,n),s&4&&WM(e,n),s&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=TJ.bind(null,n),XJ(e,n))));break;case 22:if(s=n.memoizedState!==null||tr,!s){t=t!==null&&t.memoizedState!==null||ht,r=tr;var a=ht;tr=s,(ht=t)&&!a?$r(e,n,(n.subtreeFlags&8772)!==0):zr(e,n),tr=r,ht=a}break;case 30:break;default:zr(e,n)}}function YM(e){var t=e.alternate;t!==null&&(e.alternate=null,YM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&uy(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qe=null,sn=!1;function Qs(e,t,n){for(n=n.child;n!==null;)XM(e,t,n),n=n.sibling}function XM(e,t,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Qc,n)}catch{}switch(n.tag){case 26:ht||Ss(n,t),Qs(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ht||Ss(n,t);var s=Qe,r=sn;wa(n.type)&&(Qe=n.stateNode,sn=!1),Qs(e,t,n),Jl(n.stateNode),Qe=s,sn=r;break;case 5:ht||Ss(n,t);case 6:if(s=Qe,r=sn,Qe=null,Qs(e,t,n),Qe=s,sn=r,Qe!==null)if(sn)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(n.stateNode)}catch(a){qe(n,t,a)}else try{Qe.removeChild(n.stateNode)}catch(a){qe(n,t,a)}break;case 18:Qe!==null&&(sn?(e=Qe,iN(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Rc(e)):iN(Qe,n.stateNode));break;case 4:s=Qe,r=sn,Qe=n.stateNode.containerInfo,sn=!0,Qs(e,t,n),Qe=s,sn=r;break;case 0:case 11:case 14:case 15:ht||ha(2,n,t),ht||ha(4,n,t),Qs(e,t,n);break;case 1:ht||(Ss(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&FM(n,t,s)),Qs(e,t,n);break;case 21:Qs(e,t,n);break;case 22:ht=(s=ht)||n.memoizedState!==null,Qs(e,t,n),ht=s;break;default:Qs(e,t,n)}}function WM(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Rc(e)}catch(n){qe(t,t.return,n)}}function jJ(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new X1),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new X1),t;default:throw Error(Z(435,e.tag))}}function eg(e,t){var n=jJ(e);t.forEach(function(s){var r=RJ.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}function gn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 27:if(wa(l.type)){Qe=l.stateNode,sn=!1;break e}break;case 5:Qe=l.stateNode,sn=!1;break e;case 3:case 4:Qe=l.stateNode.containerInfo,sn=!0;break e}l=l.return}if(Qe===null)throw Error(Z(160));XM(a,i,r),Qe=null,sn=!1,a=r.alternate,a!==null&&(a.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)KM(t,e),t=t.sibling}var Jn=null;function KM(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gn(t,e),pn(e),s&4&&(ha(3,e,e.return),cu(3,e),ha(5,e,e.return));break;case 1:gn(t,e),pn(e),s&512&&(ht||n===null||Ss(n,n.return)),s&64&&tr&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=Jn;if(gn(t,e),pn(e),s&512&&(ht||n===null||Ss(n,n.return)),s&4){var a=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":a=r.getElementsByTagName("title")[0],(!a||a[tu]||a[Ft]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=r.createElement(s),r.head.insertBefore(a,r.querySelector("head > title"))),Bt(a,s,n),a[Ft]=e,Mt(a),s=a;break e;case"link":var i=fN("link","href",r).get(s+(n.href||""));if(i){for(var l=0;l<i.length;l++)if(a=i[l],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){i.splice(l,1);break t}}a=r.createElement(s),Bt(a,s,n),r.head.appendChild(a);break;case"meta":if(i=fN("meta","content",r).get(s+(n.content||""))){for(l=0;l<i.length;l++)if(a=i[l],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){i.splice(l,1);break t}}a=r.createElement(s),Bt(a,s,n),r.head.appendChild(a);break;default:throw Error(Z(468,s))}a[Ft]=e,Mt(a),s=a}e.stateNode=s}else mN(r,e.type,e.stateNode);else e.stateNode=dN(r,s,e.memoizedProps);else a!==s?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,s===null?mN(r,e.type,e.stateNode):dN(r,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Kh(e,e.memoizedProps,n.memoizedProps)}break;case 27:gn(t,e),pn(e),s&512&&(ht||n===null||Ss(n,n.return)),n!==null&&s&4&&Kh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(gn(t,e),pn(e),s&512&&(ht||n===null||Ss(n,n.return)),e.flags&32){r=e.stateNode;try{Di(r,"")}catch(h){qe(e,e.return,h)}}s&4&&e.stateNode!=null&&(r=e.memoizedProps,Kh(e,r,n!==null?n.memoizedProps:r)),s&1024&&(Jh=!0);break;case 6:if(gn(t,e),pn(e),s&4){if(e.stateNode===null)throw Error(Z(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(h){qe(e,e.return,h)}}break;case 3:if(jd=null,r=Jn,Jn=Ef(t.containerInfo),gn(t,e),Jn=r,pn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Rc(t.containerInfo)}catch(h){qe(e,e.return,h)}Jh&&(Jh=!1,QM(e));break;case 4:s=Jn,Jn=Ef(e.stateNode.containerInfo),gn(t,e),pn(e),Jn=s;break;case 12:gn(t,e),pn(e);break;case 13:gn(t,e),pn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Fy=As()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,eg(e,s)));break;case 22:r=e.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=tr,d=ht;if(tr=u||r,ht=d||c,gn(t,e),ht=d,tr=u,pn(e),s&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||c||tr||ht||Ma(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){c=n=t;try{if(a=c.stateNode,r)i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var f=c.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(h){qe(c,c.return,h)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(h){qe(c,c.return,h)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,eg(e,n))));break;case 19:gn(t,e),pn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,eg(e,s)));break;case 30:break;case 21:break;default:gn(t,e),pn(e)}}function pn(e){var t=e.flags;if(t&2){try{for(var n,s=e.return;s!==null;){if(qM(s)){n=s;break}s=s.return}if(n==null)throw Error(Z(160));switch(n.tag){case 27:var r=n.stateNode,a=Qh(e);bf(e,a,r);break;case 5:var i=n.stateNode;n.flags&32&&(Di(i,""),n.flags&=-33);var l=Qh(e);bf(e,l,i);break;case 3:case 4:var c=n.stateNode.containerInfo,u=Qh(e);Ip(e,u,c);break;default:throw Error(Z(161))}}catch(d){qe(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function QM(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;QM(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function zr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)GM(e,t.alternate,t),t=t.sibling}function Ma(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ha(4,t,t.return),Ma(t);break;case 1:Ss(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&FM(t,t.return,n),Ma(t);break;case 27:Jl(t.stateNode);case 26:case 5:Ss(t,t.return),Ma(t);break;case 22:t.memoizedState===null&&Ma(t);break;case 30:Ma(t);break;default:Ma(t)}e=e.sibling}}function $r(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,r=e,a=t,i=a.flags;switch(a.tag){case 0:case 11:case 15:$r(r,a,n),cu(4,a);break;case 1:if($r(r,a,n),s=a,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){qe(s,s.return,u)}if(s=a,r=s.updateQueue,r!==null){var l=s.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)GA(c[r],l)}catch(u){qe(s,s.return,u)}}n&&i&64&&UM(a),Xl(a,a.return);break;case 27:ZM(a);case 26:case 5:$r(r,a,n),n&&s===null&&i&4&&VM(a),Xl(a,a.return);break;case 12:$r(r,a,n);break;case 13:$r(r,a,n),n&&i&4&&WM(r,a);break;case 22:a.memoizedState===null&&$r(r,a,n),Xl(a,a.return);break;case 30:break;default:$r(r,a,n)}t=t.sibling}}function By(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&au(n))}function Iy(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&au(e))}function xs(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)JM(e,t,n,s),t=t.sibling}function JM(e,t,n,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:xs(e,t,n,s),r&2048&&cu(9,t);break;case 1:xs(e,t,n,s);break;case 3:xs(e,t,n,s),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&au(e)));break;case 12:if(r&2048){xs(e,t,n,s),e=t.stateNode;try{var a=t.memoizedProps,i=a.id,l=a.onPostCommit;typeof l=="function"&&l(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){qe(t,t.return,c)}}else xs(e,t,n,s);break;case 13:xs(e,t,n,s);break;case 23:break;case 22:a=t.stateNode,i=t.alternate,t.memoizedState!==null?a._visibility&2?xs(e,t,n,s):Wl(e,t):a._visibility&2?xs(e,t,n,s):(a._visibility|=2,Oo(e,t,n,s,(t.subtreeFlags&10256)!==0)),r&2048&&By(i,t);break;case 24:xs(e,t,n,s),r&2048&&Iy(t.alternate,t);break;default:xs(e,t,n,s)}}function Oo(e,t,n,s,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var a=e,i=t,l=n,c=s,u=i.flags;switch(i.tag){case 0:case 11:case 15:Oo(a,i,l,c,r),cu(8,i);break;case 23:break;case 22:var d=i.stateNode;i.memoizedState!==null?d._visibility&2?Oo(a,i,l,c,r):Wl(a,i):(d._visibility|=2,Oo(a,i,l,c,r)),r&&u&2048&&By(i.alternate,i);break;case 24:Oo(a,i,l,c,r),r&&u&2048&&Iy(i.alternate,i);break;default:Oo(a,i,l,c,r)}t=t.sibling}}function Wl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,r=s.flags;switch(s.tag){case 22:Wl(n,s),r&2048&&By(s.alternate,s);break;case 24:Wl(n,s),r&2048&&Iy(s.alternate,s);break;default:Wl(n,s)}t=t.sibling}}var Ll=8192;function zo(e){if(e.subtreeFlags&Ll)for(e=e.child;e!==null;)eT(e),e=e.sibling}function eT(e){switch(e.tag){case 26:zo(e),e.flags&Ll&&e.memoizedState!==null&&lee(Jn,e.memoizedState,e.memoizedProps);break;case 5:zo(e);break;case 3:case 4:var t=Jn;Jn=Ef(e.stateNode.containerInfo),zo(e),Jn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Ll,Ll=16777216,zo(e),Ll=t):zo(e));break;default:zo(e)}}function tT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function kl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];At=s,sT(s,e)}tT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)nT(e),e=e.sibling}function nT(e){switch(e.tag){case 0:case 11:case 15:kl(e),e.flags&2048&&ha(9,e,e.return);break;case 3:kl(e);break;case 12:kl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,wd(e)):kl(e);break;default:kl(e)}}function wd(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];At=s,sT(s,e)}tT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ha(8,t,t.return),wd(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,wd(t));break;default:wd(t)}e=e.sibling}}function sT(e,t){for(;At!==null;){var n=At;switch(n.tag){case 0:case 11:case 15:ha(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:au(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,At=s;else e:for(n=e;At!==null;){s=At;var r=s.sibling,a=s.return;if(YM(s),s===n){At=null;break e}if(r!==null){r.return=a,At=r;break e}At=a}}}var SJ={getCacheForType:function(e){var t=Vt(Ct),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},CJ=typeof WeakMap=="function"?WeakMap:Map,Ie=0,Ge=null,Ee=null,Me=0,Oe=0,xn=null,Wr=!1,il=!1,Hy=!1,jr=0,lt=0,ga=0,qa=0,Uy=0,Hn=0,Oi=0,Kl=null,rn=null,Hp=!1,Fy=0,wf=1/0,Nf=null,ra=null,Ot=0,aa=null,Bi=null,gi=0,Up=0,Fp=null,rT=null,Ql=0,Vp=null;function Cn(){if(Ie&2&&Me!==0)return Me&-Me;if(ge.T!==null){var e=zi;return e!==0?e:qy()}return gA()}function aT(){Hn===0&&(Hn=!(Me&536870912)||De?dA():536870912);var e=Zn.current;return e!==null&&(e.flags|=32),Hn}function kn(e,t,n){(e===Ge&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)&&(Ii(e,0),Kr(e,Me,Hn,!1)),eu(e,n),(!(Ie&2)||e!==Ge)&&(e===Ge&&(!(Ie&2)&&(qa|=n),lt===4&&Kr(e,Me,Hn,!1)),Is(e))}function oT(e,t,n){if(Ie&6)throw Error(Z(327));var s=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Jc(e,t),r=s?_J(e,t):tg(e,t,!0),a=s;do{if(r===0){il&&!s&&Kr(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!kJ(n)){r=tg(e,t,!1),a=!1;continue}if(r===2){if(a=t,e.errorRecoveryDisabledLanes&a)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var l=e;r=Kl;var c=l.current.memoizedState.isDehydrated;if(c&&(Ii(l,i).flags|=256),i=tg(l,i,!1),i!==2){if(Hy&&!c){l.errorRecoveryDisabledLanes|=a,qa|=a,r=4;break e}a=rn,rn=r,a!==null&&(rn===null?rn=a:rn.push.apply(rn,a))}r=i}if(a=!1,r!==2)continue}}if(r===1){Ii(e,0),Kr(e,t,0,!0);break}e:{switch(s=e,a=r,a){case 0:case 1:throw Error(Z(345));case 4:if((t&4194048)!==t)break;case 6:Kr(s,t,Hn,!Wr);break e;case 2:rn=null;break;case 3:case 5:break;default:throw Error(Z(329))}if((t&62914560)===t&&(r=Fy+300-As(),10<r)){if(Kr(s,t,Hn,!Wr),Sm(s,0,!0)!==0)break e;s.timeoutHandle=CT(W1.bind(null,s,n,rn,Nf,Hp,t,Hn,qa,Oi,Wr,a,2,-0,0),r);break e}W1(s,n,rn,Nf,Hp,t,Hn,qa,Oi,Wr,a,0,-0,0)}}break}while(!0);Is(e)}function W1(e,t,n,s,r,a,i,l,c,u,d,f,m,h){if(e.timeoutHandle=-1,f=t.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(_c={stylesheets:null,count:0,unsuspend:iee},eT(t),f=cee(),f!==null)){e.cancelPendingCommit=f(Q1.bind(null,e,t,a,n,s,r,i,l,c,d,1,m,h)),Kr(e,a,i,!u);return}Q1(e,t,a,n,s,r,i,l,c)}function kJ(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],a=r.getSnapshot;r=r.value;try{if(!_n(a(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kr(e,t,n,s){t&=~Uy,t&=~qa,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var a=31-Sn(r),i=1<<a;s[a]=-1,r&=~i}n!==0&&mA(e,n,t)}function zm(){return Ie&6?!0:(uu(0),!1)}function Vy(){if(Ee!==null){if(Oe===0)var e=Ee.return;else e=Ee,ir=jo=null,My(e),hi=null,Cc=0,e=Ee;for(;e!==null;)HM(e.alternate,e),e=e.return;Ee=null}}function Ii(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,VJ(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Vy(),Ge=e,Ee=n=fr(e.current,null),Me=t,Oe=0,xn=null,Wr=!1,il=Jc(e,t),Hy=!1,Oi=Hn=Uy=qa=ga=lt=0,rn=Kl=null,Hp=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var r=31-Sn(s),a=1<<r;t|=e[r],s&=~a}return jr=t,_m(),n}function iT(e,t){Se=null,ge.H=gf,t===ou||t===Mm?(t=_1(),Oe=3):t===qA?(t=_1(),Oe=4):Oe=t===LM?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,xn=t,Ee===null&&(lt=1,yf(e,On(t,e.current)))}function lT(){var e=ge.H;return ge.H=gf,e===null?gf:e}function cT(){var e=ge.A;return ge.A=SJ,e}function qp(){lt=4,Wr||(Me&4194048)!==Me&&Zn.current!==null||(il=!0),!(ga&134217727)&&!(qa&134217727)||Ge===null||Kr(Ge,Me,Hn,!1)}function tg(e,t,n){var s=Ie;Ie|=2;var r=lT(),a=cT();(Ge!==e||Me!==t)&&(Nf=null,Ii(e,t)),t=!1;var i=lt;e:do try{if(Oe!==0&&Ee!==null){var l=Ee,c=xn;switch(Oe){case 8:Vy(),i=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(t=!0);var u=Oe;if(Oe=0,xn=null,Jo(e,l,c,u),n&&il){i=0;break e}break;default:u=Oe,Oe=0,xn=null,Jo(e,l,c,u)}}EJ(),i=lt;break}catch(d){iT(e,d)}while(!0);return t&&e.shellSuspendCounter++,ir=jo=null,Ie=s,ge.H=r,ge.A=a,Ee===null&&(Ge=null,Me=0,_m()),i}function EJ(){for(;Ee!==null;)uT(Ee)}function _J(e,t){var n=Ie;Ie|=2;var s=lT(),r=cT();Ge!==e||Me!==t?(Nf=null,wf=As()+500,Ii(e,t)):il=Jc(e,t);e:do try{if(Oe!==0&&Ee!==null){t=Ee;var a=xn;t:switch(Oe){case 1:Oe=0,xn=null,Jo(e,t,a,1);break;case 2:case 9:if(E1(a)){Oe=0,xn=null,K1(t);break}t=function(){Oe!==2&&Oe!==9||Ge!==e||(Oe=7),Is(e)},a.then(t,t);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:E1(a)?(Oe=0,xn=null,K1(t)):(Oe=0,xn=null,Jo(e,t,a,7));break;case 5:var i=null;switch(Ee.tag){case 26:i=Ee.memoizedState;case 5:case 27:var l=Ee;if(!i||AT(i)){Oe=0,xn=null;var c=l.sibling;if(c!==null)Ee=c;else{var u=l.return;u!==null?(Ee=u,Lm(u)):Ee=null}break t}}Oe=0,xn=null,Jo(e,t,a,5);break;case 6:Oe=0,xn=null,Jo(e,t,a,6);break;case 8:Vy(),lt=6;break e;default:throw Error(Z(462))}}AJ();break}catch(d){iT(e,d)}while(!0);return ir=jo=null,ge.H=s,ge.A=r,Ie=n,Ee!==null?0:(Ge=null,Me=0,_m(),lt)}function AJ(){for(;Ee!==null&&!KK();)uT(Ee)}function uT(e){var t=IM(e.alternate,e,jr);e.memoizedProps=e.pendingProps,t===null?Lm(e):Ee=t}function K1(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=V1(n,t,t.pendingProps,t.type,void 0,Me);break;case 11:t=V1(n,t,t.pendingProps,t.type.render,t.ref,Me);break;case 5:My(t);default:HM(n,t),t=Ee=HA(t,jr),t=IM(n,t,jr)}e.memoizedProps=e.pendingProps,t===null?Lm(e):Ee=t}function Jo(e,t,n,s){ir=jo=null,My(t),hi=null,Cc=0;var r=t.return;try{if(yJ(e,r,t,n,Me)){lt=1,yf(e,On(n,e.current)),Ee=null;return}}catch(a){if(r!==null)throw Ee=r,a;lt=1,yf(e,On(n,e.current)),Ee=null;return}t.flags&32768?(De||s===1?e=!0:il||Me&536870912?e=!1:(Wr=e=!0,(s===2||s===9||s===3||s===6)&&(s=Zn.current,s!==null&&s.tag===13&&(s.flags|=16384))),dT(t,e)):Lm(t)}function Lm(e){var t=e;do{if(t.flags&32768){dT(t,Wr);return}e=t.return;var n=bJ(t.alternate,t,jr);if(n!==null){Ee=n;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);lt===0&&(lt=5)}function dT(e,t){do{var n=wJ(e.alternate,e);if(n!==null){n.flags&=32767,Ee=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=n}while(e!==null);lt=6,Ee=null}function Q1(e,t,n,s,r,a,i,l,c){e.cancelPendingCommit=null;do $m();while(Ot!==0);if(Ie&6)throw Error(Z(327));if(t!==null){if(t===e.current)throw Error(Z(177));if(a=t.lanes|t.childLanes,a|=xy,iQ(e,n,a,i,l,c),e===Ge&&(Ee=Ge=null,Me=0),Bi=t,aa=e,gi=n,Up=a,Fp=r,rT=s,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,DJ(rf,function(){return pT(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,t.subtreeFlags&13878||s){s=ge.T,ge.T=null,r=ze.p,ze.p=2,i=Ie,Ie|=4;try{NJ(e,t,n)}finally{Ie=i,ze.p=r,ge.T=s}}Ot=1,fT(),mT(),hT()}}function fT(){if(Ot===1){Ot=0;var e=aa,t=Bi,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=ge.T,ge.T=null;var s=ze.p;ze.p=2;var r=Ie;Ie|=4;try{KM(t,e);var a=Xp,i=DA(e.containerInfo),l=a.focusedElem,c=a.selectionRange;if(i!==l&&l&&l.ownerDocument&&RA(l.ownerDocument.documentElement,l)){if(c!==null&&py(l)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var h=m.getSelection(),p=l.textContent.length,y=Math.min(c.start,p),b=c.end===void 0?y:Math.min(c.end,p);!h.extend&&y>b&&(i=b,b=y,y=i);var x=v1(l,y),w=v1(l,b);if(x&&w&&(h.rangeCount!==1||h.anchorNode!==x.node||h.anchorOffset!==x.offset||h.focusNode!==w.node||h.focusOffset!==w.offset)){var v=f.createRange();v.setStart(x.node,x.offset),h.removeAllRanges(),y>b?(h.addRange(v),h.extend(w.node,w.offset)):(v.setEnd(w.node,w.offset),h.addRange(v))}}}}for(f=[],h=l;h=h.parentNode;)h.nodeType===1&&f.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var N=f[l];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}Mf=!!Yp,Xp=Yp=null}finally{Ie=r,ze.p=s,ge.T=n}}e.current=t,Ot=2}}function mT(){if(Ot===2){Ot=0;var e=aa,t=Bi,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=ge.T,ge.T=null;var s=ze.p;ze.p=2;var r=Ie;Ie|=4;try{GM(e,t.alternate,t)}finally{Ie=r,ze.p=s,ge.T=n}}Ot=3}}function hT(){if(Ot===4||Ot===3){Ot=0,QK();var e=aa,t=Bi,n=gi,s=rT;t.subtreeFlags&10256||t.flags&10256?Ot=5:(Ot=0,Bi=aa=null,gT(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(ra=null),cy(n),t=t.stateNode,jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Qc,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=ge.T,r=ze.p,ze.p=2,ge.T=null;try{for(var a=e.onRecoverableError,i=0;i<s.length;i++){var l=s[i];a(l.value,{componentStack:l.stack})}}finally{ge.T=t,ze.p=r}}gi&3&&$m(),Is(e),r=e.pendingLanes,n&4194090&&r&42?e===Vp?Ql++:(Ql=0,Vp=e):Ql=0,uu(0)}}function gT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,au(t)))}function $m(e){return fT(),mT(),hT(),pT()}function pT(){if(Ot!==5)return!1;var e=aa,t=Up;Up=0;var n=cy(gi),s=ge.T,r=ze.p;try{ze.p=32>n?32:n,ge.T=null,n=Fp,Fp=null;var a=aa,i=gi;if(Ot=0,Bi=aa=null,gi=0,Ie&6)throw Error(Z(331));var l=Ie;if(Ie|=4,nT(a.current),JM(a,a.current,i,n),Ie=l,uu(0,!1),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Qc,a)}catch{}return!0}finally{ze.p=r,ge.T=s,gT(e,t)}}function J1(e,t,n){t=On(n,t),t=Pp(e.stateNode,t,2),e=sa(e,t,2),e!==null&&(eu(e,2),Is(e))}function qe(e,t,n){if(e.tag===3)J1(e,e,n);else for(;t!==null;){if(t.tag===3){J1(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ra===null||!ra.has(s))){e=On(n,e),n=DM(2),s=sa(t,n,2),s!==null&&(zM(n,s,t,e),eu(s,2),Is(s));break}}t=t.return}}function ng(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new CJ;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(Hy=!0,r.add(n),e=MJ.bind(null,e,t,n),t.then(e,e))}function MJ(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ge===e&&(Me&n)===n&&(lt===4||lt===3&&(Me&62914560)===Me&&300>As()-Fy?!(Ie&2)&&Ii(e,0):Uy|=n,Oi===Me&&(Oi=0)),Is(e)}function xT(e,t){t===0&&(t=fA()),e=ol(e,t),e!==null&&(eu(e,t),Is(e))}function TJ(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xT(e,n)}function RJ(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(Z(314))}s!==null&&s.delete(t),xT(e,n)}function DJ(e,t){return iy(e,t)}var jf=null,Bo=null,Zp=!1,Sf=!1,sg=!1,Za=0;function Is(e){e!==Bo&&e.next===null&&(Bo===null?jf=Bo=e:Bo=Bo.next=e),Sf=!0,Zp||(Zp=!0,LJ())}function uu(e,t){if(!sg&&Sf){sg=!0;do for(var n=!1,s=jf;s!==null;){if(e!==0){var r=s.pendingLanes;if(r===0)var a=0;else{var i=s.suspendedLanes,l=s.pingedLanes;a=(1<<31-Sn(42|e)+1)-1,a&=r&~(i&~l),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,eN(s,a))}else a=Me,a=Sm(s,s===Ge?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(a&3)||Jc(s,a)||(n=!0,eN(s,a));s=s.next}while(n);sg=!1}}function zJ(){yT()}function yT(){Sf=Zp=!1;var e=0;Za!==0&&(FJ()&&(e=Za),Za=0);for(var t=As(),n=null,s=jf;s!==null;){var r=s.next,a=vT(s,t);a===0?(s.next=null,n===null?jf=r:n.next=r,r===null&&(Bo=n)):(n=s,(e!==0||a&3)&&(Sf=!0)),s=r}uu(e)}function vT(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var i=31-Sn(a),l=1<<i,c=r[i];c===-1?(!(l&n)||l&s)&&(r[i]=oQ(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}if(t=Ge,n=Me,n=Sm(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,n===0||e===t&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Ah(s),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Jc(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&Ah(s),cy(n)){case 2:case 8:n=cA;break;case 32:n=rf;break;case 268435456:n=uA;break;default:n=rf}return s=bT.bind(null,e),n=iy(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&Ah(s),e.callbackPriority=2,e.callbackNode=null,2}function bT(e,t){if(Ot!==0&&Ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if($m()&&e.callbackNode!==n)return null;var s=Me;return s=Sm(e,e===Ge?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(oT(e,s,t),vT(e,As()),e.callbackNode!=null&&e.callbackNode===n?bT.bind(null,e):null)}function eN(e,t){if($m())return null;oT(e,t,!0)}function LJ(){qJ(function(){Ie&6?iy(lA,zJ):yT()})}function qy(){return Za===0&&(Za=dA()),Za}function tN(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:md(""+e)}function nN(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function $J(e,t,n,s,r){if(t==="submit"&&n&&n.stateNode===r){var a=tN((r[cn]||null).action),i=s.submitter;i&&(t=(t=i[cn]||null)?tN(t.formAction):i.getAttribute("formAction"),t!==null&&(a=t,i=null));var l=new Cm("action","action",null,s,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Za!==0){var c=i?nN(r,i):new FormData(r);Lp(n,{pending:!0,data:c,method:r.method,action:a},null,c)}}else typeof a=="function"&&(l.preventDefault(),c=i?nN(r,i):new FormData(r),Lp(n,{pending:!0,data:c,method:r.method,action:a},a,c))},currentTarget:r}]})}}for(var rg=0;rg<jp.length;rg++){var ag=jp[rg],PJ=ag.toLowerCase(),OJ=ag[0].toUpperCase()+ag.slice(1);ds(PJ,"on"+OJ)}ds(LA,"onAnimationEnd");ds($A,"onAnimationIteration");ds(PA,"onAnimationStart");ds("dblclick","onDoubleClick");ds("focusin","onFocus");ds("focusout","onBlur");ds(tJ,"onTransitionRun");ds(nJ,"onTransitionStart");ds(sJ,"onTransitionCancel");ds(OA,"onTransitionEnd");Ri("onMouseEnter",["mouseout","mouseover"]);Ri("onMouseLeave",["mouseout","mouseover"]);Ri("onPointerEnter",["pointerout","pointerover"]);Ri("onPointerLeave",["pointerout","pointerover"]);bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BJ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kc));function wT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&r.isPropagationStopped())break e;a=l,r.currentTarget=u;try{a(r)}catch(d){xf(d)}r.currentTarget=null,a=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&r.isPropagationStopped())break e;a=l,r.currentTarget=u;try{a(r)}catch(d){xf(d)}r.currentTarget=null,a=c}}}}function ke(e,t){var n=t[pp];n===void 0&&(n=t[pp]=new Set);var s=e+"__bubble";n.has(s)||(NT(t,e,2,!1),n.add(s))}function og(e,t,n){var s=0;t&&(s|=4),NT(n,e,s,t)}var Qu="_reactListening"+Math.random().toString(36).slice(2);function Zy(e){if(!e[Qu]){e[Qu]=!0,pA.forEach(function(n){n!=="selectionchange"&&(BJ.has(n)||og(n,!1,e),og(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qu]||(t[Qu]=!0,og("selectionchange",!1,t))}}function NT(e,t,n,s){switch(zT(t)){case 2:var r=fee;break;case 8:r=mee;break;default:r=Wy}n=r.bind(null,t,n,e),r=void 0,!bp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function ig(e,t,n,s,r){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===r)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&i.stateNode.containerInfo===r)return;i=i.return}for(;l!==null;){if(i=Vo(l),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){s=a=i;continue e}l=l.parentNode}}s=s.return}SA(function(){var u=a,d=fy(n),f=[];e:{var m=BA.get(e);if(m!==void 0){var h=Cm,p=e;switch(e){case"keypress":if(gd(n)===0)break e;case"keydown":case"keyup":h=DQ;break;case"focusin":p="focus",h=Ph;break;case"focusout":p="blur",h=Ph;break;case"beforeblur":case"afterblur":h=Ph;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=c1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=wQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=$Q;break;case LA:case $A:case PA:h=SQ;break;case OA:h=OQ;break;case"scroll":case"scrollend":h=vQ;break;case"wheel":h=IQ;break;case"copy":case"cut":case"paste":h=kQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=d1;break;case"toggle":case"beforetoggle":h=UQ}var y=(t&4)!==0,b=!y&&(e==="scroll"||e==="scrollend"),x=y?m!==null?m+"Capture":null:m;y=[];for(var w=u,v;w!==null;){var N=w;if(v=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||v===null||x===null||(N=bc(w,x),N!=null&&y.push(Ec(w,N,v))),b)break;w=w.return}0<y.length&&(m=new h(m,p,null,n,d),f.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==vp&&(p=n.relatedTarget||n.fromElement)&&(Vo(p)||p[rl]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Vo(p):null,p!==null&&(b=Kc(p),y=p.tag,p!==b||y!==5&&y!==27&&y!==6)&&(p=null)):(h=null,p=u),h!==p)){if(y=c1,N="onMouseLeave",x="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(y=d1,N="onPointerLeave",x="onPointerEnter",w="pointer"),b=h==null?m:zl(h),v=p==null?m:zl(p),m=new y(N,w+"leave",h,n,d),m.target=b,m.relatedTarget=v,N=null,Vo(d)===u&&(y=new y(x,w+"enter",p,n,d),y.target=v,y.relatedTarget=b,N=y),b=N,h&&p)t:{for(y=h,x=p,w=0,v=y;v;v=Lo(v))w++;for(v=0,N=x;N;N=Lo(N))v++;for(;0<w-v;)y=Lo(y),w--;for(;0<v-w;)x=Lo(x),v--;for(;w--;){if(y===x||x!==null&&y===x.alternate)break t;y=Lo(y),x=Lo(x)}y=null}else y=null;h!==null&&sN(f,m,h,y,!1),p!==null&&b!==null&&sN(f,b,p,y,!0)}}e:{if(m=u?zl(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var j=g1;else if(h1(m))if(MA)j=QQ;else{j=WQ;var S=XQ}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&dy(u.elementType)&&(j=g1):j=KQ;if(j&&(j=j(e,u))){AA(f,j,n,d);break e}S&&S(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&yp(m,"number",m.value)}switch(S=u?zl(u):window,e){case"focusin":(h1(S)||S.contentEditable==="true")&&(Go=S,wp=u,Ul=null);break;case"focusout":Ul=wp=Go=null;break;case"mousedown":Np=!0;break;case"contextmenu":case"mouseup":case"dragend":Np=!1,b1(f,n,d);break;case"selectionchange":if(eJ)break;case"keydown":case"keyup":b1(f,n,d)}var C;if(gy)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Zo?EA(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(kA&&n.locale!=="ko"&&(Zo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Zo&&(C=CA()):(Xr=d,my="value"in Xr?Xr.value:Xr.textContent,Zo=!0)),S=Cf(u,E),0<S.length&&(E=new u1(E,e,null,n,d),f.push({event:E,listeners:S}),C?E.data=C:(C=_A(n),C!==null&&(E.data=C)))),(C=VQ?qQ(e,n):ZQ(e,n))&&(E=Cf(u,"onBeforeInput"),0<E.length&&(S=new u1("onBeforeInput","beforeinput",null,n,d),f.push({event:S,listeners:E}),S.data=C)),$J(f,e,u,n,d)}wT(f,t)})}function Ec(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cf(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,a=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||a===null||(r=bc(e,n),r!=null&&s.unshift(Ec(e,r,a)),r=bc(e,t),r!=null&&s.push(Ec(e,r,a))),e.tag===3)return s;e=e.return}return[]}function Lo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sN(e,t,n,s,r){for(var a=t._reactName,i=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||u===null||(c=u,r?(u=bc(n,a),u!=null&&i.unshift(Ec(n,u,c))):r||(u=bc(n,a),u!=null&&i.push(Ec(n,u,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var IJ=/\r\n?/g,HJ=/\u0000|\uFFFD/g;function rN(e){return(typeof e=="string"?e:""+e).replace(IJ,`
`).replace(HJ,"")}function jT(e,t){return t=rN(t),rN(e)===t}function Pm(){}function He(e,t,n,s,r,a){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Di(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Di(e,""+s);break;case"className":qu(e,"class",s);break;case"tabIndex":qu(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":qu(e,n,s);break;case"style":jA(e,s,a);break;case"data":if(t!=="object"){qu(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=md(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(t!=="input"&&He(e,t,"name",r.name,r,null),He(e,t,"formEncType",r.formEncType,r,null),He(e,t,"formMethod",r.formMethod,r,null),He(e,t,"formTarget",r.formTarget,r,null)):(He(e,t,"encType",r.encType,r,null),He(e,t,"method",r.method,r,null),He(e,t,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=md(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=Pm);break;case"onScroll":s!=null&&ke("scroll",e);break;case"onScrollEnd":s!=null&&ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Z(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(Z(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=md(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":ke("beforetoggle",e),ke("toggle",e),fd(e,"popover",s);break;case"xlinkActuate":Ws(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Ws(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Ws(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Ws(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Ws(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Ws(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Ws(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Ws(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Ws(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":fd(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=xQ.get(n)||n,fd(e,n,s))}}function Gp(e,t,n,s,r,a){switch(n){case"style":jA(e,s,a);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Z(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(Z(60));e.innerHTML=n}}break;case"children":typeof s=="string"?Di(e,s):(typeof s=="number"||typeof s=="bigint")&&Di(e,""+s);break;case"onScroll":s!=null&&ke("scroll",e);break;case"onScrollEnd":s!=null&&ke("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Pm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xA.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),a=e[cn]||null,a=a!=null?a[n]:null,typeof a=="function"&&e.removeEventListener(t,a,r),typeof s=="function")){typeof a!="function"&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,r);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):fd(e,n,s)}}}function Bt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",e),ke("load",e);var s=!1,r=!1,a;for(a in n)if(n.hasOwnProperty(a)){var i=n[a];if(i!=null)switch(a){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,t));default:He(e,t,a,i,n,null)}}r&&He(e,t,"srcSet",n.srcSet,n,null),s&&He(e,t,"src",n.src,n,null);return;case"input":ke("invalid",e);var l=a=i=r=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(d!=null)switch(s){case"name":r=d;break;case"type":i=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(Z(137,t));break;default:He(e,t,s,d,n,null)}}bA(e,a,l,c,u,i,r,!1),af(e);return;case"select":ke("invalid",e),s=i=a=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":a=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:He(e,t,r,l,n,null)}t=a,n=i,e.multiple=!!s,t!=null?ci(e,!!s,t,!1):n!=null&&ci(e,!!s,n,!0);return;case"textarea":ke("invalid",e),a=r=s=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":r=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Z(91));break;default:He(e,t,i,l,n,null)}NA(e,s,r,a),af(e);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:He(e,t,c,s,n,null)}return;case"dialog":ke("beforetoggle",e),ke("toggle",e),ke("cancel",e),ke("close",e);break;case"iframe":case"object":ke("load",e);break;case"video":case"audio":for(s=0;s<kc.length;s++)ke(kc[s],e);break;case"image":ke("error",e),ke("load",e);break;case"details":ke("toggle",e);break;case"embed":case"source":case"link":ke("error",e),ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,t));default:He(e,t,u,s,n,null)}return;default:if(dy(t)){for(d in n)n.hasOwnProperty(d)&&(s=n[d],s!==void 0&&Gp(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&He(e,t,l,s,n,null))}function UJ(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,i=null,l=null,c=null,u=null,d=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&f!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":c=f;default:s.hasOwnProperty(h)||He(e,t,h,null,s,f)}}for(var m in s){var h=s[m];if(f=n[m],s.hasOwnProperty(m)&&(h!=null||f!=null))switch(m){case"type":a=h;break;case"name":r=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":i=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(Z(137,t));break;default:h!==f&&He(e,t,m,h,s,f)}}xp(e,i,l,c,u,d,a,r);return;case"select":h=i=l=m=null;for(a in n)if(c=n[a],n.hasOwnProperty(a)&&c!=null)switch(a){case"value":break;case"multiple":h=c;default:s.hasOwnProperty(a)||He(e,t,a,null,s,c)}for(r in s)if(a=s[r],c=n[r],s.hasOwnProperty(r)&&(a!=null||c!=null))switch(r){case"value":m=a;break;case"defaultValue":l=a;break;case"multiple":i=a;default:a!==c&&He(e,t,r,a,s,c)}t=l,n=i,s=h,m!=null?ci(e,!!n,m,!1):!!s!=!!n&&(t!=null?ci(e,!!n,t,!0):ci(e,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:He(e,t,l,null,s,r)}for(i in s)if(r=s[i],a=n[i],s.hasOwnProperty(i)&&(r!=null||a!=null))switch(i){case"value":m=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(Z(91));break;default:r!==a&&He(e,t,i,r,s,a)}wA(e,m,h);return;case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&m!=null&&!s.hasOwnProperty(p))switch(p){case"selected":e.selected=!1;break;default:He(e,t,p,null,s,m)}for(c in s)if(m=s[c],h=n[c],s.hasOwnProperty(c)&&m!==h&&(m!=null||h!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:He(e,t,c,m,s,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in n)m=n[y],n.hasOwnProperty(y)&&m!=null&&!s.hasOwnProperty(y)&&He(e,t,y,null,s,m);for(u in s)if(m=s[u],h=n[u],s.hasOwnProperty(u)&&m!==h&&(m!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(Z(137,t));break;default:He(e,t,u,m,s,h)}return;default:if(dy(t)){for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!==void 0&&!s.hasOwnProperty(b)&&Gp(e,t,b,void 0,s,m);for(d in s)m=s[d],h=n[d],!s.hasOwnProperty(d)||m===h||m===void 0&&h===void 0||Gp(e,t,d,m,s,h);return}}for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!s.hasOwnProperty(x)&&He(e,t,x,null,s,m);for(f in s)m=s[f],h=n[f],!s.hasOwnProperty(f)||m===h||m==null&&h==null||He(e,t,f,m,s,h)}var Yp=null,Xp=null;function kf(e){return e.nodeType===9?e:e.ownerDocument}function aN(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ST(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Wp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lg=null;function FJ(){var e=window.event;return e&&e.type==="popstate"?e===lg?!1:(lg=e,!0):(lg=null,!1)}var CT=typeof setTimeout=="function"?setTimeout:void 0,VJ=typeof clearTimeout=="function"?clearTimeout:void 0,oN=typeof Promise=="function"?Promise:void 0,qJ=typeof queueMicrotask=="function"?queueMicrotask:typeof oN<"u"?function(e){return oN.resolve(null).then(e).catch(ZJ)}:CT;function ZJ(e){setTimeout(function(){throw e})}function wa(e){return e==="head"}function iN(e,t){var n=t,s=0,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(0<s&&8>s){n=s;var i=e.ownerDocument;if(n&1&&Jl(i.documentElement),n&2&&Jl(i.body),n&4)for(n=i.head,Jl(n),i=n.firstChild;i;){var l=i.nextSibling,c=i.nodeName;i[tu]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=l}}if(r===0){e.removeChild(a),Rc(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:s=n.charCodeAt(0)-48;else s=0;n=a}while(n);Rc(t)}function Kp(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Kp(n),uy(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function GJ(e,t,n,s){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[tu])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(a=e.getAttribute("rel"),a==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(a!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(a=e.getAttribute("src"),(a!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var a=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===a)return e}else return e;if(e=rs(e.nextSibling),e===null)break}return null}function YJ(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=rs(e.nextSibling),e===null))return null;return e}function Qp(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function XJ(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function rs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Jp=null;function lN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function kT(e,t,n){switch(t=kf(n),e){case"html":if(e=t.documentElement,!e)throw Error(Z(452));return e;case"head":if(e=t.head,!e)throw Error(Z(453));return e;case"body":if(e=t.body,!e)throw Error(Z(454));return e;default:throw Error(Z(451))}}function Jl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);uy(e)}var Gn=new Map,cN=new Set;function Ef(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Er=ze.d;ze.d={f:WJ,r:KJ,D:QJ,C:JJ,L:eee,m:tee,X:see,S:nee,M:ree};function WJ(){var e=Er.f(),t=zm();return e||t}function KJ(e){var t=al(e);t!==null&&t.tag===5&&t.type==="form"?vM(t):Er.r(e)}var ll=typeof document>"u"?null:document;function ET(e,t,n){var s=ll;if(s&&typeof t=="string"&&t){var r=Pn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),cN.has(r)||(cN.add(r),e={rel:e,crossOrigin:n,href:t},s.querySelector(r)===null&&(t=s.createElement("link"),Bt(t,"link",e),Mt(t),s.head.appendChild(t)))}}function QJ(e){Er.D(e),ET("dns-prefetch",e,null)}function JJ(e,t){Er.C(e,t),ET("preconnect",e,t)}function eee(e,t,n){Er.L(e,t,n);var s=ll;if(s&&e&&t){var r='link[rel="preload"][as="'+Pn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Pn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Pn(n.imageSizes)+'"]')):r+='[href="'+Pn(e)+'"]';var a=r;switch(t){case"style":a=Hi(e);break;case"script":a=cl(e)}Gn.has(a)||(e=Ke({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Gn.set(a,e),s.querySelector(r)!==null||t==="style"&&s.querySelector(du(a))||t==="script"&&s.querySelector(fu(a))||(t=s.createElement("link"),Bt(t,"link",e),Mt(t),s.head.appendChild(t)))}}function tee(e,t){Er.m(e,t);var n=ll;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Pn(s)+'"][href="'+Pn(e)+'"]',a=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=cl(e)}if(!Gn.has(a)&&(e=Ke({rel:"modulepreload",href:e},t),Gn.set(a,e),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(fu(a)))return}s=n.createElement("link"),Bt(s,"link",e),Mt(s),n.head.appendChild(s)}}}function nee(e,t,n){Er.S(e,t,n);var s=ll;if(s&&e){var r=li(s).hoistableStyles,a=Hi(e);t=t||"default";var i=r.get(a);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(du(a)))l.loading=5;else{e=Ke({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Gn.get(a))&&Gy(e,n);var c=i=s.createElement("link");Mt(c),Bt(c,"link",e),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Nd(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},r.set(a,i)}}}function see(e,t){Er.X(e,t);var n=ll;if(n&&e){var s=li(n).hoistableScripts,r=cl(e),a=s.get(r);a||(a=n.querySelector(fu(r)),a||(e=Ke({src:e,async:!0},t),(t=Gn.get(r))&&Yy(e,t),a=n.createElement("script"),Mt(a),Bt(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(r,a))}}function ree(e,t){Er.M(e,t);var n=ll;if(n&&e){var s=li(n).hoistableScripts,r=cl(e),a=s.get(r);a||(a=n.querySelector(fu(r)),a||(e=Ke({src:e,async:!0,type:"module"},t),(t=Gn.get(r))&&Yy(e,t),a=n.createElement("script"),Mt(a),Bt(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(r,a))}}function uN(e,t,n,s){var r=(r=ta.current)?Ef(r):null;if(!r)throw Error(Z(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Hi(n.href),n=li(r).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Hi(n.href);var a=li(r).hoistableStyles,i=a.get(e);if(i||(r=r.ownerDocument||r,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,i),(a=r.querySelector(du(e)))&&!a._p&&(i.instance=a,i.state.loading=5),Gn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Gn.set(e,n),a||aee(r,e,n,i.state))),t&&s===null)throw Error(Z(528,""));return i}if(t&&s!==null)throw Error(Z(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=cl(n),n=li(r).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(Z(444,e))}}function Hi(e){return'href="'+Pn(e)+'"'}function du(e){return'link[rel="stylesheet"]['+e+"]"}function _T(e){return Ke({},e,{"data-precedence":e.precedence,precedence:null})}function aee(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Bt(t,"link",n),Mt(t),e.head.appendChild(t))}function cl(e){return'[src="'+Pn(e)+'"]'}function fu(e){return"script[async]"+e}function dN(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Pn(n.href)+'"]');if(s)return t.instance=s,Mt(s),s;var r=Ke({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Mt(s),Bt(s,"style",r),Nd(s,n.precedence,e),t.instance=s;case"stylesheet":r=Hi(n.href);var a=e.querySelector(du(r));if(a)return t.state.loading|=4,t.instance=a,Mt(a),a;s=_T(n),(r=Gn.get(r))&&Gy(s,r),a=(e.ownerDocument||e).createElement("link"),Mt(a);var i=a;return i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Bt(a,"link",s),t.state.loading|=4,Nd(a,n.precedence,e),t.instance=a;case"script":return a=cl(n.src),(r=e.querySelector(fu(a)))?(t.instance=r,Mt(r),r):(s=n,(r=Gn.get(a))&&(s=Ke({},n),Yy(s,r)),e=e.ownerDocument||e,r=e.createElement("script"),Mt(r),Bt(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(Z(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,Nd(s,n.precedence,e));return t.instance}function Nd(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,a=r,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)a=l;else if(a!==r)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Gy(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Yy(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var jd=null;function fN(e,t,n){if(jd===null){var s=new Map,r=jd=new Map;r.set(n,s)}else r=jd,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var a=n[r];if(!(a[tu]||a[Ft]||e==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var i=a.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(a):s.set(i,[a])}}return s}function mN(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function oee(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function AT(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var _c=null;function iee(){}function lee(e,t,n){if(_c===null)throw Error(Z(475));var s=_c;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Hi(n.href),a=e.querySelector(du(r));if(a){e=a._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=_f.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=a,Mt(a);return}a=e.ownerDocument||e,n=_T(n),(r=Gn.get(r))&&Gy(n,r),a=a.createElement("link"),Mt(a);var i=a;i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Bt(a,"link",n),t.instance=a}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=_f.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function cee(){if(_c===null)throw Error(Z(475));var e=_c;return e.stylesheets&&e.count===0&&ex(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&ex(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function _f(){if(this.count--,this.count===0){if(this.stylesheets)ex(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Af=null;function ex(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Af=new Map,t.forEach(uee,e),Af=null,_f.call(e))}function uee(e,t){if(!(t.state.loading&4)){var n=Af.get(e);if(n)var s=n.get(null);else{n=new Map,Af.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var i=r[a];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(n.set(i.dataset.precedence,i),s=i)}s&&n.set(null,s)}r=t.instance,i=r.getAttribute("data-precedence"),a=n.get(i)||s,a===s&&n.set(null,r),n.set(i,r),this.count++,s=_f.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),a?a.parentNode.insertBefore(r,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Ac={$$typeof:rr,Provider:null,Consumer:null,_currentValue:Ia,_currentValue2:Ia,_threadCount:0};function dee(e,t,n,s,r,a,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mh(0),this.hiddenUpdates=Mh(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function MT(e,t,n,s,r,a,i,l,c,u,d,f){return e=new dee(e,t,n,i,l,c,u,f),t=1,a===!0&&(t|=24),a=bn(3,null,null,t),e.current=a,a.stateNode=e,t=Ny(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:s,isDehydrated:n,cache:t},Sy(a),e}function TT(e){return e?(e=Wo,e):Wo}function RT(e,t,n,s,r,a){r=TT(r),s.context===null?s.context=r:s.pendingContext=r,s=na(t),s.payload={element:n},a=a===void 0?null:a,a!==null&&(s.callback=a),n=sa(e,s,t),n!==null&&(kn(n,e,t),ql(n,e,t))}function hN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xy(e,t){hN(e,t),(e=e.alternate)&&hN(e,t)}function DT(e){if(e.tag===13){var t=ol(e,67108864);t!==null&&kn(t,e,67108864),Xy(e,67108864)}}var Mf=!0;function fee(e,t,n,s){var r=ge.T;ge.T=null;var a=ze.p;try{ze.p=2,Wy(e,t,n,s)}finally{ze.p=a,ge.T=r}}function mee(e,t,n,s){var r=ge.T;ge.T=null;var a=ze.p;try{ze.p=8,Wy(e,t,n,s)}finally{ze.p=a,ge.T=r}}function Wy(e,t,n,s){if(Mf){var r=tx(s);if(r===null)ig(e,t,s,Tf,n),gN(e,s);else if(gee(r,e,t,n,s))s.stopPropagation();else if(gN(e,s),t&4&&-1<hee.indexOf(e)){for(;r!==null;){var a=al(r);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var i=_a(a.pendingLanes);if(i!==0){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var c=1<<31-Sn(i);l.entanglements[1]|=c,i&=~c}Is(a),!(Ie&6)&&(wf=As()+500,uu(0))}}break;case 13:l=ol(a,2),l!==null&&kn(l,a,2),zm(),Xy(a,2)}if(a=tx(s),a===null&&ig(e,t,s,Tf,n),a===r)break;r=a}r!==null&&s.stopPropagation()}else ig(e,t,s,null,n)}}function tx(e){return e=fy(e),Ky(e)}var Tf=null;function Ky(e){if(Tf=null,e=Vo(e),e!==null){var t=Kc(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=rA(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Tf=e,null}function zT(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(JK()){case lA:return 2;case cA:return 8;case rf:case eQ:return 32;case uA:return 268435456;default:return 32}default:return 32}}var nx=!1,oa=null,ia=null,la=null,Mc=new Map,Tc=new Map,Zr=[],hee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gN(e,t){switch(e){case"focusin":case"focusout":oa=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":Mc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(t.pointerId)}}function El(e,t,n,s,r,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[r]},t!==null&&(t=al(t),t!==null&&DT(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function gee(e,t,n,s,r){switch(t){case"focusin":return oa=El(oa,e,t,n,s,r),!0;case"dragenter":return ia=El(ia,e,t,n,s,r),!0;case"mouseover":return la=El(la,e,t,n,s,r),!0;case"pointerover":var a=r.pointerId;return Mc.set(a,El(Mc.get(a)||null,e,t,n,s,r)),!0;case"gotpointercapture":return a=r.pointerId,Tc.set(a,El(Tc.get(a)||null,e,t,n,s,r)),!0}return!1}function LT(e){var t=Vo(e.target);if(t!==null){var n=Kc(t);if(n!==null){if(t=n.tag,t===13){if(t=rA(n),t!==null){e.blockedOn=t,lQ(e.priority,function(){if(n.tag===13){var s=Cn();s=ly(s);var r=ol(n,s);r!==null&&kn(r,n,s),Xy(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tx(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);vp=s,n.target.dispatchEvent(s),vp=null}else return t=al(n),t!==null&&DT(t),e.blockedOn=n,!1;t.shift()}return!0}function pN(e,t,n){Sd(e)&&n.delete(t)}function pee(){nx=!1,oa!==null&&Sd(oa)&&(oa=null),ia!==null&&Sd(ia)&&(ia=null),la!==null&&Sd(la)&&(la=null),Mc.forEach(pN),Tc.forEach(pN)}function Ju(e,t){e.blockedOn===t&&(e.blockedOn=null,nx||(nx=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,pee)))}var ed=null;function xN(e){ed!==e&&(ed=e,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,function(){ed===e&&(ed=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],r=e[t+2];if(typeof s!="function"){if(Ky(s||n)===null)continue;break}var a=al(n);a!==null&&(e.splice(t,3),t-=3,Lp(a,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Rc(e){function t(c){return Ju(c,e)}oa!==null&&Ju(oa,e),ia!==null&&Ju(ia,e),la!==null&&Ju(la,e),Mc.forEach(t),Tc.forEach(t);for(var n=0;n<Zr.length;n++){var s=Zr[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)LT(n),n.blockedOn===null&&Zr.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],a=n[s+1],i=r[cn]||null;if(typeof a=="function")i||xN(n);else if(i){var l=null;if(a&&a.hasAttribute("formAction")){if(r=a,i=a[cn]||null)l=i.formAction;else if(Ky(r)!==null)continue}else l=i.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),xN(n)}}}function Qy(e){this._internalRoot=e}Om.prototype.render=Qy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));var n=t.current,s=Cn();RT(n,s,e,t,null,null)};Om.prototype.unmount=Qy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;RT(e.current,2,null,e,null,null),zm(),t[rl]=null}};function Om(e){this._internalRoot=e}Om.prototype.unstable_scheduleHydration=function(e){if(e){var t=gA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zr.length&&t!==0&&t<Zr[n].priority;n++);Zr.splice(n,0,e),n===0&&LT(e)}};var yN=nA.version;if(yN!=="19.1.0")throw Error(Z(527,yN,"19.1.0"));ze.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=ZK(t),e=e!==null?aA(e):null,e=e===null?null:e.stateNode,e};var xee={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Qc=td.inject(xee),jn=td}catch{}}jm.createRoot=function(e,t){if(!sA(e))throw Error(Z(299));var n=!1,s="",r=MM,a=TM,i=RM,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=MT(e,1,!1,null,null,n,s,r,a,i,l,null),e[rl]=t.current,Zy(e),new Qy(t)};jm.hydrateRoot=function(e,t,n){if(!sA(e))throw Error(Z(299));var s=!1,r="",a=MM,i=TM,l=RM,c=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(i=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),t=MT(e,1,!0,t,n??null,s,r,a,i,l,c,u),t.context=TT(null),n=t.current,s=Cn(),s=ly(s),r=na(s),r.callback=null,sa(n,r,s),n=s,t.current.lanes=n,eu(t,n),Is(t),e[rl]=t.current,Zy(e),new Om(t)};jm.version="19.1.0";function $T(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($T)}catch(e){console.error(e)}}$T(),J_.exports=jm;var yee=J_.exports;yee.createRoot(document.getElementById("root")).render(o.jsx(g.StrictMode,{children:o.jsx(FK,{showLoadingIndicator:!0,children:o.jsx(zK,{children:o.jsx(UK,{})})})}));
