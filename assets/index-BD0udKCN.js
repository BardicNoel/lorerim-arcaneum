var gR=Object.defineProperty;var pR=(e,t,n)=>t in e?gR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ve=(e,t,n)=>pR(e,typeof t!="symbol"?t+"":t,n);function xR(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const a=Object.getOwnPropertyDescriptor(s,r);a&&Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function ox(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yN={exports:{}},Rf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vR=Symbol.for("react.transitional.element"),yR=Symbol.for("react.fragment");function bN(e,t,n){var s=null;if(n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:vR,type:e,key:s,ref:t!==void 0?t:null,props:n}}Rf.Fragment=yR;Rf.jsx=bN;Rf.jsxs=bN;yN.exports=Rf;var o=yN.exports;const Dt={CONTENT:1,DROPDOWN:100,AUTOCOMPLETE:120,TOOLTIP:150,MODAL:200,DRAWER:202,HEADER:50,SIDEBAR:60,STICKY:40};var wN={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix=Symbol.for("react.transitional.element"),bR=Symbol.for("react.portal"),wR=Symbol.for("react.fragment"),NR=Symbol.for("react.strict_mode"),jR=Symbol.for("react.profiler"),SR=Symbol.for("react.consumer"),kR=Symbol.for("react.context"),CR=Symbol.for("react.forward_ref"),ER=Symbol.for("react.suspense"),_R=Symbol.for("react.memo"),NN=Symbol.for("react.lazy"),ry=Symbol.iterator;function AR(e){return e===null||typeof e!="object"?null:(e=ry&&e[ry]||e["@@iterator"],typeof e=="function"?e:null)}var jN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SN=Object.assign,kN={};function Ui(e,t,n){this.props=e,this.context=t,this.refs=kN,this.updater=n||jN}Ui.prototype.isReactComponent={};Ui.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ui.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function CN(){}CN.prototype=Ui.prototype;function lx(e,t,n){this.props=e,this.context=t,this.refs=kN,this.updater=n||jN}var cx=lx.prototype=new CN;cx.constructor=lx;SN(cx,Ui.prototype);cx.isPureReactComponent=!0;var ay=Array.isArray,Qe={H:null,A:null,T:null,S:null,V:null},EN=Object.prototype.hasOwnProperty;function ux(e,t,n,s,r,a){return n=a.ref,{$$typeof:ix,type:e,key:t,ref:n!==void 0?n:null,props:a}}function TR(e,t){return ux(e.type,t,void 0,void 0,void 0,e.props)}function dx(e){return typeof e=="object"&&e!==null&&e.$$typeof===ix}function MR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var oy=/\/+/g;function Hm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?MR(""+e.key):t.toString(36)}function iy(){}function RR(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(iy,iy):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Po(e,t,n,s,r){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ix:case bR:i=!0;break;case NN:return i=e._init,Po(i(e._payload),t,n,s,r)}}if(i)return r=r(e),i=s===""?"."+Hm(e,0):s,ay(r)?(n="",i!=null&&(n=i.replace(oy,"$&/")+"/"),Po(r,t,n,"",function(u){return u})):r!=null&&(dx(r)&&(r=TR(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(oy,"$&/")+"/")+i)),t.push(r)),1;i=0;var l=s===""?".":s+":";if(ay(e))for(var c=0;c<e.length;c++)s=e[c],a=l+Hm(s,c),i+=Po(s,t,n,a,r);else if(c=AR(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,a=l+Hm(s,c++),i+=Po(s,t,n,a,r);else if(a==="object"){if(typeof e.then=="function")return Po(RR(e),t,n,s,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function mu(e,t,n){if(e==null)return e;var s=[],r=0;return Po(e,s,"","",function(a){return t.call(n,a,r++)}),s}function DR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ly=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function zR(){}Ne.Children={map:mu,forEach:function(e,t,n){mu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return mu(e,function(){t++}),t},toArray:function(e){return mu(e,function(t){return t})||[]},only:function(e){if(!dx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=Ui;Ne.Fragment=wR;Ne.Profiler=jR;Ne.PureComponent=lx;Ne.StrictMode=NR;Ne.Suspense=ER;Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Qe;Ne.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Qe.H.useMemoCache(e)}};Ne.cache=function(e){return function(){return e.apply(null,arguments)}};Ne.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=SN({},e.props),r=e.key,a=void 0;if(t!=null)for(i in t.ref!==void 0&&(a=void 0),t.key!==void 0&&(r=""+t.key),t)!EN.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(s[i]=t[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];s.children=l}return ux(e.type,r,void 0,void 0,a,s)};Ne.createContext=function(e){return e={$$typeof:kR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:SR,_context:e},e};Ne.createElement=function(e,t,n){var s,r={},a=null;if(t!=null)for(s in t.key!==void 0&&(a=""+t.key),t)EN.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(r[s]=t[s]);var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)r[s]===void 0&&(r[s]=i[s]);return ux(e,a,void 0,void 0,null,r)};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:CR,render:e}};Ne.isValidElement=dx;Ne.lazy=function(e){return{$$typeof:NN,_payload:{_status:-1,_result:e},_init:DR}};Ne.memo=function(e,t){return{$$typeof:_R,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=Qe.T,n={};Qe.T=n;try{var s=e(),r=Qe.S;r!==null&&r(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(zR,ly)}catch(a){ly(a)}finally{Qe.T=t}};Ne.unstable_useCacheRefresh=function(){return Qe.H.useCacheRefresh()};Ne.use=function(e){return Qe.H.use(e)};Ne.useActionState=function(e,t,n){return Qe.H.useActionState(e,t,n)};Ne.useCallback=function(e,t){return Qe.H.useCallback(e,t)};Ne.useContext=function(e){return Qe.H.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e,t){return Qe.H.useDeferredValue(e,t)};Ne.useEffect=function(e,t,n){var s=Qe.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)};Ne.useId=function(){return Qe.H.useId()};Ne.useImperativeHandle=function(e,t,n){return Qe.H.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return Qe.H.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return Qe.H.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Qe.H.useMemo(e,t)};Ne.useOptimistic=function(e,t){return Qe.H.useOptimistic(e,t)};Ne.useReducer=function(e,t,n){return Qe.H.useReducer(e,t,n)};Ne.useRef=function(e){return Qe.H.useRef(e)};Ne.useState=function(e){return Qe.H.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return Qe.H.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return Qe.H.useTransition()};Ne.version="19.1.0";wN.exports=Ne;var g=wN.exports;const L=ox(g),_N=xR({__proto__:null,default:L},[g]);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$R=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),cy=e=>{const t=$R(e);return t.charAt(0).toUpperCase()+t.slice(1)},AN=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),PR=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:a,iconNode:i,...l},c)=>g.createElement("svg",{ref:c,...OR,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:AN("lucide",r),...!a&&!PR(l)&&{"aria-hidden":"true"},...l},[...i.map(([u,d])=>g.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(e,t)=>{const n=g.forwardRef(({className:s,...r},a)=>g.createElement(BR,{ref:a,iconNode:t,className:AN(`lucide-${LR(cy(e))}`,`lucide-${e}`,s),...r}));return n.displayName=cy(e),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],dg=ie("arrow-left",IR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],UR=ie("arrow-right",HR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],fx=ie("book-open",FR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],uy=ie("brain",VR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fg=ie("check",qR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],ZR=ie("chef-hat",GR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],En=ie("chevron-down",YR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],WR=ie("chevron-left",XR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rc=ie("chevron-right",KR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],JR=ie("chevron-up",QR);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xi=ie("circle-alert",e4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mg=ie("circle-check-big",t4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],s4=ie("circle-x",n4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mx=ie("circle",r4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],o4=ie("clock",a4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],l4=ie("copy",i4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],u4=ie("droplets",c4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ao=ie("external-link",d4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],TN=ie("eye",f4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],MN=ie("file-text",m4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],RN=ie("flame",h4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],p4=ie("ghost",g4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Fi=ie("grid-3x3",x4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],dy=ie("hand",v4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Df=ie("heart",y4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],DN=ie("house",b4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ec=ie("info",w4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],j4=ie("layout-grid",N4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],oo=ie("list",S4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],C4=ie("maximize-2",k4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],_4=ie("menu",E4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],T4=ie("message-square",A4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],R4=ie("minimize-2",M4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M5 12h14",key:"1ays0h"}]],$l=ie("minus",D4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],L4=ie("monitor",z4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],P4=ie("moon",$4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Qr=ie("plus",O4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],qa=ie("rotate-ccw",B4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],H4=ie("search-x",I4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],vi=ie("search",U4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Sd=ie("settings",F4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ys=ie("shield",V4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Pl=ie("sparkles",q4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],st=ie("star",G4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],fy=ie("sun",Z4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],hg=ie("sword",Y4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],W4=ie("tag",X4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],gg=ie("target",K4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],J4=ie("trash-2",Q4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],my=ie("trending-down",e3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pg=ie("trending-up",t3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tc=ie("triangle-alert",n3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],r3=ie("user-check",s3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kd=ie("user",a3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zN=ie("users",o3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],l3=ie("utensils",i3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],u3=ie("wine",c3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vt=ie("x",d3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ga=ie("zap",f3);var hx={};Object.defineProperty(hx,"__esModule",{value:!0});hx.parse=y3;hx.serialize=b3;const m3=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,h3=/^[\u0021-\u003A\u003C-\u007E]*$/,g3=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,p3=/^[\u0020-\u003A\u003D-\u007E]*$/,x3=Object.prototype.toString,v3=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function y3(e,t){const n=new v3,s=e.length;if(s<2)return n;const r=(t==null?void 0:t.decode)||w3;let a=0;do{const i=e.indexOf("=",a);if(i===-1)break;const l=e.indexOf(";",a),c=l===-1?s:l;if(i>c){a=e.lastIndexOf(";",i-1)+1;continue}const u=hy(e,a,i),d=gy(e,i,u),f=e.slice(u,d);if(n[f]===void 0){let m=hy(e,i+1,c),h=gy(e,c,m);const p=r(e.slice(m,h));n[f]=p}a=c+1}while(a<s);return n}function hy(e,t,n){do{const s=e.charCodeAt(t);if(s!==32&&s!==9)return t}while(++t<n);return n}function gy(e,t,n){for(;t>n;){const s=e.charCodeAt(--t);if(s!==32&&s!==9)return t+1}return n}function b3(e,t,n){const s=(n==null?void 0:n.encode)||encodeURIComponent;if(!m3.test(e))throw new TypeError(`argument name is invalid: ${e}`);const r=s(t);if(!h3.test(r))throw new TypeError(`argument val is invalid: ${t}`);let a=e+"="+r;if(!n)return a;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);a+="; Max-Age="+n.maxAge}if(n.domain){if(!g3.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);a+="; Domain="+n.domain}if(n.path){if(!p3.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);a+="; Path="+n.path}if(n.expires){if(!N3(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.partitioned&&(a+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return a}function w3(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function N3(e){return x3.call(e)==="[object Date]"}var py="popstate";function j3(e={}){function t(r,a){let{pathname:i="/",search:l="",hash:c=""}=io(r.location.hash.substring(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),xg("",{pathname:i,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){let i=r.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=r.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof a=="string"?a:nc(a))}function s(r,a){qn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return k3(t,n,s,e)}function rt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function S3(){return Math.random().toString(36).substring(2,10)}function xy(e,t){return{usr:e.state,key:e.key,idx:t}}function xg(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?io(t):t,state:n,key:t&&t.key||s||S3()}}function nc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function io(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function k3(e,t,n,s={}){let{window:r=document.defaultView,v5Compat:a=!1}=s,i=r.history,l="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){l="POP";let w=d(),x=w==null?null:w-u;u=w,c&&c({action:l,location:v.location,delta:x})}function m(w,x){l="PUSH";let b=xg(v.location,w,x);n&&n(b,w),u=d()+1;let y=xy(b,u),N=v.createHref(b);try{i.pushState(y,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(N)}a&&c&&c({action:l,location:v.location,delta:1})}function h(w,x){l="REPLACE";let b=xg(v.location,w,x);n&&n(b,w),u=d();let y=xy(b,u),N=v.createHref(b);i.replaceState(y,"",N),a&&c&&c({action:l,location:v.location,delta:0})}function p(w){return C3(w)}let v={get action(){return l},get location(){return e(r,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(py,f),c=w,()=>{r.removeEventListener(py,f),c=null}},createHref(w){return t(r,w)},createURL:p,encodeLocation(w){let x=p(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:h,go(w){return i.go(w)}};return v}function C3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),rt(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:nc(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function LN(e,t,n="/"){return E3(e,t,n,!1)}function E3(e,t,n,s){let r=typeof t=="string"?io(t):t,a=hr(r.pathname||"/",n);if(a==null)return null;let i=$N(e);_3(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=B3(a);l=P3(i[c],u,s)}return l}function $N(e,t=[],n=[],s=""){let r=(a,i,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(rt(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let u=ur([s,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(rt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),$N(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:L3(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,i);else for(let c of PN(a.path))r(a,i,c)}),t}function PN(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return r?[a,""]:[a];let i=PN(s.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),r&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function _3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$3(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var A3=/^:[\w-]+$/,T3=3,M3=2,R3=1,D3=10,z3=-2,vy=e=>e==="*";function L3(e,t){let n=e.split("/"),s=n.length;return n.some(vy)&&(s+=z3),t&&(s+=M3),n.filter(r=>!vy(r)).reduce((r,a)=>r+(A3.test(a)?T3:a===""?R3:D3),s)}function $3(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function P3(e,t,n=!1){let{routesMeta:s}=e,r={},a="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=Cd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!s[s.length-1].route.index&&(f=Cd({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(r,f.params),i.push({params:r,pathname:ur([a,f.pathname]),pathnameBase:F3(ur([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=ur([a,f.pathnameBase]))}return i}function Cd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=O3(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let a=r[0],i=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let p=l[m]||"";i=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const h=l[m];return f&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function O3(e,t=!1,n=!0){qn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function B3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function hr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function I3(e,t="/"){let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?io(e):e;return{pathname:n?n.startsWith("/")?n:H3(n,t):t,search:V3(s),hash:q3(r)}}function H3(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Um(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function U3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ON(e){let t=U3(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function BN(e,t,n,s=!1){let r;typeof e=="string"?r=io(e):(r={...e},rt(!r.pathname||!r.pathname.includes("?"),Um("?","pathname","search",r)),rt(!r.pathname||!r.pathname.includes("#"),Um("#","pathname","hash",r)),rt(!r.search||!r.search.includes("#"),Um("#","search","hash",r)));let a=e===""||r.pathname==="",i=a?"/":r.pathname,l;if(i==null)l=n;else{let f=t.length-1;if(!s&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=I3(r,l),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var ur=e=>e.join("/").replace(/\/\/+/g,"/"),F3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,q3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function G3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var IN=["POST","PUT","PATCH","DELETE"];new Set(IN);var Z3=["GET",...IN];new Set(Z3);var Vi=g.createContext(null);Vi.displayName="DataRouter";var zf=g.createContext(null);zf.displayName="DataRouterState";var HN=g.createContext({isTransitioning:!1});HN.displayName="ViewTransition";var Y3=g.createContext(new Map);Y3.displayName="Fetchers";var X3=g.createContext(null);X3.displayName="Await";var Ls=g.createContext(null);Ls.displayName="Navigation";var Dc=g.createContext(null);Dc.displayName="Location";var $s=g.createContext({outlet:null,matches:[],isDataRoute:!1});$s.displayName="Route";var gx=g.createContext(null);gx.displayName="RouteError";function W3(e,{relative:t}={}){rt(zc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=g.useContext(Ls),{hash:r,pathname:a,search:i}=Lc(e,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:ur([n,a])),s.createHref({pathname:l,search:i,hash:r})}function zc(){return g.useContext(Dc)!=null}function Sr(){return rt(zc(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Dc).location}var UN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FN(e){g.useContext(Ls).static||g.useLayoutEffect(e)}function dt(){let{isDataRoute:e}=g.useContext($s);return e?dD():K3()}function K3(){rt(zc(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Vi),{basename:t,navigator:n}=g.useContext(Ls),{matches:s}=g.useContext($s),{pathname:r}=Sr(),a=JSON.stringify(ON(s)),i=g.useRef(!1);return FN(()=>{i.current=!0}),g.useCallback((c,u={})=>{if(qn(i.current,UN),!i.current)return;if(typeof c=="number"){n.go(c);return}let d=BN(c,JSON.parse(a),r,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:ur([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,a,r,e])}var Q3=g.createContext(null);function J3(e){let t=g.useContext($s).outlet;return t&&g.createElement(Q3.Provider,{value:e},t)}function Lc(e,{relative:t}={}){let{matches:n}=g.useContext($s),{pathname:s}=Sr(),r=JSON.stringify(ON(n));return g.useMemo(()=>BN(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function eD(e,t){return VN(e,t)}function VN(e,t,n,s){var x;rt(zc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=g.useContext(Ls),{matches:a}=g.useContext($s),i=a[a.length-1],l=i?i.params:{},c=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let b=d&&d.path||"";qN(c,!d||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=Sr(),m;if(t){let b=typeof t=="string"?io(t):t;rt(u==="/"||((x=b.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=f;let h=m.pathname||"/",p=h;if(u!=="/"){let b=u.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=LN(e,{pathname:p});qn(d||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),qn(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=aD(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:ur([u,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:ur([u,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,s);return t&&w?g.createElement(Dc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},w):w}function tD(){let e=uD(),t=G3(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:r},n):null,i)}var nD=g.createElement(tD,null),sD=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement($s.Provider,{value:this.props.routeContext},g.createElement(gx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rD({routeContext:e,match:t,children:n}){let s=g.useContext(Vi);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement($s.Provider,{value:e},n)}function aD(e,t=[],n=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let r=e,a=n==null?void 0:n.errors;if(a!=null){let c=r.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);rt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let i=!1,l=-1;if(n)for(let c=0;c<r.length;c++){let u=r[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=n,m=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||m){i=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,u,d)=>{let f,m=!1,h=null,p=null;n&&(f=a&&u.route.id?a[u.route.id]:void 0,h=u.route.errorElement||nD,i&&(l<0&&d===0?(qN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,p=null):l===d&&(m=!0,p=u.route.hydrateFallbackElement||null)));let v=t.concat(r.slice(0,d+1)),w=()=>{let x;return f?x=h:m?x=p:u.route.Component?x=g.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,g.createElement(rD,{match:u,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?g.createElement(sD,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}function px(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oD(e){let t=g.useContext(Vi);return rt(t,px(e)),t}function iD(e){let t=g.useContext(zf);return rt(t,px(e)),t}function lD(e){let t=g.useContext($s);return rt(t,px(e)),t}function xx(e){let t=lD(e),n=t.matches[t.matches.length-1];return rt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function cD(){return xx("useRouteId")}function uD(){var s;let e=g.useContext(gx),t=iD("useRouteError"),n=xx("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function dD(){let{router:e}=oD("useNavigate"),t=xx("useNavigate"),n=g.useRef(!1);return FN(()=>{n.current=!0}),g.useCallback(async(r,a={})=>{qn(n.current,UN),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...a}))},[e,t])}var yy={};function qN(e,t,n){!t&&!yy[e]&&(yy[e]=!0,qn(!1,n))}g.memo(fD);function fD({routes:e,future:t,state:n}){return VN(e,void 0,n,t)}function mD(e){return J3(e.context)}function xt(e){rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hD({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:a=!1}){rt(!zc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:i,navigator:r,static:a,future:{}}),[i,r,a]);typeof n=="string"&&(n=io(n));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:m="default"}=n,h=g.useMemo(()=>{let p=hr(c,i);return p==null?null:{location:{pathname:p,search:u,hash:d,state:f,key:m},navigationType:s}},[i,c,u,d,f,m,s]);return qn(h!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:g.createElement(Ls.Provider,{value:l},g.createElement(Dc.Provider,{children:t,value:h}))}function gD({children:e,location:t}){return eD(vg(e),t)}function vg(e,t=[]){let n=[];return g.Children.forEach(e,(s,r)=>{if(!g.isValidElement(s))return;let a=[...t,r];if(s.type===g.Fragment){n.push.apply(n,vg(s.props.children,a));return}rt(s.type===xt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let i={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=vg(s.props.children,a)),n.push(i)}),n}var td="get",nd="application/x-www-form-urlencoded";function Lf(e){return e!=null&&typeof e.tagName=="string"}function pD(e){return Lf(e)&&e.tagName.toLowerCase()==="button"}function xD(e){return Lf(e)&&e.tagName.toLowerCase()==="form"}function vD(e){return Lf(e)&&e.tagName.toLowerCase()==="input"}function yD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function bD(e,t){return e.button===0&&(!t||t==="_self")&&!yD(e)}function yg(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function wD(e,t){let n=yg(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(a=>{n.append(r,a)})}),n}var hu=null;function ND(){if(hu===null)try{new FormData(document.createElement("form"),0),hu=!1}catch{hu=!0}return hu}var jD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fm(e){return e!=null&&!jD.has(e)?(qn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nd}"`),null):e}function SD(e,t){let n,s,r,a,i;if(xD(e)){let l=e.getAttribute("action");s=l?hr(l,t):null,n=e.getAttribute("method")||td,r=Fm(e.getAttribute("enctype"))||nd,a=new FormData(e)}else if(pD(e)||vD(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?hr(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||td,r=Fm(e.getAttribute("formenctype"))||Fm(l.getAttribute("enctype"))||nd,a=new FormData(l,e),!ND()){let{name:u,type:d,value:f}=e;if(d==="image"){let m=u?`${u}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else u&&a.append(u,f)}}else{if(Lf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=td,s=null,r=nd,i=e}return a&&r==="text/plain"&&(i=a,a=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:a,body:i}}function vx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function kD(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CD(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function ED(e,t,n){let s=await Promise.all(e.map(async r=>{let a=t.routes[r.route.id];if(a){let i=await kD(a,n);return i.links?i.links():[]}return[]}));return MD(s.flat(1).filter(CD).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function by(e,t,n,s,r,a){let i=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,u)=>i(c,u)||l(c,u)):a==="data"?t.filter((c,u)=>{var f;let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function _D(e,t,{includeHydrateFallback:n}={}){return AD(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function AD(e){return[...new Set(e)]}function TD(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function MD(e,t){let n=new Set;return new Set(t),e.reduce((s,r)=>{let a=JSON.stringify(TD(r));return n.has(a)||(n.add(a),s.push({key:a,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var RD=new Set([100,101,204,205]);function DD(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&hr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function GN(){let e=g.useContext(Vi);return vx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function zD(){let e=g.useContext(zf);return vx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var yx=g.createContext(void 0);yx.displayName="FrameworkContext";function ZN(){let e=g.useContext(yx);return vx(e,"You must render this element inside a <HydratedRouter> element"),e}function LD(e,t){let n=g.useContext(yx),[s,r]=g.useState(!1),[a,i]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,m=g.useRef(null);g.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let v=x=>{x.forEach(b=>{i(b.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return m.current&&w.observe(m.current),()=>{w.disconnect()}}},[e]),g.useEffect(()=>{if(s){let v=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(v)}}},[s]);let h=()=>{r(!0)},p=()=>{r(!1),i(!1)};return n?e!=="intent"?[a,m,{}]:[a,m,{onFocus:ul(l,h),onBlur:ul(c,p),onMouseEnter:ul(u,h),onMouseLeave:ul(d,p),onTouchStart:ul(f,h)}]:[!1,m,{}]}function ul(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function $D({page:e,...t}){let{router:n}=GN(),s=g.useMemo(()=>LN(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?g.createElement(OD,{page:e,matches:s,...t}):null}function PD(e){let{manifest:t,routeModules:n}=ZN(),[s,r]=g.useState([]);return g.useEffect(()=>{let a=!1;return ED(e,t,n).then(i=>{a||r(i)}),()=>{a=!0}},[e,t,n]),s}function OD({page:e,matches:t,...n}){let s=Sr(),{manifest:r,routeModules:a}=ZN(),{basename:i}=GN(),{loaderData:l,matches:c}=zD(),u=g.useMemo(()=>by(e,t,c,r,s,"data"),[e,t,c,r,s]),d=g.useMemo(()=>by(e,t,c,r,s,"assets"),[e,t,c,r,s]),f=g.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let p=new Set,v=!1;if(t.forEach(x=>{var y;let b=r.routes[x.route.id];!b||!b.hasLoader||(!u.some(N=>N.route.id===x.route.id)&&x.route.id in l&&((y=a[x.route.id])!=null&&y.shouldRevalidate)||b.hasClientLoader?v=!0:p.add(x.route.id))}),p.size===0)return[];let w=DD(e,i);return v&&p.size>0&&w.searchParams.set("_routes",t.filter(x=>p.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[i,l,s,r,u,t,e,a]),m=g.useMemo(()=>_D(d,r),[d,r]),h=PD(d);return g.createElement(g.Fragment,null,f.map(p=>g.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),m.map(p=>g.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:v})=>g.createElement("link",{key:p,...v})))}function BD(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var YN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YN&&(window.__reactRouterVersion="7.6.3")}catch{}function ID({basename:e,children:t,window:n}){let s=g.useRef();s.current==null&&(s.current=j3({window:n,v5Compat:!0}));let r=s.current,[a,i]=g.useState({action:r.action,location:r.location}),l=g.useCallback(c=>{g.startTransition(()=>i(c))},[i]);return g.useLayoutEffect(()=>r.listen(l),[r,l]),g.createElement(hD,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:r})}var XN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WN=g.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:r,reloadDocument:a,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...m},h){let{basename:p}=g.useContext(Ls),v=typeof u=="string"&&XN.test(u),w,x=!1;if(typeof u=="string"&&v&&(w=u,YN))try{let C=new URL(window.location.href),_=u.startsWith("//")?new URL(C.protocol+u):new URL(u),P=hr(_.pathname,p);_.origin===C.origin&&P!=null?u=P+_.search+_.hash:x=!0}catch{qn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=W3(u,{relative:r}),[y,N,j]=LD(s,m),S=VD(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:f});function k(C){t&&t(C),C.defaultPrevented||S(C)}let E=g.createElement("a",{...m,...j,href:w||b,onClick:x||a?t:k,ref:BD(h,N),target:c,"data-discover":!v&&n==="render"?"true":void 0});return y&&!v?g.createElement(g.Fragment,null,E,g.createElement($D,{page:b})):E});WN.displayName="Link";var HD=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:r=!1,style:a,to:i,viewTransition:l,children:c,...u},d){let f=Lc(i,{relative:u.relative}),m=Sr(),h=g.useContext(zf),{navigator:p,basename:v}=g.useContext(Ls),w=h!=null&&WD(f)&&l===!0,x=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,b=m.pathname,y=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(b=b.toLowerCase(),y=y?y.toLowerCase():null,x=x.toLowerCase()),y&&v&&(y=hr(y,v)||y);const N=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=b===x||!r&&b.startsWith(x)&&b.charAt(N)==="/",S=y!=null&&(y===x||!r&&y.startsWith(x)&&y.charAt(x.length)==="/"),k={isActive:j,isPending:S,isTransitioning:w},E=j?t:void 0,C;typeof s=="function"?C=s(k):C=[s,j?"active":null,S?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let _=typeof a=="function"?a(k):a;return g.createElement(WN,{...u,"aria-current":E,className:C,ref:d,style:_,to:i,viewTransition:l},typeof c=="function"?c(k):c)});HD.displayName="NavLink";var UD=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:a,method:i=td,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...m},h)=>{let p=YD(),v=XD(l,{relative:u}),w=i.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&XN.test(l),b=y=>{if(c&&c(y),y.defaultPrevented)return;y.preventDefault();let N=y.nativeEvent.submitter,j=(N==null?void 0:N.getAttribute("formmethod"))||i;p(N||y.currentTarget,{fetcherKey:t,method:j,navigate:n,replace:r,state:a,relative:u,preventScrollReset:d,viewTransition:f})};return g.createElement("form",{ref:h,method:w,action:v,onSubmit:s?c:b,...m,"data-discover":!x&&e==="render"?"true":void 0})});UD.displayName="Form";function FD(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KN(e){let t=g.useContext(Vi);return rt(t,FD(e)),t}function VD(e,{target:t,replace:n,state:s,preventScrollReset:r,relative:a,viewTransition:i}={}){let l=dt(),c=Sr(),u=Lc(e,{relative:a});return g.useCallback(d=>{if(bD(d,t)){d.preventDefault();let f=n!==void 0?n:nc(c)===nc(u);l(e,{replace:f,state:s,preventScrollReset:r,relative:a,viewTransition:i})}},[c,l,u,n,s,t,e,r,a,i])}function qD(e){qn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(yg(e)),n=g.useRef(!1),s=Sr(),r=g.useMemo(()=>wD(s.search,n.current?null:t.current),[s.search]),a=dt(),i=g.useCallback((l,c)=>{const u=yg(typeof l=="function"?l(r):l);n.current=!0,a("?"+u,c)},[a,r]);return[r,i]}var GD=0,ZD=()=>`__${String(++GD)}__`;function YD(){let{router:e}=KN("useSubmit"),{basename:t}=g.useContext(Ls),n=cD();return g.useCallback(async(s,r={})=>{let{action:a,method:i,encType:l,formData:c,body:u}=SD(s,t);if(r.navigate===!1){let d=r.fetcherKey||ZD();await e.fetch(d,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||i,formEncType:r.encType||l,flushSync:r.flushSync})}else await e.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||i,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}function XD(e,{relative:t}={}){let{basename:n}=g.useContext(Ls),s=g.useContext($s);rt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),a={...Lc(e||".",{relative:t})},i=Sr();if(e==null){a.search=i.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();a.search=d?`?${d}`:""}}return(!e||e===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ur([n,a.pathname])),nc(a)}function WD(e,t={}){let n=g.useContext(HN);rt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=KN("useViewTransitionState"),r=Lc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=hr(n.currentLocation.pathname,s)||n.currentLocation.pathname,i=hr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Cd(r.pathname,i)!=null||Cd(r.pathname,a)!=null}[...RD];var QN={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD=g;function JN(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Mr(){}var Zt={d:{f:Mr,r:function(){throw Error(JN(522))},D:Mr,C:Mr,L:Mr,m:Mr,X:Mr,S:Mr,M:Mr},p:0,findDOMNode:null},QD=Symbol.for("react.portal");function JD(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:QD,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}var Ol=KD.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function $f(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Zt;Kt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(JN(299));return JD(e,t,null,n)};Kt.flushSync=function(e){var t=Ol.T,n=Zt.p;try{if(Ol.T=null,Zt.p=2,e)return e()}finally{Ol.T=t,Zt.p=n,Zt.d.f()}};Kt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Zt.d.C(e,t))};Kt.prefetchDNS=function(e){typeof e=="string"&&Zt.d.D(e)};Kt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,s=$f(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Zt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:a}):n==="script"&&Zt.d.X(e,{crossOrigin:s,integrity:r,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Kt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=$f(t.as,t.crossOrigin);Zt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Zt.d.M(e)};Kt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,s=$f(n,t.crossOrigin);Zt.d.L(e,n,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Kt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=$f(t.as,t.crossOrigin);Zt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Zt.d.m(e)};Kt.requestFormReset=function(e){Zt.d.r(e)};Kt.unstable_batchedUpdates=function(e,t){return e(t)};Kt.useFormState=function(e,t,n){return Ol.H.useFormState(e,t,n)};Kt.useFormStatus=function(){return Ol.H.useHostTransitionStatus()};Kt.version="19.1.0";function ej(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ej)}catch(e){console.error(e)}}ej(),QN.exports=Kt;var Pf=QN.exports;const ez=ox(Pf);function tz(){return"/lorerim-arcaneum/"}function os(e){return`${tz()}${e}`}const wy=e=>{let t;const n=new Set,s=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const m=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(h=>h(t,m))}},r=()=>t,l={setState:s,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(s,r,l);return l},nz=e=>e?wy(e):wy,sz=e=>e;function rz(e,t=sz){const n=L.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return L.useDebugValue(n),n}const Ny=e=>{const t=nz(e),n=s=>rz(t,s);return Object.assign(n,t),n},Ps=e=>e?Ny(e):Ny,lo=Ps((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(os("data/perk-trees.json"));if(!s.ok)throw new Error(`Failed to fetch perk trees data: ${s.status}`);const a=await s.json();e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load perk trees",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),az=Object.freeze(Object.defineProperty({__proto__:null,usePerkTreesStore:lo},Symbol.toStringTag,{value:"Module"}));function oz(){return lo.getState().data}function tj(e,t,n){var i;if(t.length===0)return 0;const r=oz().find(l=>l.treeId===e);if(!r)return 0;let a=0;for(const l of t){const c=r.perks.find(f=>f.edid===l);if(!c)continue;const u=n[l]||1,d=c.ranks.find(f=>f.rank===u);if(d&&(i=d.prerequisites)!=null&&i.skillLevel){const f=d.prerequisites.skillLevel.level;a=Math.max(a,f)}}return a}function gu(e){const t={};for(const[n,s]of Object.entries(e.selected))if(s.length>0){const r=tj(n,s,e.ranks);r>0&&(t[n]=r)}return t}const jy={v:1,name:"",notes:"",race:null,stone:null,religion:null,traits:{regular:[],bonus:[]},traitLimits:{regular:2,bonus:1},skills:{major:[],minor:[]},perks:{selected:{},ranks:{}},skillLevels:{},equipment:[],userProgress:{unlocks:[]},destinyPath:[],attributeAssignments:{health:0,stamina:0,magicka:0,level:1,assignments:{}}},Hr=Ps((e,t)=>({build:jy,updateBuild:n=>e(s=>({build:{...s.build,...n}})),setBuild:n=>e({build:n}),resetBuild:()=>e({build:jy}),setAttributeAssignment:(n,s)=>{e(r=>{const a={...r.build.attributeAssignments.assignments},i={...r.build.attributeAssignments},l=a[n];return l&&(i[l]=Math.max(0,i[l]-5)),a[n]=s,i[s]+=5,{build:{...r.build,attributeAssignments:{...r.build.attributeAssignments,...i,assignments:a}}}})},clearAttributeAssignment:n=>{e(s=>{const r={...s.build.attributeAssignments.assignments},a={...s.build.attributeAssignments},i=r[n];return i&&(a[i]=Math.max(0,a[i]-5),delete r[n]),{build:{...s.build,attributeAssignments:{...s.build.attributeAssignments,...a,assignments:r}}}})},clearAllAttributeAssignments:()=>{e(n=>({build:{...n.build,attributeAssignments:{health:0,stamina:0,magicka:0,level:n.build.attributeAssignments.level,assignments:{}}}}))},updateAttributeLevel:n=>{e(s=>({build:{...s.build,attributeAssignments:{...s.build.attributeAssignments,level:Math.max(1,n)}}}))}}));function gt(){const e=Hr(F=>F.build.skills.major),t=Hr(F=>F.build.skills.minor),n=Hr(F=>F.build),s=Hr(F=>F.updateBuild),r=Hr(F=>F.resetBuild),a=F=>(e==null?void 0:e.includes(F))??!1,i=F=>(t==null?void 0:t.includes(F))??!1;return{build:n,majorSkills:e,minorSkills:t,hasMajorSkill:a,hasMinorSkill:i,addMajorSkill:F=>{console.log("addMajorSkill called:",{skillId:F});const Y=e??[],Q=t??[];if(!a(F)&&Y.length<3){const X=Q.filter(ve=>ve!==F),se={major:[...Y,F],minor:X};console.log("addMajorSkill - updating build with new skills:",se),s({skills:se})}else console.log("addMajorSkill - skill already major or limit reached, skipping")},removeMajorSkill:F=>{const Y=e??[],Q=t??[],X=Y.filter(se=>se!==F);s({skills:{major:X,minor:Q}})},addMinorSkill:F=>{const Y=e??[],Q=t??[];if(!i(F)&&Q.length<6){const X=Y.filter(se=>se!==F);s({skills:{major:X,minor:[...Q,F]}})}},removeMinorSkill:F=>{const Y=e??[],X=(t??[]).filter(se=>se!==F);s({skills:{major:Y,minor:X}})},addPerk:(F,Y)=>{var se;console.log("addPerk called:",{skillId:F,perkId:Y});const Q=((se=n==null?void 0:n.perks)==null?void 0:se.selected)??{},X=Q[F]??[];if(X.includes(Y))console.log("addPerk - perk already selected, skipping");else{const ve={...n==null?void 0:n.perks,selected:{...Q,[F]:[...X,Y]}},ue=gu(ve);console.log("addPerk - updating build with new perks:",ve),console.log("addPerk - calculated skill levels:",ue),s({perks:ve,skillLevels:ue})}},removePerk:(F,Y)=>{var ne;const Q=((ne=n==null?void 0:n.perks)==null?void 0:ne.selected)??{},se=(Q[F]??[]).filter(Re=>Re!==Y),ve={...n==null?void 0:n.perks,selected:{...Q,[F]:se}},ue=gu(ve);s({perks:ve,skillLevels:ue})},setPerkRank:(F,Y)=>{var ve;console.log("setPerkRank called:",{perkId:F,rank:Y});const Q=((ve=n==null?void 0:n.perks)==null?void 0:ve.ranks)??{},X={...n==null?void 0:n.perks,ranks:{...Q,[F]:Y}},se=gu(X);console.log("setPerkRank - updating build with new ranks:",X),console.log("setPerkRank - calculated skill levels:",se),s({perks:X,skillLevels:se})},clearSkillPerks:F=>{var Re,pt;const Y=((Re=n==null?void 0:n.perks)==null?void 0:Re.selected)??{},Q=((pt=n==null?void 0:n.perks)==null?void 0:pt.ranks)??{},{[F]:X,...se}=Y,ve={...Q};X&&X.forEach(ds=>{delete ve[ds]});const ue={...n==null?void 0:n.perks,selected:se,ranks:ve},ne=gu(ue);s({perks:ue,skillLevels:ne})},getSkillPerks:F=>{var Y,Q;return((Q=(Y=n==null?void 0:n.perks)==null?void 0:Y.selected)==null?void 0:Q[F])??[]},getPerkRank:F=>{var Y,Q;return((Q=(Y=n==null?void 0:n.perks)==null?void 0:Y.ranks)==null?void 0:Q[F])??0},getSkillLevel:F=>{var Y;return((Y=n==null?void 0:n.skillLevels)==null?void 0:Y[F])??0},addTrait:F=>{const{regular:Y=[],bonus:Q=[]}=(n==null?void 0:n.traits)??{regular:[],bonus:[]},{regular:X=2,bonus:se=1}=(n==null?void 0:n.traitLimits)??{regular:2,bonus:1};Y.length<X?s({traits:{...n==null?void 0:n.traits,regular:[...Y,F]}}):Q.length<se&&s({traits:{...n==null?void 0:n.traits,bonus:[...Q,F]}})},addRegularTrait:F=>{const{regular:Y=[]}=(n==null?void 0:n.traits)??{regular:[]},{regular:Q=2}=(n==null?void 0:n.traitLimits)??{regular:2};Y.length<Q&&s({traits:{...n==null?void 0:n.traits,regular:[...Y,F]}})},addBonusTrait:F=>{const{bonus:Y=[]}=(n==null?void 0:n.traits)??{bonus:[]},{bonus:Q=1}=(n==null?void 0:n.traitLimits)??{bonus:1};Y.length<Q&&s({traits:{...n==null?void 0:n.traits,bonus:[...Y,F]}})},removeTrait:F=>{const{regular:Y=[],bonus:Q=[]}=(n==null?void 0:n.traits)??{regular:[],bonus:[]};s({traits:{regular:Y.filter(X=>X!==F),bonus:Q.filter(X=>X!==F)}})},hasTrait:F=>{var Y,Q,X,se;return(((Q=(Y=n==null?void 0:n.traits)==null?void 0:Y.regular)==null?void 0:Q.includes(F))??!1)||(((se=(X=n==null?void 0:n.traits)==null?void 0:X.bonus)==null?void 0:se.includes(F))??!1)},hasRegularTrait:F=>{var Y,Q;return((Q=(Y=n==null?void 0:n.traits)==null?void 0:Y.regular)==null?void 0:Q.includes(F))??!1},hasBonusTrait:F=>{var Y,Q;return((Q=(Y=n==null?void 0:n.traits)==null?void 0:Y.bonus)==null?void 0:Q.includes(F))??!1},setRace:F=>{s({race:F})},setBirthsign:F=>{s({stone:F})},setStone:F=>{s({stone:F})},setReligion:F=>{s({religion:F})},addEquipment:F=>{const Y=(n==null?void 0:n.equipment)??[];Y.includes(F)||s({equipment:[...Y,F]})},removeEquipment:F=>{const Y=(n==null?void 0:n.equipment)??[];s({equipment:Y.filter(Q=>Q!==F)})},setBuildName:F=>{s({name:F})},setBuildNotes:F=>{s({notes:F})},getDestinyPath:()=>(n==null?void 0:n.destinyPath)??[],setDestinyPath:F=>{s({destinyPath:F})},updateBuild:s,clearBuild:()=>{s({name:"",notes:"",race:null,stone:null,religion:null,skills:{major:[],minor:[]},traits:{regular:[],bonus:[]},perks:{selected:{},ranks:{}},skillLevels:{},destinyPath:[]})},resetBuild:r,getSummary:()=>{var F,Y,Q,X,se,ve,ue,ne,Re;return{name:(n==null?void 0:n.name)||"Unnamed Character",race:(n==null?void 0:n.race)||"Not selected",stone:(n==null?void 0:n.stone)||"Not selected",religion:(n==null?void 0:n.religion)||"Not selected",traitCount:(((Y=(F=n==null?void 0:n.traits)==null?void 0:F.regular)==null?void 0:Y.length)??0)+(((X=(Q=n==null?void 0:n.traits)==null?void 0:Q.bonus)==null?void 0:X.length)??0),majorSkillCount:((ve=(se=n==null?void 0:n.skills)==null?void 0:se.major)==null?void 0:ve.length)??0,minorSkillCount:((ne=(ue=n==null?void 0:n.skills)==null?void 0:ue.minor)==null?void 0:ne.length)??0,equipmentCount:((Re=n==null?void 0:n.equipment)==null?void 0:Re.length)??0}},getRegularTraitLimit:()=>{var F;return((F=n==null?void 0:n.traitLimits)==null?void 0:F.regular)??2},getBonusTraitLimit:()=>{var F;return((F=n==null?void 0:n.traitLimits)==null?void 0:F.bonus)??1},getRegularTraitCount:()=>{var F,Y;return((Y=(F=n==null?void 0:n.traits)==null?void 0:F.regular)==null?void 0:Y.length)??0},getBonusTraitCount:()=>{var F,Y;return((Y=(F=n==null?void 0:n.traits)==null?void 0:F.bonus)==null?void 0:Y.length)??0},canAddRegularTrait:()=>{var F,Y,Q;return(((Y=(F=n==null?void 0:n.traits)==null?void 0:F.regular)==null?void 0:Y.length)??0)<(((Q=n==null?void 0:n.traitLimits)==null?void 0:Q.regular)??2)},canAddBonusTrait:()=>{var F,Y,Q;return(((Y=(F=n==null?void 0:n.traits)==null?void 0:F.bonus)==null?void 0:Y.length)??0)<(((Q=n==null?void 0:n.traitLimits)==null?void 0:Q.bonus)??1)},getTraitType:F=>{var Y,Q,X,se;return(Q=(Y=n==null?void 0:n.traits)==null?void 0:Y.regular)!=null&&Q.includes(F)?"regular":(se=(X=n==null?void 0:n.traits)==null?void 0:X.bonus)!=null&&se.includes(F)?"bonus":null},isAllTraitsFull:()=>{var se,ve,ue,ne,Re,pt;const F=((ve=(se=n==null?void 0:n.traits)==null?void 0:se.regular)==null?void 0:ve.length)??0,Y=((ne=(ue=n==null?void 0:n.traits)==null?void 0:ue.bonus)==null?void 0:ne.length)??0,Q=((Re=n==null?void 0:n.traitLimits)==null?void 0:Re.regular)??2,X=((pt=n==null?void 0:n.traitLimits)==null?void 0:pt.bonus)??1;return F>=Q&&Y>=X},addTraitToSlot:(F,Y)=>{if(Y==="regular"){const{regular:Q=[]}=(n==null?void 0:n.traits)??{regular:[]},{regular:X=2}=(n==null?void 0:n.traitLimits)??{regular:2};if(Q.length<X){const{bonus:se=[]}=(n==null?void 0:n.traits)??{bonus:[]},ve=se.filter(ue=>ue!==F);s({traits:{regular:[...Q,F],bonus:ve}})}}else{const{bonus:Q=[]}=(n==null?void 0:n.traits)??{bonus:[]},{bonus:X=1}=(n==null?void 0:n.traitLimits)??{bonus:1};if(Q.length<X){const{regular:se=[]}=(n==null?void 0:n.traits)??{regular:[]},ve=se.filter(ue=>ue!==F);s({traits:{regular:ve,bonus:[...Q,F]}})}}},isSlotAvailable:(F,Y=0)=>{var Q,X,se,ve;return F==="regular"?(((X=(Q=n==null?void 0:n.traits)==null?void 0:Q.regular)==null?void 0:X.length)??0)<=Y:(((ve=(se=n==null?void 0:n.traits)==null?void 0:se.bonus)==null?void 0:ve.length)??0)<=Y}}}function Sy(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Of(...e){return t=>{let n=!1;const s=e.map(r=>{const a=Sy(r,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<s.length;r++){const a=s[r];typeof a=="function"?a():Sy(e[r],null)}}}}function $e(...e){return g.useCallback(Of(...e),e)}function yi(e){const t=lz(e),n=g.forwardRef((s,r)=>{const{children:a,...i}=s,l=g.Children.toArray(a),c=l.find(uz);if(c){const u=c.props.children,d=l.map(f=>f===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:f);return o.jsx(t,{...i,ref:r,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return o.jsx(t,{...i,ref:r,children:a})});return n.displayName=`${e}.Slot`,n}var iz=yi("Slot");function lz(e){const t=g.forwardRef((n,s)=>{const{children:r,...a}=n;if(g.isValidElement(r)){const i=fz(r),l=dz(a,r.props);return r.type!==g.Fragment&&(l.ref=s?Of(s,i):i),g.cloneElement(r,l)}return g.Children.count(r)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var nj=Symbol("radix.slottable");function cz(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=nj,t}function uz(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===nj}function dz(e,t){const n={...t};for(const s in t){const r=e[s],a=t[s];/^on[A-Z]/.test(s)?r&&a?n[s]=(...l)=>{const c=a(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...a}:s==="className"&&(n[s]=[r,a].filter(Boolean).join(" "))}return{...e,...n}}function fz(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function sj(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=sj(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function rj(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=sj(e))&&(s&&(s+=" "),s+=t);return s}const ky=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Cy=rj,qi=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return Cy(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:a}=t,i=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],f=a==null?void 0:a[u];if(d===null)return null;const m=ky(d)||ky(f);return r[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:f,className:m,...h}=d;return Object.entries(h).every(p=>{let[v,w]=p;return Array.isArray(w)?w.includes({...a,...l}[v]):{...a,...l}[v]===w})?[...u,f,m]:u},[]);return Cy(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)},bx="-",mz=e=>{const t=gz(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(bx);return l[0]===""&&l.length!==1&&l.shift(),aj(l,t)||hz(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},aj=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?aj(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const a=e.join(bx);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},Ey=/^\[(.+)\]$/,hz=e=>{if(Ey.test(e)){const t=Ey.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},gz=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)bg(n[r],s,r,t);return s},bg=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const a=r===""?t:_y(t,r);a.classGroupId=n;return}if(typeof r=="function"){if(pz(r)){bg(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([a,i])=>{bg(i,_y(t,a),n,s)})})},_y=(e,t)=>{let n=e;return t.split(bx).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},pz=e=>e.isThemeGetter,xz=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(a,i)=>{n.set(a,i),t++,t>e&&(t=0,s=n,n=new Map)};return{get(a){let i=n.get(a);if(i!==void 0)return i;if((i=s.get(a))!==void 0)return r(a,i),i},set(a,i){n.has(a)?n.set(a,i):r(a,i)}}},wg="!",Ng=":",vz=Ng.length,yz=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=r=>{const a=[];let i=0,l=0,c=0,u;for(let p=0;p<r.length;p++){let v=r[p];if(i===0&&l===0){if(v===Ng){a.push(r.slice(c,p)),c=p+vz;continue}if(v==="/"){u=p;continue}}v==="["?i++:v==="]"?i--:v==="("?l++:v===")"&&l--}const d=a.length===0?r:r.substring(c),f=bz(d),m=f!==d,h=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:h}};if(t){const r=t+Ng,a=s;s=i=>i.startsWith(r)?a(i.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=a=>n({className:a,parseClassName:r})}return s},bz=e=>e.endsWith(wg)?e.substring(0,e.length-1):e.startsWith(wg)?e.substring(1):e,wz=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let a=[];return s.forEach(i=>{i[0]==="["||t[i]?(r.push(...a.sort(),i),a=[]):a.push(i)}),r.push(...a.sort()),r}},Nz=e=>({cache:xz(e.cacheSize),parseClassName:yz(e),sortModifiers:wz(e),...mz(e)}),jz=/\s+/,Sz=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:a}=t,i=[],l=e.trim().split(jz);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:f,modifiers:m,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:v}=n(d);if(f){c=d+(c.length>0?" "+c:c);continue}let w=!!v,x=s(w?p.substring(0,v):p);if(!x){if(!w){c=d+(c.length>0?" "+c:c);continue}if(x=s(p),!x){c=d+(c.length>0?" "+c:c);continue}w=!1}const b=a(m).join(":"),y=h?b+wg:b,N=y+x;if(i.includes(N))continue;i.push(N);const j=r(x,w);for(let S=0;S<j.length;++S){const k=j[S];i.push(y+k)}c=d+(c.length>0?" "+c:c)}return c};function kz(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=oj(t))&&(s&&(s+=" "),s+=n);return s}const oj=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=oj(e[s]))&&(n&&(n+=" "),n+=t);return n};function Cz(e,...t){let n,s,r,a=i;function i(c){const u=t.reduce((d,f)=>f(d),e());return n=Nz(u),s=n.cache.get,r=n.cache.set,a=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=Sz(c,n);return r(c,d),d}return function(){return a(kz.apply(null,arguments))}}const jt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},ij=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,lj=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ez=/^\d+\/\d+$/,_z=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Az=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Tz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Mz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Rz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Co=e=>Ez.test(e),je=e=>!!e&&!Number.isNaN(Number(e)),Rr=e=>!!e&&Number.isInteger(Number(e)),Vm=e=>e.endsWith("%")&&je(e.slice(0,-1)),Xs=e=>_z.test(e),Dz=()=>!0,zz=e=>Az.test(e)&&!Tz.test(e),cj=()=>!1,Lz=e=>Mz.test(e),$z=e=>Rz.test(e),Pz=e=>!re(e)&&!ae(e),Oz=e=>Gi(e,fj,cj),re=e=>ij.test(e),wa=e=>Gi(e,mj,zz),qm=e=>Gi(e,Fz,je),Ay=e=>Gi(e,uj,cj),Bz=e=>Gi(e,dj,$z),pu=e=>Gi(e,hj,Lz),ae=e=>lj.test(e),dl=e=>Zi(e,mj),Iz=e=>Zi(e,Vz),Ty=e=>Zi(e,uj),Hz=e=>Zi(e,fj),Uz=e=>Zi(e,dj),xu=e=>Zi(e,hj,!0),Gi=(e,t,n)=>{const s=ij.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},Zi=(e,t,n=!1)=>{const s=lj.exec(e);return s?s[1]?t(s[1]):n:!1},uj=e=>e==="position"||e==="percentage",dj=e=>e==="image"||e==="url",fj=e=>e==="length"||e==="size"||e==="bg-size",mj=e=>e==="length",Fz=e=>e==="number",Vz=e=>e==="family-name",hj=e=>e==="shadow",qz=()=>{const e=jt("color"),t=jt("font"),n=jt("text"),s=jt("font-weight"),r=jt("tracking"),a=jt("leading"),i=jt("breakpoint"),l=jt("container"),c=jt("spacing"),u=jt("radius"),d=jt("shadow"),f=jt("inset-shadow"),m=jt("text-shadow"),h=jt("drop-shadow"),p=jt("blur"),v=jt("perspective"),w=jt("aspect"),x=jt("ease"),b=jt("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...N(),ae,re],S=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],E=()=>[ae,re,c],C=()=>[Co,"full","auto",...E()],_=()=>[Rr,"none","subgrid",ae,re],P=()=>["auto",{span:["full",Rr,ae,re]},Rr,ae,re],O=()=>[Rr,"auto",ae,re],$=()=>["auto","min","max","fr",ae,re],T=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],z=()=>["start","end","center","stretch","center-safe","end-safe"],A=()=>["auto",...E()],D=()=>[Co,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],M=()=>[e,ae,re],R=()=>[...N(),Ty,Ay,{position:[ae,re]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",Hz,Oz,{size:[ae,re]}],I=()=>[Vm,dl,wa],V=()=>["","none","full",u,ae,re],G=()=>["",je,dl,wa],J=()=>["solid","dashed","dotted","double"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[je,Vm,Ty,Ay],pe=()=>["","none",p,ae,re],fe=()=>["none",je,ae,re],we=()=>["none",je,ae,re],F=()=>[je,ae,re],Y=()=>[Co,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Xs],breakpoint:[Xs],color:[Dz],container:[Xs],"drop-shadow":[Xs],ease:["in","out","in-out"],font:[Pz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Xs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Xs],shadow:[Xs],spacing:["px",je],text:[Xs],"text-shadow":[Xs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Co,re,ae,w]}],container:["container"],columns:[{columns:[je,re,ae,l]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[Rr,"auto",ae,re]}],basis:[{basis:[Co,"full","auto",l,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[je,Co,"auto","initial","none",re]}],grow:[{grow:["",je,ae,re]}],shrink:[{shrink:["",je,ae,re]}],order:[{order:[Rr,"first","last","none",ae,re]}],"grid-cols":[{"grid-cols":_()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":_()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...T(),"normal"]}],"justify-items":[{"justify-items":[...z(),"normal"]}],"justify-self":[{"justify-self":["auto",...z()]}],"align-content":[{content:["normal",...T()]}],"align-items":[{items:[...z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...z(),{baseline:["","last"]}]}],"place-content":[{"place-content":T()}],"place-items":[{"place-items":[...z(),"baseline"]}],"place-self":[{"place-self":["auto",...z()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:A()}],mx:[{mx:A()}],my:[{my:A()}],ms:[{ms:A()}],me:[{me:A()}],mt:[{mt:A()}],mr:[{mr:A()}],mb:[{mb:A()}],ml:[{ml:A()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[l,"screen",...D()]}],"min-w":[{"min-w":[l,"screen","none",...D()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",n,dl,wa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ae,qm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Vm,re]}],"font-family":[{font:[Iz,re,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ae,re]}],"line-clamp":[{"line-clamp":[je,"none",ae,qm]}],leading:[{leading:[a,...E()]}],"list-image":[{"list-image":["none",ae,re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ae,re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[je,"from-font","auto",ae,wa]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[je,"auto",ae,re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae,re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae,re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Rr,ae,re],radial:["",ae,re],conic:[Rr,ae,re]},Uz,Bz]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:V()}],"rounded-s":[{"rounded-s":V()}],"rounded-e":[{"rounded-e":V()}],"rounded-t":[{"rounded-t":V()}],"rounded-r":[{"rounded-r":V()}],"rounded-b":[{"rounded-b":V()}],"rounded-l":[{"rounded-l":V()}],"rounded-ss":[{"rounded-ss":V()}],"rounded-se":[{"rounded-se":V()}],"rounded-ee":[{"rounded-ee":V()}],"rounded-es":[{"rounded-es":V()}],"rounded-tl":[{"rounded-tl":V()}],"rounded-tr":[{"rounded-tr":V()}],"rounded-br":[{"rounded-br":V()}],"rounded-bl":[{"rounded-bl":V()}],"border-w":[{border:G()}],"border-w-x":[{"border-x":G()}],"border-w-y":[{"border-y":G()}],"border-w-s":[{"border-s":G()}],"border-w-e":[{"border-e":G()}],"border-w-t":[{"border-t":G()}],"border-w-r":[{"border-r":G()}],"border-w-b":[{"border-b":G()}],"border-w-l":[{"border-l":G()}],"divide-x":[{"divide-x":G()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":G()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[je,ae,re]}],"outline-w":[{outline:["",je,dl,wa]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",d,xu,pu]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",f,xu,pu]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[je,wa]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":G()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",m,xu,pu]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[je,ae,re]}],"mix-blend":[{"mix-blend":[...oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[je]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[ae,re]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[je]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ae,re]}],filter:[{filter:["","none",ae,re]}],blur:[{blur:pe()}],brightness:[{brightness:[je,ae,re]}],contrast:[{contrast:[je,ae,re]}],"drop-shadow":[{"drop-shadow":["","none",h,xu,pu]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",je,ae,re]}],"hue-rotate":[{"hue-rotate":[je,ae,re]}],invert:[{invert:["",je,ae,re]}],saturate:[{saturate:[je,ae,re]}],sepia:[{sepia:["",je,ae,re]}],"backdrop-filter":[{"backdrop-filter":["","none",ae,re]}],"backdrop-blur":[{"backdrop-blur":pe()}],"backdrop-brightness":[{"backdrop-brightness":[je,ae,re]}],"backdrop-contrast":[{"backdrop-contrast":[je,ae,re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",je,ae,re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[je,ae,re]}],"backdrop-invert":[{"backdrop-invert":["",je,ae,re]}],"backdrop-opacity":[{"backdrop-opacity":[je,ae,re]}],"backdrop-saturate":[{"backdrop-saturate":[je,ae,re]}],"backdrop-sepia":[{"backdrop-sepia":["",je,ae,re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ae,re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[je,"initial",ae,re]}],ease:[{ease:["linear","initial",x,ae,re]}],delay:[{delay:[je,ae,re]}],animate:[{animate:["none",b,ae,re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,ae,re]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:we()}],"scale-x":[{"scale-x":we()}],"scale-y":[{"scale-y":we()}],"scale-z":[{"scale-z":we()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[ae,re,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Y()}],"translate-x":[{"translate-x":Y()}],"translate-y":[{"translate-y":Y()}],"translate-z":[{"translate-z":Y()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae,re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae,re]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[je,dl,wa,qm]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Gz=Cz(qz);function U(...e){return Gz(rj(e))}const Zz=qi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-base font-semibold transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-5 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-3 has-[>svg]:px-4",sm:"h-9 rounded-md gap-1.5 px-4 has-[>svg]:px-3.5 text-sm",lg:"h-12 rounded-md px-8 has-[>svg]:px-6 text-lg",icon:"size-11"}},defaultVariants:{variant:"default",size:"default"}});function W({className:e,variant:t,size:n,asChild:s=!1,...r}){const a=s?iz:"button";return o.jsx(a,{"data-slot":"button",className:U(Zz({variant:t,size:n,className:e})),...r})}function te(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function Yz(e,t){const n=g.createContext(t),s=a=>{const{children:i,...l}=a,c=g.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:i})};s.displayName=e+"Provider";function r(a){const i=g.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[s,r]}function un(e,t=[]){let n=[];function s(a,i){const l=g.createContext(i),c=n.length;n=[...n,i];const u=f=>{var x;const{scope:m,children:h,...p}=f,v=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,w=g.useMemo(()=>p,Object.values(p));return o.jsx(v.Provider,{value:w,children:h})};u.displayName=a+"Provider";function d(f,m){var v;const h=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,p=g.useContext(h);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,d]}const r=()=>{const a=n.map(i=>g.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return r.scopeName=e,[s,Xz(r,...t)]}function Xz(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const i=s.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var Ds=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},Wz=_N[" useId ".trim().toString()]||(()=>{}),Kz=0;function dr(e){const[t,n]=g.useState(Wz());return Ds(()=>{n(s=>s??String(Kz++))},[e]),t?`radix-${t}`:""}var Qz=_N[" useInsertionEffect ".trim().toString()]||Ds;function Yn({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[r,a,i]=Jz({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:r;{const d=g.useRef(e!==void 0);g.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const u=g.useCallback(d=>{var f;if(l){const m=e5(d)?d(e):d;m!==e&&((f=i.current)==null||f.call(i,m))}else a(d)},[l,e,a,i]);return[c,u]}function Jz({defaultProp:e,onChange:t}){const[n,s]=g.useState(e),r=g.useRef(n),a=g.useRef(t);return Qz(()=>{a.current=t},[t]),g.useEffect(()=>{var i;r.current!==n&&((i=a.current)==null||i.call(a,n),r.current=n)},[n,r]),[n,s,a]}function e5(e){return typeof e=="function"}var t5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=t5.reduce((e,t)=>{const n=yi(`Primitive.${t}`),s=g.forwardRef((r,a)=>{const{asChild:i,...l}=r,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function gj(e,t){e&&Pf.flushSync(()=>e.dispatchEvent(t))}function Ht(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function n5(e,t=globalThis==null?void 0:globalThis.document){const n=Ht(e);g.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var s5="DismissableLayer",jg="dismissableLayer.update",r5="dismissableLayer.pointerDownOutside",a5="dismissableLayer.focusOutside",My,pj=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$c=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,u=g.useContext(pj),[d,f]=g.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=g.useState({}),p=$e(t,k=>f(k)),v=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(w),b=d?v.indexOf(d):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,N=b>=x,j=l5(k=>{const E=k.target,C=[...u.branches].some(_=>_.contains(E));!N||C||(r==null||r(k),i==null||i(k),k.defaultPrevented||l==null||l())},m),S=c5(k=>{const E=k.target;[...u.branches].some(_=>_.contains(E))||(a==null||a(k),i==null||i(k),k.defaultPrevented||l==null||l())},m);return n5(k=>{b===u.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),g.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(My=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Ry(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=My)}},[d,m,n,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Ry())},[d,u]),g.useEffect(()=>{const k=()=>h({});return document.addEventListener(jg,k),()=>document.removeEventListener(jg,k)},[]),o.jsx(xe.div,{...c,ref:p,style:{pointerEvents:y?N?"auto":"none":void 0,...e.style},onFocusCapture:te(e.onFocusCapture,S.onFocusCapture),onBlurCapture:te(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:te(e.onPointerDownCapture,j.onPointerDownCapture)})});$c.displayName=s5;var o5="DismissableLayerBranch",i5=g.forwardRef((e,t)=>{const n=g.useContext(pj),s=g.useRef(null),r=$e(t,s);return g.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(xe.div,{...e,ref:r})});i5.displayName=o5;function l5(e,t=globalThis==null?void 0:globalThis.document){const n=Ht(e),s=g.useRef(!1),r=g.useRef(()=>{});return g.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){xj(r5,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=c,t.addEventListener("click",r.current,{once:!0})):c()}else t.removeEventListener("click",r.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function c5(e,t=globalThis==null?void 0:globalThis.document){const n=Ht(e),s=g.useRef(!1);return g.useEffect(()=>{const r=a=>{a.target&&!s.current&&xj(a5,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Ry(){const e=new CustomEvent(jg);document.dispatchEvent(e)}function xj(e,t,n,{discrete:s}){const r=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?gj(r,a):r.dispatchEvent(a)}var Gm="focusScope.autoFocusOnMount",Zm="focusScope.autoFocusOnUnmount",Dy={bubbles:!1,cancelable:!0},u5="FocusScope",wx=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...i}=e,[l,c]=g.useState(null),u=Ht(r),d=Ht(a),f=g.useRef(null),m=$e(t,v=>c(v)),h=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(s){let v=function(y){if(h.paused||!l)return;const N=y.target;l.contains(N)?f.current=N:Lr(f.current,{select:!0})},w=function(y){if(h.paused||!l)return;const N=y.relatedTarget;N!==null&&(l.contains(N)||Lr(f.current,{select:!0}))},x=function(y){if(document.activeElement===document.body)for(const j of y)j.removedNodes.length>0&&Lr(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const b=new MutationObserver(x);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),b.disconnect()}}},[s,l,h.paused]),g.useEffect(()=>{if(l){Ly.add(h);const v=document.activeElement;if(!l.contains(v)){const x=new CustomEvent(Gm,Dy);l.addEventListener(Gm,u),l.dispatchEvent(x),x.defaultPrevented||(d5(p5(vj(l)),{select:!0}),document.activeElement===v&&Lr(l))}return()=>{l.removeEventListener(Gm,u),setTimeout(()=>{const x=new CustomEvent(Zm,Dy);l.addEventListener(Zm,d),l.dispatchEvent(x),x.defaultPrevented||Lr(v??document.body,{select:!0}),l.removeEventListener(Zm,d),Ly.remove(h)},0)}}},[l,u,d,h]);const p=g.useCallback(v=>{if(!n&&!s||h.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(w&&x){const b=v.currentTarget,[y,N]=f5(b);y&&N?!v.shiftKey&&x===N?(v.preventDefault(),n&&Lr(y,{select:!0})):v.shiftKey&&x===y&&(v.preventDefault(),n&&Lr(N,{select:!0})):x===b&&v.preventDefault()}},[n,s,h.paused]);return o.jsx(xe.div,{tabIndex:-1,...i,ref:m,onKeyDown:p})});wx.displayName=u5;function d5(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Lr(s,{select:t}),document.activeElement!==n)return}function f5(e){const t=vj(e),n=zy(t,e),s=zy(t.reverse(),e);return[n,s]}function vj(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function zy(e,t){for(const n of e)if(!m5(n,{upTo:t}))return n}function m5(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function h5(e){return e instanceof HTMLInputElement&&"select"in e}function Lr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&h5(e)&&t&&e.select()}}var Ly=g5();function g5(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=$y(e,t),e.unshift(t)},remove(t){var n;e=$y(e,t),(n=e[0])==null||n.resume()}}}function $y(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function p5(e){return e.filter(t=>t.tagName!=="A")}var x5="Portal",Nx=g.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[r,a]=g.useState(!1);Ds(()=>a(!0),[]);const i=n||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?ez.createPortal(o.jsx(xe.div,{...s,ref:t}),i):null});Nx.displayName=x5;function v5(e,t){return g.useReducer((n,s)=>t[n][s]??n,e)}var qt=e=>{const{present:t,children:n}=e,s=y5(t),r=typeof n=="function"?n({present:s.isPresent}):g.Children.only(n),a=$e(s.ref,b5(r));return typeof n=="function"||s.isPresent?g.cloneElement(r,{ref:a}):null};qt.displayName="Presence";function y5(e){const[t,n]=g.useState(),s=g.useRef(null),r=g.useRef(e),a=g.useRef("none"),i=e?"mounted":"unmounted",[l,c]=v5(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=vu(s.current);a.current=l==="mounted"?u:"none"},[l]),Ds(()=>{const u=s.current,d=r.current;if(d!==e){const m=a.current,h=vu(u);e?c("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,c]),Ds(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=h=>{const v=vu(s.current).includes(h.animationName);if(h.target===t&&v&&(c("ANIMATION_END"),!r.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=h=>{h.target===t&&(a.current=vu(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function vu(e){return(e==null?void 0:e.animationName)||"none"}function b5(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ym=0;function yj(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Py()),document.body.insertAdjacentElement("beforeend",e[1]??Py()),Ym++,()=>{Ym===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ym--}},[])}function Py(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var bs=function(){return bs=Object.assign||function(t){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},bs.apply(this,arguments)};function bj(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}function w5(e,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,a;s<r;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var sd="right-scroll-bar-position",rd="width-before-scroll-bar",N5="with-scroll-bars-hidden",j5="--removed-body-scroll-bar-size";function Xm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function S5(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=t,n.facade}var k5=typeof window<"u"?g.useLayoutEffect:g.useEffect,Oy=new WeakMap;function C5(e,t){var n=S5(null,function(s){return e.forEach(function(r){return Xm(r,s)})});return k5(function(){var s=Oy.get(n);if(s){var r=new Set(s),a=new Set(e),i=n.current;r.forEach(function(l){a.has(l)||Xm(l,null)}),a.forEach(function(l){r.has(l)||Xm(l,i)})}Oy.set(n,e)},[e]),n}function E5(e){return e}function _5(e,t){t===void 0&&(t=E5);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,s);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(s=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){s=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(a),i=n}var c=function(){var d=i;i=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return r}function A5(e){e===void 0&&(e={});var t=_5(null);return t.options=bs({async:!0,ssr:!1},e),t}var wj=function(e){var t=e.sideCar,n=bj(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return g.createElement(s,bs({},n))};wj.isSideCarExport=!0;function T5(e,t){return e.useMedium(t),wj}var Nj=A5(),Wm=function(){},Bf=g.forwardRef(function(e,t){var n=g.useRef(null),s=g.useState({onScrollCapture:Wm,onWheelCapture:Wm,onTouchMoveCapture:Wm}),r=s[0],a=s[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,m=e.sideCar,h=e.noRelative,p=e.noIsolation,v=e.inert,w=e.allowPinchZoom,x=e.as,b=x===void 0?"div":x,y=e.gapMode,N=bj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,S=C5([n,t]),k=bs(bs({},N),r);return g.createElement(g.Fragment,null,d&&g.createElement(j,{sideCar:Nj,removeScrollBar:u,shards:f,noRelative:h,noIsolation:p,inert:v,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:y}),i?g.cloneElement(g.Children.only(l),bs(bs({},k),{ref:S})):g.createElement(b,bs({},k,{className:c,ref:S}),l))});Bf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bf.classNames={fullWidth:rd,zeroRight:sd};var M5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function R5(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=M5();return t&&e.setAttribute("nonce",t),e}function D5(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function z5(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var L5=function(){var e=0,t=null;return{add:function(n){e==0&&(t=R5())&&(D5(t,n),z5(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$5=function(){var e=L5();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},jj=function(){var e=$5(),t=function(n){var s=n.styles,r=n.dynamic;return e(s,r),null};return t},P5={left:0,top:0,right:0,gap:0},Km=function(e){return parseInt(e||"",10)||0},O5=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[Km(n),Km(s),Km(r)]},B5=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return P5;var t=O5(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},I5=jj(),ti="data-scroll-locked",H5=function(e,t,n,s){var r=e.left,a=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(N5,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(ti,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sd,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(rd,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(sd," .").concat(sd,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(rd," .").concat(rd,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(ti,`] {
    `).concat(j5,": ").concat(l,`px;
  }
`)},By=function(){var e=parseInt(document.body.getAttribute(ti)||"0",10);return isFinite(e)?e:0},U5=function(){g.useEffect(function(){return document.body.setAttribute(ti,(By()+1).toString()),function(){var e=By()-1;e<=0?document.body.removeAttribute(ti):document.body.setAttribute(ti,e.toString())}},[])},F5=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,r=s===void 0?"margin":s;U5();var a=g.useMemo(function(){return B5(r)},[r]);return g.createElement(I5,{styles:H5(a,!t,r,n?"":"!important")})},Sg=!1;if(typeof window<"u")try{var yu=Object.defineProperty({},"passive",{get:function(){return Sg=!0,!0}});window.addEventListener("test",yu,yu),window.removeEventListener("test",yu,yu)}catch{Sg=!1}var Eo=Sg?{passive:!1}:!1,V5=function(e){return e.tagName==="TEXTAREA"},Sj=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!V5(e)&&n[t]==="visible")},q5=function(e){return Sj(e,"overflowY")},G5=function(e){return Sj(e,"overflowX")},Iy=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=kj(e,s);if(r){var a=Cj(e,s),i=a[1],l=a[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},Z5=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},Y5=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},kj=function(e,t){return e==="v"?q5(t):G5(t)},Cj=function(e,t){return e==="v"?Z5(t):Y5(t)},X5=function(e,t){return e==="h"&&t==="rtl"?-1:1},W5=function(e,t,n,s,r){var a=X5(e,window.getComputedStyle(t).direction),i=a*s,l=n.target,c=t.contains(l),u=!1,d=i>0,f=0,m=0;do{if(!l)break;var h=Cj(e,l),p=h[0],v=h[1],w=h[2],x=v-w-a*p;(p||x)&&kj(e,l)&&(f+=x,m+=p);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(f)<1||!d&&Math.abs(m)<1)&&(u=!0),u},bu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Hy=function(e){return[e.deltaX,e.deltaY]},Uy=function(e){return e&&"current"in e?e.current:e},K5=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Q5=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},J5=0,_o=[];function eL(e){var t=g.useRef([]),n=g.useRef([0,0]),s=g.useRef(),r=g.useState(J5++)[0],a=g.useState(jj)[0],i=g.useRef(e);g.useEffect(function(){i.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var v=w5([e.lockRef.current],(e.shards||[]).map(Uy),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var x=bu(v),b=n.current,y="deltaX"in v?v.deltaX:b[0]-x[0],N="deltaY"in v?v.deltaY:b[1]-x[1],j,S=v.target,k=Math.abs(y)>Math.abs(N)?"h":"v";if("touches"in v&&k==="h"&&S.type==="range")return!1;var E=Iy(k,S);if(!E)return!0;if(E?j=k:(j=k==="v"?"h":"v",E=Iy(k,S)),!E)return!1;if(!s.current&&"changedTouches"in v&&(y||N)&&(s.current=j),!j)return!0;var C=s.current||j;return W5(C,w,v,C==="h"?y:N)},[]),c=g.useCallback(function(v){var w=v;if(!(!_o.length||_o[_o.length-1]!==a)){var x="deltaY"in w?Hy(w):bu(w),b=t.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&K5(j.delta,x)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var y=(i.current.shards||[]).map(Uy).filter(Boolean).filter(function(j){return j.contains(w.target)}),N=y.length>0?l(w,y[0]):!i.current.noIsolation;N&&w.cancelable&&w.preventDefault()}}},[]),u=g.useCallback(function(v,w,x,b){var y={name:v,delta:w,target:x,should:b,shadowParent:tL(x)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(N){return N!==y})},1)},[]),d=g.useCallback(function(v){n.current=bu(v),s.current=void 0},[]),f=g.useCallback(function(v){u(v.type,Hy(v),v.target,l(v,e.lockRef.current))},[]),m=g.useCallback(function(v){u(v.type,bu(v),v.target,l(v,e.lockRef.current))},[]);g.useEffect(function(){return _o.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Eo),document.addEventListener("touchmove",c,Eo),document.addEventListener("touchstart",d,Eo),function(){_o=_o.filter(function(v){return v!==a}),document.removeEventListener("wheel",c,Eo),document.removeEventListener("touchmove",c,Eo),document.removeEventListener("touchstart",d,Eo)}},[]);var h=e.removeScrollBar,p=e.inert;return g.createElement(g.Fragment,null,p?g.createElement(a,{styles:Q5(r)}):null,h?g.createElement(F5,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function tL(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const nL=T5(Nj,eL);var jx=g.forwardRef(function(e,t){return g.createElement(Bf,bs({},e,{ref:t,sideCar:nL}))});jx.classNames=Bf.classNames;var sL=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ao=new WeakMap,wu=new WeakMap,Nu={},Qm=0,Ej=function(e){return e&&(e.host||Ej(e.parentNode))},rL=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=Ej(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},aL=function(e,t,n,s){var r=rL(t,Array.isArray(e)?e:[e]);Nu[n]||(Nu[n]=new WeakMap);var a=Nu[n],i=[],l=new Set,c=new Set(r),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};r.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var h=m.getAttribute(s),p=h!==null&&h!=="false",v=(Ao.get(m)||0)+1,w=(a.get(m)||0)+1;Ao.set(m,v),a.set(m,w),i.push(m),v===1&&p&&wu.set(m,!0),w===1&&m.setAttribute(n,"true"),p||m.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(t),l.clear(),Qm++,function(){i.forEach(function(f){var m=Ao.get(f)-1,h=a.get(f)-1;Ao.set(f,m),a.set(f,h),m||(wu.has(f)||f.removeAttribute(s),wu.delete(f)),h||f.removeAttribute(n)}),Qm--,Qm||(Ao=new WeakMap,Ao=new WeakMap,wu=new WeakMap,Nu={})}},_j=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),r=sL(e);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),aL(s,r,n,"aria-hidden")):function(){return null}},If="Dialog",[Aj,aee]=un(If),[oL,is]=Aj(If),Tj=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:r,onOpenChange:a,modal:i=!0}=e,l=g.useRef(null),c=g.useRef(null),[u,d]=Yn({prop:s,defaultProp:r??!1,onChange:a,caller:If});return o.jsx(oL,{scope:t,triggerRef:l,contentRef:c,contentId:dr(),titleId:dr(),descriptionId:dr(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:i,children:n})};Tj.displayName=If;var Mj="DialogTrigger",Rj=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=is(Mj,n),a=$e(t,r.triggerRef);return o.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Cx(r.open),...s,ref:a,onClick:te(e.onClick,r.onOpenToggle)})});Rj.displayName=Mj;var Sx="DialogPortal",[iL,Dj]=Aj(Sx,{forceMount:void 0}),zj=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:r}=e,a=is(Sx,t);return o.jsx(iL,{scope:t,forceMount:n,children:g.Children.map(s,i=>o.jsx(qt,{present:n||a.open,children:o.jsx(Nx,{asChild:!0,container:r,children:i})}))})};zj.displayName=Sx;var Ed="DialogOverlay",Lj=g.forwardRef((e,t)=>{const n=Dj(Ed,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,a=is(Ed,e.__scopeDialog);return a.modal?o.jsx(qt,{present:s||a.open,children:o.jsx(cL,{...r,ref:t})}):null});Lj.displayName=Ed;var lL=yi("DialogOverlay.RemoveScroll"),cL=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=is(Ed,n);return o.jsx(jx,{as:lL,allowPinchZoom:!0,shards:[r.contentRef],children:o.jsx(xe.div,{"data-state":Cx(r.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Za="DialogContent",$j=g.forwardRef((e,t)=>{const n=Dj(Za,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,a=is(Za,e.__scopeDialog);return o.jsx(qt,{present:s||a.open,children:a.modal?o.jsx(uL,{...r,ref:t}):o.jsx(dL,{...r,ref:t})})});$j.displayName=Za;var uL=g.forwardRef((e,t)=>{const n=is(Za,e.__scopeDialog),s=g.useRef(null),r=$e(t,n.contentRef,s);return g.useEffect(()=>{const a=s.current;if(a)return _j(a)},[]),o.jsx(Pj,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:te(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:te(e.onFocusOutside,a=>a.preventDefault())})}),dL=g.forwardRef((e,t)=>{const n=is(Za,e.__scopeDialog),s=g.useRef(!1),r=g.useRef(!1);return o.jsx(Pj,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&r.current&&a.preventDefault()}})}),Pj=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:a,...i}=e,l=is(Za,n),c=g.useRef(null),u=$e(t,c);return yj(),o.jsxs(o.Fragment,{children:[o.jsx(wx,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:a,children:o.jsx($c,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Cx(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(fL,{titleId:l.titleId}),o.jsx(hL,{contentRef:c,descriptionId:l.descriptionId})]})]})}),kx="DialogTitle",Oj=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=is(kx,n);return o.jsx(xe.h2,{id:r.titleId,...s,ref:t})});Oj.displayName=kx;var Bj="DialogDescription",Ij=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=is(Bj,n);return o.jsx(xe.p,{id:r.descriptionId,...s,ref:t})});Ij.displayName=Bj;var Hj="DialogClose",Uj=g.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=is(Hj,n);return o.jsx(xe.button,{type:"button",...s,ref:t,onClick:te(e.onClick,()=>r.onOpenChange(!1))})});Uj.displayName=Hj;function Cx(e){return e?"open":"closed"}var Fj="DialogTitleWarning",[oee,Vj]=Yz(Fj,{contentName:Za,titleName:kx,docsSlug:"dialog"}),fL=({titleId:e})=>{const t=Vj(Fj),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},mL="DialogDescriptionWarning",hL=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Vj(mL).contentName}}.`;return g.useEffect(()=>{var a;const r=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},qj=Tj,gL=Rj,Gj=zj,Ex=Lj,_x=$j,Ax=Oj,Tx=Ij,pL=Uj;const Mx=qj,Zj=gL,xL=Gj,Yj=g.forwardRef(({className:e,...t},n)=>o.jsx(Ex,{className:U("fixed inset-0 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{zIndex:Dt.MODAL},...t,ref:n}));Yj.displayName=Ex.displayName;const vL=qi("fixed gap-4 border shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Hf=g.forwardRef(({side:e="right",className:t,children:n,...s},r)=>o.jsxs(xL,{children:[o.jsx(Yj,{}),o.jsxs(_x,{ref:r,className:U(vL({side:e}),t),style:{zIndex:Dt.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[n,o.jsxs(pL,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(Vt,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Hf.displayName=_x.displayName;const Rx=({className:e,...t})=>o.jsx("div",{className:U("flex flex-col space-y-2 text-center sm:text-left",e),...t});Rx.displayName="SheetHeader";const Dx=g.forwardRef(({className:e,...t},n)=>o.jsx(Ax,{ref:n,className:U("text-lg font-semibold text-foreground",e),...t}));Dx.displayName=Ax.displayName;const zx=g.forwardRef(({className:e,...t},n)=>o.jsx(Tx,{ref:n,className:U("text-sm text-muted-foreground",e),...t}));zx.displayName=Tx.displayName;function ye({className:e,...t}){return o.jsx("div",{"data-slot":"card",className:U("bg-card text-card-foreground flex flex-col gap-8 rounded-xl border py-8 px-6 shadow-sm",e),...t})}function Me({className:e,action:t,children:n,...s}){return o.jsxs("div",{"data-slot":"card-header",className:U("flex flex-row items-start justify-between space-y-0",e),...s,children:[o.jsx("div",{className:"flex-1 flex flex-col space-y-3",children:n}),t&&o.jsx("div",{className:"ml-4 flex-shrink-0",children:t})]})}function Be({className:e,...t}){return o.jsx("div",{"data-slot":"card-title",className:U("text-xl font-bold leading-none",e),...t})}function Ns({className:e,...t}){return o.jsx("div",{"data-slot":"card-description",className:U("text-base text-muted-foreground",e),...t})}function be({className:e,...t}){return o.jsx("div",{"data-slot":"card-content",className:U("pt-0",e),...t})}const Cs=g.forwardRef(({className:e,type:t,...n},s)=>o.jsx("input",{type:t,className:U("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));Cs.displayName="Input";var yL="Label",Xj=g.forwardRef((e,t)=>o.jsx(xe.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Xj.displayName=yL;const bL=qi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),sc=g.forwardRef(({className:e,children:t,...n},s)=>o.jsx(Xj,{ref:s,className:U(bL(),e),...n,children:t}));sc.displayName="Label";function Wj({name:e,notes:t,onNameChange:n,onNotesChange:s,className:r}){const[a,i]=g.useState(e),[l,c]=g.useState(t),u=g.useCallback((()=>{let h;return p=>{clearTimeout(h),h=setTimeout(()=>{n(p)},300)}})(),[n]),d=g.useCallback((()=>{let h;return p=>{clearTimeout(h),h=setTimeout(()=>{s(p)},300)}})(),[s]);g.useEffect(()=>{i(e)},[e]),g.useEffect(()=>{c(t)},[t]);const f=h=>{const p=h.target.value;i(p),u(p)},m=h=>{const p=h.target.value;c(p),d(p)};return o.jsxs(ye,{className:`mb-6 ${r||""}`,children:[o.jsx(Me,{children:o.jsx(Be,{children:"Basic Information"})}),o.jsxs(be,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(sc,{htmlFor:"name",children:"Character Name"}),o.jsx(Cs,{id:"name",value:a,onChange:f,placeholder:"Enter character name..."})]}),o.jsxs("div",{children:[o.jsx(sc,{htmlFor:"notes",children:"Notes"}),o.jsx("textarea",{id:"notes",value:l,onChange:m,placeholder:"Add character notes, roleplay details, or build explanations...",rows:4,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]})]})}const co=Ps((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(os("data/birthsigns.json"));if(!s.ok)throw new Error(`Failed to fetch birthsigns data: ${s.status}`);const a=(await s.json()).map(i=>{var l,c;return{...i,id:i.edid||i.name.toLowerCase().replace(/\s+/g,"-"),tags:[i.group,...((l=i.powers)==null?void 0:l.map(u=>u.name))||[],...((c=i.stat_modifications)==null?void 0:c.map(u=>u.stat))||[]].filter(u=>!!u)}});e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load birthsigns",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),wL=Object.freeze(Object.defineProperty({__proto__:null,useBirthsignsStore:co},Symbol.toStringTag,{value:"Module"}));function NL(e){var s;const t=[],n=((s=e.description)==null?void 0:s.toLowerCase())||"";return(n.includes("damage")||n.includes("weapon"))&&t.push("Combat"),(n.includes("armor")||n.includes("defense"))&&t.push("Defensive"),(n.includes("magicka")||n.includes("spell")||n.includes("magic"))&&t.push("Magic"),(n.includes("regeneration")||n.includes("health")||n.includes("stamina"))&&t.push("Utility"),(n.includes("detect")||n.includes("stealth"))&&t.push("Stealth"),(n.includes("cost")||n.includes("less"))&&t.push("Cost Reduction"),(n.includes("increase")||n.includes("more"))&&t.push("Enhancement"),n.includes("resistance")&&t.push("Resistance"),[...new Set(t)]}const Yi=Ps((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(os("data/subclasses.json"));if(!s.ok)throw new Error(`Failed to fetch destiny nodes data: ${s.status}`);const a=(await s.json()).map((i,l)=>({...i,id:i.globalFormId||i.edid||`destiny-${l}`,nextBranches:i.nextBranches||[],levelRequirement:i.levelRequirement,lore:i.lore,tags:NL(i),prerequisites:Array.isArray(i.prerequisites)?i.prerequisites:[]}));e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load destiny nodes",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),jL=Object.freeze(Object.defineProperty({__proto__:null,useDestinyNodesStore:Yi},Symbol.toStringTag,{value:"Module"})),ca=Ps((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(os("data/playable-races.json"));if(!s.ok)throw new Error(`Failed to fetch races data: ${s.status}`);const a=(await s.json()).races.map(i=>({...i,id:i.id||i.edid||i.name.toLowerCase().replace(/\s+/g,"-"),tags:[i.category,...i.keywords||[]].filter(l=>!!l),name:i.name,edid:i.edid,description:i.description,category:i.category,source:i.source,startingStats:i.startingStats,physicalAttributes:i.physicalAttributes,skillBonuses:i.skillBonuses,racialSpells:i.racialSpells,keywords:i.keywords,flags:i.flags,regeneration:i.regeneration,combat:i.combat}));e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load races",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),SL=Object.freeze(Object.defineProperty({__proto__:null,useRacesStore:ca},Symbol.toStringTag,{value:"Module"})),kL={SHOW_FAVORED_RACES:!1,ENABLE_RACE_AUTOCOMPLETE:!1,SHOW_RACE_FILTERS:!1};function CL(e){return kL[e]}function Yt(){return CL("SHOW_FAVORED_RACES")}const Xi=Ps((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(os("data/wintersun-religion-docs.json"));if(!s.ok)throw new Error(`Failed to fetch religions data: ${s.status}`);const a=(await s.json()).flatMap(i=>i.deities.map(l=>({...l,id:l.id||l.name,pantheon:i.type,type:l.type||i.type,tags:[i.type,...Yt()?l.favoredRaces||[]:[],...l.tags||[]].filter(Boolean)})));e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load religions",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),EL=Object.freeze(Object.defineProperty({__proto__:null,useReligionsStore:Xi},Symbol.toStringTag,{value:"Module"})),uo=Ps((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(os("data/skills.json"));if(!s.ok)throw new Error(`Failed to fetch skills data: ${s.status}`);const a=(await s.json()).skills.map(i=>({...i,id:i.id||i.edid||i.name.toLowerCase().replace(/\s+/g,"-"),tags:[...i.metaTags||[],i.category].filter(l=>!!l)}));e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load skills",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),_L=Object.freeze(Object.defineProperty({__proto__:null,useSkillsStore:uo},Symbol.toStringTag,{value:"Module"})),fo=Ps((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const s=await fetch(os("data/traits.json"));if(!s.ok)throw new Error(`Failed to fetch traits data: ${s.status}`);const a=(await s.json()).traits.map(i=>{var l;return{...i,id:i.id||i.edid||i.name,tags:[i.category,...i.tags||[],...((l=i.effects)==null?void 0:l.map(c=>c.type))||[]].filter(c=>!!c)}});e({data:a,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load traits",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.tags)==null?void 0:l.some(c=>c.toLowerCase().includes(r)))})}})),AL=Object.freeze(Object.defineProperty({__proto__:null,useTraitsStore:fo},Symbol.toStringTag,{value:"Module"}));function Ya(e){return e?e.replace(/\*\*\*(.*?)\*\*\*/g,"**$1**").replace(/<(\d+)>/g,"Level $1").replace(/\n+/g," ").trim():""}function mo(e,t,n){try{return e()}catch(s){return console.warn(`Failed to resolve ${n}:`,s),t}}function TL(e){return e?mo(()=>{const t=ca.getState().data;if(t.length===0)throw new Error("Races data not loaded yet. Please wait a moment and try again.");let n=t.find(s=>s.edid===e);return n||(n=t.find(s=>s.name.toLowerCase()===e.toLowerCase())),n||(n=t.find(s=>s.id===e)),n?{name:n.name,effects:n.description?Ya(n.description):void 0}:(console.warn(`Race not found for ID: ${e}. Available races: ${t.map(s=>s.edid).join(", ")}`),{name:"Unknown Race"})},{name:"Unknown Race"},"race"):{name:"Not selected"}}function ML(e){return e?mo(()=>{const t=co.getState().data;if(t.length===0)throw new Error("Birthsigns data not loaded yet. Please wait a moment and try again.");const n=t.find(s=>s.edid===e);return n?{name:n.name,effects:Ya(n.description||"No effects")}:{name:"Unknown Birth Sign",effects:"No effects"}},{name:"Unknown Birth Sign",effects:"No effects"},"birth sign"):{name:"Not selected",effects:"No effects"}}function RL(e,t){return mo(()=>{const n=fo.getState().data;if(n.length===0)throw new Error("Traits data not loaded yet. Please wait a moment and try again.");const s=[];return e.forEach(r=>{const a=n.find(i=>i.edid===r);a&&s.push({name:a.name,effects:Ya(a.description||"No effects"),type:"regular"})}),t.forEach(r=>{const a=n.find(i=>i.edid===r);a&&s.push({name:a.name,effects:Ya(a.description||"No effects"),type:"bonus"})}),s},[],"traits")}function DL(e){return e?mo(()=>{const t=Xi.getState().data;if(t.length===0)throw new Error("Religions data not loaded yet. Please wait a moment and try again.");const n=t.find(s=>s.id===e||s.name===e);return n?{name:n.name,effects:Ya(n.type||"No effects")}:{name:"Unknown Religion",effects:"No effects"}},{name:"Unknown Religion",effects:"No effects"},"religion"):{name:"Not selected",effects:"No effects"}}function zL(e,t,n){return mo(()=>{const s=uo.getState().data;if(s.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");const r=a=>a.map(i=>{const l=s.find(u=>u.edid===i),c=n[i];return{name:(l==null?void 0:l.name)||"Unknown Skill",level:c||void 0}});return{major:r(e),minor:r(t),other:[]}},{major:[],minor:[],other:[]},"skills")}function LL(e,t){return mo(()=>{const n=uo.getState().data,s=lo.getState().data;if(n.length===0)throw new Error("Skills data not loaded yet. Please wait a moment and try again.");if(s.length===0)throw new Error("Perk trees data not loaded yet. Please wait a moment and try again.");return Object.entries(e).map(([r,a])=>{const i=n.find(u=>u.edid===r),l=s.find(u=>u.treeId===r),c=a.map(u=>{var h,p,v;let d=l==null?void 0:l.perks.find(w=>w.edid===u);d||(d=l==null?void 0:l.perks.find(w=>w.name.toLowerCase()===u.toLowerCase())),d||console.warn(`Perk lookup fallback for ID: ${u}`);const f=t[u];d||console.warn(`Perk not found for ID: ${u} in skill: ${r}. Available perks: ${l==null?void 0:l.perks.map(w=>w.edid).join(", ")}`);const m=((v=(p=(h=d==null?void 0:d.ranks)==null?void 0:h[0])==null?void 0:p.description)==null?void 0:v.base)||"No effects";return{name:(d==null?void 0:d.name)||"Unknown Perk",effects:Ya(m),rank:f||void 0}});return{skillName:(i==null?void 0:i.name)||"Unknown Skill",perks:c}}).filter(r=>r.perks.length>0)},[],"perks")}function $L(e){return e.length===0?[]:mo(()=>{const t=Yi.getState().data;if(t.length===0)throw new Error("Destiny nodes data not loaded yet. Please wait a moment and try again.");return e.map(n=>{const s=t.find(r=>r.id===n||r.name===n);return{name:(s==null?void 0:s.name)||"Unknown Destiny",effects:s!=null&&s.description?Ya(s.description):void 0}})},[],"destiny path")}function PL(e){const t=[],n=e.map(s=>s.name.toLowerCase());return n.some(s=>s.includes("one-handed")||s.includes("two-handed"))&&t.push("melee"),n.some(s=>s.includes("archery"))&&t.push("archery"),n.some(s=>s.includes("magic")||s.includes("destruction"))&&t.push("magic"),n.some(s=>s.includes("stealth")||s.includes("sneak"))&&t.push("stealth"),n.some(s=>s.includes("smithing")||s.includes("enchanting"))&&t.push("crafting"),t}function OL(e){const t=[],n=e.map(s=>s.name.toLowerCase());return n.some(s=>s.includes("warrior")||s.includes("combat"))&&t.push("warrior"),n.some(s=>s.includes("mage")||s.includes("magic"))&&t.push("mage"),n.some(s=>s.includes("thief")||s.includes("stealth"))&&t.push("thief"),n.some(s=>s.includes("archer")||s.includes("ranged"))&&t.push("archer"),t}function BL(e,t,n){const s=["lorerim"];if(e.name!=="Not selected"){const l=e.name.toLowerCase().replace(/\s+/g,"");s.push(l)}const r=[...t.major,...t.minor],a=PL(r);s.push(...a);const i=OL(n);return s.push(...i),s.slice(0,5)}function IL(e){const t=TL(e.race),n=ML(e.stone),s=DL(e.religion),r=RL(e.traits.regular,e.traits.bonus),a=zL(e.skills.major,e.skills.minor,e.skillLevels),i=LL(e.perks.selected,e.perks.ranks),l=$L(e.destinyPath),c=BL(t,a,r),u={level:e.attributeAssignments.level||1,health:e.attributeAssignments.health||0,stamina:e.attributeAssignments.stamina||0,magicka:e.attributeAssignments.magicka||0,totalPoints:(e.attributeAssignments.health||0)+(e.attributeAssignments.stamina||0)+(e.attributeAssignments.magicka||0)};return{name:e.name||"Unnamed Character",notes:e.notes||"",race:t,birthSign:n,traits:r,religion:s,skills:a,perks:i,destinyPath:l,tags:c,attributes:u}}function HL(e,t){const n=[];n.push(`**🛡️ Build: ${e.name||"Unnamed Character"}**`),e.notes&&n.push(`*${e.notes}*`),n.push(""),t&&(n.push(`[Arcaneum Build Link](${t})`),n.push("")),n.push("__🧬 Race__"),n.push(`${e.race.name}`),n.push(""),n.push("__🌌 Birth Sign__"),n.push(`${e.birthSign.name}`),n.push(""),e.traits.length>0&&(n.push("__🧠 Traits__"),e.traits.forEach(r=>{const a=r.type==="bonus"?" (Late Game)":"";n.push(`**${r.name}${a}**`)}),n.push("")),n.push("__✝️ Religion__"),n.push(`${e.religion.name}`),n.push(""),n.push(`__⚔️ Attributes (Level ${e.attributes.level})__`);const s=[];if(e.attributes.health>0&&s.push(`Health: ${e.attributes.health}`),e.attributes.stamina>0&&s.push(`Stamina: ${e.attributes.stamina}`),e.attributes.magicka>0&&s.push(`Magicka: ${e.attributes.magicka}`),s.length>0?n.push(s.join(", ")):n.push("No attribute points assigned"),n.push(""),n.push("__📚 Skills__"),e.skills.major.length>0){const r=e.skills.major.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Major:** ${r}`)}if(e.skills.minor.length>0){const r=e.skills.minor.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Minor:** ${r}`)}if(e.skills.other.length>0){const r=e.skills.other.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Other:** ${r}`)}return n.push(""),e.perks.length>0&&(n.push("__🎯 Perks__"),e.perks.forEach(r=>{n.push(`**${r.skillName}:**`),r.perks.forEach(a=>{const i=a.rank&&a.rank>1?` (Rank ${a.rank})`:"";n.push(`• **${a.name}${i}**`)}),n.push("")})),e.destinyPath.length>0&&(n.push("__🌟 Destiny Path__"),e.destinyPath.forEach(r=>{n.push(`**${r.name}**`),r.effects&&n.push(`${r.effects}`),n.push("")})),e.tags.length>0&&(n.push(""),n.push(e.tags.map(r=>`#${r}`).join(" "))),n.join(`
`)}function UL(e,t){const n=[];n.push(`**🛡️ Build: ${e.name||"Unnamed Character"}**`),e.notes&&n.push(`*${e.notes}*`),n.push(""),t&&(n.push(`[Arcaneum Build Link](${t})`),n.push("")),n.push("__🧬 Race__"),n.push(`${e.race.name}`),n.push(""),n.push("__🌌 Birth Sign__"),n.push(`${e.birthSign.name}`),n.push(""),e.traits.length>0&&(n.push("__🧠 Traits__"),e.traits.forEach(r=>{const a=r.type==="bonus"?" (Late Game)":"";n.push(`**${r.name}${a}**`)}),n.push("")),n.push("__✝️ Religion__"),n.push(`${e.religion.name}`),n.push(""),n.push(`__⚔️ Attributes (Level ${e.attributes.level})__`);const s=[];if(e.attributes.health>0&&s.push(`Health: ${e.attributes.health}`),e.attributes.stamina>0&&s.push(`Stamina: ${e.attributes.stamina}`),e.attributes.magicka>0&&s.push(`Magicka: ${e.attributes.magicka}`),s.length>0?n.push(s.join(", ")):n.push("No attribute points assigned"),n.push(""),n.push("__📚 Skills__"),e.skills.major.length>0){const r=e.skills.major.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Major:** ${r}`)}if(e.skills.minor.length>0){const r=e.skills.minor.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Minor:** ${r}`)}if(e.skills.other.length>0){const r=e.skills.other.map(a=>a.level?`${a.name} (Level ${a.level})`:a.name).join(", ");n.push(`**Other:** ${r}`)}return n.push(""),e.perks.length>0&&(n.push("__🎯 Perks__"),e.perks.forEach(r=>{n.push(`**${r.skillName}:**`),r.perks.forEach(a=>{const i=a.rank&&a.rank>1?` (Rank ${a.rank})`:"";n.push(`• **${a.name}${i}**`)}),n.push("")})),e.destinyPath.length>0&&(n.push("__🌟 Destiny Path__"),e.destinyPath.forEach(r=>{n.push(`**${r.name}**`),r.effects&&n.push(`${r.effects}`),n.push("")})),e.tags.length>0&&(n.push(""),n.push(e.tags.map(r=>`#${r}`).join(" "))),n.join(`
`)}async function FL(e){try{await navigator.clipboard.writeText(e)}catch{const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")}catch{throw new Error("Failed to copy to clipboard")}finally{document.body.removeChild(n)}}}function VL({build:e,className:t}){const[n,s]=g.useState(!1),[r,a]=g.useState(null),[i,l]=g.useState(""),[c,u]=g.useState("names"),d=g.useCallback(async f=>{s(!0),a(null),l(""),u(f);try{const m=IL(e),h=window.location.href,p=f==="full"?UL(m,h):HL(m,h);await FL(p),a(f),setTimeout(()=>a(null),2e3)}catch(m){console.error("Discord export failed:",m),l(m instanceof Error?m.message:"Export failed"),setTimeout(()=>l(""),3e3)}finally{s(!1)}},[e]);return o.jsxs("div",{className:U("relative",t),children:[o.jsxs("div",{className:"flex rounded-md border border-input bg-background",children:[o.jsx(W,{variant:n?"ghost":c==="names"?"default":"ghost",size:"sm",onClick:()=>d("names"),disabled:n,className:U("rounded-r-none border-r",c==="names"&&!n&&"bg-primary text-primary-foreground",r==="names"&&"bg-green-600 hover:bg-green-700 text-white",i&&"bg-red-600 hover:bg-red-700 text-white"),title:i||"Export build to Discord format (short form)","aria-label":"Export build to Discord format (short form)",children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),o.jsx("span",{className:"ml-2",children:"Exporting..."})]}):r==="names"?o.jsxs(o.Fragment,{children:[o.jsx(fg,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Copied!"})]}):i?o.jsxs(o.Fragment,{children:[o.jsx(xi,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Error"})]}):o.jsxs(o.Fragment,{children:[o.jsx(T4,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Export (short form)"})]})}),o.jsx(W,{variant:n?"ghost":c==="full"?"default":"ghost",size:"sm",onClick:()=>d("full"),disabled:n,className:U("rounded-l-none",c==="full"&&!n&&"bg-primary text-primary-foreground",r==="full"&&"bg-green-600 hover:bg-green-700 text-white",i&&"bg-red-600 hover:bg-red-700 text-white"),title:i||"Export build to Discord format (long form)","aria-label":"Export build to Discord format (long form)",children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),o.jsx("span",{className:"ml-2",children:"Exporting..."})]}):r==="full"?o.jsxs(o.Fragment,{children:[o.jsx(fg,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Copied!"})]}):i?o.jsxs(o.Fragment,{children:[o.jsx(xi,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Error"})]}):o.jsxs(o.Fragment,{children:[o.jsx(MN,{className:"w-4 h-4"}),o.jsx("span",{className:"ml-2",children:"Export (long form)"})]})})]}),i&&o.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-red-100 border border-red-300 rounded text-xs text-red-800 max-w-xs z-50",role:"alert","aria-live":"polite",children:i})]})}function qL({onReset:e,build:t,className:n}){return o.jsxs("div",{className:`flex flex-wrap gap-2 mb-6 ${n||""}`,children:[o.jsxs(W,{variant:"destructive",size:"sm",className:"text-destructive-foreground cursor-pointer hover:opacity-90",onClick:e,children:[o.jsx(qa,{className:"w-4 h-4 mr-2"}),"Reset Build"]}),o.jsx(VL,{build:t})]})}function GL({cards:e,className:t="",gap:n=16}){const[s,r]=g.useState(0),a=g.useRef(null);g.useCallback(()=>s<768?1:s<1024?2:s<1280?3:4,[s]),g.useEffect(()=>{const c=()=>{a.current&&r(a.current.offsetWidth)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const i=g.useCallback(()=>{const c=s<768?1:2,u=[];let d=[];return e.forEach((f,m)=>{f.size==="full"?(d.length>0&&(u.push(l(d,c)),d=[]),u.push(o.jsx("div",{id:f.id,style:{width:"100%",marginBottom:`${n}px`},children:f.component},f.id))):d.push(f)}),d.length>0&&u.push(l(d,c)),o.jsx(o.Fragment,{children:u})},[e,s,n]),l=g.useCallback((c,u)=>{var m;const d=Array.from({length:u},()=>[]),f=new Array(u).fill(0);return c.forEach(h=>{let p=0,v=1/0;for(let w=0;w<u;w++)f[w]<v&&(v=f[w],p=w);d[p].push(o.jsx("div",{id:h.id,style:{width:"100%",marginBottom:`${n}px`},children:h.component},h.id)),f[p]+=1}),o.jsx("div",{style:{display:"flex",width:"100%",marginBottom:`${n}px`},children:d.map((h,p)=>o.jsx("div",{style:{width:`calc(${100/u}% - ${n/2}px)`,marginRight:p<u-1?`${n}px`:0},children:h},p))},`group-${(m=c[0])==null?void 0:m.id}`)},[n]);return e.length===0?o.jsx("div",{className:`text-center py-12 ${t}`,children:o.jsx("p",{className:"text-muted-foreground",children:"No build cards to display"})}):o.jsx("div",{ref:a,className:t,children:o.jsx("div",{style:{width:"100%"},children:i()})})}const ZL=qi("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function K({className:e,variant:t,...n}){return o.jsx("div",{className:U(ZL({variant:t}),e),...n})}const Uf={traitLimit:{regular:"text-blue-600",bonus:"text-purple-600",warning:"text-yellow-600",error:"text-red-600"},summaryCard:{primary:"text-primary",secondary:"text-muted-foreground",accent:"text-accent"},backgrounds:{warning:"bg-yellow-50 dark:bg-yellow-950",info:"bg-blue-50 dark:bg-blue-950",error:"bg-red-50 dark:bg-red-950",success:"bg-green-50 dark:bg-green-950"},borders:{warning:"border-yellow-200 dark:border-yellow-800",info:"border-blue-200 dark:border-blue-800",error:"border-red-200 dark:border-red-800",success:"border-green-200 dark:border-green-800"}},ni={card:"p-6 space-y-4",section:"space-y-3",item:"space-y-2"};function YL(e){return Uf.traitLimit[e]}function Fy(e){return Uf.summaryCard[e]}function XL(e){return Uf.backgrounds[e]}function Kj(e){return Uf.borders[e]}function WL({title:e,items:t,layout:n="grid",className:s}){const r=i=>{switch(i){case"race":return o.jsx(kd,{className:"h-4 w-4"});case"birthsign":return o.jsx(st,{className:"h-4 w-4"});case"religion":return o.jsx(Df,{className:"h-4 w-4"});case"traits":return o.jsx(W4,{className:"h-4 w-4"});default:return null}},a=()=>{switch(n){case"grid":return"grid grid-cols-2 md:grid-cols-4 gap-4";case"list":return"space-y-3";default:return"grid grid-cols-2 md:grid-cols-4 gap-4"}};return o.jsxs(ye,{className:U(ni.card,s),children:[o.jsx(Me,{children:o.jsx(Be,{children:e})}),o.jsx(be,{className:U(ni.section),children:o.jsx("div",{className:a(),children:t.map((i,l)=>o.jsxs("div",{className:U(ni.item,i.className),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.icon||r(i.type),o.jsxs("span",{className:U("font-medium text-sm",Fy("primary")),children:[i.label,":"]})]}),o.jsx("div",{className:U("text-sm",Fy("secondary")),children:i.value||"Not selected"})]},l))})})]})}function KL(e){return[{label:"Race",value:e.race||"Not selected",type:"race"},{label:"Birth Sign",value:e.stone||"Not selected",type:"birthsign"},{label:"Religion",value:e.religion||"Not selected",type:"religion"},{label:"Traits",value:`${e.traits.regular.length}/${e.traitLimits.regular} starting, ${e.traits.bonus.length}/${e.traitLimits.bonus} late game`,type:"traits"}]}function Qj({build:e,title:t="Build Summary",layout:n="grid",className:s}){const r=KL(e);return o.jsx(WL,{title:t,items:r,layout:n,className:s})}function QL({open:e,title:t,message:n,variant:s="warning",confirmText:r="Confirm",cancelText:a="Cancel",onConfirm:i,onCancel:l,className:c}){if(!e)return null;const u=()=>{switch(s){case"warning":return o.jsx(tc,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"});case"info":return o.jsx(ec,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"});case"error":return o.jsx(s4,{className:"h-5 w-5 text-red-600 dark:text-red-400"});case"success":return o.jsx(mg,{className:"h-5 w-5 text-green-600 dark:text-green-400"});default:return o.jsx(tc,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}},d=()=>{switch(s){case"error":return"destructive";case"success":return"default";default:return"default"}};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:o.jsxs("div",{className:U("bg-white dark:bg-zinc-900 rounded-lg shadow-lg p-6 w-full max-w-xs space-y-4 border",Kj(s),c),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[u(),o.jsx("span",{className:"font-semibold",children:t})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(W,{variant:"outline",size:"sm",onClick:l,children:a}),o.jsx(W,{variant:d(),size:"sm",onClick:i,children:r})]})]})})}function JL({open:e,title:t,message:n,variant:s="warning",confirmText:r,cancelText:a,onConfirm:i,onCancel:l,className:c}){return o.jsx(QL,{open:e,title:t,message:n,variant:s,confirmText:r,cancelText:a,onConfirm:i,onCancel:l,className:c})}function e$({open:e,onConfirm:t,onCancel:n}){return o.jsx(JL,{open:e,title:"Reset Build?",message:"This will clear all selections and start a new build. This action cannot be undone.",variant:"warning",confirmText:"Confirm Reset",cancelText:"Cancel",onConfirm:t,onCancel:n})}function t$({title:e,description:t,icon:n,variant:s="default",children:r,className:a}){const i=()=>{if(n)return n;switch(s){case"warning":return o.jsx(tc,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return o.jsx(ec,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});default:return null}};return o.jsxs(ye,{className:U(ni.card,a),children:[o.jsxs(Me,{children:[o.jsxs(Be,{className:"flex items-center gap-2",children:[i(),e]}),t&&o.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),o.jsx(be,{className:U(ni.section),children:r})]})}function Vy({label:e,value:t,onChange:n,min:s=0,max:r=10,currentCount:a,type:i="regular",className:l}){const c=()=>{switch(i){case"regular":return o.jsx(mx,{className:"h-4 w-4"});case"bonus":return o.jsx(st,{className:"h-4 w-4"});default:return null}},u=()=>YL(i);return o.jsxs("div",{className:U(ni.item,l),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c(),o.jsx(sc,{htmlFor:`${i}-limit`,className:u(),children:e})]}),o.jsx(Cs,{id:`${i}-limit`,type:"number",min:s,max:r,value:t,onChange:d=>n(parseInt(d.target.value)||0),className:"mt-1"}),a!==void 0&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Currently selected: ",a]})]})}function qy({type:e,title:t,message:n,className:s}){const r=()=>{switch(e){case"warning":return o.jsx(tc,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"info":return o.jsx(ec,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"});case"error":return o.jsx(tc,{className:"h-4 w-4 text-red-600 dark:text-red-400"});case"success":return o.jsx(ec,{className:"h-4 w-4 text-green-600 dark:text-green-400"});default:return null}};return o.jsxs("div",{className:U("flex items-start gap-2 p-4 rounded-lg border",XL(e),Kj(e),s),children:[r(),o.jsxs("div",{className:"text-sm",children:[o.jsx("strong",{children:t}),o.jsx("p",{className:"mt-1",children:n})]})]})}function n$({regularLimit:e,bonusLimit:t,onRegularLimitChange:n,onBonusLimitChange:s,currentRegularCount:r,currentBonusCount:a,className:i}){const l=e!==2||t!==1;return o.jsxs(t$,{title:"Trait Limits Configuration",description:"Configure the number of traits your character can have",icon:o.jsx(ec,{className:"h-4 w-4 text-muted-foreground"}),className:i,children:[o.jsx(qy,{type:"warning",title:"Default configuration is 2 starting + 1 late game traits.",message:"Increasing these limits requires corresponding MCM (Mod Configuration Menu) changes in-game. Make sure your MCM settings match these limits to avoid conflicts."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Vy,{label:"Starting Traits Limit",value:e,onChange:n,min:0,max:10,currentCount:r,type:"regular"}),o.jsx(Vy,{label:"Late Game Traits Limit",value:t,onChange:s,min:0,max:5,currentCount:a,type:"bonus"})]}),l&&o.jsx(qy,{type:"info",title:`Custom limits detected: ${e} starting + ${t} late game traits.`,message:"Remember to update your MCM settings accordingly."})]})}const s$=qi("",{variants:{variant:{h1:"scroll-m-20 text-5xl font-black tracking-tight text-balance lg:text-6xl",h2:"scroll-m-20 border-b pb-3 text-4xl font-bold tracking-tight first:mt-0 lg:text-5xl",h3:"scroll-m-20 text-3xl font-bold tracking-tight lg:text-4xl",h4:"scroll-m-20 text-2xl font-bold tracking-tight lg:text-3xl",h5:"scroll-m-20 text-xl font-bold tracking-tight lg:text-2xl",h6:"scroll-m-20 text-lg font-bold tracking-tight lg:text-xl",p:"text-lg leading-8 [&:not(:first-child)]:mt-6",blockquote:"mt-6 border-l-4 pl-6 italic text-lg",code:"bg-muted relative rounded px-[0.4rem] py-[0.3rem] font-mono text-base font-bold",lead:"text-muted-foreground text-2xl leading-8",large:"text-xl font-bold",small:"text-base font-semibold leading-none",muted:"text-muted-foreground text-base"}},defaultVariants:{variant:"p"}}),dn=g.forwardRef(({className:e,variant:t,as:n,...s},r)=>{const a=n||r$(t);return o.jsx(a,{className:U(s$({variant:t,className:e})),ref:r,...s})});dn.displayName="Typography";function r$(e){switch(e){case"h1":return"h1";case"h2":return"h2";case"h3":return"h3";case"h4":return"h4";case"h5":return"h5";case"h6":return"h6";case"blockquote":return"blockquote";case"code":return"code";case"lead":case"large":case"small":case"muted":case"p":default:return"p"}}const ho=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h1",as:"h1",className:e,ref:n,...t}));ho.displayName="H1";const Ra=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h2",as:"h2",className:e,ref:n,...t}));Ra.displayName="H2";const bt=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h3",as:"h3",className:e,ref:n,...t}));bt.displayName="H3";const si=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h4",as:"h4",className:e,ref:n,...t}));si.displayName="H4";const rn=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h5",as:"h5",className:e,ref:n,...t}));rn.displayName="H5";const a$=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"h6",as:"h6",className:e,ref:n,...t}));a$.displayName="H6";const Ke=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"p",as:"p",className:e,ref:n,...t}));Ke.displayName="P";const o$=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"blockquote",as:"blockquote",className:e,ref:n,...t}));o$.displayName="Blockquote";const i$=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"code",as:"code",className:e,ref:n,...t}));i$.displayName="Code";const Jj=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"lead",as:"p",className:e,ref:n,...t}));Jj.displayName="Lead";const l$=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"large",as:"div",className:e,ref:n,...t}));l$.displayName="Large";const eS=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"small",as:"small",className:e,ref:n,...t}));eS.displayName="Small";const rc=g.forwardRef(({className:e,...t},n)=>o.jsx(dn,{variant:"muted",as:"p",className:e,ref:n,...t}));rc.displayName="Muted";const c$={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500"},u$={sm:"h-1.5",md:"h-2",lg:"h-3"};function Jm({value:e,label:t,color:n="blue",size:s="md",showValue:r=!0,className:a,maxValue:i}){const l=i?Math.min(e/i*100,100):100;return o.jsxs("div",{className:U("space-y-1",a),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:t}),r&&o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),o.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:U("transition-all duration-300 ease-out",c$[n],u$[s]),style:{width:`${l}%`}})})]})}function d$({displayData:e,level:t,className:n,showRatios:s=!0,compact:r=!1,selectedRace:a}){return r?o.jsxs("div",{className:U("space-y-3",n),children:[o.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),a&&o.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Base stats from ",a.name]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Health"}),o.jsx("div",{className:"font-medium text-lg",children:e.health.total}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.health.assigned]})]}),o.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Stamina"}),o.jsx("div",{className:"font-medium text-lg",children:e.stamina.total}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.stamina.assigned]})]}),o.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/50 rounded",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Magicka"}),o.jsx("div",{className:"font-medium text-lg",children:e.magicka.total}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.magicka.assigned]})]})]}),s&&o.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Level ",t," •"," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments"]})]}):o.jsxs("div",{className:U("space-y-4",n),children:[o.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Attribute Assignments"}),a&&a.startingStats&&o.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[o.jsxs("p",{className:"font-medium mb-1",children:["Base Stats from ",a.name,":"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-medium",children:"Health"}),o.jsx("div",{className:"text-muted-foreground",children:a.startingStats.health})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-medium",children:"Stamina"}),o.jsx("div",{className:"text-muted-foreground",children:a.startingStats.stamina})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-medium",children:"Magicka"}),o.jsx("div",{className:"text-muted-foreground",children:a.startingStats.magicka})]})]})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Jm,{value:e.health.total,label:"Health",color:"red",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),o.jsx(Jm,{value:e.stamina.total,label:"Stamina",color:"green",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)}),o.jsx(Jm,{value:e.magicka.total,label:"Magicka",color:"blue",size:"sm",showValue:!0,maxValue:Math.max(e.health.total,e.stamina.total,e.magicka.total)})]}),s&&o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Health"}),o.jsxs("div",{className:"text-muted-foreground",children:[e.health.ratio.toFixed(1),"%"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Stamina"}),o.jsxs("div",{className:"text-muted-foreground",children:[e.stamina.ratio.toFixed(1),"%"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Magicka"}),o.jsxs("div",{className:"text-muted-foreground",children:[e.magicka.ratio.toFixed(1),"%"]})]})]}),o.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:["Level ",t," •"," ",e.health.assigned+e.stamina.assigned+e.magicka.assigned," ","assignments made"]})]})}function f$({level:e,assignments:t,onAssignmentChange:n,onClearAssignment:s,onClearAll:r,onUpdateAttributeLevel:a,className:i}){const l=w=>Object.values(t).filter(x=>x===w).length,c=l("health"),u=l("stamina"),d=l("magicka"),f=c+u+d,m=f+1,h=(w,x)=>{const b=l(w),y=x-b;if(y>0)for(let j=0;j<y;j++){const S=Math.max(2,f+2+j);n(S,w)}else if(y<0){for(let j=0;j<Math.abs(y);j++)for(let S=e;S>=2;S--)if(t[S]===w){s(S);break}}const N=f+y;a(N+1)},p=w=>{h(w,l(w)+1)},v=w=>{const x=l(w);x>0&&h(w,x-1)};return o.jsxs("div",{className:U("space-y-4",i),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Attribute Points"}),o.jsx("div",{className:"flex gap-2",children:o.jsxs(W,{variant:"outline",size:"sm",onClick:r,className:"text-xs",children:[o.jsx(qa,{className:"h-3 w-3 mr-1"}),"Clear All"]})})]}),o.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border",children:[o.jsxs("div",{className:"text-sm text-muted-foreground mb-3",children:["Character Level: ",m," (derived from ",f," attribute points)"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"flex flex-col items-center p-3 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-800",children:[o.jsx("div",{className:"font-medium text-red-700 dark:text-red-300 mb-3",children:"Health"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(W,{variant:"outline",size:"sm",onClick:()=>v("health"),disabled:c<=0,className:"h-8 w-8 p-0",children:o.jsx($l,{className:"h-4 w-4"})}),o.jsx(Cs,{type:"number",value:c,onChange:w=>{const x=parseInt(w.target.value)||0;x>=0&&h("health",x)},className:"w-16 text-center text-lg font-bold text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 border-red-300 dark:border-red-600 focus:border-red-500 focus:ring-red-500",min:0}),o.jsx(W,{variant:"outline",size:"sm",onClick:()=>p("health"),className:"h-8 w-8 p-0",children:o.jsx(Qr,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex flex-col items-center p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[o.jsx("div",{className:"font-medium text-green-700 dark:text-green-300 mb-3",children:"Stamina"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(W,{variant:"outline",size:"sm",onClick:()=>v("stamina"),disabled:u<=0,className:"h-8 w-8 p-0",children:o.jsx($l,{className:"h-4 w-4"})}),o.jsx(Cs,{type:"number",value:u,onChange:w=>{const x=parseInt(w.target.value)||0;x>=0&&h("stamina",x)},className:"w-16 text-center text-lg font-bold text-green-700 dark:text-green-300 bg-white dark:bg-gray-800 border-green-300 dark:border-green-600 focus:border-green-500 focus:ring-green-500",min:0}),o.jsx(W,{variant:"outline",size:"sm",onClick:()=>p("stamina"),className:"h-8 w-8 p-0",children:o.jsx(Qr,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex flex-col items-center p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[o.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300 mb-3",children:"Magicka"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(W,{variant:"outline",size:"sm",onClick:()=>v("magicka"),disabled:d<=0,className:"h-8 w-8 p-0",children:o.jsx($l,{className:"h-4 w-4"})}),o.jsx(Cs,{type:"number",value:d,onChange:w=>{const x=parseInt(w.target.value)||0;x>=0&&h("magicka",x)},className:"w-16 text-center text-lg font-bold text-blue-700 dark:text-blue-300 bg-white dark:bg-gray-800 border-blue-300 dark:border-blue-600 focus:border-blue-500 focus:ring-blue-500",min:0}),o.jsx(W,{variant:"outline",size:"sm",onClick:()=>p("magicka"),className:"h-8 w-8 p-0",children:o.jsx(Qr,{className:"h-4 w-4"})})]})]})]})]})]})}function m$(){const{build:e,setAttributeAssignment:t,clearAttributeAssignment:n,clearAllAttributeAssignments:s,updateAttributeLevel:r}=Hr(),{data:a}=ca(),i=e.attributeAssignments,l=g.useMemo(()=>!e.race||a.length===0?null:a.find(p=>p.edid===e.race)||null,[e.race,a]),c=g.useMemo(()=>l!=null&&l.startingStats?{health:l.startingStats.health,stamina:l.startingStats.stamina,magicka:l.startingStats.magicka}:{health:100,stamina:100,magicka:100},[l]),u=g.useMemo(()=>{i.level;const p=i.health+i.stamina+i.magicka;return{health:{base:c.health,assigned:i.health,total:c.health+i.health,ratio:p>0?i.health/p*100:0},stamina:{base:c.stamina,assigned:i.stamina,total:c.stamina+i.stamina,ratio:p>0?i.stamina/p*100:0},magicka:{base:c.magicka,assigned:i.magicka,total:c.magicka+i.magicka,ratio:p>0?i.magicka/p*100:0}}},[i,c]),d=p=>p>0&&p<=i.level,f=p=>i.assignments[p]||null,m=()=>i.health+i.stamina+i.magicka,h=()=>{const p=Object.keys(i.assignments).map(Number),v=[];for(let w=2;w<=i.level;w++)p.includes(w)||v.push(w);return v};return{assignments:i,displayData:u,level:i.level,selectedRace:l,baseStats:c,setAttributeAssignment:t,clearAttributeAssignment:n,clearAllAttributeAssignments:s,updateAttributeLevel:r,canAssignAtLevel:d,getAssignmentAtLevel:f,getTotalAssignments:m,getUnassignedLevels:h}}function tS({className:e,showControls:t=!0,showSummary:n=!0,compact:s=!1}){const[r,a]=g.useState(!0),{assignments:i,displayData:l,level:c,selectedRace:u,setAttributeAssignment:d,clearAttributeAssignment:f,clearAllAttributeAssignments:m,updateAttributeLevel:h}=m$(),p=(x,b)=>{d(x,b)},v=x=>{f(x)},w=()=>{m()};return o.jsxs(ye,{className:U("w-full",e),children:[o.jsx(Me,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Be,{className:"flex items-center gap-2",children:[o.jsx(Sd,{className:"h-5 w-5"}),"Attribute Assignments"]}),t&&o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>a(!r),children:r?o.jsx(JR,{className:"h-4 w-4"}):o.jsx(En,{className:"h-4 w-4"})})]})}),o.jsxs(be,{className:"space-y-4",children:[n&&o.jsx(d$,{displayData:l,level:c,compact:s,selectedRace:u}),t&&r&&o.jsx(f$,{level:c,assignments:i.assignments,onAssignmentChange:p,onClearAssignment:v,onClearAll:w,onUpdateAttributeLevel:h})]})]})}const ad=new Map;function h$(){ad.clear()}h$();function g$(e,t={}){if(!e)return[];const n=JSON.stringify({text:e,options:t});if(ad.has(n))return ad.get(n);let s=[{text:e,key:"0"}];return t.customPatterns&&t.customPatterns.length>0&&t.customPatterns.forEach((r,a)=>{const i=[];s.forEach(l=>{if(l.className)i.push(l);else{let c=0,u;const d=new RegExp(r.pattern,r.pattern.flags.includes("g")?r.pattern.flags:r.pattern.flags+"g");d.lastIndex=0;let f=0;for(;(u=d.exec(l.text))!==null;){u.index>c&&i.push({text:l.text.slice(c,u.index),key:`${l.key}-${f++}`});let m=u[0];const h=typeof r.className=="function"?r.className(u[0]):r.className;r.transform&&(m=r.transform(m)),i.push({text:m,className:h,key:`${l.key}-${f++}`}),c=d.lastIndex}c<l.text.length&&i.push({text:l.text.slice(c),key:`${l.key}-${f++}`})}}),s=i}),s=s.map((r,a)=>({...r,key:r.key||String(a)})),ad.set(n,s),s}const p$=["health","magicka","stamina","health regeneration","magicka regeneration","stamina regeneration"],x$=["one-handed","two-handed","archery","block","heavy armor","light armor","smithing","alchemy"];function v$(){return{highlightBrackets:!0,highlightAttributes:!0,highlightSkills:!0,highlightNumbers:!0,customPatterns:[{pattern:/\*\*\*([^*]+)\*\*\*/g,className:e=>{const n=e.slice(3,-3).match(/[+-]?\d+(?:\.\d+)?%?/);if(n){const s=parseFloat(n[0]),r=n[0].startsWith("+")||s>0,a=n[0].startsWith("-")||s<0;if(r)return"font-bold text-green-600 bg-skyrim-gold/10 px-1 py-0.5 rounded";if(a)return"font-bold text-red-600 bg-skyrim-gold/10 px-1 py-0.5 rounded"}return"font-bold text-skyrim-gold bg-skyrim-gold/10 px-1 py-0.5 rounded"},transform:e=>e.slice(3,-3)},{pattern:/<([^>]+)>/g,className:e=>{const t=e.slice(1,-1);if(!/^\d+$/.test(t))return"text-foreground"},transform:e=>{const t=e.match(/<([^>]+)>/);return t?t[1]:e.slice(1,-1)}},{pattern:/[+-]?\d+(?:\.\d+)?%?/g,className:e=>{const t=parseFloat(e),n=e.startsWith("+")||t>0,s=e.startsWith("-")||t<0,r=t===0;return n?"font-bold text-green-600":s?"font-bold text-red-600":r?"font-bold text-skyrim-gold":"font-bold text-green-600"}},{pattern:new RegExp(`\\b(${p$.join("|")})\\b`,"gi"),className:"font-semibold text-primary"},{pattern:new RegExp(`\\b(${x$.join("|")})\\b`,"gi"),className:"font-semibold text-primary"}]}}function Ie({text:e,options:t,className:n="text-sm text-muted-foreground",as:s="div"}){const r=g.useMemo(()=>v$(),[]),a=g.useMemo(()=>e?g$(e,t||r):[],[e,t,r]);if(!e)return null;if(n.includes("line-clamp")){const l=n.match(/line-clamp-\d+/g)||[],c=n.replace(/line-clamp-\d+/g,"").trim();return o.jsx(s,{className:c,children:o.jsx("div",{className:`${l.join(" ")} overflow-hidden`,children:a.map(u=>o.jsx("span",{className:u.className,children:u.text},u.key))})})}return o.jsx(s,{className:n,children:a.map(l=>o.jsx("span",{className:l.className,children:l.text},l.key))})}const Fn=({children:e,title:t,description:n,className:s=""})=>o.jsxs("div",{className:`container mx-auto p-6 space-y-6 ${s}`,children:[t&&o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:t}),n&&o.jsx(Ie,{text:n,className:"text-muted-foreground mt-2 max-w-4xl",as:"p"})]})}),e]});function Lx(e){const t=e+"CollectionProvider",[n,s]=un(t),[r,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:w,children:x}=v,b=L.useRef(null),y=L.useRef(new Map).current;return o.jsx(r,{scope:w,itemMap:y,collectionRef:b,children:x})};i.displayName=t;const l=e+"CollectionSlot",c=yi(l),u=L.forwardRef((v,w)=>{const{scope:x,children:b}=v,y=a(l,x),N=$e(w,y.collectionRef);return o.jsx(c,{ref:N,children:b})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",m=yi(d),h=L.forwardRef((v,w)=>{const{scope:x,children:b,...y}=v,N=L.useRef(null),j=$e(w,N),S=a(d,x);return L.useEffect(()=>(S.itemMap.set(N,{ref:N,...y}),()=>void S.itemMap.delete(N))),o.jsx(m,{[f]:"",ref:j,children:b})});h.displayName=d;function p(v){const w=a(e+"CollectionConsumer",v);return L.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((S,k)=>y.indexOf(S.ref.current)-y.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:u,ItemSlot:h},p,s]}var y$=g.createContext(void 0);function Wi(e){const t=g.useContext(y$);return e||t||"ltr"}var eh="rovingFocusGroup.onEntryFocus",b$={bubbles:!1,cancelable:!0},Pc="RovingFocusGroup",[kg,nS,w$]=Lx(Pc),[N$,Ki]=un(Pc,[w$]),[j$,S$]=N$(Pc),sS=g.forwardRef((e,t)=>o.jsx(kg.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(kg.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(k$,{...e,ref:t})})}));sS.displayName=Pc;var k$=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,m=g.useRef(null),h=$e(t,m),p=Wi(a),[v,w]=Yn({prop:i,defaultProp:l??null,onChange:c,caller:Pc}),[x,b]=g.useState(!1),y=Ht(u),N=nS(n),j=g.useRef(!1),[S,k]=g.useState(0);return g.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(eh,y),()=>E.removeEventListener(eh,y)},[y]),o.jsx(j$,{scope:n,orientation:s,dir:p,loop:r,currentTabStopId:v,onItemFocus:g.useCallback(E=>w(E),[w]),onItemShiftTab:g.useCallback(()=>b(!0),[]),onFocusableItemAdd:g.useCallback(()=>k(E=>E+1),[]),onFocusableItemRemove:g.useCallback(()=>k(E=>E-1),[]),children:o.jsx(xe.div,{tabIndex:x||S===0?-1:0,"data-orientation":s,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:te(e.onMouseDown,()=>{j.current=!0}),onFocus:te(e.onFocus,E=>{const C=!j.current;if(E.target===E.currentTarget&&C&&!x){const _=new CustomEvent(eh,b$);if(E.currentTarget.dispatchEvent(_),!_.defaultPrevented){const P=N().filter(A=>A.focusable),O=P.find(A=>A.active),$=P.find(A=>A.id===v),z=[O,$,...P].filter(Boolean).map(A=>A.ref.current);oS(z,d)}}j.current=!1}),onBlur:te(e.onBlur,()=>b(!1))})})}),rS="RovingFocusGroupItem",aS=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:a,children:i,...l}=e,c=dr(),u=a||c,d=S$(rS,n),f=d.currentTabStopId===u,m=nS(n),{onFocusableItemAdd:h,onFocusableItemRemove:p,currentTabStopId:v}=d;return g.useEffect(()=>{if(s)return h(),()=>p()},[s,h,p]),o.jsx(kg.ItemSlot,{scope:n,id:u,focusable:s,active:r,children:o.jsx(xe.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:te(e.onMouseDown,w=>{s?d.onItemFocus(u):w.preventDefault()}),onFocus:te(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:te(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=_$(w,d.orientation,d.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let y=m().filter(N=>N.focusable).map(N=>N.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const N=y.indexOf(w.currentTarget);y=d.loop?A$(y,N+1):y.slice(N+1)}setTimeout(()=>oS(y))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:v!=null}):i})})});aS.displayName=rS;var C$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function E$(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function _$(e,t,n){const s=E$(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return C$[s]}function oS(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function A$(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var $x=sS,Px=aS,Ff="Tabs",[T$,iee]=un(Ff,[Ki]),iS=Ki(),[M$,Ox]=T$(Ff),lS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:a,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Wi(l),[f,m]=Yn({prop:s,onChange:r,defaultProp:a??"",caller:Ff});return o.jsx(M$,{scope:n,baseId:dr(),value:f,onValueChange:m,orientation:i,dir:d,activationMode:c,children:o.jsx(xe.div,{dir:d,"data-orientation":i,...u,ref:t})})});lS.displayName=Ff;var cS="TabsList",uS=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...r}=e,a=Ox(cS,n),i=iS(n);return o.jsx($x,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:s,children:o.jsx(xe.div,{role:"tablist","aria-orientation":a.orientation,...r,ref:t})})});uS.displayName=cS;var dS="TabsTrigger",fS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...a}=e,i=Ox(dS,n),l=iS(n),c=gS(i.baseId,s),u=pS(i.baseId,s),d=s===i.value;return o.jsx(Px,{asChild:!0,...l,focusable:!r,active:d,children:o.jsx(xe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...a,ref:t,onMouseDown:te(e.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?i.onValueChange(s):f.preventDefault()}),onKeyDown:te(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(s)}),onFocus:te(e.onFocus,()=>{const f=i.activationMode!=="manual";!d&&!r&&f&&i.onValueChange(s)})})})});fS.displayName=dS;var mS="TabsContent",hS=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:r,children:a,...i}=e,l=Ox(mS,n),c=gS(l.baseId,s),u=pS(l.baseId,s),d=s===l.value,f=g.useRef(d);return g.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx(qt,{present:r||d,children:({present:m})=>o.jsx(xe.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&a})})});hS.displayName=mS;function gS(e,t){return`${e}-trigger-${t}`}function pS(e,t){return`${e}-content-${t}`}var R$=lS,D$=uS,z$=fS,L$=hS;function Qi({className:e,...t}){return o.jsx(R$,{"data-slot":"tabs",className:U("flex flex-col gap-2",e),...t})}function Ji({className:e,...t}){return o.jsx(D$,{"data-slot":"tabs-list",className:U("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function an({className:e,...t}){return o.jsx(z$,{"data-slot":"tabs-trigger",className:U("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function wn({className:e,...t}){return o.jsx(L$,{"data-slot":"tabs-content",className:U("flex-1 outline-none",e),...t})}const en=[{label:"Build",value:"build",to:"/build"},{label:"Race",value:"race",to:"/build/race"},{label:"Birth Signs",value:"birth-signs",to:"/build/birth-signs"},{label:"Traits",value:"traits",to:"/build/traits"},{label:"Religion",value:"religions",to:"/build/religions"},{label:"Destiny",value:"destiny",to:"/build/destiny"},{label:"Perks",value:"perks",to:"/build/perks"}],$$=({currentPath:e})=>{var d;const t=dt(),n=en.findIndex(f=>f.to===e),s=n>=0?n:0,r=f=>{const m=en.find(h=>h.value===f);m&&t(m.to)},a=f=>{t(f.to)},i=()=>{s>0&&t(en[s-1].to)},l=()=>{s<en.length-1&&t(en[s+1].to)},c=f=>{switch(f.key){case"ArrowLeft":f.preventDefault(),i();break;case"ArrowRight":f.preventDefault(),l();break;case"Home":f.preventDefault(),t(en[0].to);break;case"End":f.preventDefault(),t(en[en.length-1].to);break}},u=((d=en[s])==null?void 0:d.value)||"build";return o.jsx("div",{className:"bg-background border-b border-border shadow-sm sticky top-12 backdrop-blur-sm",style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},role:"navigation","aria-label":"Character build progress",onKeyDown:c,tabIndex:0,children:o.jsx("div",{style:{backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:o.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[o.jsx(W,{onClick:i,disabled:s===0,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to previous step: ${s>0?en[s-1].label:"none"}`,children:o.jsx(WR,{className:"h-4 w-4"})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx(Qi,{value:u,onValueChange:r,children:o.jsx(Ji,{className:"flex w-full h-auto p-1 bg-muted relative",style:{backgroundColor:"hsl(var(--muted))",backgroundImage:"none"},role:"tablist","aria-label":"Character build steps",children:en.map((f,m)=>o.jsxs(an,{value:f.value,onClick:()=>a(f),className:U("inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-xs font-medium whitespace-nowrap transition-[color,box-shadow] relative","data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm","dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30","text-foreground dark:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","cursor-pointer select-none"),style:{backgroundColor:u===f.value?"hsl(var(--background))":"transparent",backgroundImage:"none"},title:`Step ${m+1}: ${f.label}`,role:"tab","aria-selected":u===f.value,"aria-label":`Step ${m+1}: ${f.label}`,children:[o.jsx("span",{className:"hidden sm:inline",children:f.label}),o.jsx("span",{className:"sm:hidden",children:f.label.split(" ")[0]}),u===f.value&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-skyrim-gold rounded-b-md transition-all duration-200"})]},f.value))})})}),o.jsx(W,{onClick:l,disabled:s===en.length-1,className:"flex items-center justify-center shrink-0 w-10 h-10 cursor-pointer","aria-label":`Go to next step: ${s<en.length-1?en[s+1].label:"none"}`,children:o.jsx(Rc,{className:"h-4 w-4"})})]})})})},P$=()=>{const e=Sr();return o.jsxs("div",{className:"flex flex-col min-h-full",children:[o.jsx($$,{currentPath:e.pathname}),o.jsx("div",{className:"flex-grow",children:o.jsx(mD,{})})]})};function O$(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function xS(e){const[t,n]=g.useState(void 0);return Ds(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var Vf="Switch",[B$,lee]=un(Vf),[I$,H$]=B$(Vf),vS=g.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:r,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[m,h]=g.useState(null),p=$e(t,y=>h(y)),v=g.useRef(!1),w=m?d||!!m.closest("form"):!0,[x,b]=Yn({prop:r,defaultProp:a??!1,onChange:u,caller:Vf});return o.jsxs(I$,{scope:n,checked:x,disabled:l,children:[o.jsx(xe.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":NS(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:p,onClick:te(e.onClick,y=>{b(N=>!N),w&&(v.current=y.isPropagationStopped(),v.current||y.stopPropagation())})}),w&&o.jsx(wS,{control:m,bubbles:!v.current,name:s,value:c,checked:x,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});vS.displayName=Vf;var yS="SwitchThumb",bS=g.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,r=H$(yS,n);return o.jsx(xe.span,{"data-state":NS(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t})});bS.displayName=yS;var U$="SwitchBubbleInput",wS=g.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...r},a)=>{const i=g.useRef(null),l=$e(i,a),c=O$(n),u=xS(t);return g.useEffect(()=>{const d=i.current;if(!d)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&h){const p=new Event("click",{bubbles:s});h.call(d,n),d.dispatchEvent(p)}},[c,n,s]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:l,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});wS.displayName=U$;function NS(e){return e?"checked":"unchecked"}var jS=vS,F$=bS;const qf=g.forwardRef(({className:e,...t},n)=>o.jsx(jS,{className:U("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-black data-[state=unchecked]:bg-gray-300",e),...t,ref:n,children:o.jsx(F$,{className:U("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-sm ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));qf.displayName=jS.displayName;function go({itemId:e,itemType:t,itemName:n,isInBuild:s=!1,className:r,onCheckedChange:a}){const{setRace:i,setStone:l,setReligion:c,addRegularTrait:u,addBonusTrait:d,removeTrait:f,addMajorSkill:m,removeMajorSkill:h,removeMinorSkill:p,addEquipment:v,removeEquipment:w,build:x}=gt(),y=s||(()=>{switch(t){case"race":return x.race===e;case"stone":return x.stone===e;case"religion":return x.religion===e;case"trait":return x.traits.regular.includes(e)||x.traits.bonus.includes(e);case"skill":return x.skills.major.includes(e)||x.skills.minor.includes(e);case"equipment":return x.equipment.includes(e);default:return!1}})(),N=S=>{if(a){a(S);return}switch(t){case"race":i(S?e:null);break;case"stone":l(S?e:null);break;case"religion":c(S?e:null);break;case"trait":S?x.traits.regular.length<2?u(e):x.traits.bonus.length<1&&d(e):f(e);break;case"skill":S?m(e):(h(e),p(e));break;case"equipment":S?v(e):w(e);break}},j=()=>y?`This ${t} is currently in your build`:`Add this ${t} to your character build`;return o.jsx("div",{className:U("flex items-center justify-center p-2 rounded-lg border transition-all duration-200 cursor-pointer hover:bg-muted/50",y?"border-[#d4af37] bg-[#d4af37]/20 shadow-md":"border-border",r),onClick:S=>{S.stopPropagation(),N(!y)},title:j(),children:o.jsx(qf,{checked:y,onCheckedChange:N,className:U("transition-all duration-200",y?"data-[state=checked]:bg-[#d4af37]":"")})})}function Da({categories:e,onSelect:t,placeholder:n="Search categories...",className:s=""}){const[r,a]=g.useState(!1),[i,l]=g.useState(null),[c,u]=g.useState(""),[d,f]=g.useState(-1),m=g.useRef(null),h=g.useRef(null),p=e.length===1?e[0]:null;g.useEffect(()=>{const k=E=>{m.current&&!m.current.contains(E.target)&&(a(!1),l(null),f(-1))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const v=i||p?(i||p).options.filter(k=>String(k.label||"").toLowerCase().includes(c.toLowerCase())||String(k.description||"").toLowerCase().includes(c.toLowerCase())):e.flatMap(k=>k.options.filter(E=>String(E.label||"").toLowerCase().includes(c.toLowerCase())||String(E.description||"").toLowerCase().includes(c.toLowerCase()))),w=k=>{u(k),a(!0),f(-1)},x=k=>{var E;l(k),u(""),(E=h.current)==null||E.focus()},b=k=>{t(k),u(""),l(null),a(!1),f(-1)},y=k=>{k.key==="ArrowDown"?(k.preventDefault(),f(E=>Math.min(E+1,v.length-1))):k.key==="ArrowUp"?(k.preventDefault(),f(E=>Math.max(E-1,-1))):k.key==="Enter"?(k.preventDefault(),d>=0&&v[d]&&b(v[d])):k.key==="Escape"&&(a(!1),l(null),f(-1))},N=()=>{a(!0)},j=i||p,S=!p&&!i;return o.jsxs("div",{ref:m,className:`relative ${s}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx(vi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(Cs,{ref:h,type:"text",placeholder:j?j.placeholder:n,value:c,onChange:k=>w(k.target.value),onFocus:N,onKeyDown:y,className:"pl-10 pr-10"}),o.jsx(W,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>a(!r),children:o.jsx(En,{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`})})]}),r&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",style:{zIndex:Dt.AUTOCOMPLETE+10},children:[S&&o.jsxs("div",{className:"p-2 border-b border-border",children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(k=>o.jsxs("button",{onClick:()=>x(k),className:"w-full text-left px-2 py-2 hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98] rounded text-sm flex items-center justify-between transition-all duration-200 cursor-pointer",children:[o.jsx("span",{children:k.name}),o.jsx(En,{className:"h-4 w-4"})]},k.id))]}),o.jsx("div",{className:"p-2",children:v.length===0?o.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):v.map((k,E)=>o.jsxs("button",{onClick:()=>b(k),className:`w-full text-left px-2 py-2 rounded text-sm transition-all duration-200 cursor-pointer ${E===d?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"}`,children:[o.jsx("div",{className:"font-medium",children:k.label||"Unnamed Option"}),k.description&&o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:k.description})]},k.id))})]})]})}const V$=["top","right","bottom","left"],ua=Math.min,vn=Math.max,_d=Math.round,ju=Math.floor,Es=e=>({x:e,y:e}),q$={left:"right",right:"left",bottom:"top",top:"bottom"},G$={start:"end",end:"start"};function Cg(e,t,n){return vn(e,ua(t,n))}function gr(e,t){return typeof e=="function"?e(t):e}function pr(e){return e.split("-")[0]}function el(e){return e.split("-")[1]}function Bx(e){return e==="x"?"y":"x"}function Ix(e){return e==="y"?"height":"width"}const Z$=new Set(["top","bottom"]);function js(e){return Z$.has(pr(e))?"y":"x"}function Hx(e){return Bx(js(e))}function Y$(e,t,n){n===void 0&&(n=!1);const s=el(e),r=Hx(e),a=Ix(r);let i=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Ad(i)),[i,Ad(i)]}function X$(e){const t=Ad(e);return[Eg(e),t,Eg(t)]}function Eg(e){return e.replace(/start|end/g,t=>G$[t])}const Gy=["left","right"],Zy=["right","left"],W$=["top","bottom"],K$=["bottom","top"];function Q$(e,t,n){switch(e){case"top":case"bottom":return n?t?Zy:Gy:t?Gy:Zy;case"left":case"right":return t?W$:K$;default:return[]}}function J$(e,t,n,s){const r=el(e);let a=Q$(pr(e),n==="start",s);return r&&(a=a.map(i=>i+"-"+r),t&&(a=a.concat(a.map(Eg)))),a}function Ad(e){return e.replace(/left|right|bottom|top/g,t=>q$[t])}function eP(e){return{top:0,right:0,bottom:0,left:0,...e}}function SS(e){return typeof e!="number"?eP(e):{top:e,right:e,bottom:e,left:e}}function Td(e){const{x:t,y:n,width:s,height:r}=e;return{width:s,height:r,top:n,left:t,right:t+s,bottom:n+r,x:t,y:n}}function Yy(e,t,n){let{reference:s,floating:r}=e;const a=js(t),i=Hx(t),l=Ix(i),c=pr(t),u=a==="y",d=s.x+s.width/2-r.width/2,f=s.y+s.height/2-r.height/2,m=s[l]/2-r[l]/2;let h;switch(c){case"top":h={x:d,y:s.y-r.height};break;case"bottom":h={x:d,y:s.y+s.height};break;case"right":h={x:s.x+s.width,y:f};break;case"left":h={x:s.x-r.width,y:f};break;default:h={x:s.x,y:s.y}}switch(el(t)){case"start":h[i]-=m*(n&&u?-1:1);break;case"end":h[i]+=m*(n&&u?-1:1);break}return h}const tP=async(e,t,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:f}=Yy(u,s,c),m=s,h={},p=0;for(let v=0;v<l.length;v++){const{name:w,fn:x}=l[v],{x:b,y,data:N,reset:j}=await x({x:d,y:f,initialPlacement:s,placement:m,strategy:r,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});d=b??d,f=y??f,h={...h,[w]:{...h[w],...N}},j&&p<=50&&(p++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:r}):j.rects),{x:d,y:f}=Yy(u,m,c)),v=-1)}return{x:d,y:f,placement:m,strategy:r,middlewareData:h}};async function ac(e,t){var n;t===void 0&&(t={});const{x:s,y:r,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:h=0}=gr(t,e),p=SS(h),w=l[m?f==="floating"?"reference":"floating":f],x=Td(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(w)))==null||n?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=f==="floating"?{x:s,y:r,width:i.floating.width,height:i.floating.height}:i.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),N=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},j=Td(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:y,strategy:c}):b);return{top:(x.top-j.top+p.top)/N.y,bottom:(j.bottom-x.bottom+p.bottom)/N.y,left:(x.left-j.left+p.left)/N.x,right:(j.right-x.right+p.right)/N.x}}const nP=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:r,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=gr(e,t)||{};if(u==null)return{};const f=SS(d),m={x:n,y:s},h=Hx(r),p=Ix(h),v=await i.getDimensions(u),w=h==="y",x=w?"top":"left",b=w?"bottom":"right",y=w?"clientHeight":"clientWidth",N=a.reference[p]+a.reference[h]-m[h]-a.floating[p],j=m[h]-a.reference[h],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let k=S?S[y]:0;(!k||!await(i.isElement==null?void 0:i.isElement(S)))&&(k=l.floating[y]||a.floating[p]);const E=N/2-j/2,C=k/2-v[p]/2-1,_=ua(f[x],C),P=ua(f[b],C),O=_,$=k-v[p]-P,T=k/2-v[p]/2+E,z=Cg(O,T,$),A=!c.arrow&&el(r)!=null&&T!==z&&a.reference[p]/2-(T<O?_:P)-v[p]/2<0,D=A?T<O?T-O:T-$:0;return{[h]:m[h]+D,data:{[h]:z,centerOffset:T-z-D,...A&&{alignmentOffset:D}},reset:A}}}),sP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:r,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...w}=gr(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=pr(r),b=js(l),y=pr(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(y||!v?[Ad(l)]:X$(l)),S=p!=="none";!m&&S&&j.push(...J$(l,v,p,N));const k=[l,...j],E=await ac(t,w),C=[];let _=((s=a.flip)==null?void 0:s.overflows)||[];if(d&&C.push(E[x]),f){const T=Y$(r,i,N);C.push(E[T[0]],E[T[1]])}if(_=[..._,{placement:r,overflows:C}],!C.every(T=>T<=0)){var P,O;const T=(((P=a.flip)==null?void 0:P.index)||0)+1,z=k[T];if(z&&(!(f==="alignment"?b!==js(z):!1)||_.every(M=>M.overflows[0]>0&&js(M.placement)===b)))return{data:{index:T,overflows:_},reset:{placement:z}};let A=(O=_.filter(D=>D.overflows[0]<=0).sort((D,M)=>D.overflows[1]-M.overflows[1])[0])==null?void 0:O.placement;if(!A)switch(h){case"bestFit":{var $;const D=($=_.filter(M=>{if(S){const R=js(M.placement);return R===b||R==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(R=>R>0).reduce((R,B)=>R+B,0)]).sort((M,R)=>M[1]-R[1])[0])==null?void 0:$[0];D&&(A=D);break}case"initialPlacement":A=l;break}if(r!==A)return{reset:{placement:A}}}return{}}}};function Xy(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Wy(e){return V$.some(t=>e[t]>=0)}const rP=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...r}=gr(e,t);switch(s){case"referenceHidden":{const a=await ac(t,{...r,elementContext:"reference"}),i=Xy(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Wy(i)}}}case"escaped":{const a=await ac(t,{...r,altBoundary:!0}),i=Xy(a,n.floating);return{data:{escapedOffsets:i,escaped:Wy(i)}}}default:return{}}}}},kS=new Set(["left","top"]);async function aP(e,t){const{placement:n,platform:s,elements:r}=e,a=await(s.isRTL==null?void 0:s.isRTL(r.floating)),i=pr(n),l=el(n),c=js(n)==="y",u=kS.has(i)?-1:1,d=a&&c?-1:1,f=gr(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof p=="number"&&(h=l==="end"?p*-1:p),c?{x:h*d,y:m*u}:{x:m*u,y:h*d}}const oP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:r,y:a,placement:i,middlewareData:l}=t,c=await aP(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:a+c.y,data:{...c,placement:i}}}}},iP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:r}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x,y:b}=w;return{x,y:b}}},...c}=gr(e,t),u={x:n,y:s},d=await ac(t,c),f=js(pr(r)),m=Bx(f);let h=u[m],p=u[f];if(a){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",b=h+d[w],y=h-d[x];h=Cg(b,h,y)}if(i){const w=f==="y"?"top":"left",x=f==="y"?"bottom":"right",b=p+d[w],y=p-d[x];p=Cg(b,p,y)}const v=l.fn({...t,[m]:h,[f]:p});return{...v,data:{x:v.x-n,y:v.y-s,enabled:{[m]:a,[f]:i}}}}}},lP=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:r,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=gr(e,t),d={x:n,y:s},f=js(r),m=Bx(f);let h=d[m],p=d[f];const v=gr(l,t),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const y=m==="y"?"height":"width",N=a.reference[m]-a.floating[y]+w.mainAxis,j=a.reference[m]+a.reference[y]-w.mainAxis;h<N?h=N:h>j&&(h=j)}if(u){var x,b;const y=m==="y"?"width":"height",N=kS.has(pr(r)),j=a.reference[f]-a.floating[y]+(N&&((x=i.offset)==null?void 0:x[f])||0)+(N?0:w.crossAxis),S=a.reference[f]+a.reference[y]+(N?0:((b=i.offset)==null?void 0:b[f])||0)-(N?w.crossAxis:0);p<j?p=j:p>S&&(p=S)}return{[m]:h,[f]:p}}}},cP=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:r,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=gr(e,t),d=await ac(t,u),f=pr(r),m=el(r),h=js(r)==="y",{width:p,height:v}=a.floating;let w,x;f==="top"||f==="bottom"?(w=f,x=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,w=m==="end"?"top":"bottom");const b=v-d.top-d.bottom,y=p-d.left-d.right,N=ua(v-d[w],b),j=ua(p-d[x],y),S=!t.middlewareData.shift;let k=N,E=j;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=y),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(k=b),S&&!m){const _=vn(d.left,0),P=vn(d.right,0),O=vn(d.top,0),$=vn(d.bottom,0);h?E=p-2*(_!==0||P!==0?_+P:vn(d.left,d.right)):k=v-2*(O!==0||$!==0?O+$:vn(d.top,d.bottom))}await c({...t,availableWidth:E,availableHeight:k});const C=await i.getDimensions(l.floating);return p!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function Gf(){return typeof window<"u"}function tl(e){return CS(e)?(e.nodeName||"").toLowerCase():"#document"}function Nn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Os(e){var t;return(t=(CS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function CS(e){return Gf()?e instanceof Node||e instanceof Nn(e).Node:!1}function rs(e){return Gf()?e instanceof Element||e instanceof Nn(e).Element:!1}function zs(e){return Gf()?e instanceof HTMLElement||e instanceof Nn(e).HTMLElement:!1}function Ky(e){return!Gf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Nn(e).ShadowRoot}const uP=new Set(["inline","contents"]);function Oc(e){const{overflow:t,overflowX:n,overflowY:s,display:r}=as(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!uP.has(r)}const dP=new Set(["table","td","th"]);function fP(e){return dP.has(tl(e))}const mP=[":popover-open",":modal"];function Zf(e){return mP.some(t=>{try{return e.matches(t)}catch{return!1}})}const hP=["transform","translate","scale","rotate","perspective"],gP=["transform","translate","scale","rotate","perspective","filter"],pP=["paint","layout","strict","content"];function Ux(e){const t=Fx(),n=rs(e)?as(e):e;return hP.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||gP.some(s=>(n.willChange||"").includes(s))||pP.some(s=>(n.contain||"").includes(s))}function xP(e){let t=da(e);for(;zs(t)&&!bi(t);){if(Ux(t))return t;if(Zf(t))return null;t=da(t)}return null}function Fx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vP=new Set(["html","body","#document"]);function bi(e){return vP.has(tl(e))}function as(e){return Nn(e).getComputedStyle(e)}function Yf(e){return rs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function da(e){if(tl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ky(e)&&e.host||Os(e);return Ky(t)?t.host:t}function ES(e){const t=da(e);return bi(t)?e.ownerDocument?e.ownerDocument.body:e.body:zs(t)&&Oc(t)?t:ES(t)}function oc(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=ES(e),a=r===((s=e.ownerDocument)==null?void 0:s.body),i=Nn(r);if(a){const l=_g(i);return t.concat(i,i.visualViewport||[],Oc(r)?r:[],l&&n?oc(l):[])}return t.concat(r,oc(r,[],n))}function _g(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _S(e){const t=as(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const r=zs(e),a=r?e.offsetWidth:n,i=r?e.offsetHeight:s,l=_d(n)!==a||_d(s)!==i;return l&&(n=a,s=i),{width:n,height:s,$:l}}function Vx(e){return rs(e)?e:e.contextElement}function ri(e){const t=Vx(e);if(!zs(t))return Es(1);const n=t.getBoundingClientRect(),{width:s,height:r,$:a}=_S(t);let i=(a?_d(n.width):n.width)/s,l=(a?_d(n.height):n.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const yP=Es(0);function AS(e){const t=Nn(e);return!Fx()||!t.visualViewport?yP:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bP(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Nn(e)?!1:t}function Xa(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=Vx(e);let i=Es(1);t&&(s?rs(s)&&(i=ri(s)):i=ri(e));const l=bP(a,n,s)?AS(a):Es(0);let c=(r.left+l.x)/i.x,u=(r.top+l.y)/i.y,d=r.width/i.x,f=r.height/i.y;if(a){const m=Nn(a),h=s&&rs(s)?Nn(s):s;let p=m,v=_g(p);for(;v&&s&&h!==p;){const w=ri(v),x=v.getBoundingClientRect(),b=as(v),y=x.left+(v.clientLeft+parseFloat(b.paddingLeft))*w.x,N=x.top+(v.clientTop+parseFloat(b.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,f*=w.y,c+=y,u+=N,p=Nn(v),v=_g(p)}}return Td({width:d,height:f,x:c,y:u})}function qx(e,t){const n=Yf(e).scrollLeft;return t?t.left+n:Xa(Os(e)).left+n}function TS(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=s.left+t.scrollLeft-(n?0:qx(e,s)),a=s.top+t.scrollTop;return{x:r,y:a}}function wP(e){let{elements:t,rect:n,offsetParent:s,strategy:r}=e;const a=r==="fixed",i=Os(s),l=t?Zf(t.floating):!1;if(s===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Es(1);const d=Es(0),f=zs(s);if((f||!f&&!a)&&((tl(s)!=="body"||Oc(i))&&(c=Yf(s)),zs(s))){const h=Xa(s);u=ri(s),d.x=h.x+s.clientLeft,d.y=h.y+s.clientTop}const m=i&&!f&&!a?TS(i,c,!0):Es(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function NP(e){return Array.from(e.getClientRects())}function jP(e){const t=Os(e),n=Yf(e),s=e.ownerDocument.body,r=vn(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=vn(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-n.scrollLeft+qx(e);const l=-n.scrollTop;return as(s).direction==="rtl"&&(i+=vn(t.clientWidth,s.clientWidth)-r),{width:r,height:a,x:i,y:l}}function SP(e,t){const n=Nn(e),s=Os(e),r=n.visualViewport;let a=s.clientWidth,i=s.clientHeight,l=0,c=0;if(r){a=r.width,i=r.height;const u=Fx();(!u||u&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:a,height:i,x:l,y:c}}const kP=new Set(["absolute","fixed"]);function CP(e,t){const n=Xa(e,!0,t==="fixed"),s=n.top+e.clientTop,r=n.left+e.clientLeft,a=zs(e)?ri(e):Es(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=r*a.x,u=s*a.y;return{width:i,height:l,x:c,y:u}}function Qy(e,t,n){let s;if(t==="viewport")s=SP(e,n);else if(t==="document")s=jP(Os(e));else if(rs(t))s=CP(t,n);else{const r=AS(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Td(s)}function MS(e,t){const n=da(e);return n===t||!rs(n)||bi(n)?!1:as(n).position==="fixed"||MS(n,t)}function EP(e,t){const n=t.get(e);if(n)return n;let s=oc(e,[],!1).filter(l=>rs(l)&&tl(l)!=="body"),r=null;const a=as(e).position==="fixed";let i=a?da(e):e;for(;rs(i)&&!bi(i);){const l=as(i),c=Ux(i);!c&&l.position==="fixed"&&(r=null),(a?!c&&!r:!c&&l.position==="static"&&!!r&&kP.has(r.position)||Oc(i)&&!c&&MS(e,i))?s=s.filter(d=>d!==i):r=l,i=da(i)}return t.set(e,s),s}function _P(e){let{element:t,boundary:n,rootBoundary:s,strategy:r}=e;const i=[...n==="clippingAncestors"?Zf(t)?[]:EP(t,this._c):[].concat(n),s],l=i[0],c=i.reduce((u,d)=>{const f=Qy(t,d,r);return u.top=vn(f.top,u.top),u.right=ua(f.right,u.right),u.bottom=ua(f.bottom,u.bottom),u.left=vn(f.left,u.left),u},Qy(t,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function AP(e){const{width:t,height:n}=_S(e);return{width:t,height:n}}function TP(e,t,n){const s=zs(t),r=Os(t),a=n==="fixed",i=Xa(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Es(0);function u(){c.x=qx(r)}if(s||!s&&!a)if((tl(t)!=="body"||Oc(r))&&(l=Yf(t)),s){const h=Xa(t,!0,a,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else r&&u();a&&!s&&r&&u();const d=r&&!s&&!a?TS(r,l):Es(0),f=i.left+l.scrollLeft-c.x-d.x,m=i.top+l.scrollTop-c.y-d.y;return{x:f,y:m,width:i.width,height:i.height}}function th(e){return as(e).position==="static"}function Jy(e,t){if(!zs(e)||as(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Os(e)===n&&(n=n.ownerDocument.body),n}function RS(e,t){const n=Nn(e);if(Zf(e))return n;if(!zs(e)){let r=da(e);for(;r&&!bi(r);){if(rs(r)&&!th(r))return r;r=da(r)}return n}let s=Jy(e,t);for(;s&&fP(s)&&th(s);)s=Jy(s,t);return s&&bi(s)&&th(s)&&!Ux(s)?n:s||xP(e)||n}const MP=async function(e){const t=this.getOffsetParent||RS,n=this.getDimensions,s=await n(e.floating);return{reference:TP(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function RP(e){return as(e).direction==="rtl"}const DP={convertOffsetParentRelativeRectToViewportRelativeRect:wP,getDocumentElement:Os,getClippingRect:_P,getOffsetParent:RS,getElementRects:MP,getClientRects:NP,getDimensions:AP,getScale:ri,isElement:rs,isRTL:RP};function DS(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function zP(e,t){let n=null,s;const r=Os(e);function a(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:f,width:m,height:h}=u;if(l||t(),!m||!h)return;const p=ju(f),v=ju(r.clientWidth-(d+m)),w=ju(r.clientHeight-(f+h)),x=ju(d),y={rootMargin:-p+"px "+-v+"px "+-w+"px "+-x+"px",threshold:vn(0,ua(1,c))||1};let N=!0;function j(S){const k=S[0].intersectionRatio;if(k!==c){if(!N)return i();k?i(!1,k):s=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!DS(u,e.getBoundingClientRect())&&i(),N=!1}try{n=new IntersectionObserver(j,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(j,y)}n.observe(e)}return i(!0),a}function LP(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=Vx(e),d=r||a?[...u?oc(u):[],...oc(t)]:[];d.forEach(x=>{r&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const f=u&&l?zP(u,n):null;let m=-1,h=null;i&&(h=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var y;(y=h)==null||y.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let p,v=c?Xa(e):null;c&&w();function w(){const x=Xa(e);v&&!DS(v,x)&&n(),v=x,p=requestAnimationFrame(w)}return n(),()=>{var x;d.forEach(b=>{r&&b.removeEventListener("scroll",n),a&&b.removeEventListener("resize",n)}),f==null||f(),(x=h)==null||x.disconnect(),h=null,c&&cancelAnimationFrame(p)}}const $P=oP,PP=iP,OP=sP,BP=cP,IP=rP,eb=nP,HP=lP,UP=(e,t,n)=>{const s=new Map,r={platform:DP,...n},a={...r.platform,_c:s};return tP(e,t,{...r,platform:a})};var FP=typeof document<"u",VP=function(){},od=FP?g.useLayoutEffect:VP;function Md(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Md(e[s],t[s]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,r[s]))return!1;for(s=n;s--!==0;){const a=r[s];if(!(a==="_owner"&&e.$$typeof)&&!Md(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function zS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tb(e,t){const n=zS(e);return Math.round(t*n)/n}function nh(e){const t=g.useRef(e);return od(()=>{t.current=e}),t}function qP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,h]=g.useState(s);Md(m,s)||h(s);const[p,v]=g.useState(null),[w,x]=g.useState(null),b=g.useCallback(M=>{M!==S.current&&(S.current=M,v(M))},[]),y=g.useCallback(M=>{M!==k.current&&(k.current=M,x(M))},[]),N=a||p,j=i||w,S=g.useRef(null),k=g.useRef(null),E=g.useRef(d),C=c!=null,_=nh(c),P=nh(r),O=nh(u),$=g.useCallback(()=>{if(!S.current||!k.current)return;const M={placement:t,strategy:n,middleware:m};P.current&&(M.platform=P.current),UP(S.current,k.current,M).then(R=>{const B={...R,isPositioned:O.current!==!1};T.current&&!Md(E.current,B)&&(E.current=B,Pf.flushSync(()=>{f(B)}))})},[m,t,n,P,O]);od(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const T=g.useRef(!1);od(()=>(T.current=!0,()=>{T.current=!1}),[]),od(()=>{if(N&&(S.current=N),j&&(k.current=j),N&&j){if(_.current)return _.current(N,j,$);$()}},[N,j,$,_,C]);const z=g.useMemo(()=>({reference:S,floating:k,setReference:b,setFloating:y}),[b,y]),A=g.useMemo(()=>({reference:N,floating:j}),[N,j]),D=g.useMemo(()=>{const M={position:n,left:0,top:0};if(!A.floating)return M;const R=tb(A.floating,d.x),B=tb(A.floating,d.y);return l?{...M,transform:"translate("+R+"px, "+B+"px)",...zS(A.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:B}},[n,l,A.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:$,refs:z,elements:A,floatingStyles:D}),[d,$,z,A,D])}const GP=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:r}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?eb({element:s.current,padding:r}).fn(n):{}:s?eb({element:s,padding:r}).fn(n):{}}}},ZP=(e,t)=>({...$P(e),options:[e,t]}),YP=(e,t)=>({...PP(e),options:[e,t]}),XP=(e,t)=>({...HP(e),options:[e,t]}),WP=(e,t)=>({...OP(e),options:[e,t]}),KP=(e,t)=>({...BP(e),options:[e,t]}),QP=(e,t)=>({...IP(e),options:[e,t]}),JP=(e,t)=>({...GP(e),options:[e,t]});var eO="Arrow",LS=g.forwardRef((e,t)=>{const{children:n,width:s=10,height:r=5,...a}=e;return o.jsx(xe.svg,{...a,ref:t,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});LS.displayName=eO;var tO=LS,Gx="Popper",[$S,nl]=un(Gx),[nO,PS]=$S(Gx),OS=e=>{const{__scopePopper:t,children:n}=e,[s,r]=g.useState(null);return o.jsx(nO,{scope:t,anchor:s,onAnchorChange:r,children:n})};OS.displayName=Gx;var BS="PopperAnchor",IS=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...r}=e,a=PS(BS,n),i=g.useRef(null),l=$e(t,i);return g.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:o.jsx(xe.div,{...r,ref:l})});IS.displayName=BS;var Zx="PopperContent",[sO,rO]=$S(Zx),HS=g.forwardRef((e,t)=>{var ee,pe,fe,we,F,Y;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:h="optimized",onPlaced:p,...v}=e,w=PS(Zx,n),[x,b]=g.useState(null),y=$e(t,Q=>b(Q)),[N,j]=g.useState(null),S=xS(N),k=(S==null?void 0:S.width)??0,E=(S==null?void 0:S.height)??0,C=s+(a!=="center"?"-"+a:""),_=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],O=P.length>0,$={padding:_,boundary:P.filter(oO),altBoundary:O},{refs:T,floatingStyles:z,placement:A,isPositioned:D,middlewareData:M}=qP({strategy:"fixed",placement:C,whileElementsMounted:(...Q)=>LP(...Q,{animationFrame:h==="always"}),elements:{reference:w.anchor},middleware:[ZP({mainAxis:r+E,alignmentAxis:i}),c&&YP({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?XP():void 0,...$}),c&&WP({...$}),KP({...$,apply:({elements:Q,rects:X,availableWidth:se,availableHeight:ve})=>{const{width:ue,height:ne}=X.reference,Re=Q.floating.style;Re.setProperty("--radix-popper-available-width",`${se}px`),Re.setProperty("--radix-popper-available-height",`${ve}px`),Re.setProperty("--radix-popper-anchor-width",`${ue}px`),Re.setProperty("--radix-popper-anchor-height",`${ne}px`)}}),N&&JP({element:N,padding:l}),iO({arrowWidth:k,arrowHeight:E}),m&&QP({strategy:"referenceHidden",...$})]}),[R,B]=VS(A),H=Ht(p);Ds(()=>{D&&(H==null||H())},[D,H]);const I=(ee=M.arrow)==null?void 0:ee.x,V=(pe=M.arrow)==null?void 0:pe.y,G=((fe=M.arrow)==null?void 0:fe.centerOffset)!==0,[J,oe]=g.useState();return Ds(()=>{x&&oe(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:D?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(we=M.transformOrigin)==null?void 0:we.x,(F=M.transformOrigin)==null?void 0:F.y].join(" "),...((Y=M.hide)==null?void 0:Y.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(sO,{scope:n,placedSide:R,onArrowChange:j,arrowX:I,arrowY:V,shouldHideArrow:G,children:o.jsx(xe.div,{"data-side":R,"data-align":B,...v,ref:y,style:{...v.style,animation:D?void 0:"none"}})})})});HS.displayName=Zx;var US="PopperArrow",aO={top:"bottom",right:"left",bottom:"top",left:"right"},FS=g.forwardRef(function(t,n){const{__scopePopper:s,...r}=t,a=rO(US,s),i=aO[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(tO,{...r,ref:n,style:{...r.style,display:"block"}})})});FS.displayName=US;function oO(e){return e!==null}var iO=e=>({name:"transformOrigin",options:e,fn(t){var w,x,b;const{placement:n,rects:s,middlewareData:r}=t,i=((w=r.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,d]=VS(n),f={start:"0%",center:"50%",end:"100%"}[d],m=(((x=r.arrow)==null?void 0:x.x)??0)+l/2,h=(((b=r.arrow)==null?void 0:b.y)??0)+c/2;let p="",v="";return u==="bottom"?(p=i?f:`${m}px`,v=`${-c}px`):u==="top"?(p=i?f:`${m}px`,v=`${s.floating.height+c}px`):u==="right"?(p=`${-c}px`,v=i?f:`${h}px`):u==="left"&&(p=`${s.floating.width+c}px`,v=i?f:`${h}px`),{data:{x:p,y:v}}}});function VS(e){const[t,n="center"]=e.split("-");return[t,n]}var qS=OS,Yx=IS,Xx=HS,Wx=FS,Ag=["Enter"," "],lO=["ArrowDown","PageUp","Home"],GS=["ArrowUp","PageDown","End"],cO=[...lO,...GS],uO={ltr:[...Ag,"ArrowRight"],rtl:[...Ag,"ArrowLeft"]},dO={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Bc="Menu",[ic,fO,mO]=Lx(Bc),[po,ZS]=un(Bc,[mO,nl,Ki]),Xf=nl(),YS=Ki(),[hO,xo]=po(Bc),[gO,Ic]=po(Bc),XS=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:r,onOpenChange:a,modal:i=!0}=e,l=Xf(t),[c,u]=g.useState(null),d=g.useRef(!1),f=Ht(a),m=Wi(r);return g.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),o.jsx(qS,{...l,children:o.jsx(hO,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:u,children:o.jsx(gO,{scope:t,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:i,children:s})})})};XS.displayName=Bc;var pO="MenuAnchor",Kx=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,r=Xf(n);return o.jsx(Yx,{...r,...s,ref:t})});Kx.displayName=pO;var Qx="MenuPortal",[xO,WS]=po(Qx,{forceMount:void 0}),KS=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:r}=e,a=xo(Qx,t);return o.jsx(xO,{scope:t,forceMount:n,children:o.jsx(qt,{present:n||a.open,children:o.jsx(Nx,{asChild:!0,container:r,children:s})})})};KS.displayName=Qx;var Vn="MenuContent",[vO,Jx]=po(Vn),QS=g.forwardRef((e,t)=>{const n=WS(Vn,e.__scopeMenu),{forceMount:s=n.forceMount,...r}=e,a=xo(Vn,e.__scopeMenu),i=Ic(Vn,e.__scopeMenu);return o.jsx(ic.Provider,{scope:e.__scopeMenu,children:o.jsx(qt,{present:s||a.open,children:o.jsx(ic.Slot,{scope:e.__scopeMenu,children:i.modal?o.jsx(yO,{...r,ref:t}):o.jsx(bO,{...r,ref:t})})})})}),yO=g.forwardRef((e,t)=>{const n=xo(Vn,e.__scopeMenu),s=g.useRef(null),r=$e(t,s);return g.useEffect(()=>{const a=s.current;if(a)return _j(a)},[]),o.jsx(e0,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:te(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),bO=g.forwardRef((e,t)=>{const n=xo(Vn,e.__scopeMenu);return o.jsx(e0,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),wO=yi("MenuContent.ScrollLock"),e0=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:h,disableOutsideScroll:p,...v}=e,w=xo(Vn,n),x=Ic(Vn,n),b=Xf(n),y=YS(n),N=fO(n),[j,S]=g.useState(null),k=g.useRef(null),E=$e(t,k,w.onContentChange),C=g.useRef(0),_=g.useRef(""),P=g.useRef(0),O=g.useRef(null),$=g.useRef("right"),T=g.useRef(0),z=p?jx:g.Fragment,A=p?{as:wO,allowPinchZoom:!0}:void 0,D=R=>{var ee,pe;const B=_.current+R,H=N().filter(fe=>!fe.disabled),I=document.activeElement,V=(ee=H.find(fe=>fe.ref.current===I))==null?void 0:ee.textValue,G=H.map(fe=>fe.textValue),J=DO(G,B,V),oe=(pe=H.find(fe=>fe.textValue===J))==null?void 0:pe.ref.current;(function fe(we){_.current=we,window.clearTimeout(C.current),we!==""&&(C.current=window.setTimeout(()=>fe(""),1e3))})(B),oe&&setTimeout(()=>oe.focus())};g.useEffect(()=>()=>window.clearTimeout(C.current),[]),yj();const M=g.useCallback(R=>{var H,I;return $.current===((H=O.current)==null?void 0:H.side)&&LO(R,(I=O.current)==null?void 0:I.area)},[]);return o.jsx(vO,{scope:n,searchRef:_,onItemEnter:g.useCallback(R=>{M(R)&&R.preventDefault()},[M]),onItemLeave:g.useCallback(R=>{var B;M(R)||((B=k.current)==null||B.focus(),S(null))},[M]),onTriggerLeave:g.useCallback(R=>{M(R)&&R.preventDefault()},[M]),pointerGraceTimerRef:P,onPointerGraceIntentChange:g.useCallback(R=>{O.current=R},[]),children:o.jsx(z,{...A,children:o.jsx(wx,{asChild:!0,trapped:r,onMountAutoFocus:te(a,R=>{var B;R.preventDefault(),(B=k.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:o.jsx($c,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:h,children:o.jsx($x,{asChild:!0,...y,dir:x.dir,orientation:"vertical",loop:s,currentTabStopId:j,onCurrentTabStopIdChange:S,onEntryFocus:te(c,R=>{x.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Xx,{role:"menu","aria-orientation":"vertical","data-state":h2(w.open),"data-radix-menu-content":"",dir:x.dir,...b,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:te(v.onKeyDown,R=>{const H=R.target.closest("[data-radix-menu-content]")===R.currentTarget,I=R.ctrlKey||R.altKey||R.metaKey,V=R.key.length===1;H&&(R.key==="Tab"&&R.preventDefault(),!I&&V&&D(R.key));const G=k.current;if(R.target!==G||!cO.includes(R.key))return;R.preventDefault();const oe=N().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);GS.includes(R.key)&&oe.reverse(),MO(oe)}),onBlur:te(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(C.current),_.current="")}),onPointerMove:te(e.onPointerMove,lc(R=>{const B=R.target,H=T.current!==R.clientX;if(R.currentTarget.contains(B)&&H){const I=R.clientX>T.current?"right":"left";$.current=I,T.current=R.clientX}}))})})})})})})});QS.displayName=Vn;var NO="MenuGroup",t0=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return o.jsx(xe.div,{role:"group",...s,ref:t})});t0.displayName=NO;var jO="MenuLabel",JS=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return o.jsx(xe.div,{...s,ref:t})});JS.displayName=jO;var Rd="MenuItem",nb="menu.itemSelect",Wf=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...r}=e,a=g.useRef(null),i=Ic(Rd,e.__scopeMenu),l=Jx(Rd,e.__scopeMenu),c=$e(t,a),u=g.useRef(!1),d=()=>{const f=a.current;if(!n&&f){const m=new CustomEvent(nb,{bubbles:!0,cancelable:!0});f.addEventListener(nb,h=>s==null?void 0:s(h),{once:!0}),gj(f,m),m.defaultPrevented?u.current=!1:i.onClose()}};return o.jsx(e2,{...r,ref:c,disabled:n,onClick:te(e.onClick,d),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),u.current=!0},onPointerUp:te(e.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:te(e.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||Ag.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Wf.displayName=Rd;var e2=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...a}=e,i=Jx(Rd,n),l=YS(n),c=g.useRef(null),u=$e(t,c),[d,f]=g.useState(!1),[m,h]=g.useState("");return g.useEffect(()=>{const p=c.current;p&&h((p.textContent??"").trim())},[a.children]),o.jsx(ic.ItemSlot,{scope:n,disabled:s,textValue:r??m,children:o.jsx(Px,{asChild:!0,...l,focusable:!s,children:o.jsx(xe.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:u,onPointerMove:te(e.onPointerMove,lc(p=>{s?i.onItemLeave(p):(i.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:te(e.onPointerLeave,lc(p=>i.onItemLeave(p))),onFocus:te(e.onFocus,()=>f(!0)),onBlur:te(e.onBlur,()=>f(!1))})})})}),SO="MenuCheckboxItem",t2=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...r}=e;return o.jsx(o2,{scope:e.__scopeMenu,checked:n,children:o.jsx(Wf,{role:"menuitemcheckbox","aria-checked":Dd(n)?"mixed":n,...r,ref:t,"data-state":s0(n),onSelect:te(r.onSelect,()=>s==null?void 0:s(Dd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});t2.displayName=SO;var n2="MenuRadioGroup",[kO,CO]=po(n2,{value:void 0,onValueChange:()=>{}}),s2=g.forwardRef((e,t)=>{const{value:n,onValueChange:s,...r}=e,a=Ht(s);return o.jsx(kO,{scope:e.__scopeMenu,value:n,onValueChange:a,children:o.jsx(t0,{...r,ref:t})})});s2.displayName=n2;var r2="MenuRadioItem",a2=g.forwardRef((e,t)=>{const{value:n,...s}=e,r=CO(r2,e.__scopeMenu),a=n===r.value;return o.jsx(o2,{scope:e.__scopeMenu,checked:a,children:o.jsx(Wf,{role:"menuitemradio","aria-checked":a,...s,ref:t,"data-state":s0(a),onSelect:te(s.onSelect,()=>{var i;return(i=r.onValueChange)==null?void 0:i.call(r,n)},{checkForDefaultPrevented:!1})})})});a2.displayName=r2;var n0="MenuItemIndicator",[o2,EO]=po(n0,{checked:!1}),i2=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...r}=e,a=EO(n0,n);return o.jsx(qt,{present:s||Dd(a.checked)||a.checked===!0,children:o.jsx(xe.span,{...r,ref:t,"data-state":s0(a.checked)})})});i2.displayName=n0;var _O="MenuSeparator",l2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return o.jsx(xe.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});l2.displayName=_O;var AO="MenuArrow",c2=g.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,r=Xf(n);return o.jsx(Wx,{...r,...s,ref:t})});c2.displayName=AO;var TO="MenuSub",[cee,u2]=po(TO),_l="MenuSubTrigger",d2=g.forwardRef((e,t)=>{const n=xo(_l,e.__scopeMenu),s=Ic(_l,e.__scopeMenu),r=u2(_l,e.__scopeMenu),a=Jx(_l,e.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},d=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>d,[d]),g.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(Kx,{asChild:!0,...u,children:o.jsx(e2,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":h2(n.open),...e,ref:Of(t,r.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:te(e.onPointerMove,lc(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:te(e.onPointerLeave,lc(f=>{var h,p;d();const m=(h=n.content)==null?void 0:h.getBoundingClientRect();if(m){const v=(p=n.content)==null?void 0:p.dataset.side,w=v==="right",x=w?-5:5,b=m[w?"left":"right"],y=m[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:b,y:m.top},{x:y,y:m.top},{x:y,y:m.bottom},{x:b,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:te(e.onKeyDown,f=>{var h;const m=a.searchRef.current!=="";e.disabled||m&&f.key===" "||uO[s.dir].includes(f.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),f.preventDefault())})})})});d2.displayName=_l;var f2="MenuSubContent",m2=g.forwardRef((e,t)=>{const n=WS(Vn,e.__scopeMenu),{forceMount:s=n.forceMount,...r}=e,a=xo(Vn,e.__scopeMenu),i=Ic(Vn,e.__scopeMenu),l=u2(f2,e.__scopeMenu),c=g.useRef(null),u=$e(t,c);return o.jsx(ic.Provider,{scope:e.__scopeMenu,children:o.jsx(qt,{present:s||a.open,children:o.jsx(ic.Slot,{scope:e.__scopeMenu,children:o.jsx(e0,{id:l.contentId,"aria-labelledby":l.triggerId,...r,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;i.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:te(e.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:te(e.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:te(e.onKeyDown,d=>{var h;const f=d.currentTarget.contains(d.target),m=dO[i.dir].includes(d.key);f&&m&&(a.onOpenChange(!1),(h=l.trigger)==null||h.focus(),d.preventDefault())})})})})})});m2.displayName=f2;function h2(e){return e?"open":"closed"}function Dd(e){return e==="indeterminate"}function s0(e){return Dd(e)?"indeterminate":e?"checked":"unchecked"}function MO(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function RO(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function DO(e,t,n){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=RO(e,Math.max(a,0));r.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function zO(e,t){const{x:n,y:s}=e;let r=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,d=l.y,f=c.x,m=c.y;d>s!=m>s&&n<(f-u)*(s-d)/(m-d)+u&&(r=!r)}return r}function LO(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return zO(n,t)}function lc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var $O=XS,PO=Kx,OO=KS,BO=QS,IO=t0,HO=JS,UO=Wf,FO=t2,VO=s2,qO=a2,GO=i2,ZO=l2,YO=c2,XO=d2,WO=m2,Kf="DropdownMenu",[KO,uee]=un(Kf,[ZS]),Qt=ZS(),[QO,g2]=KO(Kf),p2=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:r,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=Qt(t),u=g.useRef(null),[d,f]=Yn({prop:r,defaultProp:a??!1,onChange:i,caller:Kf});return o.jsx(QO,{scope:t,triggerId:dr(),triggerRef:u,contentId:dr(),open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),modal:l,children:o.jsx($O,{...c,open:d,onOpenChange:f,dir:s,modal:l,children:n})})};p2.displayName=Kf;var x2="DropdownMenuTrigger",v2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=e,a=g2(x2,n),i=Qt(n);return o.jsx(PO,{asChild:!0,...i,children:o.jsx(xe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Of(t,a.triggerRef),onPointerDown:te(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:te(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});v2.displayName=x2;var JO="DropdownMenuPortal",y2=e=>{const{__scopeDropdownMenu:t,...n}=e,s=Qt(t);return o.jsx(OO,{...s,...n})};y2.displayName=JO;var b2="DropdownMenuContent",w2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=g2(b2,n),a=Qt(n),i=g.useRef(!1);return o.jsx(BO,{id:r.contentId,"aria-labelledby":r.triggerId,...a,...s,ref:t,onCloseAutoFocus:te(e.onCloseAutoFocus,l=>{var c;i.current||(c=r.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:te(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!r.modal||d)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});w2.displayName=b2;var e6="DropdownMenuGroup",t6=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(IO,{...r,...s,ref:t})});t6.displayName=e6;var n6="DropdownMenuLabel",N2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(HO,{...r,...s,ref:t})});N2.displayName=n6;var s6="DropdownMenuItem",j2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(UO,{...r,...s,ref:t})});j2.displayName=s6;var r6="DropdownMenuCheckboxItem",S2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(FO,{...r,...s,ref:t})});S2.displayName=r6;var a6="DropdownMenuRadioGroup",o6=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(VO,{...r,...s,ref:t})});o6.displayName=a6;var i6="DropdownMenuRadioItem",k2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(qO,{...r,...s,ref:t})});k2.displayName=i6;var l6="DropdownMenuItemIndicator",C2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(GO,{...r,...s,ref:t})});C2.displayName=l6;var c6="DropdownMenuSeparator",E2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(ZO,{...r,...s,ref:t})});E2.displayName=c6;var u6="DropdownMenuArrow",d6=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(YO,{...r,...s,ref:t})});d6.displayName=u6;var f6="DropdownMenuSubTrigger",_2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(XO,{...r,...s,ref:t})});_2.displayName=f6;var m6="DropdownMenuSubContent",A2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,r=Qt(n);return o.jsx(WO,{...r,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});A2.displayName=m6;var h6=p2,g6=v2,p6=y2,T2=w2,M2=N2,R2=j2,D2=S2,z2=k2,L2=C2,$2=E2,P2=_2,O2=A2;const Qf=h6,Jf=g6,x6=g.forwardRef(({className:e,inset:t,children:n,...s},r)=>o.jsxs(P2,{ref:r,className:U("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[n,o.jsx(Rc,{className:"ml-auto h-4 w-4"})]}));x6.displayName=P2.displayName;const v6=g.forwardRef(({className:e,...t},n)=>o.jsx(O2,{ref:n,className:U("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Dt.DROPDOWN},...t}));v6.displayName=O2.displayName;const Hc=g.forwardRef(({className:e,sideOffset:t=4,...n},s)=>o.jsx(p6,{children:o.jsx(T2,{ref:s,sideOffset:t,className:U("min-w-[8rem] overflow-hidden rounded-md dropdown-enhanced p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Dt.DROPDOWN},...n})}));Hc.displayName=T2.displayName;const _s=g.forwardRef(({className:e,inset:t,...n},s)=>o.jsx(R2,{ref:s,className:U("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));_s.displayName=R2.displayName;const y6=g.forwardRef(({className:e,children:t,checked:n,...s},r)=>o.jsxs(D2,{ref:r,className:U("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(L2,{children:o.jsx(fg,{className:"h-4 w-4"})})}),t]}));y6.displayName=D2.displayName;const b6=g.forwardRef(({className:e,children:t,...n},s)=>o.jsxs(z2,{ref:s,className:U("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(L2,{children:o.jsx(mx,{className:"h-2 w-2 fill-current"})})}),t]}));b6.displayName=z2.displayName;const w6=g.forwardRef(({className:e,inset:t,...n},s)=>o.jsx(M2,{ref:s,className:U("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));w6.displayName=M2.displayName;const N6=g.forwardRef(({className:e,...t},n)=>o.jsx($2,{ref:n,className:U("-mx-1 my-1 h-px bg-muted",e),...t}));N6.displayName=$2.displayName;function j6(e,[t,n]){return Math.min(n,Math.max(t,e))}function S6(e,t){return g.useReducer((n,s)=>t[n][s]??n,e)}var r0="ScrollArea",[B2,dee]=un(r0),[k6,Xn]=B2(r0),I2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:r,scrollHideDelay:a=600,...i}=e,[l,c]=g.useState(null),[u,d]=g.useState(null),[f,m]=g.useState(null),[h,p]=g.useState(null),[v,w]=g.useState(null),[x,b]=g.useState(0),[y,N]=g.useState(0),[j,S]=g.useState(!1),[k,E]=g.useState(!1),C=$e(t,P=>c(P)),_=Wi(r);return o.jsx(k6,{scope:n,type:s,dir:_,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:j,onScrollbarXEnabledChange:S,scrollbarY:v,onScrollbarYChange:w,scrollbarYEnabled:k,onScrollbarYEnabledChange:E,onCornerWidthChange:b,onCornerHeightChange:N,children:o.jsx(xe.div,{dir:_,...i,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});I2.displayName=r0;var H2="ScrollAreaViewport",U2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:r,...a}=e,i=Xn(H2,n),l=g.useRef(null),c=$e(t,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(xe.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});U2.displayName=H2;var Bs="ScrollAreaScrollbar",a0=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Xn(Bs,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=r,l=e.orientation==="horizontal";return g.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),r.type==="hover"?o.jsx(C6,{...s,ref:t,forceMount:n}):r.type==="scroll"?o.jsx(E6,{...s,ref:t,forceMount:n}):r.type==="auto"?o.jsx(F2,{...s,ref:t,forceMount:n}):r.type==="always"?o.jsx(o0,{...s,ref:t}):null});a0.displayName=Bs;var C6=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Xn(Bs,e.__scopeScrollArea),[a,i]=g.useState(!1);return g.useEffect(()=>{const l=r.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[r.scrollArea,r.scrollHideDelay]),o.jsx(qt,{present:n||a,children:o.jsx(F2,{"data-state":a?"visible":"hidden",...s,ref:t})})}),E6=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=Xn(Bs,e.__scopeScrollArea),a=e.orientation==="horizontal",i=tm(()=>c("SCROLL_END"),100),[l,c]=S6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,r.scrollHideDelay,c]),g.useEffect(()=>{const u=r.viewport,d=a?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const h=u[d];f!==h&&(c("SCROLL"),i()),f=h};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[r.viewport,a,c,i]),o.jsx(qt,{present:n||l!=="hidden",children:o.jsx(o0,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:te(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:te(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),F2=g.forwardRef((e,t)=>{const n=Xn(Bs,e.__scopeScrollArea),{forceMount:s,...r}=e,[a,i]=g.useState(!1),l=e.orientation==="horizontal",c=tm(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:d)}},10);return wi(n.viewport,c),wi(n.content,c),o.jsx(qt,{present:s||a,children:o.jsx(o0,{"data-state":a?"visible":"hidden",...r,ref:t})})}),o0=g.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,r=Xn(Bs,e.__scopeScrollArea),a=g.useRef(null),i=g.useRef(0),[l,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Y2(l.viewport,l.content),d={...s,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function f(m,h){return D6(m,i.current,l,h)}return n==="horizontal"?o.jsx(_6,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&a.current){const m=r.viewport.scrollLeft,h=sb(m,l,r.dir);a.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=f(m,r.dir))}}):n==="vertical"?o.jsx(A6,{...d,ref:t,onThumbPositionChange:()=>{if(r.viewport&&a.current){const m=r.viewport.scrollTop,h=sb(m,l);a.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=f(m))}}):null}),_6=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,a=Xn(Bs,e.__scopeScrollArea),[i,l]=g.useState(),c=g.useRef(null),u=$e(t,c,a.onScrollbarXChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(q2,{"data-orientation":"horizontal",...r,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":em(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),W2(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ld(i.paddingLeft),paddingEnd:Ld(i.paddingRight)}})}})}),A6=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,a=Xn(Bs,e.__scopeScrollArea),[i,l]=g.useState(),c=g.useRef(null),u=$e(t,c,a.onScrollbarYChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(q2,{"data-orientation":"vertical",...r,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":em(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),W2(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ld(i.paddingTop),paddingEnd:Ld(i.paddingBottom)}})}})}),[T6,V2]=B2(Bs),q2=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:r,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=e,h=Xn(Bs,n),[p,v]=g.useState(null),w=$e(t,C=>v(C)),x=g.useRef(null),b=g.useRef(""),y=h.viewport,N=s.content-s.viewport,j=Ht(d),S=Ht(c),k=tm(f,10);function E(C){if(x.current){const _=C.clientX-x.current.left,P=C.clientY-x.current.top;u({x:_,y:P})}}return g.useEffect(()=>{const C=_=>{const P=_.target;(p==null?void 0:p.contains(P))&&j(_,N)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[y,p,N,j]),g.useEffect(S,[s,S]),wi(p,k),wi(h.content,k),o.jsx(T6,{scope:n,scrollbar:p,hasThumb:r,onThumbChange:Ht(a),onThumbPointerUp:Ht(i),onThumbPositionChange:S,onThumbPointerDown:Ht(l),children:o.jsx(xe.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:te(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),x.current=p.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),E(C))}),onPointerMove:te(e.onPointerMove,E),onPointerUp:te(e.onPointerUp,C=>{const _=C.target;_.hasPointerCapture(C.pointerId)&&_.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=b.current,h.viewport&&(h.viewport.style.scrollBehavior=""),x.current=null})})})}),zd="ScrollAreaThumb",G2=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=V2(zd,e.__scopeScrollArea);return o.jsx(qt,{present:n||r.hasThumb,children:o.jsx(M6,{ref:t,...s})})}),M6=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...r}=e,a=Xn(zd,n),i=V2(zd,n),{onThumbPositionChange:l}=i,c=$e(t,f=>i.onThumbChange(f)),u=g.useRef(void 0),d=tm(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const f=a.viewport;if(f){const m=()=>{if(d(),!u.current){const h=z6(f,l);u.current=h,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[a.viewport,d,l]),o.jsx(xe.div,{"data-state":i.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:te(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,v=f.clientY-h.top;i.onThumbPointerDown({x:p,y:v})}),onPointerUp:te(e.onPointerUp,i.onThumbPointerUp)})});G2.displayName=zd;var i0="ScrollAreaCorner",Z2=g.forwardRef((e,t)=>{const n=Xn(i0,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?o.jsx(R6,{...e,ref:t}):null});Z2.displayName=i0;var R6=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,r=Xn(i0,n),[a,i]=g.useState(0),[l,c]=g.useState(0),u=!!(a&&l);return wi(r.scrollbarX,()=>{var f;const d=((f=r.scrollbarX)==null?void 0:f.offsetHeight)||0;r.onCornerHeightChange(d),c(d)}),wi(r.scrollbarY,()=>{var f;const d=((f=r.scrollbarY)==null?void 0:f.offsetWidth)||0;r.onCornerWidthChange(d),i(d)}),u?o.jsx(xe.div,{...s,ref:t,style:{width:a,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ld(e){return e?parseInt(e,10):0}function Y2(e,t){const n=e/t;return isNaN(n)?0:n}function em(e){const t=Y2(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function D6(e,t,n,s="ltr"){const r=em(n),a=r/2,i=t||a,l=r-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=s==="ltr"?[0,d]:[d*-1,0];return X2([c,u],f)(e)}function sb(e,t,n="ltr"){const s=em(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-r,i=t.content-t.viewport,l=a-s,c=n==="ltr"?[0,i]:[i*-1,0],u=j6(e,c);return X2([0,i],[0,l])(u)}function X2(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function W2(e,t){return e>0&&e<t}var z6=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function r(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function tm(e,t){const n=Ht(e),s=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(s.current),[]),g.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function wi(e,t){const n=Ht(t);Ds(()=>{let s=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(s),r.unobserve(e)}}},[e,n])}var K2=I2,L6=U2,$6=Z2;const Ni=g.forwardRef(({className:e,children:t,...n},s)=>o.jsxs(K2,{ref:s,className:U("relative overflow-hidden",e),...n,children:[o.jsx(L6,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(Q2,{}),o.jsx($6,{})]}));Ni.displayName=K2.displayName;const Q2=g.forwardRef(({className:e,orientation:t="vertical",...n},s)=>o.jsx(a0,{ref:s,orientation:t,className:U("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(G2,{className:"relative flex-1 rounded-full bg-border"})}));Q2.displayName=a0.displayName;function P6({items:e,viewMode:t,onItemSelect:n,selectedItem:s,renderItemCard:r,className:a}){return o.jsxs("div",{className:`space-y-4 ${a}`,children:[t==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(i=>o.jsx("div",{onClick:()=>n(i),className:"cursor-pointer transition-transform hover:scale-[1.02] relative",children:r(i,(s==null?void 0:s.id)===i.id)},i.id))}):o.jsx(Ni,{className:"h-[calc(100vh-300px)]",children:o.jsx("div",{className:"space-y-1 pr-4",children:e.map(i=>o.jsx("div",{onClick:()=>n(i),className:"cursor-pointer transition-colors hover:bg-muted/50 rounded-lg",children:r(i,(s==null?void 0:s.id)===i.id)},i.id))})}),e.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-muted-foreground",children:"No items found matching your criteria."})})]})}function O6({categories:e,onSelect:t,className:n=""}){return o.jsx("div",{className:`flex flex-wrap gap-4 justify-start ${n}`,children:e.map(s=>o.jsx("div",{className:"flex-1 min-w-[180px]",children:o.jsx(Da,{categories:[s],onSelect:t,placeholder:s.placeholder,className:"w-full"})},s.id))})}function B6({tags:e,onRemove:t,className:n=""}){return e.length===0?null:o.jsx("div",{className:`flex flex-wrap gap-2 ${n}`,children:e.map(s=>o.jsxs(K,{variant:"secondary",className:"flex items-center gap-1 px-3 py-1 text-sm",children:[o.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.category,":"]}),o.jsx("span",{children:s.label}),o.jsx("button",{onClick:()=>t(s.id),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:o.jsx(Vt,{className:"h-3 w-3"})})]},s.id))})}function J2({categories:e,onSelect:t,onCustomSearch:n,placeholder:s="Search by name, description, or abilities...",className:r=""}){const[a,i]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState(""),[f,m]=g.useState(-1),h=g.useRef(null),p=g.useRef(null),v=e.length===1?e[0]:null;g.useEffect(()=>{const _=P=>{h.current&&!h.current.contains(P.target)&&(i(!1),c(null),m(-1))};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const w=l||v?(l||v).options.filter(_=>_.label&&typeof _.label=="string"&&_.label.toLowerCase().includes(u.toLowerCase())||_.description&&typeof _.description=="string"&&_.description.toLowerCase().includes(u.toLowerCase())):e.flatMap(_=>_.options.filter(P=>P.label&&typeof P.label=="string"&&P.label.toLowerCase().includes(u.toLowerCase())||P.description&&typeof P.description=="string"&&P.description.toLowerCase().includes(u.toLowerCase()))),x=_=>{d(_),i(!0),m(-1)},b=_=>{var P;c(_),d(""),(P=p.current)==null||P.focus()},y=_=>{t(_),d(""),c(null),i(!1),m(-1)},N=()=>{u.trim()&&(n(u.trim()),d(""),c(null),i(!1),m(-1))},j=_=>{_.key==="ArrowDown"?(_.preventDefault(),m(P=>Math.min(P+1,w.length-1))):_.key==="ArrowUp"?(_.preventDefault(),m(P=>Math.max(P-1,-1))):_.key==="Enter"?(_.preventDefault(),f>=0&&w[f]?y(w[f]):u.trim()&&N()):_.key==="Escape"&&(i(!1),c(null),m(-1))},S=()=>{i(!0)},k=l||v,E=!v&&!l,C=u.trim()&&!w.some(_=>_.label&&typeof _.label=="string"&&_.label.toLowerCase()===u.toLowerCase());return o.jsxs("div",{ref:h,className:`relative ${r}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx(vi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(Cs,{ref:p,type:"text",placeholder:k?k.placeholder:s,value:u,onChange:_=>x(_.target.value),onFocus:S,onKeyDown:j,className:"pl-10 pr-20"}),C&&o.jsx(W,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:N,title:"Add custom search term",children:o.jsx(Qr,{className:"h-4 w-4"})}),o.jsx(W,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>i(!a),children:o.jsx(En,{className:`h-4 w-4 transition-transform ${a?"rotate-180":""}`})})]}),a&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg max-h-96 overflow-y-auto",style:{zIndex:Dt.AUTOCOMPLETE+10},children:[E&&o.jsxs("div",{className:"p-2 border-b border-border",children:[o.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"Categories"}),e.map(_=>o.jsxs("button",{onClick:()=>b(_),className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center justify-between",children:[o.jsx("span",{children:_.name}),o.jsx(En,{className:"h-4 w-4"})]},_.id))]}),C&&o.jsx("div",{className:"p-2 border-b border-border",children:o.jsxs("button",{onClick:N,className:"w-full text-left px-2 py-2 hover:bg-muted rounded text-sm flex items-center gap-2",children:[o.jsx(Qr,{className:"h-4 w-4 text-primary"}),o.jsxs("span",{className:"font-medium",children:['Search for "',u,'"']}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"(Custom search)"})]})}),o.jsx("div",{className:"p-2",children:w.length===0&&!C?o.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:"No options found"}):w.map((_,P)=>o.jsxs("button",{onClick:()=>y(_),className:`w-full text-left px-2 py-2 rounded text-sm ${P===f?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[o.jsx("div",{className:"font-medium",children:_.label}),_.description&&o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:_.description})]},_.id))})]})]})}function ga({categories:e,onSelect:t,onCustomSearch:n,className:s=""}){const r=e.find(i=>i.id==="fuzzy-search"||i.id==="keywords"),a=e.filter(i=>i.id!=="fuzzy-search"&&i.id!=="keywords");return o.jsxs("div",{className:`flex flex-wrap gap-4 justify-start ${s}`,children:[r&&o.jsx("div",{className:"flex-1 min-w-[300px]",children:o.jsx(J2,{categories:[r],onSelect:t,onCustomSearch:n,placeholder:r.placeholder,className:"w-full"})}),a.map(i=>o.jsx("div",{className:"flex-shrink-0 min-w-[200px] max-w-[300px]",children:o.jsx(Da,{categories:[i],onSelect:t,placeholder:i.placeholder,className:"w-full"})},i.id))]})}function I6({children:e,className:t=""}){return o.jsx("div",{className:`grid grid-cols-1 lg:grid-cols-6 gap-6 ${t}`,children:e})}function H6({children:e,className:t=""}){return o.jsx("div",{className:`lg:col-span-5 ${t}`,children:e})}function U6({children:e,className:t=""}){return o.jsx("div",{className:`lg:col-span-1 ${t}`,children:o.jsx("div",{className:"sticky top-6",style:{zIndex:Dt.STICKY},children:e})})}function F6({title:e="Select an Item",description:t="Choose an item from the list to view its details"}){return o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 text-center",children:[o.jsx(Ra,{className:"text-lg font-semibold mb-2",children:e}),o.jsx(Ke,{className:"text-muted-foreground",children:t})]})}function V6({searchCategories:e,selectedTags:t,viewMode:n="grid",onTagSelect:s,onTagRemove:r,onViewModeChange:a,children:i,className:l=""}){return o.jsxs("div",{className:`mb-8 space-y-4 ${l}`,children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(O6,{categories:e,onSelect:s,className:"w-full"})}),a&&o.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[o.jsx(W,{variant:n==="grid"?"default":"ghost",size:"sm",onClick:()=>a("grid"),className:"h-8 px-3",children:o.jsx(Fi,{className:"h-4 w-4"})}),o.jsx(W,{variant:n==="list"?"default":"ghost",size:"sm",onClick:()=>a("list"),className:"h-8 px-3",children:o.jsx(oo,{className:"h-4 w-4"})})]})]}),o.jsx(B6,{tags:t,onRemove:r,className:"justify-start"}),i&&o.jsx("div",{className:"pt-4",children:i})]})}class Ge{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.output=="string"&&Array.isArray(t.ingredients)&&Array.isArray(t.effects)}static equals(t,n){return t.name===n.name}static addComputedProperties(t){const n=t.effects.length>0,s=t.effects.length,r=t.ingredients.length,a=r>3||s>2,i=r<=2&&s<=1,l=t.effects.reduce((m,h)=>m+h.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=this.determineDifficulty(t,{ingredientCount:r,effectCount:s,isComplex:a,isSimple:i}),d=this.generateTags(t,{hasEffects:n,effectCount:s,ingredientCount:r,isComplex:a,isSimple:i,difficulty:u}),f=this.createSearchableText(t,d);return{...t,hasEffects:n,effectCount:s,ingredientCount:r,isComplex:a,isSimple:i,totalMagnitude:l,maxDuration:c,tags:d,searchableText:f,difficulty:u}}static determineDifficulty(t,n){return n.isSimple?"Simple":n.isComplex?"Complex":"Moderate"}static generateTags(t,n){const s=[];return t.category&&s.push(t.category),s.push(n.difficulty),n.hasEffects&&s.push("Has Effects"),n.ingredientCount===1?s.push("Single Ingredient"):n.ingredientCount<=3?s.push("Few Ingredients"):s.push("Many Ingredients"),n.effectCount===1?s.push("Single Effect"):n.effectCount<=2?s.push("Few Effects"):s.push("Many Effects"),t.effects.forEach(r=>{s.push(r.name)}),t.ingredients.forEach(r=>{s.push(r)}),[...new Set(s)]}static createSearchableText(t,n){const s=t.ingredients.map(a=>typeof a=="string"?a:a&&typeof a=="object"&&(a.item||a.name||a.label||a.id)||String(a));return[t.name,t.output,t.description||"",...s,...t.effects.map(a=>a.name),...t.effects.map(a=>a.description),...n].join(" ").toLowerCase()}static filterByCategory(t,n){return t.filter(s=>s.category===n)}static filterByCategories(t,n){return n.length===0?t:t.filter(s=>s.category&&n.includes(s.category))}static filterByDifficulty(t,n){return t.filter(s=>s.difficulty===n)}static filterByDifficulties(t,n){return n.length===0?t:t.filter(s=>n.includes(s.difficulty))}static filterByIngredientCount(t,n,s){return t.filter(r=>{const a=r.ingredientCount;return!(n!==null&&a<n||s!==null&&a>s)})}static filterByMagnitude(t,n,s){return t.filter(r=>{const a=r.totalMagnitude;return!(n!==null&&a<n||s!==null&&a>s)})}static filterByEffectProperties(t,n,s){return t.filter(r=>!(n!==null&&r.hasEffects!==n||s!==null&&r.isComplex!==s))}static filterByIngredients(t,n){return n.length===0?t:t.filter(s=>n.some(r=>s.ingredients.some(a=>(typeof a=="string"?a:a.item||a.name||a.label||a.id||String(a)).toLowerCase().includes(r.toLowerCase()))))}static filterByEffects(t,n){return n.length===0?t:t.filter(s=>n.some(r=>s.effects.some(a=>a.name.toLowerCase().includes(r.toLowerCase()))))}static search(t,n){if(!n.trim())return[];const s=n.toLowerCase().trim(),r=[];for(const a of t){const i=this.calculateSearchScore(a,s);if(i>0){const l=this.getMatchedFields(a,s);r.push({recipe:a,score:i,matchedFields:l})}}return r.sort((a,i)=>i.score-a.score)}static calculateSearchScore(t,n){var a;let s=0;const r=n.toLowerCase();return t.name.toLowerCase()===r&&(s+=100),t.output.toLowerCase()===r&&(s+=100),t.name.toLowerCase().includes(r)&&(s+=50),t.output.toLowerCase().includes(r)&&(s+=50),(a=t.description)!=null&&a.toLowerCase().includes(r)&&(s+=30),t.ingredients.forEach(i=>{const l=typeof i=="string"?i:i.item||i.name||i.label||i.id||String(i);l.toLowerCase()===r&&(s+=40),l.toLowerCase().includes(r)&&(s+=20)}),t.effects.forEach(i=>{i.name.toLowerCase()===r&&(s+=40),i.name.toLowerCase().includes(r)&&(s+=20),i.description.toLowerCase().includes(r)&&(s+=15)}),t.tags.forEach(i=>{i.toLowerCase()===r&&(s+=25),i.toLowerCase().includes(r)&&(s+=10)}),s}static getMatchedFields(t,n){var a;const s=[],r=n.toLowerCase();return t.name.toLowerCase().includes(r)&&s.push("name"),t.output.toLowerCase().includes(r)&&s.push("output"),(a=t.description)!=null&&a.toLowerCase().includes(r)&&s.push("description"),t.ingredients.forEach(i=>{(typeof i=="string"?i:i.item||i.name||i.label||i.id||String(i)).toLowerCase().includes(r)&&s.push("ingredients")}),t.effects.forEach(i=>{(i.name.toLowerCase().includes(r)||i.description.toLowerCase().includes(r))&&s.push("effects")}),[...new Set(s)]}static sort(t,n,s="asc"){return[...t].sort((a,i)=>{let l=0;switch(n){case"name":l=a.name.localeCompare(i.name);break;case"category":l=(a.category||"").localeCompare(i.category||"");break;case"difficulty":l=this.compareDifficulties(a.difficulty,i.difficulty);break;case"ingredientCount":l=a.ingredientCount-i.ingredientCount;break;case"effectCount":l=a.effectCount-i.effectCount;break;case"magnitude":l=a.totalMagnitude-i.totalMagnitude;break;case"duration":l=a.maxDuration-i.maxDuration;break}return s==="asc"?l:-l})}static compareDifficulties(t,n){const s={Simple:1,Moderate:2,Complex:3};return(s[t]||0)-(s[n]||0)}static getUniqueCategories(t){const n=t.map(s=>s.category).filter(s=>!!s);return[...new Set(n)].sort()}static getUniqueDifficulties(t){const n=t.map(s=>s.difficulty);return[...new Set(n)].sort((s,r)=>this.compareDifficulties(s,r))}static getUniqueEffects(t){const n=t.flatMap(s=>s.effects.map(r=>r.name));return[...new Set(n)].sort()}static getUniqueIngredients(t){const n=t.flatMap(s=>s.ingredients.map(r=>typeof r=="string"?r:r&&typeof r=="object"&&(r.item||r.name||r.label||r.id)||String(r)));return[...new Set(n)].filter(s=>s&&s!=="[object Object]").sort()}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static applyFilters(t,n){let s=[...t];return n.searchTerm.trim()&&(s=this.search(s,n.searchTerm).map(a=>a.recipe)),n.categories.length>0&&(s=this.filterByCategories(s,n.categories)),n.difficulties.length>0&&(s=this.filterByDifficulties(s,n.difficulties)),n.ingredients.length>0&&(s=this.filterByIngredients(s,n.ingredients)),n.effects.length>0&&(s=this.filterByEffects(s,n.effects)),s=this.filterByEffectProperties(s,n.hasEffects,n.isComplex),s=this.filterByIngredientCount(s,n.minIngredientCount,n.maxIngredientCount),s=this.filterByMagnitude(s,n.minMagnitude,n.maxMagnitude),s}static getStatistics(t){const n=t.length,s=t.filter(N=>N.type==="food").length,r=t.filter(N=>N.type==="alcohol").length,a={};t.forEach(N=>{N.category&&(a[N.category]=(a[N.category]||0)+1)});const i={};t.forEach(N=>{i[N.difficulty]=(i[N.difficulty]||0)+1});const l={};t.forEach(N=>{N.effects.forEach(j=>{l[j.name]=(l[j.name]||0)+1})});const c=t.reduce((N,j)=>N+j.ingredientCount,0),u=t.reduce((N,j)=>N+j.effectCount,0),d=n>0?c/n:0,f=n>0?u/n:0,m=t.reduce((N,j)=>N+j.totalMagnitude,0),h=t.reduce((N,j)=>N+j.maxDuration,0),p=n>0?m/n:0,v=n>0?h/n:0,w={};t.forEach(N=>{N.ingredients.forEach(j=>{w[j]=(w[j]||0)+1})});const x=Object.entries(w).map(([N,j])=>({name:N,count:j})).sort((N,j)=>j.count-N.count).slice(0,10),b={};t.forEach(N=>{N.effects.forEach(j=>{b[j.name]=(b[j.name]||0)+1})});const y=Object.entries(b).map(([N,j])=>({name:N,count:j})).sort((N,j)=>j.count-N.count).slice(0,10);return{totalRecipes:n,foodRecipes:s,alcoholRecipes:r,recipesByCategory:a,recipesByDifficulty:i,recipesByEffect:l,averageIngredientCount:d,averageEffectCount:f,averageMagnitude:p,averageDuration:v,topEffects:y,topIngredients:x}}static getEffectComparisons(t,n){const s={};return n.forEach(r=>{r.effects.forEach(a=>{s[a.name]||(s[a.name]={magnitudeSum:0,durationSum:0,count:0}),s[a.name].magnitudeSum+=a.magnitude,s[a.name].durationSum+=a.duration,s[a.name].count+=1})}),t.effects.map(r=>{const a=s[r.name],i=a.count>0?a.magnitudeSum/a.count:0,l=a.count>0?a.durationSum/a.count:0,c=r.magnitude-i,u=r.duration-l;return{name:r.name,magnitude:{value:r.magnitude,mean:i,difference:c,percentage:i>0?c/i*100:0},duration:{value:r.duration,mean:l,difference:u,percentage:l>0?u/l*100:0}}})}}const Ta=class Ta{constructor(){Ve(this,"cache",null);Ve(this,"lastFetch",0);Ve(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return Ta.instance||(Ta.instance=new Ta),Ta.instance}async loadRecipes(){var t;if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const n=os("data/cookbook-wiki.json"),s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch recipes: ${s.status} ${s.statusText}`);const r=await s.json(),a=[];if(console.log("RecipeDataProvider: Raw data keys:",Object.keys(r)),r.food&&Array.isArray(r.food)?(console.log("RecipeDataProvider: Found",r.food.length,"food recipes"),a.push(...r.food)):r.food&&typeof r.food=="object"&&(console.log("RecipeDataProvider: Food section is an object, checking for recipes property"),r.food.recipes&&Array.isArray(r.food.recipes)&&(console.log("RecipeDataProvider: Found",r.food.recipes.length,"food recipes in recipes property"),a.push(...r.food.recipes))),r.alcohol&&Array.isArray(r.alcohol)?(console.log("RecipeDataProvider: Found",r.alcohol.length,"alcohol recipes"),a.push(...r.alcohol)):r.alcohol&&typeof r.alcohol=="object"&&(console.log("RecipeDataProvider: Alcohol section is an object, checking for recipes property"),r.alcohol.recipes&&Array.isArray(r.alcohol.recipes)&&(console.log("RecipeDataProvider: Found",r.alcohol.recipes.length,"alcohol recipes in recipes property"),a.push(...r.alcohol.recipes))),a.length===0){console.log("RecipeDataProvider: No recipes found in food/alcohol sections, trying fallback");const u=((t=r.food)==null?void 0:t.recipes)||r.recipes||r;Array.isArray(u)&&(console.log("RecipeDataProvider: Found",u.length,"recipes in fallback data"),a.push(...u))}if(!Array.isArray(a)||a.length===0)throw new Error("RecipeDataProvider: No valid recipes found in data structure");const i=[];let l=0,c=0;for(const u of a)if(Ge.isValid(u)){const d=Ge.addComputedProperties(u);i.push(d),l++}else console.warn("RecipeDataProvider: Invalid recipe data:",u),c++;return this.cache=i,this.lastFetch=Date.now(),console.log(`RecipeDataProvider: Loaded ${l} valid recipes, ${c} invalid recipes`),i}catch(n){throw console.error("RecipeDataProvider: Error loading recipes:",n),n}}async getRecipeData(){console.log("RecipeDataProvider: getRecipeData called");const t=await this.loadRecipes();console.log("RecipeDataProvider: Getting statistics for",t.length,"recipes");const n=Ge.getStatistics(t),s={recipes:t,totalCount:n.totalRecipes,categories:Ge.getUniqueCategories(t),effects:Ge.getUniqueEffects(t),ingredients:Ge.getUniqueIngredients(t),lastUpdated:new Date().toISOString()};return console.log("RecipeDataProvider: getRecipeData result:",{recipesCount:s.recipes.length,totalCount:s.totalCount,categories:s.categories,effects:s.effects,ingredients:s.ingredients}),s}async getRecipeByName(t){return(await this.loadRecipes()).find(s=>s.name===t)||null}async getRecipesByCategory(t){const n=await this.loadRecipes();return Ge.filterByCategory(n,t)}async getRecipesByDifficulty(t){const n=await this.loadRecipes();return Ge.filterByDifficulty(n,t)}async getRecipesByIngredient(t){const n=await this.loadRecipes();return Ge.filterByIngredients(n,[t])}async getRecipesByEffect(t){const n=await this.loadRecipes();return Ge.filterByEffects(n,[t])}async searchRecipes(t){const n=await this.loadRecipes();return Ge.search(n,t).map(r=>r.recipe)}async getStatistics(){const t=await this.loadRecipes();return Ge.getStatistics(t)}clearCache(){this.cache=null,this.lastFetch=0,console.log("RecipeDataProvider: Cache cleared")}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isExpired:this.cache!==null&&Date.now()-this.lastFetch>=this.CACHE_DURATION,timeUntilExpiry:this.cache?Math.max(0,this.CACHE_DURATION-(Date.now()-this.lastFetch)):0}}};Ve(Ta,"instance");let Tg=Ta;const tr=Ps((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const r=await Tg.getInstance().loadRecipes();e({data:r,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load recipes",loading:!1})}}},getById:n=>t().data.find(r=>r.name===n),getByName:n=>t().data.find(r=>r.name===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l,c,u,d,f;return a.name.toLowerCase().includes(r)||a.output.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.category)==null?void 0:l.toLowerCase().includes(r))||((c=a.difficulty)==null?void 0:c.toLowerCase().includes(r))||((u=a.tags)==null?void 0:u.some(m=>m.toLowerCase().includes(r)))||((d=a.ingredients)==null?void 0:d.some(m=>m.toLowerCase().includes(r)))||((f=a.effects)==null?void 0:f.some(m=>{var h;return m.name.toLowerCase().includes(r)||((h=m.description)==null?void 0:h.toLowerCase().includes(r))}))})},getByCategory:n=>t().data.filter(r=>r.category===n),getByDifficulty:n=>t().data.filter(r=>r.difficulty===n),getByIngredient:n=>t().data.filter(r=>r.ingredients.some(a=>a.toLowerCase().includes(n.toLowerCase()))),getByEffect:n=>t().data.filter(r=>r.effects.some(a=>a.name.toLowerCase().includes(n.toLowerCase())))})),q6=Object.freeze(Object.defineProperty({__proto__:null,useRecipesStore:tr},Symbol.toStringTag,{value:"Module"}));class Na{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.editorId=="string"&&typeof t.school=="string"&&typeof t.level=="string"&&typeof t.magickaCost=="number"&&Array.isArray(t.effects)}static equals(t,n){return t.editorId===n.editorId}static addComputedProperties(t){const n=t.effects.length>0,s=t.effects.length,r=t.effects.some(m=>m.area>0),a=t.effects.some(m=>m.duration>0),i=t.effects.every(m=>m.duration===0),l=t.effects.reduce((m,h)=>m+h.magnitude,0),c=Math.max(...t.effects.map(m=>m.duration),0),u=Math.max(...t.effects.map(m=>m.area),0),d=this.generateTags(t,{hasEffects:n,isAreaSpell:r,isDurationSpell:a,isInstantSpell:i}),f=this.createSearchableText(t,d);return{...t,hasEffects:n,effectCount:s,isAreaSpell:r,isDurationSpell:a,isInstantSpell:i,totalMagnitude:l,maxDuration:c,maxArea:u,tags:d,searchableText:f}}static generateTags(t,n){const s=[];return s.push(t.school),s.push(t.level),n.hasEffects&&s.push("Has Effects"),n.isAreaSpell&&s.push("Area Effect"),n.isDurationSpell&&s.push("Duration"),n.isInstantSpell&&s.push("Instant"),t.magickaCost===0?s.push("Free"):t.magickaCost<=50?s.push("Low Cost"):t.magickaCost<=150?s.push("Medium Cost"):s.push("High Cost"),t.effects.forEach(r=>{r.name.toLowerCase().includes("fire")&&s.push("Fire"),(r.name.toLowerCase().includes("frost")||r.name.toLowerCase().includes("ice"))&&s.push("Frost"),(r.name.toLowerCase().includes("shock")||r.name.toLowerCase().includes("lightning"))&&s.push("Shock"),(r.name.toLowerCase().includes("heal")||r.name.toLowerCase().includes("restore"))&&s.push("Healing"),(r.name.toLowerCase().includes("conjure")||r.name.toLowerCase().includes("summon"))&&s.push("Conjuration"),(r.name.toLowerCase().includes("fear")||r.name.toLowerCase().includes("calm"))&&s.push("Illusion"),(r.name.toLowerCase().includes("paralyze")||r.name.toLowerCase().includes("slow"))&&s.push("Control")}),[...new Set(s)]}static createSearchableText(t,n){return[t.name,t.school,t.level,t.description,...n,...t.effects.map(r=>r.name),...t.effects.map(r=>r.description)].join(" ").toLowerCase()}static filterBySchool(t,n){return t.filter(s=>s.school===n)}static filterByLevel(t,n){return t.filter(s=>s.level===n)}static filterBySchools(t,n){return n.length===0?t:t.filter(s=>n.includes(s.school))}static filterByLevels(t,n){return n.length===0?t:t.filter(s=>n.includes(s.level))}static filterByMagickaCost(t,n,s){return t.filter(r=>!(n!==null&&r.magickaCost<n||s!==null&&r.magickaCost>s))}static filterByMagnitude(t,n,s){return t.filter(r=>!(n!==null&&r.totalMagnitude<n||s!==null&&r.totalMagnitude>s))}static filterByEffectProperties(t,n,s,r){return t.filter(a=>!(n!==null&&a.hasEffects!==n||s!==null&&a.isAreaSpell!==s||r!==null&&a.isDurationSpell!==r))}static search(t,n){if(!n.trim())return t.map(a=>({spell:a,score:1,matchedFields:[]}));const s=n.toLowerCase(),r=[];return t.forEach(a=>{let i=0;const l=[];a.name.toLowerCase()===s?(i+=100,l.push("name")):a.name.toLowerCase().includes(s)&&(i+=50,l.push("name")),a.school.toLowerCase()===s?(i+=30,l.push("school")):a.school.toLowerCase().includes(s)&&(i+=15,l.push("school")),a.level.toLowerCase()===s?(i+=25,l.push("level")):a.level.toLowerCase().includes(s)&&(i+=10,l.push("level")),a.description.toLowerCase().includes(s)&&(i+=5,l.push("description")),a.tags.forEach(c=>{c.toLowerCase().includes(s)&&(i+=3,l.push("tags"))}),a.effects.forEach(c=>{c.name.toLowerCase().includes(s)&&(i+=8,l.push("effects")),c.description.toLowerCase().includes(s)&&(i+=4,l.push("effects"))}),i>0&&r.push({spell:a,score:i,matchedFields:[...new Set(l)]})}),r.sort((a,i)=>i.score-a.score)}static sort(t,n,s="asc"){return[...t].sort((a,i)=>{let l=0;switch(n){case"name":l=a.name.localeCompare(i.name);break;case"school":l=a.school.localeCompare(i.school);break;case"level":l=this.compareLevels(a.level,i.level);break;case"magickaCost":l=a.magickaCost-i.magickaCost;break;case"magnitude":l=a.totalMagnitude-i.totalMagnitude;break;case"duration":l=a.maxDuration-i.maxDuration;break}return s==="desc"?-l:l})}static compareLevels(t,n){const s=["Novice","Apprentice","Adept","Expert","Master"],r=s.indexOf(t),a=s.indexOf(n);return r===-1&&a===-1?0:r===-1?1:a===-1?-1:r-a}static getUniqueSchools(t){return[...new Set(t.map(n=>n.school))].sort()}static getUniqueLevels(t){const n=[...new Set(t.map(s=>s.level))];return this.sortLevels(n)}static sortLevels(t){const n=["Novice","Apprentice","Adept","Expert","Master"];return t.sort((s,r)=>{const a=n.indexOf(s),i=n.indexOf(r);return a===-1&&i===-1?0:a===-1?1:i===-1?-1:a-i})}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static applyFilters(t,n){let s=[...t];return n.schools.length>0&&(s=this.filterBySchools(s,n.schools)),n.levels.length>0&&(s=this.filterByLevels(s,n.levels)),s=this.filterByEffectProperties(s,n.hasEffects,n.isAreaSpell,n.isDurationSpell),s=this.filterByMagickaCost(s,n.minMagickaCost,n.maxMagickaCost),s=this.filterByMagnitude(s,n.minMagnitude,n.maxMagnitude),n.searchTerm&&(s=this.search(s,n.searchTerm).map(a=>a.spell)),s}static getStatistics(t){const n=this.getUniqueSchools(t),s=this.getUniqueLevels(t),r=this.getUniqueTags(t),a=t.length,i=t.filter(m=>m.hasEffects).length,l=t.filter(m=>m.isAreaSpell).length,c=t.filter(m=>m.isDurationSpell).length,u=t.filter(m=>m.magickaCost===0).length,d=t.length>0?t.reduce((m,h)=>m+h.magickaCost,0)/t.length:0,f=t.length>0?t.reduce((m,h)=>m+h.totalMagnitude,0)/t.length:0;return{totalSpells:a,spellsWithEffects:i,areaSpells:l,durationSpells:c,freeSpells:u,avgMagickaCost:Math.round(d),avgMagnitude:Math.round(f),schools:n,levels:s,tags:r}}}const Ma=class Ma{constructor(){Ve(this,"cache",null);Ve(this,"lastFetch",0);Ve(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return Ma.instance||(Ma.instance=new Ma),Ma.instance}async loadSpells(){if(this.cache&&Date.now()-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const t=os("data/player_spells.json"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch spells: ${n.status} ${n.statusText}`);const s=await n.json(),r=[];let a=0,i=0;for(const l of s)if(Na.isValid(l)){const c=Na.addComputedProperties(l);r.push(c),a++}else console.warn("SpellDataProvider: Invalid spell data:",l),i++;return this.cache=r,this.lastFetch=Date.now(),r}catch(t){throw console.error("SpellDataProvider: Error loading spells:",t),t}}async getSpellData(){console.log("SpellDataProvider: getSpellData called");const t=await this.loadSpells();console.log("SpellDataProvider: Getting statistics for",t.length,"spells");const n=Na.getStatistics(t),s={spells:t,totalCount:n.totalSpells,schools:n.schools,levels:n.levels,lastUpdated:new Date().toISOString()};return console.log("SpellDataProvider: getSpellData result:",{spellsCount:s.spells.length,totalCount:s.totalCount,schools:s.schools,levels:s.levels}),s}async getSpellByEditorId(t){return(await this.loadSpells()).find(s=>s.editorId===t)||null}async getSpellsBySchool(t){const n=await this.loadSpells();return Na.filterBySchool(n,t)}async getSpellsByLevel(t){const n=await this.loadSpells();return Na.filterByLevel(n,t)}async searchSpells(t){const n=await this.loadSpells();return Na.search(n,t).map(r=>r.spell)}async getStatistics(){const t=await this.loadSpells();return Na.getStatistics(t)}clearCache(){console.log("SpellDataProvider: Clearing cache"),this.cache=null,this.lastFetch=0}isCacheValid(){return this.cache!==null&&Date.now()-this.lastFetch<this.CACHE_DURATION}getCacheInfo(){var t;return{hasCache:this.cache!==null,cacheSize:((t=this.cache)==null?void 0:t.length)||0,lastFetch:this.lastFetch,isValid:this.isCacheValid()}}};Ve(Ma,"instance");let $d=Ma;const G6=Object.freeze(Object.defineProperty({__proto__:null,SpellDataProvider:$d},Symbol.toStringTag,{value:"Module"})),Ho=Ps((e,t)=>({data:[],loading:!1,error:null,load:async()=>{if(!(t().data.length>0)){e({loading:!0,error:null});try{const r=await $d.getInstance().loadSpells();e({data:r,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load spells",loading:!1})}}},getById:n=>t().data.find(r=>r.id===n),getByEditorId:n=>t().data.find(r=>r.editorId===n),search:n=>{const s=t(),r=n.toLowerCase();return s.data.filter(a=>{var i,l,c,u,d;return a.name.toLowerCase().includes(r)||((i=a.description)==null?void 0:i.toLowerCase().includes(r))||((l=a.school)==null?void 0:l.toLowerCase().includes(r))||((c=a.level)==null?void 0:c.toLowerCase().includes(r))||((u=a.tags)==null?void 0:u.some(f=>f.toLowerCase().includes(r)))||((d=a.effects)==null?void 0:d.some(f=>{var m;return f.name.toLowerCase().includes(r)||((m=f.description)==null?void 0:m.toLowerCase().includes(r))}))})},getBySchool:n=>t().data.filter(r=>r.school===n),getByLevel:n=>t().data.filter(r=>r.level===n)}));function Z6(){const{data:e,loading:t,error:n}=uo();return{data:e.length>0?e:null,loading:t,error:n}}function Y6(){const{data:e,loading:t,error:n}=fo();return{data:e.length>0?e:null,loading:t,error:n}}function ek(){const{data:e,loading:t,error:n}=Xi();return{data:e.length>0?e:null,loading:t,error:n}}function X6(){const{data:e,loading:t,error:n}=co();return{data:e.length>0?e:null,loading:t,error:n}}function W6(){const{data:e,loading:t,error:n}=Yi();return{data:e.length>0?e:null,loading:t,error:n}}function l0(){const{data:e,loading:t,error:n}=lo();return{data:e.length>0?e:null,loading:t,error:n}}function he({children:e,className:t,expanded:n,onToggle:s,disableHover:r=!1,hideChevron:a=!1}){let i,l,c,u;L.Children.forEach(e,v=>{L.isValidElement(v)&&(v.type===he.Header&&(i=v),v.type===he.Summary&&(l=v),v.type===he.Footer&&(c=v),v.type===he.Details&&(u=v))});const[d,f]=g.useState(!1),m=n!==void 0?n:d,h=s||(()=>f(v=>!v)),p=r?"":"hover:shadow-md hover:scale-[1.02]";return o.jsxs("div",{className:U("rounded-lg border bg-background shadow-sm transition-all duration-200 flex flex-col",p,t),children:[i&&L.cloneElement(i,{onClick:h,expanded:m,hideChevron:a}),o.jsxs("div",{className:"flex-1",children:[l,m&&u]}),c]})}he.Header=function({children:t,className:n,onClick:s,expanded:r,hideChevron:a=!1}){const i=()=>{s==null||s()};return o.jsxs("div",{className:U("flex items-center gap-3 px-4 py-3 bg-muted/30 cursor-pointer select-none hover:bg-muted/50 transition-colors duration-200 rounded-t-lg",r&&"bg-muted/50",n),onClick:i,tabIndex:0,role:"button","aria-expanded":r,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),i())},children:[t,!a&&o.jsx("span",{className:U("ml-auto transition-transform duration-200 text-muted-foreground",r?"rotate-180":""),children:o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:o.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})})]})};he.Summary=function({children:t,className:n}){return o.jsx("div",{className:U("px-4 py-2 space-y-3",n),children:t})};he.Footer=function({children:t,className:n}){return o.jsx("div",{className:U("px-4 py-2",n),children:t})};he.Details=function({children:t,className:n}){return o.jsx("div",{className:U("px-4 py-4 space-y-4 bg-background rounded-b-lg",n),children:t})};const K6={race:{Human:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Elf:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Beast:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},religion:{},trait:{},destiny:{}},Q6={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},J6="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function e8({category:e,categoryType:t,size:n="md",className:s}){const a=K6[t][e]||J6;return o.jsx(K,{variant:"outline",className:U(a,Q6[n],"font-medium transition-colors",s),children:e})}const t8={race:{Altmer:"altmer.svg",Argonian:"argonian.svg",Bosmer:"woodelf.svg",Breton:"breton.svg",Dunmer:"dunmer.svg",Imperial:"imperial.svg",Khajiit:"khajit.svg",Nord:"nord.svg",Orsimer:"orc.svg",Redguard:"redguard.svg"},religion:{},trait:{},destiny:{},birthsign:{Warrior:"Warrior.svg",Lady:"Lady.svg",Lord:"Lord.svg",Steed:"Steed.svg",Mage:"Mage.svg",Apprentice:"Apprentice.svg",Atronach:"Atronach.svg",Ritual:"Ritual.svg",Thief:"Thief.svg",Lover:"Lover.svg",Shadow:"Shadow.svg",Tower:"Tower.svg",Serpent:"Serpent.svg"}},rb={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-16 h-16","2xl":"w-16 h-16","3xl":"w-24 h-24","4xl":"w-32 h-32"},n8={sm:"text-sm",md:"text-lg",lg:"text-xl",xl:"text-2xl","2xl":"text-3xl","3xl":"text-3xl","4xl":"text-4xl"};function tk({entityName:e,entityType:t,size:n="md",className:s,imageClassName:r}){const i=t8[t][e],[l,c]=L.useState(!1);return!i||l?o.jsx("div",{className:U("bg-white dark:bg-white text-black dark:text-black rounded-full flex items-center justify-center font-bold",rb[n],s),children:o.jsx("span",{className:U(n8[n]),children:e.charAt(0)})}):o.jsx("div",{className:U("rounded-full overflow-hidden flex items-center justify-center","bg-white dark:bg-white",rb[n],s),children:o.jsx("img",{src:os(`assets/${t==="birthsign"?"sign-avatar":`${t}-avatar`}/${i}`),alt:`${e} avatar`,className:U("w-full h-full object-contain",r),onError:()=>c(!0),loading:"lazy"})})}function s8({isExpanded:e,onToggle:t,className:n,leftControls:s,header:r,collapsedContent:a,expandedContent:i,actionArea:l,children:c}){return c?o.jsx("div",{className:U("rounded-lg border bg-background shadow-sm transition-all",n),children:c}):o.jsxs("div",{className:U("rounded-lg border bg-background shadow-sm transition-all group",e?"ring-2 ring-skyrim-gold/60":"",n),children:[o.jsxs("div",{className:"flex items-start",children:[s&&o.jsx("div",{className:"mr-2 flex-shrink-0",children:s}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r&&o.jsx("div",{className:"flex-1 min-w-0",children:r}),o.jsxs("button",{type:"button",onClick:t,"aria-expanded":e,className:"ml-2 p-1 rounded hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-skyrim-gold",tabIndex:0,children:[o.jsx("span",{className:"sr-only",children:e?"Collapse":"Expand"}),o.jsx("svg",{className:U("h-4 w-4 transition-transform",e?"rotate-90":""),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:o.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})}),l&&o.jsx("div",{className:"ml-2 flex-shrink-0",children:l})]}),a&&o.jsx("div",{className:"mt-2",children:a}),e&&i&&o.jsx("div",{className:"mt-4",children:i})]})}function Uc({options:e,onSelect:t,placeholder:n="Search...",className:s="",disabled:r=!1,searchQuery:a,onSearchQueryChange:i,renderOption:l,emptyMessage:c="No options found",maxHeight:u="max-h-96",showClearButton:d=!0,showToggleButton:f=!0}){const[m,h]=g.useState(!1),[p,v]=g.useState(""),[w,x]=g.useState(-1),b=g.useRef(null),y=g.useRef(null),N=a??p,j=i??v;g.useEffect(()=>{const $=T=>{b.current&&!b.current.contains(T.target)&&(h(!1),x(-1))};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const S=$=>{j($),h(!0),x(-1)},k=$=>{t($),j(""),h(!1),x(-1)},E=$=>{$.key==="ArrowDown"?($.preventDefault(),x(T=>Math.min(T+1,e.length-1))):$.key==="ArrowUp"?($.preventDefault(),x(T=>Math.max(T-1,-1))):$.key==="Enter"?($.preventDefault(),w>=0&&e[w]&&k(e[w])):$.key==="Escape"&&(h(!1),x(-1))},C=()=>{h(!0)},_=()=>{var $;j(""),($=y.current)==null||$.focus()},P=()=>{var $;h(!m),m||($=y.current)==null||$.focus()},O=($,T)=>o.jsxs("div",{className:"flex items-center gap-3",children:[$.icon&&o.jsx("div",{className:"flex-shrink-0",children:$.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium truncate",children:$.label}),$.badge&&o.jsx("div",{className:"flex-shrink-0",children:$.badge})]}),$.description&&o.jsx(Ie,{text:$.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return o.jsxs("div",{ref:b,className:U("relative",s),children:[o.jsxs("div",{className:"relative",children:[o.jsx(vi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(Cs,{ref:y,type:"text",placeholder:n,value:N,onChange:$=>S($.target.value),onFocus:C,onKeyDown:E,className:"pl-10 pr-20",disabled:r}),d&&N&&o.jsx(W,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted",onClick:_,disabled:r,children:o.jsx(Vt,{className:"h-4 w-4"})}),f&&o.jsx(W,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:P,disabled:r,children:o.jsx(En,{className:U("h-4 w-4 transition-transform",m&&"rotate-180")})})]}),m&&o.jsx("div",{className:U("absolute top-full left-0 right-0 mt-1 dropdown-enhanced rounded-lg overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",u),style:{zIndex:Dt.AUTOCOMPLETE+10},children:o.jsx("div",{className:"p-2",children:e.length===0?o.jsx("div",{className:"px-2 py-4 text-center text-muted-foreground text-sm",children:c}):e.map(($,T)=>o.jsx("button",{onClick:()=>k($),className:U("w-full text-left px-3 py-3 rounded-lg text-sm transition-all duration-200 cursor-pointer",T===w?"bg-primary text-primary-foreground shadow-sm":"hover:bg-muted/60 hover:shadow-sm active:bg-muted/80 active:scale-[0.98]"),disabled:r,children:l?l($,T===w):O($)},$.id))})})]})}function r8(e="(max-width: 640px)"){const t=()=>typeof window>"u"||typeof window.matchMedia>"u"?!1:window.matchMedia(e).matches,[n,s]=g.useState(t);return g.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia>"u")return;const r=window.matchMedia(e),a=()=>s(r.matches);return s(r.matches),r.addEventListener("change",a),()=>{r.removeEventListener("change",a)}},[e]),n}function nk({open:e,onOpenChange:t,title:n,description:s,side:r="right",className:a,mobileQuery:i="(max-width: 640px)",resetKey:l,children:c}){const u=r8(i),d=g.useRef(null);g.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[e,u]),g.useEffect(()=>{e&&d.current&&(d.current.scrollTop=0)},[l]);const f=U("flex flex-col",u?"inset-0 top-0 left-0 right-0 bottom-0 h-[100dvh] max-h-[100dvh] w-[100vw] p-0 rounded-none border-0 overflow-hidden":"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0 overflow-y-auto bg-background",a);return o.jsx(Mx,{open:e,onOpenChange:t,children:o.jsxs(Hf,{side:u?"bottom":r,className:f,children:[(n||s)&&o.jsx("div",{className:U("sticky top-0 z-10 bg-background border-b","p-4"),children:o.jsxs(Rx,{className:"p-0",children:[n&&o.jsx(Dx,{children:n}),s&&o.jsx(zx,{children:s})]})}),o.jsx("div",{ref:d,className:U("flex-1 overflow-y-auto overscroll-contain",u?"p-4":"p-6"),children:c})]})})}function c0({birthsignName:e,size:t="md",className:n}){return o.jsx(tk,{entityName:e,entityType:"birthsign",size:t,className:n,imageClassName:"scale-125"})}function xr(e){return Array.isArray?Array.isArray(e):ak(e)==="[object Array]"}function a8(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function o8(e){return e==null?"":a8(e)}function Ss(e){return typeof e=="string"}function sk(e){return typeof e=="number"}function i8(e){return e===!0||e===!1||l8(e)&&ak(e)=="[object Boolean]"}function rk(e){return typeof e=="object"}function l8(e){return rk(e)&&e!==null}function yn(e){return e!=null}function sh(e){return!e.trim().length}function ak(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const c8="Incorrect 'index' type",u8=e=>`Invalid value for key ${e}`,d8=e=>`Pattern length exceeds max of ${e}.`,f8=e=>`Missing ${e} property in key`,m8=e=>`Property 'weight' in key '${e}' must be a positive integer`,ab=Object.prototype.hasOwnProperty;class h8{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(s=>{let r=ok(s);this._keys.push(r),this._keyMap[r.id]=r,n+=r.weight}),this._keys.forEach(s=>{s.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ok(e){let t=null,n=null,s=null,r=1,a=null;if(Ss(e)||xr(e))s=e,t=ob(e),n=Mg(e);else{if(!ab.call(e,"name"))throw new Error(f8("name"));const i=e.name;if(s=i,ab.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(m8(i));t=ob(i),n=Mg(i),a=e.getFn}return{path:t,id:n,weight:r,src:s,getFn:a}}function ob(e){return xr(e)?e:e.split(".")}function Mg(e){return xr(e)?e.join("."):e}function g8(e,t){let n=[],s=!1;const r=(a,i,l)=>{if(yn(a))if(!i[l])n.push(a);else{let c=i[l];const u=a[c];if(!yn(u))return;if(l===i.length-1&&(Ss(u)||sk(u)||i8(u)))n.push(o8(u));else if(xr(u)){s=!0;for(let d=0,f=u.length;d<f;d+=1)r(u[d],i,l+1)}else i.length&&r(u,i,l+1)}};return r(e,Ss(t)?t.split("."):t,0),s?n:n[0]}const p8={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},x8={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},v8={location:0,threshold:.6,distance:100},y8={useExtendedSearch:!1,getFn:g8,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var me={...x8,...p8,...v8,...y8};const b8=/[^ ]+/g;function w8(e=1,t=3){const n=new Map,s=Math.pow(10,t);return{get(r){const a=r.match(b8).length;if(n.has(a))return n.get(a);const i=1/Math.pow(a,.5*e),l=parseFloat(Math.round(i*s)/s);return n.set(a,l),l},clear(){n.clear()}}}class u0{constructor({getFn:t=me.getFn,fieldNormWeight:n=me.fieldNormWeight}={}){this.norm=w8(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ss(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Ss(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!yn(t)||sh(t))return;let s={v:t,i:n,n:this.norm.get(t)};this.records.push(s)}_addObject(t,n){let s={i:n,$:{}};this.keys.forEach((r,a)=>{let i=r.getFn?r.getFn(t):this.getFn(t,r.path);if(yn(i)){if(xr(i)){let l=[];const c=[{nestedArrIndex:-1,value:i}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(yn(d))if(Ss(d)&&!sh(d)){let f={v:d,i:u,n:this.norm.get(d)};l.push(f)}else xr(d)&&d.forEach((f,m)=>{c.push({nestedArrIndex:m,value:f})})}s.$[a]=l}else if(Ss(i)&&!sh(i)){let l={v:i,n:this.norm.get(i)};s.$[a]=l}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function ik(e,t,{getFn:n=me.getFn,fieldNormWeight:s=me.fieldNormWeight}={}){const r=new u0({getFn:n,fieldNormWeight:s});return r.setKeys(e.map(ok)),r.setSources(t),r.create(),r}function N8(e,{getFn:t=me.getFn,fieldNormWeight:n=me.fieldNormWeight}={}){const{keys:s,records:r}=e,a=new u0({getFn:t,fieldNormWeight:n});return a.setKeys(s),a.setIndexRecords(r),a}function Su(e,{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:r=me.distance,ignoreLocation:a=me.ignoreLocation}={}){const i=t/e.length;if(a)return i;const l=Math.abs(s-n);return r?i+l/r:l?1:i}function j8(e=[],t=me.minMatchCharLength){let n=[],s=-1,r=-1,a=0;for(let i=e.length;a<i;a+=1){let l=e[a];l&&s===-1?s=a:!l&&s!==-1&&(r=a-1,r-s+1>=t&&n.push([s,r]),s=-1)}return e[a-1]&&a-s>=t&&n.push([s,a-1]),n}const Aa=32;function S8(e,t,n,{location:s=me.location,distance:r=me.distance,threshold:a=me.threshold,findAllMatches:i=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,includeMatches:c=me.includeMatches,ignoreLocation:u=me.ignoreLocation}={}){if(t.length>Aa)throw new Error(d8(Aa));const d=t.length,f=e.length,m=Math.max(0,Math.min(s,f));let h=a,p=m;const v=l>1||c,w=v?Array(f):[];let x;for(;(x=e.indexOf(t,p))>-1;){let k=Su(t,{currentLocation:x,expectedLocation:m,distance:r,ignoreLocation:u});if(h=Math.min(k,h),p=x+d,v){let E=0;for(;E<d;)w[x+E]=1,E+=1}}p=-1;let b=[],y=1,N=d+f;const j=1<<d-1;for(let k=0;k<d;k+=1){let E=0,C=N;for(;E<C;)Su(t,{errors:k,currentLocation:m+C,expectedLocation:m,distance:r,ignoreLocation:u})<=h?E=C:N=C,C=Math.floor((N-E)/2+E);N=C;let _=Math.max(1,m-C+1),P=i?f:Math.min(m+C,f)+d,O=Array(P+2);O[P+1]=(1<<k)-1;for(let T=P;T>=_;T-=1){let z=T-1,A=n[e.charAt(z)];if(v&&(w[z]=+!!A),O[T]=(O[T+1]<<1|1)&A,k&&(O[T]|=(b[T+1]|b[T])<<1|1|b[T+1]),O[T]&j&&(y=Su(t,{errors:k,currentLocation:z,expectedLocation:m,distance:r,ignoreLocation:u}),y<=h)){if(h=y,p=z,p<=m)break;_=Math.max(1,2*m-p)}}if(Su(t,{errors:k+1,currentLocation:m,expectedLocation:m,distance:r,ignoreLocation:u})>h)break;b=O}const S={isMatch:p>=0,score:Math.max(.001,y)};if(v){const k=j8(w,l);k.length?c&&(S.indices=k):S.isMatch=!1}return S}function k8(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<s-n-1}return t}const Pd=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class lk{constructor(t,{location:n=me.location,threshold:s=me.threshold,distance:r=me.distance,includeMatches:a=me.includeMatches,findAllMatches:i=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,isCaseSensitive:c=me.isCaseSensitive,ignoreDiacritics:u=me.ignoreDiacritics,ignoreLocation:d=me.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:r,includeMatches:a,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d},t=c?t:t.toLowerCase(),t=u?Pd(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(h,p)=>{this.chunks.push({pattern:h,alphabet:k8(h),startIndex:p})},m=this.pattern.length;if(m>Aa){let h=0;const p=m%Aa,v=m-p;for(;h<v;)f(this.pattern.substr(h,Aa),h),h+=Aa;if(p){const w=m-Aa;f(this.pattern.substr(w),w)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r}=this.options;if(t=n?t:t.toLowerCase(),t=s?Pd(t):t,this.pattern===t){let v={isMatch:!0,score:0};return r&&(v.indices=[[0,t.length-1]]),v}const{location:a,distance:i,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:d}=this.options;let f=[],m=0,h=!1;this.chunks.forEach(({pattern:v,alphabet:w,startIndex:x})=>{const{isMatch:b,score:y,indices:N}=S8(t,v,w,{location:a+x,distance:i,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:r,ignoreLocation:d});b&&(h=!0),m+=y,b&&N&&(f=[...f,...N])});let p={isMatch:h,score:h?m/this.chunks.length:1};return h&&r&&(p.indices=f),p}}class pa{constructor(t){this.pattern=t}static isMultiMatch(t){return ib(t,this.multiRegex)}static isSingleMatch(t){return ib(t,this.singleRegex)}search(){}}function ib(e,t){const n=e.match(t);return n?n[1]:null}class C8 extends pa{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class E8 extends pa{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class _8 extends pa{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class A8 extends pa{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class T8 extends pa{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class M8 extends pa{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class ck extends pa{constructor(t,{location:n=me.location,threshold:s=me.threshold,distance:r=me.distance,includeMatches:a=me.includeMatches,findAllMatches:i=me.findAllMatches,minMatchCharLength:l=me.minMatchCharLength,isCaseSensitive:c=me.isCaseSensitive,ignoreDiacritics:u=me.ignoreDiacritics,ignoreLocation:d=me.ignoreLocation}={}){super(t),this._bitapSearch=new lk(t,{location:n,threshold:s,distance:r,includeMatches:a,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class uk extends pa{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,s;const r=[],a=this.pattern.length;for(;(s=t.indexOf(this.pattern,n))>-1;)n=s+a,r.push([s,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const Rg=[C8,uk,_8,A8,M8,T8,E8,ck],lb=Rg.length,R8=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,D8="|";function z8(e,t={}){return e.split(D8).map(n=>{let s=n.trim().split(R8).filter(a=>a&&!!a.trim()),r=[];for(let a=0,i=s.length;a<i;a+=1){const l=s[a];let c=!1,u=-1;for(;!c&&++u<lb;){const d=Rg[u];let f=d.isMultiMatch(l);f&&(r.push(new d(f,t)),c=!0)}if(!c)for(u=-1;++u<lb;){const d=Rg[u];let f=d.isSingleMatch(l);if(f){r.push(new d(f,t));break}}}return r})}const L8=new Set([ck.type,uk.type]);class $8{constructor(t,{isCaseSensitive:n=me.isCaseSensitive,ignoreDiacritics:s=me.ignoreDiacritics,includeMatches:r=me.includeMatches,minMatchCharLength:a=me.minMatchCharLength,ignoreLocation:i=me.ignoreLocation,findAllMatches:l=me.findAllMatches,location:c=me.location,threshold:u=me.threshold,distance:d=me.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r,minMatchCharLength:a,findAllMatches:l,ignoreLocation:i,location:c,threshold:u,distance:d},t=n?t:t.toLowerCase(),t=s?Pd(t):t,this.pattern=t,this.query=z8(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r,ignoreDiacritics:a}=this.options;t=r?t:t.toLowerCase(),t=a?Pd(t):t;let i=0,l=[],c=0;for(let u=0,d=n.length;u<d;u+=1){const f=n[u];l.length=0,i=0;for(let m=0,h=f.length;m<h;m+=1){const p=f[m],{isMatch:v,indices:w,score:x}=p.search(t);if(v){if(i+=1,c+=x,s){const b=p.constructor.type;L8.has(b)?l=[...l,...w]:l.push(w)}}else{c=0,i=0,l.length=0;break}}if(i){let m={isMatch:!0,score:c/i};return s&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const Dg=[];function P8(...e){Dg.push(...e)}function zg(e,t){for(let n=0,s=Dg.length;n<s;n+=1){let r=Dg[n];if(r.condition(e,t))return new r(e,t)}return new lk(e,t)}const Od={AND:"$and",OR:"$or"},Lg={PATH:"$path",PATTERN:"$val"},$g=e=>!!(e[Od.AND]||e[Od.OR]),O8=e=>!!e[Lg.PATH],B8=e=>!xr(e)&&rk(e)&&!$g(e),cb=e=>({[Od.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function dk(e,t,{auto:n=!0}={}){const s=r=>{let a=Object.keys(r);const i=O8(r);if(!i&&a.length>1&&!$g(r))return s(cb(r));if(B8(r)){const c=i?r[Lg.PATH]:a[0],u=i?r[Lg.PATTERN]:r[c];if(!Ss(u))throw new Error(u8(c));const d={keyId:Mg(c),pattern:u};return n&&(d.searcher=zg(u,t)),d}let l={children:[],operator:a[0]};return a.forEach(c=>{const u=r[c];xr(u)&&u.forEach(d=>{l.children.push(s(d))})}),l};return $g(e)||(e=cb(e)),s(e)}function I8(e,{ignoreFieldNorm:t=me.ignoreFieldNorm}){e.forEach(n=>{let s=1;n.matches.forEach(({key:r,norm:a,score:i})=>{const l=r?r.weight:null;s*=Math.pow(i===0&&l?Number.EPSILON:i,(l||1)*(t?1:a))}),n.score=s})}function H8(e,t){const n=e.matches;t.matches=[],yn(n)&&n.forEach(s=>{if(!yn(s.indices)||!s.indices.length)return;const{indices:r,value:a}=s;let i={indices:r,value:a};s.key&&(i.key=s.key.src),s.idx>-1&&(i.refIndex=s.idx),t.matches.push(i)})}function U8(e,t){t.score=e.score}function F8(e,t,{includeMatches:n=me.includeMatches,includeScore:s=me.includeScore}={}){const r=[];return n&&r.push(H8),s&&r.push(U8),e.map(a=>{const{idx:i}=a,l={item:t[i],refIndex:i};return r.length&&r.forEach(c=>{c(a,l)}),l})}class Xt{constructor(t,n={},s){this.options={...me,...n},this.options.useExtendedSearch,this._keyStore=new h8(this.options.keys),this.setCollection(t,s)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof u0))throw new Error(c8);this._myIndex=n||ik(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){yn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let s=0,r=this._docs.length;s<r;s+=1){const a=this._docs[s];t(a,s)&&(this.removeAt(s),s-=1,r-=1,n.push(a))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:a,sortFn:i,ignoreFieldNorm:l}=this.options;let c=Ss(t)?Ss(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return I8(c,{ignoreFieldNorm:l}),a&&c.sort(i),sk(n)&&n>-1&&(c=c.slice(0,n)),F8(c,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(t){const n=zg(t,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:a,i,n:l})=>{if(!yn(a))return;const{isMatch:c,score:u,indices:d}=n.searchIn(a);c&&r.push({item:a,idx:i,matches:[{score:u,value:a,norm:l,indices:d}]})}),r}_searchLogical(t){const n=dk(t,this.options),s=(l,c,u)=>{if(!l.children){const{keyId:f,searcher:m}=l,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:m});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const d=[];for(let f=0,m=l.children.length;f<m;f+=1){const h=l.children[f],p=s(h,c,u);if(p.length)d.push(...p);else if(l.operator===Od.AND)return[]}return d},r=this._myIndex.records,a={},i=[];return r.forEach(({$:l,i:c})=>{if(yn(l)){let u=s(n,l,c);u.length&&(a[c]||(a[c]={idx:c,item:l,matches:[]},i.push(a[c])),u.forEach(({matches:d})=>{a[c].matches.push(...d)}))}}),i}_searchObjectList(t){const n=zg(t,this.options),{keys:s,records:r}=this._myIndex,a=[];return r.forEach(({$:i,i:l})=>{if(!yn(i))return;let c=[];s.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:i[d],searcher:n}))}),c.length&&a.push({idx:l,item:i,matches:c})}),a}_findMatches({key:t,value:n,searcher:s}){if(!yn(n))return[];let r=[];if(xr(n))n.forEach(({v:a,i,n:l})=>{if(!yn(a))return;const{isMatch:c,score:u,indices:d}=s.searchIn(a);c&&r.push({score:u,key:t,value:a,idx:i,norm:l,indices:d})});else{const{v:a,n:i}=n,{isMatch:l,score:c,indices:u}=s.searchIn(a);l&&r.push({score:c,key:t,value:a,norm:i,indices:u})}return r}}Xt.version="7.1.0";Xt.createIndex=ik;Xt.parseIndex=N8;Xt.config=me;Xt.parseQuery=dk;P8($8);function fk(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:l.description,group:l.group,statModifications:l.stat_modifications.map(d=>`${d.stat} ${d.type} ${d.value}${d.value_type==="percentage"?"%":""}`),skillBonuses:l.skill_bonuses.map(d=>`${d.stat} +${d.value}${d.value_type==="percentage"?"%":""}`),powers:l.powers.map(d=>`${d.name} ${d.description}`),conditionalEffects:((c=l.conditional_effects)==null?void 0:c.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],masteryEffects:((u=l.mastery_effects)==null?void 0:u.map(d=>`${d.stat} ${d.description} ${d.condition||""}`))||[],originalBirthsign:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"powers",weight:.2},{name:"statModifications",weight:.15},{name:"skillBonuses",weight:.15},{name:"conditionalEffects",weight:.1},{name:"masteryEffects",weight:.1},{name:"group",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Xt(n,s),[n,s]),a=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredBirthsigns:g.useMemo(()=>a.map(l=>l.item.originalBirthsign),[a]),searchResults:a,searchableBirthsigns:n}}function ub({birthsigns:e,onSelect:t,placeholder:n="Search birthsigns...",className:s=""}){const[r,a]=g.useState(""),{filteredBirthsigns:i}=fk(e,r),l=g.useMemo(()=>i.map(d=>({id:d.edid,label:d.name,description:d.description,category:d.group,icon:o.jsx(c0,{birthsignName:d.name,size:"md"}),badge:d.group&&o.jsx(K,{variant:"outline",className:U("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:d.group}),metadata:{originalBirthsign:d}})),[i]),c=d=>{const f=e.find(m=>m.edid===d.id);f&&t(f)},u=(d,f)=>o.jsxs("div",{className:"flex items-center gap-3",children:[d.icon&&o.jsx("div",{className:"flex-shrink-0",children:d.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:d.label}),d.badge&&o.jsx("div",{className:"flex-shrink-0",children:d.badge})]}),d.description&&o.jsx(Ie,{text:d.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return o.jsx(Uc,{options:l,onSelect:c,placeholder:n,className:s,renderOption:u,emptyMessage:"No birthsigns found",searchQuery:r,onSearchQueryChange:a})}function Bd({item:e,originalBirthsign:t,isExpanded:n=!1,onToggle:s,onClick:r,className:a,showViewAllButton:i=!1,showToggle:l=!0,viewAllButtonText:c="View All",viewAllButtonRoute:u="/birthsigns"}){var S,k,E;const d=dt(),f=()=>{d(u)},m=C=>{C.target.closest("[data-no-click]")||r==null||r()},h=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Birthsign";e!=null&&e.description||t!=null&&t.description;const p=(e==null?void 0:e.category)||(t==null?void 0:t.group)||"";e!=null&&e.effects;const v=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"",w=()=>{if(!(t!=null&&t.stat_modifications))return{health:0,magicka:0,stamina:0};const C={health:0,magicka:0,stamina:0};return t.stat_modifications.forEach(_=>{const P=_.type==="bonus"?_.value:-_.value;_.stat.toLowerCase().includes("health")?C.health+=P:_.stat.toLowerCase().includes("magicka")?C.magicka+=P:_.stat.toLowerCase().includes("stamina")&&(C.stamina+=P)}),C},x=()=>{if(!t)return[];const C=[];return t.powers&&C.push(...t.powers.map(_=>({name:_.name,type:"power"}))),t.conditional_effects&&C.push(...t.conditional_effects.map(_=>({name:_.stat,type:"conditional"}))),t.mastery_effects&&C.push(...t.mastery_effects.map(_=>({name:_.stat,type:"mastery"}))),C},b=C=>{const _=C.toLowerCase();return _==="warrior"?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800":_==="mage"?"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800":_==="thief"?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":"bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30"},y=w(),N=x(),j=o.jsxs("div",{className:U("rounded-lg border bg-background shadow-sm transition-all",a),children:[o.jsxs("div",{className:"flex items-start justify-between p-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(c0,{birthsignName:h,size:"2xl"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(bt,{className:"text-primary font-semibold",children:h}),o.jsxs("div",{className:"flex items-center gap-2",children:[p&&o.jsx("div",{className:`inline-flex items-center justify-center px-2 py-1 border rounded-full text-xs font-medium w-16 ${b(p)}`,children:p}),(y.health!==0||y.magicka!==0||y.stamina!==0)&&o.jsxs("div",{className:"flex gap-1",children:[y.health!==0&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800 rounded-full text-xs font-medium",children:[o.jsx(Df,{className:"h-3 w-3"}),o.jsxs("span",{children:[y.health>0?"+":"",y.health]})]}),y.magicka!==0&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-full text-xs font-medium",children:[o.jsx(Ga,{className:"h-3 w-3"}),o.jsxs("span",{children:[y.magicka>0?"+":"",y.magicka]})]}),y.stamina!==0&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800 rounded-full text-xs font-medium",children:[o.jsx(ys,{className:"h-3 w-3"}),o.jsxs("span",{children:[y.stamina>0?"+":"",y.stamina]})]})]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[N.length>0&&o.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(st,{className:"h-3 w-3 text-yellow-500"}),o.jsxs("span",{children:[N.length," effects"]})]})}),i&&o.jsxs(W,{variant:"outline",size:"sm",onClick:f,className:"text-xs","data-no-click":!0,children:[o.jsx(ao,{className:"h-3 w-3 mr-1"}),c]}),l&&o.jsx("div",{"data-no-click":!0,children:o.jsx(go,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"stone",itemName:h})})]})]}),o.jsxs("div",{className:"space-y-3 px-4 pb-4",children:[o.jsx("div",{children:o.jsx(Ie,{text:v})}),t&&o.jsxs("div",{className:"flex flex-wrap gap-2",children:[(S=t.powers)==null?void 0:S.slice(0,3).map((C,_)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[o.jsx(st,{className:"h-3 w-3"}),C.name]},_)),(k=t.conditional_effects)==null?void 0:k.slice(0,3).map((C,_)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-800 rounded-full text-xs font-medium",children:[o.jsx(ys,{className:"h-3 w-3"}),C.stat]},`conditional-${_}`)),(E=t.mastery_effects)==null?void 0:E.slice(0,3).map((C,_)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-full text-xs font-medium",children:[o.jsx(st,{className:"h-3 w-3"}),C.stat]},`mastery-${_}`))]})]}),n&&t&&o.jsxs("div",{className:"space-y-4 px-4 pb-4",children:[t.stat_modifications&&t.stat_modifications.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Stat Modifications"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.stat_modifications.map((C,_)=>o.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[o.jsx("span",{className:"text-sm font-medium capitalize",children:C.stat}),o.jsxs("span",{className:U("font-bold",C.type==="bonus"?"text-green-600":"text-red-600"),children:[C.type==="bonus"?"+":"-",C.value,C.value_type==="percentage"?"%":""]})]},_))})]}),t.skill_bonuses&&t.skill_bonuses.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Skill Bonuses"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.skill_bonuses.map((C,_)=>o.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-muted/30",children:[o.jsx("span",{className:"text-sm font-medium capitalize",children:C.stat}),o.jsxs("span",{className:"font-bold text-green-600",children:["+",C.value,C.value_type==="percentage"?"%":""]})]},_))})]}),t.powers&&t.powers.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs(rn,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[o.jsx(Ga,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),o.jsx("div",{className:"space-y-2",children:t.powers.map((C,_)=>o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(st,{className:"h-4 w-4 text-yellow-500"}),o.jsx("span",{className:"font-medium text-sm",children:C.name})]}),o.jsx(Ie,{text:C.description}),(C.magnitude||C.duration)&&o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-2",children:[C.magnitude&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Magnitude:"})," ",C.magnitude]}),C.duration&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Duration:"})," ",C.duration,"s"]})]})]},_))})]}),t.conditional_effects&&t.conditional_effects.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs(rn,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[o.jsx(ys,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),o.jsx("div",{className:"space-y-2",children:t.conditional_effects.map((C,_)=>o.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[o.jsx("div",{className:"flex items-center gap-2 mb-1",children:o.jsx("span",{className:"font-medium text-sm capitalize",children:C.stat})}),o.jsx(Ie,{text:C.description}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.jsx("strong",{children:"Condition:"})," ",C.condition]})]},_))})]}),t.mastery_effects&&t.mastery_effects.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs(rn,{className:"text-lg font-medium text-foreground flex items-center gap-2",children:[o.jsx(st,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),o.jsx("div",{className:"space-y-2",children:t.mastery_effects.map((C,_)=>o.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(st,{className:"h-4 w-4 text-yellow-500"}),o.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),o.jsx("div",{className:"text-sm font-medium capitalize",children:C.stat}),o.jsx(Ie,{text:C.description}),C.condition&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.jsx("strong",{children:"Requirement:"})," ",C.condition]})]},_))})]})]})]});return r?o.jsx("div",{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:m,children:j}):j}function V8(e){const t=e.map(n=>n.group);return[...new Set(t)].sort()}function q8(e){const t=e.flatMap(n=>[...n.stat_modifications.map(s=>s.stat),...n.skill_bonuses.map(s=>s.stat)]);return[...new Set(t)].sort()}var G8="Separator",db="horizontal",Z8=["horizontal","vertical"],mk=g.forwardRef((e,t)=>{const{decorative:n,orientation:s=db,...r}=e,a=Y8(s)?s:db,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return o.jsx(xe.div,{"data-orientation":a,...l,...r,ref:t})});mk.displayName=G8;function Y8(e){return Z8.includes(e)}var X8=mk;function hk({className:e,orientation:t="horizontal",decorative:n=!0,...s}){return o.jsx(X8,{"data-slot":"separator",decorative:n,orientation:t,className:U("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}function W8({birthsign:e,title:t,maxDisplay:n,compact:s=!1,className:r}){var c,u,d,f;if(!e)return null;const a=e.powers.length>0,i=((c=e.conditional_effects)==null?void 0:c.length)>0,l=((u=e.mastery_effects)==null?void 0:u.length)>0;if(!a&&!i&&!l)return null;if(s){const m=[...e.powers.map(p=>({type:"power",data:p})),...((d=e.conditional_effects)==null?void 0:d.map(p=>({type:"conditional",data:p})))||[],...((f=e.mastery_effects)==null?void 0:f.map(p=>({type:"mastery",data:p})))||[]],h=n?m.slice(0,n):m;return o.jsxs("div",{className:U("flex flex-wrap gap-2",r),children:[h.map((p,v)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[o.jsx(st,{className:"h-3 w-3"}),p.data.name||p.data.stat]},v)),n&&m.length>n&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted text-muted-foreground border rounded-full text-xs font-medium",children:["+",m.length-n," more"]})]})}return o.jsxs(ye,{className:U("border-muted/50",r),children:[t&&o.jsx(Me,{className:"pb-3",children:o.jsx(Be,{className:"text-base",children:t})}),o.jsxs(be,{className:"space-y-4",children:[a&&o.jsxs("div",{children:[o.jsxs(si,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[o.jsx(Ga,{className:"h-4 w-4 text-yellow-500"}),"Powers"]}),o.jsx("div",{className:"space-y-2",children:e.powers.map((m,h)=>o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(st,{className:"h-4 w-4 text-yellow-500"}),o.jsx("span",{className:"font-medium text-sm",children:m.name})]}),o.jsx("div",{className:"border-t border-border my-2"}),o.jsx(Ie,{text:m.description}),(m.magnitude||m.duration)&&o.jsxs("div",{className:"space-y-2 text-sm mt-2",children:[m.magnitude&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium min-w-[80px]",children:"Magnitude:"}),o.jsx("span",{children:m.magnitude})]}),m.duration&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium min-w-[80px]",children:"Duration:"}),o.jsxs("span",{children:[m.duration,"s"]})]})]})]},h))})]}),i&&o.jsxs("div",{children:[o.jsxs(si,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[o.jsx(ys,{className:"h-4 w-4 text-purple-500"}),"Conditional Effects"]}),o.jsx("div",{className:"space-y-2",children:e.conditional_effects.map((m,h)=>o.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(K,{variant:"outline",className:"text-xs bg-purple-100 text-purple-800 border-purple-200",children:"Conditional"}),o.jsx("span",{className:"font-medium text-sm capitalize",children:m.stat})]}),o.jsx(Ie,{text:m.description}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.jsx("strong",{children:"Condition:"})," ",m.condition]})]},h))})]}),l&&o.jsxs("div",{children:[o.jsxs(si,{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[o.jsx(st,{className:"h-4 w-4 text-blue-500"}),"Mastery Effects"]}),o.jsx("div",{className:"space-y-2",children:e.mastery_effects.map((m,h)=>o.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(st,{className:"h-4 w-4 text-yellow-500"}),o.jsx("span",{className:"font-medium text-sm",children:"Mastery Effect"})]}),o.jsx("div",{className:"border-t border-border my-2"}),o.jsx("div",{className:"text-sm font-medium capitalize",children:m.stat}),o.jsx(Ie,{text:m.description}),m.condition&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.jsx("strong",{children:"Requirement:"})," ",m.condition]})]},h))})]})]})]})}function K8({birthsign:e,title:t="Stat Modifications",className:n}){const s=e.stat_modifications.length>0,r=e.skill_bonuses.length>0;return!s&&!r?null:o.jsxs(ye,{className:U("border-muted/50",n),children:[o.jsx(Me,{className:"pb-3",children:o.jsx(Be,{className:"text-base",children:t})}),o.jsxs(be,{className:"space-y-4",children:[s&&o.jsxs("div",{children:[o.jsx(si,{className:"text-sm font-medium mb-2",children:"Attributes"}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.stat_modifications.map((a,i)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[o.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:a.stat.replace(/_/g," ")}),o.jsxs(K,{variant:"outline",className:U("text-xs flex-shrink-0",a.type==="bonus"?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"),children:[a.type==="bonus"?"+":"-",a.value,a.value_type==="percentage"?"%":""]})]},i))})]}),r&&o.jsxs("div",{children:[o.jsx(si,{className:"text-sm font-medium mb-2",children:"Skill Bonuses"}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.skill_bonuses.map((a,i)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[o.jsx("span",{className:"text-sm font-medium capitalize flex-1 min-w-0 mr-3",children:a.stat.replace(/_/g," ")}),o.jsxs(K,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200 text-xs flex-shrink-0",children:["+",a.value,a.value_type==="percentage"?"%":""]})]},i))})]})]})]})}function Q8({birthsign:e,isOpen:t,onOpenChange:n}){return e?o.jsx(nk,{open:t,onOpenChange:n,side:"right",children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx(c0,{birthsignName:e.name,size:"4xl"}),o.jsxs("div",{className:"flex-1",children:[o.jsx(Ra,{className:"text-2xl font-bold mb-2",children:e.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"inline-flex items-center px-2 py-1 bg-skyrim-gold/10 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:e.group}),o.jsx(go,{itemId:e.edid,itemType:"stone",itemName:e.name})]}),o.jsx(Ie,{text:e.description})]})]})}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(K8,{birthsign:e}),o.jsx(hk,{}),o.jsx(W8,{birthsign:e,title:"Special Effects"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(bt,{className:"text-lg font-semibold",children:"Game Information"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[o.jsx("span",{className:"font-medium min-w-[60px]",children:"EDID:"}),o.jsx("span",{className:"break-all",children:e.edid})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4",children:[o.jsx("span",{className:"font-medium min-w-[60px]",children:"Form ID:"}),o.jsx("span",{className:"break-all",children:e.formid})]})]})]})]})]})}):null}function gk({children:e,columns:t=2,gap:n="md",className:s}){const r={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},a={sm:"gap-3",md:"gap-4",lg:"gap-6"};return o.jsx("div",{className:U("grid",r[t],a[n],s),children:e})}function J8({children:e,columns:t=2,gap:n="md",className:s}){const r={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"},a={sm:"gap-2",md:"gap-4",lg:"gap-6"};return o.jsx("div",{className:U("grid",r[t],a[n],s),children:e})}var nm="Collapsible",[eB,pk]=un(nm),[tB,d0]=eB(nm),xk=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:r,disabled:a,onOpenChange:i,...l}=e,[c,u]=Yn({prop:s,defaultProp:r??!1,onChange:i,caller:nm});return o.jsx(tB,{scope:n,disabled:a,contentId:dr(),open:c,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),children:o.jsx(xe.div,{"data-state":m0(c),"data-disabled":a?"":void 0,...l,ref:t})})});xk.displayName=nm;var vk="CollapsibleTrigger",yk=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,r=d0(vk,n);return o.jsx(xe.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":m0(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:t,onClick:te(e.onClick,r.onOpenToggle)})});yk.displayName=vk;var f0="CollapsibleContent",bk=g.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=d0(f0,e.__scopeCollapsible);return o.jsx(qt,{present:n||r.open,children:({present:a})=>o.jsx(nB,{...s,ref:t,present:a})})});bk.displayName=f0;var nB=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:r,...a}=e,i=d0(f0,n),[l,c]=g.useState(s),u=g.useRef(null),d=$e(t,u),f=g.useRef(0),m=f.current,h=g.useRef(0),p=h.current,v=i.open||l,w=g.useRef(v),x=g.useRef(void 0);return g.useEffect(()=>{const b=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(b)},[]),Ds(()=>{const b=u.current;if(b){x.current=x.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const y=b.getBoundingClientRect();f.current=y.height,h.current=y.width,w.current||(b.style.transitionDuration=x.current.transitionDuration,b.style.animationName=x.current.animationName),c(s)}},[i.open,s]),o.jsx(xe.div,{"data-state":m0(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!v,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:v&&r})});function m0(e){return e?"open":"closed"}var sB=xk,rB=yk,aB=bk,ls="Accordion",oB=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[h0,iB,lB]=Lx(ls),[sm,fee]=un(ls,[lB,pk]),g0=pk(),wk=L.forwardRef((e,t)=>{const{type:n,...s}=e,r=s,a=s;return o.jsx(h0.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?o.jsx(fB,{...a,ref:t}):o.jsx(dB,{...r,ref:t})})});wk.displayName=ls;var[Nk,cB]=sm(ls),[jk,uB]=sm(ls,{collapsible:!1}),dB=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},collapsible:a=!1,...i}=e,[l,c]=Yn({prop:n,defaultProp:s??"",onChange:r,caller:ls});return o.jsx(Nk,{scope:e.__scopeAccordion,value:L.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:L.useCallback(()=>a&&c(""),[a,c]),children:o.jsx(jk,{scope:e.__scopeAccordion,collapsible:a,children:o.jsx(Sk,{...i,ref:t})})})}),fB=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...a}=e,[i,l]=Yn({prop:n,defaultProp:s??[],onChange:r,caller:ls}),c=L.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=L.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return o.jsx(Nk,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:u,children:o.jsx(jk,{scope:e.__scopeAccordion,collapsible:!0,children:o.jsx(Sk,{...a,ref:t})})})}),[mB,rm]=sm(ls),Sk=L.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:r,orientation:a="vertical",...i}=e,l=L.useRef(null),c=$e(l,t),u=iB(n),f=Wi(r)==="ltr",m=te(e.onKeyDown,h=>{var E;if(!oB.includes(h.key))return;const p=h.target,v=u().filter(C=>{var _;return!((_=C.ref.current)!=null&&_.disabled)}),w=v.findIndex(C=>C.ref.current===p),x=v.length;if(w===-1)return;h.preventDefault();let b=w;const y=0,N=x-1,j=()=>{b=w+1,b>N&&(b=y)},S=()=>{b=w-1,b<y&&(b=N)};switch(h.key){case"Home":b=y;break;case"End":b=N;break;case"ArrowRight":a==="horizontal"&&(f?j():S());break;case"ArrowDown":a==="vertical"&&j();break;case"ArrowLeft":a==="horizontal"&&(f?S():j());break;case"ArrowUp":a==="vertical"&&S();break}const k=b%x;(E=v[k].ref.current)==null||E.focus()});return o.jsx(mB,{scope:n,disabled:s,direction:r,orientation:a,children:o.jsx(h0.Slot,{scope:n,children:o.jsx(xe.div,{...i,"data-orientation":a,ref:c,onKeyDown:s?void 0:m})})})}),Id="AccordionItem",[hB,p0]=sm(Id),kk=L.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...r}=e,a=rm(Id,n),i=cB(Id,n),l=g0(n),c=dr(),u=s&&i.value.includes(s)||!1,d=a.disabled||e.disabled;return o.jsx(hB,{scope:n,open:u,disabled:d,triggerId:c,children:o.jsx(sB,{"data-orientation":a.orientation,"data-state":Mk(u),...l,...r,ref:t,disabled:d,open:u,onOpenChange:f=>{f?i.onItemOpen(s):i.onItemClose(s)}})})});kk.displayName=Id;var Ck="AccordionHeader",Ek=L.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=rm(ls,n),a=p0(Ck,n);return o.jsx(xe.h3,{"data-orientation":r.orientation,"data-state":Mk(a.open),"data-disabled":a.disabled?"":void 0,...s,ref:t})});Ek.displayName=Ck;var Pg="AccordionTrigger",_k=L.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=rm(ls,n),a=p0(Pg,n),i=uB(Pg,n),l=g0(n);return o.jsx(h0.ItemSlot,{scope:n,children:o.jsx(rB,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":r.orientation,id:a.triggerId,...l,...s,ref:t})})});_k.displayName=Pg;var Ak="AccordionContent",Tk=L.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,r=rm(ls,n),a=p0(Ak,n),i=g0(n);return o.jsx(aB,{role:"region","aria-labelledby":a.triggerId,"data-orientation":r.orientation,...i,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Tk.displayName=Ak;function Mk(e){return e?"open":"closed"}var gB=wk,pB=kk,xB=Ek,Rk=_k,Dk=Tk;const zk=gB,x0=g.forwardRef(({className:e,...t},n)=>o.jsx(pB,{ref:n,className:U("border-b",e),...t}));x0.displayName="AccordionItem";const v0=g.forwardRef(({className:e,children:t,...n},s)=>o.jsx(xB,{className:"flex",children:o.jsxs(Rk,{ref:s,className:U("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,o.jsx(En,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));v0.displayName=Rk.displayName;const y0=g.forwardRef(({className:e,children:t,...n},s)=>o.jsx(Dk,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:o.jsx("div",{className:U("pb-4 pt-0",e),children:t})}));y0.displayName=Dk.displayName;function vB({children:e,title:t="Customize Display",description:n="Configure what information to show",defaultOpen:s=!1,className:r}){return o.jsx(zk,{type:"single",collapsible:!0,defaultValue:s?"customize-display":void 0,className:r,children:o.jsxs(x0,{value:"customize-display",className:"border-none",children:[o.jsx(v0,{className:"hover:no-underline",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Sd,{className:"h-4 w-4"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium",children:t}),o.jsx("div",{className:"text-sm text-muted-foreground",children:n})]})]})}),o.jsx(y0,{children:o.jsx("div",{className:"space-y-4 pt-2",children:e})})]})})}var yB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bB="VisuallyHidden",Lk=g.forwardRef((e,t)=>o.jsx(xe.span,{...e,ref:t,style:{...yB,...e.style}}));Lk.displayName=bB;var wB=Lk,[am,mee]=un("Tooltip",[nl]),b0=nl(),NB="TooltipProvider",fb="tooltip.open",[hee,$k]=am(NB),Pk="Tooltip",[gee,om]=am(Pk),Og="TooltipTrigger",jB=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=om(Og,n),a=$k(Og,n),i=b0(n),l=g.useRef(null),c=$e(t,l,r.onTriggerChange),u=g.useRef(!1),d=g.useRef(!1),f=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(Yx,{asChild:!0,...i,children:o.jsx(xe.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:c,onPointerMove:te(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(r.onTriggerEnter(),d.current=!0)}),onPointerLeave:te(e.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:te(e.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:te(e.onFocus,()=>{u.current||r.onOpen()}),onBlur:te(e.onBlur,r.onClose),onClick:te(e.onClick,r.onClose)})})});jB.displayName=Og;var SB="TooltipPortal",[pee,kB]=am(SB,{forceMount:void 0}),ji="TooltipContent",Ok=g.forwardRef((e,t)=>{const n=kB(ji,e.__scopeTooltip),{forceMount:s=n.forceMount,side:r="top",...a}=e,i=om(ji,e.__scopeTooltip);return o.jsx(qt,{present:s||i.open,children:i.disableHoverableContent?o.jsx(Bk,{side:r,...a,ref:t}):o.jsx(CB,{side:r,...a,ref:t})})}),CB=g.forwardRef((e,t)=>{const n=om(ji,e.__scopeTooltip),s=$k(ji,e.__scopeTooltip),r=g.useRef(null),a=$e(t,r),[i,l]=g.useState(null),{trigger:c,onClose:u}=n,d=r.current,{onPointerInTransitChange:f}=s,m=g.useCallback(()=>{l(null),f(!1)},[f]),h=g.useCallback((p,v)=>{const w=p.currentTarget,x={x:p.clientX,y:p.clientY},b=MB(x,w.getBoundingClientRect()),y=RB(x,b),N=DB(v.getBoundingClientRect()),j=LB([...y,...N]);l(j),f(!0)},[f]);return g.useEffect(()=>()=>m(),[m]),g.useEffect(()=>{if(c&&d){const p=w=>h(w,d),v=w=>h(w,c);return c.addEventListener("pointerleave",p),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",p),d.removeEventListener("pointerleave",v)}}},[c,d,h,m]),g.useEffect(()=>{if(i){const p=v=>{const w=v.target,x={x:v.clientX,y:v.clientY},b=(c==null?void 0:c.contains(w))||(d==null?void 0:d.contains(w)),y=!zB(x,i);b?m():y&&(m(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,d,i,u,m]),o.jsx(Bk,{...e,ref:a})}),[EB,_B]=am(Pk,{isInside:!1}),AB=cz("TooltipContent"),Bk=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=om(ji,n),u=b0(n),{onClose:d}=c;return g.useEffect(()=>(document.addEventListener(fb,d),()=>document.removeEventListener(fb,d)),[d]),g.useEffect(()=>{if(c.trigger){const f=m=>{const h=m.target;h!=null&&h.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),o.jsx($c,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:o.jsxs(Xx,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(AB,{children:s}),o.jsx(EB,{scope:n,isInside:!0,children:o.jsx(wB,{id:c.contentId,role:"tooltip",children:r||s})})]})})});Ok.displayName=ji;var Ik="TooltipArrow",TB=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=b0(n);return _B(Ik,n).isInside?null:o.jsx(Wx,{...r,...s,ref:t})});TB.displayName=Ik;function MB(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,s,r,a)){case a:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function RB(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function DB(e){const{top:t,right:n,bottom:s,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:s},{x:r,y:s}]}function zB(e,t){const{x:n,y:s}=e;let r=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,d=l.y,f=c.x,m=c.y;d>s!=m>s&&n<(f-u)*(s-d)/(m-d)+u&&(r=!r)}return r}function LB(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),$B(t)}function $B(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const r=e[s];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(r.y-i.y)>=(a.y-i.y)*(r.x-i.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const r=e[s];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(r.y-i.y)>=(a.y-i.y)*(r.x-i.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Hk=Ok;const PB=g.forwardRef(({className:e,sideOffset:t=4,...n},s)=>o.jsx(Hk,{ref:s,sideOffset:t,className:U("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));PB.displayName=Hk.displayName;function In({title:e,navigateTo:t,onNavigate:n,children:s,className:r,showHeaderButton:a=!0}){return o.jsxs(ye,{className:r,children:[o.jsx(Me,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Be,{className:"text-lg",children:e}),a&&o.jsxs(W,{variant:"outline",size:"sm",onClick:n,className:"text-sm whitespace-nowrap cursor-pointer",children:["View all ",t," →"]})]})}),o.jsx(be,{className:"space-y-4",children:s})]})}function ku({title:e,description:t,checked:n,onCheckedChange:s,className:r,disabled:a=!1,onClick:i,showSwitch:l=!0}){const c=()=>{i?i():a||s(!n)};return o.jsxs("div",{className:U("flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm flex-1 min-h-[80px] cursor-pointer hover:bg-muted/50 transition-colors",a&&"opacity-50 cursor-not-allowed",r),onClick:c,children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(sc,{className:"text-base font-medium",children:e}),t&&o.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),l&&o.jsx(qf,{checked:n,onCheckedChange:s,disabled:a})]})}function Bg(e){var t,n,s,r,a,i;return{id:`religion-${e.name.toLowerCase().replace(/\s+/g,"-")}`,name:e.name,description:((t=e.tenet)==null?void 0:t.description)||"",tags:Yt()?e.favoredRaces||[]:[],summary:((n=e.tenet)==null?void 0:n.description)||"",effects:[...((r=(s=e.tenet)==null?void 0:s.effects)==null?void 0:r.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[],...((i=(a=e.blessing)==null?void 0:a.effects)==null?void 0:i.map(l=>({type:"positive",name:l.effectName,description:l.effectDescription,value:l.magnitude,target:l.targetAttribute||""})))||[]],associatedItems:[],imageUrl:void 0,category:e.type}}function mb(e){var t;return{...e,id:e.edid||e.name,name:e.name,description:e.description,tags:e.tags||[],summary:e.description,effects:[...((t=e.effects)==null?void 0:t.map(n=>({type:"positive",name:n.type,description:n.condition||n.type,value:n.value})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalTrait:e}}function Uk(e){var s,r,a,i,l,c,u,d;const t=[...((s=e.stat_modifications)==null?void 0:s.map(f=>({type:f.type==="bonus"?"positive":"negative",name:`${f.stat} ${f.type==="bonus"?"+":"-"}${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} ${f.type==="bonus"?"increased":"decreased"} by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((r=e.skill_bonuses)==null?void 0:r.map(f=>({type:"positive",name:`${f.stat} +${f.value}${f.value_type==="percentage"?"%":""}`,description:`${f.stat} skill increased by ${f.value}${f.value_type==="percentage"?"%":""}`,value:f.value,target:f.stat})))||[],...((a=e.powers)==null?void 0:a.map(f=>({type:"positive",name:f.name,description:f.description,value:f.magnitude||0,target:"power"})))||[],...((i=e.conditional_effects)==null?void 0:i.map(f=>({type:"neutral",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[],...((l=e.mastery_effects)==null?void 0:l.map(f=>({type:"positive",name:f.stat,description:f.description,value:f.value,target:f.stat})))||[]],n=[e.group,...((c=e.stat_modifications)==null?void 0:c.map(f=>f.stat))||[],...((u=e.skill_bonuses)==null?void 0:u.map(f=>f.stat))||[],...((d=e.powers)==null?void 0:d.map(f=>f.name))||[]].filter((f,m,h)=>h.indexOf(f)===m);return{...e,id:e.id||e.edid,name:e.name,description:e.description,tags:n,summary:e.description,effects:t,associatedItems:[],imageUrl:void 0,category:e.group,originalBirthsign:e}}function OB(e){var s;const t=[{type:"positive",name:e.name,description:e.description||"",value:0,target:"destiny"}],n=[...e.tags||[],...((s=e.prerequisites)==null?void 0:s.map(r=>`Requires: ${r}`))||[]].filter((r,a,i)=>i.indexOf(r)===a);return{...e,id:e.id||e.edid,name:e.name,description:e.description||"",tags:n,summary:e.description||"",effects:t,associatedItems:[],imageUrl:e.icon,category:"Destiny",originalDestinyNode:e}}function BB(){const{data:e,loading:t,error:n,load:s}=co();return{birthsigns:e,loading:t,error:n,refetch:s}}function Fk({className:e}){const{birthsigns:t}=BB(),{build:n,setStone:s}=gt(),r=dt(),a=n.stone?t.find(u=>u.edid===n.stone):null,i=u=>{s(u.edid)},l=()=>{r("/birth-signs")};if(!a)return o.jsxs(In,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's birthsign"}),o.jsx(ub,{birthsigns:t,onSelect:i,placeholder:"Search for a birthsign...",className:"w-full"})]});const c=Uk(a);return o.jsxs(In,{title:"Birth Sign",navigateTo:"birthsigns",onNavigate:l,className:e,children:[o.jsx(ub,{birthsigns:t,onSelect:i,placeholder:`Birth Sign: Select a birthsign (${a.name})`,className:"w-full"}),o.jsx(Bd,{item:c,originalBirthsign:a,isExpanded:!0,className:"border-0 shadow-none",showToggle:!1})]})}const IB={selectedTags:[],sortBy:"alphabetical",viewMode:"grid",expandedBirthsigns:new Set};function HB(e,t){switch(t.type){case"ADD_TAG":return e.selectedTags.some(n=>n.value===t.payload.value&&n.category===t.payload.category)?e:{...e,selectedTags:[...e.selectedTags,t.payload]};case"REMOVE_TAG":return{...e,selectedTags:e.selectedTags.filter(n=>n.id!==t.payload)};case"SET_SORT":return{...e,sortBy:t.payload};case"SET_VIEW_MODE":return{...e,viewMode:t.payload};case"TOGGLE_EXPANDED":{const n=new Set(e.expandedBirthsigns);return n.has(t.payload)?n.delete(t.payload):n.add(t.payload),{...e,expandedBirthsigns:n}}case"EXPAND_ALL":return{...e,expandedBirthsigns:new Set(t.payload)};case"COLLAPSE_ALL":return{...e,expandedBirthsigns:new Set};default:return e}}function UB(e){const[t,n]=g.useReducer(HB,IB),s=g.useMemo(()=>{const w=V8(e),x=q8(e);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"groups",name:"Birthsign Groups",placeholder:"Search by birthsign group...",options:w.map(b=>({id:`group-${b}`,label:b,value:b,category:"Birthsign Groups",description:`Birthsigns from ${b} group`}))},{id:"stats",name:"Stats & Skills",placeholder:"Search by stats and skills...",options:x.map(b=>({id:`stat-${b}`,label:b.replace(/_/g," ").replace(/\b\w/g,y=>y.toUpperCase()),value:b,category:"Stats & Skills",description:`Birthsigns that affect ${b}`}))}]},[e]),r=g.useMemo(()=>t.selectedTags.length===0?e:e.filter(w=>t.selectedTags.every(x=>{switch(x.category){case"Fuzzy Search":return!0;case"Birthsign Groups":return w.group===x.value;case"Stats & Skills":return[...w.stat_modifications.map(y=>y.stat),...w.skill_bonuses.map(y=>y.stat)].some(y=>y===x.value);default:return!0}})),[e,t.selectedTags]),a=g.useMemo(()=>t.selectedTags.filter(w=>w.category==="Fuzzy Search").map(w=>w.value).join(" "),[t.selectedTags]),{filteredBirthsigns:i}=fk(r,a),l=g.useMemo(()=>i.map(Uk),[i]),c=g.useMemo(()=>[...l].sort((w,x)=>{var b,y;switch(t.sortBy){case"alphabetical":return w.name.localeCompare(x.name);case"group":{const N=k=>{switch(k){case"Warrior":return 1;case"Mage":return 2;case"Thief":return 3;case"Serpent":return 4;case"Other":return 5;default:return 6}},j=N(w.category),S=N(x.category);return j!==S?j-S:w.name.localeCompare(x.name)}case"power-count":{const N=((b=w.effects)==null?void 0:b.filter(S=>S.target==="power").length)||0,j=((y=x.effects)==null?void 0:y.filter(S=>S.target==="power").length)||0;return N!==j?j-N:w.name.localeCompare(x.name)}default:return 0}}),[l,t.sortBy]),u=g.useCallback(w=>{n({type:"ADD_TAG",payload:w})},[]),d=g.useCallback(w=>{n({type:"REMOVE_TAG",payload:w})},[]),f=g.useCallback(w=>{n({type:"SET_SORT",payload:w})},[]),m=g.useCallback(w=>{n({type:"SET_VIEW_MODE",payload:w})},[]),h=g.useCallback(w=>{n({type:"TOGGLE_EXPANDED",payload:w})},[]),p=g.useCallback(w=>{n({type:"EXPAND_ALL",payload:w})},[]),v=g.useCallback(()=>{n({type:"COLLAPSE_ALL"})},[]);return{...t,addTag:u,removeTag:d,setSort:f,setViewMode:m,toggleExpanded:h,expandAll:p,collapseAll:v,searchCategories:s,fuzzySearchQuery:a,filteredBirthsigns:r,displayItems:l,sortedDisplayItems:c}}function FB(){const{data:e,loading:t,error:n}=X6(),s=e||[],{selectedTags:r,sortBy:a,viewMode:i,addTag:l,removeTag:c,setSort:u,setViewMode:d,searchCategories:f,filteredBirthsigns:m,displayItems:h,sortedDisplayItems:p}=UB(s);g.useEffect(()=>{console.log("birthsigns",s),console.log("sortedDisplayItems",p),console.log("displayItems",h),console.log("filteredBirthsigns",m)},[s,p,h,m]);const[v,w]=g.useState(null),[x,b]=g.useState(!1),y=N=>{w(N),b(!0)};return t?o.jsx(Fn,{title:"Birthsigns",description:"Choose your birthsign",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("p",{children:"Loading birthsigns..."})})}):n?o.jsx(Fn,{title:"Birthsigns",description:"Choose your birthsign",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("p",{className:"text-red-500",children:["Error loading birthsigns: ",n]})})}):o.jsxs(Fn,{title:"Birth Signs",description:"Choose your character's birthsign to gain unique abilities and bonuses based on the celestial constellations.",children:[o.jsx("div",{className:"flex items-center gap-4 mb-4",children:o.jsx("div",{className:"flex-1",children:o.jsx(ga,{categories:f,onSelect:N=>{let j;typeof N=="string"?j={id:`custom-${N}`,label:N,value:N,category:"Fuzzy Search"}:j={id:`${N.category}-${N.id}`,label:N.label,value:N.value,category:N.category},r.some(S=>S.value===j.value&&S.category===j.category)||l(j)},onCustomSearch:N=>{let j;typeof N=="string"?j={id:`custom-${N}`,label:N,value:N,category:"Fuzzy Search"}:j={id:`${N.category}-${N.id}`,label:N.label,value:N.value,category:N.category},r.some(S=>S.value===j.value&&S.category===j.category)||l(j)}})})}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(W,{variant:i==="grid"?"default":"outline",size:"sm",onClick:()=>d("grid"),className:"flex items-center gap-2",children:[o.jsx(Fi,{className:"h-4 w-4"}),"Grid"]}),o.jsxs(W,{variant:i==="list"?"default":"outline",size:"sm",onClick:()=>d("list"),className:"flex items-center gap-2",children:[o.jsx(oo,{className:"h-4 w-4"}),"List"]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(Qf,{children:[o.jsx(Jf,{asChild:!0,children:o.jsxs(W,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:["Sort:"," ",a==="alphabetical"?"A-Z":a==="group"?"Group":"Power Count",o.jsx(En,{className:"h-4 w-4"})]})}),o.jsxs(Hc,{align:"end",children:[o.jsx(_s,{onClick:()=>u("alphabetical"),children:"Alphabetical"}),o.jsx(_s,{onClick:()=>u("group"),children:"By Group"}),o.jsx(_s,{onClick:()=>u("power-count"),children:"By Power Count"})]})]})})]}),o.jsx("div",{className:"my-4",children:r.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:()=>r.forEach(N=>c(N.id)),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(Vt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),r.map(N=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>c(N.id),title:"Click to remove",children:[N.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},N.id))]})}),i==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:p.map(N=>{const j=s.find(S=>S.id===N.id||S.edid===N.id);return j?o.jsx(Bd,{originalBirthsign:j,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>y(j)},N.id):null})}):o.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:p.map(N=>{const j=s.find(S=>S.id===N.id||S.edid===N.id);return j?o.jsx(Bd,{originalBirthsign:j,className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>y(j)},N.id):null})}),p.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No birthsigns found matching your criteria."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),o.jsx(Q8,{birthsign:v,isOpen:x,onOpenChange:b})]})}class gs{static isValid(t){return typeof t=="object"&&t!==null&&typeof t.id=="string"&&typeof t.name=="string"&&typeof t.description=="string"&&Array.isArray(t.tags)&&Array.isArray(t.prerequisites)}static equals(t,n){return t.id===n.id}static hasTag(t,n){return t.tags.includes(n)}static hasAnyTag(t,n){return n.some(s=>this.hasTag(t,s))}static hasAllTags(t,n){return n.every(s=>this.hasTag(t,s))}static filterByTag(t,n){return t.filter(s=>this.hasTag(s,n))}static filterByAnyTag(t,n){return t.filter(s=>this.hasAnyTag(s,n))}static filterByAllTags(t,n){return t.filter(s=>this.hasAllTags(s,n))}static isRootNode(t){return t.prerequisites.length===0}static getRootNodes(t){return t.filter(n=>this.isRootNode(n))}static isLeafNode(t,n){return!n.some(s=>s.prerequisites.includes(t.edid))}static getLeafNodes(t){return t.filter(n=>this.isLeafNode(n,t))}static getNextNodes(t,n){return n.filter(s=>s.prerequisites.includes(t.edid))}static getPrerequisiteNodes(t,n){return n.filter(s=>t.prerequisites.includes(s.edid))}static search(t,n){const s=n.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||r.description.toLowerCase().includes(s)||r.tags.some(a=>a.toLowerCase().includes(s)))}static sortByName(t){return[...t].sort((n,s)=>n.name.localeCompare(s.name))}static sortByPrerequisites(t){return[...t].sort((n,s)=>n.prerequisites.length-s.prerequisites.length)}static getUniqueTags(t){const n=t.flatMap(s=>s.tags);return[...new Set(n)].sort()}static getUniquePrerequisites(t){const n=t.flatMap(s=>s.prerequisites);return[...new Set(n)].sort()}}function vo(e={}){const{includePrerequisites:t=!1,includeNextNodes:n=!1,filterByTags:s=[],searchTerm:r="",sortBy:a="name"}=e,{data:i,loading:l,error:c,reload:u}=W6(),d=i||[],f=c,m=g.useMemo(()=>gs.getRootNodes(d),[d]),h=g.useMemo(()=>[],[d]),p=g.useMemo(()=>gs.getUniqueTags(d),[d]),v=g.useMemo(()=>{let C=[...d];return s.length>0&&(C=gs.filterByAnyTag(C,s)),r&&(C=gs.search(C,r)),a==="name"?C=gs.sortByName(C):a==="prerequisites"&&(C=gs.sortByPrerequisites(C)),C},[d,s,r,a]),w=C=>d.find(_=>_.id===C),x=C=>d.find(_=>_.edid===C);return{nodes:d,rootNodes:m,filteredNodes:v,isLoading:l,error:f,categories:h,tags:p,refresh:()=>{u()},getNodeById:w,getNodeByName:C=>d.find(_=>_.name===C),getNodeByEdid:x,getNextNodes:C=>{const _=x(C);return _?gs.getNextNodes(_,d):[]},getPrerequisiteNodes:C=>{const _=x(C);return _?gs.getPrerequisiteNodes(_,d):[]},filterByCategory:C=>[],filterByTag:C=>gs.filterByTag(d,C),searchNodes:C=>gs.search(d,C)}}function w0(e={}){const{initialPath:t=[],validatePath:n=!0}=e,[s,r]=g.useState(t),{nodes:a,rootNodes:i}=vo(),l=g.useMemo(()=>s.length>0?s[s.length-1]:null,[s]),c=g.useMemo(()=>s.length===0?i:a.filter(y=>y.prerequisites.length===0?!1:y.prerequisites.some(N=>s.some(j=>j.edid===N))),[s,a,i]),u=g.useMemo(()=>l?a.filter(y=>y.prerequisites.includes(l.edid)):i,[l,a,i]),d=g.useMemo(()=>l?a.filter(y=>l.prerequisites.includes(y.edid)):[],[l,a]),{isValidPath:f,pathErrors:m}=g.useMemo(()=>{if(!n||s.length===0)return{isValidPath:!0,pathErrors:[]};const y=[];for(let N=1;N<s.length;N++){const j=s[N],S=s.slice(0,N);!j.prerequisites.some(E=>S.some(C=>C.edid===E))&&j.prerequisites.length>0&&y.push(`${j.name} requires one of: ${j.prerequisites.join(", ")}`)}return{isValidPath:y.length===0,pathErrors:y}},[s,n]),h=g.useCallback(y=>{if(s.length>0){if(s[s.length-1],!y.prerequisites.some(j=>s.some(S=>S.edid===j))&&y.prerequisites.length>0)return!1}else if(y.prerequisites.length>0)return!1;return r(N=>[...N,y]),!0},[s]),p=g.useCallback(y=>{r(N=>N.slice(0,y+1))},[]),v=g.useCallback(y=>{r(y)},[]),w=g.useCallback(()=>{r([])},[]),x=g.useCallback(y=>{r(N=>N.slice(0,y+1))},[]),b=g.useCallback(()=>({startNode:s[0]||null,endNode:s[s.length-1]||null,totalNodes:s.length,pathString:s.map(y=>y.name).join(" → ")}),[s]);return{currentPath:s,currentNode:l,availableNodes:c,rootNodes:i,isValidPath:f,pathErrors:m,addNodeToPath:h,removeNodeFromPath:p,setPath:v,clearPath:w,goToPathIndex:x,pathLength:s.length,isPathComplete:u.length===0,nextPossibleNodes:u,prerequisiteNodes:d,getPathSummary:b}}function im(e={}){const{fromNode:t,maxDepth:n=10}=e,{nodes:s,rootNodes:r,isLoading:a,error:i}=vo();return{possiblePaths:g.useMemo(()=>{if(a||i||!s.length)return[];const c=[],u=new Set,d=m=>s.filter(h=>h.prerequisites.includes(m)),f=(m,h=0)=>{if(h>=n)return;const p=m[m.length-1],v=d(p.edid);if(v.length===0){c.push({path:[...m],isComplete:!0,endNode:p});return}v.forEach(w=>{const x=m.map(b=>b.id).join("->")+"->"+w.id;u.has(x)||(u.add(x),f([...m,w],h+1))})};if(t){if(d(t.edid).length===0)return[];f([t])}else r.forEach(m=>{f([m])});return c},[s,r,t,n,a,i]),isLoading:a,error:i}}var rh,lm="HoverCard",[Vk,xee]=un(lm,[nl]),cm=nl(),[VB,N0]=Vk(lm),qk=e=>{const{__scopeHoverCard:t,children:n,open:s,defaultOpen:r,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=e,c=cm(t),u=g.useRef(0),d=g.useRef(0),f=g.useRef(!1),m=g.useRef(!1),[h,p]=Yn({prop:s,defaultProp:r??!1,onChange:a,caller:lm}),v=g.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>p(!0),i)},[i,p]),w=g.useCallback(()=>{clearTimeout(u.current),!f.current&&!m.current&&(d.current=window.setTimeout(()=>p(!1),l))},[l,p]),x=g.useCallback(()=>p(!1),[p]);return g.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),o.jsx(VB,{scope:t,open:h,onOpenChange:p,onOpen:v,onClose:w,onDismiss:x,hasSelectionRef:f,isPointerDownOnContentRef:m,children:o.jsx(qS,{...c,children:n})})};qk.displayName=lm;var Gk="HoverCardTrigger",Zk=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,...s}=e,r=N0(Gk,n),a=cm(n);return o.jsx(Yx,{asChild:!0,...a,children:o.jsx(xe.a,{"data-state":r.open?"open":"closed",...s,ref:t,onPointerEnter:te(e.onPointerEnter,Ud(r.onOpen)),onPointerLeave:te(e.onPointerLeave,Ud(r.onClose)),onFocus:te(e.onFocus,r.onOpen),onBlur:te(e.onBlur,r.onClose),onTouchStart:te(e.onTouchStart,i=>i.preventDefault())})})});Zk.displayName=Gk;var qB="HoverCardPortal",[vee,GB]=Vk(qB,{forceMount:void 0}),Hd="HoverCardContent",Yk=g.forwardRef((e,t)=>{const n=GB(Hd,e.__scopeHoverCard),{forceMount:s=n.forceMount,...r}=e,a=N0(Hd,e.__scopeHoverCard);return o.jsx(qt,{present:s||a.open,children:o.jsx(ZB,{"data-state":a.open?"open":"closed",...r,onPointerEnter:te(e.onPointerEnter,Ud(a.onOpen)),onPointerLeave:te(e.onPointerLeave,Ud(a.onClose)),ref:t})})});Yk.displayName=Hd;var ZB=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:i,...l}=e,c=N0(Hd,n),u=cm(n),d=g.useRef(null),f=$e(t,d),[m,h]=g.useState(!1);return g.useEffect(()=>{if(m){const p=document.body;return rh=p.style.userSelect||p.style.webkitUserSelect,p.style.userSelect="none",p.style.webkitUserSelect="none",()=>{p.style.userSelect=rh,p.style.webkitUserSelect=rh}}},[m]),g.useEffect(()=>{if(d.current){const p=()=>{h(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var w;((w=document.getSelection())==null?void 0:w.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",p),()=>{document.removeEventListener("pointerup",p),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),g.useEffect(()=>{d.current&&WB(d.current).forEach(v=>v.setAttribute("tabindex","-1"))}),o.jsx($c,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:te(a,p=>{p.preventDefault()}),onDismiss:c.onDismiss,children:o.jsx(Xx,{...u,...l,onPointerDown:te(l.onPointerDown,p=>{p.currentTarget.contains(p.target)&&h(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:{...l.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),YB="HoverCardArrow",XB=g.forwardRef((e,t)=>{const{__scopeHoverCard:n,...s}=e,r=cm(n);return o.jsx(Wx,{...r,...s,ref:t})});XB.displayName=YB;function Ud(e){return t=>t.pointerType==="touch"?void 0:e()}function WB(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var KB=qk,QB=Zk,Xk=Yk;const Wk=KB,Kk=QB,j0=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},r)=>o.jsx(Xk,{ref:r,align:t,sideOffset:n,className:U("w-64 rounded-md dropdown-enhanced p-4 text-popover-foreground outline-none animate-in zoom-in-90 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-90 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),style:{zIndex:Dt.TOOLTIP},...s}));j0.displayName=Xk.displayName;function JB({node:e,allNodes:t,children:n,showPrerequisites:s=!0,showNextNodes:r=!0,showTags:a=!0,className:i=""}){const l=u=>t.filter(d=>d.prerequisites.includes(u)),c=u=>t.filter(d=>e.prerequisites.includes(d.name));return o.jsxs(Wk,{children:[o.jsx(Kk,{asChild:!0,children:n}),o.jsx(j0,{className:`w-80 p-0 ${i}`,children:o.jsxs(ye,{className:"border-0 shadow-none",children:[o.jsx(Me,{className:"pb-2",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsx("h3",{className:"font-semibold text-lg text-foreground mb-1",children:e.name})}),e.icon&&o.jsx("div",{className:"w-8 h-8 ml-2",children:o.jsx("img",{src:e.icon,alt:e.name,className:"w-full h-full object-contain"})})]})}),o.jsxs(be,{className:"pt-0 space-y-3",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),s&&e.prerequisites.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Prerequisites:"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[c(e.name).map(u=>o.jsx(K,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:u.name},u.id)),e.prerequisites.filter(u=>!t.some(d=>d.name===u)).map((u,d)=>o.jsx(K,{variant:"outline",className:"text-xs bg-gray-50 text-gray-500 border-gray-200",children:u},`missing-${d}`))]})]}),r&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Leads to:"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[l(e.name).map(u=>o.jsx(K,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:u.name},u.id)),l(e.name).length===0&&o.jsx("span",{className:"text-xs text-muted-foreground",children:"No further progression"})]})]}),a&&e.tags.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:"Tags:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((u,d)=>o.jsx(K,{variant:"secondary",className:"text-xs",children:u},d))})]}),o.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[o.jsxs("p",{children:["ID: ",e.id]}),e.globalFormId&&o.jsxs("p",{children:["Form ID: ",e.globalFormId]})]})]})]})})]})}function Qk({node:e,allNodes:t,variant:n="default",size:s="md",showHoverCard:r=!0,onClick:a,className:i=""}){const l={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},c=o.jsx(K,{variant:n,className:`
        ${l[s]} 
        ${a?"cursor-pointer hover:bg-muted/50":""} 
        ${i}
        rounded-full
      `,onClick:a,children:e.name});return r?o.jsx(JB,{node:e,allNodes:t,children:c}):c}function Jk({path:e,allNodes:t,onBreadcrumbClick:n,variant:s="default",className:r=""}){if(e.length===0)return o.jsx("div",{className:`flex items-center gap-2 ${r}`,children:o.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})});const a=s==="compact"?"sm":"md";return o.jsx("div",{className:`flex items-center gap-2 ${r}`,children:e.map((i,l)=>o.jsxs(L.Fragment,{children:[o.jsx(Qk,{node:i,allNodes:t,variant:l===e.length-1?"default":"outline",size:a,showHoverCard:!0,onClick:n?()=>n(l):void 0}),l<e.length-1&&o.jsx(Rc,{className:"w-4 h-4 text-muted-foreground"})]},i.id))})}function eI({path:e,allNodes:t,selectedPathLength:n,isComplete:s,endNode:r,onPathClick:a,variant:i="default",className:l=""}){const c=i==="compact"?"sm":"md";return o.jsxs("div",{className:`p-3 border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer ${l}`,onClick:()=>a(e,n),children:[o.jsx("div",{className:"flex items-center gap-2 mb-2",children:o.jsx("div",{className:"flex flex-wrap items-center gap-1",children:e.map((u,d)=>o.jsxs(L.Fragment,{children:[o.jsx(Qk,{node:u,allNodes:t,variant:"outline",size:c,showHoverCard:!0,onClick:f=>{f==null||f.stopPropagation(),a(e,d)},className:`
                   ${d===0&&n===0?"cursor-pointer":""}
                   ${s&&d===e.length-1?"bg-yellow-600 text-yellow-50 border-yellow-700":""}
                 `}),d<e.length-1&&o.jsx(Rc,{className:"w-3 h-3 text-muted-foreground"})]},u.id))})}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Length: ",e.length," steps"]}),s&&o.jsxs("span",{children:["• Ends at: ",r.name]}),e.length>n&&o.jsxs("span",{children:["• ",e.length-n," more choices"]})]})]})}function Ig({possiblePaths:e,selectedPathLength:t,onPathClick:n,variant:s="default",className:r=""}){const{nodes:a}=vo();return e.length===0?o.jsxs("div",{className:`text-center py-8 ${r}`,children:[o.jsx("p",{className:"text-muted-foreground",children:"No possible paths available."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You may have reached the end of available destiny paths."})]}):o.jsx("div",{className:`space-y-3 ${r}`,children:e.map((i,l)=>o.jsx(eI,{path:i.path,allNodes:a,selectedPathLength:t,isComplete:i.isComplete,endNode:i.endNode,onPathClick:n,variant:s},l))})}const eC=({navigate:e})=>{const{build:t,setDestinyPath:n}=gt(),{nodes:s,isLoading:r,error:a}=vo(),i=L.useMemo(()=>t.destinyPath.map(b=>s.find(y=>y.id===b)).filter(b=>!!b),[t.destinyPath,s]),{isValidPath:l,pathErrors:c,setPath:u,clearPath:d,currentPath:f,currentNode:m}=w0({initialPath:i,validatePath:!0}),{possiblePaths:h}=im({fromNode:m||void 0}),p=b=>{const y=b.map(N=>N.id);n(y)},v=(b,y)=>{let N;if(f.length===0)N=b.slice(0,y+1);else{if(y===0)return;const j=b.slice(1,y+1);N=[...f,...j]}u(N),p(N)},w=()=>{d(),n([])},x=b=>{const y=f.slice(0,b+1);u(y),p(y)};return o.jsxs(ye,{className:"mb-6",children:[o.jsx(Me,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(Be,{className:"text-lg",children:"Destiny"}),o.jsxs(W,{variant:"outline",size:"sm",onClick:()=>e("/destiny"),className:"text-sm whitespace-nowrap cursor-pointer",children:[o.jsx(ao,{className:"w-4 h-4 mr-1"}),"View All"]})]})}),o.jsx(be,{children:r?o.jsx("div",{className:"text-muted-foreground",children:"Loading destiny data..."}):a?o.jsx("div",{className:"text-destructive",children:a}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Selected Path"}),o.jsx(Jk,{path:f,allNodes:s,variant:"compact",onBreadcrumbClick:x})]}),f.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Path Details (",f.length," nodes)"]}),o.jsxs(W,{variant:"outline",size:"sm",onClick:w,className:"text-xs",children:[o.jsx(qa,{className:"w-3 h-3 mr-1"}),"Clear Path"]})]}),o.jsx("div",{className:"space-y-2",children:f.map((b,y)=>o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium flex-shrink-0",children:y+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h5",{className:"font-medium text-sm text-foreground",children:b.name}),b.description&&o.jsx(FormattedText,{text:b.description,className:"text-xs text-muted-foreground mt-1",as:"p"})]})]})},b.id))})]}),h.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:f.length===0?"Choose Your Starting Point":"Continue Your Path"}),o.jsx(Ni,{className:"h-[200px]",children:o.jsx("div",{className:"p-2",children:o.jsx(Ig,{possiblePaths:h,selectedPathLength:f.length,onPathClick:v,variant:"compact"})})})]}),!l&&c.length>0&&o.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx(xi,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),o.jsx("ul",{className:"space-y-0.5",children:c.map((b,y)=>o.jsxs("li",{children:["• ",b]},y))})]}),f.length===0&&h.length===0&&o.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[o.jsx("p",{className:"text-sm",children:"No destiny paths available"}),o.jsx(W,{variant:"outline",size:"sm",onClick:()=>e("/destiny"),className:"mt-2",children:"Browse All Destinies"})]})]})})]})};class mt{static getRaceById(t,n){return t.find(s=>s.edid===n)}static getRacesByCategory(t,n){return t.filter(s=>s.category===n)}static getUniqueCategories(t){return[...new Set(t.map(n=>n.category))]}static getUniqueTags(t){const n=t.flatMap(s=>[...s.keywords||[],...s.flags||[]]);return[...new Set(n)]}static filterByCategory(t,n){return n?t.filter(s=>s.category===n):t}static filterByTags(t,n){return n.length===0?t:t.filter(s=>n.some(r=>(s.keywords||[]).includes(r)||(s.flags||[]).includes(r)))}static filterByAnyTag(t,n){return n.length===0?t:t.filter(s=>n.some(r=>(s.keywords||[]).includes(r)||(s.flags||[]).includes(r)))}static search(t,n){if(!n.trim())return t;const s=n.toLowerCase();return t.filter(r=>r.name.toLowerCase().includes(s)||(r.description||"").toLowerCase().includes(s)||(r.keywords||[]).some(a=>a.toLowerCase().includes(s))||(r.flags||[]).some(a=>a.toLowerCase().includes(s)))}static sortByName(t){return[...t].sort((n,s)=>n.name.localeCompare(s.name))}static sortByCategory(t){return[...t].sort((n,s)=>{const r=n.category.localeCompare(s.category);return r!==0?r:n.name.localeCompare(s.name)})}static transformToPlayerCreationItem(t){const n=[...t.keywords||[],...t.flags||[],t.category],s=[...(t.skillBonuses||[]).map(r=>({name:`${r.skill} +${r.bonus}`,type:"positive",description:`Provides ${r.bonus} bonus to ${r.skill}`,value:r.bonus,target:r.skill})),...(t.racialSpells||[]).map(r=>({name:r.name,type:"positive",description:r.description,target:"racial ability"}))];return{id:t.edid,name:t.name,description:t.description||"",tags:n,effects:s,associatedItems:[],imageUrl:void 0,category:t.category||""}}static getRelatedRaces(t,n){return n.filter(s=>s.edid!==t.edid&&s.category===t.category)}static calculateRaceStats(t){var n,s,r,a,i,l;return{totalHealth:((n=t.startingStats)==null?void 0:n.health)||0,totalMagicka:((s=t.startingStats)==null?void 0:s.magicka)||0,totalStamina:((r=t.startingStats)==null?void 0:r.stamina)||0,totalCarryWeight:((a=t.startingStats)==null?void 0:a.carryWeight)||0,skillBonusCount:((i=t.skillBonuses)==null?void 0:i.length)||0,racialSpellCount:((l=t.racialSpells)==null?void 0:l.length)||0}}static applyFilters(t,n){let s=[...t];return n.search&&(s=this.search(s,n.search)),n.type&&(s=this.filterByCategory(s,n.type)),n.tags.length>0&&(s=this.filterByTags(s,n.tags)),s}}class tI{static enrichRacesWithTags(t){t.forEach(n=>{})}static generateSearchCategories(t){const n=[...new Set(t.map(a=>a.category))],s=[...new Set(t.flatMap(a=>a.keywords.map(i=>i.edid)))],r=[...new Set(t.flatMap(a=>a.flags))];return[{id:"category",name:"Race Type",options:n},{id:"keywords",name:"Keywords",options:s},{id:"flags",name:"Flags",options:r}]}static validateRaceData(t){try{return!(!t.name||!t.edid||!t.category||!t.startingStats||typeof t.startingStats.health!="number"||typeof t.startingStats.magicka!="number"||typeof t.startingStats.stamina!="number"||typeof t.startingStats.carryWeight!="number"||!Array.isArray(t.skillBonuses)||!Array.isArray(t.racialSpells)||!Array.isArray(t.keywords)||!Array.isArray(t.flags))}catch{return!1}}static calculateRaceStats(t){const n=t.startingStats.health,s=t.startingStats.magicka,r=t.startingStats.stamina,a=t.startingStats.carryWeight,i=t.skillBonuses.length,l=t.racialSpells.length;return{totalHealth:n,totalMagicka:s,totalStamina:r,totalCarryWeight:a,skillBonusCount:i,racialSpellCount:l}}static calculatePowerLevel(t){const n=this.calculateRaceStats(t),s=(n.totalHealth+n.totalMagicka+n.totalStamina)/3,r=n.skillBonusCount*5+n.racialSpellCount*10;return Math.round(s+r)}static getDifficultyRating(t){const n=this.calculatePowerLevel(t);return n<50?1:n<70?2:n<90?3:n<110?4:5}static getPlaystyleSuggestions(t){const n=[],s=t.startingStats;return s.health>120&&(n.push("Tank"),n.push("Melee Fighter")),s.magicka>120&&(n.push("Mage"),n.push("Spellcaster")),s.stamina>120&&(n.push("Archer"),n.push("Rogue")),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("onehanded"))&&n.push("One-Handed Warrior"),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("destruction"))&&n.push("Destruction Mage"),t.skillBonuses.some(r=>r.skill.toLowerCase().includes("sneak"))&&n.push("Stealth"),[...new Set(n)]}static formatRaceDescription(t){const n=this.calculateRaceStats(t),s=this.getPlaystyleSuggestions(t);let r=t.description;return s.length>0&&(r+=`

Recommended playstyles: ${s.join(", ")}`),r+=`

Starting Stats: Health ${n.totalHealth}, Magicka ${n.totalMagicka}, Stamina ${n.totalStamina}`,r+=`
Abilities: ${n.skillBonusCount} skill bonuses, ${n.racialSpellCount} racial spells`,r}}function sl(e={}){const{includeRelated:t=!1,categoryFilter:n="",searchTerm:s="",sortBy:r="name"}=e,{data:a,loading:i,error:l}=ca(),c=g.useMemo(()=>mt.getUniqueCategories(a),[a]),u=g.useMemo(()=>mt.getUniqueTags(a),[a]),d=g.useMemo(()=>a.filter(b=>!(n&&b.category!==n||s&&mt.search([b],s).length===0)),[a,n,s]),f=g.useMemo(()=>r==="name"?mt.sortByName(d):mt.sortByCategory(d),[d,r]);return{races:a,filteredRaces:f,isLoading:i,error:l,categories:c,tags:u,refresh:async()=>{await ca.getState().load()},getRaceById:b=>mt.getRaceById(a,b),getRacesByCategory:b=>mt.getRacesByCategory(a,b),filterByCategory:b=>mt.filterByCategory(a,b),filterByTag:b=>mt.filterByTags(a,[b]),searchRaces:b=>mt.search(a,b)}}function Pn({raceName:e,size:t="md",className:n}){return o.jsx(tk,{entityName:e,entityType:"race",size:t,className:n})}function Zr({category:e,size:t="md",className:n}){return o.jsx(e8,{category:e,categoryType:"race",size:t,className:n})}const nI={ability:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"},trait:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},flag:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"},skill:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"}},sI={sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1"};function rI(e){const t=e.toLowerCase();return["destruction","restoration","alteration","illusion","conjuration","light armor","heavy armor","one-handed","two-handed","archery","block","smithing","enchanting","alchemy","speechcraft","sneak","lockpicking","pickpocket"].some(n=>t.includes(n))?"skill":["waterbreathing","night eye","claws","histskin","dragonskin","magic resistance","voice of the emperor","battle cry"].some(n=>t.includes(n))?"ability":["strong stomach","beast race","bleeds","natural"].some(n=>t.includes(n))?"trait":"flag"}function xs({keyword:e,type:t,size:n="sm",className:s}){const r=t||rI(e),a=nI[r];return o.jsx(K,{variant:"outline",className:U(a.bg,a.text,a.border,sI[n],"font-medium",s),children:e})}const aI={red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",purple:"bg-purple-500",orange:"bg-orange-500"},oI={sm:"h-1.5",md:"h-2",lg:"h-3"};function nr({value:e,maxValue:t,label:n,color:s="blue",size:r="md",showValue:a=!0,className:i}){const l=Math.min(e/t*100,100);return o.jsxs("div",{className:U("space-y-1",i),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:n}),a&&o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),o.jsx("div",{className:"w-full bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:U("transition-all duration-300 ease-out",aI[s],oI[r]),style:{width:`${l}%`}})})]})}function Si({effects:e,title:t="Effects",className:n,maxDisplay:s,compact:r=!1,showDescriptions:a=!0}){if(!e||e.length===0)return null;const i=s?e.slice(0,s):e,l=s&&e.length>s;return o.jsxs("div",{className:U("space-y-3",n),children:[t&&o.jsx(rn,{className:"text-lg font-medium text-foreground",children:t}),r?o.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.map((c,u)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:c.description,children:[o.jsx(st,{className:"h-3 w-3 text-yellow-500"}),o.jsx("span",{className:"font-medium",children:c.name})]},u)),l&&o.jsxs("div",{className:"px-2 py-1 bg-muted/50 rounded text-xs text-muted-foreground",children:["+",e.length-s," more"]})]}):o.jsxs("div",{className:"space-y-3",children:[i.map((c,u)=>o.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-muted",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(st,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h6",{className:"font-medium text-sm",children:c.name}),a&&c.description&&o.jsx(Ie,{text:c.description,className:"text-xs text-muted-foreground mt-1 leading-relaxed"})]})]})},u)),l&&o.jsxs("div",{className:"text-center text-xs text-muted-foreground py-2",children:["+",e.length-s," more effects"]})]})]})}function Fc({stats:e,regeneration:t,title:n="Stats",className:s,showRegeneration:r=!0,compact:a=!1}){return o.jsxs("div",{className:U("space-y-3",s),children:[o.jsx(rn,{className:"text-lg font-medium text-foreground",children:n}),a&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Health"}),o.jsx("span",{className:"font-medium",children:e.health})]}),o.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka"}),o.jsx("span",{className:"font-medium",children:e.magicka})]}),o.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina"}),o.jsx("span",{className:"font-medium",children:e.stamina})]}),o.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight"}),o.jsx("span",{className:"font-medium",children:e.carryWeight})]})]}),r&&t&&o.jsxs("div",{className:"space-y-2 mt-3",children:[o.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Health"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Magicka"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Stamina"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]}),!a&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(nr,{value:e.health,maxValue:200,label:"Health",color:"red",size:"sm"}),o.jsx(nr,{value:e.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),o.jsx(nr,{value:e.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),r&&t&&o.jsxs("div",{className:"space-y-2 mt-3",children:[o.jsx(rn,{className:"text-lg font-medium text-foreground",children:"Regeneration"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Health"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.health.base.toFixed(2),"/s"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Magicka"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.magicka.base.toFixed(2),"/s"]})]}),o.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[o.jsx("div",{className:"font-medium",children:"Stamina"}),o.jsxs("div",{className:"text-muted-foreground",children:[t.stamina.base.toFixed(2),"/s"]})]})]})]})]})]})}function Vc({item:e,className:t,showToggle:n=!0,isExpanded:s=!1,onToggle:r,disableHover:a=!1}){const i=e.originalRace;return o.jsxs(he,{className:t,expanded:s,onToggle:r,disableHover:a,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start justify-between w-full",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Pn,{raceName:e.name,size:"2xl"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(bt,{className:"text-primary font-semibold",children:e.name}),e.category&&o.jsx(K,{variant:"outline",className:U("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:e.category})]})]}),o.jsx("div",{className:"flex items-center gap-3",children:n&&o.jsx(go,{itemId:(i==null?void 0:i.edid)||e.id,itemType:"race",itemName:e.name})})]})}),o.jsx(he.Summary,{children:o.jsx("div",{className:"line-clamp-2",children:o.jsx(Ie,{text:e.summary||e.description,className:"text-sm text-muted-foreground line-clamp-2"})})}),o.jsxs(he.Details,{children:[o.jsx("div",{children:o.jsx(Ie,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),(i==null?void 0:i.startingStats)&&o.jsx(Fc,{stats:i.startingStats,regeneration:i.regeneration,title:"Starting Attributes",showRegeneration:!1,compact:!1}),(i==null?void 0:i.skillBonuses)&&i.skillBonuses.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Starting Skills"}),o.jsx("div",{className:"space-y-2",children:i.skillBonuses.map((l,c)=>o.jsxs("div",{className:"p-2 rounded bg-muted border text-sm flex items-center justify-between",children:[o.jsxs("span",{className:"font-medium",children:[l.skill," +",l.bonus]}),o.jsx(K,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},c))})]}),(i==null?void 0:i.racialSpells)&&i.racialSpells.length>0&&o.jsx(Si,{effects:i.racialSpells.map(l=>({name:l.name,description:l.description})),title:"Quirks",showDescriptions:!0})]})]})}function tC(e,t){const n=g.useMemo(()=>e.map(l=>({id:l.edid.toLowerCase().replace("race",""),name:l.name,description:l.description,category:l.category,abilities:l.racialSpells.map(c=>c.name),skills:l.skillBonuses.map(c=>c.skill),keywords:l.keywords.map(c=>c.edid),originalRace:l})),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"abilities",weight:.2},{name:"skills",weight:.1},{name:"keywords",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Xt(n,s),[n,s]),a=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredRaces:g.useMemo(()=>a.map(l=>l.item.originalRace),[a]),searchResults:a,searchableRaces:n}}function ki({races:e,onSelect:t,placeholder:n="Search races...",className:s=""}){const[r,a]=g.useState(""),{filteredRaces:i}=tC(e,r),l=g.useMemo(()=>i.map(d=>({id:d.edid,label:d.name,description:d.description,category:d.category,icon:o.jsx(Pn,{raceName:d.name,size:"sm"}),badge:d.category&&o.jsx(K,{variant:"outline",className:U("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20","text-xs font-medium transition-colors"),children:d.category}),metadata:{originalRace:d}})),[i]),c=d=>{const f=e.find(m=>m.edid===d.id);f&&t(f)},u=(d,f)=>o.jsxs("div",{className:"flex items-center gap-3",children:[d.icon&&o.jsx("div",{className:"flex-shrink-0",children:d.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:d.label}),d.badge&&o.jsx("div",{className:"flex-shrink-0",children:d.badge})]}),d.description&&o.jsx(Ie,{text:d.description,className:"text-sm text-muted-foreground line-clamp-2 mt-1"})]})]});return o.jsx(Uc,{options:l,onSelect:c,placeholder:n,className:s,renderOption:u,emptyMessage:"No races found",searchQuery:r,onSearchQueryChange:a})}function um({keywords:e,title:t="Keywords",className:n,maxDisplay:s,showCount:r=!0}){if(!e||e.length===0)return null;const a=s?e.slice(0,s):e,i=s&&e.length>s;return o.jsxs("div",{className:U("space-y-3",n),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[t&&o.jsx(rn,{className:"text-lg font-medium text-foreground",children:t}),r&&o.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.length," keyword",e.length!==1?"s":""]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.map((l,c)=>o.jsx(xs,{keyword:l,size:"sm"},c)),i&&o.jsxs("span",{className:"text-xs text-muted-foreground px-2 py-1",children:["+",e.length-s," more"]})]})]})}function nC({item:e,originalRace:t,isExpanded:n=!1,onToggle:s,className:r,showViewAllButton:a=!1,showToggle:i=!0,viewAllButtonText:l="View All",viewAllButtonRoute:c="/race"}){const u=dt(),d=()=>{u(c)},f=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race",m=(e==null?void 0:e.description)||(t==null?void 0:t.description)||"",h=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"",p=(e==null?void 0:e.effects)||[],v=(e==null?void 0:e.summary)||(t==null?void 0:t.description)||"";return o.jsxs(s8,{isExpanded:n,onToggle:s||(()=>{}),className:r,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Pn,{raceName:f,size:"2xl"}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(bt,{className:"text-primary font-semibold",children:f}),h&&o.jsx(Zr,{category:h,size:"sm"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[p&&p.length>0&&o.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-muted-foreground",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(st,{className:"h-3 w-3 text-yellow-500"}),o.jsxs("span",{children:[p.length," effects"]})]})}),a&&o.jsxs(W,{variant:"outline",size:"sm",onClick:d,className:"text-xs",children:[o.jsx(ao,{className:"h-3 w-3 mr-1"}),l]}),i&&o.jsx(go,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:f})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"line-clamp-2",children:o.jsx(Ke,{className:"text-sm text-muted-foreground",children:v})}),o.jsx(Si,{effects:p,maxDisplay:2,compact:!0})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsx(Ke,{className:"text-sm text-muted-foreground leading-relaxed",children:m})}),(t==null?void 0:t.startingStats)&&o.jsx(Fc,{stats:t.startingStats,regeneration:t.regeneration,title:"Starting Stats"}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&o.jsx(Si,{effects:t.racialSpells.map(w=>({name:w.name,description:w.description})),title:"Racial Abilities"}),(t==null?void 0:t.keywords)&&t.keywords.length>0&&o.jsx(um,{keywords:t.keywords.map(w=>w.edid),title:"Keywords"})]})]})}function hb({item:e,originalRace:t,className:n,onClick:s,showViewAllButton:r=!1,showToggle:a=!0,viewAllButtonText:i="View All",viewAllButtonRoute:l="/race"}){const c=dt(),u=m=>{m.stopPropagation(),c(l)},d=(e==null?void 0:e.name)||(t==null?void 0:t.name)||"Unknown Race";e!=null&&e.description||t!=null&&t.description;const f=(e==null?void 0:e.category)||(t==null?void 0:t.category)||"";return e!=null&&e.effects,e!=null&&e.summary||t!=null&&t.description,o.jsxs("div",{className:U("p-4 border rounded-lg bg-card hover:bg-accent/50 transition-colors cursor-pointer","hover:shadow-md hover:border-primary/50 hover:scale-[1.02] transition-all duration-200",n),onClick:s,children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx(Pn,{raceName:d,size:"2xl"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx(bt,{className:"text-primary font-semibold truncate",children:d}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f&&o.jsx(Zr,{category:f,size:"sm"}),(t==null?void 0:t.startingStats)&&o.jsxs("div",{className:"flex gap-1",children:[o.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-red-500/20 text-red-700 dark:text-red-400 rounded-full text-xs font-medium whitespace-nowrap",children:["❤️ ",t.startingStats.health]}),o.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-blue-500/20 text-blue-700 dark:text-blue-400 rounded-full text-xs font-medium whitespace-nowrap",children:["🔷 ",t.startingStats.magicka]}),o.jsxs("div",{className:"inline-flex items-center justify-center px-2 py-1 bg-green-500/20 text-green-700 dark:text-green-400 rounded-full text-xs font-medium whitespace-nowrap",children:["💚 ",t.startingStats.stamina]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(st,{className:"h-3 w-3 text-yellow-500"}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.racialSpells.length," effects"]})]}),a&&o.jsx("div",{onClick:m=>m.stopPropagation(),children:o.jsx(go,{itemId:(t==null?void 0:t.edid)||(e==null?void 0:e.id)||"",itemType:"race",itemName:d})})]})]}),o.jsxs("div",{className:"space-y-2",children:[(t==null?void 0:t.skillBonuses)&&t.skillBonuses.length>0&&o.jsx("div",{className:"grid grid-cols-3 gap-1 justify-items-center",children:t.skillBonuses.map((m,h)=>o.jsxs("div",{className:"px-2 py-1 bg-muted/50 text-muted-foreground rounded text-xs font-medium text-left w-full",children:[m.skill," +",m.bonus]},h))}),(t==null?void 0:t.racialSpells)&&t.racialSpells.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:t.racialSpells.map((m,h)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-skyrim-gold/20 text-skyrim-gold border border-skyrim-gold/30 rounded-full text-xs font-medium",children:[o.jsx(st,{className:"h-3 w-3"}),m.name]},h))})]})]})]}),r&&o.jsxs(W,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:u,children:[o.jsx(ao,{className:"h-4 w-4 mr-2"}),i]})]})}function iI({race:e,isOpen:t,onOpenChange:n}){return e?o.jsx(nk,{open:t,onOpenChange:n,side:"right",children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx(Pn,{raceName:e.name,size:"4xl"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Zr,{category:e.category,size:"sm"}),o.jsx(go,{itemId:e.edid,itemType:"race",itemName:e.name})]}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description})]})]})}),o.jsxs("div",{className:"space-y-6",children:[e.startingStats&&o.jsxs("div",{children:[o.jsx(bt,{className:"text-lg font-semibold mb-3",children:"Starting Stats"}),o.jsx(Fc,{stats:e.startingStats,regeneration:e.regeneration,title:"",compact:!1})]}),e.skillBonuses&&e.skillBonuses.length>0&&o.jsxs("div",{children:[o.jsx(bt,{className:"text-lg font-semibold mb-3",children:"Starting Skills"}),o.jsx("div",{className:"space-y-2",children:e.skillBonuses.map((s,r)=>o.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border flex items-center justify-between",children:[o.jsxs("span",{className:"font-medium",children:[s.skill," +",s.bonus]}),o.jsx(K,{variant:"secondary",className:"text-xs",children:"Starting Bonus"})]},r))})]}),e.racialSpells&&e.racialSpells.length>0&&o.jsxs("div",{children:[o.jsx(bt,{className:"text-lg font-semibold mb-3",children:"Racial Abilities"}),o.jsx(Si,{effects:e.racialSpells.map(s=>({name:s.name,description:s.description})),title:"",showDescriptions:!0})]}),e.keywords&&e.keywords.length>0&&o.jsxs("div",{children:[o.jsx(bt,{className:"text-lg font-semibold mb-3",children:"Keywords"}),o.jsx(um,{keywords:e.keywords.map(s=>s.edid),title:"",maxDisplay:10})]})]})]})}):null}function dm(e){var t,n;return{...e,id:e.edid,name:e.name,description:e.description,tags:[e.category,...Array.isArray(e.flags)?e.flags:[]],summary:e.description.length>100?`${e.description.substring(0,100)}...`:e.description,effects:[...((t=e.skillBonuses)==null?void 0:t.map(s=>({type:"positive",name:s.skill,description:`+${s.bonus} to ${s.skill}`,value:s.bonus,target:s.skill})))||[],...((n=e.racialSpells)==null?void 0:n.map(s=>({type:"positive",name:s.name,description:s.description})))||[]],associatedItems:[],imageUrl:void 0,category:e.category,originalRace:e}}function lI({className:e,allRaces:t}){const{build:n,setRace:s}=gt(),r=dt(),[a,i]=g.useState(!0),l=n.race?t.find(m=>m.edid===n.race):null,c=m=>{s(m.edid)},u=()=>{r("/race")},d=()=>{i(!a)};if(!l)return o.jsxs(In,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),o.jsx(ki,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=dm(l);return o.jsxs(In,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[o.jsx(ki,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),o.jsx(Vc,{item:f,isExpanded:a,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}function sC(){const[e,t]=g.useState(null),[n,s]=g.useState("grid"),[r,a]=g.useState([]),i=g.useCallback(f=>{t(f)},[]),l=g.useCallback(f=>{s(f)},[]),c=g.useCallback(f=>{a(m=>m.includes(f)?m.filter(h=>h!==f):[...m,f])},[]),u=g.useCallback(()=>{a([])},[]),d=g.useCallback(f=>{a(f)},[]);return{selectedRace:e,viewMode:n,expandedSections:r,setSelectedRace:i,setViewMode:l,toggleExpandedSection:c,clearExpandedSections:u,expandAllSections:d}}function fm({races:e}){const[t,n]=g.useState(""),[s,r]=g.useState({search:"",type:"",tags:[]}),a=g.useMemo(()=>mt.getUniqueCategories(e),[e]),i=g.useMemo(()=>mt.getUniqueTags(e),[e]),l=g.useMemo(()=>{let p=e;return t.trim()&&(p=mt.search(p,t)),s.type&&(p=mt.filterByCategory(p,s.type)),s.tags.length>0&&(p=mt.filterByTags(p,s.tags)),mt.sortByName(p)},[e,t,s]),c=g.useCallback(p=>{n(p),r(v=>({...v,search:p}))},[]),u=g.useCallback(p=>{r(p),n(p.search)},[]),d=g.useCallback(()=>{n(""),r({search:"",type:"",tags:[]})},[]),f=g.useCallback(p=>{r(v=>({...v,tags:v.tags.includes(p)?v.tags:[...v.tags,p]}))},[]),m=g.useCallback(p=>{r(v=>({...v,tags:v.tags.filter(w=>w!==p)}))},[]),h=g.useCallback(p=>{r(v=>({...v,type:p}))},[]);return{searchQuery:t,activeFilters:s,filteredRaces:l,categories:a,tags:i,setSearchQuery:c,setFilters:u,clearFilters:d,addTagFilter:f,removeTagFilter:m,setCategoryFilter:h}}function rC({races:e,selectedRaceId:t}){const n=g.useMemo(()=>e.map(u=>mt.transformToPlayerCreationItem(u)),[e]),s=g.useMemo(()=>tI.generateSearchCategories(e),[e]),r=g.useMemo(()=>t&&mt.getRaceById(e,t)||null,[e,t]),a=g.useMemo(()=>r?mt.calculateRaceStats(r):null,[r]),i=g.useMemo(()=>e.length,[e]),l=g.useMemo(()=>{const u=e.reduce((d,f)=>(d[f.category]=(d[f.category]||0)+1,d),{});return Object.entries(u).map(([d,f])=>({category:d,count:f}))},[e]),c=g.useMemo(()=>{const u=e.reduce((d,f)=>{var m;return f.keywords.forEach(h=>{d[h.edid]=(d[h.edid]||0)+1}),(m=f.flags)==null||m.forEach(h=>{d[h]=(d[h]||0)+1}),d},{});return Object.entries(u).map(([d,f])=>({tag:d,count:f})).sort((d,f)=>f.count-d.count)},[e]);return{transformedRaces:n,searchCategories:s,raceStats:a,selectedRaceDetails:r,totalRaces:i,categoriesWithCounts:l,tagsWithCounts:c}}function aC({raceId:e,allRaces:t}){const n=g.useMemo(()=>mt.getRaceById(t,e)||null,[t,e]),s=g.useMemo(()=>n?mt.getRelatedRaces(n,t):[],[n,t]),r=g.useMemo(()=>{if(!n||s.length===0)return null;const u=s[0];return{selectedRace:n,comparedRace:u,differences:{stats:{health:{selected:n.startingStats.health,compared:u.startingStats.health,difference:n.startingStats.health-u.startingStats.health},magicka:{selected:n.startingStats.magicka,compared:u.startingStats.magicka,difference:n.startingStats.magicka-u.startingStats.magicka},stamina:{selected:n.startingStats.stamina,compared:u.startingStats.stamina,difference:n.startingStats.stamina-u.startingStats.stamina},carryWeight:{selected:n.startingStats.carryWeight,compared:u.startingStats.carryWeight,difference:n.startingStats.carryWeight-u.startingStats.carryWeight}},skills:n.skillBonuses.map(d=>{const f=u.skillBonuses.find(m=>m.skill===d.skill);return{skill:d.skill,selected:d.bonus,compared:(f==null?void 0:f.bonus)||0,difference:d.bonus-((f==null?void 0:f.bonus)||0)}}),spells:{selected:n.racialSpells.map(d=>d.name),compared:u.racialSpells.map(d=>d.name),unique:n.racialSpells.filter(d=>!u.racialSpells.some(f=>f.name===d.name)).map(d=>d.name)}}}},[n,s]),a=g.useMemo(()=>s.length>0,[s]),i=g.useMemo(()=>s.length,[s]);return{race:n,relatedRaces:s,raceComparison:r,isLoading:!1,error:null,hasRelatedRaces:a,relatedRacesCount:i}}function oC({className:e}){const{races:t}=sl(),{build:n,setRace:s}=gt(),r=dt(),[a,i]=g.useState(!0),l=n.race?t.find(m=>m.edid===n.race):null,c=m=>{s(m.edid)},u=()=>{r("/build/race")},d=()=>{i(!a)};if(!l)return o.jsxs(In,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's race"}),o.jsx(ki,{races:t,onSelect:c,placeholder:"Search for a race...",className:"w-full"})]});const f=dm(l);return o.jsxs(In,{title:"Race",navigateTo:"races",onNavigate:u,className:e,children:[o.jsx(ki,{races:t,onSelect:c,placeholder:`Race: Select a race (${l.name})`,className:"w-full"}),o.jsx(Vc,{item:f,isExpanded:a,onToggle:d,showToggle:!1,className:"border-0 shadow-none",disableHover:!0})]})}function iC(){const{build:e}=gt(),{races:t,isLoading:n,error:s}=sl(),{viewMode:r,setViewMode:a}=sC(),{filteredRaces:i}=fm({races:t}),c=(()=>{const S=[...new Set(t.flatMap(C=>C.keywords.map(_=>_.edid)))],k=[...new Set(t.flatMap(C=>C.skillBonuses.map(_=>_.skill)))],E=[...new Set(t.map(C=>C.category))];return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:S.map(C=>({id:`keyword-${C}`,label:C,value:C,category:"Fuzzy Search",description:`Races with ${C} keyword`}))},{id:"skill-bonuses",name:"Skill Bonuses",placeholder:"Search by skill...",options:k.map(C=>({id:`skill-${C}`,label:C,value:C,category:"Skill Bonuses",description:`Races with ${C} bonus`}))},{id:"categories",name:"Race Categories",placeholder:"Filter by category...",options:E.map(C=>({id:`category-${C}`,label:C,value:C,category:"Race Categories",description:`${C} races`}))}]})(),[u,d]=g.useState([]),f=S=>{let k;typeof S=="string"?k={id:`custom-${S}`,label:S,value:S,category:"Fuzzy Search"}:k={id:`${S.category}-${S.id}`,label:S.label,value:S.value,category:S.category},u.some(E=>E.value===k.value&&E.category===k.category)||d(E=>[...E,k])},m=S=>{d(k=>k.filter(E=>E.id!==S))},h=i.filter(S=>u.length===0?!0:u.every(k=>{switch(k.category){case"Fuzzy Search":return!0;case"Race Categories":return S.category===k.value;case"Skill Bonuses":return S.skillBonuses.some(E=>E.skill===k.value);case"Keywords":return S.keywords.some(E=>E.edid===k.value);default:return!0}})),p=u.filter(S=>S.category==="Fuzzy Search").map(S=>S.value).join(" "),{filteredRaces:v}=tC(h,p),w=v.map(S=>({...dm(S),originalRace:S})),[x,b]=g.useState(null),[y,N]=g.useState(!1),j=S=>{b(S),N(!0)};return n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading races..."})]})}):s?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:s}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsxs(Fn,{title:"Races",description:"Choose your character's race. Each race has unique abilities, starting attributes, and racial traits that will shape your journey through Tamriel.",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(ga,{categories:c,onSelect:f,onCustomSearch:f})}),o.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[o.jsx(W,{variant:r==="list"?"default":"ghost",size:"sm",onClick:()=>a("list"),className:"h-8 px-3",title:"List view",children:o.jsx(oo,{className:"h-4 w-4"})}),o.jsx(W,{variant:r==="grid"?"default":"ghost",size:"sm",onClick:()=>a("grid"),className:"h-8 px-3",title:"Grid view",children:o.jsx(Fi,{className:"h-4 w-4"})})]})]}),o.jsx("div",{className:"my-4",children:u.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:()=>d([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(Vt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),u.map(S=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(S.id),title:"Click to remove",children:[S.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},S.id))]})}),r==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full",children:w.map(S=>{var E;const k=e.race===((E=S.originalRace)==null?void 0:E.edid);return o.jsx(hb,{item:S,originalRace:S.originalRace,onClick:()=>j(S.originalRace),className:U(k&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}):o.jsx("div",{className:"flex flex-col gap-4 w-full",children:w.map(S=>{var E;const k=e.race===((E=S.originalRace)==null?void 0:E.edid);return o.jsx(hb,{item:S,originalRace:S.originalRace,onClick:()=>j(S.originalRace),className:U(k&&"bg-skyrim-gold/20 border-2 border-skyrim-gold/30 shadow-sm")},S.id)})}),w.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No races found matching your criteria."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}),o.jsx(iI,{race:x,isOpen:y,onOpenChange:N})]})}function cI({initialFilters:e,onFiltersChange:t,onSearch:n,onTagSelect:s,onTagRemove:r}={}){const[a,i]=g.useState(e||{search:"",selectedFilters:{},selectedTags:[]});return g.useEffect(()=>{e&&i(e)},[e]),{filters:a,handleSearch:f=>{const m={...a,search:f};i(m),n==null||n(f)},handleTagSelect:f=>{const m={id:`${f.category}-${f.id}`,label:f.label,value:f.value,category:f.category};if(!a.selectedTags.some(p=>p.id===m.id)){const p={...a,selectedTags:[...a.selectedTags,m]};i(p),s==null||s(m),t==null||t(p)}},handleTagRemove:f=>{const m={...a,selectedTags:a.selectedTags.filter(h=>h.id!==f)};i(m),r==null||r(f),t==null||t(m)},updateFilters:f=>{i(f),t==null||t(f)}}}function uI({className:e}){const{races:t,isLoading:n,error:s,categories:r,tags:a}=sl(),{searchQuery:i,setSearchQuery:l,filteredRaces:c}=fm({races:t}),u=L.useMemo(()=>c.map(y=>dm(y)),[c]),d=L.useMemo(()=>[{id:"categories",name:"Categories",placeholder:"Search by category...",options:(r||[]).map(y=>({id:y,label:y,value:y,category:"categories",description:`Race category: ${y}`}))},{id:"tags",name:"Tags",placeholder:"Search by tags...",options:(a||[]).map(y=>({id:y,label:y,value:y,category:"tags",description:`Race tag: ${y}`}))}],[r,a]),{filters:f,handleSearch:m,handleTagSelect:h,handleTagRemove:p}=cI({onSearch:l,onFiltersChange:y=>{}});L.useEffect(()=>{i!==f.search&&m(i)},[i,m,f.search]);const[v,w]=L.useState(null),x=y=>{const N=t.find(j=>j.edid===y.id);return N?o.jsx(nC,{item:y,originalRace:N,isExpanded:!1,showToggle:!0,className:"h-full"},N.edid):null},b=y=>{const N=t.find(j=>j.edid===y.id);return N?o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:N.name}),o.jsx("p",{className:"text-muted-foreground mb-4",children:N.description}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Category:"})," ",N.category]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Health:"})," ",N.startingStats.health]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Magicka:"})," ",N.startingStats.magicka]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Stamina:"})," ",N.startingStats.stamina]})]})]}):null};return n?o.jsx("div",{className:U("container mx-auto p-6",e),children:o.jsxs("div",{className:"animate-pulse space-y-6",children:[o.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((y,N)=>o.jsx("div",{className:"h-64 bg-gray-200 rounded"},N))})]})}):s?o.jsx("div",{className:U("container mx-auto p-6",e),children:o.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[o.jsx("strong",{children:"Error:"})," ",s]})}):o.jsxs("div",{className:U("container mx-auto p-6",e),children:[o.jsx(V6,{searchCategories:d,selectedTags:f.selectedTags,viewMode:"grid",onTagSelect:h,onTagRemove:p,className:"mb-6"}),o.jsxs(I6,{children:[o.jsx(H6,{children:o.jsx(P6,{items:u,viewMode:"grid",onItemSelect:w,selectedItem:v,renderItemCard:x})}),o.jsx(U6,{children:v?b(v):o.jsx(F6,{title:"Select a Race",description:"Choose a race from the list to view its details"})})]})]})}function dI({className:e,selectedRace:t,onRaceSelect:n,onRaceClear:s,showSearch:r=!0,showComparison:a=!1,maxDisplayRaces:i=3}){const{races:l,isLoading:c,error:u}=sl(),{filteredRaces:d}=fm({races:l});rC({races:l,selectedRaceId:(t==null?void 0:t.edid)||null});const[f,m]=L.useState(!1);return c?o.jsx("div",{className:U("p-4 border rounded-lg",e),children:o.jsxs("div",{className:"animate-pulse space-y-3",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),o.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})}):u?o.jsx("div",{className:U("p-4 border rounded-lg",e),children:o.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-3 py-2 rounded text-sm",children:[o.jsx("strong",{children:"Error:"})," ",u]})}):o.jsxs("div",{className:U("border rounded-lg overflow-hidden",e),children:[o.jsxs("div",{className:"p-4 bg-muted/50 border-b",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(bt,{className:"text-lg font-semibold",children:"Race Selection"}),t&&o.jsx(W,{variant:"ghost",size:"sm",onClick:s,className:"text-muted-foreground hover:text-foreground",children:o.jsx(Vt,{className:"h-4 w-4"})})]}),t&&o.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[o.jsx(K,{variant:"secondary",children:t.category}),o.jsxs(Ke,{className:"text-sm text-muted-foreground",children:[t.startingStats.health," HP, ",t.startingStats.magicka," MP, ",t.startingStats.stamina," SP"]})]})]}),o.jsx("div",{className:"p-4",children:t?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Vc,{item:{id:t.edid,name:t.name,description:t.description,summary:t.description,category:t.category,effects:[],tags:[],originalRace:t},isExpanded:!0,showToggle:!1,className:"border-0 shadow-none"}),a&&o.jsxs("div",{className:"pt-4 border-t",children:[o.jsx(Ke,{className:"text-sm font-medium mb-2",children:"Compare with:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.filter(h=>h.edid!==t.edid).slice(0,4).map(h=>o.jsx(W,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(h),className:"justify-start text-left h-auto p-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-xs",children:h.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))})]})]}):o.jsxs("div",{className:"space-y-4",children:[r&&o.jsxs("div",{children:[o.jsx(Ke,{className:"text-sm font-medium mb-2",children:"Search for a race:"}),o.jsx(ki,{races:d,onSelect:n,placeholder:"Type to search races...",className:"w-full"})]}),o.jsxs("div",{children:[o.jsx(Ke,{className:"text-sm font-medium mb-2",children:"Quick select:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.slice(0,i).map(h=>o.jsx(W,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(h),className:"justify-start text-left h-auto p-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-xs",children:h.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))}),l.length>i&&o.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>m(!f),className:"mt-2 w-full",children:[o.jsx(En,{className:U("h-4 w-4 transition-transform",f&&"rotate-180")}),"Show ",l.length-i," more races"]})]}),f&&o.jsx("div",{className:"space-y-2",children:l.slice(i).map(h=>o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>n==null?void 0:n(h),className:"w-full justify-start text-left h-auto p-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-muted rounded flex items-center justify-center text-xs font-medium",children:h.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-xs",children:h.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:h.category})]})]})},h.edid))})]})})]})}function fI({raceId:e,className:t}){const n=dt(),{race:s,relatedRaces:r}=aC(e);return sl(),s?o.jsxs("div",{className:U("container mx-auto p-6",t),children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs(W,{variant:"ghost",onClick:()=>n("/races"),className:"mb-4",children:[o.jsx(dg,{className:"h-4 w-4 mr-2"}),"Back to Races"]}),o.jsxs("div",{className:"flex items-start gap-6",children:[o.jsx(Pn,{raceName:s.name,size:"xl"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(ho,{className:"text-3xl font-bold",children:s.name}),o.jsx(Zr,{category:s.category,size:"lg"})]}),o.jsx(Ke,{className:"text-lg text-muted-foreground mb-4",children:s.description}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(zN,{className:"h-4 w-4"}),o.jsx("span",{children:"Playable Race"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(st,{className:"h-4 w-4"}),o.jsxs("span",{children:[s.keywords.length," Keywords"]})]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[o.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[o.jsx(Ra,{className:"text-xl font-semibold mb-4",children:"Statistics"}),o.jsx(Fc,{stats:s.startingStats,regeneration:s.regeneration,title:"Starting Stats",compact:!1,showRegeneration:!0})]}),s.racialSpells.length>0&&o.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[o.jsx(Ra,{className:"text-xl font-semibold mb-4",children:"Racial Abilities"}),o.jsx(Si,{effects:s.racialSpells.map(a=>({name:a.name,description:a.description})),title:"Racial Spells",showDescriptions:!0,compact:!1})]}),s.keywords.length>0&&o.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[o.jsx(Ra,{className:"text-xl font-semibold mb-4",children:"Keywords"}),o.jsx(um,{keywords:s.keywords.map(a=>a.edid),title:"Race Keywords",showCount:!0})]}),o.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[o.jsx(Ra,{className:"text-xl font-semibold mb-4",children:"Additional Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(bt,{className:"text-lg font-medium mb-2",children:"Description"}),o.jsx(Ke,{className:"text-muted-foreground",children:s.description})]}),s.racialSpells.length>0&&o.jsxs("div",{children:[o.jsx(bt,{className:"text-lg font-medium mb-2",children:"Racial Spells"}),o.jsx("div",{className:"space-y-2",children:s.racialSpells.map((a,i)=>o.jsxs("div",{className:"p-3 bg-muted/50 rounded",children:[o.jsx("div",{className:"font-medium",children:a.name}),o.jsx("div",{className:"text-sm text-muted-foreground",children:a.description})]},i))})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[o.jsx(bt,{className:"text-lg font-semibold mb-3",children:"Quick Actions"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(W,{className:"w-full",size:"sm",children:"Add to Character Build"}),o.jsx(W,{variant:"outline",className:"w-full",size:"sm",children:"Compare with Other Races"}),o.jsxs(W,{variant:"outline",className:"w-full",size:"sm",children:[o.jsx(ao,{className:"h-4 w-4 mr-2"}),"View in Wiki"]})]})]}),o.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[o.jsx(bt,{className:"text-lg font-semibold mb-3",children:"Race Summary"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Category:"}),o.jsx(K,{variant:"secondary",children:s.category})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Health:"}),o.jsx("span",{className:"font-medium",children:s.startingStats.health})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Magicka:"}),o.jsx("span",{className:"font-medium",children:s.startingStats.magicka})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Stamina:"}),o.jsx("span",{className:"font-medium",children:s.startingStats.stamina})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Carry Weight:"}),o.jsx("span",{className:"font-medium",children:s.startingStats.carryWeight})]})]})]}),r.length>0&&o.jsxs("div",{className:"bg-card border rounded-lg p-4",children:[o.jsx(bt,{className:"text-lg font-semibold mb-3",children:"Related Races"}),o.jsx("div",{className:"space-y-2",children:r.slice(0,3).map(a=>o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>n(`/races/${a.edid}`),className:"w-full justify-start text-left h-auto p-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pn,{raceName:a.name,size:"sm"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm",children:a.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:a.category})]})]})},a.edid))})]})]})]})]}):o.jsxs("div",{className:U("container mx-auto p-6",t),children:[o.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[o.jsx("strong",{children:"Error:"})," ","Race not found"]}),o.jsxs(W,{variant:"outline",onClick:()=>n("/races"),className:"mt-4",children:[o.jsx(dg,{className:"h-4 w-4 mr-2"}),"Back to Races"]})]})}function mI(){const{races:e,isLoading:t,error:n,categories:s,tags:r}=sl(),{selectedRace:a,setSelectedRace:i,viewMode:l,setViewMode:c,expandedSections:u}=sC(),{searchQuery:d,setSearchQuery:f,activeFilters:m,clearFilters:h,filteredRaces:p}=fm({races:e}),{transformedRaces:v,searchCategories:w,categoriesWithCounts:x}=rC({races:e,selectedRaceId:a}),{race:b,relatedRaces:y,raceComparison:N}=aC({raceId:a||"",allRaces:e}),[j,S]=L.useState(!1),[k,E]=L.useState("overview");if(t)return o.jsxs("div",{className:"container mx-auto p-6",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Loading..."}),o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]});if(n)return o.jsxs("div",{className:"container mx-auto p-6",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Races MVA Demo - Error"}),o.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[o.jsx("strong",{children:"Error:"})," ",n]})]});const C=e[0];return o.jsxs("div",{className:"container mx-auto p-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Races MVA Demo - Model View Adapter Architecture"}),o.jsxs(Qi,{value:k,onValueChange:E,className:"mb-6",children:[o.jsxs(Ji,{children:[o.jsx(an,{value:"overview",children:"Overview"}),o.jsx(an,{value:"adapters",children:"Adapters"}),o.jsx(an,{value:"components",children:"Components"}),o.jsx(an,{value:"views",children:"Views"})]}),o.jsx(wn,{value:"overview",className:"space-y-6",children:o.jsxs(ye,{children:[o.jsxs(Me,{children:[o.jsx(Be,{children:"MVA Architecture Overview"}),o.jsx(Ns,{children:"This demo showcases the Model-View-Adapter pattern implementation for the Races feature."})]}),o.jsx(be,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Model Layer"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Data management and business logic"}),o.jsx(K,{variant:"outline",className:"mt-2",children:"RaceModel"})]}),o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Adapter Layer"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"State management and data transformation"}),o.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[o.jsx(K,{variant:"outline",children:"useRaceData"}),o.jsx(K,{variant:"outline",children:"useRaceState"}),o.jsx(K,{variant:"outline",children:"useRaceFilters"})]})]}),o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"View Layer"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"UI components and presentation"}),o.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[o.jsx(K,{variant:"outline",children:"RaceCard"}),o.jsx(K,{variant:"outline",children:"RacePageView"})]})]})]})})]})}),o.jsx(wn,{value:"adapters",className:"space-y-6",children:o.jsxs(ye,{children:[o.jsxs(Me,{children:[o.jsx(Be,{children:"Adapter State Demo"}),o.jsx(Ns,{children:"Interactive demonstration of adapter state management"})]}),o.jsx(be,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-semibold",children:"State Management (useRaceState)"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Selected Race:"}),o.jsx(K,{variant:a?"default":"secondary",children:a||"None"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"View Mode:"}),o.jsxs("div",{className:"flex border rounded",children:[o.jsx(W,{variant:l==="grid"?"default":"ghost",size:"sm",onClick:()=>c("grid"),children:"Grid"}),o.jsx(W,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),children:"List"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Expanded Sections:"}),o.jsx(K,{variant:"outline",children:u.length})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-semibold",children:"Filters (useRaceFilters)"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Search Query:"}),o.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),className:"px-2 py-1 border rounded text-sm",placeholder:"Search races..."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Active Filters:"}),o.jsx(K,{variant:"outline",children:m.tags.length+(m.type?1:0)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Filtered Results:"}),o.jsxs(K,{variant:"outline",children:[p.length," of ",e.length]})]}),o.jsx(W,{size:"sm",onClick:h,children:"Clear Filters"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-semibold",children:"Computed Data (useRaceComputed)"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Transformed Races:"}),o.jsx(K,{variant:"outline",children:v.length})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Search Categories:"}),o.jsx(K,{variant:"outline",children:w.length})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Categories with Counts:"}),o.jsx(K,{variant:"outline",children:Object.keys(x).length})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-semibold",children:"Detail View (useRaceDetail)"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Selected Race Details:"}),o.jsx(K,{variant:b?"default":"secondary",children:(b==null?void 0:b.name)||"None"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Related Races:"}),o.jsx(K,{variant:"outline",children:y.length})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm",children:"Comparison Available:"}),o.jsx(K,{variant:N?"default":"secondary",children:N?"Yes":"No"})]})]})]})]})})]})}),o.jsxs(wn,{value:"components",className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Atomic & Composition Components"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Data Summary"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Total Races:"})," ",e.length]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Categories:"})," ",s.join(", ")]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Total Tags:"})," ",r.length]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Sample Race: ",C==null?void 0:C.name]}),C&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-gray-600 text-sm",children:C.description}),o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Category:"})," ",C.category]}),o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Keywords:"})," ",C.keywords.length]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAvatar Component"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),o.jsx(Pn,{raceName:(C==null?void 0:C.name)||"Nord",size:"sm"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),o.jsx(Pn,{raceName:(C==null?void 0:C.name)||"Nord",size:"lg"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),o.jsx(Pn,{raceName:(C==null?void 0:C.name)||"Nord",size:"2xl"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Extra Large"}),o.jsx(Pn,{raceName:(C==null?void 0:C.name)||"Nord",size:"xl"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Uses generic EntityAvatar with race-specific configuration"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CategoryBadge Component"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Small"}),o.jsx(Zr,{category:"Human",size:"sm"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Medium"}),o.jsx(Zr,{category:"Elf",size:"md"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Large"}),o.jsx(Zr,{category:"Beast",size:"lg"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Uses generic CategoryBadge with race-specific styling"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"KeywordTag Component"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Auto-detected types:"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(xs,{keyword:"destruction"}),o.jsx(xs,{keyword:"waterbreathing"}),o.jsx(xs,{keyword:"strong stomach"}),o.jsx(xs,{keyword:"custom_flag"})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Explicit types:"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(xs,{keyword:"alteration",type:"skill"}),o.jsx(xs,{keyword:"night eye",type:"ability"}),o.jsx(xs,{keyword:"beast race",type:"trait"}),o.jsx(xs,{keyword:"magic",type:"flag"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Auto-detects keyword types or accepts explicit type prop"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"StatBar Component"}),o.jsxs("div",{className:"space-y-4",children:[C&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(nr,{value:C.startingStats.health,maxValue:200,label:"Health",color:"red",size:"md"}),o.jsx(nr,{value:C.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"md"}),o.jsx(nr,{value:C.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"md"})]}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Progress bars with configurable colors, sizes, and labels"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceStatsDisplay Component"}),o.jsxs("div",{className:"space-y-4",children:[C&&o.jsx(Fc,{stats:C.startingStats,regeneration:C.regeneration,title:"Sample Stats",compact:!0}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Composition component that displays race statistics"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceEffectsDisplay Component"}),o.jsxs("div",{className:"space-y-4",children:[C&&C.racialSpells.length>0&&o.jsx(Si,{effects:C.racialSpells.map(_=>({name:_.name,description:_.description})),title:"Racial Abilities",maxDisplay:3}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Composition component for displaying race effects/abilities"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceKeywordsDisplay Component"}),o.jsxs("div",{className:"space-y-4",children:[C&&C.keywords.length>0&&o.jsx(um,{keywords:C.keywords.map(_=>_.edid),title:"Race Keywords",maxDisplay:6}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Composition component that uses KeywordTag atomic components"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceCard Composition Component"}),o.jsxs("div",{className:"space-y-4",children:[C&&o.jsx(nC,{originalRace:C,isExpanded:!0,showToggle:!1,className:"max-w-2xl"}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Main composition component that orchestrates all atomic components"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAutocomplete Component"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(ki,{races:e.slice(0,5),onSelect:_=>console.log("Selected:",_.name),placeholder:"Search for a race...",className:"w-full"}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Search and selection component for races"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceAccordion Component"}),o.jsxs("div",{className:"space-y-4",children:[C&&o.jsx(Vc,{item:{id:C.edid,name:C.name,description:C.description,summary:C.description,category:C.category,effects:[],tags:[],originalRace:C},isExpanded:j,onToggle:()=>S(!j),showToggle:!0,className:"border-0 shadow-none"}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Accordion-style race display for player creation (click to expand/collapse)"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"RaceSelectionCard Component"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(lI,{allRaces:e.slice(0,5),className:"max-w-2xl"}),o.jsx("div",{className:"text-xs text-gray-500",children:o.jsx("p",{children:"Complete race selection interface for player creation"})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sample Races with All Components"}),o.jsx("div",{className:"space-y-4",children:e.slice(0,2).map(_=>o.jsxs("div",{className:"border rounded p-4",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[o.jsx(Pn,{raceName:_.name,size:"2xl"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:_.name}),o.jsx("div",{className:"flex items-center gap-2 mt-1",children:o.jsx(Zr,{category:_.category,size:"sm"})})]})]}),o.jsx("p",{className:"text-sm mb-3",children:_.description}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[o.jsx(nr,{value:_.startingStats.health,maxValue:200,label:"Health",color:"red",size:"sm"}),o.jsx(nr,{value:_.startingStats.magicka,maxValue:200,label:"Magicka",color:"blue",size:"sm"}),o.jsx(nr,{value:_.startingStats.stamina,maxValue:200,label:"Stamina",color:"green",size:"sm"})]}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.keywords.slice(0,5).map((P,O)=>o.jsx(xs,{keyword:P.edid},O)),_.keywords.length>5&&o.jsxs("span",{className:"text-xs text-gray-500",children:["+",_.keywords.length-5," more"]})]})]},_.edid))})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow lg:col-span-2",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"View Components Demo"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceQuickSelectorView"}),o.jsx(dI,{selectedRace:a?e.find(_=>_.edid===a):void 0,onRaceSelect:_=>i(_.edid),onRaceClear:()=>i(null),showSearch:!0,showComparison:!0,maxDisplayRaces:3,className:"max-w-md"}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:o.jsx("p",{children:"Compact selection interface for embedded contexts"})})]}),a&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium mb-3",children:"RaceDetailView"}),o.jsx("div",{className:"border rounded-lg overflow-hidden",children:o.jsx(fI,{raceId:a,className:"p-4"})}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:o.jsx("p",{children:"Detailed race view with rich information display"})})]})]})]})]})]}),o.jsxs(wn,{value:"views",className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"View Components"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ye,{children:[o.jsxs(Me,{children:[o.jsx(Be,{children:"RacePageView"}),o.jsx(Ns,{children:"Main page view with full functionality"})]}),o.jsx(be,{children:o.jsx(iC,{className:"border rounded-lg p-4"})})]}),o.jsxs(ye,{children:[o.jsxs(Me,{children:[o.jsx(Be,{children:"RaceReferenceView"}),o.jsx(Ns,{children:"Browse/search interface"})]}),o.jsx(be,{children:o.jsx(uI,{className:"border rounded-lg p-4"})})]})]})]})]})]})}function ah({text:e,className:t="text-sm text-muted-foreground"}){if(!e)return null;let n=e.replace(/<[^>]*>/g,"");n=n.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const s=n.split(/(<[^>]+>)/g);return o.jsx("div",{className:t,children:s.map((r,a)=>{if(r.startsWith("<")&&r.endsWith(">")){const i=r.slice(1,-1);return o.jsx("span",{className:"font-bold italic text-skyrim-gold",children:i},a)}return r})})}function hI({description:e}){if(!e)return null;const t=e.split(/(<[^>]+>)/g);return o.jsx(Ke,{className:"text-xs text-muted-foreground",children:t.map((n,s)=>{if(n.startsWith("<")&&n.endsWith(">")){const r=n.slice(1,-1);return o.jsx("span",{className:"font-bold italic text-skyrim-gold",children:r},s)}return n})})}function oh({description:e,magnitude:t,duration:n,area:s=0}){if(!e)return null;let r=e.replace(/<[^>]*>/g,"");r=r.replace(/<mag>/g,t.toString()),r=r.replace(/<magnitude>/g,t.toString()),r=r.replace(/<dur>/g,n.toString()),r=r.replace(/<duration>/g,n.toString()),s>0&&(r=r.replace(/<area>/g,s.toString())),r=r.replace(/Global_modifier/g,"<X>").replace(/Global_Modifier/g,"<X>").replace(/global_modifier/g,"<X>").replace(/Magnitude/g,"<Y>").replace(/magnitude/g,"<Y>").replace(/Duration/g,"<Z>").replace(/duration/g,"<Z>").replace(/Area/g,"<A>").replace(/area/g,"<A>").replace(/Global=WSN_Favor_Global_Fractional%/g,"<X>").replace(/Global=WSN_[^%]+%/g,"<X>").replace(/WSN_[^%]+%/g,"<X>").replace(/Global=[^%]+%/g,"<X>").replace(/[A-Z_]+_Global_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Favor_[A-Z_]+/g,"<X>").replace(/[A-Z_]+_Fractional%/g,"<X>").replace(/[A-Z_]+_Global%/g,"<X>").replace(/[A-Z_]+_Favor%/g,"<X>").replace(/Global_[A-Z_]+%/g,"<X>").replace(/Favor_[A-Z_]+%/g,"<X>").replace(/[A-Z_]+_Global/g,"<X>").replace(/[A-Z_]+_Favor/g,"<X>").replace(/Global_[A-Z_]+/g,"<X>").replace(/Favor_[A-Z_]+/g,"<X>");const a=r.split(/(<[^>]+>)/g);return o.jsx(Ke,{className:"text-xs text-muted-foreground",children:a.map((i,l)=>{if(i.startsWith("<")&&i.endsWith(">")){const c=i.slice(1,-1);return o.jsx("span",{className:"font-bold italic text-skyrim-gold",children:c},l)}return i})})}function ih(e){return e<60?`${e}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h`}function lh(e){const t=[/<mag>/g,/<magnitude>/g],n=[/<dur>/g,/<duration>/g],s=t.some(a=>a.test(e)),r=n.some(a=>a.test(e));return{hasMagnitude:s,hasDuration:r}}const gI={Restoration:o.jsx(Df,{className:"h-4 w-4 text-green-500"}),Destruction:o.jsx(RN,{className:"h-4 w-4 text-red-500"}),Alteration:o.jsx(ys,{className:"h-4 w-4 text-blue-500"}),Illusion:o.jsx(uy,{className:"h-4 w-4 text-purple-500"}),Conjuration:o.jsx(Ga,{className:"h-4 w-4 text-purple-500"}),Enchanting:o.jsx(fx,{className:"h-4 w-4 text-blue-500"}),Alchemy:o.jsx(u4,{className:"h-4 w-4 text-green-500"}),"Light Armor":o.jsx(ys,{className:"h-4 w-4 text-blue-500"}),"Heavy Armor":o.jsx(ys,{className:"h-4 w-4 text-gray-500"}),"One-Handed":o.jsx(hg,{className:"h-4 w-4 text-orange-500"}),"Two-Handed":o.jsx(hg,{className:"h-4 w-4 text-red-500"}),Archery:o.jsx(gg,{className:"h-4 w-4 text-green-500"}),Block:o.jsx(ys,{className:"h-4 w-4 text-yellow-500"}),Smithing:o.jsx(ys,{className:"h-4 w-4 text-gray-500"}),Speechcraft:o.jsx(uy,{className:"h-4 w-4 text-blue-500"}),Sneak:o.jsx(TN,{className:"h-4 w-4 text-purple-500"}),Lockpicking:o.jsx(dy,{className:"h-4 w-4 text-yellow-500"}),Pickpocket:o.jsx(dy,{className:"h-4 w-4 text-purple-500"})},pI={Divine:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Daedric:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Aedric:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Tribal:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Ancestral:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200"},gb={sm:"text-xs px-2 py-0.5"};function Fd({item:e,originalReligion:t,isExpanded:n=!1,onToggle:s,className:r,showBlessings:a=!0,showTenets:i=!0,showBoons:l=!0,showFavoredRaces:c=!0,disableHover:u,showToggle:d}){var h,p,v,w,x,b,y,N;const f=j=>{switch(j){case"positive":return o.jsx(Qr,{className:"h-4 w-4 text-green-500"});case"negative":return o.jsx($l,{className:"h-4 w-4 text-red-500"});case"neutral":return o.jsx(mx,{className:"h-4 w-4 text-blue-500"})}},m=j=>gI[j]||o.jsx(st,{className:"h-4 w-4 text-skyrim-gold"});return o.jsxs(he,{expanded:n,onToggle:s,className:r,disableHover:u,children:[o.jsxs(he.Header,{children:[d&&o.jsx(go,{itemId:e.id,itemType:"religion",itemName:e.name}),o.jsx("div",{className:"flex-1",children:o.jsx(bt,{className:"text-primary font-semibold",children:e.name})}),e.category&&o.jsx(K,{variant:"outline",className:U(pI[e.category]||"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",gb.sm,"font-medium transition-colors"),children:e.category}),Yt()&&c&&t&&Array.isArray(t.favoredRaces)&&t.favoredRaces.length>0&&o.jsx("div",{className:"flex items-center gap-1",children:t.favoredRaces.map((j,S)=>o.jsxs(K,{variant:"outline",className:U("bg-skyrim-gold/10 text-skyrim-gold border-skyrim-gold/30 hover:bg-skyrim-gold/20",gb.sm,"font-medium transition-colors"),children:[o.jsx(st,{className:"h-3 w-3 mr-1"}),"Favors ",j]},S))})]}),o.jsxs(he.Summary,{children:[o.jsx("div",{className:"line-clamp-2",children:o.jsx(ah,{text:e.summary||e.description,className:"text-sm text-muted-foreground"})}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[(h=e.effects)==null?void 0:h.slice(0,2).map((j,S)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",title:j.description,children:[f(j.type),o.jsx("span",{className:"font-medium",children:j.name})]},S)),Yt()&&c&&((p=t==null?void 0:t.favoredRaces)==null?void 0:p.slice(0,2).map((j,S)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted/50 rounded text-xs",children:[o.jsx(st,{className:"h-3 w-3 text-skyrim-gold"}),o.jsx("span",{className:"font-medium",children:j})]},`race-${S}`)))]})]}),o.jsxs(he.Details,{children:[e.description&&o.jsx("div",{children:o.jsx(ah,{text:e.description,className:"text-sm text-muted-foreground leading-relaxed"})}),Yt()&&c&&Array.isArray(t==null?void 0:t.favoredRaces)&&t.favoredRaces.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Favored Races"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.favoredRaces.map((j,S)=>o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg border border-border",children:[o.jsx(st,{className:"h-4 w-4 text-skyrim-gold"}),o.jsx("span",{className:"text-sm font-medium",children:j})]},S))})]}),Array.isArray(t==null?void 0:t.worshipRestrictions)&&t.worshipRestrictions.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Worship Restrictions"}),o.jsx("div",{className:"space-y-2",children:t.worshipRestrictions.map((j,S)=>o.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx($l,{className:"h-4 w-4 text-red-500 mt-0.5"}),o.jsx(ah,{text:j,className:"text-sm text-muted-foreground"})]})},S))})]}),a&&Array.isArray((v=t==null?void 0:t.blessing)==null?void 0:v.effects)&&t.blessing.effects.length>0&&o.jsxs("div",{children:[o.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Blessing of ",e.name]}),o.jsx("div",{className:"space-y-3",children:t.blessing.effects.filter(j=>j.effectType!=="1"&&j.effectType!=="3").map((j,S)=>{const{hasDuration:k}=lh(j.effectDescription);return o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.effectType&&m(j.effectType)]}),o.jsxs("div",{className:"flex-1",children:[o.jsx(Ke,{className:"font-medium text-sm mb-1",children:j.effectName}),o.jsx(oh,{description:j.effectDescription,magnitude:j.magnitude,duration:j.duration,area:j.area}),k&&j.duration>0&&o.jsxs(Ke,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for ",ih(j.duration),"."]}),o.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:j.area>0&&o.jsxs("span",{children:["Area: ",j.area]})})]})]})},S)})})]}),i&&Array.isArray((w=t==null?void 0:t.tenet)==null?void 0:w.effects)&&t.tenet.effects.length>0&&o.jsxs("div",{children:[o.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Tenets of ",e.name]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.tenet.effects.map((j,S)=>j.effectDescription.split(".").filter(E=>E.trim().length>0).map((E,C)=>o.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted/50 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.targetAttribute&&m(j.targetAttribute)]}),o.jsx("div",{className:"flex-1",children:o.jsx(hI,{description:E.trim()+"."})})]},`${S}-${C}`)))})]}),l&&(Array.isArray((x=t==null?void 0:t.boon1)==null?void 0:x.effects)&&t.boon1.effects.length>0||Array.isArray((b=t==null?void 0:t.boon2)==null?void 0:b.effects)&&t.boon2.effects.length>0)&&o.jsxs("div",{children:[o.jsxs("h5",{className:"text-lg font-medium text-foreground mb-3",children:["Boons of ",e.name]}),o.jsxs("div",{className:"space-y-4",children:[Array.isArray((y=t==null?void 0:t.boon1)==null?void 0:y.effects)&&t.boon1.effects.length>0&&o.jsxs("div",{children:[o.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Follower Boon"}),o.jsx("div",{className:"space-y-3",children:t.boon1.effects.map((j,S)=>{const{hasDuration:k}=lh(j.effectDescription);return o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.effectType&&m(j.effectType)]}),o.jsxs("div",{className:"flex-1",children:[o.jsx(Ke,{className:"font-medium text-sm mb-1",children:j.effectName}),o.jsx(oh,{description:j.effectDescription,magnitude:j.magnitude,duration:j.duration,area:j.area}),k&&j.duration>0&&o.jsxs(Ke,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",ih(j.duration),"."]}),o.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:j.area>0&&o.jsxs("span",{children:["Area: ",j.area]})})]})]})},S)})})]}),Array.isArray((N=t==null?void 0:t.boon2)==null?void 0:N.effects)&&t.boon2.effects.length>0&&o.jsxs("div",{children:[o.jsx("h6",{className:"text-md font-medium text-foreground mb-2",children:"Devotee Boon"}),o.jsx("div",{className:"space-y-3",children:t.boon2.effects.map((j,S)=>{const{hasDuration:k}=lh(j.effectDescription);return o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[f("positive"),j.effectType&&m(j.effectType)]}),o.jsxs("div",{className:"flex-1",children:[o.jsx(Ke,{className:"font-medium text-sm mb-1",children:j.effectName}),o.jsx(oh,{description:j.effectDescription,magnitude:j.magnitude,duration:j.duration,area:j.area}),k&&j.duration>0&&o.jsxs(Ke,{className:"text-xs text-muted-foreground mt-1",children:["Lasts for"," ",ih(j.duration),"."]}),o.jsx("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:j.area>0&&o.jsxs("span",{children:["Area: ",j.area]})})]})]})},S)})})]})]})]})]})]})}function xI(){const{data:e,loading:t,error:n}=ek();return{religions:e||[],loading:t,error:n}}function vI(e){var t,n,s,r;return{id:e.name.toLowerCase().replace(/\s+/g,"-"),name:e.name,type:e.type,description:((t=e.tenet)==null?void 0:t.description)||"",tenetDescription:((n=e.tenet)==null?void 0:n.description)||"",followerPower:((s=e.boon1)==null?void 0:s.spellName)||"",devoteePower:((r=e.boon2)==null?void 0:r.spellName)||"",favoredRaces:e.favoredRaces||[],worshipRestrictions:e.worshipRestrictions||[],originalReligion:e}}function yI(e){return e.map(vI)}function bI(e,t){return e.find(n=>n.name.toLowerCase().replace(/\s+/g,"-")===t)}function wI(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u,d,f,m,h,p,v,w;return{id:l.name.toLowerCase().replace(/\s+/g,"-"),name:l.name,description:((c=l.tenet)==null?void 0:c.description)||"",type:l.type,favoredRaces:Yt()?l.favoredRaces||[]:[],tenetEffects:((d=(u=l.tenet)==null?void 0:u.effects)==null?void 0:d.map(x=>`${x.effectName} ${x.effectDescription}`))||[],blessingEffects:((m=(f=l.blessing)==null?void 0:f.effects)==null?void 0:m.map(x=>`${x.effectName} ${x.effectDescription}`))||[],followerPowers:((p=(h=l.boon1)==null?void 0:h.effects)==null?void 0:p.map(x=>`${x.effectName} ${x.effectDescription}`))||[],devoteePowers:((w=(v=l.boon2)==null?void 0:v.effects)==null?void 0:w.map(x=>`${x.effectName} ${x.effectDescription}`))||[],originalReligion:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"tenetEffects",weight:.2},{name:"blessingEffects",weight:.2},{name:"followerPowers",weight:.15},{name:"devoteePowers",weight:.15},...Yt()?[{name:"favoredRaces",weight:.1}]:[],{name:"type",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Xt(n,s),[n,s]),a=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredReligions:g.useMemo(()=>a.map(l=>l.item.originalReligion),[a]),searchResults:a,searchableReligions:n}}function pb({religions:e,selectedDeityId:t,onDeitySelect:n,placeholder:s="Search for a deity to follow...",className:r,disabled:a=!1}){const[i,l]=g.useState(""),{filteredReligions:c}=wI(e,i),u=g.useMemo(()=>yI(c),[c]),d=p=>{const v={Divine:"bg-blue-100 text-blue-800 border-blue-200","Daedric Prince":"bg-red-100 text-red-800 border-red-200",Tribunal:"bg-purple-100 text-purple-800 border-purple-200",Ancestor:"bg-green-100 text-green-800 border-green-200","Nordic Deity":"bg-orange-100 text-orange-800 border-orange-200","Yokudan Deity":"bg-yellow-100 text-yellow-800 border-yellow-200","Khajiiti Deity":"bg-indigo-100 text-indigo-800 border-indigo-200",Deity:"bg-gray-100 text-gray-800 border-gray-200"};return o.jsx(K,{variant:"outline",className:U("text-xs font-medium",v[p]||v.Deity),children:p})},f=g.useMemo(()=>u.map(p=>({id:p.id,label:p.name,description:p.tenetDescription,category:p.type,badge:d(p.type),metadata:{originalReligion:p.originalReligion,favoredRaces:p.favoredRaces}})),[u]),m=p=>{n(p.id)},h=(p,v)=>{var w;return o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium",children:p.label}),p.badge]}),p.description&&o.jsx(Ie,{text:p.description,className:"text-sm text-muted-foreground line-clamp-2 mb-1"}),Yt()&&((w=p.metadata)==null?void 0:w.favoredRaces)&&p.metadata.favoredRaces.length>0&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(st,{className:"h-3 w-3 text-skyrim-gold"}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["Favors: ",p.metadata.favoredRaces.join(", ")]})]})]})})};return o.jsx(Uc,{options:f,onSelect:m,placeholder:s,className:r,disabled:a,renderOption:h,emptyMessage:"No deity found.",searchQuery:i,onSearchQueryChange:l})}function lC({className:e}){const{religions:t,loading:n,error:s}=xI(),{build:r,setReligion:a}=gt(),i=dt(),[l,c]=g.useState(!0),u=r.religion?bI(t,r.religion):null,d=()=>{i("/build/religions")},f=()=>{c(!l)};if(n)return o.jsx(In,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:o.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading religions..."})});if(s)return o.jsx(In,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:o.jsxs("div",{className:"text-sm text-destructive",children:["Error loading religions: ",s]})});if(!u)return o.jsxs(In,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose your character's religion"}),o.jsx(pb,{religions:t,selectedDeityId:r.religion,onDeitySelect:a,placeholder:"Search for a religion...",className:"w-full"})]});const m=Bg(u);return o.jsxs(In,{title:"Religion",navigateTo:"religions",onNavigate:d,className:e,children:[o.jsx(pb,{religions:t,selectedDeityId:r.religion,onDeitySelect:a,placeholder:`Religion: Select a religion (${u.name})`,className:"w-full"}),o.jsx(Fd,{item:m,originalReligion:u,isExpanded:l,onToggle:f,className:"border-0 shadow-none",disableHover:!0,showToggle:!1,showBlessings:!1,showTenets:!0,showBoons:!0,showFavoredRaces:Yt()})]})}function cC({level:e,size:t="sm"}){const n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return e<=0?null:o.jsxs(K,{variant:"secondary",className:U("bg-blue-100 text-blue-800 border-blue-200",n[t]),children:["Min: Level ",e]})}function NI({name:e,description:t,category:n,assignmentType:s,perkCount:r,level:a,onSelect:i,onMajorClick:l,onMinorClick:c,canAssignMajor:u,canAssignMinor:d,className:f}){const m=p=>{p.stopPropagation(),l(p)},h=p=>{p.stopPropagation(),c(p)};return o.jsxs("div",{className:U("p-4 border rounded-lg hover:bg-muted/50 transition-colors",f),onClick:i,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h3",{className:"font-semibold text-lg cursor-pointer",children:e}),o.jsx(jI,{type:s})]}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:t}),o.jsxs("div",{className:"flex gap-2 flex-wrap mb-4",children:[o.jsx(SI,{category:n}),o.jsx(kI,{count:r}),typeof a=="number"&&a>0&&o.jsx(cC,{level:a})]}),o.jsxs("div",{className:"flex gap-2","data-assignment-control":!0,children:[o.jsx(W,{size:"sm",variant:s==="major"?"default":"outline",onClick:m,disabled:!u&&s!=="major",className:U("flex-1 text-xs",s==="major"&&"bg-yellow-600 hover:bg-yellow-700 text-white border-yellow-500"),children:s==="major"?"Remove Major":"Major"}),o.jsx(W,{size:"sm",variant:s==="minor"?"default":"outline",onClick:h,disabled:!d&&s!=="minor",className:U("flex-1 text-xs",s==="minor"&&"bg-gray-500 hover:bg-gray-600 text-white border-gray-400"),children:s==="minor"?"Remove Minor":"Minor"})]})]})}function jI({type:e,size:t="sm"}){const n={major:"bg-yellow-600 text-white hover:bg-yellow-700 border-yellow-500",minor:"bg-gray-500 text-white hover:bg-gray-600 border-gray-400",none:"bg-gray-100 text-gray-800 border border-gray-300"},s={major:"Major",minor:"Minor",none:"Unassigned"},r={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return o.jsx(K,{className:U(n[e],r[t]),children:s[e]})}function SI({category:e,size:t="sm"}){const n={Combat:"bg-red-100 text-red-800 border-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200"},s={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return o.jsx(K,{variant:"outline",className:U(n[e]||"bg-gray-100 text-gray-800 border-gray-300",s[t]),children:e})}function kI({count:e,size:t="sm"}){const n={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1",lg:"text-base px-4 py-2"};return o.jsxs(K,{variant:"secondary",className:U("bg-purple-100 text-purple-800 border-purple-200",n[t]),children:[e," Perks"]})}function CI(){return o.jsx("div",{className:"container mx-auto p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Loading Skills..."}),o.jsx("p",{className:"text-muted-foreground",children:"Initializing skill and perk data..."})]})})}function EI({error:e}){return o.jsx("div",{className:"container mx-auto p-6",children:o.jsxs("div",{className:"text-center text-red-600",children:[o.jsx(xi,{className:"h-12 w-12 mx-auto mb-4"}),o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Error Loading Skills"}),o.jsx("p",{className:"text-muted-foreground",children:e})]})})}function _I({skills:e,onSkillSelect:t,onAssignMajor:n,onAssignMinor:s,onRemoveAssignment:r,selectedSkillId:a,className:i}){return o.jsx("div",{className:U("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",i),children:e.map(l=>o.jsx(NI,{name:l.name,description:l.description,category:l.category,assignmentType:l.assignmentType,perkCount:l.perkCount,level:l.level,canAssignMajor:l.canAssignMajor,canAssignMinor:l.canAssignMinor,onSelect:()=>t(l.id),onMajorClick:c=>{c.preventDefault(),n(l.id)},onMinorClick:c=>{c.preventDefault(),s(l.id)},className:a===l.id?"ring-2 ring-primary bg-primary/5":""},l.id))})}function AI({query:e,onQueryChange:t,placeholder:n="Search skills...",className:s}){return o.jsx("div",{className:U("mb-6",s),children:o.jsxs("div",{className:"relative max-w-md",children:[o.jsx(vi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(Cs,{placeholder:n,value:e,onChange:r=>t(r.target.value),className:"pl-10"})]})})}function Jt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,s;n<e.length;n++)(s=Jt(e[n]))!==""&&(t+=(t&&" ")+s);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var uC={exports:{}},dC={},fC={exports:{}},mC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ci=g;function TI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var MI=typeof Object.is=="function"?Object.is:TI,RI=Ci.useState,DI=Ci.useEffect,zI=Ci.useLayoutEffect,LI=Ci.useDebugValue;function $I(e,t){var n=t(),s=RI({inst:{value:n,getSnapshot:t}}),r=s[0].inst,a=s[1];return zI(function(){r.value=n,r.getSnapshot=t,ch(r)&&a({inst:r})},[e,n,t]),DI(function(){return ch(r)&&a({inst:r}),e(function(){ch(r)&&a({inst:r})})},[e]),LI(n),n}function ch(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!MI(e,n)}catch{return!0}}function PI(e,t){return t()}var OI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?PI:$I;mC.useSyncExternalStore=Ci.useSyncExternalStore!==void 0?Ci.useSyncExternalStore:OI;fC.exports=mC;var BI=fC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=g,II=BI;function HI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var UI=typeof Object.is=="function"?Object.is:HI,FI=II.useSyncExternalStore,VI=mm.useRef,qI=mm.useEffect,GI=mm.useMemo,ZI=mm.useDebugValue;dC.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var a=VI(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=GI(function(){function c(h){if(!u){if(u=!0,d=h,h=s(h),r!==void 0&&i.hasValue){var p=i.value;if(r(p,h))return f=p}return f=h}if(p=f,UI(d,h))return p;var v=s(h);return r!==void 0&&r(p,v)?(d=h,p):(d=h,f=v)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,s,r]);var l=FI(e,a[0],a[1]);return qI(function(){i.hasValue=!0,i.value=l},[l]),ZI(l),l};uC.exports=dC;var YI=uC.exports;const XI=ox(YI),WI={},xb=e=>{let t;const n=new Set,s=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const h=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(p=>p(t,h))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(WI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},KI=e=>e?xb(e):xb,{useDebugValue:QI}=L,{useSyncExternalStoreWithSelector:JI}=XI,e9=e=>e;function hC(e,t=e9,n){const s=JI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return QI(s),s}const vb=(e,t)=>{const n=KI(e),s=(r,a=t)=>hC(n,r,a);return Object.assign(s,n),s},t9=(e,t)=>e?vb(e,t):vb;function ln(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var n9={value:()=>{}};function hm(){for(var e=0,t=arguments.length,n={},s;e<t;++e){if(!(s=arguments[e]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new id(n)}function id(e){this._=e}function s9(e,t){return e.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}id.prototype=hm.prototype={constructor:id,on:function(e,t){var n=this._,s=s9(e+"",n),r,a=-1,i=s.length;if(arguments.length<2){for(;++a<i;)if((r=(e=s[a]).type)&&(r=r9(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(r=(e=s[a]).type)n[r]=yb(n[r],e.name,t);else if(t==null)for(r in n)n[r]=yb(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new id(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,a;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],s=0,r=a.length;s<r;++s)a[s].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],r=0,a=s.length;r<a;++r)s[r].value.apply(t,n)}};function r9(e,t){for(var n=0,s=e.length,r;n<s;++n)if((r=e[n]).name===t)return r.value}function yb(e,t,n){for(var s=0,r=e.length;s<r;++s)if(e[s].name===t){e[s]=n9,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hg="http://www.w3.org/1999/xhtml";const bb={svg:"http://www.w3.org/2000/svg",xhtml:Hg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),bb.hasOwnProperty(t)?{space:bb[t],local:e}:e}function a9(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hg&&t.documentElement.namespaceURI===Hg?t.createElement(e):t.createElementNS(n,e)}}function o9(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function gC(e){var t=gm(e);return(t.local?o9:a9)(t)}function i9(){}function S0(e){return e==null?i9:function(){return this.querySelector(e)}}function l9(e){typeof e!="function"&&(e=S0(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,l=s[r]=new Array(i),c,u,d=0;d<i;++d)(c=a[d])&&(u=e.call(c,c.__data__,d,a))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new _n(s,this._parents)}function c9(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function u9(){return[]}function pC(e){return e==null?u9:function(){return this.querySelectorAll(e)}}function d9(e){return function(){return c9(e.apply(this,arguments))}}function f9(e){typeof e=="function"?e=d9(e):e=pC(e);for(var t=this._groups,n=t.length,s=[],r=[],a=0;a<n;++a)for(var i=t[a],l=i.length,c,u=0;u<l;++u)(c=i[u])&&(s.push(e.call(c,c.__data__,u,i)),r.push(c));return new _n(s,r)}function xC(e){return function(){return this.matches(e)}}function vC(e){return function(t){return t.matches(e)}}var m9=Array.prototype.find;function h9(e){return function(){return m9.call(this.children,e)}}function g9(){return this.firstElementChild}function p9(e){return this.select(e==null?g9:h9(typeof e=="function"?e:vC(e)))}var x9=Array.prototype.filter;function v9(){return Array.from(this.children)}function y9(e){return function(){return x9.call(this.children,e)}}function b9(e){return this.selectAll(e==null?v9:y9(typeof e=="function"?e:vC(e)))}function w9(e){typeof e!="function"&&(e=xC(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,l=s[r]=[],c,u=0;u<i;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&l.push(c);return new _n(s,this._parents)}function yC(e){return new Array(e.length)}function N9(){return new _n(this._enter||this._groups.map(yC),this._parents)}function Vd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vd.prototype={constructor:Vd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function j9(e){return function(){return e}}function S9(e,t,n,s,r,a){for(var i=0,l,c=t.length,u=a.length;i<u;++i)(l=t[i])?(l.__data__=a[i],s[i]=l):n[i]=new Vd(e,a[i]);for(;i<c;++i)(l=t[i])&&(r[i]=l)}function k9(e,t,n,s,r,a,i){var l,c,u=new Map,d=t.length,f=a.length,m=new Array(d),h;for(l=0;l<d;++l)(c=t[l])&&(m[l]=h=i.call(c,c.__data__,l,t)+"",u.has(h)?r[l]=c:u.set(h,c));for(l=0;l<f;++l)h=i.call(e,a[l],l,a)+"",(c=u.get(h))?(s[l]=c,c.__data__=a[l],u.delete(h)):n[l]=new Vd(e,a[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(m[l])===c&&(r[l]=c)}function C9(e){return e.__data__}function E9(e,t){if(!arguments.length)return Array.from(this,C9);var n=t?k9:S9,s=this._parents,r=this._groups;typeof e!="function"&&(e=j9(e));for(var a=r.length,i=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var d=s[u],f=r[u],m=f.length,h=_9(e.call(d,d&&d.__data__,u,s)),p=h.length,v=l[u]=new Array(p),w=i[u]=new Array(p),x=c[u]=new Array(m);n(d,f,v,w,x,h,t);for(var b=0,y=0,N,j;b<p;++b)if(N=v[b]){for(b>=y&&(y=b+1);!(j=w[y])&&++y<p;);N._next=j||null}}return i=new _n(i,s),i._enter=l,i._exit=c,i}function _9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function A9(){return new _n(this._exit||this._groups.map(yC),this._parents)}function T9(e,t,n){var s=this.enter(),r=this,a=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?a.remove():n(a),s&&r?s.merge(r).order():r}function M9(e){for(var t=e.selection?e.selection():e,n=this._groups,s=t._groups,r=n.length,a=s.length,i=Math.min(r,a),l=new Array(r),c=0;c<i;++c)for(var u=n[c],d=s[c],f=u.length,m=l[c]=new Array(f),h,p=0;p<f;++p)(h=u[p]||d[p])&&(m[p]=h);for(;c<r;++c)l[c]=n[c];return new _n(l,this._parents)}function R9(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s=e[t],r=s.length-1,a=s[r],i;--r>=0;)(i=s[r])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function D9(e){e||(e=z9);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,s=n.length,r=new Array(s),a=0;a<s;++a){for(var i=n[a],l=i.length,c=r[a]=new Array(l),u,d=0;d<l;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new _n(r,this._parents).order()}function z9(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function L9(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $9(){return Array.from(this)}function P9(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,a=s.length;r<a;++r){var i=s[r];if(i)return i}return null}function O9(){let e=0;for(const t of this)++e;return e}function B9(){return!this.node()}function I9(e){for(var t=this._groups,n=0,s=t.length;n<s;++n)for(var r=t[n],a=0,i=r.length,l;a<i;++a)(l=r[a])&&e.call(l,l.__data__,a,r);return this}function H9(e){return function(){this.removeAttribute(e)}}function U9(e){return function(){this.removeAttributeNS(e.space,e.local)}}function F9(e,t){return function(){this.setAttribute(e,t)}}function V9(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function q9(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function G9(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Z9(e,t){var n=gm(e);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((t==null?n.local?U9:H9:typeof t=="function"?n.local?G9:q9:n.local?V9:F9)(n,t))}function bC(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Y9(e){return function(){this.style.removeProperty(e)}}function X9(e,t,n){return function(){this.style.setProperty(e,t,n)}}function W9(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function K9(e,t,n){return arguments.length>1?this.each((t==null?Y9:typeof t=="function"?W9:X9)(e,t,n??"")):Ei(this.node(),e)}function Ei(e,t){return e.style.getPropertyValue(t)||bC(e).getComputedStyle(e,null).getPropertyValue(t)}function Q9(e){return function(){delete this[e]}}function J9(e,t){return function(){this[e]=t}}function e7(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function t7(e,t){return arguments.length>1?this.each((t==null?Q9:typeof t=="function"?e7:J9)(e,t)):this.node()[e]}function wC(e){return e.trim().split(/^|\s+/)}function k0(e){return e.classList||new NC(e)}function NC(e){this._node=e,this._names=wC(e.getAttribute("class")||"")}NC.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function jC(e,t){for(var n=k0(e),s=-1,r=t.length;++s<r;)n.add(t[s])}function SC(e,t){for(var n=k0(e),s=-1,r=t.length;++s<r;)n.remove(t[s])}function n7(e){return function(){jC(this,e)}}function s7(e){return function(){SC(this,e)}}function r7(e,t){return function(){(t.apply(this,arguments)?jC:SC)(this,e)}}function a7(e,t){var n=wC(e+"");if(arguments.length<2){for(var s=k0(this.node()),r=-1,a=n.length;++r<a;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?r7:t?n7:s7)(n,t))}function o7(){this.textContent=""}function i7(e){return function(){this.textContent=e}}function l7(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function c7(e){return arguments.length?this.each(e==null?o7:(typeof e=="function"?l7:i7)(e)):this.node().textContent}function u7(){this.innerHTML=""}function d7(e){return function(){this.innerHTML=e}}function f7(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function m7(e){return arguments.length?this.each(e==null?u7:(typeof e=="function"?f7:d7)(e)):this.node().innerHTML}function h7(){this.nextSibling&&this.parentNode.appendChild(this)}function g7(){return this.each(h7)}function p7(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function x7(){return this.each(p7)}function v7(e){var t=typeof e=="function"?e:gC(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function y7(){return null}function b7(e,t){var n=typeof e=="function"?e:gC(e),s=t==null?y7:typeof t=="function"?t:S0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function w7(){var e=this.parentNode;e&&e.removeChild(this)}function N7(){return this.each(w7)}function j7(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function S7(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function k7(e){return this.select(e?S7:j7)}function C7(e){return arguments.length?this.property("__data__",e):this.node().__data__}function E7(e){return function(t){e.call(this,t,this.__data__)}}function _7(e){return e.trim().split(/^|\s+/).map(function(t){var n="",s=t.indexOf(".");return s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),{type:t,name:n}})}function A7(e){return function(){var t=this.__on;if(t){for(var n=0,s=-1,r=t.length,a;n<r;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++s]=a;++s?t.length=s:delete this.__on}}}function T7(e,t,n){return function(){var s=this.__on,r,a=E7(t);if(s){for(var i=0,l=s.length;i<l;++i)if((r=s[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},s?s.push(r):this.__on=[r]}}function M7(e,t,n){var s=_7(e+""),r,a=s.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(r=0,d=l[c];r<a;++r)if((i=s[r]).type===d.type&&i.name===d.name)return d.value}return}for(l=t?T7:A7,r=0;r<a;++r)this.each(l(s[r],t,n));return this}function kC(e,t,n){var s=bC(e),r=s.CustomEvent;typeof r=="function"?r=new r(t,n):(r=s.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function R7(e,t){return function(){return kC(this,e,t)}}function D7(e,t){return function(){return kC(this,e,t.apply(this,arguments))}}function z7(e,t){return this.each((typeof t=="function"?D7:R7)(e,t))}function*L7(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,a=s.length,i;r<a;++r)(i=s[r])&&(yield i)}var CC=[null];function _n(e,t){this._groups=e,this._parents=t}function qc(){return new _n([[document.documentElement]],CC)}function $7(){return this}_n.prototype=qc.prototype={constructor:_n,select:l9,selectAll:f9,selectChild:p9,selectChildren:b9,filter:w9,data:E9,enter:N9,exit:A9,join:T9,merge:M9,selection:$7,order:R9,sort:D9,call:L9,nodes:$9,node:P9,size:O9,empty:B9,each:I9,attr:Z9,style:K9,property:t7,classed:a7,text:c7,html:m7,raise:g7,lower:x7,append:v7,insert:b7,remove:N7,clone:k7,datum:C7,on:M7,dispatch:z7,[Symbol.iterator]:L7};function es(e){return typeof e=="string"?new _n([[document.querySelector(e)]],[document.documentElement]):new _n([[e]],CC)}function P7(e){let t;for(;t=e.sourceEvent;)e=t;return e}function vs(e,t){if(e=P7(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const O7={passive:!1},cc={capture:!0,passive:!1};function uh(e){e.stopImmediatePropagation()}function ai(e){e.preventDefault(),e.stopImmediatePropagation()}function EC(e){var t=e.document.documentElement,n=es(e).on("dragstart.drag",ai,cc);"onselectstart"in t?n.on("selectstart.drag",ai,cc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function _C(e,t){var n=e.document.documentElement,s=es(e).on("dragstart.drag",null);t&&(s.on("click.drag",ai,cc),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Cu=e=>()=>e;function Ug(e,{sourceEvent:t,subject:n,target:s,identifier:r,active:a,x:i,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Ug.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function B7(e){return!e.ctrlKey&&!e.button}function I7(){return this.parentNode}function H7(e,t){return t??{x:e.x,y:e.y}}function U7(){return navigator.maxTouchPoints||"ontouchstart"in this}function F7(){var e=B7,t=I7,n=H7,s=U7,r={},a=hm("start","drag","end"),i=0,l,c,u,d,f=0;function m(N){N.on("mousedown.drag",h).filter(s).on("touchstart.drag",w).on("touchmove.drag",x,O7).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(N,j){if(!(d||!e.call(this,N,j))){var S=y(this,t.call(this,N,j),N,j,"mouse");S&&(es(N.view).on("mousemove.drag",p,cc).on("mouseup.drag",v,cc),EC(N.view),uh(N),u=!1,l=N.clientX,c=N.clientY,S("start",N))}}function p(N){if(ai(N),!u){var j=N.clientX-l,S=N.clientY-c;u=j*j+S*S>f}r.mouse("drag",N)}function v(N){es(N.view).on("mousemove.drag mouseup.drag",null),_C(N.view,u),ai(N),r.mouse("end",N)}function w(N,j){if(e.call(this,N,j)){var S=N.changedTouches,k=t.call(this,N,j),E=S.length,C,_;for(C=0;C<E;++C)(_=y(this,k,N,j,S[C].identifier,S[C]))&&(uh(N),_("start",N,S[C]))}}function x(N){var j=N.changedTouches,S=j.length,k,E;for(k=0;k<S;++k)(E=r[j[k].identifier])&&(ai(N),E("drag",N,j[k]))}function b(N){var j=N.changedTouches,S=j.length,k,E;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),k=0;k<S;++k)(E=r[j[k].identifier])&&(uh(N),E("end",N,j[k]))}function y(N,j,S,k,E,C){var _=a.copy(),P=vs(C||S,j),O,$,T;if((T=n.call(N,new Ug("beforestart",{sourceEvent:S,target:m,identifier:E,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:_}),k))!=null)return O=T.x-P[0]||0,$=T.y-P[1]||0,function z(A,D,M){var R=P,B;switch(A){case"start":r[E]=z,B=i++;break;case"end":delete r[E],--i;case"drag":P=vs(M||D,j),B=i;break}_.call(A,N,new Ug(A,{sourceEvent:D,subject:T,target:m,identifier:E,active:B,x:P[0]+O,y:P[1]+$,dx:P[0]-R[0],dy:P[1]-R[1],dispatch:_}),k)}}return m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Cu(!!N),m):e},m.container=function(N){return arguments.length?(t=typeof N=="function"?N:Cu(N),m):t},m.subject=function(N){return arguments.length?(n=typeof N=="function"?N:Cu(N),m):n},m.touchable=function(N){return arguments.length?(s=typeof N=="function"?N:Cu(!!N),m):s},m.on=function(){var N=a.on.apply(a,arguments);return N===a?m:N},m.clickDistance=function(N){return arguments.length?(f=(N=+N)*N,m):Math.sqrt(f)},m}function C0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function AC(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Gc(){}var uc=.7,qd=1/uc,oi="\\s*([+-]?\\d+)\\s*",dc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",As="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",V7=/^#([0-9a-f]{3,8})$/,q7=new RegExp(`^rgb\\(${oi},${oi},${oi}\\)$`),G7=new RegExp(`^rgb\\(${As},${As},${As}\\)$`),Z7=new RegExp(`^rgba\\(${oi},${oi},${oi},${dc}\\)$`),Y7=new RegExp(`^rgba\\(${As},${As},${As},${dc}\\)$`),X7=new RegExp(`^hsl\\(${dc},${As},${As}\\)$`),W7=new RegExp(`^hsla\\(${dc},${As},${As},${dc}\\)$`),wb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};C0(Gc,fc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Nb,formatHex:Nb,formatHex8:K7,formatHsl:Q7,formatRgb:jb,toString:jb});function Nb(){return this.rgb().formatHex()}function K7(){return this.rgb().formatHex8()}function Q7(){return TC(this).formatHsl()}function jb(){return this.rgb().formatRgb()}function fc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=V7.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Sb(t):n===3?new on(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Eu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Eu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=q7.exec(e))?new on(t[1],t[2],t[3],1):(t=G7.exec(e))?new on(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Z7.exec(e))?Eu(t[1],t[2],t[3],t[4]):(t=Y7.exec(e))?Eu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=X7.exec(e))?Eb(t[1],t[2]/100,t[3]/100,1):(t=W7.exec(e))?Eb(t[1],t[2]/100,t[3]/100,t[4]):wb.hasOwnProperty(e)?Sb(wb[e]):e==="transparent"?new on(NaN,NaN,NaN,0):null}function Sb(e){return new on(e>>16&255,e>>8&255,e&255,1)}function Eu(e,t,n,s){return s<=0&&(e=t=n=NaN),new on(e,t,n,s)}function J7(e){return e instanceof Gc||(e=fc(e)),e?(e=e.rgb(),new on(e.r,e.g,e.b,e.opacity)):new on}function Fg(e,t,n,s){return arguments.length===1?J7(e):new on(e,t,n,s??1)}function on(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}C0(on,Fg,AC(Gc,{brighter(e){return e=e==null?qd:Math.pow(qd,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?uc:Math.pow(uc,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new on(Pa(this.r),Pa(this.g),Pa(this.b),Gd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kb,formatHex:kb,formatHex8:eH,formatRgb:Cb,toString:Cb}));function kb(){return`#${za(this.r)}${za(this.g)}${za(this.b)}`}function eH(){return`#${za(this.r)}${za(this.g)}${za(this.b)}${za((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cb(){const e=Gd(this.opacity);return`${e===1?"rgb(":"rgba("}${Pa(this.r)}, ${Pa(this.g)}, ${Pa(this.b)}${e===1?")":`, ${e})`}`}function Gd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function za(e){return e=Pa(e),(e<16?"0":"")+e.toString(16)}function Eb(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ts(e,t,n,s)}function TC(e){if(e instanceof ts)return new ts(e.h,e.s,e.l,e.opacity);if(e instanceof Gc||(e=fc(e)),!e)return new ts;if(e instanceof ts)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),a=Math.max(t,n,s),i=NaN,l=a-r,c=(a+r)/2;return l?(t===a?i=(n-s)/l+(n<s)*6:n===a?i=(s-t)/l+2:i=(t-n)/l+4,l/=c<.5?a+r:2-a-r,i*=60):l=c>0&&c<1?0:i,new ts(i,l,c,e.opacity)}function tH(e,t,n,s){return arguments.length===1?TC(e):new ts(e,t,n,s??1)}function ts(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}C0(ts,tH,AC(Gc,{brighter(e){return e=e==null?qd:Math.pow(qd,e),new ts(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uc:Math.pow(uc,e),new ts(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new on(dh(e>=240?e-240:e+120,r,s),dh(e,r,s),dh(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new ts(_b(this.h),_u(this.s),_u(this.l),Gd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gd(this.opacity);return`${e===1?"hsl(":"hsla("}${_b(this.h)}, ${_u(this.s)*100}%, ${_u(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _b(e){return e=(e||0)%360,e<0?e+360:e}function _u(e){return Math.max(0,Math.min(1,e||0))}function dh(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const MC=e=>()=>e;function nH(e,t){return function(n){return e+n*t}}function sH(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function rH(e){return(e=+e)==1?RC:function(t,n){return n-t?sH(t,n,e):MC(isNaN(t)?n:t)}}function RC(e,t){var n=t-e;return n?nH(e,n):MC(isNaN(e)?t:e)}const Ab=function e(t){var n=rH(t);function s(r,a){var i=n((r=Fg(r)).r,(a=Fg(a)).r),l=n(r.g,a.g),c=n(r.b,a.b),u=RC(r.opacity,a.opacity);return function(d){return r.r=i(d),r.g=l(d),r.b=c(d),r.opacity=u(d),r+""}}return s.gamma=e,s}(1);function Pr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Vg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fh=new RegExp(Vg.source,"g");function aH(e){return function(){return e}}function oH(e){return function(t){return e(t)+""}}function iH(e,t){var n=Vg.lastIndex=fh.lastIndex=0,s,r,a,i=-1,l=[],c=[];for(e=e+"",t=t+"";(s=Vg.exec(e))&&(r=fh.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),l[i]?l[i]+=a:l[++i]=a),(s=s[0])===(r=r[0])?l[i]?l[i]+=r:l[++i]=r:(l[++i]=null,c.push({i,x:Pr(s,r)})),n=fh.lastIndex;return n<t.length&&(a=t.slice(n),l[i]?l[i]+=a:l[++i]=a),l.length<2?c[0]?oH(c[0].x):aH(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var Tb=180/Math.PI,qg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function DC(e,t,n,s,r,a){var i,l,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*s)&&(n-=e*c,s-=t*c),(l=Math.sqrt(n*n+s*s))&&(n/=l,s/=l,c/=l),e*s<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*Tb,skewX:Math.atan(c)*Tb,scaleX:i,scaleY:l}}var Au;function lH(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qg:DC(t.a,t.b,t.c,t.d,t.e,t.f)}function cH(e){return e==null||(Au||(Au=document.createElementNS("http://www.w3.org/2000/svg","g")),Au.setAttribute("transform",e),!(e=Au.transform.baseVal.consolidate()))?qg:(e=e.matrix,DC(e.a,e.b,e.c,e.d,e.e,e.f))}function zC(e,t,n,s){function r(u){return u.length?u.pop()+" ":""}function a(u,d,f,m,h,p){if(u!==f||d!==m){var v=h.push("translate(",null,t,null,n);p.push({i:v-4,x:Pr(u,f)},{i:v-2,x:Pr(d,m)})}else(f||m)&&h.push("translate("+f+t+m+n)}function i(u,d,f,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:f.push(r(f)+"rotate(",null,s)-2,x:Pr(u,d)})):d&&f.push(r(f)+"rotate("+d+s)}function l(u,d,f,m){u!==d?m.push({i:f.push(r(f)+"skewX(",null,s)-2,x:Pr(u,d)}):d&&f.push(r(f)+"skewX("+d+s)}function c(u,d,f,m,h,p){if(u!==f||d!==m){var v=h.push(r(h)+"scale(",null,",",null,")");p.push({i:v-4,x:Pr(u,f)},{i:v-2,x:Pr(d,m)})}else(f!==1||m!==1)&&h.push(r(h)+"scale("+f+","+m+")")}return function(u,d){var f=[],m=[];return u=e(u),d=e(d),a(u.translateX,u.translateY,d.translateX,d.translateY,f,m),i(u.rotate,d.rotate,f,m),l(u.skewX,d.skewX,f,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,m),u=d=null,function(h){for(var p=-1,v=m.length,w;++p<v;)f[(w=m[p]).i]=w.x(h);return f.join("")}}}var uH=zC(lH,"px, ","px)","deg)"),dH=zC(cH,", ",")",")"),fH=1e-12;function Mb(e){return((e=Math.exp(e))+1/e)/2}function mH(e){return((e=Math.exp(e))-1/e)/2}function hH(e){return((e=Math.exp(2*e))-1)/(e+1)}const gH=function e(t,n,s){function r(a,i){var l=a[0],c=a[1],u=a[2],d=i[0],f=i[1],m=i[2],h=d-l,p=f-c,v=h*h+p*p,w,x;if(v<fH)x=Math.log(m/u)/t,w=function(k){return[l+k*h,c+k*p,u*Math.exp(t*k*x)]};else{var b=Math.sqrt(v),y=(m*m-u*u+s*v)/(2*u*n*b),N=(m*m-u*u-s*v)/(2*m*n*b),j=Math.log(Math.sqrt(y*y+1)-y),S=Math.log(Math.sqrt(N*N+1)-N);x=(S-j)/t,w=function(k){var E=k*x,C=Mb(j),_=u/(n*b)*(C*hH(t*E+j)-mH(j));return[l+_*h,c+_*p,u*C/Mb(t*E+j)]}}return w.duration=x*1e3*t/Math.SQRT2,w}return r.rho=function(a){var i=Math.max(.001,+a),l=i*i,c=l*l;return e(i,l,c)},r}(Math.SQRT2,2,4);var _i=0,Al=0,fl=0,LC=1e3,Zd,Tl,Yd=0,Wa=0,pm=0,mc=typeof performance=="object"&&performance.now?performance:Date,$C=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function E0(){return Wa||($C(pH),Wa=mc.now()+pm)}function pH(){Wa=0}function Xd(){this._call=this._time=this._next=null}Xd.prototype=PC.prototype={constructor:Xd,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?E0():+n)+(t==null?0:+t),!this._next&&Tl!==this&&(Tl?Tl._next=this:Zd=this,Tl=this),this._call=e,this._time=n,Gg()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gg())}};function PC(e,t,n){var s=new Xd;return s.restart(e,t,n),s}function xH(){E0(),++_i;for(var e=Zd,t;e;)(t=Wa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_i}function Rb(){Wa=(Yd=mc.now())+pm,_i=Al=0;try{xH()}finally{_i=0,yH(),Wa=0}}function vH(){var e=mc.now(),t=e-Yd;t>LC&&(pm-=t,Yd=e)}function yH(){for(var e,t=Zd,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Zd=n);Tl=e,Gg(s)}function Gg(e){if(!_i){Al&&(Al=clearTimeout(Al));var t=e-Wa;t>24?(e<1/0&&(Al=setTimeout(Rb,e-mc.now()-pm)),fl&&(fl=clearInterval(fl))):(fl||(Yd=mc.now(),fl=setInterval(vH,LC)),_i=1,$C(Rb))}}function Db(e,t,n){var s=new Xd;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,n),s}var bH=hm("start","end","cancel","interrupt"),wH=[],OC=0,zb=1,Zg=2,ld=3,Lb=4,Yg=5,cd=6;function xm(e,t,n,s,r,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;NH(e,n,{name:t,index:s,group:r,on:bH,tween:wH,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:OC})}function _0(e,t){var n=cs(e,t);if(n.state>OC)throw new Error("too late; already scheduled");return n}function Is(e,t){var n=cs(e,t);if(n.state>ld)throw new Error("too late; already running");return n}function cs(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function NH(e,t,n){var s=e.__transition,r;s[t]=n,n.timer=PC(a,0,n.time);function a(u){n.state=zb,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,f,m,h;if(n.state!==zb)return c();for(d in s)if(h=s[d],h.name===n.name){if(h.state===ld)return Db(i);h.state===Lb?(h.state=cd,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete s[d]):+d<t&&(h.state=cd,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete s[d])}if(Db(function(){n.state===ld&&(n.state=Lb,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Zg,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zg){for(n.state=ld,r=new Array(m=n.tween.length),d=0,f=-1;d<m;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function l(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Yg,1),f=-1,m=r.length;++f<m;)r[f].call(e,d);n.state===Yg&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=cd,n.timer.stop(),delete s[t];for(var u in s)return;delete e.__transition}}function ud(e,t){var n=e.__transition,s,r,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((s=n[i]).name!==t){a=!1;continue}r=s.state>Zg&&s.state<Yg,s.state=cd,s.timer.stop(),s.on.call(r?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[i]}a&&delete e.__transition}}function jH(e){return this.each(function(){ud(this,e)})}function SH(e,t){var n,s;return function(){var r=Is(this,e),a=r.tween;if(a!==n){s=n=a;for(var i=0,l=s.length;i<l;++i)if(s[i].name===t){s=s.slice(),s.splice(i,1);break}}r.tween=s}}function kH(e,t,n){var s,r;if(typeof n!="function")throw new Error;return function(){var a=Is(this,e),i=a.tween;if(i!==s){r=(s=i).slice();for(var l={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=l;break}c===u&&r.push(l)}a.tween=r}}function CH(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s=cs(this.node(),n).tween,r=0,a=s.length,i;r<a;++r)if((i=s[r]).name===e)return i.value;return null}return this.each((t==null?SH:kH)(n,e,t))}function A0(e,t,n){var s=e._id;return e.each(function(){var r=Is(this,s);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return cs(r,s).value[t]}}function BC(e,t){var n;return(typeof t=="number"?Pr:t instanceof fc?Ab:(n=fc(t))?(t=n,Ab):iH)(e,t)}function EH(e){return function(){this.removeAttribute(e)}}function _H(e){return function(){this.removeAttributeNS(e.space,e.local)}}function AH(e,t,n){var s,r=n+"",a;return function(){var i=this.getAttribute(e);return i===r?null:i===s?a:a=t(s=i,n)}}function TH(e,t,n){var s,r=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===s?a:a=t(s=i,n)}}function MH(e,t,n){var s,r,a;return function(){var i,l=n(this),c;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=l+"",i===c?null:i===s&&c===r?a:(r=c,a=t(s=i,l)))}}function RH(e,t,n){var s,r,a;return function(){var i,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=l+"",i===c?null:i===s&&c===r?a:(r=c,a=t(s=i,l)))}}function DH(e,t){var n=gm(e),s=n==="transform"?dH:BC;return this.attrTween(e,typeof t=="function"?(n.local?RH:MH)(n,s,A0(this,"attr."+e,t)):t==null?(n.local?_H:EH)(n):(n.local?TH:AH)(n,s,t))}function zH(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function LH(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function $H(e,t){var n,s;function r(){var a=t.apply(this,arguments);return a!==s&&(n=(s=a)&&LH(e,a)),n}return r._value=t,r}function PH(e,t){var n,s;function r(){var a=t.apply(this,arguments);return a!==s&&(n=(s=a)&&zH(e,a)),n}return r._value=t,r}function OH(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var s=gm(e);return this.tween(n,(s.local?$H:PH)(s,t))}function BH(e,t){return function(){_0(this,e).delay=+t.apply(this,arguments)}}function IH(e,t){return t=+t,function(){_0(this,e).delay=t}}function HH(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?BH:IH)(t,e)):cs(this.node(),t).delay}function UH(e,t){return function(){Is(this,e).duration=+t.apply(this,arguments)}}function FH(e,t){return t=+t,function(){Is(this,e).duration=t}}function VH(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?UH:FH)(t,e)):cs(this.node(),t).duration}function qH(e,t){if(typeof t!="function")throw new Error;return function(){Is(this,e).ease=t}}function GH(e){var t=this._id;return arguments.length?this.each(qH(t,e)):cs(this.node(),t).ease}function ZH(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Is(this,e).ease=n}}function YH(e){if(typeof e!="function")throw new Error;return this.each(ZH(this._id,e))}function XH(e){typeof e!="function"&&(e=xC(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,l=s[r]=[],c,u=0;u<i;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&l.push(c);return new vr(s,this._parents,this._name,this._id)}function WH(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,s=t.length,r=n.length,a=Math.min(s,r),i=new Array(s),l=0;l<a;++l)for(var c=t[l],u=n[l],d=c.length,f=i[l]=new Array(d),m,h=0;h<d;++h)(m=c[h]||u[h])&&(f[h]=m);for(;l<s;++l)i[l]=t[l];return new vr(i,this._parents,this._name,this._id)}function KH(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function QH(e,t,n){var s,r,a=KH(t)?_0:Is;return function(){var i=a(this,e),l=i.on;l!==s&&(r=(s=l).copy()).on(t,n),i.on=r}}function JH(e,t){var n=this._id;return arguments.length<2?cs(this.node(),n).on.on(e):this.each(QH(n,e,t))}function eU(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function tU(){return this.on("end.remove",eU(this._id))}function nU(e){var t=this._name,n=this._id;typeof e!="function"&&(e=S0(e));for(var s=this._groups,r=s.length,a=new Array(r),i=0;i<r;++i)for(var l=s[i],c=l.length,u=a[i]=new Array(c),d,f,m=0;m<c;++m)(d=l[m])&&(f=e.call(d,d.__data__,m,l))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f,xm(u[m],t,n,m,u,cs(d,n)));return new vr(a,this._parents,t,n)}function sU(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pC(e));for(var s=this._groups,r=s.length,a=[],i=[],l=0;l<r;++l)for(var c=s[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var m=e.call(d,d.__data__,f,c),h,p=cs(d,n),v=0,w=m.length;v<w;++v)(h=m[v])&&xm(h,t,n,v,m,p);a.push(m),i.push(d)}return new vr(a,i,t,n)}var rU=qc.prototype.constructor;function aU(){return new rU(this._groups,this._parents)}function oU(e,t){var n,s,r;return function(){var a=Ei(this,e),i=(this.style.removeProperty(e),Ei(this,e));return a===i?null:a===n&&i===s?r:r=t(n=a,s=i)}}function IC(e){return function(){this.style.removeProperty(e)}}function iU(e,t,n){var s,r=n+"",a;return function(){var i=Ei(this,e);return i===r?null:i===s?a:a=t(s=i,n)}}function lU(e,t,n){var s,r,a;return function(){var i=Ei(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Ei(this,e))),i===c?null:i===s&&c===r?a:(r=c,a=t(s=i,l))}}function cU(e,t){var n,s,r,a="style."+t,i="end."+a,l;return function(){var c=Is(this,e),u=c.on,d=c.value[a]==null?l||(l=IC(t)):void 0;(u!==n||r!==d)&&(s=(n=u).copy()).on(i,r=d),c.on=s}}function uU(e,t,n){var s=(e+="")=="transform"?uH:BC;return t==null?this.styleTween(e,oU(e,s)).on("end.style."+e,IC(e)):typeof t=="function"?this.styleTween(e,lU(e,s,A0(this,"style."+e,t))).each(cU(this._id,e)):this.styleTween(e,iU(e,s,t),n).on("end.style."+e,null)}function dU(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function fU(e,t,n){var s,r;function a(){var i=t.apply(this,arguments);return i!==r&&(s=(r=i)&&dU(e,i,n)),s}return a._value=t,a}function mU(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,fU(e,t,n??""))}function hU(e){return function(){this.textContent=e}}function gU(e){return function(){var t=e(this);this.textContent=t??""}}function pU(e){return this.tween("text",typeof e=="function"?gU(A0(this,"text",e)):hU(e==null?"":e+""))}function xU(e){return function(t){this.textContent=e.call(this,t)}}function vU(e){var t,n;function s(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&xU(r)),t}return s._value=e,s}function yU(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vU(e))}function bU(){for(var e=this._name,t=this._id,n=HC(),s=this._groups,r=s.length,a=0;a<r;++a)for(var i=s[a],l=i.length,c,u=0;u<l;++u)if(c=i[u]){var d=cs(c,t);xm(c,e,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new vr(s,this._parents,e,n)}function wU(){var e,t,n=this,s=n._id,r=n.size();return new Promise(function(a,i){var l={value:i},c={value:function(){--r===0&&a()}};n.each(function(){var u=Is(this,s),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),r===0&&a()})}var NU=0;function vr(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function HC(){return++NU}var Ws=qc.prototype;vr.prototype={constructor:vr,select:nU,selectAll:sU,selectChild:Ws.selectChild,selectChildren:Ws.selectChildren,filter:XH,merge:WH,selection:aU,transition:bU,call:Ws.call,nodes:Ws.nodes,node:Ws.node,size:Ws.size,empty:Ws.empty,each:Ws.each,on:JH,attr:DH,attrTween:OH,style:uU,styleTween:mU,text:pU,textTween:yU,remove:tU,tween:CH,delay:HH,duration:VH,ease:GH,easeVarying:YH,end:wU,[Symbol.iterator]:Ws[Symbol.iterator]};function jU(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var SU={time:null,delay:0,duration:250,ease:jU};function kU(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function CU(e){var t,n;e instanceof vr?(t=e._id,e=e._name):(t=HC(),(n=SU).time=E0(),e=e==null?null:e+"");for(var s=this._groups,r=s.length,a=0;a<r;++a)for(var i=s[a],l=i.length,c,u=0;u<l;++u)(c=i[u])&&xm(c,e,t,u,i,n||kU(c,t));return new vr(s,this._parents,e,t)}qc.prototype.interrupt=jH;qc.prototype.transition=CU;const Tu=e=>()=>e;function EU(e,{sourceEvent:t,target:n,transform:s,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:r}})}function rr(e,t,n){this.k=e,this.x=t,this.y=n}rr.prototype={constructor:rr,scale:function(e){return e===1?this:new rr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new rr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Jr=new rr(1,0,0);rr.prototype;function mh(e){e.stopImmediatePropagation()}function ml(e){e.preventDefault(),e.stopImmediatePropagation()}function _U(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function AU(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function $b(){return this.__zoom||Jr}function TU(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function MU(){return navigator.maxTouchPoints||"ontouchstart"in this}function RU(e,t,n){var s=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function DU(){var e=_U,t=AU,n=RU,s=TU,r=MU,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=gH,u=hm("start","zoom","end"),d,f,m,h=500,p=150,v=0,w=10;function x(T){T.property("__zoom",$b).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",_).filter(r).on("touchstart.zoom",P).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(T,z,A,D){var M=T.selection?T.selection():T;M.property("__zoom",$b),T!==M?j(T,z,A,D):M.interrupt().each(function(){S(this,arguments).event(D).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},x.scaleBy=function(T,z,A,D){x.scaleTo(T,function(){var M=this.__zoom.k,R=typeof z=="function"?z.apply(this,arguments):z;return M*R},A,D)},x.scaleTo=function(T,z,A,D){x.transform(T,function(){var M=t.apply(this,arguments),R=this.__zoom,B=A==null?N(M):typeof A=="function"?A.apply(this,arguments):A,H=R.invert(B),I=typeof z=="function"?z.apply(this,arguments):z;return n(y(b(R,I),B,H),M,i)},A,D)},x.translateBy=function(T,z,A,D){x.transform(T,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),i)},null,D)},x.translateTo=function(T,z,A,D,M){x.transform(T,function(){var R=t.apply(this,arguments),B=this.__zoom,H=D==null?N(R):typeof D=="function"?D.apply(this,arguments):D;return n(Jr.translate(H[0],H[1]).scale(B.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof A=="function"?-A.apply(this,arguments):-A),R,i)},D,M)};function b(T,z){return z=Math.max(a[0],Math.min(a[1],z)),z===T.k?T:new rr(z,T.x,T.y)}function y(T,z,A){var D=z[0]-A[0]*T.k,M=z[1]-A[1]*T.k;return D===T.x&&M===T.y?T:new rr(T.k,D,M)}function N(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function j(T,z,A,D){T.on("start.zoom",function(){S(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(D).end()}).tween("zoom",function(){var M=this,R=arguments,B=S(M,R).event(D),H=t.apply(M,R),I=A==null?N(H):typeof A=="function"?A.apply(M,R):A,V=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),G=M.__zoom,J=typeof z=="function"?z.apply(M,R):z,oe=c(G.invert(I).concat(V/G.k),J.invert(I).concat(V/J.k));return function(ee){if(ee===1)ee=J;else{var pe=oe(ee),fe=V/pe[2];ee=new rr(fe,I[0]-pe[0]*fe,I[1]-pe[1]*fe)}B.zoom(null,ee)}})}function S(T,z,A){return!A&&T.__zooming||new k(T,z)}function k(T,z){this.that=T,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,z),this.taps=0}k.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,z){return this.mouse&&T!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var z=es(this.that).datum();u.call(T,this.that,new EU(T,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),z)}};function E(T,...z){if(!e.apply(this,arguments))return;var A=S(this,z).event(T),D=this.__zoom,M=Math.max(a[0],Math.min(a[1],D.k*Math.pow(2,s.apply(this,arguments)))),R=vs(T);if(A.wheel)(A.mouse[0][0]!==R[0]||A.mouse[0][1]!==R[1])&&(A.mouse[1]=D.invert(A.mouse[0]=R)),clearTimeout(A.wheel);else{if(D.k===M)return;A.mouse=[R,D.invert(R)],ud(this),A.start()}ml(T),A.wheel=setTimeout(B,p),A.zoom("mouse",n(y(b(D,M),A.mouse[0],A.mouse[1]),A.extent,i));function B(){A.wheel=null,A.end()}}function C(T,...z){if(m||!e.apply(this,arguments))return;var A=T.currentTarget,D=S(this,z,!0).event(T),M=es(T.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",V,!0),R=vs(T,A),B=T.clientX,H=T.clientY;EC(T.view),mh(T),D.mouse=[R,this.__zoom.invert(R)],ud(this),D.start();function I(G){if(ml(G),!D.moved){var J=G.clientX-B,oe=G.clientY-H;D.moved=J*J+oe*oe>v}D.event(G).zoom("mouse",n(y(D.that.__zoom,D.mouse[0]=vs(G,A),D.mouse[1]),D.extent,i))}function V(G){M.on("mousemove.zoom mouseup.zoom",null),_C(G.view,D.moved),ml(G),D.event(G).end()}}function _(T,...z){if(e.apply(this,arguments)){var A=this.__zoom,D=vs(T.changedTouches?T.changedTouches[0]:T,this),M=A.invert(D),R=A.k*(T.shiftKey?.5:2),B=n(y(b(A,R),D,M),t.apply(this,z),i);ml(T),l>0?es(this).transition().duration(l).call(j,B,D,T):es(this).call(x.transform,B,D,T)}}function P(T,...z){if(e.apply(this,arguments)){var A=T.touches,D=A.length,M=S(this,z,T.changedTouches.length===D).event(T),R,B,H,I;for(mh(T),B=0;B<D;++B)H=A[B],I=vs(H,this),I=[I,this.__zoom.invert(I),H.identifier],M.touch0?!M.touch1&&M.touch0[2]!==I[2]&&(M.touch1=I,M.taps=0):(M.touch0=I,R=!0,M.taps=1+!!d);d&&(d=clearTimeout(d)),R&&(M.taps<2&&(f=I[0],d=setTimeout(function(){d=null},h)),ud(this),M.start())}}function O(T,...z){if(this.__zooming){var A=S(this,z).event(T),D=T.changedTouches,M=D.length,R,B,H,I;for(ml(T),R=0;R<M;++R)B=D[R],H=vs(B,this),A.touch0&&A.touch0[2]===B.identifier?A.touch0[0]=H:A.touch1&&A.touch1[2]===B.identifier&&(A.touch1[0]=H);if(B=A.that.__zoom,A.touch1){var V=A.touch0[0],G=A.touch0[1],J=A.touch1[0],oe=A.touch1[1],ee=(ee=J[0]-V[0])*ee+(ee=J[1]-V[1])*ee,pe=(pe=oe[0]-G[0])*pe+(pe=oe[1]-G[1])*pe;B=b(B,Math.sqrt(ee/pe)),H=[(V[0]+J[0])/2,(V[1]+J[1])/2],I=[(G[0]+oe[0])/2,(G[1]+oe[1])/2]}else if(A.touch0)H=A.touch0[0],I=A.touch0[1];else return;A.zoom("touch",n(y(B,H,I),A.extent,i))}}function $(T,...z){if(this.__zooming){var A=S(this,z).event(T),D=T.changedTouches,M=D.length,R,B;for(mh(T),m&&clearTimeout(m),m=setTimeout(function(){m=null},h),R=0;R<M;++R)B=D[R],A.touch0&&A.touch0[2]===B.identifier?delete A.touch0:A.touch1&&A.touch1[2]===B.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(B=vs(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<w)){var H=es(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return x.wheelDelta=function(T){return arguments.length?(s=typeof T=="function"?T:Tu(+T),x):s},x.filter=function(T){return arguments.length?(e=typeof T=="function"?T:Tu(!!T),x):e},x.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:Tu(!!T),x):r},x.extent=function(T){return arguments.length?(t=typeof T=="function"?T:Tu([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),x):t},x.scaleExtent=function(T){return arguments.length?(a[0]=+T[0],a[1]=+T[1],x):[a[0],a[1]]},x.translateExtent=function(T){return arguments.length?(i[0][0]=+T[0][0],i[1][0]=+T[1][0],i[0][1]=+T[0][1],i[1][1]=+T[1][1],x):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},x.constrain=function(T){return arguments.length?(n=T,x):n},x.duration=function(T){return arguments.length?(l=+T,x):l},x.interpolate=function(T){return arguments.length?(c=T,x):c},x.on=function(){var T=u.on.apply(u,arguments);return T===u?x:T},x.clickDistance=function(T){return arguments.length?(v=(T=+T)*T,x):Math.sqrt(v)},x.tapDistance=function(T){return arguments.length?(w=+T,x):w},x}const vm=g.createContext(null),zU=vm.Provider,yr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},UC=yr.error001();function at(e,t){const n=g.useContext(vm);if(n===null)throw new Error(UC);return hC(n,e,t)}const zt=()=>{const e=g.useContext(vm);if(e===null)throw new Error(UC);return g.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},LU=e=>e.userSelectionActive?"none":"all";function FC({position:e,children:t,className:n,style:s,...r}){const a=at(LU),i=`${e}`.split("-");return L.createElement("div",{className:Jt(["react-flow__panel",n,...i]),style:{...s,pointerEvents:a},...r},t)}function $U({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:L.createElement(FC,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},L.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const PU=({x:e,y:t,label:n,labelStyle:s={},labelShowBg:r=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=g.useRef(null),[m,h]=g.useState({x:0,y:0,width:0,height:0}),p=Jt(["react-flow__edge-textwrapper",u]);return g.useEffect(()=>{if(f.current){const v=f.current.getBBox();h({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:L.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:p,visibility:m.width?"visible":"hidden",...d},r&&L.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:l,ry:l}),L.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:f,style:s},n),c)};var OU=g.memo(PU);const T0=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ai=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),M0=(e={x:0,y:0},t)=>({x:Ai(e.x,t[0][0],t[1][0]),y:Ai(e.y,t[0][1],t[1][1])}),Pb=(e,t,n)=>e<t?Ai(Math.abs(e-t),1,50)/50:e>n?-Ai(Math.abs(e-n),1,50)/50:0,VC=(e,t)=>{const n=Pb(e.x,35,t.width-35)*20,s=Pb(e.y,35,t.height-35)*20;return[n,s]},qC=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},BU=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),R0=({x:e,y:t,width:n,height:s})=>({x:e,y:t,x2:e+n,y2:t+s}),IU=({x:e,y:t,x2:n,y2:s})=>({x:e,y:t,width:n-e,height:s-t}),Ob=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Xg=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),s=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*s)},HU=e=>Hn(e.width)&&Hn(e.height)&&Hn(e.x)&&Hn(e.y),Hn=e=>!isNaN(e)&&isFinite(e),ct=Symbol.for("internals"),GC=["Enter"," ","Escape"],UU=(e,t)=>{},FU=e=>"nativeEvent"in e;function Wg(e){var r,a;const t=FU(e)?e.nativeEvent:e,n=((a=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:a[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const ZC=e=>"clientX"in e,ea=(e,t)=>{var a,i;const n=ZC(e),s=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,r=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:s-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Wd=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Zc=({id:e,path:t,labelX:n,labelY:s,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h=20})=>L.createElement(L.Fragment,null,L.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),h&&L.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&Hn(n)&&Hn(s)?L.createElement(OU,{x:n,y:s,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);Zc.displayName="BaseEdge";function hl(e,t,n){return n===void 0?n:s=>{const r=t().edges.find(a=>a.id===e);r&&n(s,{...r})}}function YC({sourceX:e,sourceY:t,targetX:n,targetY:s}){const r=Math.abs(n-e)/2,a=n<e?n+r:n-r,i=Math.abs(s-t)/2,l=s<t?s+i:s-i;return[a,l,r,i]}function XC({sourceX:e,sourceY:t,targetX:n,targetY:s,sourceControlX:r,sourceControlY:a,targetControlX:i,targetControlY:l}){const c=e*.125+r*.375+i*.375+n*.125,u=t*.125+a*.375+l*.375+s*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Ka;(function(e){e.Strict="strict",e.Loose="loose"})(Ka||(Ka={}));var La;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(La||(La={}));var hc;(function(e){e.Partial="partial",e.Full="full"})(hc||(hc={}));var Ur;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ur||(Ur={}));var Kd;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Kd||(Kd={}));var le;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(le||(le={}));function Bb({pos:e,x1:t,y1:n,x2:s,y2:r}){return e===le.Left||e===le.Right?[.5*(t+s),n]:[t,.5*(n+r)]}function WC({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:a=le.Top}){const[i,l]=Bb({pos:n,x1:e,y1:t,x2:s,y2:r}),[c,u]=Bb({pos:a,x1:s,y1:r,x2:e,y2:t}),[d,f,m,h]=XC({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${l} ${c},${u} ${s},${r}`,d,f,m,h]}const D0=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:r=le.Bottom,targetPosition:a=le.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:v})=>{const[w,x,b]=WC({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:s,targetPosition:a});return L.createElement(Zc,{path:w,labelX:x,labelY:b,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:v})});D0.displayName="SimpleBezierEdge";const Ib={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}},VU=({source:e,sourcePosition:t=le.Bottom,target:n})=>t===le.Left||t===le.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Hb=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function qU({source:e,sourcePosition:t=le.Bottom,target:n,targetPosition:s=le.Top,center:r,offset:a}){const i=Ib[t],l=Ib[s],c={x:e.x+i.x*a,y:e.y+i.y*a},u={x:n.x+l.x*a,y:n.y+l.y*a},d=VU({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",m=d[f];let h=[],p,v;const w={x:0,y:0},x={x:0,y:0},[b,y,N,j]=YC({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*l[f]===-1){p=r.x??b,v=r.y??y;const k=[{x:p,y:c.y},{x:p,y:u.y}],E=[{x:c.x,y:v},{x:u.x,y:v}];i[f]===m?h=f==="x"?k:E:h=f==="x"?E:k}else{const k=[{x:c.x,y:u.y}],E=[{x:u.x,y:c.y}];if(f==="x"?h=i.x===m?E:k:h=i.y===m?k:E,t===s){const $=Math.abs(e[f]-n[f]);if($<=a){const T=Math.min(a-1,a-$);i[f]===m?w[f]=(c[f]>e[f]?-1:1)*T:x[f]=(u[f]>n[f]?-1:1)*T}}if(t!==s){const $=f==="x"?"y":"x",T=i[f]===l[$],z=c[$]>u[$],A=c[$]<u[$];(i[f]===1&&(!T&&z||T&&A)||i[f]!==1&&(!T&&A||T&&z))&&(h=f==="x"?k:E)}const C={x:c.x+w.x,y:c.y+w.y},_={x:u.x+x.x,y:u.y+x.y},P=Math.max(Math.abs(C.x-h[0].x),Math.abs(_.x-h[0].x)),O=Math.max(Math.abs(C.y-h[0].y),Math.abs(_.y-h[0].y));P>=O?(p=(C.x+_.x)/2,v=h[0].y):(p=h[0].x,v=(C.y+_.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...h,{x:u.x+x.x,y:u.y+x.y},n],p,v,N,j]}function GU(e,t,n,s){const r=Math.min(Hb(e,t)/2,Hb(t,n)/2,s),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${a+r*u},${i}Q ${a},${i} ${a},${i+r*d}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${i+r*c}Q ${a},${i} ${a+r*l},${i}`}function Kg({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:a=le.Top,borderRadius:i=5,centerX:l,centerY:c,offset:u=20}){const[d,f,m,h,p]=qU({source:{x:e,y:t},sourcePosition:n,target:{x:s,y:r},targetPosition:a,center:{x:l,y:c},offset:u});return[d.reduce((w,x,b)=>{let y="";return b>0&&b<d.length-1?y=GU(d[b-1],x,d[b+1],i):y=`${b===0?"M":"L"}${x.x} ${x.y}`,w+=y,w},""),f,m,h,p]}const ym=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=le.Bottom,targetPosition:m=le.Top,markerEnd:h,markerStart:p,pathOptions:v,interactionWidth:w})=>{const[x,b,y]=Kg({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:s,targetPosition:m,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return L.createElement(Zc,{path:x,labelX:b,labelY:y,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:p,interactionWidth:w})});ym.displayName="SmoothStepEdge";const z0=g.memo(e=>{var t;return L.createElement(ym,{...e,pathOptions:g.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});z0.displayName="StepEdge";function ZU({sourceX:e,sourceY:t,targetX:n,targetY:s}){const[r,a,i,l]=YC({sourceX:e,sourceY:t,targetX:n,targetY:s});return[`M ${e},${t}L ${n},${s}`,r,a,i,l]}const L0=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h})=>{const[p,v,w]=ZU({sourceX:e,sourceY:t,targetX:n,targetY:s});return L.createElement(Zc,{path:p,labelX:v,labelY:w,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:h})});L0.displayName="StraightEdge";function Mu(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ub({pos:e,x1:t,y1:n,x2:s,y2:r,c:a}){switch(e){case le.Left:return[t-Mu(t-s,a),n];case le.Right:return[t+Mu(s-t,a),n];case le.Top:return[t,n-Mu(n-r,a)];case le.Bottom:return[t,n+Mu(r-n,a)]}}function KC({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:s,targetY:r,targetPosition:a=le.Top,curvature:i=.25}){const[l,c]=Ub({pos:n,x1:e,y1:t,x2:s,y2:r,c:i}),[u,d]=Ub({pos:a,x1:s,y1:r,x2:e,y2:t,c:i}),[f,m,h,p]=XC({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${s},${r}`,f,m,h,p]}const Qd=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:r=le.Bottom,targetPosition:a=le.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,pathOptions:v,interactionWidth:w})=>{const[x,b,y]=KC({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:s,targetPosition:a,curvature:v==null?void 0:v.curvature});return L.createElement(Zc,{path:x,labelX:b,labelY:y,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:p,interactionWidth:w})});Qd.displayName="BezierEdge";const $0=g.createContext(null),YU=$0.Provider;$0.Consumer;const XU=()=>g.useContext($0),WU=e=>"id"in e&&"source"in e&&"target"in e,KU=({source:e,sourceHandle:t,target:n,targetHandle:s})=>`reactflow__edge-${e}${t||""}-${n}${s||""}`,Qg=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(s=>`${s}=${e[s]}`).join("&")}`,QU=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),P0=(e,t)=>{if(!e.source||!e.target)return t;let n;return WU(e)?n={...e}:n={...e,id:KU(e)},QU(n,t)?t:t.concat(n)},Jg=({x:e,y:t},[n,s,r],a,[i,l])=>{const c={x:(e-n)/r,y:(t-s)/r};return a?{x:i*Math.round(c.x/i),y:l*Math.round(c.y/l)}:c},QC=({x:e,y:t},[n,s,r])=>({x:e*r+n,y:t*r+s}),ii=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],s=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-s};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-s}:r}},O0=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((s,r)=>{const{x:a,y:i}=ii(r,t).positionAbsolute;return BU(s,R0({x:a,y:i,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return IU(n)},JC=(e,t,[n,s,r]=[0,0,1],a=!1,i=!1,l=[0,0])=>{const c={x:(t.x-n)/r,y:(t.y-s)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(d=>{const{width:f,height:m,selectable:h=!0,hidden:p=!1}=d;if(i&&!h||p)return!1;const{positionAbsolute:v}=ii(d,l),w={x:v.x,y:v.y,width:f||0,height:m||0},x=Xg(c,w),b=typeof f>"u"||typeof m>"u"||f===null||m===null,y=a&&x>0,N=(f||0)*(m||0);(b||y||x>=N||d.dragging)&&u.push(d)}),u},eE=(e,t)=>{const n=e.map(s=>s.id);return t.filter(s=>n.includes(s.source)||n.includes(s.target))},tE=(e,t,n,s,r,a=.1)=>{const i=t/(e.width*(1+a)),l=n/(e.height*(1+a)),c=Math.min(i,l),u=Ai(c,s,r),d=e.x+e.width/2,f=e.y+e.height/2,m=t/2-d*u,h=n/2-f*u;return{x:m,y:h,zoom:u}},ka=(e,t=0)=>e.transition().duration(t);function Fb(e,t,n,s){return(t[n]||[]).reduce((r,a)=>{var i,l;return`${e.id}-${a.id}-${n}`!==s&&r.push({id:a.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+a.y+a.height/2}),r},[])}function JU(e,t,n,s,r,a){const{x:i,y:l}=ea(e),u=t.elementsFromPoint(i,l).find(p=>p.classList.contains("react-flow__handle"));if(u){const p=u.getAttribute("data-nodeid");if(p){const v=B0(void 0,u),w=u.getAttribute("data-handleid"),x=a({nodeId:p,id:w,type:v});if(x){const b=r.find(y=>y.nodeId===p&&y.type===v&&y.id===w);return{handle:{id:w,type:v,nodeId:p,x:(b==null?void 0:b.x)||n.x,y:(b==null?void 0:b.y)||n.y},validHandleResult:x}}}}let d=[],f=1/0;if(r.forEach(p=>{const v=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);if(v<=s){const w=a(p);v<=f&&(v<f?d=[{handle:p,validHandleResult:w}]:v===f&&d.push({handle:p,validHandleResult:w}),f=v)}}),!d.length)return{handle:null,validHandleResult:nE()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:p})=>p.isValid),h=d.some(({handle:p})=>p.type==="target");return d.find(({handle:p,validHandleResult:v})=>h?p.type==="target":m?v.isValid:!0)||d[0]}const eF={source:null,target:null,sourceHandle:null,targetHandle:null},nE=()=>({handleDomNode:null,isValid:!1,connection:eF,endHandle:null});function sE(e,t,n,s,r,a,i){const l=r==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...nE(),handleDomNode:c};if(c){const d=B0(void 0,c),f=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),p=c.classList.contains("connectableend"),v={source:l?f:n,sourceHandle:l?m:s,target:l?n:f,targetHandle:l?s:m};u.connection=v,h&&p&&(t===Ka.Strict?l&&d==="source"||!l&&d==="target":f!==n||m!==s)&&(u.endHandle={nodeId:f,handleId:m,type:d},u.isValid=a(v))}return u}function tF({nodes:e,nodeId:t,handleId:n,handleType:s}){return e.reduce((r,a)=>{if(a[ct]){const{handleBounds:i}=a[ct];let l=[],c=[];i&&(l=Fb(a,i,"source",`${t}-${n}-${s}`),c=Fb(a,i,"target",`${t}-${n}-${s}`)),r.push(...l,...c)}return r},[])}function B0(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function hh(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function nF(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function rE({event:e,handleId:t,nodeId:n,onConnect:s,isTarget:r,getState:a,setState:i,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=qC(e.target),{connectionMode:f,domNode:m,autoPanOnConnect:h,connectionRadius:p,onConnectStart:v,panBy:w,getNodes:x,cancelConnection:b}=a();let y=0,N;const{x:j,y:S}=ea(e),k=d==null?void 0:d.elementFromPoint(j,S),E=B0(c,k),C=m==null?void 0:m.getBoundingClientRect();if(!C||!E)return;let _,P=ea(e,C),O=!1,$=null,T=!1,z=null;const A=tF({nodes:x(),nodeId:n,handleId:t,handleType:E}),D=()=>{if(!h)return;const[B,H]=VC(P,C);w({x:B,y:H}),y=requestAnimationFrame(D)};i({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:E,connectionStartHandle:{nodeId:n,handleId:t,type:E},connectionEndHandle:null}),v==null||v(e,{nodeId:n,handleId:t,handleType:E});function M(B){const{transform:H}=a();P=ea(B,C);const{handle:I,validHandleResult:V}=JU(B,d,Jg(P,H,!1,[1,1]),p,A,G=>sE(G,f,n,t,r?"target":"source",l,d));if(N=I,O||(D(),O=!0),z=V.handleDomNode,$=V.connection,T=V.isValid,i({connectionPosition:N&&T?QC({x:N.x,y:N.y},H):P,connectionStatus:nF(!!N,T),connectionEndHandle:V.endHandle}),!N&&!T&&!z)return hh(_);$.source!==$.target&&z&&(hh(_),_=z,z.classList.add("connecting","react-flow__handle-connecting"),z.classList.toggle("valid",T),z.classList.toggle("react-flow__handle-valid",T))}function R(B){var H,I;(N||z)&&$&&T&&(s==null||s($)),(I=(H=a()).onConnectEnd)==null||I.call(H,B),c&&(u==null||u(B)),hh(_),b(),cancelAnimationFrame(y),O=!1,T=!1,$=null,z=null,d.removeEventListener("mousemove",M),d.removeEventListener("mouseup",R),d.removeEventListener("touchmove",M),d.removeEventListener("touchend",R)}d.addEventListener("mousemove",M),d.addEventListener("mouseup",R),d.addEventListener("touchmove",M),d.addEventListener("touchend",R)}const Vb=()=>!0,sF=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),rF=(e,t,n)=>s=>{const{connectionStartHandle:r,connectionEndHandle:a,connectionClickStartHandle:i}=s;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},aE=g.forwardRef(({type:e="source",position:t=le.Top,isValidConnection:n,isConnectable:s=!0,isConnectableStart:r=!0,isConnectableEnd:a=!0,id:i,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...m},h)=>{var C,_;const p=i||null,v=e==="target",w=zt(),x=XU(),{connectOnClick:b,noPanClassName:y}=at(sF,ln),{connecting:N,clickConnecting:j}=at(rF(x,p,e),ln);x||(_=(C=w.getState()).onError)==null||_.call(C,"010",yr.error010());const S=P=>{const{defaultEdgeOptions:O,onConnect:$,hasDefaultEdges:T}=w.getState(),z={...O,...P};if(T){const{edges:A,setEdges:D}=w.getState();D(P0(z,A))}$==null||$(z),l==null||l(z)},k=P=>{if(!x)return;const O=ZC(P);r&&(O&&P.button===0||!O)&&rE({event:P,handleId:p,nodeId:x,onConnect:S,isTarget:v,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||Vb}),O?d==null||d(P):f==null||f(P)},E=P=>{const{onClickConnectStart:O,onClickConnectEnd:$,connectionClickStartHandle:T,connectionMode:z,isValidConnection:A}=w.getState();if(!x||!T&&!r)return;if(!T){O==null||O(P,{nodeId:x,handleId:p,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:x,type:e,handleId:p}});return}const D=qC(P.target),M=n||A||Vb,{connection:R,isValid:B}=sE({nodeId:x,id:p,type:e},z,T.nodeId,T.handleId||null,T.type,M,D);B&&S(R),$==null||$(P),w.setState({connectionClickStartHandle:null})};return L.createElement("div",{"data-handleid":p,"data-nodeid":x,"data-handlepos":t,"data-id":`${x}-${p}-${e}`,className:Jt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",y,u,{source:!v,target:v,connectable:s,connectablestart:r,connectableend:a,connecting:j,connectionindicator:s&&(r&&!N||a&&N)}]),onMouseDown:k,onTouchStart:k,onClick:b?E:void 0,ref:h,...m},c)});aE.displayName="Handle";var Ti=g.memo(aE);const oE=({data:e,isConnectable:t,targetPosition:n=le.Top,sourcePosition:s=le.Bottom})=>L.createElement(L.Fragment,null,L.createElement(Ti,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,L.createElement(Ti,{type:"source",position:s,isConnectable:t}));oE.displayName="DefaultNode";var ep=g.memo(oE);const iE=({data:e,isConnectable:t,sourcePosition:n=le.Bottom})=>L.createElement(L.Fragment,null,e==null?void 0:e.label,L.createElement(Ti,{type:"source",position:n,isConnectable:t}));iE.displayName="InputNode";var lE=g.memo(iE);const cE=({data:e,isConnectable:t,targetPosition:n=le.Top})=>L.createElement(L.Fragment,null,L.createElement(Ti,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);cE.displayName="OutputNode";var uE=g.memo(cE);const I0=()=>null;I0.displayName="GroupNode";const aF=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Ru=e=>e.id;function oF(e,t){return ln(e.selectedNodes.map(Ru),t.selectedNodes.map(Ru))&&ln(e.selectedEdges.map(Ru),t.selectedEdges.map(Ru))}const dE=g.memo(({onSelectionChange:e})=>{const t=zt(),{selectedNodes:n,selectedEdges:s}=at(aF,oF);return g.useEffect(()=>{const r={nodes:n,edges:s};e==null||e(r),t.getState().onSelectionChange.forEach(a=>a(r))},[n,s,e]),null});dE.displayName="SelectionListener";const iF=e=>!!e.onSelectionChange;function lF({onSelectionChange:e}){const t=at(iF);return e||t?L.createElement(dE,{onSelectionChange:e}):null}const cF=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function To(e,t){g.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ke(e,t,n){g.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const uF=({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:r,onConnectStart:a,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:m,edgesUpdatable:h,elevateNodesOnSelect:p,minZoom:v,maxZoom:w,nodeExtent:x,onNodesChange:b,onEdgesChange:y,elementsSelectable:N,connectionMode:j,snapGrid:S,snapToGrid:k,translateExtent:E,connectOnClick:C,defaultEdgeOptions:_,fitView:P,fitViewOptions:O,onNodesDelete:$,onEdgesDelete:T,onNodeDrag:z,onNodeDragStart:A,onNodeDragStop:D,onSelectionDrag:M,onSelectionDragStart:R,onSelectionDragStop:B,noPanClassName:H,nodeOrigin:I,rfId:V,autoPanOnConnect:G,autoPanOnNodeDrag:J,onError:oe,connectionRadius:ee,isValidConnection:pe,nodeDragThreshold:fe})=>{const{setNodes:we,setEdges:F,setDefaultNodesAndEdges:Y,setMinZoom:Q,setMaxZoom:X,setTranslateExtent:se,setNodeExtent:ve,reset:ue}=at(cF,ln),ne=zt();return g.useEffect(()=>{const Re=s==null?void 0:s.map(pt=>({...pt,..._}));return Y(n,Re),()=>{ue()}},[]),ke("defaultEdgeOptions",_,ne.setState),ke("connectionMode",j,ne.setState),ke("onConnect",r,ne.setState),ke("onConnectStart",a,ne.setState),ke("onConnectEnd",i,ne.setState),ke("onClickConnectStart",l,ne.setState),ke("onClickConnectEnd",c,ne.setState),ke("nodesDraggable",u,ne.setState),ke("nodesConnectable",d,ne.setState),ke("nodesFocusable",f,ne.setState),ke("edgesFocusable",m,ne.setState),ke("edgesUpdatable",h,ne.setState),ke("elementsSelectable",N,ne.setState),ke("elevateNodesOnSelect",p,ne.setState),ke("snapToGrid",k,ne.setState),ke("snapGrid",S,ne.setState),ke("onNodesChange",b,ne.setState),ke("onEdgesChange",y,ne.setState),ke("connectOnClick",C,ne.setState),ke("fitViewOnInit",P,ne.setState),ke("fitViewOnInitOptions",O,ne.setState),ke("onNodesDelete",$,ne.setState),ke("onEdgesDelete",T,ne.setState),ke("onNodeDrag",z,ne.setState),ke("onNodeDragStart",A,ne.setState),ke("onNodeDragStop",D,ne.setState),ke("onSelectionDrag",M,ne.setState),ke("onSelectionDragStart",R,ne.setState),ke("onSelectionDragStop",B,ne.setState),ke("noPanClassName",H,ne.setState),ke("nodeOrigin",I,ne.setState),ke("rfId",V,ne.setState),ke("autoPanOnConnect",G,ne.setState),ke("autoPanOnNodeDrag",J,ne.setState),ke("onError",oe,ne.setState),ke("connectionRadius",ee,ne.setState),ke("isValidConnection",pe,ne.setState),ke("nodeDragThreshold",fe,ne.setState),To(e,we),To(t,F),To(v,Q),To(w,X),To(E,se),To(x,ve),null},qb={display:"none"},dF={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},fE="react-flow__node-desc",mE="react-flow__edge-desc",fF="react-flow__aria-live",mF=e=>e.ariaLiveMessage;function hF({rfId:e}){const t=at(mF);return L.createElement("div",{id:`${fF}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:dF},t)}function gF({rfId:e,disableKeyboardA11y:t}){return L.createElement(L.Fragment,null,L.createElement("div",{id:`${fE}-${e}`,style:qb},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),L.createElement("div",{id:`${mE}-${e}`,style:qb},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&L.createElement(hF,{rfId:e}))}var gc=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,s]=g.useState(!1),r=g.useRef(!1),a=g.useRef(new Set([])),[i,l]=g.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,m)=>f.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return g.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Wg(h))return!1;const v=Zb(h.code,l);a.current.add(h[v]),Gb(i,a.current,!1)&&(h.preventDefault(),s(!0))},f=h=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&Wg(h))return!1;const v=Zb(h.code,l);Gb(i,a.current,!0)?(s(!1),a.current.clear()):a.current.delete(h[v]),h.key==="Meta"&&a.current.clear(),r.current=!1},m=()=>{a.current.clear(),s(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",m)}}},[e,s]),n};function Gb(e,t,n){return e.filter(s=>n||s.length===t.size).some(s=>s.every(r=>t.has(r)))}function Zb(e,t){return t.includes(e)?"code":"key"}function hE(e,t,n,s){var l,c;const r=e.parentNode||e.parentId;if(!r)return n;const a=t.get(r),i=ii(a,s);return hE(a,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((l=a[ct])==null?void 0:l.z)??0)>(n.z??0)?((c=a[ct])==null?void 0:c.z)??0:n.z??0},s)}function gE(e,t,n){e.forEach(s=>{var a;const r=s.parentNode||s.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[s.id]){const{x:i,y:l,z:c}=hE(s,e,{...s.position,z:((a=s[ct])==null?void 0:a.z)??0},t);s.positionAbsolute={x:i,y:l},s[ct].z=c,n!=null&&n[s.id]&&(s[ct].isParent=!0)}})}function gh(e,t,n,s){const r=new Map,a={},i=s?1e3:0;return e.forEach(l=>{var h;const c=(Hn(l.zIndex)?l.zIndex:0)+(l.selected?i:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(a[f]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,ct,{enumerable:!1,value:{handleBounds:m||(h=u==null?void 0:u[ct])==null?void 0:h.handleBounds,z:c}}),r.set(l.id,d)}),gE(r,n,a),r}function pE(e,t={}){const{getNodes:n,width:s,height:r,minZoom:a,maxZoom:i,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),m=t.initial&&!u&&d;if(l&&c&&(m||!t.initial)){const p=n().filter(w=>{var b;const x=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(b=t.nodes)!=null&&b.length?x&&t.nodes.some(y=>y.id===w.id):x}),v=p.every(w=>w.width&&w.height);if(p.length>0&&v){const w=O0(p,f),{x,y:b,zoom:y}=tE(w,s,r,t.minZoom??a,t.maxZoom??i,t.padding??.1),N=Jr.translate(x,b).scale(y);return typeof t.duration=="number"&&t.duration>0?l.transform(ka(c,t.duration),N):l.transform(c,N),!0}}return!1}function pF(e,t){return e.forEach(n=>{const s=t.get(n.id);s&&t.set(s.id,{...s,[ct]:s[ct],selected:n.selected})}),new Map(t)}function xF(e,t){return t.map(n=>{const s=e.find(r=>r.id===n.id);return s&&(n.selected=s.selected),n})}function Du({changedNodes:e,changedEdges:t,get:n,set:s}){const{nodeInternals:r,edges:a,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&s({nodeInternals:pF(e,r)}),i==null||i(e)),t!=null&&t.length&&(u&&s({edges:xF(t,a)}),l==null||l(t))}const Mo=()=>{},vF={zoomIn:Mo,zoomOut:Mo,zoomTo:Mo,getZoom:()=>1,setViewport:Mo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Mo,fitBounds:Mo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},yF=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),bF=()=>{const e=zt(),{d3Zoom:t,d3Selection:n}=at(yF,ln);return g.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(ka(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(ka(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,a)=>t.scaleTo(ka(n,a==null?void 0:a.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,a)=>{const[i,l,c]=e.getState().transform,u=Jr.translate(r.x??i,r.y??l).scale(r.zoom??c);t.transform(ka(n,a==null?void 0:a.duration),u)},getViewport:()=>{const[r,a,i]=e.getState().transform;return{x:r,y:a,zoom:i}},fitView:r=>pE(e.getState,r),setCenter:(r,a,i)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=l/2-r*d,m=c/2-a*d,h=Jr.translate(f,m).scale(d);t.transform(ka(n,i==null?void 0:i.duration),h)},fitBounds:(r,a)=>{const{width:i,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:m}=tE(r,i,l,c,u,(a==null?void 0:a.padding)??.1),h=Jr.translate(d,f).scale(m);t.transform(ka(n,a==null?void 0:a.duration),h)},project:r=>{const{transform:a,snapToGrid:i,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Jg(r,a,i,l)},screenToFlowPosition:r=>{const{transform:a,snapToGrid:i,snapGrid:l,domNode:c}=e.getState();if(!c)return r;const{x:u,y:d}=c.getBoundingClientRect(),f={x:r.x-u,y:r.y-d};return Jg(f,a,i,l)},flowToScreenPosition:r=>{const{transform:a,domNode:i}=e.getState();if(!i)return r;const{x:l,y:c}=i.getBoundingClientRect(),u=QC(r,a);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:vF,[t,n])};function H0(){const e=bF(),t=zt(),n=g.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),s=g.useCallback(v=>t.getState().nodeInternals.get(v),[]),r=g.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(w=>({...w}))},[]),a=g.useCallback(v=>{const{edges:w=[]}=t.getState();return w.find(x=>x.id===v)},[]),i=g.useCallback(v=>{const{getNodes:w,setNodes:x,hasDefaultNodes:b,onNodesChange:y}=t.getState(),N=w(),j=typeof v=="function"?v(N):v;if(b)x(j);else if(y){const S=j.length===0?N.map(k=>({type:"remove",id:k.id})):j.map(k=>({item:k,type:"reset"}));y(S)}},[]),l=g.useCallback(v=>{const{edges:w=[],setEdges:x,hasDefaultEdges:b,onEdgesChange:y}=t.getState(),N=typeof v=="function"?v(w):v;if(b)x(N);else if(y){const j=N.length===0?w.map(S=>({type:"remove",id:S.id})):N.map(S=>({item:S,type:"reset"}));y(j)}},[]),c=g.useCallback(v=>{const w=Array.isArray(v)?v:[v],{getNodes:x,setNodes:b,hasDefaultNodes:y,onNodesChange:N}=t.getState();if(y){const S=[...x(),...w];b(S)}else if(N){const j=w.map(S=>({item:S,type:"add"}));N(j)}},[]),u=g.useCallback(v=>{const w=Array.isArray(v)?v:[v],{edges:x=[],setEdges:b,hasDefaultEdges:y,onEdgesChange:N}=t.getState();if(y)b([...x,...w]);else if(N){const j=w.map(S=>({item:S,type:"add"}));N(j)}},[]),d=g.useCallback(()=>{const{getNodes:v,edges:w=[],transform:x}=t.getState(),[b,y,N]=x;return{nodes:v().map(j=>({...j})),edges:w.map(j=>({...j})),viewport:{x:b,y,zoom:N}}},[]),f=g.useCallback(({nodes:v,edges:w})=>{const{nodeInternals:x,getNodes:b,edges:y,hasDefaultNodes:N,hasDefaultEdges:j,onNodesDelete:S,onEdgesDelete:k,onNodesChange:E,onEdgesChange:C}=t.getState(),_=(v||[]).map(z=>z.id),P=(w||[]).map(z=>z.id),O=b().reduce((z,A)=>{const D=A.parentNode||A.parentId,M=!_.includes(A.id)&&D&&z.find(B=>B.id===D);return(typeof A.deletable=="boolean"?A.deletable:!0)&&(_.includes(A.id)||M)&&z.push(A),z},[]),$=y.filter(z=>typeof z.deletable=="boolean"?z.deletable:!0),T=$.filter(z=>P.includes(z.id));if(O||T){const z=eE(O,$),A=[...T,...z],D=A.reduce((M,R)=>(M.includes(R.id)||M.push(R.id),M),[]);if((j||N)&&(j&&t.setState({edges:y.filter(M=>!D.includes(M.id))}),N&&(O.forEach(M=>{x.delete(M.id)}),t.setState({nodeInternals:new Map(x)}))),D.length>0&&(k==null||k(A),C&&C(D.map(M=>({id:M,type:"remove"})))),O.length>0&&(S==null||S(O),E)){const M=O.map(R=>({id:R.id,type:"remove"}));E(M)}}},[]),m=g.useCallback(v=>{const w=HU(v),x=w?null:t.getState().nodeInternals.get(v.id);return!w&&!x?[null,null,w]:[w?v:Ob(x),x,w]},[]),h=g.useCallback((v,w=!0,x)=>{const[b,y,N]=m(v);return b?(x||t.getState().getNodes()).filter(j=>{if(!N&&(j.id===y.id||!j.positionAbsolute))return!1;const S=Ob(j),k=Xg(S,b);return w&&k>0||k>=b.width*b.height}):[]},[]),p=g.useCallback((v,w,x=!0)=>{const[b]=m(v);if(!b)return!1;const y=Xg(b,w);return x&&y>0||y>=b.width*b.height},[]);return g.useMemo(()=>({...e,getNodes:n,getNode:s,getEdges:r,getEdge:a,setNodes:i,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:p}),[e,n,s,r,a,i,l,c,u,d,f,h,p])}const wF={actInsideInputWithModifier:!1};var NF=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=zt(),{deleteElements:s}=H0(),r=gc(e,wF),a=gc(t);g.useEffect(()=>{if(r){const{edges:i,getNodes:l}=n.getState(),c=l().filter(d=>d.selected),u=i.filter(d=>d.selected);s({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),g.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function jF(e){const t=zt();g.useEffect(()=>{let n;const s=()=>{var a,i;if(!e.current)return;const r=T0(e.current);(r.height===0||r.width===0)&&((i=(a=t.getState()).onError)==null||i.call(a,"004",yr.error004())),t.setState({width:r.width||500,height:r.height||500})};return s(),window.addEventListener("resize",s),e.current&&(n=new ResizeObserver(()=>s()),n.observe(e.current)),()=>{window.removeEventListener("resize",s),n&&e.current&&n.unobserve(e.current)}},[])}const U0={position:"absolute",width:"100%",height:"100%",top:0,left:0},SF=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,zu=e=>({x:e.x,y:e.y,zoom:e.k}),Ro=(e,t)=>e.target.closest(`.${t}`),Yb=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xb=e=>{const t=e.ctrlKey&&Wd()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},kF=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),CF=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:s,zoomOnScroll:r=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=La.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:m,translateExtent:h,minZoom:p,maxZoom:v,zoomActivationKeyCode:w,preventScrolling:x=!0,children:b,noWheelClassName:y,noPanClassName:N})=>{const j=g.useRef(),S=zt(),k=g.useRef(!1),E=g.useRef(!1),C=g.useRef(null),_=g.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:O,d3ZoomHandler:$,userSelectionActive:T}=at(kF,ln),z=gc(w),A=g.useRef(0),D=g.useRef(!1),M=g.useRef();return jF(C),g.useEffect(()=>{if(C.current){const R=C.current.getBoundingClientRect(),B=DU().scaleExtent([p,v]).translateExtent(h),H=es(C.current).call(B),I=Jr.translate(m.x,m.y).scale(Ai(m.zoom,p,v)),V=[[0,0],[R.width,R.height]],G=B.constrain()(I,V,h);B.transform(H,G),B.wheelDelta(Xb),S.setState({d3Zoom:B,d3Selection:H,d3ZoomHandler:H.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:C.current.closest(".react-flow")})}},[]),g.useEffect(()=>{O&&P&&(i&&!z&&!T?O.on("wheel.zoom",R=>{if(Ro(R,y))return!1;R.preventDefault(),R.stopImmediatePropagation();const B=O.property("__zoom").k||1;if(R.ctrlKey&&a){const pe=vs(R),fe=Xb(R),we=B*Math.pow(2,fe);P.scaleTo(O,we,pe,R);return}const H=R.deltaMode===1?20:1;let I=c===La.Vertical?0:R.deltaX*H,V=c===La.Horizontal?0:R.deltaY*H;!Wd()&&R.shiftKey&&c!==La.Vertical&&(I=R.deltaY*H,V=0),P.translateBy(O,-(I/B)*l,-(V/B)*l,{internal:!0});const G=zu(O.property("__zoom")),{onViewportChangeStart:J,onViewportChange:oe,onViewportChangeEnd:ee}=S.getState();clearTimeout(M.current),D.current||(D.current=!0,t==null||t(R,G),J==null||J(G)),D.current&&(e==null||e(R,G),oe==null||oe(G),M.current=setTimeout(()=>{n==null||n(R,G),ee==null||ee(G),D.current=!1},150))},{passive:!1}):typeof $<"u"&&O.on("wheel.zoom",function(R,B){if(!x&&R.type==="wheel"&&!R.ctrlKey||Ro(R,y))return null;R.preventDefault(),$.call(this,R,B)},{passive:!1}))},[T,i,c,O,P,$,z,a,x,y,t,e,n]),g.useEffect(()=>{P&&P.on("start",R=>{var I,V;if(!R.sourceEvent||R.sourceEvent.internal)return null;A.current=(I=R.sourceEvent)==null?void 0:I.button;const{onViewportChangeStart:B}=S.getState(),H=zu(R.transform);k.current=!0,_.current=H,((V=R.sourceEvent)==null?void 0:V.type)==="mousedown"&&S.setState({paneDragging:!0}),B==null||B(H),t==null||t(R.sourceEvent,H)})},[P,t]),g.useEffect(()=>{P&&(T&&!k.current?P.on("zoom",null):T||P.on("zoom",R=>{var H;const{onViewportChange:B}=S.getState();if(S.setState({transform:[R.transform.x,R.transform.y,R.transform.k]}),E.current=!!(s&&Yb(f,A.current??0)),(e||B)&&!((H=R.sourceEvent)!=null&&H.internal)){const I=zu(R.transform);B==null||B(I),e==null||e(R.sourceEvent,I)}}))},[T,P,e,f,s]),g.useEffect(()=>{P&&P.on("end",R=>{if(!R.sourceEvent||R.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=S.getState();if(k.current=!1,S.setState({paneDragging:!1}),s&&Yb(f,A.current??0)&&!E.current&&s(R.sourceEvent),E.current=!1,(n||B)&&SF(_.current,R.transform)){const H=zu(R.transform);_.current=H,clearTimeout(j.current),j.current=setTimeout(()=>{B==null||B(H),n==null||n(R.sourceEvent,H)},i?150:0)}})},[P,i,f,n,s]),g.useEffect(()=>{P&&P.filter(R=>{const B=z||r,H=a&&R.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&R.button===1&&R.type==="mousedown"&&(Ro(R,"react-flow__node")||Ro(R,"react-flow__edge")))return!0;if(!f&&!B&&!i&&!u&&!a||T||!u&&R.type==="dblclick"||Ro(R,y)&&R.type==="wheel"||Ro(R,N)&&(R.type!=="wheel"||i&&R.type==="wheel"&&!z)||!a&&R.ctrlKey&&R.type==="wheel"||!B&&!i&&!H&&R.type==="wheel"||!f&&(R.type==="mousedown"||R.type==="touchstart")||Array.isArray(f)&&!f.includes(R.button)&&R.type==="mousedown")return!1;const I=Array.isArray(f)&&f.includes(R.button)||!R.button||R.button<=1;return(!R.ctrlKey||R.type==="wheel")&&I})},[T,P,r,a,i,u,f,d,z]),L.createElement("div",{className:"react-flow__renderer",ref:C,style:U0},b)},EF=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function _F(){const{userSelectionActive:e,userSelectionRect:t}=at(EF,ln);return e&&t?L.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Wb(e,t){const n=t.parentNode||t.parentId,s=e.find(r=>r.id===n);if(s){const r=t.position.x+t.width-s.width,a=t.position.y+t.height-s.height;if(r>0||a>0||t.position.x<0||t.position.y<0){if(s.style={...s.style},s.style.width=s.style.width??s.width,s.style.height=s.style.height??s.height,r>0&&(s.style.width+=r),a>0&&(s.style.height+=a),t.position.x<0){const i=Math.abs(t.position.x);s.position.x=s.position.x-i,s.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);s.position.y=s.position.y-i,s.style.height+=i,t.position.y=0}s.width=s.style.width,s.height=s.style.height}}}function xE(e,t){if(e.some(s=>s.type==="reset"))return e.filter(s=>s.type==="reset").map(s=>s.item);const n=e.filter(s=>s.type==="add").map(s=>s.item);return t.reduce((s,r)=>{const a=e.filter(l=>l.id===r.id);if(a.length===0)return s.push(r),s;const i={...r};for(const l of a)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&Wb(s,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&Wb(s,i);break}case"remove":return s}return s.push(i),s},n)}function vE(e,t){return xE(e,t)}function AF(e,t){return xE(e,t)}const Or=(e,t)=>({id:e,type:"select",selected:t});function Uo(e,t){return e.reduce((n,s)=>{const r=t.includes(s.id);return!s.selected&&r?(s.selected=!0,n.push(Or(s.id,!0))):s.selected&&!r&&(s.selected=!1,n.push(Or(s.id,!1))),n},[])}const ph=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},TF=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),yE=g.memo(({isSelecting:e,selectionMode:t=hc.Full,panOnDrag:n,onSelectionStart:s,onSelectionEnd:r,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const m=g.useRef(null),h=zt(),p=g.useRef(0),v=g.useRef(0),w=g.useRef(),{userSelectionActive:x,elementsSelectable:b,dragging:y}=at(TF,ln),N=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,v.current=0},j=$=>{a==null||a($),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},S=$=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){$.preventDefault();return}i==null||i($)},k=l?$=>l($):void 0,E=$=>{const{resetSelectedElements:T,domNode:z}=h.getState();if(w.current=z==null?void 0:z.getBoundingClientRect(),!b||!e||$.button!==0||$.target!==m.current||!w.current)return;const{x:A,y:D}=ea($,w.current);T(),h.setState({userSelectionRect:{width:0,height:0,startX:A,startY:D,x:A,y:D}}),s==null||s($)},C=$=>{const{userSelectionRect:T,nodeInternals:z,edges:A,transform:D,onNodesChange:M,onEdgesChange:R,nodeOrigin:B,getNodes:H}=h.getState();if(!e||!w.current||!T)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const I=ea($,w.current),V=T.startX??0,G=T.startY??0,J={...T,x:I.x<V?I.x:V,y:I.y<G?I.y:G,width:Math.abs(I.x-V),height:Math.abs(I.y-G)},oe=H(),ee=JC(z,J,D,t===hc.Partial,!0,B),pe=eE(ee,A).map(we=>we.id),fe=ee.map(we=>we.id);if(p.current!==fe.length){p.current=fe.length;const we=Uo(oe,fe);we.length&&(M==null||M(we))}if(v.current!==pe.length){v.current=pe.length;const we=Uo(A,pe);we.length&&(R==null||R(we))}h.setState({userSelectionRect:J})},_=$=>{if($.button!==0)return;const{userSelectionRect:T}=h.getState();!x&&T&&$.target===m.current&&(j==null||j($)),h.setState({nodesSelectionActive:p.current>0}),N(),r==null||r($)},P=$=>{x&&(h.setState({nodesSelectionActive:p.current>0}),r==null||r($)),N()},O=b&&(e||x);return L.createElement("div",{className:Jt(["react-flow__pane",{dragging:y,selection:e}]),onClick:O?void 0:ph(j,m),onContextMenu:ph(S,m),onWheel:ph(k,m),onMouseEnter:O?void 0:c,onMouseDown:O?E:void 0,onMouseMove:O?C:u,onMouseUp:O?_:void 0,onMouseLeave:O?P:d,ref:m,style:U0},f,L.createElement(_F,null))});yE.displayName="Pane";function bE(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const s=t.get(n);return s?s.selected?!0:bE(s,t):!1}function Kb(e,t,n){let s=e;do{if(s!=null&&s.matches(t))return!0;if(s===n.current)return!1;s=s.parentElement}while(s);return!1}function MF(e,t,n,s){return Array.from(e.values()).filter(r=>(r.selected||r.id===s)&&(!r.parentNode||r.parentId||!bE(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var a,i;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=r.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((i=r.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function RF(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function wE(e,t,n,s,r=[0,0],a){const i=RF(e,e.extent||s);let l=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:m,y:h}=ii(f,r).positionAbsolute;l=f&&Hn(m)&&Hn(h)&&Hn(f.width)&&Hn(f.height)?[[m+e.width*r[0],h+e.height*r[1]],[m+f.width-e.width+e.width*r[0],h+f.height-e.height+e.height*r[1]]]:l}else a==null||a("005",yr.error005()),l=i;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:m,y:h}=ii(f,r).positionAbsolute;l=[[e.extent[0][0]+m,e.extent[0][1]+h],[e.extent[1][0]+m,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const f=n.get(c);u=ii(f,r).positionAbsolute}const d=l&&l!=="parent"?M0(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function xh({nodeId:e,dragItems:t,nodeInternals:n}){const s=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?s.find(r=>r.id===e):s[0],s]}const Qb=(e,t,n,s)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const a=Array.from(r),i=t.getBoundingClientRect(),l={x:i.width*s[0],y:i.height*s[1]};return a.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-l.x)/n,y:(u.top-i.top-l.y)/n,...T0(c)}})};function gl(e,t,n){return n===void 0?n:s=>{const r=t().nodeInternals.get(e);r&&n(s,{...r})}}function tp({id:e,store:t,unselect:n=!1,nodeRef:s}){const{addSelectedNodes:r,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",yr.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=s==null?void 0:s.current)==null?void 0:d.blur()})):r([e])}function DF(){const e=zt();return g.useCallback(({sourceEvent:n})=>{const{transform:s,snapGrid:r,snapToGrid:a}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,c={x:(i-s[0])/s[2],y:(l-s[1])/s[2]};return{xSnapped:a?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:a?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function vh(e){return(t,n,s)=>e==null?void 0:e(t,s)}function NE({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:s,nodeId:r,isSelectable:a,selectNodesOnDrag:i}){const l=zt(),[c,u]=g.useState(!1),d=g.useRef([]),f=g.useRef({x:null,y:null}),m=g.useRef(0),h=g.useRef(null),p=g.useRef({x:0,y:0}),v=g.useRef(null),w=g.useRef(!1),x=g.useRef(!1),b=g.useRef(!1),y=DF();return g.useEffect(()=>{if(e!=null&&e.current){const N=es(e.current),j=({x:E,y:C})=>{const{nodeInternals:_,onNodeDrag:P,onSelectionDrag:O,updateNodePositions:$,nodeExtent:T,snapGrid:z,snapToGrid:A,nodeOrigin:D,onError:M}=l.getState();f.current={x:E,y:C};let R=!1,B={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&T){const I=O0(d.current,D);B=R0(I)}if(d.current=d.current.map(I=>{const V={x:E-I.distance.x,y:C-I.distance.y};A&&(V.x=z[0]*Math.round(V.x/z[0]),V.y=z[1]*Math.round(V.y/z[1]));const G=[[T[0][0],T[0][1]],[T[1][0],T[1][1]]];d.current.length>1&&T&&!I.extent&&(G[0][0]=I.positionAbsolute.x-B.x+T[0][0],G[1][0]=I.positionAbsolute.x+(I.width??0)-B.x2+T[1][0],G[0][1]=I.positionAbsolute.y-B.y+T[0][1],G[1][1]=I.positionAbsolute.y+(I.height??0)-B.y2+T[1][1]);const J=wE(I,V,_,G,D,M);return R=R||I.position.x!==J.position.x||I.position.y!==J.position.y,I.position=J.position,I.positionAbsolute=J.positionAbsolute,I}),!R)return;$(d.current,!0,!0),u(!0);const H=r?P:vh(O);if(H&&v.current){const[I,V]=xh({nodeId:r,dragItems:d.current,nodeInternals:_});H(v.current,I,V)}},S=()=>{if(!h.current)return;const[E,C]=VC(p.current,h.current);if(E!==0||C!==0){const{transform:_,panBy:P}=l.getState();f.current.x=(f.current.x??0)-E/_[2],f.current.y=(f.current.y??0)-C/_[2],P({x:E,y:C})&&j(f.current)}m.current=requestAnimationFrame(S)},k=E=>{var D;const{nodeInternals:C,multiSelectionActive:_,nodesDraggable:P,unselectNodesAndEdges:O,onNodeDragStart:$,onSelectionDragStart:T}=l.getState();x.current=!0;const z=r?$:vh(T);(!i||!a)&&!_&&r&&((D=C.get(r))!=null&&D.selected||O()),r&&a&&i&&tp({id:r,store:l,nodeRef:e});const A=y(E);if(f.current=A,d.current=MF(C,P,A,r),z&&d.current){const[M,R]=xh({nodeId:r,dragItems:d.current,nodeInternals:C});z(E.sourceEvent,M,R)}};if(t)N.on(".drag",null);else{const E=F7().on("start",C=>{const{domNode:_,nodeDragThreshold:P}=l.getState();P===0&&k(C),b.current=!1;const O=y(C);f.current=O,h.current=(_==null?void 0:_.getBoundingClientRect())||null,p.current=ea(C.sourceEvent,h.current)}).on("drag",C=>{var $,T;const _=y(C),{autoPanOnNodeDrag:P,nodeDragThreshold:O}=l.getState();if(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1&&(b.current=!0),!b.current){if(!w.current&&x.current&&P&&(w.current=!0,S()),!x.current){const z=_.xSnapped-((($=f==null?void 0:f.current)==null?void 0:$.x)??0),A=_.ySnapped-(((T=f==null?void 0:f.current)==null?void 0:T.y)??0);Math.sqrt(z*z+A*A)>O&&k(C)}(f.current.x!==_.xSnapped||f.current.y!==_.ySnapped)&&d.current&&x.current&&(v.current=C.sourceEvent,p.current=ea(C.sourceEvent,h.current),j(_))}}).on("end",C=>{if(!(!x.current||b.current)&&(u(!1),w.current=!1,x.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:_,nodeInternals:P,onNodeDragStop:O,onSelectionDragStop:$}=l.getState(),T=r?O:vh($);if(_(d.current,!1,!1),T){const[z,A]=xh({nodeId:r,dragItems:d.current,nodeInternals:P});T(C.sourceEvent,z,A)}}}).filter(C=>{const _=C.target;return!C.button&&(!n||!Kb(_,`.${n}`,e))&&(!s||Kb(_,s,e))});return N.call(E),()=>{N.on(".drag",null)}}}},[e,t,n,s,a,l,r,i,y]),c}function jE(){const e=zt();return g.useCallback(n=>{const{nodeInternals:s,nodeExtent:r,updateNodePositions:a,getNodes:i,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(b=>b.selected&&(b.draggable||d&&typeof b.draggable>"u")),m=l?c[0]:5,h=l?c[1]:5,p=n.isShiftPressed?4:1,v=n.x*m*p,w=n.y*h*p,x=f.map(b=>{if(b.positionAbsolute){const y={x:b.positionAbsolute.x+v,y:b.positionAbsolute.y+w};l&&(y.x=c[0]*Math.round(y.x/c[0]),y.y=c[1]*Math.round(y.y/c[1]));const{positionAbsolute:N,position:j}=wE(b,y,s,r,void 0,u);b.position=j,b.positionAbsolute=N}return b});a(x,!0,!1)},[])}const li={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var pl=e=>{const t=({id:n,type:s,data:r,xPos:a,yPos:i,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:h,onContextMenu:p,onDoubleClick:v,style:w,className:x,isDraggable:b,isSelectable:y,isConnectable:N,isFocusable:j,selectNodesOnDrag:S,sourcePosition:k,targetPosition:E,hidden:C,resizeObserver:_,dragHandle:P,zIndex:O,isParent:$,noDragClassName:T,noPanClassName:z,initialized:A,disableKeyboardA11y:D,ariaLabel:M,rfId:R,hasHandleBounds:B})=>{const H=zt(),I=g.useRef(null),V=g.useRef(null),G=g.useRef(k),J=g.useRef(E),oe=g.useRef(s),ee=y||b||d||f||m||h,pe=jE(),fe=gl(n,H.getState,f),we=gl(n,H.getState,m),F=gl(n,H.getState,h),Y=gl(n,H.getState,p),Q=gl(n,H.getState,v),X=ue=>{const{nodeDragThreshold:ne}=H.getState();if(y&&(!S||!b||ne>0)&&tp({id:n,store:H,nodeRef:I}),d){const Re=H.getState().nodeInternals.get(n);Re&&d(ue,{...Re})}},se=ue=>{if(!Wg(ue)&&!D)if(GC.includes(ue.key)&&y){const ne=ue.key==="Escape";tp({id:n,store:H,unselect:ne,nodeRef:I})}else b&&u&&Object.prototype.hasOwnProperty.call(li,ue.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${ue.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),pe({x:li[ue.key].x,y:li[ue.key].y,isShiftPressed:ue.shiftKey}))};g.useEffect(()=>()=>{V.current&&(_==null||_.unobserve(V.current),V.current=null)},[]),g.useEffect(()=>{if(I.current&&!C){const ue=I.current;(!A||!B||V.current!==ue)&&(V.current&&(_==null||_.unobserve(V.current)),_==null||_.observe(ue),V.current=ue)}},[C,A,B]),g.useEffect(()=>{const ue=oe.current!==s,ne=G.current!==k,Re=J.current!==E;I.current&&(ue||ne||Re)&&(ue&&(oe.current=s),ne&&(G.current=k),Re&&(J.current=E),H.getState().updateNodeDimensions([{id:n,nodeElement:I.current,forceUpdate:!0}]))},[n,s,k,E]);const ve=NE({nodeRef:I,disabled:C||!b,noDragClassName:T,handleSelector:P,nodeId:n,isSelectable:y,selectNodesOnDrag:S});return C?null:L.createElement("div",{className:Jt(["react-flow__node",`react-flow__node-${s}`,{[z]:b},x,{selected:u,selectable:y,parent:$,dragging:ve}]),ref:I,style:{zIndex:O,transform:`translate(${l}px,${c}px)`,pointerEvents:ee?"all":"none",visibility:A?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:fe,onMouseMove:we,onMouseLeave:F,onContextMenu:Y,onClick:X,onDoubleClick:Q,onKeyDown:j?se:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":D?void 0:`${fE}-${R}`,"aria-label":M},L.createElement(YU,{value:n},L.createElement(e,{id:n,data:r,type:s,xPos:a,yPos:i,selected:u,isConnectable:N,sourcePosition:k,targetPosition:E,dragging:ve,dragHandle:P,zIndex:O})))};return t.displayName="NodeWrapper",g.memo(t)};const zF=e=>{const t=e.getNodes().filter(n=>n.selected);return{...O0(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function LF({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const s=zt(),{width:r,height:a,x:i,y:l,transformString:c,userSelectionActive:u}=at(zF,ln),d=jE(),f=g.useRef(null);if(g.useEffect(()=>{var p;n||(p=f.current)==null||p.focus({preventScroll:!0})},[n]),NE({nodeRef:f}),u||!r||!a)return null;const m=e?p=>{const v=s.getState().getNodes().filter(w=>w.selected);e(p,v)}:void 0,h=p=>{Object.prototype.hasOwnProperty.call(li,p.key)&&d({x:li[p.key].x,y:li[p.key].y,isShiftPressed:p.shiftKey})};return L.createElement("div",{className:Jt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},L.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:r,height:a,top:l,left:i}}))}var $F=g.memo(LF);const PF=e=>e.nodesSelectionActive,SE=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:h,onSelectionStart:p,onSelectionEnd:v,multiSelectionKeyCode:w,panActivationKeyCode:x,zoomActivationKeyCode:b,elementsSelectable:y,zoomOnScroll:N,zoomOnPinch:j,panOnScroll:S,panOnScrollSpeed:k,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:_,defaultViewport:P,translateExtent:O,minZoom:$,maxZoom:T,preventScrolling:z,onSelectionContextMenu:A,noWheelClassName:D,noPanClassName:M,disableKeyboardA11y:R})=>{const B=at(PF),H=gc(f),I=gc(x),V=I||_,G=I||S,J=H||m&&V!==!0;return NF({deleteKeyCode:l,multiSelectionKeyCode:w}),L.createElement(CF,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:y,zoomOnScroll:N,zoomOnPinch:j,panOnScroll:G,panOnScrollSpeed:k,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:!H&&V,defaultViewport:P,translateExtent:O,minZoom:$,maxZoom:T,zoomActivationKeyCode:b,preventScrolling:z,noWheelClassName:D,noPanClassName:M},L.createElement(yE,{onSelectionStart:p,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:r,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:V,isSelecting:!!J,selectionMode:h},e,B&&L.createElement($F,{onSelectionContextMenu:A,noPanClassName:M,disableKeyboardA11y:R})))};SE.displayName="FlowRenderer";var OF=g.memo(SE);function BF(e){return at(g.useCallback(n=>e?JC(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function IF(e){const t={input:pl(e.input||lE),default:pl(e.default||ep),output:pl(e.output||uE),group:pl(e.group||I0)},n={},s=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,a)=>(r[a]=pl(e[a]||ep),r),n);return{...t,...s}}const HF=({x:e,y:t,width:n,height:s,origin:r})=>!n||!s?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-s*r[1]},UF=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),kE=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:s,elementsSelectable:r,updateNodeDimensions:a,onError:i}=at(UF,ln),l=BF(e.onlyRenderVisibleElements),c=g.useRef(),u=g.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const m=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));a(m)});return c.current=d,d},[]);return g.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),L.createElement("div",{className:"react-flow__nodes",style:U0},l.map(d=>{var j,S,k;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",yr.error003(f)),f="default");const m=e.nodeTypes[f]||e.nodeTypes.default,h=!!(d.draggable||t&&typeof d.draggable>"u"),p=!!(d.selectable||r&&typeof d.selectable>"u"),v=!!(d.connectable||n&&typeof d.connectable>"u"),w=!!(d.focusable||s&&typeof d.focusable>"u"),x=e.nodeExtent?M0(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,b=(x==null?void 0:x.x)??0,y=(x==null?void 0:x.y)??0,N=HF({x:b,y,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return L.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||le.Bottom,targetPosition:d.targetPosition||le.Top,hidden:d.hidden,xPos:b,yPos:y,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:h,isSelectable:p,isConnectable:v,isFocusable:w,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((j=d[ct])==null?void 0:j.z)??0,isParent:!!((S=d[ct])!=null&&S.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((k=d[ct])!=null&&k.handleBounds)})}))};kE.displayName="NodeRenderer";var FF=g.memo(kE);const VF=(e,t,n)=>n===le.Left?e-t:n===le.Right?e+t:e,qF=(e,t,n)=>n===le.Top?e-t:n===le.Bottom?e+t:e,Jb="react-flow__edgeupdater",ew=({position:e,centerX:t,centerY:n,radius:s=10,onMouseDown:r,onMouseEnter:a,onMouseOut:i,type:l})=>L.createElement("circle",{onMouseDown:r,onMouseEnter:a,onMouseOut:i,className:Jt([Jb,`${Jb}-${l}`]),cx:VF(t,s,e),cy:qF(n,s,e),r:s,stroke:"transparent",fill:"transparent"}),GF=()=>!0;var Do=e=>{const t=({id:n,className:s,type:r,data:a,onClick:i,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:w,source:x,target:b,sourceX:y,sourceY:N,targetX:j,targetY:S,sourcePosition:k,targetPosition:E,elementsSelectable:C,hidden:_,sourceHandleId:P,targetHandleId:O,onContextMenu:$,onMouseEnter:T,onMouseMove:z,onMouseLeave:A,reconnectRadius:D,onReconnect:M,onReconnectStart:R,onReconnectEnd:B,markerEnd:H,markerStart:I,rfId:V,ariaLabel:G,isFocusable:J,isReconnectable:oe,pathOptions:ee,interactionWidth:pe,disableKeyboardA11y:fe})=>{const we=g.useRef(null),[F,Y]=g.useState(!1),[Q,X]=g.useState(!1),se=zt(),ve=g.useMemo(()=>`url('#${Qg(I,V)}')`,[I,V]),ue=g.useMemo(()=>`url('#${Qg(H,V)}')`,[H,V]);if(_)return null;const ne=_t=>{var Mn;const{edges:Lt,addSelectedEdges:fs,unselectNodesAndEdges:Gs,multiSelectionActive:Zs}=se.getState(),Qn=Lt.find(ba=>ba.id===n);Qn&&(C&&(se.setState({nodesSelectionActive:!1}),Qn.selected&&Zs?(Gs({nodes:[],edges:[Qn]}),(Mn=we.current)==null||Mn.blur()):fs([n])),i&&i(_t,Qn))},Re=hl(n,se.getState,l),pt=hl(n,se.getState,$),ds=hl(n,se.getState,T),_r=hl(n,se.getState,z),Tn=hl(n,se.getState,A),Wn=(_t,Lt)=>{if(_t.button!==0)return;const{edges:fs,isValidConnection:Gs}=se.getState(),Zs=Lt?b:x,Qn=(Lt?O:P)||null,Mn=Lt?"target":"source",ba=Gs||GF,de=Lt,_e=fs.find(Pe=>Pe.id===n);X(!0),R==null||R(_t,_e,Mn);const Le=Pe=>{X(!1),B==null||B(Pe,_e,Mn)};rE({event:_t,handleId:Qn,nodeId:Zs,onConnect:Pe=>M==null?void 0:M(_e,Pe),isTarget:de,getState:se.getState,setState:se.setState,isValidConnection:ba,edgeUpdaterType:Mn,onReconnectEnd:Le})},Fs=_t=>Wn(_t,!0),Vs=_t=>Wn(_t,!1),qs=()=>Y(!0),Kn=()=>Y(!1),Ar=!C&&!i,Tr=_t=>{var Lt;if(!fe&&GC.includes(_t.key)&&C){const{unselectNodesAndEdges:fs,addSelectedEdges:Gs,edges:Zs}=se.getState();_t.key==="Escape"?((Lt=we.current)==null||Lt.blur(),fs({edges:[Zs.find(Mn=>Mn.id===n)]})):Gs([n])}};return L.createElement("g",{className:Jt(["react-flow__edge",`react-flow__edge-${r}`,s,{selected:c,animated:u,inactive:Ar,updating:F}]),onClick:ne,onDoubleClick:Re,onContextMenu:pt,onMouseEnter:ds,onMouseMove:_r,onMouseLeave:Tn,onKeyDown:J?Tr:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":G===null?void 0:G||`Edge from ${x} to ${b}`,"aria-describedby":J?`${mE}-${V}`:void 0,ref:we},!Q&&L.createElement(e,{id:n,source:x,target:b,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,data:a,style:w,sourceX:y,sourceY:N,targetX:j,targetY:S,sourcePosition:k,targetPosition:E,sourceHandleId:P,targetHandleId:O,markerStart:ve,markerEnd:ue,pathOptions:ee,interactionWidth:pe}),oe&&L.createElement(L.Fragment,null,(oe==="source"||oe===!0)&&L.createElement(ew,{position:k,centerX:y,centerY:N,radius:D,onMouseDown:Fs,onMouseEnter:qs,onMouseOut:Kn,type:"source"}),(oe==="target"||oe===!0)&&L.createElement(ew,{position:E,centerX:j,centerY:S,radius:D,onMouseDown:Vs,onMouseEnter:qs,onMouseOut:Kn,type:"target"})))};return t.displayName="EdgeWrapper",g.memo(t)};function ZF(e){const t={default:Do(e.default||Qd),straight:Do(e.bezier||L0),step:Do(e.step||z0),smoothstep:Do(e.step||ym),simplebezier:Do(e.simplebezier||D0)},n={},s=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,a)=>(r[a]=Do(e[a]||Qd),r),n);return{...t,...s}}function tw(e,t,n=null){const s=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case le.Top:return{x:s+a/2,y:r};case le.Right:return{x:s+a,y:r+i/2};case le.Bottom:return{x:s+a/2,y:r+i};case le.Left:return{x:s,y:r+i/2}}}function nw(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const YF=(e,t,n,s,r,a)=>{const i=tw(n,e,t),l=tw(a,s,r);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function XF({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:s,targetWidth:r,targetHeight:a,width:i,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+s,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=R0({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*m)>0}function sw(e){var s,r,a,i,l;const t=((s=e==null?void 0:e[ct])==null?void 0:s.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const WF=[{level:0,isMaxLevel:!0,edges:[]}];function KF(e,t,n=!1){let s=-1;const r=e.reduce((i,l)=>{var d,f;const c=Hn(l.zIndex);let u=c?l.zIndex:0;if(n){const m=t.get(l.target),h=t.get(l.source),p=l.selected||(m==null?void 0:m.selected)||(h==null?void 0:h.selected),v=Math.max(((d=h==null?void 0:h[ct])==null?void 0:d.z)||0,((f=m==null?void 0:m[ct])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(p?v:0)}return i[u]?i[u].push(l):i[u]=[l],s=u>s?u:s,i},{}),a=Object.entries(r).map(([i,l])=>{const c=+i;return{edges:l,level:c,isMaxLevel:c===s}});return a.length===0?WF:a}function QF(e,t,n){const s=at(g.useCallback(r=>e?r.edges.filter(a=>{const i=t.get(a.source),l=t.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&XF({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return KF(s,t,n)}const JF=({color:e="none",strokeWidth:t=1})=>L.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),eV=({color:e="none",strokeWidth:t=1})=>L.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),rw={[Kd.Arrow]:JF,[Kd.ArrowClosed]:eV};function tV(e){const t=zt();return g.useMemo(()=>{var r,a;return Object.prototype.hasOwnProperty.call(rw,e)?rw[e]:((a=(r=t.getState()).onError)==null||a.call(r,"009",yr.error009(e)),null)},[e])}const nV=({id:e,type:t,color:n,width:s=12.5,height:r=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=tV(t);return c?L.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${s}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:l,refX:"0",refY:"0"},L.createElement(c,{color:n,strokeWidth:i})):null},sV=({defaultColor:e,rfId:t})=>n=>{const s=[];return n.edges.reduce((r,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=Qg(i,t);s.includes(l)||(r.push({id:l,color:i.color||e,...i}),s.push(l))}}),r),[]).sort((r,a)=>r.id.localeCompare(a.id))},CE=({defaultColor:e,rfId:t})=>{const n=at(g.useCallback(sV({defaultColor:e,rfId:t}),[e,t]),(s,r)=>!(s.length!==r.length||s.some((a,i)=>a.id!==r[i].id)));return L.createElement("defs",null,n.map(s=>L.createElement(nV,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};CE.displayName="MarkerDefinitions";var rV=g.memo(CE);const aV=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),EE=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:s,edgeTypes:r,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:p,reconnectRadius:v,children:w,disableKeyboardA11y:x})=>{const{edgesFocusable:b,edgesUpdatable:y,elementsSelectable:N,width:j,height:S,connectionMode:k,nodeInternals:E,onError:C}=at(aV,ln),_=QF(t,E,n);return j?L.createElement(L.Fragment,null,_.map(({level:P,edges:O,isMaxLevel:$})=>L.createElement("svg",{key:P,style:{zIndex:P},width:j,height:S,className:"react-flow__edges react-flow__container"},$&&L.createElement(rV,{defaultColor:e,rfId:s}),L.createElement("g",null,O.map(T=>{const[z,A,D]=sw(E.get(T.source)),[M,R,B]=sw(E.get(T.target));if(!D||!B)return null;let H=T.type||"default";r[H]||(C==null||C("011",yr.error011(H)),H="default");const I=r[H]||r.default,V=k===Ka.Strict?R.target:(R.target??[]).concat(R.source??[]),G=nw(A.source,T.sourceHandle),J=nw(V,T.targetHandle),oe=(G==null?void 0:G.position)||le.Bottom,ee=(J==null?void 0:J.position)||le.Top,pe=!!(T.focusable||b&&typeof T.focusable>"u"),fe=T.reconnectable||T.updatable,we=typeof m<"u"&&(fe||y&&typeof fe>"u");if(!G||!J)return C==null||C("008",yr.error008(G,T)),null;const{sourceX:F,sourceY:Y,targetX:Q,targetY:X}=YF(z,G,oe,M,J,ee);return L.createElement(I,{key:T.id,id:T.id,className:Jt([T.className,a]),type:H,data:T.data,selected:!!T.selected,animated:!!T.animated,hidden:!!T.hidden,label:T.label,labelStyle:T.labelStyle,labelShowBg:T.labelShowBg,labelBgStyle:T.labelBgStyle,labelBgPadding:T.labelBgPadding,labelBgBorderRadius:T.labelBgBorderRadius,style:T.style,source:T.source,target:T.target,sourceHandleId:T.sourceHandle,targetHandleId:T.targetHandle,markerEnd:T.markerEnd,markerStart:T.markerStart,sourceX:F,sourceY:Y,targetX:Q,targetY:X,sourcePosition:oe,targetPosition:ee,elementsSelectable:N,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:p,reconnectRadius:v,rfId:s,ariaLabel:T.ariaLabel,isFocusable:pe,isReconnectable:we,pathOptions:"pathOptions"in T?T.pathOptions:void 0,interactionWidth:T.interactionWidth,disableKeyboardA11y:x})})))),w):null};EE.displayName="EdgeRenderer";var oV=g.memo(EE);const iV=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function lV({children:e}){const t=at(iV);return L.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function cV(e){const t=H0(),n=g.useRef(!1);g.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const uV={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top},_E=({nodeId:e,handleType:t,style:n,type:s=Ur.Bezier,CustomComponent:r,connectionStatus:a})=>{var S,k,E;const{fromNode:i,handleId:l,toX:c,toY:u,connectionMode:d}=at(g.useCallback(C=>({fromNode:C.nodeInternals.get(e),handleId:C.connectionHandleId,toX:(C.connectionPosition.x-C.transform[0])/C.transform[2],toY:(C.connectionPosition.y-C.transform[1])/C.transform[2],connectionMode:C.connectionMode}),[e]),ln),f=(S=i==null?void 0:i[ct])==null?void 0:S.handleBounds;let m=f==null?void 0:f[t];if(d===Ka.Loose&&(m=m||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!m)return null;const h=l?m.find(C=>C.id===l):m[0],p=h?h.x+h.width/2:(i.width??0)/2,v=h?h.y+h.height/2:i.height??0,w=(((k=i.positionAbsolute)==null?void 0:k.x)??0)+p,x=(((E=i.positionAbsolute)==null?void 0:E.y)??0)+v,b=h==null?void 0:h.position,y=b?uV[b]:null;if(!b||!y)return null;if(r)return L.createElement(r,{connectionLineType:s,connectionLineStyle:n,fromNode:i,fromHandle:h,fromX:w,fromY:x,toX:c,toY:u,fromPosition:b,toPosition:y,connectionStatus:a});let N="";const j={sourceX:w,sourceY:x,sourcePosition:b,targetX:c,targetY:u,targetPosition:y};return s===Ur.Bezier?[N]=KC(j):s===Ur.Step?[N]=Kg({...j,borderRadius:0}):s===Ur.SmoothStep?[N]=Kg(j):s===Ur.SimpleBezier?[N]=WC(j):N=`M${w},${x} ${c},${u}`,L.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:n})};_E.displayName="ConnectionLine";const dV=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function fV({containerStyle:e,style:t,type:n,component:s}){const{nodeId:r,handleType:a,nodesConnectable:i,width:l,height:c,connectionStatus:u}=at(dV,ln);return!(r&&a&&l&&i)?null:L.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},L.createElement("g",{className:Jt(["react-flow__connection",u])},L.createElement(_E,{nodeId:r,handleType:a,style:t,type:n,CustomComponent:s,connectionStatus:u})))}function aw(e,t){return g.useRef(null),zt(),g.useMemo(()=>t(e),[e])}const AE=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:s,onMoveEnd:r,onInit:a,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:v,onSelectionEnd:w,connectionLineType:x,connectionLineStyle:b,connectionLineComponent:y,connectionLineContainerStyle:N,selectionKeyCode:j,selectionOnDrag:S,selectionMode:k,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:_,deleteKeyCode:P,onlyRenderVisibleElements:O,elementsSelectable:$,selectNodesOnDrag:T,defaultViewport:z,translateExtent:A,minZoom:D,maxZoom:M,preventScrolling:R,defaultMarkerColor:B,zoomOnScroll:H,zoomOnPinch:I,panOnScroll:V,panOnScrollSpeed:G,panOnScrollMode:J,zoomOnDoubleClick:oe,panOnDrag:ee,onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:we,onPaneMouseLeave:F,onPaneScroll:Y,onPaneContextMenu:Q,onEdgeContextMenu:X,onEdgeMouseEnter:se,onEdgeMouseMove:ve,onEdgeMouseLeave:ue,onReconnect:ne,onReconnectStart:Re,onReconnectEnd:pt,reconnectRadius:ds,noDragClassName:_r,noWheelClassName:Tn,noPanClassName:Wn,elevateEdgesOnSelect:Fs,disableKeyboardA11y:Vs,nodeOrigin:qs,nodeExtent:Kn,rfId:Ar})=>{const Tr=aw(e,IF),_t=aw(t,ZF);return cV(a),L.createElement(OF,{onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:we,onPaneMouseLeave:F,onPaneContextMenu:Q,onPaneScroll:Y,deleteKeyCode:P,selectionKeyCode:j,selectionOnDrag:S,selectionMode:k,onSelectionStart:v,onSelectionEnd:w,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:_,elementsSelectable:$,onMove:n,onMoveStart:s,onMoveEnd:r,zoomOnScroll:H,zoomOnPinch:I,zoomOnDoubleClick:oe,panOnScroll:V,panOnScrollSpeed:G,panOnScrollMode:J,panOnDrag:ee,defaultViewport:z,translateExtent:A,minZoom:D,maxZoom:M,onSelectionContextMenu:p,preventScrolling:R,noDragClassName:_r,noWheelClassName:Tn,noPanClassName:Wn,disableKeyboardA11y:Vs},L.createElement(lV,null,L.createElement(oV,{edgeTypes:_t,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:O,onEdgeContextMenu:X,onEdgeMouseEnter:se,onEdgeMouseMove:ve,onEdgeMouseLeave:ue,onReconnect:ne,onReconnectStart:Re,onReconnectEnd:pt,reconnectRadius:ds,defaultMarkerColor:B,noPanClassName:Wn,elevateEdgesOnSelect:!!Fs,disableKeyboardA11y:Vs,rfId:Ar},L.createElement(fV,{style:b,type:x,component:y,containerStyle:N})),L.createElement("div",{className:"react-flow__edgelabel-renderer"}),L.createElement(FF,{nodeTypes:Tr,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,selectNodesOnDrag:T,onlyRenderVisibleElements:O,noPanClassName:Wn,noDragClassName:_r,disableKeyboardA11y:Vs,nodeOrigin:qs,nodeExtent:Kn,rfId:Ar})))};AE.displayName="GraphView";var mV=g.memo(AE);const np=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Dr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:np,nodeExtent:np,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ka.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:UU,isValidConnection:void 0},hV=()=>t9((e,t)=>({...Dr,setNodes:n=>{const{nodeInternals:s,nodeOrigin:r,elevateNodesOnSelect:a}=t();e({nodeInternals:gh(n,s,r,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:s={}}=t();e({edges:n.map(r=>({...s,...r}))})},setDefaultNodesAndEdges:(n,s)=>{const r=typeof n<"u",a=typeof s<"u",i=r?gh(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:a?s:[],hasDefaultNodes:r,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:s,nodeInternals:r,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((v,w)=>{const x=r.get(w.id);if(x!=null&&x.hidden)r.set(x.id,{...x,[ct]:{...x[ct],handleBounds:void 0}});else if(x){const b=T0(w.nodeElement);!!(b.width&&b.height&&(x.width!==b.width||x.height!==b.height||w.forceUpdate))&&(r.set(x.id,{...x,[ct]:{...x[ct],handleBounds:{source:Qb(".source",w.nodeElement,m,u),target:Qb(".target",w.nodeElement,m,u)}},...b}),v.push({id:x.id,type:"dimensions",dimensions:b}))}return v},[]);gE(r,u);const p=i||a&&!i&&pE(t,{initial:!0,...l});e({nodeInternals:new Map(r),fitViewOnInitDone:p}),(h==null?void 0:h.length)>0&&(s==null||s(h))},updateNodePositions:(n,s=!0,r=!1)=>{const{triggerNodeChanges:a}=t(),i=n.map(l=>{const c={id:l.id,type:"position",dragging:r};return s&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});a(i)},triggerNodeChanges:n=>{const{onNodesChange:s,nodeInternals:r,hasDefaultNodes:a,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(a){const u=vE(n,l()),d=gh(u,r,i,c);e({nodeInternals:d})}s==null||s(n)}},addSelectedNodes:n=>{const{multiSelectionActive:s,edges:r,getNodes:a}=t();let i,l=null;s?i=n.map(c=>Or(c,!0)):(i=Uo(a(),n),l=Uo(r,[])),Du({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:s,edges:r,getNodes:a}=t();let i,l=null;s?i=n.map(c=>Or(c,!0)):(i=Uo(r,n),l=Uo(a(),[])),Du({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:s}={})=>{const{edges:r,getNodes:a}=t(),i=n||a(),l=s||r,c=i.map(d=>(d.selected=!1,Or(d.id,!1))),u=l.map(d=>Or(d.id,!1));Du({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:s,maxZoom:r}=t();s==null||s.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:s,minZoom:r}=t();s==null||s.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var s;(s=t().d3Zoom)==null||s.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:s}=t(),a=s().filter(l=>l.selected).map(l=>Or(l.id,!1)),i=n.filter(l=>l.selected).map(l=>Or(l.id,!1));Du({changedNodes:a,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:s}=t();s.forEach(r=>{r.positionAbsolute=M0(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(s)})},panBy:n=>{const{transform:s,width:r,height:a,d3Zoom:i,d3Selection:l,translateExtent:c}=t();if(!i||!l||!n.x&&!n.y)return!1;const u=Jr.translate(s[0]+n.x,s[1]+n.y).scale(s[2]),d=[[0,0],[r,a]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(l,f),s[0]!==f.x||s[1]!==f.y||s[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Dr.connectionNodeId,connectionHandleId:Dr.connectionHandleId,connectionHandleType:Dr.connectionHandleType,connectionStatus:Dr.connectionStatus,connectionStartHandle:Dr.connectionStartHandle,connectionEndHandle:Dr.connectionEndHandle}),reset:()=>e({...Dr})}),Object.is),TE=({children:e})=>{const t=g.useRef(null);return t.current||(t.current=hV()),L.createElement(zU,{value:t.current},e)};TE.displayName="ReactFlowProvider";const ME=({children:e})=>g.useContext(vm)?L.createElement(L.Fragment,null,e):L.createElement(TE,null,e);ME.displayName="ReactFlowWrapper";const gV={input:lE,default:ep,output:uE,group:I0},pV={default:Qd,straight:L0,step:z0,smoothstep:ym,simplebezier:D0},xV=[0,0],vV=[15,15],yV={x:0,y:0,zoom:1},bV={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},F0=g.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,className:r,nodeTypes:a=gV,edgeTypes:i=pV,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:h,onConnectStart:p,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:b,onNodeMouseMove:y,onNodeMouseLeave:N,onNodeContextMenu:j,onNodeDoubleClick:S,onNodeDragStart:k,onNodeDrag:E,onNodeDragStop:C,onNodesDelete:_,onEdgesDelete:P,onSelectionChange:O,onSelectionDragStart:$,onSelectionDrag:T,onSelectionDragStop:z,onSelectionContextMenu:A,onSelectionStart:D,onSelectionEnd:M,connectionMode:R=Ka.Strict,connectionLineType:B=Ur.Bezier,connectionLineStyle:H,connectionLineComponent:I,connectionLineContainerStyle:V,deleteKeyCode:G="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:oe=!1,selectionMode:ee=hc.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:fe=Wd()?"Meta":"Control",zoomActivationKeyCode:we=Wd()?"Meta":"Control",snapToGrid:F=!1,snapGrid:Y=vV,onlyRenderVisibleElements:Q=!1,selectNodesOnDrag:X=!0,nodesDraggable:se,nodesConnectable:ve,nodesFocusable:ue,nodeOrigin:ne=xV,edgesFocusable:Re,edgesUpdatable:pt,elementsSelectable:ds,defaultViewport:_r=yV,minZoom:Tn=.5,maxZoom:Wn=2,translateExtent:Fs=np,preventScrolling:Vs=!0,nodeExtent:qs,defaultMarkerColor:Kn="#b1b1b7",zoomOnScroll:Ar=!0,zoomOnPinch:Tr=!0,panOnScroll:_t=!1,panOnScrollSpeed:Lt=.5,panOnScrollMode:fs=La.Free,zoomOnDoubleClick:Gs=!0,panOnDrag:Zs=!0,onPaneClick:Qn,onPaneMouseEnter:Mn,onPaneMouseMove:ba,onPaneMouseLeave:de,onPaneScroll:_e,onPaneContextMenu:Le,children:Ae,onEdgeContextMenu:Pe,onEdgeDoubleClick:It,onEdgeMouseEnter:$t,onEdgeMouseMove:ms,onEdgeMouseLeave:hn,onEdgeUpdate:Ys,onEdgeUpdateStart:hs,onEdgeUpdateEnd:Rn,onReconnect:ko,onReconnectStart:fu,onReconnectEnd:qM,reconnectRadius:GM=10,edgeUpdaterRadius:ZM=10,onNodesChange:YM,onEdgesChange:XM,noDragClassName:WM="nodrag",noWheelClassName:KM="nowheel",noPanClassName:ty="nopan",fitView:QM=!1,fitViewOptions:JM,connectOnClick:eR=!0,attributionPosition:tR,proOptions:nR,defaultEdgeOptions:sR,elevateNodesOnSelect:rR=!0,elevateEdgesOnSelect:aR=!1,disableKeyboardA11y:ny=!1,autoPanOnConnect:oR=!0,autoPanOnNodeDrag:iR=!0,connectionRadius:lR=20,isValidConnection:cR,onError:uR,style:dR,id:sy,nodeDragThreshold:fR,...mR},hR)=>{const Im=sy||"1";return L.createElement("div",{...mR,style:{...dR,...bV},ref:hR,className:Jt(["react-flow",r]),"data-testid":"rf__wrapper",id:sy},L.createElement(ME,null,L.createElement(mV,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:b,onNodeMouseMove:y,onNodeMouseLeave:N,onNodeContextMenu:j,onNodeDoubleClick:S,nodeTypes:a,edgeTypes:i,connectionLineType:B,connectionLineStyle:H,connectionLineComponent:I,connectionLineContainerStyle:V,selectionKeyCode:J,selectionOnDrag:oe,selectionMode:ee,deleteKeyCode:G,multiSelectionKeyCode:fe,panActivationKeyCode:pe,zoomActivationKeyCode:we,onlyRenderVisibleElements:Q,selectNodesOnDrag:X,defaultViewport:_r,translateExtent:Fs,minZoom:Tn,maxZoom:Wn,preventScrolling:Vs,zoomOnScroll:Ar,zoomOnPinch:Tr,zoomOnDoubleClick:Gs,panOnScroll:_t,panOnScrollSpeed:Lt,panOnScrollMode:fs,panOnDrag:Zs,onPaneClick:Qn,onPaneMouseEnter:Mn,onPaneMouseMove:ba,onPaneMouseLeave:de,onPaneScroll:_e,onPaneContextMenu:Le,onSelectionContextMenu:A,onSelectionStart:D,onSelectionEnd:M,onEdgeContextMenu:Pe,onEdgeDoubleClick:It,onEdgeMouseEnter:$t,onEdgeMouseMove:ms,onEdgeMouseLeave:hn,onReconnect:ko??Ys,onReconnectStart:fu??hs,onReconnectEnd:qM??Rn,reconnectRadius:GM??ZM,defaultMarkerColor:Kn,noDragClassName:WM,noWheelClassName:KM,noPanClassName:ty,elevateEdgesOnSelect:aR,rfId:Im,disableKeyboardA11y:ny,nodeOrigin:ne,nodeExtent:qs}),L.createElement(uF,{nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:h,onConnectStart:p,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:se,nodesConnectable:ve,nodesFocusable:ue,edgesFocusable:Re,edgesUpdatable:pt,elementsSelectable:ds,elevateNodesOnSelect:rR,minZoom:Tn,maxZoom:Wn,nodeExtent:qs,onNodesChange:YM,onEdgesChange:XM,snapToGrid:F,snapGrid:Y,connectionMode:R,translateExtent:Fs,connectOnClick:eR,defaultEdgeOptions:sR,fitView:QM,fitViewOptions:JM,onNodesDelete:_,onEdgesDelete:P,onNodeDragStart:k,onNodeDrag:E,onNodeDragStop:C,onSelectionDrag:T,onSelectionDragStart:$,onSelectionDragStop:z,noPanClassName:ty,nodeOrigin:ne,rfId:Im,autoPanOnConnect:oR,autoPanOnNodeDrag:iR,onError:uR,connectionRadius:lR,isValidConnection:cR,nodeDragThreshold:fR}),L.createElement(lF,{onSelectionChange:O}),Ae,L.createElement($U,{proOptions:nR,position:tR}),L.createElement(gF,{rfId:Im,disableKeyboardA11y:ny})))});F0.displayName="ReactFlow";function RE(e){return t=>{const[n,s]=g.useState(t),r=g.useCallback(a=>s(i=>e(a,i)),[]);return[n,s,r]}}const DE=RE(vE),zE=RE(AF);function wV(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}function NV(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},L.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function jV(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},L.createElement("path",{d:"M0 0h32v4.2H0z"}))}function SV(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},L.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function kV(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},L.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function CV(){return L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},L.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Ml=({children:e,className:t,...n})=>L.createElement("button",{type:"button",className:Jt(["react-flow__controls-button",t]),...n},e);Ml.displayName="ControlButton";const EV=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),LE=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:s=!0,fitViewOptions:r,onZoomIn:a,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const m=zt(),[h,p]=g.useState(!1),{isInteractive:v,minZoomReached:w,maxZoomReached:x}=at(EV,wV),{zoomIn:b,zoomOut:y,fitView:N}=H0();if(g.useEffect(()=>{p(!0)},[]),!h)return null;const j=()=>{b(),a==null||a()},S=()=>{y(),i==null||i()},k=()=>{N(r),l==null||l()},E=()=>{m.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c==null||c(!v)};return L.createElement(FC,{className:Jt(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&L.createElement(L.Fragment,null,L.createElement(Ml,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},L.createElement(NV,null)),L.createElement(Ml,{onClick:S,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},L.createElement(jV,null))),n&&L.createElement(Ml,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},L.createElement(SV,null)),s&&L.createElement(Ml,{className:"react-flow__controls-interactive",onClick:E,title:"toggle interactivity","aria-label":"toggle interactivity"},v?L.createElement(CV,null):L.createElement(kV,null)),d)};LE.displayName="Controls";var $E=g.memo(LE);function _V(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,r]of e)if(!Object.is(r,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var ns;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ns||(ns={}));function AV({color:e,dimensions:t,lineWidth:n}){return L.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function TV({color:e,radius:t}){return L.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const MV={[ns.Dots]:"#91919a",[ns.Lines]:"#eee",[ns.Cross]:"#e2e2e2"},RV={[ns.Dots]:1,[ns.Lines]:1,[ns.Cross]:6},DV=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function PE({id:e,variant:t=ns.Dots,gap:n=20,size:s,lineWidth:r=1,offset:a=2,color:i,style:l,className:c}){const u=g.useRef(null),{transform:d,patternId:f}=at(DV,_V),m=i||MV[t],h=s||RV[t],p=t===ns.Dots,v=t===ns.Cross,w=Array.isArray(n)?n:[n,n],x=[w[0]*d[2]||1,w[1]*d[2]||1],b=h*d[2],y=v?[b,b]:x,N=p?[b/a,b/a]:[y[0]/a,y[1]/a];return L.createElement("svg",{className:Jt(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},L.createElement("pattern",{id:f+e,x:d[0]%x[0],y:d[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},p?L.createElement(TV,{color:m,radius:b/a}):L.createElement(AV,{dimensions:y,color:m,lineWidth:r})),L.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}PE.displayName="Background";var OE=g.memo(PE);function zV(e){if(!e||typeof e!="object")throw new Error("Invalid perk tree data");const t=e;if(!t.treeId||!t.treeName||!t.perks||!Array.isArray(t.perks))throw new Error("Invalid perk tree structure");return t}function BE(e){try{return{success:!0,data:zV(e)}}catch(t){return{success:!1,error:t}}}const LV={nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120,fallbackSpacing:100};async function IE(e){try{const t=os(`data/perk-positions/${e}-positions.json`);console.log("Attempting to load positions from:",t);const n=await fetch(t);if(console.log("Response status:",n.status,n.statusText),!n.ok)return console.warn(`No saved positions found for tree ${e} at ${t}`),null;const s=await n.json();return console.log("Successfully loaded positions for tree:",e),s}catch(t){return console.warn(`Failed to load saved positions for tree ${e}:`,t),null}}function $V(e,t){const n=new Map;e.forEach(i=>{const l=t==null?void 0:t.positions.find(c=>c.perkId===i.edid);n.set(i.edid,{perk:i,depth:-1,children:i.connections.children,parents:i.connections.parents,savedPosition:l})});const r=e.filter(i=>i.connections.parents.length===0).map(i=>({id:i.edid,depth:0})),a=new Set;for(;r.length>0;){const{id:i,depth:l}=r.shift();if(a.has(i))continue;a.add(i);const c=n.get(i);c&&((c.depth===-1||l<c.depth)&&(c.depth=l),c.children.forEach(u=>{n.has(u)&&!a.has(u)&&r.push({id:u,depth:l+1})}))}return n}function PV(e,t){const n=new Map,s=new Map;e.forEach(a=>{const i=a.depth;s.has(i)||s.set(i,[]),s.get(i).push(a)});const r=Math.max(...s.keys());return s.forEach((a,i)=>{const l=t.padding+(r-i)*t.verticalSpacing,c=(a.length-1)*t.horizontalSpacing,u=t.padding+(t.gridScaleX-c)/2;a.forEach((d,f)=>{const m=u+f*t.horizontalSpacing;n.set(d.perk.edid,{x:m,y:l})})}),n}function OV(e,t,n){t.positions.forEach(s=>{const r=e.get(s.perkId);r&&(r.savedPosition=s,r.calculatedPosition={x:s.x,y:s.y})})}function BV(e,t,n={}){const s={...LV,...n},r=$V(e.perks,t);t&&OV(r,t);const a=PV(r,s),i=new Map;return r.forEach((l,c)=>{if(l.calculatedPosition)i.set(c,l.calculatedPosition);else{const u=a.get(c);u?i.set(c,u):i.set(c,{x:s.padding,y:s.padding})}}),i}function IV(e,t){const n=Array.from(t.entries()).map(([s,r])=>({perkId:s,x:r.x,y:r.y,gridX:r.gridX,gridY:r.gridY,horizontal:r.horizontal,vertical:r.vertical}));return{treeId:e.treeId,treeName:e.treeName,positions:n,version:"1.0.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}function ow(e,t){const n=new Map;return t.positions.forEach(s=>{n.set(s.perkId,{x:s.x,y:s.y,gridX:s.gridX,gridY:s.gridY,horizontal:s.horizontal,vertical:s.vertical})}),n}function HV(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`${e.treeId}-positions.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}const UV=({data:e,selected:t,onTogglePerk:n,onRankChange:s})=>{var u,d,f,m,h;const r=e.totalRanks,a=r>1?(e.currentRank||0)>0:e.selected||t,i=p=>{if(p.preventDefault(),p.stopPropagation(),(e.totalRanks||1)>1){const w=e.currentRank||0,x=e.totalRanks||1,b=w>=x?0:w+1;s&&s(e.edid,b)}else n&&n(e.edid)},l=()=>{const p={padding:"8px 12px",borderRadius:"6px",border:"2px solid",fontSize:"12px",fontWeight:"500",minWidth:"140px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"};return e.hasNoPosition?{...p,borderColor:"#ef4444",borderStyle:"dashed",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 1px rgba(239, 68, 68, 0.3)"}:a?{...p,borderColor:"#d4af37",backgroundColor:"rgba(212, 175, 55, 0.15)",color:"hsl(var(--foreground))",boxShadow:"0 0 0 2px rgba(212, 175, 55, 0.4), 0 2px 4px rgba(212, 175, 55, 0.2)",transform:"scale(1.02)"}:e.isRoot?{...p,borderColor:"hsl(var(--border))",backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"}:{...p,borderColor:"hsl(var(--border))"}},c=((d=(u=e.ranks[0])==null?void 0:u.description)==null?void 0:d.base)||"";return o.jsxs(Wk,{children:[o.jsx(Kk,{asChild:!0,children:o.jsxs("div",{style:l(),onClick:i,onMouseDown:p=>p.stopPropagation(),children:[!e.isRoot&&o.jsx(Ti,{type:"target",position:le.Bottom}),o.jsx("div",{className:"font-medium",children:e.name}),r>1&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.currentRank||0,"/",r," ranks"]}),e.hasChildren&&o.jsx(Ti,{type:"source",position:le.Top})]})}),o.jsx(j0,{className:"w-80 bg-background border border-border shadow-lg",style:{zIndex:Dt.TOOLTIP},children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-semibold text-sm",children:e.name}),o.jsx("div",{className:"text-sm text-muted-foreground",children:c}),typeof((h=(m=(f=e.ranks[0])==null?void 0:f.prerequisites)==null?void 0:m.skillLevel)==null?void 0:h.level)=="number"&&e.ranks[0].prerequisites.skillLevel.level>0&&o.jsxs("div",{className:"text-xs text-blue-700 font-medium pt-1",children:["Min. Level: ",e.ranks[0].prerequisites.skillLevel.level]}),r>1&&o.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[o.jsx("strong",{children:"Ranks:"})," ",e.currentRank||0,"/",r,o.jsx("br",{}),o.jsx("em",{children:"Click to cycle through ranks"})]})]})})]})},HE=g.memo(UV);function FV({categories:e,selectedCategory:t,onCategorySelect:n,className:s}){return o.jsx("div",{className:U("mb-6",s),children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(W,{variant:t===null?"default":"outline",size:"sm",onClick:()=>n(null),children:"All Categories"}),e.map(r=>o.jsx(W,{variant:t===r?"default":"outline",size:"sm",onClick:()=>n(r),children:r},r))]})})}function yh({skills:e,onSelect:t,placeholder:n="Search skills...",className:s="",disabled:r=!1}){const[a,i]=g.useState(""),l=g.useMemo(()=>{if(!a.trim())return e;const f=a.toLowerCase();return e.filter(m=>m.name.toLowerCase().includes(f)||m.description.toLowerCase().includes(f)||m.category.toLowerCase().includes(f)||m.keyAbilities.some(h=>h.toLowerCase().includes(f))||m.metaTags.some(h=>h.toLowerCase().includes(f)))},[e,a]),c=g.useMemo(()=>l.map(f=>{var m;return{id:f.edid,label:f.name,description:f.description,category:f.category,badge:f.category&&o.jsx(K,{variant:"outline",className:"text-xs",children:f.category}),metadata:{originalSkill:f,keyAbilitiesCount:((m=f.keyAbilities)==null?void 0:m.length)||0,scaling:f.scaling}}}),[l]),u=f=>{const m=e.find(h=>h.edid===f.id);m&&t(m)},d=(f,m)=>{var h,p;return o.jsx("div",{className:"flex items-start gap-3",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:f.label}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.badge&&o.jsx("div",{className:"flex-shrink-0",children:f.badge}),((h=f.metadata)==null?void 0:h.keyAbilitiesCount)&&f.metadata.keyAbilitiesCount>0&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.metadata.keyAbilitiesCount," ability",f.metadata.keyAbilitiesCount!==1?"s":""]})]}),f.description&&o.jsx(Ie,{text:f.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"}),((p=f.metadata)==null?void 0:p.scaling)&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[o.jsx("strong",{children:"Scaling:"})," ",f.metadata.scaling]})]})})};return o.jsx(Uc,{options:c,onSelect:u,placeholder:n,className:s,disabled:r,renderOption:d,emptyMessage:"No skills found",searchQuery:a,onSearchQueryChange:i})}function VV(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const UE=L.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Yc=()=>{const e=L.useContext(UE);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};VV(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function qV(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function GV(){return V0(/^Mac/)}function ZV(){return V0(/^iPhone/)}function iw(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function YV(){return V0(/^iPad/)||GV()&&navigator.maxTouchPoints>1}function FE(){return ZV()||YV()}function V0(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const XV=24,WV=typeof window<"u"?g.useLayoutEffect:g.useEffect;function lw(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const bh=typeof document<"u"&&window.visualViewport;function cw(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function VE(e){for(cw(e)&&(e=e.parentElement);e&&!cw(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const KV=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Lu=0,wh;function QV(e={}){let{isDisabled:t}=e;WV(()=>{if(!t)return Lu++,Lu===1&&FE()&&(wh=JV()),()=>{Lu--,Lu===0&&(wh==null||wh())}},[t])}function JV(){let e,t=0,n=f=>{e=VE(f.target),!(e===document.documentElement&&e===document.body)&&(t=f.changedTouches[0].pageY)},s=f=>{if(!e||e===document.documentElement||e===document.body){f.preventDefault();return}let m=f.changedTouches[0].pageY,h=e.scrollTop,p=e.scrollHeight-e.clientHeight;p!==0&&((h<=0&&m>t||h>=p&&m<t)&&f.preventDefault(),t=m)},r=f=>{let m=f.target;sp(m)&&m!==document.activeElement&&(f.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},a=f=>{let m=f.target;sp(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",bh&&(bh.height<window.innerHeight?requestAnimationFrame(()=>{uw(m)}):bh.addEventListener("resize",()=>uw(m),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=lw(eq(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=lw(xl(document,"touchstart",n,{passive:!1,capture:!0}),xl(document,"touchmove",s,{passive:!1,capture:!0}),xl(document,"touchend",r,{passive:!1,capture:!0}),xl(document,"focus",a,!0),xl(window,"scroll",i));return()=>{u(),d(),window.scrollTo(l,c)}}function eq(e,t,n){let s=e.style[t];return e.style[t]=n,()=>{e.style[t]=s}}function xl(e,t,n,s){return e.addEventListener(t,n,s),()=>{e.removeEventListener(t,n,s)}}function uw(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=VE(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let s=n.getBoundingClientRect().top,r=e.getBoundingClientRect().top,a=e.getBoundingClientRect().bottom;const i=n.getBoundingClientRect().bottom+XV;a>i&&(n.scrollTop+=r-s)}e=n.parentElement}}function sp(e){return e instanceof HTMLInputElement&&!KV.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function tq(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function nq(...e){return t=>e.forEach(n=>tq(n,t))}function qE(...e){return g.useCallback(nq(...e),e)}const GE=new WeakMap;function St(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let s={};Object.entries(t).forEach(([r,a])=>{if(r.startsWith("--")){e.style.setProperty(r,a);return}s[r]=e.style[r],e.style[r]=a}),!n&&GE.set(e,s)}function sq(e,t){if(!e||!(e instanceof HTMLElement))return;let n=GE.get(e);n&&(e.style[t]=n[t])}const vt=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function $u(e,t){if(!e)return null;const n=window.getComputedStyle(e),s=n.transform||n.webkitTransform||n.mozTransform;let r=s.match(/^matrix3d\((.+)\)$/);return r?parseFloat(r[1].split(", ")[vt(t)?13:12]):(r=s.match(/^matrix\((.+)\)$/),r?parseFloat(r[1].split(", ")[vt(t)?5:4]):null)}function rq(e){return 8*(Math.log(e+1)-2)}function Nh(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function aq(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const nt={DURATION:.5,EASE:[.32,.72,0,1]},ZE=.4,oq=.25,iq=100,YE=8,ja=16,rp=26,jh="vaul-dragging";function XE(e){const t=L.useRef(e);return L.useEffect(()=>{t.current=e}),L.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function lq({defaultProp:e,onChange:t}){const n=L.useState(e),[s]=n,r=L.useRef(s),a=XE(t);return L.useEffect(()=>{r.current!==s&&(a(s),r.current=s)},[s,r,a]),n}function WE({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,r]=lq({defaultProp:t,onChange:n}),a=e!==void 0,i=a?e:s,l=XE(n),c=L.useCallback(u=>{if(a){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else r(u)},[a,e,r,l]);return[i,c]}function cq({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:s,overlayRef:r,fadeFromIndex:a,onSnapPointChange:i,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[d,f]=WE({prop:e,defaultProp:n==null?void 0:n[0],onChange:t}),[m,h]=L.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);L.useEffect(()=>{function k(){h({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const p=L.useMemo(()=>d===(n==null?void 0:n[n.length-1])||null,[n,d]),v=L.useMemo(()=>{var k;return(k=n==null?void 0:n.findIndex(E=>E===d))!=null?k:null},[n,d]),w=n&&n.length>0&&(a||a===0)&&!Number.isNaN(a)&&n[a]===d||!n,x=L.useMemo(()=>{const k=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var E;return(E=n==null?void 0:n.map(C=>{const _=typeof C=="string";let P=0;if(_&&(P=parseInt(C,10)),vt(l)){const $=_?P:m?C*k.height:0;return m?l==="bottom"?k.height-$:-k.height+$:$}const O=_?P:m?C*k.width:0;return m?l==="right"?k.width-O:-k.width+O:O}))!=null?E:[]},[n,m,c]),b=L.useMemo(()=>v!==null?x==null?void 0:x[v]:null,[x,v]),y=L.useCallback(k=>{var E;const C=(E=x==null?void 0:x.findIndex(_=>_===k))!=null?E:null;i(C),St(s.current,{transition:`transform ${nt.DURATION}s cubic-bezier(${nt.EASE.join(",")})`,transform:vt(l)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`}),x&&C!==x.length-1&&a!==void 0&&C!==a&&C<a?St(r.current,{transition:`opacity ${nt.DURATION}s cubic-bezier(${nt.EASE.join(",")})`,opacity:"0"}):St(r.current,{transition:`opacity ${nt.DURATION}s cubic-bezier(${nt.EASE.join(",")})`,opacity:"1"}),f(n==null?void 0:n[Math.max(C,0)])},[s.current,n,x,a,r,f]);L.useEffect(()=>{if(d||e){var k;const E=(k=n==null?void 0:n.findIndex(C=>C===e||C===d))!=null?k:-1;x&&E!==-1&&typeof x[E]=="number"&&y(x[E])}},[d,e,n,x,y]);function N({draggedDistance:k,closeDrawer:E,velocity:C,dismissible:_}){if(a===void 0)return;const P=l==="bottom"||l==="right"?(b??0)-k:(b??0)+k,O=v===a-1,$=v===0,T=k>0;if(O&&St(r.current,{transition:`opacity ${nt.DURATION}s cubic-bezier(${nt.EASE.join(",")})`}),!u&&C>2&&!T){_?E():y(x[0]);return}if(!u&&C>2&&T&&x&&n){y(x[n.length-1]);return}const z=x==null?void 0:x.reduce((D,M)=>typeof D!="number"||typeof M!="number"?D:Math.abs(M-P)<Math.abs(D-P)?M:D),A=vt(l)?window.innerHeight:window.innerWidth;if(C>ZE&&Math.abs(k)<A*.4){const D=T?1:-1;if(D>0&&p&&n){y(x[n.length-1]);return}if($&&D<0&&_&&E(),v===null)return;y(x[v+D]);return}y(z)}function j({draggedDistance:k}){if(b===null)return;const E=l==="bottom"||l==="right"?b-k:b+k;(l==="bottom"||l==="right")&&E<x[x.length-1]||(l==="top"||l==="left")&&E>x[x.length-1]||St(s.current,{transform:vt(l)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})}function S(k,E){if(!n||typeof v!="number"||!x||a===void 0)return null;const C=v===a-1;if(v>=a&&E)return 0;if(C&&!E)return 1;if(!w&&!C)return null;const P=C?v+1:v-1,O=C?x[P]-x[P-1]:x[P+1]-x[P],$=k/Math.abs(O);return C?1-$:$}return{isLastSnapPoint:p,activeSnapPoint:d,shouldFade:w,getPercentageDragged:S,setActiveSnapPoint:f,activeSnapPointIndex:v,onRelease:N,onDrag:j,snapPointsOffset:x}}const uq=()=>()=>{};function dq(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:s,noBodyStyles:r}=Yc(),a=L.useRef(null),i=g.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-rp)/window.innerWidth}L.useEffect(()=>{if(t&&n){a.current&&clearTimeout(a.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;aq(s&&!r?Nh(document.body,{background:"black"}):uq,Nh(c,{transformOrigin:vt(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${nt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${nt.EASE.join(",")})`}));const u=Nh(c,{borderRadius:`${YE}px`,overflow:"hidden",...vt(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),a.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},nt.DURATION*1e3)}}},[t,n,i])}let vl=null;function fq({isOpen:e,modal:t,nested:n,hasBeenOpened:s,preventScrollRestoration:r,noBodyStyles:a}){const[i,l]=L.useState(()=>typeof window<"u"?window.location.href:""),c=L.useRef(0),u=L.useCallback(()=>{if(iw()&&vl===null&&e&&!a){vl={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const h=m-window.innerHeight;h&&c.current>=m&&(document.body.style.top=`${-(c.current+h)}px`)}),300)}},[e]),d=L.useCallback(()=>{if(iw()&&vl!==null&&!a){const f=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,vl),window.requestAnimationFrame(()=>{if(r&&i!==window.location.href){l(window.location.href);return}window.scrollTo(m,f)}),vl=null}},[i]);return L.useEffect(()=>{function f(){c.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),L.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||d()}},[t,d]),L.useEffect(()=>{n||!s||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{d()},500)):d())},[e,s,i,t,n,u,d]),{restorePositionSetting:d}}function mq({open:e,onOpenChange:t,children:n,onDrag:s,onRelease:r,snapPoints:a,shouldScaleBackground:i=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=oq,scrollLockTimeout:u=iq,dismissible:d=!0,handleOnly:f=!1,fadeFromIndex:m=a&&a.length-1,activeSnapPoint:h,setActiveSnapPoint:p,fixed:v,modal:w=!0,onClose:x,nested:b,noBodyStyles:y=!1,direction:N="bottom",defaultOpen:j=!1,disablePreventScroll:S=!0,snapToSequentialPoint:k=!1,preventScrollRestoration:E=!1,repositionInputs:C=!0,onAnimationEnd:_,container:P,autoFocus:O=!1}){var $,T;const[z=!1,A]=WE({defaultProp:j,prop:e,onChange:de=>{t==null||t(de),!de&&!b&&qs(),setTimeout(()=>{_==null||_(de)},nt.DURATION*1e3),de&&!w&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),de||(document.body.style.pointerEvents="auto")}}),[D,M]=L.useState(!1),[R,B]=L.useState(!1),[H,I]=L.useState(!1),V=L.useRef(null),G=L.useRef(null),J=L.useRef(null),oe=L.useRef(null),ee=L.useRef(null),pe=L.useRef(!1),fe=L.useRef(null),we=L.useRef(0),F=L.useRef(!1),Y=L.useRef(!j),Q=L.useRef(0),X=L.useRef(null),se=L.useRef((($=X.current)==null?void 0:$.getBoundingClientRect().height)||0),ve=L.useRef(((T=X.current)==null?void 0:T.getBoundingClientRect().width)||0),ue=L.useRef(0),ne=L.useCallback(de=>{a&&de===Tn.length-1&&(G.current=new Date)},[]),{activeSnapPoint:Re,activeSnapPointIndex:pt,setActiveSnapPoint:ds,onRelease:_r,snapPointsOffset:Tn,onDrag:Wn,shouldFade:Fs,getPercentageDragged:Vs}=cq({snapPoints:a,activeSnapPointProp:h,setActiveSnapPointProp:p,drawerRef:X,fadeFromIndex:m,overlayRef:V,onSnapPointChange:ne,direction:N,container:P,snapToSequentialPoint:k});QV({isDisabled:!z||R||!w||H||!D||!C||!S});const{restorePositionSetting:qs}=fq({isOpen:z,modal:w,nested:b??!1,hasBeenOpened:D,preventScrollRestoration:E,noBodyStyles:y});function Kn(){return(window.innerWidth-rp)/window.innerWidth}function Ar(de){var _e,Le;!d&&!a||X.current&&!X.current.contains(de.target)||(se.current=((_e=X.current)==null?void 0:_e.getBoundingClientRect().height)||0,ve.current=((Le=X.current)==null?void 0:Le.getBoundingClientRect().width)||0,B(!0),J.current=new Date,FE()&&window.addEventListener("touchend",()=>pe.current=!1,{once:!0}),de.target.setPointerCapture(de.pointerId),we.current=vt(N)?de.pageY:de.pageX)}function Tr(de,_e){var Le;let Ae=de;const Pe=(Le=window.getSelection())==null?void 0:Le.toString(),It=X.current?$u(X.current,N):null,$t=new Date;if(Ae.tagName==="SELECT"||Ae.hasAttribute("data-vaul-no-drag")||Ae.closest("[data-vaul-no-drag]"))return!1;if(N==="right"||N==="left")return!0;if(G.current&&$t.getTime()-G.current.getTime()<500)return!1;if(It!==null&&(N==="bottom"?It>0:It<0))return!0;if(Pe&&Pe.length>0)return!1;if(ee.current&&$t.getTime()-ee.current.getTime()<u&&It===0||_e)return ee.current=$t,!1;for(;Ae;){if(Ae.scrollHeight>Ae.clientHeight){if(Ae.scrollTop!==0)return ee.current=new Date,!1;if(Ae.getAttribute("role")==="dialog")return!0}Ae=Ae.parentNode}return!0}function _t(de){if(X.current&&R){const _e=N==="bottom"||N==="right"?1:-1,Le=(we.current-(vt(N)?de.pageY:de.pageX))*_e,Ae=Le>0,Pe=a&&!d&&!Ae;if(Pe&&pt===0)return;const It=Math.abs(Le),$t=document.querySelector("[data-vaul-drawer-wrapper]"),ms=N==="bottom"||N==="top"?se.current:ve.current;let hn=It/ms;const Ys=Vs(It,Ae);if(Ys!==null&&(hn=Ys),Pe&&hn>=1||!pe.current&&!Tr(de.target,Ae))return;if(X.current.classList.add(jh),pe.current=!0,St(X.current,{transition:"none"}),St(V.current,{transition:"none"}),a&&Wn({draggedDistance:Le}),Ae&&!a){const Rn=rq(Le),ko=Math.min(Rn*-1,0)*_e;St(X.current,{transform:vt(N)?`translate3d(0, ${ko}px, 0)`:`translate3d(${ko}px, 0, 0)`});return}const hs=1-hn;if((Fs||m&&pt===m-1)&&(s==null||s(de,hn),St(V.current,{opacity:`${hs}`,transition:"none"},!0)),$t&&V.current&&i){const Rn=Math.min(Kn()+hn*(1-Kn()),1),ko=8-hn*8,fu=Math.max(0,14-hn*14);St($t,{borderRadius:`${ko}px`,transform:vt(N)?`scale(${Rn}) translate3d(0, ${fu}px, 0)`:`scale(${Rn}) translate3d(${fu}px, 0, 0)`,transition:"none"},!0)}if(!a){const Rn=It*_e;St(X.current,{transform:vt(N)?`translate3d(0, ${Rn}px, 0)`:`translate3d(${Rn}px, 0, 0)`})}}}L.useEffect(()=>{window.requestAnimationFrame(()=>{Y.current=!0})},[]),L.useEffect(()=>{var de;function _e(){if(!X.current||!C)return;const Le=document.activeElement;if(sp(Le)||F.current){var Ae;const Pe=((Ae=window.visualViewport)==null?void 0:Ae.height)||0,It=window.innerHeight;let $t=It-Pe;const ms=X.current.getBoundingClientRect().height||0,hn=ms>It*.8;ue.current||(ue.current=ms);const Ys=X.current.getBoundingClientRect().top;if(Math.abs(Q.current-$t)>60&&(F.current=!F.current),a&&a.length>0&&Tn&&pt){const hs=Tn[pt]||0;$t+=hs}if(Q.current=$t,ms>Pe||F.current){const hs=X.current.getBoundingClientRect().height;let Rn=hs;hs>Pe&&(Rn=Pe-(hn?Ys:rp)),v?X.current.style.height=`${hs-Math.max($t,0)}px`:X.current.style.height=`${Math.max(Rn,Pe-Ys)}px`}else qV()||(X.current.style.height=`${ue.current}px`);a&&a.length>0&&!F.current?X.current.style.bottom="0px":X.current.style.bottom=`${Math.max($t,0)}px`}}return(de=window.visualViewport)==null||de.addEventListener("resize",_e),()=>{var Le;return(Le=window.visualViewport)==null?void 0:Le.removeEventListener("resize",_e)}},[pt,a,Tn]);function Lt(de){Gs(),x==null||x(),de||A(!1),setTimeout(()=>{a&&ds(a[0])},nt.DURATION*1e3)}function fs(){if(!X.current)return;const de=document.querySelector("[data-vaul-drawer-wrapper]"),_e=$u(X.current,N);St(X.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${nt.DURATION}s cubic-bezier(${nt.EASE.join(",")})`}),St(V.current,{transition:`opacity ${nt.DURATION}s cubic-bezier(${nt.EASE.join(",")})`,opacity:"1"}),i&&_e&&_e>0&&z&&St(de,{borderRadius:`${YE}px`,overflow:"hidden",...vt(N)?{transform:`scale(${Kn()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Kn()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${nt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${nt.EASE.join(",")})`},!0)}function Gs(){!R||!X.current||(X.current.classList.remove(jh),pe.current=!1,B(!1),oe.current=new Date)}function Zs(de){if(!R||!X.current)return;X.current.classList.remove(jh),pe.current=!1,B(!1),oe.current=new Date;const _e=$u(X.current,N);if(!de||!Tr(de.target,!1)||!_e||Number.isNaN(_e)||J.current===null)return;const Le=oe.current.getTime()-J.current.getTime(),Ae=we.current-(vt(N)?de.pageY:de.pageX),Pe=Math.abs(Ae)/Le;if(Pe>.05&&(I(!0),setTimeout(()=>{I(!1)},200)),a){_r({draggedDistance:Ae*(N==="bottom"||N==="right"?1:-1),closeDrawer:Lt,velocity:Pe,dismissible:d}),r==null||r(de,!0);return}if(N==="bottom"||N==="right"?Ae>0:Ae<0){fs(),r==null||r(de,!0);return}if(Pe>ZE){Lt(),r==null||r(de,!1);return}var It;const $t=Math.min((It=X.current.getBoundingClientRect().height)!=null?It:0,window.innerHeight);var ms;const hn=Math.min((ms=X.current.getBoundingClientRect().width)!=null?ms:0,window.innerWidth),Ys=N==="left"||N==="right";if(Math.abs(_e)>=(Ys?hn:$t)*c){Lt(),r==null||r(de,!1);return}r==null||r(de,!0),fs()}L.useEffect(()=>(z&&(St(document.documentElement,{scrollBehavior:"auto"}),G.current=new Date),()=>{sq(document.documentElement,"scrollBehavior")}),[z]);function Qn(de){const _e=de?(window.innerWidth-ja)/window.innerWidth:1,Le=de?-ja:0;fe.current&&window.clearTimeout(fe.current),St(X.current,{transition:`transform ${nt.DURATION}s cubic-bezier(${nt.EASE.join(",")})`,transform:vt(N)?`scale(${_e}) translate3d(0, ${Le}px, 0)`:`scale(${_e}) translate3d(${Le}px, 0, 0)`}),!de&&X.current&&(fe.current=setTimeout(()=>{const Ae=$u(X.current,N);St(X.current,{transition:"none",transform:vt(N)?`translate3d(0, ${Ae}px, 0)`:`translate3d(${Ae}px, 0, 0)`})},500))}function Mn(de,_e){if(_e<0)return;const Le=(window.innerWidth-ja)/window.innerWidth,Ae=Le+_e*(1-Le),Pe=-ja+_e*ja;St(X.current,{transform:vt(N)?`scale(${Ae}) translate3d(0, ${Pe}px, 0)`:`scale(${Ae}) translate3d(${Pe}px, 0, 0)`,transition:"none"})}function ba(de,_e){const Le=vt(N)?window.innerHeight:window.innerWidth,Ae=_e?(Le-ja)/Le:1,Pe=_e?-ja:0;_e&&St(X.current,{transition:`transform ${nt.DURATION}s cubic-bezier(${nt.EASE.join(",")})`,transform:vt(N)?`scale(${Ae}) translate3d(0, ${Pe}px, 0)`:`scale(${Ae}) translate3d(${Pe}px, 0, 0)`})}return L.useEffect(()=>{w||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[w]),L.createElement(qj,{defaultOpen:j,onOpenChange:de=>{!d&&!de||(de?M(!0):Lt(!0),A(de))},open:z},L.createElement(UE.Provider,{value:{activeSnapPoint:Re,snapPoints:a,setActiveSnapPoint:ds,drawerRef:X,overlayRef:V,onOpenChange:t,onPress:Ar,onRelease:Zs,onDrag:_t,dismissible:d,shouldAnimate:Y,handleOnly:f,isOpen:z,isDragging:R,shouldFade:Fs,closeDrawer:Lt,onNestedDrag:Mn,onNestedOpenChange:Qn,onNestedRelease:ba,keyboardIsOpen:F,modal:w,snapPointsOffset:Tn,activeSnapPointIndex:pt,direction:N,shouldScaleBackground:i,setBackgroundColorOnScale:l,noBodyStyles:y,container:P,autoFocus:O}},n))}const KE=L.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:s,onRelease:r,shouldFade:a,isOpen:i,modal:l,shouldAnimate:c}=Yc(),u=qE(t,n),d=s&&s.length>0;if(!l)return null;const f=L.useCallback(m=>r(m),[r]);return L.createElement(Ex,{onMouseUp:f,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":i&&d?"true":"false","data-vaul-snap-points-overlay":i&&a?"true":"false","data-vaul-animate":c!=null&&c.current?"true":"false",...e})});KE.displayName="Drawer.Overlay";const q0=L.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...s},r){const{drawerRef:a,onPress:i,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:d,activeSnapPointIndex:f,modal:m,isOpen:h,direction:p,snapPoints:v,container:w,handleOnly:x,shouldAnimate:b,autoFocus:y}=Yc(),[N,j]=L.useState(!1),S=qE(r,a),k=L.useRef(null),E=L.useRef(null),C=L.useRef(!1),_=v&&v.length>0;dq();const P=($,T,z=0)=>{if(C.current)return!0;const A=Math.abs($.y),D=Math.abs($.x),M=D>A,R=["bottom","right"].includes(T)?1:-1;if(T==="left"||T==="right"){if(!($.x*R<0)&&D>=0&&D<=z)return M}else if(!($.y*R<0)&&A>=0&&A<=z)return!M;return C.current=!0,!0};L.useEffect(()=>{_&&window.requestAnimationFrame(()=>{j(!0)})},[]);function O($){k.current=null,C.current=!1,l($)}return L.createElement(_x,{"data-vaul-drawer-direction":p,"data-vaul-drawer":"","data-vaul-delayed-snap-points":N?"true":"false","data-vaul-snap-points":h&&_?"true":"false","data-vaul-custom-container":w?"true":"false","data-vaul-animate":b!=null&&b.current?"true":"false",...s,ref:S,style:d&&d.length>0?{"--snap-point-height":`${d[f??0]}px`,...t}:t,onPointerDown:$=>{x||(s.onPointerDown==null||s.onPointerDown.call(s,$),k.current={x:$.pageX,y:$.pageY},i($))},onOpenAutoFocus:$=>{n==null||n($),y||$.preventDefault()},onPointerDownOutside:$=>{if(e==null||e($),!m||$.defaultPrevented){$.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:$=>{if(!m){$.preventDefault();return}},onPointerMove:$=>{if(E.current=$,x||(s.onPointerMove==null||s.onPointerMove.call(s,$),!k.current))return;const T=$.pageY-k.current.y,z=$.pageX-k.current.x,A=$.pointerType==="touch"?10:2;P({x:z,y:T},p,A)?c($):(Math.abs(z)>A||Math.abs(T)>A)&&(k.current=null)},onPointerUp:$=>{s.onPointerUp==null||s.onPointerUp.call(s,$),k.current=null,C.current=!1,l($)},onPointerOut:$=>{s.onPointerOut==null||s.onPointerOut.call(s,$),O(E.current)},onContextMenu:$=>{s.onContextMenu==null||s.onContextMenu.call(s,$),E.current&&O(E.current)}})});q0.displayName="Drawer.Content";const hq=250,gq=120,pq=L.forwardRef(function({preventCycle:e=!1,children:t,...n},s){const{closeDrawer:r,isDragging:a,snapPoints:i,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:d,isOpen:f,onPress:m,onDrag:h}=Yc(),p=L.useRef(null),v=L.useRef(!1);function w(){if(v.current){y();return}window.setTimeout(()=>{x()},gq)}function x(){if(a||e||v.current){y();return}if(y(),!i||i.length===0){u||r();return}if(l===i[i.length-1]&&u){r();return}const j=i.findIndex(k=>k===l);if(j===-1)return;const S=i[j+1];c(S)}function b(){p.current=window.setTimeout(()=>{v.current=!0},hq)}function y(){p.current&&window.clearTimeout(p.current),v.current=!1}return L.createElement("div",{onClick:w,onPointerCancel:y,onPointerDown:N=>{d&&m(N),b()},onPointerMove:N=>{d&&h(N)},ref:s,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},L.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});pq.displayName="Drawer.Handle";function xq(e){const t=Yc(),{container:n=t.container,...s}=e;return L.createElement(Gj,{container:n,...s})}const kr={Root:mq,Content:q0,Overlay:KE,Portal:xq,Title:Ax,Description:Tx},QE=({shouldScaleBackground:e=!0,...t})=>o.jsx(kr.Root,{shouldScaleBackground:e,...t});QE.displayName="Drawer";const JE=kr.Portal,G0=g.forwardRef(({className:e,...t},n)=>o.jsx(kr.Overlay,{ref:n,className:U("fixed inset-0 bg-background/80 backdrop-blur-sm",e),style:{zIndex:Dt.MODAL},...t}));G0.displayName=kr.Overlay.displayName;const vq=g.forwardRef(({className:e,children:t,fullHeight:n=!1,...s},r)=>o.jsxs(JE,{children:[o.jsx(G0,{}),o.jsxs(kr.Content,{ref:r,className:U(n?"fixed inset-x-0 bottom-0 z-50 flex h-[100dvh] max-h-[100dvh] w-full bg-background":"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),style:{zIndex:Dt.MODAL+1,backgroundColor:"hsl(var(--background))"},...s,children:[!n&&o.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));vq.displayName="DrawerContent";const e_=({className:e,...t})=>o.jsx("div",{className:U("grid gap-1.5 p-4 text-center sm:text-left",e),...t});e_.displayName="DrawerHeader";const t_=({className:e,...t})=>o.jsx("div",{className:U("mt-auto flex flex-col gap-2 p-4",e),...t});t_.displayName="DrawerFooter";const n_=g.forwardRef(({className:e,...t},n)=>o.jsx(kr.Title,{ref:n,className:U("text-lg font-semibold leading-none tracking-tight",e),...t}));n_.displayName=kr.Title.displayName;const s_=g.forwardRef(({className:e,...t},n)=>o.jsx(kr.Description,{ref:n,className:U("text-sm text-muted-foreground",e),...t}));s_.displayName=kr.Description.displayName;var r_="Toggle",a_=g.forwardRef((e,t)=>{const{pressed:n,defaultPressed:s,onPressedChange:r,...a}=e,[i,l]=Yn({prop:n,onChange:r,defaultProp:s??!1,caller:r_});return o.jsx(xe.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:te(e.onClick,()=>{e.disabled||l(!i)})})});a_.displayName=r_;var xa="ToggleGroup",[o_,yee]=un(xa,[Ki]),i_=Ki(),Z0=L.forwardRef((e,t)=>{const{type:n,...s}=e;if(n==="single"){const r=s;return o.jsx(yq,{...r,ref:t})}if(n==="multiple"){const r=s;return o.jsx(bq,{...r,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${xa}\``)});Z0.displayName=xa;var[l_,c_]=o_(xa),yq=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...a}=e,[i,l]=Yn({prop:n,defaultProp:s??"",onChange:r,caller:xa});return o.jsx(l_,{scope:e.__scopeToggleGroup,type:"single",value:L.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:L.useCallback(()=>l(""),[l]),children:o.jsx(u_,{...a,ref:t})})}),bq=L.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...a}=e,[i,l]=Yn({prop:n,defaultProp:s??[],onChange:r,caller:xa}),c=L.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=L.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return o.jsx(l_,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:u,children:o.jsx(u_,{...a,ref:t})})});Z0.displayName=xa;var[wq,Nq]=o_(xa),u_=L.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:s=!1,rovingFocus:r=!0,orientation:a,dir:i,loop:l=!0,...c}=e,u=i_(n),d=Wi(i),f={role:"group",dir:d,...c};return o.jsx(wq,{scope:n,rovingFocus:r,disabled:s,children:r?o.jsx($x,{asChild:!0,...u,orientation:a,dir:d,loop:l,children:o.jsx(xe.div,{...f,ref:t})}):o.jsx(xe.div,{...f,ref:t})})}),Jd="ToggleGroupItem",d_=L.forwardRef((e,t)=>{const n=c_(Jd,e.__scopeToggleGroup),s=Nq(Jd,e.__scopeToggleGroup),r=i_(e.__scopeToggleGroup),a=n.value.includes(e.value),i=s.disabled||e.disabled,l={...e,pressed:a,disabled:i},c=L.useRef(null);return s.rovingFocus?o.jsx(Px,{asChild:!0,...r,focusable:!i,active:a,ref:c,children:o.jsx(dw,{...l,ref:t})}):o.jsx(dw,{...l,ref:t})});d_.displayName=Jd;var dw=L.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:s,...r}=e,a=c_(Jd,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return o.jsx(a_,{...l,...r,ref:t,onPressedChange:c=>{c?a.onItemActivate(s):a.onItemDeactivate(s)}})}),f_=Z0,m_=d_;const h_=qi("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 cursor-pointer",{variants:{variant:{default:"bg-transparent hover:bg-muted hover:text-foreground data-[state=on]:bg-muted data-[state=on]:text-foreground",outline:"border border-input bg-background hover:bg-muted hover:text-foreground data-[state=on]:bg-muted data-[state=on]:text-foreground data-[state=on]:border-muted-foreground/20"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-8"}},defaultVariants:{variant:"default",size:"default"}}),jq=g.forwardRef(({className:e,variant:t,size:n,children:s,...r},a)=>o.jsx(f_,{ref:a,className:U(h_({variant:t,size:n}),e),...r,children:s}));jq.displayName=f_.displayName;const Sq=g.forwardRef(({className:e,variant:t,size:n,children:s,...r},a)=>o.jsx(m_,{ref:a,className:U(h_({variant:t,size:n}),e),...r,children:s}));Sq.displayName=m_.displayName;function kq(e){const t=new Set,n=[],s=(r,a)=>{if(t.has(r))return;t.add(r),a.push(e.find(l=>l.edid===r));const i=e.find(l=>l.edid===r);i.connection.children.forEach(l=>{e.some(c=>c.edid===l)&&s(l,a)}),i.connection.parents.forEach(l=>{e.some(c=>c.edid===l)&&s(l,a)})};return e.forEach(r=>{if(!t.has(r.edid)){const a=[];s(r.edid,a),n.push(a)}}),n}function Cq(e,t){try{if(e.length===0)return[];const r=kq(e).map(l=>Eq(l)).map(l=>_q(l,t)),a=Tq(r,t);return g_(a,t)}catch{return e.map(s=>({id:s.edid,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0}))}}function Eq(e){const t=new Map;e.forEach(l=>{t.set(l.edid,{perk:l,depth:-1,children:l.connection.children,parents:l.connection.parents,x:0,y:0,width:0})});const n=[];t.forEach((l,c)=>{l.parents.length===0&&n.push(c)});const s=n.map(l=>({id:l,depth:0})),r=new Set;for(;s.length>0;){const{id:l,depth:c}=s.shift();if(r.has(l))continue;r.add(l);const u=t.get(l);u&&((u.depth===-1||c<u.depth)&&(u.depth=c),u.children.forEach(d=>{t.has(d)&&!r.has(d)&&s.push({id:d,depth:c+1})}))}let a=!0,i=0;for(;a&&i<10;)a=!1,i++,t.forEach((l,c)=>{if(l.parents.length>1){const u=l.parents.map(d=>{const f=t.get(d);return f?f.depth:-1}).filter(d=>d!==-1);if(u.length>0){const f=Math.min(...u)+1;l.depth!==f&&(l.depth=f,a=!0)}}});return t.forEach((l,c)=>{l.children.forEach(u=>{const d=t.get(u);if(d&&d.depth<=l.depth){const f=l.depth+1;d.depth=f}})}),{nodes:t,roots:n}}function _q(e,t){const{nodes:n,roots:s}=e,r=[];if(n.forEach((f,m)=>{r.push({id:m,x:0,y:0,width:t.nodeWidth,height:t.nodeHeight,originalX:0,originalY:0,children:f.children})}),r.some(f=>{try{return ap(f.id,n,t,new Set),!1}catch{return!0}}))return r.forEach(f=>{const m=n.get(f.id);if(m&&m.perk){const h=m.perk.position.x*t.gridScaleX,p=-m.perk.position.y*t.gridScaleY;f.x=h,f.y=p,f.originalX=h,f.originalY=p}}),Aq(r,t),r;const i=r.filter(f=>!r.some(h=>{var p;return h.id!==f.id&&((p=h.children)==null?void 0:p.includes(f.id))}));i.forEach(f=>{f.y=0,f.originalY=0});const l=new Set,c=i.map(f=>({node:f,depth:0}));for(;c.length>0;){const{node:f,depth:m}=c.shift();l.has(f.id)||(l.add(f.id),m>0&&(f.y=-m*t.verticalSpacing,f.originalY=f.y),f.children&&f.children.forEach(h=>{const p=r.find(v=>v.id===h);p&&!l.has(h)&&c.push({node:p,depth:m+1})}))}const u=new Map;return r.forEach(f=>{const m=Math.round(f.y/t.verticalSpacing);u.has(m)||u.set(m,[]),u.get(m).push(f)}),Array.from(u.keys()).sort((f,m)=>m-f).forEach(f=>{u.get(f).forEach(h=>{if(h.children){const p=new Map;h.children.forEach(v=>{const w=r.find(x=>x.id===v);if(w){const x=r.filter(b=>{var y;return((y=b.children)==null?void 0:y.includes(v))&&Math.abs(b.y-w.y)===t.verticalSpacing});x.length>0&&x.some(b=>b.id===h.id)&&(p.has(h.id)||p.set(h.id,[]),p.get(h.id).push(w))}}),p.forEach((v,w)=>{if(v.length>0){const x=r.find(b=>b.id===w);if(x){const b=v.map(k=>{const E=ap(k.id,n,t);return{child:k,subtreeWidth:E}}),y=b.reduce((k,{subtreeWidth:E})=>k+E,0),N=(v.length-1)*t.horizontalSpacing,j=y+N;let S=x.x-j/2;b.forEach(({child:k,subtreeWidth:E})=>{k.x=S+E/2,k.originalX=k.x,S+=E+t.horizontalSpacing})}}})}})}),g_(r,t),r}function g_(e,t){const r=t.horizontalSpacing*.4,a=new Map;e.forEach(i=>{a.set(i.id,{x:i.x,y:i.y})});for(let i=0;i<5;i++){let l=0;for(let c=0;c<e.length;c++)for(let u=c+1;u<e.length;u++){const d=e[c],f=e[u],m=d.x+t.nodeWidth*.5,h=d.y+t.nodeHeight*.5,p=f.x+t.nodeWidth*.5,v=f.y+t.nodeHeight*.5,w=p-m,x=v-h,b=Math.sqrt(w*w+x*x);if(b<r&&b>0){const y=w/b*.03,N=x/b*.03;d.x-=y,d.y-=N,f.x+=y,f.y+=N,l++}}if(l===0)break}return e.forEach(i=>{const l=a.get(i.id);if(!l)return;const c=l.x-i.x,u=l.y-i.y,d=i.x+c*.02,f=i.y+u*.02,h=Math.round(l.y/t.verticalSpacing)*t.verticalSpacing,p=Math.max(f,h);i.x=d,i.y=p,i.originalX=d,i.originalY=p}),e}function Aq(e,t){const r=t.nodeHeight*.8,a=50,i=new Map;e.forEach(u=>{i.set(u.id,{x:u.x,y:u.y})});let l=0,c=1;for(;c>0&&l<a;){l++,c=0;for(let u=0;u<e.length;u++)for(let d=u+1;d<e.length;d++){const f=e[u],m=e[d],h=Math.max(0,Math.min(f.x+t.nodeWidth,m.x+t.nodeWidth)-Math.max(f.x,m.x)),p=Math.max(0,Math.min(f.y+t.nodeHeight,m.y+t.nodeHeight)-Math.max(f.y,m.y)),v=f.y+t.nodeHeight*.5,w=m.y+t.nodeHeight*.5,x=Math.abs(w-v),b=x<r;if(h>0&&p>0||b){c++;let y=0;h>0&&p>0?y=p*.08:b&&(y=(r-x)*.08),f.y<m.y?(f.y-=y,m.y+=y):(f.y+=y,m.y-=y)}}if(c===0)break}return e.forEach(u=>{const d=i.get(u.id);if(!d)return;const f=d.y-u.y,m=u.y+f*.03;u.y=m,u.originalY=m}),e}function Tq(e,t){const n=[],s=e.map(c=>{const u=Math.max(...c.map(y=>y.y)),d=c.filter(y=>Math.abs(y.y-u)<1),f=d.map(y=>y.x),m=Math.min(...f),h=Math.max(...f),p=h-m,v=f.reduce((y,N)=>y+N,0)/f.length,w=Math.min(...c.map(y=>y.x)),x=Math.max(...c.map(y=>y.x+y.width)),b=x-w;return{treeNodes:c,rootNodes:d,minRootX:m,maxRootX:h,rootWidth:p,rootCenterX:v,minX:w,maxX:x,treeWidth:b}}),r=Math.min(...s.map(c=>c.minRootX)),i=Math.max(...s.map(c=>c.maxRootX))-r;let l=0;return s.forEach(c=>{const u=i>0?c.rootWidth/i:1,d=c.minRootX-r;l-c.minX+d*u,c.treeNodes.forEach(f=>{const h=(f.x-c.minRootX)*u,p=l+h;n.push({...f,x:p,originalX:p})}),l+=c.treeWidth*u+t.horizontalSpacing}),n}function ap(e,t,n,s=new Set){if(s.has(e))throw new Error(`Circular reference detected for perkId: ${e}`);const r=t.get(e);if(!r)return n.nodeWidth;s.add(e);const a=r.children||[],i=a.map(c=>ap(c,t,n,new Set(s)));if(i.length===0)return n.nodeWidth;let l=0;return i.forEach((c,u)=>{l+=c,u<a.length-1&&(l+=n.horizontalSpacing)}),Math.max(l,n.nodeWidth)}function Mq(e){return e.perks.map(t=>({edid:t.edid,name:t.name,position:t.position,connection:t.connections}))}const Rq={perkNode:e=>o.jsx(HE,{...e,onTogglePerk:e.data.onTogglePerk,onRankChange:e.data.onRankChange})};function Dq({tree:e,onTogglePerk:t,onRankChange:n,selectedPerks:s}){const[r,a]=L.useState(null),[i,l]=L.useState(null),[c,u]=L.useState(!1),d=L.useCallback((_,P)=>{},[]),f=g.useMemo(()=>{if(!e)return null;const _=BE(e);return _.success?_.data:(console.error("Invalid perk tree data:",_.error),null)},[e]);L.useEffect(()=>{if(!f){l(null);return}console.log("Loading saved positions for tree:",f.treeId),u(!0),IE(f.treeId).then(_=>{console.log("Loaded saved positions:",_?"Found":"Not found"),l(_)}).catch(_=>{console.warn("Failed to load saved positions:",_),l(null)}).finally(()=>{u(!1)})},[f==null?void 0:f.treeId]);const m=g.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),h=g.useMemo(()=>({nodeWidth:140,nodeHeight:80,horizontalSpacing:40,verticalSpacing:200,padding:50,gridScaleX:180,gridScaleY:120}),[]),p=g.useMemo(()=>{if(!f)return[];if(console.log("Layout decision:",{hasSavedPositions:!!i,isLoadingPositions:c,treeId:f.treeId}),i&&!c){console.log("Using preset positions for tree:",f.treeId);const _=BV(f,i,h);return Array.from(_.entries()).map(([P,O])=>({id:P,x:O.x,y:O.y,width:h.nodeWidth||140,height:h.nodeHeight||80,originalX:O.x,originalY:O.y}))}else{console.log("Using fallback layout algorithm for tree:",f.treeId);const _=Mq(f);return Cq(_,m)}},[f,m,i,c,h]),v=g.useMemo(()=>!f||p.length===0?[]:f.perks.map(_=>{const P=_.edid,O=p.find(M=>M.id===P),$=O?{x:O.x,y:O.y}:{x:0,y:0},T=_.connections.children.length>0,z=_.connections.parents.length===0,A=s.find(M=>M.edid===P);return{id:P,type:"perkNode",position:$,draggable:!0,data:{..._,selected:A!==void 0,currentRank:(A==null?void 0:A.currentRank)||0,hasChildren:T,isRoot:z,onTogglePerk:t,onRankChange:n}}}),[f,p,s,t,n]),w=g.useMemo(()=>{if(!f)return[];const _=[];return f.perks.forEach(P=>{const O=P.edid;P.connections.children.length>0&&P.connections.children.forEach($=>{if($===O)return;f.perks.some(z=>z.edid===$)&&_.push({id:`${O}-${$}`,source:O,target:$,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),_},[f]),[x,b,y]=DE(v),[N,j,S]=zE(w);L.useEffect(()=>{b(v)},[v,b]),L.useEffect(()=>{j(w)},[w,j]),L.useEffect(()=>{f&&x.length>0&&r&&setTimeout(()=>{r.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[f==null?void 0:f.treeId,r]);const k=g.useCallback(_=>j(P=>P0(_,P)),[j]),E=g.useCallback(_=>{_.stopPropagation()},[]),C=g.useCallback(_=>{_.stopPropagation()},[]);return f?o.jsxs("div",{className:"w-full h-full bg-background rounded-lg border",style:{zIndex:1},onMouseDown:_=>_.stopPropagation(),onTouchStart:_=>_.stopPropagation(),children:[o.jsx("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-1",children:o.jsx("div",{className:"bg-primary text-primary-foreground px-2 py-1 rounded text-xs font-medium",children:c?"Loading Positions...":i?"Positioned Tree":"Algorithm v2"})}),o.jsxs(F0,{nodes:x,edges:N,onNodesChange:y,onEdgesChange:S,onConnect:k,onInit:a,nodeTypes:Rq,nodesDraggable:!1,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},onNodeDragStop:d,onMouseDown:E,onTouchStart:C,panOnDrag:!0,panOnScroll:!1,preventScrolling:!0,children:[o.jsx(OE,{}),o.jsx($E,{})]})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center bg-muted/20 rounded-lg",children:o.jsx("p",{className:"text-muted-foreground",children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function zq(e,t){const n=new Map;return t.forEach(s=>{var i;const r=s.treeId,a=((i=s.perks)==null?void 0:i.length)||0;n.set(r,a)}),n}function Y0(){const{data:e,loading:t,error:n,reload:s}=Z6(),{data:r,loading:a,error:i,reload:l}=l0(),c=t||a,u=n||i;return{skills:g.useMemo(()=>{if(!e||!r)return[];const m=zq(e,r);return e.map(h=>({id:h.edid,name:h.name,category:h.category,description:h.description,keyAbilities:h.keyAbilities||[],metaTags:h.metaTags||[],assignmentType:"none",canAssignMajor:!0,canAssignMinor:!0,level:0,totalPerks:m.get(h.edid)||0,selectedPerksCount:0,selectedPerks:[],isSelected:!1}))},[e,r]),perkTrees:r||[],loading:c,error:u,refreshSkills:async()=>{await Promise.all([s(),l()])}}}function Lq(){var w;const{skills:e,loading:t,error:n}=Y0(),{build:s,addMajorSkill:r,addMinorSkill:a,removeMajorSkill:i,removeMinorSkill:l}=gt(),c=g.useMemo(()=>e.map(x=>{var E,C;const b=s.skills.major.includes(x.id),y=s.skills.minor.includes(x.id),j=(((C=(E=s.perks)==null?void 0:E.selected)==null?void 0:C[x.id])||[]).length,S=!b&&s.skills.major.length<3,k=!y&&s.skills.minor.length<6;return{...x,isMajor:b,isMinor:y,selectedPerksCount:j,canAssignMajor:S,canAssignMinor:k}}),[e,s.skills.major,s.skills.minor,(w=s.perks)==null?void 0:w.selected]),u=g.useMemo(()=>c.filter(x=>x.isMajor),[c]),d=g.useMemo(()=>c.filter(x=>x.isMinor),[c]),f=g.useMemo(()=>c.filter(x=>!x.isMajor&&!x.isMinor),[c]);return{skills:c,selectedMajorSkills:u,selectedMinorSkills:d,availableSkills:f,loading:t,error:n,handleMajorSkillSelect:x=>{r(x.id)},handleMinorSkillSelect:x=>{a(x.id)},handleMajorSkillRemove:x=>{i(x)},handleMinorSkillRemove:x=>{l(x)}}}function $q(e){const[t,n]=g.useState(""),[s,r]=g.useState(null),a=g.useMemo(()=>e.filter(c=>{const u=c.name.toLowerCase().includes(t.toLowerCase())||c.description.toLowerCase().includes(t.toLowerCase())||c.category.toLowerCase().includes(t.toLowerCase())||c.keyAbilities.some(f=>f.toLowerCase().includes(t.toLowerCase()))||c.metaTags.some(f=>f.toLowerCase().includes(t.toLowerCase())),d=!s||c.category===s;return u&&d}),[e,t,s]),i=g.useMemo(()=>{const c=new Set(e.map(u=>u.category));return Array.from(c).sort()},[e]);return{searchQuery:t,setSearchQuery:n,selectedCategory:s,setSelectedCategory:r,filteredSkills:a,categories:i,clearFilters:()=>{n(""),r(null)}}}function X0(e){const{data:t,loading:n,error:s}=l0(),{getSkillPerks:r,getPerkRank:a,addPerk:i,removePerk:l,setPerkRank:c,clearSkillPerks:u}=gt(),d=g.useMemo(()=>!e||!t?null:t.find(b=>b.treeId===e)||null,[e,t]),f=g.useMemo(()=>e?r(e):[],[e,r]),m=g.useMemo(()=>{if(!e||!d)return{};const x={};return d.perks.forEach(b=>{x[b.edid]=a(b.edid)}),x},[e,d,a]),h=g.useMemo(()=>{if(!d)return[];const x=[];return d.perks.forEach(b=>{if(b.isRoot){x.push(b.edid);return}(b.connections.parents||[]).every(j=>f.includes(j))&&x.push(b.edid)}),x},[d,f]);return{perkTrees:t||[],selectedPerkTree:d,selectedPerks:f,perkRanks:m,availablePerks:h,loading:n,error:s,handlePerkSelect:x=>{if(!e)return;f.includes(x)?l(e,x):i(e,x)},handlePerkRankChange:(x,b)=>{c(x,b),b===0?f.includes(x)&&l(e,x):f.includes(x)||i(e,x)},handleResetPerks:()=>{e&&u(e)}}}function p_(){var A,D,M,R,B,H;const{skills:e,loading:t,error:n,refreshSkills:s}=Y0(),{build:r,addMajorSkill:a,addMinorSkill:i,removeMajorSkill:l,removeMinorSkill:c}=gt(),{searchQuery:u,setSearchQuery:d,selectedCategory:f,setSelectedCategory:m,filteredSkills:h,categories:p,clearFilters:v}=$q(e),w=g.useMemo(()=>h.map(I=>{var ee,pe,fe;const V=((pe=(ee=r.perks)==null?void 0:ee.selected)==null?void 0:pe[I.id])||[],G=V.length,J=I.totalPerks??0,oe=tj(I.id,V,((fe=r.perks)==null?void 0:fe.ranks)||{});return{...I,selectedPerksCount:G,level:oe,assignmentType:r.skills.major.includes(I.id)?"major":r.skills.minor.includes(I.id)?"minor":"none",canAssignMajor:!r.skills.major.includes(I.id)&&r.skills.major.length<3,canAssignMinor:!r.skills.minor.includes(I.id)&&r.skills.minor.length<6,perkCount:`${G}/${J}`}}),[h,r.skills.major,r.skills.minor,(A=r.perks)==null?void 0:A.selected,(D=r.perks)==null?void 0:D.ranks]),x=g.useMemo(()=>({majorCount:r.skills.major.length,minorCount:r.skills.minor.length,majorLimit:3,minorLimit:6,canAssignMajor:r.skills.major.length<3,canAssignMinor:r.skills.minor.length<6,totalSkills:w.length,totalPerks:w.reduce((I,V)=>I+(V.selectedPerksCount||0),0),totalPerkRanks:0}),[w,r.skills.major,r.skills.minor]),b=g.useCallback(I=>{a(I)},[a]),y=g.useCallback(I=>{i(I)},[i]),N=g.useCallback(I=>{l(I),c(I)},[l,c]),[j,S]=g.useState(null),k=g.useCallback(I=>{S(I)},[]),E=g.useMemo(()=>j&&w.find(I=>I.id===j)||null,[j,w]),{selectedPerkTree:C,handleResetPerks:_}=X0(j),P=g.useMemo(()=>{var I;return!E||!((I=r.perks)!=null&&I.selected)?[]:r.perks.selected[E.id]||[]},[E,(M=r.perks)==null?void 0:M.selected]),O=g.useMemo(()=>{var I;return!E||!((I=r.perks)!=null&&I.ranks)?{}:r.perks.ranks[E.id]||{}},[E,(R=r.perks)==null?void 0:R.ranks]),$=g.useMemo(()=>C?C.perks||[]:[],[C]),T=g.useCallback(I=>{var J,oe;if(!E)return;const V=((oe=(J=r.perks)==null?void 0:J.selected)==null?void 0:oe[E.id])||[];V.includes(I)?(V.filter(ee=>ee!==I),console.log("Remove perk:",I,"from skill:",E.id)):([...V],console.log("Add perk:",I,"to skill:",E.id))},[E,(B=r.perks)==null?void 0:B.selected]),z=g.useCallback((I,V)=>{var J,oe;if(!E)return;({...((oe=(J=r.perks)==null?void 0:J.ranks)==null?void 0:oe[E.id])||{}},console.log("Update perk rank:",I,"to",V,"for skill:",E.id))},[E,(H=r.perks)==null?void 0:H.ranks]);return{skills:w,skillSummary:x,selectedSkill:E,selectedSkillId:j,perkTree:C,selectedPerks:P,perkRanks:O,availablePerks:$,loading:t,error:n,searchQuery:u,setSearchQuery:d,selectedCategory:f,setSelectedCategory:m,categories:p,clearFilters:v,onAssignMajor:b,onAssignMinor:y,onRemoveAssignment:N,onSkillSelect:k,onPerkSelect:T,onPerkRankChange:z,onResetPerks:_,refreshSkills:s}}function x_({open:e,onOpenChange:t,selectedSkill:n,skillName:s,perkTree:r,skills:a,onSkillSelect:i,onReset:l}){var N,j;console.log("SkillPerkTreeDrawer props:",{open:e,selectedSkill:n,skillName:s,perkTree:r?"Found":"Not found",skillsCount:a.length});const{selectedPerks:c,perkRanks:u,handlePerkSelect:d,handlePerkRankChange:f,handleResetPerks:m}=X0(n),h=L.useMemo(()=>r?r.perks.filter(S=>c.includes(S.edid)).map(S=>({...S,selected:!0,currentRank:u[S.edid]||1})):[],[r,c,u]),p=L.useCallback(S=>{d(S)},[d]),v=L.useCallback((S,k)=>{f(S,k)},[f]),w=()=>{m(),l()},x=()=>{t(!1)},b=[{id:"skills",name:"Skills",placeholder:"Search skills...",options:a.map(S=>({id:S.id,label:S.name,value:S.id,category:"Skills",description:`${S.selectedPerks}/${S.totalPerks} perks selected`}))}],y=S=>{i(S.value)};return n?o.jsxs(QE,{open:e,onOpenChange:t,shouldScaleBackground:!1,dismissible:!0,children:[console.log("Drawer render - open:",e),o.jsxs(JE,{children:[o.jsx(G0,{}),o.jsxs(q0,{className:"fixed inset-x-0 bottom-0 z-50 mt-24 flex flex-col rounded-t-[10px] border bg-background h-[85vh] bg-card border-t shadow-lg !bg-card","data-vaul-no-drag":!0,style:{backgroundColor:"hsl(var(--card))",zIndex:Dt.DRAWER},children:[console.log("Drawer content render - zIndex:",Dt.DRAWER),o.jsx(e_,{className:"border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-64",children:o.jsx(Da,{categories:b,onSelect:y,placeholder:"Search skills..."})}),o.jsxs("div",{children:[o.jsx(n_,{className:"text-xl",children:s||(r==null?void 0:r.treeName)||"Skill Perks"}),o.jsxs(s_,{className:"flex items-center gap-2",children:[o.jsxs("span",{children:[c.length," perks selected"]}),((N=a.find(S=>S.id===n))==null?void 0:N.level)&&o.jsxs("span",{className:"text-blue-600 font-medium",children:["• Min: Level"," ",(j=a.find(S=>S.id===n))==null?void 0:j.level]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(W,{variant:"outline",size:"sm",onClick:w,className:"flex items-center gap-2",children:[o.jsx(qa,{className:"h-4 w-4"}),"Reset Perks"]}),o.jsx(W,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:o.jsx(Vt,{className:"h-4 w-4"})})]})]})}),o.jsx("div",{className:"flex-1 overflow-hidden",style:{height:"400px"},children:o.jsx("div",{className:"h-full w-full bg-muted/20 rounded",children:r?o.jsx(Dq,{tree:r,onTogglePerk:p,onRankChange:v,selectedPerks:h}):o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("p",{className:"text-muted-foreground",children:n?"Loading perk tree...":"No skill selected"})})})}),o.jsx(t_,{className:"border-t",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on perk nodes to select/deselect them"}),o.jsx(W,{variant:"outline",onClick:x,children:"Close"})]})})]})]})]}):null}function Pq({skills:e,loading:t,error:n,searchQuery:s,onSearchChange:r,selectedCategory:a,onCategorySelect:i,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:v}){var y;const[w,x]=g.useState(!1);if(t)return o.jsx(CI,{});if(n)return o.jsx(EI,{error:n});const b=e.map(N=>({edid:N.id,name:N.name,category:N.category,description:N.description,scaling:"",keyAbilities:[],metaTags:[],totalPerks:N.totalPerks,selectedPerks:N.selectedPerksCount,level:N.level,isMajor:N.assignmentType==="major",isMinor:N.assignmentType==="minor"}));return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ye,{children:[o.jsx(Me,{children:o.jsxs(Be,{className:"flex items-center justify-between",children:[o.jsx("span",{children:"Build Summary"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(K,{variant:"outline",className:"bg-yellow-50 text-yellow-800 border-yellow-300",children:[v.majorCount,"/",v.majorLimit," Major"]}),o.jsxs(K,{variant:"outline",className:"bg-gray-50 text-gray-800 border-gray-300",children:[v.minorCount,"/",v.minorLimit," Minor"]})]})]})}),o.jsx(be,{children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Total Skills"}),o.jsx("p",{className:"font-semibold",children:v.totalSkills})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Selected Perks"}),o.jsx("p",{className:"font-semibold",children:v.totalPerks})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Perk Ranks"}),o.jsx("p",{className:"font-semibold",children:v.totalPerkRanks})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Available Major"}),o.jsx("p",{className:"font-semibold text-yellow-600",children:v.majorLimit-v.majorCount})]})]})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(AI,{query:s,onQueryChange:r}),o.jsx(FV,{categories:l,selectedCategory:a,onCategorySelect:i})]}),o.jsx(hk,{}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Available Skills"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.length," skills found"]})]}),o.jsx(_I,{skills:e,onSkillSelect:N=>{console.log("Skill selected:",N),console.log("Setting perkTreeOpen to true"),u(N),x(!0)},onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,selectedSkillId:c||void 0})]}),o.jsx(x_,{open:w,onOpenChange:x,selectedSkill:c,skillName:c?(y=e.find(N=>N.id===c))==null?void 0:y.name:void 0,perkTree:p||void 0,skills:b,onSkillSelect:u,onReset:h}),o.jsx(ye,{className:"bg-muted/50",children:o.jsxs(be,{className:"pt-6",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"How to Assign Skills"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Major Skills (0-3)"}),o.jsx("p",{children:"Your primary skills that level up faster and start at a higher level."})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-muted-foreground",children:"Minor Skills (0-6)"}),o.jsx("p",{children:"Secondary skills that provide additional benefits and customization."})]})]})]})})]})}function v_({className:e}){var P;const{selectedMajorSkills:t,selectedMinorSkills:n,availableSkills:s,handleMajorSkillSelect:r,handleMinorSkillSelect:a,handleMajorSkillRemove:i,handleMinorSkillRemove:l}=Lq(),{build:c,getSkillLevel:u,getSkillPerks:d}=gt(),{skills:f}=Y0(),m=dt(),[h,p]=g.useState(null),[v,w]=g.useState(!1),x=()=>{m("/skills")},b=O=>{console.log("Opening perk tree for skill:",O),p(O),w(!0)},y=O=>{p(O.edid),w(!0)},N=g.useMemo(()=>{const O=t.map(z=>z.id),$=n.map(z=>z.id),T=[...O,...$];return f.filter(z=>d(z.id).length>0&&!T.includes(z.id))},[f,t,n,d]),j=g.useMemo(()=>{const O=t.map(A=>A.id),$=n.map(A=>A.id),T=[...O,...$],z=N.map(A=>A.id);return f.filter(A=>!T.includes(A.id)&&!z.includes(A.id)).map(A=>({name:A.name,edid:A.id,category:A.category,description:A.description,scaling:"",keyAbilities:A.keyAbilities||[],metaTags:A.metaTags||[]}))},[f,t,n,N]),S=O=>({name:O.name,edid:O.id,category:O.category,description:O.description,scaling:O.scaling||"",keyAbilities:O.keyAbilities||[],metaTags:O.metaTags||[]}),k=g.useMemo(()=>{const O=t.map(z=>z.id),$=n.map(z=>z.id),T=[...O,...$];return f.filter(z=>{const A=d(z.id);return T.includes(z.id)&&A.length===0})},[f,t,n,d]),E=f.map(O=>{d(O.id);const $=u(O.id),T=c.skills.major.includes(O.id),z=c.skills.minor.includes(O.id),A=!T&&c.skills.major.length<3,D=!z&&c.skills.minor.length<6;return{...O,isMajor:T,isMinor:z,canAssignMajor:A,canAssignMinor:D,level:$}}),{selectedPerkTree:C}=X0(h),_=(O,$)=>{const T=u(O.id||O.edid),z=d(O.id||O.edid),A=O.totalPerks||0,D=O.id||O.edid;let M="cursor-pointer transition-all hover:shadow-md ",R="text-xs ";switch($){case"major":M+="bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",R+="bg-yellow-100 text-yellow-800 border-yellow-300";break;case"minor":M+="bg-gray-50/50 border-gray-300 shadow-gray-300/20",R+="bg-gray-100 text-gray-800 border-gray-300";break;case"perked":M+="bg-blue-50/50 border-blue-500 shadow-blue-500/20",R+="bg-blue-100 text-blue-800 border-blue-300";break;case"assigned":M+="bg-orange-50/50 border-orange-500 shadow-orange-500/20",R+="bg-orange-100 text-orange-800 border-orange-300";break}return o.jsx(ye,{className:M,onClick:()=>b(D),children:o.jsx(be,{className:"p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h5",{className:"font-medium text-sm text-foreground",children:O.name}),o.jsx(Rc,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(Ie,{text:O.description,className:"text-xs text-muted-foreground line-clamp-2 mb-3",as:"p"}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx(cC,{level:T,size:"sm"}),o.jsxs(K,{variant:"outline",className:R,children:[z.length,"/",A," perks"]}),$==="major"&&o.jsx(K,{variant:"outline",className:"text-xs bg-yellow-100 text-yellow-800 border-yellow-300",children:"Major"}),$==="minor"&&o.jsx(K,{variant:"outline",className:"text-xs bg-gray-100 text-gray-800 border-gray-300",children:"Minor"}),$==="perked"&&o.jsx(K,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800 border-blue-300",children:"Perked"}),$==="assigned"&&o.jsx(K,{variant:"outline",className:"text-xs bg-orange-100 text-orange-800 border-orange-300",children:"Assigned"})]})]}),($==="major"||$==="minor")&&o.jsx(W,{size:"sm",variant:"ghost",onClick:B=>{B.stopPropagation(),$==="major"?i(D):l(D)},className:`${$==="major"?"text-yellow-600 hover:text-yellow-700 hover:bg-yellow-100":"text-gray-600 hover:text-gray-700 hover:bg-gray-100"}`,children:o.jsx(Vt,{className:"h-4 w-4"})})]})})},D)};return o.jsxs(o.Fragment,{children:[o.jsxs(In,{title:"Skills & Perks",navigateTo:"skills",onNavigate:x,className:e,children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Major Skills"}),t.length<3&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(K,{variant:"outline",className:"text-xs",children:[t.length,"/3"]})}),o.jsx(yh,{skills:s.map(S),onSelect:O=>{const $=s.find(T=>T.id===O.edid);$&&r($)},placeholder:"Select major skill...",className:"w-full"})]}),t.length>0&&o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:t.map(O=>_(O,"major"))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Minor Skills"}),n.length<6&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(K,{variant:"outline",className:"text-xs",children:[n.length,"/6"]})}),o.jsx(yh,{skills:s.map(S),onSelect:O=>{const $=s.find(T=>T.id===O.edid);$&&a($)},placeholder:"Select minor skill...",className:"w-full"})]}),n.length>0&&o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:n.map(O=>_(O,"minor"))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Other Perked Skills"}),o.jsx("div",{className:"space-y-2",children:o.jsx(yh,{skills:j,onSelect:y,placeholder:"Select skill to add perks...",className:"w-full"})}),N.length>0&&o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:N.map(O=>_(O,"perked"))})]}),k.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Assigned Skills (No Perks)"}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:k.map(O=>_(O,"assigned"))})]})]}),o.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on any skill card to view and manage its perk tree. Skill levels show the minimum level required based on your perk selections."})})]}),o.jsx(x_,{open:v,onOpenChange:w,selectedSkill:h,skillName:h?(P=f.find(O=>O.id===h))==null?void 0:P.name:void 0,perkTree:C||void 0,skills:E,onSkillSelect:p,onReset:()=>{}})]})}function Oq({item:e,className:t,allTraitIds:n,disableHover:s=!1}){e.originalTrait;const{hasRegularTrait:r,hasBonusTrait:a,addRegularTrait:i,addBonusTrait:l,removeTrait:c,canAddRegularTrait:u,canAddBonusTrait:d,build:f}=gt(),h=r(e.id)?"primary":a(e.id)?"secondary":"none",p=b=>{h===b?c(e.id):(c(e.id),b==="primary"&&u()?i(e.id):b==="secondary"&&d()&&l(e.id))},v=!u()&&h!=="primary",w=!d()&&h!=="secondary",x=()=>h==="primary"?"border-yellow-500 bg-yellow-50/50 shadow-yellow-500/20":h==="secondary"?"border-gray-400 bg-gray-50/50 shadow-gray-400/20":"";return g.useEffect(()=>{var b,y;if(n){const N=((b=f==null?void 0:f.traits)==null?void 0:b.regular)||[],j=((y=f==null?void 0:f.traits)==null?void 0:y.bonus)||[];[...N,...j].filter(E=>!n.includes(E)).forEach(E=>c(E))}},[n,f==null?void 0:f.traits,c]),o.jsxs(he,{expanded:!0,className:U(t,x()),disableHover:s,hideChevron:!0,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"h-4 w-4 text-black"}),o.jsx(bt,{className:"text-primary font-semibold",children:e.name})]})}),o.jsx(he.Summary,{children:o.jsx(Ie,{text:e.description,className:"text-base text-muted-foreground"})}),o.jsx(he.Footer,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(W,{size:"sm",variant:h==="primary"?"default":"outline",disabled:v,className:U("flex-1 text-xs",h==="primary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:b=>{b.stopPropagation(),p("primary")},children:h==="primary"?"Remove Trait":"Starting Trait"}),o.jsx(W,{size:"sm",variant:h==="secondary"?"default":"outline",disabled:w,className:U("flex-1 text-xs",h==="secondary"&&"bg-skyrim-gold text-skyrim-dark hover:bg-skyrim-gold/90"),onClick:b=>{b.stopPropagation(),p("secondary")},children:h==="secondary"?"Remove Trait":"Late Game Trait"})]})})]})}function y_(e,t){const n=g.useMemo(()=>e.map(l=>{var c;return{id:l.id||l.name,name:l.name,description:l.description||"",category:l.category||"",effects:((c=l.effects)==null?void 0:c.map(u=>`${u.type} ${u.description||""} ${u.value}`))||[],tags:l.tags||[],originalTrait:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"effects",weight:.2},{name:"tags",weight:.15},{name:"category",weight:.1}],threshold:.3,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Xt(n,s),[n,s]),a=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredTraits:g.useMemo(()=>a.map(l=>l.item.originalTrait),[a]),searchResults:a,searchableTraits:n}}function Sh({traits:e,onSelect:t,placeholder:n="Search traits...",className:s="",disabled:r=!1}){const[a,i]=g.useState(""),{filteredTraits:l}=y_(e,a),c=g.useMemo(()=>l.map(f=>({id:f.edid,label:f.name,description:f.description,category:f.category,badge:f.category&&o.jsx(K,{variant:"outline",className:"text-xs",children:f.category}),metadata:{originalTrait:f,effectsCount:f.effects.length}})),[l]),u=f=>{const m=e.find(h=>h.edid===f.id);m&&t(m)},d=(f,m)=>{var h;return o.jsx("div",{className:"flex items-start gap-3",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:f.label}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.badge&&o.jsx("div",{className:"flex-shrink-0",children:f.badge}),((h=f.metadata)==null?void 0:h.effectsCount)&&f.metadata.effectsCount>0&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.metadata.effectsCount," effect",f.metadata.effectsCount!==1?"s":""]})]}),f.description&&o.jsx(Ie,{text:f.description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]})})};return o.jsx(Uc,{options:c,onSelect:u,placeholder:n,className:s,disabled:r,renderOption:d,emptyMessage:"No traits found",searchQuery:a,onSearchQueryChange:i})}function b_(e){const t=e.map(n=>n.category).filter(Boolean);return[...new Set(t)].sort()}function Bq(e){const t=e.flatMap(n=>{var s;return((s=n.effects)==null?void 0:s.map(r=>r.type))||[]});return[...new Set(t)].sort()}function w_(e){const t=e.flatMap(n=>n.tags||[]);return[...new Set(t)].sort()}function Iq(){const[e,t]=g.useState({search:"",category:"",tags:[]}),{data:n,loading:s,error:r}=fo(),a=g.useMemo(()=>n.filter(u=>{var d;if(e.search){const f=e.search.toLowerCase();if(![u.name,u.description,u.category,...u.tags||[],...((d=u.effects)==null?void 0:d.map(h=>h.type))||[]].join(" ").toLowerCase().includes(f))return!1}return!(e.category&&u.category!==e.category||e.tags.length>0&&!e.tags.some(m=>{var h,p;return((h=u.tags)==null?void 0:h.includes(m))||u.category===m||((p=u.effects)==null?void 0:p.some(v=>v.type===m))}))}),[n,e]),i=g.useMemo(()=>b_(n),[n]),l=g.useMemo(()=>Bq(n),[n]),c=g.useMemo(()=>w_(n),[n]);return{traits:a,allTraits:n,loading:s,error:r,filters:e,setFilters:t,allCategories:i,allEffectTypes:l,allTags:c}}function N_({className:e}){const{allTraits:t}=Iq(),{build:n,addTraitToSlot:s,removeTrait:r,getRegularTraitLimit:a,getBonusTraitLimit:i}=gt(),l=dt();a(),i();const c=n.traits.regular.map(p=>t.find(v=>v.edid===p)).filter(Boolean),u=n.traits.bonus.map(p=>t.find(v=>v.edid===p)).filter(Boolean),d=(p,v)=>{s(p.edid,v)},f=p=>{r(p)},m=()=>{l("/traits")},h=t.filter(p=>!n.traits.regular.includes(p.edid)&&!n.traits.bonus.includes(p.edid));return o.jsx(In,{title:"Traits",navigateTo:"traits",onNavigate:m,className:e,children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Starting"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(K,{variant:"outline",className:"text-xs",children:"Slot 1"}),c[0]&&o.jsx(K,{variant:"default",className:"text-xs",children:"Starting"})]}),c[0]?o.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-sm",children:c[0].name}),o.jsx(Ie,{text:c[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>f(c[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:o.jsx(Vt,{className:"h-3 w-3"})})]}):o.jsx(Sh,{traits:h,onSelect:p=>d(p,"regular"),placeholder:"Select starting trait...",className:"w-full"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(K,{variant:"outline",className:"text-xs",children:"Slot 2"}),c[1]&&o.jsx(K,{variant:"default",className:"text-xs",children:"Starting"})]}),c[1]?o.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-yellow-50/50 border-yellow-500 shadow-yellow-500/20",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-sm",children:c[1].name}),o.jsx(Ie,{text:c[1].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>f(c[1].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:o.jsx(Vt,{className:"h-3 w-3"})})]}):o.jsx(Sh,{traits:h,onSelect:p=>d(p,"regular"),placeholder:"Select starting trait...",className:"w-full"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-md font-medium text-foreground",children:"Late Game"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(K,{variant:"outline",className:"text-xs",children:"Slot 1"}),u[0]&&o.jsx(K,{variant:"secondary",className:"text-xs",children:"Late Game"})]}),u[0]?o.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-gray-50/50 border-gray-400 shadow-gray-400/20",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-sm",children:u[0].name}),o.jsx(Ie,{text:u[0].description,className:"text-sm text-muted-foreground mt-1 line-clamp-2"})]}),o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>f(u[0].edid),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 flex-shrink-0",children:o.jsx(Vt,{className:"h-3 w-3"})})]}):o.jsx(Sh,{traits:h,onSelect:p=>d(p,"bonus"),placeholder:"Select late game trait...",className:"w-full"})]})]})]})})}const Hq=()=>{const{build:e,resetBuild:t,getSummary:n,setBuildName:s,setBuildNotes:r}=gt(),a=dt(),i=n(),[l,c]=g.useState(!1),u=()=>{navigator.clipboard.writeText(window.location.href)},d=()=>{confirm("Are you sure you want to reset your character build? This cannot be undone.")&&t()},f=()=>{c(!1),a("/build")},m=h=>{c(!1),a(`/build#${h}`),setTimeout(()=>{const p=document.getElementById(h);p==null||p.scrollIntoView({behavior:"smooth",block:"start"})},100)};return o.jsx("div",{className:"fixed bottom-4 right-4",style:{zIndex:Dt.MODAL+1},children:o.jsxs(Mx,{open:l,onOpenChange:c,children:[o.jsx(Zj,{asChild:!0,children:o.jsx(W,{size:"lg",className:`h-12 w-12 rounded-full shadow-lg transition-opacity duration-200 ${l?"opacity-0 pointer-events-none":"opacity-100"}`,style:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))"},children:o.jsx(kd,{className:"h-5 w-5"})})}),o.jsx(Hf,{side:"right",className:"w-[450px] sm:w-[800px] lg:w-[800px] sm:!max-w-[800px] lg:!max-w-[800px] p-0",children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs(Rx,{className:"p-6 pb-4 border-b",children:[o.jsxs(Dx,{className:"flex items-center gap-2",children:[o.jsx(kd,{className:"h-5 w-5"}),i.name||"Character Build"]}),o.jsx(zx,{children:"Quick reference and editing for your character build"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[o.jsx(Wj,{name:e.name,notes:e.notes,onNameChange:s,onNotesChange:r,className:"mb-0"}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(oC,{}),o.jsx(Fk,{}),o.jsx(N_,{}),o.jsx(lC,{})]}),o.jsx(tS,{showControls:!0,showSummary:!0,compact:!1}),o.jsx(v_,{}),o.jsx(eC,{navigate:a}),o.jsx(Qj,{build:e})]}),o.jsxs("div",{className:"p-6 pt-4 border-t bg-muted/50",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(W,{onClick:f,className:"flex-1",children:[o.jsx(ao,{className:"w-4 h-4 mr-2"}),"Full Build Page"]}),o.jsxs(W,{variant:"outline",onClick:u,children:[o.jsx(l4,{className:"w-4 h-4 mr-2"}),"Share"]}),o.jsxs(W,{variant:"destructive",onClick:d,children:[o.jsx(J4,{className:"w-4 h-4 mr-2"}),"Reset"]})]}),o.jsxs("div",{className:"mt-4 pt-4 border-t",children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Quick Navigation:"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[!e.race&&o.jsx(W,{variant:"outline",size:"sm",onClick:()=>m("race"),children:"Race"}),!e.stone&&o.jsx(W,{variant:"outline",size:"sm",onClick:()=>m("birthsign"),children:"Birthsign"}),e.traits.regular.length===0&&e.traits.bonus.length===0&&o.jsx(W,{variant:"outline",size:"sm",onClick:()=>m("traits"),children:"Traits"}),!e.religion&&o.jsx(W,{variant:"outline",size:"sm",onClick:()=>m("religion"),children:"Religion"}),e.skills.major.length===0&&e.skills.minor.length===0&&o.jsx(W,{variant:"outline",size:"sm",onClick:()=>m("skills"),children:"Skills"}),e.destinyPath.length===0&&o.jsx(W,{variant:"outline",size:"sm",onClick:()=>m("destiny"),children:"Destiny"})]})]})]})]})})]})})},fw=e=>btoa(unescape(encodeURIComponent(JSON.stringify(e)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),mw=e=>{try{const t=e.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(escape(atob(t))))}catch{return null}},Uq=()=>{const e=Hr(s=>s.build),t=Hr(s=>s.setBuild),n=g.useRef(!1);g.useEffect(()=>{if(n.current)return;const s=window.location.hash,[r,a]=s.split("?"),l=new URLSearchParams(a||"").get("b");if(console.log("URL Sync - Hydrating from URL:",{hash:s,encodedBuild:l}),l){const c=mw(l);console.log("URL Sync - Decoded build:",c),(c==null?void 0:c.v)===1?(console.log("URL Sync - Setting build from URL"),t(c)):console.warn("Invalid or outdated build schema in URL")}else console.log("URL Sync - No build parameter found in URL");n.current=!0},[t]),g.useEffect(()=>{const s={v:1,name:"Test",perks:{selected:{archery:["archery_01"]},ranks:{archery_01:1}}},r=fw(s),a=mw(r);console.log("URL Sync - Test encoding/decoding:",{testBuild:s,encoded:r,decoded:a,matches:JSON.stringify(s)===JSON.stringify(a)})},[]),g.useEffect(()=>{if(!n.current)return;console.log("URL Sync - Build state changed:",e);const s=fw(e),r=window.location.hash,[a,i]=r.split("?"),l=new URLSearchParams(i||"");l.set("b",s);const c=`${a}?${l.toString()}`;console.log("URL Sync - Updating URL:",c),window.history.replaceState(null,"",c)},[e.v,e.name,e.race,e.stone,e.religion,e.traits,e.skills,e.perks,e.equipment,e.destinyPath])},j_=g.forwardRef(({className:e,collapsed:t,...n},s)=>o.jsx("aside",{ref:s,"data-collapsed":t?"":void 0,className:U("flex flex-col bg-card border-r border-skyrim-gold/20 h-[calc(100vh-3rem)] sticky top-12 transition-all duration-300 ease-in-out",t?"w-0 overflow-hidden opacity-0":"w-64 opacity-100",e),...n}));j_.displayName="Sidebar";const S_=g.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:U("flex-1 flex flex-col justify-start overflow-y-auto px-2 py-2",e),...t}));S_.displayName="SidebarContent";const k_=g.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:U("mb-2",e),...t}));k_.displayName="SidebarGroup";const C_=g.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:U("px-3 py-2 border-b border-skyrim-gold/20 flex items-center gap-2 min-h-[48px]",e),...t}));C_.displayName="SidebarHeader";const E_=g.forwardRef(({className:e,...t},n)=>o.jsx("ul",{ref:n,className:U("flex flex-col gap-0.5 list-none p-0 m-0",e),...t}));E_.displayName="SidebarMenu";const __=g.forwardRef(({className:e,asChild:t,isActive:n,...s},r)=>{const a=t?"span":"button";return o.jsx(a,{ref:r,"data-active":n?"":void 0,className:U("group flex items-center w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out","hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] hover:border-l-4","active:scale-[0.98] active:bg-skyrim-gold/25","cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",n?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent",e),tabIndex:0,...s})});__.displayName="SidebarMenuButton";const A_=g.forwardRef(({className:e,...t},n)=>o.jsx("li",{ref:n,className:U("relative flex items-stretch",e),...t}));A_.displayName="SidebarMenuItem";const T_=g.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:e,...t}));T_.displayName="SidebarRail";function Fq(e={}){const{autoLoad:t=!0,refreshOnMount:n=!1}=e,{data:s,loading:r,error:a,load:i}=tr(),l=g.useCallback(async()=>{t&&s.length===0&&await i()},[t,s.length,i]),c=g.useCallback(async()=>{await i()},[i]),u=g.useCallback(()=>{},[]);g.useEffect(()=>{t&&s.length===0&&l()},[t,s.length,l]),g.useEffect(()=>{n&&c()},[n,c]);const d=s.length,f=[...new Set(s.map(j=>j.category).filter(Boolean))],m=[...new Set(s.flatMap(j=>j.effects.map(S=>S.name)))],h=[...new Set(s.flatMap(j=>j.ingredients))],p=new Date().toISOString(),v=s.length>0?{recipes:s,totalCount:d,categories:f,effects:m,ingredients:h,lastUpdated:p}:null,w=g.useCallback(j=>tr.getState().getByName(j),[]),x=g.useCallback(j=>tr.getState().getByCategory(j),[]),b=g.useCallback(j=>tr.getState().getByDifficulty(j),[]),y=g.useCallback(j=>tr.getState().getByIngredient(j),[]),N=g.useCallback(j=>tr.getState().getByEffect(j),[]);return{recipes:s,recipeData:v,loading:r,error:a,totalCount:d,categories:f,effects:m,ingredients:h,lastUpdated:p,loadRecipes:l,refresh:c,clearError:u,getRecipeByName:w,getRecipesByCategory:x,getRecipesByDifficulty:b,getRecipesByIngredient:y,getRecipesByEffect:N}}function Vq(e,t={}){const{initialFilters:n={},enableSearch:s=!0,enableSorting:r=!0}=t,a=Array.isArray(e)?e:[],[i,l]=g.useState({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null,...n}),[c,u]=g.useState([]),[d,f]=g.useState("name"),[m,h]=g.useState("asc"),p=g.useCallback(M=>{c.some(R=>R.value===M.value&&R.category===M.category)||u(R=>[...R,M])},[c]),v=g.useCallback(M=>{u(R=>R.filter(B=>B.id!==M))},[]),w=g.useCallback(()=>{u([])},[]),x=g.useCallback(M=>{l(R=>({...R,searchTerm:M}))},[]),b=g.useCallback(M=>{l(R=>({...R,categories:M}))},[]),y=g.useCallback(M=>{l(R=>({...R,effects:M}))},[]),N=g.useCallback(M=>{l(R=>({...R,ingredients:M}))},[]),j=g.useCallback(M=>{l(R=>({...R,difficulties:M}))},[]),S=g.useCallback(M=>{l(R=>({...R,hasEffects:M}))},[]),k=g.useCallback(M=>{l(R=>({...R,isComplex:M}))},[]),E=g.useCallback((M,R)=>{l(B=>({...B,minIngredientCount:M,maxIngredientCount:R}))},[]),C=g.useCallback((M,R)=>{l(B=>({...B,minMagnitude:M,maxMagnitude:R}))},[]),_=g.useCallback(()=>{l({categories:[],effects:[],ingredients:[],difficulties:[],searchTerm:"",hasEffects:null,isComplex:null,minIngredientCount:null,maxIngredientCount:null,minMagnitude:null,maxMagnitude:null}),u([])},[]),P=g.useCallback(()=>{l(M=>({...M,searchTerm:""}))},[]),O=g.useCallback(M=>{h(M)},[]),$=g.useCallback(()=>{h(M=>M==="asc"?"desc":"asc")},[]),T=g.useMemo(()=>{let M=Ge.applyFilters(a,i);if(c.length>0){const R=c.reduce((B,H)=>{switch(H.category){case"categories":B.categories.push(H.value);break;case"effects":B.effects.push(H.value);break;case"ingredients":B.ingredients.push(H.value);break;case"difficulties":B.difficulties.push(H.value);break}return B},{categories:[],effects:[],ingredients:[],difficulties:[]});R.categories.length>0&&(M=Ge.filterByCategories(M,R.categories)),R.effects.length>0&&(M=Ge.filterByEffects(M,R.effects)),R.ingredients.length>0&&(M=Ge.filterByIngredients(M,R.ingredients)),R.difficulties.length>0&&(M=Ge.filterByDifficulties(M,R.difficulties))}return r&&(M=Ge.sort(M,d,m)),M},[a,i,c,r,d,m]),z=g.useMemo(()=>!s||!i.searchTerm.trim()?[]:Ge.search(a,i.searchTerm),[a,i.searchTerm,s]),A=g.useMemo(()=>i.searchTerm.trim()!==""||i.categories.length>0||i.effects.length>0||i.ingredients.length>0||i.difficulties.length>0||i.hasEffects!==null||i.isComplex!==null||i.minIngredientCount!==null||i.maxIngredientCount!==null||i.minMagnitude!==null||i.maxMagnitude!==null||c.length>0,[i,c]),D=g.useMemo(()=>{let M=0;return i.searchTerm.trim()&&M++,i.categories.length>0&&(M+=i.categories.length),i.effects.length>0&&(M+=i.effects.length),i.ingredients.length>0&&(M+=i.ingredients.length),i.difficulties.length>0&&(M+=i.difficulties.length),i.hasEffects!==null&&M++,i.isComplex!==null&&M++,(i.minIngredientCount!==null||i.maxIngredientCount!==null)&&M++,(i.minMagnitude!==null||i.maxMagnitude!==null)&&M++,M+=c.length,M},[i,c]);return{filters:i,searchTerm:i.searchTerm,selectedTags:c,setSelectedTags:u,addTagFilter:p,removeTagFilter:v,clearAllTags:w,filteredRecipes:T,searchResults:z,hasActiveFilters:A,filterCount:D,setSearchTerm:x,setCategories:b,setEffects:y,setIngredients:N,setDifficulties:j,setHasEffects:S,setIsComplex:k,setIngredientCountRange:E,setMagnitudeRange:C,clearFilters:_,clearSearch:P,sortBy:d,sortOrder:m,setSortBy:f,setSortOrder:O,toggleSortOrder:$}}function qq(e,t={}){const{enableStatistics:n=!0,enableGrouping:s=!0}=t,r=Array.isArray(e)?e:[],a=g.useMemo(()=>n?Ge.getStatistics(r):{totalRecipes:0,recipesByCategory:{},recipesByDifficulty:{},recipesByEffect:{},averageIngredientCount:0,averageEffectCount:0,mostCommonIngredients:[],mostCommonEffects:[]},[r,n]),i=g.useMemo(()=>{if(!s)return{};const y={};return r.forEach(N=>{const j=N.category||"Uncategorized";y[j]||(y[j]=[]),y[j].push(N)}),y},[r,s]),l=g.useMemo(()=>{if(!s)return{};const y={};return r.forEach(N=>{const j=N.difficulty;y[j]||(y[j]=[]),y[j].push(N)}),y},[r,s]),c=g.useMemo(()=>{if(!s)return{};const y={};return r.forEach(N=>{N.effects.forEach(j=>{y[j.name]||(y[j.name]=[]),y[j.name].push(N)})}),y},[r,s]),u=g.useMemo(()=>{if(!s)return{};const y={};return r.forEach(N=>{N.ingredients.forEach(j=>{y[j]||(y[j]=[]),y[j].push(N)})}),y},[r,s]),d=g.useMemo(()=>Ge.getUniqueCategories(r),[r]),f=g.useMemo(()=>Ge.getUniqueDifficulties(r),[r]),m=g.useMemo(()=>Ge.getUniqueEffects(r),[r]),h=g.useMemo(()=>Ge.getUniqueIngredients(r),[r]),p=g.useMemo(()=>[{name:"Recipe Categories",options:d},{name:"Effects",options:m},{name:"Ingredients",options:h},{name:"Difficulty",options:f}],[d,m,h,f]),v=g.useMemo(()=>(y,N)=>{const j=y.ingredientCount-N.ingredientCount,S=y.effectCount-N.effectCount,k=y.totalMagnitude-N.totalMagnitude,E=y.maxDuration-N.maxDuration,C=new Set(y.ingredients),_=new Set(N.ingredients),P=[...C].filter(R=>_.has(R)),O=[...C].filter(R=>!_.has(R)),$=[..._].filter(R=>!C.has(R)),T=new Set(y.effects.map(R=>R.name)),z=new Set(N.effects.map(R=>R.name)),A=[...T].filter(R=>z.has(R)),D=[...T].filter(R=>!z.has(R)),M=[...z].filter(R=>!T.has(R));return{recipe1:y,recipe2:N,differences:{ingredientCount:{difference:j,percentage:N.ingredientCount>0?j/N.ingredientCount*100:0},effectCount:{difference:S,percentage:N.effectCount>0?S/N.effectCount*100:0},magnitude:{difference:k,percentage:N.totalMagnitude>0?k/N.totalMagnitude*100:0},duration:{difference:E,percentage:N.maxDuration>0?E/N.maxDuration*100:0},ingredients:{added:O,removed:$,common:P},effects:{added:D,removed:M,common:A}}}},[]),w=g.useMemo(()=>y=>{if(y.ingredientCount===0)return 0;const N=y.totalMagnitude*y.maxDuration,j=y.ingredientCount;return N/j},[]),x=g.useMemo(()=>y=>{let N=0;switch(N+=y.ingredientCount*.3,N+=y.effectCount*.4,N+=y.effects.reduce((j,S)=>j+S.magnitude*S.duration*.1,0),y.difficulty){case"Simple":N+=1;break;case"Moderate":N+=2;break;case"Complex":N+=3;break}return Math.round(N*10)/10},[]),b=g.useMemo(()=>y=>Ge.getEffectComparisons(y,r),[r]);return{statistics:a,recipesByCategory:i,recipesByDifficulty:l,recipesByEffect:c,recipesByIngredient:u,availableCategories:d,availableDifficulties:f,availableEffects:m,availableIngredients:h,searchCategories:p,compareRecipes:v,getRecipeEfficiency:w,getRecipeComplexity:x,getEffectComparisons:b}}function W0({recipe:e,variant:t="default",onClick:n,isSelected:s=!1,showEffects:r=!0,showIngredients:a=!0,effectComparisons:i=[]}){const l=()=>{n==null||n()},c=w=>typeof w=="string"?w:w&&typeof w=="object"?w.item?w.item:w.name?w.name:w.label?w.label:w.id?w.id:"Unknown Ingredient":String(w||""),u=w=>typeof w=="string"?w:typeof w=="number"?w.toString():w&&typeof w=="object"?w.name?w.name:w.label?w.label:w.id?w.id:w.item?w.item:w.category?w.category:c(w):String(w||""),d=w=>o.jsx(Qr,{className:"h-4 w-4 text-green-500"}),f=w=>{if(typeof w=="string")return{name:w,count:1};if(w&&typeof w=="object"){const x=c(w),b=w.count||w.amount||1;return{name:x,count:b}}return{name:String(w||""),count:1}},m=w=>u(w.description||""),h=()=>o.jsxs(ye,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[o.jsx(Me,{className:"pb-2",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-medium truncate",children:u(e.name)}),o.jsx("div",{className:"flex gap-1",children:e.category&&o.jsx(K,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),o.jsx(be,{className:"pt-0",children:o.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.ingredientCount," ingredients • ",e.effectCount," effects"]})})]}),p=()=>o.jsxs(ye,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[o.jsx(Me,{className:"pb-3",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-medium truncate",children:u(e.name)}),e.description&&o.jsx(Ie,{text:u(e.description),className:"text-sm text-muted-foreground mt-1 line-clamp-2",as:"p"})]}),o.jsx("div",{className:"flex flex-col gap-1 ml-2",children:e.category&&o.jsx(K,{variant:"secondary",className:"text-xs",children:u(e.category)})})]})}),o.jsx(be,{className:"pt-0",children:o.jsxs("div",{className:"space-y-2",children:[a&&e.ingredients.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:["Ingredients (",e.ingredientCount,")"]}),o.jsx("div",{className:"space-y-1",children:e.ingredients.map((w,x)=>{const{name:b,count:y}=f(w);return o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-muted-foreground",children:b}),o.jsxs("span",{className:"font-medium",children:["×",y]})]},x)})})]}),r&&e.effects.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:["Effects (",e.effectCount,")"]}),o.jsx("div",{className:"space-y-2",children:e.effects.map((w,x)=>o.jsx("div",{className:"p-2 bg-muted/50 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-2",children:[d(),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-xs mb-1",children:u(w.name)}),o.jsx("div",{className:"text-xs text-muted-foreground",children:o.jsx(Ie,{text:m(w),className:"text-xs text-muted-foreground"})})]})]})},x))})]}),!1]})})]}),v=()=>o.jsxs(ye,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary":""}`,onClick:l,children:[o.jsx(Me,{className:"pb-3",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-medium",children:u(e.name)}),e.description&&o.jsx(Ie,{text:u(e.description),className:"text-sm text-muted-foreground mt-1",as:"p"})]}),o.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[e.category&&o.jsx(K,{variant:"secondary",className:"text-xs",children:u(e.category)}),e.type&&o.jsx(K,{variant:"outline",className:"text-xs",children:u(e.type)})]})]})}),o.jsx(be,{className:"pt-0",children:o.jsxs("div",{className:"space-y-3",children:[a&&e.ingredients.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-2",children:"Ingredients"}),o.jsx("div",{className:"space-y-2",children:e.ingredients.map((w,x)=>{const{name:b,count:y}=f(w);return o.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-lg",children:[o.jsx("span",{className:"text-sm",children:b}),o.jsxs("span",{className:"font-medium text-sm",children:["×",y]})]},x)})})]}),r&&e.effects.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-3",children:"Effects"}),o.jsx("div",{className:"space-y-3",children:e.effects.map((w,x)=>o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:o.jsxs("div",{className:"flex items-start gap-3",children:[d(),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-sm mb-1",children:u(w.name)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:o.jsx(Ie,{text:m(w),className:"text-sm text-muted-foreground"})})]})]})},x))})]}),!1,o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t",children:[o.jsxs("span",{children:["Total Magnitude: ",e.totalMagnitude]}),o.jsxs("span",{children:["Max Duration: ",e.maxDuration,"s"]})]})]})})]});switch(t){case"compact":return h();case"detailed":return v();default:return p()}}function Gq({recipes:e,variant:t="default",columns:n=3,onRecipeClick:s,selectedRecipes:r=[],showEffects:a=!0,showIngredients:i=!0,className:l,getEffectComparisons:c}){const u=()=>{const f="grid gap-4";switch(n){case 1:return`${f} grid-cols-1`;case 2:return`${f} grid-cols-1 sm:grid-cols-2`;case 3:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`;case 4:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4`;default:return`${f} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`}},d=f=>{s==null||s(f)};return e.length===0?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"No recipes found"})})}):o.jsx("div",{className:u(),children:e.map(f=>o.jsx(W0,{recipe:f,variant:t,onClick:()=>d(f),isSelected:r.includes(f.name),showEffects:a,showIngredients:i,effectComparisons:(c==null?void 0:c(f))||[]},f.name))})}function Zq({recipes:e,variant:t="default",onRecipeClick:n,selectedRecipes:s=[],showEffects:r=!0,showIngredients:a=!0,className:i,getEffectComparisons:l}){const c=u=>{n==null||n(u)};return e.length===0?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"No recipes found"})})}):o.jsx("div",{className:`space-y-3 ${i||""}`,children:e.map(u=>o.jsx(W0,{recipe:u,variant:t,onClick:()=>c(u),isSelected:s.includes(u.name),showEffects:r,showIngredients:a,effectComparisons:(l==null?void 0:l(u))||[]},u.name))})}function Yq({currentMode:e,onModeChange:t,className:n}){return o.jsxs("div",{className:`flex border rounded-lg p-1 bg-muted ${n||""}`,children:[o.jsx(W,{variant:e==="list"?"default":"ghost",size:"sm",onClick:()=>t("list"),className:"h-8 px-3",title:"List view",children:o.jsx(oo,{className:"h-4 w-4"})}),o.jsx(W,{variant:e==="grid"?"default":"ghost",size:"sm",onClick:()=>t("grid"),className:"h-8 px-3",title:"Grid view",children:o.jsx(Fi,{className:"h-4 w-4"})})]})}function Xq({statistics:e,className:t}){const{totalRecipes:n,foodRecipes:s,alcoholRecipes:r,recipesByCategory:a,recipesByDifficulty:i,averageIngredientCount:l,averageEffectCount:c,averageMagnitude:u,averageDuration:d,topEffects:f,topIngredients:m}=e,h=[{title:"Total Recipes",value:n,icon:ZR,description:"All available recipes",color:"text-blue-600"},{title:"Food Recipes",value:s,icon:l3,description:"Culinary recipes",color:"text-green-600"},{title:"Alcohol Recipes",value:r,icon:u3,description:"Beverage recipes",color:"text-purple-600"},{title:"Avg Ingredients",value:l.toFixed(1),icon:gg,description:"Per recipe",color:"text-orange-600"},{title:"Avg Effects",value:c.toFixed(1),icon:Ga,description:"Per recipe",color:"text-yellow-600"},{title:"Avg Magnitude",value:u.toFixed(1),icon:pg,description:"Effect strength",color:"text-red-600"}];return o.jsxs("div",{className:`space-y-6 ${t||""}`,children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(p=>{const v=p.icon;return o.jsxs(ye,{children:[o.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Be,{className:"text-sm font-medium",children:p.title}),o.jsx(v,{className:`h-4 w-4 ${p.color}`})]}),o.jsxs(be,{children:[o.jsx("div",{className:"text-2xl font-bold",children:p.value}),o.jsx("p",{className:"text-xs text-muted-foreground",children:p.description})]})]},p.title)})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ye,{children:[o.jsx(Me,{children:o.jsxs(Be,{className:"flex items-center gap-2",children:[o.jsx(fx,{className:"h-4 w-4"}),"Recipe Categories"]})}),o.jsx(be,{children:o.jsxs("div",{className:"space-y-2",children:[Object.entries(a).sort(([,p],[,v])=>v-p).slice(0,8).map(([p,v])=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:p}),o.jsx(K,{variant:"secondary",className:"text-xs",children:v})]},p)),Object.keys(a).length>8&&o.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["+",Object.keys(a).length-8," more categories"]})]})})]}),o.jsxs(ye,{children:[o.jsx(Me,{children:o.jsxs(Be,{className:"flex items-center gap-2",children:[o.jsx(o4,{className:"h-4 w-4"}),"Recipe Difficulties"]})}),o.jsx(be,{children:o.jsx("div",{className:"space-y-2",children:Object.entries(i).sort(([,p],[,v])=>v-p).map(([p,v])=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:p}),o.jsx(K,{variant:p==="Simple"?"default":p==="Moderate"?"secondary":"destructive",className:"text-xs",children:v})]},p))})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ye,{children:[o.jsx(Me,{children:o.jsxs(Be,{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"h-4 w-4"}),"Most Common Effects"]})}),o.jsx(be,{children:o.jsx("div",{className:"space-y-2",children:f.slice(0,8).map((p,v)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:p.name}),o.jsxs(K,{variant:"outline",className:"text-xs",children:[p.count," recipes"]})]},p.name))})})]}),o.jsxs(ye,{children:[o.jsx(Me,{children:o.jsxs(Be,{className:"flex items-center gap-2",children:[o.jsx(gg,{className:"h-4 w-4"}),"Most Common Ingredients"]})}),o.jsx(be,{children:o.jsx("div",{className:"space-y-2",children:m.slice(0,8).map((p,v)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:p.name}),o.jsxs(K,{variant:"outline",className:"text-xs",children:[p.count," recipes"]})]},p.name))})})]})]})]})}function Wq({recipes:e,className:t}){const n=L.useMemo(()=>{const l=new Map;return e.forEach(c=>{c.effects.forEach(u=>{const d=u.name||"Unknown Effect",f=u.magnitude||0,m=u.duration||0;l.has(d)||l.set(d,{name:d,count:0,averageMagnitude:0,averageDuration:0,totalMagnitude:0,totalDuration:0,recipes:[]});const h=l.get(d);h.count++,h.totalMagnitude+=f,h.totalDuration+=m,h.recipes.includes(c.name)||h.recipes.push(c.name)})}),l.forEach(c=>{c.averageMagnitude=c.totalMagnitude/c.count,c.averageDuration=c.totalDuration/c.count}),Array.from(l.values()).sort((c,u)=>u.count-c.count)},[e]),s=L.useMemo(()=>{if(n.length===0)return{magnitude:0,duration:0};const l=n.reduce((u,d)=>u+d.averageMagnitude,0),c=n.reduce((u,d)=>u+d.averageDuration,0);return{magnitude:l/n.length,duration:c/n.length}},[n]),r=(l,c)=>{const d=(l-c)/c*100;return d>20?"text-green-600":d>10?"text-green-500":d<-20?"text-red-600":d<-10?"text-red-500":"text-muted-foreground"},a=(l,c)=>{const d=(l-c)/c*100;return d>10?o.jsx(pg,{className:"h-4 w-4 text-green-500"}):d<-10?o.jsx(my,{className:"h-4 w-4 text-red-500"}):null},i=(l,c)=>{const u=l-c,d=u/c*100,f=u>=0?"+":"";return`${f}${u.toFixed(1)} (${f}${d.toFixed(1)}%)`};return n.length===0?o.jsxs(ye,{className:t,children:[o.jsx(Me,{children:o.jsx(Be,{className:"text-lg",children:"Food Effect Meta Analysis"})}),o.jsx(be,{children:o.jsx("p",{className:"text-muted-foreground",children:"No effects found to analyze."})})]}):o.jsxs(ye,{className:t,children:[o.jsxs(Me,{children:[o.jsx(Be,{className:"text-lg",children:"Food Effect Meta Analysis"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Analysis of ",n.length," unique effects across ",e.length," recipes"]})]}),o.jsx(be,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold",children:s.magnitude.toFixed(1)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Magnitude"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold",children:[s.duration.toFixed(1),"s"]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Duration"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-medium text-sm",children:"Effect Analysis"}),n.slice(0,10).map(l=>o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[o.jsx("div",{className:"flex items-start justify-between mb-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qr,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{className:"font-medium text-sm",children:l.name}),o.jsxs(K,{variant:"secondary",className:"text-xs",children:[l.count," recipes"]})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx("span",{className:"text-muted-foreground",children:"Magnitude:"}),o.jsx("span",{className:"font-medium",children:l.averageMagnitude.toFixed(1)}),a(l.averageMagnitude,s.magnitude)]}),o.jsx("div",{className:U("text-xs",r(l.averageMagnitude,s.magnitude)),children:i(l.averageMagnitude,s.magnitude)})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),o.jsxs("span",{className:"font-medium",children:[l.averageDuration.toFixed(1),"s"]}),a(l.averageDuration,s.duration)]}),o.jsx("div",{className:U("text-xs",r(l.averageDuration,s.duration)),children:i(l.averageDuration,s.duration)})]})]}),l.recipes.length>0&&o.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:o.jsxs("div",{className:"text-xs text-muted-foreground mb-1",children:["Found in: ",l.recipes.slice(0,3).join(", "),l.recipes.length>3&&` +${l.recipes.length-3} more`]})})]},l.name)),n.length>10&&o.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing top 10 effects of ",n.length," total"]})]}),o.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:"Legend"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pg,{className:"h-3 w-3 text-green-500"}),o.jsx("span",{children:"Above average (+10%+)"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(my,{className:"h-3 w-3 text-red-500"}),o.jsx("span",{children:"Below average (-10%+)"})]})]})]})]})})]})}function Kq(e,t){return{filteredRecipes:g.useMemo(()=>{if(!t.trim())return e;const r=t.toLowerCase().trim().split(/\s+/);return e.filter(a=>{const i=[a.name,a.output,a.description||"",...a.ingredients.map(l=>typeof l=="string"?l:l&&typeof l=="object"&&(l.name||l.label||l.id)||String(l)),...a.effects.map(l=>l.name),...a.effects.map(l=>l.description),a.category||"",a.difficulty||"",a.type||"",...a.tags].join(" ").toLowerCase();return r.every(l=>i.includes(l))})},[e,t]),searchQuery:t.trim()}}function Qq(){const{recipes:e,loading:t,error:n}=Fq(),{filteredRecipes:s}=Vq(e),{statistics:r,availableCategories:a,availableEffects:i,availableIngredients:l,getEffectComparisons:c}=qq(e),[u,d]=g.useState("grid"),m=(()=>{try{if(!e||e.length===0)return console.warn("No recipes loaded for search categories"),[];const j=l||[],S=i||[],k=a||[];return console.log("Using pre-computed ingredients:",j.slice(0,10),`(total: ${j.length})`),[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, ingredients, effects, or description...",options:[]},{id:"ingredients",name:"Ingredients",placeholder:"Filter by ingredient...",options:j.map(E=>({id:`ingredient-${E}`,label:E,value:E,category:"Ingredients",description:`Recipes with ${E}`}))},{id:"effects",name:"Effects",placeholder:"Filter by effect...",options:S.map(E=>({id:`effect-${E}`,label:E,value:E,category:"Effects",description:`Recipes with ${E} effect`}))},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:k.map(E=>({id:`category-${E}`,label:E,value:E,category:"Categories",description:`${E} recipes`}))}]}catch(j){return console.error("Error generating search categories:",j),[]}})(),[h,p]=g.useState([]),v=j=>{let S;typeof j=="string"?S={id:`custom-${j}`,label:j,value:j,category:"Fuzzy Search"}:S={id:`${j.category}-${j.id}`,label:j.label,value:j.value,category:j.category},h.some(k=>k.value===S.value&&k.category===S.category)||p(k=>[...k,S])},w=j=>{p(S=>S.filter(k=>k.id!==j))},x=s.filter(j=>h.length===0?!0:h.every(S=>{switch(S.category){case"Fuzzy Search":return!0;case"Categories":return j.category===S.value;case"Ingredients":return j.ingredients.some(k=>typeof k=="string"?k===S.value:k&&typeof k=="object"?k.item===S.value||k.name===S.value||k.label===S.value||k.id===S.value:!1);case"Effects":return j.effects.some(k=>k.name===S.value);default:return!0}})),b=h.filter(j=>j.category==="Fuzzy Search").map(j=>j.value).join(" "),{filteredRecipes:y}=Kq(x,b),N=j=>{console.log("Recipe clicked:",j.name)};return t?o.jsx("div",{className:"flex items-center justify-center p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading recipes..."})]})}):n?o.jsx("div",{className:"flex items-center justify-center p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-2",children:"Error loading recipes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Cookbook"}),o.jsxs("p",{className:"text-muted-foreground",children:["Browse and search through ",r.totalRecipes," recipes"]})]})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(ga,{categories:m,onSelect:v,onCustomSearch:v})}),o.jsx(Yq,{currentMode:u,onModeChange:d})]}),o.jsx("div",{className:"my-4",children:h.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:()=>p([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(Vt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),h.map(j=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>w(j.id),title:"Click to remove",children:[j.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},j.id))]})}),o.jsxs(Qi,{defaultValue:"recipes",className:"w-full",children:[o.jsxs(Ji,{className:"mb-4",children:[o.jsx(an,{value:"recipes",children:"Recipes"}),o.jsx(an,{value:"statistics",children:"Statistics"}),o.jsx(an,{value:"meta",children:"Meta Analysis"})]}),o.jsx(wn,{value:"recipes",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Recipes (",y.length,")"]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",y.length," of ",e.length," recipes"]})]}),u==="grid"&&o.jsx(Gq,{recipes:y,variant:"default",columns:3,onRecipeClick:N,showEffects:!0,showIngredients:!0,getEffectComparisons:c}),u==="list"&&o.jsx(Zq,{recipes:y,variant:"default",onRecipeClick:N,showEffects:!0,showIngredients:!0,getEffectComparisons:c})]})}),o.jsx(wn,{value:"statistics",children:o.jsx(Xq,{statistics:r})}),o.jsx(wn,{value:"meta",children:o.jsx(Wq,{recipes:e})})]})]})}function Jq(){return o.jsx(Fn,{title:"Cookbook Reference",description:"Browse and search all available recipes. Find the perfect dish for your character's needs.",children:o.jsx(Qq,{})})}function eG({path:e,className:t=""}){return e.length===0?o.jsxs("div",{className:`space-y-2 ${t}`,children:[o.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Selected Path"}),o.jsx("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:o.jsx("span",{className:"text-sm text-muted-foreground",children:"No destiny path selected"})})]}):o.jsxs("div",{className:`space-y-2 ${t}`,children:[o.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Selected Path (",e.length," nodes)"]}),o.jsx("div",{className:"space-y-2",children:e.map((n,s)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 text-primary text-xs font-medium",children:s+1}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-sm",children:n.name}),n.description&&o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:n.description})]})]}),o.jsx(K,{variant:"secondary",className:s===e.length-1?"bg-yellow-600 text-yellow-50":"bg-blue-500",children:s===e.length-1?"Current":"Selected"})]},n.id))})]})}function M_(e){const{filterType:t,currentPath:n=[]}=e,{nodes:s,rootNodes:r}=vo(),[a,i]=g.useState([]),{possiblePaths:l}=im({fromNode:n.length>0?n[n.length-1]:void 0}),c=g.useMemo(()=>{if(t!=="build-path"||n.length===0)return s;const w=new Set,x=new Set,b=N=>{x.has(N)||(x.add(N),w.add(N),s.forEach(j=>{j.prerequisites.includes(N)&&b(j.edid)}))},y=n[n.length-1];return b(y.edid),s.filter(N=>w.has(N.edid))},[t,n,s,r]),u=g.useMemo(()=>{if(t==="build-path"){const w=new Set,x=new Set;l.forEach(N=>{N.path.forEach(j=>{w.add(j.edid)}),N.path.length>0&&x.add(N.path[N.path.length-1].edid)});const b=s.filter(N=>w.has(N.edid)),y=s.filter(N=>x.has(N.edid));return[{id:"includes-node",name:"Includes Node",placeholder:"Filter paths that include this node...",options:b.map(N=>{const j=l.filter(S=>S.path.some(k=>k.edid===N.edid)).length;return{id:`includes-${N.id}`,label:N.name,value:N.edid,category:"Includes Node",description:`${j} path${j!==1?"s":""} include ${N.name}`}})},{id:"ends-with-node",name:"Ends With Node",placeholder:"Filter paths that end with this node...",options:y.map(N=>{const j=l.filter(S=>S.path.length>0&&S.path[S.path.length-1].edid===N.edid).length;return{id:`ends-${N.id}`,label:N.name,value:N.edid,category:"Ends With Node",description:`${j} path${j!==1?"s":""} end with ${N.name}`}})}]}else{const w=[...new Set(s.flatMap(b=>b.tags))],x=[...new Set(s.flatMap(b=>b.prerequisites))];return[{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:w.map(b=>({id:`tag-${b}`,label:b,value:b,category:"Tags",description:`Nodes with ${b} tag`}))},{id:"prerequisites",name:"Prerequisites",placeholder:"Filter by prerequisite...",options:x.map(b=>{const y=s.find(N=>N.edid===b);return{id:`prereq-${b}`,label:y?y.name:b,value:b,category:"Prerequisites",description:`Nodes requiring ${y?y.name:b}`}})}]}},[t,c,s,l]),d=g.useCallback(w=>{i(x=>x.some(y=>y.type===w.type&&y.nodeName===w.nodeName)?x:[...x,w])},[]),f=g.useCallback(w=>{i(x=>x.filter(b=>b.id!==w))},[]),m=g.useCallback(()=>{i([])},[]),h=g.useCallback(()=>u.flatMap(w=>w.options),[u]),p=g.useCallback(w=>c.some(x=>x.id===w.id),[c]),v=g.useMemo(()=>t!=="build-path"||a.length===0?l.map(w=>w.path):l.map(w=>w.path).filter(w=>a.every(x=>{switch(x.type){case"includes-node":return w.some(b=>b.edid===x.nodeName||b.edid===x.nodeId);case"ends-with-node":return w.length>0&&(w[w.length-1].edid===x.nodeName||w[w.length-1].edid===x.nodeId);default:return!0}})),[t,a,l]);return{selectedFilters:a,searchCategories:u,addFilter:d,removeFilter:f,clearFilters:m,filteredPaths:v,availableNodes:c,getFilterOptions:h,isNodeAvailable:p}}function R_({searchCategories:e,selectedFilters:t,onFilterSelect:n,onFilterRemove:s,onClearFilters:r,className:a=""}){const i=e.find(d=>d.id==="includes-node"),l=e.find(d=>d.id==="ends-with-node"),c=e.find(d=>d.id==="tags"),u=e.find(d=>d.id==="prerequisites");return o.jsxs("div",{className:`space-y-4 ${a}`,children:[o.jsxs("div",{className:"flex flex-wrap gap-4",children:[i&&o.jsxs("div",{className:"space-y-2 max-w-sm",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Includes"}),o.jsx(Da,{categories:[i],onSelect:n,placeholder:i.placeholder,className:"w-full"})]}),l&&o.jsxs("div",{className:"space-y-2 max-w-sm",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Ends With"}),o.jsx(Da,{categories:[l],onSelect:n,placeholder:l.placeholder,className:"w-full"})]}),c&&o.jsxs("div",{className:"space-y-2 max-w-sm",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Tags"}),o.jsx(Da,{categories:[c],onSelect:n,placeholder:c.placeholder,className:"w-full"})]}),u&&o.jsxs("div",{className:"space-y-2 max-w-sm",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Prerequisites"}),o.jsx(Da,{categories:[u],onSelect:n,placeholder:u.placeholder,className:"w-full"})]})]}),t.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Active Filters"}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:r,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(Vt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),t.map(d=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>s(d.id),title:"Click to remove",children:[o.jsx("span",{className:"text-xs opacity-70 mr-1",children:d.type==="includes-node"?"Includes:":d.type==="ends-with-node"?"Ends:":d.type==="tags"?"Tag:":"Prereq:"}),d.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},d.id))]})]})]})}function tG({onPathChange:e,onPathComplete:t,className:n="",compact:s=!1}){var E,C;const{currentPath:r,currentNode:a,isValidPath:i,pathErrors:l,setPath:c,clearPath:u,goToPathIndex:d,isPathComplete:f,getPathSummary:m}=w0(),{possiblePaths:h}=im({fromNode:a||void 0}),{nodes:p}=vo(),v=M_({filterType:"build-path",currentPath:r}),w=v.selectedFilters.length>0?v.filteredPaths:h.map(_=>_.path),x=_=>{if(typeof _=="string")return;let P,O;if(_.category==="Includes Node")P="includes-node",O=_.id.replace(/^includes-/,"");else if(_.category==="Ends With Node")P="ends-with-node",O=_.id.replace(/^ends-/,"");else return;const $={id:_.id,type:P,nodeName:_.value,nodeId:O,label:_.label};v.addFilter($)},b=_=>{v.removeFilter(_)},y=()=>{v.clearFilters()},N=(_,P)=>{let O;if(r.length===0)O=_.slice(0,P+1);else{if(P===0)return;const $=_.slice(1,P+1);O=[...r,...$]}c(O),e==null||e(O),f&&(t==null||t(O))},j=_=>{d(_),e==null||e(r)},S=()=>{u(),e==null||e([])},k=m();return s?o.jsxs("div",{className:`space-y-4 ${n}`,children:[o.jsx(eG,{path:r}),r.length>0&&o.jsx("div",{className:"flex justify-end",children:o.jsxs(W,{variant:"outline",size:"sm",onClick:S,className:"text-xs",children:[o.jsx(qa,{className:"w-3 h-3 mr-1"}),"Clear Path"]})}),w.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Possible Remaining Paths"}),o.jsx(Ni,{className:"h-[200px]",children:o.jsx("div",{className:"p-4",children:o.jsx(Ig,{possiblePaths:w.map(_=>({path:_,isComplete:!1,endNode:_[_.length-1]})),selectedPathLength:r.length,onPathClick:N,variant:"compact"})})})]}),!i&&l.length>0&&o.jsxs("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx(xi,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:"Path Errors:"})]}),o.jsx("ul",{className:"space-y-0.5",children:l.map((_,P)=>o.jsxs("li",{children:["• ",_]},P))})]})]}):o.jsxs("div",{className:`space-y-6 ${n}`,children:[o.jsxs(ye,{children:[o.jsx(Me,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Be,{className:"flex items-center gap-2",children:[o.jsx(mg,{className:"w-5 h-5 text-primary"}),"Destiny Path Builder"]}),o.jsx("div",{className:"flex items-center gap-2",children:r.length>0&&o.jsxs(W,{variant:"outline",size:"sm",onClick:S,className:"flex items-center gap-1",children:[o.jsx(qa,{className:"w-4 h-4"}),"Clear Path"]})})]})}),o.jsxs(be,{children:[o.jsx(Jk,{path:r,allNodes:p,onBreadcrumbClick:j,className:"mb-4"}),r.length>0&&o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("span",{children:["Path Length: ",r.length]}),o.jsx("span",{children:"•"}),o.jsxs("span",{children:["Start: ",(E=k.startNode)==null?void 0:E.name]}),o.jsx("span",{children:"•"}),o.jsxs("span",{children:["Current: ",(C=k.endNode)==null?void 0:C.name]}),f&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"•"}),o.jsx(K,{variant:"default",className:"text-xs",children:"Complete"})]})]}),!i&&l.length>0&&o.jsxs("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[o.jsx(xi,{className:"w-4 h-4"}),o.jsx("span",{className:"font-medium",children:"Path Validation Errors:"})]}),o.jsx("ul",{className:"text-sm space-y-1",children:l.map((_,P)=>o.jsxs("li",{className:"text-destructive",children:["• ",_]},P))})]})]})]}),r.length>0&&o.jsxs(ye,{children:[o.jsx(Me,{children:o.jsx(Be,{className:"text-lg",children:"Current Path"})}),o.jsx(be,{children:o.jsx("div",{className:"space-y-2",children:r.map((_,P)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50",children:[o.jsx(K,{variant:"outline",className:"text-xs",children:P+1}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:_.name}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:_.description})]})]},_.id))})})]}),o.jsxs(ye,{children:[o.jsxs(Me,{children:[o.jsx(Be,{className:"text-lg",children:r.length===0?"Choose Your Starting Point":"Possible Paths"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.length===0?"Select a root destiny node to begin your path":w.length===0?v.selectedFilters.length>0?"No paths match your current filters":"You have reached the end of this destiny path":v.selectedFilters.length>0?`Showing ${w.length} filtered paths from your current position`:`Explore ${w.length} possible paths from your current position`})]}),o.jsxs(be,{className:"h-[600px] p-0",children:[o.jsx("div",{className:"p-6 pb-6",children:o.jsx(R_,{searchCategories:v.searchCategories,selectedFilters:v.selectedFilters,onFilterSelect:x,onFilterRemove:b,onClearFilters:y})}),w.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[v.selectedFilters.length>0?o.jsx(H4,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}):o.jsx(mg,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg font-medium",children:v.selectedFilters.length>0?"No paths match your filters":"Path Complete!"}),o.jsx("p",{className:"text-sm",children:v.selectedFilters.length>0?"Try adjusting your filters to see more paths.":"You've reached the end of this destiny path."})]}):o.jsx(Ni,{className:"h-[calc(600px-200px)]",children:o.jsx("div",{className:"p-6 pt-4",children:o.jsx(Ig,{possiblePaths:w.map(_=>({path:_,isComplete:!1,endNode:_[_.length-1]})),selectedPathLength:r.length,onPathClick:N})})})]})]})]})}function nG({item:e,originalNode:t,allNodes:n}){const s=r=>n.filter(a=>a.prerequisites.includes(r)).map(a=>a.name);return o.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t&&t.prerequisites.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Prereq:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:t.prerequisites.map((r,a)=>o.jsx(K,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:r},a))})]}),t&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Leads to:"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[s(t.name).map((r,a)=>o.jsx(K,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:r},a)),s(t.name).length===0&&o.jsx("span",{className:"text-xs text-muted-foreground",children:"Terminal"})]})]}),e.tags.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-semibold text-foreground",children:"Tags:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((r,a)=>o.jsx(K,{variant:"secondary",className:"text-xs",children:r},a))})]})]})}function sG({items:e,allNodes:t}){return o.jsx(Ni,{className:"h-[calc(100vh-500px)]",children:o.jsx(zk,{type:"single",collapsible:!0,className:"w-full",children:e.map(n=>o.jsxs(x0,{value:n.id,children:[o.jsx(v0,{className:"text-left hover:no-underline",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-bold text-base text-foreground truncate hover:underline",children:n.name}),o.jsx("div",{className:"text-base text-muted-foreground truncate",children:n.description})]})}),o.jsx(y0,{children:o.jsx(nG,{item:n,originalNode:t.find(s=>s.id===n.id),allNodes:t})})]},n.id))})})}function rG({items:e,filters:t=[]}){const[n,s]=g.useState(null),[r,a]=g.useState("grid"),[i,l]=g.useState({search:"",selectedFilters:{},selectedTags:[]}),c=g.useMemo(()=>{let p=e;if(i.search){const v=i.search.toLowerCase();p=p.filter(w=>w.name.toLowerCase().includes(v)||w.description.toLowerCase().includes(v)||w.tags.some(x=>x.toLowerCase().includes(v)))}return i.selectedTags.length>0&&(p=p.filter(v=>i.selectedTags.some(w=>v.tags.includes(w.value)||v.category===w.value||v.name.toLowerCase().includes(w.value.toLowerCase())))),p},[e,i]),u=g.useMemo(()=>t.length===0?[]:t.map(p=>({...p,options:p.options.map(v=>({...v,count:e.filter(w=>w.tags.includes(v.value)||w.category===v.value).length}))})),[t,e]),d=g.useCallback(p=>{s(p)},[]),f=g.useCallback(p=>{l(p)},[]),m=g.useCallback(p=>{l(v=>({...v,search:p}))},[]),h=g.useCallback(p=>{a(p)},[]);return{selectedItem:n,viewMode:r,currentFilters:i,filteredItems:c,filtersWithCounts:u,handleItemSelect:d,handleFiltersChange:f,handleSearch:m,handleViewModeChange:h,setSelectedItem:s}}function aG(){const{nodes:e,isLoading:t,error:n}=vo(),{currentPath:s,setPath:r}=w0({validatePath:!0});im({fromNode:s.length>0?s[s.length-1]:void 0});const a=M_({filterType:"reference"}),l=g.useMemo(()=>a.selectedFilters.length===0?e:e.filter(h=>a.selectedFilters.every(p=>{var v,w;switch(p.type){case"tags":return(v=h.tags)==null?void 0:v.includes(p.nodeName);case"prerequisites":return(w=h.prerequisites)==null?void 0:w.includes(p.nodeName);default:return!0}})),[e,a.selectedFilters]).map(h=>OB(h));rG({items:l,filters:[]});const c=h=>{if(typeof h=="string")return;let p,v;if(h.category==="Tags")p="tags",v=h.id.replace(/^tag-/,"");else if(h.category==="Prerequisites")p="prerequisites",v=h.id.replace(/^prereq-/,"");else return;const w={id:h.id,type:p,nodeName:h.value,nodeId:v,label:h.label};a.addFilter(w)},u=h=>{a.removeFilter(h)},d=()=>{a.clearFilters()},f=h=>{r(h)},m=h=>{r(h)};return t?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading destiny data..."})]})}):n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:n}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsx(Fn,{title:"Destiny",description:"Plan your character's destiny through the perk tree. Each node represents a powerful ability or enhancement that will shape your journey.",children:o.jsx("div",{className:"mb-6",children:o.jsxs(Qi,{defaultValue:"path",className:"w-full",children:[o.jsxs(Ji,{className:"grid w-full grid-cols-2",children:[o.jsx(an,{value:"path",children:"Path Builder"}),o.jsx(an,{value:"reference",children:"Reference"})]}),o.jsxs(wn,{value:"reference",className:"space-y-4",children:[o.jsx(R_,{searchCategories:a.searchCategories,selectedFilters:a.selectedFilters,onFilterSelect:c,onFilterRemove:u,onClearFilters:d}),o.jsx("div",{className:"w-full",children:o.jsx(sG,{items:l,allNodes:e})})]}),o.jsx(wn,{value:"path",className:"space-y-4",children:o.jsx(tG,{onPathChange:f,onPathComplete:m})})]})})})}function oG(){const{data:e,loading:t,error:n}=ek(),[s,r]=g.useState(new Set),[a,i]=g.useState("alphabetical"),[l,c]=g.useState("grid"),[u,d]=g.useState(!0),[f,m]=g.useState(!0),[h,p]=g.useState(!0),[v,w]=g.useState(Yt()),x=g.useMemo(()=>(e||[]).map(Bg),[e]),y=(()=>{const z=[...new Set((e||[]).map(D=>D.pantheon).filter(Boolean))],A=[...new Set(x.flatMap(D=>D.tags))];return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"pantheons",name:"Pantheons",placeholder:"Search by pantheon...",options:z.map(D=>({id:`pantheon-${D}`,label:D,value:D,category:"Pantheons",description:`Religions from ${D} pantheon`}))},...Yt()?[{id:"favored-races",name:"Favored Races",placeholder:"Search by favored race...",options:A.map(D=>({id:`race-${D}`,label:D,value:D,category:"Favored Races",description:`Religions that favor ${D}`}))}]:[]]})(),[N,j]=g.useState([]),S=z=>{let A;typeof z=="string"?A={id:`custom-${z}`,label:z,value:z,category:"Custom"}:A={id:z.id,label:z.label,value:z.value,category:z.category},N.find(D=>D.value===A.value)||j(D=>[...D,A])},k=z=>{j(A=>A.filter(D=>D.id!==z))},E=g.useMemo(()=>N.length===0?e||[]:(e||[]).filter(z=>N.every(A=>{var M,R,B;const D=A.value.toLowerCase();return!!((M=z.pantheon)!=null&&M.toLowerCase().includes(D)||(R=z.tags)!=null&&R.some(H=>H.toLowerCase().includes(D))||z.name.toLowerCase().includes(D)||(B=z.description)!=null&&B.toLowerCase().includes(D))})),[e,N]),C=g.useMemo(()=>{const z=[...E];switch(a){case"alphabetical":return z.sort((A,D)=>A.name.localeCompare(D.name));case"divine-type":return z.sort((A,D)=>{const M=H=>{switch(H==null?void 0:H.toLowerCase()){case"divine":return 1;case"daedric":return 2;case"yokudan":return 3;case"custom":return 4;default:return 5}},R=M(A.pantheon),B=M(D.pantheon);return R!==B?R-B:A.name.localeCompare(D.name)});default:return z}},[E,a]),_=g.useMemo(()=>C.map(Bg),[C]),P=z=>{r(A=>{const D=new Set(A);return D.has(z)?D.delete(z):D.add(z),D})},O=()=>{r(new Set(_.map(z=>z.id)))},$=()=>{r(new Set)},T=_.length>0&&_.every(z=>s.has(z.id));return _.some(z=>s.has(z.id)),t?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading religions..."})]})}):n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:n}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsxs(Fn,{title:"Religions",description:"Choose your character's religion. Each deity offers unique blessings, tenets, and powers that will guide your spiritual journey through Tamriel.",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(ga,{categories:y,onSelect:S,onCustomSearch:S})}),o.jsxs(Qf,{children:[o.jsx(Jf,{asChild:!0,children:o.jsxs(W,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[o.jsx(En,{className:"h-4 w-4"}),a==="alphabetical"?"A-Z":"Type"]})}),o.jsxs(Hc,{align:"end",children:[o.jsx(_s,{onClick:()=>i("alphabetical"),children:"Alphabetical"}),o.jsx(_s,{onClick:()=>i("divine-type"),children:"Divine Type"})]})]}),o.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[o.jsx(W,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),className:"h-8 px-3",title:"List view",children:o.jsx(oo,{className:"h-4 w-4"})}),o.jsx(W,{variant:l==="grid"?"default":"ghost",size:"sm",onClick:()=>c("grid"),className:"h-8 px-3",title:"Grid view",children:o.jsx(Fi,{className:"h-4 w-4"})})]}),o.jsx(W,{variant:"outline",size:"sm",onClick:T?$:O,className:"flex items-center justify-center",title:T?"Collapse all accordions":"Expand all accordions",children:T?o.jsx(R4,{className:"h-4 w-4"}):o.jsx(C4,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"my-4",children:N.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:()=>j([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(Vt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),N.map(z=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>k(z.id),title:"Click to remove",children:[z.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},z.id))]})}),_.length>0&&o.jsxs(vB,{children:[o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border bg-muted/30 border-border",children:[o.jsx(qf,{checked:u&&f&&h&&v,onCheckedChange:z=>{d(z),m(z),p(z),w(z)}}),o.jsx("span",{className:"text-sm font-medium",children:"Toggle All"})]}),o.jsxs(J8,{columns:Yt()?4:3,children:[o.jsx(ku,{title:"Blessings",description:"Deity blessings and effects",checked:u,onCheckedChange:d}),o.jsx(ku,{title:"Tenets",description:"Religious tenets and rules",checked:f,onCheckedChange:m}),o.jsx(ku,{title:"Boons",description:"Follower and devotee powers",checked:h,onCheckedChange:p}),Yt()&&o.jsx(ku,{title:"Favored Races",description:"Races favored by this deity",checked:v,onCheckedChange:w})]})]}),l==="grid"?o.jsx(gk,{columns:3,gap:"md",className:"w-full mt-6",children:_.map(z=>{const A=e.find(M=>M.name===z.name),D=s.has(z.id);return o.jsx(Fd,{item:z,originalReligion:A,isExpanded:D,onToggle:()=>P(z.id),className:"w-full",showBlessings:u,showTenets:f,showBoons:h,showFavoredRaces:v},z.id)})}):o.jsx("div",{className:"flex flex-col gap-4 w-full mt-6",children:_.map(z=>{const A=e.find(M=>M.name===z.name),D=s.has(z.id);return o.jsx(Fd,{item:z,originalReligion:A,isExpanded:D,onToggle:()=>P(z.id),className:"w-full",showBlessings:u,showTenets:f,showBoons:h,showFavoredRaces:v},z.id)})}),_.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No religions found matching your criteria."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]})}const iG="modulepreload",lG=function(e){return"/lorerim-arcaneum/"+e},hw={},Ks=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=lG(c),c in hw)return;hw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":iG,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return r.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function gw(e){return e.map(t=>({id:`skill-${t.id}`,type:"skill",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...t.keyAbilities||[],...t.metaTags||[],t.scaling||""],originalData:t,url:`/build/perks?skill=${t.id}`}))}function pw(e){return e.map(t=>({id:`race-${t.id}`,type:"race",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.source||"",...t.tags||[],...t.keywords||[]],originalData:t,url:"/races"}))}function xw(e){return e.map(t=>{var n;return{id:`trait-${t.id}`,type:"trait",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",...t.tags||[],...((n=t.effects)==null?void 0:n.map(s=>s.description||s.type))||[]],originalData:t,url:"/traits"}})}function vw(e){return e.map(t=>{var n,s,r,a,i,l,c,u,d,f;return{id:`religion-${t.id||t.name}`,type:"religion",name:t.name,description:((n=t.tenet)==null?void 0:n.description)||"",category:t.type||t.pantheon||"",tags:t.tags||[],searchableText:[t.name,((s=t.tenet)==null?void 0:s.description)||"",t.type||"",t.pantheon||"",...t.tags||[],...Yt()?t.favoredRaces||[]:[],...t.worshipRestrictions||[],...((a=(r=t.tenet)==null?void 0:r.effects)==null?void 0:a.map(m=>m.effectName))||[],...((l=(i=t.blessing)==null?void 0:i.effects)==null?void 0:l.map(m=>m.effectName))||[],...((u=(c=t.boon1)==null?void 0:c.effects)==null?void 0:u.map(m=>m.effectName))||[],...((f=(d=t.boon2)==null?void 0:d.effects)==null?void 0:f.map(m=>m.effectName))||[]],originalData:t,url:"/religions"}})}function yw(e){return e.map(t=>{var n,s;return{id:`birthsign-${t.id||t.edid}`,type:"birthsign",name:t.name,description:t.description,category:t.group,tags:t.tags||[],searchableText:[t.name,t.description||"",t.group||"",...t.tags||[],...((n=t.powers)==null?void 0:n.map(r=>r.name||r.description))||[],...((s=t.stat_modifications)==null?void 0:s.map(r=>r.stat))||[]],originalData:t,url:"/birthsigns"}})}function bw(e){return e.map(t=>({id:`destiny-${t.id}`,type:"destiny",name:t.name,description:t.description,category:t.category,tags:t.tags||[],searchableText:[t.name,t.description||"",t.category||"",t.lore||"",...t.tags||[],...t.prerequisites||[]],originalData:t,url:"/destiny"}))}function ww(e){return e.map(t=>{var n;return{id:`perk-${t.treeId||t.id}`,type:"perk",name:t.treeName||t.name,description:t.treeDescription||t.description,category:t.category,tags:t.tags||[],searchableText:[t.treeName||t.name,t.treeDescription||t.description||"",t.category||"",...t.tags||[],...((n=t.perks)==null?void 0:n.map(s=>s.name))||[]],originalData:t,url:"/build/perks"}})}function Nw(e){return e.map(t=>{var n,s,r,a,i,l;return{id:`perk-ref-${t.edid}`,type:"perk-reference",name:t.name,description:((s=(n=t.ranks[0])==null?void 0:n.description)==null?void 0:s.base)||"",category:t.category,tags:t.tags,searchableText:[t.name,((a=(r=t.ranks[0])==null?void 0:r.description)==null?void 0:a.base)||"",((l=(i=t.ranks[0])==null?void 0:i.description)==null?void 0:l.subtext)||"",t.skillTreeName,t.category,...t.tags,...t.prerequisites,t.isRoot?"root perk":"branch perk",t.totalRanks>1?"multi-rank":"single-rank"],originalData:t,url:`/perk-references?skill=${t.skillTree}&perk=${t.edid}`}})}function jw(e){return e.map(t=>({id:`spell-${t.editorId}`,type:"spell",name:t.name,description:t.description,category:t.school,tags:t.tags,searchableText:[t.name,t.description||"",t.school||"",t.level||"",t.tome||"",...t.tags,...t.effects.map(n=>n.name),...t.effects.map(n=>n.description),t.isAreaSpell?"area spell":"",t.isDurationSpell?"duration spell":"",t.isInstantSpell?"instant spell":"",`magicka cost ${t.magickaCost}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`,`area ${t.maxArea}`].filter(Boolean),originalData:t,url:`/spells?spell=${t.editorId}`}))}function Sw(e){return e.map(t=>({id:`recipe-${t.name}`,type:"recipe",name:t.name,description:t.description,category:t.category,tags:t.tags,searchableText:[t.name,t.description||"",t.category||"",t.output||"",t.difficulty||"",t.type||"",...t.tags,...t.ingredients.map(n=>typeof n=="string"?n:n.name||n.item||""),...t.effects.map(n=>n.name),...t.effects.map(n=>n.description),`ingredients ${t.ingredientCount}`,`effects ${t.effectCount}`,`magnitude ${t.totalMagnitude}`,`duration ${t.maxDuration}`].filter(Boolean),originalData:t,url:`/cookbook?recipe=${encodeURIComponent(t.name)}`}))}function cG(e){return{id:e.item.id,name:e.item.name,description:e.item.description||"",summary:e.item.description||"",tags:e.item.tags,category:e.item.category,imageUrl:void 0,effects:[],associatedItems:[],originalSearchResult:e}}function uG(e){return e.map(t=>{var n,s;return{field:t.key||"unknown",snippet:t.value,startIndex:((n=t.indices[0])==null?void 0:n[0])||0,endIndex:((s=t.indices[0])==null?void 0:s[1])||0}})}class dG{constructor(){Ve(this,"searchIndex",null);Ve(this,"isIndexing",!1);Ve(this,"allSearchableItems",[]);Ve(this,"indexedStores",new Set);Ve(this,"fuseOptions",{keys:[{name:"name",weight:.8},{name:"description",weight:.6},{name:"category",weight:.4},{name:"tags",weight:.5},{name:"searchableText",weight:.3}],threshold:.6,includeMatches:!0,includeScore:!0,minMatchCharLength:2,ignoreLocation:!0,useExtendedSearch:!1,findAllMatches:!0});Ve(this,"transformSkillsToSearchable",gw);Ve(this,"transformRacesToSearchable",pw);Ve(this,"transformTraitsToSearchable",xw);Ve(this,"transformReligionsToSearchable",vw);Ve(this,"transformBirthsignsToSearchable",yw);Ve(this,"transformDestinyNodesToSearchable",bw);Ve(this,"transformPerkTreesToSearchable",ww);Ve(this,"transformPerkReferencesToSearchable",Nw);Ve(this,"transformRecipesToSearchable",Sw);Ve(this,"transformSpellsToSearchable",jw)}async addToIndex(t,n){this.indexedStores.has(t)||(this.allSearchableItems.push(...n),this.indexedStores.add(t),this.searchIndex=new Xt(this.allSearchableItems,this.fuseOptions))}hasIndexedData(){return this.allSearchableItems.length>0}rebuildSearchIndex(){this.allSearchableItems.length>0&&(this.searchIndex=new Xt(this.allSearchableItems,this.fuseOptions))}async buildSearchIndex(){if(!this.isIndexing){this.isIndexing=!0;try{const{useSkillsStore:t}=await Ks(async()=>{const{useSkillsStore:j}=await Promise.resolve().then(()=>_L);return{useSkillsStore:j}},[]),{useRacesStore:n}=await Ks(async()=>{const{useRacesStore:j}=await Promise.resolve().then(()=>SL);return{useRacesStore:j}},void 0),{useTraitsStore:s}=await Ks(async()=>{const{useTraitsStore:j}=await Promise.resolve().then(()=>AL);return{useTraitsStore:j}},void 0),{useReligionsStore:r}=await Ks(async()=>{const{useReligionsStore:j}=await Promise.resolve().then(()=>EL);return{useReligionsStore:j}},void 0),{useBirthsignsStore:a}=await Ks(async()=>{const{useBirthsignsStore:j}=await Promise.resolve().then(()=>wL);return{useBirthsignsStore:j}},void 0),{useDestinyNodesStore:i}=await Ks(async()=>{const{useDestinyNodesStore:j}=await Promise.resolve().then(()=>jL);return{useDestinyNodesStore:j}},void 0),{usePerkTreesStore:l}=await Ks(async()=>{const{usePerkTreesStore:j}=await Promise.resolve().then(()=>az);return{usePerkTreesStore:j}},void 0),{useRecipesStore:c}=await Ks(async()=>{const{useRecipesStore:j}=await Promise.resolve().then(()=>q6);return{useRecipesStore:j}},void 0),{SpellDataProvider:u}=await Ks(async()=>{const{SpellDataProvider:j}=await Promise.resolve().then(()=>G6);return{SpellDataProvider:j}},void 0),d=t.getState().data,f=n.getState().data,m=s.getState().data,h=r.getState().data,p=a.getState().data,v=i.getState().data,w=l.getState().data,x=c.getState().data,y=await u.getInstance().loadSpells();if(!(d!=null&&d.length)||!(f!=null&&f.length)||!(m!=null&&m.length)||!(h!=null&&h.length)||!(p!=null&&p.length)||!(v!=null&&v.length)||!(w!=null&&w.length)||!(x!=null&&x.length)||!(y!=null&&y.length))throw console.log("Stores not loaded yet, cannot build search index"),new Error("Store data not available - stores must be loaded before building search index");const N=[...gw(d),...pw(f),...xw(m),...vw(h),...yw(p),...bw(v),...ww(w),...Sw(x),...jw(y)];this.allSearchableItems=N,this.searchIndex=new Xt(N,this.fuseOptions)}catch(t){throw console.error("Failed to build search index:",t),t}finally{this.isIndexing=!1}}}async addPerkReferencesToIndex(t){if(this.indexedStores.has("perk-references"))return;const n=Nw(t);this.allSearchableItems.push(...n),this.indexedStores.add("perk-references"),this.searchIndex=new Xt(this.allSearchableItems,this.fuseOptions)}search(t,n){if(!this.searchIndex)return[];if(!t.trim()||t.trim()==="*"){let i=this.allSearchableItems;return n&&(i=this.applyFilters(i,n)),i.map(l=>({item:l,score:1,matches:[],highlights:[]}))}if(!this.searchIndex)return console.warn("Search index not ready, returning empty results"),[];const s=this.searchIndex.search(t);let r=s;return n&&(r=s.filter(i=>{const l=i.item;return this.applyFilters([l],n).length>0})),r.map(i=>({item:i.item,score:i.score||0,matches:[...i.matches||[]],highlights:uG([...i.matches||[]])}))}applyFilters(t,n){return t.filter(s=>{var r,a,i,l,c,u,d;if(n.types.length>0&&!n.types.includes(s.type)||n.categories.length>0&&s.category&&!n.categories.includes(s.category))return!1;if(n.tags.length>0){const f=s.tags.map(p=>p.toLowerCase());if(!n.tags.map(p=>p.toLowerCase()).some(p=>f.some(v=>v.includes(p)||p.includes(v))))return!1}if(s.type==="skill"&&((r=n.skillCategories)!=null&&r.length)&&(!s.category||!n.skillCategories.includes(s.category))||s.type==="race"&&((a=n.raceTypes)!=null&&a.length)&&(!s.category||!n.raceTypes.includes(s.category))||s.type==="trait"&&((i=n.traitTypes)!=null&&i.length)&&(!s.category||!n.traitTypes.includes(s.category))||s.type==="religion"&&((l=n.religionTypes)!=null&&l.length)&&(!s.category||!n.religionTypes.includes(s.category))||s.type==="birthsign"&&((c=n.birthsignGroups)!=null&&c.length)&&(!s.category||!n.birthsignGroups.includes(s.category))||s.type==="spell"&&((u=n.spellSchools)!=null&&u.length)&&(!s.category||!n.spellSchools.includes(s.category)))return!1;if(s.type==="spell"&&((d=n.spellLevels)!=null&&d.length)){const f=s.originalData;if(!f.level||!n.spellLevels.includes(f.level))return!1}return!0})}getAvailableFilters(){const t=new Map,n=new Map,s=new Map;return this.allSearchableItems.forEach(r=>{const a=t.get(r.type)||0;if(t.set(r.type,a+1),r.category){const i=n.get(r.category)||0;n.set(r.category,i+1)}r.tags.forEach(i=>{const l=s.get(i)||0;s.set(i,l+1)})}),{types:Array.from(t.entries()).map(([r,a])=>({value:r,label:r.charAt(0).toUpperCase()+r.slice(1),count:a})),categories:Array.from(n.entries()).map(([r,a])=>({value:r,label:r,count:a})),tags:Array.from(s.entries()).map(([r,a])=>({value:r,label:r,count:a}))}}getSearchableItems(){return this.allSearchableItems}isReady(){return this.searchIndex!==null&&!this.isIndexing}isLoading(){return this.isIndexing}}const fG={skill:{label:"Skill",icon:"⚔️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},race:{label:"Race",icon:"👤",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},trait:{label:"Trait",icon:"🎯",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},religion:{label:"Religion",icon:"⛪",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},birthsign:{label:"Birthsign",icon:"⭐",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},destiny:{label:"Destiny",icon:"🌟",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},perk:{label:"Perk",icon:"🔮",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"}};function mG({type:e,className:t,variant:n="default"}){const s=fG[e]||{label:e.charAt(0).toUpperCase()+e.slice(1),icon:"📄",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return n==="default"?o.jsxs(K,{className:U("inline-flex items-center gap-1 px-2 py-1 text-xs font-medium",s.color,t),children:[o.jsx("span",{children:s.icon}),o.jsx("span",{children:s.label})]}):o.jsxs(K,{variant:n,className:U("inline-flex items-center gap-1",t),children:[o.jsx("span",{children:s.icon}),o.jsx("span",{children:s.label})]})}function hG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){return o.jsxs(he,{className:U("transition-all hover:shadow-md",t),expanded:n,onToggle:s,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(mG,{type:e.type})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h4",{className:"font-medium text-sm truncate",children:e.name}),e.category&&o.jsx(K,{variant:"outline",className:"text-xs",children:e.category})]})})]})}),o.jsxs(he.Summary,{children:[e.description&&o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((a,i)=>o.jsx(K,{variant:"secondary",className:"text-xs",children:a},`${a}-${i}`)),e.tags.length>3&&o.jsxs(K,{variant:"secondary",className:"text-xs",children:["+",e.tags.length-3]})]})]}),o.jsxs(he.Details,{children:[e.tags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"All Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((a,i)=>o.jsx(K,{variant:"secondary",className:"text-xs",children:a},`${a}-${i}`))})]}),e.description&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]})]})}function yo(e,t){return e?e.find(s=>{const r=!!s.id&&s.id===t.id,a=!!s.edid&&s.edid===t.edid,i=!!s.treeId&&s.treeId===t.treeId,l=!!s.name&&s.name===t.name;return r||a||i||l}):void 0}function gG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const a=co(l=>l.data),i=yo(a,e.originalData);return i?o.jsx(Bd,{originalBirthsign:i,isExpanded:n,onToggle:s,className:t,showToggle:!1}):(console.error("Birthsign not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalBirthsignsInStore:a.length,firstFewBirthsigns:a.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function pG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const a=Yi(l=>l.data),i=yo(a,e.originalData);return i?o.jsxs(he,{className:t,expanded:n,onToggle:s,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:i.icon?o.jsx("img",{src:i.icon,alt:i.name,className:"w-6 h-6 object-contain"}):o.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:i.name.charAt(0)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-primary",children:i.name}),i.category&&o.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),o.jsx(he.Summary,{children:i.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.description})}),o.jsxs(he.Details,{children:[i.effects&&i.effects.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Effects"}),o.jsx("div",{className:"space-y-1",children:i.effects.map((l,c)=>o.jsxs("div",{className:"text-sm text-muted-foreground",children:["• ",l]},c))})]}),i.tags&&i.tags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((l,c)=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]})]})]}):(console.error("Destiny node not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalDestinyNodesInStore:a.length,firstFewDestinyNodes:a.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}class xG{constructor(t){Ve(this,"perkNodes",[]);this.perkNodes=this.transformPerkTrees(t)}transformPerkTrees(t){const n=[];return t.forEach(s=>{s.perks.forEach(r=>{var i,l,c,u,d;const a={...r,skillTree:s.treeId,skillTreeName:s.treeName,isRoot:r.isRoot||!1,hasChildren:(((l=(i=r.connections)==null?void 0:i.children)==null?void 0:l.length)||0)>0,prerequisites:((c=r.connections)==null?void 0:c.parents)||[],connections:{parents:((u=r.connections)==null?void 0:u.parents)||[],children:((d=r.connections)==null?void 0:d.children)||[]},searchableText:this.generateSearchableText(r,s),tags:this.generateTags(r,s),category:this.determineCategory(s.treeName),minLevel:this.calculateMinLevel(r)};n.push(a)})}),n}calculateMinLevel(t){var s,r;let n=0;if(t.ranks&&t.ranks.length>0&&t.ranks.forEach(a=>{var i,l;(l=(i=a.prerequisites)==null?void 0:i.skillLevel)!=null&&l.level&&(n=Math.max(n,a.prerequisites.skillLevel.level))}),n===0)if(t.isRoot)n=1;else{const a=((r=(s=t.connections)==null?void 0:s.parents)==null?void 0:r.length)||0;n=Math.max(1,a*5)}return n}generateSearchableText(t,n){var r,a;return[t.name,(r=t.ranks)==null?void 0:r.map(i=>{var l;return(l=i.description)==null?void 0:l.base}).join(" "),(a=t.ranks)==null?void 0:a.map(i=>{var l;return(l=i.description)==null?void 0:l.subtext}).join(" "),n.treeName,this.determineCategory(n.treeName)].filter(Boolean).join(" ").toLowerCase()}generateTags(t,n){var a,i,l,c;const s=[n.treeName,this.determineCategory(n.treeName),t.isRoot?"root":"branch",t.totalRanks>1?"multi-rank":"single-rank"];((i=(a=t.connections)==null?void 0:a.parents)==null?void 0:i.length)>0&&s.push("has-prerequisites"),((c=(l=t.connections)==null?void 0:l.children)==null?void 0:c.length)>0&&s.push("has-children");const r=this.calculateMinLevel(t);return r>0&&s.push(`level-${r}+`),s}determineCategory(t){return{Alchemy:"Magic",Alteration:"Magic",Conjuration:"Magic",Destruction:"Magic",Illusion:"Magic",Restoration:"Magic",Archery:"Combat",Block:"Combat","Heavy Armor":"Combat","One Handed":"Combat",Smithing:"Combat","Two Handed":"Combat","Light Armor":"Stealth",Lockpicking:"Stealth",Pickpocket:"Stealth",Sneak:"Stealth",Speech:"Stealth",Enchanting:"Crafting"}[t]||"Other"}getAllPerks(){return this.perkNodes}getPerksBySkill(t){return this.perkNodes.filter(n=>n.skillTree===t)}getPerksByCategory(t){return this.perkNodes.filter(n=>n.category===t)}getPerksByPrerequisite(t){return this.perkNodes.filter(n=>n.prerequisites.includes(t))}getRootPerks(){return this.perkNodes.filter(t=>t.isRoot)}getMultiRankPerks(){return this.perkNodes.filter(t=>t.totalRanks>1)}searchPerks(t){const n=t.toLowerCase();return this.perkNodes.filter(s=>s.searchableText.includes(n)||s.name.toLowerCase().includes(n)||s.tags.some(r=>r.toLowerCase().includes(n)))}}function D_(){const{data:e,loading:t,error:n}=l0(),s=g.useMemo(()=>e?new xG(e):null,[e]),r=g.useMemo(()=>(s==null?void 0:s.getAllPerks())||[],[s]);return{dataProvider:s,allPerks:r,loading:t,error:n}}function bm(){const{dataProvider:e,allPerks:t,loading:n,error:s}=D_(),r=g.useMemo(()=>{const h=new Map;return t.forEach(p=>{h.has(p.skillTree)||h.set(p.skillTree,{id:p.skillTree,name:p.skillTreeName,count:0});const v=h.get(p.skillTree);v.count++}),Array.from(h.values()).sort((p,v)=>p.name.localeCompare(v.name))},[t]),a=g.useMemo(()=>{const h=new Map;return t.forEach(p=>{h.has(p.category)||h.set(p.category,{name:p.category,count:0});const v=h.get(p.category);v.count++}),Array.from(h.values()).sort((p,v)=>p.name.localeCompare(v.name))},[t]),i=g.useMemo(()=>{const h=new Set;return t.forEach(p=>{p.tags.forEach(v=>h.add(v))}),Array.from(h).sort()},[t]),l=g.useMemo(()=>t.filter(h=>h.isRoot),[t]),c=g.useMemo(()=>t.filter(h=>h.totalRanks>1),[t]),u=g.useMemo(()=>t.filter(h=>h.totalRanks===1),[t]),d=g.useMemo(()=>h=>(e==null?void 0:e.getPerksBySkill(h))||[],[e]),f=g.useMemo(()=>h=>(e==null?void 0:e.getPerksByCategory(h))||[],[e]),m=g.useMemo(()=>h=>(e==null?void 0:e.searchPerks(h))||[],[e]);return{allPerks:t,skillTrees:r,categories:a,tags:i,rootPerks:l,multiRankPerks:c,singleRankPerks:u,getPerksBySkill:d,getPerksByCategory:f,searchPerks:m,loading:n,error:s,dataProvider:e}}const vG={skill:{Alchemy:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Alteration:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Archery:"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200",Block:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Conjuration:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200",Destruction:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Enchanting:"bg-indigo-100 text-indigo-800 border-indigo-200 hover:bg-indigo-200","Heavy Armor":"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200",Illusion:"bg-pink-100 text-pink-800 border-pink-200 hover:bg-pink-200","Light Armor":"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200",Lockpicking:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200","One-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Pickpocket:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Restoration:"bg-teal-100 text-teal-800 border-teal-200 hover:bg-teal-200",Smithing:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Sneak:"bg-slate-100 text-slate-800 border-slate-200 hover:bg-slate-200",Speech:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200","Two-Handed":"bg-red-100 text-red-800 border-red-200 hover:bg-red-200"},category:{Combat:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200",Magic:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200",Stealth:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200",Crafting:"bg-amber-100 text-amber-800 border-amber-200 hover:bg-amber-200",Survival:"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200",Social:"bg-cyan-100 text-cyan-800 border-cyan-200 hover:bg-cyan-200"},rank:{"1 rank":"bg-blue-100 text-blue-800 border-blue-200","2 ranks":"bg-green-100 text-green-800 border-green-200","3 ranks":"bg-purple-100 text-purple-800 border-purple-200","4 ranks":"bg-orange-100 text-orange-800 border-orange-200","5 ranks":"bg-red-100 text-red-800 border-red-200"},availability:{Available:"bg-green-100 text-green-800 border-green-200",Unavailable:"bg-red-100 text-red-800 border-red-200","Prerequisites Met":"bg-blue-100 text-blue-800 border-blue-200","Prerequisites Missing":"bg-gray-100 text-gray-800 border-gray-200"},level:{"Level 1+":"bg-green-100 text-green-800 border-green-200","Level 5+":"bg-blue-100 text-blue-800 border-blue-200","Level 10+":"bg-purple-100 text-purple-800 border-purple-200","Level 15+":"bg-orange-100 text-orange-800 border-orange-200","Level 20+":"bg-red-100 text-red-800 border-red-200","Level 25+":"bg-indigo-100 text-indigo-800 border-indigo-200","Level 30+":"bg-pink-100 text-pink-800 border-pink-200","Level 35+":"bg-teal-100 text-teal-800 border-teal-200","Level 40+":"bg-cyan-100 text-cyan-800 border-cyan-200","Level 45+":"bg-emerald-100 text-emerald-800 border-emerald-200","Level 50+":"bg-amber-100 text-amber-800 border-amber-200"},root:{Root:"bg-gold-100 text-gold-800 border-gold-200 hover:bg-gold-200"}},yG={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},bG="bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function zo({label:e,type:t,size:n="md",className:s}){const a=vG[t][e]||bG;return o.jsx(K,{variant:"outline",className:U(a,yG[n],"font-medium transition-colors",s),children:e})}function op({item:e,className:t,isExpanded:n=!1,onToggle:s,disableHover:r=!1,viewMode:a="grid"}){const i=e.originalPerk,{allPerks:l}=bm();if(!i)return null;const u=(d=>d.map(f=>{const m=l.find(h=>h.edid===f);return(m==null?void 0:m.name)||f}))(i.prerequisites);return o.jsxs(he,{className:t,expanded:n,onToggle:s,disableHover:r,children:[o.jsxs(he.Header,{children:[o.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:e.name.charAt(0)})}),o.jsx("div",{className:"flex-1 min-w-0",children:a==="grid"?o.jsxs("div",{className:"space-y-1",children:[o.jsx(bt,{className:"text-primary font-semibold truncate",children:e.name}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.skillTreeName&&o.jsx(zo,{label:i.skillTreeName,type:"skill",size:"sm"}),i.totalRanks>1&&o.jsx(zo,{label:`${i.totalRanks} ranks`,type:"rank",size:"sm"}),i.minLevel&&o.jsx(zo,{label:`Level ${i.minLevel}+`,type:"level",size:"sm"})]})]}):o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx(bt,{className:"text-primary font-semibold truncate",children:e.name}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.skillTreeName&&o.jsx(zo,{label:i.skillTreeName,type:"skill",size:"sm"}),i.totalRanks>1&&o.jsx(zo,{label:`${i.totalRanks} ranks`,type:"rank",size:"sm"}),i.minLevel&&o.jsx(zo,{label:`Level ${i.minLevel}+`,type:"level",size:"sm"})]})]})})]}),o.jsxs(he.Summary,{children:[o.jsx(Ke,{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((d,f)=>o.jsx(K,{variant:"outline",className:"text-xs",children:d},f)),e.tags.length>3&&o.jsxs(eS,{className:"text-muted-foreground",children:["+",e.tags.length-3," more"]})]})]}),o.jsxs(he.Details,{children:[i.prerequisites&&i.prerequisites.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Prerequisites"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:u.map((d,f)=>o.jsx(K,{variant:"secondary",className:"text-xs",children:d},f))})]}),i.ranks&&i.ranks.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Perk Ranks"}),o.jsx("div",{className:"space-y-2",children:i.ranks.map((d,f)=>{var m;return o.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[o.jsx("div",{className:"flex items-center justify-between mb-1",children:o.jsxs("span",{className:"font-medium text-sm",children:["Rank ",f+1]})}),((m=d.description)==null?void 0:m.base)&&o.jsx(Ke,{className:"text-sm text-muted-foreground",children:d.description.base})]},f)})})]}),e.tags.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-medium text-foreground mb-2",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((d,f)=>o.jsx(K,{variant:"outline",className:"text-xs",children:d},f))})]})]})]})}function z_(e,t){var i,l,c,u,d,f;const n=((l=(i=t.perks)==null?void 0:i.selected)==null?void 0:l[e.skillTree])||[],s=((u=(c=t.perks)==null?void 0:c.ranks)==null?void 0:u[e.skillTree])||{},r=n.includes(e.edid),a=s[e.edid]||0;return{id:e.edid,name:e.name,description:((f=(d=e.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",category:e.category,tags:e.tags,isSelected:r,originalPerk:e,skillTree:e.skillTree,skillTreeName:e.skillTreeName,isRoot:e.isRoot,hasChildren:e.hasChildren,prerequisites:e.prerequisites,connections:e.connections,totalRanks:e.totalRanks,currentRank:a,isAvailable:e.isRoot||e.prerequisites.every(m=>n.includes(m)),minLevel:e.minLevel}}function wG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const{build:a}=gt(),{allPerks:i}=bm(),l=e.originalData,c=i.find(f=>f.edid===(l==null?void 0:l.edid));if(!c)return console.warn("Perk reference not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData}),null;const d={...z_(c,a),originalPerk:c};return o.jsx(op,{item:d,className:t,isExpanded:n,onToggle:s,viewMode:r})}function NG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){var c;const a=lo(u=>u.data),i=yo(a,e.originalData);if(!i)return console.error("Perk tree not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalPerkTreesInStore:a.length,firstFewPerkTrees:a.slice(0,3).map(u=>({treeId:u.treeId,treeName:u.treeName||u.name}))}),null;const l=((c=i.perks)==null?void 0:c.length)||0;return o.jsxs(he,{className:t,expanded:n,onToggle:s,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:(i.treeName||i.name).charAt(0)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-primary",children:i.treeName||i.name}),i.category&&o.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),o.jsxs(he.Summary,{children:[i.treeDescription&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.treeDescription}),l>0&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[o.jsx("span",{className:"font-medium",children:"Perks:"})," ",l," total"]})]}),o.jsxs(he.Details,{children:[i.perks&&i.perks.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Sample Perks"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.perks.slice(0,6).map((u,d)=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:u.name},`${u.edid}-${d}`)),i.perks.length>6&&o.jsxs("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded text-muted-foreground",children:["+",i.perks.length-6," more"]})]})]}),i.tags&&i.tags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((u,d)=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-secondary text-secondary-foreground rounded",children:u},`${u}-${d}`))})]})]})]})}function jG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const a=ca(c=>c.data),i=yo(a,e.originalData);if(!i)return console.error("Race not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalRacesInStore:a.length,firstFewRaces:a.slice(0,3).map(c=>({edid:c.edid,name:c.name}))}),null;const l={id:i.id||i.edid||i.name,name:i.name,description:i.description||"",summary:i.description||"",category:i.category||"",tags:i.tags||[],type:"race",effects:[]};return o.jsx("div",{className:t,children:o.jsx(Vc,{item:{...l,originalRace:i},isExpanded:n,onToggle:s,showToggle:!1,disableHover:!1,className:"w-full"})})}function SG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){var u,d,f,m,h,p,v,w,x,b,y,N,j,S,k,E,C,_,P,O;const a=Xi($=>$.data),i=yo(a,e.originalData);if(!i)return console.error("Religion not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalReligionsInStore:a.length,firstFewReligions:a.slice(0,3).map($=>({id:$.id,name:$.name}))}),null;const l={name:i.name,type:i.type||i.pantheon||"Unknown",blessing:{spellId:((u=i.blessing)==null?void 0:u.spellId)||"",spellName:((d=i.blessing)==null?void 0:d.spellName)||"",effects:((f=i.blessing)==null?void 0:f.effects)||[]},boon1:{spellId:((m=i.boon1)==null?void 0:m.spellId)||"",spellName:((h=i.boon1)==null?void 0:h.spellName)||"",effects:((p=i.boon1)==null?void 0:p.effects)||[]},boon2:{spellId:((v=i.boon2)==null?void 0:v.spellId)||"",spellName:((w=i.boon2)==null?void 0:w.spellName)||"",effects:((x=i.boon2)==null?void 0:x.effects)||[]},tenet:{spellId:((b=i.tenet)==null?void 0:b.spellId)||"",spellName:((y=i.tenet)==null?void 0:y.spellName)||"",header:((N=i.tenet)==null?void 0:N.header)||"",description:((j=i.tenet)==null?void 0:j.description)||"",effects:((S=i.tenet)==null?void 0:S.effects)||[]},favoredRaces:i.favoredRaces||[],worshipRestrictions:i.worshipRestrictions||[]},c={id:i.id||i.name,name:i.name,description:((k=i.tenet)==null?void 0:k.description)||"",category:i.type||i.pantheon||"",tags:i.favoredRaces||i.tags||[],type:"religion",summary:((E=i.tenet)==null?void 0:E.description)||"",effects:[...((_=(C=i.tenet)==null?void 0:C.effects)==null?void 0:_.map($=>({type:"positive",name:$.effectName,description:$.effectDescription,value:$.magnitude,target:$.targetAttribute||""})))||[],...((O=(P=i.blessing)==null?void 0:P.effects)==null?void 0:O.map($=>({type:"positive",name:$.effectName,description:$.effectDescription,value:$.magnitude,target:$.targetAttribute||""})))||[]]};return o.jsx("div",{className:t,children:o.jsx(Fd,{item:c,originalReligion:l,isExpanded:n,onToggle:s,className:"w-full",showBlessings:!0,showTenets:!0,showBoons:!0,showFavoredRaces:Yt(),disableHover:!1,showToggle:!1})})}function kG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const a=uo(l=>l.data),i=yo(a,e.originalData);return i?o.jsxs(he,{className:t,expanded:n,onToggle:s,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:i.name.charAt(0)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-primary",children:i.name}),i.category&&o.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),o.jsxs(he.Summary,{children:[i.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.description}),i.keyAbilities&&i.keyAbilities.length>0&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[o.jsx("span",{className:"font-medium",children:"Key abilities:"})," ",i.keyAbilities.slice(0,2).join(", "),i.keyAbilities.length>2&&"..."]})]}),o.jsxs(he.Details,{children:[i.tags&&i.tags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((l,c)=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),i.keyAbilities&&i.keyAbilities.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Key Abilities"}),o.jsx("div",{className:"space-y-1",children:i.keyAbilities.map((l,c)=>o.jsxs("div",{className:"text-sm text-muted-foreground",children:["• ",l]},c))})]})]})]}):(console.error("Skill not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalSkillsInStore:a.length,firstFewSkills:a.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}function CG({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){const a=fo(l=>l.data),i=yo(a,e.originalData);return i?o.jsxs(he,{className:t,expanded:n,onToggle:s,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:i.name.charAt(0)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-primary",children:i.name}),i.category&&o.jsx("span",{className:"text-sm text-muted-foreground",children:i.category})]})]})}),o.jsx(he.Summary,{children:i.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:i.description})}),o.jsxs(he.Details,{children:[i.tags&&i.tags.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:i.tags.map((l,c)=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-muted rounded",children:l},`${l}-${c}`))})]}),i.description&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]})]})]}):(console.error("Trait not found in store:",{searchItemName:e.name,searchItemId:e.id,searchItemOriginalData:e.originalData,totalTraitsInStore:a.length,firstFewTraits:a.slice(0,3).map(l=>({id:l.id,name:l.name}))}),null)}const EG={Destruction:RN,Restoration:Df,Conjuration:p4,Illusion:TN,Alteration:ys,"":Pl},_G={Novice:"bg-green-100 text-green-800 border-green-200",Apprentice:"bg-blue-100 text-blue-800 border-blue-200",Adept:"bg-purple-100 text-purple-800 border-purple-200",Expert:"bg-orange-100 text-orange-800 border-orange-200",Master:"bg-red-100 text-red-800 border-red-200"};function K0({spell:e,className:t,isExpanded:n=!1,onToggle:s,disableHover:r=!1}){var l;const a=EG[e.school]||Pl,i=()=>{s==null||s()};return o.jsxs(he,{className:t,expanded:n,onToggle:i,disableHover:r,children:[o.jsx(he.Header,{children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(a,{className:"w-5 h-5 text-muted-foreground"}),o.jsx("h3",{className:"text-primary font-semibold text-lg",children:e.name}),o.jsx("span",{className:"ml-auto transition-transform duration-200 text-muted-foreground",children:o.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 8l4 4 4-4"})})})]})}),o.jsx(he.Summary,{children:o.jsxs("div",{className:"px-4 py-2 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 7v14"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"})]}),o.jsx("span",{children:e.school})]}),o.jsx(K,{variant:"secondary",className:_G[e.level]||"",children:e.level})]}),o.jsx(Ie,{text:e.description,className:"text-sm text-muted-foreground mb-3",as:"p"})]})}),o.jsx(he.Details,{children:o.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[e.hasEffects&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Effects"}),o.jsx("div",{className:"space-y-2",children:e.effects.map((c,u)=>o.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-medium text-sm",children:c.name}),c.magnitude>0&&o.jsx(K,{variant:"outline",className:"text-xs",children:c.magnitude})]}),o.jsx(Ie,{text:c.description,className:"text-sm text-muted-foreground",as:"p"}),o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-muted-foreground",children:[c.duration>0&&o.jsxs("span",{children:["Duration: ",c.duration,"s"]}),c.area>0&&o.jsxs("span",{children:["Area: ",c.area,"ft"]})]})]},u))})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Statistics"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Magicka Cost:"}),o.jsxs("span",{className:"font-medium",children:[e.magickaCost," MP"]})]}),e.totalMagnitude>0&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Total Magnitude:"}),o.jsx("span",{className:"font-medium",children:e.totalMagnitude})]}),e.maxDuration>0&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Max Duration:"}),o.jsxs("span",{className:"font-medium",children:[e.maxDuration,"s"]})]}),e.maxArea>0&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Max Area:"}),o.jsxs("span",{className:"font-medium",children:[e.maxArea,"ft"]})]})]})]}),(e.tome||((l=e.vendors)==null?void 0:l.length))&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Additional Info"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[e.tome&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-muted-foreground",children:"Tome:"}),o.jsx("span",{children:e.tome})]}),e.vendors&&e.vendors.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-muted-foreground",children:"Vendors:"}),o.jsx("span",{children:e.vendors.join(", ")})]})]})]}),e.tags&&e.tags.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-lg font-medium text-foreground mb-3",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((c,u)=>o.jsx(K,{variant:"outline",className:"text-xs",children:c},u))})]})]})})]})}const AG=({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="card"})=>{const a=e.originalData;if(!a)return console.warn("SpellSearchCard: Missing spell data for item:",e),o.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[o.jsx("h3",{className:"font-semibold",children:"Spell not found"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});if(!a.name||!a.editorId)return console.warn("SpellSearchCard: Invalid spell data structure:",a),o.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[o.jsx("h3",{className:"font-semibold",children:"Invalid spell data"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const i=L.useCallback(()=>{s&&s()},[s]);return o.jsx(K0,{spell:a,isExpanded:n,onToggle:i,className:t})},TG=({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"})=>{const a=e.originalData;if(!a||!a.name)return console.warn("RecipeSearchCard: Missing or invalid recipe data for item:",e),o.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[o.jsx("h3",{className:"font-semibold",children:"Recipe not found"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e.name})]});const i=Ge.addComputedProperties(a),l=L.useCallback(()=>{s&&s()},[s]);return o.jsx(W0,{recipe:i,variant:r==="list"?"compact":"default",isSelected:!1,onClick:l,showEffects:!0,showIngredients:!0,className:t})};function kw({item:e,className:t,isExpanded:n=!1,onToggle:s,viewMode:r="grid"}){switch(e.type){case"race":return o.jsx(jG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"skill":return o.jsx(kG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"trait":return o.jsx(CG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"birthsign":return o.jsx(gG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"destiny":return o.jsx(pG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"religion":return o.jsx(SG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"perk":return o.jsx(NG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"spell":return o.jsx(AG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"perk-reference":return o.jsx(wG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});case"recipe":return o.jsx(TG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r});default:return o.jsx(hG,{item:e,className:t,isExpanded:n,onToggle:s,viewMode:r})}}function MG({item:e}){return o.jsx("div",{className:`w-full border-2 rounded-lg p-4 ${e.color} transition-all duration-200 hover:shadow-lg`,style:{minHeight:`${e.height}px`},"data-testid":`test-card-${e.id}`,children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:e.title}),o.jsxs("span",{className:"text-xs text-gray-500",children:["#",e.id.slice(-6)]})]}),o.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((t,n)=>o.jsx("span",{className:"px-2 py-1 text-xs bg-white/50 rounded-full text-gray-700 border",children:t},n))}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Height: ",e.height,"px"]})]})})}let kh=null;function RG(){return kh||(kh=new dG),kh}function Q0(){const[e,t]=g.useState(!1),[n,s]=g.useState(!1),[r,a]=g.useState(null),i=uo(j=>j.data),l=ca(j=>j.data),c=fo(j=>j.data),u=Xi(j=>j.data),d=co(j=>j.data),f=Yi(j=>j.data),m=lo(j=>j.data),h=tr(j=>j.data),p=Ho(j=>j.data),{allPerks:v}=D_(),w=RG(),x=g.useCallback(async(j,S,k)=>{if(S!=null&&S.length)try{const E=k(S);await w.addToIndex(j,E)}catch(E){console.error(`Failed to index ${j}:`,E)}},[w]);g.useEffect(()=>{i!=null&&i.length&&x("skills",i,w.transformSkillsToSearchable)},[i,x]),g.useEffect(()=>{l!=null&&l.length&&x("races",l,w.transformRacesToSearchable)},[l,x]),g.useEffect(()=>{c!=null&&c.length&&x("traits",c,w.transformTraitsToSearchable)},[c,x]),g.useEffect(()=>{u!=null&&u.length&&x("religions",u,w.transformReligionsToSearchable)},[u,x]),g.useEffect(()=>{d!=null&&d.length&&x("birthsigns",d,w.transformBirthsignsToSearchable)},[d,x]),g.useEffect(()=>{f!=null&&f.length&&x("destinyNodes",f,w.transformDestinyNodesToSearchable)},[f,x]),g.useEffect(()=>{m!=null&&m.length&&x("perkTrees",m,w.transformPerkTreesToSearchable)},[m,x]),g.useEffect(()=>{h!=null&&h.length&&x("recipes",h,w.transformRecipesToSearchable)},[h,x]),g.useEffect(()=>{v!=null&&v.length&&x("perk-references",v,w.transformPerkReferencesToSearchable)},[v,x]),g.useEffect(()=>{p!=null&&p.length&&x("spells",p,w.transformSpellsToSearchable)},[p,x]),g.useEffect(()=>{((i==null?void 0:i.length)||(l==null?void 0:l.length)||(c==null?void 0:c.length)||(u==null?void 0:u.length)||(d==null?void 0:d.length)||(f==null?void 0:f.length)||(m==null?void 0:m.length)||(h==null?void 0:h.length)||(v==null?void 0:v.length)||(p==null?void 0:p.length))&&w.hasIndexedData()&&(w.rebuildSearchIndex(),t(!0))},[i,l,c,u,d,f,m,h,v,p,w]);const b=g.useCallback((j,S)=>j.trim()?w.search(j,S):[],[w]),y=g.useCallback(()=>w.getAvailableFilters(),[w]),N=g.useCallback(()=>w.getSearchableItems(),[w]);return{isReady:e,isIndexing:n,error:r,search:b,getAvailableFilters:y,getSearchableItems:N}}function Ch(e,t){return e.length!==t.length?!1:e.every((n,s)=>n===t[s])}function Cw(e){var t,n,s;return{tags:((t=e.get("tags"))==null?void 0:t.split(",").filter(Boolean))||[],types:((n=e.get("types"))==null?void 0:n.split(",").filter(Boolean))||[],categories:((s=e.get("categories"))==null?void 0:s.split(",").filter(Boolean))||[],viewMode:e.get("view")||"grid"}}function J0(){const[e,t]=qD(),n=g.useRef(!1),s=g.useRef(""),r=g.useRef(null),a=Cw(e),[i,l]=g.useState({types:a.types,categories:a.categories,tags:a.tags}),[c,u]=g.useState(a.viewMode);g.useEffect(()=>{if(n.current)return;const v=e.toString();if(v===s.current)return;s.current=v;const w=Cw(e);Ch(w.types,i.types)||l(x=>({...x,types:w.types})),Ch(w.categories,i.categories)||l(x=>({...x,categories:w.categories})),Ch(w.tags,i.tags)||l(x=>({...x,tags:w.tags})),w.viewMode!==c&&u(w.viewMode)},[e,i.types,i.categories,i.tags,c]),g.useEffect(()=>{r.current&&clearTimeout(r.current),n.current=!0;const v=new URLSearchParams;i.types.length>0&&v.set("types",i.types.join(",")),i.categories.length>0&&v.set("categories",i.categories.join(",")),i.tags.length>0&&v.set("tags",i.tags.join(",")),c!=="grid"&&v.set("view",c),t(v,{replace:!0}),r.current=setTimeout(()=>{n.current=!1},10)},[i,c,t]),g.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]);const d=g.useCallback(v=>{l(w=>({...w,...v}))},[]),f=g.useCallback(v=>{l(w=>({...w,tags:w.tags.includes(v)?w.tags:[...w.tags,v]}))},[]),m=g.useCallback(v=>{l(w=>({...w,tags:w.tags.filter(x=>x!==v)}))},[]),h=g.useCallback(()=>{l({types:[],categories:[],tags:[]})},[]),p=g.useCallback(v=>{u(v)},[]);return{activeFilters:i,setActiveFilters:d,addTag:f,removeTag:m,clearFilters:h,viewMode:c,setViewMode:p}}function ev(){const{search:e,getAvailableFilters:t,isReady:n,getSearchableItems:s}=Q0(),{activeFilters:r}=J0(),a=g.useMemo(()=>s().length,[s]),i=g.useMemo(()=>{if(!n)return[];if(!(r.tags.length>0||r.types.length>0||r.categories.length>0))return s().map(p=>({item:p,score:1,matches:[],highlights:[]}));const d=r.tags.join(" "),f={...r,tags:[]};return e(d||"*",f)},[n,e,r,s]),l=g.useMemo(()=>n?t():{types:[],categories:[],tags:[]},[n,t,a]),c=g.useMemo(()=>{const u={};return i.forEach(d=>{const f=d.item.type;u[f]=(u[f]||0)+1,d.item.category&&(u[`category:${d.item.category}`]=(u[`category:${d.item.category}`]||0)+1),d.item.tags.forEach(m=>{u[`tag:${m}`]=(u[`tag:${m}`]||0)+1})}),u},[i]);return{searchResults:i,availableFilters:l,resultCounts:c}}function DG(){const{searchResults:e,resultCounts:t}=ev();J0();const n=g.useMemo(()=>e,[e]),s=g.useMemo(()=>zG(n,"relevance"),[n]),r=g.useMemo(()=>s.map(cG),[s]),a=g.useMemo(()=>e.length,[e]),i=g.useMemo(()=>{const l={};return e.forEach(c=>{const u=c.item.type;l[u]||(l[u]=[]),l[u].push(c)}),l},[e]);return{filteredResults:n,sortedResults:s,playerCreationItems:r,resultCounts:t,totalResults:a,resultsByType:i}}function zG(e,t){const n=[...e];switch(t){case"relevance":return n;case"name":return n.sort((s,r)=>s.item.name.localeCompare(r.item.name));case"type":return n.sort((s,r)=>{const a=s.item.type.localeCompare(r.item.type);return a!==0?a:s.item.name.localeCompare(r.item.name)});default:return n}}function LG({activeFilters:e,onFiltersChange:t,onClearFilters:n,availableFilters:s,resultCount:r,onTagSelect:a,onTagRemove:i,selectedTags:l,className:c}){const u=e.types.length>0||e.categories.length>0||e.tags.length>0,d=h=>{const p=e.types.includes(h)?e.types.filter(v=>v!==h):[...e.types,h];t({types:p})},m=[{id:"fuzzy-search",name:"Search All",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Filter by category...",options:(s.categories||[]).filter(h=>h&&typeof h.label=="string").map(h=>({id:`category-${h.value}`,label:String(h.label),value:h.value,category:"Categories",description:`${h.count} item${h.count!==1?"s":""}`}))},{id:"tags",name:"Tags",placeholder:"Filter by tag...",options:(s.tags||[]).filter(h=>h&&typeof h.label=="string").map(h=>({id:`tag-${h.value}`,label:String(h.label),value:h.value,category:"Tags",description:`${h.count} item${h.count!==1?"s":""}`}))}];return o.jsxs("div",{className:U("space-y-4",c),children:[o.jsx("div",{className:"space-y-2",children:o.jsx(ga,{categories:m,onSelect:a,onCustomSearch:a})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("span",{className:"text-sm font-medium",children:"Record Types"})}),o.jsx("div",{className:"flex flex-wrap gap-2",children:s.types.map(h=>o.jsxs(W,{variant:e.types.includes(h.value)?"default":"outline",size:"sm",onClick:()=>d(h.value),className:"text-xs",children:[h.label,o.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",h.count,")"]})]},h.value))})]}),l.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium",children:"Active Filters"}),o.jsx(W,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Clear All"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>o.jsxs(K,{variant:"secondary",className:"text-xs",children:[h.category,": ",h.label,o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>i(h.id),className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",children:o.jsx(Vt,{className:"h-3 w-3"})})]},h.id))})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[o.jsxs("span",{children:[r," result",r!==1?"s":""," found"]}),u&&o.jsx(W,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Clear Filters"})]})]})}function L_({items:e,keyExtractor:t,renderItem:n,loadMore:s,hasMore:r=!0,columns:a=3,gap:i=12,maxColumnWidth:l,className:c=""}){const[u,d]=g.useState(0),f=g.useRef(null),m=g.useCallback(()=>l&&u>0?Math.max(1,Math.floor(u/l)):a,[a,l,u]);g.useEffect(()=>{const p=()=>{f.current&&d(f.current.offsetWidth)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),g.useEffect(()=>{var w;if(!s||!r)return;const p=new IntersectionObserver(x=>{x.forEach(b=>{b.isIntersecting&&s&&s()})},{threshold:.1}),v=(w=f.current)==null?void 0:w.lastElementChild;return v&&p.observe(v),()=>p.disconnect()},[s,r,e.length]);const h=g.useCallback(()=>{const p=m(),v=Array.from({length:p},()=>[]);return e.forEach((w,x)=>{const b=x%p,y=t(w);v[b].push(o.jsx("div",{style:{width:"100%",marginBottom:`${i}px`},children:n(w)},y))}),v.map((w,x)=>o.jsx("div",{style:{width:`calc(${100/p}% - ${i/2}px)`,marginRight:x<p-1?`${i}px`:0},children:w},x))},[e,t,n,m,i]);return e.length===0?o.jsx("div",{className:`text-center py-12 ${c}`,children:o.jsx("p",{className:"text-muted-foreground",children:"No items to display"})}):o.jsx("div",{ref:f,className:c,children:o.jsx("div",{style:{display:"flex",width:"100%"},children:h()})})}function $G({items:e,className:t,viewMode:n="grid",onViewModeChange:s}){const[r,a]=g.useState(new Set);g.useEffect(()=>{if(n==="grid"){const l=new Set(e.map(c=>c.id));a(l)}},[n,e]);const i=l=>{if(n==="grid")return;const c=new Set(r);c.has(l)?c.delete(l):c.add(l),a(c)};return e.length===0?o.jsx("div",{className:`text-center py-12 ${t}`,children:o.jsx("p",{className:"text-muted-foreground",children:"No results found"})}):o.jsxs("div",{className:t,children:[s&&o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.length," result",e.length!==1?"s":""," found"]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(W,{variant:n==="grid"?"default":"outline",size:"sm",onClick:()=>s("grid"),className:"flex items-center gap-2",children:[o.jsx(j4,{className:"h-4 w-4"}),"Grid"]}),o.jsxs(W,{variant:n==="list"?"default":"outline",size:"sm",onClick:()=>s("list"),className:"flex items-center gap-2",children:[o.jsx(oo,{className:"h-4 w-4"}),"List"]})]})]}),n==="grid"?o.jsx(L_,{items:e,keyExtractor:l=>l.id,renderItem:l=>o.jsx(kw,{item:l,isExpanded:!0,onToggle:()=>{},viewMode:"grid"}),columns:3,gap:16,maxColumnWidth:400}):o.jsx("div",{className:"space-y-2",children:e.map(l=>{const c=r.has(l.id);return o.jsx(kw,{item:l,isExpanded:c,onToggle:()=>i(l.id),viewMode:"list"},l.id)})})]})}function PG({className:e,placeholder:t="Search skills, races, traits, religions..."}){const n=dt(),{isReady:s}=Q0(),{availableFilters:r}=ev(),i=[{id:"fuzzy-search",name:"Search All",placeholder:t,options:r.types.map(c=>({id:`type-${c.value}`,label:c.label,value:c.value,category:"Search All",description:`${c.count} ${c.label}${c.count!==1?"s":""}`}))}],l=c=>{if(typeof c=="string")n(`/search?tags=${encodeURIComponent(c)}`);else if(c.id.startsWith("type-")){const u=c.value;n(`/search?types=${encodeURIComponent(u)}`)}else n(`/search?tags=${encodeURIComponent(c.value)}`)};return s?o.jsx("div",{className:U("flex items-center gap-2",e),children:o.jsx("div",{className:"flex-1",children:o.jsx(J2,{categories:i,onSelect:l,onCustomSearch:l,placeholder:t})})}):o.jsx("div",{className:U("flex items-center gap-2",e),children:o.jsx("div",{className:"flex-1 h-10 bg-muted animate-pulse rounded-md"})})}function Eh({title:e,description:t,children:n}){return o.jsxs("div",{className:"bg-background",children:[o.jsx("div",{className:"border-b border-border bg-card/50",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsx(ho,{className:"text-3xl font-bold text-primary mb-2",children:e}),t&&o.jsx(Ke,{className:"text-muted-foreground max-w-2xl",children:t})]})}),o.jsx("div",{className:"container mx-auto px-4 py-6",children:n})]})}function OG(){const{isReady:e,isIndexing:t,error:n}=Q0(),{activeFilters:s,setActiveFilters:r,clearFilters:a,addTag:i,removeTag:l}=J0(),{availableFilters:c,searchResults:u}=ev(),{totalResults:d}=DG(),[f,m]=g.useState([]),[h,p]=g.useState("grid");g.useEffect(()=>{const j=[];s.tags.forEach(S=>{j.push({id:`custom-${S}`,label:S,value:S,category:"Search All"})}),s.categories.forEach(S=>{j.push({id:`category-${S}`,label:S,value:S,category:"Categories"})}),m(j)},[s.tags,s.categories]);const v=j=>{let S;typeof j=="string"?S={id:`custom-${j}`,label:j,value:j,category:"Search All"}:S={id:`${j.category}-${j.id}`,label:j.label,value:j.value,category:j.category},f.some(k=>k.value===S.value&&k.category===S.category)||(m(k=>[...k,S]),S.category==="Categories"?r({categories:[...s.categories,S.value]}):S.category==="Tags"?r({tags:[...s.tags,S.value]}):i(S.value))},w=j=>{const S=f.find(k=>k.id===j);S&&(m(k=>k.filter(E=>E.id!==j)),S.category==="Categories"?r({categories:s.categories.filter(k=>k!==S.value)}):S.category==="Tags"?r({tags:s.tags.filter(k=>k!==S.value)}):l(S.value))},x=()=>{m([]),a()},b=j=>{p(j)};if(!e)return o.jsx(Eh,{title:"Search",description:"Building search index...",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("div",{className:"text-center",children:[t?o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}):null,o.jsx("p",{className:"text-muted-foreground",children:t?"Building search index...":"Loading search..."})]})})});if(n)return o.jsx(Eh,{title:"Search",description:"Error loading search",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("p",{className:"text-destructive mb-4",children:["Failed to load search: ",n]}),o.jsx("button",{onClick:()=>window.location.reload(),className:"text-primary hover:underline",children:"Try again"})]})})});const y=f.length>0?"Search Results":"Search",N=f.length>0?`Found ${d} result${d!==1?"s":""} for ${f.length} filter${f.length!==1?"s":""}`:"Search across all skills, races, traits, religions, birthsigns, destiny nodes, and perk references";return o.jsxs(Eh,{title:y,description:N,children:[o.jsx("div",{className:"mb-6",children:o.jsx(LG,{activeFilters:s,onFiltersChange:r,onClearFilters:x,availableFilters:c,resultCount:d,onTagSelect:v,onTagRemove:w,selectedTags:f})}),o.jsx("div",{className:"w-full",children:o.jsx($G,{items:u.map(j=>j.item),viewMode:h,onViewModeChange:b})})]})}function BG(){return o.jsx(OG,{})}const Ew=["bg-red-100 border-red-300","bg-blue-100 border-blue-300","bg-green-100 border-green-300","bg-yellow-100 border-yellow-300","bg-purple-100 border-purple-300","bg-pink-100 border-pink-300","bg-indigo-100 border-indigo-300","bg-gray-100 border-gray-300"],_w=["Mystical Artifact","Ancient Scroll","Enchanted Weapon","Potion of Power","Crystal Shard","Runic Tablet","Magical Tome","Arcane Relic","Divine Essence","Ethereal Fragment"],Aw=["A powerful artifact imbued with ancient magic.","Scroll containing forgotten spells and rituals.","Weapon blessed by the gods themselves.","Brew that grants temporary supernatural abilities.","Crystal that resonates with magical energy.","Tablet inscribed with mysterious runes.","Book of forbidden knowledge and power.","Relic from a bygone era of magic.","Essence of divine power and wisdom.","Fragment of pure ethereal energy."],IG=["magic","ancient","powerful","rare","legendary","enchanted","divine","mystical","forbidden","sacred"];function Tw(e){const t=[];for(let n=0;n<e;n++){const s=`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r=Math.floor(Math.random()*200)+100,a=Ew[Math.floor(Math.random()*Ew.length)],i=_w[Math.floor(Math.random()*_w.length)],l=Aw[Math.floor(Math.random()*Aw.length)],c=[],u=Math.floor(Math.random()*3)+1,d=[...IG].sort(()=>.5-Math.random());c.push(...d.slice(0,u)),t.push({id:s,title:i,description:l,height:r,color:a,tags:c})}return t}function HG(){const[e,t]=L.useState(()=>Tw(50)),[n,s]=L.useState(!1),[r,a]=L.useState(!0),i=L.useCallback(async()=>{if(n||!r)return;s(!0),await new Promise(d=>setTimeout(d,500));const u=Tw(20);t(d=>[...d,...u]),e.length+u.length>=200&&a(!1),s(!1)},[n,r,e.length]),l=u=>u.id,c=u=>o.jsx(MG,{item:u});return o.jsxs("div",{className:"container mx-auto p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"VirtualMasonryGrid Demo"}),o.jsxs("p",{className:"text-muted-foreground",children:["Testing InfiniteGrid implementation with ",e.length," items"]}),n&&o.jsx("div",{className:"mt-2 text-sm text-blue-600",children:"Loading more items..."}),!r&&o.jsx("div",{className:"mt-2 text-sm text-green-600",children:"All items loaded (200 total)"})]}),o.jsx(L_,{items:e,keyExtractor:l,renderItem:c,loadMore:i,hasMore:r,columns:3,gap:16,className:"min-h-screen"})]})}function $_(){const[e,t]=g.useState({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[n,s]=g.useState({skills:[],categories:[],prerequisites:[],tags:[]});g.useCallback(h=>{s(h)},[]);const r=g.useCallback(h=>{t(p=>({...p,skills:[...p.skills,h]}))},[]),a=g.useCallback(h=>{t(p=>({...p,skills:p.skills.filter(v=>v!==h)}))},[]);g.useCallback(h=>{t(p=>({...p,categories:[...p.categories,h]}))},[]),g.useCallback(h=>{t(p=>({...p,categories:p.categories.filter(v=>v!==h)}))},[]),g.useCallback(h=>{t(p=>({...p,prerequisites:[...p.prerequisites,h]}))},[]),g.useCallback(h=>{t(p=>({...p,prerequisites:p.prerequisites.filter(v=>v!==h)}))},[]),g.useCallback(h=>{t(p=>({...p,tags:[...p.tags,h]}))},[]);const i=g.useCallback(h=>{t(p=>({...p,tags:p.tags.filter(v=>v!==h)}))},[]);g.useCallback(h=>{t(p=>({...p,rankLevel:h}))},[]),g.useCallback(h=>{t(p=>({...p,rootOnly:h}))},[]);const l=g.useCallback(h=>{t(p=>({...p,minLevel:h}))},[]),c=g.useCallback(h=>{t(p=>({...p,searchQuery:h}))},[]),u=g.useCallback(()=>{t({skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0})},[]),d=g.useMemo(()=>{const h=[];return e.skills.forEach(p=>{const v=n.skills.find(w=>w.id===p);v&&h.push({id:`skill-${p}`,type:"skill",value:p,label:v.name})}),e.categories.forEach(p=>{h.push({id:`category-${p}`,type:"category",value:p,label:p})}),e.prerequisites.forEach(p=>{h.push({id:`prerequisite-${p}`,type:"prerequisite",value:p,label:p})}),e.tags.forEach(p=>{h.push({id:`tag-${p}`,type:"tag",value:p,label:p})}),e.rankLevel!=="all"&&h.push({id:"rank-level",type:"rankLevel",value:e.rankLevel,label:e.rankLevel==="single"?"Single Rank":"Multi Rank"}),e.rootOnly&&h.push({id:"root-only",type:"rootOnly",value:"true",label:"Root Perks Only"}),e.minLevel!==void 0&&h.push({id:"min-level",type:"minLevel",value:e.minLevel.toString(),label:`Level ${e.minLevel}+`}),h},[e,n]);g.useMemo(()=>{const h=[];return n.skills.forEach(p=>{h.push({id:`skill-${p.id}`,label:p.name,value:p.id,category:"Skills",type:"skill"})}),n.tags.forEach(p=>{h.push({id:`tag-${p}`,label:p,value:p,category:"Tags",type:"tag"})}),h},[n]);const f=g.useCallback(h=>{if(typeof h=="string")c(h);else if(`${h.category}${h.id}`,h.label,h.value,h.category,h.category==="Skill Trees")r(h.value);else if(h.category==="Minimum Level"){const p=parseInt(h.value);isNaN(p)||l(p)}else h.category==="Fuzzy Search"&&c(h.value)},[r,c,l]),m=g.useCallback(h=>{const p=d.find(v=>v.id===h);if(p)p.type==="skill"?a(p.value):p.type==="tag"?i(p.value):p.type==="minLevel"&&l(void 0);else if(h.startsWith("custom-")){const v=h.replace("custom-","");e.searchQuery===v&&c("")}},[d,a,i,l,e.searchQuery,c]);return{selectedTags:[...d.map(h=>({id:h.id,label:h.label,value:h.value,category:h.type})),...e.searchQuery?[{id:`custom-${e.searchQuery}`,label:e.searchQuery,value:e.searchQuery,category:"Fuzzy Search"}]:[]],viewMode:"grid",searchQuery:e.searchQuery,onTagSelect:f,onTagRemove:m,onClearTags:u,onViewModeChange:()=>{},onSearchChange:c}}class UG{constructor(t,n){Ve(this,"perkNodes");Ve(this,"buildState");this.perkNodes=t,this.buildState=n}transformToPlayerCreationItem(t){var i,l,c,u,d,f;const n=((l=(i=this.buildState.perks)==null?void 0:i.selected)==null?void 0:l[t.skillTree])||[],s=((u=(c=this.buildState.perks)==null?void 0:c.ranks)==null?void 0:u[t.skillTree])||{},r=n.includes(t.edid),a=s[t.edid]||0;return{id:t.edid,name:t.name,description:((f=(d=t.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",category:t.category,tags:t.tags,isSelected:r,originalPerk:t,skillTree:t.skillTree,skillTreeName:t.skillTreeName,isRoot:t.isRoot,hasChildren:t.hasChildren,prerequisites:t.prerequisites,connections:t.connections,totalRanks:t.totalRanks,currentRank:a,isAvailable:this.isPerkAvailable(t),minLevel:t.minLevel}}isPerkAvailable(t){var s,r;if(t.isRoot)return!0;const n=((r=(s=this.buildState.perks)==null?void 0:s.selected)==null?void 0:r[t.skillTree])||[];return t.prerequisites.every(a=>n.includes(a))}applyFilters(t,n){let s=[...t];if(!n)return s;if(n.skills&&n.skills.length>0&&(s=s.filter(r=>n.skills.includes(r.skillTree))),n.categories&&n.categories.length>0&&(s=s.filter(r=>n.categories.includes(r.category))),n.prerequisites&&n.prerequisites.length>0&&(s=s.filter(r=>n.prerequisites.some(a=>r.prerequisites.includes(a)))),n.tags&&n.tags.length>0&&(s=s.filter(r=>n.tags.some(a=>r.tags.includes(a)))),n.minLevel!==void 0&&(s=s.filter(r=>(r.minLevel||0)>=n.minLevel)),n.rankLevel!=="all"&&(s=s.filter(r=>n.rankLevel==="single"?r.totalRanks===1:n.rankLevel==="multi"?r.totalRanks>1:!0)),n.rootOnly&&(s=s.filter(r=>r.isRoot)),n.searchQuery&&n.searchQuery.trim()){const r=n.searchQuery.trim(),a=s.map(u=>{var d,f;return{id:u.edid,name:u.name,description:((f=(d=u.ranks[0])==null?void 0:d.description)==null?void 0:f.base)||"",searchableText:u.searchableText,tags:u.tags,category:u.category,skillTree:u.skillTreeName,originalNode:u}}),i={keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0};s=new Xt(a,i).search(r).map(u=>u.item.originalNode)}return s}getAvailableFilters(t){const n=new Set,s=new Set,r=new Set,a=new Set;return t.forEach(i=>{n.add(i.skillTree),s.add(i.category),i.tags.forEach(l=>r.add(l)),i.prerequisites.forEach(l=>a.add(l))}),{skills:Array.from(n),categories:Array.from(s),tags:Array.from(r),prerequisites:Array.from(a)}}sortPerks(t,n="name"){const s=[...t];switch(n){case"name":return s.sort((r,a)=>r.name.localeCompare(a.name));case"skill":return s.sort((r,a)=>r.skillTreeName.localeCompare(a.skillTreeName));case"category":return s.sort((r,a)=>r.category.localeCompare(a.category));case"rank":return s.sort((r,a)=>a.totalRanks-r.totalRanks);case"prerequisites":return s.sort((r,a)=>r.prerequisites.length-a.prerequisites.length);default:return s}}}function FG(e,t){const{build:n}=gt(),s=g.useMemo(()=>new UG(e,n),[e,n]),r=g.useMemo(()=>s.applyFilters(e,t||{skills:[],categories:[],prerequisites:[],tags:[],rankLevel:"all",rootOnly:!1,searchQuery:"",minLevel:void 0}),[s,e,t]),a=g.useMemo(()=>r.map(l=>s.transformToPlayerCreationItem(l)),[r,s]),i=g.useMemo(()=>s.getAvailableFilters(e),[s,e]);return{model:s,filteredNodes:r,perkItems:a,availableFilters:i}}function VG(){const{allPerks:e,skillTrees:t,categories:n,tags:s,loading:r,error:a}=bm(),{selectedTags:i,searchQuery:l}=$_(),c=g.useMemo(()=>{const v=i.filter(y=>y.category==="skill").map(y=>y.value),w=i.filter(y=>y.category==="tag").map(y=>y.value),x=i.filter(y=>y.category==="minLevel").map(y=>parseInt(y.value)).find(y=>!isNaN(y));return{skills:v,categories:[],prerequisites:[],tags:w,rankLevel:"all",rootOnly:!1,searchQuery:l||"",minLevel:x}},[i,l]),{filteredNodes:u,perkItems:d,availableFilters:f}=FG(e,c),m=g.useMemo(()=>{const v=[...new Set(e.map(b=>b.skillTreeName))],w=[...new Set(e.flatMap(b=>b.tags))],x=[...new Set(e.map(b=>b.minLevel||0))].sort((b,y)=>b-y);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:w.map(b=>({id:`keyword-${b}`,label:b,value:b,category:"Fuzzy Search",description:`Perks with ${b} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:v.map(b=>({id:`skill-${b}`,label:b,value:b,category:"Skill Trees",description:`Perks from ${b} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:x.map(b=>({id:`level-${b}`,label:`Level ${b}+`,value:b.toString(),category:"Minimum Level",description:`Perks requiring level ${b} or higher`}))}]},[e]),h=g.useMemo(()=>({totalPerks:e.length,filteredPerks:u.length,rootPerks:e.filter(v=>v.isRoot).length,multiRankPerks:e.filter(v=>v.totalRanks>1).length,singleRankPerks:e.filter(v=>v.totalRanks===1).length,skills:t.length,categories:n.length,tags:s.length}),[e,u,t,n,s]),p=g.useMemo(()=>{const v=new Map;return d.forEach(w=>{v.has(w.skillTree)||v.set(w.skillTree,[]),v.get(w.skillTree).push(w)}),Array.from(v.entries()).map(([w,x])=>{var b;return{skillId:w,skillName:((b=x[0])==null?void 0:b.skillTreeName)||w,perks:x,count:x.length}}).sort((w,x)=>w.skillName.localeCompare(x.skillName))},[d]);return g.useMemo(()=>{const v=new Map;return d.forEach(w=>{v.has(w.category||"")||v.set(w.category||"",[]),v.get(w.category||"").push(w)}),Array.from(v.entries()).map(([w,x])=>({category:w,perks:x,count:x.length})).sort((w,x)=>(w.category||"").localeCompare(x.category||""))},[d]),g.useMemo(()=>d.filter(v=>v.isSelected),[d]),g.useMemo(()=>d.filter(v=>v.isAvailable),[d]),g.useMemo(()=>d.filter(v=>v.isRoot),[d]),g.useMemo(()=>d.filter(v=>v.totalRanks>1),[d]),g.useMemo(()=>d.filter(v=>v.totalRanks===1),[d]),g.useMemo(()=>(v,w="name")=>{const x=[...v];switch(w){case"name":return x.sort((b,y)=>b.name.localeCompare(y.name));case"skill":return x.sort((b,y)=>b.skillTreeName.localeCompare(y.skillTreeName));case"category":return x.sort((b,y)=>(b.category||"").localeCompare(y.category||""));case"rank":return x.sort((b,y)=>y.totalRanks-b.totalRanks);case"prerequisites":return x.sort((b,y)=>b.prerequisites.length-y.prerequisites.length);case"selected":return x.sort((b,y)=>Number(y.isSelected)-Number(b.isSelected));default:return x}},[]),{filteredItems:d,groupedItems:Object.fromEntries(p.map(v=>[v.skillId,v.perks])),stats:{totalPerks:h.totalPerks,skillTrees:h.skills,multiRank:h.multiRankPerks,singleRank:h.singleRankPerks,withPrerequisites:e.filter(v=>v.prerequisites&&v.prerequisites.length>0).length},searchCategories:m,availableFilters:f,isLoading:r,error:a}}function qG(e,t){const n=g.useMemo(()=>e.map(l=>{var c,u;return{id:l.edid,name:l.name,description:((u=(c=l.ranks[0])==null?void 0:c.description)==null?void 0:u.base)||"",searchableText:l.searchableText,tags:l.tags,category:l.category,skillTree:l.skillTreeName,originalPerk:l}}),[e]),s=g.useMemo(()=>({keys:[{name:"name",weight:.4},{name:"description",weight:.3},{name:"searchableText",weight:.2},{name:"tags",weight:.1},{name:"category",weight:.05},{name:"skillTree",weight:.05}],threshold:.4,includeScore:!0,includeMatches:!0}),[]),r=g.useMemo(()=>new Xt(n,s),[n,s]),a=g.useMemo(()=>t.trim()?r.search(t):n.map(l=>({item:l,score:0,matches:[]})),[r,t]);return{filteredPerks:g.useMemo(()=>a.map(l=>l.item.originalPerk),[a]),searchResults:a,searchablePerks:n}}function GG(){const e=dt(),{build:t}=gt(),{allPerks:n,loading:s,error:r}=bm(),[a,i]=g.useState("list"),c=(()=>{const S=[...new Set(n.map(C=>C.skillTreeName))],k=[...new Set(n.flatMap(C=>C.tags))],E=[...new Set(n.map(C=>C.minLevel||0))].sort((C,_)=>C-_);return[{id:"keywords",name:"Fuzzy Search",placeholder:"Search by name, description, or tags...",options:k.map(C=>({id:`keyword-${C}`,label:C,value:C,category:"Fuzzy Search",description:`Perks with ${C} tag`}))},{id:"skill-trees",name:"Skill Trees",placeholder:"Filter by skill tree...",options:S.map(C=>({id:`skill-${C}`,label:C,value:C,category:"Skill Trees",description:`Perks from ${C} skill tree`}))},{id:"min-levels",name:"Minimum Level",placeholder:"Filter by minimum level...",options:E.map(C=>({id:`level-${C}`,label:`Level ${C}+`,value:C.toString(),category:"Minimum Level",description:`Perks requiring level ${C} or higher`}))}]})(),[u,d]=g.useState([]),f=S=>{let k;typeof S=="string"?k={id:`custom-${S}`,label:S,value:S,category:"Fuzzy Search"}:k={id:`${S.category}-${S.id}`,label:S.label,value:S.value,category:S.category},u.some(E=>E.value===k.value&&E.category===k.category)||d(E=>[...E,k])},m=S=>{d(k=>k.filter(E=>E.id!==S))},h=n.filter(S=>u.length===0?!0:u.every(k=>{switch(k.category){case"Fuzzy Search":return!0;case"Skill Trees":return S.skillTreeName===k.value;case"Minimum Level":const E=parseInt(k.value);return!isNaN(E)&&(S.minLevel||0)>=E;default:return!0}})),p=u.filter(S=>S.category==="Fuzzy Search").map(S=>S.value).join(" "),{filteredPerks:v}=qG(h,p),w=v.map(S=>({...z_(S,t),originalPerk:S})),[x,b]=g.useState(new Set),y=S=>{const k=new Set(x);if(a==="grid"){const C=w.findIndex(T=>T.id===S),P=Math.floor(C/3)*3,O=Math.min(P+3,w.length);w.slice(P,O).some(T=>k.has(T.id))?w.slice(P,O).forEach(T=>{k.delete(T.id)}):w.slice(P,O).forEach(T=>{k.add(T.id)})}else k.has(S)?k.delete(S):k.add(S);b(k)},N=()=>{d([])},j=S=>{i(S),b(new Set)};return s?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading perk data..."})]})}):r?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:r}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsx(Fn,{title:"Perk References",description:"Browse and search all available perks. Find the perfect abilities for your character build.",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"flex items-center gap-2",children:[o.jsx(dg,{className:"h-4 w-4"}),"Back"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(ga,{categories:c,onSelect:f,onCustomSearch:f,className:"w-full"}),u.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:N,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx("svg",{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Clear All"]}),u.map(S=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(S.id),title:"Click to remove",children:[S.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},S.id))]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("span",{className:"text-sm text-muted-foreground",children:[w.length," perk",w.length!==1?"s":""," found"]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(W,{variant:a==="grid"?"default":"outline",size:"sm",onClick:()=>j("grid"),className:"flex items-center gap-2",children:[o.jsx(Fi,{className:"h-4 w-4"}),"Grid"]}),o.jsxs(W,{variant:a==="list"?"default":"outline",size:"sm",onClick:()=>j("list"),className:"flex items-center gap-2",children:[o.jsx(oo,{className:"h-4 w-4"}),"List"]})]})]}),a==="grid"?o.jsx(gk,{columns:3,gap:"md",children:w.map(S=>o.jsx(op,{item:S,isExpanded:x.has(S.id),onToggle:()=>y(S.id),viewMode:"grid"},S.id))}):o.jsx("div",{className:"space-y-2",children:w.map(S=>o.jsx(op,{item:S,isExpanded:x.has(S.id),onToggle:()=>y(S.id),viewMode:"list"},S.id))})]})})}function Mw(){const{skills:e,loading:t,error:n,searchQuery:s,setSearchQuery:r,selectedCategory:a,setSelectedCategory:i,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:v}=p_(),{filteredItems:w,groupedItems:x,stats:b,isLoading:y,error:N,searchCategories:j}=VG(),{selectedTags:S,viewMode:k,searchQuery:E,onTagSelect:C,onTagRemove:_,onClearTags:P,onViewModeChange:O,onSearchChange:$}=$_();return t||y?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading data..."})]})}):n||N?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:n||N}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsx(Fn,{title:"Skills & Perks",description:"Manage your character's skills and browse all available perks.",children:o.jsx("div",{className:"mb-6",children:o.jsxs(Qi,{defaultValue:"builder",className:"w-full",children:[o.jsxs(Ji,{className:"grid w-full grid-cols-2",children:[o.jsx(an,{value:"builder",children:"Perk Builder"}),o.jsx(an,{value:"reference",children:"Perk References"})]}),o.jsx(wn,{value:"builder",className:"space-y-4",children:o.jsx(Pq,{skills:e,loading:t,error:n,searchQuery:s,onSearchChange:r,selectedCategory:a,onCategorySelect:i,categories:l,selectedSkillId:c,onSkillSelect:u,onAssignMajor:d,onAssignMinor:f,onRemoveAssignment:m,onResetPerks:h,perkTree:p,skillSummary:v})}),o.jsx(wn,{value:"reference",className:"space-y-4",children:o.jsx(GG,{items:w,groupedItems:x,stats:b,searchCategories:j,selectedTags:S,viewMode:k,searchQuery:E,onTagSelect:C,onTagRemove:_,onClearTags:P,onViewModeChange:O,onSearchChange:$})})]})})})}function q(e,t,n){function s(l,c){var u;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(u=l._zod).traits??(u.traits=new Set),l._zod.traits.add(e),t(l,c);for(const d in i.prototype)d in l||Object.defineProperty(l,d,{value:i.prototype[d].bind(l)});l._zod.constr=i,l._zod.def=c}const r=(n==null?void 0:n.Parent)??Object;class a extends r{}Object.defineProperty(a,"name",{value:e});function i(l){var c;const u=n!=null&&n.Parent?new a:this;s(u,l),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(i,"init",{value:s}),Object.defineProperty(i,Symbol.hasInstance,{value:l=>{var c,u;return n!=null&&n.Parent&&l instanceof n.Parent?!0:(u=(c=l==null?void 0:l._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class pc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const P_={};function Qa(e){return P_}function ZG(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,r])=>t.indexOf(+s)===-1).map(([s,r])=>r)}function YG(e,t){return typeof t=="bigint"?t.toString():t}function O_(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function tv(e){return e==null}function nv(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function XG(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,r=n>s?n:s,a=Number.parseInt(e.toFixed(r).replace(".","")),i=Number.parseInt(t.toFixed(r).replace(".",""));return a%i/10**r}function Ye(e,t,n){Object.defineProperty(e,t,{get(){{const s=n();return e[t]=s,s}},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function sv(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function yl(e){return JSON.stringify(e)}const B_=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function ip(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const WG=O_(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function lp(e){if(ip(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(ip(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const KG=new Set(["string","number","symbol"]);function wm(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function bo(e,t,n){const s=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(s._zod.parent=e),s}function ce(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function QG(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const JG={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function eZ(e,t){const n={},s=e._zod.def;for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(n[r]=s.shape[r])}return bo(e,{...e._zod.def,shape:n,checks:[]})}function tZ(e,t){const n={...e._zod.def.shape},s=e._zod.def;for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&delete n[r]}return bo(e,{...e._zod.def,shape:n,checks:[]})}function nZ(e,t){if(!lp(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return sv(this,"shape",s),s},checks:[]};return bo(e,n)}function sZ(e,t){return bo(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return sv(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function rZ(e,t,n){const s=t._zod.def.shape,r={...s};if(n)for(const a in n){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(r[a]=e?new e({type:"optional",innerType:s[a]}):s[a])}else for(const a in s)r[a]=e?new e({type:"optional",innerType:s[a]}):s[a];return bo(t,{...t._zod.def,shape:r,checks:[]})}function aZ(e,t,n){const s=t._zod.def.shape,r={...s};if(n)for(const a in n){if(!(a in r))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(r[a]=new e({type:"nonoptional",innerType:s[a]}))}else for(const a in s)r[a]=new e({type:"nonoptional",innerType:s[a]});return bo(t,{...t._zod.def,shape:r,checks:[]})}function Bl(e,t=0){var n;for(let s=t;s<e.issues.length;s++)if(((n=e.issues[s])==null?void 0:n.continue)!==!0)return!0;return!1}function rv(e,t){return t.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(e),n})}function Pu(e){return typeof e=="string"?e:e==null?void 0:e.message}function Ja(e,t,n){var r,a,i,l,c,u;const s={...e,path:e.path??[]};if(!e.message){const d=Pu((i=(a=(r=e.inst)==null?void 0:r._zod.def)==null?void 0:a.error)==null?void 0:i.call(a,e))??Pu((l=t==null?void 0:t.error)==null?void 0:l.call(t,e))??Pu((c=n.customError)==null?void 0:c.call(n,e))??Pu((u=n.localeError)==null?void 0:u.call(n,e))??"Invalid input";s.message=d}return delete s.inst,delete s.continue,t!=null&&t.reportInput||delete s.input,s}function av(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function xc(...e){const[t,n,s]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:s}:{...t}}const I_=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,YG,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},H_=q("$ZodError",I_),U_=q("$ZodError",I_,{Parent:Error});function oZ(e,t=n=>n.message){const n={},s=[];for(const r of e.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):s.push(t(r));return{formErrors:s,fieldErrors:n}}function iZ(e,t){const n=t||function(a){return a.message},s={_errors:[]},r=a=>{for(const i of a.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(l=>r({issues:l}));else if(i.code==="invalid_key")r({issues:i.issues});else if(i.code==="invalid_element")r({issues:i.issues});else if(i.path.length===0)s._errors.push(n(i));else{let l=s,c=0;for(;c<i.path.length;){const u=i.path[c];c===i.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(i))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return r(e),s}const lZ=e=>(t,n,s,r)=>{const a=s?Object.assign(s,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},a);if(i instanceof Promise)throw new pc;if(i.issues.length){const l=new((r==null?void 0:r.Err)??e)(i.issues.map(c=>Ja(c,a,Qa())));throw B_(l,r==null?void 0:r.callee),l}return i.value},cZ=e=>async(t,n,s,r)=>{const a=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},a);if(i instanceof Promise&&(i=await i),i.issues.length){const l=new((r==null?void 0:r.Err)??e)(i.issues.map(c=>Ja(c,a,Qa())));throw B_(l,r==null?void 0:r.callee),l}return i.value},F_=e=>(t,n,s)=>{const r=s?{...s,async:!1}:{async:!1},a=t._zod.run({value:n,issues:[]},r);if(a instanceof Promise)throw new pc;return a.issues.length?{success:!1,error:new(e??H_)(a.issues.map(i=>Ja(i,r,Qa())))}:{success:!0,data:a.value}},uZ=F_(U_),V_=e=>async(t,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},r);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(i=>Ja(i,r,Qa())))}:{success:!0,data:a.value}},dZ=V_(U_),fZ=/^[cC][^\s-]{8,}$/,mZ=/^[0-9a-z]+$/,hZ=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,gZ=/^[0-9a-vA-V]{20}$/,pZ=/^[A-Za-z0-9]{27}$/,xZ=/^[a-zA-Z0-9_-]{21}$/,vZ=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,yZ=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Rw=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,bZ=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,wZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function NZ(){return new RegExp(wZ,"u")}const jZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SZ=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,kZ=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,CZ=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,EZ=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,q_=/^[A-Za-z0-9_-]*$/,_Z=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,AZ=/^\+(?:[0-9]){6,14}[0-9]$/,G_="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",TZ=new RegExp(`^${G_}$`);function Z_(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function MZ(e){return new RegExp(`^${Z_(e)}$`)}function RZ(e){const t=Z_({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const s=`${t}(?:${n.join("|")})`;return new RegExp(`^${G_}T(?:${s})$`)}const DZ=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},zZ=/^\d+$/,LZ=/^-?\d+(?:\.\d+)?/i,$Z=/true|false/i,PZ=/^[^A-Z]*$/,OZ=/^[^a-z]*$/,fn=q("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Y_={number:"number",bigint:"bigint",object:"date"},X_=q("$ZodCheckLessThan",(e,t)=>{fn.init(e,t);const n=Y_[typeof t.value];e._zod.onattach.push(s=>{const r=s._zod.bag,a=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<a&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:n,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),W_=q("$ZodCheckGreaterThan",(e,t)=>{fn.init(e,t);const n=Y_[typeof t.value];e._zod.onattach.push(s=>{const r=s._zod.bag,a=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>a&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:n,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),BZ=q("$ZodCheckMultipleOf",(e,t)=>{fn.init(e,t),e._zod.onattach.push(n=>{var s;(s=n._zod.bag).multipleOf??(s.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):XG(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),IZ=q("$ZodCheckNumberFormat",(e,t)=>{var i;fn.init(e,t),t.format=t.format||"float64";const n=(i=t.format)==null?void 0:i.includes("int"),s=n?"int":"number",[r,a]=JG[t.format];e._zod.onattach.push(l=>{const c=l._zod.bag;c.format=t.format,c.minimum=r,c.maximum=a,n&&(c.pattern=zZ)}),e._zod.check=l=>{const c=l.value;if(n){if(!Number.isInteger(c)){l.issues.push({expected:s,format:t.format,code:"invalid_type",input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}c<r&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),c>a&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:a,inst:e})}}),HZ=q("$ZodCheckMaxLength",(e,t)=>{var n;fn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!tv(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const r=s.value;if(r.length<=t.maximum)return;const i=av(r);s.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),UZ=q("$ZodCheckMinLength",(e,t)=>{var n;fn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!tv(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const r=s.value;if(r.length>=t.minimum)return;const i=av(r);s.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),FZ=q("$ZodCheckLengthEquals",(e,t)=>{var n;fn.init(e,t),(n=e._zod.def).when??(n.when=s=>{const r=s.value;return!tv(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=s=>{const r=s.value,a=r.length;if(a===t.length)return;const i=av(r),l=a>t.length;s.issues.push({origin:i,...l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),Nm=q("$ZodCheckStringFormat",(e,t)=>{var n,s;fn.init(e,t),e._zod.onattach.push(r=>{const a=r._zod.bag;a.format=t.format,t.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),VZ=q("$ZodCheckRegex",(e,t)=>{Nm.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),qZ=q("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=PZ),Nm.init(e,t)}),GZ=q("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=OZ),Nm.init(e,t)}),ZZ=q("$ZodCheckIncludes",(e,t)=>{fn.init(e,t);const n=wm(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=s,e._zod.onattach.push(r=>{const a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(s)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),YZ=q("$ZodCheckStartsWith",(e,t)=>{fn.init(e,t);const n=new RegExp(`^${wm(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),XZ=q("$ZodCheckEndsWith",(e,t)=>{fn.init(e,t);const n=new RegExp(`.*${wm(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),WZ=q("$ZodCheckOverwrite",(e,t)=>{fn.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class KZ{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(i=>i),r=Math.min(...s.map(i=>i.length-i.trimStart().length)),a=s.map(i=>i.slice(r)).map(i=>" ".repeat(this.indent*2)+i);for(const i of a)this.content.push(i)}compile(){const t=Function,n=this==null?void 0:this.args,r=[...((this==null?void 0:this.content)??[""]).map(a=>`  ${a}`)];return new t(...n,r.join(`
`))}}const QZ={major:4,minor:0,patch:5},ut=q("$ZodType",(e,t)=>{var r;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=QZ;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const a of s)for(const i of a._zod.onattach)i(e);if(s.length===0)(n=e._zod).deferred??(n.deferred=[]),(r=e._zod.deferred)==null||r.push(()=>{e._zod.run=e._zod.parse});else{const a=(i,l,c)=>{let u=Bl(i),d;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(i))continue}else if(u)continue;const m=i.issues.length,h=f._zod.check(i);if(h instanceof Promise&&(c==null?void 0:c.async)===!1)throw new pc;if(d||h instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await h,i.issues.length!==m&&(u||(u=Bl(i,m)))});else{if(i.issues.length===m)continue;u||(u=Bl(i,m))}}return d?d.then(()=>i):i};e._zod.run=(i,l)=>{const c=e._zod.parse(i,l);if(c instanceof Promise){if(l.async===!1)throw new pc;return c.then(u=>a(u,s,l))}return a(c,s,l)}}e["~standard"]={validate:a=>{var i;try{const l=uZ(e,a);return l.success?{value:l.data}:{issues:(i=l.error)==null?void 0:i.issues}}catch{return dZ(e,a).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),ov=q("$ZodString",(e,t)=>{var n;ut.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??DZ(e._zod.bag),e._zod.parse=(s,r)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),et=q("$ZodStringFormat",(e,t)=>{Nm.init(e,t),ov.init(e,t)}),JZ=q("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=yZ),et.init(e,t)}),eY=q("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Rw(s))}else t.pattern??(t.pattern=Rw());et.init(e,t)}),tY=q("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=bZ),et.init(e,t)}),nY=q("$ZodURL",(e,t)=>{et.init(e,t),e._zod.check=n=>{try{const s=n.value,r=new URL(s),a=r.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:_Z.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!s.endsWith("/")&&a.endsWith("/")?n.value=a.slice(0,-1):n.value=a;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),sY=q("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=NZ()),et.init(e,t)}),rY=q("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=xZ),et.init(e,t)}),aY=q("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=fZ),et.init(e,t)}),oY=q("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=mZ),et.init(e,t)}),iY=q("$ZodULID",(e,t)=>{t.pattern??(t.pattern=hZ),et.init(e,t)}),lY=q("$ZodXID",(e,t)=>{t.pattern??(t.pattern=gZ),et.init(e,t)}),cY=q("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=pZ),et.init(e,t)}),uY=q("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=RZ(t)),et.init(e,t)}),dY=q("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=TZ),et.init(e,t)}),fY=q("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=MZ(t)),et.init(e,t)}),mY=q("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=vZ),et.init(e,t)}),hY=q("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=jZ),et.init(e,t),e._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv4"})}),gY=q("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=SZ),et.init(e,t),e._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),pY=q("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=kZ),et.init(e,t)}),xY=q("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=CZ),et.init(e,t),e._zod.check=n=>{const[s,r]=n.value.split("/");try{if(!r)throw new Error;const a=Number(r);if(`${a}`!==r)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function K_(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const vY=q("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=EZ),et.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{K_(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function yY(e){if(!q_.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return K_(n)}const bY=q("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=q_),et.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{yY(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),wY=q("$ZodE164",(e,t)=>{t.pattern??(t.pattern=AZ),et.init(e,t)});function NY(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[s]=n;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const jY=q("$ZodJWT",(e,t)=>{et.init(e,t),e._zod.check=n=>{NY(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Q_=q("$ZodNumber",(e,t)=>{ut.init(e,t),e._zod.pattern=e._zod.bag.pattern??LZ,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const a=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...a?{received:a}:{}}),n}}),SY=q("$ZodNumber",(e,t)=>{IZ.init(e,t),Q_.init(e,t)}),kY=q("$ZodBoolean",(e,t)=>{ut.init(e,t),e._zod.pattern=$Z,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),n}}),CY=q("$ZodUnknown",(e,t)=>{ut.init(e,t),e._zod.parse=n=>n}),EY=q("$ZodNever",(e,t)=>{ut.init(e,t),e._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function Dw(e,t,n){e.issues.length&&t.issues.push(...rv(n,e.issues)),t.value[n]=e.value}const _Y=q("$ZodArray",(e,t)=>{ut.init(e,t),e._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),n;n.value=Array(r.length);const a=[];for(let i=0;i<r.length;i++){const l=r[i],c=t.element._zod.run({value:l,issues:[]},s);c instanceof Promise?a.push(c.then(u=>Dw(u,n,i))):Dw(c,n,i)}return a.length?Promise.all(a).then(()=>n):n}});function Ou(e,t,n){e.issues.length&&t.issues.push(...rv(n,e.issues)),t.value[n]=e.value}function zw(e,t,n,s){e.issues.length?s[n]===void 0?n in s?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...rv(n,e.issues)):e.value===void 0?n in s&&(t.value[n]=void 0):t.value[n]=e.value}const AY=q("$ZodObject",(e,t)=>{ut.init(e,t);const n=O_(()=>{const f=Object.keys(t.shape);for(const h of f)if(!(t.shape[h]instanceof ut))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const m=QG(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});Ye(e._zod,"propValues",()=>{const f=t.shape,m={};for(const h in f){const p=f[h]._zod;if(p.values){m[h]??(m[h]=new Set);for(const v of p.values)m[h].add(v)}}return m});const s=f=>{const m=new KZ(["shape","payload","ctx"]),h=n.value,p=b=>{const y=yl(b);return`shape[${y}]._zod.run({ value: input[${y}], issues: [] }, ctx)`};m.write("const input = payload.value;");const v=Object.create(null);let w=0;for(const b of h.keys)v[b]=`key_${w++}`;m.write("const newResult = {}");for(const b of h.keys)if(h.optionalKeys.has(b)){const y=v[b];m.write(`const ${y} = ${p(b)};`);const N=yl(b);m.write(`
        if (${y}.issues.length) {
          if (input[${N}] === undefined) {
            if (${N} in input) {
              newResult[${N}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${y}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${N}, ...iss.path] : [${N}],
              }))
            );
          }
        } else if (${y}.value === undefined) {
          if (${N} in input) newResult[${N}] = undefined;
        } else {
          newResult[${N}] = ${y}.value;
        }
        `)}else{const y=v[b];m.write(`const ${y} = ${p(b)};`),m.write(`
          if (${y}.issues.length) payload.issues = payload.issues.concat(${y}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${yl(b)}, ...iss.path] : [${yl(b)}]
          })));`),m.write(`newResult[${yl(b)}] = ${y}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const x=m.compile();return(b,y)=>x(f,b,y)};let r;const a=ip,i=!P_.jitless,c=i&&WG.value,u=t.catchall;let d;e._zod.parse=(f,m)=>{d??(d=n.value);const h=f.value;if(!a(h))return f.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),f;const p=[];if(i&&c&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)r||(r=s(t.shape)),f=r(f,m);else{f.value={};const y=d.shape;for(const N of d.keys){const j=y[N],S=j._zod.run({value:h[N],issues:[]},m),k=j._zod.optin==="optional"&&j._zod.optout==="optional";S instanceof Promise?p.push(S.then(E=>k?zw(E,f,N,h):Ou(E,f,N))):k?zw(S,f,N,h):Ou(S,f,N)}}if(!u)return p.length?Promise.all(p).then(()=>f):f;const v=[],w=d.keySet,x=u._zod,b=x.def.type;for(const y of Object.keys(h)){if(w.has(y))continue;if(b==="never"){v.push(y);continue}const N=x.run({value:h[y],issues:[]},m);N instanceof Promise?p.push(N.then(j=>Ou(j,f,y))):Ou(N,f,y)}return v.length&&f.issues.push({code:"unrecognized_keys",keys:v,input:h,inst:e}),p.length?Promise.all(p).then(()=>f):f}});function Lw(e,t,n,s){for(const r of e)if(r.issues.length===0)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(r=>r.issues.map(a=>Ja(a,s,Qa())))}),t}const TY=q("$ZodUnion",(e,t)=>{ut.init(e,t),Ye(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),Ye(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),Ye(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),Ye(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${n.map(s=>nv(s.source)).join("|")})$`)}}),e._zod.parse=(n,s)=>{let r=!1;const a=[];for(const i of t.options){const l=i._zod.run({value:n.value,issues:[]},s);if(l instanceof Promise)a.push(l),r=!0;else{if(l.issues.length===0)return l;a.push(l)}}return r?Promise.all(a).then(i=>Lw(i,n,e,s)):Lw(a,n,e,s)}}),MY=q("$ZodIntersection",(e,t)=>{ut.init(e,t),e._zod.parse=(n,s)=>{const r=n.value,a=t.left._zod.run({value:r,issues:[]},s),i=t.right._zod.run({value:r,issues:[]},s);return a instanceof Promise||i instanceof Promise?Promise.all([a,i]).then(([c,u])=>$w(n,c,u)):$w(n,a,i)}});function cp(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(lp(e)&&lp(t)){const n=Object.keys(t),s=Object.keys(e).filter(a=>n.indexOf(a)!==-1),r={...e,...t};for(const a of s){const i=cp(e[a],t[a]);if(!i.valid)return{valid:!1,mergeErrorPath:[a,...i.mergeErrorPath]};r[a]=i.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<e.length;s++){const r=e[s],a=t[s],i=cp(r,a);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function $w(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Bl(e))return e;const s=cp(t.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const RY=q("$ZodEnum",(e,t)=>{ut.init(e,t);const n=ZG(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(s=>KG.has(typeof s)).map(s=>typeof s=="string"?wm(s):s.toString()).join("|")})$`),e._zod.parse=(s,r)=>{const a=s.value;return e._zod.values.has(a)||s.issues.push({code:"invalid_value",values:n,input:a,inst:e}),s}}),DY=q("$ZodTransform",(e,t)=>{ut.init(e,t),e._zod.parse=(n,s)=>{const r=t.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(i=>(n.value=i,n));if(r instanceof Promise)throw new pc;return n.value=r,n}}),zY=q("$ZodOptional",(e,t)=>{ut.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Ye(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Ye(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${nv(n.source)})?$`):void 0}),e._zod.parse=(n,s)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,s):n.value===void 0?n:t.innerType._zod.run(n,s)}),LY=q("$ZodNullable",(e,t)=>{ut.init(e,t),Ye(e._zod,"optin",()=>t.innerType._zod.optin),Ye(e._zod,"optout",()=>t.innerType._zod.optout),Ye(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${nv(n.source)}|null)$`):void 0}),Ye(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,s)=>n.value===null?n:t.innerType._zod.run(n,s)}),$Y=q("$ZodDefault",(e,t)=>{ut.init(e,t),e._zod.optin="optional",Ye(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(a=>Pw(a,t)):Pw(r,t)}});function Pw(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const PY=q("$ZodPrefault",(e,t)=>{ut.init(e,t),e._zod.optin="optional",Ye(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,s))}),OY=q("$ZodNonOptional",(e,t)=>{ut.init(e,t),Ye(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(a=>Ow(a,e)):Ow(r,e)}});function Ow(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const BY=q("$ZodCatch",(e,t)=>{ut.init(e,t),e._zod.optin="optional",Ye(e._zod,"optout",()=>t.innerType._zod.optout),Ye(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(a=>(n.value=a.value,a.issues.length&&(n.value=t.catchValue({...n,error:{issues:a.issues.map(i=>Ja(i,s,Qa()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(a=>Ja(a,s,Qa()))},input:n.value}),n.issues=[]),n)}}),IY=q("$ZodPipe",(e,t)=>{ut.init(e,t),Ye(e._zod,"values",()=>t.in._zod.values),Ye(e._zod,"optin",()=>t.in._zod.optin),Ye(e._zod,"optout",()=>t.out._zod.optout),Ye(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,s)=>{const r=t.in._zod.run(n,s);return r instanceof Promise?r.then(a=>Bw(a,t,s)):Bw(r,t,s)}});function Bw(e,t,n){return Bl(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const HY=q("$ZodReadonly",(e,t)=>{ut.init(e,t),Ye(e._zod,"propValues",()=>t.innerType._zod.propValues),Ye(e._zod,"values",()=>t.innerType._zod.values),Ye(e._zod,"optin",()=>t.innerType._zod.optin),Ye(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,s)=>{const r=t.innerType._zod.run(n,s);return r instanceof Promise?r.then(Iw):Iw(r)}});function Iw(e){return e.value=Object.freeze(e.value),e}const UY=q("$ZodCustom",(e,t)=>{fn.init(e,t),ut.init(e,t),e._zod.parse=(n,s)=>n,e._zod.check=n=>{const s=n.value,r=t.fn(s);if(r instanceof Promise)return r.then(a=>Hw(a,n,s,e));Hw(r,n,s,e)}});function Hw(e,t,n,s){if(!e){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),t.issues.push(xc(r))}}class FY{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const s=n[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const s={...this.get(n)??{}};return delete s.id,{...s,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function VY(){return new FY}const Bu=VY();function qY(e,t){return new e({type:"string",...ce(t)})}function GY(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ce(t)})}function Uw(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ce(t)})}function ZY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ce(t)})}function YY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ce(t)})}function XY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ce(t)})}function WY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ce(t)})}function KY(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ce(t)})}function QY(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ce(t)})}function JY(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ce(t)})}function eX(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ce(t)})}function tX(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ce(t)})}function nX(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ce(t)})}function sX(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ce(t)})}function rX(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ce(t)})}function aX(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ce(t)})}function oX(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ce(t)})}function iX(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ce(t)})}function lX(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ce(t)})}function cX(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ce(t)})}function uX(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ce(t)})}function dX(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ce(t)})}function fX(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ce(t)})}function mX(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ce(t)})}function hX(e,t){return new e({type:"string",format:"date",check:"string_format",...ce(t)})}function gX(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ce(t)})}function pX(e,t){return new e({type:"string",format:"duration",check:"string_format",...ce(t)})}function xX(e,t){return new e({type:"number",checks:[],...ce(t)})}function vX(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...ce(t)})}function yX(e,t){return new e({type:"boolean",...ce(t)})}function bX(e){return new e({type:"unknown"})}function wX(e,t){return new e({type:"never",...ce(t)})}function Fw(e,t){return new X_({check:"less_than",...ce(t),value:e,inclusive:!1})}function _h(e,t){return new X_({check:"less_than",...ce(t),value:e,inclusive:!0})}function Vw(e,t){return new W_({check:"greater_than",...ce(t),value:e,inclusive:!1})}function Ah(e,t){return new W_({check:"greater_than",...ce(t),value:e,inclusive:!0})}function qw(e,t){return new BZ({check:"multiple_of",...ce(t),value:e})}function J_(e,t){return new HZ({check:"max_length",...ce(t),maximum:e})}function ef(e,t){return new UZ({check:"min_length",...ce(t),minimum:e})}function eA(e,t){return new FZ({check:"length_equals",...ce(t),length:e})}function NX(e,t){return new VZ({check:"string_format",format:"regex",...ce(t),pattern:e})}function jX(e){return new qZ({check:"string_format",format:"lowercase",...ce(e)})}function SX(e){return new GZ({check:"string_format",format:"uppercase",...ce(e)})}function kX(e,t){return new ZZ({check:"string_format",format:"includes",...ce(t),includes:e})}function CX(e,t){return new YZ({check:"string_format",format:"starts_with",...ce(t),prefix:e})}function EX(e,t){return new XZ({check:"string_format",format:"ends_with",...ce(t),suffix:e})}function Xc(e){return new WZ({check:"overwrite",tx:e})}function _X(e){return Xc(t=>t.normalize(e))}function AX(){return Xc(e=>e.trim())}function TX(){return Xc(e=>e.toLowerCase())}function MX(){return Xc(e=>e.toUpperCase())}function RX(e,t,n){return new e({type:"array",element:t,...ce(n)})}function DX(e,t,n){return new e({type:"custom",check:"custom",fn:t,...ce(n)})}const zX=q("ZodISODateTime",(e,t)=>{uY.init(e,t),ot.init(e,t)});function LX(e){return mX(zX,e)}const $X=q("ZodISODate",(e,t)=>{dY.init(e,t),ot.init(e,t)});function PX(e){return hX($X,e)}const OX=q("ZodISOTime",(e,t)=>{fY.init(e,t),ot.init(e,t)});function BX(e){return gX(OX,e)}const IX=q("ZodISODuration",(e,t)=>{mY.init(e,t),ot.init(e,t)});function HX(e){return pX(IX,e)}const UX=(e,t)=>{H_.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>iZ(e,n)},flatten:{value:n=>oZ(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},jm=q("ZodError",UX,{Parent:Error}),FX=lZ(jm),VX=cZ(jm),qX=F_(jm),GX=V_(jm),Nt=q("ZodType",(e,t)=>(ut.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),e.clone=(n,s)=>bo(e,n,s),e.brand=()=>e,e.register=(n,s)=>(n.add(e,s),e),e.parse=(n,s)=>FX(e,n,s,{callee:e.parse}),e.safeParse=(n,s)=>qX(e,n,s),e.parseAsync=async(n,s)=>VX(e,n,s,{callee:e.parseAsync}),e.safeParseAsync=async(n,s)=>GX(e,n,s),e.spa=e.safeParseAsync,e.refine=(n,s)=>e.check(BW(n,s)),e.superRefine=n=>e.check(IW(n)),e.overwrite=n=>e.check(Xc(n)),e.optional=()=>Xw(e),e.nullable=()=>Ww(e),e.nullish=()=>Xw(Ww(e)),e.nonoptional=n=>MW(e,n),e.array=()=>eo(e),e.or=n=>bW([e,n]),e.and=n=>NW(e,n),e.transform=n=>Kw(e,kW(n)),e.default=n=>_W(e,n),e.prefault=n=>TW(e,n),e.catch=n=>DW(e,n),e.pipe=n=>Kw(e,n),e.readonly=()=>$W(e),e.describe=n=>{const s=e.clone();return Bu.add(s,{description:n}),s},Object.defineProperty(e,"description",{get(){var n;return(n=Bu.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Bu.get(e);const s=e.clone();return Bu.add(s,n[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),tA=q("_ZodString",(e,t)=>{ov.init(e,t),Nt.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...s)=>e.check(NX(...s)),e.includes=(...s)=>e.check(kX(...s)),e.startsWith=(...s)=>e.check(CX(...s)),e.endsWith=(...s)=>e.check(EX(...s)),e.min=(...s)=>e.check(ef(...s)),e.max=(...s)=>e.check(J_(...s)),e.length=(...s)=>e.check(eA(...s)),e.nonempty=(...s)=>e.check(ef(1,...s)),e.lowercase=s=>e.check(jX(s)),e.uppercase=s=>e.check(SX(s)),e.trim=()=>e.check(AX()),e.normalize=(...s)=>e.check(_X(...s)),e.toLowerCase=()=>e.check(TX()),e.toUpperCase=()=>e.check(MX())}),ZX=q("ZodString",(e,t)=>{ov.init(e,t),tA.init(e,t),e.email=n=>e.check(GY(YX,n)),e.url=n=>e.check(KY(XX,n)),e.jwt=n=>e.check(fX(uW,n)),e.emoji=n=>e.check(QY(WX,n)),e.guid=n=>e.check(Uw(Gw,n)),e.uuid=n=>e.check(ZY(Iu,n)),e.uuidv4=n=>e.check(YY(Iu,n)),e.uuidv6=n=>e.check(XY(Iu,n)),e.uuidv7=n=>e.check(WY(Iu,n)),e.nanoid=n=>e.check(JY(KX,n)),e.guid=n=>e.check(Uw(Gw,n)),e.cuid=n=>e.check(eX(QX,n)),e.cuid2=n=>e.check(tX(JX,n)),e.ulid=n=>e.check(nX(eW,n)),e.base64=n=>e.check(cX(iW,n)),e.base64url=n=>e.check(uX(lW,n)),e.xid=n=>e.check(sX(tW,n)),e.ksuid=n=>e.check(rX(nW,n)),e.ipv4=n=>e.check(aX(sW,n)),e.ipv6=n=>e.check(oX(rW,n)),e.cidrv4=n=>e.check(iX(aW,n)),e.cidrv6=n=>e.check(lX(oW,n)),e.e164=n=>e.check(dX(cW,n)),e.datetime=n=>e.check(LX(n)),e.date=n=>e.check(PX(n)),e.time=n=>e.check(BX(n)),e.duration=n=>e.check(HX(n))});function Wt(e){return qY(ZX,e)}const ot=q("ZodStringFormat",(e,t)=>{et.init(e,t),tA.init(e,t)}),YX=q("ZodEmail",(e,t)=>{tY.init(e,t),ot.init(e,t)}),Gw=q("ZodGUID",(e,t)=>{JZ.init(e,t),ot.init(e,t)}),Iu=q("ZodUUID",(e,t)=>{eY.init(e,t),ot.init(e,t)}),XX=q("ZodURL",(e,t)=>{nY.init(e,t),ot.init(e,t)}),WX=q("ZodEmoji",(e,t)=>{sY.init(e,t),ot.init(e,t)}),KX=q("ZodNanoID",(e,t)=>{rY.init(e,t),ot.init(e,t)}),QX=q("ZodCUID",(e,t)=>{aY.init(e,t),ot.init(e,t)}),JX=q("ZodCUID2",(e,t)=>{oY.init(e,t),ot.init(e,t)}),eW=q("ZodULID",(e,t)=>{iY.init(e,t),ot.init(e,t)}),tW=q("ZodXID",(e,t)=>{lY.init(e,t),ot.init(e,t)}),nW=q("ZodKSUID",(e,t)=>{cY.init(e,t),ot.init(e,t)}),sW=q("ZodIPv4",(e,t)=>{hY.init(e,t),ot.init(e,t)}),rW=q("ZodIPv6",(e,t)=>{gY.init(e,t),ot.init(e,t)}),aW=q("ZodCIDRv4",(e,t)=>{pY.init(e,t),ot.init(e,t)}),oW=q("ZodCIDRv6",(e,t)=>{xY.init(e,t),ot.init(e,t)}),iW=q("ZodBase64",(e,t)=>{vY.init(e,t),ot.init(e,t)}),lW=q("ZodBase64URL",(e,t)=>{bY.init(e,t),ot.init(e,t)}),cW=q("ZodE164",(e,t)=>{wY.init(e,t),ot.init(e,t)}),uW=q("ZodJWT",(e,t)=>{jY.init(e,t),ot.init(e,t)}),nA=q("ZodNumber",(e,t)=>{Q_.init(e,t),Nt.init(e,t),e.gt=(s,r)=>e.check(Vw(s,r)),e.gte=(s,r)=>e.check(Ah(s,r)),e.min=(s,r)=>e.check(Ah(s,r)),e.lt=(s,r)=>e.check(Fw(s,r)),e.lte=(s,r)=>e.check(_h(s,r)),e.max=(s,r)=>e.check(_h(s,r)),e.int=s=>e.check(Zw(s)),e.safe=s=>e.check(Zw(s)),e.positive=s=>e.check(Vw(0,s)),e.nonnegative=s=>e.check(Ah(0,s)),e.negative=s=>e.check(Fw(0,s)),e.nonpositive=s=>e.check(_h(0,s)),e.multipleOf=(s,r)=>e.check(qw(s,r)),e.step=(s,r)=>e.check(qw(s,r)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function $a(e){return xX(nA,e)}const dW=q("ZodNumberFormat",(e,t)=>{SY.init(e,t),nA.init(e,t)});function Zw(e){return vX(dW,e)}const fW=q("ZodBoolean",(e,t)=>{kY.init(e,t),Nt.init(e,t)});function mW(e){return yX(fW,e)}const hW=q("ZodUnknown",(e,t)=>{CY.init(e,t),Nt.init(e,t)});function Yw(){return bX(hW)}const gW=q("ZodNever",(e,t)=>{EY.init(e,t),Nt.init(e,t)});function pW(e){return wX(gW,e)}const xW=q("ZodArray",(e,t)=>{_Y.init(e,t),Nt.init(e,t),e.element=t.element,e.min=(n,s)=>e.check(ef(n,s)),e.nonempty=n=>e.check(ef(1,n)),e.max=(n,s)=>e.check(J_(n,s)),e.length=(n,s)=>e.check(eA(n,s)),e.unwrap=()=>e.element});function eo(e,t){return RX(xW,e,t)}const vW=q("ZodObject",(e,t)=>{AY.init(e,t),Nt.init(e,t),Ye(e,"shape",()=>t.shape),e.keyof=()=>jW(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Yw()}),e.loose=()=>e.clone({...e._zod.def,catchall:Yw()}),e.strict=()=>e.clone({...e._zod.def,catchall:pW()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>nZ(e,n),e.merge=n=>sZ(e,n),e.pick=n=>eZ(e,n),e.omit=n=>tZ(e,n),e.partial=(...n)=>rZ(sA,e,n[0]),e.required=(...n)=>aZ(rA,e,n[0])});function Cr(e,t){const n={type:"object",get shape(){return sv(this,"shape",{...e}),this.shape},...ce(t)};return new vW(n)}const yW=q("ZodUnion",(e,t)=>{TY.init(e,t),Nt.init(e,t),e.options=t.options});function bW(e,t){return new yW({type:"union",options:e,...ce(t)})}const wW=q("ZodIntersection",(e,t)=>{MY.init(e,t),Nt.init(e,t)});function NW(e,t){return new wW({type:"intersection",left:e,right:t})}const up=q("ZodEnum",(e,t)=>{RY.init(e,t),Nt.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(s,r)=>{const a={};for(const i of s)if(n.has(i))a[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new up({...t,checks:[],...ce(r),entries:a})},e.exclude=(s,r)=>{const a={...t.entries};for(const i of s)if(n.has(i))delete a[i];else throw new Error(`Key ${i} not found in enum`);return new up({...t,checks:[],...ce(r),entries:a})}});function jW(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new up({type:"enum",entries:n,...ce(t)})}const SW=q("ZodTransform",(e,t)=>{DY.init(e,t),Nt.init(e,t),e._zod.parse=(n,s)=>{n.addIssue=a=>{if(typeof a=="string")n.issues.push(xc(a,n.value,t));else{const i=a;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!0),n.issues.push(xc(i))}};const r=t.transform(n.value,n);return r instanceof Promise?r.then(a=>(n.value=a,n)):(n.value=r,n)}});function kW(e){return new SW({type:"transform",transform:e})}const sA=q("ZodOptional",(e,t)=>{zY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Xw(e){return new sA({type:"optional",innerType:e})}const CW=q("ZodNullable",(e,t)=>{LY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ww(e){return new CW({type:"nullable",innerType:e})}const EW=q("ZodDefault",(e,t)=>{$Y.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function _W(e,t){return new EW({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const AW=q("ZodPrefault",(e,t)=>{PY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function TW(e,t){return new AW({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const rA=q("ZodNonOptional",(e,t)=>{OY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function MW(e,t){return new rA({type:"nonoptional",innerType:e,...ce(t)})}const RW=q("ZodCatch",(e,t)=>{BY.init(e,t),Nt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function DW(e,t){return new RW({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const zW=q("ZodPipe",(e,t)=>{IY.init(e,t),Nt.init(e,t),e.in=t.in,e.out=t.out});function Kw(e,t){return new zW({type:"pipe",in:e,out:t})}const LW=q("ZodReadonly",(e,t)=>{HY.init(e,t),Nt.init(e,t)});function $W(e){return new LW({type:"readonly",innerType:e})}const PW=q("ZodCustom",(e,t)=>{UY.init(e,t),Nt.init(e,t)});function OW(e){const t=new fn({check:"custom"});return t._zod.check=e,t}function BW(e,t={}){return DX(PW,e,t)}function IW(e){const t=OW(n=>(n.addIssue=s=>{if(typeof s=="string")n.issues.push(xc(s,n.value,t._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(xc(r))}},e(n.value,n)));return t}const HW=Cr({type:Wt(),id:Wt()}),UW=Cr({skill:Wt(),level:$a()}),FW=Cr({skillLevel:UW.optional(),items:eo(HW).optional()}),VW=Cr({base:Wt(),subtext:Wt()}),qW=Cr({rank:$a(),edid:Wt(),name:Wt(),description:VW,prerequisites:FW}),GW=Cr({x:$a(),y:$a(),horizontal:$a(),vertical:$a()}),ZW=Cr({parents:eo(Wt()),children:eo(Wt())}),YW=Cr({edid:Wt(),name:Wt(),ranks:eo(qW),totalRanks:$a(),connections:ZW,isRoot:mW(),position:GW}),XW=Cr({treeId:Wt(),treeName:Wt(),treeDescription:Wt(),category:Wt(),perks:eo(YW)});eo(XW);function WW(e){return e.length===0?{minX:0,maxX:0,minY:0,maxY:0}:e.reduce((t,n)=>({minX:Math.min(t.minX,n.x),maxX:Math.max(t.maxX,n.x),minY:Math.min(t.minY,n.y),maxY:Math.max(t.maxY,n.y)}),{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0})}const KW=(e,t)=>({perkNode:n=>o.jsx(HE,{...n,onTogglePerk:e,onRankChange:t})}),Th={cellWidth:240,cellHeight:140,nodeWidth:140,nodeHeight:80,gridGap:40,padding:80};function QW(e,t,n){const{x:s,y:r,horizontal:a,vertical:i}=e,l=t.maxX-s+t.minX,c=-a,u=t.maxY-r+t.minY,d=-i,f=(l-t.minX)*n.cellWidth+(l-t.minX)*n.gridGap+n.padding+n.cellWidth/2,m=(u-t.minY)*n.cellHeight+(u-t.minY)*n.gridGap+n.padding+n.cellHeight/2,h=c*(n.cellWidth/2-n.nodeWidth/2),p=d*(n.cellHeight/2-n.nodeHeight/2),v=f+h,w=m+p;return{x:v,y:w,gridX:l,gridY:u,horizontal:c,vertical:d}}function JW(e,t,n,s){const r=e-s.padding,a=t-s.padding,i=Math.floor(r/(s.cellWidth+s.gridGap)),l=Math.floor(a/(s.cellHeight+s.gridGap)),c=i*s.cellWidth+i*s.gridGap+s.padding+s.cellWidth/2,u=l*s.cellHeight+l*s.gridGap+s.padding+s.cellHeight/2,d=e-c,f=t-u,m=s.cellWidth/2-s.nodeWidth/2,h=s.cellHeight/2-s.nodeHeight/2,p=Math.max(-1,Math.min(1,d/m)),v=Math.max(-1,Math.min(1,f/h)),w=n.maxX-i+n.minX,x=n.maxY-l+n.minY,b=-p,y=-v;return{x:e,y:t,gridX:w,gridY:x,horizontal:b,vertical:y}}function eK(e,t,n){const s=Math.ceil(Math.sqrt(t)),r=Math.floor(e/s),a=e%s,i=a*(n.cellWidth+n.gridGap)+n.padding+n.cellWidth/2,l=r*(n.cellHeight+n.gridGap)+n.padding+n.cellHeight/2;return{x:i,y:l,gridX:a,gridY:r,horizontal:0,vertical:0}}function tK({tree:e,onTogglePerk:t,onRankChange:n,selectedPerks:s,className:r}){const[a,i]=L.useState(null),[l,c]=g.useState(new Map),[u,d]=g.useState(!1),[f,m]=g.useState(!1),[h,p]=g.useState(null),v=g.useMemo(()=>{if(!e)return null;const A=BE(e);return A.success?A.data:(console.error("Invalid perk tree data:",A.error),null)},[e]);L.useEffect(()=>{if(!v){c(new Map);return}console.log("Loading saved positions for tree:",v.treeId),console.log("Tree perks count:",v.perks.length),console.log("Tree perks:",v.perks.map(A=>({edid:A.edid,name:A.name}))),d(!0),IE(v.treeId).then(A=>{if(console.log("Loaded saved positions:",A?"Found":"Not found"),A){const D=ow(v.treeId,A);console.log("Loaded positions count:",D.size),console.log("Loaded positions keys:",Array.from(D.keys())),c(D)}else c(new Map)}).catch(A=>{console.warn("Failed to load saved positions:",A),c(new Map)}).finally(()=>{d(!1)})},[v==null?void 0:v.treeId]);const w=g.useMemo(()=>KW(t,n),[t,n]),x=g.useMemo(()=>{if(!v||u)return new Map;const A=new Map,D=v.perks.map(B=>B.position).filter(B=>B!==void 0);let M={minX:0,maxX:0,minY:0,maxY:0};D.length>0&&(M=WW(D)),p(M);let R=0;return v.perks.forEach(B=>{const H=l.get(B.edid);if(H){A.set(B.edid,H);return}if(B.position){const V=QW(B.position,M,Th);A.set(B.edid,V);return}const I=eK(R,v.perks.length,Th);A.set(B.edid,I),R++}),A},[v,l,u]),b=g.useMemo(()=>{if(!v)return{saved:0,avif:0,default:0,total:0};let A=0,D=0,M=0;const R=v.perks.find(I=>I.edid==="LoreRimTrapper_Rank1"),B=v.perks.find(I=>I.edid==="LoreRimTrapper_Rank2"),H=v.perks.find(I=>I.edid==="LoreRimTrapper_Rank3");if(R){console.log("Found Trapper perk:",R);const I=l.get("LoreRimTrapper_Rank1");console.log("Trapper saved position:",I),console.log("Trapper embedded position:",R.position),console.log("Trapper connections:",R.connections)}else console.log("Trapper perk NOT found in tree!");if(B){console.log("Found Poisoned Clamps perk:",B);const I=l.get("LoreRimTrapper_Rank2");console.log("Poisoned Clamps saved position:",I),console.log("Poisoned Clamps embedded position:",B.position),console.log("Poisoned Clamps connections:",B.connections)}else console.log("Poisoned Clamps perk NOT found in tree!");if(H){console.log("Found Salt on the Wound perk:",H);const I=l.get("LoreRimTrapper_Rank3");console.log("Salt on the Wound saved position:",I),console.log("Salt on the Wound embedded position:",H.position)}else console.log("Salt on the Wound perk NOT found in tree!");return v.perks.forEach(I=>{l.get(I.edid)?A++:I.position?D++:M++}),{saved:A,avif:D,default:M,total:v.perks.length}},[v,l]),y=g.useMemo(()=>{if(!v||u)return[];const A=v.perks.map(D=>{var V,G,J,oe;const M=D.edid,R=x.get(M)||{x:0,y:0},B=((G=(V=D.connections)==null?void 0:V.children)==null?void 0:G.length)>0||!1,H=((oe=(J=D.connections)==null?void 0:J.parents)==null?void 0:oe.length)===0||!1,I=!l.get(M)&&!D.position;return M.includes("LoreRimTrapper")&&(console.log(`Node ${M} position:`,R),console.log(`Node ${M} hasChildren:`,B),console.log(`Node ${M} isRoot:`,H),console.log(`Node ${M} hasNoPosition:`,I)),{id:M,type:"perkNode",position:{x:R.x,y:R.y},draggable:f||I,data:{...D,selected:!1,hasChildren:B,isRoot:H,hasNoPosition:I}}});return console.log("Total nodes created:",A.length),console.log("Trapper-related nodes:",A.filter(D=>D.id.includes("LoreRimTrapper"))),A},[v,x,f,u,l]),N=g.useMemo(()=>{var M,R,B;if(!v)return[];const A=[],D=v.perks.find(H=>H.edid==="LoreRimTrapper_Rank1");return D&&(console.log("Trapper children connections:",(M=D.connections)==null?void 0:M.children),(B=(R=D.connections)==null?void 0:R.children)==null||B.forEach(H=>{const I=v.perks.some(V=>V.edid===H);console.log(`Trapper child ${H} exists:`,I)})),v.perks.forEach(H=>{var V;const I=H.edid;(V=H.connections)!=null&&V.children&&H.connections.children.forEach(G=>{if(G===I)return;v.perks.some(oe=>oe.edid===G)&&A.push({id:`${I}-${G}`,source:I,target:G,type:"straight",style:{stroke:"#d4af37",strokeWidth:3,opacity:.8}})})}),console.log("Total edges created:",A.length),console.log("Edge connections:",A.map(H=>`${H.source} -> ${H.target}`)),A},[v]),[j,S,k]=DE(y),[E,C,_]=zE(N);L.useEffect(()=>{S(y)},[y,S]),L.useEffect(()=>{v&&S(A=>A.map(D=>{const M=s.find(B=>B.edid===D.id),R=M!==void 0;return{...D,draggable:f,data:{...D.data,selected:R,currentRank:(M==null?void 0:M.currentRank)||0}}}))},[s,S,v,f]),L.useEffect(()=>{C(N)},[N,C]),L.useEffect(()=>{v&&j.length>0&&a&&setTimeout(()=>{a.fitView({padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5})},200)},[v==null?void 0:v.treeId,a]);const P=g.useCallback(A=>C(D=>P0(A,D)),[C]),O=g.useCallback((A,D)=>{if(!f||!h)return;const M=JW(D.position.x,D.position.y,h,Th),R=new Map(l);R.set(D.id,M),c(R)},[f,l,h]),$=g.useCallback(()=>{if(!v)return;const A=IV(v,x);HV(A)},[v,x]),T=g.useCallback(A=>{var R;const D=(R=A.target.files)==null?void 0:R[0];if(!D||!v)return;const M=new FileReader;M.onload=B=>{var H;try{const I=JSON.parse((H=B.target)==null?void 0:H.result);if(I.treeId===v.treeId){const V=ow(v.treeId,I);c(V)}else alert("Position file does not match current tree!")}catch(I){alert("Error loading position file!"),console.error("Error loading positions:",I)}},M.readAsText(D)},[v]),z=g.useCallback(()=>{m(!f)},[f]);return v?o.jsxs("div",{className:`w-full h-full bg-background rounded-lg border overflow-auto ${r||""}`,children:[o.jsx("div",{className:"p-4 border-b bg-muted/20",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Experimental AVIF Grid Canvas (Mirrored + Enhanced Spacing)"}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Bottom-up tree with left-right mirroring using enhanced grid spacing",l.size>0&&!u&&o.jsx("span",{className:"text-green-600 ml-2",children:"• Using saved positions"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[u&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 text-xs text-blue-600",children:[o.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),"Loading positions..."]}),!u&&b.total>0&&o.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 text-xs bg-muted/30 rounded border",children:[o.jsxs("span",{className:"text-green-600",children:["Saved: ",b.saved]}),o.jsxs("span",{className:"text-blue-600",children:["AVIF: ",b.avif]}),o.jsxs("span",{className:"text-red-600",children:["Default: ",b.default]}),o.jsxs("span",{className:"text-muted-foreground",children:["Total: ",b.total]})]}),o.jsx("button",{onClick:z,className:`px-3 py-1 text-xs rounded border ${f?"bg-blue-500 text-white border-blue-500":"bg-background text-foreground border-border hover:bg-muted"}`,children:f?"Exit Edit":"Edit Mode"}),o.jsx("button",{onClick:$,className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted",children:"Save Positions"}),o.jsxs("label",{className:"px-3 py-1 text-xs rounded border bg-background text-foreground border-border hover:bg-muted cursor-pointer",children:["Load Positions",o.jsx("input",{type:"file",accept:".json",onChange:T,className:"hidden"})]})]})]})}),o.jsx("div",{className:"w-full h-full min-h-[400px]",style:{zIndex:Dt.CONTENT},children:o.jsxs(F0,{nodes:j,edges:E,onNodesChange:k,onEdgesChange:_,onConnect:P,onInit:i,onNodeDragStop:O,nodeTypes:w,nodesDraggable:f,nodesFocusable:!1,selectNodesOnDrag:!1,nodesConnectable:!1,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.2,includeHiddenNodes:!1,minZoom:.2,maxZoom:1.5},minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},style:{backgroundColor:"hsl(var(--background))"},children:[o.jsx(OE,{color:"hsl(var(--muted-foreground))",gap:20,size:1,style:{backgroundColor:"hsl(var(--background))"}}),o.jsx($E,{})]})})]}):o.jsx("div",{className:`flex items-center justify-center p-8 text-muted-foreground ${r||""}`,children:o.jsx("p",{children:e?"Invalid perk tree data":"Select a skill to view its perk tree"})})}function nK(){var m;const{skills:e,selectedSkill:t,perkTree:n,selectedPerks:s,availablePerks:r,onSkillSelect:a,onPerkSelect:i,onPerkRankChange:l,loading:c,error:u}=p_(),{build:d}=gt(),f=g.useMemo(()=>!n||!s.length?[]:s.map(h=>{var w,x;const p=n.perks.find(b=>b.edid===h);if(!p)return null;const v=((x=(w=d.perks)==null?void 0:w.ranks)==null?void 0:x[h])||0;return{...p,selectedRank:v}}).filter(Boolean),[n,s,(m=d.perks)==null?void 0:m.ranks]);return c?o.jsx("div",{className:"flex items-center justify-center p-8",children:o.jsx("p",{className:"text-muted-foreground",children:"Loading skills..."})}):u?o.jsx("div",{className:"flex items-center justify-center p-8",children:o.jsxs("p",{className:"text-destructive",children:["Error loading skills: ",u]})}):o.jsx("div",{className:"container mx-auto p-6 space-y-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Skills - Experimental AVIF Grid"}),o.jsx("p",{className:"text-muted-foreground",children:"Experimental perk tree visualization using AVIF coordinate system"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("label",{className:"text-sm font-medium",children:"Select Skill:"}),o.jsxs(Qf,{children:[o.jsx(Jf,{asChild:!0,children:o.jsxs(W,{variant:"outline",className:"w-[300px] justify-between",children:[t?t.name:"Choose a skill to view its perk tree",o.jsx(En,{className:"h-4 w-4"})]})}),o.jsx(Hc,{className:"w-[300px] max-h-[400px] overflow-y-auto",children:e.map(h=>o.jsx(_s,{onClick:()=>a(h.id),className:"cursor-pointer",children:h.name},h.id))})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold mb-3",children:t?`${t.name} Perk Tree`:"Perk Tree"}),o.jsx("div",{className:"bg-background border rounded-lg h-[600px]",children:o.jsx(tK,{tree:n||void 0,onTogglePerk:i,onRankChange:l,selectedPerks:f,className:"h-full"})})]}),t&&n&&o.jsxs("div",{className:"bg-muted/20 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-sm font-medium mb-2",children:"Debug Information"}),o.jsxs("div",{className:"text-xs space-y-1 text-muted-foreground",children:[o.jsxs("p",{children:["Selected Skill: ",t.name]}),o.jsxs("p",{children:["Perk Tree: ",n.treeName]}),o.jsxs("p",{children:["Total Perks: ",n.perks.length]}),o.jsxs("p",{children:["Selected Perks: ",s.length]}),o.jsxs("p",{children:["Available Perks: ",r.length]}),o.jsxs("p",{children:["Perks with Position Data:"," ",n.perks.filter(h=>h.position).length]}),n.perks.length>0&&n.perks[0].position&&o.jsxs("p",{children:["Sample Position: X=",n.perks[0].position.x,", Y=",n.perks[0].position.y,", H=",n.perks[0].position.horizontal,", V=",n.perks[0].position.vertical]})]})]})]})]})})}function sK(e={}){const{autoLoad:t=!0,refreshOnMount:n=!1}=e,{data:s,loading:r,error:a,load:i}=Ho(),l=g.useCallback(async()=>{t&&s.length===0&&await i()},[t,s.length,i]),c=g.useCallback(async()=>{await i()},[i]),u=g.useCallback(()=>{},[]);g.useEffect(()=>{t&&s.length===0&&l()},[t,s.length,l]),g.useEffect(()=>{n&&c()},[n,c]);const d=s.length,f=[...new Set(s.map(b=>b.school).filter(Boolean))],m=[...new Set(s.map(b=>b.level).filter(Boolean))],h=new Date().toISOString(),p=s.length>0?{spells:s,totalCount:d,schools:f,levels:m,lastUpdated:h}:null,v=g.useCallback(b=>Ho.getState().getByEditorId(b),[]),w=g.useCallback(b=>Ho.getState().getBySchool(b),[]),x=g.useCallback(b=>Ho.getState().getByLevel(b),[]);return{spells:s,spellData:p,loading:r,error:a,totalCount:d,schools:f,levels:m,lastUpdated:h,loadSpells:l,refresh:c,clearError:u,getSpellByEditorId:v,getSpellsBySchool:w,getSpellsByLevel:x}}function rK(){const[e,t]=g.useState(null),[n,s]=g.useState("grid");return{selectedSpell:e,viewMode:n,setSelectedSpell:t,setViewMode:s}}const aK={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"};function oK({spells:e,variant:t="default",showEffects:n=!0,showTags:s=!0,columns:r=3,className:a="",expandedCards:i=new Set,onToggleExpansion:l}){return e.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-muted-foreground",children:"No spells found"})}):o.jsx("div",{className:`grid gap-4 ${aK[r]} ${a}`,children:e.map((c,u)=>o.jsx(K0,{spell:c,isExpanded:i.has(`${c.name}-${c.editorId}-${u}`),onToggle:()=>l==null?void 0:l(`${c.name}-${c.editorId}-${u}`)},`${c.name}-${c.editorId}-${u}`))})}function iK({spells:e,variant:t="default",showEffects:n=!0,showTags:s=!0,className:r="",expandedCards:a=new Set,onToggleExpansion:i}){return e.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-muted-foreground",children:"No spells found"})}):o.jsx("div",{className:`space-y-4 ${r}`,children:e.map((l,c)=>o.jsx(K0,{spell:l,isExpanded:a.has(`${l.name}-${l.editorId}-${c}`),onToggle:()=>i==null?void 0:i(`${l.name}-${l.editorId}-${c}`)},`${l.name}-${l.editorId}-${c}`))})}const Qw={Novice:1,Apprentice:2,Adept:3,Expert:4,Master:5};function lK(){const{spells:e,loading:t,error:n}=sK(),{viewMode:s,setViewMode:r}=rK(),a=Array.isArray(e)?e:[],[i,l]=g.useState(new Set),[c,u]=g.useState("alphabetical"),d=y=>{l(N=>{const j=new Set(N);return j.has(y)?j.delete(y):j.add(y),j})},f=g.useMemo(()=>{if(console.log("Generating search categories directly:",{safeSpellsLength:a.length,firstSpell:a[0]}),a.length===0)return[];const y=[...new Set(a.map(j=>j.school))],N=[...new Set(a.map(j=>j.level))];return console.log("Extracted categories:",{schools:y,levels:N}),[{id:"keywords",name:"Fuzzy Search",placeholder:"Search spells by name, school, level, or effects...",options:[]},{id:"schools",name:"Magic Schools",placeholder:"Filter by school...",options:y.map(j=>({id:`school-${j}`,label:j,value:j,category:"Magic Schools",description:`${j} spells`}))},{id:"levels",name:"Spell Levels",placeholder:"Filter by level...",options:N.map(j=>({id:`level-${j}`,label:j,value:j,category:"Spell Levels",description:`${j} spells`}))}]},[a]);g.useEffect(()=>{console.log("SpellPageView Debug:",{spellsLength:(e==null?void 0:e.length)||0,safeSpellsLength:a.length,loading:t,error:n,searchCategoriesLength:(f==null?void 0:f.length)||0,searchCategories:f})},[e,a,t,n,f]);const[m,h]=g.useState([]),p=y=>{let N;typeof y=="string"?N={id:`custom-${y}`,label:y,value:y,category:"Fuzzy Search"}:N={id:`${y.category}-${y.id}`,label:y.label,value:y.value,category:y.category},m.some(j=>j.value===N.value&&j.category===N.category)||h(j=>[...j,N])},v=y=>{h(N=>N.filter(j=>j.id!==y))},w=()=>{h([])},x=a.filter(y=>m.length===0?!0:m.every(N=>{switch(N.category){case"Magic Schools":return y.school===N.value;case"Spell Levels":return y.level===N.value;case"Fuzzy Search":const j=N.value.toLowerCase();return y.name.toLowerCase().includes(j)||y.school.toLowerCase().includes(j)||y.level.toLowerCase().includes(j)||y.effects.some(S=>S.name.toLowerCase().includes(j));default:return!0}})),b=g.useMemo(()=>[...x].sort((y,N)=>{switch(c){case"alphabetical":return y.name.localeCompare(N.name);case"school":const j=y.school.localeCompare(N.school);return j!==0?j:y.name.localeCompare(N.name);case"level":const S=Qw[y.level]||0,k=Qw[N.level]||0;return S!==k?S-k:y.name.localeCompare(N.name);default:return 0}}),[x,c]);return t?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading spells..."})]})}):n?o.jsxs("div",{className:"text-center py-12",children:[o.jsxs("p",{className:"text-destructive mb-4",children:["Error loading spells: ",n]}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded",children:["Debug: ",a.length," spells, ",f.length," search categories",f.length>0&&o.jsxs("div",{className:"mt-1",children:["Categories: ",f.map(y=>`${y.name}(${y.options.length})`).join(", ")]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex-1",children:f.length>0?o.jsx(ga,{categories:f,onSelect:p,onCustomSearch:p}):o.jsxs("div",{className:"p-4 border border-dashed border-muted-foreground/20 rounded-lg text-center text-muted-foreground",children:["No search categories available. Spells loaded: ",a.length]})}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:c,onChange:y=>u(y.target.value),className:"appearance-none bg-background border border-border rounded-lg px-3 py-1.5 pr-8 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer",children:[o.jsx("option",{value:"alphabetical",children:"Sort: A-Z"}),o.jsx("option",{value:"school",children:"Sort: School"}),o.jsx("option",{value:"level",children:"Sort: Level"})]}),o.jsx(En,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]}),o.jsxs("div",{className:"flex border rounded-lg p-1 bg-muted",children:[o.jsx("button",{onClick:()=>r("grid"),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${s==="grid"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"Grid view",children:"Grid"}),o.jsx("button",{onClick:()=>r("list"),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${s==="list"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,title:"List view",children:"List"})]})]}),m.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:w,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx("span",{className:"text-lg",children:"×"}),"Clear All"]}),m.map(y=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>v(y.id),title:"Click to remove",children:[y.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},y.id))]})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[b.length," of ",a.length," spells"]}),o.jsx("div",{children:b.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No spells found matching your criteria."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]}):o.jsxs(o.Fragment,{children:[s==="grid"&&o.jsx(oK,{spells:b,variant:"default",columns:3,expandedCards:i,onToggleExpansion:d}),s==="list"&&o.jsx(iK,{spells:b,variant:"default",expandedCards:i,onToggleExpansion:d})]})})]})}function cK(){return o.jsx(Fn,{title:"Spell Reference",description:"Browse and search all available spells. Find the perfect magic for your character build.",children:o.jsx(lK,{})})}function uK(){const{data:e,loading:t,error:n,reload:s}=Y6(),r=e||[],[a,i]=g.useState([]),[l,c]=g.useState("alphabetical");g.useMemo(()=>r.map(mb),[r]);const d=(()=>{const y=b_(r),N=w_(r);return[{id:"fuzzy-search",name:"Fuzzy Search",placeholder:"Search by name, description, or abilities...",options:[]},{id:"categories",name:"Categories",placeholder:"Search by category...",options:y.map(j=>({id:`category-${j}`,label:j,value:j,category:"Categories",description:`Traits in ${j} category`}))},{id:"tags",name:"Tags",placeholder:"Search by tag...",options:N.map(j=>({id:`tag-${j}`,label:j,value:j,category:"Tags",description:`Traits tagged with ${j}`}))}]})(),f=y=>{let N;typeof y=="string"?N={id:`custom-${y}`,label:y,value:y,category:"Fuzzy Search"}:N={id:`${y.category}-${y.id}`,label:y.label,value:y.value,category:y.category},a.some(j=>j.value===N.value&&j.category===N.category)||i(j=>[...j,N])},m=y=>{i(N=>N.filter(j=>j.id!==y))},h=r.filter(y=>a.length===0?!0:a.every(N=>{var j;switch(N.category){case"Fuzzy Search":return!0;case"Categories":return y.category===N.value;case"Tags":return((j=y.tags)==null?void 0:j.some(S=>S===N.value))||!1;default:return!0}})),p=a.filter(y=>y.category==="Fuzzy Search").map(y=>y.value).join(" "),{filteredTraits:v}=y_(h,p),w=v.map(mb),x=r.map(y=>y.id||y.name),b=[...w].sort((y,N)=>{var j,S;switch(l){case"alphabetical":return y.name.localeCompare(N.name);case"category":const k=O=>{switch(O){case"Combat":return 1;case"Magic":return 2;case"Stealth":return 3;case"Social":return 4;case"Survival":return 5;default:return 6}},E=k(y.category),C=k(N.category);return E!==C?E-C:y.name.localeCompare(N.name);case"effect-count":const _=((j=y.effects)==null?void 0:j.length)||0,P=((S=N.effects)==null?void 0:S.length)||0;return _!==P?P-_:y.name.localeCompare(N.name);default:return 0}});return t?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading traits..."})]})}):n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-destructive mb-4",children:n}),o.jsx("button",{onClick:()=>s(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})}):o.jsxs(Fn,{title:"Traits",description:"Choose your character's traits. Traits provide unique abilities and modifiers that will shape your character's capabilities throughout their journey.",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(ga,{categories:d,onSelect:f,onCustomSearch:f})}),o.jsxs(Qf,{children:[o.jsx(Jf,{asChild:!0,children:o.jsxs(W,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[o.jsx(En,{className:"h-4 w-4"}),l==="alphabetical"?"A-Z":l==="category"?"Category":"Count"]})}),o.jsxs(Hc,{align:"end",children:[o.jsx(_s,{onClick:()=>c("alphabetical"),children:"Alphabetical"}),o.jsx(_s,{onClick:()=>c("category"),children:"Category"}),o.jsx(_s,{onClick:()=>c("effect-count"),children:"Effect Count"})]})]})]}),o.jsx("div",{className:"my-4",children:a.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsxs("button",{onClick:()=>i([]),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors duration-200 border border-border/50 hover:border-border cursor-pointer group",title:"Clear all filters",children:[o.jsx(Vt,{className:"h-3.5 w-3.5 group-hover:scale-110 transition-transform duration-200"}),"Clear All"]}),a.map(y=>o.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-skyrim-gold/20 border border-skyrim-gold/30 text-sm font-medium text-skyrim-gold hover:bg-skyrim-gold/30 transition-colors duration-200 cursor-pointer group",onClick:()=>m(y.id),title:"Click to remove",children:[y.label,o.jsx("span",{className:"ml-2 text-skyrim-gold/70 group-hover:text-skyrim-gold transition-colors duration-200",children:"×"})]},y.id))]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6",children:b.map(y=>o.jsx(Oq,{item:y,isExpanded:!0,className:"w-full",allTraitIds:x},y.id))}),b.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No traits found matching your criteria."}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search or filters."})]})]})}function dK(){const{build:e,updateBuild:t}=gt(),[n,s]=g.useState(e.traitLimits.regular),[r,a]=g.useState(e.traitLimits.bonus),i=g.useCallback(c=>{s(c),t({traitLimits:{...e.traitLimits,regular:c}})},[e.traitLimits,t]),l=g.useCallback(c=>{a(c),t({traitLimits:{...e.traitLimits,bonus:c}})},[e.traitLimits,t]);return{regularLimit:n,bonusLimit:r,handleRegularLimitChange:i,handleBonusLimitChange:l,currentRegularCount:e.traits.regular.length,currentBonusCount:e.traits.bonus.length}}function fK(){const{build:e,setBuildName:t,setBuildNotes:n,resetBuild:s}=gt(),[r,a]=g.useState(!1),i=dK(),l=dt(),c=[{id:"basic-info",component:o.jsx(Wj,{name:e.name,notes:e.notes,onNameChange:t,onNotesChange:n}),size:"full"},{id:"race",component:o.jsx(oC,{}),size:"half"},{id:"birthsign",component:o.jsx(Fk,{}),size:"half"},{id:"trait",component:o.jsx(N_,{}),size:"half"},{id:"religion",component:o.jsx(lC,{}),size:"half"},{id:"attributes",component:o.jsx(tS,{}),size:"full"},{id:"skills",component:o.jsx(v_,{}),size:"full"},{id:"destiny",component:o.jsx(eC,{navigate:l}),size:"full"},{id:"summary",component:o.jsx(Qj,{build:e}),size:"full"}];return o.jsxs(Fn,{title:"Character Builder",children:[o.jsx(qL,{onReset:()=>a(!0),build:e}),o.jsx(e$,{open:r,onConfirm:()=>{s(),a(!1)},onCancel:()=>a(!1)}),o.jsxs(Qi,{defaultValue:"build",className:"w-full",children:[o.jsxs(Ji,{className:"mb-4",children:[o.jsx(an,{value:"build",children:"Build"}),o.jsx(an,{value:"config",children:"Config"})]}),o.jsx(wn,{value:"build",children:o.jsx(GL,{cards:c,gap:16})}),o.jsx(wn,{value:"config",children:o.jsx(n$,{regularLimit:i.regularLimit,bonusLimit:i.bonusLimit,onRegularLimitChange:i.handleRegularLimitChange,onBonusLimitChange:i.handleBonusLimitChange,currentRegularCount:i.currentRegularCount,currentBonusCount:i.currentBonusCount})})]})]})}function mK(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx(ho,{children:"Crafting"}),o.jsx(rc,{children:"Plan your crafting recipes and material requirements"})]}),o.jsxs(ye,{children:[o.jsxs(Me,{children:[o.jsx(Be,{children:"Coming Soon"}),o.jsx(Ns,{children:"Crafting system is under development"})]}),o.jsx(be,{children:o.jsx(rc,{children:"This section will help you plan and optimize your crafting projects."})})]})]})}function hK(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx(ho,{children:"Equipment"}),o.jsx(rc,{children:"Browse and compare weapons, armor, and items"})]}),o.jsxs(ye,{children:[o.jsxs(Me,{children:[o.jsx(Be,{children:"Coming Soon"}),o.jsx(Ns,{children:"Equipment database is under development"})]}),o.jsx(be,{children:o.jsx(rc,{children:"This section will provide a comprehensive database of all equipment in the game."})})]})]})}const gK=()=>{const{build:e,getSummary:t}=gt(),n=dt(),s=t();return!e.name&&!e.race?o.jsxs(ye,{className:"border-dashed border-2 border-muted",children:[o.jsxs(Me,{children:[o.jsx(Be,{className:"text-lg",children:"No Character Build"}),o.jsx(Ns,{children:"Start building your character to see it here"})]}),o.jsx(be,{children:o.jsx(W,{onClick:()=>n("/build"),className:"w-full",children:"Create Character Build"})})]}):o.jsxs(ye,{children:[o.jsxs(Me,{children:[o.jsxs(Be,{className:"text-lg flex items-center justify-between",children:[o.jsx("span",{children:s.name}),o.jsx(W,{variant:"outline",size:"sm",onClick:()=>n("/build"),children:"Edit"})]}),o.jsx(Ns,{children:"Current character build status"})]}),o.jsxs(be,{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Race:"}),o.jsx(K,{variant:"secondary",className:"ml-2",children:s.race})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Birth Sign:"}),o.jsx(K,{variant:"secondary",className:"ml-2",children:s.stone})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Religion:"}),o.jsx(K,{variant:"secondary",className:"ml-2",children:s.religion})]})]}),o.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[o.jsxs("span",{children:[s.traitCount," traits"]}),o.jsx("span",{children:"•"}),o.jsxs("span",{children:[s.majorSkillCount," major skills"]}),o.jsx("span",{children:"•"}),o.jsxs("span",{children:[s.minorSkillCount," minor skills"]}),o.jsx("span",{children:"•"}),o.jsxs("span",{children:[s.equipmentCount," equipment"]})]})]})]})};function pK(){const e=dt(),t=()=>{e("/build")},n=[{name:"GigaPlanner",description:"Advanced build planner with detailed skill trees and optimization",url:"https://multidyls.github.io/GigaPlanner",icon:o.jsx(Sd,{className:"h-5 w-5 text-primary"}),category:"Build Planning",author:"Multidyls"},{name:"Alchemy Calculator",description:"Comprehensive alchemy crafting and ingredient database",url:"#",icon:o.jsx(Pl,{className:"h-5 w-5 text-primary"}),category:"Crafting",author:"Community"},{name:"Spell Sheet Generator",description:"Create and manage your spell collection with detailed stats",url:"#",icon:o.jsx(fx,{className:"h-5 w-5 text-primary"}),category:"Spells",author:"Community"},{name:"Discord Build Community",description:"Join discussions, share builds, and get feedback from the community",url:"#",icon:o.jsx(zN,{className:"h-5 w-5 text-primary"}),category:"Community",author:"Lorerim Community"},{name:"Weapons Discussion Hub",description:"Deep dive into weapon mechanics, damage calculations, and optimization",url:"#",icon:o.jsx(hg,{className:"h-5 w-5 text-primary"}),category:"Combat",author:"Community"},{name:"Spin Wheel Tool",description:"Random build generator and challenge creator for fun playthroughs",url:"#",icon:o.jsx(qa,{className:"h-5 w-5 text-primary"}),category:"Fun",author:"Community"}],s=r=>{r!=="#"&&window.open(r,"_blank","noopener,noreferrer")};return o.jsx("div",{className:"bg-background",children:o.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-12",children:[o.jsxs("div",{className:"text-left space-y-6",children:[o.jsx("div",{className:"flex items-center gap-3 mb-4 justify-start",children:o.jsx(ho,{className:"text-4xl md:text-6xl font-bold text-foreground",children:"Lorerim Arcaneum"})}),o.jsx(Jj,{className:"text-xl md:text-2xl text-muted-foreground",children:"Your theorycrafting playground and reference hub for Lorerim players. Build characters, explore mechanics, and dive deep into the lore."})]}),o.jsx("div",{className:"max-w-md",children:o.jsx(gK,{})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[o.jsx(kd,{className:"h-6 w-6 text-primary"}),"Character Building"]}),o.jsx("p",{className:"text-muted-foreground",children:"Create and customize your character from scratch"})]}),o.jsxs(ye,{className:"hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card",onClick:t,children:[o.jsxs(Me,{children:[o.jsxs(Be,{className:"flex items-center gap-2 group-hover:text-primary transition-colors text-card-foreground",children:[o.jsx(Pl,{className:"h-5 w-5"}),"Start Character Build"]}),o.jsx(Ns,{className:"text-muted-foreground",children:"Design your character with races, traits, birthsigns, and more"})]}),o.jsx(be,{children:o.jsxs(W,{className:"w-full group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:["Begin Building",o.jsx(UR,{className:"ml-2 h-4 w-4"})]})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(ye,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/race"),children:o.jsxs(be,{className:"p-4 text-center",children:[o.jsx(r3,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),o.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Races"})]})}),o.jsx(ye,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/birth-signs"),children:o.jsxs(be,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl mb-2",children:"⭐"}),o.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Birthsigns"})]})}),o.jsx(ye,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/traits"),children:o.jsxs(be,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl mb-2",children:"🎯"}),o.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Traits"})]})}),o.jsx(ye,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/build/perks"),children:o.jsxs(be,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl mb-2",children:"⚔️"}),o.jsx("div",{className:"font-medium text-sm text-card-foreground",children:"Skills"})]})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[o.jsx(vi,{className:"h-6 w-6 text-primary"}),"Quick Access"]}),o.jsx("p",{className:"text-muted-foreground",children:"Jump directly to specific tools and features"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(ye,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/search"),children:o.jsx(be,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(vi,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-card-foreground",children:"Advanced Search"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Detailed search with filters"})]})]})})}),o.jsx(ye,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/spells"),children:o.jsx(be,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Pl,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-card-foreground",children:"Spells"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Browse and search spells"})]})]})})}),o.jsx(ye,{className:"hover:shadow-md transition-shadow cursor-pointer bg-card",onClick:()=>e("/cookbook"),children:o.jsx(be,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(MN,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-card-foreground",children:"Cookbook"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Crafting recipes & guides"})]})]})})})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2 mb-2 text-foreground",children:[o.jsx(Sd,{className:"h-6 w-6 text-primary"}),"Favorite Tools"]}),o.jsx("p",{className:"text-muted-foreground",children:"Discover the best external tools and resources for Lorerim theorycrafting"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((r,a)=>o.jsxs(ye,{className:`hover:shadow-lg transition-all duration-300 border-2 hover:border-primary/30 cursor-pointer group bg-card ${r.url==="#"?"opacity-60 cursor-not-allowed":""}`,onClick:()=>s(r.url),children:[o.jsxs(Me,{className:"pb-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[r.icon,o.jsx(Be,{className:"text-lg group-hover:text-primary transition-colors text-card-foreground",children:r.name})]}),r.url!=="#"&&o.jsx(ao,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"text-xs font-medium text-primary/80 bg-primary/10 px-2 py-1 rounded-full",children:r.category}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["by ",r.author]})]})]}),o.jsxs(be,{className:"pt-0",children:[o.jsx(Ns,{className:"text-muted-foreground",children:r.description}),r.url==="#"&&o.jsx("p",{className:"text-xs text-muted-foreground mt-2 italic",children:"Coming soon..."})]})]},a))}),o.jsx("div",{className:"text-center pt-4",children:o.jsxs("p",{className:"text-sm text-muted-foreground",children:["💡 ",o.jsx("strong",{children:"Pro tip:"})," Use these tools alongside Arcaneum for the ultimate theorycrafting experience"]})})]}),o.jsx("div",{className:"text-left pt-8 border-t border-border",children:o.jsx("p",{className:"text-muted-foreground",children:"Built with ❤️ for the Lorerim community"})})]})})}function xK(){const e=dt();return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:[o.jsx(ho,{className:"text-4xl font-bold text-skyrim-gold mb-2",children:"Page Not Found"}),o.jsx(Ke,{className:"text-skyrim-gold/70 mb-6",children:"Sorry, the page you are looking for does not exist or is not ready yet."}),o.jsx(W,{variant:"default",onClick:()=>e("/"),children:"Return Home"})]})}const vK=()=>o.jsxs(gD,{children:[o.jsx(xt,{path:"/",element:o.jsx(pK,{})}),o.jsxs(xt,{path:"/build",element:o.jsx(P$,{}),children:[o.jsx(xt,{index:!0,element:o.jsx(fK,{})}),o.jsx(xt,{path:"race",element:o.jsx(iC,{})}),o.jsx(xt,{path:"birth-signs",element:o.jsx(FB,{})}),o.jsx(xt,{path:"traits",element:o.jsx(uK,{})}),o.jsx(xt,{path:"religions",element:o.jsx(oG,{})}),o.jsx(xt,{path:"destiny",element:o.jsx(aG,{})}),o.jsx(xt,{path:"perks",element:o.jsx(Mw,{})})]}),o.jsx(xt,{path:"/spells",element:o.jsx(cK,{})}),o.jsx(xt,{path:"/cookbook",element:o.jsx(Jq,{})}),o.jsx(xt,{path:"/search",element:o.jsx(BG,{})}),o.jsx(xt,{path:"/virtual-masonry-demo",element:o.jsx(HG,{})}),o.jsx(xt,{path:"/races-mva-demo",element:o.jsx(mI,{})}),o.jsx(xt,{path:"/skills-mva",element:o.jsx(Mw,{})}),o.jsx(xt,{path:"/skills-experimental",element:o.jsx(nK,{})}),o.jsx(xt,{path:"/equipment",element:o.jsx(hK,{})}),o.jsx(xt,{path:"/crafting",element:o.jsx(mK,{})}),o.jsx(xt,{path:"*",element:o.jsx(xK,{})})]}),aA=g.createContext(void 0);function yK({children:e}){const[t,n]=g.useState("system"),[s,r]=g.useState("dark"),[a,i]=g.useState(!1);return g.useEffect(()=>{const l=localStorage.getItem("theme");l&&["light","dark","system"].includes(l)&&n(l),i(!0)},[]),g.useEffect(()=>{a&&localStorage.setItem("theme",t);let l;t==="system"?l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":l=t,r(l);const c=document.documentElement;l==="dark"?c.classList.add("dark"):c.classList.remove("dark")},[t,a]),g.useEffect(()=>{const l=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>{if(t==="system"){const u=l.matches?"dark":"light";r(u);const d=document.documentElement;u==="dark"?d.classList.add("dark"):d.classList.remove("dark")}};return l.addEventListener("change",c),()=>l.removeEventListener("change",c)},[t]),o.jsx(aA.Provider,{value:{theme:t,setTheme:n,resolvedTheme:s},children:e})}function bK(){const e=g.useContext(aA);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function wK(){const{theme:e,setTheme:t}=bK(),n=()=>{t(e==="light"?"dark":e==="dark"?"system":"light")},s=()=>{switch(e){case"light":return o.jsx(fy,{className:"h-4 w-4"});case"dark":return o.jsx(P4,{className:"h-4 w-4"});case"system":return o.jsx(L4,{className:"h-4 w-4"});default:return o.jsx(fy,{className:"h-4 w-4"})}};return o.jsxs(W,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:n,title:`Current theme: ${e}. Click to cycle themes.`,children:[s(),o.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function NK({sidebarCollapsed:e,onToggleSidebar:t,isMobile:n=!1,MobileDrawerTrigger:s}){return o.jsxs("header",{className:"sticky top-0 w-full h-12 flex items-center bg-background border-b border-skyrim-gold/20 px-2 shadow-sm backdrop-blur-sm",style:{zIndex:Dt.HEADER,backgroundColor:"hsl(var(--background))",backgroundImage:"none"},children:[n&&s?o.jsx("div",{className:"mr-2",children:o.jsx(s,{})}):o.jsx("button",{onClick:t,"aria-label":e?"Open sidebar":"Close sidebar",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 mr-2",children:o.jsx(_4,{className:"w-5 h-5 text-skyrim-gold transition-transform duration-200 group-hover:rotate-12"})}),o.jsx("span",{className:"text-skyrim-gold font-bold text-base tracking-tight select-none",children:"Lorerim Arcaneum"}),o.jsx("span",{className:"ml-2 text-xs text-skyrim-gold/60 select-none",children:"Theorycrafting Hub"}),o.jsx("div",{className:"flex-1 max-w-md mx-4",children:o.jsx(PG,{placeholder:"Search skills, races, traits...",className:"w-full"})}),o.jsx("div",{className:"ml-auto",children:o.jsx(wK,{})})]})}const oA=[{label:"Character Build",items:[{to:"/build",label:"Build"},{to:"/build/race",label:"Race"},{to:"/build/birth-signs",label:"Birth Signs"},{to:"/build/traits",label:"Traits"},{to:"/build/religions",label:"Religion"},{to:"/build/destiny",label:"Destiny"},{to:"/build/perks",label:"Skills and Perks"}]},{label:"Docs",items:[{to:"/spells",label:"Spells"},{to:"/cookbook",label:"Food and Alcohol"}]}];function jK({onNavigate:e}){const t=dt(),n=window.location.hash.replace(/^#\/?/,"/"),s=(r,a)=>{const i=window.location.hash,[l,c]=i.split("?"),d=new URLSearchParams(c||"").get("b");t(d?`${r}?b=${d}`:r),e(a)};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-4 border-b border-skyrim-gold/20",children:o.jsxs("button",{onClick:()=>s("/",!0),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[o.jsx(DN,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),o.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:oA.map(r=>o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:r.label}),o.jsx("div",{className:"space-y-1",children:r.items.map(a=>{const i=n===a.to;return o.jsx("button",{onClick:()=>s(a.to,!0),className:`w-full text-left px-3 py-2 text-sm font-medium rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:text-skyrim-gold hover:shadow-md hover:scale-[1.02] active:scale-[0.98] cursor-pointer focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1 ${i?"bg-skyrim-gold/20 text-skyrim-gold border-l-4 border-skyrim-gold font-bold shadow-sm":"text-skyrim-gold/80 border-l-4 border-transparent"}`,children:a.label},a.to)})})]},r.label))}),o.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[o.jsx(Ke,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),o.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:"⚙️ Settings"})]})]})}function SK({collapsed:e,onNavigate:t}){const n=dt(),s=window.location.hash.replace(/^#\/?/,"/"),r=a=>{const i=window.location.hash,[l,c]=i.split("?"),d=new URLSearchParams(c||"").get("b");n(d?`${a}?b=${d}`:a)};return o.jsxs(j_,{collapsed:e,children:[o.jsx(C_,{children:!e&&o.jsxs("button",{onClick:()=>r("/"),className:"flex items-center justify-center w-full gap-2 hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-[1.02] active:scale-[0.98] rounded px-2 py-1 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:[o.jsx(DN,{className:"w-4 h-4 text-skyrim-gold transition-transform duration-200 group-hover:scale-110"}),o.jsx("span",{className:"text-sm font-semibold text-skyrim-gold tracking-wide",children:"Home"})]})}),o.jsx(S_,{children:oA.map(a=>o.jsxs(k_,{children:[!e&&o.jsx("div",{className:"mb-1 px-2 text-[10px] font-semibold uppercase tracking-wider text-skyrim-gold/60",children:a.label}),o.jsx(E_,{children:a.items.map(i=>{const l=s===i.to;return o.jsx(A_,{children:o.jsx(__,{asChild:!0,isActive:l,onClick:()=>r(i.to),tabIndex:0,children:o.jsx("span",{className:"w-full text-left truncate",children:i.label})})},i.to)})})]},a.label))}),!e&&o.jsxs("div",{className:"flex-shrink-0 px-3 py-2 border-t border-skyrim-gold/20 text-center",children:[o.jsx(Ke,{className:"text-xs text-skyrim-gold/50",children:"Version 1.0.0"}),o.jsx("button",{className:"mt-2 text-skyrim-gold/70 hover:text-skyrim-gold hover:bg-skyrim-gold/10 text-xs rounded px-2 py-1",tabIndex:0,children:"⚙️ Settings"})]}),o.jsx(T_,{})]})}function kK({onNavigate:e}){const[t,n]=g.useState(!1),s=r=>{r&&n(!1)};return o.jsxs(Mx,{open:t,onOpenChange:n,children:[o.jsx(Zj,{asChild:!0,children:o.jsx("button",{"aria-label":"Open navigation menu",className:"flex items-center justify-center w-10 h-10 rounded transition-all duration-200 ease-in-out hover:bg-skyrim-gold/15 hover:shadow-md hover:scale-110 active:scale-95 focus:outline-none focus:ring-2 focus:ring-skyrim-gold/50 focus:ring-offset-1",children:o.jsx("svg",{className:"w-5 h-5 text-skyrim-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),o.jsx(Hf,{side:"left",className:"p-0 w-80",children:o.jsx("div",{className:"flex flex-col h-full",children:o.jsx(jK,{onNavigate:s})})})]})}function CK(){const[e,t]=g.useState(!0),[n,s]=g.useState(!1);return Uq(),g.useEffect(()=>{const r=()=>s(window.innerWidth<768);return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),o.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[o.jsx(NK,{sidebarCollapsed:e,onToggleSidebar:()=>t(r=>!r),isMobile:n,MobileDrawerTrigger:()=>o.jsx(kK,{onNavigate:()=>{}})}),o.jsxs("div",{className:"flex flex-1",children:[!n&&o.jsx("div",{className:`transition-all duration-300 ease-in-out ${e?"w-0 overflow-hidden":"w-64"}`,style:{zIndex:Dt.SIDEBAR},children:o.jsx(SK,{collapsed:e,onNavigate:r=>{r&&t(!0)}})}),o.jsx("main",{className:"flex-1 transition-all duration-300 ease-in-out min-w-0",children:o.jsx(vK,{})})]}),o.jsx(Hq,{})]})}function EK(){return o.jsx(ID,{children:o.jsx(CK,{})})}function _K({children:e,showLoadingIndicator:t=!1}){const[n,s]=g.useState(!0),[r,a]=g.useState(null),i=g.useRef(!1),l=co(x=>x.load),c=Yi(x=>x.load),u=lo(x=>x.load),d=ca(x=>x.load),f=tr(x=>x.load),m=Xi(x=>x.load),h=uo(x=>x.load),p=Ho(x=>x.load),v=fo(x=>x.load),w=g.useCallback(async()=>{if(!i.current)try{s(!0),a(null),await Promise.all([l(),c(),u(),d(),f(),m(),h(),p(),v()]),i.current=!0,s(!1)}catch(x){console.error("Failed to initialize data:",x),a(x instanceof Error?x.message:"Failed to initialize data"),s(!1)}},[l,c,u,d,f,m,h,p,v]);return g.useEffect(()=>{w()},[w]),n&&t?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading data..."})]})}):r?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-red-600 mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Failed to Load Data"}),o.jsx("p",{className:"text-sm",children:r})]}),o.jsx("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})}):o.jsx(o.Fragment,{children:e})}var iA={exports:{}},Sm={},lA={exports:{}},cA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,D){var M=A.length;A.push(D);e:for(;0<M;){var R=M-1>>>1,B=A[R];if(0<r(B,D))A[R]=D,A[M]=B,M=R;else break e}}function n(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var D=A[0],M=A.pop();if(M!==D){A[0]=M;e:for(var R=0,B=A.length,H=B>>>1;R<H;){var I=2*(R+1)-1,V=A[I],G=I+1,J=A[G];if(0>r(V,M))G<B&&0>r(J,V)?(A[R]=J,A[G]=M,R=G):(A[R]=V,A[I]=M,R=I);else if(G<B&&0>r(J,M))A[R]=J,A[G]=M,R=G;else break e}}return D}function r(A,D){var M=A.sortIndex-D.sortIndex;return M!==0?M:A.id-D.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,m=3,h=!1,p=!1,v=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function N(A){for(var D=n(u);D!==null;){if(D.callback===null)s(u);else if(D.startTime<=A)s(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(u)}}function j(A){if(v=!1,N(A),!p)if(n(c)!==null)p=!0,S||(S=!0,O());else{var D=n(u);D!==null&&z(j,D.startTime-A)}}var S=!1,k=-1,E=5,C=-1;function _(){return w?!0:!(e.unstable_now()-C<E)}function P(){if(w=!1,S){var A=e.unstable_now();C=A;var D=!0;try{e:{p=!1,v&&(v=!1,b(k),k=-1),h=!0;var M=m;try{t:{for(N(A),f=n(c);f!==null&&!(f.expirationTime>A&&_());){var R=f.callback;if(typeof R=="function"){f.callback=null,m=f.priorityLevel;var B=R(f.expirationTime<=A);if(A=e.unstable_now(),typeof B=="function"){f.callback=B,N(A),D=!0;break t}f===n(c)&&s(c),N(A)}else s(c);f=n(c)}if(f!==null)D=!0;else{var H=n(u);H!==null&&z(j,H.startTime-A),D=!1}}break e}finally{f=null,m=M,h=!1}D=void 0}}finally{D?O():S=!1}}}var O;if(typeof y=="function")O=function(){y(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,T=$.port2;$.port1.onmessage=P,O=function(){T.postMessage(null)}}else O=function(){x(P,0)};function z(A,D){k=x(function(){A(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(A){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var M=m;m=D;try{return A()}finally{m=M}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(A,D){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var M=m;m=A;try{return D()}finally{m=M}},e.unstable_scheduleCallback=function(A,D,M){var R=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?R+M:R):M=R,A){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=M+B,A={id:d++,callback:D,priorityLevel:A,startTime:M,expirationTime:B,sortIndex:-1},M>R?(A.sortIndex=M,t(u,A),n(c)===null&&A===n(u)&&(v?(b(k),k=-1):v=!0,z(j,M-R))):(A.sortIndex=B,t(c,A),p||h||(p=!0,S||(S=!0,O()))),A},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(A){var D=m;return function(){var M=m;m=D;try{return A.apply(this,arguments)}finally{m=M}}}})(cA);lA.exports=cA;var AK=lA.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et=AK,uA=g,TK=Pf;function Z(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function dA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function fA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jw(e){if(Wc(e)!==e)throw Error(Z(188))}function MK(e){var t=e.alternate;if(!t){if(t=Wc(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Jw(r),e;if(a===s)return Jw(r),t;a=a.sibling}throw Error(Z(188))}if(n.return!==s.return)n=r,s=a;else{for(var i=!1,l=r.child;l;){if(l===n){i=!0,n=r,s=a;break}if(l===s){i=!0,s=r,n=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===n){i=!0,n=a,s=r;break}if(l===s){i=!0,s=a,n=r;break}l=l.sibling}if(!i)throw Error(Z(189))}}if(n.alternate!==s)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?e:t}function mA(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=mA(e),t!==null)return t;e=e.sibling}return null}var Xe=Object.assign,RK=Symbol.for("react.element"),Hu=Symbol.for("react.transitional.element"),Rl=Symbol.for("react.portal"),Fo=Symbol.for("react.fragment"),hA=Symbol.for("react.strict_mode"),dp=Symbol.for("react.profiler"),DK=Symbol.for("react.provider"),gA=Symbol.for("react.consumer"),ar=Symbol.for("react.context"),iv=Symbol.for("react.forward_ref"),fp=Symbol.for("react.suspense"),mp=Symbol.for("react.suspense_list"),lv=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),hp=Symbol.for("react.activity"),zK=Symbol.for("react.memo_cache_sentinel"),e1=Symbol.iterator;function bl(e){return e===null||typeof e!="object"?null:(e=e1&&e[e1]||e["@@iterator"],typeof e=="function"?e:null)}var LK=Symbol.for("react.client.reference");function gp(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===LK?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fo:return"Fragment";case dp:return"Profiler";case hA:return"StrictMode";case fp:return"Suspense";case mp:return"SuspenseList";case hp:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Rl:return"Portal";case ar:return(e.displayName||"Context")+".Provider";case gA:return(e._context.displayName||"Context")+".Consumer";case iv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lv:return t=e.displayName||null,t!==null?t:gp(e.type)||"Memo";case Br:t=e._payload,e=e._init;try{return gp(e(t))}catch{}}return null}var Dl=Array.isArray,ge=uA.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ze=TK.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oa={pending:!1,data:null,method:null,action:null},pp=[],Vo=-1;function Hs(e){return{current:e}}function Rt(e){0>Vo||(e.current=pp[Vo],pp[Vo]=null,Vo--)}function Je(e,t){Vo++,pp[Vo]=e.current,e.current=t}var Ts=Hs(null),vc=Hs(null),ta=Hs(null),tf=Hs(null);function nf(e,t){switch(Je(ta,t),Je(vc,e),Je(Ts,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?aN(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=aN(t),e=RM(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Rt(Ts),Je(Ts,e)}function Mi(){Rt(Ts),Rt(vc),Rt(ta)}function xp(e){e.memoizedState!==null&&Je(tf,e);var t=Ts.current,n=RM(t,e.type);t!==n&&(Je(vc,e),Je(Ts,n))}function sf(e){vc.current===e&&(Rt(Ts),Rt(vc)),tf.current===e&&(Rt(tf),_c._currentValue=Oa)}var vp=Object.prototype.hasOwnProperty,cv=Et.unstable_scheduleCallback,Mh=Et.unstable_cancelCallback,$K=Et.unstable_shouldYield,PK=Et.unstable_requestPaint,Ms=Et.unstable_now,OK=Et.unstable_getCurrentPriorityLevel,pA=Et.unstable_ImmediatePriority,xA=Et.unstable_UserBlockingPriority,rf=Et.unstable_NormalPriority,BK=Et.unstable_LowPriority,vA=Et.unstable_IdlePriority,IK=Et.log,HK=Et.unstable_setDisableYieldValue,Kc=null,jn=null;function Yr(e){if(typeof IK=="function"&&HK(e),jn&&typeof jn.setStrictMode=="function")try{jn.setStrictMode(Kc,e)}catch{}}var Sn=Math.clz32?Math.clz32:VK,UK=Math.log,FK=Math.LN2;function VK(e){return e>>>=0,e===0?32:31-(UK(e)/FK|0)|0}var Uu=256,Fu=4194304;function Ca(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function km(e,t,n){var s=e.pendingLanes;if(s===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=s&134217727;return l!==0?(s=l&~a,s!==0?r=Ca(s):(i&=l,i!==0?r=Ca(i):n||(n=l&~e,n!==0&&(r=Ca(n))))):(l=s&~a,l!==0?r=Ca(l):i!==0?r=Ca(i):n||(n=s&~e,n!==0&&(r=Ca(n)))),r===0?0:t!==0&&t!==r&&!(t&a)&&(a=r&-r,n=t&-t,a>=n||a===32&&(n&4194048)!==0)?t:r}function Qc(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function qK(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yA(){var e=Uu;return Uu<<=1,!(Uu&4194048)&&(Uu=256),e}function bA(){var e=Fu;return Fu<<=1,!(Fu&62914560)&&(Fu=4194304),e}function Rh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Jc(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function GK(e,t,n,s,r,a){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,u=e.hiddenUpdates;for(n=i&~n;0<n;){var d=31-Sn(n),f=1<<d;l[d]=0,c[d]=-1;var m=u[d];if(m!==null)for(u[d]=null,d=0;d<m.length;d++){var h=m[d];h!==null&&(h.lane&=-536870913)}n&=~f}s!==0&&wA(e,s,0),a!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=a&~(i&~t))}function wA(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Sn(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194090}function NA(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Sn(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}function uv(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function dv(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function jA(){var e=ze.p;return e!==0?e:(e=window.event,e===void 0?32:UM(e.type))}function ZK(e,t){var n=ze.p;try{return ze.p=e,t()}finally{ze.p=n}}var va=Math.random().toString(36).slice(2),Ut="__reactFiber$"+va,cn="__reactProps$"+va,rl="__reactContainer$"+va,yp="__reactEvents$"+va,YK="__reactListeners$"+va,XK="__reactHandles$"+va,t1="__reactResources$"+va,eu="__reactMarker$"+va;function fv(e){delete e[Ut],delete e[cn],delete e[yp],delete e[YK],delete e[XK]}function qo(e){var t=e[Ut];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rl]||n[Ut]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lN(e);e!==null;){if(n=e[Ut])return n;e=lN(e)}return t}e=n,n=e.parentNode}return null}function al(e){if(e=e[Ut]||e[rl]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function zl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(Z(33))}function ci(e){var t=e[t1];return t||(t=e[t1]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Tt(e){e[eu]=!0}var SA=new Set,kA={};function wo(e,t){Ri(e,t),Ri(e+"Capture",t)}function Ri(e,t){for(kA[e]=t,e=0;e<t.length;e++)SA.add(t[e])}var WK=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),n1={},s1={};function KK(e){return vp.call(s1,e)?!0:vp.call(n1,e)?!1:WK.test(e)?s1[e]=!0:(n1[e]=!0,!1)}function dd(e,t,n){if(KK(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Vu(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Qs(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}var Dh,r1;function Oo(e){if(Dh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Dh=t&&t[1]||"",r1=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dh+e+r1}var zh=!1;function Lh(e,t){if(!e||zh)return"";zh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(h){var m=h}Reflect.construct(e,[],f)}else{try{f.call()}catch(h){m=h}e.call(f.prototype)}}else{try{throw Error()}catch(h){m=h}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=s.DetermineComponentFrameRoot(),i=a[0],l=a[1];if(i&&l){var c=i.split(`
`),u=l.split(`
`);for(r=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(s===c.length||r===u.length)for(s=c.length-1,r=u.length-1;1<=s&&0<=r&&c[s]!==u[r];)r--;for(;1<=s&&0<=r;s--,r--)if(c[s]!==u[r]){if(s!==1||r!==1)do if(s--,r--,0>r||c[s]!==u[r]){var d=`
`+c[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=s&&0<=r);break}}}finally{zh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Oo(n):""}function QK(e){switch(e.tag){case 26:case 27:case 5:return Oo(e.type);case 16:return Oo("Lazy");case 13:return Oo("Suspense");case 19:return Oo("SuspenseList");case 0:case 15:return Lh(e.type,!1);case 11:return Lh(e.type.render,!1);case 1:return Lh(e.type,!0);case 31:return Oo("Activity");default:return""}}function a1(e){try{var t="";do t+=QK(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function zn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function CA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JK(e){var t=CA(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(i){s=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function af(e){e._valueTracker||(e._valueTracker=JK(e))}function EA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=CA(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function of(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var eQ=/[\n"\\]/g;function On(e){return e.replace(eQ,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function bp(e,t,n,s,r,a,i,l){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+zn(t)):e.value!==""+zn(t)&&(e.value=""+zn(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?wp(e,i,zn(t)):n!=null?wp(e,i,zn(n)):s!=null&&e.removeAttribute("value"),r==null&&a!=null&&(e.defaultChecked=!!a),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+zn(l):e.removeAttribute("name")}function _A(e,t,n,s,r,a,i,l){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.type=a),t!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||t!=null))return;n=n!=null?""+zn(n):"",t=t!=null?""+zn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i)}function wp(e,t,n){t==="number"&&of(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ui(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+zn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function AA(e,t,n){if(t!=null&&(t=""+zn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+zn(n):""}function TA(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(Z(92));if(Dl(s)){if(1<s.length)throw Error(Z(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=zn(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function Di(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var tQ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function o1(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||tQ.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function MA(e,t,n){if(t!=null&&typeof t!="object")throw Error(Z(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&n[r]!==s&&o1(e,r,s)}else for(var a in t)t.hasOwnProperty(a)&&o1(e,a,t[a])}function mv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nQ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sQ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fd(e){return sQ.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Np=null;function hv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Go=null,di=null;function i1(e){var t=al(e);if(t&&(e=t.stateNode)){var n=e[cn]||null;e:switch(e=t.stateNode,t.type){case"input":if(bp(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+On(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=s[cn]||null;if(!r)throw Error(Z(90));bp(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&EA(s)}break e;case"textarea":AA(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ui(e,!!n.multiple,t,!1)}}}var $h=!1;function RA(e,t,n){if($h)return e(t,n);$h=!0;try{var s=e(t);return s}finally{if($h=!1,(Go!==null||di!==null)&&(Lm(),Go&&(t=Go,e=di,di=Go=null,i1(t),e)))for(t=0;t<e.length;t++)i1(e[t])}}function yc(e,t){var n=e.stateNode;if(n===null)return null;var s=n[cn]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Z(231,t,typeof n));return n}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jp=!1;if(br)try{var wl={};Object.defineProperty(wl,"passive",{get:function(){jp=!0}}),window.addEventListener("test",wl,wl),window.removeEventListener("test",wl,wl)}catch{jp=!1}var Xr=null,gv=null,md=null;function DA(){if(md)return md;var e,t=gv,n=t.length,s,r="value"in Xr?Xr.value:Xr.textContent,a=r.length;for(e=0;e<n&&t[e]===r[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===r[a-s];s++);return md=r.slice(e,1<s?1-s:void 0)}function hd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qu(){return!0}function l1(){return!1}function mn(e){function t(n,s,r,a,i){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?qu:l1,this.isPropagationStopped=l1,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qu)},persist:function(){},isPersistent:qu}),t}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cm=mn(No),tu=Xe({},No,{view:0,detail:0}),rQ=mn(tu),Ph,Oh,Nl,Em=Xe({},tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nl&&(Nl&&e.type==="mousemove"?(Ph=e.screenX-Nl.screenX,Oh=e.screenY-Nl.screenY):Oh=Ph=0,Nl=e),Ph)},movementY:function(e){return"movementY"in e?e.movementY:Oh}}),c1=mn(Em),aQ=Xe({},Em,{dataTransfer:0}),oQ=mn(aQ),iQ=Xe({},tu,{relatedTarget:0}),Bh=mn(iQ),lQ=Xe({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),cQ=mn(lQ),uQ=Xe({},No,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dQ=mn(uQ),fQ=Xe({},No,{data:0}),u1=mn(fQ),mQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gQ[e])?!!t[e]:!1}function pv(){return pQ}var xQ=Xe({},tu,{key:function(e){if(e.key){var t=mQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pv,charCode:function(e){return e.type==="keypress"?hd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vQ=mn(xQ),yQ=Xe({},Em,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d1=mn(yQ),bQ=Xe({},tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pv}),wQ=mn(bQ),NQ=Xe({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),jQ=mn(NQ),SQ=Xe({},Em,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kQ=mn(SQ),CQ=Xe({},No,{newState:0,oldState:0}),EQ=mn(CQ),_Q=[9,13,27,32],xv=br&&"CompositionEvent"in window,Il=null;br&&"documentMode"in document&&(Il=document.documentMode);var AQ=br&&"TextEvent"in window&&!Il,zA=br&&(!xv||Il&&8<Il&&11>=Il),f1=" ",m1=!1;function LA(e,t){switch(e){case"keyup":return _Q.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $A(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zo=!1;function TQ(e,t){switch(e){case"compositionend":return $A(t);case"keypress":return t.which!==32?null:(m1=!0,f1);case"textInput":return e=t.data,e===f1&&m1?null:e;default:return null}}function MQ(e,t){if(Zo)return e==="compositionend"||!xv&&LA(e,t)?(e=DA(),md=gv=Xr=null,Zo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zA&&t.locale!=="ko"?null:t.data;default:return null}}var RQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RQ[e.type]:t==="textarea"}function PA(e,t,n,s){Go?di?di.push(s):di=[s]:Go=s,t=kf(t,"onChange"),0<t.length&&(n=new Cm("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Hl=null,bc=null;function DQ(e){AM(e,0)}function _m(e){var t=zl(e);if(EA(t))return e}function g1(e,t){if(e==="change")return t}var OA=!1;if(br){var Ih;if(br){var Hh="oninput"in document;if(!Hh){var p1=document.createElement("div");p1.setAttribute("oninput","return;"),Hh=typeof p1.oninput=="function"}Ih=Hh}else Ih=!1;OA=Ih&&(!document.documentMode||9<document.documentMode)}function x1(){Hl&&(Hl.detachEvent("onpropertychange",BA),bc=Hl=null)}function BA(e){if(e.propertyName==="value"&&_m(bc)){var t=[];PA(t,bc,e,hv(e)),RA(DQ,t)}}function zQ(e,t,n){e==="focusin"?(x1(),Hl=t,bc=n,Hl.attachEvent("onpropertychange",BA)):e==="focusout"&&x1()}function LQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _m(bc)}function $Q(e,t){if(e==="click")return _m(t)}function PQ(e,t){if(e==="input"||e==="change")return _m(t)}function OQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var An=typeof Object.is=="function"?Object.is:OQ;function wc(e,t){if(An(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!vp.call(t,r)||!An(e[r],t[r]))return!1}return!0}function v1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function y1(e,t){var n=v1(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=v1(n)}}function IA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?IA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function HA(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=of(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=of(e.document)}return t}function vv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var BQ=br&&"documentMode"in document&&11>=document.documentMode,Yo=null,Sp=null,Ul=null,kp=!1;function b1(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kp||Yo==null||Yo!==of(s)||(s=Yo,"selectionStart"in s&&vv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ul&&wc(Ul,s)||(Ul=s,s=kf(Sp,"onSelect"),0<s.length&&(t=new Cm("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Yo)))}function Sa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xo={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},Uh={},UA={};br&&(UA=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function jo(e){if(Uh[e])return Uh[e];if(!Xo[e])return e;var t=Xo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in UA)return Uh[e]=t[n];return e}var FA=jo("animationend"),VA=jo("animationiteration"),qA=jo("animationstart"),IQ=jo("transitionrun"),HQ=jo("transitionstart"),UQ=jo("transitioncancel"),GA=jo("transitionend"),ZA=new Map,Cp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cp.push("scrollEnd");function us(e,t){ZA.set(e,t),wo(t,[e])}var w1=new WeakMap;function Bn(e,t){if(typeof e=="object"&&e!==null){var n=w1.get(e);return n!==void 0?n:(t={value:e,source:t,stack:a1(t)},w1.set(e,t),t)}return{value:e,source:t,stack:a1(t)}}var Dn=[],Wo=0,yv=0;function Am(){for(var e=Wo,t=yv=Wo=0;t<e;){var n=Dn[t];Dn[t++]=null;var s=Dn[t];Dn[t++]=null;var r=Dn[t];Dn[t++]=null;var a=Dn[t];if(Dn[t++]=null,s!==null&&r!==null){var i=s.pending;i===null?r.next=r:(r.next=i.next,i.next=r),s.pending=r}a!==0&&YA(n,r,a)}}function Tm(e,t,n,s){Dn[Wo++]=e,Dn[Wo++]=t,Dn[Wo++]=n,Dn[Wo++]=s,yv|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function bv(e,t,n,s){return Tm(e,t,n,s),lf(e)}function ol(e,t){return Tm(e,null,null,t),lf(e)}function YA(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var r=!1,a=e.return;a!==null;)a.childLanes|=n,s=a.alternate,s!==null&&(s.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(r=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,r&&t!==null&&(r=31-Sn(n),e=a.hiddenUpdates,s=e[r],s===null?e[r]=[t]:s.push(t),t.lane=n|536870912),a):null}function lf(e){if(50<Ql)throw Ql=0,Zp=null,Error(Z(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ko={};function FQ(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,n,s){return new FQ(e,t,n,s)}function wv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fr(e,t){var n=e.alternate;return n===null?(n=bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function XA(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function gd(e,t,n,s,r,a){var i=0;if(s=e,typeof e=="function")wv(e)&&(i=1);else if(typeof e=="string")i=qJ(e,n,Ts.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case hp:return e=bn(31,n,t,r),e.elementType=hp,e.lanes=a,e;case Fo:return Ba(n.children,r,a,t);case hA:i=8,r|=24;break;case dp:return e=bn(12,n,t,r|2),e.elementType=dp,e.lanes=a,e;case fp:return e=bn(13,n,t,r),e.elementType=fp,e.lanes=a,e;case mp:return e=bn(19,n,t,r),e.elementType=mp,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case DK:case ar:i=10;break e;case gA:i=9;break e;case iv:i=11;break e;case lv:i=14;break e;case Br:i=16,s=null;break e}i=29,n=Error(Z(130,e===null?"null":typeof e,"")),s=null}return t=bn(i,n,t,r),t.elementType=e,t.type=s,t.lanes=a,t}function Ba(e,t,n,s){return e=bn(7,e,s,t),e.lanes=n,e}function Fh(e,t,n){return e=bn(6,e,null,t),e.lanes=n,e}function Vh(e,t,n){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qo=[],Jo=0,cf=null,uf=0,Ln=[],$n=0,Ia=null,or=1,ir="";function Ea(e,t){Qo[Jo++]=uf,Qo[Jo++]=cf,cf=e,uf=t}function WA(e,t,n){Ln[$n++]=or,Ln[$n++]=ir,Ln[$n++]=Ia,Ia=e;var s=or;e=ir;var r=32-Sn(s)-1;s&=~(1<<r),n+=1;var a=32-Sn(t)+r;if(30<a){var i=r-r%5;a=(s&(1<<i)-1).toString(32),s>>=i,r-=i,or=1<<32-Sn(t)+r|n<<r|s,ir=a+e}else or=1<<a|n<<r|s,ir=e}function Nv(e){e.return!==null&&(Ea(e,1),WA(e,1,0))}function jv(e){for(;e===cf;)cf=Qo[--Jo],Qo[Jo]=null,uf=Qo[--Jo],Qo[Jo]=null;for(;e===Ia;)Ia=Ln[--$n],Ln[$n]=null,ir=Ln[--$n],Ln[$n]=null,or=Ln[--$n],Ln[$n]=null}var Gt=null,it=null,De=!1,Ha=null,ws=!1,Ep=Error(Z(519));function to(e){var t=Error(Z(418,""));throw Nc(Bn(t,e)),Ep}function N1(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[Ut]=e,t[cn]=s,n){case"dialog":Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":case"embed":Ce("load",t);break;case"video":case"audio":for(n=0;n<kc.length;n++)Ce(kc[n],t);break;case"source":Ce("error",t);break;case"img":case"image":case"link":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"input":Ce("invalid",t),_A(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),af(t);break;case"select":Ce("invalid",t);break;case"textarea":Ce("invalid",t),TA(t,s.value,s.defaultValue,s.children),af(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||MM(t.textContent,n)?(s.popover!=null&&(Ce("beforetoggle",t),Ce("toggle",t)),s.onScroll!=null&&Ce("scroll",t),s.onScrollEnd!=null&&Ce("scrollend",t),s.onClick!=null&&(t.onclick=Om),t=!0):t=!1,t||to(e)}function j1(e){for(Gt=e.return;Gt;)switch(Gt.tag){case 5:case 13:ws=!1;return;case 27:case 3:ws=!0;return;default:Gt=Gt.return}}function jl(e){if(e!==Gt)return!1;if(!De)return j1(e),De=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Jp(e.type,e.memoizedProps)),n=!n),n&&it&&to(e),j1(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){it=ss(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}it=null}}else t===27?(t=it,ya(e.type)?(e=nx,nx=null,it=e):it=t):it=Gt?ss(e.stateNode.nextSibling):null;return!0}function nu(){it=Gt=null,De=!1}function S1(){var e=Ha;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),Ha=null),e}function Nc(e){Ha===null?Ha=[e]:Ha.push(e)}var _p=Hs(null),So=null,lr=null;function Fr(e,t,n){Je(_p,t._currentValue),t._currentValue=n}function mr(e){e._currentValue=_p.current,Rt(_p)}function Ap(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Tp(e,t,n,s){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){var i=r.child;a=a.firstContext;e:for(;a!==null;){var l=a;a=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ap(a.return,n,e),s||(i=null);break e}a=l.next}}else if(r.tag===18){if(i=r.return,i===null)throw Error(Z(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Ap(i,n,e),i=null}else i=r.child;if(i!==null)i.return=r;else for(i=r;i!==null;){if(i===e){i=null;break}if(r=i.sibling,r!==null){r.return=i.return,i=r;break}i=i.return}r=i}}function su(e,t,n,s){e=null;for(var r=t,a=!1;r!==null;){if(!a){if(r.flags&524288)a=!0;else if(r.flags&262144)break}if(r.tag===10){var i=r.alternate;if(i===null)throw Error(Z(387));if(i=i.memoizedProps,i!==null){var l=r.type;An(r.pendingProps.value,i.value)||(e!==null?e.push(l):e=[l])}}else if(r===tf.current){if(i=r.alternate,i===null)throw Error(Z(387));i.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(_c):e=[_c])}r=r.return}e!==null&&Tp(t,e,n,s),t.flags|=262144}function df(e){for(e=e.firstContext;e!==null;){if(!An(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function no(e){So=e,lr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ft(e){return KA(So,e)}function Gu(e,t){return So===null&&no(e),KA(e,t)}function KA(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},lr===null){if(e===null)throw Error(Z(308));lr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else lr=lr.next=t;return n}var VQ=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},qQ=Et.unstable_scheduleCallback,GQ=Et.unstable_NormalPriority,kt={$$typeof:ar,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sv(){return{controller:new VQ,data:new Map,refCount:0}}function ru(e){e.refCount--,e.refCount===0&&qQ(GQ,function(){e.controller.abort()})}var Fl=null,Mp=0,zi=0,fi=null;function ZQ(e,t){if(Fl===null){var n=Fl=[];Mp=0,zi=Zv(),fi={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Mp++,t.then(k1,k1),t}function k1(){if(--Mp===0&&Fl!==null){fi!==null&&(fi.status="fulfilled");var e=Fl;Fl=null,zi=0,fi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function YQ(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var C1=ge.S;ge.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&ZQ(e,t),C1!==null&&C1(e,t)};var Ua=Hs(null);function kv(){var e=Ua.current;return e!==null?e:Ze.pooledCache}function pd(e,t){t===null?Je(Ua,Ua.current):Je(Ua,t.pool)}function QA(){var e=kv();return e===null?null:{parent:kt._currentValue,pool:e}}var au=Error(Z(460)),JA=Error(Z(474)),Mm=Error(Z(542)),Rp={then:function(){}};function E1(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Zu(){}function eT(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Zu,Zu),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,A1(e),e;default:if(typeof t.status=="string")t.then(Zu,Zu);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(Z(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=s}},function(s){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,A1(e),e}throw Vl=t,au}}var Vl=null;function _1(){if(Vl===null)throw Error(Z(459));var e=Vl;return Vl=null,e}function A1(e){if(e===au||e===Mm)throw Error(Z(483))}var Ir=!1;function Cv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function sa(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,He&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=lf(e),YA(e,null,n),t}return Tm(e,s,t,n),lf(e)}function ql(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,NA(e,n)}}function qh(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?r=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?r=a=t:a=a.next=t}else r=a=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var zp=!1;function Gl(){if(zp){var e=fi;if(e!==null)throw e}}function Zl(e,t,n,s){zp=!1;var r=e.updateQueue;Ir=!1;var a=r.firstBaseUpdate,i=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=r.baseState;i=0,d=u=c=null,l=a;do{var m=l.lane&-536870913,h=m!==l.lane;if(h?(Te&m)===m:(s&m)===m){m!==0&&m===zi&&(zp=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var p=e,v=l;m=t;var w=n;switch(v.tag){case 1:if(p=v.payload,typeof p=="function"){f=p.call(w,f,m);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,m=typeof p=="function"?p.call(w,f,m):p,m==null)break e;f=Xe({},f,m);break e;case 2:Ir=!0}}m=l.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[m]:h.push(m))}else h={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,i|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);d===null&&(c=f),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,a===null&&(r.shared.lanes=0),ha|=i,e.lanes=i,e.memoizedState=f}}function tT(e,t){if(typeof e!="function")throw Error(Z(191,e));e.call(t)}function nT(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)tT(n[e],t)}var Li=Hs(null),ff=Hs(0);function T1(e,t){e=jr,Je(ff,e),Je(Li,t),jr=e|t.baseLanes}function Lp(){Je(ff,jr),Je(Li,Li.current)}function Ev(){jr=ff.current,Rt(Li),Rt(ff)}var fa=0,Se=null,Fe=null,yt=null,mf=!1,mi=!1,so=!1,hf=0,jc=0,hi=null,XQ=0;function ft(){throw Error(Z(321))}function _v(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!An(e[n],t[n]))return!1;return!0}function Av(e,t,n,s,r,a){return fa=a,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ge.H=e===null||e.memoizedState===null?DT:zT,so=!1,a=n(s,r),so=!1,mi&&(a=rT(t,n,s,r)),sT(e),a}function sT(e){ge.H=gf;var t=Fe!==null&&Fe.next!==null;if(fa=0,yt=Fe=Se=null,mf=!1,jc=0,hi=null,t)throw Error(Z(300));e===null||Mt||(e=e.dependencies,e!==null&&df(e)&&(Mt=!0))}function rT(e,t,n,s){Se=e;var r=0;do{if(mi&&(hi=null),jc=0,mi=!1,25<=r)throw Error(Z(301));if(r+=1,yt=Fe=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}ge.H=nJ,a=t(n,s)}while(mi);return a}function WQ(){var e=ge.H,t=e.useState()[0];return t=typeof t.then=="function"?ou(t):t,e=e.useState()[0],(Fe!==null?Fe.memoizedState:null)!==e&&(Se.flags|=1024),t}function Tv(){var e=hf!==0;return hf=0,e}function Mv(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Rv(e){if(mf){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}mf=!1}fa=0,yt=Fe=Se=null,mi=!1,jc=hf=0,hi=null}function tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Se.memoizedState=yt=e:yt=yt.next=e,yt}function wt(){if(Fe===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=yt===null?Se.memoizedState:yt.next;if(t!==null)yt=t,Fe=e;else{if(e===null)throw Se.alternate===null?Error(Z(467)):Error(Z(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},yt===null?Se.memoizedState=yt=e:yt=yt.next=e}return yt}function Dv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(e){var t=jc;return jc+=1,hi===null&&(hi=[]),e=eT(hi,e,t),t=Se,(yt===null?t.memoizedState:yt.next)===null&&(t=t.alternate,ge.H=t===null||t.memoizedState===null?DT:zT),e}function Rm(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ou(e);if(e.$$typeof===ar)return Ft(e)}throw Error(Z(438,String(e)))}function zv(e){var t=null,n=Se.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=Se.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Dv(),Se.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=zK;return t.index++,n}function wr(e,t){return typeof t=="function"?t(e):t}function xd(e){var t=wt();return Lv(t,Fe,e)}function Lv(e,t,n){var s=e.queue;if(s===null)throw Error(Z(311));s.lastRenderedReducer=n;var r=e.baseQueue,a=s.pending;if(a!==null){if(r!==null){var i=r.next;r.next=a.next,a.next=i}t.baseQueue=r=a,s.pending=null}if(a=e.baseState,r===null)e.memoizedState=a;else{t=r.next;var l=i=null,c=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(Te&f)===f:(fa&f)===f){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===zi&&(d=!0);else if((fa&m)===m){u=u.next,m===zi&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=f,i=a):c=c.next=f,Se.lanes|=m,ha|=m;f=u.action,so&&n(a,f),a=u.hasEagerState?u.eagerState:n(a,f)}else m={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=m,i=a):c=c.next=m,Se.lanes|=f,ha|=f;u=u.next}while(u!==null&&u!==t);if(c===null?i=a:c.next=l,!An(a,e.memoizedState)&&(Mt=!0,d&&(n=fi,n!==null)))throw n;e.memoizedState=a,e.baseState=i,e.baseQueue=c,s.lastRenderedState=a}return r===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Gh(e){var t=wt(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,a=t.memoizedState;if(r!==null){n.pending=null;var i=r=r.next;do a=e(a,i.action),i=i.next;while(i!==r);An(a,t.memoizedState)||(Mt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function aT(e,t,n){var s=Se,r=wt(),a=De;if(a){if(n===void 0)throw Error(Z(407));n=n()}else n=t();var i=!An((Fe||r).memoizedState,n);i&&(r.memoizedState=n,Mt=!0),r=r.queue;var l=lT.bind(null,s,r,e);if(iu(2048,8,l,[e]),r.getSnapshot!==t||i||yt!==null&&yt.memoizedState.tag&1){if(s.flags|=2048,$i(9,Dm(),iT.bind(null,s,r,n,t),null),Ze===null)throw Error(Z(349));a||fa&124||oT(s,t,n)}return n}function oT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Se.updateQueue,t===null?(t=Dv(),Se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function iT(e,t,n,s){t.value=n,t.getSnapshot=s,cT(t)&&uT(e)}function lT(e,t,n){return n(function(){cT(t)&&uT(e)})}function cT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!An(e,n)}catch{return!0}}function uT(e){var t=ol(e,2);t!==null&&Cn(t,e,2)}function $p(e){var t=tn();if(typeof e=="function"){var n=e;if(e=n(),so){Yr(!0);try{n()}finally{Yr(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:e},t}function dT(e,t,n,s){return e.baseState=n,Lv(e,Fe,typeof s=="function"?s:wr)}function KQ(e,t,n,s,r){if(zm(e))throw Error(Z(485));if(e=t.action,e!==null){var a={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){a.listeners.push(i)}};ge.T!==null?n(!0):a.isTransition=!1,s(a),n=t.pending,n===null?(a.next=t.pending=a,fT(t,a)):(a.next=n.next,t.pending=n.next=a)}}function fT(e,t){var n=t.action,s=t.payload,r=e.state;if(t.isTransition){var a=ge.T,i={};ge.T=i;try{var l=n(r,s),c=ge.S;c!==null&&c(i,l),M1(e,t,l)}catch(u){Pp(e,t,u)}finally{ge.T=a}}else try{a=n(r,s),M1(e,t,a)}catch(u){Pp(e,t,u)}}function M1(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){R1(e,t,s)},function(s){return Pp(e,t,s)}):R1(e,t,n)}function R1(e,t,n){t.status="fulfilled",t.value=n,mT(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,fT(e,n)))}function Pp(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,mT(t),t=t.next;while(t!==s)}e.action=null}function mT(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hT(e,t){return t}function D1(e,t){if(De){var n=Ze.formState;if(n!==null){e:{var s=Se;if(De){if(it){t:{for(var r=it,a=ws;r.nodeType!==8;){if(!a){r=null;break t}if(r=ss(r.nextSibling),r===null){r=null;break t}}a=r.data,r=a==="F!"||a==="F"?r:null}if(r){it=ss(r.nextSibling),s=r.data==="F!";break e}}to(s)}s=!1}s&&(t=n[0])}}return n=tn(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hT,lastRenderedState:t},n.queue=s,n=TT.bind(null,Se,s),s.dispatch=n,s=$p(!1),a=Bv.bind(null,Se,!1,s.queue),s=tn(),r={state:t,dispatch:null,action:e,pending:null},s.queue=r,n=KQ.bind(null,Se,r,a,n),r.dispatch=n,s.memoizedState=e,[t,n,!1]}function z1(e){var t=wt();return gT(t,Fe,e)}function gT(e,t,n){if(t=Lv(e,t,hT)[0],e=xd(wr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=ou(t)}catch(i){throw i===au?Mm:i}else s=t;t=wt();var r=t.queue,a=r.dispatch;return n!==t.memoizedState&&(Se.flags|=2048,$i(9,Dm(),QQ.bind(null,r,n),null)),[s,a,e]}function QQ(e,t){e.action=t}function L1(e){var t=wt(),n=Fe;if(n!==null)return gT(t,n,e);wt(),t=t.memoizedState,n=wt();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function $i(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},t=Se.updateQueue,t===null&&(t=Dv(),Se.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Dm(){return{destroy:void 0,resource:void 0}}function pT(){return wt().memoizedState}function vd(e,t,n,s){var r=tn();s=s===void 0?null:s,Se.flags|=e,r.memoizedState=$i(1|t,Dm(),n,s)}function iu(e,t,n,s){var r=wt();s=s===void 0?null:s;var a=r.memoizedState.inst;Fe!==null&&s!==null&&_v(s,Fe.memoizedState.deps)?r.memoizedState=$i(t,a,n,s):(Se.flags|=e,r.memoizedState=$i(1|t,a,n,s))}function $1(e,t){vd(8390656,8,e,t)}function xT(e,t){iu(2048,8,e,t)}function vT(e,t){return iu(4,2,e,t)}function yT(e,t){return iu(4,4,e,t)}function bT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wT(e,t,n){n=n!=null?n.concat([e]):null,iu(4,4,bT.bind(null,t,e),n)}function $v(){}function NT(e,t){var n=wt();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&_v(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function jT(e,t){var n=wt();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&_v(t,s[1]))return s[0];if(s=e(),so){Yr(!0);try{e()}finally{Yr(!1)}}return n.memoizedState=[s,t],s}function Pv(e,t,n){return n===void 0||fa&1073741824?e.memoizedState=t:(e.memoizedState=n,e=mM(),Se.lanes|=e,ha|=e,n)}function ST(e,t,n,s){return An(n,t)?n:Li.current!==null?(e=Pv(e,n,s),An(e,t)||(Mt=!0),e):fa&42?(e=mM(),Se.lanes|=e,ha|=e,t):(Mt=!0,e.memoizedState=n)}function kT(e,t,n,s,r){var a=ze.p;ze.p=a!==0&&8>a?a:8;var i=ge.T,l={};ge.T=l,Bv(e,!1,t,n);try{var c=r(),u=ge.S;if(u!==null&&u(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=YQ(c,s);Yl(e,t,d,kn(e))}else Yl(e,t,s,kn(e))}catch(f){Yl(e,t,{then:function(){},status:"rejected",reason:f},kn())}finally{ze.p=a,ge.T=i}}function JQ(){}function Op(e,t,n,s){if(e.tag!==5)throw Error(Z(476));var r=CT(e).queue;kT(e,r,t,Oa,n===null?JQ:function(){return ET(e),n(s)})}function CT(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Oa,baseState:Oa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:Oa},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ET(e){var t=CT(e).next.queue;Yl(e,t,{},kn())}function Ov(){return Ft(_c)}function _T(){return wt().memoizedState}function AT(){return wt().memoizedState}function eJ(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=kn();e=na(n);var s=sa(t,e,n);s!==null&&(Cn(s,t,n),ql(s,t,n)),t={cache:Sv()},e.payload=t;return}t=t.return}}function tJ(e,t,n){var s=kn();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},zm(e)?MT(t,n):(n=bv(e,t,n,s),n!==null&&(Cn(n,e,s),RT(n,t,s)))}function TT(e,t,n){var s=kn();Yl(e,t,n,s)}function Yl(e,t,n,s){var r={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(zm(e))MT(t,r);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,n);if(r.hasEagerState=!0,r.eagerState=l,An(l,i))return Tm(e,t,r,0),Ze===null&&Am(),!1}catch{}finally{}if(n=bv(e,t,r,s),n!==null)return Cn(n,e,s),RT(n,t,s),!0}return!1}function Bv(e,t,n,s){if(s={lane:2,revertLane:Zv(),action:s,hasEagerState:!1,eagerState:null,next:null},zm(e)){if(t)throw Error(Z(479))}else t=bv(e,n,s,2),t!==null&&Cn(t,e,2)}function zm(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function MT(e,t){mi=mf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function RT(e,t,n){if(n&4194048){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,NA(e,n)}}var gf={readContext:Ft,use:Rm,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft},DT={readContext:Ft,use:Rm,useCallback:function(e,t){return tn().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:$1,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,vd(4194308,4,bT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vd(4194308,4,e,t)},useInsertionEffect:function(e,t){vd(4,2,e,t)},useMemo:function(e,t){var n=tn();t=t===void 0?null:t;var s=e();if(so){Yr(!0);try{e()}finally{Yr(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=tn();if(n!==void 0){var r=n(t);if(so){Yr(!0);try{n(t)}finally{Yr(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=tJ.bind(null,Se,e),[s.memoizedState,e]},useRef:function(e){var t=tn();return e={current:e},t.memoizedState=e},useState:function(e){e=$p(e);var t=e.queue,n=TT.bind(null,Se,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:$v,useDeferredValue:function(e,t){var n=tn();return Pv(n,e,t)},useTransition:function(){var e=$p(!1);return e=kT.bind(null,Se,e.queue,!0,!1),tn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=Se,r=tn();if(De){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=t(),Ze===null)throw Error(Z(349));Te&124||oT(s,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,$1(lT.bind(null,s,a,e),[e]),s.flags|=2048,$i(9,Dm(),iT.bind(null,s,a,n,t),null),n},useId:function(){var e=tn(),t=Ze.identifierPrefix;if(De){var n=ir,s=or;n=(s&~(1<<32-Sn(s)-1)).toString(32)+n,t="«"+t+"R"+n,n=hf++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=XQ++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Ov,useFormState:D1,useActionState:D1,useOptimistic:function(e){var t=tn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Bv.bind(null,Se,!0,n),n.dispatch=t,[e,t]},useMemoCache:zv,useCacheRefresh:function(){return tn().memoizedState=eJ.bind(null,Se)}},zT={readContext:Ft,use:Rm,useCallback:NT,useContext:Ft,useEffect:xT,useImperativeHandle:wT,useInsertionEffect:vT,useLayoutEffect:yT,useMemo:jT,useReducer:xd,useRef:pT,useState:function(){return xd(wr)},useDebugValue:$v,useDeferredValue:function(e,t){var n=wt();return ST(n,Fe.memoizedState,e,t)},useTransition:function(){var e=xd(wr)[0],t=wt().memoizedState;return[typeof e=="boolean"?e:ou(e),t]},useSyncExternalStore:aT,useId:_T,useHostTransitionStatus:Ov,useFormState:z1,useActionState:z1,useOptimistic:function(e,t){var n=wt();return dT(n,Fe,e,t)},useMemoCache:zv,useCacheRefresh:AT},nJ={readContext:Ft,use:Rm,useCallback:NT,useContext:Ft,useEffect:xT,useImperativeHandle:wT,useInsertionEffect:vT,useLayoutEffect:yT,useMemo:jT,useReducer:Gh,useRef:pT,useState:function(){return Gh(wr)},useDebugValue:$v,useDeferredValue:function(e,t){var n=wt();return Fe===null?Pv(n,e,t):ST(n,Fe.memoizedState,e,t)},useTransition:function(){var e=Gh(wr)[0],t=wt().memoizedState;return[typeof e=="boolean"?e:ou(e),t]},useSyncExternalStore:aT,useId:_T,useHostTransitionStatus:Ov,useFormState:L1,useActionState:L1,useOptimistic:function(e,t){var n=wt();return Fe!==null?dT(n,Fe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:zv,useCacheRefresh:AT},gi=null,Sc=0;function Yu(e){var t=Sc;return Sc+=1,gi===null&&(gi=[]),eT(gi,e,t)}function Sl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Xu(e,t){throw t.$$typeof===RK?Error(Z(525)):(e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function P1(e){var t=e._init;return t(e._payload)}function LT(e){function t(x,b){if(e){var y=x.deletions;y===null?(x.deletions=[b],x.flags|=16):y.push(b)}}function n(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function s(x){for(var b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function r(x,b){return x=fr(x,b),x.index=0,x.sibling=null,x}function a(x,b,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<b?(x.flags|=67108866,b):y):(x.flags|=67108866,b)):(x.flags|=1048576,b)}function i(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function l(x,b,y,N){return b===null||b.tag!==6?(b=Fh(y,x.mode,N),b.return=x,b):(b=r(b,y),b.return=x,b)}function c(x,b,y,N){var j=y.type;return j===Fo?d(x,b,y.props.children,N,y.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Br&&P1(j)===b.type)?(b=r(b,y.props),Sl(b,y),b.return=x,b):(b=gd(y.type,y.key,y.props,null,x.mode,N),Sl(b,y),b.return=x,b)}function u(x,b,y,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=Vh(y,x.mode,N),b.return=x,b):(b=r(b,y.children||[]),b.return=x,b)}function d(x,b,y,N,j){return b===null||b.tag!==7?(b=Ba(y,x.mode,N,j),b.return=x,b):(b=r(b,y),b.return=x,b)}function f(x,b,y){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Fh(""+b,x.mode,y),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Hu:return y=gd(b.type,b.key,b.props,null,x.mode,y),Sl(y,b),y.return=x,y;case Rl:return b=Vh(b,x.mode,y),b.return=x,b;case Br:var N=b._init;return b=N(b._payload),f(x,b,y)}if(Dl(b)||bl(b))return b=Ba(b,x.mode,y,null),b.return=x,b;if(typeof b.then=="function")return f(x,Yu(b),y);if(b.$$typeof===ar)return f(x,Gu(x,b),y);Xu(x,b)}return null}function m(x,b,y,N){var j=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return j!==null?null:l(x,b,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hu:return y.key===j?c(x,b,y,N):null;case Rl:return y.key===j?u(x,b,y,N):null;case Br:return j=y._init,y=j(y._payload),m(x,b,y,N)}if(Dl(y)||bl(y))return j!==null?null:d(x,b,y,N,null);if(typeof y.then=="function")return m(x,b,Yu(y),N);if(y.$$typeof===ar)return m(x,b,Gu(x,y),N);Xu(x,y)}return null}function h(x,b,y,N,j){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return x=x.get(y)||null,l(b,x,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Hu:return x=x.get(N.key===null?y:N.key)||null,c(b,x,N,j);case Rl:return x=x.get(N.key===null?y:N.key)||null,u(b,x,N,j);case Br:var S=N._init;return N=S(N._payload),h(x,b,y,N,j)}if(Dl(N)||bl(N))return x=x.get(y)||null,d(b,x,N,j,null);if(typeof N.then=="function")return h(x,b,y,Yu(N),j);if(N.$$typeof===ar)return h(x,b,y,Gu(b,N),j);Xu(b,N)}return null}function p(x,b,y,N){for(var j=null,S=null,k=b,E=b=0,C=null;k!==null&&E<y.length;E++){k.index>E?(C=k,k=null):C=k.sibling;var _=m(x,k,y[E],N);if(_===null){k===null&&(k=C);break}e&&k&&_.alternate===null&&t(x,k),b=a(_,b,E),S===null?j=_:S.sibling=_,S=_,k=C}if(E===y.length)return n(x,k),De&&Ea(x,E),j;if(k===null){for(;E<y.length;E++)k=f(x,y[E],N),k!==null&&(b=a(k,b,E),S===null?j=k:S.sibling=k,S=k);return De&&Ea(x,E),j}for(k=s(k);E<y.length;E++)C=h(k,x,E,y[E],N),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?E:C.key),b=a(C,b,E),S===null?j=C:S.sibling=C,S=C);return e&&k.forEach(function(P){return t(x,P)}),De&&Ea(x,E),j}function v(x,b,y,N){if(y==null)throw Error(Z(151));for(var j=null,S=null,k=b,E=b=0,C=null,_=y.next();k!==null&&!_.done;E++,_=y.next()){k.index>E?(C=k,k=null):C=k.sibling;var P=m(x,k,_.value,N);if(P===null){k===null&&(k=C);break}e&&k&&P.alternate===null&&t(x,k),b=a(P,b,E),S===null?j=P:S.sibling=P,S=P,k=C}if(_.done)return n(x,k),De&&Ea(x,E),j;if(k===null){for(;!_.done;E++,_=y.next())_=f(x,_.value,N),_!==null&&(b=a(_,b,E),S===null?j=_:S.sibling=_,S=_);return De&&Ea(x,E),j}for(k=s(k);!_.done;E++,_=y.next())_=h(k,x,E,_.value,N),_!==null&&(e&&_.alternate!==null&&k.delete(_.key===null?E:_.key),b=a(_,b,E),S===null?j=_:S.sibling=_,S=_);return e&&k.forEach(function(O){return t(x,O)}),De&&Ea(x,E),j}function w(x,b,y,N){if(typeof y=="object"&&y!==null&&y.type===Fo&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Hu:e:{for(var j=y.key;b!==null;){if(b.key===j){if(j=y.type,j===Fo){if(b.tag===7){n(x,b.sibling),N=r(b,y.props.children),N.return=x,x=N;break e}}else if(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Br&&P1(j)===b.type){n(x,b.sibling),N=r(b,y.props),Sl(N,y),N.return=x,x=N;break e}n(x,b);break}else t(x,b);b=b.sibling}y.type===Fo?(N=Ba(y.props.children,x.mode,N,y.key),N.return=x,x=N):(N=gd(y.type,y.key,y.props,null,x.mode,N),Sl(N,y),N.return=x,x=N)}return i(x);case Rl:e:{for(j=y.key;b!==null;){if(b.key===j)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){n(x,b.sibling),N=r(b,y.children||[]),N.return=x,x=N;break e}else{n(x,b);break}else t(x,b);b=b.sibling}N=Vh(y,x.mode,N),N.return=x,x=N}return i(x);case Br:return j=y._init,y=j(y._payload),w(x,b,y,N)}if(Dl(y))return p(x,b,y,N);if(bl(y)){if(j=bl(y),typeof j!="function")throw Error(Z(150));return y=j.call(y),v(x,b,y,N)}if(typeof y.then=="function")return w(x,b,Yu(y),N);if(y.$$typeof===ar)return w(x,b,Gu(x,y),N);Xu(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,b!==null&&b.tag===6?(n(x,b.sibling),N=r(b,y),N.return=x,x=N):(n(x,b),N=Fh(y,x.mode,N),N.return=x,x=N),i(x)):n(x,b)}return function(x,b,y,N){try{Sc=0;var j=w(x,b,y,N);return gi=null,j}catch(k){if(k===au||k===Mm)throw k;var S=bn(29,k,null,x.mode);return S.lanes=N,S.return=x,S}finally{}}}var Pi=LT(!0),$T=LT(!1),Gn=Hs(null),Rs=null;function Vr(e){var t=e.alternate;Je(Ct,Ct.current&1),Je(Gn,e),Rs===null&&(t===null||Li.current!==null||t.memoizedState!==null)&&(Rs=e)}function PT(e){if(e.tag===22){if(Je(Ct,Ct.current),Je(Gn,e),Rs===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Rs=e)}}else qr()}function qr(){Je(Ct,Ct.current),Je(Gn,Gn.current)}function cr(e){Rt(Gn),Rs===e&&(Rs=null),Rt(Ct)}var Ct=Hs(0);function pf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||tx(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Zh(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bp={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=kn(),r=na(s);r.payload=t,n!=null&&(r.callback=n),t=sa(e,r,s),t!==null&&(Cn(t,e,s),ql(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=kn(),r=na(s);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=sa(e,r,s),t!==null&&(Cn(t,e,s),ql(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kn(),s=na(n);s.tag=2,t!=null&&(s.callback=t),t=sa(e,s,n),t!==null&&(Cn(t,e,n),ql(t,e,n))}};function O1(e,t,n,s,r,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,i):t.prototype&&t.prototype.isPureReactComponent?!wc(n,s)||!wc(r,a):!0}function B1(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Bp.enqueueReplaceState(t,t.state,null)}function ro(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=Xe({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var xf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function OT(e){xf(e)}function BT(e){console.error(e)}function IT(e){xf(e)}function vf(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function I1(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ip(e,t,n){return n=na(n),n.tag=3,n.payload={element:null},n.callback=function(){vf(e,t)},n}function HT(e){return e=na(e),e.tag=3,e}function UT(e,t,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var a=s.value;e.payload=function(){return r(a)},e.callback=function(){I1(t,n,s)}}var i=n.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){I1(t,n,s),typeof r!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function sJ(e,t,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&su(t,n,r,!0),n=Gn.current,n!==null){switch(n.tag){case 13:return Rs===null?Yp():n.alternate===null&&lt===0&&(lt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===Rp?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),rg(e,s,r)),!1;case 22:return n.flags|=65536,s===Rp?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),rg(e,s,r)),!1}throw Error(Z(435,n.tag))}return rg(e,s,r),Yp(),!1}if(De)return t=Gn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==Ep&&(e=Error(Z(422),{cause:s}),Nc(Bn(e,n)))):(s!==Ep&&(t=Error(Z(423),{cause:s}),Nc(Bn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,s=Bn(s,n),r=Ip(e.stateNode,s,r),qh(e,r),lt!==4&&(lt=2)),!1;var a=Error(Z(520),{cause:s});if(a=Bn(a,n),Kl===null?Kl=[a]:Kl.push(a),lt!==4&&(lt=2),t===null)return!0;s=Bn(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Ip(n.stateNode,s,e),qh(n,e),!1;case 1:if(t=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(ra===null||!ra.has(a))))return n.flags|=65536,r&=-r,n.lanes|=r,r=HT(r),UT(r,e,n,s),qh(n,r),!1}n=n.return}while(n!==null);return!1}var FT=Error(Z(461)),Mt=!1;function Pt(e,t,n,s){t.child=e===null?$T(t,null,n,s):Pi(t,e.child,n,s)}function H1(e,t,n,s,r){n=n.render;var a=t.ref;if("ref"in s){var i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}else i=s;return no(t),s=Av(e,t,n,i,a,r),l=Tv(),e!==null&&!Mt?(Mv(e,t,r),Nr(e,t,r)):(De&&l&&Nv(t),t.flags|=1,Pt(e,t,s,r),t.child)}function U1(e,t,n,s,r){if(e===null){var a=n.type;return typeof a=="function"&&!wv(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,VT(e,t,a,s,r)):(e=gd(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Iv(e,r)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:wc,n(i,s)&&e.ref===t.ref)return Nr(e,t,r)}return t.flags|=1,e=fr(a,s),e.ref=t.ref,e.return=t,t.child=e}function VT(e,t,n,s,r){if(e!==null){var a=e.memoizedProps;if(wc(a,s)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=s=a,Iv(e,r))e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,Nr(e,t,r)}return Hp(e,t,n,s,r)}function qT(e,t,n){var s=t.pendingProps,r=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if(t.flags&128){if(s=a!==null?a.baseLanes|n:n,e!==null){for(r=t.child=e.child,a=0;r!==null;)a=a|r.lanes|r.childLanes,r=r.sibling;t.childLanes=a&~s}else t.childLanes=0,t.child=null;return F1(e,t,s,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&pd(t,a!==null?a.cachePool:null),a!==null?T1(t,a):Lp(),PT(t);else return t.lanes=t.childLanes=536870912,F1(e,t,a!==null?a.baseLanes|n:n,n)}else a!==null?(pd(t,a.cachePool),T1(t,a),qr(),t.memoizedState=null):(e!==null&&pd(t,null),Lp(),qr());return Pt(e,t,r,n),t.child}function F1(e,t,n,s){var r=kv();return r=r===null?null:{parent:kt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&pd(t,null),Lp(),PT(t),e!==null&&su(e,t,s,!0),null}function yd(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(Z(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Hp(e,t,n,s,r){return no(t),n=Av(e,t,n,s,void 0,r),s=Tv(),e!==null&&!Mt?(Mv(e,t,r),Nr(e,t,r)):(De&&s&&Nv(t),t.flags|=1,Pt(e,t,n,r),t.child)}function V1(e,t,n,s,r,a){return no(t),t.updateQueue=null,n=rT(t,s,n,r),sT(e),s=Tv(),e!==null&&!Mt?(Mv(e,t,a),Nr(e,t,a)):(De&&s&&Nv(t),t.flags|=1,Pt(e,t,n,a),t.child)}function q1(e,t,n,s,r){if(no(t),t.stateNode===null){var a=Ko,i=n.contextType;typeof i=="object"&&i!==null&&(a=Ft(i)),a=new n(s,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Bp,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=s,a.state=t.memoizedState,a.refs={},Cv(t),i=n.contextType,a.context=typeof i=="object"&&i!==null?Ft(i):Ko,a.state=t.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(Zh(t,n,i,s),a.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(i=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),i!==a.state&&Bp.enqueueReplaceState(a,a.state,null),Zl(t,s,a,r),Gl(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){a=t.stateNode;var l=t.memoizedProps,c=ro(n,l);a.props=c;var u=a.context,d=n.contextType;i=Ko,typeof d=="object"&&d!==null&&(i=Ft(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l||u!==i)&&B1(t,a,s,i),Ir=!1;var m=t.memoizedState;a.state=m,Zl(t,s,a,r),Gl(),u=t.memoizedState,l||m!==u||Ir?(typeof f=="function"&&(Zh(t,n,f,s),u=t.memoizedState),(c=Ir||O1(t,n,c,s,m,u,i))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=u),a.props=s,a.state=u,a.context=i,s=c):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,Dp(e,t),i=t.memoizedProps,d=ro(n,i),a.props=d,f=t.pendingProps,m=a.context,u=n.contextType,c=Ko,typeof u=="object"&&u!==null&&(c=Ft(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||m!==c)&&B1(t,a,s,c),Ir=!1,m=t.memoizedState,a.state=m,Zl(t,s,a,r),Gl();var h=t.memoizedState;i!==f||m!==h||Ir||e!==null&&e.dependencies!==null&&df(e.dependencies)?(typeof l=="function"&&(Zh(t,n,l,s),h=t.memoizedState),(d=Ir||O1(t,n,d,s,m,h,c)||e!==null&&e.dependencies!==null&&df(e.dependencies))?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,h,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,h,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=h),a.props=s,a.state=h,a.context=c,s=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return a=s,yd(e,t),s=(t.flags&128)!==0,a||s?(a=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,e!==null&&s?(t.child=Pi(t,e.child,null,r),t.child=Pi(t,null,n,r)):Pt(e,t,n,r),t.memoizedState=a.state,e=t.child):e=Nr(e,t,r),e}function G1(e,t,n,s){return nu(),t.flags|=256,Pt(e,t,n,s),t.child}var Yh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xh(e){return{baseLanes:e,cachePool:QA()}}function Wh(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Un),e}function GT(e,t,n){var s=t.pendingProps,r=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(Ct.current&2)!==0),i&&(r=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(De){if(r?Vr(t):qr(),De){var l=it,c;if(c=l){e:{for(c=l,l=ws;c.nodeType!==8;){if(!l){l=null;break e}if(c=ss(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:Ia!==null?{id:or,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},c=bn(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,Gt=t,it=null,c=!0):c=!1}c||to(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return tx(l)?t.lanes=32:t.lanes=536870912,null;cr(t)}return l=s.children,s=s.fallback,r?(qr(),r=t.mode,l=yf({mode:"hidden",children:l},r),s=Ba(s,r,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,r=t.child,r.memoizedState=Xh(n),r.childLanes=Wh(e,i,n),t.memoizedState=Yh,s):(Vr(t),Up(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(a)t.flags&256?(Vr(t),t.flags&=-257,t=Kh(e,t,n)):t.memoizedState!==null?(qr(),t.child=e.child,t.flags|=128,t=null):(qr(),r=s.fallback,l=t.mode,s=yf({mode:"visible",children:s.children},l),r=Ba(r,l,n,null),r.flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,Pi(t,e.child,null,n),s=t.child,s.memoizedState=Xh(n),s.childLanes=Wh(e,i,n),t.memoizedState=Yh,t=r);else if(Vr(t),tx(l)){if(i=l.nextSibling&&l.nextSibling.dataset,i)var u=i.dgst;i=u,s=Error(Z(419)),s.stack="",s.digest=i,Nc({value:s,source:null,stack:null}),t=Kh(e,t,n)}else if(Mt||su(e,t,n,!1),i=(n&e.childLanes)!==0,Mt||i){if(i=Ze,i!==null&&(s=n&-n,s=s&42?1:uv(s),s=s&(i.suspendedLanes|n)?0:s,s!==0&&s!==c.retryLane))throw c.retryLane=s,ol(e,s),Cn(i,e,s),FT;l.data==="$?"||Yp(),t=Kh(e,t,n)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,it=ss(l.nextSibling),Gt=t,De=!0,Ha=null,ws=!1,e!==null&&(Ln[$n++]=or,Ln[$n++]=ir,Ln[$n++]=Ia,or=e.id,ir=e.overflow,Ia=t),t=Up(t,s.children),t.flags|=4096);return t}return r?(qr(),r=s.fallback,l=t.mode,c=e.child,u=c.sibling,s=fr(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,u!==null?r=fr(u,r):(r=Ba(r,l,n,null),r.flags|=2),r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,l=e.child.memoizedState,l===null?l=Xh(n):(c=l.cachePool,c!==null?(u=kt._currentValue,c=c.parent!==u?{parent:u,pool:u}:c):c=QA(),l={baseLanes:l.baseLanes|n,cachePool:c}),r.memoizedState=l,r.childLanes=Wh(e,i,n),t.memoizedState=Yh,s):(Vr(t),n=e.child,e=n.sibling,n=fr(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Up(e,t){return t=yf({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function yf(e,t){return e=bn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Kh(e,t,n){return Pi(t,e.child,null,n),e=Up(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Z1(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Ap(e.return,t,n)}function Qh(e,t,n,s,r){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=r)}function ZT(e,t,n){var s=t.pendingProps,r=s.revealOrder,a=s.tail;if(Pt(e,t,s.children,n),s=Ct.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Z1(e,n,t);else if(e.tag===19)Z1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(Je(Ct,s),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&pf(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Qh(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&pf(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Qh(t,!0,n,null,a);break;case"together":Qh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ha|=t.lanes,!(n&t.childLanes))if(e!==null){if(su(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,n=fr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Iv(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&df(e)))}function rJ(e,t,n){switch(t.tag){case 3:nf(t,t.stateNode.containerInfo),Fr(t,kt,e.memoizedState.cache),nu();break;case 27:case 5:xp(t);break;case 4:nf(t,t.stateNode.containerInfo);break;case 10:Fr(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Vr(t),t.flags|=128,null):n&t.child.childLanes?GT(e,t,n):(Vr(t),e=Nr(e,t,n),e!==null?e.sibling:null);Vr(t);break;case 19:var r=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(su(e,t,n,!1),s=(n&t.childLanes)!==0),r){if(s)return ZT(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Je(Ct,Ct.current),s)break;return null;case 22:case 23:return t.lanes=0,qT(e,t,n);case 24:Fr(t,kt,e.memoizedState.cache)}return Nr(e,t,n)}function YT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Mt=!0;else{if(!Iv(e,n)&&!(t.flags&128))return Mt=!1,rJ(e,t,n);Mt=!!(e.flags&131072)}else Mt=!1,De&&t.flags&1048576&&WA(t,uf,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,r=s._init;if(s=r(s._payload),t.type=s,typeof s=="function")wv(s)?(e=ro(s,e),t.tag=1,t=q1(null,t,s,e,n)):(t.tag=0,t=Hp(null,t,s,e,n));else{if(s!=null){if(r=s.$$typeof,r===iv){t.tag=11,t=H1(null,t,s,e,n);break e}else if(r===lv){t.tag=14,t=U1(null,t,s,e,n);break e}}throw t=gp(s)||s,Error(Z(306,t,""))}}return t;case 0:return Hp(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,r=ro(s,t.pendingProps),q1(e,t,s,r,n);case 3:e:{if(nf(t,t.stateNode.containerInfo),e===null)throw Error(Z(387));s=t.pendingProps;var a=t.memoizedState;r=a.element,Dp(e,t),Zl(t,s,null,n);var i=t.memoizedState;if(s=i.cache,Fr(t,kt,s),s!==a.cache&&Tp(t,[kt],n,!0),Gl(),s=i.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=G1(e,t,s,n);break e}else if(s!==r){r=Bn(Error(Z(424)),t),Nc(r),t=G1(e,t,s,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(it=ss(e.firstChild),Gt=t,De=!0,Ha=null,ws=!0,n=$T(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(nu(),s===r){t=Nr(e,t,n);break e}Pt(e,t,s,n)}t=t.child}return t;case 26:return yd(e,t),e===null?(n=uN(t.type,null,t.pendingProps,null))?t.memoizedState=n:De||(n=t.type,e=t.pendingProps,s=Cf(ta.current).createElement(n),s[Ut]=t,s[cn]=e,Bt(s,n,e),Tt(s),t.stateNode=s):t.memoizedState=uN(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return xp(t),e===null&&De&&(s=t.stateNode=zM(t.type,t.pendingProps,ta.current),Gt=t,ws=!0,r=it,ya(t.type)?(nx=r,it=ss(s.firstChild)):it=r),Pt(e,t,t.pendingProps.children,n),yd(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&De&&((r=s=it)&&(s=RJ(s,t.type,t.pendingProps,ws),s!==null?(t.stateNode=s,Gt=t,it=ss(s.firstChild),ws=!1,r=!0):r=!1),r||to(t)),xp(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,Jp(r,a)?s=null:i!==null&&Jp(r,i)&&(t.flags|=32),t.memoizedState!==null&&(r=Av(e,t,WQ,null,null,n),_c._currentValue=r),yd(e,t),Pt(e,t,s,n),t.child;case 6:return e===null&&De&&((e=n=it)&&(n=DJ(n,t.pendingProps,ws),n!==null?(t.stateNode=n,Gt=t,it=null,e=!0):e=!1),e||to(t)),null;case 13:return GT(e,t,n);case 4:return nf(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Pi(t,null,s,n):Pt(e,t,s,n),t.child;case 11:return H1(e,t,t.type,t.pendingProps,n);case 7:return Pt(e,t,t.pendingProps,n),t.child;case 8:return Pt(e,t,t.pendingProps.children,n),t.child;case 12:return Pt(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,Fr(t,t.type,s.value),Pt(e,t,s.children,n),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,no(t),r=Ft(r),s=s(r),t.flags|=1,Pt(e,t,s,n),t.child;case 14:return U1(e,t,t.type,t.pendingProps,n);case 15:return VT(e,t,t.type,t.pendingProps,n);case 19:return ZT(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},e===null?(n=yf(s,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=fr(e.child,s),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return qT(e,t,n);case 24:return no(t),s=Ft(kt),e===null?(r=kv(),r===null&&(r=Ze,a=Sv(),r.pooledCache=a,a.refCount++,a!==null&&(r.pooledCacheLanes|=n),r=a),t.memoizedState={parent:s,cache:r},Cv(t),Fr(t,kt,r)):(e.lanes&n&&(Dp(e,t),Zl(t,null,null,n),Gl()),r=e.memoizedState,a=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Fr(t,kt,s)):(s=a.cache,Fr(t,kt,s),s!==r.cache&&Tp(t,[kt],n,!0))),Pt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(Z(156,t.tag))}function Js(e){e.flags|=4}function Y1(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!PM(t)){if(t=Gn.current,t!==null&&((Te&4194048)===Te?Rs!==null:(Te&62914560)!==Te&&!(Te&536870912)||t!==Rs))throw Vl=Rp,JA;e.flags|=8192}}function Wu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?bA():536870912,e.lanes|=t,Oi|=t)}function kl(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function aJ(e,t,n){var s=t.pendingProps;switch(jv(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return tt(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),mr(kt),Mi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(jl(t)?Js(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,S1())),tt(t),null;case 26:return n=t.memoizedState,e===null?(Js(t),n!==null?(tt(t),Y1(t,n)):(tt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Js(t),tt(t),Y1(t,n)):(tt(t),t.flags&=-16777217):(e.memoizedProps!==s&&Js(t),tt(t),t.flags&=-16777217),null;case 27:sf(t),n=ta.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Js(t);else{if(!s){if(t.stateNode===null)throw Error(Z(166));return tt(t),null}e=Ts.current,jl(t)?N1(t):(e=zM(r,s,n),t.stateNode=e,Js(t))}return tt(t),null;case 5:if(sf(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Js(t);else{if(!s){if(t.stateNode===null)throw Error(Z(166));return tt(t),null}if(e=Ts.current,jl(t))N1(t);else{switch(r=Cf(ta.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?r.createElement(n,{is:s.is}):r.createElement(n)}}e[Ut]=t,e[cn]=s;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(Bt(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Js(t)}}return tt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Js(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Z(166));if(e=ta.current,jl(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,r=Gt,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}e[Ut]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||MM(e.nodeValue,n)),e||to(t)}else e=Cf(e).createTextNode(s),e[Ut]=t,t.stateNode=e}return tt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=jl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!r)throw Error(Z(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Z(317));r[Ut]=t}else nu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),r=!1}else r=S1(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(cr(t),t):(cr(t),null)}if(cr(t),t.flags&128)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool);var a=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==r&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Wu(t,t.updateQueue),tt(t),null;case 4:return Mi(),e===null&&Yv(t.stateNode.containerInfo),tt(t),null;case 10:return mr(t.type),tt(t),null;case 19:if(Rt(Ct),r=t.memoizedState,r===null)return tt(t),null;if(s=(t.flags&128)!==0,a=r.rendering,a===null)if(s)kl(r,!1);else{if(lt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=pf(e),a!==null){for(t.flags|=128,kl(r,!1),e=a.updateQueue,t.updateQueue=e,Wu(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)XA(n,e),n=n.sibling;return Je(Ct,Ct.current&1|2),t.child}e=e.sibling}r.tail!==null&&Ms()>wf&&(t.flags|=128,s=!0,kl(r,!1),t.lanes=4194304)}else{if(!s)if(e=pf(a),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Wu(t,e),kl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!De)return tt(t),null}else 2*Ms()-r.renderingStartTime>wf&&n!==536870912&&(t.flags|=128,s=!0,kl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e!==null?e.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ms(),t.sibling=null,e=Ct.current,Je(Ct,s?e&1|2:e&1),t):(tt(t),null);case 22:case 23:return cr(t),Ev(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?n&536870912&&!(t.flags&128)&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),n=t.updateQueue,n!==null&&Wu(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&Rt(Ua),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),mr(kt),tt(t),null;case 25:return null;case 30:return null}throw Error(Z(156,t.tag))}function oJ(e,t){switch(jv(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mr(kt),Mi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return sf(t),null;case 13:if(cr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));nu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(Ct),null;case 4:return Mi(),null;case 10:return mr(t.type),null;case 22:case 23:return cr(t),Ev(),e!==null&&Rt(Ua),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return mr(kt),null;case 25:return null;default:return null}}function XT(e,t){switch(jv(t),t.tag){case 3:mr(kt),Mi();break;case 26:case 27:case 5:sf(t);break;case 4:Mi();break;case 13:cr(t);break;case 19:Rt(Ct);break;case 10:mr(t.type);break;case 22:case 23:cr(t),Ev(),e!==null&&Rt(Ua);break;case 24:mr(kt)}}function lu(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&e)===e){s=void 0;var a=n.create,i=n.inst;s=a(),i.destroy=s}n=n.next}while(n!==r)}}catch(l){qe(t,t.return,l)}}function ma(e,t,n){try{var s=t.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var a=r.next;s=a;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(l!==void 0){i.destroy=void 0,r=t;var c=n,u=l;try{u()}catch(d){qe(r,c,d)}}}s=s.next}while(s!==a)}}catch(d){qe(t,t.return,d)}}function WT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{nT(t,n)}catch(s){qe(e,e.return,s)}}}function KT(e,t,n){n.props=ro(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){qe(e,t,s)}}function Xl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof n=="function"?e.refCleanup=n(s):n.current=s}}catch(r){qe(e,t,r)}}function ks(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){qe(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){qe(e,t,r)}else n.current=null}function QT(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){qe(e,e.return,r)}}function Jh(e,t,n){try{var s=e.stateNode;EJ(s,e.type,n,t),s[cn]=t}catch(r){qe(e,e.return,r)}}function JT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ya(e.type)||e.tag===4}function eg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||JT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ya(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fp(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Om));else if(s!==4&&(s===27&&ya(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Fp(e,t,n),e=e.sibling;e!==null;)Fp(e,t,n),e=e.sibling}function bf(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(s===27&&ya(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(bf(e,t,n),e=e.sibling;e!==null;)bf(e,t,n),e=e.sibling}function eM(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Bt(t,s,n),t[Ut]=e,t[cn]=n}catch(a){qe(e,e.return,a)}}var sr=!1,ht=!1,tg=!1,X1=typeof WeakSet=="function"?WeakSet:Set,At=null;function iJ(e,t){if(e=e.containerInfo,Kp=Tf,e=HA(e),vv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var h;f!==n||r!==0&&f.nodeType!==3||(l=i+r),f!==a||s!==0&&f.nodeType!==3||(c=i+s),f.nodeType===3&&(i+=f.nodeValue.length),(h=f.firstChild)!==null;)m=f,f=h;for(;;){if(f===e)break t;if(m===n&&++u===r&&(l=i),m===a&&++d===s&&(c=i),(h=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qp={focusedElem:e,selectionRange:n},Tf=!1,At=t;At!==null;)if(t=At,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,At=e;else for(;At!==null;){switch(t=At,a=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,r=a.memoizedProps,a=a.memoizedState,s=n.stateNode;try{var p=ro(n.type,r,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(p,a),s.__reactInternalSnapshotBeforeUpdate=e}catch(v){qe(n,n.return,v)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ex(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ex(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(Z(163))}if(e=t.sibling,e!==null){e.return=t.return,At=e;break}At=t.return}}function tM(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:zr(e,n),s&4&&lu(5,n);break;case 1:if(zr(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(i){qe(n,n.return,i)}else{var r=ro(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){qe(n,n.return,i)}}s&64&&WT(n),s&512&&Xl(n,n.return);break;case 3:if(zr(e,n),s&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{nT(e,t)}catch(i){qe(n,n.return,i)}}break;case 27:t===null&&s&4&&eM(n);case 26:case 5:zr(e,n),t===null&&s&4&&QT(n),s&512&&Xl(n,n.return);break;case 12:zr(e,n);break;case 13:zr(e,n),s&4&&rM(e,n),s&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=pJ.bind(null,n),zJ(e,n))));break;case 22:if(s=n.memoizedState!==null||sr,!s){t=t!==null&&t.memoizedState!==null||ht,r=sr;var a=ht;sr=s,(ht=t)&&!a?$r(e,n,(n.subtreeFlags&8772)!==0):zr(e,n),sr=r,ht=a}break;case 30:break;default:zr(e,n)}}function nM(e){var t=e.alternate;t!==null&&(e.alternate=null,nM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&fv(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var We=null,nn=!1;function er(e,t,n){for(n=n.child;n!==null;)sM(e,t,n),n=n.sibling}function sM(e,t,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Kc,n)}catch{}switch(n.tag){case 26:ht||ks(n,t),er(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ht||ks(n,t);var s=We,r=nn;ya(n.type)&&(We=n.stateNode,nn=!1),er(e,t,n),Jl(n.stateNode),We=s,nn=r;break;case 5:ht||ks(n,t);case 6:if(s=We,r=nn,We=null,er(e,t,n),We=s,nn=r,We!==null)if(nn)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(n.stateNode)}catch(a){qe(n,t,a)}else try{We.removeChild(n.stateNode)}catch(a){qe(n,t,a)}break;case 18:We!==null&&(nn?(e=We,iN(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Mc(e)):iN(We,n.stateNode));break;case 4:s=We,r=nn,We=n.stateNode.containerInfo,nn=!0,er(e,t,n),We=s,nn=r;break;case 0:case 11:case 14:case 15:ht||ma(2,n,t),ht||ma(4,n,t),er(e,t,n);break;case 1:ht||(ks(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&KT(n,t,s)),er(e,t,n);break;case 21:er(e,t,n);break;case 22:ht=(s=ht)||n.memoizedState!==null,er(e,t,n),ht=s;break;default:er(e,t,n)}}function rM(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Mc(e)}catch(n){qe(t,t.return,n)}}function lJ(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new X1),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new X1),t;default:throw Error(Z(435,e.tag))}}function ng(e,t){var n=lJ(e);t.forEach(function(s){var r=xJ.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}function gn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 27:if(ya(l.type)){We=l.stateNode,nn=!1;break e}break;case 5:We=l.stateNode,nn=!1;break e;case 3:case 4:We=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(We===null)throw Error(Z(160));sM(a,i,r),We=null,nn=!1,a=r.alternate,a!==null&&(a.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)aM(t,e),t=t.sibling}var Jn=null;function aM(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gn(t,e),pn(e),s&4&&(ma(3,e,e.return),lu(3,e),ma(5,e,e.return));break;case 1:gn(t,e),pn(e),s&512&&(ht||n===null||ks(n,n.return)),s&64&&sr&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=Jn;if(gn(t,e),pn(e),s&512&&(ht||n===null||ks(n,n.return)),s&4){var a=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":a=r.getElementsByTagName("title")[0],(!a||a[eu]||a[Ut]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=r.createElement(s),r.head.insertBefore(a,r.querySelector("head > title"))),Bt(a,s,n),a[Ut]=e,Tt(a),s=a;break e;case"link":var i=fN("link","href",r).get(s+(n.href||""));if(i){for(var l=0;l<i.length;l++)if(a=i[l],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){i.splice(l,1);break t}}a=r.createElement(s),Bt(a,s,n),r.head.appendChild(a);break;case"meta":if(i=fN("meta","content",r).get(s+(n.content||""))){for(l=0;l<i.length;l++)if(a=i[l],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){i.splice(l,1);break t}}a=r.createElement(s),Bt(a,s,n),r.head.appendChild(a);break;default:throw Error(Z(468,s))}a[Ut]=e,Tt(a),s=a}e.stateNode=s}else mN(r,e.type,e.stateNode);else e.stateNode=dN(r,s,e.memoizedProps);else a!==s?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,s===null?mN(r,e.type,e.stateNode):dN(r,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Jh(e,e.memoizedProps,n.memoizedProps)}break;case 27:gn(t,e),pn(e),s&512&&(ht||n===null||ks(n,n.return)),n!==null&&s&4&&Jh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(gn(t,e),pn(e),s&512&&(ht||n===null||ks(n,n.return)),e.flags&32){r=e.stateNode;try{Di(r,"")}catch(h){qe(e,e.return,h)}}s&4&&e.stateNode!=null&&(r=e.memoizedProps,Jh(e,r,n!==null?n.memoizedProps:r)),s&1024&&(tg=!0);break;case 6:if(gn(t,e),pn(e),s&4){if(e.stateNode===null)throw Error(Z(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(h){qe(e,e.return,h)}}break;case 3:if(Nd=null,r=Jn,Jn=Ef(t.containerInfo),gn(t,e),Jn=r,pn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Mc(t.containerInfo)}catch(h){qe(e,e.return,h)}tg&&(tg=!1,oM(e));break;case 4:s=Jn,Jn=Ef(e.stateNode.containerInfo),gn(t,e),pn(e),Jn=s;break;case 12:gn(t,e),pn(e);break;case 13:gn(t,e),pn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(qv=Ms()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,ng(e,s)));break;case 22:r=e.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=sr,d=ht;if(sr=u||r,ht=d||c,gn(t,e),ht=d,sr=u,pn(e),s&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||c||sr||ht||_a(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){c=n=t;try{if(a=c.stateNode,r)i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var f=c.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(h){qe(c,c.return,h)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(h){qe(c,c.return,h)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,ng(e,n))));break;case 19:gn(t,e),pn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,ng(e,s)));break;case 30:break;case 21:break;default:gn(t,e),pn(e)}}function pn(e){var t=e.flags;if(t&2){try{for(var n,s=e.return;s!==null;){if(JT(s)){n=s;break}s=s.return}if(n==null)throw Error(Z(160));switch(n.tag){case 27:var r=n.stateNode,a=eg(e);bf(e,a,r);break;case 5:var i=n.stateNode;n.flags&32&&(Di(i,""),n.flags&=-33);var l=eg(e);bf(e,l,i);break;case 3:case 4:var c=n.stateNode.containerInfo,u=eg(e);Fp(e,u,c);break;default:throw Error(Z(161))}}catch(d){qe(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oM(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;oM(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function zr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)tM(e,t.alternate,t),t=t.sibling}function _a(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ma(4,t,t.return),_a(t);break;case 1:ks(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&KT(t,t.return,n),_a(t);break;case 27:Jl(t.stateNode);case 26:case 5:ks(t,t.return),_a(t);break;case 22:t.memoizedState===null&&_a(t);break;case 30:_a(t);break;default:_a(t)}e=e.sibling}}function $r(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,r=e,a=t,i=a.flags;switch(a.tag){case 0:case 11:case 15:$r(r,a,n),lu(4,a);break;case 1:if($r(r,a,n),s=a,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){qe(s,s.return,u)}if(s=a,r=s.updateQueue,r!==null){var l=s.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)tT(c[r],l)}catch(u){qe(s,s.return,u)}}n&&i&64&&WT(a),Xl(a,a.return);break;case 27:eM(a);case 26:case 5:$r(r,a,n),n&&s===null&&i&4&&QT(a),Xl(a,a.return);break;case 12:$r(r,a,n);break;case 13:$r(r,a,n),n&&i&4&&rM(r,a);break;case 22:a.memoizedState===null&&$r(r,a,n),Xl(a,a.return);break;case 30:break;default:$r(r,a,n)}t=t.sibling}}function Hv(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ru(n))}function Uv(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ru(e))}function ps(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)iM(e,t,n,s),t=t.sibling}function iM(e,t,n,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:ps(e,t,n,s),r&2048&&lu(9,t);break;case 1:ps(e,t,n,s);break;case 3:ps(e,t,n,s),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ru(e)));break;case 12:if(r&2048){ps(e,t,n,s),e=t.stateNode;try{var a=t.memoizedProps,i=a.id,l=a.onPostCommit;typeof l=="function"&&l(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){qe(t,t.return,c)}}else ps(e,t,n,s);break;case 13:ps(e,t,n,s);break;case 23:break;case 22:a=t.stateNode,i=t.alternate,t.memoizedState!==null?a._visibility&2?ps(e,t,n,s):Wl(e,t):a._visibility&2?ps(e,t,n,s):(a._visibility|=2,Bo(e,t,n,s,(t.subtreeFlags&10256)!==0)),r&2048&&Hv(i,t);break;case 24:ps(e,t,n,s),r&2048&&Uv(t.alternate,t);break;default:ps(e,t,n,s)}}function Bo(e,t,n,s,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var a=e,i=t,l=n,c=s,u=i.flags;switch(i.tag){case 0:case 11:case 15:Bo(a,i,l,c,r),lu(8,i);break;case 23:break;case 22:var d=i.stateNode;i.memoizedState!==null?d._visibility&2?Bo(a,i,l,c,r):Wl(a,i):(d._visibility|=2,Bo(a,i,l,c,r)),r&&u&2048&&Hv(i.alternate,i);break;case 24:Bo(a,i,l,c,r),r&&u&2048&&Uv(i.alternate,i);break;default:Bo(a,i,l,c,r)}t=t.sibling}}function Wl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,r=s.flags;switch(s.tag){case 22:Wl(n,s),r&2048&&Hv(s.alternate,s);break;case 24:Wl(n,s),r&2048&&Uv(s.alternate,s);break;default:Wl(n,s)}t=t.sibling}}var Ll=8192;function Lo(e){if(e.subtreeFlags&Ll)for(e=e.child;e!==null;)lM(e),e=e.sibling}function lM(e){switch(e.tag){case 26:Lo(e),e.flags&Ll&&e.memoizedState!==null&&ZJ(Jn,e.memoizedState,e.memoizedProps);break;case 5:Lo(e);break;case 3:case 4:var t=Jn;Jn=Ef(e.stateNode.containerInfo),Lo(e),Jn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Ll,Ll=16777216,Lo(e),Ll=t):Lo(e));break;default:Lo(e)}}function cM(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Cl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];At=s,dM(s,e)}cM(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)uM(e),e=e.sibling}function uM(e){switch(e.tag){case 0:case 11:case 15:Cl(e),e.flags&2048&&ma(9,e,e.return);break;case 3:Cl(e);break;case 12:Cl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,bd(e)):Cl(e);break;default:Cl(e)}}function bd(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];At=s,dM(s,e)}cM(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ma(8,t,t.return),bd(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,bd(t));break;default:bd(t)}e=e.sibling}}function dM(e,t){for(;At!==null;){var n=At;switch(n.tag){case 0:case 11:case 15:ma(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ru(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,At=s;else e:for(n=e;At!==null;){s=At;var r=s.sibling,a=s.return;if(nM(s),s===n){At=null;break e}if(r!==null){r.return=a,At=r;break e}At=a}}}var cJ={getCacheForType:function(e){var t=Ft(kt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},uJ=typeof WeakMap=="function"?WeakMap:Map,He=0,Ze=null,Ee=null,Te=0,Oe=0,xn=null,Wr=!1,il=!1,Fv=!1,jr=0,lt=0,ha=0,Fa=0,Vv=0,Un=0,Oi=0,Kl=null,sn=null,Vp=!1,qv=0,wf=1/0,Nf=null,ra=null,Ot=0,aa=null,Bi=null,pi=0,qp=0,Gp=null,fM=null,Ql=0,Zp=null;function kn(){if(He&2&&Te!==0)return Te&-Te;if(ge.T!==null){var e=zi;return e!==0?e:Zv()}return jA()}function mM(){Un===0&&(Un=!(Te&536870912)||De?yA():536870912);var e=Gn.current;return e!==null&&(e.flags|=32),Un}function Cn(e,t,n){(e===Ze&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)&&(Ii(e,0),Kr(e,Te,Un,!1)),Jc(e,n),(!(He&2)||e!==Ze)&&(e===Ze&&(!(He&2)&&(Fa|=n),lt===4&&Kr(e,Te,Un,!1)),Us(e))}function hM(e,t,n){if(He&6)throw Error(Z(327));var s=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Qc(e,t),r=s?mJ(e,t):sg(e,t,!0),a=s;do{if(r===0){il&&!s&&Kr(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!dJ(n)){r=sg(e,t,!1),a=!1;continue}if(r===2){if(a=t,e.errorRecoveryDisabledLanes&a)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var l=e;r=Kl;var c=l.current.memoizedState.isDehydrated;if(c&&(Ii(l,i).flags|=256),i=sg(l,i,!1),i!==2){if(Fv&&!c){l.errorRecoveryDisabledLanes|=a,Fa|=a,r=4;break e}a=sn,sn=r,a!==null&&(sn===null?sn=a:sn.push.apply(sn,a))}r=i}if(a=!1,r!==2)continue}}if(r===1){Ii(e,0),Kr(e,t,0,!0);break}e:{switch(s=e,a=r,a){case 0:case 1:throw Error(Z(345));case 4:if((t&4194048)!==t)break;case 6:Kr(s,t,Un,!Wr);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(Z(329))}if((t&62914560)===t&&(r=qv+300-Ms(),10<r)){if(Kr(s,t,Un,!Wr),km(s,0,!0)!==0)break e;s.timeoutHandle=DM(W1.bind(null,s,n,sn,Nf,Vp,t,Un,Fa,Oi,Wr,a,2,-0,0),r);break e}W1(s,n,sn,Nf,Vp,t,Un,Fa,Oi,Wr,a,0,-0,0)}}break}while(!0);Us(e)}function W1(e,t,n,s,r,a,i,l,c,u,d,f,m,h){if(e.timeoutHandle=-1,f=t.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(Ec={stylesheets:null,count:0,unsuspend:GJ},lM(t),f=YJ(),f!==null)){e.cancelPendingCommit=f(Q1.bind(null,e,t,a,n,s,r,i,l,c,d,1,m,h)),Kr(e,a,i,!u);return}Q1(e,t,a,n,s,r,i,l,c)}function dJ(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],a=r.getSnapshot;r=r.value;try{if(!An(a(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kr(e,t,n,s){t&=~Vv,t&=~Fa,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var a=31-Sn(r),i=1<<a;s[a]=-1,r&=~i}n!==0&&wA(e,n,t)}function Lm(){return He&6?!0:(cu(0),!1)}function Gv(){if(Ee!==null){if(Oe===0)var e=Ee.return;else e=Ee,lr=So=null,Rv(e),gi=null,Sc=0,e=Ee;for(;e!==null;)XT(e.alternate,e),e=e.return;Ee=null}}function Ii(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,AJ(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Gv(),Ze=e,Ee=n=fr(e.current,null),Te=t,Oe=0,xn=null,Wr=!1,il=Qc(e,t),Fv=!1,Oi=Un=Vv=Fa=ha=lt=0,sn=Kl=null,Vp=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var r=31-Sn(s),a=1<<r;t|=e[r],s&=~a}return jr=t,Am(),n}function gM(e,t){Se=null,ge.H=gf,t===au||t===Mm?(t=_1(),Oe=3):t===JA?(t=_1(),Oe=4):Oe=t===FT?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,xn=t,Ee===null&&(lt=1,vf(e,Bn(t,e.current)))}function pM(){var e=ge.H;return ge.H=gf,e===null?gf:e}function xM(){var e=ge.A;return ge.A=cJ,e}function Yp(){lt=4,Wr||(Te&4194048)!==Te&&Gn.current!==null||(il=!0),!(ha&134217727)&&!(Fa&134217727)||Ze===null||Kr(Ze,Te,Un,!1)}function sg(e,t,n){var s=He;He|=2;var r=pM(),a=xM();(Ze!==e||Te!==t)&&(Nf=null,Ii(e,t)),t=!1;var i=lt;e:do try{if(Oe!==0&&Ee!==null){var l=Ee,c=xn;switch(Oe){case 8:Gv(),i=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(t=!0);var u=Oe;if(Oe=0,xn=null,ei(e,l,c,u),n&&il){i=0;break e}break;default:u=Oe,Oe=0,xn=null,ei(e,l,c,u)}}fJ(),i=lt;break}catch(d){gM(e,d)}while(!0);return t&&e.shellSuspendCounter++,lr=So=null,He=s,ge.H=r,ge.A=a,Ee===null&&(Ze=null,Te=0,Am()),i}function fJ(){for(;Ee!==null;)vM(Ee)}function mJ(e,t){var n=He;He|=2;var s=pM(),r=xM();Ze!==e||Te!==t?(Nf=null,wf=Ms()+500,Ii(e,t)):il=Qc(e,t);e:do try{if(Oe!==0&&Ee!==null){t=Ee;var a=xn;t:switch(Oe){case 1:Oe=0,xn=null,ei(e,t,a,1);break;case 2:case 9:if(E1(a)){Oe=0,xn=null,K1(t);break}t=function(){Oe!==2&&Oe!==9||Ze!==e||(Oe=7),Us(e)},a.then(t,t);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:E1(a)?(Oe=0,xn=null,K1(t)):(Oe=0,xn=null,ei(e,t,a,7));break;case 5:var i=null;switch(Ee.tag){case 26:i=Ee.memoizedState;case 5:case 27:var l=Ee;if(!i||PM(i)){Oe=0,xn=null;var c=l.sibling;if(c!==null)Ee=c;else{var u=l.return;u!==null?(Ee=u,$m(u)):Ee=null}break t}}Oe=0,xn=null,ei(e,t,a,5);break;case 6:Oe=0,xn=null,ei(e,t,a,6);break;case 8:Gv(),lt=6;break e;default:throw Error(Z(462))}}hJ();break}catch(d){gM(e,d)}while(!0);return lr=So=null,ge.H=s,ge.A=r,He=n,Ee!==null?0:(Ze=null,Te=0,Am(),lt)}function hJ(){for(;Ee!==null&&!$K();)vM(Ee)}function vM(e){var t=YT(e.alternate,e,jr);e.memoizedProps=e.pendingProps,t===null?$m(e):Ee=t}function K1(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=V1(n,t,t.pendingProps,t.type,void 0,Te);break;case 11:t=V1(n,t,t.pendingProps,t.type.render,t.ref,Te);break;case 5:Rv(t);default:XT(n,t),t=Ee=XA(t,jr),t=YT(n,t,jr)}e.memoizedProps=e.pendingProps,t===null?$m(e):Ee=t}function ei(e,t,n,s){lr=So=null,Rv(t),gi=null,Sc=0;var r=t.return;try{if(sJ(e,r,t,n,Te)){lt=1,vf(e,Bn(n,e.current)),Ee=null;return}}catch(a){if(r!==null)throw Ee=r,a;lt=1,vf(e,Bn(n,e.current)),Ee=null;return}t.flags&32768?(De||s===1?e=!0:il||Te&536870912?e=!1:(Wr=e=!0,(s===2||s===9||s===3||s===6)&&(s=Gn.current,s!==null&&s.tag===13&&(s.flags|=16384))),yM(t,e)):$m(t)}function $m(e){var t=e;do{if(t.flags&32768){yM(t,Wr);return}e=t.return;var n=aJ(t.alternate,t,jr);if(n!==null){Ee=n;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);lt===0&&(lt=5)}function yM(e,t){do{var n=oJ(e.alternate,e);if(n!==null){n.flags&=32767,Ee=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=n}while(e!==null);lt=6,Ee=null}function Q1(e,t,n,s,r,a,i,l,c){e.cancelPendingCommit=null;do Pm();while(Ot!==0);if(He&6)throw Error(Z(327));if(t!==null){if(t===e.current)throw Error(Z(177));if(a=t.lanes|t.childLanes,a|=yv,GK(e,n,a,i,l,c),e===Ze&&(Ee=Ze=null,Te=0),Bi=t,aa=e,pi=n,qp=a,Gp=r,fM=s,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,vJ(rf,function(){return SM(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,t.subtreeFlags&13878||s){s=ge.T,ge.T=null,r=ze.p,ze.p=2,i=He,He|=4;try{iJ(e,t,n)}finally{He=i,ze.p=r,ge.T=s}}Ot=1,bM(),wM(),NM()}}function bM(){if(Ot===1){Ot=0;var e=aa,t=Bi,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=ge.T,ge.T=null;var s=ze.p;ze.p=2;var r=He;He|=4;try{aM(t,e);var a=Qp,i=HA(e.containerInfo),l=a.focusedElem,c=a.selectionRange;if(i!==l&&l&&l.ownerDocument&&IA(l.ownerDocument.documentElement,l)){if(c!==null&&vv(l)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var h=m.getSelection(),p=l.textContent.length,v=Math.min(c.start,p),w=c.end===void 0?v:Math.min(c.end,p);!h.extend&&v>w&&(i=w,w=v,v=i);var x=y1(l,v),b=y1(l,w);if(x&&b&&(h.rangeCount!==1||h.anchorNode!==x.node||h.anchorOffset!==x.offset||h.focusNode!==b.node||h.focusOffset!==b.offset)){var y=f.createRange();y.setStart(x.node,x.offset),h.removeAllRanges(),v>w?(h.addRange(y),h.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),h.addRange(y))}}}}for(f=[],h=l;h=h.parentNode;)h.nodeType===1&&f.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var N=f[l];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}Tf=!!Kp,Qp=Kp=null}finally{He=r,ze.p=s,ge.T=n}}e.current=t,Ot=2}}function wM(){if(Ot===2){Ot=0;var e=aa,t=Bi,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=ge.T,ge.T=null;var s=ze.p;ze.p=2;var r=He;He|=4;try{tM(e,t.alternate,t)}finally{He=r,ze.p=s,ge.T=n}}Ot=3}}function NM(){if(Ot===4||Ot===3){Ot=0,PK();var e=aa,t=Bi,n=pi,s=fM;t.subtreeFlags&10256||t.flags&10256?Ot=5:(Ot=0,Bi=aa=null,jM(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(ra=null),dv(n),t=t.stateNode,jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Kc,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=ge.T,r=ze.p,ze.p=2,ge.T=null;try{for(var a=e.onRecoverableError,i=0;i<s.length;i++){var l=s[i];a(l.value,{componentStack:l.stack})}}finally{ge.T=t,ze.p=r}}pi&3&&Pm(),Us(e),r=e.pendingLanes,n&4194090&&r&42?e===Zp?Ql++:(Ql=0,Zp=e):Ql=0,cu(0)}}function jM(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ru(t)))}function Pm(e){return bM(),wM(),NM(),SM()}function SM(){if(Ot!==5)return!1;var e=aa,t=qp;qp=0;var n=dv(pi),s=ge.T,r=ze.p;try{ze.p=32>n?32:n,ge.T=null,n=Gp,Gp=null;var a=aa,i=pi;if(Ot=0,Bi=aa=null,pi=0,He&6)throw Error(Z(331));var l=He;if(He|=4,uM(a.current),iM(a,a.current,i,n),He=l,cu(0,!1),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Kc,a)}catch{}return!0}finally{ze.p=r,ge.T=s,jM(e,t)}}function J1(e,t,n){t=Bn(n,t),t=Ip(e.stateNode,t,2),e=sa(e,t,2),e!==null&&(Jc(e,2),Us(e))}function qe(e,t,n){if(e.tag===3)J1(e,e,n);else for(;t!==null;){if(t.tag===3){J1(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ra===null||!ra.has(s))){e=Bn(n,e),n=HT(2),s=sa(t,n,2),s!==null&&(UT(n,s,t,e),Jc(s,2),Us(s));break}}t=t.return}}function rg(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new uJ;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(Fv=!0,r.add(n),e=gJ.bind(null,e,t,n),t.then(e,e))}function gJ(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ze===e&&(Te&n)===n&&(lt===4||lt===3&&(Te&62914560)===Te&&300>Ms()-qv?!(He&2)&&Ii(e,0):Vv|=n,Oi===Te&&(Oi=0)),Us(e)}function kM(e,t){t===0&&(t=bA()),e=ol(e,t),e!==null&&(Jc(e,t),Us(e))}function pJ(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kM(e,n)}function xJ(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(Z(314))}s!==null&&s.delete(t),kM(e,n)}function vJ(e,t){return cv(e,t)}var jf=null,Io=null,Xp=!1,Sf=!1,ag=!1,Va=0;function Us(e){e!==Io&&e.next===null&&(Io===null?jf=Io=e:Io=Io.next=e),Sf=!0,Xp||(Xp=!0,bJ())}function cu(e,t){if(!ag&&Sf){ag=!0;do for(var n=!1,s=jf;s!==null;){if(e!==0){var r=s.pendingLanes;if(r===0)var a=0;else{var i=s.suspendedLanes,l=s.pingedLanes;a=(1<<31-Sn(42|e)+1)-1,a&=r&~(i&~l),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,eN(s,a))}else a=Te,a=km(s,s===Ze?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(a&3)||Qc(s,a)||(n=!0,eN(s,a));s=s.next}while(n);ag=!1}}function yJ(){CM()}function CM(){Sf=Xp=!1;var e=0;Va!==0&&(_J()&&(e=Va),Va=0);for(var t=Ms(),n=null,s=jf;s!==null;){var r=s.next,a=EM(s,t);a===0?(s.next=null,n===null?jf=r:n.next=r,r===null&&(Io=n)):(n=s,(e!==0||a&3)&&(Sf=!0)),s=r}cu(e)}function EM(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var i=31-Sn(a),l=1<<i,c=r[i];c===-1?(!(l&n)||l&s)&&(r[i]=qK(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}if(t=Ze,n=Te,n=km(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,n===0||e===t&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Mh(s),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Qc(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&Mh(s),dv(n)){case 2:case 8:n=xA;break;case 32:n=rf;break;case 268435456:n=vA;break;default:n=rf}return s=_M.bind(null,e),n=cv(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&Mh(s),e.callbackPriority=2,e.callbackNode=null,2}function _M(e,t){if(Ot!==0&&Ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Pm()&&e.callbackNode!==n)return null;var s=Te;return s=km(e,e===Ze?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(hM(e,s,t),EM(e,Ms()),e.callbackNode!=null&&e.callbackNode===n?_M.bind(null,e):null)}function eN(e,t){if(Pm())return null;hM(e,t,!0)}function bJ(){TJ(function(){He&6?cv(pA,yJ):CM()})}function Zv(){return Va===0&&(Va=yA()),Va}function tN(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fd(""+e)}function nN(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function wJ(e,t,n,s,r){if(t==="submit"&&n&&n.stateNode===r){var a=tN((r[cn]||null).action),i=s.submitter;i&&(t=(t=i[cn]||null)?tN(t.formAction):i.getAttribute("formAction"),t!==null&&(a=t,i=null));var l=new Cm("action","action",null,s,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Va!==0){var c=i?nN(r,i):new FormData(r);Op(n,{pending:!0,data:c,method:r.method,action:a},null,c)}}else typeof a=="function"&&(l.preventDefault(),c=i?nN(r,i):new FormData(r),Op(n,{pending:!0,data:c,method:r.method,action:a},a,c))},currentTarget:r}]})}}for(var og=0;og<Cp.length;og++){var ig=Cp[og],NJ=ig.toLowerCase(),jJ=ig[0].toUpperCase()+ig.slice(1);us(NJ,"on"+jJ)}us(FA,"onAnimationEnd");us(VA,"onAnimationIteration");us(qA,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us(IQ,"onTransitionRun");us(HQ,"onTransitionStart");us(UQ,"onTransitionCancel");us(GA,"onTransitionEnd");Ri("onMouseEnter",["mouseout","mouseover"]);Ri("onMouseLeave",["mouseout","mouseover"]);Ri("onPointerEnter",["pointerout","pointerover"]);Ri("onPointerLeave",["pointerout","pointerover"]);wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SJ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kc));function AM(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&r.isPropagationStopped())break e;a=l,r.currentTarget=u;try{a(r)}catch(d){xf(d)}r.currentTarget=null,a=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&r.isPropagationStopped())break e;a=l,r.currentTarget=u;try{a(r)}catch(d){xf(d)}r.currentTarget=null,a=c}}}}function Ce(e,t){var n=t[yp];n===void 0&&(n=t[yp]=new Set);var s=e+"__bubble";n.has(s)||(TM(t,e,2,!1),n.add(s))}function lg(e,t,n){var s=0;t&&(s|=4),TM(n,e,s,t)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function Yv(e){if(!e[Ku]){e[Ku]=!0,SA.forEach(function(n){n!=="selectionchange"&&(SJ.has(n)||lg(n,!1,e),lg(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ku]||(t[Ku]=!0,lg("selectionchange",!1,t))}}function TM(e,t,n,s){switch(UM(t)){case 2:var r=KJ;break;case 8:r=QJ;break;default:r=Qv}n=r.bind(null,t,n,e),r=void 0,!jp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function cg(e,t,n,s,r){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===r)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&i.stateNode.containerInfo===r)return;i=i.return}for(;l!==null;){if(i=qo(l),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){s=a=i;continue e}l=l.parentNode}}s=s.return}RA(function(){var u=a,d=hv(n),f=[];e:{var m=ZA.get(e);if(m!==void 0){var h=Cm,p=e;switch(e){case"keypress":if(hd(n)===0)break e;case"keydown":case"keyup":h=vQ;break;case"focusin":p="focus",h=Bh;break;case"focusout":p="blur",h=Bh;break;case"beforeblur":case"afterblur":h=Bh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=c1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=oQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=wQ;break;case FA:case VA:case qA:h=cQ;break;case GA:h=jQ;break;case"scroll":case"scrollend":h=rQ;break;case"wheel":h=kQ;break;case"copy":case"cut":case"paste":h=dQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=d1;break;case"toggle":case"beforetoggle":h=EQ}var v=(t&4)!==0,w=!v&&(e==="scroll"||e==="scrollend"),x=v?m!==null?m+"Capture":null:m;v=[];for(var b=u,y;b!==null;){var N=b;if(y=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||y===null||x===null||(N=yc(b,x),N!=null&&v.push(Cc(b,N,y))),w)break;b=b.return}0<v.length&&(m=new h(m,p,null,n,d),f.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==Np&&(p=n.relatedTarget||n.fromElement)&&(qo(p)||p[rl]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?qo(p):null,p!==null&&(w=Wc(p),v=p.tag,p!==w||v!==5&&v!==27&&v!==6)&&(p=null)):(h=null,p=u),h!==p)){if(v=c1,N="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=d1,N="onPointerLeave",x="onPointerEnter",b="pointer"),w=h==null?m:zl(h),y=p==null?m:zl(p),m=new v(N,b+"leave",h,n,d),m.target=w,m.relatedTarget=y,N=null,qo(d)===u&&(v=new v(x,b+"enter",p,n,d),v.target=y,v.relatedTarget=w,N=v),w=N,h&&p)t:{for(v=h,x=p,b=0,y=v;y;y=$o(y))b++;for(y=0,N=x;N;N=$o(N))y++;for(;0<b-y;)v=$o(v),b--;for(;0<y-b;)x=$o(x),y--;for(;b--;){if(v===x||x!==null&&v===x.alternate)break t;v=$o(v),x=$o(x)}v=null}else v=null;h!==null&&sN(f,m,h,v,!1),p!==null&&w!==null&&sN(f,w,p,v,!0)}}e:{if(m=u?zl(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var j=g1;else if(h1(m))if(OA)j=PQ;else{j=LQ;var S=zQ}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&mv(u.elementType)&&(j=g1):j=$Q;if(j&&(j=j(e,u))){PA(f,j,n,d);break e}S&&S(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&wp(m,"number",m.value)}switch(S=u?zl(u):window,e){case"focusin":(h1(S)||S.contentEditable==="true")&&(Yo=S,Sp=u,Ul=null);break;case"focusout":Ul=Sp=Yo=null;break;case"mousedown":kp=!0;break;case"contextmenu":case"mouseup":case"dragend":kp=!1,b1(f,n,d);break;case"selectionchange":if(BQ)break;case"keydown":case"keyup":b1(f,n,d)}var k;if(xv)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Zo?LA(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(zA&&n.locale!=="ko"&&(Zo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Zo&&(k=DA()):(Xr=d,gv="value"in Xr?Xr.value:Xr.textContent,Zo=!0)),S=kf(u,E),0<S.length&&(E=new u1(E,e,null,n,d),f.push({event:E,listeners:S}),k?E.data=k:(k=$A(n),k!==null&&(E.data=k)))),(k=AQ?TQ(e,n):MQ(e,n))&&(E=kf(u,"onBeforeInput"),0<E.length&&(S=new u1("onBeforeInput","beforeinput",null,n,d),f.push({event:S,listeners:E}),S.data=k)),wJ(f,e,u,n,d)}AM(f,t)})}function Cc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function kf(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,a=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||a===null||(r=yc(e,n),r!=null&&s.unshift(Cc(e,r,a)),r=yc(e,t),r!=null&&s.push(Cc(e,r,a))),e.tag===3)return s;e=e.return}return[]}function $o(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sN(e,t,n,s,r){for(var a=t._reactName,i=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||u===null||(c=u,r?(u=yc(n,a),u!=null&&i.unshift(Cc(n,u,c))):r||(u=yc(n,a),u!=null&&i.push(Cc(n,u,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var kJ=/\r\n?/g,CJ=/\u0000|\uFFFD/g;function rN(e){return(typeof e=="string"?e:""+e).replace(kJ,`
`).replace(CJ,"")}function MM(e,t){return t=rN(t),rN(e)===t}function Om(){}function Ue(e,t,n,s,r,a){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Di(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Di(e,""+s);break;case"className":Vu(e,"class",s);break;case"tabIndex":Vu(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Vu(e,n,s);break;case"style":MA(e,s,a);break;case"data":if(t!=="object"){Vu(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=fd(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(t!=="input"&&Ue(e,t,"name",r.name,r,null),Ue(e,t,"formEncType",r.formEncType,r,null),Ue(e,t,"formMethod",r.formMethod,r,null),Ue(e,t,"formTarget",r.formTarget,r,null)):(Ue(e,t,"encType",r.encType,r,null),Ue(e,t,"method",r.method,r,null),Ue(e,t,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=fd(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=Om);break;case"onScroll":s!=null&&Ce("scroll",e);break;case"onScrollEnd":s!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Z(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(Z(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=fd(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),dd(e,"popover",s);break;case"xlinkActuate":Qs(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Qs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Qs(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Qs(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Qs(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Qs(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Qs(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Qs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Qs(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":dd(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=nQ.get(n)||n,dd(e,n,s))}}function Wp(e,t,n,s,r,a){switch(n){case"style":MA(e,s,a);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Z(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(Z(60));e.innerHTML=n}}break;case"children":typeof s=="string"?Di(e,s):(typeof s=="number"||typeof s=="bigint")&&Di(e,""+s);break;case"onScroll":s!=null&&Ce("scroll",e);break;case"onScrollEnd":s!=null&&Ce("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Om);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kA.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),a=e[cn]||null,a=a!=null?a[n]:null,typeof a=="function"&&e.removeEventListener(t,a,r),typeof s=="function")){typeof a!="function"&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,r);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):dd(e,n,s)}}}function Bt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var s=!1,r=!1,a;for(a in n)if(n.hasOwnProperty(a)){var i=n[a];if(i!=null)switch(a){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,t));default:Ue(e,t,a,i,n,null)}}r&&Ue(e,t,"srcSet",n.srcSet,n,null),s&&Ue(e,t,"src",n.src,n,null);return;case"input":Ce("invalid",e);var l=a=i=r=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(d!=null)switch(s){case"name":r=d;break;case"type":i=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(Z(137,t));break;default:Ue(e,t,s,d,n,null)}}_A(e,a,l,c,u,i,r,!1),af(e);return;case"select":Ce("invalid",e),s=i=a=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":a=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:Ue(e,t,r,l,n,null)}t=a,n=i,e.multiple=!!s,t!=null?ui(e,!!s,t,!1):n!=null&&ui(e,!!s,n,!0);return;case"textarea":Ce("invalid",e),a=r=s=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":r=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Z(91));break;default:Ue(e,t,i,l,n,null)}TA(e,s,r,a),af(e);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ue(e,t,c,s,n,null)}return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(s=0;s<kc.length;s++)Ce(kc[s],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,t));default:Ue(e,t,u,s,n,null)}return;default:if(mv(t)){for(d in n)n.hasOwnProperty(d)&&(s=n[d],s!==void 0&&Wp(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Ue(e,t,l,s,n,null))}function EJ(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,i=null,l=null,c=null,u=null,d=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&f!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":c=f;default:s.hasOwnProperty(h)||Ue(e,t,h,null,s,f)}}for(var m in s){var h=s[m];if(f=n[m],s.hasOwnProperty(m)&&(h!=null||f!=null))switch(m){case"type":a=h;break;case"name":r=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":i=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(Z(137,t));break;default:h!==f&&Ue(e,t,m,h,s,f)}}bp(e,i,l,c,u,d,a,r);return;case"select":h=i=l=m=null;for(a in n)if(c=n[a],n.hasOwnProperty(a)&&c!=null)switch(a){case"value":break;case"multiple":h=c;default:s.hasOwnProperty(a)||Ue(e,t,a,null,s,c)}for(r in s)if(a=s[r],c=n[r],s.hasOwnProperty(r)&&(a!=null||c!=null))switch(r){case"value":m=a;break;case"defaultValue":l=a;break;case"multiple":i=a;default:a!==c&&Ue(e,t,r,a,s,c)}t=l,n=i,s=h,m!=null?ui(e,!!n,m,!1):!!s!=!!n&&(t!=null?ui(e,!!n,t,!0):ui(e,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ue(e,t,l,null,s,r)}for(i in s)if(r=s[i],a=n[i],s.hasOwnProperty(i)&&(r!=null||a!=null))switch(i){case"value":m=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(Z(91));break;default:r!==a&&Ue(e,t,i,r,s,a)}AA(e,m,h);return;case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&m!=null&&!s.hasOwnProperty(p))switch(p){case"selected":e.selected=!1;break;default:Ue(e,t,p,null,s,m)}for(c in s)if(m=s[c],h=n[c],s.hasOwnProperty(c)&&m!==h&&(m!=null||h!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ue(e,t,c,m,s,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!s.hasOwnProperty(v)&&Ue(e,t,v,null,s,m);for(u in s)if(m=s[u],h=n[u],s.hasOwnProperty(u)&&m!==h&&(m!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(Z(137,t));break;default:Ue(e,t,u,m,s,h)}return;default:if(mv(t)){for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!==void 0&&!s.hasOwnProperty(w)&&Wp(e,t,w,void 0,s,m);for(d in s)m=s[d],h=n[d],!s.hasOwnProperty(d)||m===h||m===void 0&&h===void 0||Wp(e,t,d,m,s,h);return}}for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!s.hasOwnProperty(x)&&Ue(e,t,x,null,s,m);for(f in s)m=s[f],h=n[f],!s.hasOwnProperty(f)||m===h||m==null&&h==null||Ue(e,t,f,m,s,h)}var Kp=null,Qp=null;function Cf(e){return e.nodeType===9?e:e.ownerDocument}function aN(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function RM(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Jp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ug=null;function _J(){var e=window.event;return e&&e.type==="popstate"?e===ug?!1:(ug=e,!0):(ug=null,!1)}var DM=typeof setTimeout=="function"?setTimeout:void 0,AJ=typeof clearTimeout=="function"?clearTimeout:void 0,oN=typeof Promise=="function"?Promise:void 0,TJ=typeof queueMicrotask=="function"?queueMicrotask:typeof oN<"u"?function(e){return oN.resolve(null).then(e).catch(MJ)}:DM;function MJ(e){setTimeout(function(){throw e})}function ya(e){return e==="head"}function iN(e,t){var n=t,s=0,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(0<s&&8>s){n=s;var i=e.ownerDocument;if(n&1&&Jl(i.documentElement),n&2&&Jl(i.body),n&4)for(n=i.head,Jl(n),i=n.firstChild;i;){var l=i.nextSibling,c=i.nodeName;i[eu]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=l}}if(r===0){e.removeChild(a),Mc(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:s=n.charCodeAt(0)-48;else s=0;n=a}while(n);Mc(t)}function ex(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ex(n),fv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function RJ(e,t,n,s){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[eu])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(a=e.getAttribute("rel"),a==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(a!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(a=e.getAttribute("src"),(a!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var a=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===a)return e}else return e;if(e=ss(e.nextSibling),e===null)break}return null}function DJ(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ss(e.nextSibling),e===null))return null;return e}function tx(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function zJ(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function ss(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var nx=null;function lN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function zM(e,t,n){switch(t=Cf(n),e){case"html":if(e=t.documentElement,!e)throw Error(Z(452));return e;case"head":if(e=t.head,!e)throw Error(Z(453));return e;case"body":if(e=t.body,!e)throw Error(Z(454));return e;default:throw Error(Z(451))}}function Jl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);fv(e)}var Zn=new Map,cN=new Set;function Ef(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Er=ze.d;ze.d={f:LJ,r:$J,D:PJ,C:OJ,L:BJ,m:IJ,X:UJ,S:HJ,M:FJ};function LJ(){var e=Er.f(),t=Lm();return e||t}function $J(e){var t=al(e);t!==null&&t.tag===5&&t.type==="form"?ET(t):Er.r(e)}var ll=typeof document>"u"?null:document;function LM(e,t,n){var s=ll;if(s&&typeof t=="string"&&t){var r=On(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),cN.has(r)||(cN.add(r),e={rel:e,crossOrigin:n,href:t},s.querySelector(r)===null&&(t=s.createElement("link"),Bt(t,"link",e),Tt(t),s.head.appendChild(t)))}}function PJ(e){Er.D(e),LM("dns-prefetch",e,null)}function OJ(e,t){Er.C(e,t),LM("preconnect",e,t)}function BJ(e,t,n){Er.L(e,t,n);var s=ll;if(s&&e&&t){var r='link[rel="preload"][as="'+On(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+On(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+On(n.imageSizes)+'"]')):r+='[href="'+On(e)+'"]';var a=r;switch(t){case"style":a=Hi(e);break;case"script":a=cl(e)}Zn.has(a)||(e=Xe({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Zn.set(a,e),s.querySelector(r)!==null||t==="style"&&s.querySelector(uu(a))||t==="script"&&s.querySelector(du(a))||(t=s.createElement("link"),Bt(t,"link",e),Tt(t),s.head.appendChild(t)))}}function IJ(e,t){Er.m(e,t);var n=ll;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+On(s)+'"][href="'+On(e)+'"]',a=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=cl(e)}if(!Zn.has(a)&&(e=Xe({rel:"modulepreload",href:e},t),Zn.set(a,e),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(du(a)))return}s=n.createElement("link"),Bt(s,"link",e),Tt(s),n.head.appendChild(s)}}}function HJ(e,t,n){Er.S(e,t,n);var s=ll;if(s&&e){var r=ci(s).hoistableStyles,a=Hi(e);t=t||"default";var i=r.get(a);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(uu(a)))l.loading=5;else{e=Xe({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Zn.get(a))&&Xv(e,n);var c=i=s.createElement("link");Tt(c),Bt(c,"link",e),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,wd(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},r.set(a,i)}}}function UJ(e,t){Er.X(e,t);var n=ll;if(n&&e){var s=ci(n).hoistableScripts,r=cl(e),a=s.get(r);a||(a=n.querySelector(du(r)),a||(e=Xe({src:e,async:!0},t),(t=Zn.get(r))&&Wv(e,t),a=n.createElement("script"),Tt(a),Bt(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(r,a))}}function FJ(e,t){Er.M(e,t);var n=ll;if(n&&e){var s=ci(n).hoistableScripts,r=cl(e),a=s.get(r);a||(a=n.querySelector(du(r)),a||(e=Xe({src:e,async:!0,type:"module"},t),(t=Zn.get(r))&&Wv(e,t),a=n.createElement("script"),Tt(a),Bt(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(r,a))}}function uN(e,t,n,s){var r=(r=ta.current)?Ef(r):null;if(!r)throw Error(Z(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Hi(n.href),n=ci(r).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Hi(n.href);var a=ci(r).hoistableStyles,i=a.get(e);if(i||(r=r.ownerDocument||r,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,i),(a=r.querySelector(uu(e)))&&!a._p&&(i.instance=a,i.state.loading=5),Zn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Zn.set(e,n),a||VJ(r,e,n,i.state))),t&&s===null)throw Error(Z(528,""));return i}if(t&&s!==null)throw Error(Z(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=cl(n),n=ci(r).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(Z(444,e))}}function Hi(e){return'href="'+On(e)+'"'}function uu(e){return'link[rel="stylesheet"]['+e+"]"}function $M(e){return Xe({},e,{"data-precedence":e.precedence,precedence:null})}function VJ(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Bt(t,"link",n),Tt(t),e.head.appendChild(t))}function cl(e){return'[src="'+On(e)+'"]'}function du(e){return"script[async]"+e}function dN(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+On(n.href)+'"]');if(s)return t.instance=s,Tt(s),s;var r=Xe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Tt(s),Bt(s,"style",r),wd(s,n.precedence,e),t.instance=s;case"stylesheet":r=Hi(n.href);var a=e.querySelector(uu(r));if(a)return t.state.loading|=4,t.instance=a,Tt(a),a;s=$M(n),(r=Zn.get(r))&&Xv(s,r),a=(e.ownerDocument||e).createElement("link"),Tt(a);var i=a;return i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Bt(a,"link",s),t.state.loading|=4,wd(a,n.precedence,e),t.instance=a;case"script":return a=cl(n.src),(r=e.querySelector(du(a)))?(t.instance=r,Tt(r),r):(s=n,(r=Zn.get(a))&&(s=Xe({},n),Wv(s,r)),e=e.ownerDocument||e,r=e.createElement("script"),Tt(r),Bt(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(Z(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,wd(s,n.precedence,e));return t.instance}function wd(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,a=r,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)a=l;else if(a!==r)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Xv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Wv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Nd=null;function fN(e,t,n){if(Nd===null){var s=new Map,r=Nd=new Map;r.set(n,s)}else r=Nd,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var a=n[r];if(!(a[eu]||a[Ut]||e==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var i=a.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(a):s.set(i,[a])}}return s}function mN(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function qJ(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function PM(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Ec=null;function GJ(){}function ZJ(e,t,n){if(Ec===null)throw Error(Z(475));var s=Ec;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Hi(n.href),a=e.querySelector(uu(r));if(a){e=a._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=_f.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=a,Tt(a);return}a=e.ownerDocument||e,n=$M(n),(r=Zn.get(r))&&Xv(n,r),a=a.createElement("link"),Tt(a);var i=a;i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Bt(a,"link",n),t.instance=a}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=_f.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function YJ(){if(Ec===null)throw Error(Z(475));var e=Ec;return e.stylesheets&&e.count===0&&sx(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&sx(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function _f(){if(this.count--,this.count===0){if(this.stylesheets)sx(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Af=null;function sx(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Af=new Map,t.forEach(XJ,e),Af=null,_f.call(e))}function XJ(e,t){if(!(t.state.loading&4)){var n=Af.get(e);if(n)var s=n.get(null);else{n=new Map,Af.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var i=r[a];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(n.set(i.dataset.precedence,i),s=i)}s&&n.set(null,s)}r=t.instance,i=r.getAttribute("data-precedence"),a=n.get(i)||s,a===s&&n.set(null,r),n.set(i,r),this.count++,s=_f.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),a?a.parentNode.insertBefore(r,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var _c={$$typeof:ar,Provider:null,Consumer:null,_currentValue:Oa,_currentValue2:Oa,_threadCount:0};function WJ(e,t,n,s,r,a,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rh(0),this.hiddenUpdates=Rh(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function OM(e,t,n,s,r,a,i,l,c,u,d,f){return e=new WJ(e,t,n,i,l,c,u,f),t=1,a===!0&&(t|=24),a=bn(3,null,null,t),e.current=a,a.stateNode=e,t=Sv(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:s,isDehydrated:n,cache:t},Cv(a),e}function BM(e){return e?(e=Ko,e):Ko}function IM(e,t,n,s,r,a){r=BM(r),s.context===null?s.context=r:s.pendingContext=r,s=na(t),s.payload={element:n},a=a===void 0?null:a,a!==null&&(s.callback=a),n=sa(e,s,t),n!==null&&(Cn(n,e,t),ql(n,e,t))}function hN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Kv(e,t){hN(e,t),(e=e.alternate)&&hN(e,t)}function HM(e){if(e.tag===13){var t=ol(e,67108864);t!==null&&Cn(t,e,67108864),Kv(e,67108864)}}var Tf=!0;function KJ(e,t,n,s){var r=ge.T;ge.T=null;var a=ze.p;try{ze.p=2,Qv(e,t,n,s)}finally{ze.p=a,ge.T=r}}function QJ(e,t,n,s){var r=ge.T;ge.T=null;var a=ze.p;try{ze.p=8,Qv(e,t,n,s)}finally{ze.p=a,ge.T=r}}function Qv(e,t,n,s){if(Tf){var r=rx(s);if(r===null)cg(e,t,s,Mf,n),gN(e,s);else if(eee(r,e,t,n,s))s.stopPropagation();else if(gN(e,s),t&4&&-1<JJ.indexOf(e)){for(;r!==null;){var a=al(r);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var i=Ca(a.pendingLanes);if(i!==0){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var c=1<<31-Sn(i);l.entanglements[1]|=c,i&=~c}Us(a),!(He&6)&&(wf=Ms()+500,cu(0))}}break;case 13:l=ol(a,2),l!==null&&Cn(l,a,2),Lm(),Kv(a,2)}if(a=rx(s),a===null&&cg(e,t,s,Mf,n),a===r)break;r=a}r!==null&&s.stopPropagation()}else cg(e,t,s,null,n)}}function rx(e){return e=hv(e),Jv(e)}var Mf=null;function Jv(e){if(Mf=null,e=qo(e),e!==null){var t=Wc(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=fA(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Mf=e,null}function UM(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(OK()){case pA:return 2;case xA:return 8;case rf:case BK:return 32;case vA:return 268435456;default:return 32}default:return 32}}var ax=!1,oa=null,ia=null,la=null,Ac=new Map,Tc=new Map,Gr=[],JJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gN(e,t){switch(e){case"focusin":case"focusout":oa=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":Ac.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(t.pointerId)}}function El(e,t,n,s,r,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[r]},t!==null&&(t=al(t),t!==null&&HM(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function eee(e,t,n,s,r){switch(t){case"focusin":return oa=El(oa,e,t,n,s,r),!0;case"dragenter":return ia=El(ia,e,t,n,s,r),!0;case"mouseover":return la=El(la,e,t,n,s,r),!0;case"pointerover":var a=r.pointerId;return Ac.set(a,El(Ac.get(a)||null,e,t,n,s,r)),!0;case"gotpointercapture":return a=r.pointerId,Tc.set(a,El(Tc.get(a)||null,e,t,n,s,r)),!0}return!1}function FM(e){var t=qo(e.target);if(t!==null){var n=Wc(t);if(n!==null){if(t=n.tag,t===13){if(t=fA(n),t!==null){e.blockedOn=t,ZK(e.priority,function(){if(n.tag===13){var s=kn();s=uv(s);var r=ol(n,s);r!==null&&Cn(r,n,s),Kv(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=rx(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Np=s,n.target.dispatchEvent(s),Np=null}else return t=al(n),t!==null&&HM(t),e.blockedOn=n,!1;t.shift()}return!0}function pN(e,t,n){jd(e)&&n.delete(t)}function tee(){ax=!1,oa!==null&&jd(oa)&&(oa=null),ia!==null&&jd(ia)&&(ia=null),la!==null&&jd(la)&&(la=null),Ac.forEach(pN),Tc.forEach(pN)}function Qu(e,t){e.blockedOn===t&&(e.blockedOn=null,ax||(ax=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,tee)))}var Ju=null;function xN(e){Ju!==e&&(Ju=e,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,function(){Ju===e&&(Ju=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],r=e[t+2];if(typeof s!="function"){if(Jv(s||n)===null)continue;break}var a=al(n);a!==null&&(e.splice(t,3),t-=3,Op(a,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Mc(e){function t(c){return Qu(c,e)}oa!==null&&Qu(oa,e),ia!==null&&Qu(ia,e),la!==null&&Qu(la,e),Ac.forEach(t),Tc.forEach(t);for(var n=0;n<Gr.length;n++){var s=Gr[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Gr.length&&(n=Gr[0],n.blockedOn===null);)FM(n),n.blockedOn===null&&Gr.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],a=n[s+1],i=r[cn]||null;if(typeof a=="function")i||xN(n);else if(i){var l=null;if(a&&a.hasAttribute("formAction")){if(r=a,i=a[cn]||null)l=i.formAction;else if(Jv(r)!==null)continue}else l=i.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),xN(n)}}}function ey(e){this._internalRoot=e}Bm.prototype.render=ey.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));var n=t.current,s=kn();IM(n,s,e,t,null,null)};Bm.prototype.unmount=ey.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;IM(e.current,2,null,e,null,null),Lm(),t[rl]=null}};function Bm(e){this._internalRoot=e}Bm.prototype.unstable_scheduleHydration=function(e){if(e){var t=jA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gr.length&&t!==0&&t<Gr[n].priority;n++);Gr.splice(n,0,e),n===0&&FM(e)}};var vN=uA.version;if(vN!=="19.1.0")throw Error(Z(527,vN,"19.1.0"));ze.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=MK(t),e=e!==null?mA(e):null,e=e===null?null:e.stateNode,e};var nee={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{Kc=ed.inject(nee),jn=ed}catch{}}Sm.createRoot=function(e,t){if(!dA(e))throw Error(Z(299));var n=!1,s="",r=OT,a=BT,i=IT,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=OM(e,1,!1,null,null,n,s,r,a,i,l,null),e[rl]=t.current,Yv(e),new ey(t)};Sm.hydrateRoot=function(e,t,n){if(!dA(e))throw Error(Z(299));var s=!1,r="",a=OT,i=BT,l=IT,c=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(i=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),t=OM(e,1,!0,t,n??null,s,r,a,i,l,c,u),t.context=BM(null),n=t.current,s=kn(),s=uv(s),r=na(s),r.callback=null,sa(n,r,s),n=s,t.current.lanes=n,Jc(t,n),Us(t),e[rl]=t.current,Yv(e),new Bm(t)};Sm.version="19.1.0";function VM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VM)}catch(e){console.error(e)}}VM(),iA.exports=Sm;var see=iA.exports;see.createRoot(document.getElementById("root")).render(o.jsx(g.StrictMode,{children:o.jsx(_K,{showLoadingIndicator:!0,children:o.jsx(yK,{children:o.jsx(EK,{})})})}));
